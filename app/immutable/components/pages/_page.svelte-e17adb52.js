import{_ as O0}from"../../chunks/preload-helper-41c905a7.js";import{S as st,i as rt,s as kt,k,q,a as U,l as T,m as I,r as z,h as b,c as W,n as S,b as H,H as g,C as Xe,o as Mi,p as lt,J as _e,e as et,D as ls,f as B,g as He,t as G,d as qe,E as as,F as cs,G as us,K as br,L as Ze,v as Ut,x as ke,y as Oe,z as Te,u as Le,A as Ie,M as Mn,N as Ft,O as Xr,P as Qr,Q as Zl,R as an,T as Bn,w as wn,U as Pl,V as BN,W as Yu,X as Ju,Y as xe,Z as uu,_ as Ro,$ as xd,a0 as cn,a1 as nr,a2 as ir,a3 as Mh,a4 as Ws,a5 as Js,a6 as R0,a7 as ac,a8 as Zu,a9 as $d,aa as LN,ab as Ms,B as oi,ac as oT,ad as mg,ae as UN,af as Yb,ag as WN,ah as VN,ai as FN,aj as lT,ak as jN,I as HN}from"../../chunks/index-dd83a328.js";import{w as qN,b as zN}from"../../chunks/paths-76ddbbff.js";const Ye={STR:"pc_strength",DEX:"pc_dexterity",CON:"pc_constitution",INT:"pc_intelligence",WIS:"pc_wisdom",CHA:"pc_charisma"},pg={[Ye.STR]:"Strength",[Ye.DEX]:"Dexterity",[Ye.CON]:"Constitution",[Ye.INT]:"Intelligence",[Ye.WIS]:"Wisdom",[Ye.CHA]:"Charisma"},zs={[Ye.STR]:"Str",[Ye.DEX]:"Dex",[Ye.CON]:"Con",[Ye.INT]:"Int",[Ye.WIS]:"Wis",[Ye.CHA]:"Cha",ANIMAL_HANDLING:"AnHan"};var Et=(n=>(n.d2="1d2",n.d3="1d3",n.d4="1d4",n.d5="1d5",n.d6="1d6",n.d8="1d8",n.d10="1d10",n.d12="1d12",n.d20="1d20",n))(Et||{});const As=(n,e=!1)=>`${n>=0?"+":"-"}${e?" ":""}${Math.abs(n)}`,Jb=n=>n?"Major":"Minor",Zi=(...n)=>n.map(t=>typeof t=="object"?Object.keys(t).filter(i=>t[i]).join(" "):t).join(" "),Zb=n=>n<0?"Cant' Crit":n===0?"20":`${20-n} to 20`;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},GN=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const s=n[t++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=n[t++];e[i++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=n[t++],o=n[t++],l=n[t++],a=((s&7)<<18|(r&63)<<12|(o&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(a>>10)),e[i++]=String.fromCharCode(56320+(a&1023))}else{const r=n[t++],o=n[t++];e[i++]=String.fromCharCode((s&15)<<12|(r&63)<<6|o&63)}}return e.join("")},cT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const r=n[s],o=s+1<n.length,l=o?n[s+1]:0,a=s+2<n.length,c=a?n[s+2]:0,u=r>>2,f=(r&3)<<4|l>>4;let h=(l&15)<<2|c>>6,d=c&63;a||(d=64,o||(h=64)),i.push(t[u],t[f],t[h],t[d])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(aT(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):GN(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const r=t[n.charAt(s++)],l=s<n.length?t[n.charAt(s)]:0;++s;const c=s<n.length?t[n.charAt(s)]:64;++s;const f=s<n.length?t[n.charAt(s)]:64;if(++s,r==null||l==null||c==null||f==null)throw Error();const h=r<<2|l>>4;if(i.push(h),c!==64){const d=l<<4&240|c>>2;if(i.push(d),f!==64){const m=c<<6&192|f;i.push(m)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},KN=function(n){const e=aT(n);return cT.encodeByteArray(e,!0)},Bh=function(n){return KN(n).replace(/\./g,"")},XN=function(n){try{return cT.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YN=()=>QN().__FIREBASE_DEFAULTS__,JN=()=>{if(typeof process>"u"||typeof process.env>"u")return;const n={}.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},ZN=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&XN(n[1]);return e&&JSON.parse(e)},uT=()=>{try{return YN()||JN()||ZN()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},xN=n=>{var e,t;return(t=(e=uT())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},$N=n=>{const e=xN(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},eP=()=>{var n;return(n=uT())===null||n===void 0?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nP(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",s=n.iat||0,r=n.sub||n.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},n),l="";return[Bh(JSON.stringify(t)),Bh(JSON.stringify(o)),l].join(".")}function iP(){try{return typeof indexedDB=="object"}catch{return!1}}function sP(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var r;e(((r=s.error)===null||r===void 0?void 0:r.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rP="FirebaseError";class cc extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=rP,Object.setPrototypeOf(this,cc.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fT.prototype.create)}}class fT{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},s=`${this.service}/${e}`,r=this.errors[e],o=r?oP(r,i):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new cc(s,l,i)}}function oP(n,e){return n.replace(lP,(t,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const lP=/\{\$([^}]+)}/g;function gg(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const s of t){if(!i.includes(s))return!1;const r=n[s],o=e[s];if(xb(r)&&xb(o)){if(!gg(r,o))return!1}else if(r!==o)return!1}for(const s of i)if(!t.includes(s))return!1;return!0}function xb(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ml(n){return n&&n._delegate?n._delegate:n}class fu{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new tP;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(uP(e))try{this.getOrInitializeService({instanceIdentifier:dl})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const r=this.getOrInitializeService({instanceIdentifier:s});i.resolve(r)}catch{}}}}clearInstance(e=dl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=dl){return this.instances.has(e)}getOptions(e=dl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[r,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(r);i===l&&o.resolve(s)}return s}onInit(e,t){var i;const s=this.normalizeInstanceIdentifier(t),r=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;r.add(e),this.onInitCallbacks.set(s,r);const o=this.instances.get(s);return o&&e(o,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const s of i)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:cP(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=dl){return this.component?this.component.multipleInstances?e:dl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function cP(n){return n===dl?void 0:n}function uP(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new aP(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rn;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Rn||(Rn={}));const hP={debug:Rn.DEBUG,verbose:Rn.VERBOSE,info:Rn.INFO,warn:Rn.WARN,error:Rn.ERROR,silent:Rn.SILENT},dP=Rn.INFO,mP={[Rn.DEBUG]:"log",[Rn.VERBOSE]:"log",[Rn.INFO]:"info",[Rn.WARN]:"warn",[Rn.ERROR]:"error"},pP=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),s=mP[e];if(s)console[s](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class hT{constructor(e){this.name=e,this._logLevel=dP,this._logHandler=pP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Rn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?hP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Rn.DEBUG,...e),this._logHandler(this,Rn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Rn.VERBOSE,...e),this._logHandler(this,Rn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Rn.INFO,...e),this._logHandler(this,Rn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Rn.WARN,...e),this._logHandler(this,Rn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Rn.ERROR,...e),this._logHandler(this,Rn.ERROR,...e)}}const gP=(n,e)=>e.some(t=>n instanceof t);let $b,e_;function vP(){return $b||($b=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bP(){return e_||(e_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const dT=new WeakMap,vg=new WeakMap,mT=new WeakMap,up=new WeakMap,D0=new WeakMap;function _P(n){const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("success",r),n.removeEventListener("error",o)},r=()=>{t(Uo(n.result)),s()},o=()=>{i(n.error),s()};n.addEventListener("success",r),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&dT.set(t,n)}).catch(()=>{}),D0.set(e,n),e}function yP(n){if(vg.has(n))return;const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("complete",r),n.removeEventListener("error",o),n.removeEventListener("abort",o)},r=()=>{t(),s()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",r),n.addEventListener("error",o),n.addEventListener("abort",o)});vg.set(n,e)}let bg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return vg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||mT.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Uo(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function SP(n){bg=n(bg)}function EP(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(fp(this),e,...t);return mT.set(i,e.sort?e.sort():[e]),Uo(i)}:bP().includes(n)?function(...e){return n.apply(fp(this),e),Uo(dT.get(this))}:function(...e){return Uo(n.apply(fp(this),e))}}function wP(n){return typeof n=="function"?EP(n):(n instanceof IDBTransaction&&yP(n),gP(n,vP())?new Proxy(n,bg):n)}function Uo(n){if(n instanceof IDBRequest)return _P(n);if(up.has(n))return up.get(n);const e=wP(n);return e!==n&&(up.set(n,e),D0.set(e,n)),e}const fp=n=>D0.get(n);function AP(n,e,{blocked:t,upgrade:i,blocking:s,terminated:r}={}){const o=indexedDB.open(n,e),l=Uo(o);return i&&o.addEventListener("upgradeneeded",a=>{i(Uo(o.result),a.oldVersion,a.newVersion,Uo(o.transaction))}),t&&o.addEventListener("blocked",()=>t()),l.then(a=>{r&&a.addEventListener("close",()=>r()),s&&a.addEventListener("versionchange",()=>s())}).catch(()=>{}),l}const CP=["get","getKey","getAll","getAllKeys","count"],kP=["put","add","delete","clear"],hp=new Map;function t_(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(hp.get(e))return hp.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,s=kP.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(s||CP.includes(t)))return;const r=async function(o,...l){const a=this.transaction(o,s?"readwrite":"readonly");let c=a.store;return i&&(c=c.index(l.shift())),(await Promise.all([c[t](...l),s&&a.done]))[0]};return hp.set(e,r),r}SP(n=>({...n,get:(e,t,i)=>t_(e,t)||n.get(e,t,i),has:(e,t)=>!!t_(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(IP(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function IP(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const _g="@firebase/app",n_="0.9.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bl=new hT("@firebase/app"),OP="@firebase/app-compat",RP="@firebase/analytics-compat",DP="@firebase/analytics",NP="@firebase/app-check-compat",PP="@firebase/app-check",MP="@firebase/auth",BP="@firebase/auth-compat",LP="@firebase/database",UP="@firebase/database-compat",WP="@firebase/functions",VP="@firebase/functions-compat",FP="@firebase/installations",jP="@firebase/installations-compat",HP="@firebase/messaging",qP="@firebase/messaging-compat",zP="@firebase/performance",GP="@firebase/performance-compat",KP="@firebase/remote-config",XP="@firebase/remote-config-compat",QP="@firebase/storage",YP="@firebase/storage-compat",JP="@firebase/firestore",ZP="@firebase/firestore-compat",xP="firebase",$P="9.17.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yg="[DEFAULT]",e6={[_g]:"fire-core",[OP]:"fire-core-compat",[DP]:"fire-analytics",[RP]:"fire-analytics-compat",[PP]:"fire-app-check",[NP]:"fire-app-check-compat",[MP]:"fire-auth",[BP]:"fire-auth-compat",[LP]:"fire-rtdb",[UP]:"fire-rtdb-compat",[WP]:"fire-fn",[VP]:"fire-fn-compat",[FP]:"fire-iid",[jP]:"fire-iid-compat",[HP]:"fire-fcm",[qP]:"fire-fcm-compat",[zP]:"fire-perf",[GP]:"fire-perf-compat",[KP]:"fire-rc",[XP]:"fire-rc-compat",[QP]:"fire-gcs",[YP]:"fire-gcs-compat",[JP]:"fire-fst",[ZP]:"fire-fst-compat","fire-js":"fire-js",[xP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lh=new Map,Sg=new Map;function t6(n,e){try{n.container.addComponent(e)}catch(t){Bl.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Uh(n){const e=n.name;if(Sg.has(e))return Bl.debug(`There were multiple attempts to register component ${e}.`),!1;Sg.set(e,n);for(const t of Lh.values())t6(t,n);return!0}function n6(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i6={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Wo=new fT("app","Firebase",i6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s6{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new fu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Wo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r6=$P;function pT(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:yg,automaticDataCollectionEnabled:!1},e),s=i.name;if(typeof s!="string"||!s)throw Wo.create("bad-app-name",{appName:String(s)});if(t||(t=eP()),!t)throw Wo.create("no-options");const r=Lh.get(s);if(r){if(gg(t,r.options)&&gg(i,r.config))return r;throw Wo.create("duplicate-app",{appName:s})}const o=new fP(s);for(const a of Sg.values())o.addComponent(a);const l=new s6(t,i,o);return Lh.set(s,l),l}function o6(n=yg){const e=Lh.get(n);if(!e&&n===yg)return pT();if(!e)throw Wo.create("no-app",{appName:n});return e}function Aa(n,e,t){var i;let s=(i=e6[n])!==null&&i!==void 0?i:n;t&&(s+=`-${t}`);const r=s.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const l=[`Unable to register library "${s}" with version "${e}":`];r&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Bl.warn(l.join(" "));return}Uh(new fu(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l6="firebase-heartbeat-database",a6=1,hu="firebase-heartbeat-store";let dp=null;function gT(){return dp||(dp=AP(l6,a6,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(hu)}}}).catch(n=>{throw Wo.create("idb-open",{originalErrorMessage:n.message})})),dp}async function c6(n){try{return(await gT()).transaction(hu).objectStore(hu).get(vT(n))}catch(e){if(e instanceof cc)Bl.warn(e.message);else{const t=Wo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Bl.warn(t.message)}}}async function i_(n,e){try{const i=(await gT()).transaction(hu,"readwrite");return await i.objectStore(hu).put(e,vT(n)),i.done}catch(t){if(t instanceof cc)Bl.warn(t.message);else{const i=Wo.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Bl.warn(i.message)}}}function vT(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u6=1024,f6=30*24*60*60*1e3;class h6{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new m6(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=s_();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(s=>s.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const r=new Date(s.date).valueOf();return Date.now()-r<=f6}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=s_(),{heartbeatsToSend:t,unsentEntries:i}=d6(this._heartbeatsCache.heartbeats),s=Bh(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function s_(){return new Date().toISOString().substring(0,10)}function d6(n,e=u6){const t=[];let i=n.slice();for(const s of n){const r=t.find(o=>o.agent===s.agent);if(r){if(r.dates.push(s.date),r_(t)>e){r.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),r_(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class m6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return iP()?sP().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await c6(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return i_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return i_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function r_(n){return Bh(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p6(n){Uh(new fu("platform-logger",e=>new TP(e),"PRIVATE")),Uh(new fu("heartbeat",e=>new h6(e),"PRIVATE")),Aa(_g,n_,n),Aa(_g,n_,"esm2017"),Aa("fire-js","")}p6("");var g6=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Rt,N0=N0||{},Kt=g6||self;function Wh(){}function em(n){var e=typeof n;return e=e!="object"?e:n?Array.isArray(n)?"array":e:"null",e=="array"||e=="object"&&typeof n.length=="number"}function xu(n){var e=typeof n;return e=="object"&&n!=null||e=="function"}function v6(n){return Object.prototype.hasOwnProperty.call(n,mp)&&n[mp]||(n[mp]=++b6)}var mp="closure_uid_"+(1e9*Math.random()>>>0),b6=0;function _6(n,e,t){return n.call.apply(n.bind,arguments)}function y6(n,e,t){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,i),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function rs(n,e,t){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?rs=_6:rs=y6,rs.apply(null,arguments)}function Df(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var i=t.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function xi(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(i,s,r){for(var o=Array(arguments.length-2),l=2;l<arguments.length;l++)o[l-2]=arguments[l];return e.prototype[s].apply(i,o)}}function nl(){this.s=this.s,this.o=this.o}var S6=0;nl.prototype.s=!1;nl.prototype.na=function(){!this.s&&(this.s=!0,this.M(),S6!=0)&&v6(this)};nl.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const bT=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if(typeof n=="string")return typeof e!="string"||e.length!=1?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function P0(n){const e=n.length;if(0<e){const t=Array(e);for(let i=0;i<e;i++)t[i]=n[i];return t}return[]}function o_(n,e){for(let t=1;t<arguments.length;t++){const i=arguments[t];if(em(i)){const s=n.length||0,r=i.length||0;n.length=s+r;for(let o=0;o<r;o++)n[s+o]=i[o]}else n.push(i)}}function os(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}os.prototype.h=function(){this.defaultPrevented=!0};var E6=function(){if(!Kt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Kt.addEventListener("test",Wh,e),Kt.removeEventListener("test",Wh,e)}catch{}return n}();function Vh(n){return/^[\s\xa0]*$/.test(n)}var l_=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function pp(n,e){return n<e?-1:n>e?1:0}function tm(){var n=Kt.navigator;return n&&(n=n.userAgent)?n:""}function Nr(n){return tm().indexOf(n)!=-1}function M0(n){return M0[" "](n),n}M0[" "]=Wh;function w6(n){var e=k6;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}var A6=Nr("Opera"),La=Nr("Trident")||Nr("MSIE"),_T=Nr("Edge"),Eg=_T||La,yT=Nr("Gecko")&&!(tm().toLowerCase().indexOf("webkit")!=-1&&!Nr("Edge"))&&!(Nr("Trident")||Nr("MSIE"))&&!Nr("Edge"),C6=tm().toLowerCase().indexOf("webkit")!=-1&&!Nr("Edge");function ST(){var n=Kt.document;return n?n.documentMode:void 0}var Fh;e:{var gp="",vp=function(){var n=tm();if(yT)return/rv:([^\);]+)(\)|;)/.exec(n);if(_T)return/Edge\/([\d\.]+)/.exec(n);if(La)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n);if(C6)return/WebKit\/(\S+)/.exec(n);if(A6)return/(?:Version)[ \/]?(\S+)/.exec(n)}();if(vp&&(gp=vp?vp[1]:""),La){var bp=ST();if(bp!=null&&bp>parseFloat(gp)){Fh=String(bp);break e}}Fh=gp}var k6={};function T6(){return w6(function(){let n=0;const e=l_(String(Fh)).split("."),t=l_("9").split("."),i=Math.max(e.length,t.length);for(let o=0;n==0&&o<i;o++){var s=e[o]||"",r=t[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],s[0].length==0&&r[0].length==0)break;n=pp(s[1].length==0?0:parseInt(s[1],10),r[1].length==0?0:parseInt(r[1],10))||pp(s[2].length==0,r[2].length==0)||pp(s[2],r[2]),s=s[3],r=r[3]}while(n==0)}return 0<=n})}var wg;if(Kt.document&&La){var a_=ST();wg=a_||parseInt(Fh,10)||void 0}else wg=void 0;var I6=wg;function du(n,e){if(os.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(yT){e:{try{M0(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else t=="mouseover"?e=n.fromElement:t=="mouseout"&&(e=n.toElement);this.relatedTarget=e,i?(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=n.clientX!==void 0?n.clientX:n.pageX,this.clientY=n.clientY!==void 0?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType=typeof n.pointerType=="string"?n.pointerType:O6[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&du.X.h.call(this)}}xi(du,os);var O6={2:"touch",3:"pen",4:"mouse"};du.prototype.h=function(){du.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var $u="closure_listenable_"+(1e6*Math.random()|0),R6=0;function D6(n,e,t,i,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!i,this.ha=s,this.key=++R6,this.ba=this.ea=!1}function nm(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function B0(n,e,t){for(const i in n)e.call(t,n[i],i,n)}function ET(n){const e={};for(const t in n)e[t]=n[t];return e}const c_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function wT(n,e){let t,i;for(let s=1;s<arguments.length;s++){i=arguments[s];for(t in i)n[t]=i[t];for(let r=0;r<c_.length;r++)t=c_[r],Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}}function im(n){this.src=n,this.g={},this.h=0}im.prototype.add=function(n,e,t,i,s){var r=n.toString();n=this.g[r],n||(n=this.g[r]=[],this.h++);var o=Cg(n,e,i,s);return-1<o?(e=n[o],t||(e.ea=!1)):(e=new D6(e,this.src,r,!!i,s),e.ea=t,n.push(e)),e};function Ag(n,e){var t=e.type;if(t in n.g){var i=n.g[t],s=bT(i,e),r;(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(nm(e),n.g[t].length==0&&(delete n.g[t],n.h--))}}function Cg(n,e,t,i){for(var s=0;s<n.length;++s){var r=n[s];if(!r.ba&&r.listener==e&&r.capture==!!t&&r.ha==i)return s}return-1}var L0="closure_lm_"+(1e6*Math.random()|0),_p={};function AT(n,e,t,i,s){if(i&&i.once)return kT(n,e,t,i,s);if(Array.isArray(e)){for(var r=0;r<e.length;r++)AT(n,e[r],t,i,s);return null}return t=V0(t),n&&n[$u]?n.N(e,t,xu(i)?!!i.capture:!!i,s):CT(n,e,t,!1,i,s)}function CT(n,e,t,i,s,r){if(!e)throw Error("Invalid event type");var o=xu(s)?!!s.capture:!!s,l=W0(n);if(l||(n[L0]=l=new im(n)),t=l.add(e,t,i,o,r),t.proxy)return t;if(i=N6(),t.proxy=i,i.src=n,i.listener=t,n.addEventListener)E6||(s=o),s===void 0&&(s=!1),n.addEventListener(e.toString(),i,s);else if(n.attachEvent)n.attachEvent(IT(e.toString()),i);else if(n.addListener&&n.removeListener)n.addListener(i);else throw Error("addEventListener and attachEvent are unavailable.");return t}function N6(){function n(t){return e.call(n.src,n.listener,t)}const e=P6;return n}function kT(n,e,t,i,s){if(Array.isArray(e)){for(var r=0;r<e.length;r++)kT(n,e[r],t,i,s);return null}return t=V0(t),n&&n[$u]?n.O(e,t,xu(i)?!!i.capture:!!i,s):CT(n,e,t,!0,i,s)}function TT(n,e,t,i,s){if(Array.isArray(e))for(var r=0;r<e.length;r++)TT(n,e[r],t,i,s);else i=xu(i)?!!i.capture:!!i,t=V0(t),n&&n[$u]?(n=n.i,e=String(e).toString(),e in n.g&&(r=n.g[e],t=Cg(r,t,i,s),-1<t&&(nm(r[t]),Array.prototype.splice.call(r,t,1),r.length==0&&(delete n.g[e],n.h--)))):n&&(n=W0(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Cg(e,t,i,s)),(t=-1<n?e[n]:null)&&U0(t))}function U0(n){if(typeof n!="number"&&n&&!n.ba){var e=n.src;if(e&&e[$u])Ag(e.i,n);else{var t=n.type,i=n.proxy;e.removeEventListener?e.removeEventListener(t,i,n.capture):e.detachEvent?e.detachEvent(IT(t),i):e.addListener&&e.removeListener&&e.removeListener(i),(t=W0(e))?(Ag(t,n),t.h==0&&(t.src=null,e[L0]=null)):nm(n)}}}function IT(n){return n in _p?_p[n]:_p[n]="on"+n}function P6(n,e){if(n.ba)n=!0;else{e=new du(e,this);var t=n.listener,i=n.ha||n.src;n.ea&&U0(n),n=t.call(i,e)}return n}function W0(n){return n=n[L0],n instanceof im?n:null}var yp="__closure_events_fn_"+(1e9*Math.random()>>>0);function V0(n){return typeof n=="function"?n:(n[yp]||(n[yp]=function(e){return n.handleEvent(e)}),n[yp])}function Hi(){nl.call(this),this.i=new im(this),this.P=this,this.I=null}xi(Hi,nl);Hi.prototype[$u]=!0;Hi.prototype.removeEventListener=function(n,e,t,i){TT(this,n,e,t,i)};function Ji(n,e){var t,i=n.I;if(i)for(t=[];i;i=i.I)t.push(i);if(n=n.P,i=e.type||e,typeof e=="string")e=new os(e,n);else if(e instanceof os)e.target=e.target||n;else{var s=e;e=new os(i,n),wT(e,s)}if(s=!0,t)for(var r=t.length-1;0<=r;r--){var o=e.g=t[r];s=Nf(o,i,!0,e)&&s}if(o=e.g=n,s=Nf(o,i,!0,e)&&s,s=Nf(o,i,!1,e)&&s,t)for(r=0;r<t.length;r++)o=e.g=t[r],s=Nf(o,i,!1,e)&&s}Hi.prototype.M=function(){if(Hi.X.M.call(this),this.i){var n=this.i,e;for(e in n.g){for(var t=n.g[e],i=0;i<t.length;i++)nm(t[i]);delete n.g[e],n.h--}}this.I=null};Hi.prototype.N=function(n,e,t,i){return this.i.add(String(n),e,!1,t,i)};Hi.prototype.O=function(n,e,t,i){return this.i.add(String(n),e,!0,t,i)};function Nf(n,e,t,i){if(e=n.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,r=0;r<e.length;++r){var o=e[r];if(o&&!o.ba&&o.capture==t){var l=o.listener,a=o.ha||o.src;o.ea&&Ag(n.i,o),s=l.call(a,i)!==!1&&s}}return s&&!i.defaultPrevented}var F0=Kt.JSON.stringify;function M6(){var n=DT;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}class B6{constructor(){this.h=this.g=null}add(e,t){const i=OT.get();i.set(e,t),this.h?this.h.next=i:this.g=i,this.h=i}}var OT=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new L6,n=>n.reset());class L6{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function U6(n){Kt.setTimeout(()=>{throw n},0)}function RT(n,e){kg||W6(),Tg||(kg(),Tg=!0),DT.add(n,e)}var kg;function W6(){var n=Kt.Promise.resolve(void 0);kg=function(){n.then(V6)}}var Tg=!1,DT=new B6;function V6(){for(var n;n=M6();){try{n.h.call(n.g)}catch(t){U6(t)}var e=OT;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Tg=!1}function sm(n,e){Hi.call(this),this.h=n||1,this.g=e||Kt,this.j=rs(this.lb,this),this.l=Date.now()}xi(sm,Hi);Rt=sm.prototype;Rt.ca=!1;Rt.R=null;Rt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Ji(this,"tick"),this.ca&&(j0(this),this.start()))}};Rt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function j0(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}Rt.M=function(){sm.X.M.call(this),j0(this),delete this.g};function H0(n,e,t){if(typeof n=="function")t&&(n=rs(n,t));else if(n&&typeof n.handleEvent=="function")n=rs(n.handleEvent,n);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:Kt.setTimeout(n,e||0)}function NT(n){n.g=H0(()=>{n.g=null,n.i&&(n.i=!1,NT(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}class F6 extends nl{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:NT(this)}M(){super.M(),this.g&&(Kt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function mu(n){nl.call(this),this.h=n,this.g={}}xi(mu,nl);var u_=[];function PT(n,e,t,i){Array.isArray(t)||(t&&(u_[0]=t.toString()),t=u_);for(var s=0;s<t.length;s++){var r=AT(e,t[s],i||n.handleEvent,!1,n.h||n);if(!r)break;n.g[r.key]=r}}function MT(n){B0(n.g,function(e,t){this.g.hasOwnProperty(t)&&U0(e)},n),n.g={}}mu.prototype.M=function(){mu.X.M.call(this),MT(this)};mu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function rm(){this.g=!0}rm.prototype.Aa=function(){this.g=!1};function j6(n,e,t,i,s,r){n.info(function(){if(n.g)if(r)for(var o="",l=r.split("&"),a=0;a<l.length;a++){var c=l[a].split("=");if(1<c.length){var u=c[0];c=c[1];var f=u.split("_");o=2<=f.length&&f[1]=="type"?o+(u+"="+c+"&"):o+(u+"=redacted&")}}else o=null;else o=r;return"XMLHTTP REQ ("+i+") [attempt "+s+"]: "+e+`
`+t+`
`+o})}function H6(n,e,t,i,s,r,o){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+s+"]: "+e+`
`+t+`
`+r+" "+o})}function ya(n,e,t,i){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+z6(n,t)+(i?" "+i:"")})}function q6(n,e){n.info(function(){return"TIMEOUT: "+e})}rm.prototype.info=function(){};function z6(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t){for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var i=t[n];if(!(2>i.length)){var s=i[1];if(Array.isArray(s)&&!(1>s.length)){var r=s[0];if(r!="noop"&&r!="stop"&&r!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return F0(t)}catch{return e}}var xl={},f_=null;function om(){return f_=f_||new Hi}xl.Pa="serverreachability";function BT(n){os.call(this,xl.Pa,n)}xi(BT,os);function pu(n){const e=om();Ji(e,new BT(e))}xl.STAT_EVENT="statevent";function LT(n,e){os.call(this,xl.STAT_EVENT,n),this.stat=e}xi(LT,os);function Ss(n){const e=om();Ji(e,new LT(e,n))}xl.Qa="timingevent";function UT(n,e){os.call(this,xl.Qa,n),this.size=e}xi(UT,os);function ef(n,e){if(typeof n!="function")throw Error("Fn must not be null and must be a function");return Kt.setTimeout(function(){n()},e)}var lm={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},WT={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function q0(){}q0.prototype.h=null;function h_(n){return n.h||(n.h=n.i())}function VT(){}var tf={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function z0(){os.call(this,"d")}xi(z0,os);function G0(){os.call(this,"c")}xi(G0,os);var Ig;function am(){}xi(am,q0);am.prototype.g=function(){return new XMLHttpRequest};am.prototype.i=function(){return{}};Ig=new am;function nf(n,e,t,i){this.l=n,this.j=e,this.m=t,this.U=i||1,this.S=new mu(this),this.O=G6,n=Eg?125:void 0,this.T=new sm(n),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new FT}function FT(){this.i=null,this.g="",this.h=!1}var G6=45e3,Og={},jh={};Rt=nf.prototype;Rt.setTimeout=function(n){this.O=n};function Rg(n,e,t){n.K=1,n.v=um(co(e)),n.s=t,n.P=!0,jT(n,null)}function jT(n,e){n.F=Date.now(),sf(n),n.A=co(n.v);var t=n.A,i=n.U;Array.isArray(i)||(i=[String(i)]),YT(t.i,"t",i),n.C=0,t=n.l.H,n.h=new FT,n.g=gI(n.l,t?e:null,!n.s),0<n.N&&(n.L=new F6(rs(n.La,n,n.g),n.N)),PT(n.S,n.g,"readystatechange",n.ib),e=n.H?ET(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),pu(),j6(n.j,n.u,n.A,n.m,n.U,n.s)}Rt.ib=function(n){n=n.target;const e=this.L;e&&no(n)==3?e.l():this.La(n)};Rt.La=function(n){try{if(n==this.g)e:{const u=no(this.g);var e=this.g.Ea();const f=this.g.aa();if(!(3>u)&&(u!=3||Eg||this.g&&(this.h.h||this.g.fa()||g_(this.g)))){this.I||u!=4||e==7||(e==8||0>=f?pu(3):pu(2)),cm(this);var t=this.g.aa();this.Y=t;t:if(HT(this)){var i=g_(this.g);n="";var s=i.length,r=no(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){bl(this),Jc(this);var o="";break t}this.h.i=new Kt.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(i[e],{stream:r&&e==s-1});i.splice(0,s),this.h.g+=n,this.C=0,o=this.h.g}else o=this.g.fa();if(this.i=t==200,H6(this.j,this.u,this.A,this.m,this.U,u,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var l,a=this.g;if((l=a.g?a.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Vh(l)){var c=l;break t}}c=null}if(t=c)ya(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Dg(this,t);else{this.i=!1,this.o=3,Ss(12),bl(this),Jc(this);break e}}this.P?(qT(this,u,o),Eg&&this.i&&u==3&&(PT(this.S,this.T,"tick",this.hb),this.T.start())):(ya(this.j,this.m,o,null),Dg(this,o)),u==4&&bl(this),this.i&&!this.I&&(u==4?hI(this.l,this):(this.i=!1,sf(this)))}else t==400&&0<o.indexOf("Unknown SID")?(this.o=3,Ss(12)):(this.o=0,Ss(13)),bl(this),Jc(this)}}}catch{}finally{}};function HT(n){return n.g?n.u=="GET"&&n.K!=2&&n.l.Da:!1}function qT(n,e,t){let i=!0,s;for(;!n.I&&n.C<t.length;)if(s=K6(n,t),s==jh){e==4&&(n.o=4,Ss(14),i=!1),ya(n.j,n.m,null,"[Incomplete Response]");break}else if(s==Og){n.o=4,Ss(15),ya(n.j,n.m,t,"[Invalid Chunk]"),i=!1;break}else ya(n.j,n.m,s,null),Dg(n,s);HT(n)&&s!=jh&&s!=Og&&(n.h.g="",n.C=0),e!=4||t.length!=0||n.h.h||(n.o=1,Ss(16),i=!1),n.i=n.i&&i,i?0<t.length&&!n.$&&(n.$=!0,e=n.l,e.g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),x0(e),e.K=!0,Ss(11))):(ya(n.j,n.m,t,"[Invalid Chunked Response]"),bl(n),Jc(n))}Rt.hb=function(){if(this.g){var n=no(this.g),e=this.g.fa();this.C<e.length&&(cm(this),qT(this,n,e),this.i&&n!=4&&sf(this))}};function K6(n,e){var t=n.C,i=e.indexOf(`
`,t);return i==-1?jh:(t=Number(e.substring(t,i)),isNaN(t)?Og:(i+=1,i+t>e.length?jh:(e=e.substr(i,t),n.C=i+t,e)))}Rt.cancel=function(){this.I=!0,bl(this)};function sf(n){n.V=Date.now()+n.O,zT(n,n.O)}function zT(n,e){if(n.B!=null)throw Error("WatchDog timer not null");n.B=ef(rs(n.gb,n),e)}function cm(n){n.B&&(Kt.clearTimeout(n.B),n.B=null)}Rt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(q6(this.j,this.A),this.K!=2&&(pu(),Ss(17)),bl(this),this.o=2,Jc(this)):zT(this,this.V-n)};function Jc(n){n.l.G==0||n.I||hI(n.l,n)}function bl(n){cm(n);var e=n.L;e&&typeof e.na=="function"&&e.na(),n.L=null,j0(n.T),MT(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Dg(n,e){try{var t=n.l;if(t.G!=0&&(t.g==n||Ng(t.h,n))){if(!n.J&&Ng(t.h,n)&&t.G==3){try{var i=t.Fa.g.parse(e)}catch{i=null}if(Array.isArray(i)&&i.length==3){var s=i;if(s[0]==0){e:if(!t.u){if(t.g)if(t.g.F+3e3<n.F)zh(t),dm(t);else break e;Z0(t),Ss(18)}}else t.Ba=s[1],0<t.Ba-t.T&&37500>s[2]&&t.L&&t.A==0&&!t.v&&(t.v=ef(rs(t.cb,t),6e3));if(1>=xT(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else _l(t,11)}else if((n.J||t.g==n)&&zh(t),!Vh(e))for(s=t.Fa.g.parse(e),e=0;e<s.length;e++){let c=s[e];if(t.T=c[0],c=c[1],t.G==2)if(c[0]=="c"){t.I=c[1],t.ka=c[2];const u=c[3];u!=null&&(t.ma=u,t.j.info("VER="+t.ma));const f=c[4];f!=null&&(t.Ca=f,t.j.info("SVER="+t.Ca));const h=c[5];h!=null&&typeof h=="number"&&0<h&&(i=1.5*h,t.J=i,t.j.info("backChannelRequestTimeoutMs_="+i)),i=t;const d=n.g;if(d){const m=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(m){var r=i.h;r.g||m.indexOf("spdy")==-1&&m.indexOf("quic")==-1&&m.indexOf("h2")==-1||(r.j=r.l,r.g=new Set,r.h&&(K0(r,r.h),r.h=null))}if(i.D){const p=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;p&&(i.za=p,ei(i.F,i.D,p))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms")),i=t;var o=n;if(i.sa=pI(i,i.H?i.ka:null,i.V),o.J){$T(i.h,o);var l=o,a=i.J;a&&l.setTimeout(a),l.B&&(cm(l),sf(l)),i.g=o}else uI(i);0<t.i.length&&mm(t)}else c[0]!="stop"&&c[0]!="close"||_l(t,7);else t.G==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?_l(t,7):J0(t):c[0]!="noop"&&t.l&&t.l.wa(c),t.A=0)}}pu(4)}catch{}}function X6(n){if(n.W&&typeof n.W=="function")return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if(typeof n=="string")return n.split("");if(em(n)){for(var e=[],t=n.length,i=0;i<t;i++)e.push(n[i]);return e}e=[],t=0;for(i in n)e[t++]=n[i];return e}function Q6(n){if(n.oa&&typeof n.oa=="function")return n.oa();if(!n.W||typeof n.W!="function"){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(em(n)||typeof n=="string"){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const i in n)e[t++]=i;return e}}}function GT(n,e){if(n.forEach&&typeof n.forEach=="function")n.forEach(e,void 0);else if(em(n)||typeof n=="string")Array.prototype.forEach.call(n,e,void 0);else for(var t=Q6(n),i=X6(n),s=i.length,r=0;r<s;r++)e.call(void 0,i[r],t&&t[r],n)}var KT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Y6(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var i=n[t].indexOf("="),s=null;if(0<=i){var r=n[t].substring(0,i);s=n[t].substring(i+1)}else r=n[t];e(r,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function Cl(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Cl){this.h=e!==void 0?e:n.h,Hh(this,n.j),this.s=n.s,this.g=n.g,qh(this,n.m),this.l=n.l,e=n.i;var t=new gu;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),d_(this,t),this.o=n.o}else n&&(t=String(n).match(KT))?(this.h=!!e,Hh(this,t[1]||"",!0),this.s=Lc(t[2]||""),this.g=Lc(t[3]||"",!0),qh(this,t[4]),this.l=Lc(t[5]||"",!0),d_(this,t[6]||"",!0),this.o=Lc(t[7]||"")):(this.h=!!e,this.i=new gu(null,this.h))}Cl.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Uc(e,m_,!0),":");var t=this.g;return(t||e=="file")&&(n.push("//"),(e=this.s)&&n.push(Uc(e,m_,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.m,t!=null&&n.push(":",String(t))),(t=this.l)&&(this.g&&t.charAt(0)!="/"&&n.push("/"),n.push(Uc(t,t.charAt(0)=="/"?x6:Z6,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Uc(t,eM)),n.join("")};function co(n){return new Cl(n)}function Hh(n,e,t){n.j=t?Lc(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function qh(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function d_(n,e,t){e instanceof gu?(n.i=e,tM(n.i,n.h)):(t||(e=Uc(e,$6)),n.i=new gu(e,n.h))}function ei(n,e,t){n.i.set(e,t)}function um(n){return ei(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Lc(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Uc(n,e,t){return typeof n=="string"?(n=encodeURI(n).replace(e,J6),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function J6(n){return n=n.charCodeAt(0),"%"+(n>>4&15).toString(16)+(n&15).toString(16)}var m_=/[#\/\?@]/g,Z6=/[#\?:]/g,x6=/[#\?]/g,$6=/[#\?@]/g,eM=/#/g;function gu(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function il(n){n.g||(n.g=new Map,n.h=0,n.i&&Y6(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}Rt=gu.prototype;Rt.add=function(n,e){il(this),this.i=null,n=uc(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this};function XT(n,e){il(n),e=uc(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function QT(n,e){return il(n),e=uc(n,e),n.g.has(e)}Rt.forEach=function(n,e){il(this),this.g.forEach(function(t,i){t.forEach(function(s){n.call(e,s,i,this)},this)},this)};Rt.oa=function(){il(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let i=0;i<e.length;i++){const s=n[i];for(let r=0;r<s.length;r++)t.push(e[i])}return t};Rt.W=function(n){il(this);let e=[];if(typeof n=="string")QT(this,n)&&(e=e.concat(this.g.get(uc(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e};Rt.set=function(n,e){return il(this),this.i=null,n=uc(this,n),QT(this,n)&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this};Rt.get=function(n,e){return n?(n=this.W(n),0<n.length?String(n[0]):e):e};function YT(n,e,t){XT(n,e),0<t.length&&(n.i=null,n.g.set(uc(n,e),P0(t)),n.h+=t.length)}Rt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var i=e[t];const r=encodeURIComponent(String(i)),o=this.W(i);for(i=0;i<o.length;i++){var s=r;o[i]!==""&&(s+="="+encodeURIComponent(String(o[i]))),n.push(s)}}return this.i=n.join("&")};function uc(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function tM(n,e){e&&!n.j&&(il(n),n.i=null,n.g.forEach(function(t,i){var s=i.toLowerCase();i!=s&&(XT(this,i),YT(this,s,t))},n)),n.j=e}var nM=class{constructor(e,t){this.h=e,this.g=t}};function JT(n){this.l=n||iM,Kt.PerformanceNavigationTiming?(n=Kt.performance.getEntriesByType("navigation"),n=0<n.length&&(n[0].nextHopProtocol=="hq"||n[0].nextHopProtocol=="h2")):n=!!(Kt.g&&Kt.g.Ga&&Kt.g.Ga()&&Kt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var iM=10;function ZT(n){return n.h?!0:n.g?n.g.size>=n.j:!1}function xT(n){return n.h?1:n.g?n.g.size:0}function Ng(n,e){return n.h?n.h==e:n.g?n.g.has(e):!1}function K0(n,e){n.g?n.g.add(e):n.h=e}function $T(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}JT.prototype.cancel=function(){if(this.i=eI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const n of this.g.values())n.cancel();this.g.clear()}};function eI(n){if(n.h!=null)return n.i.concat(n.h.D);if(n.g!=null&&n.g.size!==0){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return P0(n.i)}function X0(){}X0.prototype.stringify=function(n){return Kt.JSON.stringify(n,void 0)};X0.prototype.parse=function(n){return Kt.JSON.parse(n,void 0)};function sM(){this.g=new X0}function rM(n,e,t){const i=t||"";try{GT(n,function(s,r){let o=s;xu(s)&&(o=F0(s)),e.push(i+r+"="+encodeURIComponent(o))})}catch(s){throw e.push(i+"type="+encodeURIComponent("_badmap")),s}}function oM(n,e){const t=new rm;if(Kt.Image){const i=new Image;i.onload=Df(Pf,t,i,"TestLoadImage: loaded",!0,e),i.onerror=Df(Pf,t,i,"TestLoadImage: error",!1,e),i.onabort=Df(Pf,t,i,"TestLoadImage: abort",!1,e),i.ontimeout=Df(Pf,t,i,"TestLoadImage: timeout",!1,e),Kt.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else e(!1)}function Pf(n,e,t,i,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(i)}catch{}}function rf(n){this.l=n.ac||null,this.j=n.jb||!1}xi(rf,q0);rf.prototype.g=function(){return new fm(this.l,this.j)};rf.prototype.i=function(n){return function(){return n}}({});function fm(n,e){Hi.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Q0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}xi(fm,Hi);var Q0=0;Rt=fm.prototype;Rt.open=function(n,e){if(this.readyState!=Q0)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,vu(this)};Rt.send=function(n){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Kt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))};Rt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,of(this)),this.readyState=Q0};Rt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,vu(this)),this.g&&(this.readyState=3,vu(this),this.g)))if(this.responseType==="arraybuffer")n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Kt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;tI(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))};function tI(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}Rt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?of(this):vu(this),this.readyState==3&&tI(this)}};Rt.Va=function(n){this.g&&(this.response=this.responseText=n,of(this))};Rt.Ua=function(n){this.g&&(this.response=n,of(this))};Rt.ga=function(){this.g&&of(this)};function of(n){n.readyState=4,n.l=null,n.j=null,n.A=null,vu(n)}Rt.setRequestHeader=function(n,e){this.v.append(n,e)};Rt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""};Rt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)t=t.value,n.push(t[0]+": "+t[1]),t=e.next();return n.join(`\r
`)};function vu(n){n.onreadystatechange&&n.onreadystatechange.call(n)}Object.defineProperty(fm.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(n){this.m=n?"include":"same-origin"}});var lM=Kt.JSON.parse;function ri(n){Hi.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=nI,this.K=this.L=!1}xi(ri,Hi);var nI="",aM=/^https?$/i,cM=["POST","PUT"];Rt=ri.prototype;Rt.Ka=function(n){this.L=n};Rt.da=function(n,e,t,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ig.g(),this.C=this.u?h_(this.u):h_(Ig),this.g.onreadystatechange=rs(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(r){p_(this,r);return}if(n=t||"",t=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var s in i)t.set(s,i[s]);else if(typeof i.keys=="function"&&typeof i.get=="function")for(const r of i.keys())t.set(r,i.get(r));else throw Error("Unknown input type for opt_headers: "+String(i));i=Array.from(t.keys()).find(r=>r.toLowerCase()=="content-type"),s=Kt.FormData&&n instanceof Kt.FormData,!(0<=bT(cM,e))||i||s||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[r,o]of t)this.g.setRequestHeader(r,o);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{rI(this),0<this.B&&((this.K=uM(this.g))?(this.g.timeout=this.B,this.g.ontimeout=rs(this.qa,this)):this.A=H0(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(r){p_(this,r)}};function uM(n){return La&&T6()&&typeof n.timeout=="number"&&n.ontimeout!==void 0}Rt.qa=function(){typeof N0<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ji(this,"timeout"),this.abort(8))};function p_(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,iI(n),hm(n)}function iI(n){n.D||(n.D=!0,Ji(n,"complete"),Ji(n,"error"))}Rt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ji(this,"complete"),Ji(this,"abort"),hm(this))};Rt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),hm(this,!0)),ri.X.M.call(this)};Rt.Ha=function(){this.s||(this.F||this.v||this.l?sI(this):this.fb())};Rt.fb=function(){sI(this)};function sI(n){if(n.h&&typeof N0<"u"&&(!n.C[1]||no(n)!=4||n.aa()!=2)){if(n.v&&no(n)==4)H0(n.Ha,0,n);else if(Ji(n,"readystatechange"),no(n)==4){n.h=!1;try{const l=n.aa();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var i;if(i=l===0){var s=String(n.H).match(KT)[1]||null;if(!s&&Kt.self&&Kt.self.location){var r=Kt.self.location.protocol;s=r.substr(0,r.length-1)}i=!aM.test(s?s.toLowerCase():"")}t=i}if(t)Ji(n,"complete"),Ji(n,"success");else{n.m=6;try{var o=2<no(n)?n.g.statusText:""}catch{o=""}n.j=o+" ["+n.aa()+"]",iI(n)}}finally{hm(n)}}}}function hm(n,e){if(n.g){rI(n);const t=n.g,i=n.C[0]?Wh:null;n.g=null,n.C=null,e||Ji(n,"ready");try{t.onreadystatechange=i}catch{}}}function rI(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Kt.clearTimeout(n.A),n.A=null)}function no(n){return n.g?n.g.readyState:0}Rt.aa=function(){try{return 2<no(this)?this.g.status:-1}catch{return-1}};Rt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}};Rt.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&e.indexOf(n)==0&&(e=e.substring(n.length)),lM(e)}};function g_(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case nI:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}Rt.Ea=function(){return this.m};Rt.Oa=function(){return typeof this.j=="string"?this.j:String(this.j)};function oI(n){let e="";return B0(n,function(t,i){e+=i,e+=":",e+=t,e+=`\r
`}),e}function Y0(n,e,t){e:{for(i in t){var i=!1;break e}i=!0}i||(t=oI(t),typeof n=="string"?t!=null&&encodeURIComponent(String(t)):ei(n,e,t))}function Ic(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function lI(n){this.Ca=0,this.i=[],this.j=new rm,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Ic("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Ic("baseRetryDelayMs",5e3,n),this.bb=Ic("retryDelaySeedMs",1e4,n),this.$a=Ic("forwardChannelMaxRetries",2,n),this.ta=Ic("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new JT(n&&n.concurrentRequestLimit),this.Fa=new sM,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}Rt=lI.prototype;Rt.ma=8;Rt.G=1;function J0(n){if(aI(n),n.G==3){var e=n.U++,t=co(n.F);ei(t,"SID",n.I),ei(t,"RID",e),ei(t,"TYPE","terminate"),lf(n,t),e=new nf(n,n.j,e,void 0),e.K=2,e.v=um(co(t)),t=!1,Kt.navigator&&Kt.navigator.sendBeacon&&(t=Kt.navigator.sendBeacon(e.v.toString(),"")),!t&&Kt.Image&&(new Image().src=e.v,t=!0),t||(e.g=gI(e.l,null),e.g.da(e.v)),e.F=Date.now(),sf(e)}mI(n)}function dm(n){n.g&&(x0(n),n.g.cancel(),n.g=null)}function aI(n){dm(n),n.u&&(Kt.clearTimeout(n.u),n.u=null),zh(n),n.h.cancel(),n.m&&(typeof n.m=="number"&&Kt.clearTimeout(n.m),n.m=null)}function mm(n){ZT(n.h)||n.m||(n.m=!0,RT(n.Ja,n),n.C=0)}function fM(n,e){return xT(n.h)>=n.h.j-(n.m?1:0)?!1:n.m?(n.i=e.D.concat(n.i),!0):n.G==1||n.G==2||n.C>=(n.Za?0:n.$a)?!1:(n.m=ef(rs(n.Ja,n,e),dI(n,n.C)),n.C++,!0)}Rt.Ja=function(n){if(this.m)if(this.m=null,this.G==1){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const s=new nf(this,this.j,n,void 0);let r=this.s;if(this.S&&(r?(r=ET(r),wT(r,this.S)):r=this.S),this.o!==null||this.N||(s.H=r,r=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){t:{var i=this.i[t];if("__data__"in i.g&&(i=i.g.__data__,typeof i=="string")){i=i.length;break t}i=void 0}if(i===void 0)break;if(e+=i,4096<e){e=t;break e}if(e===4096||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=cI(this,s,e),t=co(this.F),ei(t,"RID",n),ei(t,"CVER",22),this.D&&ei(t,"X-HTTP-Session-Id",this.D),lf(this,t),r&&(this.N?e="headers="+encodeURIComponent(String(oI(r)))+"&"+e:this.o&&Y0(t,this.o,r)),K0(this.h,s),this.Ya&&ei(t,"TYPE","init"),this.O?(ei(t,"$req",e),ei(t,"SID","null"),s.Z=!0,Rg(s,t,null)):Rg(s,t,e),this.G=2}}else this.G==3&&(n?v_(this,n):this.i.length==0||ZT(this.h)||v_(this))};function v_(n,e){var t;e?t=e.m:t=n.U++;const i=co(n.F);ei(i,"SID",n.I),ei(i,"RID",t),ei(i,"AID",n.T),lf(n,i),n.o&&n.s&&Y0(i,n.o,n.s),t=new nf(n,n.j,t,n.C+1),n.o===null&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=cI(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),K0(n.h,t),Rg(t,i,e)}function lf(n,e){n.ia&&B0(n.ia,function(t,i){ei(e,i,t)}),n.l&&GT({},function(t,i){ei(e,i,t)})}function cI(n,e,t){t=Math.min(n.i.length,t);var i=n.l?rs(n.l.Ra,n.l,n):null;e:{var s=n.i;let r=-1;for(;;){const o=["count="+t];r==-1?0<t?(r=s[0].h,o.push("ofs="+r)):r=0:o.push("ofs="+r);let l=!0;for(let a=0;a<t;a++){let c=s[a].h;const u=s[a].g;if(c-=r,0>c)r=Math.max(0,s[a].h-100),l=!1;else try{rM(u,o,"req"+c+"_")}catch{i&&i(u)}}if(l){i=o.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,i}function uI(n){n.g||n.u||(n.Z=1,RT(n.Ia,n),n.A=0)}function Z0(n){return n.g||n.u||3<=n.A?!1:(n.Z++,n.u=ef(rs(n.Ia,n),dI(n,n.A)),n.A++,!0)}Rt.Ia=function(){if(this.u=null,fI(this),this.$&&!(this.K||this.g==null||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=ef(rs(this.eb,this),n)}};Rt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Ss(10),dm(this),fI(this))};function x0(n){n.B!=null&&(Kt.clearTimeout(n.B),n.B=null)}function fI(n){n.g=new nf(n,n.j,"rpc",n.Z),n.o===null&&(n.g.H=n.s),n.g.N=0;var e=co(n.sa);ei(e,"RID","rpc"),ei(e,"SID",n.I),ei(e,"CI",n.L?"0":"1"),ei(e,"AID",n.T),ei(e,"TYPE","xmlhttp"),lf(n,e),n.o&&n.s&&Y0(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=um(co(e)),t.s=null,t.P=!0,jT(t,n)}Rt.cb=function(){this.v!=null&&(this.v=null,dm(this),Z0(this),Ss(19))};function zh(n){n.v!=null&&(Kt.clearTimeout(n.v),n.v=null)}function hI(n,e){var t=null;if(n.g==e){zh(n),x0(n),n.g=null;var i=2}else if(Ng(n.h,e))t=e.D,$T(n.h,e),i=1;else return;if(n.G!=0){if(n.pa=e.Y,e.i)if(i==1){t=e.s?e.s.length:0,e=Date.now()-e.F;var s=n.C;i=om(),Ji(i,new UT(i,t)),mm(n)}else uI(n);else if(s=e.o,s==3||s==0&&0<n.pa||!(i==1&&fM(n,e)||i==2&&Z0(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),s){case 1:_l(n,5);break;case 4:_l(n,10);break;case 3:_l(n,6);break;default:_l(n,2)}}}function dI(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function _l(n,e){if(n.j.info("Error code "+e),e==2){var t=null;n.l&&(t=null);var i=rs(n.kb,n);t||(t=new Cl("//www.google.com/images/cleardot.gif"),Kt.location&&Kt.location.protocol=="http"||Hh(t,"https"),um(t)),oM(t.toString(),i)}else Ss(2);n.G=0,n.l&&n.l.va(e),mI(n),aI(n)}Rt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Ss(2)):(this.j.info("Failed to ping google.com"),Ss(1))};function mI(n){if(n.G=0,n.la=[],n.l){const e=eI(n.h);(e.length!=0||n.i.length!=0)&&(o_(n.la,e),o_(n.la,n.i),n.h.i.length=0,P0(n.i),n.i.length=0),n.l.ua()}}function pI(n,e,t){var i=t instanceof Cl?co(t):new Cl(t,void 0);if(i.g!="")e&&(i.g=e+"."+i.g),qh(i,i.m);else{var s=Kt.location;i=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var r=new Cl(null,void 0);i&&Hh(r,i),e&&(r.g=e),s&&qh(r,s),t&&(r.l=t),i=r}return t=n.D,e=n.za,t&&e&&ei(i,t,e),ei(i,"VER",n.ma),lf(n,i),i}function gI(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=t&&n.Da&&!n.ra?new ri(new rf({jb:!0})):new ri(n.ra),e.Ka(n.H),e}function vI(){}Rt=vI.prototype;Rt.xa=function(){};Rt.wa=function(){};Rt.va=function(){};Rt.ua=function(){};Rt.Ra=function(){};function Gh(){if(La&&!(10<=Number(I6)))throw Error("Environmental error: no available transport.")}Gh.prototype.g=function(n,e){return new Gs(n,e)};function Gs(n,e){Hi.call(this),this.g=new lI(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!Vh(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Vh(e)&&(this.g.D=e,n=this.h,n!==null&&e in n&&(n=this.h,e in n&&delete n[e])),this.j=new fc(this)}xi(Gs,Hi);Gs.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Ss(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=pI(n,null,n.V),mm(n)};Gs.prototype.close=function(){J0(this.g)};Gs.prototype.u=function(n){var e=this.g;if(typeof n=="string"){var t={};t.__data__=n,n=t}else this.v&&(t={},t.__data__=F0(n),n=t);e.i.push(new nM(e.ab++,n)),e.G==3&&mm(e)};Gs.prototype.M=function(){this.g.l=null,delete this.j,J0(this.g),delete this.g,Gs.X.M.call(this)};function bI(n){z0.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=e!==null&&n in e?e[n]:void 0),this.data=e}else this.data=n}xi(bI,z0);function _I(){G0.call(this),this.status=1}xi(_I,G0);function fc(n){this.g=n}xi(fc,vI);fc.prototype.xa=function(){Ji(this.g,"a")};fc.prototype.wa=function(n){Ji(this.g,new bI(n))};fc.prototype.va=function(n){Ji(this.g,new _I)};fc.prototype.ua=function(){Ji(this.g,"b")};Gh.prototype.createWebChannel=Gh.prototype.g;Gs.prototype.send=Gs.prototype.u;Gs.prototype.open=Gs.prototype.m;Gs.prototype.close=Gs.prototype.close;lm.NO_ERROR=0;lm.TIMEOUT=8;lm.HTTP_ERROR=6;WT.COMPLETE="complete";VT.EventType=tf;tf.OPEN="a";tf.CLOSE="b";tf.ERROR="c";tf.MESSAGE="d";Hi.prototype.listen=Hi.prototype.N;ri.prototype.listenOnce=ri.prototype.O;ri.prototype.getLastError=ri.prototype.Oa;ri.prototype.getLastErrorCode=ri.prototype.Ea;ri.prototype.getStatus=ri.prototype.aa;ri.prototype.getResponseJson=ri.prototype.Sa;ri.prototype.getResponseText=ri.prototype.fa;ri.prototype.send=ri.prototype.da;ri.prototype.setWithCredentials=ri.prototype.Ka;var hM=function(){return new Gh},dM=function(){return om()},Sp=lm,mM=WT,pM=xl,b_={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},gM=rf,Mf=VT,vM=ri;const __="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$i.UNAUTHENTICATED=new $i(null),$i.GOOGLE_CREDENTIALS=new $i("google-credentials-uid"),$i.FIRST_PARTY=new $i("first-party-uid"),$i.MOCK_USER=new $i("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hc="9.17.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ll=new hT("@firebase/firestore");function y_(){return Ll.logLevel}function Nt(n,...e){if(Ll.logLevel<=Rn.DEBUG){const t=e.map($0);Ll.debug(`Firestore (${hc}): ${n}`,...t)}}function uo(n,...e){if(Ll.logLevel<=Rn.ERROR){const t=e.map($0);Ll.error(`Firestore (${hc}): ${n}`,...t)}}function Pg(n,...e){if(Ll.logLevel<=Rn.WARN){const t=e.map($0);Ll.warn(`Firestore (${hc}): ${n}`,...t)}}function $0(n){if(typeof n=="string")return n;try{return e=n,JSON.stringify(e)}catch{return n}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(n="Unexpected state"){const e=`FIRESTORE (${hc}) INTERNAL ASSERTION FAILED: `+n;throw uo(e),new Error(e)}function qn(n,e){n||qt()}function xt(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $e={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ot extends cc{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class bM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t($i.UNAUTHENTICATED))}shutdown(){}}class _M{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class yM{constructor(e){this.t=e,this.currentUser=$i.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let i=this.i;const s=a=>this.i!==i?(i=this.i,t(a)):Promise.resolve();let r=new kl;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new kl,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const a=r;e.enqueueRetryable(async()=>{await a.promise,await s(this.currentUser)})},l=a=>{Nt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=a,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(a=>l(a)),setTimeout(()=>{if(!this.auth){const a=this.t.getImmediate({optional:!0});a?l(a):(Nt("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new kl)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(Nt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(qn(typeof i.accessToken=="string"),new yI(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return qn(e===null||typeof e=="string"),new $i(e)}}class SM{constructor(e,t,i,s){this.h=e,this.l=t,this.m=i,this.g=s,this.type="FirstParty",this.user=$i.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(qn(!(typeof this.h!="object"||this.h===null||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class EM{constructor(e,t,i,s){this.h=e,this.l=t,this.m=i,this.g=s}getToken(){return Promise.resolve(new SM(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t($i.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class wM{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class AM{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const i=r=>{r.error!=null&&Nt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const o=r.token!==this.A;return this.A=r.token,Nt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(r.token):Promise.resolve()};this.o=r=>{e.enqueueRetryable(()=>i(r))};const s=r=>{Nt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.appCheck.addTokenListener(this.o)};this.T.onInit(r=>s(r)),setTimeout(()=>{if(!this.appCheck){const r=this.T.getImmediate({optional:!0});r?s(r):Nt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(qn(typeof t.token=="string"),this.A=t.token,new wM(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CM(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const s=CM(40);for(let r=0;r<s.length;++r)i.length<20&&s[r]<t&&(i+=e.charAt(s[r]%e.length))}return i}}function Dn(n,e){return n<e?-1:n>e?1:0}function Ua(n,e,t){return n.length===e.length&&n.every((i,s)=>t(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ot($e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ot($e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ot($e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ot($e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return fi.fromMillis(Date.now())}static fromDate(e){return fi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new fi(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Dn(this.nanoseconds,e.nanoseconds):Dn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Jt(e)}static min(){return new Jt(new fi(0,0))}static max(){return new Jt(new fi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,t,i){t===void 0?t=0:t>e.length&&qt(),i===void 0?i=e.length-t:i>e.length-t&&qt(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return bu.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof bu?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let s=0;s<i;s++){const r=e.get(s),o=t.get(s);if(r<o)return-1;if(r>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Zn extends bu{construct(e,t,i){return new Zn(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ot($e.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(s=>s.length>0))}return new Zn(t)}static emptyPath(){return new Zn([])}}const kM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class is extends bu{construct(e,t,i){return new is(e,t,i)}static isValidIdentifier(e){return kM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),is.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new is(["__name__"])}static fromServerFormat(e){const t=[];let i="",s=0;const r=()=>{if(i.length===0)throw new Ot($e.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new Ot($e.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const a=e[s+1];if(a!=="\\"&&a!=="."&&a!=="`")throw new Ot($e.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=a,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(i+=l,s++):(r(),s++)}if(r(),o)throw new Ot($e.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new is(t)}static emptyPath(){return new is([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.path=e}static fromPath(e){return new Mt(Zn.fromString(e))}static fromName(e){return new Mt(Zn.fromString(e).popFirst(5))}static empty(){return new Mt(Zn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Zn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Zn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Mt(new Zn(e.slice()))}}function TM(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=Jt.fromTimestamp(i===1e9?new fi(t+1,0):new fi(t,i));return new qo(s,Mt.empty(),e)}function IM(n){return new qo(n.readTime,n.key,-1)}class qo{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new qo(Jt.min(),Mt.empty(),-1)}static max(){return new qo(Jt.max(),Mt.empty(),-1)}}function OM(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Mt.comparator(n.documentKey,e.documentKey),t!==0?t:Dn(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class DM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function af(n){if(n.code!==$e.FAILED_PRECONDITION||n.message!==RM)throw n;Nt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&qt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new at((i,s)=>{this.nextCallback=r=>{this.wrapSuccess(e,r).next(i,s)},this.catchCallback=r=>{this.wrapFailure(t,r).next(i,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof at?t:at.resolve(t)}catch(t){return at.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):at.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):at.reject(t)}static resolve(e){return new at((t,i)=>{t(e)})}static reject(e){return new at((t,i)=>{i(e)})}static waitFor(e){return new at((t,i)=>{let s=0,r=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++r,o&&r===s&&t()},a=>i(a))}),o=!0,r===s&&t()})}static or(e){let t=at.resolve(!1);for(const i of e)t=t.next(s=>s?at.resolve(s):i());return t}static forEach(e,t){const i=[];return e.forEach((s,r)=>{i.push(t.call(this,s,r))}),this.waitFor(i)}static mapArray(e,t){return new at((i,s)=>{const r=e.length,o=new Array(r);let l=0;for(let a=0;a<r;a++){const c=a;t(e[c]).next(u=>{o[c]=u,++l,l===r&&i(o)},u=>s(u))}})}static doWhile(e,t){return new at((i,s)=>{const r=()=>{e()===!0?t().next(()=>{r()},s):i()};r()})}}function cf(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ut(i),this.ct=i=>t.writeSequenceNumber(i))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}ev.at=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(e,t,i,s,r,o,l,a){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=s,this.ssl=r,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.useFetchStreams=a}}class _u{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new _u("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof _u&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S_(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function dc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function EI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pm(n){return n==null}function Kh(n){return n===0&&1/n==-1/0}function PM(n){return typeof n=="number"&&Number.isInteger(n)&&!Kh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new fs(t)}static fromUint8Array(e){const t=function(i){let s="";for(let r=0;r<i.length;++r)s+=String.fromCharCode(i[r]);return s}(e);return new fs(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Dn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}fs.EMPTY_BYTE_STRING=new fs("");const MM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zo(n){if(qn(!!n),typeof n=="string"){let e=0;const t=MM.exec(n);if(qn(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:_i(n.seconds),nanos:_i(n.nanos)}}function _i(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Wa(n){return typeof n=="string"?fs.fromBase64String(n):fs.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wI(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function AI(n){const e=n.mapValue.fields.__previous_value__;return wI(e)?AI(e):e}function yu(n){const e=zo(n.mapValue.fields.__local_write_time__.timestampValue);return new fi(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bf={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ul(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?wI(n)?4:BM(n)?9007199254740991:10:qt()}function zr(n,e){if(n===e)return!0;const t=Ul(n);if(t!==Ul(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return yu(n).isEqual(yu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const r=zo(i.timestampValue),o=zo(s.timestampValue);return r.seconds===o.seconds&&r.nanos===o.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return Wa(i.bytesValue).isEqual(Wa(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return _i(i.geoPointValue.latitude)===_i(s.geoPointValue.latitude)&&_i(i.geoPointValue.longitude)===_i(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return _i(i.integerValue)===_i(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const r=_i(i.doubleValue),o=_i(s.doubleValue);return r===o?Kh(r)===Kh(o):isNaN(r)&&isNaN(o)}return!1}(n,e);case 9:return Ua(n.arrayValue.values||[],e.arrayValue.values||[],zr);case 10:return function(i,s){const r=i.mapValue.fields||{},o=s.mapValue.fields||{};if(S_(r)!==S_(o))return!1;for(const l in r)if(r.hasOwnProperty(l)&&(o[l]===void 0||!zr(r[l],o[l])))return!1;return!0}(n,e);default:return qt()}}function Su(n,e){return(n.values||[]).find(t=>zr(t,e))!==void 0}function Va(n,e){if(n===e)return 0;const t=Ul(n),i=Ul(e);if(t!==i)return Dn(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Dn(n.booleanValue,e.booleanValue);case 2:return function(s,r){const o=_i(s.integerValue||s.doubleValue),l=_i(r.integerValue||r.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(n,e);case 3:return E_(n.timestampValue,e.timestampValue);case 4:return E_(yu(n),yu(e));case 5:return Dn(n.stringValue,e.stringValue);case 6:return function(s,r){const o=Wa(s),l=Wa(r);return o.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,r){const o=s.split("/"),l=r.split("/");for(let a=0;a<o.length&&a<l.length;a++){const c=Dn(o[a],l[a]);if(c!==0)return c}return Dn(o.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,r){const o=Dn(_i(s.latitude),_i(r.latitude));return o!==0?o:Dn(_i(s.longitude),_i(r.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,r){const o=s.values||[],l=r.values||[];for(let a=0;a<o.length&&a<l.length;++a){const c=Va(o[a],l[a]);if(c)return c}return Dn(o.length,l.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,r){if(s===Bf.mapValue&&r===Bf.mapValue)return 0;if(s===Bf.mapValue)return 1;if(r===Bf.mapValue)return-1;const o=s.fields||{},l=Object.keys(o),a=r.fields||{},c=Object.keys(a);l.sort(),c.sort();for(let u=0;u<l.length&&u<c.length;++u){const f=Dn(l[u],c[u]);if(f!==0)return f;const h=Va(o[l[u]],a[c[u]]);if(h!==0)return h}return Dn(l.length,c.length)}(n.mapValue,e.mapValue);default:throw qt()}}function E_(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Dn(n,e);const t=zo(n),i=zo(e),s=Dn(t.seconds,i.seconds);return s!==0?s:Dn(t.nanos,i.nanos)}function Fa(n){return Mg(n)}function Mg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const s=zo(i);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Wa(n.bytesValue).toBase64():"referenceValue"in n?(t=n.referenceValue,Mt.fromName(t).toString()):"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(i){let s="[",r=!0;for(const o of i.values||[])r?r=!1:s+=",",s+=Mg(o);return s+"]"}(n.arrayValue):"mapValue"in n?function(i){const s=Object.keys(i.fields||{}).sort();let r="{",o=!0;for(const l of s)o?o=!1:r+=",",r+=`${l}:${Mg(i.fields[l])}`;return r+"}"}(n.mapValue):qt();var e,t}function w_(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Bg(n){return!!n&&"integerValue"in n}function tv(n){return!!n&&"arrayValue"in n}function A_(n){return!!n&&"nullValue"in n}function C_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ph(n){return!!n&&"mapValue"in n}function Zc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return dc(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Zc(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Zc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function BM(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e,t){this.position=e,this.inclusive=t}}function k_(n,e,t){let i=0;for(let s=0;s<n.position.length;s++){const r=e[s],o=n.position[s];if(r.field.isKeyField()?i=Mt.comparator(Mt.fromName(o.referenceValue),t.key):i=Va(o,t.data.field(r.field)),r.dir==="desc"&&(i*=-1),i!==0)break}return i}function T_(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!zr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{}class Si extends CI{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new UM(e,t,i):t==="array-contains"?new FM(e,i):t==="in"?new jM(e,i):t==="not-in"?new HM(e,i):t==="array-contains-any"?new qM(e,i):new Si(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new WM(e,i):new VM(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Va(t,this.value)):t!==null&&Ul(this.value)===Ul(t)&&this.matchesComparison(Va(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return qt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class _r extends CI{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new _r(e,t)}matches(e){return kI(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ht!==null||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return e!==null?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function kI(n){return n.op==="and"}function TI(n){return LM(n)&&kI(n)}function LM(n){for(const e of n.filters)if(e instanceof _r)return!1;return!0}function Lg(n){if(n instanceof Si)return n.field.canonicalString()+n.op.toString()+Fa(n.value);if(TI(n))return n.filters.map(e=>Lg(e)).join(",");{const e=n.filters.map(t=>Lg(t)).join(",");return`${n.op}(${e})`}}function II(n,e){return n instanceof Si?function(t,i){return i instanceof Si&&t.op===i.op&&t.field.isEqual(i.field)&&zr(t.value,i.value)}(n,e):n instanceof _r?function(t,i){return i instanceof _r&&t.op===i.op&&t.filters.length===i.filters.length?t.filters.reduce((s,r,o)=>s&&II(r,i.filters[o]),!0):!1}(n,e):void qt()}function OI(n){return n instanceof Si?function(e){return`${e.field.canonicalString()} ${e.op} ${Fa(e.value)}`}(n):n instanceof _r?function(e){return e.op.toString()+" {"+e.getFilters().map(OI).join(" ,")+"}"}(n):"Filter"}class UM extends Si{constructor(e,t,i){super(e,t,i),this.key=Mt.fromName(i.referenceValue)}matches(e){const t=Mt.comparator(e.key,this.key);return this.matchesComparison(t)}}class WM extends Si{constructor(e,t){super(e,"in",t),this.keys=RI("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class VM extends Si{constructor(e,t){super(e,"not-in",t),this.keys=RI("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function RI(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>Mt.fromName(i.referenceValue))}class FM extends Si{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return tv(t)&&Su(t.arrayValue,this.value)}}class jM extends Si{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Su(this.value.arrayValue,t)}}class HM extends Si{constructor(e,t){super(e,"not-in",t)}matches(e){if(Su(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Su(this.value.arrayValue,t)}}class qM extends Si{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!tv(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Su(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(e,t="asc"){this.field=e,this.dir=t}}function zM(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e,t){this.comparator=e,this.root=t||Gi.EMPTY}insert(e,t){return new Bi(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Gi.BLACK,null,null))}remove(e){return new Bi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return t+i.left.size;s<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Lf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Lf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Lf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Lf(this.root,e,this.comparator,!0)}}class Lf{constructor(e,t,i,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=t?i(e.key,t):1,t&&s&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(r===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Gi{constructor(e,t,i,s,r){this.key=e,this.value=t,this.color=i??Gi.RED,this.left=s??Gi.EMPTY,this.right=r??Gi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,s,r){return new Gi(e??this.key,t??this.value,i??this.color,s??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let s=this;const r=i(e,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(e,t,i),null):r===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Gi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Gi.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Gi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Gi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw qt();const e=this.left.check();if(e!==this.right.check())throw qt();return e+(this.isRed()?0:1)}}Gi.EMPTY=null,Gi.RED=!0,Gi.BLACK=!1;Gi.EMPTY=new class{constructor(){this.size=0}get key(){throw qt()}get value(){throw qt()}get color(){throw qt()}get left(){throw qt()}get right(){throw qt()}copy(n,e,t,i,s){return this}insert(n,e,t){return new Gi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e){this.comparator=e,this.data=new Bi(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new I_(this.data.getIterator())}getIteratorFrom(e){return new I_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof Ni)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,r=i.getNext().key;if(this.comparator(s,r)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ni(this.comparator);return t.data=e,t}}class I_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e){this.fields=e,e.sort(is.comparator)}static empty(){return new mr([])}unionWith(e){let t=new Ni(is.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new mr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ua(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e){this.value=e}static empty(){return new Zs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!ph(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zc(t)}setAll(e){let t=is.emptyPath(),i={},s=[];e.forEach((o,l)=>{if(!t.isImmediateParentOf(l)){const a=this.getFieldsMap(t);this.applyChanges(a,i,s),i={},s=[],t=l.popLast()}o?i[l.lastSegment()]=Zc(o):s.push(l.lastSegment())});const r=this.getFieldsMap(t);this.applyChanges(r,i,s)}delete(e){const t=this.field(e.popLast());ph(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return zr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=t.mapValue.fields[e.get(i)];ph(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,i){dc(t,(s,r)=>e[s]=r);for(const s of i)delete e[s]}clone(){return new Zs(Zc(this.value))}}function DI(n){const e=[];return dc(n.fields,(t,i)=>{const s=new is([t]);if(ph(i)){const r=DI(i.mapValue).fields;if(r.length===0)e.push(s);else for(const o of r)e.push(s.child(o))}else e.push(s)}),new mr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e,t,i,s,r,o,l){this.key=e,this.documentType=t,this.version=i,this.readTime=s,this.createTime=r,this.data=o,this.documentState=l}static newInvalidDocument(e){return new ts(e,0,Jt.min(),Jt.min(),Jt.min(),Zs.empty(),0)}static newFoundDocument(e,t,i,s){return new ts(e,1,t,Jt.min(),i,s,0)}static newNoDocument(e,t){return new ts(e,2,t,Jt.min(),Jt.min(),Zs.empty(),0)}static newUnknownDocument(e,t){return new ts(e,3,t,Jt.min(),Jt.min(),Zs.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Jt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Jt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ts&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ts(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(e,t=null,i=[],s=[],r=null,o=null,l=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=s,this.limit=r,this.startAt=o,this.endAt=l,this.ft=null}}function O_(n,e=null,t=[],i=[],s=null,r=null,o=null){return new GM(n,e,t,i,s,r,o)}function nv(n){const e=xt(n);if(e.ft===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>Lg(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),pm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Fa(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Fa(i)).join(",")),e.ft=t}return e.ft}function iv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!zM(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!II(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!T_(n.startAt,e.startAt)&&T_(n.endAt,e.endAt)}function Ug(n){return Mt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(e,t=null,i=[],s=[],r=null,o="F",l=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=s,this.limit=r,this.limitType=o,this.startAt=l,this.endAt=a,this.dt=null,this._t=null,this.startAt,this.endAt}}function KM(n,e,t,i,s,r,o,l){return new uf(n,e,t,i,s,r,o,l)}function sv(n){return new uf(n)}function R_(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function NI(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function rv(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(t!==null)return t}return null}function PI(n){return n.collectionGroup!==null}function Ca(n){const e=xt(n);if(e.dt===null){e.dt=[];const t=rv(e),i=NI(e);if(t!==null&&i===null)t.isKeyField()||e.dt.push(new xc(t)),e.dt.push(new xc(is.keyField(),"asc"));else{let s=!1;for(const r of e.explicitOrderBy)e.dt.push(r),r.field.isKeyField()&&(s=!0);if(!s){const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new xc(is.keyField(),r))}}}return e.dt}function fo(n){const e=xt(n);if(!e._t)if(e.limitType==="F")e._t=O_(e.path,e.collectionGroup,Ca(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const r of Ca(e)){const o=r.dir==="desc"?"asc":"desc";t.push(new xc(r.field,o))}const i=e.endAt?new Xh(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new Xh(e.startAt.position,e.startAt.inclusive):null;e._t=O_(e.path,e.collectionGroup,t,e.filters,e.limit,i,s)}return e._t}function Wg(n,e){e.getFirstInequalityField(),rv(n);const t=n.filters.concat([e]);return new uf(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Vg(n,e,t){return new uf(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function gm(n,e){return iv(fo(n),fo(e))&&n.limitType===e.limitType}function MI(n){return`${nv(fo(n))}|lt:${n.limitType}`}function Fg(n){return`Query(target=${function(e){let t=e.path.canonicalString();return e.collectionGroup!==null&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(i=>OI(i)).join(", ")}]`),pm(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Fa(i)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Fa(i)).join(",")),`Target(${t})`}(fo(n))}; limitType=${n.limitType})`}function vm(n,e){return e.isFoundDocument()&&function(t,i){const s=i.key.path;return t.collectionGroup!==null?i.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(s):Mt.isDocumentKey(t.path)?t.path.isEqual(s):t.path.isImmediateParentOf(s)}(n,e)&&function(t,i){for(const s of Ca(t))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(t,i){for(const s of t.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(t,i){return!(t.startAt&&!function(s,r,o){const l=k_(s,r,o);return s.inclusive?l<=0:l<0}(t.startAt,Ca(t),i)||t.endAt&&!function(s,r,o){const l=k_(s,r,o);return s.inclusive?l>=0:l>0}(t.endAt,Ca(t),i))}(n,e)}function XM(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function BI(n){return(e,t)=>{let i=!1;for(const s of Ca(n)){const r=QM(s,e,t);if(r!==0)return r;i=i||s.field.isKeyField()}return 0}}function QM(n,e,t){const i=n.field.isKeyField()?Mt.comparator(e.key,t.key):function(s,r,o){const l=r.data.field(s),a=o.data.field(s);return l!==null&&a!==null?Va(l,a):qt()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return qt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LI(n,e){if(n.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Kh(e)?"-0":e}}function UI(n){return{integerValue:""+n}}function YM(n,e){return PM(e)?UI(e):LI(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(){this._=void 0}}function JM(n,e,t){return n instanceof Qh?function(i,s){const r={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&(r.fields.__previous_value__=s),{mapValue:r}}(t,e):n instanceof Eu?VI(n,e):n instanceof wu?FI(n,e):function(i,s){const r=WI(i,s),o=D_(r)+D_(i.gt);return Bg(r)&&Bg(i.gt)?UI(o):LI(i.yt,o)}(n,e)}function ZM(n,e,t){return n instanceof Eu?VI(n,e):n instanceof wu?FI(n,e):t}function WI(n,e){return n instanceof Yh?Bg(t=e)||function(i){return!!i&&"doubleValue"in i}(t)?e:{integerValue:0}:null;var t}class Qh extends bm{}class Eu extends bm{constructor(e){super(),this.elements=e}}function VI(n,e){const t=jI(e);for(const i of n.elements)t.some(s=>zr(s,i))||t.push(i);return{arrayValue:{values:t}}}class wu extends bm{constructor(e){super(),this.elements=e}}function FI(n,e){let t=jI(e);for(const i of n.elements)t=t.filter(s=>!zr(s,i));return{arrayValue:{values:t}}}class Yh extends bm{constructor(e,t){super(),this.yt=e,this.gt=t}}function D_(n){return _i(n.integerValue||n.doubleValue)}function jI(n){return tv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function xM(n,e){return n.field.isEqual(e.field)&&function(t,i){return t instanceof Eu&&i instanceof Eu||t instanceof wu&&i instanceof wu?Ua(t.elements,i.elements,zr):t instanceof Yh&&i instanceof Yh?zr(t.gt,i.gt):t instanceof Qh&&i instanceof Qh}(n.transform,e.transform)}class $M{constructor(e,t){this.version=e,this.transformResults=t}}class lo{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new lo}static exists(e){return new lo(void 0,e)}static updateTime(e){return new lo(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function gh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class _m{}function HI(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new zI(n.key,lo.none()):new ff(n.key,n.data,lo.none());{const t=n.data,i=Zs.empty();let s=new Ni(is.comparator);for(let r of e.fields)if(!s.has(r)){let o=t.field(r);o===null&&r.length>1&&(r=r.popLast(),o=t.field(r)),o===null?i.delete(r):i.set(r,o),s=s.add(r)}return new $l(n.key,i,new mr(s.toArray()),lo.none())}}function e8(n,e,t){n instanceof ff?function(i,s,r){const o=i.value.clone(),l=P_(i.fieldTransforms,s,r.transformResults);o.setAll(l),s.convertToFoundDocument(r.version,o).setHasCommittedMutations()}(n,e,t):n instanceof $l?function(i,s,r){if(!gh(i.precondition,s))return void s.convertToUnknownDocument(r.version);const o=P_(i.fieldTransforms,s,r.transformResults),l=s.data;l.setAll(qI(i)),l.setAll(o),s.convertToFoundDocument(r.version,l).setHasCommittedMutations()}(n,e,t):function(i,s,r){s.convertToNoDocument(r.version).setHasCommittedMutations()}(0,e,t)}function $c(n,e,t,i){return n instanceof ff?function(s,r,o,l){if(!gh(s.precondition,r))return o;const a=s.value.clone(),c=M_(s.fieldTransforms,l,r);return a.setAll(c),r.convertToFoundDocument(r.version,a).setHasLocalMutations(),null}(n,e,t,i):n instanceof $l?function(s,r,o,l){if(!gh(s.precondition,r))return o;const a=M_(s.fieldTransforms,l,r),c=r.data;return c.setAll(qI(s)),c.setAll(a),r.convertToFoundDocument(r.version,c).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(u=>u.field))}(n,e,t,i):function(s,r,o){return gh(s.precondition,r)?(r.convertToNoDocument(r.version).setHasLocalMutations(),null):o}(n,e,t)}function t8(n,e){let t=null;for(const i of n.fieldTransforms){const s=e.data.field(i.field),r=WI(i.transform,s||null);r!=null&&(t===null&&(t=Zs.empty()),t.set(i.field,r))}return t||null}function N_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(t,i){return t===void 0&&i===void 0||!(!t||!i)&&Ua(t,i,(s,r)=>xM(s,r))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class ff extends _m{constructor(e,t,i,s=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class $l extends _m{constructor(e,t,i,s,r=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function qI(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function P_(n,e,t){const i=new Map;qn(n.length===t.length);for(let s=0;s<t.length;s++){const r=n[s],o=r.transform,l=e.data.field(r.field);i.set(r.field,ZM(o,l,t[s]))}return i}function M_(n,e,t){const i=new Map;for(const s of n){const r=s.transform,o=t.data.field(s.field);i.set(s.field,JM(r,o,e))}return i}class zI extends _m{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class n8 extends _m{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i8{constructor(e){this.count=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bi,pn;function s8(n){switch(n){default:return qt();case $e.CANCELLED:case $e.UNKNOWN:case $e.DEADLINE_EXCEEDED:case $e.RESOURCE_EXHAUSTED:case $e.INTERNAL:case $e.UNAVAILABLE:case $e.UNAUTHENTICATED:return!1;case $e.INVALID_ARGUMENT:case $e.NOT_FOUND:case $e.ALREADY_EXISTS:case $e.PERMISSION_DENIED:case $e.FAILED_PRECONDITION:case $e.ABORTED:case $e.OUT_OF_RANGE:case $e.UNIMPLEMENTED:case $e.DATA_LOSS:return!0}}function GI(n){if(n===void 0)return uo("GRPC error has no .code"),$e.UNKNOWN;switch(n){case bi.OK:return $e.OK;case bi.CANCELLED:return $e.CANCELLED;case bi.UNKNOWN:return $e.UNKNOWN;case bi.DEADLINE_EXCEEDED:return $e.DEADLINE_EXCEEDED;case bi.RESOURCE_EXHAUSTED:return $e.RESOURCE_EXHAUSTED;case bi.INTERNAL:return $e.INTERNAL;case bi.UNAVAILABLE:return $e.UNAVAILABLE;case bi.UNAUTHENTICATED:return $e.UNAUTHENTICATED;case bi.INVALID_ARGUMENT:return $e.INVALID_ARGUMENT;case bi.NOT_FOUND:return $e.NOT_FOUND;case bi.ALREADY_EXISTS:return $e.ALREADY_EXISTS;case bi.PERMISSION_DENIED:return $e.PERMISSION_DENIED;case bi.FAILED_PRECONDITION:return $e.FAILED_PRECONDITION;case bi.ABORTED:return $e.ABORTED;case bi.OUT_OF_RANGE:return $e.OUT_OF_RANGE;case bi.UNIMPLEMENTED:return $e.UNIMPLEMENTED;case bi.DATA_LOSS:return $e.DATA_LOSS;default:return qt()}}(pn=bi||(bi={}))[pn.OK=0]="OK",pn[pn.CANCELLED=1]="CANCELLED",pn[pn.UNKNOWN=2]="UNKNOWN",pn[pn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pn[pn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pn[pn.NOT_FOUND=5]="NOT_FOUND",pn[pn.ALREADY_EXISTS=6]="ALREADY_EXISTS",pn[pn.PERMISSION_DENIED=7]="PERMISSION_DENIED",pn[pn.UNAUTHENTICATED=16]="UNAUTHENTICATED",pn[pn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pn[pn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pn[pn.ABORTED=10]="ABORTED",pn[pn.OUT_OF_RANGE=11]="OUT_OF_RANGE",pn[pn.UNIMPLEMENTED=12]="UNIMPLEMENTED",pn[pn.INTERNAL=13]="INTERNAL",pn[pn.UNAVAILABLE=14]="UNAVAILABLE",pn[pn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[s,r]of i)if(this.equalsFn(s,e))return r}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return void(s[r]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[t]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){dc(this.inner,(t,i)=>{for(const[s,r]of i)e(s,r)})}isEmpty(){return EI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r8=new Bi(Mt.comparator);function ho(){return r8}const KI=new Bi(Mt.comparator);function Wc(...n){let e=KI;for(const t of n)e=e.insert(t.key,t);return e}function XI(n){let e=KI;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function yl(){return eu()}function QI(){return eu()}function eu(){return new mc(n=>n.toString(),(n,e)=>n.isEqual(e))}const o8=new Bi(Mt.comparator),l8=new Ni(Mt.comparator);function hn(...n){let e=l8;for(const t of n)e=e.add(t);return e}const a8=new Ni(Dn);function YI(){return a8}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e,t,i,s,r){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const s=new Map;return s.set(e,hf.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new ym(Jt.min(),s,YI(),ho(),hn())}}class hf{constructor(e,t,i,s,r){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new hf(i,t,hn(),hn(),hn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e,t,i,s){this.It=e,this.removedTargetIds=t,this.key=i,this.Tt=s}}class JI{constructor(e,t){this.targetId=e,this.Et=t}}class ZI{constructor(e,t,i=fs.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=s}}class B_{constructor(){this.At=0,this.Rt=U_(),this.bt=fs.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return this.At!==0}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=hn(),t=hn(),i=hn();return this.Rt.forEach((s,r)=>{switch(r){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:i=i.add(s);break;default:qt()}}),new hf(this.bt,this.Pt,e,t,i)}xt(){this.vt=!1,this.Rt=U_()}Nt(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class c8{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=ho(),this.qt=L_(),this.Ut=new Ni(Dn)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}jt(e){this.forEachTarget(e,t=>{const i=this.Wt(t);switch(e.state){case 0:this.zt(t)&&i.Dt(e.resumeToken);break;case 1:i.Mt(),i.Vt||i.xt(),i.Dt(e.resumeToken);break;case 2:i.Mt(),i.Vt||this.removeTarget(t);break;case 3:this.zt(t)&&(i.Ft(),i.Dt(e.resumeToken));break;case 4:this.zt(t)&&(this.Ht(t),i.Dt(e.resumeToken));break;default:qt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((i,s)=>{this.zt(s)&&t(s)})}Jt(e){const t=e.targetId,i=e.Et.count,s=this.Yt(t);if(s){const r=s.target;if(Ug(r))if(i===0){const o=new Mt(r.path);this.Qt(t,o,ts.newNoDocument(o,Jt.min()))}else qn(i===1);else this.Xt(t)!==i&&(this.Ht(t),this.Ut=this.Ut.add(t))}}Zt(e){const t=new Map;this.Bt.forEach((r,o)=>{const l=this.Yt(o);if(l){if(r.current&&Ug(l.target)){const a=new Mt(l.target.path);this.Lt.get(a)!==null||this.te(o,a)||this.Qt(o,a,ts.newNoDocument(a,e))}r.St&&(t.set(o,r.Ct()),r.xt())}});let i=hn();this.qt.forEach((r,o)=>{let l=!0;o.forEachWhile(a=>{const c=this.Yt(a);return!c||c.purpose===2||(l=!1,!1)}),l&&(i=i.add(r))}),this.Lt.forEach((r,o)=>o.setReadTime(e));const s=new ym(e,t,this.Ut,this.Lt,i);return this.Lt=ho(),this.qt=L_(),this.Ut=new Ni(Dn),s}Gt(e,t){if(!this.zt(e))return;const i=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,i),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,i){if(!this.zt(e))return;const s=this.Wt(e);this.te(e,t)?s.Nt(t,1):s.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),i&&(this.Lt=this.Lt.insert(t,i))}removeTarget(e){this.Bt.delete(e)}Xt(e){const t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let t=this.Bt.get(e);return t||(t=new B_,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new Ni(Dn),this.qt=this.qt.insert(e,t)),t}zt(e){const t=this.Yt(e)!==null;return t||Nt("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new B_),this.$t.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}function L_(){return new Bi(Mt.comparator)}function U_(){return new Bi(Mt.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u8=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),f8=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),h8=(()=>({and:"AND",or:"OR"}))();class d8{constructor(e,t){this.databaseId=e,this.wt=t}}function Jh(n,e){return n.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xI(n,e){return n.wt?e.toBase64():e.toUint8Array()}function m8(n,e){return Jh(n,e.toTimestamp())}function Wr(n){return qn(!!n),Jt.fromTimestamp(function(e){const t=zo(e);return new fi(t.seconds,t.nanos)}(n))}function ov(n,e){return function(t){return new Zn(["projects",t.projectId,"databases",t.database])}(n).child("documents").child(e).canonicalString()}function $I(n){const e=Zn.fromString(n);return qn(i4(e)),e}function jg(n,e){return ov(n.databaseId,e.path)}function Ep(n,e){const t=$I(e);if(t.get(1)!==n.databaseId.projectId)throw new Ot($e.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ot($e.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Mt(e4(t))}function Hg(n,e){return ov(n.databaseId,e)}function p8(n){const e=$I(n);return e.length===4?Zn.emptyPath():e4(e)}function qg(n){return new Zn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function e4(n){return qn(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function W_(n,e,t){return{name:jg(n,e),fields:t.value.mapValue.fields}}function g8(n,e){let t;if("targetChange"in e){e.targetChange;const i=function(a){return a==="NO_CHANGE"?0:a==="ADD"?1:a==="REMOVE"?2:a==="CURRENT"?3:a==="RESET"?4:qt()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],r=function(a,c){return a.wt?(qn(c===void 0||typeof c=="string"),fs.fromBase64String(c||"")):(qn(c===void 0||c instanceof Uint8Array),fs.fromUint8Array(c||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(a){const c=a.code===void 0?$e.UNKNOWN:GI(a.code);return new Ot(c,a.message||"")}(o);t=new ZI(i,s,r,l||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=Ep(n,i.document.name),r=Wr(i.document.updateTime),o=i.document.createTime?Wr(i.document.createTime):Jt.min(),l=new Zs({mapValue:{fields:i.document.fields}}),a=ts.newFoundDocument(s,r,o,l),c=i.targetIds||[],u=i.removedTargetIds||[];t=new vh(c,u,a.key,a)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=Ep(n,i.document),r=i.readTime?Wr(i.readTime):Jt.min(),o=ts.newNoDocument(s,r),l=i.removedTargetIds||[];t=new vh([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=Ep(n,i.document),r=i.removedTargetIds||[];t=new vh([],r,s,null)}else{if(!("filter"in e))return qt();{e.filter;const i=e.filter;i.targetId;const s=i.count||0,r=new i8(s),o=i.targetId;t=new JI(o,r)}}return t}function v8(n,e){let t;if(e instanceof ff)t={update:W_(n,e.key,e.value)};else if(e instanceof zI)t={delete:jg(n,e.key)};else if(e instanceof $l)t={update:W_(n,e.key,e.data),updateMask:k8(e.fieldMask)};else{if(!(e instanceof n8))return qt();t={verify:jg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(s,r){const o=r.transform;if(o instanceof Qh)return{fieldPath:r.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Eu)return{fieldPath:r.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof wu)return{fieldPath:r.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Yh)return{fieldPath:r.field.canonicalString(),increment:o.gt};throw qt()}(0,i))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:m8(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:qt()}(n,e.precondition)),t}function b8(n,e){return n&&n.length>0?(qn(e!==void 0),n.map(t=>function(i,s){let r=i.updateTime?Wr(i.updateTime):Wr(s);return r.isEqual(Jt.min())&&(r=Wr(s)),new $M(r,i.transformResults||[])}(t,e))):[]}function _8(n,e){return{documents:[Hg(n,e.path)]}}function y8(n,e){const t={structuredQuery:{}},i=e.path;e.collectionGroup!==null?(t.parent=Hg(n,i),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Hg(n,i.popLast()),t.structuredQuery.from=[{collectionId:i.lastSegment()}]);const s=function(a){if(a.length!==0)return n4(_r.create(a,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const r=function(a){if(a.length!==0)return a.map(c=>function(u){return{field:da(u.field),direction:w8(u.dir)}}(c))}(e.orderBy);r&&(t.structuredQuery.orderBy=r);const o=function(a,c){return a.wt||pm(c)?c:{value:c}}(n,e.limit);var l;return o!==null&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt={before:(l=e.startAt).inclusive,values:l.position}),e.endAt&&(t.structuredQuery.endAt=function(a){return{before:!a.inclusive,values:a.position}}(e.endAt)),t}function S8(n){let e=p8(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let s=null;if(i>0){qn(i===1);const u=t.from[0];u.allDescendants?s=u.collectionId:e=e.child(u.collectionId)}let r=[];t.where&&(r=function(u){const f=t4(u);return f instanceof _r&&TI(f)?f.getFilters():[f]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(u=>function(f){return new xc(ma(f.field),function(h){switch(h){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(f.direction))}(u)));let l=null;t.limit&&(l=function(u){let f;return f=typeof u=="object"?u.value:u,pm(f)?null:f}(t.limit));let a=null;t.startAt&&(a=function(u){const f=!!u.before,h=u.values||[];return new Xh(h,f)}(t.startAt));let c=null;return t.endAt&&(c=function(u){const f=!u.before,h=u.values||[];return new Xh(h,f)}(t.endAt)),KM(e,s,o,r,l,"F",a,c)}function E8(n,e){const t=function(i,s){switch(s){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return qt()}}(0,e.purpose);return t==null?null:{"goog-listen-tags":t}}function t4(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=ma(e.unaryFilter.field);return Si.create(t,"==",{doubleValue:NaN});case"IS_NULL":const i=ma(e.unaryFilter.field);return Si.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ma(e.unaryFilter.field);return Si.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=ma(e.unaryFilter.field);return Si.create(r,"!=",{nullValue:"NULL_VALUE"});default:return qt()}}(n):n.fieldFilter!==void 0?function(e){return Si.create(ma(e.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return qt()}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return _r.create(e.compositeFilter.filters.map(t=>t4(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return qt()}}(e.compositeFilter.op))}(n):qt()}function w8(n){return u8[n]}function A8(n){return f8[n]}function C8(n){return h8[n]}function da(n){return{fieldPath:n.canonicalString()}}function ma(n){return is.fromServerFormat(n.fieldPath)}function n4(n){return n instanceof Si?function(e){if(e.op==="=="){if(C_(e.value))return{unaryFilter:{field:da(e.field),op:"IS_NAN"}};if(A_(e.value))return{unaryFilter:{field:da(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(C_(e.value))return{unaryFilter:{field:da(e.field),op:"IS_NOT_NAN"}};if(A_(e.value))return{unaryFilter:{field:da(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:da(e.field),op:A8(e.op),value:e.value}}}(n):n instanceof _r?function(e){const t=e.getFilters().map(i=>n4(i));return t.length===1?t[0]:{compositeFilter:{op:C8(e.op),filters:t}}}(n):qt()}function k8(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function i4(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T8{constructor(e,t,i,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const r=this.mutations[s];r.key.isEqual(e.key)&&e8(r,e,i[s])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=$c(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=$c(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=QI();return this.mutations.forEach(s=>{const r=e.get(s.key),o=r.overlayedDocument;let l=this.applyToLocalView(o,r.mutatedFields);l=t.has(s.key)?null:l;const a=HI(o,l);a!==null&&i.set(s.key,a),o.isValidDocument()||o.convertToNoDocument(Jt.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),hn())}isEqual(e){return this.batchId===e.batchId&&Ua(this.mutations,e.mutations,(t,i)=>N_(t,i))&&Ua(this.baseMutations,e.baseMutations,(t,i)=>N_(t,i))}}class lv{constructor(e,t,i,s){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=s}static from(e,t,i){qn(e.mutations.length===i.length);let s=o8;const r=e.mutations;for(let o=0;o<r.length;o++)s=s.insert(r[o].key,i[o].version);return new lv(e,t,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I8{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(e,t,i,s,r=Jt.min(),o=Jt.min(),l=fs.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l}withSequenceNumber(e){return new Tl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Tl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Tl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O8{constructor(e){this.ie=e}}function R8(n){const e=S8({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Vg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D8{constructor(){this.Je=new N8}addToCollectionParentIndex(e,t){return this.Je.add(t),at.resolve()}getCollectionParents(e,t){return at.resolve(this.Je.getEntries(t))}addFieldIndex(e,t){return at.resolve()}deleteFieldIndex(e,t){return at.resolve()}getDocumentsMatchingTarget(e,t){return at.resolve(null)}getIndexType(e,t){return at.resolve(0)}getFieldIndexes(e,t){return at.resolve([])}getNextCollectionGroupToUpdate(e){return at.resolve(null)}getMinOffset(e,t){return at.resolve(qo.min())}getMinOffsetFromCollectionGroup(e,t){return at.resolve(qo.min())}updateCollectionGroup(e,t,i){return at.resolve()}updateIndexEntries(e,t){return at.resolve()}}class N8{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t]||new Ni(Zn.comparator),r=!s.has(i);return this.index[t]=s.add(i),r}has(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t];return s&&s.has(i)}getEntries(e){return(this.index[e]||new Ni(Zn.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new ja(0)}static vn(){return new ja(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P8{constructor(){this.changes=new mc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ts.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?at.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M8{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B8{constructor(e,t,i,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(i!==null&&$c(i.mutation,s,mr.empty(),fi.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,hn()).next(()=>i))}getLocalViewOfDocuments(e,t,i=hn()){const s=yl();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,i).next(r=>{let o=Wc();return r.forEach((l,a)=>{o=o.insert(l,a.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const i=yl();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,hn()))}populateOverlays(e,t,i){const s=[];return i.forEach(r=>{t.has(r)||s.push(r)}),this.documentOverlayCache.getOverlays(e,s).next(r=>{r.forEach((o,l)=>{t.set(o,l)})})}computeViews(e,t,i,s){let r=ho();const o=eu(),l=eu();return t.forEach((a,c)=>{const u=i.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof $l)?r=r.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),$c(u.mutation,c,u.mutation.getFieldMask(),fi.now())):o.set(c.key,mr.empty())}),this.recalculateAndSaveOverlays(e,r).next(a=>(a.forEach((c,u)=>o.set(c,u)),t.forEach((c,u)=>{var f;return l.set(c,new M8(u,(f=o.get(c))!==null&&f!==void 0?f:null))}),l))}recalculateAndSaveOverlays(e,t){const i=eu();let s=new Bi((o,l)=>o-l),r=hn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const l of o)l.keys().forEach(a=>{const c=t.get(a);if(c===null)return;let u=i.get(a)||mr.empty();u=l.applyToLocalView(c,u),i.set(a,u);const f=(s.get(l.batchId)||hn()).add(a);s=s.insert(l.batchId,f)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const a=l.getNext(),c=a.key,u=a.value,f=QI();u.forEach(h=>{if(!r.has(h)){const d=HI(t.get(h),i.get(h));d!==null&&f.set(h,d),r=r.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return at.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i){return function(s){return Mt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):PI(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i):this.getDocumentsMatchingCollectionQuery(e,t,i)}getNextDocuments(e,t,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,s).next(r=>{const o=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,s-r.size):at.resolve(yl());let l=-1,a=r;return o.next(c=>at.forEach(c,(u,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),r.get(u)?at.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{a=a.insert(u,h)}))).next(()=>this.populateOverlays(e,c,r)).next(()=>this.computeViews(e,a,c,hn())).next(u=>({batchId:l,changes:XI(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Mt(t)).next(i=>{let s=Wc();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,i){const s=t.collectionGroup;let r=Wc();return this.indexManager.getCollectionParents(e,s).next(o=>at.forEach(o,l=>{const a=function(c,u){return new uf(u,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,a,i).next(c=>{c.forEach((u,f)=>{r=r.insert(u,f)})})}).next(()=>r))}getDocumentsMatchingCollectionQuery(e,t,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(r=>(s=r,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,s))).next(r=>{s.forEach((l,a)=>{const c=a.getKey();r.get(c)===null&&(r=r.insert(c,ts.newInvalidDocument(c)))});let o=Wc();return r.forEach((l,a)=>{const c=s.get(l);c!==void 0&&$c(c.mutation,a,mr.empty(),fi.now()),vm(t,a)&&(o=o.insert(l,a))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L8{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return at.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var i;return this.Zn.set(t.id,{id:(i=t).id,version:i.version,createTime:Wr(i.createTime)}),at.resolve()}getNamedQuery(e,t){return at.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,function(i){return{name:i.name,query:R8(i.bundledQuery),readTime:Wr(i.readTime)}}(t)),at.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U8{constructor(){this.overlays=new Bi(Mt.comparator),this.es=new Map}getOverlay(e,t){return at.resolve(this.overlays.get(t))}getOverlays(e,t){const i=yl();return at.forEach(t,s=>this.getOverlay(e,s).next(r=>{r!==null&&i.set(s,r)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((s,r)=>{this.oe(e,t,r)}),at.resolve()}removeOverlaysForBatchId(e,t,i){const s=this.es.get(i);return s!==void 0&&(s.forEach(r=>this.overlays=this.overlays.remove(r)),this.es.delete(i)),at.resolve()}getOverlaysForCollection(e,t,i){const s=yl(),r=t.length+1,o=new Mt(t.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const a=l.getNext().value,c=a.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===r&&a.largestBatchId>i&&s.set(a.getKey(),a)}return at.resolve(s)}getOverlaysForCollectionGroup(e,t,i,s){let r=new Bi((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>i){let u=r.get(c.largestBatchId);u===null&&(u=yl(),r=r.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const l=yl(),a=r.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((c,u)=>l.set(c,u)),!(l.size()>=s)););return at.resolve(l)}oe(e,t,i){const s=this.overlays.get(i.key);if(s!==null){const o=this.es.get(s.largestBatchId).delete(i.key);this.es.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new I8(t,i));let r=this.es.get(t);r===void 0&&(r=hn(),this.es.set(t,r)),this.es.set(t,r.add(i.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(){this.ns=new Ni(Fi.ss),this.rs=new Ni(Fi.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const i=new Fi(e,t);this.ns=this.ns.add(i),this.rs=this.rs.add(i)}us(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.cs(new Fi(e,t))}hs(e,t){e.forEach(i=>this.removeReference(i,t))}ls(e){const t=new Mt(new Zn([])),i=new Fi(t,e),s=new Fi(t,e+1),r=[];return this.rs.forEachInRange([i,s],o=>{this.cs(o),r.push(o.key)}),r}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Mt(new Zn([])),i=new Fi(t,e),s=new Fi(t,e+1);let r=hn();return this.rs.forEachInRange([i,s],o=>{r=r.add(o.key)}),r}containsKey(e){const t=new Fi(e,0),i=this.ns.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Fi{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Mt.comparator(e.key,t.key)||Dn(e._s,t._s)}static os(e,t){return Dn(e._s,t._s)||Mt.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W8{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new Ni(Fi.ss)}checkEmpty(e){return at.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,s){const r=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new T8(r,t,i,s);this.mutationQueue.push(o);for(const l of s)this.gs=this.gs.add(new Fi(l.key,r)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return at.resolve(o)}lookupMutationBatch(e,t){return at.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,s=this.ps(i),r=s<0?0:s;return at.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return at.resolve(this.mutationQueue.length===0?-1:this.ws-1)}getAllMutationBatches(e){return at.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Fi(t,0),s=new Fi(t,Number.POSITIVE_INFINITY),r=[];return this.gs.forEachInRange([i,s],o=>{const l=this.ys(o._s);r.push(l)}),at.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Ni(Dn);return t.forEach(s=>{const r=new Fi(s,0),o=new Fi(s,Number.POSITIVE_INFINITY);this.gs.forEachInRange([r,o],l=>{i=i.add(l._s)})}),at.resolve(this.Is(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,s=i.length+1;let r=i;Mt.isDocumentKey(r)||(r=r.child(""));const o=new Fi(new Mt(r),0);let l=new Ni(Dn);return this.gs.forEachWhile(a=>{const c=a.key.path;return!!i.isPrefixOf(c)&&(c.length===s&&(l=l.add(a._s)),!0)},o),at.resolve(this.Is(l))}Is(e){const t=[];return e.forEach(i=>{const s=this.ys(i);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){qn(this.Ts(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.gs;return at.forEach(t.mutations,s=>{const r=new Fi(s.key,t.batchId);return i=i.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.gs=i})}An(e){}containsKey(e,t){const i=new Fi(t,0),s=this.gs.firstAfterOrEqual(i);return at.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,at.resolve()}Ts(e,t){return this.ps(e)}ps(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V8{constructor(e){this.Es=e,this.docs=new Bi(Mt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,s=this.docs.get(i),r=s?s.size:0,o=this.Es(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:o}),this.size+=o-r,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return at.resolve(i?i.document.mutableCopy():ts.newInvalidDocument(t))}getEntries(e,t){let i=ho();return t.forEach(s=>{const r=this.docs.get(s);i=i.insert(s,r?r.document.mutableCopy():ts.newInvalidDocument(s))}),at.resolve(i)}getDocumentsMatchingQuery(e,t,i,s){let r=ho();const o=t.path,l=new Mt(o.child("")),a=this.docs.getIteratorFrom(l);for(;a.hasNext();){const{key:c,value:{document:u}}=a.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||OM(IM(u),i)<=0||(s.has(u.key)||vm(t,u))&&(r=r.insert(u.key,u.mutableCopy()))}return at.resolve(r)}getAllFromCollectionGroup(e,t,i,s){qt()}As(e,t){return at.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new F8(this)}getSize(e){return at.resolve(this.size)}}class F8 extends P8{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?t.push(this.Yn.addEntry(e,s)):this.Yn.removeEntry(i)}),at.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j8{constructor(e){this.persistence=e,this.Rs=new mc(t=>nv(t),iv),this.lastRemoteSnapshotVersion=Jt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new av,this.targetCount=0,this.vs=ja.Pn()}forEachTarget(e,t){return this.Rs.forEach((i,s)=>t(s)),at.resolve()}getLastRemoteSnapshotVersion(e){return at.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return at.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),at.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.bs&&(this.bs=t),at.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new ja(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,at.resolve()}updateTargetData(e,t){return this.Dn(t),at.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,at.resolve()}removeTargets(e,t,i){let s=0;const r=[];return this.Rs.forEach((o,l)=>{l.sequenceNumber<=t&&i.get(l.targetId)===null&&(this.Rs.delete(o),r.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),at.waitFor(r).next(()=>s)}getTargetCount(e){return at.resolve(this.targetCount)}getTargetData(e,t){const i=this.Rs.get(t)||null;return at.resolve(i)}addMatchingKeys(e,t,i){return this.Ps.us(t,i),at.resolve()}removeMatchingKeys(e,t,i){this.Ps.hs(t,i);const s=this.persistence.referenceDelegate,r=[];return s&&t.forEach(o=>{r.push(s.markPotentiallyOrphaned(e,o))}),at.waitFor(r)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),at.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Ps.ds(t);return at.resolve(i)}containsKey(e,t){return at.resolve(this.Ps.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H8{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new ev(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new j8(this),this.indexManager=new D8,this.remoteDocumentCache=function(i){return new V8(i)}(i=>this.referenceDelegate.xs(i)),this.yt=new O8(t),this.Ns=new L8(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new U8,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Vs[e.toKey()];return i||(i=new W8(t,this.referenceDelegate),this.Vs[e.toKey()]=i),i}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,i){Nt("MemoryPersistence","Starting transaction:",e);const s=new q8(this.Ss.next());return this.referenceDelegate.ks(),i(s).next(r=>this.referenceDelegate.Os(s).next(()=>r)).toPromise().then(r=>(s.raiseOnCommittedEvent(),r))}Ms(e,t){return at.or(Object.values(this.Vs).map(i=>()=>i.containsKey(e,t)))}}class q8 extends DM{constructor(e){super(),this.currentSequenceNumber=e}}class cv{constructor(e){this.persistence=e,this.Fs=new av,this.$s=null}static Bs(e){return new cv(e)}get Ls(){if(this.$s)return this.$s;throw qt()}addReference(e,t,i){return this.Fs.addReference(i,t),this.Ls.delete(i.toString()),at.resolve()}removeReference(e,t,i){return this.Fs.removeReference(i,t),this.Ls.add(i.toString()),at.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),at.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(s=>this.Ls.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(r=>this.Ls.add(r.toString()))}).next(()=>i.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return at.forEach(this.Ls,i=>{const s=Mt.fromPath(i);return this.qs(e,s).next(r=>{r||t.removeEntry(s,Jt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.qs(e,t).next(i=>{i?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}qs(e,t){return at.or([()=>at.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(e,t,i,s){this.targetId=e,this.fromCache=t,this.Si=i,this.Di=s}static Ci(e,t){let i=hn(),s=hn();for(const r of t.docChanges)switch(r.type){case 0:i=i.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new uv(e,t.fromCache,i,s)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z8{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,i,s){return this.ki(e,t).next(r=>r||this.Oi(e,t,s,i)).next(r=>r||this.Mi(e,t))}ki(e,t){if(R_(t))return at.resolve(null);let i=fo(t);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=Vg(t,null,"F"),i=fo(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(r=>{const o=hn(...r);return this.Ni.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,i).next(a=>{const c=this.Fi(t,l);return this.$i(t,c,o,a.readTime)?this.ki(e,Vg(t,null,"F")):this.Bi(e,c,t,a)}))})))}Oi(e,t,i,s){return R_(t)||s.isEqual(Jt.min())?this.Mi(e,t):this.Ni.getDocuments(e,i).next(r=>{const o=this.Fi(t,r);return this.$i(t,o,i,s)?this.Mi(e,t):(y_()<=Rn.DEBUG&&Nt("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Fg(t)),this.Bi(e,o,t,TM(s,-1)))})}Fi(e,t){let i=new Ni(BI(e));return t.forEach((s,r)=>{vm(e,r)&&(i=i.add(r))}),i}$i(e,t,i,s){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const r=e.limitType==="F"?t.last():t.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}Mi(e,t){return y_()<=Rn.DEBUG&&Nt("QueryEngine","Using full collection scan to execute query:",Fg(t)),this.Ni.getDocumentsMatchingQuery(e,t,qo.min())}Bi(e,t,i,s){return this.Ni.getDocumentsMatchingQuery(e,i,s).next(r=>(t.forEach(o=>{r=r.insert(o.key,o)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G8{constructor(e,t,i,s){this.persistence=e,this.Li=t,this.yt=s,this.qi=new Bi(Dn),this.Ui=new mc(r=>nv(r),iv),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(i)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new B8(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qi))}}function K8(n,e,t,i){return new G8(n,e,t,i)}async function s4(n,e){const t=xt(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let s;return t.mutationQueue.getAllMutationBatches(i).next(r=>(s=r,t.Qi(e),t.mutationQueue.getAllMutationBatches(i))).next(r=>{const o=[],l=[];let a=hn();for(const c of s){o.push(c.batchId);for(const u of c.mutations)a=a.add(u.key)}for(const c of r){l.push(c.batchId);for(const u of c.mutations)a=a.add(u.key)}return t.localDocuments.getDocuments(i,a).next(c=>({ji:c,removedBatchIds:o,addedBatchIds:l}))})})}function X8(n,e){const t=xt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),r=t.Gi.newChangeBuffer({trackRemovals:!0});return function(o,l,a,c){const u=a.batch,f=u.keys();let h=at.resolve();return f.forEach(d=>{h=h.next(()=>c.getEntry(l,d)).next(m=>{const p=a.docVersions.get(d);qn(p!==null),m.version.compareTo(p)<0&&(u.applyToRemoteDocument(m,a),m.isValidDocument()&&(m.setReadTime(a.commitVersion),c.addEntry(m)))})}),h.next(()=>o.mutationQueue.removeMutationBatch(l,u))}(t,i,e,r).next(()=>r.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(o){let l=hn();for(let a=0;a<o.mutationResults.length;++a)o.mutationResults[a].transformResults.length>0&&(l=l.add(o.batch.mutations[a].key));return l}(e))).next(()=>t.localDocuments.getDocuments(i,s))})}function r4(n){const e=xt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function Q8(n,e){const t=xt(n),i=e.snapshotVersion;let s=t.qi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const o=t.Gi.newChangeBuffer({trackRemovals:!0});s=t.qi;const l=[];e.targetChanges.forEach((u,f)=>{const h=s.get(f);if(!h)return;l.push(t.Cs.removeMatchingKeys(r,u.removedDocuments,f).next(()=>t.Cs.addMatchingKeys(r,u.addedDocuments,f)));let d=h.withSequenceNumber(r.currentSequenceNumber);e.targetMismatches.has(f)?d=d.withResumeToken(fs.EMPTY_BYTE_STRING,Jt.min()).withLastLimboFreeSnapshotVersion(Jt.min()):u.resumeToken.approximateByteSize()>0&&(d=d.withResumeToken(u.resumeToken,i)),s=s.insert(f,d),function(m,p,_){return m.resumeToken.approximateByteSize()===0||p.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(h,d,u)&&l.push(t.Cs.updateTargetData(r,d))});let a=ho(),c=hn();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&l.push(t.persistence.referenceDelegate.updateLimboDocument(r,u))}),l.push(Y8(r,o,e.documentUpdates).next(u=>{a=u.Wi,c=u.zi})),!i.isEqual(Jt.min())){const u=t.Cs.getLastRemoteSnapshotVersion(r).next(f=>t.Cs.setTargetsMetadata(r,r.currentSequenceNumber,i));l.push(u)}return at.waitFor(l).next(()=>o.apply(r)).next(()=>t.localDocuments.getLocalViewOfDocuments(r,a,c)).next(()=>a)}).then(r=>(t.qi=s,r))}function Y8(n,e,t){let i=hn(),s=hn();return t.forEach(r=>i=i.add(r)),e.getEntries(n,i).next(r=>{let o=ho();return t.forEach((l,a)=>{const c=r.get(l);a.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(l)),a.isNoDocument()&&a.version.isEqual(Jt.min())?(e.removeEntry(l,a.readTime),o=o.insert(l,a)):!c.isValidDocument()||a.version.compareTo(c.version)>0||a.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(a),o=o.insert(l,a)):Nt("LocalStore","Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",a.version)}),{Wi:o,zi:s}})}function J8(n,e){const t=xt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Z8(n,e){const t=xt(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return t.Cs.getTargetData(i,e).next(r=>r?(s=r,at.resolve(s)):t.Cs.allocateTargetId(i).next(o=>(s=new Tl(e,o,0,i.currentSequenceNumber),t.Cs.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=t.qi.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.qi=t.qi.insert(i.targetId,i),t.Ui.set(e,i.targetId)),i})}async function zg(n,e,t){const i=xt(n),s=i.qi.get(e),r=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",r,o=>i.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!cf(o))throw o;Nt("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.qi=i.qi.remove(e),i.Ui.delete(s.target)}function V_(n,e,t){const i=xt(n);let s=Jt.min(),r=hn();return i.persistence.runTransaction("Execute query","readonly",o=>function(l,a,c){const u=xt(l),f=u.Ui.get(c);return f!==void 0?at.resolve(u.qi.get(f)):u.Cs.getTargetData(a,c)}(i,o,fo(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,i.Cs.getMatchingKeysForTargetId(o,l.targetId).next(a=>{r=a})}).next(()=>i.Li.getDocumentsMatchingQuery(o,e,t?s:Jt.min(),t?r:hn())).next(l=>(x8(i,XM(e),l),{documents:l,Hi:r})))}function x8(n,e,t){let i=n.Ki.get(e)||Jt.min();t.forEach((s,r)=>{r.readTime.compareTo(i)>0&&(i=r.readTime)}),n.Ki.set(e,i)}class F_{constructor(){this.activeTargetIds=YI()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $8{constructor(){this.Lr=new F_,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,t,i){this.qr[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new F_,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eB{Ur(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Nt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Nt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nB{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iB extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.oo=t+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,i,s,r){const o=this.ho(e,t);Nt("RestConnection","Sending: ",o,i);const l={};return this.lo(l,s,r),this.fo(e,o,l,i).then(a=>(Nt("RestConnection","Received: ",a),a),a=>{throw Pg("RestConnection",`${e} failed with error: `,a,"url: ",o,"request:",i),a})}_o(e,t,i,s,r,o){return this.ao(e,t,i,s,r)}lo(e,t,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+hc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,r)=>e[r]=s),i&&i.headers.forEach((s,r)=>e[r]=s)}ho(e,t){const i=tB[e];return`${this.oo}/v1/${t}:${i}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,i,s){return new Promise((r,o)=>{const l=new vM;l.setWithCredentials(!0),l.listenOnce(mM.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Sp.NO_ERROR:const c=l.getResponseJson();Nt("Connection","XHR received:",JSON.stringify(c)),r(c);break;case Sp.TIMEOUT:Nt("Connection",'RPC "'+e+'" timed out'),o(new Ot($e.DEADLINE_EXCEEDED,"Request time out"));break;case Sp.HTTP_ERROR:const u=l.getStatus();if(Nt("Connection",'RPC "'+e+'" failed with status:',u,"response text:",l.getResponseText()),u>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const h=f==null?void 0:f.error;if(h&&h.status&&h.message){const d=function(m){const p=m.toLowerCase().replace(/_/g,"-");return Object.values($e).indexOf(p)>=0?p:$e.UNKNOWN}(h.status);o(new Ot(d,h.message))}else o(new Ot($e.UNKNOWN,"Server responded with status "+l.getStatus()))}else o(new Ot($e.UNAVAILABLE,"Connection failed."));break;default:qt()}}finally{Nt("Connection",'RPC "'+e+'" completed.')}});const a=JSON.stringify(s);l.send(t,"POST",a,i,15)})}wo(e,t,i){const s=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=hM(),o=dM(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(l.xmlHttpFactory=new gM({})),this.lo(l.initMessageHeaders,t,i),l.encodeInitMessageHeaders=!0;const a=s.join("");Nt("Connection","Creating WebChannel: "+a,l);const c=r.createWebChannel(a,l);let u=!1,f=!1;const h=new nB({Hr:m=>{f?Nt("Connection","Not sending because WebChannel is closed:",m):(u||(Nt("Connection","Opening WebChannel transport."),c.open(),u=!0),Nt("Connection","WebChannel sending:",m),c.send(m))},Jr:()=>c.close()}),d=(m,p,_)=>{m.listen(p,v=>{try{_(v)}catch(y){setTimeout(()=>{throw y},0)}})};return d(c,Mf.EventType.OPEN,()=>{f||Nt("Connection","WebChannel transport opened.")}),d(c,Mf.EventType.CLOSE,()=>{f||(f=!0,Nt("Connection","WebChannel transport closed"),h.io())}),d(c,Mf.EventType.ERROR,m=>{f||(f=!0,Pg("Connection","WebChannel transport errored:",m),h.io(new Ot($e.UNAVAILABLE,"The operation could not be completed")))}),d(c,Mf.EventType.MESSAGE,m=>{var p;if(!f){const _=m.data[0];qn(!!_);const v=_,y=v.error||((p=v[0])===null||p===void 0?void 0:p.error);if(y){Nt("Connection","WebChannel received error:",y);const w=y.status;let A=function(C){const R=bi[C];if(R!==void 0)return GI(R)}(w),E=y.message;A===void 0&&(A=$e.INTERNAL,E="Unknown error status: "+w+" with message "+y.message),f=!0,h.io(new Ot(A,E)),c.close()}else Nt("Connection","WebChannel received:",_),h.ro(_)}}),d(o,pM.STAT_EVENT,m=>{m.stat===b_.PROXY?Nt("Connection","Detected buffering proxy"):m.stat===b_.NOPROXY&&Nt("Connection","Detected no buffering proxy")}),setTimeout(()=>{h.so()},0),h}}function wp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sm(n){return new d8(n,!0)}class o4{constructor(e,t,i=1e3,s=1.5,r=6e4){this.Hs=e,this.timerId=t,this.mo=i,this.yo=s,this.po=r,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),i=Math.max(0,Date.now()-this.Eo),s=Math.max(0,t-i);s>0&&Nt("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,s,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){this.To!==null&&(this.To.skipDelay(),this.To=null)}cancel(){this.To!==null&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(e,t,i,s,r,o,l,a){this.Hs=e,this.vo=i,this.Vo=s,this.connection=r,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=a,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new o4(e,t)}No(){return this.state===1||this.state===5||this.ko()}ko(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Oo()}async stop(){this.No()&&await this.close(0)}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&this.Do===null&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}async $o(){if(this.ko())return this.close(0)}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}async close(e,t){this.Lo(),this.qo(),this.xo.cancel(),this.So++,e!==4?this.xo.reset():t&&t.code===$e.RESOURCE_EXHAUSTED?(uo(t.toString()),uo("Using maximum backoff delay to prevent overloading the backend."),this.xo.Ao()):t&&t.code===$e.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Uo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zr(t)}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.So===t&&this.Go(i,s)},i=>{e(()=>{const s=new Ot($e.UNKNOWN,"Fetching auth token failed: "+i.message);return this.Qo(s)})})}Go(e,t){const i=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{i(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(s=>{i(()=>this.Qo(s))}),this.stream.onMessage(s=>{i(()=>this.onMessage(s))})}Oo(){this.state=5,this.xo.Ro(async()=>{this.state=0,this.start()})}Qo(e){return Nt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Nt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class sB extends l4{constructor(e,t,i,s,r,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,s,o),this.yt=r}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=g8(this.yt,e),i=function(s){if(!("targetChange"in s))return Jt.min();const r=s.targetChange;return r.targetIds&&r.targetIds.length?Jt.min():r.readTime?Wr(r.readTime):Jt.min()}(e);return this.listener.Wo(t,i)}zo(e){const t={};t.database=qg(this.yt),t.addTarget=function(s,r){let o;const l=r.target;return o=Ug(l)?{documents:_8(s,l)}:{query:y8(s,l)},o.targetId=r.targetId,r.resumeToken.approximateByteSize()>0?o.resumeToken=xI(s,r.resumeToken):r.snapshotVersion.compareTo(Jt.min())>0&&(o.readTime=Jh(s,r.snapshotVersion.toTimestamp())),o}(this.yt,e);const i=E8(this.yt,e);i&&(t.labels=i),this.Bo(t)}Ho(e){const t={};t.database=qg(this.yt),t.removeTarget=e,this.Bo(t)}}class rB extends l4{constructor(e,t,i,s,r,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,s,o),this.yt=r,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(qn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=b8(e.writeResults,e.commitTime),i=Wr(e.commitTime);return this.listener.Zo(i,t)}return qn(!e.writeResults||e.writeResults.length===0),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=qg(this.yt),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>v8(this.yt,i))};this.Bo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oB extends class{}{constructor(e,t,i,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.yt=s,this.nu=!1}su(){if(this.nu)throw new Ot($e.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,r])=>this.connection.ao(e,t,i,s,r)).catch(s=>{throw s.name==="FirebaseError"?(s.code===$e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ot($e.UNKNOWN,s.toString())})}_o(e,t,i,s){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,o])=>this.connection._o(e,t,i,r,o,s)).catch(r=>{throw r.name==="FirebaseError"?(r.code===$e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Ot($e.UNKNOWN,r.toString())})}terminate(){this.nu=!0}}class lB{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){this.iu===0&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){this.state==="Online"?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,e==="Online"&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(uo(t),this.ou=!1):Nt("OnlineStateTracker",t)}lu(){this.ru!==null&&(this.ru.cancel(),this.ru=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aB{constructor(e,t,i,s,r){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=r,this.mu.Ur(o=>{i.enqueueAndForget(async()=>{ea(this)&&(Nt("RemoteStore","Restarting streams for network reachability change."),await async function(l){const a=xt(l);a._u.add(4),await df(a),a.gu.set("Unknown"),a._u.delete(4),await Em(a)}(this))})}),this.gu=new lB(i,s)}}async function Em(n){if(ea(n))for(const e of n.wu)await e(!0)}async function df(n){for(const e of n.wu)await e(!1)}function a4(n,e){const t=xt(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),dv(t)?hv(t):pc(t).ko()&&fv(t,e))}function c4(n,e){const t=xt(n),i=pc(t);t.du.delete(e),i.ko()&&u4(t,e),t.du.size===0&&(i.ko()?i.Fo():ea(t)&&t.gu.set("Unknown"))}function fv(n,e){n.yu.Ot(e.targetId),pc(n).zo(e)}function u4(n,e){n.yu.Ot(e),pc(n).Ho(e)}function hv(n){n.yu=new c8({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>n.du.get(e)||null}),pc(n).start(),n.gu.uu()}function dv(n){return ea(n)&&!pc(n).No()&&n.du.size>0}function ea(n){return xt(n)._u.size===0}function f4(n){n.yu=void 0}async function cB(n){n.du.forEach((e,t)=>{fv(n,e)})}async function uB(n,e){f4(n),dv(n)?(n.gu.hu(e),hv(n)):n.gu.set("Unknown")}async function fB(n,e,t){if(n.gu.set("Online"),e instanceof ZI&&e.state===2&&e.cause)try{await async function(i,s){const r=s.cause;for(const o of s.targetIds)i.du.has(o)&&(await i.remoteSyncer.rejectListen(o,r),i.du.delete(o),i.yu.removeTarget(o))}(n,e)}catch(i){Nt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Zh(n,i)}else if(e instanceof vh?n.yu.Kt(e):e instanceof JI?n.yu.Jt(e):n.yu.jt(e),!t.isEqual(Jt.min()))try{const i=await r4(n.localStore);t.compareTo(i)>=0&&await function(s,r){const o=s.yu.Zt(r);return o.targetChanges.forEach((l,a)=>{if(l.resumeToken.approximateByteSize()>0){const c=s.du.get(a);c&&s.du.set(a,c.withResumeToken(l.resumeToken,r))}}),o.targetMismatches.forEach(l=>{const a=s.du.get(l);if(!a)return;s.du.set(l,a.withResumeToken(fs.EMPTY_BYTE_STRING,a.snapshotVersion)),u4(s,l);const c=new Tl(a.target,l,1,a.sequenceNumber);fv(s,c)}),s.remoteSyncer.applyRemoteEvent(o)}(n,t)}catch(i){Nt("RemoteStore","Failed to raise snapshot:",i),await Zh(n,i)}}async function Zh(n,e,t){if(!cf(e))throw e;n._u.add(1),await df(n),n.gu.set("Offline"),t||(t=()=>r4(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Nt("RemoteStore","Retrying IndexedDB access"),await t(),n._u.delete(1),await Em(n)})}function h4(n,e){return e().catch(t=>Zh(n,t,e))}async function wm(n){const e=xt(n),t=Go(e);let i=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;hB(e);)try{const s=await J8(e.localStore,i);if(s===null){e.fu.length===0&&t.Fo();break}i=s.batchId,dB(e,s)}catch(s){await Zh(e,s)}d4(e)&&m4(e)}function hB(n){return ea(n)&&n.fu.length<10}function dB(n,e){n.fu.push(e);const t=Go(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function d4(n){return ea(n)&&!Go(n).No()&&n.fu.length>0}function m4(n){Go(n).start()}async function mB(n){Go(n).eu()}async function pB(n){const e=Go(n);for(const t of n.fu)e.Xo(t.mutations)}async function gB(n,e,t){const i=n.fu.shift(),s=lv.from(i,e,t);await h4(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await wm(n)}async function vB(n,e){e&&Go(n).Yo&&await async function(t,i){if(s=i.code,s8(s)&&s!==$e.ABORTED){const r=t.fu.shift();Go(t).Mo(),await h4(t,()=>t.remoteSyncer.rejectFailedWrite(r.batchId,i)),await wm(t)}var s}(n,e),d4(n)&&m4(n)}async function H_(n,e){const t=xt(n);t.asyncQueue.verifyOperationInProgress(),Nt("RemoteStore","RemoteStore received new credentials");const i=ea(t);t._u.add(3),await df(t),i&&t.gu.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),await Em(t)}async function bB(n,e){const t=xt(n);e?(t._u.delete(2),await Em(t)):e||(t._u.add(2),await df(t),t.gu.set("Unknown"))}function pc(n){return n.pu||(n.pu=function(e,t,i){const s=xt(e);return s.su(),new sB(t,s.connection,s.authCredentials,s.appCheckCredentials,s.yt,i)}(n.datastore,n.asyncQueue,{Yr:cB.bind(null,n),Zr:uB.bind(null,n),Wo:fB.bind(null,n)}),n.wu.push(async e=>{e?(n.pu.Mo(),dv(n)?hv(n):n.gu.set("Unknown")):(await n.pu.stop(),f4(n))})),n.pu}function Go(n){return n.Iu||(n.Iu=function(e,t,i){const s=xt(e);return s.su(),new rB(t,s.connection,s.authCredentials,s.appCheckCredentials,s.yt,i)}(n.datastore,n.asyncQueue,{Yr:mB.bind(null,n),Zr:vB.bind(null,n),tu:pB.bind(null,n),Zo:gB.bind(null,n)}),n.wu.push(async e=>{e?(n.Iu.Mo(),await wm(n)):(await n.Iu.stop(),n.fu.length>0&&(Nt("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))})),n.Iu}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv{constructor(e,t,i,s,r){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=s,this.removalCallback=r,this.deferred=new kl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,t,i,s,r){const o=Date.now()+i,l=new mv(e,t,o,s,r);return l.start(i),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ot($e.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function pv(n,e){if(uo("AsyncQueue",`${e}: ${n}`),cf(n))return new Ot($e.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e){this.comparator=e?(t,i)=>e(t,i)||Mt.comparator(t.key,i.key):(t,i)=>Mt.comparator(t.key,i.key),this.keyedMap=Wc(),this.sortedSet=new Bi(this.comparator)}static emptySet(e){return new ka(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ka)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,r=i.getNext().key;if(!s.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new ka;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(){this.Tu=new Bi(Mt.comparator)}track(e){const t=e.doc.key,i=this.Tu.get(t);i?e.type!==0&&i.type===3?this.Tu=this.Tu.insert(t,e):e.type===3&&i.type!==1?this.Tu=this.Tu.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.Tu=this.Tu.remove(t):e.type===1&&i.type===2?this.Tu=this.Tu.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):qt():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,i)=>{e.push(i)}),e}}class Ha{constructor(e,t,i,s,r,o,l,a,c){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=r,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(e,t,i,s,r){const o=[];return t.forEach(l=>{o.push({type:0,doc:l})}),new Ha(e,t,ka.emptySet(t),o,i,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==i[s].type||!t[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _B{constructor(){this.Au=void 0,this.listeners=[]}}class yB{constructor(){this.queries=new mc(e=>MI(e),gm),this.onlineState="Unknown",this.Ru=new Set}}async function SB(n,e){const t=xt(n),i=e.query;let s=!1,r=t.queries.get(i);if(r||(s=!0,r=new _B),s)try{r.Au=await t.onListen(i)}catch(o){const l=pv(o,`Initialization of query '${Fg(e.query)}' failed`);return void e.onError(l)}t.queries.set(i,r),r.listeners.push(e),e.bu(t.onlineState),r.Au&&e.Pu(r.Au)&&gv(t)}async function EB(n,e){const t=xt(n),i=e.query;let s=!1;const r=t.queries.get(i);if(r){const o=r.listeners.indexOf(e);o>=0&&(r.listeners.splice(o,1),s=r.listeners.length===0)}if(s)return t.queries.delete(i),t.onUnlisten(i)}function wB(n,e){const t=xt(n);let i=!1;for(const s of e){const r=s.query,o=t.queries.get(r);if(o){for(const l of o.listeners)l.Pu(s)&&(i=!0);o.Au=s}}i&&gv(t)}function AB(n,e,t){const i=xt(n),s=i.queries.get(e);if(s)for(const r of s.listeners)r.onError(t);i.queries.delete(e)}function gv(n){n.Ru.forEach(e=>{e.next()})}class CB{constructor(e,t,i){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=i||{}}Pu(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new Ha(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){if(!e.fromCache)return!0;const i=t!=="Offline";return(!this.options.Nu||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Du(e){if(e.docChanges.length>0)return!0;const t=this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}xu(e){e=Ha.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4{constructor(e){this.key=e}}class g4{constructor(e){this.key=e}}class kB{constructor(e,t){this.query=e,this.qu=t,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=hn(),this.mutatedKeys=hn(),this.Gu=BI(e),this.Qu=new ka(this.Gu)}get ju(){return this.qu}Wu(e,t){const i=t?t.zu:new q_,s=t?t.Qu:this.Qu;let r=t?t.mutatedKeys:this.mutatedKeys,o=s,l=!1;const a=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((u,f)=>{const h=s.get(u),d=vm(this.query,f)?f:null,m=!!h&&this.mutatedKeys.has(h.key),p=!!d&&(d.hasLocalMutations||this.mutatedKeys.has(d.key)&&d.hasCommittedMutations);let _=!1;h&&d?h.data.isEqual(d.data)?m!==p&&(i.track({type:3,doc:d}),_=!0):this.Hu(h,d)||(i.track({type:2,doc:d}),_=!0,(a&&this.Gu(d,a)>0||c&&this.Gu(d,c)<0)&&(l=!0)):!h&&d?(i.track({type:0,doc:d}),_=!0):h&&!d&&(i.track({type:1,doc:h}),_=!0,(a||c)&&(l=!0)),_&&(d?(o=o.add(d),r=p?r.add(u):r.delete(u)):(o=o.delete(u),r=r.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),r=r.delete(u.key),i.track({type:1,doc:u})}return{Qu:o,zu:i,$i:l,mutatedKeys:r}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i){const s=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const r=e.zu.Eu();r.sort((c,u)=>function(f,h){const d=m=>{switch(m){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return qt()}};return d(f)-d(h)}(c.type,u.type)||this.Gu(c.doc,u.doc)),this.Ju(i);const o=t?this.Yu():[],l=this.Ku.size===0&&this.current?1:0,a=l!==this.Uu;return this.Uu=l,r.length!==0||a?{snapshot:new Ha(this.query,e.Qu,s,r,e.mutatedKeys,l===0,a,!1,!!i&&i.resumeToken.approximateByteSize()>0),Xu:o}:{Xu:o}}bu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new q_,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.qu=this.qu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qu=this.qu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=hn(),this.Qu.forEach(i=>{this.Zu(i.key)&&(this.Ku=this.Ku.add(i.key))});const t=[];return e.forEach(i=>{this.Ku.has(i)||t.push(new g4(i))}),this.Ku.forEach(i=>{e.has(i)||t.push(new p4(i))}),t}tc(e){this.qu=e.Hi,this.Ku=hn();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return Ha.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,this.Uu===0,this.hasCachedResults)}}class TB{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class IB{constructor(e){this.key=e,this.nc=!1}}class OB{constructor(e,t,i,s,r,o){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=o,this.sc={},this.ic=new mc(l=>MI(l),gm),this.rc=new Map,this.oc=new Set,this.uc=new Bi(Mt.comparator),this.cc=new Map,this.ac=new av,this.hc={},this.lc=new Map,this.fc=ja.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return this.dc===!0}}async function RB(n,e){const t=FB(n);let i,s;const r=t.ic.get(e);if(r)i=r.targetId,t.sharedClientState.addLocalQueryTarget(i),s=r.view.ec();else{const o=await Z8(t.localStore,fo(e));t.isPrimaryClient&&a4(t.remoteStore,o);const l=t.sharedClientState.addLocalQueryTarget(o.targetId);i=o.targetId,s=await DB(t,e,i,l==="current",o.resumeToken)}return s}async function DB(n,e,t,i,s){n._c=(f,h,d)=>async function(m,p,_,v){let y=p.view.Wu(_);y.$i&&(y=await V_(m.localStore,p.query,!1).then(({documents:E})=>p.view.Wu(E,y)));const w=v&&v.targetChanges.get(p.targetId),A=p.view.applyChanges(y,m.isPrimaryClient,w);return G_(m,p.targetId,A.Xu),A.snapshot}(n,f,h,d);const r=await V_(n.localStore,e,!0),o=new kB(e,r.Hi),l=o.Wu(r.documents),a=hf.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",s),c=o.applyChanges(l,n.isPrimaryClient,a);G_(n,t,c.Xu);const u=new TB(e,t,o);return n.ic.set(e,u),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),c.snapshot}async function NB(n,e){const t=xt(n),i=t.ic.get(e),s=t.rc.get(i.targetId);if(s.length>1)return t.rc.set(i.targetId,s.filter(r=>!gm(r,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(i.targetId),t.sharedClientState.isActiveQueryTarget(i.targetId)||await zg(t.localStore,i.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(i.targetId),c4(t.remoteStore,i.targetId),Gg(t,i.targetId)}).catch(af)):(Gg(t,i.targetId),await zg(t.localStore,i.targetId,!0))}async function PB(n,e,t){const i=jB(n);try{const s=await function(r,o){const l=xt(r),a=fi.now(),c=o.reduce((h,d)=>h.add(d.key),hn());let u,f;return l.persistence.runTransaction("Locally write mutations","readwrite",h=>{let d=ho(),m=hn();return l.Gi.getEntries(h,c).next(p=>{d=p,d.forEach((_,v)=>{v.isValidDocument()||(m=m.add(_))})}).next(()=>l.localDocuments.getOverlayedDocuments(h,d)).next(p=>{u=p;const _=[];for(const v of o){const y=t8(v,u.get(v.key).overlayedDocument);y!=null&&_.push(new $l(v.key,y,DI(y.value.mapValue),lo.exists(!0)))}return l.mutationQueue.addMutationBatch(h,a,_,o)}).next(p=>{f=p;const _=p.applyToLocalDocumentSet(u,m);return l.documentOverlayCache.saveOverlays(h,p.batchId,_)})}).then(()=>({batchId:f.batchId,changes:XI(u)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(r,o,l){let a=r.hc[r.currentUser.toKey()];a||(a=new Bi(Dn)),a=a.insert(o,l),r.hc[r.currentUser.toKey()]=a}(i,s.batchId,t),await mf(i,s.changes),await wm(i.remoteStore)}catch(s){const r=pv(s,"Failed to persist write");t.reject(r)}}async function v4(n,e){const t=xt(n);try{const i=await Q8(t.localStore,e);e.targetChanges.forEach((s,r)=>{const o=t.cc.get(r);o&&(qn(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.nc=!0:s.modifiedDocuments.size>0?qn(o.nc):s.removedDocuments.size>0&&(qn(o.nc),o.nc=!1))}),await mf(t,i,e)}catch(i){await af(i)}}function z_(n,e,t){const i=xt(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const s=[];i.ic.forEach((r,o)=>{const l=o.view.bu(e);l.snapshot&&s.push(l.snapshot)}),function(r,o){const l=xt(r);l.onlineState=o;let a=!1;l.queries.forEach((c,u)=>{for(const f of u.listeners)f.bu(o)&&(a=!0)}),a&&gv(l)}(i.eventManager,e),s.length&&i.sc.Wo(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function MB(n,e,t){const i=xt(n);i.sharedClientState.updateQueryState(e,"rejected",t);const s=i.cc.get(e),r=s&&s.key;if(r){let o=new Bi(Mt.comparator);o=o.insert(r,ts.newNoDocument(r,Jt.min()));const l=hn().add(r),a=new ym(Jt.min(),new Map,new Ni(Dn),o,l);await v4(i,a),i.uc=i.uc.remove(r),i.cc.delete(e),vv(i)}else await zg(i.localStore,e,!1).then(()=>Gg(i,e,t)).catch(af)}async function BB(n,e){const t=xt(n),i=e.batch.batchId;try{const s=await X8(t.localStore,e);_4(t,i,null),b4(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await mf(t,s)}catch(s){await af(s)}}async function LB(n,e,t){const i=xt(n);try{const s=await function(r,o){const l=xt(r);return l.persistence.runTransaction("Reject batch","readwrite-primary",a=>{let c;return l.mutationQueue.lookupMutationBatch(a,o).next(u=>(qn(u!==null),c=u.keys(),l.mutationQueue.removeMutationBatch(a,u))).next(()=>l.mutationQueue.performConsistencyCheck(a)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(a,c,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,c)).next(()=>l.localDocuments.getDocuments(a,c))})}(i.localStore,e);_4(i,e,t),b4(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await mf(i,s)}catch(s){await af(s)}}function b4(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function _4(n,e,t){const i=xt(n);let s=i.hc[i.currentUser.toKey()];if(s){const r=s.get(e);r&&(t?r.reject(t):r.resolve(),s=s.remove(e)),i.hc[i.currentUser.toKey()]=s}}function Gg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.rc.get(e))n.ic.delete(i),t&&n.sc.wc(i,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(i=>{n.ac.containsKey(i)||y4(n,i)})}function y4(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);t!==null&&(c4(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),vv(n))}function G_(n,e,t){for(const i of t)i instanceof p4?(n.ac.addReference(i.key,e),UB(n,i)):i instanceof g4?(Nt("SyncEngine","Document no longer in limbo: "+i.key),n.ac.removeReference(i.key,e),n.ac.containsKey(i.key)||y4(n,i.key)):qt()}function UB(n,e){const t=e.key,i=t.path.canonicalString();n.uc.get(t)||n.oc.has(i)||(Nt("SyncEngine","New document in limbo: "+t),n.oc.add(i),vv(n))}function vv(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new Mt(Zn.fromString(e)),i=n.fc.next();n.cc.set(i,new IB(t)),n.uc=n.uc.insert(t,i),a4(n.remoteStore,new Tl(fo(sv(t.path)),i,2,ev.at))}}async function mf(n,e,t){const i=xt(n),s=[],r=[],o=[];i.ic.isEmpty()||(i.ic.forEach((l,a)=>{o.push(i._c(a,e,t).then(c=>{if((c||t)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(a.targetId,c!=null&&c.fromCache?"not-current":"current"),c){s.push(c);const u=uv.Ci(a.targetId,c);r.push(u)}}))}),await Promise.all(o),i.sc.Wo(s),await async function(l,a){const c=xt(l);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",u=>at.forEach(a,f=>at.forEach(f.Si,h=>c.persistence.referenceDelegate.addReference(u,f.targetId,h)).next(()=>at.forEach(f.Di,h=>c.persistence.referenceDelegate.removeReference(u,f.targetId,h)))))}catch(u){if(!cf(u))throw u;Nt("LocalStore","Failed to update sequence numbers: "+u)}for(const u of a){const f=u.targetId;if(!u.fromCache){const h=c.qi.get(f),d=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(d);c.qi=c.qi.insert(f,m)}}}(i.localStore,r))}async function WB(n,e){const t=xt(n);if(!t.currentUser.isEqual(e)){Nt("SyncEngine","User change. New user:",e.toKey());const i=await s4(t.localStore,e);t.currentUser=e,function(s,r){s.lc.forEach(o=>{o.forEach(l=>{l.reject(new Ot($e.CANCELLED,r))})}),s.lc.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await mf(t,i.ji)}}function VB(n,e){const t=xt(n),i=t.cc.get(e);if(i&&i.nc)return hn().add(i.key);{let s=hn();const r=t.rc.get(e);if(!r)return s;for(const o of r){const l=t.ic.get(o);s=s.unionWith(l.view.ju)}return s}}function FB(n){const e=xt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=v4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=VB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=MB.bind(null,e),e.sc.Wo=wB.bind(null,e.eventManager),e.sc.wc=AB.bind(null,e.eventManager),e}function jB(n){const e=xt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=BB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=LB.bind(null,e),e}class HB{constructor(){this.synchronizeTabs=!1}async initialize(e){this.yt=Sm(e.databaseInfo.databaseId),this.sharedClientState=this.gc(e),this.persistence=this.yc(e),await this.persistence.start(),this.localStore=this.Ic(e),this.gcScheduler=this.Tc(e,this.localStore),this.indexBackfillerScheduler=this.Ec(e,this.localStore)}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return K8(this.persistence,new z8,e.initialUser,this.yt)}yc(e){return new H8(cv.Bs,this.yt)}gc(e){return new $8}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class qB{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>z_(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=WB.bind(null,this.syncEngine),await bB(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new yB}createDatastore(e){const t=Sm(e.databaseInfo.databaseId),i=(s=e.databaseInfo,new iB(s));var s;return function(r,o,l,a){return new oB(r,o,l,a)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return t=this.localStore,i=this.datastore,s=e.asyncQueue,r=l=>z_(this.syncEngine,l,0),o=j_.C()?new j_:new eB,new aB(t,i,s,r,o);var t,i,s,r,o}createSyncEngine(e,t){return function(i,s,r,o,l,a,c){const u=new OB(i,s,r,o,l,a);return c&&(u.dc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=xt(e);Nt("RemoteStore","RemoteStore shutting down."),t._u.add(5),await df(t),t.mu.shutdown(),t.gu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S4(n,e,t){if(!t)throw new Ot($e.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function zB(n,e,t,i){if(e===!0&&i===!0)throw new Ot($e.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function K_(n){if(!Mt.isDocumentKey(n))throw new Ot($e.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function X_(n){if(Mt.isDocumentKey(n))throw new Ot($e.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Am(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":qt()}function tu(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ot($e.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Am(n);throw new Ot($e.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q_=new Map;class Y_{constructor(e){var t;if(e.host===void 0){if(e.ssl!==void 0)throw new Ot($e.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Ot($e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,zB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(e,t,i,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Y_({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ot($e.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new Ot($e.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Y_(e),e.credentials!==void 0&&(this._authCredentials=function(t){if(!t)return new bM;switch(t.type){case"gapi":const i=t.client;return new EM(i,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ot($e.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Q_.get(e);t&&(Nt("ComponentProvider","Removing Datastore"),Q_.delete(e),t.terminate())}(this),Promise.resolve()}}function GB(n,e,t,i={}){var s;const r=(n=tu(n,Cm))._getSettings();if(r.host!=="firestore.googleapis.com"&&r.host!==e&&Pg("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},r),{host:`${e}:${t}`,ssl:!1})),i.mockUserToken){let o,l;if(typeof i.mockUserToken=="string")o=i.mockUserToken,l=$i.MOCK_USER;else{o=nP(i.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const a=i.mockUserToken.sub||i.mockUserToken.user_id;if(!a)throw new Ot($e.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new $i(a)}n._authCredentials=new _M(new yI(o,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new js(this.firestore,e,this._key)}}class gc{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new gc(this.firestore,e,this._query)}}class Vo extends gc{constructor(e,t,i){super(e,t,sv(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new js(this.firestore,null,new Mt(e))}withConverter(e){return new Vo(this.firestore,e,this._path)}}function E4(n,e,...t){if(n=Ml(n),S4("collection","path",e),n instanceof Cm){const i=Zn.fromString(e,...t);return X_(i),new Vo(n,null,i)}{if(!(n instanceof js||n instanceof Vo))throw new Ot($e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Zn.fromString(e,...t));return X_(i),new Vo(n.firestore,null,i)}}function KB(n,e,...t){if(n=Ml(n),arguments.length===1&&(e=SI.R()),S4("doc","path",e),n instanceof Cm){const i=Zn.fromString(e,...t);return K_(i),new js(n,null,new Mt(i))}{if(!(n instanceof js||n instanceof Vo))throw new Ot($e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Zn.fromString(e,...t));return K_(i),new js(n.firestore,n instanceof Vo?n.converter:null,new Mt(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XB{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):uo("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QB{constructor(e,t,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=s,this.user=$i.UNAUTHENTICATED,this.clientId=SI.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,async r=>{Nt("FirestoreClient","Received user=",r.uid),await this.authCredentialListener(r),this.user=r}),this.appCheckCredentials.start(i,r=>(Nt("FirestoreClient","Received new app check token=",r),this.appCheckCredentialListener(r,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ot($e.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new kl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=pv(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function YB(n,e){n.asyncQueue.verifyOperationInProgress(),Nt("FirestoreClient","Initializing OfflineComponentProvider");const t=await n.getConfiguration();await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async s=>{i.isEqual(s)||(await s4(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}async function JB(n,e){n.asyncQueue.verifyOperationInProgress();const t=await ZB(n);Nt("FirestoreClient","Initializing OnlineComponentProvider");const i=await n.getConfiguration();await e.initialize(t,i),n.setCredentialChangeListener(s=>H_(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,r)=>H_(e.remoteStore,r)),n.onlineComponents=e}async function ZB(n){return n.offlineComponents||(Nt("FirestoreClient","Using default OfflineComponentProvider"),await YB(n,new HB)),n.offlineComponents}async function w4(n){return n.onlineComponents||(Nt("FirestoreClient","Using default OnlineComponentProvider"),await JB(n,new qB)),n.onlineComponents}function xB(n){return w4(n).then(e=>e.syncEngine)}async function J_(n){const e=await w4(n),t=e.eventManager;return t.onListen=RB.bind(null,e.syncEngine),t.onUnlisten=NB.bind(null,e.syncEngine),t}class $B{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new o4(this,"async_queue_retry"),this.Wc=()=>{const t=wp();t&&Nt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=wp();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const t=wp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const t=new kl;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}async Jc(){if(this.Lc.length!==0){try{await this.Lc[0](),this.Lc.shift(),this.xo.reset()}catch(e){if(!cf(e))throw e;Nt("AsyncQueue","Operation failed with retryable error: "+e)}this.Lc.length>0&&this.xo.Ro(()=>this.Jc())}}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(i=>{this.Kc=i,this.Gc=!1;const s=function(r){let o=r.message||"";return r.stack&&(o=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),o}(i);throw uo("INTERNAL UNHANDLED ERROR: ",s),i}).then(i=>(this.Gc=!1,i))));return this.Bc=t,t}enqueueAfterDelay(e,t,i){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const s=mv.createAndSchedule(this,e,t,i,r=>this.Yc(r));return this.Uc.push(s),s}zc(){this.Kc&&qt()}verifyOperationInProgress(){}async Xc(){let e;do e=this.Bc,await e;while(e!==this.Bc)}Zc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function Z_(n){return function(e,t){if(typeof e!="object"||e===null)return!1;const i=e;for(const s of t)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}class xh extends Cm{constructor(e,t,i,s){super(e,t,i,s),this.type="firestore",this._queue=new $B,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||C4(this),this._firestoreClient.terminate()}}function eL(n,e){const t=typeof n=="object"?n:o6(),i=typeof n=="string"?n:e||"(default)",s=n6(t,"firestore").getImmediate({identifier:i});if(!s._initialized){const r=$N("firestore");r&&GB(s,...r)}return s}function A4(n){return n._firestoreClient||C4(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function C4(n){var e;const t=n._freezeSettings(),i=function(s,r,o,l){return new NM(s,r,o,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,l.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,t);n._firestoreClient=new QB(n._authCredentials,n._appCheckCredentials,n._queue,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qa(fs.fromBase64String(e))}catch(t){throw new Ot($e.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new qa(fs.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ot($e.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new is(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ot($e.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ot($e.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Dn(this._lat,e._lat)||Dn(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tL=/^__.*__$/;class nL{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new $l(e,this.data,this.fieldMask,t,this.fieldTransforms):new ff(e,this.data,t,this.fieldTransforms)}}function T4(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw qt()}}class yv{constructor(e,t,i,s,r,o){this.settings=e,this.databaseId=t,this.yt=i,this.ignoreUndefinedProperties=s,r===void 0&&this.na(),this.fieldTransforms=r||[],this.fieldMask=o||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new yv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.ia({path:i,oa:!1});return s.ua(e),s}ca(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.ia({path:i,oa:!1});return s.na(),s}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return $h(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(e.length===0)throw this.ha("Document fields must not be empty");if(T4(this.sa)&&tL.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class iL{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.yt=i||Sm(e)}da(e,t,i,s=!1){return new yv({sa:e,methodName:t,fa:i,path:is.emptyPath(),oa:!1,la:s},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function I4(n){const e=n._freezeSettings(),t=Sm(n._databaseId);return new iL(n._databaseId,!!e.ignoreUndefinedProperties,t)}function sL(n,e,t,i,s,r={}){const o=n.da(r.merge||r.mergeFields?2:0,e,t,s);D4("Data must be an object, but it was:",o,i);const l=O4(i,o);let a,c;if(r.merge)a=new mr(o.fieldMask),c=o.fieldTransforms;else if(r.mergeFields){const u=[];for(const f of r.mergeFields){const h=oL(e,f,t);if(!o.contains(h))throw new Ot($e.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);aL(u,h)||u.push(h)}a=new mr(u),c=o.fieldTransforms.filter(f=>a.covers(f.field))}else a=null,c=o.fieldTransforms;return new nL(new Zs(l),a,c)}function rL(n,e,t,i=!1){return Sv(t,n.da(i?4:3,e))}function Sv(n,e){if(R4(n=Ml(n)))return D4("Unsupported field value:",e,n),O4(n,e);if(n instanceof k4)return function(t,i){if(!T4(i.sa))throw i.ha(`${t._methodName}() can only be used with update() and set()`);if(!i.path)throw i.ha(`${t._methodName}() is not currently supported inside arrays`);const s=t._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&e.sa!==4)throw e.ha("Nested arrays are not supported");return function(t,i){const s=[];let r=0;for(const o of t){let l=Sv(o,i.aa(r));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),r++}return{arrayValue:{values:s}}}(n,e)}return function(t,i){if((t=Ml(t))===null)return{nullValue:"NULL_VALUE"};if(typeof t=="number")return YM(i.yt,t);if(typeof t=="boolean")return{booleanValue:t};if(typeof t=="string")return{stringValue:t};if(t instanceof Date){const s=fi.fromDate(t);return{timestampValue:Jh(i.yt,s)}}if(t instanceof fi){const s=new fi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Jh(i.yt,s)}}if(t instanceof _v)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof qa)return{bytesValue:xI(i.yt,t._byteString)};if(t instanceof js){const s=i.databaseId,r=t.firestore._databaseId;if(!r.isEqual(s))throw i.ha(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:ov(t.firestore._databaseId||i.databaseId,t._key.path)}}throw i.ha(`Unsupported field value: ${Am(t)}`)}(n,e)}function O4(n,e){const t={};return EI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):dc(n,(i,s)=>{const r=Sv(s,e.ra(i));r!=null&&(t[i]=r)}),{mapValue:{fields:t}}}function R4(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof fi||n instanceof _v||n instanceof qa||n instanceof js||n instanceof k4)}function D4(n,e,t){if(!R4(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const i=Am(t);throw i==="an object"?e.ha(n+" a custom object"):e.ha(n+" "+i)}}function oL(n,e,t){if((e=Ml(e))instanceof bv)return e._internalPath;if(typeof e=="string")return N4(n,e);throw $h("Field path arguments must be of type string or ",n,!1,void 0,t)}const lL=new RegExp("[~\\*/\\[\\]]");function N4(n,e,t){if(e.search(lL)>=0)throw $h(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new bv(...e.split("."))._internalPath}catch{throw $h(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function $h(n,e,t,i,s){const r=i&&!i.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;t&&(l+=" (via `toFirestore()`)"),l+=". ";let a="";return(r||o)&&(a+=" (found",r&&(a+=` in field ${i}`),o&&(a+=` in document ${s}`),a+=")"),new Ot($e.INVALID_ARGUMENT,l+n+a)}function aL(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(e,t,i,s,r){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new js(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new cL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ev("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class cL extends P4{data(){return super.data()}}function Ev(n,e){return typeof e=="string"?N4(n,e):e instanceof bv?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uL(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ot($e.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class wv{}class fL extends wv{}function hL(n,e,...t){let i=[];e instanceof wv&&i.push(e),i=i.concat(t),function(s){const r=s.filter(l=>l instanceof Av).length,o=s.filter(l=>l instanceof km).length;if(r>1||r>0&&o>0)throw new Ot($e.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)n=s._apply(n);return n}class km extends fL{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new km(e,t,i)}_apply(e){const t=this._parse(e);return M4(e._query,t),new gc(e.firestore,e.converter,Wg(e._query,t))}_parse(e){const t=I4(e.firestore);return function(s,r,o,l,a,c,u){let f;if(a.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new Ot($e.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){$_(u,c);const h=[];for(const d of u)h.push(x_(l,s,d));f={arrayValue:{values:h}}}else f=x_(l,s,u)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||$_(u,c),f=rL(o,r,u,c==="in"||c==="not-in");return Si.create(a,c,f)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function dL(n,e,t){const i=e,s=Ev("where",n);return km._create(s,i,t)}class Av extends wv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Av(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:_r.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let r=i;const o=s.getFlattenedFilters();for(const l of o)M4(r,l),r=Wg(r,l)}(e._query,t),new gc(e.firestore,e.converter,Wg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function x_(n,e,t){if(typeof(t=Ml(t))=="string"){if(t==="")throw new Ot($e.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!PI(e)&&t.indexOf("/")!==-1)throw new Ot($e.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Zn.fromString(t));if(!Mt.isDocumentKey(i))throw new Ot($e.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return w_(n,new Mt(i))}if(t instanceof js)return w_(n,t._key);throw new Ot($e.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Am(t)}.`)}function $_(n,e){if(!Array.isArray(n)||n.length===0)throw new Ot($e.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ot($e.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function M4(n,e){if(e.isInequality()){const i=rv(n),s=e.field;if(i!==null&&!i.isEqual(s))throw new Ot($e.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${i.toString()}' and '${s.toString()}'`);const r=NI(n);r!==null&&mL(n,s,r)}const t=function(i,s){for(const r of i)for(const o of r.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Ot($e.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ot($e.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function mL(n,e,t){if(!t.isEqual(e))throw new Ot($e.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class pL{convertValue(e,t="none"){switch(Ul(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _i(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Wa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw qt()}}convertObject(e,t){const i={};return dc(e.fields,(s,r)=>{i[s]=this.convertValue(r,t)}),i}convertGeoPoint(e){return new _v(_i(e.latitude),_i(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=AI(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(yu(e));default:return null}}convertTimestamp(e){const t=zo(e);return new fi(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Zn.fromString(e);qn(i4(i));const s=new _u(i.get(1),i.get(3)),r=new Mt(i.popFirst(5));return s.isEqual(t)||uo(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gL(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class B4 extends P4{constructor(e,t,i,s,r,o){super(e,t,i,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new bh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Ev("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class bh extends B4{data(e={}){return super.data(e)}}class vL{constructor(e,t,i,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Vc(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new bh(this._firestore,this._userDataWriter,i.key,i,new Vc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ot($e.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let r=0;return i._snapshot.docChanges.map(o=>{const l=new bh(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Vc(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:r++}})}{let r=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const l=new bh(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Vc(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let a=-1,c=-1;return o.type!==0&&(a=r.indexOf(o.doc.key),r=r.delete(o.doc.key)),o.type!==1&&(r=r.add(o.doc),c=r.indexOf(o.doc.key)),{type:bL(o.type),doc:l,oldIndex:a,newIndex:c}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function bL(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return qt()}}class L4 extends pL{constructor(e){super(),this.firestore=e}convertBytes(e){return new qa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new js(this.firestore,null,t)}}function _L(n,e){const t=tu(n.firestore,xh),i=KB(n),s=gL(n.converter,e);return SL(t,[sL(I4(n.firestore),"addDoc",i._key,s,n.converter!==null,{}).toMutation(i._key,lo.exists(!1))]).then(()=>i)}function yL(n,...e){var t,i,s;n=Ml(n);let r={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||Z_(e[o])||(r=e[o],o++);const l={includeMetadataChanges:r.includeMetadataChanges};if(Z_(e[o])){const f=e[o];e[o]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[o+1]=(i=f.error)===null||i===void 0?void 0:i.bind(f),e[o+2]=(s=f.complete)===null||s===void 0?void 0:s.bind(f)}let a,c,u;if(n instanceof js)c=tu(n.firestore,xh),u=sv(n._key.path),a={next:f=>{e[o]&&e[o](EL(c,n,f))},error:e[o+1],complete:e[o+2]};else{const f=tu(n,gc);c=tu(f.firestore,xh),u=f._query;const h=new L4(c);a={next:d=>{e[o]&&e[o](new vL(c,h,f,d))},error:e[o+1],complete:e[o+2]},uL(n._query)}return function(f,h,d,m){const p=new XB(m),_=new CB(h,p,d);return f.asyncQueue.enqueueAndForget(async()=>SB(await J_(f),_)),()=>{p.bc(),f.asyncQueue.enqueueAndForget(async()=>EB(await J_(f),_))}}(A4(c),u,l,a)}function SL(n,e){return function(t,i){const s=new kl;return t.asyncQueue.enqueueAndForget(async()=>PB(await xB(t),i,s)),s.promise}(A4(n),e)}function EL(n,e,t){const i=t.docs.get(e._key),s=new L4(n);return new B4(n,s,e._key,i,new Vc(t.hasPendingWrites,t.fromCache),e.converter)}(function(n,e=!0){(function(t){hc=t})(r6),Uh(new fu("firestore",(t,{instanceIdentifier:i,options:s})=>{const r=t.getProvider("app").getImmediate(),o=new xh(new yM(t.getProvider("auth-internal")),new AM(t.getProvider("app-check-internal")),function(l,a){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new Ot($e.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _u(l.options.projectId,a)}(r,i),r);return s=Object.assign({useFetchStreams:e},s),o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),Aa(__,"3.8.3",n),Aa(__,"3.8.3","esm2017")})();const Kg=n=>Object.values(Et).includes(n),wL=n=>parseInt(n.split("d")[1]),Fc=n=>Math.floor(Math.random()*n+1),ey=n=>{if(typeof n=="number")return n;const[e,t]=n.split("d");return parseInt(e)*Fc(parseInt(t))},xn=(n,e)=>{const t=n.reduce((i,s,r)=>((s==="-"||parseInt(s+"")<0)&&(i=i.substr(0,i.length-1)),i+(s+"")+(r===n.length-1?"":"+")),"");return t.toString()[0]!=="-"&&e?"+"+t:t},AL=n=>n.some(e=>Object.values(Et).includes(e)),Qs=(n,{returnAsString:e=!1}={})=>{if(!Array.isArray(n))return ey(n);const t=n.map(r=>r==="-"?r:ey(r));let i=1;const s=t.reduce((r,o,l)=>{let a=i;if(o==="-")return i=-1,r;i=1;const c=parseInt(o+"");return r+c*a},0);return e?{value:s,resultText:t.reduce((r,o,l)=>{let a=i;if(o==="-")return i=-1,r;i=1;const c=parseInt(o+"")*a,u=Kg(n[l])?`(${n[l]})`:"";return r+""+(l>0?" "+As(c,!0):c)+u},"")}:s},za=n=>{let e=!1;const t="-",i={numSum:0,remainingDice:[]},s=new Set(Object.values(Et)),{remainingDice:r,numSum:o}=n.reduce((l,a)=>(a===t?e=!0:s.has(a)?e?(e=!1,l.remainingDice=[...l.remainingDice,t,a]):l.remainingDice=[...l.remainingDice,a]:e?(e=!1,i.numSum-=a):i.numSum+=a,l),i);return[...r,o]},ty=()=>document.getElementById("dice-box-result"),io=(n=[Et.d20],e={})=>{const t=[new Audio("roll.mp3"),new Audio("roll-2.mp3"),new Audio("roll-3.mp3"),new Audio("roll-4.mp3")],i=()=>{t.forEach(s=>{s.pause(),s.currentTime=0})};return new Promise(s=>{let r=!0,o=null,l=null,a=!1,c=s;e!=null&&e.chatEntryOnRes&&(c=async(m,...p)=>{const _=e==null?void 0:e.db,v=m==null?void 0:m.value,y=m==null?void 0:m.resultText;console.log(_,v,y),Cv(_,{...e==null?void 0:e.chatEntryOnRes,roll:v,rollTooltip:y}),s(m,...p)});const u=n.map(m=>{switch(m){case Et.d2:return Et.d4;case Et.d3:return Et.d6;case Et.d5:return Et.d10;default:return m}}),f=()=>{var m;if(r=!1,window.diceBox.clear(),window.diceBoxContainer.style.pointerEvents="none",(((m=ty())==null?void 0:m.style)||{opacity:0}).opacity=0,o&&clearTimeout(o),l)l();else if(!a&&!(e!=null&&e.disableRollOnCancel)){const p=n.map(y=>Qs([y])),_=[...p,...(e==null?void 0:e.modifier)||[]],v=Qs([...p,...(e==null?void 0:e.modifier)||[]]);c({value:v,resultText:h(_,v,{hideResult:!0}),resultArray:p})}},h=(m,p,{hideResult:_=!1}={})=>{let v;return v=m.reduce((y,w,A)=>{const E=A===0?"":" ",C=A===0?w:As(w,!0);return y+E+`${C}${A>=n.length?"":`(${n[A]})`}`},""),_?v:`${v} = ${p}`};i();const d=[0,1,2,3];n.forEach(()=>{if(!d.length)return;const m=Math.floor(Math.random()*d.length),[p]=d.splice(m,1);t[p].play()}),window.diceBox.roll(u).then(m=>{if(a=!0,!r)return;let p=!1;m.map(({value:E})=>E);const v=[...m.map(({value:E},C)=>u[C]!==n[C]?(p=!0,wL(n[C]),Math.ceil(E/2)):E),...e.modifier||[]],y=Qs(v),w=ty();w&&!e.disableResultBox&&(w.style.opacity="1",w.innerHTML=e!=null&&e.customResultBoxLabel?e==null?void 0:e.customResultBoxLabel(v,y,{sanitizedDice:u,hasUnrealDice:p}):h(v,y));const A={resultArray:v,resultText:h(v,y,{hideResult:!0}),value:y};e.clearTimeout?(l=()=>c(A),o=setTimeout(f,e.clearTimeout)):c(A)}),window.diceBoxContainer.style.pointerEvents="auto",window.diceBoxContainer.addEventListener("click",f,{once:!0})})},U4=()=>new Date().toISOString().slice(0,8).replace(/-/g,""),Cv=(n,e)=>_L(E4(n,"lobby","taboola",U4()),{...e,date:fi.now()}),CL=(n,e)=>{if(n.size!==e.size)return!1;for(var t of n)if(!e.has(t))return!1;return!0},$s=n=>n===void 0?0:Math.floor((n-10)/2),ny=n=>n?mo.MAJOR:mo.MINOR,W4=(n,e)=>e.includes(Ue.HEAL_PLUS)||n===kn.PRIEST,kL=(n,e,t)=>{var i=document.createElement("a"),s=new Blob([n],{type:t});i.href=URL.createObjectURL(s),i.download=e,i.click()},V4=(n,e="")=>{try{kL(JSON.stringify(n),`${e}${n.playerName}-fe3h.json`,"text/plain")}catch(t){alert("Failed to export sheet, see console"),console.error(t)}},Oc=n=>{navigator.clipboard.writeText(n)},rn={ACROBATICS:"ACROBATICS",ANIMAL_HANDLING:"ANIMAL_HANDLING",ARCANA:"ARCANA",ATHLETICS:"ATHLETICS",BARTERING:"BARTERING",CLEANING:"CLEANING",COOKING:"COOKING",DECEPTION:"DECEPTION",GARDENING:"GARDENING",GUARD_DUTY:"GUARD_DUTY",HISTORY:"HISTORY",HUNTING:"HUNTING",INSIGHT:"INSIGHT",INTIMIDATION:"INTIMIDATION",INVESTIGATION:"INVESTIGATION",LOCKPICKING:"LOCKPICKING",MEDICINE:"MEDICINE",NATURE:"NATURE",PERCEPTION:"PERCEPTION",PERFORMANCE:"PERFORMANCE",PERSUASION:"PERSUASION",RELIGION:"RELIGION",SLEIGHT_OF_HAND:"SLEIGHT_OF_HAND",STEALTH:"STEALTH",SURVIVAL:"SURVIVAL"},ed={[rn.ACROBATICS]:{label:"Acrobatics",stat:Ye.DEX},[rn.ANIMAL_HANDLING]:{label:"Animal Handling",stat:Ye.WIS},[rn.ARCANA]:{label:"Arcana",stat:Ye.INT},[rn.ATHLETICS]:{label:"Athletics",stat:Ye.STR},[rn.BARTERING]:{label:"Bartering",stat:[Ye.WIS,Ye.CHA]},[rn.CLEANING]:{label:"Cleaning",stat:[Ye.CON,Ye.WIS]},[rn.COOKING]:{label:"Cooking",stat:[Ye.INT,Ye.WIS]},[rn.DECEPTION]:{label:"Deception",stat:Ye.CHA},[rn.GARDENING]:{label:"Gardening",stat:[Ye.STR,Ye.CON,Ye.WIS]},[rn.GUARD_DUTY]:{label:"Guard Duty",stat:[Ye.CON,Ye.WIS]},[rn.HISTORY]:{label:"History",stat:Ye.INT},[rn.HUNTING]:{label:"Hunting",stat:[Ye.WIS,Ye.DEX]},[rn.INSIGHT]:{label:"Insight",stat:Ye.WIS},[rn.INTIMIDATION]:{label:"Intimidation",stat:Ye.CHA},[rn.INVESTIGATION]:{label:"Investigation",stat:Ye.INT},[rn.LOCKPICKING]:{label:"Lockpicking",stat:Ye.DEX},[rn.MEDICINE]:{label:"Medicine",stat:Ye.WIS},[rn.NATURE]:{label:"Nature",stat:Ye.INT},[rn.PERCEPTION]:{label:"Perception",stat:Ye.WIS},[rn.PERFORMANCE]:{label:"Performance",stat:Ye.CHA},[rn.PERSUASION]:{label:"Persuasion",stat:Ye.CHA},[rn.RELIGION]:{label:"Religion",stat:Ye.INT},[rn.SLEIGHT_OF_HAND]:{label:"Sleight of Hand",stat:Ye.DEX},[rn.STEALTH]:{label:"Stealth",stat:Ye.DEX},[rn.SURVIVAL]:{label:"Survival",stat:Ye.WIS}},TL=Object.keys(ed).reduce((n,e)=>(n[e]=ed[e].stat,n),{}),td=Object.keys(ed).reduce((n,e)=>(n[e]=ed[e].label,n),{});var jn=(n=>(n[n.NONE=0]="NONE",n[n.PROFICIENT=1]="PROFICIENT",n[n.EXPERT=2]="EXPERT",n[n.AWFUL=-2]="AWFUL",n))(jn||{});const IL=""+new URL("../../assets/sword-removebg-preview-6a200c6b.png",import.meta.url).href,OL="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAADqRJREFUaEPVWntQVPe9/573LrDs8g7GCEgUlawsvhA0Qe/M7WOSNnXmtvYxLdDcNvGRakzGTFJbJTZ6L9MGjdG26b1xldsYTbRE01gyqW7R+ggk4m7tjVpEiVSJwi6wwO7Z8+h8v2fPshAfDcof/c3swJ49+zvfz/f7+T5/y8C/+GJQ/kutZ7dvfXlD5fXr1wkOo5uotGHw1Nj1ocsMwwC+cGmacb/5fqRucF9dNzZhWTb2HbyG781rOmPcZ97LAEd7CjzA4OAgJCUlwapn17vzCx6ooifv/N8t3jdedzszMjJiAIwvGwKxUcFVMATFhZ+bgo4EMBKE+TkPOkQiEdB0HQRBAI4TQFEUkJWoolhDGQzH0zNQYfjeBMdpIRBFEfr7++Hf/v1h3/efeHo6SbS5ptrr8zU7ZVkeZgFdV4cBYAUxJny8dm9nAfNzgQHAZyAAFIRleQKg6gxwHAeyEqG/JgBFM6xgWjnVJsHAwAApYU7Jg74lT60xANRsXOM9e6bFqSlDAsdbwDQlaIYF4s0br+3YfSO5E33PCyw9HBcKikBUlQFBkiApyQ7WpESw2WyB1IyM0xmZGYG01KyW1PT0i47UtBYHCBdDWnfttl9uq2xvvwyzSub7nnz6JwaAX79S4/3T4QanJIgkHFLGBBAvlMAZn5sgbiLnMJrF38PxzDCNhtEaGgs2uz2Qlp5VvWrZf7pT8ooDN9u3zdtYvqHmvz26zkDxrDLfsqeeNwBs+cV674cf/NnJaCO9NOqUMeIbjnezpaoqUQMXUUXTolRhiSr4slqtEFE14HkeQrICAi8E7skev3DDpm0tt1PI4Xder9i+w+1GJc6dt/DuA0BnMyMKCoN0wReCSkxMJFDI4YyseyAQCAD6brIt2b3VvbsqXni/v82RkpL3GUv836s/3/7uwXcrcb/Zcx+KA1DzgvdU8zFnLGyZhmCGh1HQb20BdDYUGPexWCwkOFoFowaGP8Fqo+uffvop5OXlAcOJ9auWrqzKK745bUxg3d2t9s0bfx44e/YsKcM1q9T35NMmhe4SAFNw/NvX10dgkDIoNC5bSgZcu3aNQmhfT6979+//OEzzt6LQpbbzazeufXZdb28vAZheNMv35OqoE2+5DYBYHmBubYH4iDQyOqE/dPWGIC01CxISEuq3vbZj0e04H//58cZDh1/d+osFuA8qwOma6Vuxem3Uie8SAPQB5Dj+tdls9HykD66kpKSAPX3cabs9zTO3aOamhYsW3TTa3AjYm6/v1P9w4M1YFCyaMce3YvVPhwOAEVGIjWZic8NINP3fSnPIe/QF5DxGnayszE1FLtfmqiXPXfw8Go+/95Pz58vr6tyeC3/z0Z64ZqIPxFOo5cPjTl0d7rSfF4AZRinySKJ7/vz51TcTvL/Hv5YB/VyCPXXXrYB1t7baz33S5nn55S0uq6RRJEMFzS59KM6JX1rvbT5x1GluZHJ+5MYaGD5gAmMgmrmjlkLnlcQE6OkPQuns+bnL17x46VbC6WfOiExhoVG/3GBh5Pno2AnPa9v/x2WzJIAimyXHIMwufdC3zMzEW+4SAExOoHOQkpEO3/l2hVtKTHBn3ZOdy0liLlqeZUXggA0kpKRtvh2dSPgTJz1v7d7jGgwPAI8lqoYFINZMowUQLUZNC8UsEKtWjSKtp78fOFaC5FQH9PUOgGiVIDk5BRxJqfDII49cHDdxUuG4ceMGbgai62rbiuaTx1cebHgn9/KldpAkASSsUHWRMviYAQCOpfjvSE+HwYEIAM+CHFYhMzsLrl3rhmmTC1sefviR3cWl82sYZihLorZTU/N7ENDVq22P/tXrrd+35w24+mkHpNodEAz2EgAGpJgF5pQ9NAoKjbCA2S+YXYIcMcph7Bsc9nTo6LxCiQyrzdzcfHf1iy/dMHF1dl4uysoafxoBHHrv7badO7fnKqEwWBME6O3yg91ug3A4DCxIMQuMCQAsjzFLBvqCIIc1SLTbKOlMmlLgXv3chmHCf/zxx7YpU6b0xdMoGOws+tm6F1rOnPHCvVn3wMBgL+gyFoCSEX10kRQUUUNwVwBE24OYDIkJNmhtbYWCqVMoofGiBBPz8+tX/3gjZV2kSorF4blwsd3z1t43Fzz7kw3F8QBOnzq24oV16zZlpDlACcnQ1d0J+RNy4Wrn36kcUSJszAIl88rvnEIjAWCxh4lGtEiUjcdPyIHHf7Akd9zEaZf8f7+QI4qiR5bDuQcb3oP6+nrY83bDUI+Kre1r2w43NPxhgRoJgcjyAIwCFk6A3r4AZfaIzMRRqNy3/BmzFvonwyjSgbiI3TUAhAZlijqCZCGNC5JInO/p6YGZM2fCY489ti4lK78a7w33dmyXB+XKuro68P3lDN2/Y8+BGIDrHecfXbNmTT1SJSKHgVE0YDkNBKq/NOotVF0gAKOmEGZAEwBVmDob3dhoYDBU4z2zZs2CiqpKd1rW/cT7wb4r5eHBQU/9W/vg+PHjMBgKE/ApU6fmPhNNdhf++tHhjf+1YQE1PhEZWFWPAcDefCSAufPKfUtWRXviV2p/Rpk4NvK4wfgEBVEUQ+NIHU1lAVgGdI0FhdEN08oylJSUwNe/sbhyfM7UHfidYOeFogjonr179zo+ONoIwWAQBMlKFpxVMnflk8+s3dz2/6cqDv3xffexY8eof9BUGTgdE5+hEEZXogCMPIAWGBWASCRMM5lQRIZwSCWuM8BDWFNAkiSYOnVq4IePP1GVkj6hnoT3Xy7SVc2zs26HAzUvMdEpAyeQoEXFM2Dx4sUtTR80u/bu3UvCkhJ1BTDqm7UjAsDrimZQSNHCUFL20Oe3gDlmkVXsZa0gJlggHFJAsCbAhAkTAt+rqlyYl1dIve2Vy3+ryMxI3fSbbb9ynGg6AawGIHAqWUAULWC320GyJkJmZia0tl2kFpNnuWhQMrjPsCpwGoAOmgEgmonRAqMCgBpBjqITi0IC9A4EQVUA5pTNC3x10aMLJ08uJuGD/qsrOIHb9JtXfwVnWrwgEyUYUCP91KXhQAvzRf9gmDTa0xcEh8MBcihMABhGJwrFA8Dr6p1mYo415jmMwENE1kHnOCiYPC3whS89vLB4zjwS3u+/sj0UGqg8eOAdeP/99yDU1w/5k/Oh9ex5sCeJ5EOhsNE340ALBe8N9hMQNaJEp30aAdAhQhbAWSfS644BsFFnDasKqAoD02fMgG996zuu8RMfoDKgq6tjO8/zlb/9bR0cazwCosgDRFToCfZAarIDGC1Egg8MhrGtpJEiCoYAkFLmYA3DJgLQdJkAYCTF+zTGQgoMRwaoH4jLA9XepuONTnTEUCgEHMfTg0IhmZwTX9hhRTgbmV6RQzBt2jT4+n8sWpdfUExxvu9ae62uqyv37NkDTSdPGDNQRaaEJgoctZa8IN2uir7157pAn+NwpGRemW/JiuhU4pXaFwgAPoziPMuR0Ni6mGNEFEjhk0kTBZPyoaKioj7v/kIqEfxX2so5nvXs2/sWNDU1wbXOq5TQdNUo7iySQIoBxnTSUeKIAtAYHeaWzfMtMSdzW2vXe5tONDqpDBBxfAhEkVhYAwBRtIJ/IATl5eXwla981eNIsy7C4ROWCIPhwRaPx+M47DkE/mtdIAkcWSoUGjBmRJIxhb5zAEYFoDEazMUw+tRzRlOPFmg+ccSJWsY4L8sRqucx25LzqCpIUgLcO/F+WLp0mTszO4cyLParrEP0HPjd71wNDQ3A8SxoWD1KRueEdTwCQArhHixnUGC0S9eMc4LPANjyUjUBMDIxR9rCOI80woYEgeTk5MB3H6twj88rNITvbrUnCUmeXbt2uT76sBk6OzvBIgokMIcPwdolSiGeM5RwpxZAAGQBVoHSsgVDFDIBoA9EIsbgFeM8Jh2M86WlpbDoa19z5xQWk/BIG6stqX7PG7tcR48ehYC/G9LT06Gvxxj16KpqnKgIHDmxrikEgMEK8w5WPICSsgVDs9FX0AdONjrRANjLUr0hYwBmYUrBA/DlL31xZVHZg9SIy8HOomAw6Dn47kHHkcY/QXt7O9x3331UXTK6ZhwTacbsBqtXFBwtipS682UEFRVUwH5guXnAsXUzOvERp6KowHMW49REAXC5ZsA3F3+vMmeqUZjJ/stFA3LEs2/fPgcWXhqWFIIQOzUROKPhMAEgGHPMjk5tHm6MHogBQNEVKCkrHzrgqK35qfcv3mYnhjp7chr09gbh/vyCwNInli7MzJtMGbb/+vVHNT3o3r9/v6OxsZGEFnnDOamC1Azq4Ro5EBu9wMO/qSjGXJThGZjuwtFidDaKAE6fOulEAfqDYRg3bnzLs888X2UKL/v9FcH+oPvtA7vB6/VCR0cHbYQA4g/7zFPKsQKAh6BUyvAMFLnm+H40BGAdAUC8ebmTWn70w6qF5lGP/3J7rSMjY+Wuujo4fPj3gONtjDJYChiRRgWeZ2Ph9m5p+0b7mIcnDM8NB4CnlF5vE1GodMGC3OXL11zCMClq0iZGFyqxPMBooyhGXLfQCSNL2dWgjsHNsV6xxMqxUDxjbrwFqr2+lmYnmmf5suUrp0/Oc2uSzdPb0+c6dOgQ7NtH/QlYRTxVVI3QqBtnvkg7sxszD6rHCgjHMRRgsCOcOXu+b8XqdUYmrq2p9p7+6AMCsH79ekhKSoZTp07B5U86YP/+/ZCdfS90d3eDwEYoqpgHz+ZhA2oGrWE68VgBQEtTkTgSwJbaDd4PT/6ZaqGCggI4d+4cJaYrVzpJ4wnWRKJKgqhTsYdAKVdEz3wxw5rWGCvhKbrFNVRzSsuHqtFfb6nxnjx+xImRpaurC9LS0gB/N2G3p1C06breTXMZTg+RoHiNjklDIcOJBWMOZEahsQKBLS3VVlYLzJlX7vvBktUGhS5d+PiNF198fjHSA1+mhrVoh8RzRn2k6UM/7DB/PhB/8D3ytxMmEPMebOqp1Ij7IUf8/yOz9WcCg2gh+bKzs+Hxpat2T5xU+M1hk7Gx0txY7vsP+HBmqXYwJbIAAAAASUVORK5CYII=",RL=""+new URL("../../assets/axe-removebg-preview-6ec4ca46.png",import.meta.url).href,DL=""+new URL("../../assets/bow-removebg-preview-75a7b4cd.png",import.meta.url).href,NL=""+new URL("../../assets/fists-removebg-preview-1b211e37.png",import.meta.url).href,fe={SWORD:"SWORD",LANCE:"LANCE",AXE:"AXE",BOW:"BOW",FISTS:"FISTS",HEAVY_ARMOR:"HEAVY_ARMOR",RIDING:"RIDING",REASON:"REASON",FAITH:"FAITH",LEADERSHIP:"LEADERSHIP"},so={[fe.SWORD]:"Sword",[fe.LANCE]:"Lance",[fe.AXE]:"Axe",[fe.BOW]:"Bow",[fe.FISTS]:"Fists",[fe.HEAVY_ARMOR]:"Heavy Armor",[fe.RIDING]:"Riding",[fe.REASON]:"Reason",[fe.FAITH]:"Faith",[fe.LEADERSHIP]:"Leadership"},ro={[fe.SWORD]:[Ye.STR,Ye.DEX],[fe.LANCE]:[Ye.STR,Ye.DEX],[fe.AXE]:[Ye.STR],[fe.BOW]:[Ye.DEX],[fe.FISTS]:[Ye.STR,Ye.DEX],[fe.HEAVY_ARMOR]:[Ye.CON],[fe.RIDING]:[rn.ANIMAL_HANDLING],[fe.REASON]:[Ye.INT],[fe.FAITH]:[Ye.INT],[fe.LEADERSHIP]:[Ye.WIS,Ye.CHA]},F4=[fe.SWORD,fe.LANCE,fe.AXE,fe.BOW,fe.FISTS],Tm=[fe.REASON,fe.FAITH],iy=[...F4,...Tm],nd={[fe.SWORD]:IL,[fe.LANCE]:OL,[fe.AXE]:RL,[fe.BOW]:DL,[fe.FISTS]:NL,[fe.HEAVY_ARMOR]:null,[fe.RIDING]:null,[fe.REASON]:null,[fe.FAITH]:null,[fe.LEADERSHIP]:null},vt={WRATH_STRIKE:"WRATH_STRIKE",GROUNDER:"GROUNDER",HAZE_SLICE:"HAZE_SLICE",SUNDER:"SUNDER",BANE_OF_MONSTERS:"BANE_OF_MONSTERS",TEMPEST_LANCE:"TEMPEST_LANCE",KNIGHT_KNEELER:"KNIGHT_KNEELER",SHATTER_SLASH:"SHATTER_SLASH",HIT_AND_RUN:"HIT_AND_RUN",MONSTER_PIERCER:"MONSTER_PIERCER",SMASH:"SMASH",HELM_SPLITTER:"HELM_SPLITTER",FOCUSED_STRIKE:"FOCUSED_STRIKE",SPIKE:"SPIKE",WILD_ABANDON:"WILD_ABANDON",DIAMOND_AXE:"DIAMOND_AXE",MONSTER_BREAKER:"MONSTER_BREAKER",CURVED_SHOT:"CURVED_SHOT",DEADEYE:"DEADEYE",HEAVY_DRAW:"HEAVY_DRAW",WANING_SHOT:"WANING_SHOT",BREAK_SHOT:"BREAK_SHOT",SCHISM_SHOT:"SCHISM_SHOT",MONSTER_BLAST:"MONSTER_BLAST",FADING_BLOW:"FADING_BLOW",RUSHING_BLOW:"RUSHING_BLOW",DRAINING_BLOW:"DRAINING_BLOW",NIMBLE_COMBO:"NIMBLE_COMBO",BOMBARD:"BOMBARD",ONE_TWO_PUNCH:"ONE_TWO_PUNCH",MONSTER_CRUSHER:"MONSTER_CRUSHER",SWAP:"SWAP",SHOVE:"SHOVE",REPOSITION:"REPOSITION",PULL_BACK:"PULL_BACK"},Cr={roll:Et.d20,target:10,mod:1},Ks={roll:Et.d20,target:10,mod:-1},PL={roll:1,target:1,mod:1},Vr={[vt.SWAP]:{label:"Swap",description:"As action, switch places with an adjacent ally. Does not consume a superiority die when used."},[vt.REPOSITION]:{label:"Reposition",description:"As an action, move an adjacent ally directly across you. Does not consume a superiority die"},[vt.SHOVE]:{label:"Shove",description:"As an action, push an adjacent ally 1 space away from you. Does not consume a superiority die"},[vt.PULL_BACK]:{label:"Pull Back",description:"As an action, pull you and an adjacent ally 1 square back. Does not consume a superiority die."},[vt.WRATH_STRIKE]:{label:"Wrath Strike",description:"",compatibleWeapons:[fe.SWORD],damageBonus:[Et.d2],attackBonus:[2],dieCost:Ks},[vt.GROUNDER]:{label:"Grounder",description:"2x damage against flying units",compatibleWeapons:[fe.SWORD],damageBonus:[1],attackBonus:[4]},[vt.BANE_OF_MONSTERS]:{label:"Bane of Monsters",description:"2x damage against monsters",compatibleWeapons:[fe.SWORD],damageBonus:[Et.d2],critBonus:[2]},[vt.HAZE_SLICE]:{label:"Haze Slice",description:"Add +6 to AC against retaliatory attack.",compatibleWeapons:[fe.SWORD],damageBonus:[Et.d2,-1],dieCost:Cr},[vt.SUNDER]:{label:"Sunder",description:"",compatibleWeapons:[fe.SWORD],damageBonus:[1],critBonus:[3],dieCost:Ks},[vt.TEMPEST_LANCE]:{label:"Tempest Lance",description:"",compatibleWeapons:[fe.LANCE],damageBonus:[2],attackBonus:[2],dieCost:Cr},[vt.TEMPEST_LANCE]:{label:"Tempest Lance",description:"",compatibleWeapons:[fe.LANCE],damageBonus:[2],attackBonus:[2],dieCost:Cr},[vt.KNIGHT_KNEELER]:{label:"Knightkneeler",description:"2x damage against cavalry units",compatibleWeapons:[fe.LANCE],damageBonus:[Et.d2],attackBonus:[3]},[vt.SHATTER_SLASH]:{label:"Shatter Slash",description:"Damaged unit takes +1 more damage from martial attacks for 1 round",compatibleWeapons:[fe.LANCE],damageBonus:[1],attackBonus:[2],dieCost:Ks},[vt.HIT_AND_RUN]:{label:"Hit and Run",description:"Add +4 to AC against retaliatory attack. After combat, move 1 space backwards if possible",compatibleWeapons:[fe.LANCE],damageBonus:[1],attackBonus:[2]},[vt.MONSTER_PIERCER]:{label:"Monster Piercer",description:"2x damage against monsters",compatibleWeapons:[fe.LANCE],damageBonus:[2]},[vt.SMASH]:{label:"Smash",description:"",compatibleWeapons:[fe.AXE],damageBonus:[1],attackBonus:[4],critBonus:[4],dieCost:Cr},[vt.HELM_SPLITTER]:{label:"Helm Splitter",description:"2x damage against armored units",compatibleWeapons:[fe.AXE],damageBonus:[2],critBonus:[1],dieCost:Cr},[vt.MONSTER_BREAKER]:{label:"Monster Breaker",description:"2x damage against monsters",compatibleWeapons:[fe.AXE],attackBonus:[Et.d2,1],dieCost:Cr},[vt.FOCUSED_STRIKE]:{label:"Focused Strike",description:"",compatibleWeapons:[fe.AXE],attackBonus:[6]},[vt.SPIKE]:{label:"Spike",description:"",compatibleWeapons:[fe.AXE],damageBonus:[Et.d2],attackBonus:[3],critBonus:[2],dieCost:Cr},[vt.WILD_ABANDON]:{label:"Wild Abandon",description:"",compatibleWeapons:[fe.AXE],damageBonus:[Et.d3,1],attackBonus:[-6],critBonus:[2],dieCost:Cr},[vt.DIAMOND_AXE]:{label:"Diamond Axe",description:"",compatibleWeapons:[fe.AXE],damageBonus:[Et.d2,3],attackBonus:[-4],dieCost:PL},[vt.CURVED_SHOT]:{label:"Curved Shot",description:"",compatibleWeapons:[fe.BOW],attackBonus:[4],range:[2,3],dieCost:Ks},[vt.DEADEYE]:{label:"Deadeye",description:"",compatibleWeapons:[fe.BOW],damageBonus:[Et.d2],range:[3,5],dieCost:Cr},[vt.HEAVY_DRAW]:{label:"Heavy Draw",description:"",compatibleWeapons:[fe.BOW],attackBonus:[Et.d2],damageBonus:[2],range:[2],dieCost:Cr},[vt.WANING_SHOT]:{label:"Waning Shot",description:"Damaged units deal -1 damage on attacks for 1 round",compatibleWeapons:[fe.BOW],damageBonus:[1],attackBonus:[2],range:[2,3],dieCost:Ks},[vt.MONSTER_BLAST]:{label:"Monster Blast",description:"2x damage against monsters",compatibleWeapons:[fe.BOW],damageBonus:[Et.d2],range:[2]},[vt.BREAK_SHOT]:{label:"Break Shot",description:"Damaged unit takes +1 more damage from martial attacks for 1 round",compatibleWeapons:[fe.BOW],damageBonus:[1],attackBonus:[1],range:[2,3],dieCost:Ks},[vt.SCHISM_SHOT]:{label:"Schism Shot",description:"Damaged unit takes +1 more damage from magic attacks for 1 round",compatibleWeapons:[fe.BOW],attackBonus:[3],damageBonus:[1],range:[2,3],dieCost:Ks},[vt.FADING_BLOW]:{label:"Fading Blow",description:"Add +6 to AC against retaliatory attack. After combat, move 1 space backwards if possible",compatibleWeapons:[fe.FISTS],attackBonus:[2],damageBonus:[2],dieCost:Ks},[vt.RUSHING_BLOW]:{label:"Rushing Blow",description:"Add +2 to AC against retaliatory attack. After combat, user moves 1 space in front of the enemy.",compatibleWeapons:[fe.FISTS],attackBonus:[4],damageBonus:[2],dieCost:Ks},[vt.DRAINING_BLOW]:{label:"Draining Blow",description:"Restores HP equal to 50% of the damage inflicted to the enemy.",compatibleWeapons:[fe.FISTS],attackBonus:[4],damageBonus:[Et.d2],dieCost:Ks},[vt.NIMBLE_COMBO]:{label:"Nimble Combo",description:"Attack twice before retaliation attack. Add +4 to AC against retaliatory attack",compatibleWeapons:[fe.FISTS],damageBonus:[1],dieCost:Ks},[vt.BOMBARD]:{label:"Bombard",description:"Attack twice before retaliation attack. Add +4 to AC against retaliatory attack",compatibleWeapons:[fe.FISTS],damageBonus:[1],critBonus:[2],dieCost:Ks},[vt.ONE_TWO_PUNCH]:{label:"One-Two Punch",description:"Guaranteed follow up attack.",compatibleWeapons:[fe.FISTS],damageBonus:[2],attackBonus:[4]},[vt.MONSTER_CRUSHER]:{label:"Monster Crusher",description:"2x damage against monsters",compatibleWeapons:[fe.FISTS],attackBonus:[2],critBonus:[2],damageBonus:[Et.d2,2]}},j4=(n,e={})=>{const{disableDescription:t}=e,{damageBonus:i,attackBonus:s,critBonus:r,rangeBonus:o,range:l,dieCost:a,compatibleWeapons:c,description:u}=n,{roll:f,target:h,mod:d=0}=a||{};let m="1";f==Et.d20?m=`1 (${(h||0)/20*100}% of the time cost ${Math.abs(d)} ${d>0?"more":"less"})`:h===1&&(m=1+d+"");let p=xn(s||[]);return p[0]!=="-"&&(p="+"+p),[s?`Attack: ${p}`:"",i?`Damage: ${xn(i)}`:"",r?`Crit Bonus: ${xn(r)}`:"",o?`Extra Range: ${o}`:"",l?`Range: ${l[0]}${l[1]?"-"+l[1]:""}`:"",c?`Cost: ${m}`:""].filter(v=>v).join(", ")+(u&&!t?`. ${u}`:"")},Fe={TRAINING_SWORD:"TRAINING_SWORD",IRON_SWORD:"IRON_SWORD",STEEL_SWORD:"STEEL_SWORD",LEVIN_SWORD:"LEVIN_SWORD",SWORD_OF_THE_CREATOR:"SWORD_OF_THE_CREATOR",TRAINING_LANCE:"TRAINING_LANCE",IRON_LANCE:"IRON_LANCE",STEEL_LANCE:"STEEL_LANCE",PIKE:"PIKE",LANCE_OF_RUIN:"LANCE_OF_RUIN",TRAINING_AXE:"TRAINING_AXE",IRON_AXE:"IRON_AXE",STEEL_AXE:"STEEL_AXE",HAND_AXE:"HAND_AXE",HAMMER:"HAMMER",TRAINING_BOW:"TRAINING_BOW",IRON_BOW:"IRON_BOW",STEEL_BOW:"STEEL_BOW",SHORT_BOW:"SHORT_BOW",TRAINING_GAUNTLETS:"TRAINING_GAUNTLETS",IRON_GAUNTLETS:"IRON_GAUNTLETS",STEEL_GAUNTLETS:"STEEL_GAUNTLETS",CLOTH_GAUNTLETS:"CLOTH_GAUNTLETS",MIASMA:"MIASMA",FIRE:"FIRE",THUNDER:"THUNDER",WIND:"WIND",BLIZZARD:"BLIZZARD",BOLGANONE:"BOLGANONE",THORON:"THORON",CUTTING_GALE:"CUTTING_GALE",SAGITTAE:"SAGITTAE",HAILSTORM:"HAILSTORM",HEAL:"HEAL",NOSFERATU:"NOSFERATU",SERAPHIM:"SERAPHIM",RECOVER:"RECOVER",PHYSIC:"PHYSIC",RESTORE:"RESTORE",WARD:"WARD"},Xg=new Set([Fe.TRAINING_SWORD,Fe.TRAINING_LANCE,Fe.TRAINING_AXE,Fe.TRAINING_BOW,Fe.TRAINING_GAUNTLETS]),ML=[Fe.TRAINING_SWORD,Fe.IRON_SWORD,Fe.STEEL_SWORD,Fe.LEVIN_SWORD,Fe.SWORD_OF_THE_CREATOR],BL=[Fe.TRAINING_LANCE,Fe.IRON_LANCE,Fe.STEEL_LANCE,Fe.PIKE,Fe.LANCE_OF_RUIN],LL=[Fe.TRAINING_AXE,Fe.IRON_AXE,Fe.STEEL_AXE,Fe.HAMMER,Fe.HAND_AXE],H4=[Fe.TRAINING_BOW,Fe.IRON_BOW,Fe.STEEL_BOW,Fe.SHORT_BOW],UL=[Fe.TRAINING_GAUNTLETS,Fe.IRON_GAUNTLETS,Fe.STEEL_GAUNTLETS,Fe.CLOTH_GAUNTLETS],WL={[Fe.TRAINING_SWORD]:fe.SWORD,[Fe.IRON_SWORD]:fe.SWORD,[Fe.STEEL_SWORD]:fe.SWORD,[Fe.TRAINING_LANCE]:fe.LANCE,[Fe.IRON_LANCE]:fe.LANCE,[Fe.STEEL_LANCE]:fe.LANCE,[Fe.PIKE]:fe.LANCE,[Fe.TRAINING_AXE]:fe.AXE,[Fe.IRON_AXE]:fe.AXE,[Fe.STEEL_AXE]:fe.AXE,[Fe.HAMMER]:fe.AXE,[Fe.HAND_AXE]:fe.AXE,[Fe.TRAINING_BOW]:fe.BOW,[Fe.IRON_BOW]:fe.BOW,[Fe.STEEL_BOW]:fe.BOW,[Fe.SHORT_BOW]:fe.BOW,[Fe.TRAINING_GAUNTLETS]:fe.FISTS,[Fe.IRON_GAUNTLETS]:fe.FISTS,[Fe.STEEL_GAUNTLETS]:fe.FISTS,[Fe.CLOTH_GAUNTLETS]:fe.FISTS,[Fe.FIRE]:fe.REASON,[Fe.THUNDER]:fe.REASON,[Fe.WIND]:fe.REASON,[Fe.BLIZZARD]:fe.REASON,[Fe.BOLGANONE]:fe.REASON,[Fe.THORON]:fe.REASON,[Fe.CUTTING_GALE]:fe.REASON,[Fe.SAGITTAE]:fe.REASON,[Fe.HAILSTORM]:fe.REASON,[Fe.HEAL]:fe.FAITH,[Fe.NOSFERATU]:fe.FAITH,[Fe.SERAPHIM]:fe.FAITH,[Fe.RECOVER]:fe.FAITH,[Fe.PHYSIC]:fe.FAITH,[Fe.RESTORE]:fe.FAITH,[Fe.WARD]:fe.FAITH},tr={[Fe.TRAINING_SWORD]:{label:"Training Sword",description:"",type:fe.SWORD,acBonus:1,damage:[1],attackBonus:3,range:[1]},[Fe.IRON_SWORD]:{label:"Iron Sword",description:"",type:fe.SWORD,damage:[Et.d2,1],attackBonus:1,range:[1]},[Fe.STEEL_SWORD]:{label:"Steel Sword",description:"",type:fe.SWORD,acBonus:-1,followUpBonus:-2,damage:[Et.d3,1],attackBonus:-1,range:[1]},[Fe.LEVIN_SWORD]:{label:"Levin Sword",description:"Uses Int instead of Str for damage",type:fe.SWORD,acBonus:-1,followUpBonus:-1,damage:[Et.d3,1],damageType:[Ye.INT],attackBonus:-4,range:[1,2]},[Fe.SWORD_OF_THE_CREATOR]:{label:"Sword of the Creator",description:"",type:fe.SWORD,acBonus:-1,followUpBonus:-1,damage:[Et.d2,1],attackBonus:1,range:[1,2]},[Fe.TRAINING_LANCE]:{label:"Training Lance",description:"",type:fe.LANCE,acBonus:1,damage:[Et.d2],attackBonus:1,range:[1]},[Fe.IRON_LANCE]:{label:"Iron Lance",description:"",type:fe.LANCE,damage:[Et.d2,1],attackBonus:-1,range:[1]},[Fe.STEEL_LANCE]:{label:"Steel Lance",description:"",type:fe.LANCE,acBonus:-1,followUpBonus:-2,damage:[Et.d3,2],attackBonus:-2,range:[1]},[Fe.PIKE]:{label:"Pike",description:"+1 range",type:fe.LANCE,acBonus:-2,followUpBonus:-3,damage:[Et.d3,1],attackBonus:-2,range:[1,2]},[Fe.LANCE_OF_RUIN]:{label:"Lance of Ruin",description:"",type:fe.LANCE,acBonus:-1,followUpBonus:-2,damage:[Et.d2,4],attackBonus:-4,range:[1]},[Fe.TRAINING_AXE]:{label:"Training Axe",description:"",type:fe.AXE,acBonus:1,damage:[Et.d2,1],attackBonus:-1,range:[1]},[Fe.IRON_AXE]:{label:"Iron Axe",description:"",type:fe.AXE,damage:[Et.d3,1],attackBonus:-3,range:[1]},[Fe.STEEL_AXE]:{label:"Steel Axe",description:"",type:fe.AXE,acBonus:-2,damage:[Et.d4,1],followUpBonus:-3,attackBonus:-4,range:[1]},[Fe.HAMMER]:{label:"Warhammer",description:"",type:fe.AXE,damage:[Et.d4,1],acBonus:-3,followUpBonus:-4,attackBonus:-5,range:[1]},[Fe.HAND_AXE]:{label:"Hand Axe",description:"",type:fe.AXE,followUpBonus:-1,damage:[Et.d2],attackBonus:-3,range:[1]},[Fe.TRAINING_BOW]:{label:"Training Bow",description:"",type:fe.BOW,acBonus:1,damage:[1],attackBonus:1,range:[2]},[Fe.IRON_BOW]:{label:"Iron Bow",description:"",type:fe.BOW,damage:[Et.d2,1],range:[2]},[Fe.STEEL_BOW]:{label:"Steel Bow",description:"",type:fe.BOW,acBonus:-1,followUpBonus:-2,attackBonus:-1,damage:[Et.d3,1],range:[2]},[Fe.SHORT_BOW]:{label:"Short Bow",description:"",acBonus:1,followUpBonus:1,type:fe.BOW,damage:[Et.d2],attackBonus:1,range:[1,2]},[Fe.TRAINING_GAUNTLETS]:{label:"Training Fists",description:"",type:fe.FISTS,acBonus:1,attackBonus:1,damage:[Et.d2,-1],range:[1]},[Fe.IRON_GAUNTLETS]:{label:"Iron Fists",description:"",type:fe.FISTS,damage:[1],attackBonus:0,range:[1]},[Fe.STEEL_GAUNTLETS]:{label:"Steel Fists",description:"",type:fe.FISTS,attackBonus:-1,damage:[Et.d2,1],range:[1]},[Fe.CLOTH_GAUNTLETS]:{label:"Hand Wraps",description:"Doesn't consume superiority dies when using combat arts",type:fe.FISTS,acBonus:1,followUpBonus:1,attackBonus:1,damage:[0],range:[1],dieCost:{roll:1,target:0,mult:0}},[Fe.MIASMA]:{label:"Miasma",description:"",type:fe.REASON,damage:[Et.d2,1],damageType:[Ye.INT],attackBonus:-1,followUpBonus:-1,range:[1,2],uses:10},[Fe.FIRE]:{label:"Fire",description:"",type:fe.REASON,damage:[Et.d2],damageType:[Ye.INT],attackBonus:1,range:[1,2],uses:10},[Fe.THUNDER]:{label:"Thunder",description:"",type:fe.REASON,damage:[Et.d2,1],damageType:[Ye.INT],critBonus:1,attackBonus:-1,range:[1,2],uses:8},[Fe.WIND]:{label:"Wind",description:"",type:fe.REASON,followUpBonus:1,acBonus:1,attackBonus:3,damage:[1],damageType:[Ye.INT],critBonus:2,range:[1,2],uses:12},[Fe.BLIZZARD]:{label:"Blizzard",description:"",type:fe.REASON,damage:[Et.d2,1],damageType:[Ye.INT],attackBonus:-3,critBonus:3,range:[1,2],uses:10},[Fe.BOLGANONE]:{label:"Bolganone",description:"",type:fe.REASON,damage:[Et.d3,1],damageType:[Ye.INT],range:[1,2],uses:5},[Fe.THORON]:{label:"Thoron",description:"",type:fe.REASON,damage:[Et.d3,1],damageType:[Ye.INT],attackBonus:-2,critBonus:2,range:[1,3],uses:4},[Fe.CUTTING_GALE]:{label:"Cutting Gale",description:"",type:fe.REASON,damage:[Et.d2,1],damageType:[Ye.INT],attackBonus:2,critBonus:2,range:[1,2],uses:6},[Fe.SAGITTAE]:{label:"Sagittae",description:"",type:fe.REASON,damage:[Et.d2,1],damageType:[Ye.INT],attackBonus:1,critBonus:1,range:[1,2],uses:10},[Fe.HAILSTORM]:{label:"Hailstorm",description:"",type:fe.REASON,damage:[Et.d5],damageType:[Ye.INT],attackBonus:-3,critBonus:3,range:[1,2],uses:6},[Fe.HEAL]:{label:"Heal",description:"",isHealing:!0,type:fe.FAITH,damage:[2],damageType:[Ye.INT],range:[1],uses:8},[Fe.NOSFERATU]:{label:"Nosferatu",description:"Heals user for damage dealt / 2 (rounded down)",type:fe.FAITH,damage:[1],damageType:[Ye.INT],attackBonus:-1,range:[1,2],uses:8},[Fe.SERAPHIM]:{label:"Seraphim",description:"",type:fe.FAITH,damage:[Et.d2,1],damageType:[Ye.INT],attackBonus:-2,critBonus:1,range:[1,2],uses:8},[Fe.RECOVER]:{label:"Recover",description:"",type:fe.FAITH,isHealing:!0,damage:[8],damageType:[Ye.INT],range:[1],uses:5},[Fe.PHYSIC]:{label:"Physic",description:"",type:fe.FAITH,isHealing:!0,damage:[2],damageType:[Ye.INT],range:["1","2 + 2 * INT"],uses:5},[Fe.RESTORE]:{label:"Restore",description:"Removes all status effects from targeted player",type:fe.FAITH,damage:[0],damageType:[Ye.INT],range:["1","2 + INT"],uses:10},[Fe.WARD]:{label:"Ward",description:"Give targeted player +3 resistance. Reduces by 1 each round (cannot be stacked)",type:fe.FAITH,damageType:[Ye.INT],damage:[0],range:[1],uses:5}},_h=new Set(Object.keys(tr).filter(n=>tr[n].isHealing)),[q4,VL]=Object.keys(tr).reduce((n,e)=>(Tm.includes(tr[e].type)?n[0].push(e):n[1].push(e),n),[[],[]]),Au=n=>{const{damage:e,attackBonus:t,range:i,critBonus:s,description:r,followUpBonus:o,isHealing:l}=n;return[t?`Attack: ${As(t)}`:"",`${l?"HP Restored":"Damage"}: ${e.reduce((a,c,u)=>a+(u===0?c:As(c)),"")}`,`Range: ${Array.isArray(i)?i==null?void 0:i.join("-"):i}`,s?`Crit Bonus: ${s}`:"",o?`AS Bonus: ${As(o)}`:"",r].filter(a=>a).join(", ")},Ue={MYRMIDON_MASTER:"MYRMIDON_MASTER",SOLDIER_MASTER:"SOLDIER_MASTER",FIGHTER_MASTER:"FIGHTER_MASTER",RANGER_MASTER:"RANGER_MASTER",MONK_MASTER:"MONK_MASTER",MERCENARY_THIEF_SKILL:"MERCENARY_THIEF_SKILL",VANTAGE:"VANTAGE",ANIMAL_WHISPERER:"ANIMAL_WHISPERER",BULLSEYE:"BULLSEYE",DEATH_BLOW:"DEATH_BLOW",ARMORED_COMBAT:"ARMORED_COMBAT",GRAPPLER:"GRAPPLER",FIENDISH_BLOW:"FIENDISH_BLOW",HEAL_PLUS:"HEAL_PLUS",SWORD_PROWESS_1:"SWORD_PROWESS_1",SWORD_PROWESS_2:"SWORD_PROWESS_2",SWORD_PROWESS_3:"SWORD_PROWESS_3",SWORD_PROWESS_4:"SWORD_PROWESS_4",SWORD_PROWESS_5:"SWORD_PROWESS_5",AXE_PROWESS_1:"AXE_PROWESS_1",AXE_PROWESS_2:"AXE_PROWESS_2",AXE_PROWESS_3:"AXE_PROWESS_3",AXE_PROWESS_4:"AXE_PROWESS_4",AXE_PROWESS_5:"AXE_PROWESS_5",LANCE_PROWESS_1:"LANCE_PROWESS_1",LANCE_PROWESS_2:"LANCE_PROWESS_2",LANCE_PROWESS_3:"LANCE_PROWESS_3",LANCE_PROWESS_4:"LANCE_PROWESS_4",LANCE_PROWESS_5:"LANCE_PROWESS_5",BOW_PROWESS_1:"BOW_PROWESS_1",CLOSE_COUNTER:"CLOSE_COUNTER",BOW_PROWESS_2:"BOW_PROWESS_2",BOW_PROWESS_3:"BOW_PROWESS_3",BOW_PROWESS_4:"BOW_PROWESS_4",BOW_PROWESS_5:"BOW_PROWESS_5",FISTS_PROWESS_1:"FISTS_PROWESS_1",FISTS_PROWESS_2:"FISTS_PROWESS_2",FISTS_PROWESS_3:"FISTS_PROWESS_3",FISTS_PROWESS_4:"FISTS_PROWESS_4",FISTS_PROWESS_5:"FISTS_PROWESS_5",REASON_PROWESS_1:"REASON_PROWESS_1",REASON_PROWESS_2:"REASON_PROWESS_2",REASON_PROWESS_3:"REASON_PROWESS_3",REASON_PROWESS_4:"REASON_PROWESS_4",REASON_PROWESS_5:"REASON_PROWESS_5",FAITH_PROWESS_1:"FAITH_PROWESS_1",FAITH_PROWESS_2:"FAITH_PROWESS_2",FAITH_PROWESS_3:"FAITH_PROWESS_3",FAITH_PROWESS_4:"FAITH_PROWESS_4",FAITH_PROWESS_5:"FAITH_PROWESS_5",LEADERSHIP_PROWESS_1:"LEADERSHIP_PROWESS_1",LEADERSHIP_PROWESS_2:"LEADERSHIP_PROWESS_2",LEADERSHIP_PROWESS_3:"LEADERSHIP_PROWESS_3",LEADERSHIP_PROWESS_4:"LEADERSHIP_PROWESS_4",LEADERSHIP_PROWESS_5:"LEADERSHIP_PROWESS_5",WEIGHT_MINUS_3:"WEIGHT_MINUS_3",AGILE_RIDER:"AGILE_RIDER",OFFICERS_DUTY:"OFFICERS_DUTY",SONGSTRESS:"SONGSTRESS",CONFIDENCE:"CONFIDENCE",PERSECUTION_COMPLEX:"PERSECUTION_COMPLEX",BORN_FIGHTER:"BORN_FIGHTER",CATNAP:"CATNAP",HUNTERS_BOON:"HUNTERS_BOON",LIVE_TO_SERVE:"LIVE_TO_SERVE",STAUNCH_SHIELD:"STAUNCH_SHIELD",LONE_WOLF:"LONE_WOLF",PERSEVERANCE:"PERSEVERANCE",PHILANDER:"PHILANDER",LADY_KNIGHT:"LADY_KNIGHT",DISTINGUISHED_HOUSE:"DISTINGUISHED_HOUSE",ADVOCATE:"ADVOCATE",GOODY_BASKET:"GOODY_BASKET",WATCHFUL_EYE:"WATCHFUL_EYE",ANIMAL_FRIEND:"ANIMAL_FRIEND",RIVALRY:"RIVALRY",INFIRMARY_MASTER:"INFIRMARY_MASTER",CREST_SCHOLAR:"CREST_SCHOLAR",FIGHTING_SPIRIT:"FIGHTING_SPIRIT",COMPASSION:"COMPASSION",GUARDIAN:"GUARDIAN",LILYS_POISE:"LILYS_POISE",VETERAN_KNIGHT:"VETERAN_KNIGHT",SURVIVAL_INSTINCT:"SURVIVAL_INSTINCT"},_s={MYRMIDON_MASTER:{label:"Myrmidon Master",description:"+1 AC",acBonus:1},SOLDIER_MASTER:{label:"Soldier Master",description:"+1 protection",protectionBonus:1},FIGHTER_MASTER:{label:"Fighter Master",description:"+1 crit range if the weapon does not have an innate crit chance"},RANGER_MASTER:{label:"Ranger Master",description:"+1 to attack when shooting from cover",queries:[{prompt:"ranged attack from cover?",compatibleWeapons:F4,options:[{label:"No"},{label:"Yes",attackBonus:[1],description:"+1 attack"}]}]},MONK_MASTER:{label:"Monk Master",description:"+1 resilience",resilienceBonus:1},MERCENARY_THIEF_SKILL:{label:"Swift",description:"+1 AC",acBonus:1},VANTAGE:{label:"Vantage",description:"If foe initiates combat, and if HP is ≤ 50%, unit still attacks first"},ANIMAL_WHISPERER:{label:"Animal Whisperer",description:"You and adjacent allies may roll saves from being dismounted with advantage"},BULLSEYE:{label:"Bullseye",description:"+4 to hit",attackBonus:{ANY:[4]}},DEATH_BLOW:{label:"Death Blow",description:"+2 damage when initiating an attack on already damaged targets",queries:[{prompt:"is target damaged?",compatibleWeapons:[fe.SWORD,fe.AXE,fe.LANCE,fe.FISTS,fe.BOW],options:[{label:"No"},{label:"Yes",damageBonus:[2],description:"+2 damage"}]}]},ARMORED_COMBAT:{label:"Armored Combat",description:"+1 protection when initiating combat",queries:[{prompt:"are you initiating combat?",compatibleWeapons:[fe.SWORD,fe.AXE,fe.LANCE,fe.FISTS,fe.BOW],options:[{label:"No"},{label:"Yes",protectionBonus:1,description:"+1 protection"}]}]},GRAPPLER:{label:"Grappler",description:"Gain the Reposition, Pull back, and Shove combat arts. These do not take up combat art slots"},FIENDISH_BLOW:{label:"Fiendish Blow",description:"+2 damage when attacking an undamaged unit",queries:[{prompt:"is target at full hp?",compatibleWeapons:[fe.REASON,fe.FAITH],options:[{label:"No"},{label:"Yes",damageBonus:[2],description:"+2 damage"}]}]},HEAL_PLUS:{label:"Heal Plus",description:"Doubles number of usages of Heal and increases the HP healed by 1d2. Does not stack with Priest class",bonusCharges:{[Fe.HEAL]:8},attackBonus:{[Fe.HEAL]:[Et.d2]}},[Ue.SWORD_PROWESS_1]:{label:"Sword Prowess 1",description:"+1 attack, +1 AC when wielding a sword",attackBonus:{[fe.SWORD]:[1]},acBonus:1,acBonusCompatibility:[fe.SWORD]},[Ue.SWORD_PROWESS_2]:{label:"Sword Prowess 2",description:"+1 attack, +2 AC when wielding a sword",attackBonus:{[fe.SWORD]:[1]},acBonus:2,acBonusCompatibility:[fe.SWORD]},[Ue.SWORD_PROWESS_3]:{label:"Sword Prowess 3",description:"+2 attack, +2 AC when wielding a sword",attackBonus:{[fe.SWORD]:[2]},acBonus:2,acBonusCompatibility:[fe.SWORD]},[Ue.SWORD_PROWESS_4]:{label:"Sword Prowess 4",description:"+2 attack, +3 AC when wielding a sword",attackBonus:{[fe.SWORD]:[2]},acBonus:3,acBonusCompatibility:[fe.SWORD]},[Ue.SWORD_PROWESS_5]:{label:"Sword Prowess 5",description:"+2 attack, +4 AC when wielding a sword",attackBonus:{[fe.SWORD]:[2]},acBonus:4,acBonusCompatibility:[fe.SWORD]},[Ue.AXE_PROWESS_1]:{label:"Axe Prowess 1",description:"+1 attack, +1 AC when wielding an axe",attackBonus:{[fe.AXE]:[1]},acBonus:1,acBonusCompatibility:[fe.AXE]},[Ue.AXE_PROWESS_2]:{label:"Axe Prowess 2",description:"+1 attack, +2 AC when wielding an axe",attackBonus:{[fe.AXE]:[1]},acBonus:2,acBonusCompatibility:[fe.AXE]},[Ue.AXE_PROWESS_3]:{label:"Axe Prowess 3",description:"+2 attack, +2 AC when wielding an axe",attackBonus:{[fe.AXE]:[2]},acBonus:2,acBonusCompatibility:[fe.AXE]},[Ue.AXE_PROWESS_4]:{label:"Axe Prowess 4",description:"+2 attack, +3 AC when wielding an axe",attackBonus:{[fe.AXE]:[2]},acBonus:3,acBonusCompatibility:[fe.AXE]},[Ue.AXE_PROWESS_5]:{label:"Axe Prowess 5",description:"+2 attack, +4 AC when wielding an axe",attackBonus:{[fe.AXE]:[2]},acBonus:4,acBonusCompatibility:[fe.AXE]},[Ue.LANCE_PROWESS_1]:{label:"Lance Prowess 1",description:"+1 attack, +1 AC when wielding a lance",attackBonus:{[fe.LANCE]:[1]},acBonus:1,acBonusCompatibility:[fe.LANCE]},[Ue.LANCE_PROWESS_2]:{label:"Lance Prowess 2",description:"+1 attack, +2 AC when wielding a lance",attackBonus:{[fe.LANCE]:[1]},acBonus:2,acBonusCompatibility:[fe.LANCE]},[Ue.LANCE_PROWESS_3]:{label:"Lance Prowess 3",description:"+2 attack, +2 AC when wielding a lance",attackBonus:{[fe.LANCE]:[2]},acBonus:2,acBonusCompatibility:[fe.LANCE]},[Ue.LANCE_PROWESS_4]:{label:"Lance Prowess 4",description:"+2 attack, +3 AC when wielding a lance",attackBonus:{[fe.LANCE]:[2]},acBonus:3,acBonusCompatibility:[fe.LANCE]},[Ue.LANCE_PROWESS_5]:{label:"Lance Prowess 5",description:"+2 attack, +4 AC when wielding a lance",attackBonus:{[fe.LANCE]:[2]},acBonus:4,acBonusCompatibility:[fe.LANCE]},[Ue.BOW_PROWESS_1]:{label:"Bow Prowess 1",description:"+1 attack, +1 AC when wielding a bow",attackBonus:{[fe.BOW]:[1]},acBonus:1,acBonusCompatibility:[fe.BOW]},[Ue.CLOSE_COUNTER]:{label:"Close Counter",description:"Enables unit to retaliate against adjacent attackers"},[Ue.BOW_PROWESS_2]:{label:"Bow Prowess 2",description:"+1 attack, +2 AC when wielding a bow",attackBonus:{[fe.BOW]:[1]},acBonus:2,acBonusCompatibility:[fe.BOW]},[Ue.BOW_PROWESS_3]:{label:"Bow Prowess 3",description:"+2 attack, +2 AC when wielding a bow",attackBonus:{[fe.BOW]:[2]},acBonus:2,acBonusCompatibility:[fe.BOW]},[Ue.BOW_PROWESS_4]:{label:"Bow Prowess 4",description:"+2 attack, +3 AC when wielding a bow",attackBonus:{[fe.BOW]:[2]},acBonus:3,acBonusCompatibility:[fe.BOW]},[Ue.BOW_PROWESS_5]:{label:"Bow Prowess 5",description:"+2 attack, +4 AC when wielding a bow",attackBonus:{[fe.BOW]:[2]},acBonus:4,acBonusCompatibility:[fe.BOW]},[Ue.FISTS_PROWESS_1]:{label:"Fists Prowess 1",description:"+1 attack, +1 AC when wielding fist weapons",attackBonus:{[fe.FISTS]:[1]},acBonus:1,acBonusCompatibility:[fe.FISTS]},[Ue.FISTS_PROWESS_2]:{label:"Fists Prowess 2",description:"+1 attack, +2 AC when wielding fist weapons",attackBonus:{[fe.FISTS]:[1]},acBonus:2,acBonusCompatibility:[fe.FISTS]},[Ue.FISTS_PROWESS_3]:{label:"Fists Prowess 3",description:"+2 attack, +2 AC when wielding fist weapons",attackBonus:{[fe.FISTS]:[2]},acBonus:2,acBonusCompatibility:[fe.FISTS]},[Ue.FISTS_PROWESS_4]:{label:"Fists Prowess 4",description:"+2 attack, +3 AC when wielding fist weapons",attackBonus:{[fe.FISTS]:[2]},acBonus:3,acBonusCompatibility:[fe.FISTS]},[Ue.FISTS_PROWESS_5]:{label:"Fists Prowess 5",description:"+2 attack, +4 AC when wielding fist weapons",attackBonus:{[fe.FISTS]:[2]},acBonus:4,acBonusCompatibility:[fe.FISTS]},[Ue.REASON_PROWESS_1]:{label:"Reason Prowess 1",description:"+1 attack, +1 AC when attacking with reason magic",attackBonus:{[fe.REASON]:[1]},acBonus:1,acBonusCompatibility:[fe.REASON]},[Ue.REASON_PROWESS_2]:{label:"Reason Prowess 2",description:"+1 attack, +2 AC when attacking with reason magic",attackBonus:{[fe.REASON]:[1]},acBonus:2,acBonusCompatibility:[fe.REASON]},[Ue.REASON_PROWESS_3]:{label:"Reason Prowess 3",description:"+2 attack, +2 AC when attacking with reason magic",attackBonus:{[fe.REASON]:[2]},acBonus:2,acBonusCompatibility:[fe.REASON]},[Ue.REASON_PROWESS_4]:{label:"Reason Prowess 4",description:"+2 attack, +3 AC when attacking with reason magic",attackBonus:{[fe.REASON]:[2]},acBonus:3,acBonusCompatibility:[fe.REASON]},[Ue.REASON_PROWESS_5]:{label:"Reason Prowess 5",description:"+2 attack, +4 AC when attacking with reason magic",attackBonus:{[fe.REASON]:[2]},acBonus:4,acBonusCompatibility:[fe.REASON]},[Ue.FAITH_PROWESS_1]:{label:"Faith Prowess 1",description:"+1 attack, +1 AC when attacking with faith magic",attackBonus:{[fe.FAITH]:[1]},acBonus:1,acBonusCompatibility:[fe.REASON]},[Ue.FAITH_PROWESS_2]:{label:"Faith Prowess 2",description:"+1 attack, +2 AC when attacking with faith magic",attackBonus:{[fe.FAITH]:[1]},acBonus:2,acBonusCompatibility:[fe.REASON]},[Ue.FAITH_PROWESS_3]:{label:"Faith Prowess 3",description:"+2 attack, +2 AC when attacking with faith magic",attackBonus:{[fe.FAITH]:[2]},acBonus:2,acBonusCompatibility:[fe.REASON]},[Ue.FAITH_PROWESS_4]:{label:"Faith Prowess 4",description:"+2 attack, +3 AC when attacking with faith magic",attackBonus:{[fe.FAITH]:[2]},acBonus:3,acBonusCompatibility:[fe.REASON]},[Ue.FAITH_PROWESS_5]:{label:"Faith Prowess 5",description:"+2 attack, +4 AC when attacking with faith magic",attackBonus:{[fe.FAITH]:[2]},acBonus:4,acBonusCompatibility:[fe.REASON]},[Ue.LEADERSHIP_PROWESS_1]:{label:"Leadership Prowess 1",description:"+1 damage on gambits",damageBonus:{[fe.LEADERSHIP]:[1]}},[Ue.LEADERSHIP_PROWESS_2]:{label:"Leadership Prowess 2",description:"+1 attack, +1 damage on gambits",attackBonus:{[fe.LEADERSHIP]:[1]},damageBonus:{[fe.LEADERSHIP]:[1]}},[Ue.LEADERSHIP_PROWESS_3]:{label:"Leadership Prowess 3",description:"+2 attack, +1 damage on gambits",attackBonus:{[fe.LEADERSHIP]:[2]},damageBonus:{[fe.LEADERSHIP]:[1]}},[Ue.LEADERSHIP_PROWESS_4]:{label:"Leadership Prowess 4",description:"+2 attack, +2 damage on gambits",attackBonus:{[fe.LEADERSHIP]:[2]},damageBonus:{[fe.LEADERSHIP]:[2]}},[Ue.LEADERSHIP_PROWESS_5]:{label:"Leadership Prowess 5",description:"+3 attack, +2 damage on gambits",attackBonus:{[fe.LEADERSHIP]:[3]},damageBonus:{[fe.LEADERSHIP]:[2]}},[Ue.WEIGHT_MINUS_3]:{label:"Heavy Lifter",description:"+2 attack speed",followUpBonus:2},[Ue.AGILE_RIDER]:{label:"Agile Rider",description:"+1 to attack, +1 AC while mounted",acBonus:1,attackBonus:{ANY:[1]}},[Ue.OFFICERS_DUTY]:{label:"Officer's Duty",description:"+1d2 damage on Gambits"},[Ue.SONGSTRESS]:{label:"Songstress",description:"Adjacent allies recover up to 10% of max HP at the start of each turn."},[Ue.CONFIDENCE]:{label:"Confidence",description:"Grants +3 to Hit and +3 AC when unit is at full HP."},[Ue.PERSECUTION_COMPLEX]:{label:"Persecution Complex",description:"Grants +1d2 damage when unit is not at full HP."},[Ue.BORN_FIGHTER]:{label:"Born Fighter",description:"Adjacent foes suffer -2 AC during combat."},[Ue.CATNAP]:{label:"Catnap",description:"If unit takes no action except Wait, recovers up to 10% of max HP."},[Ue.HUNTERS_BOON]:{label:"Hunter's Boon",description:"Grants Crit +4 when foe's HP is ≤ 50%."},[Ue.LIVE_TO_SERVE]:{label:"Live to Serve",description:"When healing an ally with white magic, unit recovers the same amount of HP."},[Ue.STAUNCH_SHIELD]:{label:"Staunch Shield",description:"If unit takes no action except Wait, grants Protection +1 until your next turn."},[Ue.LONE_WOLF]:{label:"Lone Wolf",description:"Unit deals 1d2 extra damage when no battalion is assigned or when battalion endurance is 0."},[Ue.PERSEVERANCE]:{label:"Perseverance",description:"Use Rally to grant +1 damage to an ally until your next turn."},[Ue.PHILANDER]:{label:"Philander",description:"If a female ally is adjacent, unit deals 1 extra damage"},[Ue.LADY_KNIGHT]:{label:"Lady Knight",description:"Grants +1 damage and Hit +5 with gambits."},[Ue.DISTINGUISHED_HOUSE]:{label:"Distinguished House",description:"Unit deals 1 extra damage while in formation with a battalion."},[Ue.ADVOCATE]:{label:"Advocate",description:"Adjacent male allies deal 1 extra damage during combat."},[Ue.GOODY_BASKET]:{label:"Goody Basket",description:"Chance to recover up to 10% of max HP at the start of each turn. DC 18"},[Ue.WATCHFUL_EYE]:{label:"Watchful Eye",description:"Grants Hit +20."},[Ue.ANIMAL_FRIEND]:{label:"Animal Friend",description:"	Unit recovers up to 20% of max HP at the start of each turn when adjacent to a cavalry or flying ally."},[Ue.RIVALRY]:{label:"Rivalry",description:"If a male ally is adjacent, unit deals 1 extra damage"},[Ue.INFIRMARY_MASTER]:{label:"Infirmary Master",description:"Adjacent allies gain Crit Avo +10 during combat."},[Ue.CREST_SCHOLAR]:{label:"Crest Scholar",description:"Use Rally to grant 1d2 damage to an ally until your next turn (only applies to magic attacks)"},[Ue.FIGHTING_SPIRIT]:{label:"Fighting Spirit",description:"Unit gains +1 Protection when no battalion is assigned or when battalion endurance is 0."},[Ue.COMPASSION]:{label:"Compassion",description:"Use Rally to grant +1 Crit Range to an ally."},[Ue.GUARDIAN]:{label:"Guardian",description:"Adjacent female allies deal 1d2 extra damage during combat"},[Ue.LILYS_POISE]:{label:"Lily's Poise",description:"Adjacent allies gain +1 Protection during combat."},[Ue.VETERAN_KNIGHT]:{label:"Veteran Knight",description:"Unit gains +1 Protection while in formation with a battalion."},[Ue.SURVIVAL_INSTINCT]:{label:"Survival Instinct",description:"If unit initiates combat and defeats foe, grants +1 damage, +1 AC, +1 AS, +5 to hit"}};var Nn=(n=>(n.Weapon="Weapon",n.CombatSkill="Combat Skill",n.CombatArt="Combat Art",n.PlayerStat="Player Stat",n))(Nn||{}),ns=(n=>(n.LEFT_END="LEFT_END",n.CENTER="CENTER",n.RIGHT_START="RIGHT_START",n.BOTTOM_CENTER="BOTTOM_CENTER",n))(ns||{});const kn={MYRMIDON:"MYRMIDON",SOLDIER:"SOLDIER",FIGHTER:"FIGHTER",RANGER:"RANGER",MONK:"MONK",MERCENARY:"MERCENARY",THIEF:"THIEF",CAVALIER:"CAVALIER",ARCHER:"ARCHER",BRIGAND:"BRIGAND",ARMORED_KNIGHT:"ARMORED_KNIGHT",BRAWLER:"BRAWLER",MAGE:"MAGE",PRIEST:"PRIEST"},id=new Set([kn.MYRMIDON,kn.SOLDIER,kn.FIGHTER,kn.RANGER,kn.MONK]),Il=new Set([kn.MERCENARY,kn.THIEF,kn.CAVALIER,kn.ARCHER,kn.BRIGAND,kn.ARMORED_KNIGHT,kn.BRAWLER,kn.MAGE,kn.PRIEST]),Yt={[kn.MYRMIDON]:{label:"Myrmidon",unlocks:{playerStats:{[Ye.DEX]:12},combatArts:{[vt.SWAP]:1},weapons:{[Fe.IRON_SWORD]:1}},whenEquipped:{xpMods:{[fe.SWORD]:1.3}},whenMastered:{combatSkills:{[Ue.MYRMIDON_MASTER]:1}}},[kn.SOLDIER]:{label:"Soldier",unlocks:{pickOne:[{type:Nn.PlayerStat,options:[{stat:Ye.DEX,value:12},{stat:Ye.STR,value:12}]}],combatArts:{[vt.REPOSITION]:1},weapons:{[Fe.IRON_LANCE]:1}},whenEquipped:{xpMods:{[fe.LANCE]:1.3}},whenMastered:{combatSkills:{[Ue.SOLDIER_MASTER]:1}}},[kn.FIGHTER]:{label:"Fighter",unlocks:{pickOne:[{type:Nn.PlayerStat,options:[{stat:Ye.DEX,value:12},{stat:Ye.STR,value:12}]}],combatArts:{[vt.SHOVE]:1},weapons:{[Fe.IRON_AXE]:1,[Fe.IRON_GAUNTLETS]:1}},whenEquipped:{xpMods:{[fe.FISTS]:1.3,[fe.AXE]:1.3}},whenMastered:{combatSkills:{[Ue.FIGHTER_MASTER]:1}}},[kn.RANGER]:{label:"Ranger",unlocks:{playerStats:{[Ye.DEX]:12},combatArts:{[vt.PULL_BACK]:1},weapons:{[Fe.IRON_BOW]:1}},whenEquipped:{xpMods:{[fe.BOW]:1.3}},whenMastered:{combatSkills:{[Ue.RANGER_MASTER]:1}}},[kn.MONK]:{label:"Monk",canUseMagic:!0,unlocks:{playerStats:{[Ye.INT]:12},combatArts:{[vt.PULL_BACK]:1}},whenEquipped:{xpMods:{[fe.REASON]:1.3,[fe.FAITH]:1.3}},whenMastered:{combatSkills:{[Ue.MONK_MASTER]:1}}},[kn.MERCENARY]:{label:"Mercenary",unlocks:{playerStats:{[Ye.DEX]:14},combatSkills:{[Ue.MERCENARY_THIEF_SKILL]:1},weapons:{[Fe.STEEL_SWORD]:1,[Fe.IRON_AXE]:1}},whenEquipped:{xpMods:{[fe.SWORD]:1.6,[fe.AXE]:1.3},msBonus:1},whenMastered:{combatSkills:{[Ue.VANTAGE]:1}}},[kn.THIEF]:{label:"Thief",unlocks:{playerStats:{[Ye.DEX]:14},combatSkills:{[Ue.MERCENARY_THIEF_SKILL]:1},weapons:{[Fe.STEEL_SWORD]:1,[Fe.IRON_BOW]:1}},whenEquipped:{xpMods:{[fe.SWORD]:1.6,[fe.BOW]:1.3},playerSkills:{[rn.LOCKPICKING]:jn.PROFICIENT},msBonus:1},whenMastered:{playerSkills:{[rn.LOCKPICKING]:jn.PROFICIENT,[rn.SLEIGHT_OF_HAND]:jn.PROFICIENT}}},[kn.CAVALIER]:{label:"Cavalier",unlocks:{playerStats:{[Ye.DEX]:12,[Ye.WIS]:12},playerSkills:{[rn.ANIMAL_HANDLING]:jn.PROFICIENT},weapons:{[Fe.STEEL_LANCE]:1,[Fe.PIKE]:1},pickOne:[{type:Nn.Weapon,options:[Fe.IRON_SWORD,Fe.IRON_AXE,Fe.IRON_BOW]}]},whenEquipped:{xpMods:{[fe.LANCE]:1.6},xpMooch:{[fe.RIDING]:1},playerSkills:{[rn.LOCKPICKING]:jn.PROFICIENT},msBonus:3},whenMastered:{playerSkills:{[rn.LOCKPICKING]:jn.PROFICIENT},combatSkills:{[Ue.ANIMAL_WHISPERER]:1}}},[kn.ARCHER]:{label:"Archer",unlocks:{playerStats:{[Ye.DEX]:14},weapons:{[Fe.STEEL_BOW]:1,[Fe.SHORT_BOW]:1,[Fe.IRON_LANCE]:1}},whenEquipped:{bonusRange:{[fe.BOW]:1},msBonus:1,xpMods:{[fe.BOW]:1.6,[fe.SWORD]:1.3}},whenMastered:{combatSkills:{[Ue.BULLSEYE]:1}}},[kn.BRIGAND]:{label:"Brigand",unlocks:{hpBonus:1,playerStats:{[Ye.STR]:14},combatSkills:{[Ue.MERCENARY_THIEF_SKILL]:1},weapons:{[Fe.STEEL_AXE]:1,[Fe.HAND_AXE]:1,[Fe.STEEL_GAUNTLETS]:1}},whenEquipped:{msBonus:1,xpMods:{[fe.AXE]:1.6,[fe.FISTS]:1.3}},whenMastered:{combatSkills:{[Ue.DEATH_BLOW]:1}}},[kn.ARMORED_KNIGHT]:{label:"Armored Knight",unlocks:{hpBonus:1,playerStats:{[Ye.STR]:12,[Ye.CON]:14},weapons:{[Fe.STEEL_AXE]:1,[Fe.STEEL_LANCE]:1,[Fe.HAMMER]:1,[Fe.IRON_LANCE]:1,[Fe.IRON_AXE]:1}},whenEquipped:{followUpBonus:-2,protectionBonus:2,xpMods:{[fe.AXE]:1.6,[fe.LANCE]:1.6},xpMooch:{[fe.HEAVY_ARMOR]:1}},whenMastered:{combatSkills:{[Ue.ARMORED_COMBAT]:1}}},[kn.BRAWLER]:{label:"Brawler",unlocks:{pickOne:[{type:Nn.PlayerStat,description:"Pick different stats per dropdown (e.g. if you pick 14 DEX in this dropdown, pick 12 STR in the other)",disableRandom:!0,options:[{stat:Ye.DEX,value:14},{stat:Ye.STR,value:14}]},{type:Nn.PlayerStat,options:[{stat:Ye.DEX,value:12},{stat:Ye.STR,value:12}]}],hpBonus:1,combatSkills:{[Ue.MERCENARY_THIEF_SKILL]:1},weapons:{[Fe.STEEL_GAUNTLETS]:1,[Fe.CLOTH_GAUNTLETS]:1}},whenEquipped:{msBonus:1,xpMods:{[fe.FISTS]:1.6,[fe.AXE]:1.3}},whenMastered:{combatSkills:{[Ue.GRAPPLER]:1}}},[kn.MAGE]:{label:"Mage",canUseMagic:!0,unlocks:{playerStats:{[Ye.INT]:14},pickOne:[{type:Nn.Weapon,options:["DOUBLE_BASE_USES",Fe.FIRE,Fe.WIND,Fe.THUNDER,Fe.BLIZZARD]}]},whenEquipped:{xpMods:{[fe.REASON]:1.6,[fe.FAITH]:1.3}},whenMastered:{combatSkills:{[Ue.FIENDISH_BLOW]:1}}},[kn.PRIEST]:{label:"Priest",canUseMagic:!0,unlocks:{playerStats:{[Ye.INT]:14},playerSkills:{[rn.RELIGION]:jn.PROFICIENT}},whenEquipped:{xpMods:{[fe.FAITH]:1.6,[fe.REASON]:1.3}},whenMastered:{combatSkills:{[Ue.HEAL_PLUS]:1}}}},Wl=Object.keys(Yt).reduce((n,e)=>(n[e]=Yt[e].label,n),{}),sy={2:new Set(Object.values(kn)),4:new Set(id),6:new Set(Il)},FL=n=>Object.keys(sy).reduce((e,t)=>n.some(i=>sy[t].has(i))?Math.max(parseInt(t),e):e,2),jL="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAWRSURBVHja7FtdiFVVFD5TglpRIIgyYcZ0LjqV2BRh2K8h6rlohMiED4KO+YPjHRsaCiKyghDyobyawpiDSg85Ug8q90bQy2Q+GOmMlQn3+JNlIEbRUCYWTWvXt2GxWGffmYtzzsycs+Bj333PPuvs/Z31t/edqRsYGPDSLDd5KZeMgIyAjICMgFTLOPthbUtznM+dRphH2I/+B4QthG/jmkBnV3eiFrCAsJj1HyesTpMLTCVMYf3JaYsBs0FCaoPgFNG/kpQVjEuIgHrRv0i4O00W4BMqrN9LeCCJ+SRBQIC2zL47SbgNJIx5Any0obAALy0EaBZwgWWHMU3AeBAQiu9/IfxEuHcsEHALoRWtlHloK8q104T5hOlD1DkiLWAboUeZ8CrF/zkBRjYoi++BzlFhAVcJ7YSHCH0s6Jm2WfF/K2fQviTu6YOudugeEQQEbJKabMcifbQltugwgoC9hOvMRUporY7tVTJLECcBRUyu4NDRhsX6grBixPg/QYLMFiF0aTIRc6g49A6bBYR46OeERmVM1MRdb/IFJT60RcSMFYSvMYcwbgswD3yacJwwF5Xc+4RJYpwx3TWsf63KM69FuBKXWYRTOEy5h/AZ4akIkoY1CP5AmEPYg/y+Grl8hRjXxRY2gbDcoXO5qBSlBb1JOAESjHQjdV5KMgs8T9jECp1nxPV/YCFW3op4bh2ueY5aYQHbwb5OeG4kpEHzlt7G5y8JrynPaGImPl0slBPDt8Q5ZcxS+L2RVwmbCXcmRUAripdtyNXLEA++U8ZNgC8b0+1HsdPAxjRgXD8WblNoQegyLvYIYQfhd1jBjwiE/nATYI6wOgiHka/fIZwl3I9Y8BHhbyVbFEU0t9awno2zn5uE75t7t4qK8iqIMW9+HcYXWO1QGAoZLgJMRH8Si+4F+1sRed/DxmWJpx9l+5h8SUll57DQBnFPE67JANgBq1qpVJydsJg8MkbAahRbGzgJqbM/j69taTY3v8F2ZLeKsX0oUz8dRI1QEikzV6OblUR+XyWKJU0KIM+PSN/Gejs6u7r/S6/8TNAEsCNoZxBmigAzG4XKzRGlLI/e4SDMMGB6AkWnL4gzOo869JmqsEUp0/thwfbQ5TLhG3uRE/Az8iyXuwj3QSmHreeLSgFi3zg3v6LI6SWxKSoAeZFdfFYQRZXDc7HwFqRSq9fCxKmBWoPgRShpw6JyrJTlgSeISI95FqQCYdZlUTFy1wlwTwgdbQ5XO4oizNQaG0GCjQmha/EyBtSyHygomxbNlK1bVJgF5RTXsTu/HD7nFX3yuXtQbR4byuRvxG+DZUywEXnZxxt5QnGJstiyvqjo2yK22mVl8c8KC8qhEj1W6yJuRCUoA97uKuPN5uWQ8n3XIDJM60g7EWpAjl7EyFhT5bDiZYe+TVUOXVYqmWNWUgTMR8q0k2yHO/QohyfcWr5y6Dwjsoo85LgEt8szy/sCZXisBGwE+7cTdnr//7D5rlIKF8Tb91E6R0m9eOuBsh+w8cek51dQJn+IOcVGgPHFT/DGW1FDeI59AJddDr0fRxy/aWn2OgLnTAThRXES0Ih9QOg4pCyyt8XT42MRVlCPTRXPMGVGgu8IwqZCXZxUFog6NPVRjORZGzIStMMOjxU/ZXavX+uhZxIEPEpYyDYlXDaj1X4CexDtIaWiLEKnPxoI6EVw3KFcO8jig+Y2Rg5EpMcZtR58xk3AH4Amf7GqUAuaZoHHHb4+KlxgMCW0J0jwxbXYJAkCTrFCyhMuUUkDAaeVQJhLkwVcwfmiFgDDNBBgraBRWECYxESSIuBXwsOsP5m5RioIMAeTd4jvvk8TAUZ+E/0LabOAy+LtJ2IBSf2tsPk98Tzr7/P0Y7Jhl7rsHydTLhkBGQEZARkBqZZ/BRgA5NNf3keNKAUAAAAASUVORK5CYII=",HL="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAZkSURBVHja7FtraFxFFN6tiRQtFCLi+0WzKK2SaEF/+IDUYLsrVmmsRatgfL+ytdJisb5Q7D9fuY3aSLVgoDWxpVLZFTGtgu0Pob6wVNz4o4KtgkTFttTGsn6nPUOPx7n37tzdu9ewO3CYu3fmzpzzzZnzmEnS5XI51chlSqrBSxOAJgBNAJoANHRp0S/S6XTdJr+3d+HJqFrffHvk93rNqd1+S8IL8AboT9BDjboFFoPuaNqABgdgGtuCyQsABGgHZR2/OZdsLv/MOH7bR3P+LwAgZlCVQP2On3aL5wtcwOa5Sq6g1xQATD4F9IIQ3BWA+8VzV6UfwWWOofL4ZwE8PANK1xUAEh7VEOgJflUEY56j+l8uXs1xmR9z5QUIz4LWRgUhqgZ8ALqVn7eCbnL8vkf9nhVhTy8RIPQSLnUBAIySqpu9R+qYxYocdhym1/Iu66gFZQZhLb+6G7w9EisAmOBKVH3VCI8xOlFdYmnKuzLPINB3Xxg75KpJrhqwWjLMBilVxepvIfvBz+1RrDp4OMgglNmtvhgLAMxcJ//cgImLEY2nXOnHxD5OCe1yBWE7qg/553wXLXDRAMMcIf1UROO5SDx7pEEMpAEzC+Yvizi2F2U7uQBgorVvteqD6TOJKlj958Srfh+GV1WgSWcTKS0oRjGoLgAYtdplaStUEAgtEmN4EkQV3MyFcDeEjPUyaMTyvqh4rQ0Aak8dtHTpYAoqZvV/BS2ztL8K2s/PLwXwcgKqeaCLLc1p0S9daw0I1RA/48Oxg2l73OY68e4HPiAxY/kZRDLE0+qaDao932npMua399h7yNhhKGCe5WIsP59+J9dfWdou4np/HDbAMNYBxqb77L082lqF8GdpY1dB4CT7F+VceG7xAwBtp6M637RxkFRTAIyQtAevV23vC+NzDzN0Ir83qzhWYexAwdb3Yrz1ou1BVn8S7j313UIVYKXiAoDKAqW6o6jW8M8BCE+MDoBmu/pmXrmnpUvDeAW2CUY71qHfpz65xN8UqNUcAF49sw0WgKFLVRdKS8fZEg8YTRDpskvkOCy0wAhnhP8StNTipbIiSv0xrlygX7iblQqgnxmEf7kjS5QWRQtkWYr2PwLsxso4k6EBoQU9luTlQp/vNqHvbMe8w0+NZ6m+3WL117ms/tGV0jclYTdDzFxBeIaZIjp7WHkN6cYOga4Cgzsdxvcb63WhIXtB5HkmQOdg/F+CxtfyOgdCvJc9YaW3gX5TwlOom+H8YZjfTQV9BgHnBQh/uxKe5snwWJ7yBt8xGbe7Ikz4ijTgvrtuoWzsGnIlHJ35MVuyxNwHyB1pg4e+t/HJDYFwBPQo+qxWfZ7kcDnNK563jEPa8Q7oFDVv4OrjuzP4DHLX4FvDY2EA0DHTK+xOaLJNIAPEDNB1vOe08DT5TDAx7sPEeahGeQwTFHkiVDbR4m4+adoTkJeULE37eFtsF+/mCn6p5ABAMQyANhYmysWpx1b6SAAIH8usUJ010Op0BwhPwdVm1/NDEYhlQm0Ar+BppKagnQFBUZ73OG2XrUKQjZyx2ezHHhUQ9alToGyI8AV1IEvzT+dMcl9ACJ9nO+LuBTi2bxdC7LYw18b5+RwRGvcEaEK/5fjL4/P+IOGvFYFVzqdvqwq/J4K8QEsFVn+C92VQn3FMTPnBR6CrQTdyPJ4LCKj6AoIZXTYL4ckm3VwNv1XFASE+fCozmBVbhbzCgRAvYl1R9DkV1Q5lM5ZUmunFEgeEaMIhFsQTMfyoz/V3yZJqa+E/EcLTPs5XI3zcJ0ISiLwwdlf4gDDmk2lK4U2UmXO5e0wcAAaBGJ4vQBgJSK9LQviTUsfuHo3wD0S5g0gcAAZhi9CEo3m9Jb0uqiO3banjN8eDaFsTJ481NYIBxlH677yfOiv3+Dmoi6++alb+I289ALBY/ZxPnG805DALv6PWfMTqBULKihCfL9+tikP4utsAZQ82onrXpNHy3F/dG3ydquB6bFLZACEo3R/+JF5lLDFBB8D6Ji4ektwCpAV7VTKUV7+9OIVPdAuIMigyN4rpF/MzZaHL6s1M3QHACv+VOv7XZXRS08bPyyP8rdGk1AAq61X+Tqs/lAQjiQDAWiCvvIaSWP0kNYDKa6ljf2tAqfLziXFBbkFSPQvc4gxQV5Lyppv/OdrgpQlAE4AmAI1d/hFgAC84sVsG8gvjAAAAAElFTkSuQmCC",qL="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAATqSURBVHja7FtZSFRRGL6mRfsKZhJRNCItZuZDCO0LMUEQRUWLSRZBD05Ji0HZkxARUWm99BAU2QatRBYttr5E0WKl4bRQKWQSZYtlqf2H+S/9HM6999x1bO788DHnXs6dc853/vNvdyahvb1d8bN0UnwucQLiBMQJ8LckiW6uzl/oFtlDAP0AqYBBgF6A/oCuiGpAJX46LgcOnpQjwCXZB1gj2XcXYEOsHYHtgIcGfb4BigGlsWgD3gHGASp0+hQCSgBvY9kIhnR2/9D/7gU6A7YAagCTNPqEEbw8AvzWeIZZ5WbAJkBCRyUgC3AFVfgy4JZO36uCe3r24QLgGWAHjtG7oxGQhe5rMhqwdQb9Twnu6dmGH6hRDwDTAS8AOR2FAHXxfQB7AWsBRinmc8G9WoNnVBKuAVIAp50gwS4BI7nFF0o+Vw9oFNgGRYKEeRwJqdEk4BwuPoxqb6a48Mbk4lVpAuQBniAJ5wFdokEAO+sBA9emJx9J22zoWwcoQsKzMcr0lIAgoIAYrwqbBLy38PwlQDm2VwLGe0lAqURgYyTfHTDAmwFtuI79XhGQS1T/isnzy59lu1KHNkDBozDHbQISuCztsY3Jf3UoBqEB1Ba3CZgIGEOuPzhEQJNDZDA7kOYmAUu5a6YNoy1O9hdpt1r8DhYDzObuLXaLANZ3LndvIKAKcJF4BSsaYOY4DEdVf4Leg7f+S9wigKl+so5bLEW/zFLaGZJRnSq/JV1vLRpdlnBlaGSG6Wa00kxJLJe7/gI4gaocwLPHPpcjDgM2Aho0vu8PaTfrjBtAcoN4zUh+imMzGYHhcTfyzEzs4ygB1PjdxUEbBJMtRrIYCZl4JqsNNOCHxpijAGeJ2y3DnOOlICe5T0hgBOx2+ghQtT6gsbNhjNPn465mop8OCPq2aLQpmeriWzANDgkWr2aXq7jj4qgNCHLBx1GD/meIxwgo4iJnK1cO08o1WnD86wZjHge84gh0hYCj3PnVI6GcPM/vyjcdDaD9iyQWr2BIfNysFsgSQNk8ZuLYlJC2npvkNYD2PWJivBNuENCLnP/7inFtn0oN2b0gxg2iZIgehyFk8jcEhRM9YbHBTWznyKxPhgBmyDpj20rZ+jVpT9Nwg5SMKaRdaWE8dY59ce62CcgjwYoVAq6R9jCNPjQQmqpRNTJDwGdsj7VLQDIh4JDFDI5qwHQukBJpwFCbBLSRjcqzS8BWov7lFhOWRu58i4RGgoNJu97imGqJbLKRO+xkYPlVa3wPDZIVCWMEpyctAo8TslFsYc9VCKpXpgigpS6ru0+/K0SKKnphcRj7ltkcs4x4nwKzBNDd/2nSF+tNKE3CCKY5sHgFNSDMRZXSBNAgYhvgk+KcePnDxD0a7tUwG2QqP0GJvKff6cFEkyTDa7PCkrZsQZRoSADb8UUuL7onaffg3KJTwo5WvlPpsNPSn7T7RWsS0SSAvtRM8SMBVAPS/UgAdYkD/EhAwO8aQH/dke03AgKcBrC8vbefCAgK4pFMPxMglbvHCgHM/U0V3F/ARYcxS8AykmUyNCn/Xo8v83oySVEgoFTx8NfgHY2AFUqkzM4kAz/ValAVfrKk6FgsEjALcFCyL3vvfzvWCGA1/vVKpNLcHZCoRKrMiRgDtKItYC8/73g1qYT4P0d9LnEC4gTECfC3/BVgAJ2IChDHaGv1AAAAAElFTkSuQmCC",zL="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAT4SURBVHja7FtbbIxBFP63qmhd2tKympDyb0LcNjQeiHgQDyseCCkS94fyQBOJ4EVEJB6El60QJEREXOKaiCXhScKLUEWCLnEPmrqre2smzqTHZG7/7r/bWf+e5GRm/7n8c745c+bMmX9DHR0dTpCpwAk45QHIAxBwKjStWLe81s/39iX8kXtWTLjNrxfs3X/cag04TXgSJ/wrSAOxBEYDMxpLuA+kgQCgkvAz9LsHpBOCAICr0YxA7gJ3/gcAhhDublAvInjWSvi9h3dF/Bp7gY9q/YTw2TSWwAtDI7id8APCK2xcAjGDrSwied4K/kFfTfvpNi6BpAdDxjSgWeAImbQfbrsRHJKiBjAvcJTGgyyB/EPbAGACVGnqhQl/4bSG0msDDQijfMhWDeilKBsJM/hcUPbGwE+oQPn+NgEQMvTjR0B6TVB22wCAYkk+ZxyhKWkCYK0GhAV+vQqAG4KyJsLtMCZXYQQZldkEQE+U/yWp05twFIxlo6D8M3oeM3jnAJsAKEX535I6UQjANCpA8gJAL1sBkNESTkgR3dQA8NVWDdCtR7pLzIf8OUW9S5xbzdMPW41ghaY8CjaAd4GpkKcIF8HvR6hstaCfbyg/1iYASjTly5Chwx7gecKzCU9DM5xUaMA7W+MBFYo+QwgA2fofhvLNCi3AMYPuftgBvwDoh/KfuLJVSP1vStrjmU0o7ADf91BbAIgqBl0vEY7SB0FfPACuou+0Q2iFPghfJACgGTjCCcDHAL5w2sNiC0nULoHaxTwa36wAEOU8QebPu5rACVP9wQJBEmj9uwrX2AoNWMgN/AIENWo5B0l07dUuWQrtkqXBlkcc0slgZDu6CoDeaKbo7M5AZZsIn4BBOhrPrkXjWM0Q2I84aMYs5+9VW5cYwQUSY0eJ3vXNRTNfjHYD3rNTAVAvEL4BLacN6USHCtKc/a0C9eRBOIR+j5P01SYB4CUIKyIG+ETQgqwDsB8ckTaJ28roruQ8L3NwKA2C9KSiXwr4GchvyzYA80C9Ke121BHaBLc7iOin5HmzZhzrUL/xbAEwhvARWHd0dtdq6icNjtElgm1U15YB1IDcZjfTAJQh4SltMWzHBIlIDlGlKWoAb3zjXmXyCsAup/Pi4grhY2nuIgMhLU+zn3rkKa7MFADjUVCDCj/HQ1tXM6OVaQKAt8UdjofrMy+O0A000JYUhOeph9MZ25fFEyIGdgCfQagm3HM8XJt59QRbUpidiIFBrBTYDBeESniwM/VddRw2AYBGi6+i51hNyyXGz8304LIBAIsG3+IOPTiY0UfiO8Qc/fcCVgMQRu7vQUUUqUrhPM3MZQCWEu4G6n9QEc6qkgRFKK3JZQCWI3eZP/MPFjhEmDZDWuOY3RRZBwA7r9Ooz3pBebVmqzxK+DEXAMkZAFx0QlwviQaVavwFen+4UdCf9QC4yIjRdXxYUq/aoK+jyBbEM7Et+g0AXa+X0UC3O/JP4PlA6FRBHaoFi53OG2d6ECuyFQAqPL3qYl+JXSS8x4d+r0Hwhb3jup8g+AVAEQjPZvUp4UWaNve5302a0951FI/wDQS/APgBxq4FZr7G4NyA3eK3GgDorTD9vGaf8/dbolPOv1flKVOhj0vgALAp7URnd2oov2vqUxDqcvEsICMaTjuX6X0+mxqQCtWCG5zsqgGE8n+dDTjlAcgDEHD6I8AAvLPstVX1hNMAAAAASUVORK5CYII=",GL="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAV9SURBVHja7FtriFVVFN73GlpholJkM1JZo2WIo1JE9aNIKo5ilJY46Y8wDMLGH6bQUNhjpAii4E5aRBhET6PSUq+PH4n4R+mlCaEzhgiJ0WhlakxN3dZivk2r3d77nHPnnDnneu+Cj7PvnP1a31lr77X2OVOoVCqqnqWo6lwaBDQIqHM5L0qlhxfPT2Psiwg7CX2EOwhnkh7g9XXrkyEgJZlEmIHyRMI356oLFPM8v7QHGEbYRChZ7n0pyranX0LbYuZrwCDkakKAchmwSQuhR/zmNu0oTyAcrlULOCSUDoSygWEVZSjcYtQtp6n8UC2CywjdULDdYwElR9uaXwTZtFdV0a7DcIuasIClILVsTP4FwuUo7yV8RfgZKBDGALwtTkW9ly1Wsgxu9UoeCRhFeJFwvtjbNQl/EJZ42p7E9QuPi3SL3zsIB/PmAqcIK4yFrSWhvuXusZHwfV7XgDWElYQKlF+TQJ9b0Rf3+RjhXsKfeV4E2Q3mYcJ3EtoG0deDhLvQFyv+Esq53wU+gZ+yzHTUuYHQSXiK0OqoMw3XV2H6NRUHvAYLcCm/mzBcbHk3EvYZ9cbhur0W44BfcG2y3HtGKM8ygrDaUq8Z1zO1SIAS22G1idS0cyESbLFsh7akaLvF/0ei/F0tErCf0O+I6bsMEjjtXWvZAVh+IvxQi8nQCSh2j8jupMwh8FnbX4SPcJVW86ggJ/cuMBow5Q1PtscKv0dYbyivjLrrHG6VKQGs7K2YHJ/s9CJIMWWzMPV2hyWYEhjnAbsdaTIHRFuQND0ikq1UXeBm+G8rVmkprSHnAQoTDhDe2oRd4oMI5wGBhSyFcdrUf4/bErWA+5GyDkOmJxezGQ7T5HqzhZlvhunPJVyjBk6HZ2MX0MqfJcxynAcEYpweo87EuKF3XAt4H5OWistUNcA9U/jJ3034FOQtAGzCyt+n3OeH0j1miTloa3grzTVgDwYtG0/YPPdTDhKuAoku4fxhskf5kerfYzVzDl2Y2/4sdoEeQYDvNdJRmKjtiGwtMr+jnvYr87oNFg03mR5Sv9P43YessBKyO6zKKwG3i3IBq/ADEa1GR429IcpvcawFmRMwHX6r/bwCEt4OsQR5xvdtyBglSx4RJBEQJUHAaqE8b2eLhCXMTaB/+cKky1iES1kTMAVPooKjMJZ3CV+jPNzT9rDDGkyZhCufHD8hiNBWMCUrAvgJf4gr772fi3v6eHuMp/0xUT7pqXdAEPubcANtBR9jDkNKgFb+Wjz95cZ9fWw91tPHaVH+PcKYBywhto7+qiahWgKeVgMnvywzQ57gYC3At4toEjjlfnaoCCiJ/bjLMH2z3+OefqTSv4ZYm3I8YR7/HZSfBFIjgOs+Z4SirmytKUJ/vTEt4ErH3xeLNYcDrOfjuEMxRj1musOSiNik2WLmPgJOe+odCSGA3zveIkh4HNFoIUkCHhLZW5jyLNdHIOBsTGu9zXPPJIHzkSVJEnAQ+zb7/pyQuhy0jEf5R0+9UxHJ0E/y0pDIj0m4CYshJ1SHkiRgFwbvVP8/v1OeGN0X4FRE8tPvqVeOEf/3I6m6Qg18gzhkyZCNgB4V/QuPvhjpdi6zQS2XiUl2x2gXFgjJE6emPBPQ4TBd19hRtyv5ZnhFXgm4gLDQke/bZHSMvuWHlG0YK3cETDVi/zALGBGTAO0m49TgPrpIfRGMorxpAWEHG30qpY+pkyRgr/DVz2IScGGE+ttw5dT7zaQmneTLUf0dzwLEDWEySpQviVB/A6xgY14tQJPAb32ivM5uFuXrItTfp1L4TijLf5kZH5MAlfc1oJpdQ8uEeiRArvwXZzWJLP9naCvihr9VSt8ARpFC419n61waBDQIqHP5R4ABABvFKYOY4K8BAAAAAElFTkSuQmCC",KL="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAY3SURBVHja7FtviBVVFJ+3WCkRSB+CiMJoX70NK1eiTHSJymgfZlQYlMniZiXSTn3pUxRBn6J/NA+M3HL7a8FK1IL7DBGMLSUtlLBQ3pRBhtWXIon+mL1+R8+ts5c7796ZN/PmseOFw5mZd+fOOb97zrnn3LtbajabXpFbj1fwdhqAogMwy9ahVCpl9vH716zsAzs+OjYeZvUNW4yblRfyUJ6Q3QT6GVTtWgvIsFVAi4ocAy4T1jBYRACk0vOKCMCCiOuZDwBMframdH/RLICUP1MCAFDOKhIAVxlWoxsKAQBm+hKwBw0/jeC33k7LU7JlSmlkglDsQrC7mWwBbzPoGWSH+zuRCSYGAEpdALYX9DiEfTWiD83oE6x43KRrioAAbcX4/0SMPwS2HL+vTApAOy5wjPkrECTQFednDdBqoXwd5INqhvEeIDBBqi5YCpoAHTIlSng2CfYaaG5uLgAh1oKN8i0JTkqXyZ9FN/W8LosevEvgKJ8/hN8qWmYYiN/lOKH222K8u7vjLqDNRFQq60O4WsR7gQBqHP3uMvQxASFbDe/57cSANFYBk4I0S+Uo5bk1xPWPpg54n6ymzG5jakE3LIMN7Z4souJQ43+pARbZGEhaST7WnofdAEBZXFOQWwHBTji89524PmDrjDGPgJbyN+Qqk/t+gPL/EALG2dj4M8IabM1nEHr52s/NAjADl4tAlrSm/xXA/eDamc3eF9nj3DxdYERE46T+eCTuCxQcwd7n29W5AADkzxYfD2K+exHYer7tw/0WUNyS+GnhEp1PhCDwYrBPOMGpOihNA60APRlRD5Ag74FexHhTjkB+DraQl9wwSR7QThC8skUeoAta4YxxCT+iQudD0NcgsoY+pjtBt6M/pbiPQKljlqHfUQDYltIsACCBqUjZbVH+ai5sZnPfp9iH9X7kjreCngUNgwYoE7TElh3MEy+H7QDQ4KXvlxbKny+U38Cp8YmIwEZgfkAk0uu6lmfo7YDXZutx9LXeiHTXZnYvi5mfpjzNLoiWsdv4hEiCUeWxqap8ocVqcDxKDtckqcdR+QZ4Uw6Kj29rBQD6LmKT/kMqz6XyJKfMAS9nX+HZlAaEiu4PWZSpS5diYJuGFD2VZbCszcDDLfrew/xd9PuMhZsPth10C+h19nWV2VGAnFDKslJ1dtOhFlbgR2SmTlaQ5dGYEuQ58Wyjd+oQZBiCj8mKUpTHxKuitqBxbuTNEpcmrTTcuKlNC2gjw/tvs0PM/nWgnZryciZDLaVWpj0/q1lydYEwYb4fcqCidinzj1r5szRdAf45CXQL0wRgL/MlMQT4W7v/gvm5Fquh5fB7BmKOtv8YJ06lGgQPMq8IoWztW08cevJshl7E/j8/Iwvbh76/8+P+OLOJMS4WrldPEwBVec2J4QaHKchqO7oqYtfVc14WR4TAMqqviaMM2jJD/GgfAMwIme8+rQS2tTE9bvDSVuNZmhTrtdr4pHxhlzD/YX51m+M314ncINUYQO0x5tdDuGsc+o+DvtFNnqP9MrYqii2fgrZ4p7a3ZWG1luWbcqkO2aL6uap8PpNyWOToJPQABPvLItQqsLc8h+1rw7vq3KDf5ZhMyPYG+g+5lsNxM0Gf9/KupbrdwXXeZpOPdfDJMUG5xH7H/oMcLB/NbEeI/WqAQViHD7/k8I5KdePsGg2y1dRsmyysvBqbAPsp0y0xfGAPbVqooMOmZ2vLQffF+My9Npdhi9oqlK+a9hmy3BLr9f7fnj55XmebsTQaf9cXq9HJ9DnpllgaZ4PSBEOO/qMQ6HCKSp8BtorpJvEtK+iZA6AB4YtMbA/vA9L5/tGEis/jMUnx8+Io3nEAWGAqr2/mWSK6QmRlvmtywmYeiCSKCir6yxFaVXZE/cFE7gAYFKHd4PXe9AMUW3ALNP+mlWZznNOjrgEgImAazxEMQdVPEtW7EgBDtjbNEjTlY2eN7QDQ6T+Tu4MVHeGgqVqQhfKZ5gEpuUOZaZJ3j8ppK9htFqDS6UCsDoFhH2DmWoCh2vM8xwPWGWEBom0Q19vzEiJPACaY04nRm3kJkZsLsBtQinwU5r8wq2907X+NCSs4mKcAeQNABc1veQpQOv3P0wVvhQfgXwEGAIsGzKGtEheoAAAAAElFTkSuQmCC",XL="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAZ7SURBVHja7FtrbBRVFL7bpZSHyiuN1OKLrkajJaAx6g8RE0ndGgNqTOOjoYJGCOkqhMT4Q2I0/jBqRIqiiUKM+sdIolG6BFGj8UFM0FIURZYUokUEwa5o7VK29Rz73fT0emc7s7udnWk9zZeZznPPd88595wzM5H+/n41lmVcrp0rlt6usipKf9li3a8MYDk9Ukpt3LTF0w/yS/heEwhRQgUQbAvIUyIEJ7+ajP36vmnCX6OFAG1N5YSMZX8fYSq51ASxbQa511Fa/hp2Alj5SVifhJG1kXAm4Vxj21xCO2F32C1gIpQvh5LfOpBwIZbTsDxJWAi87rc1FIsANu+/ofgUgNeTBgkHCU1CeVNmEt4gtIXRAv4ksD9fRrgA22oJ6zDKLCfI53+g5RJx3nQs93NMIDxBWEVI+TU1FVN+JnxKOB+YT3gavq/lRcK9hNdgEVouAmoIK/2cm91KFFPYcHIIo6hJaCRsN0jYCyIaCAlsiwnUYRkYAlj58QhwyiUJ92HJMsdCgpYkRj4ptmkSAkFAGc3d/YTxhInZfxPjochBwq2ETzA7XEP4OsfI1hM+BsmMi4NAQJmYv88iVP9X/exwgZEVaxEjm8xBArtLtzFdlpSAiFCel9UIUl4lYfi6EwmdhFewPjsIBPQJC6gGGnLM47mkBdYwHAkfBskCuKhJk5lXEGYRquj/SsLaPO+nA14KyvPcHzeO2StS6tIHQfj4L8jSqkSEfi/Pe6agtI76rYRmsT/uZyrsdho8gvR0pthWh9GqyZOEekHCehARE7EicJlgEqgx5us9hGfzvH+9UDgOl4gJUgKXCm/GD+4WtT9XgasJXajm5mPW8BIcl1mC74ag1gI7MHJvGtu5ArwHic/vhF2EV12mtJtwnu+SbzF0FAXNQpSvtuteQVgKs3ZjzluN8ze6rD1KWg3uQPY2D0SkHY5rNvzbJjcL82c8QLg/LOVwG4g4W6S+ZhRn5b9wyPE5AF6P9YcIL2D9ZWOKDHw/IIOZIiHq++cIx7C/ErFhkUFMqwiILThfTpHxsBBgm+9XI4FqAhFnwF0WwRqS4tiEUT+kBAmxMBKgJYsOUB0qRCbhHcI+oVjcQt6QAipH6R14ArR8Q0o0WHoJyxwyv7g4NoYuUmgJ4Abp88Z0x7INeYAtMJoBcIXhJoEnYBbhQaTL7Uaer0f8JsLVlhlDB8ZTyAm0PGbUJAVJIW1x/hFPIbKXG00UlkvQP5DCD0seFoHvRyj7FuFyNdA+j6mh/cGVyCi1BUwDCctLTQD/kLuVchWZviM8TnhbNFnYs3nOf59wHuFJWIiM+AndIaJj19BiAeFSJEnvGkT57gLfozvUleOYnThmDka5z5L+JkW22CpmA50TaOlGsqWKWS0WGgO2qMEHGZ+BjN8wz7NfX+uguGymtliaIUmHYLdLDW2wNgchCJ7A9HQd3KISI/WVhz5DytIscRKZICWCQIAncWilHxfre1wcnxRWMDtUBFiEm59zHchwEun/N4adAC6W5PtC+1zWGKOCAJ7SlohK0i0BajQQEEGGVwGf/gjbD7o4t8rIRxaEkYAm0QSR0dwNAbXG/41hI2AefF+J7pF+YnTSxfl3WgiYHiYC2O+5i5w2av79Ls3/Lsv2xrAQEEeFyPKokQEO+zSIsoI78K6C7if0FhIM/SYgKubwlEhrm40EJ9fvdUp/a1QebTO/CWg0Kj09+nGXBFxpKLnBsBzPr9WM83n0n9GKkvkmkequtxRFTnKLkQyxK52G4geC7gIc9WfAdx9RA43R7RhRLqhWubjGDXR2L7AOVSaTehjXqPY6qH5ZgCxdX8KyTQ0+aV6jlKuPEmrF6OuHJ52i8uT1ycr5CVXJCDDLVvkqLI/kZpcdKK38AaOnwC32q2AJ0aC5gNm4kL28DzD6XmWb8X8nlOflqUC5APn7cnSKphqj9iVhsUvTV4gZKVzrsLGPs0d+L/GY8vgpzkgTwN2h29TA+wJa+I3T3Uhcuj1e7yfCHxhpKRko3+OBUF8IYOU74L/aCo7kqbwmwKlc1h9pBMYCKlHvd6jBzjGvry1A+c/h452W/Rll/0CjZAScw9GafJ4DLX8HsJPiQWuB1+yAiZvBuzffC44kAVMQmNgkuU1+vAjXPIQYYo50v3L+Uq1kBLRj2VXEa6bRQeqxEBA4C+gagWv2QNlMsS4YGevfDpepMS7/EzDWCfhHgAEAox6bP0M8yXUAAAAASUVORK5CYII=",QL="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAZESURBVHja7FtpiBxFFJ4xGlciiOKFIKLuqAjGqDHqiv6JRmdEWeOBMYaYBDcmYVYMkSiLAf2hMboqO4o6IZvEBEWDRNRsu4oHgkc8ULOCx673j3hh4m7YxCMZv6dfQdFUd1XvdG/P0lvwqJruV13vffXq1XvVPflarZbLctkvl/GyvytjPp+PffCb5l0zCdXe1Ws37Yn72a6WnbYFdILuyfISmA66fEwsgYRK87gTzCoAcIDNpnaWLGCi1p6QRQCO0NqHZxGASQHtcQvICgD62IdlEYDTtPbBWY8DjsoUANj3D0R1vXbp6LQAyLtmTZINMmD5GtlbzRLgFMDjBdw/iEnQIt8t4W9Hv4E6gJUJPUGe4ayXK2Pb/GuLqHpA74FagkCAEF2oyqIQeEo+YORe0TJUFdSBvr9pfeV57QTIC1FeZDsbVKp2P+vFnQypcPVc0DsYMAgEjwAUCUYXhS87jtMGmoW+Haj7QDO1vv0OykdKsqIugR5tBteB5ptA4Ix1GR4j5v0qqFeWEpfTbvYpUvBZoPMMfWX2KwHKiyxz1ASI5bnqFTUdvgq0GXQJ6EbQMGiJgW+TD4CBMPOVou5BoUdRzQatBB2jsbwf0LWiKf8K6OrEdgHOVitnUMpiCHyHgXW2LiD6FcKU942xD7QBzWO1caQsMMz+XSKDpvwV6Duc2C6gDdyE6nlaQo0Dv8R7M+gsJcNbhuuddXr1x6UJ2gs6H8/bynvXoXpKRNOU/1P1jX0X8B+KmkAAfUZzF+WfhEBzLQpORTUIvq9CeCRtfhs0lSCcCTo1TPkoAIw4EOJJbiu9vgjyIuhbKj9gU55FrGaLZZy/UC0E/cFnfwp6mmN6JuUTXwKGWerx7e9Gj+3rI5bzMn+WbD4C/PNQdevbrR5n+MuoHotTEE/7bVP+OFTrtUtdDsdi62kFVuVTyQV0EGgRYTO/1ZcAifIeY4EgZ/gQ6JA4lU8iGbqTtUSBKw2KrKLZi/IfMuytsi0gbGEQ5S/3MZrMaXVDAjA3ZOYvkG2RO4Y4tWmYyYVC0uY1tRz8lnCi7l/iFDiWFyMQeAJNVGZPPPISKLbGx7aMnruKe1Xf8hFQqnjOWcwFyrpPYQT6HOhKuQc+6dPeEBZA5V+n0IOgGQblpZyk9A1zJawLBoAEhAd4qRzmZ0YNAAhxDtfvhTTtVgj7VgC7OgT9PuSRO4OyOQEBdJu2BMTP9IOmpAIAlRdlp1D56RDwjZAufaxPD+EpaMlT0G5T0UAQoN6tB4R6LEBCX/V2Z6lF+Ryjt5yWuZnKpcoRWrZcHYQmRqSjDsCXKuiSuN+BX2L3NwUAzNjSgDOEMsPoikPcofN8kcYu8IGKkiHM7w4C74KSC5jidqK9SPP0RW3dzxyBLJ+PugVAIRn0B+00x6XPN1TWo8Jq1pu57uXcoM/RB6kxfwZtSysOkK3oZk0pFxBE0ZJ4cG3WxewLEcdWAGwLO6VOOg7woh5CGvrmXMELAGBDmoFQr7YnRwWhRWtPjrgFN2ugb04NAB5EVHwz4qLAkT6lJ/OFSdTZl8xwV9rJkBcVAGZ3B2i/D+W1qABU6hU+rhMh5dAKtldb4L0V1YMBt9vQf7WD+ffbHOdofyipFLrYIvwpqFaFsDwGnmmWsS5j/UgjnQdsBA2JGTM7DCo/gY7P/X/m/7F2XVJdOfWV/OITy1hy0LKHkWVjnAfAFIeguIAg0Z28mXkmgG+nyvjAL7nBGcqT495HDs7zBsb+3eD/tdFOhJbTClZYrMBUXGP5Ds7+7Q13JCZWQE8uLy0WO3TRQ959DrMvb4fEhzwc1+zHbQFSOhnTuxxzb9fa/1iUl9Pgu+lD7o1T4FgB4Nuidpec3geALZgR5eUzmhUYY7BhASAIHoMj9YFEUBlysQCavoD6mi1GaAgACEKJS6HMV1omHnnVvps/d4SkvE/w0GVOErIm+ZWYClfXBIFgmfky0+3/ngXAto8pAFTer4HQYmDboU6LDMqr5bMc93uTkjPR7wTpD9SXHScHsP0d8gj5uuT+JGVM/ENJKLCWy2FdAMuwoY9keReBbklavliywZEWmPqPqCZC4dg/lR0rf5trYmibWkkbADH/X9IUIO2/zX0HeiHLABQtu0DiJT/+7/GMl38FGADqf3loyC6VxAAAAABJRU5ErkJggg==",YL="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAXVSURBVHja7FtriFVVFN5jD6Gw+RFlltljJiwUnYSBgaQs7DFqDJlMMan5SiyaCVPLMCvogUVU3onCR0OaPTQmEO3esKTUYigkJ3vjZSgsJwijiF7i3NtanO8wa/acM+e57zmXOws+zt1nztlnr2+vvfZea++pKhaLqpJlhKpwGSZgmIAKl1O9Hli6qNnUt6tx/cPUBzZ27IhOQIxyHmEGYSphMqGO0E2oJxRSawERZRzhbig+CfcKUHw5YUuSypskoJHQiqsteUKGsNWk2SdNwFWENZriOUI7ruXnBH3KmYT1hIViZuEeb/NQnP3Bx+U+DXKv7ycsFvVxj1/moTzPAu8STi9nArjH9xKmoPwf4Wr0vJdMJJyF2aAsCXic0EEYifJnhLMJB3y+XycsqOwIYOUfFmVW/jrCXwHqGBOAgAYgFQTcF4Py0gLGeTzXROgCOgmjkpwFeHp7QZvbZ4VQnmU8rlM8nmsRv2djyN1MKCZhARmtzM7u15DfrvXRDiZ8jnZvJmEXoarUBGS0RuciLG5axe9TCEtcvpdFG3m5/ChhhyChpZRDoFZrtPI51Uk5F/6jWSOSZQNI+Bw+Qa4kvyLcRvgG5R7CasJThDeiDgW/BDyglZ/F+A/S4xmPZ+oBKd0IpHrFvYcIE+AHGuAcjQ4BdjqLtHuHA3wjqynPvX074QTKfYRVCJL6xHPcszdoytsyP2AHRCLgSoxTKU8T5vl4/4gw53Y4rmWE7YQfcP91WNSdhAtBhMKz81zq/R3W0lUKAg4RNmm9MwYN/Ylwh0s9WTHW2xx8xoe4finu9YKIFWKoXTsECSWxAF7fLyXUoEG/aURsI3yvOS6ZC3gSva/LesQR7zj87TnCTljBI2lZCv+IsTqWcBfhI22WyMLkpcPjcfqYS33fEqbDqzvJbLw/jXBFmmKBfwibYZoN2lqgVnN4bPYnQ7atIHp/ZlrD4U8xTTnF/vkYskDsLI+lmQCpLBMxGUkO9hsrY6i3gABoWtpTYnJ9MCvmOo+I4ZVPqwWYFKPJ1HIgwE6u5iuVAOWyjkgtAdWI+spCTFnA84RrKpkAXsLGme4+rZwIsPf9amKqbzFC5y0OiZTUWkBOC46itG+tyAHwmuAVwjlpJyCP3opKwq2Ei7R7nJw5GhcRpgjIiOsZEdom9x+WICJlGSmI4ITK1DRawHewgnUuz1yqrCSom6/g/Qf7UMVy9PglysoG5wURXD6A8PoJZe1NpmIhxD1UVO4JUc4Oc7ptmcPfWlV/Fvp9JE8U6ntTWZsqLdrq8HJlnU3Yp6zdqupSEDDCYYza0oWsjq1QVvPiExxmixo1MInKCt6oBqe+C4KIewh/an+vR2RqnACe6z8YgoSd4ncjvPhrysrr28fPOPPL54g4NfaFcJw55BmKHuHyyw4WdgJ1GQ+HC+jVZ5S1eaG07NAah3fmamU+XfKSKHOy80HCxgDtuFgrb1A+zyFFJYDj/x705s+E+4XyOTV4K42FU98THepixbdhGd0ToA1j1eBtsozfl+OwgLWYithTX6CsMz9tamBKXI/m2FreEuUX0et/h2jDOjVwo7Q9SOgcR0aI9+eaYAXNYmyzzHBJaHRq5bDK36T1/mEVcM8yrmlwoRq8S/P2ENkczhT/i99HQyo/CmsDu/f7MCMkshBiBaYjYLFls8c7x3A9FFJ5XmidL+7x5s0nQSuKMynKJCzAkOAV216P5w9iNdgbQvlOTXneq+wI02gTR2X3+HzuIPxFEAsYjXXE9Zryq9MWC/gR20K+9vl8I2YYW3nee7g3ivKmLCDIGuK4sk6A+Iku5QkVXuuvUDEcs03SAk5iGTzUNneT6t9wtWUTHG4sZ4yTtACFcNipU/j4y0otzs8pA/sDSRMgpRqzyALVn1AtwFfweYH3THw0aQL4RNgtyjoVUicWNd1YXnNs8IvJBiRNwG4ERqzwqwhht5tWOk0ETILpJ/YvNFXD/ztc4TJMQKUT8L8AAwD3fjcM6Pez0QAAAABJRU5ErkJggg==",JL="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAYDSURBVHja7FtriBxFEJ41EsW3JuILo8Y9fJzJqWAiGhX0fmQ2voOHRtlIIh6S3BgEUSOiiGhEDcmuFzAHJ4qeQUV/GG+DRkV/JD+Mj6g/lF1OIopeYiBqvFw0yVoNX2PRds90994+4k7Bx8zO9ExXfV1dXV1zl6lWq0E7yyFBm0tKQEpASkBKQEpASkAby6G6i3cv6mlE37cSegl7CP2Ed+vd4drB1+0IaJDxr7HfcwnXNYKEVpkCvcrvDGFJO8WA/Zpre9uJAJ2rv9EyQbABsopQJswjHEbYSBhqZQKOIewjjNXQ15GEP3Eu9uDrAVWOIkwi/FZDX6cQziRsnogpMBku2+mpzHGEFwi7Ce8TsjFtLyVsJewiPEA43rPPCwkvT1QMWEnogmKuEhI+E6kFfnfD9QuMiMkwfICwiTAd11cQtuAdrlLC+/tqJeAIQh5s/uWohOh8mBmk3itjKozDVe/CcshFPPuOjSEaKRIiEOxNgEhOjia85Nh5ARAyAne+BcdAkwMELDY8SOjBcQTxoOBBgvSC62sJggsJ2wmfOo58H1NCZH2/s/tvMeW4VODuFXZtEOSHIKGCZ21kA2EHYRHhTV8PEB1/4GD8DDbywgVzivHS0A7c5+7aoRgfwIAcayvefaKlLlXErdB3CsgHv3cgYCUb+SihbQT3z1i2lV7zjIM+Xym2eBHwocPod2MUc3XIWSK8+w4HL9g6EQTYJiRLcXzaou10y2vq1HkeQXGhpU7f1UKADFI/WHZ2M+HXhARkFZIcXVBah+dXxzw/gIz0GkudflFssSaAP7DdoqMzCFMR4U35wrfwEpEVXqy5PwsG9sXUBcbQptuSgFGDTYkEdHjO07cN19dDgWsNuYCUh7BBCmNI2Oigz3iSTSYCpjnO/0lw3w2GvEAYtcZwX5fADCGQztPcF172iQcJp7oQcJrjyIuMbXZM9A4sljouDxMOEJ403M+3YkFkRHOtE65fcnzXNsI3hJmEszT3f/LQb1q9CdAtYxewJcxVvsbxfIOHzrJ8z+E+HjDKihM2cqdhs3ICjrs8CJBL2LGG5XC2xTumsvOffTxABLcpFh3lAfV9f9TgUTNw3G1I0kJHApw84At2frnFO7ow2l3KPbmL7NHs9ZOIn4nzzw0Zqs1SfR47/9KFANFYlq4vS+iki7l6XpOKCpwDEmzldsLJhPcIPxqStGxCeU3IHBz3uhIwxh6Yn9DJMnY+V3O/H8cnLBSWhj3CEihVbjL0rbNtPtsVjrvGgFeZQqb5djZhAft9LuF0TWmqxJbDOBI6lbZF5b6oTl/Fft8DT9HJbUjRuS1OBAyxvN5UjlqtqSr1xGxlpWF9GsOFklvQpmJInEJFZ3H+bAwB0v1f8SFgNPj3Y4Uu6i5XUtV9MQTIKpAc3QIqNqIwugdJzwKs2SVNaSxQBuKAEi+WamKI1E0Yv9M3E3yMnRfY+Y2Y0zx/v4/t6kxuLvL7q9nymGWJiiyk5AzGh2xFWqa0KSoDxPVeUUsqvI3NwyxGbA02JBmmeIR2FQ1ZqnyE2LFZIbAjIWUusP6KGi8ZRpsyG4BiUhZqkwpH7CVZBB5pfFW5H7HRiitji2LnDcwTkkpo/ENKpBCvTpFszH3vvYDpRfcro8YjdyEhW9uBKlDSRomX2Yua/iJHnb0IEB0Napa35wwdlxS3jCuA5BNGvsBKZvdq2hQ1y+WA7Q7UZTe4BCRI14pjOMcUkJ/BdN6wE4UUXcArs5Ffh1WiGjPacioOBA5/beJCgMikFgf//agRRwIPoMPAlITNi2wn5/JTCcZzTxC6iQ+xfzejIGIaGb6shdjczNG0vRL5QKgsi8stjG+JilBc/BBV4BdZZUYshZcoLv8x4SRkbr3YyZXqrVyj/kZILHfiI+Xj+C3S503Y9srpIUf9CsJallnWVRr9N0KPYpR70Xe/UquLArcv0QcdAXI1uQgp82KmQ7ERLt+sKcBlPzYr6gAUmqBL0/5OUE1To8CvcnzQEsA3KhXLvOJ/EwPUPKHcTAUy6f8NtrmkBKQEpASkBKQEtLP8I8AAIFxVerjXDEMAAAAASUVORK5CYII=",ZL="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAWWSURBVHja7Ft9qBRVFJ/Np6kvi0iEsi9pNhNKK1NTMCwt3ScYaoTiK1BTkNxVqESU/soSg6jeyyIpizAC8atCV+llWH6BmpbGq3YptVTwozTrqc90O6f3u3i8zOzMzs7uHZl34MfenZm9O+d3zzn3nDO7iUKhYMVZrrJiLu0ExJ2AGq8Lpk95spLf35NwqFKTL1m6PNIW0ED4nfB2XF3gcbzOIDwQ9xjQO+4EJOJIwCkxPhdHAs7GnQBpAcfiSMAfYvxzwDk6EaYR+keZgBT2fFs7/meZ87LyazjfIWwNqktNFQhQyjMRSXH8F7z+TTgRYN7XMCfLbpMWMF3ciJPk8Gpr1ykC9gb4ztmEmRi3Ep4lXDRFwAuEdYCTrBHjWwi3ER4k3Idjg/HZOp/5AJP4unj/KGGXSQvIab6uyzdi/C5hP2EbYZ6m1FoEw7RDvJDXSaIzhK9N7wJ8E3mM08I0lcwrYS4bJOagaMrhnJJGwPg2mAcJSt4gjAJ+JNRr1jATZn87Ijnfw52E0VAor612DsRmhWVkte+sXD/Ap6gb4hXqQPiM0BHnODh9QphPOFDEjdSq8+cnEF4i9HJY+T2IF5FLhKRJKuU5OI2BFRzwOc8FwsfYMj/Xzv0myuhIZoI5Md4FN1gbcK4LIO9FcezGKKfC0lSV8sdDmHeBIIFddk4UCODPzQUGwuSX4dx5+PDxEO9zAeKMhaTHDmvioEGQTXOheN+KiM6yWETyMCUjXCwT1i4Qlgt0EkQs9pnNqS1uCwoaL//OiyCbNu0CvM19iIyuVRxf6rH614q0OQVTHoKStpkwwkdhZYVJQlACeG+fjJt/XiPGTXh/b4LivJ1xN3gY9nRe2esIX3gUVkzuDxg/ZiIG2OJGlCS1hMhNniEMgPLcBj+qfS6HFW7Q5tSFE6rhhC+rSUDaodDJFyHFSabi9RVNeZlIZUTZ7Ebmp4C0rB7YiU4S/grbBdIuVZ6tbUdZD/O/H+NVHim15eEGLH1xT/sI/xIOI9PkPmMLegwzwrIALlEXER5Gbn6D1dbFPQW2D+PGGzzmSQgyvFwsV+SauwjfFTnfhXA38oV3wiBgA1COcFr7LXx/POEtl+uSPtzJ1tyQ2+vdgKsJnVGFTqlWNXiP8NuMdXm/X8p7IIDT2pWEIw5bnA2lirnTSDHuAxcwmgil4NfTPHyXCdiJgLUHfYHhIilKiyyvmIzyGXSrRsAHYhXGeLjBI8gFeiDqN2mdnzqP1WcLuUOMW9ESG2mSgGOiEKpHp8dNTlttTcxxaJI0QeFG+H/WRz2Q0ALrUPH9xjpCc6B8DTo5T3lcvxooNQlTblLQdpZm08WQbgVPVKAabBDKD8F2NxgxoT4KDZGXxZgLpXtDmjcB5VWc4CdC25GLbMcWfTAKBMhytZawOSQS3hSmn9daZJFqiemiSJhQRottnVb22sjyIklA2qFGr0W0/4rwUAmKq4cjKZcA2tl0S8wpGZJBapYgJYm6fxNMeBWKle9xTQuuUdnkMAQ4ljNW23NAriA/wvZ5M+aoiwoBylSVzBKxoBEkZET16LerewaEbML7p5H69hGEZ0y7QFcteXF6XqeSHNX58fvL0GVCeZZ/QIJ8DmmbJICV32j5f16nzvMj8n6EV0VkrwNJCay8yieu1+bYqcWFpEkCVhAGYcxBbqLPzxXg/1vx/iLIUSu7XtT1k1y22+4gbb8pAtJiJTgLHGtd/qsvP+K2nW0U414u15wAac2mgqA0vSDKs9zqcvx9KP4rxhWVoARkrEud3HLrctsh+j9nVUnK2QazZX73NcINuT9w1DIgJn8o2VGMbzJ1EyYJqBXjbnEnIJYW0OLiDlc2AR3+732WJNzY/OmKJ4AVL1F59ftCfma4wxQBifa/zsZc2gloJyDm8p8AAwBaPUILlIWqsQAAAABJRU5ErkJggg==",xL="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAWwSURBVHja7FttiFRVGL7TbqWhIZX0x4psJoq1TDLNH4mIYVNYEaVIXyhikO6q5FZIRBHYZlvWbBkZRWSaFYTo6rS7laIR/tJcJAIn8+NHpWuuWy6mq9v74nPo7XDO/b4zU3deeDiXveece9/nvOf9OHc2Mzg46KRZLnBSLjUCagTUCEi31NtuzJ87sxzPv5PQlfRDVn/wWVVawJOEDsLtadwCQwgvEzKENWkk4FHCpbjOEhrTRMBEQqv2twKI+N8T0EDoFKsvpVgJEuIiIE/Yh9YmrNwGKM8FyCbCa2jV/T2wEJtMIGwlTEo8DAaULYKIoqWPWmFWfiphm7g3g7CecAnhU8JNhD8Mc0wnTCFsJIy29Cm7BeQ1JU3SKMxbV96BFSzD9TWEBy3zlNBeQZhdLVsg64OAvLi/zdLnTcJeXD9k6dMhrsdUCwE5bXVMMh5tr8dch9EetNz/ndCP6wv/S1HgK7TTsM+9ttNeH3PuqRYC9hm2gi7voR1JWO7hSPsI6yx9RgoCq4aAksUhSuHQ9QmuFxGaDYmQGsvO8LhlnjvQ9leKAA5XIwzhreRBgCp+VL8VhC8JKwn7RSq8mbDKZY55aD8XvkA643ySBMxA/G0x3CuIcHedZTw7wNsIh0RMX0y4Vig/E3mCLdqwggOEZw33m7CNpidFQAPahw1W0CZW93mXOZiEWwUJjqZ8v8tYRfJawq8GcpQVjU6KAD5V+IswDCTYPPhjhBcJdZZ5ejQSfvapvJrftvryPRMhgPfq27hebHGGU4UV/AiTLBj2Zo9YsQWa8mo1C8BB0bfFsPqOuM9EHEuyFniJcK94yTYLEVkB9YIlvKDKFtsJ92nZY8HjbOBbF+VLlveJNQr0ir0oze4ywoeEr7V8oCR8QxYWwSHxBsI5OFWZT3gdjLSL5+vm31SuPKBNrHIe24FN+nEccamVzmlQq8PV3D0uxVIb+meAm2H6h0RfVXqrcUWXOsRVMrZvgx6nwrcQdqk5NHKeQzZnkmmoC1ZpfS4mjIMv6LaMHY4scoF4Jr/8WcKNbrVIlFPhyRZv/j3hC035u7HyfR41QYuhD0eXnS7KO6j9ecUfEbkCP/8ti/J1ICb0FpiM0nWXS0iTyocywRCyDiS4SR3I/gFOO7QFqD24ViOBt8ADwvmUS3lJwvu4Xqg5XqX8FFFchSJgu/PP6e0sLQVeDnKKHqGHDzmeDuObnPNH560ufZYi5nMof0X8/VWh/EqXAxhfeUCzeNhSeN/DIrHxCj0LBckrAhDASjxF+A3PtYVkdrjvwMwnoV2C+9+4jA0UBpmEJ1CEvCvq9qLHKZCDis/BCn1EuMrH8VonlGf52KP/erwXL+R3SJPZKuY45787nosrE1yN1e8UY/xkXRzvd8NnsEnPRrLEZnkUuBpxn5W/SyxKl+HcwGQFraI+GIDiu5NIhbci25uH2LvT57hxIsWtR7nqVrKehFk3+5x/uyCgK4jyYTLBy8Vx1PEA41Rm2OSybdga3iCMDaC8o0WgUkB9AhOQi3AeVxJprr59WPFRcGA/hZi76ONcMhYCro8pjjdpK/8M4XQM8+aSJIBj80W4juNllQ/pjmG+XLksQMnYGAjoQXsihrlCf1WOQsCwmLbDqYjj8+VyglyBHcD1UJz9RZG+mCwgH2VwUAuQ3n+JVg4HlYGYLGiOuO5KmoDN2r6Lwn6/1oaRRm0rdidNQLuh2gv7lfZ0REvIOv8+H/zTCfGLs6AE/KIlMfwSYypkAbr1rUEanXgUeF17+f0RCQibA2wRDpSPy14oVxjkSNCAg46GCF78jCh+wginzPyFiT+93084EmaSsD+SOoBDizjkTISxTML8cobBOGV4RAuIRSpJwBC0Z9NKwAinCqSSBFyZdgJOpZ2AHWh7K0lAfQWfzR9I+TSoo5IEZGr/OZpyqRFQI6BGQLrlbwEGAEXKTqK6WAQRAAAAAElFTkSuQmCC",$L="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAVLSURBVHja7FtdaBRXFJ71JyBVFIVqwUSKu/60IvjTRsRiLVSc9RcFFaWoEaO27BKtL77YB4UWTLXdVdCIsRX1IaKixqxVFCu2qG2RovEnmbZJpS1YCz7oi0rXc/C79HCZmR23bmbc64WPm7m7M3PPN+d899wzm1g+n7dMbt0sw1sPvw9ra+Z3xQMYSuggPCrljRoamyLpAcMIbYQRpoaAMnywqQSMQh83nYCEqQS8aroHVKLvbyoBcS0UjCJAuv0rhEGmZ4KjTCNgnHY80jQC3kfvhLkUhk3A7zCcSbBNIuAtQhVhJ45zEMW4KQR8gL5JEMAtbQIB/JRTMNoRBDgYf73cCcigz3qMbykHAnhNbyScImwjDMH4LIhdTri9JQhhL5hDWIQx9oZzhE5cb+KLQAC78VXCMhjwEYoeLHgHtaettzXotxJqCBcJkwkPcb3vCMujToASsiSWuAZCBaEW/XHCSY9zmwkHsEvcjT6L6yTxnU0vQgg4wsXX4Amq9gsh5nPuHQ9CpWhGmgC1pmfQb8WTV62OcNSFhNcwXucijvJ6Z6NOQEYsae1w/V8JYwmf4TszoQsq8XmbcAQiaeF7Y3Geuo7qP36ek+1RIvdPYMLcX0bCw2FwhXCe0ALj2aBLhDHwkocQuX1ig7SQ8AbhOuEw4X6UCKiEF3W6fJb1CZGECJVqjLPx74AwS4ztDVhXcMIIgfUQtX1irQ/qJe3a2BUgaOMCynZCK+HDMDTgPcR3d8Ji6+nbnUyADY1yfZUQJdFXw83tAOfzff6C4RVYaeyuJGAlsrzuWlanhMot0emNFaEdRmSF8Ukcx6EPbkQqw5UgWtq9W4ohodsz6gVnY8cIO2D855h8UsS1IiKPfgKErQ1LnIPvp13W+6S2gqR8DE+Ie2cFCc9ERMzv9Xhtzfy+1M0ljMYWdoD4mI1f5+OibpM4Dbd1Ari47SGgaY/zU5rnqWTse8KZhsamv4vxgH5w3eGa8ZaH8lsFFLlPQIF0a49dssRCWhHHPXsWGwKdIlZjGvsZQGV04xAa0lX53KkQqfsIh5yPi9pCIB3cj8//Gp8vERoT15KvjCAwjXnxvHcR/iw2BPx2fOqGqqy1QhCaFRmhTHU3it1cWssV5DXTLnnEIGSIS7RcIy4ITXvlH16/DyiWAPW0WsTxv2C7vkCM2+IJ5jDhlHjqdpEakXSpMRQk4P/kATkUKfLY57NQrgqQkclM0BaqrVJoJ4BGsLHjCScwtt/P+FKmwptQwmotoi6Y8BgPmtL+RJhBmOQX46Um4DeP8QqUtvgXILcIh6DibqHjCMVWAnhSC5m4z/7iQtR2gxUoZY0RY62o880jbNDUOqfpQrNImL7AEiyTJV5J/olyPaAexqsUl1PmNwk/C+N/wFY3J3ThXcK3yDCzGBuu7ReYoM1RrwfYQqgsGPVACjIKpY+18/4ACV9pS11SkNRuPedXaKWqCcq1ebVHVueXfeoVJl0LIl8SkxuTehyrfcNylMDcGm+JZxPuEb4UCVKLEM5Po04Ax+80FDinoOQ1EZunBYjx/R7nfoJ+LYRwJK4zEP0ky/udQmQ0gNs3gN44HVsKd05py5otiiR7MHYTy2nJWhjvBtNaL/cC6ul3WQuDAMdlE6P+zuKplzUBFoqZ3GaJEhu3vV09kbAI4PT4NmE6oReBt538c5kfTSHAwk6uEi5fZf33axFjCFDvBarQXzONgBva8R1TPcDruOwJcAoclz0B0mgnrAmETcC1MN0/CgRcN90D7r70AMM9wAkzB4gCAR3W0xccV8OaQOzlf48b3p4IMAAoV1q9G/s2xwAAAABJRU5ErkJggg==",e7="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAYWSURBVHja7Ft7iFRVGD+7RtFmD3pQFOWWO7BQrUrlWmlEETSTZRZZka5WqL12ov4oo1iid9mDZrOoVEqjyDKpzClLyoI2LUvN7DG3h0RPJLQUEWmn72N/B7493Dv3zJ37mNnbBz/O3bn3zp3vd77zvc7dpnK5rNIszSrlknoC9rK9cNZVU8J+9mg8/7O4lX5m4ZK6sICxhFfSvAQmE1oJR6eVgHaMh6aRgMMw+yyHpJGAy8TxBQ0RBWqUkYSLYPZnENrEuW78XSQ4hE8JW4cCAQcSriBMJZzqct7ByMpnAZZ+wgbCYmBroxHAij8A5ffHZ9sIrxGWEZa73MMkZEDCeMIY4FHCh4RHCG8SyvVOAJtzwZjlOVB6d4X7HKAolsxswjVYMoxvOB8jfFSPTpBnsOSiPM/qUg/lW0UkMOV7wi2wgrmYefYfq41n1AUBWSivHVkvPi/53HcJUEk0EbPwdxOsrGQ40sQIYAe3ArOdA/IYsz4/chxgI/OxBEyLyyZJwLmE57C+28X6VTjeRXihwpLpAGrxVytqJaG5hjXPir9NuJDwr3H+AIydWL8mtAm3oSawWWbamnphZUVBQuDlEDQKLIfZT3Q5x8qvJOwLK/hAJDnaL2RE7GcnyfVpD+E7D7K148sJxXuFBRTxnbEQcAN+VLvHTC0V13Ei87dH2CuKqvAurHEm4kHCFzjH4W+BIM0xvicnrKlbOOBIl8CdhGtdfszJhLcIrxKOJMzzUN4UTo5OhAKcLn+OxKkPYe9nwgkuz9OSx1gIshSqJeA+wg+EZ13OzQQxXVCgWmHCzidsRzY5Dk4265NEFYU15aMmgJW8zeMcK/90jVHpHcIpIEFbx26L+/IiEz0oKgJmYvZXeZzvDyk5KwkSFsH8/UT6lOlREXA74daYqlQm4XJElGWWsV47wJ6oCDgTIS0u0Wl1G8Jd2cfJaQs4GA45dAJ+SqBh02scOxaksUyr95aYrci1XbC0Gl2j7D0UCFDC6R5rce1msQwuHioEbMTYUeV9c5CODxkCHiKc43ENt9lvJjwsPmPCPiEcF2dLLEppRvX5NcLkLsxwK5R1m8wOFFibCC8TvkIh199IBOw0SDiesE8Vef8wwijCr4Qd+Lu/ES1gD+Em1AyyVGbzPw/VIo/7ifP/EC41mjUNtwRGY3zeUF6HSQeVIwvvP3wslD9J+fQmG8EJjhIEVCP3Kv/GbEMQMAbjBotr5Vb762HnAVMSUP5wwgwcz7C4XofJTWpwFzkUAvjL22Mm4H54bZbHCBMsCbB+86QaAt5Fjh2XcHfoSjXQcV6ACLC+wvVcAY5A1bjE9iHVRIG1mJE7YlCew9sbOJ4gvHwl6cK40tb8g5TDjKtjUF72+Pos7+nG8dyoGiIs3L6+2+Pc+BCUz0B5neVlhQ+oJHlRDq+KkgBuU//oQcIxhC/VQOco6JrvM1LcLJad7exH3hVm4f0+7g92Gp+/RHiR8L6qbs+OFXgccfsvwj1waK1wupOFgm5SqKJjFEoqPB9+YB5Szz34vIzZWo8fpXeNmRRud/8OlNHcOJtwFmGSUOBG41lbCGuQ0WVcZrgAop0gsx+UAFb4epgrkzBbDX51pagGvzPQoyp3assoYrwKFgfkmC9TZYVlBN4hDpoKrwEJvFfwpBp4ccGtSGG5Tg288jISlVoLkBczX/R5XkEoqq1LK58LYvphVINPEY6CPxgBhfQPOQ2zdbqozkxZh3GhxbMcJDdmOp6zIC8yAhSSoj8wKyXM5mbE4h0VlNdKrUPk8BPeJ5xo3JuvVfmw+gHa+xYMb80EDMfoJn8quw2MLlhbi/Ax+VrMPopyWDs+OSPD4f2PCPB9w5AXvIc+QAuiy/Ra13yU/QD9olQncgHtC34TeUGbTz7A13Bn9xfUAhwqv4UVcF9gUdh5dxQtsbWI72OxJKaqwa/COi6dmoxBDvsVfjt0sWUjpK4IkERMA7LCAtwsQW+BMfjV2I0qgtdi4ybA9BFFI653i3O5pPptSfUE5UbnEypBSYoAx+gzpI4AJZbEljQTwJawM0kCktwZWo1kKVFp+v+fp1MuqSfgPwEGAN7OaG+tHYBMAAAAAElFTkSuQmCC",t7="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAWCSURBVHja7FtviBVVFJ9n6bZlbZQQKVngvKCUVlqhoojND+JuFn0psNLNsL7YvrCCwKLoSxCC5ntYUKSyRUl+qA+6zyhw7UO2VNQKEbTPT0VBkf+IJM3dfqf9XTtc7puZ994M897OXDjcmTfn3rnnd88595wzu4Xp6Wkvy22Ol/GWeQAujspYKBRif/kTGx7sQ7f87d373ol77qimnbYGrALdn2UTuKoRLZyNAFwKujzXgAwD0AOan3UNmJ91H9CVa0AnBEIJtStBl2VSAxAFzjXC4/rqrOcCC7IIwHJ1vTiLAOgI8IaOBQD2OyDUxNBr1fUtTby3BzTcDhrgg0abWIwGoLdB4e9G93uj4xIBALl8BV0NVMbChKIGNoNaAzDukojCC9CfgSZAz7aLDzAmIIv7CIv0AwToBj2Dy3usnOBj/H5ziPBlARokR+hagH+q1YUXolZOwipC9AOjvBWNKGGBVfVcwt4h7tqSgKlGQC9g7M9qrE/BDdCDem5XiyxXXAAo9Sxban4YtJ3CG/M45gChRn8i7RzoAwECJKZRVc8qEL4UtpZUACAIo2qnpP2tBJfrLaA3ReW9mZKYEX4paBPoNaq4AWKumqsK4QejrCPNmuB9oEPq3ggvu7gMAmwDncH1fkuws6DtjApf5+9a+FpU4VMNhLDI8+ieAx23VRzPatbp4SlwzO+n0X3vmLqUwGYlFglOOH4bdpwOVQKjneUV6F5xjJ/sJAB6mesb+zatbPFV9O6zifALef2L46jtCABWsz8pdg/aAPpVhMAOr1J8n4JeVLt/DVV9CvQUPX81SQCSKojcyX4v1Fs8/x4IJ8faqyyCGHv/B91pa+wuxhBnCEqFwicCQOzHIBd9goKuhyDvtphs+cr+i9qRtusx6OldjrkVO8UHnGDfF7PQk50CwEQzaW5IouVFVf92AGCEfT9seE0L9n8dM0xzZLbXMYgFXg+6ow4AY8arg6fYpPD7AmII4VkKWpbKKcDcfLied8bzm9B97c18/Tkr2gCeIw14fp0BPoKx71s8XYwzTLZY0mtI7BRgDXBSCe/0zljMD+jWUfh5ohEYN9SE8C/bwtfxE5PN1Agja8CTjz90EbqtoM1WDl8KKk7QRMYIgoBxF/i/qsMrH0i+VMKXrKTJ5r8N3XuK3+QXpbd2fViLWwOetoSXwkQxrDJDte9XmvBGAPtWJcxgkPCce1zWwPC5prShlIQT/MORyQWp8jzQ7QqEB8Q0QSvoH2x+yQIf4+2QAZYm54eszV7Lb0kAMMI4/YJXrrcwER7dF6AjuN5BEKrqKHPVBOVLkXjaw+Ad4TzrvZk6YzUEhLLSnHHQttgBwKJk9zYqtH0ubGEd4fu44wfVHGJGPwaF8KCX1P0h612+9a5uqwQnZrAS7/krkThAQGBZqqIWNo5FrFRsO1UIvMnhI6QqfMwx/XeSNYL/c/W+n7z/vx/41LpuCt9L56qFH2hE+FbjgIdpEl2WHQ4oJxnqjGRXw0Jc8GxWai1h9lHQozQZY54C9p+NxgEtpcP8S8+91jH0HxhRCpgYfwDdjfTkYbx7vJnSum0yclocTCUdxou/4eIrdQKasCY8fhgvni/gzk8pwaXOsMglfCoFEcfXG2MWO6kRU44x57kJzi89eH4rz/R1arMEiOfB/0kcBZEkPozci24taY5yUGUCUXNUei5EfDSrXgrdr6Yeox/YzxPJa0sAFBCLCcJGh4+oKRPQ957Fe5xxgHxM+baR96cOgMM8TGGz6ADEs3Z6gjZ+FIKfa+adbQVAACBlVeyohuUVswYAgtDDfF7aGgh/IM75O+UfJlJvOQA5AOk1nbRM5RqQA5BOS+0Y5FEoicySKNlg6nFAbgI5ADkAs7L9K8AAT+NFTGBSaUgAAAAASUVORK5CYII=",n7="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAd9SURBVHja7FtpbFRVFJ6RylIXcEMoRAmpBIuE0hA1aKXiQl9RgyCigKYFCv6gpZBo1ETFJegPgzKNf1haohEFJVGinRIB2TQguxib2MGoiBiJWzQoSFu/A98lp5c37Zvhzbwp5SYnt3Pf3c73zj3bfQ23tLSEOnO5INTJy3kAOjsAWV47hsNh3xcvL5uYK/WS2vdifs/tVbeFPXf0EQAyHgE5bIqCKv0EImMBAPMVZN6tVIOeARB/nnMAgPF+qN4GjWJTjG8+REnI5d+HQQ8AhM/PGQDA/GxUr1HnCINPChhgskn1KUe1AHSlkQY8r+zwAICxJahmgE6AloMe04xbfQeiqgJVKCm5A/1/6HAAUNFFKdo7QXPByFaPYx3qCRn7Oyg/URACBcBifimZ/zsJ6amjfhAQJmOOer8B8N0RIvONZF60+sxkmGcZC3oB1AtUh7mH+r1fXyUAG7yRmj6Xdr3aJ1AnoXoH9DVonBd/Ie0SgE32pLj7yjw9xZWoHgYNUaYz42IBYX4ozVe136JKEOQ45ALsSEYdAWptUVgxbPS6VAYvSjGWYK1ophyBiPLoUl0qrTWDlQDl27fy3NAuDsz6NiRGdIWRlkZKTzRO/9vwbLPLmnF1TVr8AGxEXNsGw4zRzmgXffALfj+t+oq0lYKeUn6/XWJ0mRdj7Ak1dhGqI2h7SbU18s8haD8e1BG4i8xEFPO3oJoG+lhttguqDaBlyrvbRD9BmPsU9CufvSHPCJgpYlrn08yaspr9ZwVpBYzPXmPpgz0A5DPF/HpGgX8wLuiL50VyZEBVoNFoywFNB/0DGgnaYkDA8y9kToITstZ0ggRAFt+PDe4js+NQFYBqVZ9HFfOiF5aBjrmYueMgYapQgTBNdRHpGYE1BrH/N6h2BAYAFVmI4mtKmRw/83bQJxvVQj6bh03v9mDvd2lNjzkuVAA0WaBssPaSVgm4nrUOUPJAe8HEUf4eQz9eNHxtAk7PUirEHqC72fafzA2aoLpuYn1nEADcDGq2TJcoJf2WC87CZpsx96q2nZYFaVTApx0ASXH9aEWBJqVlSl/WyfjvZkyOajus16LlEX1xVRAA9NcAtCPSCWd7ExhzJCgALgH9pX4bMHqqtqN8YxcloWQH8M/vVPMVLl1/Bl0aBACXEQTzxv5Vzox9RvOTmH+ANYfRMb5epJwNACdckP/SsstRZR4TLc+56A/HRZ9kUw+kFgAmPHQ5BBqM9u6Wy3raLvNNiV0vpYvsdS2JGYpAG5WL7cRRqIMoeWZsD9A1qZCAWuOFsUgQlGWJ/HbLRZbyEB2YxcpStMV8MZMrMqbcdrt19Mf5uoIOqn6T6DSl5Ahoh2M/64lKD3zFAMexpOA+AvUh2q9tR/F9xJ/3WG/f4dy2K673ImVKqnTAOtBM9XsF6wexwbCLAxNR9nqtAiHqBgKZ36yYr7fmjLncFBXrvTB4uhX0fSoA+BY0DIvkK9RP6gEBwbLfJYZZ1b6WSc0tDHjscjvjisGaeabAclV8oMXfofk1EjAZJDppq1emEkqIYFGx+yuxwRncxGyKZT1zdC1qgwuY/BBAnERNF8b35rzDmW+YEyc3+CKePcu2XXS/8xbXrGpIhQ74RKIxRnkmJv+JojjF8uQkG/Qy316jZHI9KsHeoHmcdzjFv8olEjXn/3W23UTmt2HthlRJgGSARJRrlBRMRfUWN9xfS4GVvwup8HkH6RDD536k8TzDXWgFnsB8C11E31y7nc4Jqrd/P9o+SFlOkPk+ickLVdYnSimopwJramPTXsoeMr/OmifMVNtJhwjPS9j+CKo3GYmOkJeQypzgK6ADoVNX3UbcHZ71YiY1zwhseF8giuxYG3PLHeLj6FtgM89imI8ZpQjmL+YRaQbNsSXQdwCozGRx+4bGbKyCCsptrIjrQHqHdhEnKg99XnXRC7nMAjsuSnURRX+51+t3X9LiZL7COoda1ONqf/TLoVntpt68MH8wTurNANpqTqVfRPRH6VvodN0LmGvw09dULl+Azcez513GSoqs1FgT9JluPb8alUjDVBMDmDNvAdNM5lu9/XTdCxg3uE67vtxoCd+Y5PPfdRm7Wv39vsvzNWQ+RoBL4kjF3GRE3xcAsPBe5aHVUSTNsygVX6GVOTZFu6sHXLS9KNvxMofOO3INw7xcx53VHaFft8MRFQF6+ugRY/qo/GGv9r4NdPu4UkuFXdJ6O8wgpVpZg0YtDXFKdgJucYSZIUe9+RI/9u73JzLGIQkprR3h24pZfS9XiYwzJEAFO+JS91H5v1nou6a9vQT2lRg3XmklRczRECnZDgZ+Qz+J/jZoAJh1GsmxjpX4lMBqhdtNcEYB4AKEY7nA4ibvI5WpoErC7GGMAzRoqxJhPGMAiBO9OR7igbjHpsMCYJm3IfTdRYmZm6PdPA41iYSyHQ4AC4wbVCYnzy/GAzGDSRb9NdnooDYRJABjrXxg5wEA4t/NSqFN6IwS0D2UASUQAPiN0DbL3gdSsgIEvwi0MXTqX2Qqg9pEYGZQ5fO6imvs99y++wHnajn/v8OdHYD/BRgACUm/qct2//kAAAAASUVORK5CYII=",i7="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAV9SURBVHja7FtrbBVFFN5SpUFIxJBgmqgQuYA8tK2gISIvA4Rb4A8/CJCIAWklMbdW+0MSEuKDKIQfyAWCvN8BIYEQwr0iP0BSUcFoTVuI9pZHBaNi6yMFLVDLOeFMcjKZ3Tu7M71r2HuSL7t3Z3bnzDdnzpw5u7egq6vLibL0cCIueQLyBERcHnArqFw4OxftF5AOt7u7oU3bDvgjIEeynqxwcRSnAI7+IsBCwINRJCBOHUe8EkUC5rLzmVEj4AnAHImAcVEhADt/RHLA6A82hUFCrggoBIwELANcAZQq6jwFOA3YARgeehzQDbIHUKJRDx3iUMCLgM77xQKwI6MAGF01e9TLAGblqvO5IGAMmb4g4SBgBOC4ou5xKjvMOj+8u6eDTQJigCTgMmA5YCrgS8B2qV4HxQBt7Np1WhVuSXW3AhoBjwG2AS5RG7H/EwGoTArQBEgABpCnH0/lvyvuwSzMLvb7E8Cfinri3gWAgYQEtZWyQYQJAX0AK0iZuFTWQiSIc5XslAhQibh3ksKS4tT2h4DeuSbgOcC3gLddyndrPON7mgZo/rUa9U+6XF9CuozOFQHlgLOAwR6e/Adm0o+71MNpUEdz3E1EG38BrtKIq2QI4BxgRncTUAU45lJ2E3CGTYcmZqpucsGDAIwOn6HzBjouy6Lf0SztGREwAbBKMdoVNCUeBoylayhpab76JQA7/6jkI/YTMYMJVaw9ISk/JOgS8AjgM0BP1vHpFLFtAXwDuKMgRyiXcHkuzv/fXMpeZpbU6PLstYBhgDel8qRtAt5lnf8CUEZM/5flvnXMAlRLFvqKH12W1ho6X0P+wk2Q+I9o+T0vxSRWCIizEUTWpwHaNYn7mFlB0mUlqFdcT7L2tmq21UK6cquL2yAgIZHR7sNvdNA8FffGNQmPM6f7r4/2WqQ2EqYElLIHrlU4HB1JM4eY9EF4WnKkupKRSH/ahIA3gjgWhbzP5uazWcJqQfg7Bu1tAPxE5xUmBJSw0cgYKISbop/pfHKWIMuhLfNZg/bQMe7TiEM8CejLMjdpx1wu0tHLJIvpeMlCew3MqgIRUEpBhy0CmjXq2CSgXppavgnowzx5xoJC/en4q0cdsf0ts9DeL+z8ySAE9HbsipiL5zzqfMcIMH1bxBMuvYIQcMOH6eokTXSmgjD9QgtWcEtyir4J+IOOgyxbwlSPspfo2MmswUauoy0IAWKuFgEeMlQmQ5splPcA8xRb30oqc2iDZfrKvFiRWfJFQEbHifiQeRScoHnvBZyga5W05m8kIlpZ4GQiA+j4N+Ba0EAorRG86EordbiTPXMvdXw0yxLN9VLYh4jXbI0mkaBNAlBqs2R1NpNl2BCRlT5oQoBIRE636AQ/cAms8NprFtsRYfVhEwIaNLI6QUROZfEdnM2YA0m9bJoPSDKlTXaDmLoe49JhTgguu4ccs++GEmwLb5wQEXmAmOMz48oEM8lDaFeYZKMjkptpNnKYKp9i4AtiLDOUtkEAH/0kLWN+5SvyIzdpdL6m8JQnTvHZKVr/XzCIQJfSsdJvtKST1UF2FwVU7HNyTBiiPg84xWL0FDPbCY46T6gj+Nz5zr2PLE7aJIBbwfqAViBImMhIwGwuf7dYbtB5/NgDs9CYaK0JEi/rhLPljAST7FA1M9MY8zUmeYdXnXvpthqv2N+EADEVqqmxaQbK7pJ2aKbLIFrVasBbuqYflACHzAw/a3vdQOEb5O0dCxmnfoCVZJ2+E7dBX49/6ph/3MgJaLIQ9Z0K6jjCkjqXnWeQTZaVpEGu5SI7vx6WEmESwM2+PooEZNjod4SlRNh/mEDvXxSmAmETgF98/BNlAjAl1hmmAgX5f45GXPIE5AnIExBtuSvAAE3qNdCP7ekxAAAAAElFTkSuQmCC",fn={BLAIDDYD:"BLAIDDYD",CETHLEANN:"CETHLEANN",CICHOL:"CICHOL",CHARON:"CHARON",DAPHNEL:"DAPHNEL",DOMINIC:"DOMINIC",FLAMES:"FLAMES",FRALDARIUS:"FRALDARIUS",GAUTIER:"GAUTIER",GLOUCESTER:"GLOUCESTER",GONERIL:"GONERIL",INDECH:"INDECH",LAMINE:"LAMINE",MACUIL:"MACUIL",RIEGAN:"RIEGAN",SEIROS:"SEIROS",THE_BEAST:"THE_BEAST"},Qg={[fn.BLAIDDYD]:"Blaiddyd",[fn.CETHLEANN]:"Cethleann",[fn.CICHOL]:"Cichol",[fn.CHARON]:"Charon",[fn.DAPHNEL]:"Daphnel",[fn.DOMINIC]:"Dominic",[fn.FLAMES]:"Mystery Crest A",[fn.FRALDARIUS]:"Fraldarius",[fn.GAUTIER]:"Gautier",[fn.GLOUCESTER]:"Gloucester",[fn.GONERIL]:"Goneril",[fn.INDECH]:"Indech",[fn.LAMINE]:"Lamine",[fn.MACUIL]:"Macuil",[fn.RIEGAN]:"Riegan",[fn.SEIROS]:"Seiros",[fn.THE_BEAST]:"Mystery Crest B"};var mo=(n=>(n.MAJOR="MAJOR",n.MINOR="MINOR",n))(mo||{});const qi={omega:{MAJOR:17,MINOR:19},gamma:{MAJOR:13,MINOR:17},beta:{MAJOR:11,MINOR:15},alpha:{MAJOR:7,MINOR:13}};var pa=(n=>(n[n.MAGIC_ATTACK=0]="MAGIC_ATTACK",n[n.COMBAT_ART=1]="COMBAT_ART",n[n.ATTACK=2]="ATTACK",n[n.HEAL=3]="HEAL",n))(pa||{});const Ds={[fn.BLAIDDYD]:{label:"Blaiddyd",description:"When using a combat art, conserves superiority die and adds another instance of combat art damage (if the combat art adds damage)",image:jL,activationDC:qi.omega,triggersOn:[1],conservesResource:!0,combatArtDamageMultiplier:2},[fn.CETHLEANN]:{label:"Cethleann",description:"When using recovery magic, heal the target for +2 HP .",image:HL,activationDC:qi.beta,triggersOn:[3],damageBonus:[2]},[fn.CICHOL]:{label:"Cichol",description:"When using a combat art, prevent counterattack",image:qL,activationDC:qi.beta,triggersOn:[1]},[fn.CHARON]:{label:"Charon",description:"When using a combat art, doubles any extra damage done by the combat art ",image:zL,activationDC:qi.alpha,triggersOn:[1],combatArtDamageMultiplier:2},[fn.DAPHNEL]:{label:"Daphnel",description:"When using a combat art, adds +2 damage if the combat art does damage ",image:GL,activationDC:qi.alpha,triggersOn:[1],damageBonus:[2]},[fn.DOMINIC]:{label:"Dominic",description:"When attacking with a spell, conserves spell slot ",image:KL,activationDC:qi.omega,triggersOn:[0],conservesResource:!0},[fn.FLAMES]:{label:"Mystery Crest A",description:"Restores HP equal to 30% of damage dealt when using weapons, combat arts or attack magic. Also has a roughly 1 in 4 chance to raise Might by 5 and prevent counterattacks.",image:XL,activationDC:qi.omega,triggersOn:[2,1,0],hpRecoveryPercent:.3},[fn.FRALDARIUS]:{label:"Fraldarius",description:"When attacking with a weapon, adds +2 damage to the attack ",image:QL,activationDC:qi.gamma,triggersOn:[2],damageBonus:[2]},[fn.GAUTIER]:{label:"Gautier",description:"When using a combat art, adds +2 damage if the combat art deals damage ",image:YL,activationDC:qi.alpha,triggersOn:[1],damageBonus:[2]},[fn.GLOUCESTER]:{label:"Gloucester",description:"When attacking with a spell, adds +2 damage to the attack ",image:JL,activationDC:qi.omega,triggersOn:[0],damageBonus:[2]},[fn.GONERIL]:{label:"Goneril",description:"When using a combat art, prevents counterattack",image:ZL,activationDC:qi.beta,triggersOn:[1]},[fn.INDECH]:{label:"Indech",description:"When attacking with a weapon, you may attack the target again . (this follow up attack can also trigger the effect)",image:xL,activationDC:qi.omega,triggersOn:[2]},[fn.LAMINE]:{label:"Lamine",description:"When using recovery magic, conserve the spell slot ",image:$L,activationDC:qi.omega,triggersOn:[3],conservesResource:!0},[fn.MACUIL]:{label:"Macuil",description:"When attacking with a spell, add +2 damage to the attack .",image:t7,activationDC:qi.omega,triggersOn:[0],damageBonus:[2]},[fn.RIEGAN]:{label:"Riegan",description:"When using a combat art, heal for 30% of the damage dealt if the combat art deals damage ",image:e7,activationDC:qi.beta,triggersOn:[1],hpRecoveryPercent:.3},[fn.SEIROS]:{label:"Seiros",description:"When using a combat art, heal for 30% of the damage dealt if the combat art deals damage ",image:n7,activationDC:qi.alpha,triggersOn:[1],hpRecoveryPercent:.3},[fn.THE_BEAST]:{label:"Mystery Crest B",description:"When attacking with a weapon, add +2 damage",activationDC:qi.gamma,image:i7,triggersOn:[1],damageBonus:[2]}},je={E:"E",E_PLUS:"E_PLUS",D:"D",D_PLUS:"D_PLUS",C:"C",C_PLUS:"C_PLUS",B:"B",B_PLUS:"B_PLUS",A:"A",A_PLUS:"A_PLUS",S:"S"},Yg={[je.E]:40,[je.E_PLUS]:100,[je.D]:180,[je.D_PLUS]:300,[je.C]:460,[je.C_PLUS]:580,[je.B]:860,[je.B_PLUS]:1220,[je.A]:1660,[je.A_PLUS]:2420,[je.S]:3500},oo=[je.E,je.E_PLUS,je.D,je.D_PLUS,je.C,je.C_PLUS,je.B,je.B_PLUS,je.A,je.A_PLUS,je.S],yh={[je.E]:"E",[je.E_PLUS]:"E+",[je.D]:"D",[je.D_PLUS]:"D+",[je.C]:"C",[je.C_PLUS]:"C+",[je.B]:"B",[je.B_PLUS]:"B+",[je.A]:"A",[je.A_PLUS]:"A+",[je.S]:"S"},Ko={[fe.SWORD]:{[je.E]:{unlocks:{}},[je.E_PLUS]:{unlocks:{combatSkills:{[Ue.SWORD_PROWESS_1]:1}}},[je.D]:{unlocks:{combatArts:{[vt.WRATH_STRIKE]:1}}},[je.D_PLUS]:{unlocks:{combatSkills:{[Ue.SWORD_PROWESS_2]:1}},removes:{combatSkills:{[Ue.SWORD_PROWESS_1]:1}}},[je.C]:{unlocks:{combatArts:{[vt.GROUNDER]:1}}},[je.C_PLUS]:{unlocks:{combatSkills:{[Ue.SWORD_PROWESS_3]:1},pickOne:[{type:Nn.CombatArt,options:[vt.SUNDER,vt.HAZE_SLICE]}]},removes:{combatSkills:{[Ue.SWORD_PROWESS_2]:1}}},[je.B]:{unlocks:{}},[je.B_PLUS]:{unlocks:{combatSkills:{[Ue.SWORD_PROWESS_4]:1}},removes:{combatSkills:{[Ue.SWORD_PROWESS_3]:1}}},[je.A]:{unlocks:{}},[je.A_PLUS]:{unlocks:{combatSkills:{[Ue.SWORD_PROWESS_5]:1}},removes:{combatSkills:{[Ue.SWORD_PROWESS_4]:1}}},[je.S]:{unlocks:{}}},[fe.LANCE]:{[je.E]:{unlocks:{}},[je.E_PLUS]:{unlocks:{combatSkills:{[Ue.LANCE_PROWESS_1]:1}}},[je.D]:{unlocks:{combatArts:{[vt.TEMPEST_LANCE]:1}}},[je.D_PLUS]:{unlocks:{combatSkills:{[Ue.LANCE_PROWESS_2]:1}},removes:{combatSkills:{[Ue.LANCE_PROWESS_1]:1}}},[je.C]:{unlocks:{combatArts:{[vt.KNIGHT_KNEELER]:1}}},[je.C_PLUS]:{unlocks:{combatSkills:{[Ue.LANCE_PROWESS_3]:1},pickOne:[{type:Nn.CombatArt,options:[vt.SHATTER_SLASH,vt.HIT_AND_RUN]}]},removes:{combatSkills:{[Ue.LANCE_PROWESS_2]:1}}},[je.B]:{unlocks:{}},[je.B_PLUS]:{unlocks:{combatSkills:{[Ue.LANCE_PROWESS_4]:1}},removes:{combatSkills:{[Ue.LANCE_PROWESS_3]:1}}},[je.A]:{unlocks:{}},[je.A_PLUS]:{unlocks:{combatSkills:{[Ue.LANCE_PROWESS_5]:1}},removes:{combatSkills:{[Ue.LANCE_PROWESS_4]:1}}},[je.S]:{unlocks:{}}},[fe.AXE]:{[je.E]:{unlocks:{}},[je.E_PLUS]:{unlocks:{combatSkills:{[Ue.AXE_PROWESS_1]:1}}},[je.D]:{unlocks:{combatArts:{[vt.SMASH]:1}}},[je.D_PLUS]:{unlocks:{combatSkills:{[Ue.AXE_PROWESS_2]:1}},removes:{combatSkills:{[Ue.AXE_PROWESS_1]:1}}},[je.C]:{unlocks:{combatArts:{[vt.HELM_SPLITTER]:1}}},[je.C_PLUS]:{unlocks:{combatSkills:{[Ue.AXE_PROWESS_3]:1},pickOne:[{type:Nn.CombatArt,options:[vt.FOCUSED_STRIKE,vt.SPIKE,vt.WILD_ABANDON,vt.DIAMOND_AXE]}]},removes:{combatSkills:{[Ue.AXE_PROWESS_2]:1}}},[je.B]:{unlocks:{}},[je.B_PLUS]:{unlocks:{combatSkills:{[Ue.AXE_PROWESS_4]:1}},removes:{combatSkills:{[Ue.AXE_PROWESS_3]:1}}},[je.A]:{unlocks:{}},[je.A_PLUS]:{unlocks:{combatSkills:{[Ue.AXE_PROWESS_5]:1}},removes:{combatSkills:{[Ue.AXE_PROWESS_4]:1}}},[je.S]:{unlocks:{}}},[fe.BOW]:{[je.E]:{unlocks:{}},[je.E_PLUS]:{unlocks:{combatSkills:{[Ue.BOW_PROWESS_1]:1}}},[je.D]:{unlocks:{combatArts:{[vt.CURVED_SHOT]:1}}},[je.D_PLUS]:{unlocks:{combatSkills:{[Ue.BOW_PROWESS_2]:1}},removes:{combatSkills:{[Ue.BOW_PROWESS_1]:1}}},[je.C]:{unlocks:{combatSkills:{[Ue.CLOSE_COUNTER]:1}}},[je.C_PLUS]:{unlocks:{combatSkills:{[Ue.BOW_PROWESS_3]:1},pickOne:[{type:Nn.CombatArt,options:[vt.DEADEYE,vt.HEAVY_DRAW,vt.WANING_SHOT,vt.BREAK_SHOT]}]},removes:{combatSkills:{[Ue.BOW_PROWESS_2]:1}}},[je.B]:{unlocks:{}},[je.B_PLUS]:{unlocks:{combatSkills:{[Ue.BOW_PROWESS_4]:1}},removes:{combatSkills:{[Ue.BOW_PROWESS_3]:1}}},[je.A]:{unlocks:{}},[je.A_PLUS]:{unlocks:{combatSkills:{[Ue.BOW_PROWESS_5]:1}},removes:{combatSkills:{[Ue.BOW_PROWESS_4]:1}}},[je.S]:{unlocks:{}}},[fe.FISTS]:{[je.E]:{unlocks:{}},[je.E_PLUS]:{unlocks:{combatSkills:{[Ue.FISTS_PROWESS_1]:1}}},[je.D]:{unlocks:{combatArts:{[vt.FADING_BLOW]:1}}},[je.D_PLUS]:{unlocks:{combatSkills:{[Ue.FISTS_PROWESS_2]:1}},removes:{combatSkills:{[Ue.FISTS_PROWESS_1]:1}}},[je.C]:{unlocks:{combatArts:{[vt.RUSHING_BLOW]:1}}},[je.C_PLUS]:{unlocks:{combatSkills:{[Ue.FISTS_PROWESS_3]:1},pickOne:[{type:Nn.CombatArt,options:[vt.DRAINING_BLOW,vt.NIMBLE_COMBO,vt.BOMBARD,vt.ONE_TWO_PUNCH]}]},removes:{combatSkills:{[Ue.FISTS_PROWESS_2]:1}}},[je.B]:{unlocks:{}},[je.B_PLUS]:{unlocks:{combatSkills:{[Ue.FISTS_PROWESS_4]:1}},removes:{combatSkills:{[Ue.FISTS_PROWESS_3]:1}}},[je.A]:{unlocks:{}},[je.A_PLUS]:{unlocks:{combatSkills:{[Ue.FISTS_PROWESS_5]:1}},removes:{combatSkills:{[Ue.FISTS_PROWESS_4]:1}}},[je.S]:{unlocks:{}}},[fe.HEAVY_ARMOR]:{[je.E]:{unlocks:{}},[je.E_PLUS]:{unlocks:{}},[je.D]:{unlocks:{}},[je.D_PLUS]:{unlocks:{},removes:{}},[je.C]:{unlocks:{combatSkills:{[Ue.WEIGHT_MINUS_3]:1}}},[je.C_PLUS]:{unlocks:{},removes:{}},[je.B]:{unlocks:{}},[je.B_PLUS]:{unlocks:{},removes:{}},[je.A]:{unlocks:{}},[je.A_PLUS]:{unlocks:{},removes:{}},[je.S]:{unlocks:{}}},[fe.RIDING]:{[je.E]:{unlocks:{}},[je.E_PLUS]:{unlocks:{}},[je.D]:{unlocks:{}},[je.D_PLUS]:{unlocks:{combatSkills:{}},removes:{combatSkills:{}}},[je.C]:{unlocks:{combatSkills:{[Ue.AGILE_RIDER]:1}}},[je.C_PLUS]:{unlocks:{combatSkills:{}},removes:{combatSkills:{}}},[je.B]:{unlocks:{}},[je.B_PLUS]:{unlocks:{combatSkills:{}},removes:{combatSkills:{}}},[je.A]:{unlocks:{}},[je.A_PLUS]:{unlocks:{combatSkills:{}},removes:{combatSkills:{}}},[je.S]:{unlocks:{}}},[fe.REASON]:{[je.E]:{unlocks:{}},[je.E_PLUS]:{unlocks:{combatSkills:{[Ue.REASON_PROWESS_1]:1}}},[je.D]:{unlocks:{pickOne:[{type:Nn.Weapon,options:[Fe.FIRE,Fe.WIND,Fe.THUNDER,Fe.BLIZZARD]}]}},[je.D_PLUS]:{unlocks:{combatSkills:{[Ue.REASON_PROWESS_2]:1}},removes:{combatSkills:{[Ue.REASON_PROWESS_1]:1}}},[je.C]:{unlocks:{pickOne:[{type:Nn.Weapon,options:[Fe.BOLGANONE,Fe.CUTTING_GALE,Fe.THORON,Fe.SAGITTAE,Fe.HAILSTORM]}]}},[je.C_PLUS]:{unlocks:{combatSkills:{[Ue.REASON_PROWESS_3]:1}},removes:{combatSkills:{[Ue.REASON_PROWESS_2]:1}}},[je.B]:{unlocks:{}},[je.B_PLUS]:{unlocks:{combatSkills:{[Ue.REASON_PROWESS_4]:1}},removes:{combatSkills:{[Ue.REASON_PROWESS_3]:1}}},[je.A]:{unlocks:{}},[je.A_PLUS]:{unlocks:{combatSkills:{[Ue.REASON_PROWESS_5]:1}},removes:{combatSkills:{[Ue.REASON_PROWESS_4]:1}}},[je.S]:{unlocks:{}}},[fe.FAITH]:{[je.E]:{unlocks:{}},[je.E_PLUS]:{unlocks:{combatSkills:{[Ue.FAITH_PROWESS_1]:1}}},[je.D]:{unlocks:{weapons:{[Fe.HEAL]:1}}},[je.D_PLUS]:{unlocks:{combatSkills:{[Ue.FAITH_PROWESS_2]:1},weapons:{[Fe.NOSFERATU]:1}},removes:{combatSkills:{[Ue.FAITH_PROWESS_1]:1}}},[je.C]:{unlocks:{pickOne:[{type:Nn.Weapon,options:[Fe.PHYSIC,Fe.RECOVER,Fe.RESTORE,Fe.WARD]}]}},[je.C_PLUS]:{unlocks:{combatSkills:{[Ue.FAITH_PROWESS_3]:1}},removes:{combatSkills:{[Ue.FAITH_PROWESS_2]:1}}},[je.B]:{unlocks:{}},[je.B_PLUS]:{unlocks:{combatSkills:{[Ue.FAITH_PROWESS_4]:1}},removes:{combatSkills:{[Ue.FAITH_PROWESS_3]:1}}},[je.A]:{unlocks:{}},[je.A_PLUS]:{unlocks:{combatSkills:{[Ue.FAITH_PROWESS_5]:1}},removes:{combatSkills:{[Ue.FAITH_PROWESS_4]:1}}},[je.S]:{unlocks:{}}},[fe.LEADERSHIP]:{[je.E]:{unlocks:{}},[je.E_PLUS]:{unlocks:{combatSkills:{[Ue.LEADERSHIP_PROWESS_1]:1}}},[je.D]:{unlocks:{}},[je.D_PLUS]:{unlocks:{combatSkills:{[Ue.LEADERSHIP_PROWESS_2]:1}},removes:{combatSkills:{[Ue.LEADERSHIP_PROWESS_1]:1}}},[je.C]:{unlocks:{}},[je.C_PLUS]:{unlocks:{combatSkills:{[Ue.LEADERSHIP_PROWESS_3]:1}},removes:{combatSkills:{[Ue.LEADERSHIP_PROWESS_2]:1}}},[je.B]:{unlocks:{}},[je.B_PLUS]:{unlocks:{combatSkills:{[Ue.LEADERSHIP_PROWESS_4]:1}},removes:{combatSkills:{[Ue.LEADERSHIP_PROWESS_3]:1}}},[je.A]:{unlocks:{}},[je.A_PLUS]:{unlocks:{combatSkills:{[Ue.LEADERSHIP_PROWESS_5]:1}},removes:{combatSkills:{[Ue.LEADERSHIP_PROWESS_4]:1}}},[je.S]:{unlocks:{}}}},po=3,go=5,Vl=3,z4=2,s7=2,r7=1,o7=1,l7=1,a7=5,c7=7,kv={[Ye.STR]:10,[Ye.DEX]:10,[Ye.CON]:10,[Ye.INT]:10,[Ye.WIS]:10,[Ye.CHA]:10},G4={},K4={},Jg=5,Zg=4,xg=8,$g=0,e1=0,hs={MODAL:"simple-modal",DB:"db"},jc={assetPath:"/assets/dice-box/",id:"dice-canvas",theme:"default",themeColor:"#FF0000",friction:.9,scale:10,gravity:5,mass:8,linearDamping:.6,angularDamping:.6,spinForce:1,throwForce:15,shadowTransparency:.6,startingHeight:5};function u7(n){let e,t;return{c(){e=k("div"),t=q("Attack"),this.h()},l(i){e=T(i,"DIV",{class:!0});var s=I(e);t=z(s,"Attack"),s.forEach(b),this.h()},h(){S(e,"class","attack svelte-kcenq0")},m(i,s){H(i,e,s),g(e,t)},d(i){i&&b(e)}}}function f7(n){let e,t;return{c(){e=k("div"),t=q("Crit"),this.h()},l(i){e=T(i,"DIV",{class:!0});var s=I(e);t=z(s,"Crit"),s.forEach(b),this.h()},h(){S(e,"class","Crit svelte-kcenq0")},m(i,s){H(i,e,s),g(e,t)},d(i){i&&b(e)}}}function h7(n){let e,t,i=(n[9]||"")+"",s;return{c(){e=k("div"),t=q("Crest of "),s=q(i),this.h()},l(r){e=T(r,"DIV",{class:!0});var o=I(e);t=z(o,"Crest of "),s=z(o,i),o.forEach(b),this.h()},h(){S(e,"class","Crest svelte-kcenq0")},m(r,o){H(r,e,o),g(e,t),g(e,s)},p:Xe,d(r){r&&b(e)}}}function d7(n){let e,t=n[10]?"HP Restored":"Damage",i;return{c(){e=k("div"),i=q(t),this.h()},l(s){e=T(s,"DIV",{class:!0});var r=I(e);i=z(r,t),r.forEach(b),this.h()},h(){S(e,"class","Damage svelte-kcenq0")},m(s,r){H(s,e,r),g(e,i)},p:Xe,d(s){s&&b(e)}}}function m7(n){let e,t;return{c(){e=k("div"),t=q(n[5]),this.h()},l(i){e=T(i,"DIV",{class:!0});var s=I(e);t=z(s,n[5]),s.forEach(b),this.h()},h(){S(e,"class","attack svelte-kcenq0")},m(i,s){H(i,e,s),g(e,t)},p:Xe,d(i){i&&b(e)}}}function ry(n){let e,t,i,s,r,o,l,a=n[6]&&p7(),c=n[7]&&g7(),u=n[8]!==void 0&&v7();return{c(){a&&a.c(),e=U(),c&&c.c(),t=U(),u&&u.c(),i=U(),s=k("div"),r=q("Click to reveal"),this.h()},l(f){a&&a.l(f),e=W(f),c&&c.l(f),t=W(f),u&&u.l(f),i=W(f),s=T(f,"DIV",{class:!0});var h=I(s);r=z(h,"Click to reveal"),h.forEach(b),this.h()},h(){S(s,"class","spoiler svelte-kcenq0"),lt(s,"left",n[3])},m(f,h){a&&a.m(f,h),H(f,e,h),c&&c.m(f,h),H(f,t,h),u&&u.m(f,h),H(f,i,h),H(f,s,h),g(s,r),o||(l=_e(s,"click",n[15]),o=!0)},p(f,h){h&8&&lt(s,"left",f[3])},d(f){a&&a.d(f),f&&b(e),c&&c.d(f),f&&b(t),u&&u.d(f),f&&b(i),f&&b(s),o=!1,l()}}}function p7(n){let e;return{c(){e=k("div"),this.h()},l(t){e=T(t,"DIV",{class:!0}),I(e).forEach(b),this.h()},h(){S(e,"class","svelte-kcenq0")},m(t,i){H(t,e,i)},d(t){t&&b(e)}}}function g7(n){let e;return{c(){e=k("div"),this.h()},l(t){e=T(t,"DIV",{class:!0}),I(e).forEach(b),this.h()},h(){S(e,"class","svelte-kcenq0")},m(t,i){H(t,e,i)},d(t){t&&b(e)}}}function v7(n){let e;return{c(){e=k("div"),this.h()},l(t){e=T(t,"DIV",{class:!0}),I(e).forEach(b),this.h()},h(){S(e,"class","svelte-kcenq0")},m(t,i){H(t,e,i)},d(t){t&&b(e)}}}function oy(n){let e,t,i,s=n[6]&&b7(n),r=n[7]&&_7(n),o=n[8]!==void 0&&y7(n);return{c(){s&&s.c(),e=U(),r&&r.c(),t=U(),o&&o.c(),i=et()},l(l){s&&s.l(l),e=W(l),r&&r.l(l),t=W(l),o&&o.l(l),i=et()},m(l,a){s&&s.m(l,a),H(l,e,a),r&&r.m(l,a),H(l,t,a),o&&o.m(l,a),H(l,i,a)},p(l,a){l[6]&&s.p(l,a),l[7]&&r.p(l,a),l[8]!==void 0&&o.p(l,a)},d(l){s&&s.d(l),l&&b(e),r&&r.d(l),l&&b(t),o&&o.d(l),l&&b(i)}}}function b7(n){let e,t;return{c(){e=k("div"),t=q(n[6]),this.h()},l(i){e=T(i,"DIV",{class:!0});var s=I(e);t=z(s,n[6]),s.forEach(b),this.h()},h(){S(e,"class","Crit svelte-kcenq0")},m(i,s){H(i,e,s),g(e,t)},p:Xe,d(i){i&&b(e)}}}function _7(n){let e,t;return{c(){e=k("div"),t=q(n[7]),this.h()},l(i){e=T(i,"DIV",{class:!0});var s=I(e);t=z(s,n[7]),s.forEach(b),this.h()},h(){S(e,"class","Crest svelte-kcenq0")},m(i,s){H(i,e,s),g(e,t)},p:Xe,d(i){i&&b(e)}}}function y7(n){let e,t;return{c(){e=k("div"),t=q(n[8]),this.h()},l(i){e=T(i,"DIV",{class:!0});var s=I(e);t=z(s,n[8]),s.forEach(b),this.h()},h(){S(e,"class","Damage svelte-kcenq0")},m(i,s){H(i,e,s),g(e,t)},p:Xe,d(i){i&&b(e)}}}function S7(n){let e,t,i,s,r,o,l,a,c,u,f,h,d,m,p=n[5]!==void 0&&u7(),_=n[6]&&f7(),v=n[7]&&h7(n),y=n[8]!==void 0&&d7(n),w=n[5]!==void 0&&m7(n),A=n[2]&&ry(n),E=!n[2]&&oy(n);return{c(){e=k("div"),t=k("b"),i=q(n[4]),s=q(" - "),r=q(n[11]),o=U(),l=k("div"),p&&p.c(),a=U(),_&&_.c(),c=U(),v&&v.c(),u=U(),y&&y.c(),f=U(),h=k("div"),w&&w.c(),d=U(),A&&A.c(),m=U(),E&&E.c(),this.h()},l(C){e=T(C,"DIV",{class:!0});var R=I(e);t=T(R,"B",{class:!0});var D=I(t);i=z(D,n[4]),s=z(D," - "),r=z(D,n[11]),D.forEach(b),o=W(R),l=T(R,"DIV",{class:!0});var N=I(l);p&&p.l(N),a=W(N),_&&_.l(N),c=W(N),v&&v.l(N),u=W(N),y&&y.l(N),N.forEach(b),f=W(R),h=T(R,"DIV",{class:!0});var L=I(h);w&&w.l(L),d=W(L),A&&A.l(L),m=W(L),E&&E.l(L),L.forEach(b),R.forEach(b),this.h()},h(){S(t,"class","player svelte-kcenq0"),S(l,"class","rolls svelte-kcenq0"),S(h,"class","result svelte-kcenq0"),S(e,"class","container svelte-kcenq0")},m(C,R){H(C,e,R),g(e,t),g(t,i),g(t,s),g(t,r),g(e,o),g(e,l),p&&p.m(l,null),g(l,a),_&&_.m(l,null),g(l,c),v&&v.m(l,null),g(l,u),y&&y.m(l,null),g(e,f),g(e,h),w&&w.m(h,null),g(h,d),A&&A.m(h,null),g(h,m),E&&E.m(h,null)},p(C,[R]){C[7]&&v.p(C,R),C[8]!==void 0&&y.p(C,R),C[5]!==void 0&&w.p(C,R),C[2]?A?A.p(C,R):(A=ry(C),A.c(),A.m(h,m)):A&&(A.d(1),A=null),C[2]?E&&(E.d(1),E=null):E?E.p(C,R):(E=oy(C),E.c(),E.m(h,null))},i:Xe,o:Xe,d(C){C&&b(e),p&&p.d(),_&&_.d(),v&&v.d(),y&&y.d(),w&&w.d(),A&&A.d(),E&&E.d()}}}function E7(n,e,t){let i,s,{entry:r}=e,{spoilersOn:o}=e,{setAlreadyRevealed:l}=e,{index:a}=e;const{playerName:c="No Name",attackRoll:u,critRoll:f,crestRoll:h,damageRoll:d,crestName:m,isHealWeapon:p,attackName:_}=r;let v;Mi(()=>{t(2,v=o)});const y=()=>{t(2,v=!1),l(a)};return n.$$set=w=>{"entry"in w&&t(12,r=w.entry),"spoilersOn"in w&&t(13,o=w.spoilersOn),"setAlreadyRevealed"in w&&t(0,l=w.setAlreadyRevealed),"index"in w&&t(1,a=w.index)},n.$$.update=()=>{n.$$.dirty&24576&&t(3,s=o?i():0)},t(14,i=()=>{const w=u===void 0,A=(f?1:0)+(h?1:0)+(d!==void 0?1:0);return w?"0":A===1?"50%":A===2?"33%":"25%"}),[l,a,v,s,c,u,f,h,d,m,p,_,r,o,i,y]}class w7 extends st{constructor(e){super(),rt(this,e,E7,S7,kt,{entry:12,spoilersOn:13,setAlreadyRevealed:0,index:1})}}const A7=n=>({}),ly=n=>({}),C7=n=>({}),ay=n=>({});function cy(n){let e,t,i,s,r,o;const l=n[16].t,a=ls(l,n,n[15],ay),c=a||k7();return{c(){e=k("div"),t=k("div"),i=k("div"),c&&c.c(),this.h()},l(u){e=T(u,"DIV",{class:!0});var f=I(e);t=T(f,"DIV",{class:!0,style:!0});var h=I(t);i=T(h,"DIV",{class:!0});var d=I(i);c&&c.l(d),d.forEach(b),h.forEach(b),f.forEach(b),this.h()},h(){S(i,"class",s=Ze(`${n[1]} ${n[5]} TOOLTIP_tooltip_container ${n[0]}`)+" svelte-16reexv"),S(t,"class",r=Ze(`TOOLTIP_tooltip-positioner ${n[0]}`)+" svelte-16reexv"),S(t,"style",n[3]),S(e,"class","hidden svelte-16reexv")},m(u,f){H(u,e,f),g(e,t),g(t,i),c&&c.m(i,null),n[17](e),o=!0},p(u,f){a&&a.p&&(!o||f&32768)&&as(a,l,u,u[15],o?us(l,u[15],f,C7):cs(u[15]),ay),(!o||f&35&&s!==(s=Ze(`${u[1]} ${u[5]} TOOLTIP_tooltip_container ${u[0]}`)+" svelte-16reexv"))&&S(i,"class",s),(!o||f&1&&r!==(r=Ze(`TOOLTIP_tooltip-positioner ${u[0]}`)+" svelte-16reexv"))&&S(t,"class",r),(!o||f&8)&&S(t,"style",u[3])},i(u){o||(B(c,u),o=!0)},o(u){G(c,u),o=!1},d(u){u&&b(e),c&&c.d(u),n[17](null)}}}function k7(n){let e;return{c(){e=q("tooltip")},l(t){e=z(t,"tooltip")},m(t,i){H(t,e,i)},d(t){t&&b(e)}}}function uy(n){let e,t,i,s,r,o;const l=n[16].t,a=ls(l,n,n[15],ly),c=a||T7();return{c(){e=k("div"),t=k("div"),i=k("div"),c&&c.c(),this.h()},l(u){e=T(u,"DIV",{class:!0});var f=I(e);t=T(f,"DIV",{class:!0,style:!0});var h=I(t);i=T(h,"DIV",{class:!0});var d=I(i);c&&c.l(d),d.forEach(b),h.forEach(b),f.forEach(b),this.h()},h(){S(i,"class",s=Ze(`${n[1]} ${n[5]} TOOLTIP_tooltip_container ${n[0]}`)+" svelte-16reexv"),S(t,"class",r=Ze(`TOOLTIP_tooltip-positioner ${n[0]}`)+" svelte-16reexv"),S(t,"style",n[3]),S(e,"class","hidden svelte-16reexv")},m(u,f){H(u,e,f),g(e,t),g(t,i),c&&c.m(i,null),n[18](e),o=!0},p(u,f){a&&a.p&&(!o||f&32768)&&as(a,l,u,u[15],o?us(l,u[15],f,A7):cs(u[15]),ly),(!o||f&35&&s!==(s=Ze(`${u[1]} ${u[5]} TOOLTIP_tooltip_container ${u[0]}`)+" svelte-16reexv"))&&S(i,"class",s),(!o||f&1&&r!==(r=Ze(`TOOLTIP_tooltip-positioner ${u[0]}`)+" svelte-16reexv"))&&S(t,"class",r),(!o||f&8)&&S(t,"style",u[3])},i(u){o||(B(c,u),o=!0)},o(u){G(c,u),o=!1},d(u){u&&b(e),c&&c.d(u),n[18](null)}}}function T7(n){let e;return{c(){e=q("tooltip")},l(t){e=z(t,"tooltip")},m(t,i){H(t,e,i)},d(t){t&&b(e)}}}function I7(n){let e,t,i,s,r=n[2]&&cy(n);const o=n[16].default,l=ls(o,n,n[15],null);let a=!n[2]&&uy(n);return{c(){r&&r.c(),e=U(),l&&l.c(),t=U(),a&&a.c(),i=et()},l(c){r&&r.l(c),e=W(c),l&&l.l(c),t=W(c),a&&a.l(c),i=et()},m(c,u){r&&r.m(c,u),H(c,e,u),l&&l.m(c,u),H(c,t,u),a&&a.m(c,u),H(c,i,u),s=!0},p(c,[u]){c[2]?r?(r.p(c,u),u&4&&B(r,1)):(r=cy(c),r.c(),B(r,1),r.m(e.parentNode,e)):r&&(He(),G(r,1,1,()=>{r=null}),qe()),l&&l.p&&(!s||u&32768)&&as(l,o,c,c[15],s?us(o,c[15],u,null):cs(c[15]),null),c[2]?a&&(He(),G(a,1,1,()=>{a=null}),qe()):a?(a.p(c,u),u&4&&B(a,1)):(a=uy(c),a.c(),B(a,1),a.m(i.parentNode,i))},i(c){s||(B(r),B(l,c),B(a),s=!0)},o(c){G(r),G(l,c),G(a),s=!1},d(c){r&&r.d(c),c&&b(e),l&&l.d(c),c&&b(t),a&&a.d(c),c&&b(i)}}}function O7(n,e,t){let i,s,r,{$$slots:o={},$$scope:l}=e,{timeout:a=500}=e,{tooltipStyle:c=ns.RIGHT_START}=e,{tooltipClass:u=""}=e,{showing:f=!1}=e,{disabled:h=!1}=e,{hiddenFirst:d=!1}=e,{tooltipPositionerStyle:m=""}=e;const p={current:h};let _=!1;const v={current:null};let y;const w={current:null,mouseEnterListener:null,mouseLeaveListener:null};br(()=>{if(w.current){const C=w.current;C.removeEventListener("mouseover",w.mouseEnterListener),C.removeEventListener("mouseleave",w.mouseLeaveListener)}});function A(C){Ut[C?"unshift":"push"](()=>{y=C,t(4,y)})}function E(C){Ut[C?"unshift":"push"](()=>{y=C,t(4,y)})}return n.$$set=C=>{"timeout"in C&&t(6,a=C.timeout),"tooltipStyle"in C&&t(0,c=C.tooltipStyle),"tooltipClass"in C&&t(1,u=C.tooltipClass),"showing"in C&&t(7,f=C.showing),"disabled"in C&&t(8,h=C.disabled),"hiddenFirst"in C&&t(2,d=C.hiddenFirst),"tooltipPositionerStyle"in C&&t(3,m=C.tooltipPositionerStyle),"$$scope"in C&&t(15,l=C.$$scope)},n.$$.update=()=>{var C;if(n.$$.dirty&20&&t(14,i=d?y==null?void 0:y.nextElementSibling:y==null?void 0:y.previousElementSibling),n.$$.dirty&16&&t(13,r=y==null?void 0:y.childNodes[0]),n.$$.dirty&31552){if(i&&(w.current!==i||p.current!==h)){const R=()=>{t(11,v.current=setTimeout(()=>{t(10,_=!0),i!=null&&i.style&&t(14,i.style.zIndex=1,i),t(11,v.current=null,v)},a),v)},D=()=>{v.current&&clearTimeout(v.current),t(10,_=!1),i!=null&&i.style&&t(14,i.style.zIndex=0,i)},N=w.current;N&&(N.removeEventListener("mouseenter",w.mouseEnterListener),N.removeEventListener("mouseleave",w.mouseLeaveListener)),h?t(14,i.id="",i):(t(14,i.id+="TOOLTIP_container",i),t(12,w.current=i,w),t(12,w.mouseEnterListener=R,w),t(12,w.mouseLeaveListener=D,w),i==null||i.addEventListener("mouseenter",R),i==null||i.addEventListener("mouseleave",D))}t(9,p.current=h,p)}if(n.$$.dirty&16384&&t(5,s=(C=i==null?void 0:i.className.split(" "))==null?void 0:C.find(R=>R.indexOf("s-")===0)),n.$$.dirty&25760&&i)if(f||_)i==null||i.appendChild(r);else try{i==null||i.removeChild(r)}catch{}},[c,u,d,m,y,s,a,f,h,p,_,v,w,r,i,l,o,A,E]}class ai extends st{constructor(e){super(),rt(this,e,O7,I7,kt,{timeout:6,tooltipStyle:0,tooltipClass:1,showing:7,disabled:8,hiddenFirst:2,tooltipPositionerStyle:3})}}function R7(n){let e,t;return{c(){e=k("span"),t=q(n[3])},l(i){e=T(i,"SPAN",{});var s=I(e);t=z(s,n[3]),s.forEach(b)},m(i,s){H(i,e,s),g(e,t)},p(i,s){s&8&&Le(t,i[3])},d(i){i&&b(e)}}}function D7(n){let e,t;return{c(){e=k("div"),t=q(n[4]),this.h()},l(i){e=T(i,"DIV",{slot:!0});var s=I(e);t=z(s,n[4]),s.forEach(b),this.h()},h(){S(e,"slot","t")},m(i,s){H(i,e,s),g(e,t)},p(i,s){s&16&&Le(t,i[4])},d(i){i&&b(e)}}}function N7(n){let e,t,i,s,r,o,l=As(n[2])+"",a,c,u,f,h,d,m,p,_,v,y,w;return y=new ai({props:{tooltipStyle:ns.CENTER,$$slots:{t:[D7],default:[R7]},$$scope:{ctx:n}}}),{c(){e=k("div"),t=k("b"),i=q(n[0]),s=q(" - "),r=q(n[1]),o=q(" ("),a=q(l),c=q(")"),u=U(),f=k("div"),h=k("div"),d=q("Result"),p=U(),_=k("div"),v=k("div"),ke(y.$$.fragment),this.h()},l(A){e=T(A,"DIV",{class:!0});var E=I(e);t=T(E,"B",{class:!0});var C=I(t);i=z(C,n[0]),s=z(C," - "),r=z(C,n[1]),o=z(C," ("),a=z(C,l),c=z(C,")"),C.forEach(b),u=W(E),f=T(E,"DIV",{class:!0,id:!0});var R=I(f);h=T(R,"DIV",{class:!0});var D=I(h);d=z(D,"Result"),D.forEach(b),R.forEach(b),p=W(E),_=T(E,"DIV",{class:!0});var N=I(_);v=T(N,"DIV",{class:!0});var L=I(v);Oe(y.$$.fragment,L),L.forEach(b),N.forEach(b),E.forEach(b),this.h()},h(){S(t,"class","player svelte-128nkkc"),S(h,"class","attack svelte-128nkkc"),S(f,"class","rolls svelte-128nkkc"),S(f,"id",m=`chat-entry-${n[5]}`),S(v,"class","attack svelte-128nkkc"),S(_,"class","result svelte-128nkkc"),S(e,"class","container svelte-128nkkc")},m(A,E){H(A,e,E),g(e,t),g(t,i),g(t,s),g(t,r),g(t,o),g(t,a),g(t,c),g(e,u),g(e,f),g(f,h),g(h,d),g(e,p),g(e,_),g(_,v),Te(y,v,null),w=!0},p(A,[E]){(!w||E&1)&&Le(i,A[0]),(!w||E&2)&&Le(r,A[1]),(!w||E&4)&&l!==(l=As(A[2])+"")&&Le(a,l),(!w||E&32&&m!==(m=`chat-entry-${A[5]}`))&&S(f,"id",m);const C={};E&88&&(C.$$scope={dirty:E,ctx:A}),y.$set(C)},i(A){w||(B(y.$$.fragment,A),w=!0)},o(A){G(y.$$.fragment,A),w=!1},d(A){A&&b(e),Ie(y)}}}function P7(n,e,t){let{playerName:i="No Name"}=e,{rollName:s="Basic Roll"}=e,{rollBonus:r=0}=e,{roll:o="-"}=e,{rollTooltip:l="n/a"}=e,{date:a}=e;return n.$$set=c=>{"playerName"in c&&t(0,i=c.playerName),"rollName"in c&&t(1,s=c.rollName),"rollBonus"in c&&t(2,r=c.rollBonus),"roll"in c&&t(3,o=c.roll),"rollTooltip"in c&&t(4,l=c.rollTooltip),"date"in c&&t(5,a=c.date)},[i,s,r,o,l,a]}class M7 extends st{constructor(e){super(),rt(this,e,P7,N7,kt,{playerName:0,rollName:1,rollBonus:2,roll:3,rollTooltip:4,date:5})}}function fy(n,e,t){var r;const i=n.slice();i[11]=e[t],i[14]=t;const s=((r=i[11])==null?void 0:r.type)||"BASIC_ROLL";return i[12]=s,i}function hy(n){let e,t;return{c(){e=k("div"),t=q("Loading")},l(i){e=T(i,"DIV",{});var s=I(e);t=z(s,"Loading"),s.forEach(b)},m(i,s){H(i,e,s),g(e,t)},d(i){i&&b(e)}}}function dy(n){let e,t,i=n[0],s=[];for(let o=0;o<i.length;o+=1)s[o]=gy(fy(n,i,o));const r=o=>G(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();e=et()},l(o){for(let l=0;l<s.length;l+=1)s[l].l(o);e=et()},m(o,l){for(let a=0;a<s.length;a+=1)s[a].m(o,l);H(o,e,l),t=!0},p(o,l){if(l&27){i=o[0];let a;for(a=0;a<i.length;a+=1){const c=fy(o,i,a);s[a]?(s[a].p(c,l),B(s[a],1)):(s[a]=gy(c),s[a].c(),B(s[a],1),s[a].m(e.parentNode,e))}for(He(),a=i.length;a<s.length;a+=1)r(a);qe()}},i(o){if(!t){for(let l=0;l<i.length;l+=1)B(s[l]);t=!0}},o(o){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)G(s[l]);t=!1},d(o){Ft(s,o),o&&b(e)}}}function my(n){let e,t;const i=[n[11]];let s={};for(let r=0;r<i.length;r+=1)s=Xr(s,i[r]);return e=new M7({props:s}),{c(){ke(e.$$.fragment)},l(r){Oe(e.$$.fragment,r)},m(r,o){Te(e,r,o),t=!0},p(r,o){const l=o&1?Qr(i,[Zl(r[11])]):{};e.$set(l)},i(r){t||(B(e.$$.fragment,r),t=!0)},o(r){G(e.$$.fragment,r),t=!1},d(r){Ie(e,r)}}}function py(n){let e,t;return e=new w7({props:{entry:n[11],spoilersOn:n[1]!==1/0&&n[14]>=n[1]&&n[3][n[14]]!==!0,index:n[14],setAlreadyRevealed:n[4]}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,s){const r={};s&1&&(r.entry=i[11]),s&10&&(r.spoilersOn=i[1]!==1/0&&i[14]>=i[1]&&i[3][i[14]]!==!0),s&16&&(r.setAlreadyRevealed=i[4]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function gy(n){let e,t,i,s=n[12]==="BASIC_ROLL"&&my(n),r=n[12]!=="BASIC_ROLL"&&py(n);return{c(){s&&s.c(),e=U(),r&&r.c(),t=et()},l(o){s&&s.l(o),e=W(o),r&&r.l(o),t=et()},m(o,l){s&&s.m(o,l),H(o,e,l),r&&r.m(o,l),H(o,t,l),i=!0},p(o,l){o[12]==="BASIC_ROLL"?s?(s.p(o,l),l&1&&B(s,1)):(s=my(o),s.c(),B(s,1),s.m(e.parentNode,e)):s&&(He(),G(s,1,1,()=>{s=null}),qe()),o[12]!=="BASIC_ROLL"?r?(r.p(o,l),l&1&&B(r,1)):(r=py(o),r.c(),B(r,1),r.m(t.parentNode,t)):r&&(He(),G(r,1,1,()=>{r=null}),qe())},i(o){i||(B(s),B(r),i=!0)},o(o){G(s),G(r),i=!1},d(o){s&&s.d(o),o&&b(e),r&&r.d(o),o&&b(t)}}}function B7(n){var R;let e,t,i,s,r=(((R=n[0])==null?void 0:R.length)||"-")+"",o,l,a,c,u,f,h,d,m,p,_,v,y,w,A,E=!n[0]&&hy(),C=n[0]&&dy(n);return{c(){e=k("div"),t=k("div"),i=k("h3"),s=q("Roll Chat (total entries: "),o=q(r),l=q(")"),a=U(),c=k("div"),u=k("span"),f=q("Hide Damage Initially?"),h=U(),d=k("input"),p=U(),_=k("div"),E&&E.c(),v=U(),C&&C.c(),this.h()},l(D){e=T(D,"DIV",{class:!0});var N=I(e);t=T(N,"DIV",{});var L=I(t);i=T(L,"H3",{});var F=I(i);s=z(F,"Roll Chat (total entries: "),o=z(F,r),l=z(F,")"),F.forEach(b),L.forEach(b),a=W(N),c=T(N,"DIV",{});var P=I(c);u=T(P,"SPAN",{});var Q=I(u);f=z(Q,"Hide Damage Initially?"),Q.forEach(b),h=W(P),d=T(P,"INPUT",{type:!0}),P.forEach(b),p=W(N),_=T(N,"DIV",{class:!0,id:!0});var O=I(_);E&&E.l(O),v=W(O),C&&C.l(O),O.forEach(b),N.forEach(b),this.h()},h(){lt(t,"width","100%"),S(d,"type","checkbox"),d.checked=m=n[1]!==1/0,S(_,"class","scroll-container svelte-ph62s6"),S(_,"id","test"),S(e,"class","container svelte-ph62s6")},m(D,N){H(D,e,N),g(e,t),g(t,i),g(i,s),g(i,o),g(i,l),g(e,a),g(e,c),g(c,u),g(u,f),g(c,h),g(c,d),g(e,p),g(e,_),E&&E.m(_,null),g(_,v),C&&C.m(_,null),n[9](_),y=!0,w||(A=_e(d,"click",function(){Mn(n[2])&&n[2].apply(this,arguments)}),w=!0)},p(D,[N]){var L;n=D,(!y||N&1)&&r!==(r=(((L=n[0])==null?void 0:L.length)||"-")+"")&&Le(o,r),(!y||N&2&&m!==(m=n[1]!==1/0))&&(d.checked=m),n[0]?E&&(E.d(1),E=null):E||(E=hy(),E.c(),E.m(_,v)),n[0]?C?(C.p(n,N),N&1&&B(C,1)):(C=dy(n),C.c(),B(C,1),C.m(_,null)):C&&(He(),G(C,1,1,()=>{C=null}),qe())},i(D){y||(B(C),y=!0)},o(D){G(C),y=!1},d(D){D&&b(e),E&&E.d(),C&&C.d(),n[9](null),w=!1,A()}}}function L7(n,e,t){let{chatEntries:i}=e,{spoilersOn:s}=e,{toggleSpoilersOn:r}=e,{alreadyRevealed:o}=e,{setAlreadyRevealed:l}=e,a,c=-1,u=!1,f,h=new Audio("beep.ogg");Mi(()=>{t(7,u=!0),t(8,f=i.length)});function d(m){Ut[m?"unshift":"push"](()=>{a=m,t(5,a),t(0,i),t(6,c)})}return n.$$set=m=>{"chatEntries"in m&&t(0,i=m.chatEntries),"spoilersOn"in m&&t(1,s=m.spoilersOn),"toggleSpoilersOn"in m&&t(2,r=m.toggleSpoilersOn),"alreadyRevealed"in m&&t(3,o=m.alreadyRevealed),"setAlreadyRevealed"in m&&t(4,l=m.setAlreadyRevealed)},n.$$.update=()=>{n.$$.dirty&97&&a&&c!==(i==null?void 0:i.length)&&(Math.abs((a==null?void 0:a.scrollHeight)-(a==null?void 0:a.scrollTop)-(a==null?void 0:a.clientHeight))<1||c===-1?window.requestAnimationFrame(()=>{t(5,a.scrollTop=a.scrollHeight,a),t(6,c=i.length)}):t(6,c=i.length)),n.$$.dirty&385&&u&&f!==i.length&&h.play()},[i,s,r,o,l,a,c,u,f,d]}class X4 extends st{constructor(e){super(),rt(this,e,L7,B7,kt,{chatEntries:0,spoilersOn:1,toggleSpoilersOn:2,alreadyRevealed:3,setAlreadyRevealed:4})}}function vy(n,e,t){const i=n.slice();return i[20]=e[t],i}function by(n,e,t){const i=n.slice();return i[23]=e[t],i}function _y(n){var l;let e,t=((l=n[3][n[23]])==null?void 0:l.label)+"",i,s,r,o;return{c(){e=k("option"),i=q(t),s=U(),this.h()},l(a){e=T(a,"OPTION",{});var c=I(e);i=z(c,t),s=W(c),c.forEach(b),this.h()},h(){e.__value=r=n[23],e.value=e.__value,e.selected=o=n[1]===n[23]},m(a,c){H(a,e,c),g(e,i),g(e,s)},p(a,c){var u;c&1032&&t!==(t=((u=a[3][a[23]])==null?void 0:u.label)+"")&&Le(i,t),c&1024&&r!==(r=a[23])&&(e.__value=r,e.value=e.__value),c&1026&&o!==(o=a[1]===a[23])&&(e.selected=o)},d(a){a&&b(e)}}}function yy(n){let e,t,i,s,r,o=n[10],l=[];for(let a=0;a<o.length;a+=1)l[a]=_y(by(n,o,a));return{c(){e=k("select"),t=k("option"),i=q("- ");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){e=T(a,"SELECT",{class:!0});var c=I(e);t=T(c,"OPTION",{});var u=I(t);i=z(u,"- "),u.forEach(b);for(let f=0;f<l.length;f+=1)l[f].l(c);c.forEach(b),this.h()},h(){t.__value="",t.value=t.__value,S(e,"class","svelte-xlcqi6")},m(a,c){H(a,e,c),g(e,t),g(t,i);for(let u=0;u<l.length;u+=1)l[u].m(e,null);s||(r=_e(e,"change",n[17]),s=!0)},p(a,c){if(c&1034){o=a[10];let u;for(u=0;u<o.length;u+=1){const f=by(a,o,u);l[u]?l[u].p(f,c):(l[u]=_y(f),l[u].c(),l[u].m(e,null))}for(;u<l.length;u+=1)l[u].d(1);l.length=o.length}},d(a){a&&b(e),Ft(l,a),s=!1,r()}}}function Sy(n){let e,t,i="Combat Art: ",s,r,o=n[8],l=wy(n);return{c(){e=k("div"),t=k("span"),s=q(i),r=U(),l.c(),this.h()},l(a){e=T(a,"DIV",{class:!0});var c=I(e);t=T(c,"SPAN",{class:!0});var u=I(t);s=z(u,i),u.forEach(b),r=W(c),l.l(c),c.forEach(b),this.h()},h(){S(t,"class","label"),S(e,"class","selection svelte-xlcqi6")},m(a,c){H(a,e,c),g(e,t),g(t,s),g(e,r),l.m(e,null)},p(a,c){c&256&&kt(o,o=a[8])?(l.d(1),l=wy(a),l.c(),l.m(e,null)):l.p(a,c)},d(a){a&&b(e),l.d(a)}}}function Ey(n){let e,t=n[9][n[20]].label+"",i,s,r,o;return{c(){e=k("option"),i=q(t),s=U(),this.h()},l(l){e=T(l,"OPTION",{});var a=I(e);i=z(a,t),s=W(a),a.forEach(b),this.h()},h(){e.__value=r=n[20],e.value=e.__value,e.selected=o=n[6]===n[20]},m(l,a){H(l,e,a),g(e,i),g(e,s)},p(l,a){a&768&&t!==(t=l[9][l[20]].label+"")&&Le(i,t),a&256&&r!==(r=l[20])&&(e.__value=r,e.value=e.__value),a&320&&o!==(o=l[6]===l[20])&&(e.selected=o)},d(l){l&&b(e)}}}function wy(n){let e,t,i,s,r,o=n[8],l=[];for(let a=0;a<o.length;a+=1)l[a]=Ey(vy(n,o,a));return{c(){e=k("select"),t=k("option"),i=q("- ");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){e=T(a,"SELECT",{class:!0});var c=I(e);t=T(c,"OPTION",{});var u=I(t);i=z(u,"- "),u.forEach(b);for(let f=0;f<l.length;f+=1)l[f].l(c);c.forEach(b),this.h()},h(){t.__value="",t.value=t.__value,S(e,"class","svelte-xlcqi6")},m(a,c){H(a,e,c),g(e,t),g(t,i);for(let u=0;u<l.length;u+=1)l[u].m(e,null);s||(r=_e(e,"change",n[18]),s=!0)},p(a,c){if(c&832){o=a[8];let u;for(u=0;u<o.length;u+=1){const f=vy(a,o,u);l[u]?l[u].p(f,c):(l[u]=Ey(f),l[u].c(),l[u].m(e,null))}for(;u<l.length;u+=1)l[u].d(1);l.length=o.length}},d(a){a&&b(e),Ft(l,a),s=!1,r()}}}function U7(n){let e,t,i,s,r="Weapon: ",o,l,a=n[10],c,u,f,h,d,m,p,_,v,y,w=yy(n),A=n[8].length>0&&Sy(n);return{c(){e=k("div"),t=k("div"),i=k("div"),s=k("span"),o=q(r),l=U(),w.c(),c=U(),u=k("div"),A&&A.c(),f=U(),h=k("div"),d=k("span"),m=q("Range"),p=U(),_=k("input"),this.h()},l(E){e=T(E,"DIV",{class:!0});var C=I(e);t=T(C,"DIV",{class:!0});var R=I(t);i=T(R,"DIV",{class:!0});var D=I(i);s=T(D,"SPAN",{class:!0});var N=I(s);o=z(N,r),N.forEach(b),l=W(D),w.l(D),D.forEach(b),R.forEach(b),c=W(C),u=T(C,"DIV",{class:!0});var L=I(u);A&&A.l(L),L.forEach(b),f=W(C),h=T(C,"DIV",{class:!0});var F=I(h);d=T(F,"SPAN",{});var P=I(d);m=z(P,"Range"),P.forEach(b),p=W(F),_=T(F,"INPUT",{type:!0,min:!0,class:!0}),F.forEach(b),C.forEach(b),this.h()},h(){S(s,"class","label"),S(i,"class","selection svelte-xlcqi6"),S(t,"class","entry svelte-xlcqi6"),S(u,"class","entry svelte-xlcqi6"),S(_,"type","number"),_.value=n[4],S(_,"min","0"),S(_,"class","svelte-xlcqi6"),S(h,"class","range-finder svelte-xlcqi6"),S(e,"class","container svelte-xlcqi6")},m(E,C){H(E,e,C),g(e,t),g(t,i),g(i,s),g(s,o),g(i,l),w.m(i,null),g(e,c),g(e,u),A&&A.m(u,null),g(e,f),g(e,h),g(h,d),g(d,m),g(h,p),g(h,_),v||(y=_e(_,"change",n[19]),v=!0)},p(E,[C]){C&1024&&kt(a,a=E[10])?(w.d(1),w=yy(E),w.c(),w.m(i,null)):w.p(E,C),E[8].length>0?A?A.p(E,C):(A=Sy(E),A.c(),A.m(u,null)):A&&(A.d(1),A=null),C&16&&_.value!==E[4]&&(_.value=E[4])},i:Xe,o:Xe,d(E){E&&b(e),w.d(E),A&&A.d(),v=!1,y()}}}function W7(n,e,t){let i,s,r,o,{equippedClass:l}=e,{allWeapons:a}=e,{equippedWeapons:c}=e,{selectedWeapon:u}=e,{setSelectedWeapon:f}=e,{damageTypeSelection:h}=e,{weaponsToFeatures:d}=e,{distanceToTarget:m}=e,{setDistanceToTarget:p}=e,{selectedCombatArt:_}=e,{setSelectedCombatArt:v}=e,{equippedCombatArts:y}=e,{allCombatArts:w}=e;const A=R=>{f(R.currentTarget.value),t(0,h="")},E=R=>{v(R.currentTarget.value)},C=R=>p(parseInt(R.currentTarget.value));return n.$$set=R=>{"equippedClass"in R&&t(11,l=R.equippedClass),"allWeapons"in R&&t(12,a=R.allWeapons),"equippedWeapons"in R&&t(13,c=R.equippedWeapons),"selectedWeapon"in R&&t(1,u=R.selectedWeapon),"setSelectedWeapon"in R&&t(2,f=R.setSelectedWeapon),"damageTypeSelection"in R&&t(0,h=R.damageTypeSelection),"weaponsToFeatures"in R&&t(3,d=R.weaponsToFeatures),"distanceToTarget"in R&&t(4,m=R.distanceToTarget),"setDistanceToTarget"in R&&t(5,p=R.setDistanceToTarget),"selectedCombatArt"in R&&t(6,_=R.selectedCombatArt),"setSelectedCombatArt"in R&&t(7,v=R.setSelectedCombatArt),"equippedCombatArts"in R&&t(14,y=R.equippedCombatArts),"allCombatArts"in R&&t(15,w=R.allCombatArts)},n.$$.update=()=>{var R;n.$$.dirty&10&&t(16,i=(R=d[u])==null?void 0:R.type),n.$$.dirty&14344&&t(10,s=[...c,...!l||Yt[l].canUseMagic===!0?a.fullArray.filter(D=>Tm.includes(d[D].type)):[]]),n.$$.dirty&1030&&u&&!s.includes(u)&&f(""),n.$$.dirty&32768&&t(9,r=w.fullFeatures),n.$$.dirty&82432&&t(8,o=y.filter(D=>(r[D].compatibleWeapons||[]).indexOf(i)!==-1)),n.$$.dirty&448&&_&&!o.includes(_)&&v("")},[h,u,f,d,m,p,_,v,o,r,s,l,a,c,y,w,i,A,E,C]}class V7 extends st{constructor(e){super(),rt(this,e,W7,U7,kt,{equippedClass:11,allWeapons:12,equippedWeapons:13,selectedWeapon:1,setSelectedWeapon:2,damageTypeSelection:0,weaponsToFeatures:3,distanceToTarget:4,setDistanceToTarget:5,selectedCombatArt:6,setSelectedCombatArt:7,equippedCombatArts:14,allCombatArts:15})}}function Ay(n){let e,t,i,s,r,o,l,a,c=n[11]&&Cy(n);return{c(){e=k("div"),t=k("h3"),i=q("Attack"),s=U(),r=k("div"),o=q(n[25]),l=U(),c&&c.c(),this.h()},l(u){e=T(u,"DIV",{class:!0});var f=I(e);t=T(f,"H3",{class:!0});var h=I(t);i=z(h,"Attack"),h.forEach(b),s=W(f),r=T(f,"DIV",{class:!0});var d=I(r);o=z(d,n[25]),d.forEach(b),l=W(f),c&&c.l(f),f.forEach(b),this.h()},h(){S(t,"class","svelte-inr05g"),S(r,"class","content svelte-inr05g"),S(e,"class","attack svelte-inr05g")},m(u,f){H(u,e,f),g(e,t),g(t,i),g(e,s),g(e,r),g(r,o),g(e,l),c&&c.m(e,null),a=!0},p(u,f){(!a||f[0]&33554432)&&Le(o,u[25]),u[11]?c?(c.p(u,f),f[0]&2048&&B(c,1)):(c=Cy(u),c.c(),B(c,1),c.m(e,null)):c&&(He(),G(c,1,1,()=>{c=null}),qe())},i(u){a||(B(c),a=!0)},o(u){G(c),a=!1},d(u){u&&b(e),c&&c.d()}}}function Cy(n){let e,t;return e=new ai({props:{$$slots:{t:[j7],default:[F7]},$$scope:{ctx:n}}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,s){const r={};s[0]&262144|s[2]&2&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function F7(n){let e,t,i,s;return{c(){e=k("button"),t=q("Re-roll"),this.h()},l(r){e=T(r,"BUTTON",{class:!0});var o=I(e);t=z(o,"Re-roll"),o.forEach(b),this.h()},h(){S(e,"class","re-roller svelte-inr05g")},m(r,o){H(r,e,o),g(e,t),i||(s=_e(e,"click",function(){Mn(n[18])&&n[18].apply(this,arguments)}),i=!0)},p(r,o){n=r},d(r){r&&b(e),i=!1,s()}}}function j7(n){let e,t;return{c(){e=k("div"),t=q(`Only meant to be used for advantage/disadvantage. Will not automatically decrement
									your superiority die or weapon uses`),this.h()},l(i){e=T(i,"DIV",{slot:!0,class:!0});var s=I(e);t=z(s,`Only meant to be used for advantage/disadvantage. Will not automatically decrement
									your superiority die or weapon uses`),s.forEach(b),this.h()},h(){S(e,"slot","t"),S(e,"class","svelte-inr05g")},m(i,s){H(i,e,s),g(e,t)},p:Xe,d(i){i&&b(e)}}}function ky(n){let e,t,i,s,r,o,l;return{c(){e=k("div"),t=k("h3"),i=q("Crit Range"),s=U(),r=k("div"),o=k("span"),l=q(n[21]),this.h()},l(a){e=T(a,"DIV",{class:!0});var c=I(e);t=T(c,"H3",{class:!0});var u=I(t);i=z(u,"Crit Range"),u.forEach(b),s=W(c),r=T(c,"DIV",{class:!0});var f=I(r);o=T(f,"SPAN",{});var h=I(o);l=z(h,n[21]),h.forEach(b),f.forEach(b),c.forEach(b),this.h()},h(){S(t,"class","svelte-inr05g"),S(r,"class","content svelte-inr05g"),S(e,"class","crit svelte-inr05g")},m(a,c){H(a,e,c),g(e,t),g(t,i),g(e,s),g(e,r),g(r,o),g(o,l)},p(a,c){c[0]&2097152&&Le(l,a[21])},d(a){a&&b(e)}}}function Ty(n){let e,t;return e=new ai({props:{tooltipStyle:ns.CENTER,$$slots:{t:[q7],default:[H7]},$$scope:{ctx:n}}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,s){const r={};s[0]&48|s[2]&2&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function Iy(n){let e,t,i;return{c(){e=k("span"),t=q("DC "),i=q(n[5])},l(s){e=T(s,"SPAN",{});var r=I(e);t=z(r,"DC "),i=z(r,n[5]),r.forEach(b)},m(s,r){H(s,e,r),g(e,t),g(e,i)},p(s,r){r[0]&32&&Le(i,s[5])},d(s){s&&b(e)}}}function H7(n){let e,t,i,s=Qg[n[4]]+"",r,o,l,a=n[5]&&n[5]<=20&&Iy(n);return{c(){e=k("div"),t=k("h3"),i=q("Crest of "),r=q(s),o=U(),l=k("div"),a&&a.c(),this.h()},l(c){e=T(c,"DIV",{class:!0});var u=I(e);t=T(u,"H3",{class:!0});var f=I(t);i=z(f,"Crest of "),r=z(f,s),f.forEach(b),o=W(u),l=T(u,"DIV",{class:!0});var h=I(l);a&&a.l(h),h.forEach(b),u.forEach(b),this.h()},h(){S(t,"class","svelte-inr05g"),S(l,"class","content svelte-inr05g"),S(e,"class","crest svelte-inr05g")},m(c,u){H(c,e,u),g(e,t),g(t,i),g(t,r),g(e,o),g(e,l),a&&a.m(l,null)},p(c,u){u[0]&16&&s!==(s=Qg[c[4]]+"")&&Le(r,s),c[5]&&c[5]<=20?a?a.p(c,u):(a=Iy(c),a.c(),a.m(l,null)):a&&(a.d(1),a=null)},d(c){c&&b(e),a&&a.d()}}}function q7(n){let e,t=Ds[n[4]].description+"",i;return{c(){e=k("div"),i=q(t),this.h()},l(s){e=T(s,"DIV",{slot:!0,class:!0});var r=I(e);i=z(r,t),r.forEach(b),this.h()},h(){S(e,"slot","t"),S(e,"class","svelte-inr05g")},m(s,r){H(s,e,r),g(e,i)},p(s,r){r[0]&16&&t!==(t=Ds[s[4]].description+"")&&Le(i,t)},d(s){s&&b(e)}}}function Oy(n){var f;let e,t,i=n[11]!==""&&n[12]!==""?`${n[11]} + ${n[12]} = ${n[11]+n[12]}`:"...",s,r,o,l,a=n[11]!==""&&((f=n[1].fullFeatures[n[8]])==null?void 0:f.description)&&Ry(n),c=n[16]>1&&Dy(n),u=n[16]<1&&Ny();return{c(){e=k("div"),t=k("div"),s=q(i),r=U(),a&&a.c(),o=U(),c&&c.c(),l=U(),u&&u.c(),this.h()},l(h){e=T(h,"DIV",{class:!0});var d=I(e);t=T(d,"DIV",{});var m=I(t);s=z(m,i),m.forEach(b),r=W(d),a&&a.l(d),o=W(d),c&&c.l(d),l=W(d),u&&u.l(d),d.forEach(b),this.h()},h(){S(e,"class","attack svelte-inr05g")},m(h,d){H(h,e,d),g(e,t),g(t,s),g(e,r),a&&a.m(e,null),g(e,o),c&&c.m(e,null),g(e,l),u&&u.m(e,null)},p(h,d){var m;d[0]&6144&&i!==(i=h[11]!==""&&h[12]!==""?`${h[11]} + ${h[12]} = ${h[11]+h[12]}`:"...")&&Le(s,i),h[11]!==""&&((m=h[1].fullFeatures[h[8]])!=null&&m.description)?a?a.p(h,d):(a=Ry(h),a.c(),a.m(e,o)):a&&(a.d(1),a=null),h[16]>1?c?c.p(h,d):(c=Dy(h),c.c(),c.m(e,l)):c&&(c.d(1),c=null),h[16]<1?u||(u=Ny(),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},d(h){h&&b(e),a&&a.d(),c&&c.d(),u&&u.d()}}}function Ry(n){var s;let e,t=((s=n[1].fullFeatures[n[8]])==null?void 0:s.description)+"",i;return{c(){e=k("div"),i=q(t),this.h()},l(r){e=T(r,"DIV",{class:!0});var o=I(e);i=z(o,t),o.forEach(b),this.h()},h(){S(e,"class","combat-art-note svelte-inr05g")},m(r,o){H(r,e,o),g(e,i)},p(r,o){var l;o[0]&258&&t!==(t=((l=r[1].fullFeatures[r[8]])==null?void 0:l.description)+"")&&Le(i,t)},d(r){r&&b(e)}}}function Dy(n){let e,t,i=n[16]-1+"",s,r;return{c(){e=k("div"),t=q("Cost "),s=q(i),r=q(" extra superiority die"),this.h()},l(o){e=T(o,"DIV",{class:!0});var l=I(e);t=z(l,"Cost "),s=z(l,i),r=z(l," extra superiority die"),l.forEach(b),this.h()},h(){S(e,"class","cf svelte-inr05g")},m(o,l){H(o,e,l),g(e,t),g(e,s),g(e,r)},p(o,l){l[0]&65536&&i!==(i=o[16]-1+"")&&Le(s,i)},d(o){o&&b(e)}}}function Ny(n){let e,t;return{c(){e=k("div"),t=q("Cost 0 superiority die"),this.h()},l(i){e=T(i,"DIV",{class:!0});var s=I(e);t=z(s,"Cost 0 superiority die"),s.forEach(b),this.h()},h(){S(e,"class","cs svelte-inr05g")},m(i,s){H(i,e,s),g(e,t)},d(i){i&&b(e)}}}function Py(n){let e,t,i=n[14]!==""&&My(n),s=n[14]===""&&Ly();return{c(){e=k("div"),i&&i.c(),t=U(),s&&s.c(),this.h()},l(r){e=T(r,"DIV",{class:!0});var o=I(e);i&&i.l(o),t=W(o),s&&s.l(o),o.forEach(b),this.h()},h(){S(e,"class","crit svelte-inr05g")},m(r,o){H(r,e,o),i&&i.m(e,null),g(e,t),s&&s.m(e,null)},p(r,o){r[14]!==""?i?i.p(r,o):(i=My(r),i.c(),i.m(e,t)):i&&(i.d(1),i=null),r[14]===""?s||(s=Ly(),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},d(r){r&&b(e),i&&i.d(),s&&s.d()}}}function My(n){let e,t,i=n[14]>=20-n[3]?"CRIT":"Normal",s,r,o,l,a,c,u,f,h,d,m=n[14]>=20-n[3]&&By(n);return{c(){e=k("div"),t=k("span"),s=q(i),o=U(),l=k("span"),a=q("("),c=q(n[14]),u=q(")"),h=U(),m&&m.c(),d=et(),this.h()},l(p){e=T(p,"DIV",{class:!0});var _=I(e);t=T(_,"SPAN",{class:!0});var v=I(t);s=z(v,i),v.forEach(b),o=W(_),l=T(_,"SPAN",{class:!0});var y=I(l);a=z(y,"("),c=z(y,n[14]),u=z(y,")"),y.forEach(b),_.forEach(b),h=W(p),m&&m.l(p),d=et(),this.h()},h(){S(t,"class",r=Ze(n[14]>=20-n[3]?"cs":"")+" svelte-inr05g"),S(l,"class",f=Ze(n[14]===20?"cs":"")+" svelte-inr05g"),S(e,"class","")},m(p,_){H(p,e,_),g(e,t),g(t,s),g(e,o),g(e,l),g(l,a),g(l,c),g(l,u),H(p,h,_),m&&m.m(p,_),H(p,d,_)},p(p,_){_[0]&16392&&i!==(i=p[14]>=20-p[3]?"CRIT":"Normal")&&Le(s,i),_[0]&16392&&r!==(r=Ze(p[14]>=20-p[3]?"cs":"")+" svelte-inr05g")&&S(t,"class",r),_[0]&16384&&Le(c,p[14]),_[0]&16384&&f!==(f=Ze(p[14]===20?"cs":"")+" svelte-inr05g")&&S(l,"class",f),p[14]>=20-p[3]?m?m.p(p,_):(m=By(p),m.c(),m.m(d.parentNode,d)):m&&(m.d(1),m=null)},d(p){p&&b(e),p&&b(h),m&&m.d(p),p&&b(d)}}}function By(n){let e,t=n[14]===20?"3":"2",i,s;return{c(){e=k("div"),i=q(t),s=q("x Damage")},l(r){e=T(r,"DIV",{});var o=I(e);i=z(o,t),s=z(o,"x Damage"),o.forEach(b)},m(r,o){H(r,e,o),g(e,i),g(e,s)},p(r,o){o[0]&16384&&t!==(t=r[14]===20?"3":"2")&&Le(i,t)},d(r){r&&b(e)}}}function Ly(n){let e;return{c(){e=q("...")},l(t){e=z(t,"...")},m(t,i){H(t,e,i)},d(t){t&&b(e)}}}function Uy(n){let e,t,i=n[15]!==""&&Wy(n),s=n[15]===""&&Hy();return{c(){e=k("div"),i&&i.c(),t=U(),s&&s.c(),this.h()},l(r){e=T(r,"DIV",{class:!0});var o=I(e);i&&i.l(o),t=W(o),s&&s.l(o),o.forEach(b),this.h()},h(){S(e,"class","crest svelte-inr05g")},m(r,o){H(r,e,o),i&&i.m(e,null),g(e,t),s&&s.m(e,null)},p(r,o){r[15]!==""?i?i.p(r,o):(i=Wy(r),i.c(),i.m(e,t)):i&&(i.d(1),i=null),r[15]===""?s||(s=Hy(),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},d(r){r&&b(e),i&&i.d(),s&&s.d()}}}function Wy(n){let e,t,i=n[20]&&Vy(n),s=!n[20]&&jy(n);return{c(){i&&i.c(),e=U(),s&&s.c(),t=et()},l(r){i&&i.l(r),e=W(r),s&&s.l(r),t=et()},m(r,o){i&&i.m(r,o),H(r,e,o),s&&s.m(r,o),H(r,t,o)},p(r,o){r[20]?i?i.p(r,o):(i=Vy(r),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),r[20]?s&&(s.d(1),s=null):s?s.p(r,o):(s=jy(r),s.c(),s.m(t.parentNode,t))},d(r){i&&i.d(r),r&&b(e),s&&s.d(r),r&&b(t)}}}function Vy(n){let e,t,i,s,r,o,l,a,c,u=n[4]&&Fy(n);return{c(){e=k("div"),t=k("span"),i=q("ACTIVATED"),s=k("span"),r=q("("),o=q(n[15]),l=q(")"),a=U(),u&&u.c(),c=et(),this.h()},l(f){e=T(f,"DIV",{});var h=I(e);t=T(h,"SPAN",{class:!0});var d=I(t);i=z(d,"ACTIVATED"),d.forEach(b),s=T(h,"SPAN",{});var m=I(s);r=z(m,"("),o=z(m,n[15]),l=z(m,")"),m.forEach(b),h.forEach(b),a=W(f),u&&u.l(f),c=et(),this.h()},h(){S(t,"class","cs svelte-inr05g")},m(f,h){H(f,e,h),g(e,t),g(t,i),g(e,s),g(s,r),g(s,o),g(s,l),H(f,a,h),u&&u.m(f,h),H(f,c,h)},p(f,h){h[0]&32768&&Le(o,f[15]),f[4]?u?u.p(f,h):(u=Fy(f),u.c(),u.m(c.parentNode,c)):u&&(u.d(1),u=null)},d(f){f&&b(e),f&&b(a),u&&u.d(f),f&&b(c)}}}function Fy(n){var s;let e,t=((s=Ds[n[4]])==null?void 0:s.description)+"",i;return{c(){e=k("div"),i=q(t),this.h()},l(r){e=T(r,"DIV",{class:!0});var o=I(e);i=z(o,t),o.forEach(b),this.h()},h(){S(e,"class","description svelte-inr05g")},m(r,o){H(r,e,o),g(e,i)},p(r,o){var l;o[0]&16&&t!==(t=((l=Ds[r[4]])==null?void 0:l.description)+"")&&Le(i,t)},d(r){r&&b(e)}}}function jy(n){let e,t,i,s,r,o;return{c(){e=k("span"),t=q("Normal"),i=k("span"),s=q("("),r=q(n[15]),o=q(")")},l(l){e=T(l,"SPAN",{});var a=I(e);t=z(a,"Normal"),a.forEach(b),i=T(l,"SPAN",{});var c=I(i);s=z(c,"("),r=z(c,n[15]),o=z(c,")"),c.forEach(b)},m(l,a){H(l,e,a),g(e,t),H(l,i,a),g(i,s),g(i,r),g(i,o)},p(l,a){a[0]&32768&&Le(r,l[15])},d(l){l&&b(e),l&&b(i)}}}function Hy(n){let e;return{c(){e=q("...")},l(t){e=z(t,"...")},m(t,i){H(t,e,i)},d(t){t&&b(e)}}}function qy(n){let e,t,i,s,r,o=parseInt(n[23])!==n[13],l=o&&zy(n);return{c(){e=k("div"),t=k("span"),i=q(n[23]),r=U(),l&&l.c(),this.h()},l(a){e=T(a,"DIV",{class:!0});var c=I(e);t=T(c,"SPAN",{class:!0});var u=I(t);i=z(u,n[23]),u.forEach(b),r=W(c),l&&l.l(c),c.forEach(b),this.h()},h(){S(t,"class",s=Ze(Zi({mini:parseInt(n[23])!==n[13]}))+" svelte-inr05g"),S(e,"class","damage-text svelte-inr05g")},m(a,c){H(a,e,c),g(e,t),g(t,i),g(e,r),l&&l.m(e,null)},p(a,c){c[0]&8388608&&Le(i,a[23]),c[0]&8396800&&s!==(s=Ze(Zi({mini:parseInt(a[23])!==a[13]}))+" svelte-inr05g")&&S(t,"class",s),c[0]&8396800&&(o=parseInt(a[23])!==a[13]),o?l?l.p(a,c):(l=zy(a),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},d(a){a&&b(e),l&&l.d()}}}function zy(n){let e,t,i;return{c(){e=k("span"),t=q("= "),i=q(n[24]),this.h()},l(s){e=T(s,"SPAN",{class:!0});var r=I(e);t=z(r,"= "),i=z(r,n[24]),r.forEach(b),this.h()},h(){S(e,"class","final-damage svelte-inr05g")},m(s,r){H(s,e,r),g(e,t),g(e,i)},p(s,r){r[0]&16777216&&Le(i,s[24])},d(s){s&&b(e)}}}function Gy(n){let e;return{c(){e=q("...")},l(t){e=z(t,"...")},m(t,i){H(t,e,i)},d(t){t&&b(e)}}}function z7(n){let e,t,i,s,r,o,l,a,c,u,f,h,d,m,p,_,v,y,w,A,E,C,R,D,N,L,F,P,Q=n[17]?"HP Restored":"Damage",O,K,X,J=xn(n[2])+"",te,j,x,Z,V,ce,pe,re,ye,Ne,Y,Ce,We=n[30]?n[26]<=0?"Out of weapon uses":"Out of Superiority Dies":n[7]?"Roll Attack":"Select a weapon",se,Me,he,M,ae,de,ee,$,ne,me,le,ie,be=!n[17]&&Ay(n),we=!n[17]&&n[3]>=0&&ky(n),Ae=n[4]&&Ty(n),ge=!n[17]&&Oy(n),Be=!n[17]&&n[3]>=0&&Py(n),ve=n[4]&&Uy(n),Pe=n[13]&&qy(n),Se=!n[13]&&Gy();return{c(){e=k("div"),t=k("div"),i=k("button"),s=q("Copy Results"),o=U(),l=k("button"),a=q("Copy Attack Result Only"),u=U(),f=k("button"),h=q("Copy Damage Result Only"),m=U(),p=k("button"),_=q("Copy Attack Command"),v=U(),y=k("button"),w=q("Back to Breakdown"),A=U(),E=k("div"),C=k("div"),R=k("div"),be&&be.c(),D=U(),we&&we.c(),N=U(),Ae&&Ae.c(),L=U(),F=k("div"),P=k("h3"),O=q(Q),K=U(),X=k("div"),te=q(J),j=U(),x=U(),Z=k("div"),ge&&ge.c(),V=U(),Be&&Be.c(),ce=U(),ve&&ve.c(),pe=U(),re=k("div"),Pe&&Pe.c(),ye=U(),Se&&Se.c(),Ne=U(),Y=k("div"),Ce=k("button"),se=q(We),M=U(),ae=k("span"),de=k("span"),ee=q("Roll visual dice?"),$=U(),ne=k("input"),this.h()},l(tt){e=T(tt,"DIV",{class:!0});var Ke=I(e);t=T(Ke,"DIV",{class:!0});var Ee=I(t);i=T(Ee,"BUTTON",{class:!0});var it=I(i);s=z(it,"Copy Results"),it.forEach(b),o=W(Ee),l=T(Ee,"BUTTON",{class:!0});var De=I(l);a=z(De,"Copy Attack Result Only"),De.forEach(b),u=W(Ee),f=T(Ee,"BUTTON",{class:!0});var ze=I(f);h=z(ze,"Copy Damage Result Only"),ze.forEach(b),m=W(Ee),p=T(Ee,"BUTTON",{class:!0});var Re=I(p);_=z(Re,"Copy Attack Command"),Re.forEach(b),v=W(Ee),y=T(Ee,"BUTTON",{class:!0});var ut=I(y);w=z(ut,"Back to Breakdown"),ut.forEach(b),Ee.forEach(b),A=W(Ke),E=T(Ke,"DIV",{class:!0});var Bt=I(E);C=T(Bt,"DIV",{class:!0});var gt=I(C);R=T(gt,"DIV",{class:!0});var At=I(R);be&&be.l(At),D=W(At),we&&we.l(At),N=W(At),Ae&&Ae.l(At),L=W(At),F=T(At,"DIV",{class:!0});var jt=I(F);P=T(jt,"H3",{class:!0});var nn=I(P);O=z(nn,Q),nn.forEach(b),K=W(jt),X=T(jt,"DIV",{class:!0});var Zt=I(X);te=z(Zt,J),j=W(Zt),Zt.forEach(b),jt.forEach(b),At.forEach(b),x=W(gt),Z=T(gt,"DIV",{class:!0});var ft=I(Z);ge&&ge.l(ft),V=W(ft),Be&&Be.l(ft),ce=W(ft),ve&&ve.l(ft),pe=W(ft),re=T(ft,"DIV",{class:!0});var un=I(re);Pe&&Pe.l(un),ye=W(un),Se&&Se.l(un),un.forEach(b),ft.forEach(b),gt.forEach(b),Ne=W(Bt),Y=T(Bt,"DIV",{class:!0});var tn=I(Y);Ce=T(tn,"BUTTON",{class:!0});var An=I(Ce);se=z(An,We),An.forEach(b),M=W(tn),ae=T(tn,"SPAN",{});var vn=I(ae);de=T(vn,"SPAN",{});var Ln=I(de);ee=z(Ln,"Roll visual dice?"),Ln.forEach(b),$=W(vn),ne=T(vn,"INPUT",{type:!0}),vn.forEach(b),tn.forEach(b),Bt.forEach(b),Ke.forEach(b),this.h()},h(){i.disabled=r=n[11]==="",S(i,"class","svelte-inr05g"),l.disabled=c=n[11]==="",S(l,"class","svelte-inr05g"),f.disabled=d=n[11]==="",S(f,"class","svelte-inr05g"),S(p,"class","svelte-inr05g"),S(y,"class","svelte-inr05g"),lt(y,"flex","1"),S(t,"class","actions svelte-inr05g"),S(P,"class","svelte-inr05g"),S(X,"class","content svelte-inr05g"),S(F,"class","damage svelte-inr05g"),S(R,"class","rolls svelte-inr05g"),S(re,"class","damage svelte-inr05g"),lt(re,"flex-direction","column"),S(Z,"class","result svelte-inr05g"),S(C,"class","rolls-container svelte-inr05g"),Ce.disabled=Me=n[30]||!n[7],S(Ce,"class",he=Ze(Zi("attack-button",{disabled:n[30]||!n[7]}))+" svelte-inr05g"),S(ne,"type","checkbox"),ne.checked=n[9],S(Y,"class","attack-button-container svelte-inr05g"),S(E,"class","content svelte-inr05g"),S(e,"class","container svelte-inr05g")},m(tt,Ke){H(tt,e,Ke),g(e,t),g(t,i),g(i,s),g(t,o),g(t,l),g(l,a),g(t,u),g(t,f),g(f,h),g(t,m),g(t,p),g(p,_),g(t,v),g(t,y),g(y,w),g(e,A),g(e,E),g(E,C),g(C,R),be&&be.m(R,null),g(R,D),we&&we.m(R,null),g(R,N),Ae&&Ae.m(R,null),g(R,L),g(R,F),g(F,P),g(P,O),g(F,K),g(F,X),g(X,te),g(X,j),g(C,x),g(C,Z),ge&&ge.m(Z,null),g(Z,V),Be&&Be.m(Z,null),g(Z,ce),ve&&ve.m(Z,null),g(Z,pe),g(Z,re),Pe&&Pe.m(re,null),g(re,ye),Se&&Se.m(re,null),g(E,Ne),g(E,Y),g(Y,Ce),g(Ce,se),g(Y,M),g(Y,ae),g(ae,de),g(de,ee),g(ae,$),g(ae,ne),me=!0,le||(ie=[_e(i,"click",n[54]),_e(l,"click",n[55]),_e(f,"click",n[56]),_e(p,"click",n[57]),_e(y,"click",function(){Mn(n[0])&&n[0].apply(this,arguments)}),_e(Ce,"click",n[58]),_e(ne,"click",n[59])],le=!0)},p(tt,Ke){n=tt,(!me||Ke[0]&2048&&r!==(r=n[11]===""))&&(i.disabled=r),(!me||Ke[0]&2048&&c!==(c=n[11]===""))&&(l.disabled=c),(!me||Ke[0]&2048&&d!==(d=n[11]===""))&&(f.disabled=d),n[17]?be&&(He(),G(be,1,1,()=>{be=null}),qe()):be?(be.p(n,Ke),Ke[0]&131072&&B(be,1)):(be=Ay(n),be.c(),B(be,1),be.m(R,D)),!n[17]&&n[3]>=0?we?we.p(n,Ke):(we=ky(n),we.c(),we.m(R,N)):we&&(we.d(1),we=null),n[4]?Ae?(Ae.p(n,Ke),Ke[0]&16&&B(Ae,1)):(Ae=Ty(n),Ae.c(),B(Ae,1),Ae.m(R,L)):Ae&&(He(),G(Ae,1,1,()=>{Ae=null}),qe()),(!me||Ke[0]&131072)&&Q!==(Q=n[17]?"HP Restored":"Damage")&&Le(O,Q),(!me||Ke[0]&4)&&J!==(J=xn(n[2])+"")&&Le(te,J),n[17]?ge&&(ge.d(1),ge=null):ge?ge.p(n,Ke):(ge=Oy(n),ge.c(),ge.m(Z,V)),!n[17]&&n[3]>=0?Be?Be.p(n,Ke):(Be=Py(n),Be.c(),Be.m(Z,ce)):Be&&(Be.d(1),Be=null),n[4]?ve?ve.p(n,Ke):(ve=Uy(n),ve.c(),ve.m(Z,pe)):ve&&(ve.d(1),ve=null),n[13]?Pe?Pe.p(n,Ke):(Pe=qy(n),Pe.c(),Pe.m(re,ye)):Pe&&(Pe.d(1),Pe=null),n[13]?Se&&(Se.d(1),Se=null):Se||(Se=Gy(),Se.c(),Se.m(re,null)),(!me||Ke[0]&1140850816)&&We!==(We=n[30]?n[26]<=0?"Out of weapon uses":"Out of Superiority Dies":n[7]?"Roll Attack":"Select a weapon")&&Le(se,We),(!me||Ke[0]&1073741952&&Me!==(Me=n[30]||!n[7]))&&(Ce.disabled=Me),(!me||Ke[0]&1073741952&&he!==(he=Ze(Zi("attack-button",{disabled:n[30]||!n[7]}))+" svelte-inr05g"))&&S(Ce,"class",he),(!me||Ke[0]&512)&&(ne.checked=n[9])},i(tt){me||(B(be),B(Ae),me=!0)},o(tt){G(be),G(Ae),me=!1},d(tt){tt&&b(e),be&&be.d(),we&&we.d(),Ae&&Ae.d(),ge&&ge.d(),Be&&Be.d(),ve&&ve.d(),Pe&&Pe.d(),Se&&Se.d(),le=!1,an(ie)}}}function G7(n,e,t){let i,s,r,o,l,a,c,u,f,h,d,m,p,_,v,y,w,A,E,C,R,D;const N=Bn(hs.DB);let{playerName:L}=e,{onCloseModal:F}=e,{allWeapons:P}=e,{allCombatArts:Q}=e,{weaponUses:O}=e,{onUpdateWeaponUses:K}=e,{crestConservesResource:X}=e,{attackCalc:J}=e,{damageCalc:te}=e,{critModifier:j}=e,{combatArtDamageBonus:x}=e,{crestType:Z}=e,{crestDC:V}=e,{crestDamage:ce}=e,{crestCombatArtDamageModifier:pe}=e,{selectedWeapon:re}=e,{selectedCombatArt:ye}=e,{curSuperiorityDies:Ne}=e,{setCurSuperiorityDie:Y}=e,{shouldDoVisualRolls:Ce}=e,{toggleVisualRolls:We}=e,se="",Me="",he="",M="",ae="",de="",ee=1,$="",ne=1,me=1,le=1;const ie=async()=>{if(t(13,he=""),t(41,M=""),AL(te)){const Se=te.filter(Ke=>!Kg(Ke)),tt=te.filter(Kg);if(Ce){const Ke=await io(tt,{modifier:Se});t(13,he=Ke.value),t(41,M=Ke.resultText)}else{const{value:Ke,resultText:Ee}=Qs(te,{returnAsString:!0});t(13,he=Ke),t(41,M=Ee)}}else t(13,he=Qs(te)),t(41,M=he+"")},be=async()=>{t(14,de=""),Ce?t(14,de=await io([Et.d20],{clearTimeout:250,disableResultBox:!0}).then(Se=>Se.value)):t(14,de=Fc(20)),t(43,ee=de>=20-j?de===20?3:2:1)},we=()=>{Oc(R())},Ae=()=>Oc(E(!0)),ge=()=>Oc(C(!0)),Be=()=>Oc(A()),ve=()=>D().then(()=>Oc(R())),Pe=()=>We();return n.$$set=Se=>{"playerName"in Se&&t(31,L=Se.playerName),"onCloseModal"in Se&&t(0,F=Se.onCloseModal),"allWeapons"in Se&&t(32,P=Se.allWeapons),"allCombatArts"in Se&&t(1,Q=Se.allCombatArts),"weaponUses"in Se&&t(33,O=Se.weaponUses),"onUpdateWeaponUses"in Se&&t(34,K=Se.onUpdateWeaponUses),"crestConservesResource"in Se&&t(35,X=Se.crestConservesResource),"attackCalc"in Se&&t(36,J=Se.attackCalc),"damageCalc"in Se&&t(2,te=Se.damageCalc),"critModifier"in Se&&t(3,j=Se.critModifier),"combatArtDamageBonus"in Se&&t(37,x=Se.combatArtDamageBonus),"crestType"in Se&&t(4,Z=Se.crestType),"crestDC"in Se&&t(5,V=Se.crestDC),"crestDamage"in Se&&t(6,ce=Se.crestDamage),"crestCombatArtDamageModifier"in Se&&t(38,pe=Se.crestCombatArtDamageModifier),"selectedWeapon"in Se&&t(7,re=Se.selectedWeapon),"selectedCombatArt"in Se&&t(8,ye=Se.selectedCombatArt),"curSuperiorityDies"in Se&&t(39,Ne=Se.curSuperiorityDies),"setCurSuperiorityDie"in Se&&t(40,Y=Se.setCurSuperiorityDie),"shouldDoVisualRolls"in Se&&t(9,Ce=Se.shouldDoVisualRolls),"toggleVisualRolls"in Se&&t(10,We=Se.toggleVisualRolls)},n.$$.update=()=>{var Se,tt;n.$$.dirty[0]&128&&(t(11,se=""),t(12,Me=""),t(13,he=""),t(41,M=""),t(42,ae=""),t(42,ae=""),t(14,de=""),t(43,ee=1),t(15,$="")),n.$$.dirty[0]&128&&t(17,i=_h.has(re)),n.$$.dirty[0]&256&&t(48,s=()=>{var De;const Ke=(De=Vr[ye])==null?void 0:De.dieCost;if(!ye||!Ke)return 1;const Ee=Qs([Ke.roll])>=Ke.target,it=(Ke==null?void 0:Ke.mod)||0;return Ee?Math.max(1+it,0):1}),n.$$.dirty[0]&128|n.$$.dirty[1]&4&&t(26,r=O[re]===void 0?1/0:O[re]),n.$$.dirty[0]&33376|n.$$.dirty[1]&2240&&t(47,u=async()=>(t(15,$=""),Ce?t(15,$=await io([Et.d20],{clearTimeout:250,disableResultBox:!0}).then(Ke=>Ke.value)):t(15,$=Fc(20)),$>=V?ce.length?t(42,ae=Qs(ce)):pe>1&&t(42,ae=Math.round(Qs(x)*pe)):t(42,ae=""),ae)),n.$$.dirty[0]&512|n.$$.dirty[1]&32&&t(18,a=async()=>{t(11,se=""),Ce?t(11,se=await io([Et.d20],{clearTimeout:250,disableResultBox:!0}).then(Ke=>Ke.value)):t(11,se=Fc(20)),t(12,Me=Qs(J))}),n.$$.dirty[0]&128|n.$$.dirty[1]&2&&t(50,h=(Se=P.fullFeatures[re])==null?void 0:Se.label),n.$$.dirty[0]&258&&t(53,f=ye?` (${(tt=Q.fullFeatures[ye])==null?void 0:tt.label})`:""),n.$$.dirty[1]&4718592&&t(46,d=`${h}`+f),n.$$.dirty[0]&522680|n.$$.dirty[1]&260891&&t(27,D=async()=>{var Ee;t(16,ne=1),t(45,le=1),t(44,me=1),t(11,se=""),t(13,he=""),t(41,M=""),t(14,de=""),t(15,$="");try{i||await a();const{roll:it=0,target:De=1,mult:ze=1}=((Ee=P.fullFeatures[re])==null?void 0:Ee.dieCost)||{};t(16,ne=s()*(Qs([it])>=De?ze:1)),!i&&j>=0&&await be(),Z&&(await u(),$>=V&&X&&(ye?t(44,me=0):q4.includes(re)&&t(45,le=0))),await ie()}catch(it){console.error(it),alert("wait until all rolls have finished")}const Ke={playerName:L,type:"ATTACK_ROLL",attackName:d};se!==""&&(Ke.attackRoll=se+Me),de!==""&&(Ke.critRoll=de>=20-j?`CRIT${de===20?"(20)":""}`:"--"),$!==""&&(Ke.crestName=Qg[Z]||"",Ke.crestRoll=$>=V?"ACTIVATED":"--"),he!==""&&(Ke.damageRoll=(parseInt(he)+parseInt(ae||0))*ee,i&&(Ke.isHealWeapon=!0)),Cv(N,Ke),le!==0&&K(re,-1*le),ye&&Y(Ne-ne*me)}),n.$$.dirty[0]&32800&&t(20,o=$>=V),n.$$.dirty[1]&32&&t(25,l=xn(J,!0)),n.$$.dirty[0]&64|n.$$.dirty[1]&192&&t(51,c=()=>ce.length?xn(ce):pe>1?`${pe}*${xn(x)}`:"0"),n.$$.dirty[0]&16392&&t(49,m=de>=20-j),n.$$.dirty[0]&8192|n.$$.dirty[1]&2048&&t(52,p=parseInt(he)+parseInt(ae||0)),n.$$.dirty[1]&269312&&t(23,_=`${m?"(":""}${M}${ae?` + ${ae}(crest)`:""}${m?`) * ${ee} (crit)`:""}`),n.$$.dirty[1]&2101248&&t(24,v=ee*p),n.$$.dirty[0]&8&&t(21,y=j===0?20:`${20-j} - 20`),n.$$.dirty[0]&67109120|n.$$.dirty[1]&256&&t(30,w=ye&&Ne<=0||r<=0),n.$$.dirty[0]&33554734|n.$$.dirty[1]&1572865&&t(29,A=()=>{var Bt;const Ee=Fc(20),it=20>20-j,De=20>20-j,ze=`${xn(te)}${De&&Ee>=V?`+${c()}`:""}`,Re=`/roll ${ze}${it?"+"+(ze+"+"+ze):""}${De?` [Crest Activated [${Ee}]]`:""}${it?` [CRIT[${20}]]`:""} [ID${Math.floor(Math.random()*1e6)}]`;return`&{template:atk} {{rname=[${h}](\`${Re})}} {{mod=${ye?(Bt=Q.fullFeatures[ye])==null?void 0:Bt.label:"+0"}}} {{r1=[[1d20${l}]]}} {{normal=1}} {{charname=${L}}}`}),n.$$.dirty[0]&6402|n.$$.dirty[1]&524289&&t(22,E=(Ke=!1)=>{var it;const Ee=`&{template:simple} {{rname=Attack Roll}} {{normal=1}} {{r1=${se+Me}}} {{charname=${se} + ${Me}}}`;return Ke?[`&{template:desc} {{desc=${h}${ye?` (${(it=Q.fullFeatures[ye])==null?void 0:it.label})`:""} attack roll from ${L}}}`,Ee].join(`
`):Ee}),n.$$.dirty[0]&25166082|n.$$.dirty[1]&524289&&t(19,C=(Ke=!1)=>{var it;const Ee=`&{template:simple} {{rname=Damage}} {{normal=1}} {{r1=${v}}} {{charname=${_}}}`;return Ke?[`&{template:desc} {{desc=${h}${ye?` (${(it=Q.fullFeatures[ye])==null?void 0:it.label})`:""} damage roll from ${L}}}`,Ee].join(`
`):Ee}),n.$$.dirty[0]&7913778|n.$$.dirty[1]&790529&&t(28,R=()=>{var Re;const Ke=`&{template:desc} {{desc=${h}${ye?` (${(Re=Q.fullFeatures[ye])==null?void 0:Re.label})`:""} attack from ${L}}}`,Ee=E(),it=de!==""?`&{template:simple} {{rname=Crit Roll}} {{mod=${y}}} {{r1=${m?"CRIT":"normal"} (${de})}} {{normal=1}} ${m?`{{charname=${ee}x damage}}`:""}`:"",De=Z&&$!==""?`&{template:simple} {{rname=Crest Roll}} {{mod=DC ${V}}} {{r1=${o?"ACTIVATED":"normal"} (${$})}}$ {{normal=1}} ${o?`{{charname=${Ds[Z].description}}}`:""}`:"",ze=C();return[Ke,Ee,it,De,ze].join(`
`)})},[F,Q,te,j,Z,V,ce,re,ye,Ce,We,se,Me,he,de,$,ne,i,a,C,o,y,E,_,v,l,r,D,R,A,w,L,P,O,K,X,J,x,pe,Ne,Y,M,ae,ee,me,le,d,u,s,m,h,c,p,f,we,Ae,ge,Be,ve,Pe]}class K7 extends st{constructor(e){super(),rt(this,e,G7,z7,kt,{playerName:31,onCloseModal:0,allWeapons:32,allCombatArts:1,weaponUses:33,onUpdateWeaponUses:34,crestConservesResource:35,attackCalc:36,damageCalc:2,critModifier:3,combatArtDamageBonus:37,crestType:4,crestDC:5,crestDamage:6,crestCombatArtDamageModifier:38,selectedWeapon:7,selectedCombatArt:8,curSuperiorityDies:39,setCurSuperiorityDie:40,shouldDoVisualRolls:9,toggleVisualRolls:10},null,[-1,-1,-1])}}function Ky(n,e,t){var r;const i=n.slice();i[4]=e[t];const s=(r=i[1])==null?void 0:r[i[4].key||""];return i[5]=s,i}function Xy(n,e,t){const i=n.slice();return i[8]=e[t],i[10]=t,i}function Qy(n){let e,t=n[8].label+"",i,s;return{c(){e=k("option"),i=q(t),this.h()},l(r){e=T(r,"OPTION",{});var o=I(e);i=z(o,t),o.forEach(b),this.h()},h(){e.__value=n[10],e.value=e.__value,e.selected=s=n[5]===n[8]},m(r,o){H(r,e,o),g(e,i)},p(r,o){o&1&&t!==(t=r[8].label+"")&&Le(i,t),o&3&&s!==(s=r[5]===r[8])&&(e.selected=s)},d(r){r&&b(e)}}}function Yy(n){var A;let e,t,i=n[4].prompt+"",s,r,o,l,a,c,u,f,h=(((A=n[5])==null?void 0:A.description)||"")+"",d,m,p,_,v=n[4].options,y=[];for(let E=0;E<v.length;E+=1)y[E]=Qy(Xy(n,v,E));function w(...E){return n[3](n[4],...E)}return{c(){e=k("div"),t=k("div"),s=q(i),r=U(),o=k("div"),l=k("select");for(let E=0;E<y.length;E+=1)y[E].c();u=U(),f=k("div"),d=q(h),m=U(),this.h()},l(E){e=T(E,"DIV",{class:!0});var C=I(e);t=T(C,"DIV",{class:!0});var R=I(t);s=z(R,i),R.forEach(b),r=W(C),o=T(C,"DIV",{class:!0});var D=I(o);l=T(D,"SELECT",{class:!0,name:!0});var N=I(l);for(let F=0;F<y.length;F+=1)y[F].l(N);N.forEach(b),u=W(D),f=T(D,"DIV",{class:!0});var L=I(f);d=z(L,h),L.forEach(b),D.forEach(b),m=W(C),C.forEach(b),this.h()},h(){S(t,"class","prompt svelte-1sp4qn5"),S(l,"class",a=Ze(n[1]&&n[5]!==n[4].options[0]?"selected":"")+" svelte-1sp4qn5"),S(l,"name",c=n[4].prompt),S(f,"class","description"),S(o,"class","selection svelte-1sp4qn5"),S(e,"class","query svelte-1sp4qn5")},m(E,C){H(E,e,C),g(e,t),g(t,s),g(e,r),g(e,o),g(o,l);for(let R=0;R<y.length;R+=1)y[R].m(l,null);g(o,u),g(o,f),g(f,d),g(e,m),p||(_=_e(l,"change",w),p=!0)},p(E,C){var R;if(n=E,C&1&&i!==(i=n[4].prompt+"")&&Le(s,i),C&3){v=n[4].options;let D;for(D=0;D<v.length;D+=1){const N=Xy(n,v,D);y[D]?y[D].p(N,C):(y[D]=Qy(N),y[D].c(),y[D].m(l,null))}for(;D<y.length;D+=1)y[D].d(1);y.length=v.length}C&3&&a!==(a=Ze(n[1]&&n[5]!==n[4].options[0]?"selected":"")+" svelte-1sp4qn5")&&S(l,"class",a),C&1&&c!==(c=n[4].prompt)&&S(l,"name",c),C&3&&h!==(h=(((R=n[5])==null?void 0:R.description)||"")+"")&&Le(d,h)},d(E){E&&b(e),Ft(y,E),p=!1,_()}}}function X7(n){let e,t=n[0],i=[];for(let s=0;s<t.length;s+=1)i[s]=Yy(Ky(n,t,s));return{c(){e=k("div");for(let s=0;s<i.length;s+=1)i[s].c();this.h()},l(s){e=T(s,"DIV",{class:!0});var r=I(e);for(let o=0;o<i.length;o+=1)i[o].l(r);r.forEach(b),this.h()},h(){S(e,"class","container svelte-1sp4qn5")},m(s,r){H(s,e,r);for(let o=0;o<i.length;o+=1)i[o].m(e,null)},p(s,[r]){if(r&7){t=s[0];let o;for(o=0;o<t.length;o+=1){const l=Ky(s,t,o);i[o]?i[o].p(l,r):(i[o]=Yy(l),i[o].c(),i[o].m(e,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=t.length}},i:Xe,o:Xe,d(s){s&&b(e),Ft(i,s)}}}function Q7(n,e,t){let{queries:i}=e,{selections:s}=e,{onUpdateQuerySelection:r}=e;const o=(l,a)=>{var c;r(l.key,l.options[parseInt((c=a==null?void 0:a.currentTarget)==null?void 0:c.value)])};return n.$$set=l=>{"queries"in l&&t(0,i=l.queries),"selections"in l&&t(1,s=l.selections),"onUpdateQuerySelection"in l&&t(2,r=l.onUpdateQuerySelection)},[i,s,r,o]}class Y7 extends st{constructor(e){super(),rt(this,e,Q7,X7,kt,{queries:0,selections:1,onUpdateQuerySelection:2})}}function Jy(n,e,t){const i=n.slice();return i[80]=e[t],i}function Zy(n){let e,t,i,s,r,o,l,a,c,u,f,h,d,m,p,_,v,y=xn(n[48])+"",w,A,E,C,R=n[41]?"HP Restored":"Damage",D,N,L,F,P,Q,O=xn(n[46])+"",K,X,J,te,j,x=n[23]+n[22]+"",Z,V,ce,pe=(n[22]>0?"+"+n[22]:n[22])+"",re,ye,Ne,Y,Ce,We,se,Me,he,M,ae,de,ee,$,ne,me,le=n[31]&&xy(n),ie=n[33]&&$y(n),be=n[34].length&&e2(n),we=n[32]&&t2(n),Ae=n[35].length&&n2(n),ge=n[30].length>0&&i2(n),Be=n[8]&&s2(n),ve=n[21]&&h2(n),Pe=n[20].length&&d2(n),Se=n[19].length&&m2(n),tt=n[45]>=0&&p2(n),Ke=n[45]<0&&g2(),Ee=n[8]&&v2(n),it=n[37]&&_2(n);return{c(){e=k("div"),t=k("div"),i=k("h2"),s=k("span"),r=q("Attack: 1d20"),o=U(),l=k("span"),le&&le.c(),a=U(),ie&&ie.c(),c=U(),be&&be.c(),u=U(),we&&we.c(),f=U(),Ae&&Ae.c(),h=U(),ge&&ge.c(),d=U(),m=k("h2"),p=q("= 1d20 "),_=k("span"),v=q("+ "),w=q(y),A=U(),E=k("div"),C=k("h2"),D=q(R),N=q(": "),Be&&Be.c(),L=U(),F=k("h2"),P=q("= "),Q=k("span"),K=q(O),X=U(),J=k("div"),te=k("h2"),j=q("Crit Modifier: "),Z=q(x),V=k("span"),ce=q("(Dex"),re=q(pe),ye=q(")"),Ne=U(),Y=k("span"),ve&&ve.c(),Ce=U(),Pe&&Pe.c(),We=U(),Se&&Se.c(),se=U(),Me=k("h2"),tt&&tt.c(),he=U(),Ke&&Ke.c(),M=U(),ae=k("div"),de=k("h2"),ee=q("Range: "),Ee&&Ee.c(),$=U(),ne=k("div"),me=U(),it&&it.c(),this.h()},l(De){e=T(De,"DIV",{class:!0});var ze=I(e);t=T(ze,"DIV",{class:!0});var Re=I(t);i=T(Re,"H2",{class:!0});var ut=I(i);s=T(ut,"SPAN",{class:!0});var Bt=I(s);r=z(Bt,"Attack: 1d20"),Bt.forEach(b),o=W(ut),l=T(ut,"SPAN",{class:!0});var gt=I(l);le&&le.l(gt),a=W(gt),ie&&ie.l(gt),c=W(gt),be&&be.l(gt),u=W(gt),we&&we.l(gt),f=W(gt),Ae&&Ae.l(gt),h=W(gt),ge&&ge.l(gt),gt.forEach(b),ut.forEach(b),Re.forEach(b),d=W(ze),m=T(ze,"H2",{class:!0});var At=I(m);p=z(At,"= 1d20 "),_=T(At,"SPAN",{class:!0});var jt=I(_);v=z(jt,"+ "),w=z(jt,y),jt.forEach(b),At.forEach(b),A=W(ze),E=T(ze,"DIV",{class:!0});var nn=I(E);C=T(nn,"H2",{class:!0});var Zt=I(C);D=z(Zt,R),N=z(Zt,": "),Be&&Be.l(Zt),Zt.forEach(b),nn.forEach(b),L=W(ze),F=T(ze,"H2",{class:!0});var ft=I(F);P=z(ft,"= "),Q=T(ft,"SPAN",{});var un=I(Q);K=z(un,O),un.forEach(b),ft.forEach(b),X=W(ze),J=T(ze,"DIV",{class:!0});var tn=I(J);te=T(tn,"H2",{class:!0});var An=I(te);j=z(An,"Crit Modifier: "),Z=z(An,x),V=T(An,"SPAN",{class:!0});var vn=I(V);ce=z(vn,"(Dex"),re=z(vn,pe),ye=z(vn,")"),vn.forEach(b),Ne=W(An),Y=T(An,"SPAN",{class:!0});var Ln=I(Y);ve&&ve.l(Ln),Ce=W(Ln),Pe&&Pe.l(Ln),We=W(Ln),Se&&Se.l(Ln),Ln.forEach(b),An.forEach(b),tn.forEach(b),se=W(ze),Me=T(ze,"H2",{class:!0});var Cn=I(Me);tt&&tt.l(Cn),he=W(Cn),Ke&&Ke.l(Cn),Cn.forEach(b),M=W(ze),ae=T(ze,"DIV",{class:!0});var Wn=I(ae);de=T(Wn,"H2",{class:!0});var di=I(de);ee=z(di,"Range: "),Ee&&Ee.l(di),di.forEach(b),Wn.forEach(b),$=W(ze),ne=T(ze,"DIV",{class:!0}),I(ne).forEach(b),me=W(ze),it&&it.l(ze),ze.forEach(b),this.h()},h(){S(s,"class","calc-label"),S(l,"class","modifiers svelte-bl52el"),S(i,"class","content svelte-bl52el"),S(t,"class","calc attack-container svelte-bl52el"),S(_,"class","modifiers svelte-bl52el"),S(m,"class","result attack-condensed svelte-bl52el"),S(C,"class","content svelte-bl52el"),S(E,"class","calc damage-container svelte-bl52el"),S(F,"class","result damage-condensed svelte-bl52el"),S(V,"class","source svelte-bl52el"),S(Y,"class","modifiers svelte-bl52el"),S(te,"class","content svelte-bl52el"),S(J,"class","calc crit-container svelte-bl52el"),S(Me,"class","result crit-condensed svelte-bl52el"),S(de,"class","content svelte-bl52el"),S(ae,"class","calc range-container svelte-bl52el"),S(ne,"class","empty range-condensed"),S(e,"class","calcs svelte-bl52el")},m(De,ze){H(De,e,ze),g(e,t),g(t,i),g(i,s),g(s,r),g(i,o),g(i,l),le&&le.m(l,null),g(l,a),ie&&ie.m(l,null),g(l,c),be&&be.m(l,null),g(l,u),we&&we.m(l,null),g(l,f),Ae&&Ae.m(l,null),g(l,h),ge&&ge.m(l,null),g(e,d),g(e,m),g(m,p),g(m,_),g(_,v),g(_,w),g(e,A),g(e,E),g(E,C),g(C,D),g(C,N),Be&&Be.m(C,null),g(e,L),g(e,F),g(F,P),g(F,Q),g(Q,K),g(e,X),g(e,J),g(J,te),g(te,j),g(te,Z),g(te,V),g(V,ce),g(V,re),g(V,ye),g(te,Ne),g(te,Y),ve&&ve.m(Y,null),g(Y,Ce),Pe&&Pe.m(Y,null),g(Y,We),Se&&Se.m(Y,null),g(e,se),g(e,Me),tt&&tt.m(Me,null),g(Me,he),Ke&&Ke.m(Me,null),g(e,M),g(e,ae),g(ae,de),g(de,ee),Ee&&Ee.m(de,null),g(e,$),g(e,ne),g(e,me),it&&it.m(e,null)},p(De,ze){De[31]?le?le.p(De,ze):(le=xy(De),le.c(),le.m(l,a)):le&&(le.d(1),le=null),De[33]?ie?ie.p(De,ze):(ie=$y(De),ie.c(),ie.m(l,c)):ie&&(ie.d(1),ie=null),De[34].length?be?be.p(De,ze):(be=e2(De),be.c(),be.m(l,u)):be&&(be.d(1),be=null),De[32]?we?we.p(De,ze):(we=t2(De),we.c(),we.m(l,f)):we&&(we.d(1),we=null),De[35].length?Ae?Ae.p(De,ze):(Ae=n2(De),Ae.c(),Ae.m(l,h)):Ae&&(Ae.d(1),Ae=null),De[30].length>0?ge?ge.p(De,ze):(ge=i2(De),ge.c(),ge.m(l,null)):ge&&(ge.d(1),ge=null),ze[1]&131072&&y!==(y=xn(De[48])+"")&&Le(w,y),ze[1]&1024&&R!==(R=De[41]?"HP Restored":"Damage")&&Le(D,R),De[8]?Be?Be.p(De,ze):(Be=s2(De),Be.c(),Be.m(C,null)):Be&&(Be.d(1),Be=null),ze[1]&32768&&O!==(O=xn(De[46])+"")&&Le(K,O),ze[0]&12582912&&x!==(x=De[23]+De[22]+"")&&Le(Z,x),ze[0]&4194304&&pe!==(pe=(De[22]>0?"+"+De[22]:De[22])+"")&&Le(re,pe),De[21]?ve?ve.p(De,ze):(ve=h2(De),ve.c(),ve.m(Y,Ce)):ve&&(ve.d(1),ve=null),De[20].length?Pe?Pe.p(De,ze):(Pe=d2(De),Pe.c(),Pe.m(Y,We)):Pe&&(Pe.d(1),Pe=null),De[19].length?Se?Se.p(De,ze):(Se=m2(De),Se.c(),Se.m(Y,null)):Se&&(Se.d(1),Se=null),De[45]>=0?tt?tt.p(De,ze):(tt=p2(De),tt.c(),tt.m(Me,he)):tt&&(tt.d(1),tt=null),De[45]<0?Ke||(Ke=g2(),Ke.c(),Ke.m(Me,null)):Ke&&(Ke.d(1),Ke=null),De[8]?Ee?Ee.p(De,ze):(Ee=v2(De),Ee.c(),Ee.m(de,null)):Ee&&(Ee.d(1),Ee=null),De[37]?it?it.p(De,ze):(it=_2(De),it.c(),it.m(e,null)):it&&(it.d(1),it=null)},d(De){De&&b(e),le&&le.d(),ie&&ie.d(),be&&be.d(),we&&we.d(),Ae&&Ae.d(),ge&&ge.d(),Be&&Be.d(),ve&&ve.d(),Pe&&Pe.d(),Se&&Se.d(),tt&&tt.d(),Ke&&Ke.d(),Ee&&Ee.d(),it&&it.d()}}}function xy(n){let e,t,i,s,r;return{c(){e=k("span"),t=q("+ "),i=q(n[31]),s=k("span"),r=q("(dex)"),this.h()},l(o){e=T(o,"SPAN",{});var l=I(e);t=z(l,"+ "),i=z(l,n[31]),s=T(l,"SPAN",{class:!0});var a=I(s);r=z(a,"(dex)"),a.forEach(b),l.forEach(b),this.h()},h(){S(s,"class","source svelte-bl52el")},m(o,l){H(o,e,l),g(e,t),g(e,i),g(e,s),g(s,r)},p(o,l){l[1]&1&&Le(i,o[31])},d(o){o&&b(e)}}}function $y(n){let e,t=As(n[33],!0)+"",i,s,r;return{c(){e=k("span"),i=q(t),s=k("span"),r=q("(weapon)"),this.h()},l(o){e=T(o,"SPAN",{});var l=I(e);i=z(l,t),s=T(l,"SPAN",{class:!0});var a=I(s);r=z(a,"(weapon)"),a.forEach(b),l.forEach(b),this.h()},h(){S(s,"class","source svelte-bl52el")},m(o,l){H(o,e,l),g(e,i),g(e,s),g(s,r)},p(o,l){l[1]&4&&t!==(t=As(o[33],!0)+"")&&Le(i,t)},d(o){o&&b(e)}}}function e2(n){let e,t,i=xn(n[34])+"",s,r,o;return{c(){e=k("span"),t=q("+ "),s=q(i),r=k("span"),o=q("(combat art)"),this.h()},l(l){e=T(l,"SPAN",{});var a=I(e);t=z(a,"+ "),s=z(a,i),r=T(a,"SPAN",{class:!0});var c=I(r);o=z(c,"(combat art)"),c.forEach(b),a.forEach(b),this.h()},h(){S(r,"class","source svelte-bl52el")},m(l,a){H(l,e,a),g(e,t),g(e,s),g(e,r),g(r,o)},p(l,a){a[1]&8&&i!==(i=xn(l[34])+"")&&Le(s,i)},d(l){l&&b(e)}}}function t2(n){let e,t=As(n[32],!0)+"",i,s,r;return{c(){e=k("span"),i=q(t),s=k("span"),r=q("(distance)"),this.h()},l(o){e=T(o,"SPAN",{});var l=I(e);i=z(l,t),s=T(l,"SPAN",{class:!0});var a=I(s);r=z(a,"(distance)"),a.forEach(b),l.forEach(b),this.h()},h(){S(s,"class","source svelte-bl52el")},m(o,l){H(o,e,l),g(e,i),g(e,s),g(s,r)},p(o,l){l[1]&2&&t!==(t=As(o[32],!0)+"")&&Le(i,t)},d(o){o&&b(e)}}}function n2(n){let e,t,i=xn(n[35])+"",s,r,o;return{c(){e=k("span"),t=q("+ "),s=q(i),r=k("span"),o=q("(combat skills)"),this.h()},l(l){e=T(l,"SPAN",{});var a=I(e);t=z(a,"+ "),s=z(a,i),r=T(a,"SPAN",{class:!0});var c=I(r);o=z(c,"(combat skills)"),c.forEach(b),a.forEach(b),this.h()},h(){S(r,"class","source svelte-bl52el")},m(l,a){H(l,e,a),g(e,t),g(e,s),g(e,r),g(r,o)},p(l,a){a[1]&16&&i!==(i=xn(l[35])+"")&&Le(s,i)},d(l){l&&b(e)}}}function i2(n){let e,t,i=xn(za(n[30]))+"",s,r,o;return{c(){e=k("span"),t=q("+ "),s=q(i),r=k("span"),o=q("(optionals)"),this.h()},l(l){e=T(l,"SPAN",{});var a=I(e);t=z(a,"+ "),s=z(a,i),r=T(a,"SPAN",{class:!0});var c=I(r);o=z(c,"(optionals)"),c.forEach(b),a.forEach(b),this.h()},h(){S(r,"class","source svelte-bl52el")},m(l,a){H(l,e,a),g(e,t),g(e,s),g(e,r),g(r,o)},p(l,a){a[0]&1073741824&&i!==(i=xn(za(l[30]))+"")&&Le(s,i)},d(l){l&&b(e)}}}function s2(n){let e,t,i,s,r,o,l,a=n[16]&&(n[29]||[]).length<=1&&r2(n),c=n[29]&&n[29].length>1&&o2(n),u=n[27].length&&a2(n),f=n[25]&&c2(n),h=n[26].length&&u2(n),d=n[24].length&&f2(n);return{c(){e=q(n[28]),a&&a.c(),t=et(),c&&c.c(),i=U(),s=k("span"),u&&u.c(),r=U(),f&&f.c(),o=U(),h&&h.c(),l=U(),d&&d.c(),this.h()},l(m){e=z(m,n[28]),a&&a.l(m),t=et(),c&&c.l(m),i=W(m),s=T(m,"SPAN",{class:!0});var p=I(s);u&&u.l(p),r=W(p),f&&f.l(p),o=W(p),h&&h.l(p),l=W(p),d&&d.l(p),p.forEach(b),this.h()},h(){S(s,"class","modifiers svelte-bl52el")},m(m,p){H(m,e,p),a&&a.m(m,p),H(m,t,p),c&&c.m(m,p),H(m,i,p),H(m,s,p),u&&u.m(s,null),g(s,r),f&&f.m(s,null),g(s,o),h&&h.m(s,null),g(s,l),d&&d.m(s,null)},p(m,p){p[0]&268435456&&Le(e,m[28]),m[16]&&(m[29]||[]).length<=1?a?a.p(m,p):(a=r2(m),a.c(),a.m(t.parentNode,t)):a&&(a.d(1),a=null),m[29]&&m[29].length>1?c?c.p(m,p):(c=o2(m),c.c(),c.m(i.parentNode,i)):c&&(c.d(1),c=null),m[27].length?u?u.p(m,p):(u=a2(m),u.c(),u.m(s,r)):u&&(u.d(1),u=null),m[25]?f?f.p(m,p):(f=c2(m),f.c(),f.m(s,o)):f&&(f.d(1),f=null),m[26].length?h?h.p(m,p):(h=u2(m),h.c(),h.m(s,l)):h&&(h.d(1),h=null),m[24].length?d?d.p(m,p):(d=f2(m),d.c(),d.m(s,null)):d&&(d.d(1),d=null)},d(m){m&&b(e),a&&a.d(m),m&&b(t),c&&c.d(m),m&&b(i),m&&b(s),u&&u.d(),f&&f.d(),h&&h.d(),d&&d.d()}}}function r2(n){let e,t,i,s,r;return{c(){e=k("span"),t=q("("),i=q(n[47]),s=q(")"),r=U()},l(o){e=T(o,"SPAN",{});var l=I(e);t=z(l,"("),i=z(l,n[47]),s=z(l,")"),l.forEach(b),r=W(o)},m(o,l){H(o,e,l),g(e,t),g(e,i),g(e,s),H(o,r,l)},p(o,l){l[1]&65536&&Le(i,o[47])},d(o){o&&b(e),o&&b(r)}}}function o2(n){let e,t,i,s,r,o=n[29],l=[];for(let a=0;a<o.length;a+=1)l[a]=l2(Jy(n,o,a));return{c(){e=k("select"),t=k("option"),i=q("-");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){e=T(a,"SELECT",{});var c=I(e);t=T(c,"OPTION",{});var u=I(t);i=z(u,"-"),u.forEach(b);for(let f=0;f<l.length;f+=1)l[f].l(c);c.forEach(b),this.h()},h(){t.__value="",t.value=t.__value},m(a,c){H(a,e,c),g(e,t),g(t,i);for(let u=0;u<l.length;u+=1)l[u].m(e,null);s||(r=_e(e,"change",n[75]),s=!0)},p(a,c){if(c[0]&536936448){o=a[29];let u;for(u=0;u<o.length;u+=1){const f=Jy(a,o,u);l[u]?l[u].p(f,c):(l[u]=l2(f),l[u].c(),l[u].m(e,null))}for(;u<l.length;u+=1)l[u].d(1);l.length=o.length}},d(a){a&&b(e),Ft(l,a),s=!1,r()}}}function l2(n){let e,t=zs[n[80]]+"",i,s,r;return{c(){e=k("option"),i=q(t),this.h()},l(o){e=T(o,"OPTION",{});var l=I(e);i=z(l,t),l.forEach(b),this.h()},h(){e.__value=s=n[80],e.value=e.__value,e.selected=r=n[80]===n[16]},m(o,l){H(o,e,l),g(e,i)},p(o,l){l[0]&536870912&&t!==(t=zs[o[80]]+"")&&Le(i,t),l[0]&536870912&&s!==(s=o[80])&&(e.__value=s,e.value=e.__value),l[0]&536936448&&r!==(r=o[80]===o[16])&&(e.selected=r)},d(o){o&&b(e)}}}function a2(n){let e,t,i=xn(n[27])+"",s,r,o;return{c(){e=k("span"),t=q("+ "),s=q(i),r=k("span"),o=q("(weapon)"),this.h()},l(l){e=T(l,"SPAN",{});var a=I(e);t=z(a,"+ "),s=z(a,i),r=T(a,"SPAN",{class:!0});var c=I(r);o=z(c,"(weapon)"),c.forEach(b),a.forEach(b),this.h()},h(){S(r,"class","source svelte-bl52el")},m(l,a){H(l,e,a),g(e,t),g(e,s),g(e,r),g(r,o)},p(l,a){a[0]&134217728&&i!==(i=xn(l[27])+"")&&Le(s,i)},d(l){l&&b(e)}}}function c2(n){let e,t,i,s,r;return{c(){e=k("span"),t=q("+ "),i=q(n[25]),s=k("span"),r=q("(Heal Plus)"),this.h()},l(o){e=T(o,"SPAN",{});var l=I(e);t=z(l,"+ "),i=z(l,n[25]),s=T(l,"SPAN",{class:!0});var a=I(s);r=z(a,"(Heal Plus)"),a.forEach(b),l.forEach(b),this.h()},h(){S(s,"class","source svelte-bl52el")},m(o,l){H(o,e,l),g(e,t),g(e,i),g(e,s),g(s,r)},p(o,l){l[0]&33554432&&Le(i,o[25])},d(o){o&&b(e)}}}function u2(n){let e,t,i,s,r;return{c(){e=k("span"),t=q("+ "),i=q(n[26]),s=k("span"),r=q("(combat art)"),this.h()},l(o){e=T(o,"SPAN",{});var l=I(e);t=z(l,"+ "),i=z(l,n[26]),s=T(l,"SPAN",{class:!0});var a=I(s);r=z(a,"(combat art)"),a.forEach(b),l.forEach(b),this.h()},h(){S(s,"class","source svelte-bl52el")},m(o,l){H(o,e,l),g(e,t),g(e,i),g(e,s),g(s,r)},p(o,l){l[0]&67108864&&Le(i,o[26])},d(o){o&&b(e)}}}function f2(n){let e,t,i=xn(za(n[24]))+"",s,r,o;return{c(){e=k("span"),t=q("+ "),s=q(i),r=k("span"),o=q("(options)"),this.h()},l(l){e=T(l,"SPAN",{});var a=I(e);t=z(a,"+ "),s=z(a,i),r=T(a,"SPAN",{class:!0});var c=I(r);o=z(c,"(options)"),c.forEach(b),a.forEach(b),this.h()},h(){S(r,"class","source svelte-bl52el")},m(l,a){H(l,e,a),g(e,t),g(e,s),g(e,r),g(r,o)},p(l,a){a[0]&16777216&&i!==(i=xn(za(l[24]))+"")&&Le(s,i)},d(l){l&&b(e)}}}function h2(n){let e,t=(n[21]>0?"+ "+n[21]:n[21])+"",i,s,r;return{c(){e=k("span"),i=q(t),s=k("span"),r=q("(weapon)"),this.h()},l(o){e=T(o,"SPAN",{});var l=I(e);i=z(l,t),s=T(l,"SPAN",{class:!0});var a=I(s);r=z(a,"(weapon)"),a.forEach(b),l.forEach(b),this.h()},h(){S(s,"class","source svelte-bl52el")},m(o,l){H(o,e,l),g(e,i),g(e,s),g(s,r)},p(o,l){l[0]&2097152&&t!==(t=(o[21]>0?"+ "+o[21]:o[21])+"")&&Le(i,t)},d(o){o&&b(e)}}}function d2(n){let e,t,i=xn(n[20])+"",s,r,o;return{c(){e=k("span"),t=q("+ "),s=q(i),r=k("span"),o=q("(combat art)"),this.h()},l(l){e=T(l,"SPAN",{});var a=I(e);t=z(a,"+ "),s=z(a,i),r=T(a,"SPAN",{class:!0});var c=I(r);o=z(c,"(combat art)"),c.forEach(b),a.forEach(b),this.h()},h(){S(r,"class","source svelte-bl52el")},m(l,a){H(l,e,a),g(e,t),g(e,s),g(e,r),g(r,o)},p(l,a){a[0]&1048576&&i!==(i=xn(l[20])+"")&&Le(s,i)},d(l){l&&b(e)}}}function m2(n){let e,t,i,s,r;return{c(){e=k("span"),t=q("+ "),i=q(n[19]),s=k("span"),r=q("(options)"),this.h()},l(o){e=T(o,"SPAN",{});var l=I(e);t=z(l,"+ "),i=z(l,n[19]),s=T(l,"SPAN",{class:!0});var a=I(s);r=z(a,"(options)"),a.forEach(b),l.forEach(b),this.h()},h(){S(s,"class","source svelte-bl52el")},m(o,l){H(o,e,l),g(e,t),g(e,i),g(e,s),g(s,r)},p(o,l){l[0]&524288&&Le(i,o[19])},d(o){o&&b(e)}}}function p2(n){let e,t=Zb(n[45])+"",i;return{c(){e=q("= "),i=q(t)},l(s){e=z(s,"= "),i=z(s,t)},m(s,r){H(s,e,r),H(s,i,r)},p(s,r){r[1]&16384&&t!==(t=Zb(s[45])+"")&&Le(i,t)},d(s){s&&b(e),s&&b(i)}}}function g2(n){let e;return{c(){e=q("= Can't Crit")},l(t){e=z(t,"= Can't Crit")},m(t,i){H(t,e,i)},d(t){t&&b(e)}}}function v2(n){let e,t,i,s=n[43]!==n[44]&&b2(n);return{c(){e=q(n[44]),t=U(),s&&s.c(),i=et()},l(r){e=z(r,n[44]),t=W(r),s&&s.l(r),i=et()},m(r,o){H(r,e,o),H(r,t,o),s&&s.m(r,o),H(r,i,o)},p(r,o){o[1]&8192&&Le(e,r[44]),r[43]!==r[44]?s?s.p(r,o):(s=b2(r),s.c(),s.m(i.parentNode,i)):s&&(s.d(1),s=null)},d(r){r&&b(e),r&&b(t),s&&s.d(r),r&&b(i)}}}function b2(n){let e,t;return{c(){e=q("to "),t=q(n[43])},l(i){e=z(i,"to "),t=z(i,n[43])},m(i,s){H(i,e,s),H(i,t,s)},p(i,s){s[1]&4096&&Le(t,i[43])},d(i){i&&b(e),i&&b(t)}}}function _2(n){let e,t,i,s,r,o,l,a,c;return{c(){e=k("div"),t=k("h2"),i=q("Crest of "),s=q(n[53]),r=q(" (DC "),o=q(n[49]),l=q(`):
							`),a=k("span"),c=q("Hover your crest to see its effect"),this.h()},l(u){e=T(u,"DIV",{class:!0});var f=I(e);t=T(f,"H2",{class:!0});var h=I(t);i=z(h,"Crest of "),s=z(h,n[53]),r=z(h," (DC "),o=z(h,n[49]),l=z(h,`):
							`),a=T(h,"SPAN",{class:!0});var d=I(a);c=z(d,"Hover your crest to see its effect"),d.forEach(b),h.forEach(b),f.forEach(b),this.h()},h(){S(a,"class","crest-description svelte-bl52el"),S(t,"class","content svelte-bl52el"),S(e,"class","crest-container svelte-bl52el")},m(u,f){H(u,e,f),g(e,t),g(t,i),g(t,s),g(t,r),g(t,o),g(t,l),g(t,a),g(a,c)},p(u,f){f[1]&4194304&&Le(s,u[53]),f[1]&262144&&Le(o,u[49])},d(u){u&&b(e)}}}function y2(n){let e,t,i;return t=new K7({props:{playerName:n[0],critModifier:n[45],crestCombatArtDamageModifier:n[51],selectedWeapon:n[8],weaponUses:n[6],onUpdateWeaponUses:n[7],crestConservesResource:n[50],selectedCombatArt:n[10],allWeapons:n[4],allCombatArts:n[5],curSuperiorityDies:n[12],setCurSuperiorityDie:n[13],onCloseModal:n[76],attackCalc:n[48],damageCalc:n[46],crestDC:n[37]?n[49]:1/0,crestDamage:n[52],crestType:n[37]?n[36]:"",combatArtDamageBonus:n[26],shouldDoVisualRolls:n[17],toggleVisualRolls:n[40]}}),{c(){e=k("div"),ke(t.$$.fragment),this.h()},l(s){e=T(s,"DIV",{class:!0});var r=I(e);Oe(t.$$.fragment,r),r.forEach(b),this.h()},h(){S(e,"class","attack-roll-container")},m(s,r){H(s,e,r),Te(t,e,null),i=!0},p(s,r){const o={};r[0]&1&&(o.playerName=s[0]),r[1]&16384&&(o.critModifier=s[45]),r[1]&1048576&&(o.crestCombatArtDamageModifier=s[51]),r[0]&256&&(o.selectedWeapon=s[8]),r[0]&64&&(o.weaponUses=s[6]),r[0]&128&&(o.onUpdateWeaponUses=s[7]),r[1]&524288&&(o.crestConservesResource=s[50]),r[0]&1024&&(o.selectedCombatArt=s[10]),r[0]&16&&(o.allWeapons=s[4]),r[0]&32&&(o.allCombatArts=s[5]),r[0]&4096&&(o.curSuperiorityDies=s[12]),r[0]&8192&&(o.setCurSuperiorityDie=s[13]),r[1]&256&&(o.onCloseModal=s[76]),r[1]&131072&&(o.attackCalc=s[48]),r[1]&32768&&(o.damageCalc=s[46]),r[1]&262208&&(o.crestDC=s[37]?s[49]:1/0),r[1]&2097152&&(o.crestDamage=s[52]),r[1]&96&&(o.crestType=s[37]?s[36]:""),r[0]&67108864&&(o.combatArtDamageBonus=s[26]),r[0]&131072&&(o.shouldDoVisualRolls=s[17]),r[1]&512&&(o.toggleVisualRolls=s[40]),t.$set(o)},i(s){i||(B(t.$$.fragment,s),i=!0)},o(s){G(t.$$.fragment,s),i=!1},d(s){s&&b(e),Ie(t)}}}function S2(n){let e,t,i,s,r,o;return{c(){e=k("div"),t=k("button"),i=q("ATTACK"),this.h()},l(l){e=T(l,"DIV",{class:!0});var a=I(e);t=T(a,"BUTTON",{class:!0});var c=I(t);i=z(c,"ATTACK"),c.forEach(b),a.forEach(b),this.h()},h(){t.disabled=s=!n[8],S(t,"class","svelte-bl52el"),lt(t,"height","100%"),S(e,"class","rolls svelte-bl52el")},m(l,a){H(l,e,a),g(e,t),g(t,i),r||(o=_e(t,"click",function(){Mn(n[42])&&n[42].apply(this,arguments)}),r=!0)},p(l,a){n=l,a[0]&256&&s!==(s=!n[8])&&(t.disabled=s)},d(l){l&&b(e),r=!1,o()}}}function E2(n){let e,t,i,s,r,o,l,a;return t=new Y7({props:{queries:n[38],selections:n[15],onUpdateQuerySelection:n[54]}}),{c(){e=k("div"),ke(t.$$.fragment),i=U(),s=k("button"),r=q("Reset Queries"),this.h()},l(c){e=T(c,"DIV",{class:!0});var u=I(e);Oe(t.$$.fragment,u),i=W(u),s=T(u,"BUTTON",{class:!0});var f=I(s);r=z(f,"Reset Queries"),f.forEach(b),u.forEach(b),this.h()},h(){S(s,"class","reset svelte-bl52el"),S(e,"class","options svelte-bl52el")},m(c,u){H(c,e,u),Te(t,e,null),g(e,i),g(e,s),g(s,r),o=!0,l||(a=_e(s,"click",n[77]),l=!0)},p(c,u){const f={};u[1]&128&&(f.queries=c[38]),u[0]&32768&&(f.selections=c[15]),u[1]&8388608&&(f.onUpdateQuerySelection=c[54]),t.$set(f)},i(c){o||(B(t.$$.fragment,c),o=!0)},o(c){G(t.$$.fragment,c),o=!1},d(c){c&&b(e),Ie(t),l=!1,a()}}}function J7(n){let e,t,i,s,r,o,l,a;i=new V7({props:{damageTypeSelection:n[16],weaponsToFeatures:n[18],allCombatArts:n[5],allWeapons:n[4],equippedCombatArts:n[2],equippedWeapons:n[3],selectedWeapon:n[8],setSelectedWeapon:n[9],selectedCombatArt:n[10],setSelectedCombatArt:n[11],distanceToTarget:n[14],setDistanceToTarget:n[55],equippedClass:n[1]}});let c=!n[39]&&Zy(n),u=n[39]&&y2(n),f=!n[39]&&S2(n),h=n[38].length>0&&E2(n);return{c(){e=k("div"),t=k("div"),ke(i.$$.fragment),s=U(),c&&c.c(),r=U(),u&&u.c(),o=U(),f&&f.c(),l=U(),h&&h.c(),this.h()},l(d){e=T(d,"DIV",{class:!0});var m=I(e);t=T(m,"DIV",{class:!0});var p=I(t);Oe(i.$$.fragment,p),s=W(p),c&&c.l(p),r=W(p),u&&u.l(p),o=W(p),f&&f.l(p),l=W(p),h&&h.l(p),p.forEach(b),m.forEach(b),this.h()},h(){S(t,"class",Ze(Zi("container"))+" svelte-bl52el"),S(e,"class","outer svelte-bl52el")},m(d,m){H(d,e,m),g(e,t),Te(i,t,null),g(t,s),c&&c.m(t,null),g(t,r),u&&u.m(t,null),g(t,o),f&&f.m(t,null),g(t,l),h&&h.m(t,null),a=!0},p(d,m){const p={};m[0]&65536&&(p.damageTypeSelection=d[16]),m[0]&262144&&(p.weaponsToFeatures=d[18]),m[0]&32&&(p.allCombatArts=d[5]),m[0]&16&&(p.allWeapons=d[4]),m[0]&4&&(p.equippedCombatArts=d[2]),m[0]&8&&(p.equippedWeapons=d[3]),m[0]&256&&(p.selectedWeapon=d[8]),m[0]&512&&(p.setSelectedWeapon=d[9]),m[0]&1024&&(p.selectedCombatArt=d[10]),m[0]&2048&&(p.setSelectedCombatArt=d[11]),m[0]&16384&&(p.distanceToTarget=d[14]),m[0]&2&&(p.equippedClass=d[1]),i.$set(p),d[39]?c&&(c.d(1),c=null):c?c.p(d,m):(c=Zy(d),c.c(),c.m(t,r)),d[39]?u?(u.p(d,m),m[1]&256&&B(u,1)):(u=y2(d),u.c(),B(u,1),u.m(t,o)):u&&(He(),G(u,1,1,()=>{u=null}),qe()),d[39]?f&&(f.d(1),f=null):f?f.p(d,m):(f=S2(d),f.c(),f.m(t,l)),d[38].length>0?h?(h.p(d,m),m[1]&128&&B(h,1)):(h=E2(d),h.c(),B(h,1),h.m(t,null)):h&&(He(),G(h,1,1,()=>{h=null}),qe())},i(d){a||(B(i.$$.fragment,d),B(u),B(h),a=!0)},o(d){G(i.$$.fragment,d),G(u),G(h),a=!1},d(d){d&&b(e),Ie(i),c&&c.d(),u&&u.d(),f&&f.d(),h&&h.d()}}}function Z7(n,e,t){let i,s,r,o,l,a,c,u,f,h,d,m,p,_,v,y,w,A,E,C,R,D,N,L,F,P,Q,O,K,X,J,te,j,x,Z,V,ce,pe,re,ye,Ne,Y,Ce,We,se,Me,he,M,ae,de;Bn(hs.MODAL);let{playerName:ee}=e,{equippedClass:$}=e,{equippedCombatArts:ne}=e,{equippedCombatSkills:me}=e,{equippedWeapons:le}=e,{playerCrest:ie}=e,{playerStats:be}=e,{allWeapons:we}=e,{allCombatArts:Ae}=e,{weaponUses:ge}=e,{onUpdateWeaponUses:Be}=e,{selectedWeapon:ve}=e,{setSelectedWeapon:Pe}=e,{selectedCombatArt:Se}=e,{setSelectedCombatArt:tt}=e,{curSuperiorityDies:Ke}=e,{setCurSuperiorityDie:Ee}=e,it=1;const De=ft=>t(14,it=ft);let ze,Re={current:null},ut,Bt={current:Q},gt="",At=!0;const jt=ft=>{t(16,gt=ft.currentTarget.value)},nn=()=>t(39,ze=!1),Zt=()=>{t(15,ut=void 0)};return n.$$set=ft=>{"playerName"in ft&&t(0,ee=ft.playerName),"equippedClass"in ft&&t(1,$=ft.equippedClass),"equippedCombatArts"in ft&&t(2,ne=ft.equippedCombatArts),"equippedCombatSkills"in ft&&t(56,me=ft.equippedCombatSkills),"equippedWeapons"in ft&&t(3,le=ft.equippedWeapons),"playerCrest"in ft&&t(57,ie=ft.playerCrest),"playerStats"in ft&&t(58,be=ft.playerStats),"allWeapons"in ft&&t(4,we=ft.allWeapons),"allCombatArts"in ft&&t(5,Ae=ft.allCombatArts),"weaponUses"in ft&&t(6,ge=ft.weaponUses),"onUpdateWeaponUses"in ft&&t(7,Be=ft.onUpdateWeaponUses),"selectedWeapon"in ft&&t(8,ve=ft.selectedWeapon),"setSelectedWeapon"in ft&&t(9,Pe=ft.setSelectedWeapon),"selectedCombatArt"in ft&&t(10,Se=ft.selectedCombatArt),"setSelectedCombatArt"in ft&&t(11,tt=ft.setSelectedCombatArt),"curSuperiorityDies"in ft&&t(12,Ke=ft.curSuperiorityDies),"setCurSuperiorityDie"in ft&&t(13,Ee=ft.setCurSuperiorityDie)},n.$$.update=()=>{var ft,un,tn,An,vn,Ln,Cn,Wn,di,Ge,yt,zt,dn,mn,Qt,nt,Dt,mi;n.$$.dirty[0]&16&&t(18,i=we.fullFeatures),n.$$.dirty[1]&134217728&&t(23,s=$s(be[Ye.DEX])),n.$$.dirty[0]&2|n.$$.dirty[1]&33554432&&t(67,r=W4($,me)),n.$$.dirty[0]&256&&t(69,o=WL[ve]),n.$$.dirty[0]&262400|n.$$.dirty[1]&33554432&&t(74,l=()=>me.reduce((sn,Ht)=>((_s[Ht].queries||[]).forEach((gs,Sn)=>{var pt;if(gs.compatibleWeapons.includes((pt=i[ve])==null?void 0:pt.type)){const ue=Ht+"__"+Sn;sn[ue]={...gs,key:Ht+"__"+Sn}}}),sn),{})),n.$$.dirty[2]&4096&&t(73,a=l()),n.$$.dirty[2]&2048&&t(38,c=Object.values(a)),n.$$.dirty[1]&128&&t(72,u=c.map(Pt=>Pt.key)),n.$$.dirty[0]&32768|n.$$.dirty[1]&268435584|n.$$.dirty[2]&1024&&(ut?CL(new Set(Re.current),new Set(u))||(t(59,Re.current=u,Re),t(15,ut=c.reduce((Pt,sn)=>(Pt[sn.key||""]=sn.options[0],Pt),{}))):t(15,ut=c.reduce((Pt,sn)=>(Pt[sn.key||""]=sn.options[0],Pt),{}))),n.$$.dirty[0]&32768&&t(54,f=(Pt,sn)=>{t(15,ut={...ut,[Pt]:sn})}),n.$$.dirty[1]&67108864&&t(71,h=new Set((ft=Ds[ie.type])==null?void 0:ft.triggersOn)),n.$$.dirty[0]&263424|n.$$.dirty[2]&640&&t(70,d=()=>{var Pt,sn;return Se?h.has(pa.COMBAT_ART)||h.has(pa.ATTACK):o===fe.REASON||o===fe.FAITH?h.has(pa.MAGIC_ATTACK)&&((sn=(Pt=i[ve])==null?void 0:Pt.damage)==null?void 0:sn[0])!==0&&!_h.has(ve)||h.has(pa.HEAL)&&_h.has(ve):h.has(pa.ATTACK)}),n.$$.dirty[1]&67108864&&t(36,m=ie.type),n.$$.dirty[1]&32&&t(53,p=(un=Ds[m])==null?void 0:un.label),n.$$.dirty[1]&32&&((tn=Ds[m])==null||tn.description),n.$$.dirty[1]&32&&t(52,_=((An=Ds[m])==null?void 0:An.damageBonus)||[]),n.$$.dirty[1]&32&&t(51,v=((vn=Ds[m])==null?void 0:vn.combatArtDamageMultiplier)||1),n.$$.dirty[1]&32&&t(50,y=((Ln=Ds[m])==null?void 0:Ln.conservesResource)||!1),n.$$.dirty[2]&256&&t(37,w=d()),n.$$.dirty[1]&67108960&&t(49,A=w?Ds[m].activationDC[ie.isMajor?mo.MAJOR:mo.MINOR]:1/0),n.$$.dirty[0]&8388608&&t(31,E=s),n.$$.dirty[0]&262400&&t(33,C=((Cn=i[ve])==null?void 0:Cn.attackBonus)||0),n.$$.dirty[0]&1024&&t(34,R=((Wn=Vr[Se])==null?void 0:Wn.attackBonus)||[]),n.$$.dirty[1]&33554432|n.$$.dirty[2]&128&&t(35,D=me.reduce((Pt,sn)=>{var Ht,Wi;return[...Pt,...((Ht=_s[sn].attackBonus)==null?void 0:Ht[o])||((Wi=_s[sn].attackBonus)==null?void 0:Wi.ANY)||[]]},[])),n.$$.dirty[0]&32768&&t(30,N=Object.keys(ut||{}).reduce((Pt,sn)=>(ut!=null&&ut[sn].attackBonus&&(Pt=[...Pt,...ut[sn].attackBonus||[]]),Pt),[])),n.$$.dirty[0]&16640&&t(32,L=H4.includes(ve)?Math.max(it-2,0)*-2:0),n.$$.dirty[0]&1073741824|n.$$.dirty[1]&31&&t(68,F=[...D,...R,C,L,E,...N].filter(Pt=>Pt!==0)),n.$$.dirty[2]&64&&t(48,P=za(F)),n.$$.dirty[0]&262400&&t(29,Q=(di=i[ve])==null?void 0:di.damageType),n.$$.dirty[0]&536936448|n.$$.dirty[1]&536870912&&(!gt||Bt.current!==Q)&&(t(60,Bt.current=Q,Bt),Q?t(16,gt=Q[0]):t(16,gt=Ye.STR)),n.$$.dirty[0]&65536|n.$$.dirty[1]&134217728&&t(28,O=$s(be[gt]||10)),n.$$.dirty[0]&65536&&t(47,K=zs[gt]),n.$$.dirty[0]&262400&&t(27,X=[...((Ge=i[ve])==null?void 0:Ge.damage)||[]]),n.$$.dirty[0]&256|n.$$.dirty[2]&32&&t(25,J=ve===Fe.HEAL&&r?2:0),n.$$.dirty[0]&1024&&t(26,te=((yt=Vr[Se])==null?void 0:yt.damageBonus)||[]),n.$$.dirty[0]&32768&&t(24,j=Object.keys(ut||{}).reduce((Pt,sn)=>(ut!=null&&ut[sn].damageBonus&&(Pt=[...Pt,...ut[sn].damageBonus||[]]),Pt),[])),n.$$.dirty[0]&520093696&&t(66,x=[O,...X,...te,J,...j].filter(Pt=>Pt!==0)),n.$$.dirty[2]&16&&t(46,Z=za(x)),n.$$.dirty[0]&262400&&t(21,ce=((zt=i[ve])==null?void 0:zt.critBonus)||0),n.$$.dirty[0]&1024&&t(20,pe=((dn=Vr[Se])==null?void 0:dn.critBonus)||[]),n.$$.dirty[0]&16252928&&t(45,ye=Qs([s,V,ce,...pe,...re])),n.$$.dirty[0]&262402&&t(64,Ne=((Dt=(Qt=(mn=Yt[$])==null?void 0:mn.whenEquipped)==null?void 0:Qt.bonusRange)==null?void 0:Dt[(nt=i[ve])==null?void 0:nt.type])||0),n.$$.dirty[0]&1056&&t(65,Y=(mi=Ae.fullFeatures[Se])==null?void 0:mi.range),n.$$.dirty[0]&262400|n.$$.dirty[1]&33554432&&t(63,Ce=me.reduce((Pt,sn)=>{var Ht,Wi,gs;return Pt+(((gs=(Ht=_s[sn])==null?void 0:Ht.bonusRange)==null?void 0:gs[(Wi=i[ve])==null?void 0:Wi.type])||0)},0)),n.$$.dirty[0]&262400|n.$$.dirty[1]&134217728|n.$$.dirty[2]&15&&t(61,se=()=>{var sn;let Pt=Y?[...Y]:[...((sn=i[ve])==null?void 0:sn.range)||[1]];return ve===Fe.RESTORE?Pt=[1,2+$s(be[Ye.INT])]:ve===Fe.PHYSIC&&(Pt=[1,2+2*$s(be[Ye.INT])]),Pt[1]===void 0&&(Pt[1]=Pt[0]),Pt[1]=parseInt(Pt[1]+"")+Ne+Ce+We,Pt}),n.$$.dirty[1]&1073741824&&t(44,[Me,he]=se(),Me,(t(43,he),t(61,se),t(65,Y),t(18,i),t(8,ve),t(58,be),t(64,Ne),t(63,Ce),t(62,We),t(5,Ae),t(10,Se),t(4,we),t(1,$),t(56,me))),n.$$.dirty[0]&256&&t(41,ae=_h.has(ve)),n.$$.dirty[0]&131072&&t(40,de=()=>{t(17,At=!At)})},t(22,V=-1),t(19,re=[]),t(62,We=0),t(42,M=()=>t(39,ze=!0)),[ee,$,ne,le,we,Ae,ge,Be,ve,Pe,Se,tt,Ke,Ee,it,ut,gt,At,i,re,pe,ce,V,s,j,J,te,X,O,Q,N,E,L,C,R,D,m,w,c,ze,de,ae,M,he,Me,ye,Z,K,P,A,y,v,_,p,f,De,me,ie,be,Re,Bt,se,We,Ce,Ne,Y,x,r,F,o,d,h,u,a,l,jt,nn,Zt]}class x7 extends st{constructor(e){super(),rt(this,e,Z7,J7,kt,{playerName:0,equippedClass:1,equippedCombatArts:2,equippedCombatSkills:56,equippedWeapons:3,playerCrest:57,playerStats:58,allWeapons:4,allCombatArts:5,weaponUses:6,onUpdateWeaponUses:7,selectedWeapon:8,setSelectedWeapon:9,selectedCombatArt:10,setSelectedCombatArt:11,curSuperiorityDies:12,setCurSuperiorityDie:13},null,[-1,-1,-1])}}const $7=n=>({}),w2=n=>({});function eU(n){let e,t,i,s,r,o,l,a,c;const u=n[2].content,f=ls(u,n,n[1],w2);return{c(){e=k("div"),t=k("div"),i=q(n[0]),s=U(),f&&f.c(),r=U(),o=k("div"),l=U(),a=k("div"),this.h()},l(h){e=T(h,"DIV",{class:!0});var d=I(e);t=T(d,"DIV",{class:!0});var m=I(t);i=z(m,n[0]),s=W(m),f&&f.l(m),m.forEach(b),r=W(d),o=T(d,"DIV",{class:!0}),I(o).forEach(b),l=W(d),a=T(d,"DIV",{class:!0}),I(a).forEach(b),d.forEach(b),this.h()},h(){S(t,"class","label svelte-nu0fyj"),S(o,"class","divider svelte-nu0fyj"),S(a,"class","divider svelte-nu0fyj"),S(e,"class","container svelte-nu0fyj")},m(h,d){H(h,e,d),g(e,t),g(t,i),g(t,s),f&&f.m(t,null),g(e,r),g(e,o),g(e,l),g(e,a),c=!0},p(h,[d]){(!c||d&1)&&Le(i,h[0]),f&&f.p&&(!c||d&2)&&as(f,u,h,h[1],c?us(u,h[1],d,$7):cs(h[1]),w2)},i(h){c||(B(f,h),c=!0)},o(h){G(f,h),c=!1},d(h){h&&b(e),f&&f.d(h)}}}function tU(n,e,t){let{$$slots:i={},$$scope:s}=e,{label:r=""}=e;return n.$$set=o=>{"label"in o&&t(0,r=o.label),"$$scope"in o&&t(1,s=o.$$scope)},[r,s,i]}class vc extends st{constructor(e){super(),rt(this,e,tU,eU,kt,{label:0})}}function A2(n,e,t){const i=n.slice();return i[21]=e[t],i[23]=t,i}function C2(n,e,t){const i=n.slice();return i[24]=e[t],i}function k2(n){let e,t,i;const s=[n[1]];var r=n[0];function o(l){let a={};for(let c=0;c<s.length;c+=1)a=Xr(a,s[c]);return{props:a}}return r&&(e=wn(r,o())),{c(){e&&ke(e.$$.fragment),t=et()},l(l){e&&Oe(e.$$.fragment,l),t=et()},m(l,a){e&&Te(e,l,a),H(l,t,a),i=!0},p(l,a){const c=a&2?Qr(s,[Zl(l[1])]):{};if(r!==(r=l[0])){if(e){He();const u=e;G(u.$$.fragment,1,0,()=>{Ie(u,1)}),qe()}r?(e=wn(r,o()),ke(e.$$.fragment),B(e.$$.fragment,1),Te(e,t.parentNode,t)):e=null}else r&&e.$set(c)},i(l){i||(e&&B(e.$$.fragment,l),i=!0)},o(l){e&&G(e.$$.fragment,l),i=!1},d(l){l&&b(t),e&&Ie(e,l)}}}function T2(n){let e,t,i,s;return{c(){e=k("button"),t=q("Randomize Choices"),this.h()},l(r){e=T(r,"BUTTON",{});var o=I(e);t=z(o,"Randomize Choices"),o.forEach(b),this.h()},h(){lt(e,"align-self","center")},m(r,o){H(r,e,o),g(e,t),i||(s=_e(e,"click",n[18]),i=!0)},p:Xe,d(r){r&&b(e),i=!1,s()}}}function I2(n){let e,t=n[21].description+"",i;return{c(){e=k("span"),i=q(t),this.h()},l(s){e=T(s,"SPAN",{class:!0});var r=I(e);i=z(r,t),r.forEach(b),this.h()},h(){S(e,"class","description svelte-2mzsr9")},m(s,r){H(s,e,r),g(e,i)},p(s,r){r&4&&t!==(t=s[21].description+"")&&Le(i,t)},d(s){s&&b(e)}}}function O2(n){let e,t=n[7](n[21].type,n[24])+"",i,s,r;return{c(){e=k("option"),i=q(t),this.h()},l(o){e=T(o,"OPTION",{});var l=I(e);i=z(l,t),l.forEach(b),this.h()},h(){e.__value=s=JSON.stringify(n[24]),e.value=e.__value,e.selected=r=n[4][n[23]]===n[24]},m(o,l){H(o,e,l),g(e,i)},p(o,l){l&4&&t!==(t=o[7](o[21].type,o[24])+"")&&Le(i,t),l&4&&s!==(s=JSON.stringify(o[24]))&&(e.__value=s,e.value=e.__value),l&20&&r!==(r=o[4][o[23]]===o[24])&&(e.selected=r)},d(o){o&&b(e)}}}function R2(n){let e,t,i=n[21].type+"",s,r,o,l,a,c,u,f,h,d,m=n[21].description&&I2(n),p=n[21].options,_=[];for(let y=0;y<p.length;y+=1)_[y]=O2(C2(n,p,y));function v(...y){return n[19](n[23],...y)}return{c(){e=k("h2"),t=q("Pick a "),s=q(i),r=U(),m&&m.c(),o=U(),l=k("select"),a=k("option"),c=q("-");for(let y=0;y<_.length;y+=1)_[y].c();f=U(),this.h()},l(y){e=T(y,"H2",{class:!0});var w=I(e);t=z(w,"Pick a "),s=z(w,i),w.forEach(b),r=W(y),m&&m.l(y),o=W(y),l=T(y,"SELECT",{name:!0});var A=I(l);a=T(A,"OPTION",{});var E=I(a);c=z(E,"-"),E.forEach(b);for(let C=0;C<_.length;C+=1)_[C].l(A);A.forEach(b),f=W(y),this.h()},h(){S(e,"class","svelte-2mzsr9"),a.__value=null,a.value=a.__value,S(l,"name",u=n[21].type+n[23])},m(y,w){H(y,e,w),g(e,t),g(e,s),H(y,r,w),m&&m.m(y,w),H(y,o,w),H(y,l,w),g(l,a),g(a,c);for(let A=0;A<_.length;A+=1)_[A].m(l,null);H(y,f,w),h||(d=_e(l,"change",v),h=!0)},p(y,w){if(n=y,w&4&&i!==(i=n[21].type+"")&&Le(s,i),n[21].description?m?m.p(n,w):(m=I2(n),m.c(),m.m(o.parentNode,o)):m&&(m.d(1),m=null),w&148){p=n[21].options;let A;for(A=0;A<p.length;A+=1){const E=C2(n,p,A);_[A]?_[A].p(E,w):(_[A]=O2(E),_[A].c(),_[A].m(l,null))}for(;A<_.length;A+=1)_[A].d(1);_.length=p.length}w&4&&u!==(u=n[21].type+n[23])&&S(l,"name",u)},d(y){y&&b(e),y&&b(r),m&&m.d(y),y&&b(o),y&&b(l),Ft(_,y),y&&b(f),h=!1,d()}}}function nU(n){let e,t,i,s,r,o,l,a,c,u,f,h,d,m,p,_,v=n[0]&&k2(n),y=!n[5]&&T2(n),w=n[2],A=[];for(let E=0;E<w.length;E+=1)A[E]=R2(A2(n,w,E));return{c(){e=k("div"),t=k("h1"),i=q("Making choice(s) because: "),s=k("span"),r=q(n[3]),o=U(),v&&v.c(),l=U(),a=k("div"),y&&y.c(),c=U();for(let E=0;E<A.length;E+=1)A[E].c();u=U(),f=k("button"),h=q("Submit Choices"),this.h()},l(E){e=T(E,"DIV",{class:!0});var C=I(e);t=T(C,"H1",{});var R=I(t);i=z(R,"Making choice(s) because: "),s=T(R,"SPAN",{class:!0});var D=I(s);r=z(D,n[3]),D.forEach(b),R.forEach(b),o=W(C),v&&v.l(C),l=W(C),a=T(C,"DIV",{class:!0});var N=I(a);y&&y.l(N),c=W(N);for(let F=0;F<A.length;F+=1)A[F].l(N);N.forEach(b),u=W(C),f=T(C,"BUTTON",{class:!0});var L=I(f);h=z(L,"Submit Choices"),L.forEach(b),C.forEach(b),this.h()},h(){S(s,"class","reason svelte-2mzsr9"),S(a,"class","content svelte-2mzsr9"),S(f,"class","submit"),f.disabled=d=!n[4].every(D2),S(e,"class","container svelte-2mzsr9")},m(E,C){H(E,e,C),g(e,t),g(t,i),g(t,s),g(s,r),g(e,o),v&&v.m(e,null),g(e,l),g(e,a),y&&y.m(a,null),g(a,c);for(let R=0;R<A.length;R+=1)A[R].m(a,null);g(e,u),g(e,f),g(f,h),m=!0,p||(_=_e(f,"click",function(){Mn(n[6])&&n[6].apply(this,arguments)}),p=!0)},p(E,[C]){if(n=E,(!m||C&8)&&Le(r,n[3]),n[0]?v?(v.p(n,C),C&1&&B(v,1)):(v=k2(n),v.c(),B(v,1),v.m(e,l)):v&&(He(),G(v,1,1,()=>{v=null}),qe()),n[5]?y&&(y.d(1),y=null):y?y.p(n,C):(y=T2(n),y.c(),y.m(a,c)),C&148){w=n[2];let R;for(R=0;R<w.length;R+=1){const D=A2(n,w,R);A[R]?A[R].p(D,C):(A[R]=R2(D),A[R].c(),A[R].m(a,null))}for(;R<A.length;R+=1)A[R].d(1);A.length=w.length}(!m||C&16&&d!==(d=!n[4].every(D2)))&&(f.disabled=d)},i(E){m||(B(v),m=!0)},o(E){G(v),m=!1},d(E){E&&b(e),v&&v.d(),y&&y.d(),Ft(A,E),p=!1,_()}}}const D2=n=>n!==null;function iU(n,e,t){let i,s,r;const{close:o}=Bn(hs.MODAL);let{descriptionElement:l}=e,{descriptionElementProps:a}=e,{pickOne:c=[]}=e,{onSubmit:u=()=>{}}=e,{reason:f}=e,{customCombatArts:h={}}=e,{customCombatSkills:d={}}=e,{customWeapons:m={}}=e,{playerStats:p={}}=e,{onUpdatePlayerStats:_=()=>{}}=e,{onUpdateCustomCombatArts:v=()=>{}}=e,{onUpdateCustomCombatSkills:y=()=>{}}=e,{onUpdateCustomWeapons:w=()=>{}}=e,A=c.map(()=>null);const E=(D,N)=>{switch(D){case Nn.Weapon:return N.toString()==="DOUBLE_BASE_USES"?"Double the uses of the spell you chose at Reason Level D":tr[N.toString()].label+": "+Au(tr[N.toString()]);case Nn.CombatArt:return Vr[N.toString()].label+": "+j4(Vr[N.toString()]);case Nn.CombatSkill:return _s[N.toString()].label+": "+_s[N.toString()].description;case Nn.PlayerStat:const L=typeof N=="string"?N:N.stat,F=typeof N=="string"?N:N.value;return`Increase ${zs[L]} to at least ${F}`}},C=()=>{t(4,A=c.map(D=>{const N=Math.floor(Math.random()*D.options.length);return D.options[N]}))},R=(D,N)=>{t(4,A=[...A]),t(4,A[D]=JSON.parse(N.currentTarget.value),A)};return n.$$set=D=>{"descriptionElement"in D&&t(0,l=D.descriptionElement),"descriptionElementProps"in D&&t(1,a=D.descriptionElementProps),"pickOne"in D&&t(2,c=D.pickOne),"onSubmit"in D&&t(8,u=D.onSubmit),"reason"in D&&t(3,f=D.reason),"customCombatArts"in D&&t(9,h=D.customCombatArts),"customCombatSkills"in D&&t(10,d=D.customCombatSkills),"customWeapons"in D&&t(11,m=D.customWeapons),"playerStats"in D&&t(12,p=D.playerStats),"onUpdatePlayerStats"in D&&t(13,_=D.onUpdatePlayerStats),"onUpdateCustomCombatArts"in D&&t(14,v=D.onUpdateCustomCombatArts),"onUpdateCustomCombatSkills"in D&&t(15,y=D.onUpdateCustomCombatSkills),"onUpdateCustomWeapons"in D&&t(16,w=D.onUpdateCustomWeapons)},n.$$.update=()=>{n.$$.dirty&130568&&t(17,i=(D,N)=>{switch(D){case Nn.Weapon:const L=N.reduce((O,K)=>{var X,J;if(K==="DOUBLE_BASE_USES"){const te=Object.keys(m).find(j=>{var x;return((x=m[j])==null?void 0:x.reason)==="Unlocked Reason level D"});if(te){const j=((X=O[te])==null?void 0:X.uses)||((J=tr[te])==null?void 0:J.uses);O[te]={...O[te],uses:j*2}}}else O[K]={...O[K],reason:f};return O},{...m});w(L);return;case Nn.CombatArt:const F=N.reduce((O,K)=>(O[K]={...O[K],reason:f},O),{...h});v(F);return;case Nn.CombatSkill:const P=N.reduce((O,K)=>(O[K]={...O[K],reason:f},O),{...d});y(P);return;case Nn.PlayerStat:const Q=N.reduce((O,K)=>{const{stat:X,value:J}=K;return Math.max(J,O[X])===J&&(O[X]=J),O},{...p});_(Q);return}}),n.$$.dirty&131348&&t(6,s=()=>{const D=A.reduce((N,L,F)=>{const P=c[F].type,Q=N[P]||new Set;return Q.add(L),N[P]=Q,N},{});Object.keys(D).forEach(N=>i(N,Array.from(D[N]))),u(),o()}),n.$$.dirty&4&&t(5,r=c.some(D=>D.disableRandom))},[l,a,c,f,A,r,s,E,u,h,d,m,p,_,v,y,w,i,C,R]}class Cu extends st{constructor(e){super(),rt(this,e,iU,nU,kt,{descriptionElement:0,descriptionElementProps:1,pickOne:2,onSubmit:8,reason:3,customCombatArts:9,customCombatSkills:10,customWeapons:11,playerStats:12,onUpdatePlayerStats:13,onUpdateCustomCombatArts:14,onUpdateCustomCombatSkills:15,onUpdateCustomWeapons:16})}}function sU(n){let e,t,i,s,r,o,l;return{c(){e=k("button"),t=k("img"),this.h()},l(a){e=T(a,"BUTTON",{class:!0});var c=I(e);t=T(c,"IMG",{src:!0,width:!0,height:!0,class:!0,alt:!0}),c.forEach(b),this.h()},h(){Pl(t.src,i="equipped.png")||S(t,"src",i),S(t,"width",n[0]),S(t,"height",n[0]),S(t,"class",s=Ze(Zi("img",{"not-equipped":!n[1]}))+" svelte-1ifhtbn"),S(t,"alt","equipped"),S(e,"class","container svelte-1ifhtbn"),e.disabled=r=n[4]||!n[3],lt(e,"opacity",n[3]?"1":"0"),lt(e,"width",n[0]),lt(e,"height",n[0])},m(a,c){H(a,e,c),g(e,t),o||(l=_e(t,"click",function(){Mn(n[2])&&n[2].apply(this,arguments)}),o=!0)},p(a,[c]){n=a,c&1&&S(t,"width",n[0]),c&1&&S(t,"height",n[0]),c&2&&s!==(s=Ze(Zi("img",{"not-equipped":!n[1]}))+" svelte-1ifhtbn")&&S(t,"class",s),c&24&&r!==(r=n[4]||!n[3])&&(e.disabled=r),c&8&&lt(e,"opacity",n[3]?"1":"0"),c&1&&lt(e,"width",n[0]),c&1&&lt(e,"height",n[0])},i:Xe,o:Xe,d(a){a&&b(e),o=!1,l()}}}function rU(n,e,t){let{size:i="20px"}=e,{isEquipped:s}=e,{onClick:r}=e,{isVisible:o=!0}=e,{disabled:l=!1}=e;return n.$$set=a=>{"size"in a&&t(0,i=a.size),"isEquipped"in a&&t(1,s=a.isEquipped),"onClick"in a&&t(2,r=a.onClick),"isVisible"in a&&t(3,o=a.isVisible),"disabled"in a&&t(4,l=a.disabled)},[i,s,r,o,l]}class Im extends st{constructor(e){super(),rt(this,e,rU,sU,kt,{size:0,isEquipped:1,onClick:2,isVisible:3,disabled:4})}}function oU(n){let e,t,i,s,r,o,l;return{c(){e=k("button"),t=k("img"),this.h()},l(a){e=T(a,"BUTTON",{class:!0});var c=I(e);t=T(c,"IMG",{src:!0,width:!0,height:!0,class:!0,alt:!0}),c.forEach(b),this.h()},h(){Pl(t.src,i=n[2]?"mastered.png":"unequipped.png")||S(t,"src",i),S(t,"width",n[0]),S(t,"height",n[0]),S(t,"class",s=Ze(`${!n[2]&&n[1]?"equipped":""} `)+" svelte-1wznjqo"),S(t,"alt","unlocked"),lt(t,"filter",!n[2]&&n[1]?n[5]:""),S(e,"class",r=Ze(`container ${n[3]?"custom":""}`)+" svelte-1wznjqo"),lt(e,"width",n[0]),lt(e,"height",n[0]),lt(e,"border",n[6])},m(a,c){H(a,e,c),g(e,t),o||(l=_e(t,"click",function(){Mn(n[4])&&n[4].apply(this,arguments)}),o=!0)},p(a,[c]){n=a,c&4&&!Pl(t.src,i=n[2]?"mastered.png":"unequipped.png")&&S(t,"src",i),c&1&&S(t,"width",n[0]),c&1&&S(t,"height",n[0]),c&6&&s!==(s=Ze(`${!n[2]&&n[1]?"equipped":""} `)+" svelte-1wznjqo")&&S(t,"class",s),c&38&&lt(t,"filter",!n[2]&&n[1]?n[5]:""),c&8&&r!==(r=Ze(`container ${n[3]?"custom":""}`)+" svelte-1wznjqo")&&S(e,"class",r),c&1&&lt(e,"width",n[0]),c&1&&lt(e,"height",n[0]),c&64&&lt(e,"border",n[6])},i:Xe,o:Xe,d(a){a&&b(e),o=!1,l()}}}function lU(n,e,t){let{size:i="16px"}=e,{isUnlocked:s=!1}=e,{isMastered:r=!1}=e,{isCustom:o=!1}=e,{onClick:l}=e,{unlockedFilter:a="sepia(100%) saturate(1000%) brightness(45%) hue-rotate(174deg)"}=e,{buttonBorder:c=""}=e;return n.$$set=u=>{"size"in u&&t(0,i=u.size),"isUnlocked"in u&&t(1,s=u.isUnlocked),"isMastered"in u&&t(2,r=u.isMastered),"isCustom"in u&&t(3,o=u.isCustom),"onClick"in u&&t(4,l=u.onClick),"unlockedFilter"in u&&t(5,a=u.unlockedFilter),"buttonBorder"in u&&t(6,c=u.buttonBorder)},[i,s,r,o,l,a,c]}class Q4 extends st{constructor(e){super(),rt(this,e,lU,oU,kt,{size:0,isUnlocked:1,isMastered:2,isCustom:3,onClick:4,unlockedFilter:5,buttonBorder:6})}}const t1=(n,e={})=>{const{prefix:t="Extra XP from Combat:"}=e;return t+" ("+Object.keys(n).map(i=>(so[i]||i)+": +"+Math.round(n[i]*100)+"% of combat XP").join(", ")+")"},Fl=(n={},{disablePickOne:e}={})=>{const{playerStats:t,combatSkills:i,playerSkills:s,combatArts:r,weapons:o,hpBonus:l,xpMods:a,xpMooch:c,protectionBonus:u,msBonus:f,bonusRange:h,followUpBonus:d,pickOne:m,resilienceBonus:p}=n,_=[];return t&&_.push("Min Stats ("+Object.entries(t).map(([v,y])=>`${zs[v]} ${y}`).join(", ")+")"),s&&_.push("Skills ("+Object.keys(s).map(v=>td[v]).join(", ")+")"),i&&_.push("Combat Skills ("+Object.keys(i).map(v=>_s[v].label).join(", ")+")"),r&&_.push("Combat Arts ("+Object.keys(r).map(v=>Vr[v].label).join(", ")+")"),o&&_.push("Weapons ("+Object.keys(o).map(v=>tr[v].label).join(", ")+")"),l&&_.push("HP Bonus ("+l+")"),h&&_.push("Bonus Range by Weapon Type: ("+Object.keys(h).map(v=>(so[v]||v)+": "+h[v]).join(", ")+")"),d&&_.push("AS Modifier ("+d+")"),u&&_.push("Prt Bonus ("+u+")"),p&&_.push("Re Bonus ("+p+")"),f&&_.push("MS Bonus ("+f+")"),a&&_.push("XP from Combat: ("+Object.keys(a).map(v=>(so[v]||v)+": x"+a[v]).join(", ")+")"),c&&_.push(t1(c)),!e&&m&&_.push("Choose one per category: "+m.map(({type:v,options:y})=>{const w=v,A=y.map(E=>v===Nn.PlayerStat?"Min "+zs[E.stat]+" "+E.value:v===Nn.CombatArt?Vr[E].label:v===Nn.Weapon?tr[E].label:v===Nn.CombatSkill?_s[E].label:"unmapped").join(", ");return"(["+w+"]: "+A+")"}).join(", ")+")"),_.join(", ")},sd=(n={},e=!1)=>{const{unlocks:t}=n;return Fl(t,{disablePickOne:e})};function aU(n){let e,t;return{c(){e=k("div"),t=q("Mastered"),this.h()},l(i){e=T(i,"DIV",{slot:!0,class:!0});var s=I(e);t=z(s,"Mastered"),s.forEach(b),this.h()},h(){S(e,"slot","t"),S(e,"class","svelte-5jm01p")},m(i,s){H(i,e,s),g(e,t)},p:Xe,d(i){i&&b(e)}}}function N2(n){var u,f,h;let e,t=Object.keys((u=n[7])==null?void 0:u.unlocks).length,i,s=Object.keys((f=n[7])==null?void 0:f.whenEquipped).length,r,o=n[0]&&Object.keys((h=n[7])==null?void 0:h.whenMastered).length,l=t&&P2(n),a=s&&M2(n),c=o&&B2(n);return{c(){e=k("div"),l&&l.c(),i=U(),a&&a.c(),r=U(),c&&c.c(),this.h()},l(d){e=T(d,"DIV",{class:!0});var m=I(e);l&&l.l(m),i=W(m),a&&a.l(m),r=W(m),c&&c.l(m),m.forEach(b),this.h()},h(){S(e,"class","description svelte-5jm01p")},m(d,m){H(d,e,m),l&&l.m(e,null),g(e,i),a&&a.m(e,null),g(e,r),c&&c.m(e,null)},p(d,m){var p,_,v;m&128&&(t=Object.keys((p=d[7])==null?void 0:p.unlocks).length),t?l?l.p(d,m):(l=P2(d),l.c(),l.m(e,i)):l&&(l.d(1),l=null),m&128&&(s=Object.keys((_=d[7])==null?void 0:_.whenEquipped).length),s?a?a.p(d,m):(a=M2(d),a.c(),a.m(e,r)):a&&(a.d(1),a=null),m&129&&(o=d[0]&&Object.keys((v=d[7])==null?void 0:v.whenMastered).length),o?c?c.p(d,m):(c=B2(d),c.c(),c.m(e,null)):c&&(c.d(1),c=null)},d(d){d&&b(e),l&&l.d(),a&&a.d(),c&&c.d()}}}function P2(n){let e,t,i,s,r,o=Fl(n[7].unlocks)+"",l;return{c(){e=k("div"),t=k("div"),i=k("u"),s=q("Unlocks"),r=U(),l=q(o)},l(a){e=T(a,"DIV",{});var c=I(e);t=T(c,"DIV",{});var u=I(t);i=T(u,"U",{});var f=I(i);s=z(f,"Unlocks"),f.forEach(b),u.forEach(b),r=W(c),l=z(c,o),c.forEach(b)},m(a,c){H(a,e,c),g(e,t),g(t,i),g(i,s),g(e,r),g(e,l)},p(a,c){c&128&&o!==(o=Fl(a[7].unlocks)+"")&&Le(l,o)},d(a){a&&b(e)}}}function M2(n){let e,t,i,s,r,o=Fl(n[7].whenEquipped)+"",l;return{c(){e=k("div"),t=k("div"),i=k("u"),s=q("When Equipped"),r=U(),l=q(o)},l(a){e=T(a,"DIV",{});var c=I(e);t=T(c,"DIV",{});var u=I(t);i=T(u,"U",{});var f=I(i);s=z(f,"When Equipped"),f.forEach(b),u.forEach(b),r=W(c),l=z(c,o),c.forEach(b)},m(a,c){H(a,e,c),g(e,t),g(t,i),g(i,s),g(e,r),g(e,l)},p(a,c){c&128&&o!==(o=Fl(a[7].whenEquipped)+"")&&Le(l,o)},d(a){a&&b(e)}}}function B2(n){let e,t,i,s,r,o=Fl(n[7].whenMastered)+"",l;return{c(){e=k("div"),t=k("div"),i=k("u"),s=q("When Mastered"),r=U(),l=q(o)},l(a){e=T(a,"DIV",{});var c=I(e);t=T(c,"DIV",{});var u=I(t);i=T(u,"U",{});var f=I(i);s=z(f,"When Mastered"),f.forEach(b),u.forEach(b),r=W(c),l=z(c,o),c.forEach(b)},m(a,c){H(a,e,c),g(e,t),g(t,i),g(i,s),g(e,r),g(e,l)},p(a,c){c&128&&o!==(o=Fl(a[7].whenMastered)+"")&&Le(l,o)},d(a){a&&b(e)}}}function cU(n){let e,t,i,s,r,o,l,a=Wl[n[4]]+"",c,u,f,h,d,m,p,_,v,y,w;i=new ai({props:{disabled:!n[0],$$slots:{t:[aU]},$$scope:{ctx:n}}}),r=new Q4({props:{isUnlocked:n[1],isMastered:n[0],onClick:n[8]}}),p=new Im({props:{isEquipped:n[5]===n[4],onClick:n[11],isVisible:n[1]}});let A=n[6]&&N2(n);return{c(){e=k("div"),t=k("div"),ke(i.$$.fragment),s=U(),ke(r.$$.fragment),o=U(),l=k("div"),c=q(a),u=U(),f=k("div"),h=q("v"),m=U(),ke(p.$$.fragment),_=U(),A&&A.c(),this.h()},l(E){e=T(E,"DIV",{class:!0});var C=I(e);t=T(C,"DIV",{class:!0});var R=I(t);Oe(i.$$.fragment,R),s=W(R),Oe(r.$$.fragment,R),o=W(R),l=T(R,"DIV",{class:!0});var D=I(l);c=z(D,a),D.forEach(b),u=W(R),f=T(R,"DIV",{class:!0});var N=I(f);h=z(N,"v"),N.forEach(b),m=W(R),Oe(p.$$.fragment,R),R.forEach(b),_=W(C),A&&A.l(C),C.forEach(b),this.h()},h(){S(l,"class",Ze("class-label")+" svelte-5jm01p"),S(f,"class",d=Ze(`caret ${n[6]?"":"flip"}`)+" svelte-5jm01p"),S(t,"class","content svelte-5jm01p"),S(e,"class","container svelte-5jm01p")},m(E,C){H(E,e,C),g(e,t),Te(i,t,null),g(t,s),Te(r,t,null),g(t,o),g(t,l),g(l,c),g(t,u),g(t,f),g(f,h),g(t,m),Te(p,t,null),g(e,_),A&&A.m(e,null),v=!0,y||(w=[_e(l,"click",n[9]),_e(f,"click",n[10])],y=!0)},p(E,[C]){const R={};C&1&&(R.disabled=!E[0]),C&4096&&(R.$$scope={dirty:C,ctx:E}),i.$set(R);const D={};C&2&&(D.isUnlocked=E[1]),C&1&&(D.isMastered=E[0]),C&20&&(D.onClick=E[8]),r.$set(D),(!v||C&16)&&a!==(a=Wl[E[4]]+"")&&Le(c,a),(!v||C&64&&d!==(d=Ze(`caret ${E[6]?"":"flip"}`)+" svelte-5jm01p"))&&S(f,"class",d);const N={};C&48&&(N.isEquipped=E[5]===E[4]),C&24&&(N.onClick=E[11]),C&2&&(N.isVisible=E[1]),p.$set(N),E[6]?A?A.p(E,C):(A=N2(E),A.c(),A.m(e,null)):A&&(A.d(1),A=null)},i(E){v||(B(i.$$.fragment,E),B(r.$$.fragment,E),B(p.$$.fragment,E),v=!0)},o(E){G(i.$$.fragment,E),G(r.$$.fragment,E),G(p.$$.fragment,E),v=!1},d(E){E&&b(e),Ie(i),Ie(r),Ie(p),A&&A.d(),y=!1,an(w)}}}function uU(n,e,t){let i,{isMastered:s}=e,{isUnlocked:r}=e,{onToggleClassActive:o}=e,{onToggleEquipClass:l}=e,{targetClass:a}=e,{equippedClass:c}=e,u=!1;const f=()=>o(a),h=()=>t(6,u=!u),d=()=>t(6,u=!u),m=()=>l(a);return n.$$set=p=>{"isMastered"in p&&t(0,s=p.isMastered),"isUnlocked"in p&&t(1,r=p.isUnlocked),"onToggleClassActive"in p&&t(2,o=p.onToggleClassActive),"onToggleEquipClass"in p&&t(3,l=p.onToggleEquipClass),"targetClass"in p&&t(4,a=p.targetClass),"equippedClass"in p&&t(5,c=p.equippedClass)},n.$$.update=()=>{n.$$.dirty&16&&t(7,i=Yt[a])},[s,r,o,l,a,c,u,i,f,h,d,m]}class Y4 extends st{constructor(e){super(),rt(this,e,uU,cU,kt,{isMastered:0,isUnlocked:1,onToggleClassActive:2,onToggleEquipClass:3,targetClass:4,equippedClass:5})}}function L2(n,e,t){var o;const i=n.slice();i[19]=e[t];const s=i[0].includes(i[19]);i[20]=s;const r=(o=i[2])==null?void 0:o.has(i[19]);return i[21]=r,i}function U2(n,e,t){var o;const i=n.slice();i[19]=e[t];const s=i[0].includes(i[19]);i[20]=s;const r=(o=i[2])==null?void 0:o.has(i[19]);return i[21]=r,i}function W2(n){let e,t;return e=new Y4({props:{isMastered:n[20],isUnlocked:n[21],onToggleClassActive:n[4],onToggleEquipClass:n[3],targetClass:n[19],equippedClass:n[1]}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,s){const r={};s&1&&(r.isMastered=i[20]),s&4&&(r.isUnlocked=i[21]),s&2&&(r.equippedClass=i[1]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function V2(n){let e,t;return e=new Y4({props:{isMastered:n[20],isUnlocked:n[21],onToggleClassActive:n[4],onToggleEquipClass:n[3],targetClass:n[19],equippedClass:n[1]}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,s){const r={};s&1&&(r.isMastered=i[20]),s&4&&(r.isUnlocked=i[21]),s&2&&(r.equippedClass=i[1]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function fU(n){let e,t,i,s,r,o,l,a,c,u,f,h,d,m,p;t=new vc({props:{label:"Classes"}});let _=Array.from(id),v=[];for(let C=0;C<_.length;C+=1)v[C]=W2(U2(n,_,C));const y=C=>G(v[C],1,1,()=>{v[C]=null});let w=Array.from(Il),A=[];for(let C=0;C<w.length;C+=1)A[C]=V2(L2(n,w,C));const E=C=>G(A[C],1,1,()=>{A[C]=null});return{c(){e=k("div"),ke(t.$$.fragment),i=U(),s=k("div"),r=k("div"),o=q("Beginner"),l=U(),a=k("div");for(let C=0;C<v.length;C+=1)v[C].c();c=U(),u=k("div"),f=k("div"),h=q("Intermediate"),d=U(),m=k("div");for(let C=0;C<A.length;C+=1)A[C].c();this.h()},l(C){e=T(C,"DIV",{class:!0});var R=I(e);Oe(t.$$.fragment,R),i=W(R),s=T(R,"DIV",{class:!0});var D=I(s);r=T(D,"DIV",{class:!0});var N=I(r);o=z(N,"Beginner"),N.forEach(b),l=W(D),a=T(D,"DIV",{class:!0});var L=I(a);for(let O=0;O<v.length;O+=1)v[O].l(L);L.forEach(b),D.forEach(b),c=W(R),u=T(R,"DIV",{class:!0});var F=I(u);f=T(F,"DIV",{class:!0});var P=I(f);h=z(P,"Intermediate"),P.forEach(b),d=W(F),m=T(F,"DIV",{class:!0});var Q=I(m);for(let O=0;O<A.length;O+=1)A[O].l(Q);Q.forEach(b),F.forEach(b),R.forEach(b),this.h()},h(){S(r,"class","label"),S(a,"class","classes-container svelte-1viguxz"),S(s,"class","category"),S(f,"class","label"),S(m,"class","classes-container svelte-1viguxz"),S(u,"class","category"),S(e,"class","container svelte-1viguxz")},m(C,R){H(C,e,R),Te(t,e,null),g(e,i),g(e,s),g(s,r),g(r,o),g(s,l),g(s,a);for(let D=0;D<v.length;D+=1)v[D].m(a,null);g(e,c),g(e,u),g(u,f),g(f,h),g(u,d),g(u,m);for(let D=0;D<A.length;D+=1)A[D].m(m,null);p=!0},p(C,[R]){if(R&31){_=Array.from(id);let D;for(D=0;D<_.length;D+=1){const N=U2(C,_,D);v[D]?(v[D].p(N,R),B(v[D],1)):(v[D]=W2(N),v[D].c(),B(v[D],1),v[D].m(a,null))}for(He(),D=_.length;D<v.length;D+=1)y(D);qe()}if(R&31){w=Array.from(Il);let D;for(D=0;D<w.length;D+=1){const N=L2(C,w,D);A[D]?(A[D].p(N,R),B(A[D],1)):(A[D]=V2(N),A[D].c(),B(A[D],1),A[D].m(m,null))}for(He(),D=w.length;D<A.length;D+=1)E(D);qe()}},i(C){if(!p){B(t.$$.fragment,C);for(let R=0;R<_.length;R+=1)B(v[R]);for(let R=0;R<w.length;R+=1)B(A[R]);p=!0}},o(C){G(t.$$.fragment,C),v=v.filter(Boolean);for(let R=0;R<v.length;R+=1)G(v[R]);A=A.filter(Boolean);for(let R=0;R<A.length;R+=1)G(A[R]);p=!1},d(C){C&&b(e),Ie(t),Ft(v,C),Ft(A,C)}}}function hU(n,e,t){let i;const{open:s}=Bn(hs.MODAL);let{masteredClasses:r}=e,{equippedClass:o}=e,{setEquippedClass:l}=e,{unlockedClasses:a}=e,{onUpdateUnlockedClasses:c}=e,{customCombatSkills:u}=e,{onUpdateCustomCombatSkills:f}=e,{customCombatArts:h}=e,{onUpdateCustomCombatArts:d}=e,{customWeapons:m}=e,{onUpdateCustomWeapons:p}=e,{playerStats:_}=e,{onUpdatePlayerStats:v}=e,y=new Audio("class-change.webm");const w=C=>{o===C?l(""):i.has(C)&&l(C)},A=(C,R)=>{s(Cu,{pickOne:Yt[C].unlocks.pickOne,reason:`Unlocked by obtaining ${Wl[C]} class`,customWeapons:m,customCombatArts:h,customCombatSkills:u,onUpdateCustomCombatArts:d,onUpdateCustomCombatSkills:f,onUpdateCustomWeapons:p,playerStats:_,onUpdatePlayerStats:v,onSubmit:R})},E=C=>{if(i.has(C))o===C&&l(""),c(Array.from(i).filter(R=>R!==C));else{y.currentTime=0,y.play();const R=()=>{var N,L;const D=(L=(N=Yt[C])==null?void 0:N.unlocks)==null?void 0:L.playerStats;if(D){const F=Object.keys(D).reduce((P,Q)=>(D!=null&&D[Q]&&P[Q]<((D==null?void 0:D[Q])||0)&&(P[Q]=D[Q]),P),{..._});v(F)}c([...Array.from(i),C])};Yt[C].unlocks.pickOne?A(C,R):R()}};return n.$$set=C=>{"masteredClasses"in C&&t(0,r=C.masteredClasses),"equippedClass"in C&&t(1,o=C.equippedClass),"setEquippedClass"in C&&t(5,l=C.setEquippedClass),"unlockedClasses"in C&&t(6,a=C.unlockedClasses),"onUpdateUnlockedClasses"in C&&t(7,c=C.onUpdateUnlockedClasses),"customCombatSkills"in C&&t(8,u=C.customCombatSkills),"onUpdateCustomCombatSkills"in C&&t(9,f=C.onUpdateCustomCombatSkills),"customCombatArts"in C&&t(10,h=C.customCombatArts),"onUpdateCustomCombatArts"in C&&t(11,d=C.onUpdateCustomCombatArts),"customWeapons"in C&&t(12,m=C.customWeapons),"onUpdateCustomWeapons"in C&&t(13,p=C.onUpdateCustomWeapons),"playerStats"in C&&t(14,_=C.playerStats),"onUpdatePlayerStats"in C&&t(15,v=C.onUpdatePlayerStats)},n.$$.update=()=>{n.$$.dirty&64&&t(2,i=new Set(a))},y.volume=.05,[r,o,i,w,E,l,a,c,u,f,h,d,m,p,_,v]}class dU extends st{constructor(e){super(),rt(this,e,hU,fU,kt,{masteredClasses:0,equippedClass:1,setEquippedClass:5,unlockedClasses:6,onUpdateUnlockedClasses:7,customCombatSkills:8,onUpdateCustomCombatSkills:9,customCombatArts:10,onUpdateCustomCombatArts:11,customWeapons:12,onUpdateCustomWeapons:13,playerStats:14,onUpdatePlayerStats:15})}}function Is(n,e=!!pU("debug")){if(e){const t=gU(n);return function(...s){console.log(`%c${n}`,`color:${t}`,...s)}}else return mU}function mU(){}function pU(n){try{if(typeof window<"u"&&typeof window.localStorage<"u")return window.localStorage[n]}catch{}}function gU(n){let e=0;for(let t=0;t<n.length;t++)e=(e<<5)-e+n.charCodeAt(t),e|=0;return F2[Math.abs(e)%F2.length]}const F2=["#0000CC","#0099FF","#009400","#8dd200","#CCCC00","#CC9933","#ae04e7","#ff35d7","#FF3333","#FF6600","#FF9933","#FFCC33"];function J4(n,{delay:e=0,duration:t=400,easing:i=BN}={}){const s=+getComputedStyle(n).opacity;return{delay:e,duration:t,easing:i,css:r=>`opacity: ${r*s}`}}const{window:vU}=Ju;function j2(n){let e,t,i,s,r,o,l,a,c,u,f,h,d,m,p,_,v,y,w=n[1].closeButton&&H2(n);var A=n[2];function E(C){return{}}return A&&(o=wn(A,E())),{c(){e=k("div"),t=k("div"),i=k("div"),w&&w.c(),s=U(),r=k("div"),o&&ke(o.$$.fragment),this.h()},l(C){e=T(C,"DIV",{id:!0,class:!0,style:!0});var R=I(e);t=T(R,"DIV",{class:!0,style:!0});var D=I(t);i=T(D,"DIV",{class:!0,role:!0,"aria-modal":!0,"aria-label":!0,"aria-labelledby":!0,style:!0});var N=I(i);w&&w.l(N),s=W(N),r=T(N,"DIV",{class:!0,style:!0});var L=I(r);o&&Oe(o.$$.fragment,L),L.forEach(b),N.forEach(b),D.forEach(b),R.forEach(b),this.h()},h(){S(r,"class",l=Ze(n[1].classContent)+" svelte-n7cvum"),S(r,"style",n[9]),xe(r,"content",!n[0]),S(i,"class",a=Ze(n[1].classWindow)+" svelte-n7cvum"),S(i,"role","dialog"),S(i,"aria-modal","true"),S(i,"aria-label",c=n[1].ariaLabelledBy?null:n[1].ariaLabel||null),S(i,"aria-labelledby",u=n[1].ariaLabelledBy||null),S(i,"style",n[8]),xe(i,"window",!n[0]),S(t,"class",h=Ze(n[1].classWindowWrap)+" svelte-n7cvum"),S(t,"style",n[7]),xe(t,"wrap",!n[0]),S(e,"id",d=n[1].id),S(e,"class",m=Ze(n[1].classBg)+" svelte-n7cvum"),S(e,"style",n[6]),xe(e,"bg",!n[0])},m(C,R){H(C,e,R),g(e,t),g(t,i),w&&w.m(i,null),g(i,s),g(i,r),o&&Te(o,r,null),n[50](i),n[51](t),n[52](e),_=!0,v||(y=[_e(i,"introstart",function(){Mn(n[13])&&n[13].apply(this,arguments)}),_e(i,"outrostart",function(){Mn(n[14])&&n[14].apply(this,arguments)}),_e(i,"introend",function(){Mn(n[15])&&n[15].apply(this,arguments)}),_e(i,"outroend",function(){Mn(n[16])&&n[16].apply(this,arguments)}),_e(e,"mousedown",n[20]),_e(e,"mouseup",n[21])],v=!0)},p(C,R){if(n=C,n[1].closeButton?w?(w.p(n,R),R[0]&2&&B(w,1)):(w=H2(n),w.c(),B(w,1),w.m(i,s)):w&&(He(),G(w,1,1,()=>{w=null}),qe()),A!==(A=n[2])){if(o){He();const D=o;G(D.$$.fragment,1,0,()=>{Ie(D,1)}),qe()}A?(o=wn(A,E()),ke(o.$$.fragment),B(o.$$.fragment,1),Te(o,r,null)):o=null}(!_||R[0]&2&&l!==(l=Ze(n[1].classContent)+" svelte-n7cvum"))&&S(r,"class",l),(!_||R[0]&512)&&S(r,"style",n[9]),(!_||R[0]&3)&&xe(r,"content",!n[0]),(!_||R[0]&2&&a!==(a=Ze(n[1].classWindow)+" svelte-n7cvum"))&&S(i,"class",a),(!_||R[0]&2&&c!==(c=n[1].ariaLabelledBy?null:n[1].ariaLabel||null))&&S(i,"aria-label",c),(!_||R[0]&2&&u!==(u=n[1].ariaLabelledBy||null))&&S(i,"aria-labelledby",u),(!_||R[0]&256)&&S(i,"style",n[8]),(!_||R[0]&3)&&xe(i,"window",!n[0]),(!_||R[0]&2&&h!==(h=Ze(n[1].classWindowWrap)+" svelte-n7cvum"))&&S(t,"class",h),(!_||R[0]&128)&&S(t,"style",n[7]),(!_||R[0]&3)&&xe(t,"wrap",!n[0]),(!_||R[0]&2&&d!==(d=n[1].id))&&S(e,"id",d),(!_||R[0]&2&&m!==(m=Ze(n[1].classBg)+" svelte-n7cvum"))&&S(e,"class",m),(!_||R[0]&64)&&S(e,"style",n[6]),(!_||R[0]&3)&&xe(e,"bg",!n[0])},i(C){_||(B(w),o&&B(o.$$.fragment,C),uu(()=>{f||(f=Ro(i,n[12],n[1].transitionWindowProps,!0)),f.run(1)}),uu(()=>{p||(p=Ro(e,n[11],n[1].transitionBgProps,!0)),p.run(1)}),_=!0)},o(C){G(w),o&&G(o.$$.fragment,C),f||(f=Ro(i,n[12],n[1].transitionWindowProps,!1)),f.run(0),p||(p=Ro(e,n[11],n[1].transitionBgProps,!1)),p.run(0),_=!1},d(C){C&&b(e),w&&w.d(),o&&Ie(o),n[50](null),C&&f&&f.end(),n[51](null),n[52](null),C&&p&&p.end(),v=!1,an(y)}}}function H2(n){let e,t,i,s,r;const o=[_U,bU],l=[];function a(c,u){return u[0]&2&&(e=null),e==null&&(e=!!c[17](c[1].closeButton)),e?0:1}return t=a(n,[-1,-1,-1]),i=l[t]=o[t](n),{c(){i.c(),s=et()},l(c){i.l(c),s=et()},m(c,u){l[t].m(c,u),H(c,s,u),r=!0},p(c,u){let f=t;t=a(c,u),t===f?l[t].p(c,u):(He(),G(l[f],1,1,()=>{l[f]=null}),qe(),i=l[t],i?i.p(c,u):(i=l[t]=o[t](c),i.c()),B(i,1),i.m(s.parentNode,s))},i(c){r||(B(i),r=!0)},o(c){G(i),r=!1},d(c){l[t].d(c),c&&b(s)}}}function bU(n){let e,t,i,s;return{c(){e=k("button"),this.h()},l(r){e=T(r,"BUTTON",{class:!0,"aria-label":!0,style:!0,type:!0}),I(e).forEach(b),this.h()},h(){S(e,"class",t=Ze(n[1].classCloseButton)+" svelte-n7cvum"),S(e,"aria-label","Close modal"),S(e,"style",n[10]),S(e,"type","button"),xe(e,"close",!n[0])},m(r,o){H(r,e,o),i||(s=_e(e,"click",n[18]),i=!0)},p(r,o){o[0]&2&&t!==(t=Ze(r[1].classCloseButton)+" svelte-n7cvum")&&S(e,"class",t),o[0]&1024&&S(e,"style",r[10]),o[0]&3&&xe(e,"close",!r[0])},i:Xe,o:Xe,d(r){r&&b(e),i=!1,s()}}}function _U(n){let e,t,i;var s=n[1].closeButton;function r(o){return{props:{onClose:o[18]}}}return s&&(e=wn(s,r(n))),{c(){e&&ke(e.$$.fragment),t=et()},l(o){e&&Oe(e.$$.fragment,o),t=et()},m(o,l){e&&Te(e,o,l),H(o,t,l),i=!0},p(o,l){if(s!==(s=o[1].closeButton)){if(e){He();const a=e;G(a.$$.fragment,1,0,()=>{Ie(a,1)}),qe()}s?(e=wn(s,r(o)),ke(e.$$.fragment),B(e.$$.fragment,1),Te(e,t.parentNode,t)):e=null}},i(o){i||(e&&B(e.$$.fragment,o),i=!0)},o(o){e&&G(e.$$.fragment,o),i=!1},d(o){o&&b(t),e&&Ie(e,o)}}}function yU(n){let e,t,i,s,r=n[2]&&j2(n);const o=n[49].default,l=ls(o,n,n[48],null);return{c(){r&&r.c(),e=U(),l&&l.c()},l(a){r&&r.l(a),e=W(a),l&&l.l(a)},m(a,c){r&&r.m(a,c),H(a,e,c),l&&l.m(a,c),t=!0,i||(s=_e(vU,"keydown",n[19]),i=!0)},p(a,c){a[2]?r?(r.p(a,c),c[0]&4&&B(r,1)):(r=j2(a),r.c(),B(r,1),r.m(e.parentNode,e)):r&&(He(),G(r,1,1,()=>{r=null}),qe()),l&&l.p&&(!t||c[1]&131072)&&as(l,o,a,a[48],t?us(o,a[48],c,null):cs(a[48]),null)},i(a){t||(B(r),B(l,a),t=!0)},o(a){G(r),G(l,a),t=!1},d(a){r&&r.d(a),a&&b(e),l&&l.d(a),i=!1,s()}}}function SU(n,e={}){return function(i){return new n({...i,props:{...e,...i.props}})}}function EU(n,e,t){let{$$slots:i={},$$scope:s}=e;const r=Yu(),o=xd,l=Re=>Re.tabIndex>=0&&!Re.hidden&&!Re.disabled&&Re.style.display!=="none"&&Re.type!=="hidden"&&Boolean(Re.offsetWidth||Re.offsetHeight||Re.getClientRects().length);let{isTabbable:a=l}=e,{show:c=null}=e,{id:u=null}=e,{key:f="simple-modal"}=e,{ariaLabel:h=null}=e,{ariaLabelledBy:d=null}=e,{closeButton:m=!0}=e,{closeOnEsc:p=!0}=e,{closeOnOuterClick:_=!0}=e,{styleBg:v={}}=e,{styleWindowWrap:y={}}=e,{styleWindow:w={}}=e,{styleContent:A={}}=e,{styleCloseButton:E={}}=e,{classBg:C=null}=e,{classWindowWrap:R=null}=e,{classWindow:D=null}=e,{classContent:N=null}=e,{classCloseButton:L=null}=e,{unstyled:F=!1}=e,{setContext:P=o}=e,{transitionBg:Q=J4}=e,{transitionBgProps:O={duration:250}}=e,{transitionWindow:K=Q}=e,{transitionWindowProps:X=O}=e,{disableFocusTrap:J=!1}=e;const te={id:u,ariaLabel:h,ariaLabelledBy:d,closeButton:m,closeOnEsc:p,closeOnOuterClick:_,styleBg:v,styleWindowWrap:y,styleWindow:w,styleContent:A,styleCloseButton:E,classBg:C,classWindowWrap:R,classWindow:D,classContent:N,classCloseButton:L,transitionBg:Q,transitionBgProps:O,transitionWindow:K,transitionWindowProps:X,disableFocusTrap:J,isTabbable:a,unstyled:F};let j={...te},x=null,Z,V,ce,pe,re,ye,Ne,Y,Ce,We,se,Me,he,M,ae;const de=Re=>Re.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase(),ee=Re=>Re?Object.keys(Re).reduce((ut,Bt)=>`${ut}; ${de(Bt)}: ${Re[Bt]}`,""):"",$=Re=>!!(Re&&Re.constructor&&Re.call&&Re.apply),ne=()=>{t(6,re=ee(Object.assign({},{width:window.innerWidth,height:window.innerHeight},j.styleBg))),t(7,ye=ee(j.styleWindowWrap)),t(8,Ne=ee(j.styleWindow)),t(9,Y=ee(j.styleContent)),t(10,Ce=ee(j.styleCloseButton)),t(11,We=j.transitionBg),t(12,se=j.transitionWindow)},me=()=>{};let le=me,ie=me,be=me,we=me;const Ae=(Re,ut={},Bt={},gt={})=>{t(2,x=SU(Re,ut)),t(1,j={...te,...Bt}),ne(),Se(),t(13,le=At=>{gt.onOpen&&gt.onOpen(At),r("open"),r("opening")}),t(14,ie=At=>{gt.onClose&&gt.onClose(At),r("close"),r("closing")}),t(15,be=At=>{gt.onOpened&&gt.onOpened(At),r("opened")}),t(16,we=At=>{gt.onClosed&&gt.onClosed(At),r("closed")})},ge=(Re={})=>{x&&(t(14,ie=Re.onClose||ie),t(16,we=Re.onClosed||we),t(2,x=null),tt())},Be=Re=>{if(j.closeOnEsc&&x&&Re.key==="Escape"&&(Re.preventDefault(),ge()),x&&Re.key==="Tab"&&!j.disableFocusTrap){const ut=ce.querySelectorAll("*"),Bt=Array.from(ut).filter(j.isTabbable).sort((At,jt)=>At.tabIndex-jt.tabIndex);let gt=Bt.indexOf(document.activeElement);gt===-1&&Re.shiftKey&&(gt=0),gt+=Bt.length+(Re.shiftKey?-1:1),gt%=Bt.length,Bt[gt].focus(),Re.preventDefault()}},ve=Re=>{j.closeOnOuterClick&&(Re.target===Z||Re.target===V)&&(ae=Re.target)},Pe=Re=>{j.closeOnOuterClick&&Re.target===ae&&(Re.preventDefault(),ge())},Se=()=>{pe=window.scrollY,Me=document.body.style.position,he=document.body.style.overflow,M=document.body.style.width,document.body.style.position="fixed",document.body.style.top=`-${pe}px`,document.body.style.overflow="hidden",document.body.style.width="100%"},tt=()=>{document.body.style.position=Me||"",document.body.style.top="",document.body.style.overflow=he||"",document.body.style.width=M||"",window.scrollTo({top:pe,left:0,behavior:"instant"})};P(f,{open:Ae,close:ge});let Ee=!1;br(()=>{Ee&&ge()}),Mi(()=>{t(47,Ee=!0)});function it(Re){Ut[Re?"unshift":"push"](()=>{ce=Re,t(5,ce)})}function De(Re){Ut[Re?"unshift":"push"](()=>{V=Re,t(4,V)})}function ze(Re){Ut[Re?"unshift":"push"](()=>{Z=Re,t(3,Z)})}return n.$$set=Re=>{"isTabbable"in Re&&t(22,a=Re.isTabbable),"show"in Re&&t(23,c=Re.show),"id"in Re&&t(24,u=Re.id),"key"in Re&&t(25,f=Re.key),"ariaLabel"in Re&&t(26,h=Re.ariaLabel),"ariaLabelledBy"in Re&&t(27,d=Re.ariaLabelledBy),"closeButton"in Re&&t(28,m=Re.closeButton),"closeOnEsc"in Re&&t(29,p=Re.closeOnEsc),"closeOnOuterClick"in Re&&t(30,_=Re.closeOnOuterClick),"styleBg"in Re&&t(31,v=Re.styleBg),"styleWindowWrap"in Re&&t(32,y=Re.styleWindowWrap),"styleWindow"in Re&&t(33,w=Re.styleWindow),"styleContent"in Re&&t(34,A=Re.styleContent),"styleCloseButton"in Re&&t(35,E=Re.styleCloseButton),"classBg"in Re&&t(36,C=Re.classBg),"classWindowWrap"in Re&&t(37,R=Re.classWindowWrap),"classWindow"in Re&&t(38,D=Re.classWindow),"classContent"in Re&&t(39,N=Re.classContent),"classCloseButton"in Re&&t(40,L=Re.classCloseButton),"unstyled"in Re&&t(0,F=Re.unstyled),"setContext"in Re&&t(41,P=Re.setContext),"transitionBg"in Re&&t(42,Q=Re.transitionBg),"transitionBgProps"in Re&&t(43,O=Re.transitionBgProps),"transitionWindow"in Re&&t(44,K=Re.transitionWindow),"transitionWindowProps"in Re&&t(45,X=Re.transitionWindowProps),"disableFocusTrap"in Re&&t(46,J=Re.disableFocusTrap),"$$scope"in Re&&t(48,s=Re.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&8388608|n.$$.dirty[1]&65536&&Ee&&($(c)?Ae(c):ge())},[F,j,x,Z,V,ce,re,ye,Ne,Y,Ce,We,se,le,ie,be,we,$,ge,Be,ve,Pe,a,c,u,f,h,d,m,p,_,v,y,w,A,E,C,R,D,N,L,P,Q,O,K,X,J,Ee,s,i,it,De,ze]}let wU=class extends st{constructor(e){super(),rt(this,e,EU,yU,kt,{isTabbable:22,show:23,id:24,key:25,ariaLabel:26,ariaLabelledBy:27,closeButton:28,closeOnEsc:29,closeOnOuterClick:30,styleBg:31,styleWindowWrap:32,styleWindow:33,styleContent:34,styleCloseButton:35,classBg:36,classWindowWrap:37,classWindow:38,classContent:39,classCloseButton:40,unstyled:0,setContext:41,transitionBg:42,transitionBgProps:43,transitionWindow:44,transitionWindowProps:45,disableFocusTrap:46},null,[-1,-1,-1])}};const AU=300,Z4=300,q2=300,CU=300,z2=50,kU=200,TU=400,IU=1200,n1=1e3,ku=100,G2=2e4,jl=[{start:0,end:ku}],OU=100*1024*1024,RU=1024*1024,i1=10*1024*1024,K2=10*1024,rd={closeButton:!1,classBg:"jse-modal-bg",classWindow:"jse-modal-window",classWindowWrap:"jse-modal-window-wrap",classContent:"jse-modal-content"},DU={...rd,classWindow:"jse-modal-window jse-modal-window-sort"},NU={...rd,classWindow:"jse-modal-window jse-modal-window-transform"},Tv="Insert or paste contents, enter [ insert a new array, enter { to insert a new object, or start typing to insert a new value",x4="Open context menu (Click here, right click on the selection, or use the context menu button or Ctrl+Q)",vo="hover-insert-inside",Tu="hover-insert-after",s1="hover-collection",Ap="valid",X2="repairable",PU="invalid",Hc=(40+2)*8,qc=260,Ol={NO:"NO",SELF:"SELF",NEXT_INSIDE:"NEXT_INSIDE"};let Q2=0;function nu(){return Q2++,Q2}function Xo(n){return Xo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xo(n)}function hi(n){return Array.isArray(n)}function Li(n){return n!==null&&Xo(n)==="object"&&n.constructor===Object}function $4(n){return n&&Xo(n)==="object"?n.op==="add":!1}function eO(n){return n&&Xo(n)==="object"?n.op==="remove":!1}function tO(n){return n&&Xo(n)==="object"?n.op==="replace":!1}function r1(n){return n&&Xo(n)==="object"?n.op==="copy":!1}function Ga(n){return n&&Xo(n)==="object"?n.op==="move":!1}function o1(n){return o1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o1(n)}function MU(n,e){return JSON.stringify(n)===JSON.stringify(e)}function BU(n,e){return n===e}function nO(n){return n.slice(0,n.length-1)}function LU(n){return n[n.length-1]}function UU(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:BU;if(n.length<e.length)return!1;for(var i=0;i<e.length;i++)if(!t(n[i],e[i]))return!1;return!0}function iO(n){return o1(n)==="object"&&n!==null}function Iu(n){return Iu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Iu(n)}function Y2(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,i)}return t}function WU(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Y2(Object(t),!0).forEach(function(i){VU(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Y2(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function VU(n,e,t){return e=FU(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function FU(n){var e=jU(n,"string");return Iu(e)==="symbol"?e:String(e)}function jU(n,e){if(Iu(n)!=="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(Iu(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Iv(n){if(hi(n)){var e=n.slice();return Object.getOwnPropertySymbols(n).forEach(function(i){e[i]=n[i]}),e}else if(Li(n)){var t=WU({},n);return Object.getOwnPropertySymbols(n).forEach(function(i){t[i]=n[i]}),t}else return n}function Ov(n,e,t){if(n[e]===t)return n;var i=Iv(n);return i[e]=t,i}function wt(n,e){for(var t=n,i=0;i<e.length;)Li(t)?t=t[e[i]]:hi(t)?t=t[parseInt(e[i])]:t=void 0,i++;return t}function hr(n,e,t){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e.length===0)return t;var s=e[0],r=hr(n?n[s]:void 0,e.slice(1),t,i);if(Li(n)||hi(n))return Ov(n,s,r);if(i){var o=HU.test(s)?[]:{};return o[s]=r,o}else throw new Error("Path does not exist")}var HU=/^\d+$/;function sO(n,e,t){if(e.length===0)return t(n);if(!iO(n))throw new Error("Path doesn't exist");var i=e[0],s=sO(n[i],e.slice(1),t);return Ov(n,i,s)}function Rv(n,e){if(e.length===0)return n;if(!iO(n))throw new Error("Path does not exist");if(e.length===1){var t=e[0];if(t in n){var i=Iv(n);return hi(i)&&i.splice(parseInt(t),1),Li(i)&&delete i[t],i}else return n}var s=e[0],r=Rv(n[s],e.slice(1));return Ov(n,s,r)}function Dv(n,e,t){var i=e.slice(0,e.length-1),s=e[e.length-1];return sO(n,i,function(r){if(!Array.isArray(r))throw new TypeError("Array expected at path "+JSON.stringify(i));var o=Iv(r);return o.splice(parseInt(s),0,t),o})}function Qo(n,e){return n===void 0?!1:e.length===0?!0:n===null?!1:Qo(n[e[0]],e.slice(1))}function Yo(n){var e=n.split("/");return e.shift(),e.map(function(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")})}function ht(n){return n.map(rO).join("")}function rO(n){return"/"+String(n).replace(/~/g,"~0").replace(/\//g,"~1")}function l1(n,e){return n+rO(e)}function Ka(n,e){return n.startsWith(e)&&(n.length===e.length||n[e.length]==="/")}function Rl(n,e,t){for(var i=n,s=0;s<e.length;s++){JU(e[s]);var r=e[s];if(t&&t.before){var o=t.before(i,r);if(o!==void 0){if(o.document!==void 0&&(i=o.document),o.json!==void 0)throw new Error('Deprecation warning: returned object property ".json" has been renamed to ".document"');o.operation!==void 0&&(r=o.operation)}}var l=i,a=Fr(i,r.path);if(r.op==="add")i=GU(i,a,r.value);else if(r.op==="remove")i=zU(i,a);else if(r.op==="replace")i=qU(i,a,r.value);else if(r.op==="copy")i=KU(i,a,a1(r.from));else if(r.op==="move")i=XU(i,a,a1(r.from));else if(r.op==="test")QU(i,a,r.value);else throw new Error("Unknown JSONPatch operation "+JSON.stringify(r));if(t&&t.after){var c=t.after(i,r,l);c!==void 0&&(i=c)}}return i}function qU(n,e,t){return hr(n,e,t)}function zU(n,e){return Rv(n,e)}function GU(n,e,t){return pf(n,e)?Dv(n,e,t):hr(n,e,t)}function KU(n,e,t){var i=wt(n,t);if(pf(n,e))return Dv(n,e,i);var s=wt(n,t);return hr(n,e,s)}function XU(n,e,t){var i=wt(n,t),s=Rv(n,t);return pf(s,e)?Dv(s,e,i):hr(s,e,i)}function QU(n,e,t){if(t===void 0)throw new Error('Test failed: no value provided (path: "'.concat(ht(e),'")'));if(!Qo(n,e))throw new Error('Test failed: path not found (path: "'.concat(ht(e),'")'));var i=wt(n,e);if(!MU(i,t))throw new Error('Test failed, value differs (path: "'.concat(ht(e),'")'))}function pf(n,e){if(e.length===0)return!1;var t=wt(n,nO(e));return Array.isArray(t)}function YU(n,e){if(LU(e)!=="-")return e;var t=nO(e),i=wt(n,t);return t.concat(i.length)}function JU(n){var e=["add","remove","replace","copy","move","test"];if(!e.includes(n.op))throw new Error("Unknown JSONPatch op "+JSON.stringify(n.op));if(typeof n.path!="string")throw new Error('Required property "path" missing or not a string in operation '+JSON.stringify(n));if((n.op==="copy"||n.op==="move")&&typeof n.from!="string")throw new Error('Required property "from" missing or not a string in operation '+JSON.stringify(n))}function Fr(n,e){return YU(n,Yo(e))}function a1(n){return Yo(n)}function ZU(n){return tW(n)||eW(n)||$U(n)||xU()}function xU(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $U(n,e){if(n){if(typeof n=="string")return c1(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return c1(n,e)}}function eW(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function tW(n){if(Array.isArray(n))return c1(n)}function c1(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function oO(n,e,t){var i=[];return Rl(n,e,{before:function(r,o){var l,a=Fr(r,o.path);if(o.op==="add")l=cO(r,a);else if(o.op==="remove")l=aO(r,a);else if(o.op==="replace")l=lO(r,a);else if(o.op==="copy")l=nW(r,a);else if(o.op==="move")l=iW(r,a,a1(o.from));else if(o.op==="test")l=[];else throw new Error("Unknown JSONPatch operation "+JSON.stringify(o));var c;if(t&&t.before){var u=t.before(r,o,l);if(u&&u.revertOperations&&(l=u.revertOperations),u&&u.document&&(c=u.document),u&&u.json)throw new Error('Deprecation warning: returned object property ".json" has been renamed to ".document"')}if(i=l.concat(i),c!==void 0)return{document:c}}}),i}function lO(n,e){return[{op:"replace",path:ht(e),value:wt(n,e)}]}function aO(n,e){return[{op:"add",path:ht(e),value:wt(n,e)}]}function cO(n,e){return pf(n,e)||!Qo(n,e)?[{op:"remove",path:ht(e)}]:lO(n,e)}function nW(n,e){return cO(n,e)}function iW(n,e,t){if(e.length<t.length&&UU(t,e))return[{op:"replace",path:ht(e),value:n}];var i={op:"move",from:ht(e),path:ht(t)};return!pf(n,e)&&Qo(n,e)?[i].concat(ZU(aO(n,e))):[i]}var $r=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Om={},J2={b:"\b",f:"\f",n:`
`,r:"\r",t:"	",'"':'"',"/":"/","\\":"\\"},sW="a".charCodeAt();Om.parse=function(n,e,t){var i={},s=0,r=0,o=0,l=t&&t.bigint&&typeof BigInt<"u";return{data:a("",!0),pointers:i};function a(N,L){c();var F;w(N,"value");var P=p();switch(P){case"t":m("rue"),F=!0;break;case"f":m("alse"),F=!1;break;case"n":m("ull"),F=null;break;case'"':F=u();break;case"[":F=h(N);break;case"{":F=d(N);break;default:_(),"-0123456789".indexOf(P)>=0?F=f():C()}return w(N,"valueEnd"),c(),L&&o<n.length&&C(),F}function c(){e:for(;o<n.length;){switch(n[o]){case" ":r++;break;case"	":r+=4;break;case"\r":r=0;break;case`
`:r=0,s++;break;default:break e}o++}}function u(){for(var N="",L;L=p(),L!='"';)L=="\\"?(L=p(),L in J2?N+=J2[L]:L=="u"?N+=v():R()):N+=L;return N}function f(){var N="",L=!0;n[o]=="-"&&(N+=p()),N+=n[o]=="0"?p():y(),n[o]=="."&&(N+=p()+y(),L=!1),(n[o]=="e"||n[o]=="E")&&(N+=p(),(n[o]=="+"||n[o]=="-")&&(N+=p()),N+=y(),L=!1);var F=+N;return l&&L&&(F>Number.MAX_SAFE_INTEGER||F<Number.MIN_SAFE_INTEGER)?BigInt(N):F}function h(N){c();var L=[],F=0;if(p()=="]")return L;for(_();;){var P=N+"/"+F;L.push(a(P)),c();var Q=p();if(Q=="]")break;Q!=","&&R(),c(),F++}return L}function d(N){c();var L={};if(p()=="}")return L;for(_();;){var F=E();p()!='"'&&R();var P=u(),Q=N+"/"+u1(P);A(Q,"key",F),w(Q,"keyEnd"),c(),p()!=":"&&R(),c(),L[P]=a(Q),c();var O=p();if(O=="}")break;O!=","&&R(),c()}return L}function m(N){for(var L=0;L<N.length;L++)p()!==N[L]&&R()}function p(){D();var N=n[o];return o++,r++,N}function _(){o--,r--}function v(){for(var N=4,L=0;N--;){L<<=4;var F=p().toLowerCase();F>="a"&&F<="f"?L+=F.charCodeAt()-sW+10:F>="0"&&F<="9"?L+=+F:R()}return String.fromCharCode(L)}function y(){for(var N="";n[o]>="0"&&n[o]<="9";)N+=p();if(N.length)return N;D(),C()}function w(N,L){A(N,L,E())}function A(N,L,F){i[N]=i[N]||{},i[N][L]=F}function E(){return{line:s,column:r,pos:o}}function C(){throw new SyntaxError("Unexpected token "+n[o]+" in JSON at position "+o)}function R(){_(),C()}function D(){if(o>=n.length)throw new SyntaxError("Unexpected end of JSON input")}};Om.stringify=function(n,e,t){if(!Uf(n))return;var i=0,s,r,o=typeof t=="object"?t.space:t;switch(typeof o){case"number":var l=o>10?10:o<0?0:Math.floor(o);o=l&&A(l," "),s=l,r=l;break;case"string":o=o.slice(0,10),s=0,r=0;for(var a=0;a<o.length;a++){var c=o[a];switch(c){case" ":r++;break;case"	":r+=4;break;case"\r":r=0;break;case`
`:r=0,i++;break;default:throw new Error("whitespace characters not allowed in JSON")}s++}break;default:o=void 0}var u="",f={},h=0,d=0,m=0,p=t&&t.es6&&typeof Map=="function";return _(n,0,""),{json:u,pointers:f};function _(E,C,R){switch(w(R,"value"),typeof E){case"number":case"bigint":case"boolean":v(""+E);break;case"string":v(Wf(E));break;case"object":E===null?v("null"):typeof E.toJSON=="function"?v(Wf(E.toJSON())):Array.isArray(E)?D():p?E.constructor.BYTES_PER_ELEMENT?D():E instanceof Map?L():E instanceof Set?L(!0):N():N()}w(R,"valueEnd");function D(){if(E.length){v("[");for(var F=C+1,P=0;P<E.length;P++){P&&v(","),y(F);var Q=Uf(E[P])?E[P]:null,O=R+"/"+P;_(Q,F,O)}y(C),v("]")}else v("[]")}function N(){var F=Object.keys(E);if(F.length){v("{");for(var P=C+1,Q=0;Q<F.length;Q++){var O=F[Q],K=E[O];if(Uf(K)){Q&&v(",");var X=R+"/"+u1(O);y(P),w(X,"key"),v(Wf(O)),w(X,"keyEnd"),v(":"),o&&v(" "),_(K,P,X)}}y(C),v("}")}else v("{}")}function L(F){if(E.size){v("{");for(var P=C+1,Q=!0,O=E.entries(),K=O.next();!K.done;){var X=K.value,J=X[0],te=F?!0:X[1];if(Uf(te)){Q||v(","),Q=!1;var j=R+"/"+u1(J);y(P),w(j,"key"),v(Wf(J)),w(j,"keyEnd"),v(":"),o&&v(" "),_(te,P,j)}K=O.next()}y(C),v("}")}else v("{}")}}function v(E){d+=E.length,m+=E.length,u+=E}function y(E){if(o){for(u+=`
`+A(E,o),h++,d=0;E--;)i?(h+=i,d=r):d+=r,m+=s;m+=1}}function w(E,C){f[E]=f[E]||{},f[E][C]={line:h,column:d,pos:m}}function A(E,C){return Array(E+1).join(C)}};var rW=["number","bigint","boolean","string","object"];function Uf(n){return rW.indexOf(typeof n)>=0}var oW=/"|\\/g,lW=/[\b]/g,aW=/\f/g,cW=/\n/g,uW=/\r/g,fW=/\t/g;function Wf(n){return n=n.replace(oW,"\\$&").replace(aW,"\\f").replace(lW,"\\b").replace(cW,"\\n").replace(uW,"\\r").replace(fW,"\\t"),'"'+n+'"'}var hW=/~/g,dW=/\//g;function u1(n){return n.replace(hW,"~0").replace(dW,"~1")}function Cs(n,e){if(!(this instanceof Cs))throw new SyntaxError("Constructor must be called with the new operator");this.message=n+" (char "+e+")",this.char=e,this.stack=new Error().stack}Cs.prototype=new Error;Cs.prototype.constructor=Error;var Nv={"'":!0,"‘":!0,"’":!0,"`":!0,"´":!0},Pv={'"':!0,"“":!0,"”":!0};function Z2(n){return mW.test(n)}var mW=/^[a-zA-Z_]$/;function pW(n){return gW.test(n)}var gW=/^[0-9a-fA-F]$/;function ko(n){return vW.test(n)}var vW=/^[0-9]$/;function od(n){return n===" "||n==="	"||n===`
`||n==="\r"}function f1(n){return n===" "||n>=" "&&n<=" "||n===" "||n===" "||n==="　"}function bW(n){for(var e="",t=0;t<n.length;t++){var i=n[t];e+=f1(i)?" ":i}return e}function _W(n){return Nv[n]===!0||Pv[n]===!0}function x2(n){return Nv[n]===!0}function yW(n){return Pv[n]===!0}function $2(n){return Nv[n]===!0?"'":Pv[n]===!0?'"':n}function ld(n,e){var t=n.lastIndexOf(e);return t!==-1?n.substring(0,t)+n.substring(t+1):n}function Ta(n,e){var t=n.length;if(!od(n[t-1]))return n+e;for(;od(n[t-1]);)t--;return n.substring(0,t)+e+n.substring(t)}function SW(n,e,t){return n.substring(0,t)+e+n.substring(t)}var Ki=0,bc=1,Hl=2,Xa=3,uO=4,h1=5,Qa=6,EW={"":!0,"{":!0,"}":!0,"[":!0,"]":!0,":":!0,",":!0,"(":!0,")":!0,";":!0,"+":!0},wW={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},eS={"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},AW={null:"null",true:"true",false:"false"},tS={None:"null",True:"true",False:"false"},Do="",bn="",Ei=0,bt="",mt="",Wt=Qa;function Fo(n){Do=n,bn="",Ei=0,bt=Do.charAt(0),mt="",Wt=Qa,Jn();var e=Wt;if(Ou(),nS(),mt==="")return bn;if(e===Wt&&ad()){for(var t="";e===Wt&&ad();)bn=Ta(bn,","),t+=bn,bn="",Ou(),nS();return`[
`.concat(t).concat(bn,`
]`)}throw new Cs("Unexpected characters",Ei-mt.length)}function yi(){Ei++,bt=Do.charAt(Ei)}function CW(){yi(),bt==="\\"&&yi()}function ad(){return Wt===Ki&&(mt==="["||mt==="{")||Wt===Hl||Wt===bc||Wt===Xa}function kW(){return Wt===Hl||Wt===bc||Wt===Xa}function Jn(){bn+=mt,Wt=Qa,mt="",TW(),Wt===uO&&(mt=bW(mt),Jn()),Wt===h1&&(Wt=Qa,mt="",Jn())}function nS(){mt===","&&(mt="",Wt=Qa,Jn())}function TW(){if(EW[bt]){Wt=Ki,mt=bt,yi();return}IW()}function IW(){if(ko(bt)||bt==="-"){if(Wt=bc,bt==="-"){if(mt+=bt,yi(),!ko(bt))throw new Cs("Invalid number, digit expected",Ei)}else bt==="0"&&(mt+=bt,yi());for(;ko(bt);)mt+=bt,yi();if(bt==="."){if(mt+=bt,yi(),!ko(bt))throw new Cs("Invalid number, digit expected",Ei);for(;ko(bt);)mt+=bt,yi()}if(bt==="e"||bt==="E"){if(mt+=bt,yi(),(bt==="+"||bt==="-")&&(mt+=bt,yi()),!ko(bt))throw new Cs("Invalid number, digit expected",Ei);for(;ko(bt);)mt+=bt,yi()}return}OW()}function OW(){bt==="\\"&&Do.charAt(Ei+1)==='"'?(yi(),iS(CW)):iS(yi)}function iS(n){if(_W(bt)){var e=$2(bt),t=x2(bt)?x2:yW;for(mt+='"',Wt=Hl,n();bt!==""&&!t(bt);)if(bt==="\\"){n();var i=wW[bt];if(i!==void 0)mt+="\\"+bt,n();else if(bt==="u"){mt+="\\u",n();for(var s=0;s<4;s++){if(!pW(bt))throw new Cs("Invalid unicode character",Ei-mt.length);mt+=bt,n()}}else if(bt==="'")mt+="'",n();else throw new Cs('Invalid escape character "\\'+bt+'"',Ei)}else eS[bt]?(mt+=eS[bt],n()):bt==='"'?(mt+='\\"',n()):(mt+=bt,n());if($2(bt)!==e)throw new Cs("End of string expected",Ei-mt.length);mt+='"',n();return}RW()}function RW(){if(Z2(bt)){for(Wt=Xa;Z2(bt)||ko(bt)||bt==="$";)mt+=bt,yi();return}DW()}function DW(){if(od(bt)||f1(bt)){for(Wt=uO;od(bt)||f1(bt);)mt+=bt,yi();return}NW()}function NW(){if(bt==="/"&&Do[Ei+1]==="*"){for(Wt=h1;bt!==""&&(bt!=="*"||bt==="*"&&Do[Ei+1]!=="/");)mt+=bt,yi();bt==="*"&&Do[Ei+1]==="/"&&(mt+=bt,yi(),mt+=bt,yi());return}if(bt==="/"&&Do[Ei+1]==="/"){for(Wt=h1;bt!==""&&bt!==`
`;)mt+=bt,yi();return}PW()}function PW(){for(Wt=Qa;bt!=="";)mt+=bt,yi();throw new Cs('Syntax error in part "'+mt+'"',Ei-mt.length)}function Ou(){if(Wt===Ki&&mt==="{"){if(Jn(),Wt===Ki&&mt==="}"){Jn();return}for(;;){if((Wt===Xa||Wt===bc)&&(Wt=Hl,mt='"'.concat(mt,'"')),Wt!==Hl)throw new Cs("Object key expected",Ei-mt.length);if(Jn(),Wt===Ki&&mt===":")Jn();else if(ad())bn=Ta(bn,":");else throw new Cs("Colon expected",Ei-mt.length);if(Ou(),Wt===Ki&&mt===","){if(Jn(),Wt===Ki&&mt==="}"){bn=ld(bn,",");break}if(mt===""){bn=ld(bn,",");break}}else if(kW())bn=Ta(bn,",");else break}Wt===Ki&&mt==="}"?Jn():bn=Ta(bn,"}");return}MW()}function MW(){if(Wt===Ki&&mt==="["){if(Jn(),Wt===Ki&&mt==="]"){Jn();return}for(;;)if(Ou(),Wt===Ki&&mt===","){if(Jn(),Wt===Ki&&mt==="]"){bn=ld(bn,",");break}if(mt===""){bn=ld(bn,",");break}}else if(ad())bn=Ta(bn,",");else break;Wt===Ki&&mt==="]"?Jn():bn=Ta(bn,"]");return}BW()}function BW(){if(Wt===Hl){for(Jn();Wt===Ki&&mt==="+";)if(mt="",Jn(),Wt===Hl){var n=bn.lastIndexOf('"');bn=bn.substring(0,n)+mt.substring(1),mt="",Jn()}return}LW()}function LW(){if(Wt===bc){Jn();return}UW()}function UW(){if(Wt===Xa){if(AW[mt]){Jn();return}if(tS[mt]){mt=tS[mt],Jn();return}var n=mt,e=bn.length;if(mt="",Jn(),Wt===Ki&&mt==="("){mt="",Jn(),Ou(),Wt===Ki&&mt===")"&&(mt="",Jn(),Wt===Ki&&mt===";"&&(mt="",Jn()));return}for(bn=SW(bn,'"'.concat(n),e);Wt===Xa||Wt===bc;)Jn();bn+='"';return}WW()}function WW(){throw mt===""?new Cs("Unexpected end of json string",Ei-mt.length):new Cs("Value expected",Ei-mt.length)}function wi(n){return parseInt(n,10)}function VW(n){return FW.test(n)}const FW=/^[0-9]$/;function jW(n){return HW.test(n)}const HW=/^-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?$/;function ji(n){return typeof n=="object"&&n!==null&&n.constructor===Object}function Ri(n){return typeof n=="object"&&n!==null&&(n.constructor===Object||n.constructor===Array)}function qW(n){return n===!0||n===!1}function d1(n){if(typeof n=="number")return n>9466848e5&&isFinite(n)&&Math.floor(n)===n&&!isNaN(new Date(n).valueOf());if(typeof n=="bigint")return d1(Number(n));try{const t=n.valueOf();if(t!==n)return d1(t)}catch{return!1}}function fO(n){const e=window.document.createElement("div");return e.style.color=n,e.style.color.split(/\s+/).join("").toLowerCase()||null}function zW(n){return typeof n=="string"&&!!fO(n)}function hO(n,e){if(typeof n=="number"||typeof n=="string"||typeof n=="boolean"||typeof n>"u")return typeof n;if(typeof n=="bigint")return"number";if(n===null)return"null";if(Array.isArray(n))return"array";if(ji(n))return"object";const t=e.stringify(n);return t&&VW(t[0])?"number":t==="true"||t==="false"?"boolean":t==="null"?"null":"unknown"}const GW=/^https?:\/\/\S+$/;function Mv(n){return typeof n=="string"&&GW.test(n)}function gf(n,e){if(n==="")return"";const t=n.trim();return t==="null"?null:t==="true"?!0:t==="false"?!1:jW(t)?e.parse(t):n}function KW(n,e){return typeof n=="string"&&typeof gf(n,e)!="string"}function XW(n){return QW.test(n)}const QW=/^-?[0-9]+$/;var YW=typeof global=="object"&&global&&global.Object===Object&&global;const dO=YW;var JW=typeof self=="object"&&self&&self.Object===Object&&self,ZW=dO||JW||Function("return this")();const Sr=ZW;var xW=Sr.Symbol;const sr=xW;var mO=Object.prototype,$W=mO.hasOwnProperty,eV=mO.toString,Rc=sr?sr.toStringTag:void 0;function tV(n){var e=$W.call(n,Rc),t=n[Rc];try{n[Rc]=void 0;var i=!0}catch{}var s=eV.call(n);return i&&(e?n[Rc]=t:delete n[Rc]),s}var nV=Object.prototype,iV=nV.toString;function sV(n){return iV.call(n)}var rV="[object Null]",oV="[object Undefined]",sS=sr?sr.toStringTag:void 0;function _c(n){return n==null?n===void 0?oV:rV:sS&&sS in Object(n)?tV(n):sV(n)}function Jo(n){return n!=null&&typeof n=="object"}var lV="[object Symbol]";function ql(n){return typeof n=="symbol"||Jo(n)&&_c(n)==lV}function iu(n,e){for(var t=-1,i=n==null?0:n.length,s=Array(i);++t<i;)s[t]=e(n[t],t,n);return s}var aV=Array.isArray;const ds=aV;var cV=1/0,rS=sr?sr.prototype:void 0,oS=rS?rS.toString:void 0;function pO(n){if(typeof n=="string")return n;if(ds(n))return iu(n,pO)+"";if(ql(n))return oS?oS.call(n):"";var e=n+"";return e=="0"&&1/n==-cV?"-0":e}var uV=/\s/;function fV(n){for(var e=n.length;e--&&uV.test(n.charAt(e)););return e}var hV=/^\s+/;function dV(n){return n&&n.slice(0,fV(n)+1).replace(hV,"")}function yr(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var lS=0/0,mV=/^[-+]0x[0-9a-f]+$/i,pV=/^0b[01]+$/i,gV=/^0o[0-7]+$/i,vV=parseInt;function m1(n){if(typeof n=="number")return n;if(ql(n))return lS;if(yr(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=yr(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=dV(n);var t=pV.test(n);return t||gV.test(n)?vV(n.slice(2),t?2:8):mV.test(n)?lS:+n}var aS=1/0,bV=17976931348623157e292;function Sh(n){if(!n)return n===0?n:0;if(n=m1(n),n===aS||n===-aS){var e=n<0?-1:1;return e*bV}return n===n?n:0}function _V(n){var e=Sh(n),t=e%1;return e===e?t?e-t:e:0}function vf(n){return n}var yV="[object AsyncFunction]",SV="[object Function]",EV="[object GeneratorFunction]",wV="[object Proxy]";function gO(n){if(!yr(n))return!1;var e=_c(n);return e==SV||e==EV||e==yV||e==wV}var AV=Sr["__core-js_shared__"];const Cp=AV;var cS=function(){var n=/[^.]+$/.exec(Cp&&Cp.keys&&Cp.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function CV(n){return!!cS&&cS in n}var kV=Function.prototype,TV=kV.toString;function ta(n){if(n!=null){try{return TV.call(n)}catch{}try{return n+""}catch{}}return""}var IV=/[\\^$.*+?()[\]{}|]/g,OV=/^\[object .+?Constructor\]$/,RV=Function.prototype,DV=Object.prototype,NV=RV.toString,PV=DV.hasOwnProperty,MV=RegExp("^"+NV.call(PV).replace(IV,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function BV(n){if(!yr(n)||CV(n))return!1;var e=gO(n)?MV:OV;return e.test(ta(n))}function LV(n,e){return n==null?void 0:n[e]}function na(n,e){var t=LV(n,e);return BV(t)?t:void 0}var UV=na(Sr,"WeakMap");const p1=UV;var uS=Object.create,WV=function(){function n(){}return function(e){if(!yr(e))return{};if(uS)return uS(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();const VV=WV;function FV(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}function Hn(){}function jV(n,e){var t=-1,i=n.length;for(e||(e=Array(i));++t<i;)e[t]=n[t];return e}var HV=800,qV=16,zV=Date.now;function GV(n){var e=0,t=0;return function(){var i=zV(),s=qV-(i-t);if(t=i,s>0){if(++e>=HV)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}function KV(n){return function(){return n}}var XV=function(){try{var n=na(Object,"defineProperty");return n({},"",{}),n}catch{}}();const cd=XV;var QV=cd?function(n,e){return cd(n,"toString",{configurable:!0,enumerable:!1,value:KV(e),writable:!0})}:vf;const YV=QV;var JV=GV(YV);const ZV=JV;function xV(n,e){for(var t=-1,i=n==null?0:n.length;++t<i&&e(n[t],t,n)!==!1;);return n}var $V=9007199254740991,eF=/^(?:0|[1-9]\d*)$/;function Bv(n,e){var t=typeof n;return e=e??$V,!!e&&(t=="number"||t!="symbol"&&eF.test(n))&&n>-1&&n%1==0&&n<e}function Lv(n,e,t){e=="__proto__"&&cd?cd(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}function Rm(n,e){return n===e||n!==n&&e!==e}var tF=Object.prototype,nF=tF.hasOwnProperty;function vO(n,e,t){var i=n[e];(!(nF.call(n,e)&&Rm(i,t))||t===void 0&&!(e in n))&&Lv(n,e,t)}function Dm(n,e,t,i){var s=!t;t||(t={});for(var r=-1,o=e.length;++r<o;){var l=e[r],a=i?i(t[l],n[l],l,t,n):void 0;a===void 0&&(a=n[l]),s?Lv(t,l,a):vO(t,l,a)}return t}var fS=Math.max;function iF(n,e,t){return e=fS(e===void 0?n.length-1:e,0),function(){for(var i=arguments,s=-1,r=fS(i.length-e,0),o=Array(r);++s<r;)o[s]=i[e+s];s=-1;for(var l=Array(e+1);++s<e;)l[s]=i[s];return l[e]=t(o),FV(n,this,l)}}function sF(n,e){return ZV(iF(n,e,vf),n+"")}var rF=9007199254740991;function Uv(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=rF}function yc(n){return n!=null&&Uv(n.length)&&!gO(n)}function g1(n,e,t){if(!yr(t))return!1;var i=typeof e;return(i=="number"?yc(t)&&Bv(e,t.length):i=="string"&&e in t)?Rm(t[e],n):!1}var oF=Object.prototype;function Nm(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||oF;return n===t}function bO(n,e){for(var t=-1,i=Array(n);++t<n;)i[t]=e(t);return i}var lF="[object Arguments]";function hS(n){return Jo(n)&&_c(n)==lF}var _O=Object.prototype,aF=_O.hasOwnProperty,cF=_O.propertyIsEnumerable,uF=hS(function(){return arguments}())?hS:function(n){return Jo(n)&&aF.call(n,"callee")&&!cF.call(n,"callee")};const Pm=uF;function fF(){return!1}var yO=typeof exports=="object"&&exports&&!exports.nodeType&&exports,dS=yO&&typeof module=="object"&&module&&!module.nodeType&&module,hF=dS&&dS.exports===yO,mS=hF?Sr.Buffer:void 0,dF=mS?mS.isBuffer:void 0,mF=dF||fF;const Ru=mF;var pF="[object Arguments]",gF="[object Array]",vF="[object Boolean]",bF="[object Date]",_F="[object Error]",yF="[object Function]",SF="[object Map]",EF="[object Number]",wF="[object Object]",AF="[object RegExp]",CF="[object Set]",kF="[object String]",TF="[object WeakMap]",IF="[object ArrayBuffer]",OF="[object DataView]",RF="[object Float32Array]",DF="[object Float64Array]",NF="[object Int8Array]",PF="[object Int16Array]",MF="[object Int32Array]",BF="[object Uint8Array]",LF="[object Uint8ClampedArray]",UF="[object Uint16Array]",WF="[object Uint32Array]",Xn={};Xn[RF]=Xn[DF]=Xn[NF]=Xn[PF]=Xn[MF]=Xn[BF]=Xn[LF]=Xn[UF]=Xn[WF]=!0;Xn[pF]=Xn[gF]=Xn[IF]=Xn[vF]=Xn[OF]=Xn[bF]=Xn[_F]=Xn[yF]=Xn[SF]=Xn[EF]=Xn[wF]=Xn[AF]=Xn[CF]=Xn[kF]=Xn[TF]=!1;function VF(n){return Jo(n)&&Uv(n.length)&&!!Xn[_c(n)]}function Mm(n){return function(e){return n(e)}}var SO=typeof exports=="object"&&exports&&!exports.nodeType&&exports,su=SO&&typeof module=="object"&&module&&!module.nodeType&&module,FF=su&&su.exports===SO,kp=FF&&dO.process,jF=function(){try{var n=su&&su.require&&su.require("util").types;return n||kp&&kp.binding&&kp.binding("util")}catch{}}();const Ya=jF;var pS=Ya&&Ya.isTypedArray,HF=pS?Mm(pS):VF;const Wv=HF;var qF=Object.prototype,zF=qF.hasOwnProperty;function EO(n,e){var t=ds(n),i=!t&&Pm(n),s=!t&&!i&&Ru(n),r=!t&&!i&&!s&&Wv(n),o=t||i||s||r,l=o?bO(n.length,String):[],a=l.length;for(var c in n)(e||zF.call(n,c))&&!(o&&(c=="length"||s&&(c=="offset"||c=="parent")||r&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Bv(c,a)))&&l.push(c);return l}function wO(n,e){return function(t){return n(e(t))}}var GF=wO(Object.keys,Object);const KF=GF;var XF=Object.prototype,QF=XF.hasOwnProperty;function AO(n){if(!Nm(n))return KF(n);var e=[];for(var t in Object(n))QF.call(n,t)&&t!="constructor"&&e.push(t);return e}function Sc(n){return yc(n)?EO(n):AO(n)}function YF(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var JF=Object.prototype,ZF=JF.hasOwnProperty;function xF(n){if(!yr(n))return YF(n);var e=Nm(n),t=[];for(var i in n)i=="constructor"&&(e||!ZF.call(n,i))||t.push(i);return t}function Vv(n){return yc(n)?EO(n,!0):xF(n)}var $F=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,e9=/^\w*$/;function Fv(n,e){if(ds(n))return!1;var t=typeof n;return t=="number"||t=="symbol"||t=="boolean"||n==null||ql(n)?!0:e9.test(n)||!$F.test(n)||e!=null&&n in Object(e)}var t9=na(Object,"create");const Du=t9;function n9(){this.__data__=Du?Du(null):{},this.size=0}function i9(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var s9="__lodash_hash_undefined__",r9=Object.prototype,o9=r9.hasOwnProperty;function l9(n){var e=this.__data__;if(Du){var t=e[n];return t===s9?void 0:t}return o9.call(e,n)?e[n]:void 0}var a9=Object.prototype,c9=a9.hasOwnProperty;function u9(n){var e=this.__data__;return Du?e[n]!==void 0:c9.call(e,n)}var f9="__lodash_hash_undefined__";function h9(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=Du&&e===void 0?f9:e,this}function zl(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}zl.prototype.clear=n9;zl.prototype.delete=i9;zl.prototype.get=l9;zl.prototype.has=u9;zl.prototype.set=h9;function d9(){this.__data__=[],this.size=0}function Bm(n,e){for(var t=n.length;t--;)if(Rm(n[t][0],e))return t;return-1}var m9=Array.prototype,p9=m9.splice;function g9(n){var e=this.__data__,t=Bm(e,n);if(t<0)return!1;var i=e.length-1;return t==i?e.pop():p9.call(e,t,1),--this.size,!0}function v9(n){var e=this.__data__,t=Bm(e,n);return t<0?void 0:e[t][1]}function b9(n){return Bm(this.__data__,n)>-1}function _9(n,e){var t=this.__data__,i=Bm(t,n);return i<0?(++this.size,t.push([n,e])):t[i][1]=e,this}function yo(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}yo.prototype.clear=d9;yo.prototype.delete=g9;yo.prototype.get=v9;yo.prototype.has=b9;yo.prototype.set=_9;var y9=na(Sr,"Map");const Nu=y9;function S9(){this.size=0,this.__data__={hash:new zl,map:new(Nu||yo),string:new zl}}function E9(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}function Lm(n,e){var t=n.__data__;return E9(e)?t[typeof e=="string"?"string":"hash"]:t.map}function w9(n){var e=Lm(this,n).delete(n);return this.size-=e?1:0,e}function A9(n){return Lm(this,n).get(n)}function C9(n){return Lm(this,n).has(n)}function k9(n,e){var t=Lm(this,n),i=t.size;return t.set(n,e),this.size+=t.size==i?0:1,this}function So(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}So.prototype.clear=S9;So.prototype.delete=w9;So.prototype.get=A9;So.prototype.has=C9;So.prototype.set=k9;var T9="Expected a function";function Um(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError(T9);var t=function(){var i=arguments,s=e?e.apply(this,i):i[0],r=t.cache;if(r.has(s))return r.get(s);var o=n.apply(this,i);return t.cache=r.set(s,o)||r,o};return t.cache=new(Um.Cache||So),t}Um.Cache=So;var I9=500;function O9(n){var e=Um(n,function(i){return t.size===I9&&t.clear(),i}),t=e.cache;return e}var R9=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,D9=/\\(\\)?/g,N9=O9(function(n){var e=[];return n.charCodeAt(0)===46&&e.push(""),n.replace(R9,function(t,i,s,r){e.push(s?r.replace(D9,"$1"):i||t)}),e});const P9=N9;function CO(n){return n==null?"":pO(n)}function kO(n,e){return ds(n)?n:Fv(n,e)?[n]:P9(CO(n))}var M9=1/0;function Wm(n){if(typeof n=="string"||ql(n))return n;var e=n+"";return e=="0"&&1/n==-M9?"-0":e}function jv(n,e){e=kO(e,n);for(var t=0,i=e.length;n!=null&&t<i;)n=n[Wm(e[t++])];return t&&t==i?n:void 0}function B9(n,e,t){var i=n==null?void 0:jv(n,e);return i===void 0?t:i}function Hv(n,e){for(var t=-1,i=e.length,s=n.length;++t<i;)n[s+t]=e[t];return n}var gS=sr?sr.isConcatSpreadable:void 0;function L9(n){return ds(n)||Pm(n)||!!(gS&&n&&n[gS])}function TO(n,e,t,i,s){var r=-1,o=n.length;for(t||(t=L9),s||(s=[]);++r<o;){var l=n[r];e>0&&t(l)?e>1?TO(l,e-1,t,i,s):Hv(s,l):i||(s[s.length]=l)}return s}var U9=wO(Object.getPrototypeOf,Object);const IO=U9;function W9(n,e,t){var i=-1,s=n.length;e<0&&(e=-e>s?0:s+e),t=t>s?s:t,t<0&&(t+=s),s=e>t?0:t-e>>>0,e>>>=0;for(var r=Array(s);++i<s;)r[i]=n[i+e];return r}function V9(){this.__data__=new yo,this.size=0}function F9(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}function j9(n){return this.__data__.get(n)}function H9(n){return this.__data__.has(n)}var q9=200;function z9(n,e){var t=this.__data__;if(t instanceof yo){var i=t.__data__;if(!Nu||i.length<q9-1)return i.push([n,e]),this.size=++t.size,this;t=this.__data__=new So(i)}return t.set(n,e),this.size=t.size,this}function jr(n){var e=this.__data__=new yo(n);this.size=e.size}jr.prototype.clear=V9;jr.prototype.delete=F9;jr.prototype.get=j9;jr.prototype.has=H9;jr.prototype.set=z9;function G9(n,e){return n&&Dm(e,Sc(e),n)}function K9(n,e){return n&&Dm(e,Vv(e),n)}var OO=typeof exports=="object"&&exports&&!exports.nodeType&&exports,vS=OO&&typeof module=="object"&&module&&!module.nodeType&&module,X9=vS&&vS.exports===OO,bS=X9?Sr.Buffer:void 0,_S=bS?bS.allocUnsafe:void 0;function Q9(n,e){if(e)return n.slice();var t=n.length,i=_S?_S(t):new n.constructor(t);return n.copy(i),i}function Y9(n,e){for(var t=-1,i=n==null?0:n.length,s=0,r=[];++t<i;){var o=n[t];e(o,t,n)&&(r[s++]=o)}return r}function RO(){return[]}var J9=Object.prototype,Z9=J9.propertyIsEnumerable,yS=Object.getOwnPropertySymbols,x9=yS?function(n){return n==null?[]:(n=Object(n),Y9(yS(n),function(e){return Z9.call(n,e)}))}:RO;const qv=x9;function $9(n,e){return Dm(n,qv(n),e)}var ej=Object.getOwnPropertySymbols,tj=ej?function(n){for(var e=[];n;)Hv(e,qv(n)),n=IO(n);return e}:RO;const DO=tj;function nj(n,e){return Dm(n,DO(n),e)}function NO(n,e,t){var i=e(n);return ds(n)?i:Hv(i,t(n))}function v1(n){return NO(n,Sc,qv)}function ij(n){return NO(n,Vv,DO)}var sj=na(Sr,"DataView");const b1=sj;var rj=na(Sr,"Promise");const _1=rj;var oj=na(Sr,"Set");const y1=oj;var SS="[object Map]",lj="[object Object]",ES="[object Promise]",wS="[object Set]",AS="[object WeakMap]",CS="[object DataView]",aj=ta(b1),cj=ta(Nu),uj=ta(_1),fj=ta(y1),hj=ta(p1),ml=_c;(b1&&ml(new b1(new ArrayBuffer(1)))!=CS||Nu&&ml(new Nu)!=SS||_1&&ml(_1.resolve())!=ES||y1&&ml(new y1)!=wS||p1&&ml(new p1)!=AS)&&(ml=function(n){var e=_c(n),t=e==lj?n.constructor:void 0,i=t?ta(t):"";if(i)switch(i){case aj:return CS;case cj:return SS;case uj:return ES;case fj:return wS;case hj:return AS}return e});const Ja=ml;var dj=Object.prototype,mj=dj.hasOwnProperty;function pj(n){var e=n.length,t=new n.constructor(e);return e&&typeof n[0]=="string"&&mj.call(n,"index")&&(t.index=n.index,t.input=n.input),t}var gj=Sr.Uint8Array;const ud=gj;function zv(n){var e=new n.constructor(n.byteLength);return new ud(e).set(new ud(n)),e}function vj(n,e){var t=e?zv(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.byteLength)}var bj=/\w*$/;function _j(n){var e=new n.constructor(n.source,bj.exec(n));return e.lastIndex=n.lastIndex,e}var kS=sr?sr.prototype:void 0,TS=kS?kS.valueOf:void 0;function yj(n){return TS?Object(TS.call(n)):{}}function Sj(n,e){var t=e?zv(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}var Ej="[object Boolean]",wj="[object Date]",Aj="[object Map]",Cj="[object Number]",kj="[object RegExp]",Tj="[object Set]",Ij="[object String]",Oj="[object Symbol]",Rj="[object ArrayBuffer]",Dj="[object DataView]",Nj="[object Float32Array]",Pj="[object Float64Array]",Mj="[object Int8Array]",Bj="[object Int16Array]",Lj="[object Int32Array]",Uj="[object Uint8Array]",Wj="[object Uint8ClampedArray]",Vj="[object Uint16Array]",Fj="[object Uint32Array]";function jj(n,e,t){var i=n.constructor;switch(e){case Rj:return zv(n);case Ej:case wj:return new i(+n);case Dj:return vj(n,t);case Nj:case Pj:case Mj:case Bj:case Lj:case Uj:case Wj:case Vj:case Fj:return Sj(n,t);case Aj:return new i;case Cj:case Ij:return new i(n);case kj:return _j(n);case Tj:return new i;case Oj:return yj(n)}}function Hj(n){return typeof n.constructor=="function"&&!Nm(n)?VV(IO(n)):{}}var qj="[object Map]";function zj(n){return Jo(n)&&Ja(n)==qj}var IS=Ya&&Ya.isMap,Gj=IS?Mm(IS):zj;const Kj=Gj;var Xj="[object Set]";function Qj(n){return Jo(n)&&Ja(n)==Xj}var OS=Ya&&Ya.isSet,Yj=OS?Mm(OS):Qj;const Jj=Yj;var Zj=1,xj=2,$j=4,PO="[object Arguments]",eH="[object Array]",tH="[object Boolean]",nH="[object Date]",iH="[object Error]",MO="[object Function]",sH="[object GeneratorFunction]",rH="[object Map]",oH="[object Number]",BO="[object Object]",lH="[object RegExp]",aH="[object Set]",cH="[object String]",uH="[object Symbol]",fH="[object WeakMap]",hH="[object ArrayBuffer]",dH="[object DataView]",mH="[object Float32Array]",pH="[object Float64Array]",gH="[object Int8Array]",vH="[object Int16Array]",bH="[object Int32Array]",_H="[object Uint8Array]",yH="[object Uint8ClampedArray]",SH="[object Uint16Array]",EH="[object Uint32Array]",Vn={};Vn[PO]=Vn[eH]=Vn[hH]=Vn[dH]=Vn[tH]=Vn[nH]=Vn[mH]=Vn[pH]=Vn[gH]=Vn[vH]=Vn[bH]=Vn[rH]=Vn[oH]=Vn[BO]=Vn[lH]=Vn[aH]=Vn[cH]=Vn[uH]=Vn[_H]=Vn[yH]=Vn[SH]=Vn[EH]=!0;Vn[iH]=Vn[MO]=Vn[fH]=!1;function Eh(n,e,t,i,s,r){var o,l=e&Zj,a=e&xj,c=e&$j;if(t&&(o=s?t(n,i,s,r):t(n)),o!==void 0)return o;if(!yr(n))return n;var u=ds(n);if(u){if(o=pj(n),!l)return jV(n,o)}else{var f=Ja(n),h=f==MO||f==sH;if(Ru(n))return Q9(n,l);if(f==BO||f==PO||h&&!s){if(o=a||h?{}:Hj(n),!l)return a?nj(n,K9(o,n)):$9(n,G9(o,n))}else{if(!Vn[f])return s?n:{};o=jj(n,f,l)}}r||(r=new jr);var d=r.get(n);if(d)return d;r.set(n,o),Jj(n)?n.forEach(function(_){o.add(Eh(_,e,t,_,n,r))}):Kj(n)&&n.forEach(function(_,v){o.set(v,Eh(_,e,t,v,n,r))});var m=c?a?ij:v1:a?Vv:Sc,p=u?void 0:m(n);return xV(p||n,function(_,v){p&&(v=_,_=n[v]),vO(o,v,Eh(_,e,t,v,n,r))}),o}var wH=1,AH=4;function CH(n,e){return e=typeof e=="function"?e:void 0,Eh(n,wH|AH,e)}var kH="__lodash_hash_undefined__";function TH(n){return this.__data__.set(n,kH),this}function IH(n){return this.__data__.has(n)}function fd(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new So;++e<t;)this.add(n[e])}fd.prototype.add=fd.prototype.push=TH;fd.prototype.has=IH;function OH(n,e){for(var t=-1,i=n==null?0:n.length;++t<i;)if(e(n[t],t,n))return!0;return!1}function RH(n,e){return n.has(e)}var DH=1,NH=2;function LO(n,e,t,i,s,r){var o=t&DH,l=n.length,a=e.length;if(l!=a&&!(o&&a>l))return!1;var c=r.get(n),u=r.get(e);if(c&&u)return c==e&&u==n;var f=-1,h=!0,d=t&NH?new fd:void 0;for(r.set(n,e),r.set(e,n);++f<l;){var m=n[f],p=e[f];if(i)var _=o?i(p,m,f,e,n,r):i(m,p,f,n,e,r);if(_!==void 0){if(_)continue;h=!1;break}if(d){if(!OH(e,function(v,y){if(!RH(d,y)&&(m===v||s(m,v,t,i,r)))return d.push(y)})){h=!1;break}}else if(!(m===p||s(m,p,t,i,r))){h=!1;break}}return r.delete(n),r.delete(e),h}function PH(n){var e=-1,t=Array(n.size);return n.forEach(function(i,s){t[++e]=[s,i]}),t}function MH(n){var e=-1,t=Array(n.size);return n.forEach(function(i){t[++e]=i}),t}var BH=1,LH=2,UH="[object Boolean]",WH="[object Date]",VH="[object Error]",FH="[object Map]",jH="[object Number]",HH="[object RegExp]",qH="[object Set]",zH="[object String]",GH="[object Symbol]",KH="[object ArrayBuffer]",XH="[object DataView]",RS=sr?sr.prototype:void 0,Tp=RS?RS.valueOf:void 0;function QH(n,e,t,i,s,r,o){switch(t){case XH:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case KH:return!(n.byteLength!=e.byteLength||!r(new ud(n),new ud(e)));case UH:case WH:case jH:return Rm(+n,+e);case VH:return n.name==e.name&&n.message==e.message;case HH:case zH:return n==e+"";case FH:var l=PH;case qH:var a=i&BH;if(l||(l=MH),n.size!=e.size&&!a)return!1;var c=o.get(n);if(c)return c==e;i|=LH,o.set(n,e);var u=LO(l(n),l(e),i,s,r,o);return o.delete(n),u;case GH:if(Tp)return Tp.call(n)==Tp.call(e)}return!1}var YH=1,JH=Object.prototype,ZH=JH.hasOwnProperty;function xH(n,e,t,i,s,r){var o=t&YH,l=v1(n),a=l.length,c=v1(e),u=c.length;if(a!=u&&!o)return!1;for(var f=a;f--;){var h=l[f];if(!(o?h in e:ZH.call(e,h)))return!1}var d=r.get(n),m=r.get(e);if(d&&m)return d==e&&m==n;var p=!0;r.set(n,e),r.set(e,n);for(var _=o;++f<a;){h=l[f];var v=n[h],y=e[h];if(i)var w=o?i(y,v,h,e,n,r):i(v,y,h,n,e,r);if(!(w===void 0?v===y||s(v,y,t,i,r):w)){p=!1;break}_||(_=h=="constructor")}if(p&&!_){var A=n.constructor,E=e.constructor;A!=E&&"constructor"in n&&"constructor"in e&&!(typeof A=="function"&&A instanceof A&&typeof E=="function"&&E instanceof E)&&(p=!1)}return r.delete(n),r.delete(e),p}var $H=1,DS="[object Arguments]",NS="[object Array]",Vf="[object Object]",eq=Object.prototype,PS=eq.hasOwnProperty;function tq(n,e,t,i,s,r){var o=ds(n),l=ds(e),a=o?NS:Ja(n),c=l?NS:Ja(e);a=a==DS?Vf:a,c=c==DS?Vf:c;var u=a==Vf,f=c==Vf,h=a==c;if(h&&Ru(n)){if(!Ru(e))return!1;o=!0,u=!1}if(h&&!u)return r||(r=new jr),o||Wv(n)?LO(n,e,t,i,s,r):QH(n,e,a,t,i,s,r);if(!(t&$H)){var d=u&&PS.call(n,"__wrapped__"),m=f&&PS.call(e,"__wrapped__");if(d||m){var p=d?n.value():n,_=m?e.value():e;return r||(r=new jr),s(p,_,t,i,r)}}return h?(r||(r=new jr),xH(n,e,t,i,s,r)):!1}function Vm(n,e,t,i,s){return n===e?!0:n==null||e==null||!Jo(n)&&!Jo(e)?n!==n&&e!==e:tq(n,e,t,i,Vm,s)}var nq=1,iq=2;function sq(n,e,t,i){var s=t.length,r=s,o=!i;if(n==null)return!r;for(n=Object(n);s--;){var l=t[s];if(o&&l[2]?l[1]!==n[l[0]]:!(l[0]in n))return!1}for(;++s<r;){l=t[s];var a=l[0],c=n[a],u=l[1];if(o&&l[2]){if(c===void 0&&!(a in n))return!1}else{var f=new jr;if(i)var h=i(c,u,a,n,e,f);if(!(h===void 0?Vm(u,c,nq|iq,i,f):h))return!1}}return!0}function UO(n){return n===n&&!yr(n)}function rq(n){for(var e=Sc(n),t=e.length;t--;){var i=e[t],s=n[i];e[t]=[i,s,UO(s)]}return e}function WO(n,e){return function(t){return t==null?!1:t[n]===e&&(e!==void 0||n in Object(t))}}function oq(n){var e=rq(n);return e.length==1&&e[0][2]?WO(e[0][0],e[0][1]):function(t){return t===n||sq(t,n,e)}}function lq(n,e){return n!=null&&e in Object(n)}function aq(n,e,t){e=kO(e,n);for(var i=-1,s=e.length,r=!1;++i<s;){var o=Wm(e[i]);if(!(r=n!=null&&t(n,o)))break;n=n[o]}return r||++i!=s?r:(s=n==null?0:n.length,!!s&&Uv(s)&&Bv(o,s)&&(ds(n)||Pm(n)))}function cq(n,e){return n!=null&&aq(n,e,lq)}var uq=1,fq=2;function hq(n,e){return Fv(n)&&UO(e)?WO(Wm(n),e):function(t){var i=B9(t,n);return i===void 0&&i===e?cq(t,n):Vm(e,i,uq|fq)}}function dq(n){return function(e){return e==null?void 0:e[n]}}function mq(n){return function(e){return jv(e,n)}}function pq(n){return Fv(n)?dq(Wm(n)):mq(n)}function Fm(n){return typeof n=="function"?n:n==null?vf:typeof n=="object"?ds(n)?hq(n[0],n[1]):oq(n):pq(n)}function gq(n,e,t,i){for(var s=-1,r=n==null?0:n.length;++s<r;){var o=n[s];e(i,o,t(o),n)}return i}function VO(n){return function(e,t,i){for(var s=-1,r=Object(e),o=i(e),l=o.length;l--;){var a=o[n?l:++s];if(t(r[a],a,r)===!1)break}return e}}var vq=VO();const bq=vq;function _q(n,e){return n&&bq(n,e,Sc)}function FO(n,e){return function(t,i){if(t==null)return t;if(!yc(t))return n(t,i);for(var s=t.length,r=e?s:-1,o=Object(t);(e?r--:++r<s)&&i(o[r],r,o)!==!1;);return t}}var yq=FO(_q);const jO=yq;function Sq(n,e,t,i){return jO(n,function(s,r,o){e(i,s,t(s),o)}),i}function Eq(n,e){return function(t,i){var s=ds(t)?gq:Sq,r=e?e():{};return s(t,n,Fm(i),r)}}var wq=function(){return Sr.Date.now()};const Ip=wq;var Aq="Expected a function",Cq=Math.max,kq=Math.min;function jm(n,e,t){var i,s,r,o,l,a,c=0,u=!1,f=!1,h=!0;if(typeof n!="function")throw new TypeError(Aq);e=m1(e)||0,yr(t)&&(u=!!t.leading,f="maxWait"in t,r=f?Cq(m1(t.maxWait)||0,e):r,h="trailing"in t?!!t.trailing:h);function d(C){var R=i,D=s;return i=s=void 0,c=C,o=n.apply(D,R),o}function m(C){return c=C,l=setTimeout(v,e),u?d(C):o}function p(C){var R=C-a,D=C-c,N=e-R;return f?kq(N,r-D):N}function _(C){var R=C-a,D=C-c;return a===void 0||R>=e||R<0||f&&D>=r}function v(){var C=Ip();if(_(C))return y(C);l=setTimeout(v,p(C))}function y(C){return l=void 0,h&&i?d(C):(i=s=void 0,o)}function w(){l!==void 0&&clearTimeout(l),c=0,i=a=s=l=void 0}function A(){return l===void 0?o:y(Ip())}function E(){var C=Ip(),R=_(C);if(i=arguments,s=this,a=C,R){if(l===void 0)return m(a);if(f)return clearTimeout(l),l=setTimeout(v,e),d(a)}return l===void 0&&(l=setTimeout(v,e)),o}return E.cancel=w,E.flush=A,E}function Xt(n){var e=n==null?0:n.length;return e?n[e-1]:void 0}function HO(n){return typeof n=="function"?n:vf}function Tq(n,e){for(var t=n==null?0:n.length;t--&&e(n[t],t,n)!==!1;);return n}var Iq=VO(!0);const Oq=Iq;function Rq(n,e){return n&&Oq(n,e,Sc)}var Dq=FO(Rq,!0);const Nq=Dq;function Pq(n,e){var t=ds(n)?Tq:Nq;return t(n,HO(e))}function ks(n){return n&&n.length?n[0]:void 0}function qO(n,e){var t=-1,i=yc(n)?Array(n.length):[];return jO(n,function(s,r,o){i[++t]=e(s,r,o)}),i}function Mq(n,e){var t=ds(n)?iu:qO;return t(n,Fm(e))}var Bq=Object.prototype,Lq=Bq.hasOwnProperty,Uq=Eq(function(n,e,t){Lq.call(n,t)?n[t].push(e):Lv(n,t,[e])});const Gv=Uq;function gn(n){var e=n==null?0:n.length;return e?W9(n,0,-1):[]}var Wq="[object Map]",Vq="[object Set]",Fq=Object.prototype,jq=Fq.hasOwnProperty;function ii(n){if(n==null)return!0;if(yc(n)&&(ds(n)||typeof n=="string"||typeof n.splice=="function"||Ru(n)||Wv(n)||Pm(n)))return!n.length;var e=Ja(n);if(e==Wq||e==Vq)return!n.size;if(Nm(n))return!AO(n).length;for(var t in n)if(jq.call(n,t))return!1;return!0}function En(n,e){return Vm(n,e)}function Hq(n,e){return n<e}function qq(n,e,t){for(var i=-1,s=n.length;++i<s;){var r=n[i],o=e(r);if(o!=null&&(l===void 0?o===o&&!ql(o):t(o,l)))var l=o,a=r}return a}function Ff(n,e){return n&&n.length?qq(n,Fm(e),Hq):void 0}function zq(n,e){var t=n.length;for(n.sort(e);t--;)n[t]=n[t].value;return n}function Gq(n,e){if(n!==e){var t=n!==void 0,i=n===null,s=n===n,r=ql(n),o=e!==void 0,l=e===null,a=e===e,c=ql(e);if(!l&&!c&&!r&&n>e||r&&o&&a&&!l&&!c||i&&o&&a||!t&&a||!s)return 1;if(!i&&!r&&!c&&n<e||c&&t&&s&&!i&&!r||l&&t&&s||!o&&s||!a)return-1}return 0}function Kq(n,e,t){for(var i=-1,s=n.criteria,r=e.criteria,o=s.length,l=t.length;++i<o;){var a=Gq(s[i],r[i]);if(a){if(i>=l)return a;var c=t[i];return a*(c=="desc"?-1:1)}}return n.index-e.index}function Xq(n,e,t){e.length?e=iu(e,function(r){return ds(r)?function(o){return jv(o,r.length===1?r[0]:r)}:r}):e=[vf];var i=-1;e=iu(e,Mm(Fm));var s=qO(n,function(r,o,l){var a=iu(e,function(c){return c(r)});return{criteria:a,index:++i,value:r}});return zq(s,function(r,o){return Kq(r,o,t)})}var Qq=Math.ceil,Yq=Math.max;function Jq(n,e,t,i){for(var s=-1,r=Yq(Qq((e-n)/(t||1)),0),o=Array(r);r--;)o[i?r:++s]=n,n+=t;return o}function Zq(n){return function(e,t,i){return i&&typeof i!="number"&&g1(e,t,i)&&(t=i=void 0),e=Sh(e),t===void 0?(t=e,e=0):t=Sh(t),i=i===void 0?e<t?1:-1:Sh(i),Jq(e,t,i,n)}}var xq=Zq();const $q=xq;var ez=sF(function(n,e){if(n==null)return[];var t=e.length;return t>1&&g1(n,e[0],e[1])?e=[]:t>2&&g1(e[0],e[1],e[2])&&(e=[e[0]]),Xq(n,TO(e,1),[])});const tz=ez;var nz="Expected a function";function iz(n,e,t){var i=!0,s=!0;if(typeof n!="function")throw new TypeError(nz);return yr(t)&&(i="leading"in t?!!t.leading:i,s="trailing"in t?!!t.trailing:s),jm(n,e,{leading:i,maxWait:e,trailing:s})}var sz=9007199254740991,Op=4294967295,rz=Math.min;function MS(n,e){if(n=_V(n),n<1||n>sz)return[];var t=Op,i=rz(n,Op);e=HO(e),n-=Op;for(var s=bO(i,e);++t<n;)e(t);return s}var oz=0;function hd(n){var e=++oz;return CO(n)+e}const lz=1e4,az=[];function S1(n,e=!1){const t={};if(!Array.isArray(n))throw new TypeError("Array expected");function i(o,l){(!Array.isArray(o)&&!ji(o)||e&&l.length>0)&&(t[ht(l)]=!0),ji(o)&&Object.keys(o).forEach(c=>{i(o[c],l.concat(c))})}const s=Math.min(n.length,lz);for(let o=0;o<s;o++){const l=n[o];i(l,az)}return Object.keys(t).sort().map(Yo)}function zO(n,e,t){if(!(e<=n))for(let i=n;i<e;i++)t(i)}function BS(n,e){return n.length>e?n.slice(0,e):n}function LS(n){return{...n}}function US(n){return Object.values(n)}function WS(n,e,t,i){const s=n.slice(0),r=s.splice(e,t);return s.splice.apply(s,[e+i,0,...r]),s}function Kv(n,e){try{return e.parse(n)}catch{return e.parse(Fo(n))}}function GO(n,e){try{return Kv(n,e)}catch{return}}function Xv(n,e){n=n.replace(KO,"");try{return e(n)}catch{}try{return e("["+n+"]")}catch{}try{return e("{"+n+"}")}catch{}throw new Error("Failed to parse partial JSON")}function cz(n){n=n.replace(KO,"");try{return Fo(n)}catch{}try{const e=Fo("["+n+"]");return e.substring(1,e.length-1)}catch{}try{const e=Fo("{"+n+"}");return e.substring(1,e.length-1)}catch{}throw new Error("Failed to repair partial JSON")}const KO=/,\s*$/;function Qv(n,e){const t=jS.exec(e);if(t){const i=wi(t[2]),s=fz(n,`
`,0,i),r=n.lastIndexOf(`
`,i),o=i-r-1;return{position:i,line:s,column:o,message:e.replace(jS,()=>`line ${s+1} column ${o+1}`)}}else{const i=pz.exec(e),s=i?wi(i[1]):null,r=s!==null?s-1:null,o=gz.exec(e),l=o?wi(o[1]):null,a=l!==null?l-1:null;return{position:r!==null&&a!==null?uz(n,r,a):null,line:r,column:a,message:e.replace(/^JSON.parse: /,"").replace(/ of the JSON data$/,"")}}}function uz(n,e,t){let i=n.indexOf(`
`),s=1;for(;s<e&&i!==-1;)i=n.indexOf(`
`,i+1),s++;return i!==-1?i+t+1:null}function fz(n,e,t=0,i=n.length){let s=0;for(let r=t;r<i;r++)n.charAt(r)===e&&s++;return s}function hz(n,e){try{const t=Om.parse(n),i=ht(e),s=t.pointers[i];if(s)return{path:e,line:s.key?s.key.line:s.value?s.value.line:0,column:s.key?s.key.column:s.value?s.value.column:0,from:s.key?s.key.pos:s.value?s.value.pos:0,to:s.keyEnd?s.keyEnd.pos:s.valueEnd?s.valueEnd.pos:0}}catch(t){console.error(t)}return null}function dz(n,e,t){if(e==="array"){if(Array.isArray(n))return n;if(ji(n))return US(n);if(typeof n=="string")try{const i=t.parse(n);if(Array.isArray(i))return i;if(ji(i))return US(i)}catch{return[n]}return[n]}if(e==="object"){if(Array.isArray(n))return LS(n);if(ji(n))return n;if(typeof n=="string")try{const i=t.parse(n);if(ji(i))return i;if(Array.isArray(i))return LS(i)}catch{return{value:n}}return{value:n}}if(e==="value")return Ri(n)?t.stringify(n):n;throw new Error(`Cannot convert ${hO(n,t)} to ${e}`)}function Rp(n){return ji(n)?n.json!==void 0?n.text!==void 0?'Content must contain either a property "json" or a property "text" but not both':null:n.text===void 0?'Content must contain either a property "json" or a property "text"':typeof n.text!="string"?'Content "text" property must be a string containing a JSON document. Did you mean to use the "json" property instead?':null:"Content must be an object"}function Yv(n){return typeof n.text=="string"}function VS(n,e,t){return Yv(n)?n.text:t.stringify(n.json,null,e)}function FS(n,e){return mz(n,e)>e}function mz(n,e=1/0){if(Yv(n))return n.text.length;const t=n.json;let i=0;function s(r){if(Array.isArray(r)){if(i+=2+(r.length-1),i>e)return i;for(let o=0;o<r.length;o++){const l=r[o];if(s(l),i>e)return i}}else if(ji(r)){const o=Object.keys(r);i+=2+o.length+(o.length-1);for(let l=0;l<o.length;l++){const a=o[l],c=r[a];i+=a.length+2,s(c)}}else typeof r=="string"?i+=r.length+2:i+=String(r).length}return s(t),i}const jS=/(position|char) (\d+)/,pz=/line (\d+)/,gz=/column (\d+)/;function vz(n,e){return n.parse===e.parse&&n.stringify===e.stringify}var Xs;(function(n){n.text="text",n.tree="tree"})(Xs||(Xs={}));var Pn;(function(n){n.after="after",n.inside="inside",n.key="key",n.value="value",n.multi="multi"})(Pn||(Pn={}));var dr;(function(n){n.after="after",n.key="key",n.value="value",n.inside="inside"})(dr||(dr={}));var Za;(function(n){n.info="info",n.warning="warning",n.error="error"})(Za||(Za={}));var vr;(function(n){n.key="key",n.value="value"})(vr||(vr={}));function XO({escapeControlCharacters:n,escapeUnicodeCharacters:e}){return n?e?bz:_z:e?yz:Sz}const bz={escapeValue:n=>QO(ZO(String(n))),unescapeValue:n=>xO(YO(n))},_z={escapeValue:n=>ZO(String(n)),unescapeValue:n=>xO(n)},yz={escapeValue:n=>QO(String(n)),unescapeValue:n=>YO(n)},Sz={escapeValue:n=>String(n),unescapeValue:n=>n};function QO(n){return n.replace(/[^\x20-\x7F]/g,e=>e==="\b"||e==="\f"||e===`
`||e==="\r"||e==="	"?e:"\\u"+("000"+e.codePointAt(0).toString(16)).slice(-4))}function YO(n){return n.replace(/\\u[a-fA-F0-9]{4}/g,e=>{try{const t=JSON.parse('"'+e+'"');return JO[t]||t}catch{return e}})}const JO={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},Ez={'\\"':'"',"\\\\":"\\","\\/":"/","\\b":"\b","\\f":"\f","\\n":`
`,"\\r":"\r","\\t":"	"};function ZO(n){return n.replace(/["\b\f\n\r\t\\]/g,e=>JO[e]||e)}function xO(n){return n.replace(/\\["bfnrt\\]/g,e=>Ez[e]||e)}function Gl(n){return typeof n!="string"?String(n):n.endsWith(`
`)?n+`
`:n}function wz(n){return n.replace(/\n$/,"")}function $O(n,e){return bf(n,t=>t.nodeName.toUpperCase()===e.toUpperCase())}function Sl(n,e,t){return bf(n,i=>Cz(i,e,t))}function Az(n){return n.nodeName==="DIV"&&n.contentEditable==="true"}function Cz(n,e,t){return typeof n.getAttribute=="function"&&n.getAttribute(e)===t}function bf(n,e){return!!Jv(n,e)}function Jv(n,e){let t=n;for(;t&&!e(t);)t=t.parentNode;return t||void 0}function eR(n){if(n.firstChild==null){n.focus();return}const e=document.createRange(),t=window.getSelection();e.setStart(n,1),e.collapse(!0),t.removeAllRanges(),t.addRange(e)}function Pu(n){return n&&n.ownerDocument&&n.ownerDocument.defaultView}function E1(n){const e=Pu(n);return bf(e.document.activeElement,t=>t===n)}function kz(n,e){return Jv(n,t=>t.nodeName===e)}function Dp(n){return Sl(n,"data-type","selectable-key")?Pn.key:Sl(n,"data-type","selectable-value")?Pn.value:Sl(n,"data-type","insert-selection-area-inside")?Pn.inside:Sl(n,"data-type","insert-selection-area-after")?Pn.after:Pn.multi}function w1(n){return encodeURIComponent(ht(n))}function Tz(n){return Yo(decodeURIComponent(n))}function Iz(n){const e=Jv(n,t=>t.hasAttribute("data-path"));return e?Tz(e.getAttribute("data-path")):null}function Oz({allElements:n,currentElement:e,direction:t,hasPrio:i=()=>!0,margin:s=10}){const r=Mq(n.filter(l),a),o=a(e);function l(v){const y=v.getBoundingClientRect();return y.width>0&&y.height>0}function a(v){const y=v.getBoundingClientRect();return{x:y.left+y.width/2,y:y.top+y.height/2,rect:y,element:v}}const c=(v,y)=>Math.abs(v.y-y.y)<s,u=(v,y)=>v.rect.left+s<y.rect.left,f=(v,y)=>v.rect.right>y.rect.right+s,h=(v,y)=>v.y+s<y.y,d=(v,y)=>v.y>y.y+s;function m(v,y,w=1){const A=v.x-y.x,E=(v.y-y.y)*w;return Math.sqrt(A*A+E*E)}const p=v=>m(v,o),_=v=>m(v,o,10);if(t==="Left"||t==="Right"){const v=t==="Left"?r.filter(A=>u(A,o)):r.filter(A=>f(A,o)),y=v.filter(A=>c(A,o)),w=Ff(y,p)||Ff(v,_);return w==null?void 0:w.element}if(t==="Up"||t==="Down"){const v=t==="Up"?r.filter(A=>h(A,o)):r.filter(A=>d(A,o)),y=v.filter(A=>i(A.element)),w=Ff(y,p)||Ff(v,p);return w==null?void 0:w.element}}const tR=typeof navigator<"u"?navigator.platform.toUpperCase().indexOf("MAC")>=0:!1;function Rz(n){return Nz[n]||""}function ia(n){const e=[];n.ctrlKey&&e.push("Ctrl"),n.metaKey&&e.push("Command"),n.altKey&&e.push(tR?"Option":"Alt"),n.shiftKey&&e.push("Shift");const t=Rz(n.which);return Dz[t]||e.push(t),e.join("+")}const Dz={Ctrl:!0,Command:!0,Alt:!0,Option:!0,Shift:!0},Nz={8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause_Break",20:"Caps_Lock",27:"Escape",33:"Page_Up",34:"Page_Down",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Left_Window_Key",92:"Right_Window_Key",93:"Select_Key",96:"Numpad_0",97:"Numpad_1",98:"Numpad_2",99:"Numpad_3",100:"Numpad_4",101:"Numpad_5",102:"Numpad_6",103:"Numpad_7",104:"Numpad_8",105:"Numpad_9",106:"Numpad_*",107:"Numpad_+",109:"Numpad_-",110:"Numpad_.",111:"Numpad_/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Num_Lock",145:"Scroll_Lock",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"};const{window:Np}=Ju;function HS(n){let e,t,i,s,r,o;const l=[n[0].props];var a=n[0].component;function c(u){let f={};for(let h=0;h<l.length;h+=1)f=Xr(f,l[h]);return{props:f}}return a&&(s=wn(a,c())),{c(){e=k("div"),t=k("input"),i=U(),s&&ke(s.$$.fragment),this.h()},l(u){e=T(u,"DIV",{class:!0,style:!0});var f=I(e);t=T(f,"INPUT",{type:!0,tabindex:!0,class:!0}),i=W(f),s&&Oe(s.$$.fragment,f),f.forEach(b),this.h()},h(){S(t,"type","text"),t.readOnly="readonly",S(t,"tabindex","-1"),S(t,"class","jse-hidden-input svelte-15awhio"),S(e,"class","jse-absolute-popup-content svelte-15awhio"),S(e,"style",r=qS(n[1],n[0].options))},m(u,f){H(u,e,f),g(e,t),n[7](t),g(e,i),s&&Te(s,e,null),o=!0},p(u,f){const h=f&1?Qr(l,[Zl(u[0].props)]):{};if(a!==(a=u[0].component)){if(s){He();const d=s;G(d.$$.fragment,1,0,()=>{Ie(d,1)}),qe()}a?(s=wn(a,c()),ke(s.$$.fragment),B(s.$$.fragment,1),Te(s,e,null)):s=null}else a&&s.$set(h);(!o||f&3&&r!==(r=qS(u[1],u[0].options)))&&S(e,"style",r)},i(u){o||(s&&B(s.$$.fragment,u),o=!0)},o(u){s&&G(s.$$.fragment,u),o=!1},d(u){u&&b(e),n[7](null),s&&Ie(s)}}}function Pz(n){let e,t,i,s,r=n[1]&&HS(n);return{c(){e=k("div"),r&&r.c(),this.h()},l(o){e=T(o,"DIV",{class:!0});var l=I(e);r&&r.l(l),l.forEach(b),this.h()},h(){S(e,"class","jse-absolute-popup svelte-15awhio")},m(o,l){H(o,e,l),r&&r.m(e,null),n[8](e),t=!0,i||(s=[_e(Np,"mousedown",n[3],!0),_e(Np,"keydown",n[4],!0),_e(Np,"wheel",n[5],!0),_e(e,"mousedown",Mz),_e(e,"keydown",n[4])],i=!0)},p(o,[l]){o[1]?r?(r.p(o,l),l&2&&B(r,1)):(r=HS(o),r.c(),B(r,1),r.m(e,null)):r&&(He(),G(r,1,1,()=>{r=null}),qe())},i(o){t||(B(r),t=!0)},o(o){G(r),t=!1},d(o){o&&b(e),r&&r.d(),n[8](null),i=!1,an(s)}}}function Mz(n){n.stopPropagation()}function qS(n,e){function t(){if(e.anchor){const{anchor:u,width:f=0,height:h=0,offsetTop:d=0,offsetLeft:m=0,position:p}=e,{left:_,top:v,bottom:y,right:w}=u.getBoundingClientRect(),A=p==="top"||v+h>window.innerHeight&&v>h,E=p==="left"||_+f>window.innerWidth&&_>f;return{left:E?w-m:_+m,top:A?v-d:y+d,positionAbove:A,positionLeft:E}}else if(typeof e.left=="number"&&typeof e.top=="number"){const{left:u,top:f,width:h=0,height:d=0}=e,m=f+d>window.innerHeight&&f>d,p=u+h>window.innerWidth&&u>h;return{left:u,top:f,positionAbove:m,positionLeft:p}}else throw new Error('Invalid config: pass either "left" and "top", or pass "anchor"')}const i=n.getBoundingClientRect(),{left:s,top:r,positionAbove:o,positionLeft:l}=t(),a=o?`bottom: ${i.top-r}px;`:`top: ${r-i.top}px;`,c=l?`right: ${i.left-s}px;`:`left: ${s-i.left}px;`;return a+c}function Bz(n,e,t){let{popup:i}=e,{closeAbsolutePopup:s}=e,r,o;Mi(f);function l(m){i.options&&i.options.closeOnOuterClick&&!bf(m.target,p=>p===r)&&s(i.id)}function a(m){l(m)}function c(m){ia(m)==="Escape"&&s(i.id)}function u(m){l(m)}function f(){o&&o.focus()}function h(m){Ut[m?"unshift":"push"](()=>{o=m,t(2,o)})}function d(m){Ut[m?"unshift":"push"](()=>{r=m,t(1,r)})}return n.$$set=m=>{"popup"in m&&t(0,i=m.popup),"closeAbsolutePopup"in m&&t(6,s=m.closeAbsolutePopup)},[i,r,o,a,c,u,s,h,d]}class Lz extends st{constructor(e){super(),rt(this,e,Bz,Pz,kt,{popup:0,closeAbsolutePopup:6})}}const Uz=Lz;function zS(n,e,t){const i=n.slice();return i[6]=e[t],i}function GS(n){let e,t;return e=new Uz({props:{popup:n[6],closeAbsolutePopup:n[1]}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,s){const r={};s&1&&(r.popup=i[6]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function Wz(n){let e,t,i=n[0],s=[];for(let a=0;a<i.length;a+=1)s[a]=GS(zS(n,i,a));const r=a=>G(s[a],1,1,()=>{s[a]=null}),o=n[3].default,l=ls(o,n,n[2],null);return{c(){for(let a=0;a<s.length;a+=1)s[a].c();e=U(),l&&l.c()},l(a){for(let c=0;c<s.length;c+=1)s[c].l(a);e=W(a),l&&l.l(a)},m(a,c){for(let u=0;u<s.length;u+=1)s[u].m(a,c);H(a,e,c),l&&l.m(a,c),t=!0},p(a,[c]){if(c&3){i=a[0];let u;for(u=0;u<i.length;u+=1){const f=zS(a,i,u);s[u]?(s[u].p(f,c),B(s[u],1)):(s[u]=GS(f),s[u].c(),B(s[u],1),s[u].m(e.parentNode,e))}for(He(),u=i.length;u<s.length;u+=1)r(u);qe()}l&&l.p&&(!t||c&4)&&as(l,o,a,a[2],t?us(o,a[2],c,null):cs(a[2]),null)},i(a){if(!t){for(let c=0;c<i.length;c+=1)B(s[c]);B(l,a),t=!0}},o(a){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)G(s[c]);G(l,a),t=!1},d(a){Ft(s,a),a&&b(e),l&&l.d(a)}}}function Vz(n,e,t){let{$$slots:i={},$$scope:s}=e;const r=Is("jsoneditor:AbsolutePopup");let o=[];function l(c,u,f){r("open...",u,f);const h={id:nu(),component:c,props:u||{},options:f||{}};return t(0,o=[...o,h]),h.id}function a(c){const u=o.findIndex(f=>f.id===c);if(u!==-1){const f=o[u];f.options.onClose&&f.options.onClose(),t(0,o=o.filter(h=>h.id!==c))}}return xd("absolute-popup",{openAbsolutePopup:l,closeAbsolutePopup:a}),n.$$set=c=>{"$$scope"in c&&t(2,s=c.$$scope)},n.$$.update=()=>{n.$$.dirty&1&&r("popups",o)},[o,a,s,i]}class Fz extends st{constructor(e){super(),rt(this,e,Vz,Wz,cn,{})}}const nR=Fz;var No={prefix:"fas",iconName:"caret-right",icon:[256,512,[],"f0da","M246.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-9.2-9.2-22.9-11.9-34.9-6.9s-19.8 16.6-19.8 29.6l0 256c0 12.9 7.8 24.6 19.8 29.6s25.7 2.2 34.9-6.9l128-128z"]},jz={prefix:"fas",iconName:"paste",icon:[512,512,["file-clipboard"],"f0ea","M160 0c-23.7 0-44.4 12.9-55.4 32H48C21.5 32 0 53.5 0 80V400c0 26.5 21.5 48 48 48H192V176c0-44.2 35.8-80 80-80h48V80c0-26.5-21.5-48-48-48H215.4C204.4 12.9 183.7 0 160 0zM272 128c-26.5 0-48 21.5-48 48V448v16c0 26.5 21.5 48 48 48H464c26.5 0 48-21.5 48-48V256H416c-17.7 0-32-14.3-32-32V128H320 272zM160 40a24 24 0 1 1 0 48 24 24 0 1 1 0-48zm256 88v96h96l-96-96z"]},Hz={prefix:"fas",iconName:"circle-notch",icon:[512,512,[],"f1ce","M222.7 32.1c5 16.9-4.6 34.8-21.5 39.8C121.8 95.6 64 169.1 64 256c0 106 86 192 192 192s192-86 192-192c0-86.9-57.8-160.4-137.1-184.1c-16.9-5-26.6-22.9-21.5-39.8s22.9-26.6 39.8-21.5C434.9 42.1 512 140 512 256c0 141.4-114.6 256-256 256S0 397.4 0 256C0 140 77.1 42.1 182.9 10.6c16.9-5 34.8 4.6 39.8 21.5z"]},qz={prefix:"fas",iconName:"scissors",icon:[512,512,[9984,9986,9988,"cut"],"f0c4","M256 192l-39.5-39.5c4.9-12.6 7.5-26.2 7.5-40.5C224 50.1 173.9 0 112 0S0 50.1 0 112s50.1 112 112 112c14.3 0 27.9-2.7 40.5-7.5L192 256l-39.5 39.5c-12.6-4.9-26.2-7.5-40.5-7.5C50.1 288 0 338.1 0 400s50.1 112 112 112s112-50.1 112-112c0-14.3-2.7-27.9-7.5-40.5L499.2 76.8c7.1-7.1 7.1-18.5 0-25.6c-28.3-28.3-74.1-28.3-102.4 0L256 192zm22.6 150.6L396.8 460.8c28.3 28.3 74.1 28.3 102.4 0c7.1-7.1 7.1-18.5 0-25.6L342.6 278.6l-64 64zM64 112a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zm48 240a48 48 0 1 1 0 96 48 48 0 1 1 0-96z"]},A1=qz,zz={prefix:"fas",iconName:"square-caret-down",icon:[448,512,["caret-square-down"],"f150","M384 480c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l320 0zM224 352c-6.7 0-13-2.8-17.6-7.7l-104-112c-6.5-7-8.2-17.2-4.4-25.9s12.5-14.4 22-14.4l208 0c9.5 0 18.2 5.7 22 14.4s2.1 18.9-4.4 25.9l-104 112c-4.5 4.9-10.9 7.7-17.6 7.7z"]},Gz=zz,Kz={prefix:"fas",iconName:"pen-to-square",icon:[512,512,["edit"],"f044","M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.8 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160V416c0 53 43 96 96 96H352c53 0 96-43 96-96V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96z"]},KS=Kz,Xz={prefix:"fas",iconName:"chevron-up",icon:[448,512,[],"f077","M201.4 105.4c12.5-12.5 32.8-12.5 45.3 0l192 192c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L224 173.3 54.6 342.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l192-192z"]},iR={prefix:"fas",iconName:"angle-right",icon:[256,512,[8250],"f105","M246.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L178.7 256 41.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"]},Qz={prefix:"fas",iconName:"square-caret-up",icon:[448,512,["caret-square-up"],"f151","M64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zM224 160c6.7 0 13 2.8 17.6 7.7l104 112c6.5 7 8.2 17.2 4.4 25.9s-12.5 14.4-22 14.4H120c-9.5 0-18.2-5.7-22-14.4s-2.1-18.9 4.4-25.9l104-112c4.5-4.9 10.9-7.7 17.6-7.7z"]},Yz=Qz,Zv={prefix:"fas",iconName:"filter",icon:[512,512,[],"f0b0","M3.9 54.9C10.5 40.9 24.5 32 40 32H472c15.5 0 29.5 8.9 36.1 22.9s4.6 30.5-5.2 42.5L320 320.9V448c0 12.1-6.8 23.2-17.7 28.6s-23.8 4.3-33.5-3l-64-48c-8.1-6-12.8-15.5-12.8-25.6V320.9L9 97.3C-.7 85.4-2.8 68.8 3.9 54.9z"]},dd={prefix:"fas",iconName:"code",icon:[640,512,[],"f121","M392.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6zm80.6 120.1c-12.5 12.5-12.5 32.8 0 45.3L562.7 256l-89.4 89.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l112-112c12.5-12.5 12.5-32.8 0-45.3l-112-112c-12.5-12.5-32.8-12.5-45.3 0zm-306.7 0c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3l112 112c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l89.4-89.4c12.5-12.5 12.5-32.8 0-45.3z"]},xv={prefix:"fas",iconName:"wrench",icon:[512,512,[128295],"f0ad","M352 320c88.4 0 160-71.6 160-160c0-15.3-2.2-30.1-6.2-44.2c-3.1-10.8-16.4-13.2-24.3-5.3l-76.8 76.8c-3 3-7.1 4.7-11.3 4.7H336c-8.8 0-16-7.2-16-16V118.6c0-4.2 1.7-8.3 4.7-11.3l76.8-76.8c7.9-7.9 5.4-21.2-5.3-24.3C382.1 2.2 367.3 0 352 0C263.6 0 192 71.6 192 160c0 19.1 3.4 37.5 9.5 54.5L19.9 396.1C7.2 408.8 0 426.1 0 444.1C0 481.6 30.4 512 67.9 512c18 0 35.3-7.2 48-19.9L297.5 310.5c17 6.2 35.4 9.5 54.5 9.5zM80 408a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"]},$v={prefix:"fas",iconName:"pen",icon:[512,512,[128394],"f304","M362.7 19.3L314.3 67.7 444.3 197.7l48.4-48.4c25-25 25-65.5 0-90.5L453.3 19.3c-25-25-65.5-25-90.5 0zm-71 71L58.6 323.5c-10.4 10.4-18 23.3-22.2 37.4L1 481.2C-1.5 489.7 .8 498.8 7 505s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L421.7 220.3 291.7 90.3z"]},Jz={prefix:"fas",iconName:"arrow-rotate-right",icon:[512,512,[8635,"arrow-right-rotate","arrow-rotate-forward","redo"],"f01e","M370.3 160H320c-17.7 0-32 14.3-32 32s14.3 32 32 32H448c17.7 0 32-14.3 32-32V64c0-17.7-14.3-32-32-32s-32 14.3-32 32v51.2L398.4 97.6c-87.5-87.5-229.3-87.5-316.8 0s-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3s163.8-62.5 226.3 0L370.3 160z"]},sR=Jz,Zz={prefix:"fas",iconName:"arrow-rotate-left",icon:[512,512,[8634,"arrow-left-rotate","arrow-rotate-back","arrow-rotate-backward","undo"],"f0e2","M109.7 160H160c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32V64C0 46.3 14.3 32 32 32s32 14.3 32 32v51.2L81.6 97.6c87.5-87.5 229.3-87.5 316.8 0s87.5 229.3 0 316.8s-229.3 87.5-316.8 0c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0c62.5 62.5 163.8 62.5 226.3 0s62.5-163.8 0-226.3s-163.8-62.5-226.3 0L109.7 160z"]},rR=Zz,xz={prefix:"fas",iconName:"crop-simple",icon:[512,512,["crop-alt"],"f565","M128 32c0-17.7-14.3-32-32-32S64 14.3 64 32V64H32C14.3 64 0 78.3 0 96s14.3 32 32 32H64V384c0 35.3 28.7 64 64 64H352V384H128V32zM384 480c0 17.7 14.3 32 32 32s32-14.3 32-32V448h32c17.7 0 32-14.3 32-32s-14.3-32-32-32H448l0-256c0-35.3-28.7-64-64-64L160 64v64l224 0 0 352z"]},$z=xz,eG={prefix:"fas",iconName:"gear",icon:[512,512,[9881,"cog"],"f013","M481.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-30.9 28.1c-7.7 7.1-11.4 17.5-10.9 27.9c.1 2.9 .2 5.8 .2 8.8s-.1 5.9-.2 8.8c-.5 10.5 3.1 20.9 10.9 27.9l30.9 28.1c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-39.7-12.6c-10-3.2-20.8-1.1-29.7 4.6c-4.9 3.1-9.9 6.1-15.1 8.7c-9.3 4.8-16.5 13.2-18.8 23.4l-8.9 40.7c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-8.9-40.7c-2.2-10.2-9.5-18.6-18.8-23.4c-5.2-2.7-10.2-5.6-15.1-8.7c-8.8-5.7-19.7-7.8-29.7-4.6L69.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l30.9-28.1c7.7-7.1 11.4-17.5 10.9-27.9c-.1-2.9-.2-5.8-.2-8.8s.1-5.9 .2-8.8c.5-10.5-3.1-20.9-10.9-27.9L8.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l39.7 12.6c10 3.2 20.8 1.1 29.7-4.6c4.9-3.1 9.9-6.1 15.1-8.7c9.3-4.8 16.5-13.2 18.8-23.4l8.9-40.7c2-9.1 9-16.3 18.2-17.8C213.3 1.2 227.5 0 242 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l8.9 40.7c2.2 10.2 9.4 18.6 18.8 23.4c5.2 2.7 10.2 5.6 15.1 8.7c8.8 5.7 19.7 7.7 29.7 4.6l39.7-12.6c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM242 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z"]},tG=eG,Mr={prefix:"fas",iconName:"caret-down",icon:[320,512,[],"f0d7","M137.4 374.6c12.5 12.5 32.8 12.5 45.3 0l128-128c9.2-9.2 11.9-22.9 6.9-34.9s-16.6-19.8-29.6-19.8L32 192c-12.9 0-24.6 7.8-29.6 19.8s-2.2 25.7 6.9 34.9l128 128z"]},nG={prefix:"fas",iconName:"ellipsis-vertical",icon:[128,512,["ellipsis-v"],"f142","M56 472a56 56 0 1 1 0-112 56 56 0 1 1 0 112zm0-160a56 56 0 1 1 0-112 56 56 0 1 1 0 112zM0 96a56 56 0 1 1 112 0A56 56 0 1 1 0 96z"]},iG=nG,sG={prefix:"fas",iconName:"arrow-down-short-wide",icon:[576,512,["sort-amount-desc","sort-amount-down-alt"],"f884","M151.6 469.6C145.5 476.2 137 480 128 480s-17.5-3.8-23.6-10.4l-88-96c-11.9-13-11.1-33.3 2-45.2s33.3-11.1 45.2 2L96 365.7V64c0-17.7 14.3-32 32-32s32 14.3 32 32V365.7l32.4-35.4c11.9-13 32.2-13.9 45.2-2s13.9 32.2 2 45.2l-88 96zM320 32h32c17.7 0 32 14.3 32 32s-14.3 32-32 32H320c-17.7 0-32-14.3-32-32s14.3-32 32-32zm0 128h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H320c-17.7 0-32-14.3-32-32s14.3-32 32-32zm0 128H480c17.7 0 32 14.3 32 32s-14.3 32-32 32H320c-17.7 0-32-14.3-32-32s14.3-32 32-32zm0 128H544c17.7 0 32 14.3 32 32s-14.3 32-32 32H320c-17.7 0-32-14.3-32-32s14.3-32 32-32z"]},eb=sG,rG={prefix:"fas",iconName:"angle-down",icon:[384,512,[8964],"f107","M169.4 342.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 274.7 54.6 137.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"]},oG={prefix:"fas",iconName:"arrow-down",icon:[384,512,[8595],"f063","M169.4 470.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 370.8 224 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 306.7L54.6 265.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"]},lG={prefix:"fas",iconName:"magnifying-glass",icon:[512,512,[128269,"search"],"f002","M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"]},tb=lG,aG={prefix:"fas",iconName:"chevron-down",icon:[448,512,[],"f078","M201.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 338.7 54.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z"]},Mu={prefix:"fas",iconName:"copy",icon:[512,512,[],"f0c5","M224 0c-35.3 0-64 28.7-64 64V288c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64H224zM64 160c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H288c35.3 0 64-28.7 64-64V384H288v64H64V224h64V160H64z"]},oR={prefix:"fas",iconName:"xmark",icon:[320,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M310.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L160 210.7 54.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L114.7 256 9.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 301.3 265.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L205.3 256 310.6 150.6z"]},XS=oR,_f=oR,cG={prefix:"fas",iconName:"clone",icon:[512,512,[],"f24d","M0 448c0 35.3 28.7 64 64 64H288c35.3 0 64-28.7 64-64V384H224c-53 0-96-43-96-96V160H64c-35.3 0-64 28.7-64 64V448zm224-96H448c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64H224c-35.3 0-64 28.7-64 64V288c0 35.3 28.7 64 64 64z"]},C1={prefix:"fas",iconName:"check",icon:[512,512,[10003,10004],"f00c","M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"]},uG={prefix:"fas",iconName:"triangle-exclamation",icon:[512,512,[9888,"exclamation-triangle","warning"],"f071","M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"]},sa=uG;function jf(n,e=1e3){if(n<.9*e)return n.toFixed()+" B";const t=n/e;if(t<.9*e)return t.toFixed(1)+" KB";const i=t/e;if(i<.9*e)return i.toFixed(1)+" MB";const s=i/e;return s<.9*e?s.toFixed(1)+" GB":(s/e).toFixed(1)+" TB"}const Hf=Is("jsoneditor:FocusTracker");function lR({onMount:n,onDestroy:e,getWindow:t,hasFocus:i,onFocus:s,onBlur:r}){let o,l=!1;function a(){const u=i();u&&(clearTimeout(o),l||(Hf("focus"),s(),l=u))}function c(){l&&(clearTimeout(o),o=setTimeout(()=>{Hf("blur"),l=!1,r()}))}n(()=>{Hf("mount FocusTracker");const u=t();u&&(u.addEventListener("focusin",a,!0),u.addEventListener("focusout",c,!0))}),e(()=>{Hf("destroy FocusTracker");const u=t();u&&(u.removeEventListener("focusin",a,!0),u.removeEventListener("focusout",c,!0))})}function fG(n){let e,t=[n[0]],i={};for(let s=0;s<t.length;s+=1)i=Xr(i,t[s]);return{c(){e=nr("path"),this.h()},l(s){e=ir(s,"path",{}),I(e).forEach(b),this.h()},h(){Mh(e,i)},m(s,r){H(s,e,r)},p(s,[r]){Mh(e,i=Qr(t,[r&1&&s[0]]))},i:Xe,o:Xe,d(s){s&&b(e)}}}function hG(n,e,t){let{data:i={}}=e;return n.$$set=s=>{"data"in s&&t(0,i=s.data)},[i]}class dG extends st{constructor(e){super(),rt(this,e,hG,fG,kt,{data:0})}}function mG(n){let e,t=[n[0]],i={};for(let s=0;s<t.length;s+=1)i=Xr(i,t[s]);return{c(){e=nr("polygon"),this.h()},l(s){e=ir(s,"polygon",{}),I(e).forEach(b),this.h()},h(){Mh(e,i)},m(s,r){H(s,e,r)},p(s,[r]){Mh(e,i=Qr(t,[r&1&&s[0]]))},i:Xe,o:Xe,d(s){s&&b(e)}}}function pG(n,e,t){let{data:i={}}=e;return n.$$set=s=>{"data"in s&&t(0,i=s.data)},[i]}class gG extends st{constructor(e){super(),rt(this,e,pG,mG,kt,{data:0})}}function vG(n){let e;return{c(){e=nr("g")},l(t){e=ir(t,"g",{});var i=I(e);i.forEach(b)},m(t,i){H(t,e,i),e.innerHTML=n[0]},p(t,[i]){i&1&&(e.innerHTML=t[0])},i:Xe,o:Xe,d(t){t&&b(e)}}}function bG(n,e,t){let i=870711;function s(){return i+=1,`fa-${i.toString(16)}`}let r,{data:o}=e;function l(a){if(!a||!a.raw)return null;let c=a.raw;const u={};return c=c.replace(/\s(?:xml:)?id=["']?([^"')\s]+)/g,(f,h)=>{const d=s();return u[h]=d,` id="${d}"`}),c=c.replace(/#(?:([^'")\s]+)|xpointer\(id\((['"]?)([^')]+)\2\)\))/g,(f,h,d,m)=>{const p=h||m;return!p||!u[p]?f:`#${u[p]}`}),c}return n.$$set=a=>{"data"in a&&t(1,o=a.data)},n.$$.update=()=>{n.$$.dirty&2&&t(0,r=l(o))},[r,o]}class _G extends st{constructor(e){super(),rt(this,e,bG,vG,kt,{data:1})}}function yG(n){let e,t,i,s;const r=n[13].default,o=ls(r,n,n[12],null);return{c(){e=nr("svg"),o&&o.c(),this.h()},l(l){e=ir(l,"svg",{version:!0,class:!0,x:!0,y:!0,width:!0,height:!0,"aria-label":!0,role:!0,viewBox:!0,style:!0});var a=I(e);o&&o.l(a),a.forEach(b),this.h()},h(){S(e,"version","1.1"),S(e,"class",t="fa-icon "+n[0]+" svelte-1dof0an"),S(e,"x",n[8]),S(e,"y",n[9]),S(e,"width",n[1]),S(e,"height",n[2]),S(e,"aria-label",n[11]),S(e,"role",i=n[11]?"img":"presentation"),S(e,"viewBox",n[3]),S(e,"style",n[10]),xe(e,"fa-spin",n[4]),xe(e,"fa-pulse",n[6]),xe(e,"fa-inverse",n[5]),xe(e,"fa-flip-horizontal",n[7]==="horizontal"),xe(e,"fa-flip-vertical",n[7]==="vertical")},m(l,a){H(l,e,a),o&&o.m(e,null),s=!0},p(l,[a]){o&&o.p&&(!s||a&4096)&&as(o,r,l,l[12],s?us(r,l[12],a,null):cs(l[12]),null),(!s||a&1&&t!==(t="fa-icon "+l[0]+" svelte-1dof0an"))&&S(e,"class",t),(!s||a&256)&&S(e,"x",l[8]),(!s||a&512)&&S(e,"y",l[9]),(!s||a&2)&&S(e,"width",l[1]),(!s||a&4)&&S(e,"height",l[2]),(!s||a&2048)&&S(e,"aria-label",l[11]),(!s||a&2048&&i!==(i=l[11]?"img":"presentation"))&&S(e,"role",i),(!s||a&8)&&S(e,"viewBox",l[3]),(!s||a&1024)&&S(e,"style",l[10]),(!s||a&17)&&xe(e,"fa-spin",l[4]),(!s||a&65)&&xe(e,"fa-pulse",l[6]),(!s||a&33)&&xe(e,"fa-inverse",l[5]),(!s||a&129)&&xe(e,"fa-flip-horizontal",l[7]==="horizontal"),(!s||a&129)&&xe(e,"fa-flip-vertical",l[7]==="vertical")},i(l){s||(B(o,l),s=!0)},o(l){G(o,l),s=!1},d(l){l&&b(e),o&&o.d(l)}}}function SG(n,e,t){let{$$slots:i={},$$scope:s}=e,{class:r}=e,{width:o}=e,{height:l}=e,{box:a}=e,{spin:c=!1}=e,{inverse:u=!1}=e,{pulse:f=!1}=e,{flip:h=null}=e,{x:d=void 0}=e,{y:m=void 0}=e,{style:p=void 0}=e,{label:_=void 0}=e;return n.$$set=v=>{"class"in v&&t(0,r=v.class),"width"in v&&t(1,o=v.width),"height"in v&&t(2,l=v.height),"box"in v&&t(3,a=v.box),"spin"in v&&t(4,c=v.spin),"inverse"in v&&t(5,u=v.inverse),"pulse"in v&&t(6,f=v.pulse),"flip"in v&&t(7,h=v.flip),"x"in v&&t(8,d=v.x),"y"in v&&t(9,m=v.y),"style"in v&&t(10,p=v.style),"label"in v&&t(11,_=v.label),"$$scope"in v&&t(12,s=v.$$scope)},[r,o,l,a,c,u,f,h,d,m,p,_,s,i]}class EG extends st{constructor(e){super(),rt(this,e,SG,yG,kt,{class:0,width:1,height:2,box:3,spin:4,inverse:5,pulse:6,flip:7,x:8,y:9,style:10,label:11})}}function QS(n,e,t){const i=n.slice();return i[24]=e[t],i}function YS(n,e,t){const i=n.slice();return i[27]=e[t],i}function JS(n){let e,t,i,s,r=n[6].paths&&ZS(n),o=n[6].polygons&&$S(n),l=n[6].raw&&tE(n);return{c(){r&&r.c(),e=U(),o&&o.c(),t=U(),l&&l.c(),i=et()},l(a){r&&r.l(a),e=W(a),o&&o.l(a),t=W(a),l&&l.l(a),i=et()},m(a,c){r&&r.m(a,c),H(a,e,c),o&&o.m(a,c),H(a,t,c),l&&l.m(a,c),H(a,i,c),s=!0},p(a,c){a[6].paths?r?(r.p(a,c),c&64&&B(r,1)):(r=ZS(a),r.c(),B(r,1),r.m(e.parentNode,e)):r&&(He(),G(r,1,1,()=>{r=null}),qe()),a[6].polygons?o?(o.p(a,c),c&64&&B(o,1)):(o=$S(a),o.c(),B(o,1),o.m(t.parentNode,t)):o&&(He(),G(o,1,1,()=>{o=null}),qe()),a[6].raw?l?(l.p(a,c),c&64&&B(l,1)):(l=tE(a),l.c(),B(l,1),l.m(i.parentNode,i)):l&&(He(),G(l,1,1,()=>{l=null}),qe())},i(a){s||(B(r),B(o),B(l),s=!0)},o(a){G(r),G(o),G(l),s=!1},d(a){r&&r.d(a),a&&b(e),o&&o.d(a),a&&b(t),l&&l.d(a),a&&b(i)}}}function ZS(n){let e,t,i=n[6].paths,s=[];for(let o=0;o<i.length;o+=1)s[o]=xS(YS(n,i,o));const r=o=>G(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();e=et()},l(o){for(let l=0;l<s.length;l+=1)s[l].l(o);e=et()},m(o,l){for(let a=0;a<s.length;a+=1)s[a].m(o,l);H(o,e,l),t=!0},p(o,l){if(l&64){i=o[6].paths;let a;for(a=0;a<i.length;a+=1){const c=YS(o,i,a);s[a]?(s[a].p(c,l),B(s[a],1)):(s[a]=xS(c),s[a].c(),B(s[a],1),s[a].m(e.parentNode,e))}for(He(),a=i.length;a<s.length;a+=1)r(a);qe()}},i(o){if(!t){for(let l=0;l<i.length;l+=1)B(s[l]);t=!0}},o(o){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)G(s[l]);t=!1},d(o){Ft(s,o),o&&b(e)}}}function xS(n){let e,t;return e=new dG({props:{data:n[27]}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,s){const r={};s&64&&(r.data=i[27]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function $S(n){let e,t,i=n[6].polygons,s=[];for(let o=0;o<i.length;o+=1)s[o]=eE(QS(n,i,o));const r=o=>G(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();e=et()},l(o){for(let l=0;l<s.length;l+=1)s[l].l(o);e=et()},m(o,l){for(let a=0;a<s.length;a+=1)s[a].m(o,l);H(o,e,l),t=!0},p(o,l){if(l&64){i=o[6].polygons;let a;for(a=0;a<i.length;a+=1){const c=QS(o,i,a);s[a]?(s[a].p(c,l),B(s[a],1)):(s[a]=eE(c),s[a].c(),B(s[a],1),s[a].m(e.parentNode,e))}for(He(),a=i.length;a<s.length;a+=1)r(a);qe()}},i(o){if(!t){for(let l=0;l<i.length;l+=1)B(s[l]);t=!0}},o(o){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)G(s[l]);t=!1},d(o){Ft(s,o),o&&b(e)}}}function eE(n){let e,t;return e=new gG({props:{data:n[24]}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,s){const r={};s&64&&(r.data=i[24]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function tE(n){let e,t,i;function s(o){n[15](o)}let r={};return n[6]!==void 0&&(r.data=n[6]),e=new _G({props:r}),Ut.push(()=>Ws(e,"data",s)),{c(){ke(e.$$.fragment)},l(o){Oe(e.$$.fragment,o)},m(o,l){Te(e,o,l),i=!0},p(o,l){const a={};!t&&l&64&&(t=!0,a.data=o[6],Js(()=>t=!1)),e.$set(a)},i(o){i||(B(e.$$.fragment,o),i=!0)},o(o){G(e.$$.fragment,o),i=!1},d(o){Ie(e,o)}}}function wG(n){let e,t,i=n[6]&&JS(n);return{c(){i&&i.c(),e=et()},l(s){i&&i.l(s),e=et()},m(s,r){i&&i.m(s,r),H(s,e,r),t=!0},p(s,r){s[6]?i?(i.p(s,r),r&64&&B(i,1)):(i=JS(s),i.c(),B(i,1),i.m(e.parentNode,e)):i&&(He(),G(i,1,1,()=>{i=null}),qe())},i(s){t||(B(i),t=!0)},o(s){G(i),t=!1},d(s){i&&i.d(s),s&&b(e)}}}function AG(n){let e;const t=n[14].default,i=ls(t,n,n[16],null),s=i||wG(n);return{c(){s&&s.c()},l(r){s&&s.l(r)},m(r,o){s&&s.m(r,o),e=!0},p(r,o){i?i.p&&(!e||o&65536)&&as(i,t,r,r[16],e?us(t,r[16],o,null):cs(r[16]),null):s&&s.p&&(!e||o&64)&&s.p(r,e?o:-1)},i(r){e||(B(s,r),e=!0)},o(r){G(s,r),e=!1},d(r){s&&s.d(r)}}}function CG(n){let e,t;return e=new EG({props:{label:n[5],width:n[7],height:n[8],box:n[10],style:n[9],spin:n[1],flip:n[4],inverse:n[2],pulse:n[3],class:n[0],$$slots:{default:[AG]},$$scope:{ctx:n}}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,[s]){const r={};s&32&&(r.label=i[5]),s&128&&(r.width=i[7]),s&256&&(r.height=i[8]),s&1024&&(r.box=i[10]),s&512&&(r.style=i[9]),s&2&&(r.spin=i[1]),s&16&&(r.flip=i[4]),s&4&&(r.inverse=i[2]),s&8&&(r.pulse=i[3]),s&1&&(r.class=i[0]),s&65600&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}let nE=1;function kG(n){if("iconName"in n&&"icon"in n){let e={},t=n.icon,i=n.iconName,s=t[0],r=t[1],o=t[4],l={width:s,height:r,paths:[{d:o}]};return e[i]=l,e}return n}function TG(n,e,t){let{$$slots:i={},$$scope:s}=e,{class:r=""}=e,{data:o}=e,{scale:l=1}=e,{spin:a=!1}=e,{inverse:c=!1}=e,{pulse:u=!1}=e,{flip:f=null}=e,{label:h=null}=e,d=null,{style:m=null}=e,p,_,v,y;function w(){if(typeof o>"u")return;const F=kG(o),[P]=Object.keys(F),Q=F[P];Q.paths||(Q.paths=[]),Q.d&&Q.paths.push({d:Q.d}),Q.polygons||(Q.polygons=[]),Q.points&&Q.polygons.push({points:Q.points}),t(6,d=Q)}function A(){let F=1;return typeof l<"u"&&(F=Number(l)),isNaN(F)||F<=0?(console.warn('Invalid prop: prop "scale" should be a number over 0.'),nE):F*nE}function E(){return d?`0 0 ${d.width} ${d.height}`:`0 0 ${p} ${_}`}function C(){return d?Math.max(d.width,d.height)/16:1}function R(){return d?d.width/C()*A():0}function D(){return d?d.height/C()*A():0}function N(){let F="";m!==null&&(F+=m);let P=A();return P===1?F.length===0?void 0:F:(F!==""&&!F.endsWith(";")&&(F+="; "),`${F}font-size: ${P}em`)}function L(F){d=F,t(6,d)}return n.$$set=F=>{"class"in F&&t(0,r=F.class),"data"in F&&t(11,o=F.data),"scale"in F&&t(12,l=F.scale),"spin"in F&&t(1,a=F.spin),"inverse"in F&&t(2,c=F.inverse),"pulse"in F&&t(3,u=F.pulse),"flip"in F&&t(4,f=F.flip),"label"in F&&t(5,h=F.label),"style"in F&&t(13,m=F.style),"$$scope"in F&&t(16,s=F.$$scope)},n.$$.update=()=>{n.$$.dirty&14336&&(w(),t(7,p=R()),t(8,_=D()),t(9,v=N()),t(10,y=E()))},[r,a,c,u,f,h,d,p,_,v,y,o,l,m,i,L,s]}class Vt extends st{constructor(e){super(),rt(this,e,TG,CG,kt,{class:0,data:11,scale:12,spin:1,inverse:2,pulse:3,flip:4,label:5,style:13})}}function iE(n,e,t){const i=n.slice();return i[8]=e[t],i}function sE(n){let e,t;return e=new Vt({props:{data:n[1]}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,s){const r={};s&2&&(r.data=i[1]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function rE(n){let e,t;return e=new Vt({props:{data:n[8].icon}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,s){const r={};s&8&&(r.data=i[8].icon),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function oE(n){let e,t,i=n[8].text+"",s,r,o,l,a,c,u,f=n[8].icon&&rE(n);function h(){return n[6](n[8])}function d(){return n[7](n[8])}return{c(){e=k("button"),f&&f.c(),t=U(),s=q(i),r=U(),this.h()},l(m){e=T(m,"BUTTON",{type:!0,class:!0,title:!0});var p=I(e);f&&f.l(p),t=W(p),s=z(p,i),r=W(p),p.forEach(b),this.h()},h(){S(e,"type","button"),S(e,"class","jse-button jse-action jse-primary svelte-c24vac"),S(e,"title",o=n[8].title),e.disabled=l=n[8].disabled},m(m,p){H(m,e,p),f&&f.m(e,null),g(e,t),g(e,s),g(e,r),a=!0,c||(u=[_e(e,"click",h),_e(e,"mousedown",d)],c=!0)},p(m,p){n=m,n[8].icon?f?(f.p(n,p),p&8&&B(f,1)):(f=rE(n),f.c(),B(f,1),f.m(e,t)):f&&(He(),G(f,1,1,()=>{f=null}),qe()),(!a||p&8)&&i!==(i=n[8].text+"")&&Le(s,i),(!a||p&8&&o!==(o=n[8].title))&&S(e,"title",o),(!a||p&8&&l!==(l=n[8].disabled))&&(e.disabled=l)},i(m){a||(B(f),a=!0)},o(m){G(f),a=!1},d(m){m&&b(e),f&&f.d(),c=!1,an(u)}}}function IG(n){let e,t,i,s,r,o,l,a,c,u,f=n[1]&&sE(n),h=n[3],d=[];for(let p=0;p<h.length;p+=1)d[p]=oE(iE(n,h,p));const m=p=>G(d[p],1,1,()=>{d[p]=null});return{c(){e=k("div"),t=k("div"),f&&f.c(),i=U(),s=q(n[2]),r=U(),o=k("div");for(let p=0;p<d.length;p+=1)d[p].c();this.h()},l(p){e=T(p,"DIV",{class:!0});var _=I(e);t=T(_,"DIV",{class:!0});var v=I(t);f&&f.l(v),i=W(v),s=z(v,n[2]),v.forEach(b),r=W(_),o=T(_,"DIV",{class:!0});var y=I(o);for(let w=0;w<d.length;w+=1)d[w].l(y);y.forEach(b),_.forEach(b),this.h()},h(){S(t,"class","jse-text svelte-c24vac"),xe(t,"jse-clickable",n[4]!==null),S(o,"class","jse-actions svelte-c24vac"),S(e,"class",l="jse-message jse-"+n[0]+" svelte-c24vac")},m(p,_){H(p,e,_),g(e,t),f&&f.m(t,null),g(t,i),g(t,s),g(e,r),g(e,o);for(let v=0;v<d.length;v+=1)d[v].m(o,null);a=!0,c||(u=_e(t,"click",n[5]),c=!0)},p(p,[_]){if(p[1]?f?(f.p(p,_),_&2&&B(f,1)):(f=sE(p),f.c(),B(f,1),f.m(t,i)):f&&(He(),G(f,1,1,()=>{f=null}),qe()),(!a||_&4)&&Le(s,p[2]),(!a||_&16)&&xe(t,"jse-clickable",p[4]!==null),_&8){h=p[3];let v;for(v=0;v<h.length;v+=1){const y=iE(p,h,v);d[v]?(d[v].p(y,_),B(d[v],1)):(d[v]=oE(y),d[v].c(),B(d[v],1),d[v].m(o,null))}for(He(),v=h.length;v<d.length;v+=1)m(v);qe()}(!a||_&1&&l!==(l="jse-message jse-"+p[0]+" svelte-c24vac"))&&S(e,"class",l)},i(p){if(!a){B(f);for(let _=0;_<h.length;_+=1)B(d[_]);a=!0}},o(p){G(f),d=d.filter(Boolean);for(let _=0;_<d.length;_+=1)G(d[_]);a=!1},d(p){p&&b(e),f&&f.d(),Ft(d,p),c=!1,u()}}}function OG(n,e,t){let{type:i="success"}=e,{icon:s=void 0}=e,{message:r=void 0}=e,{actions:o=[]}=e,{onClick:l=void 0}=e;function a(){l&&l()}const c=f=>{f.onClick&&f.onClick()},u=f=>{f.onMouseDown&&f.onMouseDown()};return n.$$set=f=>{"type"in f&&t(0,i=f.type),"icon"in f&&t(1,s=f.icon),"message"in f&&t(2,r=f.message),"actions"in f&&t(3,o=f.actions),"onClick"in f&&t(4,l=f.onClick)},[i,s,r,o,l,a,c,u]}class RG extends st{constructor(e){super(),rt(this,e,OG,IG,cn,{type:0,icon:1,message:2,actions:3,onClick:4})}}const ra=RG;function bo(n){return"$"+n.map(DG).join("")}function DG(n){if(cR.test(n))return"["+n+"]";if(aR.test(n))return"."+n;{const e=JSON.stringify(n);return"['"+e.substring(1,e.length-1).replace(/\\"/g,'"')+"']"}}function k1(n){return n.replace(/^\$/,"").replace(/^\./,"")}function NG(n){return n.startsWith("$")?n:!n.startsWith("[")&&!n.startsWith(".")?"$."+n:"$"+n}function PG(n){let e=NG(n.trim()).substring(1);const t=[];for(;e.length>0;){const i=e.match(UG);if(!i)throw new SyntaxError(`Cannot parse path: unexpected part "${e}" at position ${n.length-e.length}`);t.push(i[1]||i[2]||i[3]),e=e.substring(i[0].length)}return t}const MG="^\\.([A-zA-Z$_][a-zA-Z$_0-9]*)",BG="^\\[([0-9]+)]",LG="^\\['(.*)']",UG=new RegExp([MG,BG,LG].join("|"));function ga(n){return{value:n,label:ii(n)?"(whole item)":k1(bo(n))}}function ul(n){return n.map(e=>cR.test(e)?`?.[${e}]`:aR.test(e)?`?.${e}`:`?.[${JSON.stringify(e)}]`).join("")}const aR=/^[a-zA-Z$_][a-zA-Z$_\d]*$/,cR=/^\d+$/;function WG(){return Um(n=>n,bo)}function lE(n,e,t){const i=n.slice();return i[6]=e[t],i[8]=t,i}function aE(n){let e,t,i,s;const r=[FG,VG],o=[];function l(a,c){return a[2]||a[0].length===1?0:1}return t=l(n),i=o[t]=r[t](n),{c(){e=k("div"),i.c(),this.h()},l(a){e=T(a,"DIV",{class:!0});var c=I(e);i.l(c),c.forEach(b),this.h()},h(){S(e,"class","jse-validation-errors-overview svelte-1hu2cx3")},m(a,c){H(a,e,c),o[t].m(e,null),s=!0},p(a,c){let u=t;t=l(a),t===u?o[t].p(a,c):(He(),G(o[u],1,1,()=>{o[u]=null}),qe(),i=o[t],i?i.p(a,c):(i=o[t]=r[t](a),i.c()),B(i,1),i.m(e,null))},i(a){s||(B(i),s=!0)},o(a){G(i),s=!1},d(a){a&&b(e),o[t].d()}}}function VG(n){let e,t,i,s,r,o,l,a=n[0].length+"",c,u,f,h,d,m,p;return r=new Vt({props:{data:sa}}),h=new Vt({props:{data:iR}}),{c(){e=k("table"),t=k("tbody"),i=k("tr"),s=k("td"),ke(r.$$.fragment),o=U(),l=k("td"),c=q(a),u=q(` validation errors
              `),f=k("div"),ke(h.$$.fragment),this.h()},l(_){e=T(_,"TABLE",{class:!0});var v=I(e);t=T(v,"TBODY",{});var y=I(t);i=T(y,"TR",{class:!0});var w=I(i);s=T(w,"TD",{class:!0});var A=I(s);Oe(r.$$.fragment,A),A.forEach(b),o=W(w),l=T(w,"TD",{class:!0});var E=I(l);c=z(E,a),u=z(E,` validation errors
              `),f=T(E,"DIV",{class:!0});var C=I(f);Oe(h.$$.fragment,C),C.forEach(b),E.forEach(b),w.forEach(b),y.forEach(b),v.forEach(b),this.h()},h(){S(s,"class","jse-validation-error-icon svelte-1hu2cx3"),S(f,"class","jse-validation-errors-expand svelte-1hu2cx3"),S(l,"class","svelte-1hu2cx3"),S(i,"class","jse-validation-error svelte-1hu2cx3"),S(e,"class","svelte-1hu2cx3")},m(_,v){H(_,e,v),g(e,t),g(t,i),g(i,s),Te(r,s,null),g(i,o),g(i,l),g(l,c),g(l,u),g(l,f),Te(h,f,null),d=!0,m||(p=_e(i,"click",n[4]),m=!0)},p(_,v){(!d||v&1)&&a!==(a=_[0].length+"")&&Le(c,a)},i(_){d||(B(r.$$.fragment,_),B(h.$$.fragment,_),d=!0)},o(_){G(r.$$.fragment,_),G(h.$$.fragment,_),d=!1},d(_){_&&b(e),Ie(r),Ie(h),m=!1,p()}}}function FG(n){let e,t,i,s=n[0],r=[];for(let l=0;l<s.length;l+=1)r[l]=uE(lE(n,s,l));const o=l=>G(r[l],1,1,()=>{r[l]=null});return{c(){e=k("table"),t=k("tbody");for(let l=0;l<r.length;l+=1)r[l].c();this.h()},l(l){e=T(l,"TABLE",{class:!0});var a=I(e);t=T(a,"TBODY",{});var c=I(t);for(let u=0;u<r.length;u+=1)r[u].l(c);c.forEach(b),a.forEach(b),this.h()},h(){S(e,"class","svelte-1hu2cx3")},m(l,a){H(l,e,a),g(e,t);for(let c=0;c<r.length;c+=1)r[c].m(t,null);i=!0},p(l,a){if(a&11){s=l[0];let c;for(c=0;c<s.length;c+=1){const u=lE(l,s,c);r[c]?(r[c].p(u,a),B(r[c],1)):(r[c]=uE(u),r[c].c(),B(r[c],1),r[c].m(t,null))}for(He(),c=s.length;c<r.length;c+=1)o(c);qe()}},i(l){if(!i){for(let a=0;a<s.length;a+=1)B(r[a]);i=!0}},o(l){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)G(r[a]);i=!1},d(l){l&&b(e),Ft(r,l)}}}function cE(n){let e,t,i,s,r;return t=new Vt({props:{data:rG}}),{c(){e=k("button"),ke(t.$$.fragment),this.h()},l(o){e=T(o,"BUTTON",{type:!0,class:!0,title:!0});var l=I(e);Oe(t.$$.fragment,l),l.forEach(b),this.h()},h(){S(e,"type","button"),S(e,"class","jse-validation-errors-collapse svelte-1hu2cx3"),S(e,"title","Collapse validation errors")},m(o,l){H(o,e,l),Te(t,e,null),i=!0,s||(r=_e(e,"click",R0(n[3])),s=!0)},p:Xe,i(o){i||(B(t.$$.fragment,o),i=!0)},o(o){G(t.$$.fragment,o),i=!1},d(o){o&&b(e),Ie(t),s=!1,r()}}}function uE(n){let e,t,i,s,r,o=k1(bo(n[6].path))+"",l,a,c,u=n[6].message+"",f,h,d,m,p,_,v;i=new Vt({props:{data:sa}});let y=n[8]===0&&n[0].length>1&&cE(n);function w(){return n[5](n[6])}return{c(){e=k("tr"),t=k("td"),ke(i.$$.fragment),s=U(),r=k("td"),l=q(o),a=U(),c=k("td"),f=q(u),h=U(),d=k("td"),y&&y.c(),m=U(),this.h()},l(A){e=T(A,"TR",{class:!0});var E=I(e);t=T(E,"TD",{class:!0});var C=I(t);Oe(i.$$.fragment,C),C.forEach(b),s=W(E),r=T(E,"TD",{class:!0});var R=I(r);l=z(R,o),R.forEach(b),a=W(E),c=T(E,"TD",{class:!0});var D=I(c);f=z(D,u),D.forEach(b),h=W(E),d=T(E,"TD",{class:!0});var N=I(d);y&&y.l(N),N.forEach(b),m=W(E),E.forEach(b),this.h()},h(){S(t,"class","jse-validation-error-icon svelte-1hu2cx3"),S(r,"class","svelte-1hu2cx3"),S(c,"class","svelte-1hu2cx3"),S(d,"class","jse-validation-error-action svelte-1hu2cx3"),S(e,"class","jse-validation-error svelte-1hu2cx3")},m(A,E){H(A,e,E),g(e,t),Te(i,t,null),g(e,s),g(e,r),g(r,l),g(e,a),g(e,c),g(c,f),g(e,h),g(e,d),y&&y.m(d,null),g(e,m),p=!0,_||(v=_e(e,"click",w),_=!0)},p(A,E){n=A,(!p||E&1)&&o!==(o=k1(bo(n[6].path))+"")&&Le(l,o),(!p||E&1)&&u!==(u=n[6].message+"")&&Le(f,u),n[8]===0&&n[0].length>1?y?(y.p(n,E),E&1&&B(y,1)):(y=cE(n),y.c(),B(y,1),y.m(d,null)):y&&(He(),G(y,1,1,()=>{y=null}),qe())},i(A){p||(B(i.$$.fragment,A),B(y),p=!0)},o(A){G(i.$$.fragment,A),G(y),p=!1},d(A){A&&b(e),Ie(i),y&&y.d(),_=!1,v()}}}function jG(n){let e=!ii(n[0]),t,i,s=e&&aE(n);return{c(){s&&s.c(),t=et()},l(r){s&&s.l(r),t=et()},m(r,o){s&&s.m(r,o),H(r,t,o),i=!0},p(r,[o]){o&1&&(e=!ii(r[0])),e?s?(s.p(r,o),o&1&&B(s,1)):(s=aE(r),s.c(),B(s,1),s.m(t.parentNode,t)):s&&(He(),G(s,1,1,()=>{s=null}),qe())},i(r){i||(B(s),i=!0)},o(r){G(s),i=!1},d(r){s&&s.d(r),r&&b(t)}}}function HG(n,e,t){let{validationErrors:i}=e,{selectError:s}=e,r=!0;function o(){t(2,r=!1)}function l(){t(2,r=!0)}const a=c=>{setTimeout(()=>s(c))};return n.$$set=c=>{"validationErrors"in c&&t(0,i=c.validationErrors),"selectError"in c&&t(1,s=c.selectError)},[i,s,r,o,l,a]}class qG extends st{constructor(e){super(),rt(this,e,HG,jG,cn,{validationErrors:0,selectError:1})}}const uR=qG,zG={prefix:"fas",iconName:"jsoneditor-expand",icon:[512,512,[],null,"M 0,448 V 512 h 512 v -64 z M 0,0 V 64 H 512 V 0 Z M 256,96 128,224 h 256 z M 256,416 384,288 H 128 Z"]},GG={prefix:"fas",iconName:"jsoneditor-collapse",icon:[512,512,[],null,"m 0,224 v 64 h 512 v -64 z M 256,192 384,64 H 128 Z M 256,320 128,448 h 256 z"]},KG={prefix:"fas",iconName:"jsoneditor-format",icon:[512,512,[],null,"M 0,32 v 64 h 416 v -64 z M 160,160 v 64 h 352 v -64 z M 160,288 v 64 h 288 v -64 z M 0,416 v 64 h 320 v -64 z"]},XG={prefix:"fas",iconName:"jsoneditor-compact",icon:[512,512,[],null,"M 0,32 v 64 h 512 v -64 z M 0,160 v 64 h 512 v -64 z M 0,288 v 64 h 352 v -64 z"]};const QG=n=>({}),fE=n=>({});function hE(n,e,t){const i=n.slice();return i[3]=e[t],i}const YG=n=>({}),dE=n=>({});function JG(n){let e,t,i,s,r,o,l,a,c=n[3].icon&&mE(n),u=n[3].text&&pE(n);return{c(){e=k("button"),c&&c.c(),t=U(),u&&u.c(),this.h()},l(f){e=T(f,"BUTTON",{type:!0,class:!0,title:!0});var h=I(e);c&&c.l(h),t=W(h),u&&u.l(h),h.forEach(b),this.h()},h(){S(e,"type","button"),S(e,"class",i="jse-button "+n[3].className+" svelte-31blda"),S(e,"title",s=n[3].title),e.disabled=r=n[3].disabled||!1},m(f,h){H(f,e,h),c&&c.m(e,null),g(e,t),u&&u.m(e,null),o=!0,l||(a=_e(e,"click",function(){Mn(n[3].onClick)&&n[3].onClick.apply(this,arguments)}),l=!0)},p(f,h){n=f,n[3].icon?c?(c.p(n,h),h&1&&B(c,1)):(c=mE(n),c.c(),B(c,1),c.m(e,t)):c&&(He(),G(c,1,1,()=>{c=null}),qe()),n[3].text?u?u.p(n,h):(u=pE(n),u.c(),u.m(e,null)):u&&(u.d(1),u=null),(!o||h&1&&i!==(i="jse-button "+n[3].className+" svelte-31blda"))&&S(e,"class",i),(!o||h&1&&s!==(s=n[3].title))&&S(e,"title",s),(!o||h&1&&r!==(r=n[3].disabled||!1))&&(e.disabled=r)},i(f){o||(B(c),o=!0)},o(f){G(c),o=!1},d(f){f&&b(e),c&&c.d(),u&&u.d(),l=!1,a()}}}function ZG(n){let e;return{c(){e=k("div"),this.h()},l(t){e=T(t,"DIV",{class:!0}),I(e).forEach(b),this.h()},h(){S(e,"class","jse-space svelte-31blda")},m(t,i){H(t,e,i)},p:Xe,i:Xe,o:Xe,d(t){t&&b(e)}}}function xG(n){let e;return{c(){e=k("div"),this.h()},l(t){e=T(t,"DIV",{class:!0}),I(e).forEach(b),this.h()},h(){S(e,"class","jse-separator svelte-31blda")},m(t,i){H(t,e,i)},p:Xe,i:Xe,o:Xe,d(t){t&&b(e)}}}function mE(n){let e,t;return e=new Vt({props:{data:n[3].icon}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,s){const r={};s&1&&(r.data=i[3].icon),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function pE(n){let e=n[3].text+"",t;return{c(){t=q(e)},l(i){t=z(i,e)},m(i,s){H(i,t,s)},p(i,s){s&1&&e!==(e=i[3].text+"")&&Le(t,e)},d(i){i&&b(t)}}}function gE(n){let e,t,i,s;const r=[xG,ZG,JG],o=[];function l(a,c){return a[3].separator===!0?0:a[3].space===!0?1:2}return e=l(n),t=o[e]=r[e](n),{c(){t.c(),i=et()},l(a){t.l(a),i=et()},m(a,c){o[e].m(a,c),H(a,i,c),s=!0},p(a,c){let u=e;e=l(a),e===u?o[e].p(a,c):(He(),G(o[u],1,1,()=>{o[u]=null}),qe(),t=o[e],t?t.p(a,c):(t=o[e]=r[e](a),t.c()),B(t,1),t.m(i.parentNode,i))},i(a){s||(B(t),s=!0)},o(a){G(t),s=!1},d(a){o[e].d(a),a&&b(i)}}}function $G(n){let e,t,i,s;const r=n[2].left,o=ls(r,n,n[1],dE);let l=n[0],a=[];for(let h=0;h<l.length;h+=1)a[h]=gE(hE(n,l,h));const c=h=>G(a[h],1,1,()=>{a[h]=null}),u=n[2].right,f=ls(u,n,n[1],fE);return{c(){e=k("div"),o&&o.c(),t=U();for(let h=0;h<a.length;h+=1)a[h].c();i=U(),f&&f.c(),this.h()},l(h){e=T(h,"DIV",{class:!0});var d=I(e);o&&o.l(d),t=W(d);for(let m=0;m<a.length;m+=1)a[m].l(d);i=W(d),f&&f.l(d),d.forEach(b),this.h()},h(){S(e,"class","jse-menu svelte-31blda")},m(h,d){H(h,e,d),o&&o.m(e,null),g(e,t);for(let m=0;m<a.length;m+=1)a[m].m(e,null);g(e,i),f&&f.m(e,null),s=!0},p(h,[d]){if(o&&o.p&&(!s||d&2)&&as(o,r,h,h[1],s?us(r,h[1],d,YG):cs(h[1]),dE),d&1){l=h[0];let m;for(m=0;m<l.length;m+=1){const p=hE(h,l,m);a[m]?(a[m].p(p,d),B(a[m],1)):(a[m]=gE(p),a[m].c(),B(a[m],1),a[m].m(e,i))}for(He(),m=l.length;m<a.length;m+=1)c(m);qe()}f&&f.p&&(!s||d&2)&&as(f,u,h,h[1],s?us(u,h[1],d,QG):cs(h[1]),fE)},i(h){if(!s){B(o,h);for(let d=0;d<l.length;d+=1)B(a[d]);B(f,h),s=!0}},o(h){G(o,h),a=a.filter(Boolean);for(let d=0;d<a.length;d+=1)G(a[d]);G(f,h),s=!1},d(h){h&&b(e),o&&o.d(h),Ft(a,h),f&&f.d(h)}}}function eK(n,e,t){let{$$slots:i={},$$scope:s}=e,{items:r=[]}=e;return n.$$set=o=>{"items"in o&&t(0,r=o.items),"$$scope"in o&&t(1,s=o.$$scope)},[r,s,i]}class tK extends st{constructor(e){super(),rt(this,e,eK,$G,cn,{items:0})}}const nb=tK;function nK(n){let e,t;return e=new nb({props:{items:n[0]}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,[s]){const r={};s&1&&(r.items=i[0]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function iK(n,e,t){let i,s,{readOnly:r=!1}=e,{onFormat:o}=e,{onCompact:l}=e,{onSort:a}=e,{onTransform:c}=e,{onToggleSearch:u}=e,{onUndo:f}=e,{onRedo:h}=e,{canUndo:d}=e,{canRedo:m}=e,{canFormat:p}=e,{canCompact:_}=e,{canSort:v}=e,{canTransform:y}=e,{onRenderMenu:w=Hn}=e;return n.$$set=A=>{"readOnly"in A&&t(1,r=A.readOnly),"onFormat"in A&&t(2,o=A.onFormat),"onCompact"in A&&t(3,l=A.onCompact),"onSort"in A&&t(4,a=A.onSort),"onTransform"in A&&t(5,c=A.onTransform),"onToggleSearch"in A&&t(6,u=A.onToggleSearch),"onUndo"in A&&t(7,f=A.onUndo),"onRedo"in A&&t(8,h=A.onRedo),"canUndo"in A&&t(9,d=A.canUndo),"canRedo"in A&&t(10,m=A.canRedo),"canFormat"in A&&t(11,p=A.canFormat),"canCompact"in A&&t(12,_=A.canCompact),"canSort"in A&&t(13,v=A.canSort),"canTransform"in A&&t(14,y=A.canTransform),"onRenderMenu"in A&&t(15,w=A.onRenderMenu)},n.$$.update=()=>{n.$$.dirty&32766&&t(16,i=r?[{space:!0}]:[{icon:KG,title:"Format JSON: add proper indentation and new lines (Ctrl+I)",className:"jse-format",onClick:o,disabled:r||!p},{icon:XG,title:"Compact JSON: remove all white spacing and new lines (Ctrl+Shift+I)",className:"jse-compact",onClick:l,disabled:r||!_},{separator:!0},{icon:eb,title:"Sort",className:"jse-sort",onClick:a,disabled:r||!v},{icon:Zv,title:"Transform contents (filter, sort, project)",className:"jse-transform",onClick:c,disabled:r||!y},{icon:tb,title:"Search (Ctrl+F)",className:"jse-search",onClick:u},{separator:!0},{icon:rR,title:"Undo (Ctrl+Z)",className:"jse-undo",onClick:f,disabled:!d},{icon:sR,title:"Redo (Ctrl+Shift+Z)",className:"jse-redo",onClick:h,disabled:!m},{space:!0}]),n.$$.dirty&98304&&t(0,s=w("text",i)||i)},[s,r,o,l,a,c,u,f,h,d,m,p,_,v,y,w,i]}class sK extends st{constructor(e){super(),rt(this,e,iK,nK,cn,{readOnly:1,onFormat:2,onCompact:3,onSort:4,onTransform:5,onToggleSearch:6,onUndo:7,onRedo:8,canUndo:9,canRedo:10,canFormat:11,canCompact:12,canSort:13,canTransform:14,onRenderMenu:15})}}const rK=sK;class Tn{constructor(){}lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,i){let s=[];return this.decompose(0,e,s,2),i.length&&i.decompose(0,i.length,s,3),this.decompose(t,this.length,s,1),Pr.from(s,this.length-(t-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){let i=[];return this.decompose(e,t,i,0),Pr.from(i,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),s=new ru(this),r=new ru(e);for(let o=t,l=t;;){if(s.next(o),r.next(o),o=0,s.lineBreak!=r.lineBreak||s.done!=r.done||s.value!=r.value)return!1;if(l+=s.value.length,s.done||l>=i)return!0}}iter(e=1){return new ru(this,e)}iterRange(e,t=this.length){return new fR(this,e,t)}iterLines(e,t){let i;if(e==null)i=this.iter();else{t==null&&(t=this.lines+1);let s=this.line(e).from;i=this.iterRange(s,Math.max(s,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new hR(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Tn.empty:e.length<=32?new li(e):Pr.from(li.split(e,[]))}}class li extends Tn{constructor(e,t=oK(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,s){for(let r=0;;r++){let o=this.text[r],l=s+o.length;if((t?i:l)>=e)return new lK(s,l,i,o);s=l+1,i++}}decompose(e,t,i,s){let r=e<=0&&t>=this.length?this:new li(vE(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(s&1){let o=i.pop(),l=wh(r.text,o.text.slice(),0,r.length);if(l.length<=32)i.push(new li(l,o.length+r.length));else{let a=l.length>>1;i.push(new li(l.slice(0,a)),new li(l.slice(a)))}}else i.push(r)}replace(e,t,i){if(!(i instanceof li))return super.replace(e,t,i);let s=wh(this.text,wh(i.text,vE(this.text,0,e)),t),r=this.length+i.length-(t-e);return s.length<=32?new li(s,r):Pr.from(li.split(s,[]),r)}sliceString(e,t=this.length,i=`
`){let s="";for(let r=0,o=0;r<=t&&o<this.text.length;o++){let l=this.text[o],a=r+l.length;r>e&&o&&(s+=i),e<a&&t>r&&(s+=l.slice(Math.max(0,e-r),t-r)),r=a+1}return s}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let i=[],s=-1;for(let r of e)i.push(r),s+=r.length+1,i.length==32&&(t.push(new li(i,s)),i=[],s=-1);return s>-1&&t.push(new li(i,s)),t}}class Pr extends Tn{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,t,i,s){for(let r=0;;r++){let o=this.children[r],l=s+o.length,a=i+o.lines-1;if((t?a:l)>=e)return o.lineInner(e,t,i,s);s=l+1,i=a+1}}decompose(e,t,i,s){for(let r=0,o=0;o<=t&&r<this.children.length;r++){let l=this.children[r],a=o+l.length;if(e<=a&&t>=o){let c=s&((o<=e?1:0)|(a>=t?2:0));o>=e&&a<=t&&!c?i.push(l):l.decompose(e-o,t-o,i,c)}o=a+1}}replace(e,t,i){if(i.lines<this.lines)for(let s=0,r=0;s<this.children.length;s++){let o=this.children[s],l=r+o.length;if(e>=r&&t<=l){let a=o.replace(e-r,t-r,i),c=this.lines-o.lines+a.lines;if(a.lines<c>>5-1&&a.lines>c>>5+1){let u=this.children.slice();return u[s]=a,new Pr(u,this.length-(t-e)+i.length)}return super.replace(r,l,a)}r=l+1}return super.replace(e,t,i)}sliceString(e,t=this.length,i=`
`){let s="";for(let r=0,o=0;r<this.children.length&&o<=t;r++){let l=this.children[r],a=o+l.length;o>e&&r&&(s+=i),e<a&&t>o&&(s+=l.sliceString(e-o,t-o,i)),o=a+1}return s}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof Pr))return 0;let i=0,[s,r,o,l]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;s+=t,r+=t){if(s==o||r==l)return i;let a=this.children[s],c=e.children[r];if(a!=c)return i+a.scanIdentical(c,t);i+=a.length+1}}static from(e,t=e.reduce((i,s)=>i+s.length+1,-1)){let i=0;for(let d of e)i+=d.lines;if(i<32){let d=[];for(let m of e)m.flatten(d);return new li(d,t)}let s=Math.max(32,i>>5),r=s<<1,o=s>>1,l=[],a=0,c=-1,u=[];function f(d){let m;if(d.lines>r&&d instanceof Pr)for(let p of d.children)f(p);else d.lines>o&&(a>o||!a)?(h(),l.push(d)):d instanceof li&&a&&(m=u[u.length-1])instanceof li&&d.lines+m.lines<=32?(a+=d.lines,c+=d.length+1,u[u.length-1]=new li(m.text.concat(d.text),m.length+1+d.length)):(a+d.lines>s&&h(),a+=d.lines,c+=d.length+1,u.push(d))}function h(){a!=0&&(l.push(u.length==1?u[0]:Pr.from(u,c)),c=-1,a=u.length=0)}for(let d of e)f(d);return h(),l.length==1?l[0]:new Pr(l,t)}}Tn.empty=new li([""],0);function oK(n){let e=-1;for(let t of n)e+=t.length+1;return e}function wh(n,e,t=0,i=1e9){for(let s=0,r=0,o=!0;r<n.length&&s<=i;r++){let l=n[r],a=s+l.length;a>=t&&(a>i&&(l=l.slice(0,i-s)),s<t&&(l=l.slice(t-s)),o?(e[e.length-1]+=l,o=!1):e.push(l)),s=a+1}return e}function vE(n,e,t){return wh(n,[""],e,t)}class ru{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof li?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,s=this.nodes[i],r=this.offsets[i],o=r>>1,l=s instanceof li?s.text.length:s.children.length;if(o==(t>0?l:0)){if(i==0)return this.done=!0,this.value="",this;t>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((r&1)==(t>0?0:1)){if(this.offsets[i]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(s instanceof li){let a=s.text[o+(t<0?-1:0)];if(this.offsets[i]+=t,a.length>Math.max(0,e))return this.value=e==0?a:t>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=s.children[o+(t<0?-1:0)];e>a.length?(e-=a.length,this.offsets[i]+=t):(t<0&&this.offsets[i]--,this.nodes.push(a),this.offsets.push(t>0?1:(a instanceof li?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class fR{constructor(e,t,i){this.value="",this.done=!1,this.cursor=new ru(e,t>i?-1:1),this.pos=t>i?e.length:0,this.from=Math.min(t,i),this.to=Math.max(t,i)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let i=t<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:s}=this.cursor.next(e);return this.pos+=(s.length+e)*t,this.value=s.length<=i?s:t<0?s.slice(s.length-i):s.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class hR{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:i,value:s}=this.inner.next(e);return t?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=s,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Tn.prototype[Symbol.iterator]=function(){return this.iter()},ru.prototype[Symbol.iterator]=fR.prototype[Symbol.iterator]=hR.prototype[Symbol.iterator]=function(){return this});class lK{constructor(e,t,i,s){this.from=e,this.to=t,this.number=i,this.text=s}get length(){return this.to-this.from}}let Ia="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(n=>n?parseInt(n,36):1);for(let n=1;n<Ia.length;n++)Ia[n]+=Ia[n-1];function aK(n){for(let e=1;e<Ia.length;e+=2)if(Ia[e]>n)return Ia[e-1]<=n;return!1}function bE(n){return n>=127462&&n<=127487}const _E=8205;function Es(n,e,t=!0,i=!0){return(t?dR:cK)(n,e,i)}function dR(n,e,t){if(e==n.length)return e;e&&mR(n.charCodeAt(e))&&pR(n.charCodeAt(e-1))&&e--;let i=Xi(n,e);for(e+=xs(i);e<n.length;){let s=Xi(n,e);if(i==_E||s==_E||t&&aK(s))e+=xs(s),i=s;else if(bE(s)){let r=0,o=e-2;for(;o>=0&&bE(Xi(n,o));)r++,o-=2;if(r%2==0)break;e+=2}else break}return e}function cK(n,e,t){for(;e>0;){let i=dR(n,e-2,t);if(i<e)return i;e--}return 0}function mR(n){return n>=56320&&n<57344}function pR(n){return n>=55296&&n<56320}function Xi(n,e){let t=n.charCodeAt(e);if(!pR(t)||e+1==n.length)return t;let i=n.charCodeAt(e+1);return mR(i)?(t-55296<<10)+(i-56320)+65536:t}function ib(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode((n>>10)+55296,(n&1023)+56320))}function xs(n){return n<65536?1:2}const T1=/\r\n?|\n/;var ys=function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n}(ys||(ys={}));class Hr{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,s=0;t<this.sections.length;){let r=this.sections[t++],o=this.sections[t++];o<0?(e(i,s,r),s+=r):s+=o,i+=r}}iterChangedRanges(e,t=!1){I1(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],s=this.sections[t++];s<0?e.push(i,s):e.push(s,i)}return new Hr(e)}composeDesc(e){return this.empty?e:e.empty?this:gR(this,e)}mapDesc(e,t=!1){return e.empty?this:O1(this,e,t)}mapPos(e,t=-1,i=ys.Simple){let s=0,r=0;for(let o=0;o<this.sections.length;){let l=this.sections[o++],a=this.sections[o++],c=s+l;if(a<0){if(c>e)return r+(e-s);r+=l}else{if(i!=ys.Simple&&c>=e&&(i==ys.TrackDel&&s<e&&c>e||i==ys.TrackBefore&&s<e||i==ys.TrackAfter&&c>e))return null;if(c>e||c==e&&t<0&&!l)return e==s||t<0?r:r+a;r+=a}s=c}if(e>s)throw new RangeError(`Position ${e} is out of range for changeset of length ${s}`);return r}touchesRange(e,t=e){for(let i=0,s=0;i<this.sections.length&&s<=t;){let r=this.sections[i++],o=this.sections[i++],l=s+r;if(o>=0&&s<=t&&l>=e)return s<e&&l>t?"cover":!0;s=l}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],s=this.sections[t++];e+=(e?" ":"")+i+(s>=0?":"+s:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Hr(e)}static create(e){return new Hr(e)}}class Oi extends Hr{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return I1(this,(t,i,s,r,o)=>e=e.replace(s,s+(i-t),o),!1),e}mapDesc(e,t=!1){return O1(this,e,t,!0)}invert(e){let t=this.sections.slice(),i=[];for(let s=0,r=0;s<t.length;s+=2){let o=t[s],l=t[s+1];if(l>=0){t[s]=l,t[s+1]=o;let a=s>>1;for(;i.length<a;)i.push(Tn.empty);i.push(o?e.slice(r,r+o):Tn.empty)}r+=o}return new Oi(t,i)}compose(e){return this.empty?e:e.empty?this:gR(this,e,!0)}map(e,t=!1){return e.empty?this:O1(this,e,t,!0)}iterChanges(e,t=!1){I1(this,e,t)}get desc(){return Hr.create(this.sections)}filter(e){let t=[],i=[],s=[],r=new Bu(this);e:for(let o=0,l=0;;){let a=o==e.length?1e9:e[o++];for(;l<a||l==a&&r.len==0;){if(r.done)break e;let u=Math.min(r.len,a-l);es(s,u,-1);let f=r.ins==-1?-1:r.off==0?r.ins:0;es(t,u,f),f>0&&Po(i,t,r.text),r.forward(u),l+=u}let c=e[o++];for(;l<c;){if(r.done)break e;let u=Math.min(r.len,c-l);es(t,u,-1),es(s,u,r.ins==-1?-1:r.off==0?r.ins:0),r.forward(u),l+=u}}return{changes:new Oi(t,i),filtered:Hr.create(s)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],s=this.sections[t+1];s<0?e.push(i):s==0?e.push([i]):e.push([i].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,i){let s=[],r=[],o=0,l=null;function a(u=!1){if(!u&&!s.length)return;o<t&&es(s,t-o,-1);let f=new Oi(s,r);l=l?l.compose(f.map(l)):f,s=[],r=[],o=0}function c(u){if(Array.isArray(u))for(let f of u)c(f);else if(u instanceof Oi){if(u.length!=t)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${t})`);a(),l=l?l.compose(u.map(l)):u}else{let{from:f,to:h=f,insert:d}=u;if(f>h||f<0||h>t)throw new RangeError(`Invalid change range ${f} to ${h} (in doc of length ${t})`);let m=d?typeof d=="string"?Tn.of(d.split(i||T1)):d:Tn.empty,p=m.length;if(f==h&&p==0)return;f<o&&a(),f>o&&es(s,f-o,-1),es(s,h-f,p),Po(r,s,m),o=h}}return c(e),a(!l),l}static empty(e){return new Oi(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],i=[];for(let s=0;s<e.length;s++){let r=e[s];if(typeof r=="number")t.push(r,-1);else{if(!Array.isArray(r)||typeof r[0]!="number"||r.some((o,l)=>l&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(r.length==1)t.push(r[0],0);else{for(;i.length<s;)i.push(Tn.empty);i[s]=Tn.of(r.slice(1)),t.push(r[0],i[s].length)}}}return new Oi(t,i)}static createSet(e,t){return new Oi(e,t)}}function es(n,e,t,i=!1){if(e==0&&t<=0)return;let s=n.length-2;s>=0&&t<=0&&t==n[s+1]?n[s]+=e:e==0&&n[s]==0?n[s+1]+=t:i?(n[s]+=e,n[s+1]+=t):n.push(e,t)}function Po(n,e,t){if(t.length==0)return;let i=e.length-2>>1;if(i<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<i;)n.push(Tn.empty);n.push(t)}}function I1(n,e,t){let i=n.inserted;for(let s=0,r=0,o=0;o<n.sections.length;){let l=n.sections[o++],a=n.sections[o++];if(a<0)s+=l,r+=l;else{let c=s,u=r,f=Tn.empty;for(;c+=l,u+=a,a&&i&&(f=f.append(i[o-2>>1])),!(t||o==n.sections.length||n.sections[o+1]<0);)l=n.sections[o++],a=n.sections[o++];e(s,c,r,u,f),s=c,r=u}}}function O1(n,e,t,i=!1){let s=[],r=i?[]:null,o=new Bu(n),l=new Bu(e);for(let a=-1;;)if(o.ins==-1&&l.ins==-1){let c=Math.min(o.len,l.len);es(s,c,-1),o.forward(c),l.forward(c)}else if(l.ins>=0&&(o.ins<0||a==o.i||o.off==0&&(l.len<o.len||l.len==o.len&&!t))){let c=l.len;for(es(s,l.ins,-1);c;){let u=Math.min(o.len,c);o.ins>=0&&a<o.i&&o.len<=u&&(es(s,0,o.ins),r&&Po(r,s,o.text),a=o.i),o.forward(u),c-=u}l.next()}else if(o.ins>=0){let c=0,u=o.len;for(;u;)if(l.ins==-1){let f=Math.min(u,l.len);c+=f,u-=f,l.forward(f)}else if(l.ins==0&&l.len<u)u-=l.len,l.next();else break;es(s,c,a<o.i?o.ins:0),r&&a<o.i&&Po(r,s,o.text),a=o.i,o.forward(o.len-u)}else{if(o.done&&l.done)return r?Oi.createSet(s,r):Hr.create(s);throw new Error("Mismatched change set lengths")}}function gR(n,e,t=!1){let i=[],s=t?[]:null,r=new Bu(n),o=new Bu(e);for(let l=!1;;){if(r.done&&o.done)return s?Oi.createSet(i,s):Hr.create(i);if(r.ins==0)es(i,r.len,0,l),r.next();else if(o.len==0&&!o.done)es(i,0,o.ins,l),s&&Po(s,i,o.text),o.next();else{if(r.done||o.done)throw new Error("Mismatched change set lengths");{let a=Math.min(r.len2,o.len),c=i.length;if(r.ins==-1){let u=o.ins==-1?-1:o.off?0:o.ins;es(i,a,u,l),s&&u&&Po(s,i,o.text)}else o.ins==-1?(es(i,r.off?0:r.len,a,l),s&&Po(s,i,r.textBit(a))):(es(i,r.off?0:r.len,o.off?0:o.ins,l),s&&!o.off&&Po(s,i,o.text));l=(r.ins>a||o.ins>=0&&o.len>a)&&(l||i.length>c),r.forward2(a),o.forward(a)}}}}class Bu{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?Tn.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?Tn.empty:t[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class El{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let e=this.flags&3;return e==3?null:e}get goalColumn(){let e=this.flags>>5;return e==33554431?void 0:e}map(e,t=-1){let i,s;return this.empty?i=s=e.mapPos(this.from,t):(i=e.mapPos(this.from,1),s=e.mapPos(this.to,-1)),i==this.from&&s==this.to?this:new El(i,s,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return Je.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return Je.range(this.anchor,i)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return Je.range(e.anchor,e.head)}static create(e,t,i){return new El(e,t,i)}}class Je{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:Je.create(this.ranges.map(i=>i.map(e,t)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let t=0;t<this.ranges.length;t++)if(!this.ranges[t].eq(e.ranges[t]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new Je([this.main],0)}addRange(e,t=!0){return Je.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let i=this.ranges.slice();return i[t]=e,Je.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new Je(e.ranges.map(t=>El.fromJSON(t)),e.main)}static single(e,t=e){return new Je([Je.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,s=0;s<e.length;s++){let r=e[s];if(r.empty?r.from<=i:r.from<i)return Je.normalized(e.slice(),t);i=r.to}return new Je(e,t)}static cursor(e,t=0,i,s){return El.create(e,e,(t==0?0:t<0?4:8)|(i==null?3:Math.min(2,i))|(s??33554431)<<5)}static range(e,t,i,s){let r=(i??33554431)<<5|(s==null?3:Math.min(2,s));return t<e?El.create(t,e,24|r):El.create(e,t,(t>e?4:0)|r)}static normalized(e,t=0){let i=e[t];e.sort((s,r)=>s.from-r.from),t=e.indexOf(i);for(let s=1;s<e.length;s++){let r=e[s],o=e[s-1];if(r.empty?r.from<=o.to:r.from<o.to){let l=o.from,a=Math.max(r.to,o.to);s<=t&&t--,e.splice(--s,2,r.anchor>r.head?Je.range(a,l):Je.range(l,a))}}return new Je(e,t)}}function vR(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let sb=0;class Tt{constructor(e,t,i,s,r){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=s,this.id=sb++,this.default=e([]),this.extensions=typeof r=="function"?r(this):r}static define(e={}){return new Tt(e.combine||(t=>t),e.compareInput||((t,i)=>t===i),e.compare||(e.combine?(t,i)=>t===i:rb),!!e.static,e.enables)}of(e){return new Ah([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Ah(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Ah(e,this,2,t)}from(e,t){return t||(t=i=>i),this.compute([e],i=>t(i.field(e)))}}function rb(n,e){return n==e||n.length==e.length&&n.every((t,i)=>t===e[i])}class Ah{constructor(e,t,i,s){this.dependencies=e,this.facet=t,this.type=i,this.value=s,this.id=sb++}dynamicSlot(e){var t;let i=this.value,s=this.facet.compareInput,r=this.id,o=e[r]>>1,l=this.type==2,a=!1,c=!1,u=[];for(let f of this.dependencies)f=="doc"?a=!0:f=="selection"?c=!0:((t=e[f.id])!==null&&t!==void 0?t:1)&1||u.push(e[f.id]);return{create(f){return f.values[o]=i(f),1},update(f,h){if(a&&h.docChanged||c&&(h.docChanged||h.selection)||R1(f,u)){let d=i(f);if(l?!yE(d,f.values[o],s):!s(d,f.values[o]))return f.values[o]=d,1}return 0},reconfigure:(f,h)=>{let d,m=h.config.address[r];if(m!=null){let p=pd(h,m);if(this.dependencies.every(_=>_ instanceof Tt?h.facet(_)===f.facet(_):_ instanceof Ui?h.field(_,!1)==f.field(_,!1):!0)||(l?yE(d=i(f),p,s):s(d=i(f),p)))return f.values[o]=p,0}else d=i(f);return f.values[o]=d,1}}}}function yE(n,e,t){if(n.length!=e.length)return!1;for(let i=0;i<n.length;i++)if(!t(n[i],e[i]))return!1;return!0}function R1(n,e){let t=!1;for(let i of e)ou(n,i)&1&&(t=!0);return t}function uK(n,e,t){let i=t.map(a=>n[a.id]),s=t.map(a=>a.type),r=i.filter(a=>!(a&1)),o=n[e.id]>>1;function l(a){let c=[];for(let u=0;u<i.length;u++){let f=pd(a,i[u]);if(s[u]==2)for(let h of f)c.push(h);else c.push(f)}return e.combine(c)}return{create(a){for(let c of i)ou(a,c);return a.values[o]=l(a),1},update(a,c){if(!R1(a,r))return 0;let u=l(a);return e.compare(u,a.values[o])?0:(a.values[o]=u,1)},reconfigure(a,c){let u=R1(a,i),f=c.config.facets[e.id],h=c.facet(e);if(f&&!u&&rb(t,f))return a.values[o]=h,0;let d=l(a);return e.compare(d,h)?(a.values[o]=h,0):(a.values[o]=d,1)}}}const SE=Tt.define({static:!0});class Ui{constructor(e,t,i,s,r){this.id=e,this.createF=t,this.updateF=i,this.compareF=s,this.spec=r,this.provides=void 0}static define(e){let t=new Ui(sb++,e.create,e.update,e.compare||((i,s)=>i===s),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(SE).find(i=>i.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:i=>(i.values[t]=this.create(i),1),update:(i,s)=>{let r=i.values[t],o=this.updateF(r,s);return this.compareF(r,o)?0:(i.values[t]=o,1)},reconfigure:(i,s)=>s.config.address[this.id]!=null?(i.values[t]=s.field(this),0):(i.values[t]=this.create(i),1)}}init(e){return[this,SE.of({field:this,create:e})]}get extension(){return this}}const pl={lowest:4,low:3,default:2,high:1,highest:0};function Dc(n){return e=>new bR(e,n)}const Ec={highest:Dc(pl.highest),high:Dc(pl.high),default:Dc(pl.default),low:Dc(pl.low),lowest:Dc(pl.lowest)};class bR{constructor(e,t){this.inner=e,this.prec=t}}class eo{of(e){return new D1(this,e)}reconfigure(e){return eo.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class D1{constructor(e,t){this.compartment=e,this.inner=t}}class md{constructor(e,t,i,s,r,o){for(this.base=e,this.compartments=t,this.dynamicSlots=i,this.address=s,this.staticValues=r,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,i){let s=[],r=Object.create(null),o=new Map;for(let h of fK(e,t,o))h instanceof Ui?s.push(h):(r[h.facet.id]||(r[h.facet.id]=[])).push(h);let l=Object.create(null),a=[],c=[];for(let h of s)l[h.id]=c.length<<1,c.push(d=>h.slot(d));let u=i==null?void 0:i.config.facets;for(let h in r){let d=r[h],m=d[0].facet,p=u&&u[h]||[];if(d.every(_=>_.type==0))if(l[m.id]=a.length<<1|1,rb(p,d))a.push(i.facet(m));else{let _=m.combine(d.map(v=>v.value));a.push(i&&m.compare(_,i.facet(m))?i.facet(m):_)}else{for(let _ of d)_.type==0?(l[_.id]=a.length<<1|1,a.push(_.value)):(l[_.id]=c.length<<1,c.push(v=>_.dynamicSlot(v)));l[m.id]=c.length<<1,c.push(_=>uK(_,m,d))}}let f=c.map(h=>h(l));return new md(e,o,f,l,a,r)}}function fK(n,e,t){let i=[[],[],[],[],[]],s=new Map;function r(o,l){let a=s.get(o);if(a!=null){if(a<=l)return;let c=i[a].indexOf(o);c>-1&&i[a].splice(c,1),o instanceof D1&&t.delete(o.compartment)}if(s.set(o,l),Array.isArray(o))for(let c of o)r(c,l);else if(o instanceof D1){if(t.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=e.get(o.compartment)||o.inner;t.set(o.compartment,c),r(c,l)}else if(o instanceof bR)r(o.inner,o.prec);else if(o instanceof Ui)i[l].push(o),o.provides&&r(o.provides,l);else if(o instanceof Ah)i[l].push(o),o.facet.extensions&&r(o.facet.extensions,pl.default);else{let c=o.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);r(c,l)}}return r(n,pl.default),i.reduce((o,l)=>o.concat(l))}function ou(n,e){if(e&1)return 2;let t=e>>1,i=n.status[t];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;n.status[t]=4;let s=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|s}function pd(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const _R=Tt.define(),yR=Tt.define({combine:n=>n.some(e=>e),static:!0}),SR=Tt.define({combine:n=>n.length?n[0]:void 0,static:!0}),ER=Tt.define(),wR=Tt.define(),AR=Tt.define(),CR=Tt.define({combine:n=>n.length?n[0]:!1});class Eo{constructor(e,t){this.type=e,this.value=t}static define(){return new hK}}class hK{of(e){return new Eo(this,e)}}class dK{constructor(e){this.map=e}of(e){return new en(this,e)}}class en{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new en(this.type,t)}is(e){return this.type==e}static define(e={}){return new dK(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let i=[];for(let s of e){let r=s.map(t);r&&i.push(r)}return i}}en.reconfigure=en.define();en.appendConfig=en.define();class Di{constructor(e,t,i,s,r,o){this.startState=e,this.changes=t,this.selection=i,this.effects=s,this.annotations=r,this.scrollIntoView=o,this._doc=null,this._state=null,i&&vR(i,t.newLength),r.some(l=>l.type==Di.time)||(this.annotations=r.concat(Di.time.of(Date.now())))}static create(e,t,i,s,r,o){return new Di(e,t,i,s,r,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Di.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}Di.time=Eo.define();Di.userEvent=Eo.define();Di.addToHistory=Eo.define();Di.remote=Eo.define();function mK(n,e){let t=[];for(let i=0,s=0;;){let r,o;if(i<n.length&&(s==e.length||e[s]>=n[i]))r=n[i++],o=n[i++];else if(s<e.length)r=e[s++],o=e[s++];else return t;!t.length||t[t.length-1]<r?t.push(r,o):t[t.length-1]<o&&(t[t.length-1]=o)}}function kR(n,e,t){var i;let s,r,o;return t?(s=e.changes,r=Oi.empty(e.changes.length),o=n.changes.compose(e.changes)):(s=e.changes.map(n.changes),r=n.changes.mapDesc(e.changes,!0),o=n.changes.compose(s)),{changes:o,selection:e.selection?e.selection.map(r):(i=n.selection)===null||i===void 0?void 0:i.map(s),effects:en.mapEffects(n.effects,s).concat(en.mapEffects(e.effects,r)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function N1(n,e,t){let i=e.selection,s=Oa(e.annotations);return e.userEvent&&(s=s.concat(Di.userEvent.of(e.userEvent))),{changes:e.changes instanceof Oi?e.changes:Oi.of(e.changes||[],t,n.facet(SR)),selection:i&&(i instanceof Je?i:Je.single(i.anchor,i.head)),effects:Oa(e.effects),annotations:s,scrollIntoView:!!e.scrollIntoView}}function TR(n,e,t){let i=N1(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let r=1;r<e.length;r++){e[r].filter===!1&&(t=!1);let o=!!e[r].sequential;i=kR(i,N1(n,e[r],o?i.changes.newLength:n.doc.length),o)}let s=Di.create(n,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return gK(t?pK(s):s)}function pK(n){let e=n.startState,t=!0;for(let s of e.facet(ER)){let r=s(n);if(r===!1){t=!1;break}Array.isArray(r)&&(t=t===!0?r:mK(t,r))}if(t!==!0){let s,r;if(t===!1)r=n.changes.invertedDesc,s=Oi.empty(e.doc.length);else{let o=n.changes.filter(t);s=o.changes,r=o.filtered.mapDesc(o.changes).invertedDesc}n=Di.create(e,s,n.selection&&n.selection.map(r),en.mapEffects(n.effects,r),n.annotations,n.scrollIntoView)}let i=e.facet(wR);for(let s=i.length-1;s>=0;s--){let r=i[s](n);r instanceof Di?n=r:Array.isArray(r)&&r.length==1&&r[0]instanceof Di?n=r[0]:n=TR(e,Oa(r),!1)}return n}function gK(n){let e=n.startState,t=e.facet(AR),i=n;for(let s=t.length-1;s>=0;s--){let r=t[s](n);r&&Object.keys(r).length&&(i=kR(i,N1(e,r,n.changes.newLength),!0))}return i==n?n:Di.create(e,n.changes,n.selection,i.effects,i.annotations,i.scrollIntoView)}const vK=[];function Oa(n){return n==null?vK:Array.isArray(n)?n:[n]}var ti=function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n}(ti||(ti={}));const bK=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let P1;try{P1=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function _K(n){if(P1)return P1.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||bK.test(t)))return!0}return!1}function yK(n){return e=>{if(!/\S/.test(e))return ti.Space;if(_K(e))return ti.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return ti.Word;return ti.Other}}class ln{constructor(e,t,i,s,r,o){this.config=e,this.doc=t,this.selection=i,this.values=s,this.status=e.statusTemplate.slice(),this.computeSlot=r,o&&(o._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)ou(this,l<<1);this.computeSlot=null}field(e,t=!0){let i=this.config.address[e.id];if(i==null){if(t)throw new RangeError("Field is not present in this state");return}return ou(this,i),pd(this,i)}update(...e){return TR(this,e,!0)}applyTransaction(e){let t=this.config,{base:i,compartments:s}=t;for(let o of e.effects)o.is(eo.reconfigure)?(t&&(s=new Map,t.compartments.forEach((l,a)=>s.set(a,l)),t=null),s.set(o.value.compartment,o.value.extension)):o.is(en.reconfigure)?(t=null,i=o.value):o.is(en.appendConfig)&&(t=null,i=Oa(i).concat(o.value));let r;t?r=e.startState.values.slice():(t=md.resolve(i,s,this),r=new ln(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(l,a)=>a.reconfigure(l,this),null).values),new ln(t,e.newDoc,e.newSelection,r,(o,l)=>l.update(o,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:Je.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,i=e(t.ranges[0]),s=this.changes(i.changes),r=[i.range],o=Oa(i.effects);for(let l=1;l<t.ranges.length;l++){let a=e(t.ranges[l]),c=this.changes(a.changes),u=c.map(s);for(let h=0;h<l;h++)r[h]=r[h].map(u);let f=s.mapDesc(c,!0);r.push(a.range.map(f)),s=s.compose(u),o=en.mapEffects(o,u).concat(en.mapEffects(Oa(a.effects),f))}return{changes:s,selection:Je.create(r,t.mainIndex),effects:o}}changes(e=[]){return e instanceof Oi?e:Oi.of(e,this.doc.length,this.facet(ln.lineSeparator))}toText(e){return Tn.of(e.split(this.facet(ln.lineSeparator)||T1))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(ou(this,t),pd(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let s=e[i];s instanceof Ui&&this.config.address[s.id]!=null&&(t[i]=s.spec.toJSON(this.field(e[i]),this))}return t}static fromJSON(e,t={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let s=[];if(i){for(let r in i)if(Object.prototype.hasOwnProperty.call(e,r)){let o=i[r],l=e[r];s.push(o.init(a=>o.spec.fromJSON(l,a)))}}return ln.create({doc:e.doc,selection:Je.fromJSON(e.selection),extensions:t.extensions?s.concat([t.extensions]):s})}static create(e={}){let t=md.resolve(e.extensions||[],new Map),i=e.doc instanceof Tn?e.doc:Tn.of((e.doc||"").split(t.staticFacet(ln.lineSeparator)||T1)),s=e.selection?e.selection instanceof Je?e.selection:Je.single(e.selection.anchor,e.selection.head):Je.single(0);return vR(s,i.length),t.staticFacet(yR)||(s=s.asSingle()),new ln(t,i,s,t.dynamicSlots.map(()=>null),(r,o)=>o.create(r),null)}get tabSize(){return this.facet(ln.tabSize)}get lineBreak(){return this.facet(ln.lineSeparator)||`
`}get readOnly(){return this.facet(CR)}phrase(e,...t){for(let i of this.facet(ln.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(i,s)=>{if(s=="$")return"$";let r=+(s||1);return!r||r>t.length?i:t[r-1]})),e}languageDataAt(e,t,i=-1){let s=[];for(let r of this.facet(_R))for(let o of r(this,t,i))Object.prototype.hasOwnProperty.call(o,e)&&s.push(o[e]);return s}charCategorizer(e){return yK(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:i,length:s}=this.doc.lineAt(e),r=this.charCategorizer(e),o=e-i,l=e-i;for(;o>0;){let a=Es(t,o,!1);if(r(t.slice(a,o))!=ti.Word)break;o=a}for(;l<s;){let a=Es(t,l);if(r(t.slice(l,a))!=ti.Word)break;l=a}return o==l?null:Je.range(o+i,l+i)}}ln.allowMultipleSelections=yR;ln.tabSize=Tt.define({combine:n=>n.length?n[0]:4});ln.lineSeparator=SR;ln.readOnly=CR;ln.phrases=Tt.define({compare(n,e){let t=Object.keys(n),i=Object.keys(e);return t.length==i.length&&t.every(s=>n[s]==e[s])}});ln.languageData=_R;ln.changeFilter=ER;ln.transactionFilter=wR;ln.transactionExtender=AR;eo.reconfigure=en.define();function Er(n,e,t={}){let i={};for(let s of n)for(let r of Object.keys(s)){let o=s[r],l=i[r];if(l===void 0)i[r]=o;else if(!(l===o||o===void 0))if(Object.hasOwnProperty.call(t,r))i[r]=t[r](l,o);else throw new Error("Config merge conflict for field "+r)}for(let s in e)i[s]===void 0&&(i[s]=e[s]);return i}class Kl{eq(e){return this==e}range(e,t=e){return M1.create(e,t,this)}}Kl.prototype.startSide=Kl.prototype.endSide=0;Kl.prototype.point=!1;Kl.prototype.mapMode=ys.TrackDel;let M1=class IR{constructor(e,t,i){this.from=e,this.to=t,this.value=i}static create(e,t,i){return new IR(e,t,i)}};function B1(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class ob{constructor(e,t,i,s){this.from=e,this.to=t,this.value=i,this.maxPoint=s}get length(){return this.to[this.to.length-1]}findIndex(e,t,i,s=0){let r=i?this.to:this.from;for(let o=s,l=r.length;;){if(o==l)return o;let a=o+l>>1,c=r[a]-e||(i?this.value[a].endSide:this.value[a].startSide)-t;if(a==o)return c>=0?o:l;c>=0?l=a:o=a+1}}between(e,t,i,s){for(let r=this.findIndex(t,-1e9,!0),o=this.findIndex(i,1e9,!1,r);r<o;r++)if(s(this.from[r]+e,this.to[r]+e,this.value[r])===!1)return!1}map(e,t){let i=[],s=[],r=[],o=-1,l=-1;for(let a=0;a<this.value.length;a++){let c=this.value[a],u=this.from[a]+e,f=this.to[a]+e,h,d;if(u==f){let m=t.mapPos(u,c.startSide,c.mapMode);if(m==null||(h=d=m,c.startSide!=c.endSide&&(d=t.mapPos(u,c.endSide),d<h)))continue}else if(h=t.mapPos(u,c.startSide),d=t.mapPos(f,c.endSide),h>d||h==d&&c.startSide>0&&c.endSide<=0)continue;(d-h||c.endSide-c.startSide)<0||(o<0&&(o=h),c.point&&(l=Math.max(l,d-h)),i.push(c),s.push(h-o),r.push(d-o))}return{mapped:i.length?new ob(s,r,i,l):null,pos:o}}}class In{constructor(e,t,i,s){this.chunkPos=e,this.chunk=t,this.nextLayer=i,this.maxPoint=s}static create(e,t,i,s){return new In(e,t,i,s)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:i=!1,filterFrom:s=0,filterTo:r=this.length}=e,o=e.filter;if(t.length==0&&!o)return this;if(i&&(t=t.slice().sort(B1)),this.isEmpty)return t.length?In.of(t):this;let l=new OR(this,null,-1).goto(0),a=0,c=[],u=new Zo;for(;l.value||a<t.length;)if(a<t.length&&(l.from-t[a].from||l.startSide-t[a].value.startSide)>=0){let f=t[a++];u.addInner(f.from,f.to,f.value)||c.push(f)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(a==t.length||this.chunkEnd(l.chunkIndex)<t[a].from)&&(!o||s>this.chunkEnd(l.chunkIndex)||r<this.chunkPos[l.chunkIndex])&&u.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!o||s>l.to||r<l.from||o(l.from,l.to,l.value))&&(u.addInner(l.from,l.to,l.value)||c.push(M1.create(l.from,l.to,l.value))),l.next());return u.finishInner(this.nextLayer.isEmpty&&!c.length?In.empty:this.nextLayer.update({add:c,filter:o,filterFrom:s,filterTo:r}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],i=[],s=-1;for(let o=0;o<this.chunk.length;o++){let l=this.chunkPos[o],a=this.chunk[o],c=e.touchesRange(l,l+a.length);if(c===!1)s=Math.max(s,a.maxPoint),t.push(a),i.push(e.mapPos(l));else if(c===!0){let{mapped:u,pos:f}=a.map(l,e);u&&(s=Math.max(s,u.maxPoint),t.push(u),i.push(f))}}let r=this.nextLayer.map(e);return t.length==0?r:new In(i,t,r||In.empty,s)}between(e,t,i){if(!this.isEmpty){for(let s=0;s<this.chunk.length;s++){let r=this.chunkPos[s],o=this.chunk[s];if(t>=r&&e<=r+o.length&&o.between(r,e-r,t-r,i)===!1)return}this.nextLayer.between(e,t,i)}}iter(e=0){return Lu.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return Lu.from(e).goto(t)}static compare(e,t,i,s,r=-1){let o=e.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=r),l=t.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=r),a=EE(o,l,i),c=new Nc(o,a,r),u=new Nc(l,a,r);i.iterGaps((f,h,d)=>wE(c,f,u,h,d,s)),i.empty&&i.length==0&&wE(c,0,u,0,0,s)}static eq(e,t,i=0,s){s==null&&(s=1e9-1);let r=e.filter(u=>!u.isEmpty&&t.indexOf(u)<0),o=t.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(r.length!=o.length)return!1;if(!r.length)return!0;let l=EE(r,o),a=new Nc(r,l,0).goto(i),c=new Nc(o,l,0).goto(i);for(;;){if(a.to!=c.to||!L1(a.active,c.active)||a.point&&(!c.point||!a.point.eq(c.point)))return!1;if(a.to>s)return!0;a.next(),c.next()}}static spans(e,t,i,s,r=-1){let o=new Nc(e,null,r).goto(t),l=t,a=o.openStart;for(;;){let c=Math.min(o.to,i);if(o.point){let u=o.activeForPoint(o.to),f=o.pointFrom<t?u.length+1:Math.min(u.length,a);s.point(l,c,o.point,u,f,o.pointRank),a=Math.min(o.openEnd(c),u.length)}else c>l&&(s.span(l,c,o.active,a),a=o.openEnd(c));if(o.to>i)return a+(o.point&&o.to>i?1:0);l=o.to,o.next()}}static of(e,t=!1){let i=new Zo;for(let s of e instanceof M1?[e]:t?SK(e):e)i.add(s.from,s.to,s.value);return i.finish()}}In.empty=new In([],[],null,-1);function SK(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let i=n[t];if(B1(e,i)>0)return n.slice().sort(B1);e=i}return n}In.empty.nextLayer=In.empty;class Zo{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(e){this.chunks.push(new ob(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new Zo)).add(e,t,i)}addInner(e,t,i){let s=e-this.lastTo||i.startSide-this.last.endSide;if(s<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return s<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(In.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=In.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function EE(n,e,t){let i=new Map;for(let r of n)for(let o=0;o<r.chunk.length;o++)r.chunk[o].maxPoint<=0&&i.set(r.chunk[o],r.chunkPos[o]);let s=new Set;for(let r of e)for(let o=0;o<r.chunk.length;o++){let l=i.get(r.chunk[o]);l!=null&&(t?t.mapPos(l):l)==r.chunkPos[o]&&!(t!=null&&t.touchesRange(l,l+r.chunk[o].length))&&s.add(r.chunk[o])}return s}class OR{constructor(e,t,i,s=0){this.layer=e,this.skip=t,this.minPoint=i,this.rank=s}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let s=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(s)||this.layer.chunkEnd(this.chunkIndex)<e||s.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let s=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!i||this.rangeIndex<s)&&this.setRangeIndex(s)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],i=e+t.from[this.rangeIndex];if(this.from=i,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Lu{constructor(e){this.heap=e}static from(e,t=null,i=-1){let s=[];for(let r=0;r<e.length;r++)for(let o=e[r];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&s.push(new OR(o,t,i,r));return s.length==1?s[0]:new Lu(s)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let i of this.heap)i.goto(e,t);for(let i=this.heap.length>>1;i>=0;i--)Pp(this.heap,i);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let i=this.heap.length>>1;i>=0;i--)Pp(this.heap,i);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Pp(this.heap,0)}}}function Pp(n,e){for(let t=n[e];;){let i=(e<<1)+1;if(i>=n.length)break;let s=n[i];if(i+1<n.length&&s.compare(n[i+1])>=0&&(s=n[i+1],i++),t.compare(s)<0)break;n[i]=t,n[e]=s,e=i}}class Nc{constructor(e,t,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Lu.from(e,t,i)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){qf(this.active,e),qf(this.activeTo,e),qf(this.activeRank,e),this.minActive=AE(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:s,rank:r}=this.cursor;for(;t<this.activeRank.length&&this.activeRank[t]<=r;)t++;zf(this.active,t,i),zf(this.activeTo,t,s),zf(this.activeRank,t,r),e&&zf(e,t,this.cursor.from),this.minActive=AE(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let s=this.minActive;if(s>-1&&(this.activeTo[s]-this.cursor.from||this.active[s].endSide-this.cursor.startSide)<0){if(this.activeTo[s]>e){this.to=this.activeTo[s],this.endSide=this.active[s].endSide;break}this.removeActive(s),i&&qf(i,s)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let r=this.cursor.value;if(!r.point)this.addActive(i),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=r,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=r.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let s=i.length-1;s>=0&&i[s]<e;s--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&t.push(this.active[i]);return t.reverse()}openEnd(e){let t=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)t++;return t}}function wE(n,e,t,i,s,r){n.goto(e),t.goto(i);let o=i+s,l=i,a=i-e;for(;;){let c=n.to+a-t.to||n.endSide-t.endSide,u=c<0?n.to+a:t.to,f=Math.min(u,o);if(n.point||t.point?n.point&&t.point&&(n.point==t.point||n.point.eq(t.point))&&L1(n.activeForPoint(n.to+a),t.activeForPoint(t.to))||r.comparePoint(l,f,n.point,t.point):f>l&&!L1(n.active,t.active)&&r.compareRange(l,f,n.active,t.active),u>o)break;l=u,c<=0&&n.next(),c>=0&&t.next()}}function L1(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!n[t].eq(e[t]))return!1;return!0}function qf(n,e){for(let t=e,i=n.length-1;t<i;t++)n[t]=n[t+1];n.pop()}function zf(n,e,t){for(let i=n.length-1;i>=e;i--)n[i+1]=n[i];n[e]=t}function AE(n,e){let t=-1,i=1e9;for(let s=0;s<e.length;s++)(e[s]-i||n[s].endSide-n[t].endSide)<0&&(t=s,i=e[s]);return t}function yf(n,e,t=n.length){let i=0;for(let s=0;s<t;)n.charCodeAt(s)==9?(i+=e-i%e,s++):(i++,s=Es(n,s));return i}function U1(n,e,t,i){for(let s=0,r=0;;){if(r>=e)return s;if(s==n.length)break;r+=n.charCodeAt(s)==9?t-r%t:1,s=Es(n,s)}return i===!0?-1:n.length}const W1="ͼ",CE=typeof Symbol>"u"?"__"+W1:Symbol.for(W1),V1=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),kE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class xo{constructor(e,t){this.rules=[];let{finish:i}=t||{};function s(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function r(o,l,a,c){let u=[],f=/^@(\w+)\b/.exec(o[0]),h=f&&f[1]=="keyframes";if(f&&l==null)return a.push(o[0]+";");for(let d in l){let m=l[d];if(/&/.test(d))r(d.split(/,\s*/).map(p=>o.map(_=>p.replace(/&/,_))).reduce((p,_)=>p.concat(_)),m,a);else if(m&&typeof m=="object"){if(!f)throw new RangeError("The value of a property ("+d+") should be a primitive value.");r(s(d),m,u,h)}else m!=null&&u.push(d.replace(/_.*/,"").replace(/[A-Z]/g,p=>"-"+p.toLowerCase())+": "+m+";")}(u.length||h)&&a.push((i&&!f&&!c?o.map(i):o).join(", ")+" {"+u.join(" ")+"}")}for(let o in e)r(s(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=kE[CE]||1;return kE[CE]=e+1,W1+e.toString(36)}static mount(e,t){(e[V1]||new EK(e)).mount(Array.isArray(t)?t:[t])}}let Gf=null;class EK{constructor(e){if(!e.head&&e.adoptedStyleSheets&&typeof CSSStyleSheet<"u"){if(Gf)return e.adoptedStyleSheets=[Gf.sheet].concat(e.adoptedStyleSheets),e[V1]=Gf;this.sheet=new CSSStyleSheet,e.adoptedStyleSheets=[this.sheet].concat(e.adoptedStyleSheets),Gf=this}else{this.styleTag=(e.ownerDocument||e).createElement("style");let t=e.head||e;t.insertBefore(this.styleTag,t.firstChild)}this.modules=[],e[V1]=this}mount(e){let t=this.sheet,i=0,s=0;for(let r=0;r<e.length;r++){let o=e[r],l=this.modules.indexOf(o);if(l<s&&l>-1&&(this.modules.splice(l,1),s--,l=-1),l==-1){if(this.modules.splice(s++,0,o),t)for(let a=0;a<o.rules.length;a++)t.insertRule(o.rules[a],i++)}else{for(;s<l;)i+=this.modules[s++].rules.length;i+=o.rules.length,s++}}if(!t){let r="";for(let o=0;o<this.modules.length;o++)r+=this.modules[o].getRules()+`
`;this.styleTag.textContent=r}}}var $o={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Uu={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},TE=typeof navigator<"u"&&/Chrome\/(\d+)/.exec(navigator.userAgent),wK=typeof navigator<"u"&&/Mac/.test(navigator.platform),AK=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),CK=wK||TE&&+TE[1]<57;for(var Qi=0;Qi<10;Qi++)$o[48+Qi]=$o[96+Qi]=String(Qi);for(var Qi=1;Qi<=24;Qi++)$o[Qi+111]="F"+Qi;for(var Qi=65;Qi<=90;Qi++)$o[Qi]=String.fromCharCode(Qi+32),Uu[Qi]=String.fromCharCode(Qi);for(var Mp in $o)Uu.hasOwnProperty(Mp)||(Uu[Mp]=$o[Mp]);function kK(n){var e=CK&&(n.ctrlKey||n.altKey||n.metaKey)||AK&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Uu:$o)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function gd(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function xa(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function TK(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Ch(n,e){if(!e.anchorNode)return!1;try{return xa(n,e.anchorNode)}catch{return!1}}function Wu(n){return n.nodeType==3?$a(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function vd(n,e,t,i){return t?IE(n,e,t,i,-1)||IE(n,e,t,i,1):!1}function bd(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function IE(n,e,t,i,s){for(;;){if(n==t&&e==i)return!0;if(e==(s<0?0:Vu(n))){if(n.nodeName=="DIV")return!1;let r=n.parentNode;if(!r||r.nodeType!=1)return!1;e=bd(n)+(s<0?0:1),n=r}else if(n.nodeType==1){if(n=n.childNodes[e+(s<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=s<0?Vu(n):0}else return!1}}function Vu(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}const RR={left:0,right:0,top:0,bottom:0};function lb(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function IK(n){return{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function OK(n,e,t,i,s,r,o,l){let a=n.ownerDocument,c=a.defaultView||window;for(let u=n;u;)if(u.nodeType==1){let f,h=u==a.body;if(h)f=IK(c);else{if(u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let p=u.getBoundingClientRect();f={left:p.left,right:p.left+u.clientWidth,top:p.top,bottom:p.top+u.clientHeight}}let d=0,m=0;if(s=="nearest")e.top<f.top?(m=-(f.top-e.top+o),t>0&&e.bottom>f.bottom+m&&(m=e.bottom-f.bottom+m+o)):e.bottom>f.bottom&&(m=e.bottom-f.bottom+o,t<0&&e.top-m<f.top&&(m=-(f.top+m-e.top+o)));else{let p=e.bottom-e.top,_=f.bottom-f.top;m=(s=="center"&&p<=_?e.top+p/2-_/2:s=="start"||s=="center"&&t<0?e.top-o:e.bottom-_+o)-f.top}if(i=="nearest"?e.left<f.left?(d=-(f.left-e.left+r),t>0&&e.right>f.right+d&&(d=e.right-f.right+d+r)):e.right>f.right&&(d=e.right-f.right+r,t<0&&e.left<f.left+d&&(d=-(f.left+d-e.left+r))):d=(i=="center"?e.left+(e.right-e.left)/2-(f.right-f.left)/2:i=="start"==l?e.left-r:e.right-(f.right-f.left)+r)-f.left,d||m)if(h)c.scrollBy(d,m);else{let p=0,_=0;if(m){let v=u.scrollTop;u.scrollTop+=m,_=u.scrollTop-v}if(d){let v=u.scrollLeft;u.scrollLeft+=d,p=u.scrollLeft-v}e={left:e.left-p,top:e.top-_,right:e.right-p,bottom:e.bottom-_},p&&Math.abs(p-d)<1&&(i="nearest"),_&&Math.abs(_-m)<1&&(s="nearest")}if(h)break;u=u.assignedSlot||u.parentNode}else if(u.nodeType==11)u=u.host;else break}function RK(n){let e=n.ownerDocument;for(let t=n.parentNode;t&&t!=e.body;)if(t.nodeType==1){if(t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth)return t;t=t.assignedSlot||t.parentNode}else if(t.nodeType==11)t=t.host;else break;return null}class DK{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){this.set(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)}set(e,t,i,s){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=s}}let fa=null;function DR(n){if(n.setActive)return n.setActive();if(fa)return n.focus(fa);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(fa==null?{get preventScroll(){return fa={preventScroll:!0},!0}}:void 0),!fa){fa=!1;for(let t=0;t<e.length;){let i=e[t++],s=e[t++],r=e[t++];i.scrollTop!=s&&(i.scrollTop=s),i.scrollLeft!=r&&(i.scrollLeft=r)}}}let OE;function $a(n,e,t=e){let i=OE||(OE=document.createRange());return i.setEnd(n,t),i.setStart(n,e),i}function Ra(n,e,t){let i={key:e,code:e,keyCode:t,which:t,cancelable:!0},s=new KeyboardEvent("keydown",i);s.synthetic=!0,n.dispatchEvent(s);let r=new KeyboardEvent("keyup",i);return r.synthetic=!0,n.dispatchEvent(r),s.defaultPrevented||r.defaultPrevented}function NK(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function NR(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}function PK(n,e){let t=e.focusNode,i=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=i)return!1;for(;;)if(i){if(t.nodeType!=1)return!1;let s=t.childNodes[i-1];s.contentEditable=="false"?i--:(t=s,i=Vu(t))}else{if(t==n)return!0;i=bd(t),t=t.parentNode}}class ss{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new ss(e.parentNode,bd(e),t)}static after(e,t){return new ss(e.parentNode,bd(e)+1,t)}}const ab=[];class $n{constructor(){this.parent=null,this.dom=null,this.dirty=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let i of this.children){if(i==e)return t;t+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}coordsAt(e,t){return null}sync(e,t){if(this.dirty&2){let i=this.dom,s=null,r;for(let o of this.children){if(o.dirty){if(!o.dom&&(r=s?s.nextSibling:i.firstChild)){let l=$n.get(r);(!l||!l.parent&&l.canReuseDOM(o))&&o.reuseDOM(r)}o.sync(e,t),o.dirty=0}if(r=s?s.nextSibling:i.firstChild,t&&!t.written&&t.node==i&&r!=o.dom&&(t.written=!0),o.dom.parentNode==i)for(;r&&r!=o.dom;)r=RE(r);else i.insertBefore(o.dom,r);s=o.dom}for(r=s?s.nextSibling:i.firstChild,r&&t&&t.node==i&&(t.written=!0);r;)r=RE(r)}else if(this.dirty&1)for(let i of this.children)i.dirty&&(i.sync(e,t),i.dirty=0)}reuseDOM(e){}localPosFromDOM(e,t){let i;if(e==this.dom)i=this.dom.childNodes[t];else{let s=Vu(e)==0?0:t==0?-1:1;for(;;){let r=e.parentNode;if(r==this.dom)break;s==0&&r.firstChild!=r.lastChild&&(e==r.firstChild?s=-1:s=1),e=r}s<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!$n.get(i);)i=i.nextSibling;if(!i)return this.length;for(let s=0,r=0;;s++){let o=this.children[s];if(o.dom==i)return r;r+=o.length+o.breakAfter}}domBoundsAround(e,t,i=0){let s=-1,r=-1,o=-1,l=-1;for(let a=0,c=i,u=i;a<this.children.length;a++){let f=this.children[a],h=c+f.length;if(c<e&&h>t)return f.domBoundsAround(e,t,c);if(h>=e&&s==-1&&(s=a,r=c),c>t&&f.dom.parentNode==this.dom){o=a,l=u;break}u=h,c=h+f.breakAfter}return{from:r,to:l<0?i+this.length:l,startDOM:(s?this.children[s-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.dirty|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.dirty|=2),t.dirty&1)return;t.dirty|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.dirty&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,i=ab){this.markDirty();for(let s=e;s<t;s++){let r=this.children[s];r.parent==this&&r.destroy()}this.children.splice(e,t-e,...i);for(let s=0;s<i.length;s++)i[s].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new PR(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}merge(e,t,i,s,r,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor}getSide(){return 0}destroy(){this.parent=null}}$n.prototype.breakAfter=0;function RE(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class PR{constructor(e,t,i){this.children=e,this.pos=t,this.i=i,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function MR(n,e,t,i,s,r,o,l,a){let{children:c}=n,u=c.length?c[e]:null,f=r.length?r[r.length-1]:null,h=f?f.breakAfter:o;if(!(e==i&&u&&!o&&!h&&r.length<2&&u.merge(t,s,r.length?f:null,t==0,l,a))){if(i<c.length){let d=c[i];d&&s<d.length?(e==i&&(d=d.split(s),s=0),!h&&f&&d.merge(0,s,f,!0,0,a)?r[r.length-1]=d:(s&&d.merge(0,s,null,!1,0,a),r.push(d))):d!=null&&d.breakAfter&&(f?f.breakAfter=1:o=1),i++}for(u&&(u.breakAfter=o,t>0&&(!o&&r.length&&u.merge(t,u.length,r[0],!1,l,0)?u.breakAfter=r.shift().breakAfter:(t<u.length||u.children.length&&u.children[u.children.length-1].length==0)&&u.merge(t,u.length,null,!1,l,0),e++));e<i&&r.length;)if(c[i-1].become(r[r.length-1]))i--,r.pop(),a=r.length?0:l;else if(c[e].become(r[0]))e++,r.shift(),l=r.length?0:a;else break;!r.length&&e&&i<c.length&&!c[e-1].breakAfter&&c[i].merge(0,0,c[e-1],!1,l,a)&&e--,(e<i||r.length)&&n.replaceChildren(e,i,r)}}function BR(n,e,t,i,s,r){let o=n.childCursor(),{i:l,off:a}=o.findPos(t,1),{i:c,off:u}=o.findPos(e,-1),f=e-t;for(let h of i)f+=h.length;n.length+=f,MR(n,c,u,l,a,i,0,s,r)}let Vs=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},F1=typeof document<"u"?document:{documentElement:{style:{}}};const j1=/Edge\/(\d+)/.exec(Vs.userAgent),LR=/MSIE \d/.test(Vs.userAgent),H1=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Vs.userAgent),Hm=!!(LR||H1||j1),DE=!Hm&&/gecko\/(\d+)/i.test(Vs.userAgent),Bp=!Hm&&/Chrome\/(\d+)/.exec(Vs.userAgent),NE="webkitFontSmoothing"in F1.documentElement.style,UR=!Hm&&/Apple Computer/.test(Vs.vendor),PE=UR&&(/Mobile\/\w+/.test(Vs.userAgent)||Vs.maxTouchPoints>2);var It={mac:PE||/Mac/.test(Vs.platform),windows:/Win/.test(Vs.platform),linux:/Linux|X11/.test(Vs.platform),ie:Hm,ie_version:LR?F1.documentMode||6:H1?+H1[1]:j1?+j1[1]:0,gecko:DE,gecko_version:DE?+(/Firefox\/(\d+)/.exec(Vs.userAgent)||[0,0])[1]:0,chrome:!!Bp,chrome_version:Bp?+Bp[1]:0,ios:PE,android:/Android\b/.test(Vs.userAgent),webkit:NE,safari:UR,webkit_version:NE?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:F1.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const MK=256;class el extends $n{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,i){return i&&(!(i instanceof el)||this.length-(t-e)+i.length>MK)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new el(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new ss(this.dom,e)}domBoundsAround(e,t,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return q1(this.dom,e,t)}}class Gr extends $n{constructor(e,t=[],i=0){super(),this.mark=e,this.children=t,this.length=i;for(let s of t)s.setParent(this)}setAttrs(e){if(NR(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.dirty|=6)}sync(e,t){this.dom?this.dirty&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,i,s,r,o){return i&&(!(i instanceof Gr&&i.mark.eq(this.mark))||e&&r<=0||t<this.length&&o<=0)?!1:(BR(this,e,t,i?i.children:[],r-1,o-1),this.markDirty(),!0)}split(e){let t=[],i=0,s=-1,r=0;for(let l of this.children){let a=i+l.length;a>e&&t.push(i<e?l.split(e-i):l),s<0&&i>=e&&(s=r),i=a,r++}let o=this.length-e;return this.length=e,s>-1&&(this.children.length=s,this.markDirty()),new Gr(this.mark,t,o)}domAtPos(e){return FR(this,e)}coordsAt(e,t){return HR(this,e,t)}}function q1(n,e,t){let i=n.nodeValue.length;e>i&&(e=i);let s=e,r=e,o=0;e==0&&t<0||e==i&&t>=0?It.chrome||It.gecko||(e?(s--,o=1):r<i&&(r++,o=-1)):t<0?s--:r<i&&r++;let l=$a(n,s,r).getClientRects();if(!l.length)return RR;let a=l[(o?o<0:t>=0)?0:l.length-1];return It.safari&&!o&&a.width==0&&(a=Array.prototype.find.call(l,c=>c.width)||a),o?lb(a,o<0):a||null}class Mo extends $n{constructor(e,t,i){super(),this.widget=e,this.length=t,this.side=i,this.prevWidget=null}static create(e,t,i){return new(e.customView||Mo)(e,t,i)}split(e){let t=Mo.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,t,i,s,r,o){return i&&(!(i instanceof Mo)||!this.widget.compare(i.widget)||e>0&&r<=0||t<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}become(e){return e.length==this.length&&e instanceof Mo&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.eq(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Tn.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,i=t&&t.state.doc,s=this.posAtStart;return i?i.slice(s,s+this.length):Tn.empty}domAtPos(e){return e==0?ss.before(this.dom):ss.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let i=this.dom.getClientRects(),s=null;if(!i.length)return RR;for(let r=e>0?i.length-1:0;s=i[r],!(e>0?r==0:r==i.length-1||s.top<s.bottom);r+=e>0?-1:1);return this.length?s:lb(s,this.side>0)}get isEditable(){return!1}get isWidget(){return!0}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class WR extends Mo{domAtPos(e){let{topView:t,text:i}=this.widget;return t?z1(e,0,t,i,(s,r)=>s.domAtPos(r),s=>new ss(i,Math.min(s,i.nodeValue.length))):new ss(i,Math.min(e,i.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(e,t){let{topView:i,text:s}=this.widget;return i?VR(e,t,i,s):Math.min(t,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(e,t){let{topView:i,text:s}=this.widget;return i?z1(e,t,i,s,(r,o,l)=>r.coordsAt(o,l),(r,o)=>q1(s,r,o)):q1(s,e,t)}destroy(){var e;super.destroy(),(e=this.widget.topView)===null||e===void 0||e.destroy()}get isEditable(){return!0}canReuseDOM(){return!0}}function z1(n,e,t,i,s,r){if(t instanceof Gr){for(let o=t.dom.firstChild;o;o=o.nextSibling){let l=$n.get(o);if(!l)return r(n,e);let a=xa(o,i),c=l.length+(a?i.nodeValue.length:0);if(n<c||n==c&&l.getSide()<=0)return a?z1(n,e,l,i,s,r):s(l,n,e);n-=c}return s(t,t.length,-1)}else return t.dom==i?r(n,e):s(t,n,e)}function VR(n,e,t,i){if(t instanceof Gr)for(let s of t.children){let r=0,o=xa(s.dom,i);if(xa(s.dom,n))return r+(o?VR(n,e,s,i):s.localPosFromDOM(n,e));r+=o?i.nodeValue.length:s.length}else if(t.dom==i)return Math.min(e,i.nodeValue.length);return t.localPosFromDOM(n,e)}class ec extends $n{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof ec&&e.side==this.side}split(){return new ec(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return ss.before(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){let t=this.dom.getBoundingClientRect(),i=BK(this,this.side>0?-1:1);return i&&i.top<t.bottom&&i.bottom>t.top?{left:t.left,right:t.right,top:i.top,bottom:i.bottom}:t}get overrideDOMText(){return Tn.empty}}el.prototype.children=Mo.prototype.children=ec.prototype.children=ab;function BK(n,e){let t=n.parent,i=t?t.children.indexOf(n):-1;for(;t&&i>=0;)if(e<0?i>0:i<t.children.length){let s=t.children[i+e];if(s instanceof el){let r=s.coordsAt(e<0?s.length:0,e);if(r)return r}i+=e}else if(t instanceof Gr&&t.parent)i=t.parent.children.indexOf(t)+(e<0?0:1),t=t.parent;else{let s=t.dom.lastChild;if(s&&s.nodeName=="BR")return s.getClientRects()[0];break}}function FR(n,e){let t=n.dom,{children:i}=n,s=0;for(let r=0;s<i.length;s++){let o=i[s],l=r+o.length;if(!(l==r&&o.getSide()<=0)){if(e>r&&e<l&&o.dom.parentNode==t)return o.domAtPos(e-r);if(e<=r)break;r=l}}for(let r=s;r>0;r--){let o=i[r-1];if(o.dom.parentNode==t)return o.domAtPos(o.length)}for(let r=s;r<i.length;r++){let o=i[r];if(o.dom.parentNode==t)return o.domAtPos(0)}return new ss(t,0)}function jR(n,e,t){let i,{children:s}=n;t>0&&e instanceof Gr&&s.length&&(i=s[s.length-1])instanceof Gr&&i.mark.eq(e.mark)?jR(i,e.children[0],t-1):(s.push(e),e.setParent(n)),n.length+=e.length}function HR(n,e,t){let i=null,s=-1,r=null,o=-1;function l(c,u){for(let f=0,h=0;f<c.children.length&&h<=u;f++){let d=c.children[f],m=h+d.length;m>=u&&(d.children.length?l(d,u-h):!r&&(m>u||h==m&&d.getSide()>0)?(r=d,o=u-h):(h<u||h==m&&d.getSide()<0)&&(i=d,s=u-h)),h=m}}l(n,e);let a=(t<0?i:r)||i||r;return a?a.coordsAt(Math.max(0,a==i?s:o),t):LK(n)}function LK(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=Wu(e);return t[t.length-1]||null}function G1(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}function cb(n,e){if(n==e)return!0;if(!n||!e)return!1;let t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let s of t)if(i.indexOf(s)==-1||n[s]!==e[s])return!1;return!0}function K1(n,e,t){let i=null;if(e)for(let s in e)t&&s in t||n.removeAttribute(i=s);if(t)for(let s in t)e&&e[s]==t[s]||n.setAttribute(i=s,t[s]);return!!i}class sl{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}ignoreEvent(e){return!0}get customView(){return null}destroy(e){}}var Un=function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n}(Un||(Un={}));class Lt extends Kl{constructor(e,t,i,s){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=s}get heightRelevant(){return!1}static mark(e){return new qm(e)}static widget(e){let t=e.side||0,i=!!e.block;return t+=i?t>0?3e8:-4e8:t>0?1e8:-1e8,new Xl(e,t,t,i,e.widget||null,!1)}static replace(e){let t=!!e.block,i,s;if(e.isBlockGap)i=-5e8,s=4e8;else{let{start:r,end:o}=qR(e,t);i=(r?t?-3e8:-1:5e8)-1,s=(o?t?2e8:1:-6e8)+1}return new Xl(e,i,s,t,e.widget||null,!0)}static line(e){return new Sf(e)}static set(e,t=!1){return In.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Lt.none=In.empty;class qm extends Lt{constructor(e){let{start:t,end:i}=qR(e);super(t?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){return this==e||e instanceof qm&&this.tagName==e.tagName&&this.class==e.class&&cb(this.attrs,e.attrs)}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}qm.prototype.point=!1;class Sf extends Lt{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Sf&&this.spec.class==e.spec.class&&cb(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}Sf.prototype.mapMode=ys.TrackBefore;Sf.prototype.point=!0;class Xl extends Lt{constructor(e,t,i,s,r,o){super(t,i,r,e),this.block=s,this.isReplace=o,this.mapMode=s?t<=0?ys.TrackBefore:ys.TrackAfter:ys.TrackDel}get type(){return this.startSide<this.endSide?Un.WidgetRange:this.startSide<=0?Un.WidgetBefore:Un.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(e){return e instanceof Xl&&UK(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}Xl.prototype.point=!0;function qR(n,e=!1){let{inclusiveStart:t,inclusiveEnd:i}=n;return t==null&&(t=n.inclusive),i==null&&(i=n.inclusive),{start:t??e,end:i??e}}function UK(n,e){return n==e||!!(n&&e&&n.compare(e))}function X1(n,e,t,i=0){let s=t.length-1;s>=0&&t[s]+i>=n?t[s]=Math.max(t[s],e):t.push(n,e)}class ws extends $n{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,i,s,r,o){if(i){if(!(i instanceof ws))return!1;this.dom||i.transferDOM(this)}return s&&this.setDeco(i?i.attrs:null),BR(this,e,t,i?i.children:[],r,o),!0}split(e){let t=new ws;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i,off:s}=this.childPos(e);s&&(t.append(this.children[i].split(s),0),this.children[i].merge(s,this.children[i].length,null,!1,0,0),i++);for(let r=i;r<this.children.length;r++)t.append(this.children[r],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){cb(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){jR(this,e,t)}addLineDeco(e){let t=e.spec.attributes,i=e.spec.class;t&&(this.attrs=G1(t,this.attrs||{})),i&&(this.attrs=G1({class:i},this.attrs||{}))}domAtPos(e){return FR(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.dirty|=6)}sync(e,t){var i;this.dom?this.dirty&4&&(NR(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(K1(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let s=this.dom.lastChild;for(;s&&$n.get(s)instanceof Gr;)s=s.lastChild;if(!s||!this.length||s.nodeName!="BR"&&((i=$n.get(s))===null||i===void 0?void 0:i.isEditable)==!1&&(!It.ios||!this.children.some(r=>r instanceof el))){let r=document.createElement("BR");r.cmIgnore=!0,this.dom.appendChild(r)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0;for(let t of this.children){if(!(t instanceof el)||/[^ -~]/.test(t.text))return null;let i=Wu(t.dom);if(i.length!=1)return null;e+=i[0].width}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length}:null}coordsAt(e,t){return HR(this,e,t)}become(e){return!1}get type(){return Un.Text}static find(e,t){for(let i=0,s=0;i<e.children.length;i++){let r=e.children[i],o=s+r.length;if(o>=t){if(r instanceof ws)return r;if(o>t)break}s=o+r.breakAfter}return null}}class Dl extends $n{constructor(e,t,i){super(),this.widget=e,this.length=t,this.type=i,this.breakAfter=0,this.prevWidget=null}merge(e,t,i,s,r,o){return i&&(!(i instanceof Dl)||!this.widget.compare(i.widget)||e>0&&r<=0||t<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?ss.before(this.dom):ss.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let i=new Dl(this.widget,t,this.type);return i.breakAfter=this.breakAfter,i}get children(){return ab}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Tn.empty}domBoundsAround(){return null}become(e){return e instanceof Dl&&e.type==this.type&&e.widget.constructor==this.widget.constructor?(e.widget.eq(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class ub{constructor(e,t,i,s){this.doc=e,this.pos=t,this.end=i,this.disallowBlockEffectsFor=s,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!e.breakAfter&&!(e instanceof Dl&&e.type==Un.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new ws),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Kf(new ec(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||this.getLine()}buildText(e,t,i){for(;e>0;){if(this.textOff==this.text.length){let{value:r,lineBreak:o,done:l}=this.cursor.next(this.skip);if(this.skip=0,l)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=r,this.textOff=0}let s=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-i)),this.getLine().append(Kf(new el(this.text.slice(this.textOff,this.textOff+s)),t),i),this.atCursorPos=!0,this.textOff+=s,e-=s,i=0}}span(e,t,i,s){this.buildText(t-e,i,s),this.pos=t,this.openStart<0&&(this.openStart=s)}point(e,t,i,s,r,o){if(this.disallowBlockEffectsFor[o]&&i instanceof Xl){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=t-e;if(i instanceof Xl)if(i.block){let{type:a}=i;a==Un.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Dl(i.widget||new ME("div"),l,a))}else{let a=Mo.create(i.widget||new ME("span"),l,l?0:i.startSide),c=this.atCursorPos&&!a.isEditable&&r<=s.length&&(e<t||i.startSide>0),u=!a.isEditable&&(e<t||r>s.length||i.startSide<=0),f=this.getLine();this.pendingBuffer==2&&!c&&(this.pendingBuffer=0),this.flushBuffer(s),c&&(f.append(Kf(new ec(1),s),r),r=s.length+Math.max(0,r-s.length)),f.append(Kf(a,s),r),this.atCursorPos=u,this.pendingBuffer=u?e<t||r>s.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=s.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=r)}static build(e,t,i,s,r){let o=new ub(e,t,i,r);return o.openEnd=In.spans(s,t,i,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function Kf(n,e){for(let t of e)n=new Gr(t,[n],n.length);return n}class ME extends sl{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}}const zR=Tt.define(),GR=Tt.define(),KR=Tt.define(),XR=Tt.define(),Q1=Tt.define(),QR=Tt.define(),YR=Tt.define(),JR=Tt.define({combine:n=>n.some(e=>e)}),ZR=Tt.define({combine:n=>n.some(e=>e)});class _d{constructor(e,t="nearest",i="nearest",s=5,r=5){this.range=e,this.y=t,this.x=i,this.yMargin=s,this.xMargin=r}map(e){return e.empty?this:new _d(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const BE=en.define({map:(n,e)=>n.map(e)});function Hs(n,e,t){let i=n.facet(XR);i.length?i[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const zm=Tt.define({combine:n=>n.length?n[0]:!0});let WK=0;const zc=Tt.define();class ki{constructor(e,t,i,s){this.id=e,this.create=t,this.domEventHandlers=i,this.extension=s(this)}static define(e,t){const{eventHandlers:i,provide:s,decorations:r}=t||{};return new ki(WK++,e,i,o=>{let l=[zc.of(o)];return r&&l.push(Fu.of(a=>{let c=a.plugin(o);return c?r(c):Lt.none})),s&&l.push(s(o)),l})}static fromClass(e,t){return ki.define(i=>new e(i),t)}}class Lp{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(i){if(Hs(t.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){Hs(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(i){Hs(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const xR=Tt.define(),fb=Tt.define(),Fu=Tt.define(),$R=Tt.define(),e5=Tt.define(),Gc=Tt.define();class qr{constructor(e,t,i,s){this.fromA=e,this.toA=t,this.fromB=i,this.toB=s}join(e){return new qr(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let s=e[t-1];if(!(s.fromA>i.toA)){if(s.toA<i.fromA)break;i=i.join(s),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(t.length==0)return e;let i=[];for(let s=0,r=0,o=0,l=0;;s++){let a=s==e.length?null:e[s],c=o-l,u=a?a.fromB:1e9;for(;r<t.length&&t[r]<u;){let f=t[r],h=t[r+1],d=Math.max(l,f),m=Math.min(u,h);if(d<=m&&new qr(d+c,m+c,d,m).addToSet(i),h>u)break;r+=2}if(!a)return i;new qr(a.fromA,a.toA,a.fromB,a.toB).addToSet(i),o=a.toA,l=a.toB}}}class yd{constructor(e,t,i){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=Oi.empty(this.startState.doc.length);for(let r of i)this.changes=this.changes.compose(r.changes);let s=[];this.changes.iterChangedRanges((r,o,l,a)=>s.push(new qr(r,o,l,a))),this.changedRanges=s}static create(e,t,i){return new yd(e,t,i)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var si=function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n}(si||(si={}));const Y1=si.LTR,VK=si.RTL;function t5(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const FK=t5("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),jK=t5("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),J1=Object.create(null),kr=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);J1[e]=t,J1[t]=-e}function HK(n){return n<=247?FK[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?jK[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8203?256:64336<=n&&n<=65023?4:n==8204?256:1}const qK=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Da{constructor(e,t,i){this.from=e,this.to=t,this.level=i}get dir(){return this.level%2?VK:Y1}side(e,t){return this.dir==t==e?this.to:this.from}static find(e,t,i,s){let r=-1;for(let o=0;o<e.length;o++){let l=e[o];if(l.from<=t&&l.to>=t){if(l.level==i)return o;(r<0||(s!=0?s<0?l.from<t:l.to>t:e[r].level>l.level))&&(r=o)}}if(r<0)throw new RangeError("Index out of range");return r}}const ni=[];function zK(n,e){let t=n.length,i=e==Y1?1:2,s=e==Y1?2:1;if(!n||i==1&&!qK.test(n))return n5(t);for(let o=0,l=i,a=i;o<t;o++){let c=HK(n.charCodeAt(o));c==512?c=l:c==8&&a==4&&(c=16),ni[o]=c==4?2:c,c&7&&(a=c),l=c}for(let o=0,l=i,a=i;o<t;o++){let c=ni[o];if(c==128)o<t-1&&l==ni[o+1]&&l&24?c=ni[o]=l:ni[o]=256;else if(c==64){let u=o+1;for(;u<t&&ni[u]==64;)u++;let f=o&&l==8||u<t&&ni[u]==8?a==1?1:8:256;for(let h=o;h<u;h++)ni[h]=f;o=u-1}else c==8&&a==1&&(ni[o]=1);l=c,c&7&&(a=c)}for(let o=0,l=0,a=0,c,u,f;o<t;o++)if(u=J1[c=n.charCodeAt(o)])if(u<0){for(let h=l-3;h>=0;h-=3)if(kr[h+1]==-u){let d=kr[h+2],m=d&2?i:d&4?d&1?s:i:0;m&&(ni[o]=ni[kr[h]]=m),l=h;break}}else{if(kr.length==189)break;kr[l++]=o,kr[l++]=c,kr[l++]=a}else if((f=ni[o])==2||f==1){let h=f==i;a=h?0:1;for(let d=l-3;d>=0;d-=3){let m=kr[d+2];if(m&2)break;if(h)kr[d+2]|=2;else{if(m&4)break;kr[d+2]|=4}}}for(let o=0;o<t;o++)if(ni[o]==256){let l=o+1;for(;l<t&&ni[l]==256;)l++;let a=(o?ni[o-1]:i)==1,c=(l<t?ni[l]:i)==1,u=a==c?a?1:2:i;for(let f=o;f<l;f++)ni[f]=u;o=l-1}let r=[];if(i==1)for(let o=0;o<t;){let l=o,a=ni[o++]!=1;for(;o<t&&a==(ni[o]!=1);)o++;if(a)for(let c=o;c>l;){let u=c,f=ni[--c]!=2;for(;c>l&&f==(ni[c-1]!=2);)c--;r.push(new Da(c,u,f?2:1))}else r.push(new Da(l,o,0))}else for(let o=0;o<t;){let l=o,a=ni[o++]==2;for(;o<t&&a==(ni[o]==2);)o++;r.push(new Da(l,o,a?1:2))}return r}function n5(n){return[new Da(0,n,0)]}let i5="";function GK(n,e,t,i,s){var r;let o=i.head-n.from,l=-1;if(o==0){if(!s||!n.length)return null;e[0].level!=t&&(o=e[0].side(!1,t),l=0)}else if(o==n.length){if(s)return null;let h=e[e.length-1];h.level!=t&&(o=h.side(!0,t),l=e.length-1)}l<0&&(l=Da.find(e,o,(r=i.bidiLevel)!==null&&r!==void 0?r:-1,i.assoc));let a=e[l];o==a.side(s,t)&&(a=e[l+=s?1:-1],o=a.side(!s,t));let c=s==(a.dir==t),u=Es(n.text,o,c);if(i5=n.text.slice(Math.min(o,u),Math.max(o,u)),u!=a.side(s,t))return Je.cursor(u+n.from,c?-1:1,a.level);let f=l==(s?e.length-1:0)?null:e[l+(s?1:-1)];return!f&&a.level!=t?Je.cursor(s?n.to:n.from,s?-1:1,t):f&&f.level<a.level?Je.cursor(f.side(!s,t)+n.from,s?1:-1,f.level):Je.cursor(u+n.from,s?-1:1,a.level)}const Bo="￿";class s5{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(ln.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Bo}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let s=e;;){this.findPointBefore(i,s),this.readNode(s);let r=s.nextSibling;if(r==t)break;let o=$n.get(s),l=$n.get(r);(o&&l?o.breakAfter:(o?o.breakAfter:LE(s))||LE(r)&&(s.nodeName!="BR"||s.cmIgnore))&&this.lineBreak(),s=r}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,s=this.lineSeparator?null:/\r\n?|\n/g;;){let r=-1,o=1,l;if(this.lineSeparator?(r=t.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(l=s.exec(t))&&(r=l.index,o=l[0].length),this.append(t.slice(i,r<0?t.length:r)),r<0)break;if(this.lineBreak(),o>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=o-1);i=r+o}}readNode(e){if(e.cmIgnore)return;let t=$n.get(e),i=t&&t.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let s=i.iter();!s.next().done;)s.lineBreak?this.lineBreak():this.append(s.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+Math.min(t,i.offset))}}function LE(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}class UE{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class WE extends $n{constructor(e){super(),this.view=e,this.compositionDeco=Lt.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new ws],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new qr(0,0,0,e.state.doc.length)],0)}get length(){return this.view.state.doc.length}update(e){let t=e.changedRanges;this.minWidth>0&&t.length&&(t.every(({fromA:o,toA:l})=>l<this.minWidthFrom||o>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=Lt.none:(e.transactions.length||this.dirty)&&(this.compositionDeco=XK(this.view,e.changes)),(It.ie||It.chrome)&&!this.compositionDeco.size&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let i=this.decorations,s=this.updateDeco(),r=ZK(i,s,e.changes);return t=qr.extendWithRanges(t,r),this.dirty==0&&t.length==0?!1:(this.updateInner(t,e.startState.doc.length),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let r=It.chrome||It.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,r),this.dirty=0,r&&(r.written||i.selectionRange.focusNode!=r.node)&&(this.forceSelection=!0),this.dom.style.height=""});let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let r of this.children)r instanceof Dl&&r.widget instanceof VE&&s.push(r.dom);i.updateGaps(s)}updateChildren(e,t){let i=this.childCursor(t);for(let s=e.length-1;;s--){let r=s>=0?e[s]:null;if(!r)break;let{fromA:o,toA:l,fromB:a,toB:c}=r,{content:u,breakAtStart:f,openStart:h,openEnd:d}=ub.build(this.view.state.doc,a,c,this.decorations,this.dynamicDecorationMap),{i:m,off:p}=i.findPos(l,1),{i:_,off:v}=i.findPos(o,-1);MR(this,_,v,m,p,u,f,h,d)}}updateSelection(e=!1,t=!1){if((e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange(),!(t||this.mayControlSelection()))return;let i=this.forceSelection;this.forceSelection=!1;let s=this.view.state.selection.main,r=this.domAtPos(s.anchor),o=s.empty?r:this.domAtPos(s.head);if(It.gecko&&s.empty&&KK(r)){let a=document.createTextNode("");this.view.observer.ignore(()=>r.node.insertBefore(a,r.node.childNodes[r.offset]||null)),r=o=new ss(a,0),i=!0}let l=this.view.observer.selectionRange;(i||!l.focusNode||!vd(r.node,r.offset,l.anchorNode,l.anchorOffset)||!vd(o.node,o.offset,l.focusNode,l.focusOffset))&&(this.view.observer.ignore(()=>{It.android&&It.chrome&&this.dom.contains(l.focusNode)&&xK(l.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let a=gd(this.view.root);if(a)if(s.empty){if(It.gecko){let c=YK(r.node,r.offset);if(c&&c!=3){let u=o5(r.node,r.offset,c==1?1:-1);u&&(r=new ss(u,c==1?0:u.nodeValue.length))}}a.collapse(r.node,r.offset),s.bidiLevel!=null&&l.cursorBidiLevel!=null&&(l.cursorBidiLevel=s.bidiLevel)}else if(a.extend){a.collapse(r.node,r.offset);try{a.extend(o.node,o.offset)}catch{}}else{let c=document.createRange();s.anchor>s.head&&([r,o]=[o,r]),c.setEnd(o.node,o.offset),c.setStart(r.node,r.offset),a.removeAllRanges(),a.addRange(c)}}),this.view.observer.setSelectionRange(r,o)),this.impreciseAnchor=r.precise?null:new ss(l.anchorNode,l.anchorOffset),this.impreciseHead=o.precise?null:new ss(l.focusNode,l.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let{view:e}=this,t=e.state.selection.main,i=gd(e.root),{anchorNode:s,anchorOffset:r}=e.observer.selectionRange;if(!i||!t.empty||!t.assoc||!i.modify)return;let o=ws.find(this,t.head);if(!o)return;let l=o.posAtStart;if(t.head==l||t.head==l+o.length)return;let a=this.coordsAt(t.head,-1),c=this.coordsAt(t.head,1);if(!a||!c||a.bottom>c.top)return;let u=this.domAtPos(t.head+t.assoc);i.collapse(u.node,u.offset),i.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let f=e.observer.selectionRange;e.docView.posFromDOM(f.anchorNode,f.anchorOffset)!=t.from&&i.collapse(s,r)}mayControlSelection(){let e=this.view.root.activeElement;return e==this.dom||Ch(this.dom,this.view.observer.selectionRange)&&!(e&&this.dom.contains(e))}nearest(e){for(let t=e;t;){let i=$n.get(t);if(i&&i.rootView==this)return i;t=t.parentNode}return null}posFromDOM(e,t){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,t)+i.posAtStart}domAtPos(e){let{i:t,off:i}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let s=this.children[t];if(i<s.length||s instanceof ws)break;t++,i=0}return this.children[t].domAtPos(i)}coordsAt(e,t){for(let i=this.length,s=this.children.length-1;;s--){let r=this.children[s],o=i-r.breakAfter-r.length;if(e>o||e==o&&r.type!=Un.WidgetBefore&&r.type!=Un.WidgetAfter&&(!s||t==2||this.children[s-1].breakAfter||this.children[s-1].type==Un.WidgetBefore&&t>-2))return r.coordsAt(e-o,t);i=o}}measureVisibleLineHeights(e){let t=[],{from:i,to:s}=e,r=this.view.contentDOM.clientWidth,o=r>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,a=this.view.textDirection==si.LTR;for(let c=0,u=0;u<this.children.length;u++){let f=this.children[u],h=c+f.length;if(h>s)break;if(c>=i){let d=f.dom.getBoundingClientRect();if(t.push(d.height),o){let m=f.dom.lastChild,p=m?Wu(m):[];if(p.length){let _=p[p.length-1],v=a?_.right-d.left:d.right-_.left;v>l&&(l=v,this.minWidth=r,this.minWidthFrom=c,this.minWidthTo=h)}}}c=h+f.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?si.RTL:si.LTR}measureTextSize(){for(let s of this.children)if(s instanceof ws){let r=s.measureTextSize();if(r)return r}let e=document.createElement("div"),t,i;return e.className="cm-line",e.style.width="99999px",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=Wu(e.firstChild)[0];t=e.getBoundingClientRect().height,i=s?s.width/27:7,e.remove()}),{lineHeight:t,charWidth:i}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new PR(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,s=0;;s++){let r=s==t.viewports.length?null:t.viewports[s],o=r?r.from-1:this.length;if(o>i){let l=t.lineBlockAt(o).bottom-t.lineBlockAt(i).top;e.push(Lt.replace({widget:new VE(l),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!r)break;i=r.to+1}return Lt.set(e)}updateDeco(){let e=this.view.state.facet(Fu).map((t,i)=>(this.dynamicDecorationMap[i]=typeof t=="function")?t(this.view):t);for(let t=e.length;t<e.length+3;t++)this.dynamicDecorationMap[t]=!1;return this.decorations=[...e,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let{range:t}=e,i=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),s;if(!i)return;!t.empty&&(s=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(i={left:Math.min(i.left,s.left),top:Math.min(i.top,s.top),right:Math.max(i.right,s.right),bottom:Math.max(i.bottom,s.bottom)});let r=0,o=0,l=0,a=0;for(let u of this.view.state.facet(e5).map(f=>f(this.view)))if(u){let{left:f,right:h,top:d,bottom:m}=u;f!=null&&(r=Math.max(r,f)),h!=null&&(o=Math.max(o,h)),d!=null&&(l=Math.max(l,d)),m!=null&&(a=Math.max(a,m))}let c={left:i.left-r,top:i.top-l,right:i.right+o,bottom:i.bottom+a};OK(this.view.scrollDOM,c,t.head<t.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==si.LTR)}}function KK(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}class VE extends sl{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function r5(n){let e=n.observer.selectionRange,t=e.focusNode&&o5(e.focusNode,e.focusOffset,0);if(!t)return null;let i=n.docView.nearest(t);if(!i)return null;if(i instanceof ws){let s=t;for(;s.parentNode!=i.dom;)s=s.parentNode;let r=s.previousSibling;for(;r&&!$n.get(r);)r=r.previousSibling;let o=r?$n.get(r).posAtEnd:i.posAtStart;return{from:o,to:o,node:s,text:t}}else{for(;;){let{parent:r}=i;if(!r)return null;if(r instanceof ws)break;i=r}let s=i.posAtStart;return{from:s,to:s+i.length,node:i.dom,text:t}}}function XK(n,e){let t=r5(n);if(!t)return Lt.none;let{from:i,to:s,node:r,text:o}=t,l=e.mapPos(i,1),a=Math.max(l,e.mapPos(s,-1)),{state:c}=n,u=r.nodeType==3?r.nodeValue:new s5([],c).readRange(r.firstChild,null).text;if(a-l<u.length)if(c.doc.sliceString(l,Math.min(c.doc.length,l+u.length),Bo)==u)a=l+u.length;else if(c.doc.sliceString(Math.max(0,a-u.length),a,Bo)==u)l=a-u.length;else return Lt.none;else if(c.doc.sliceString(l,a,Bo)!=u)return Lt.none;let f=$n.get(r);return f instanceof WR?f=f.widget.topView:f&&(f.parent=null),Lt.set(Lt.replace({widget:new QK(r,o,f),inclusive:!0}).range(l,a))}class QK extends sl{constructor(e,t,i){super(),this.top=e,this.text=t,this.topView=i}eq(e){return this.top==e.top&&this.text==e.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return WR}}function o5(n,e,t){for(;;){if(n.nodeType==3)return n;if(n.nodeType==1&&e>0&&t<=0)n=n.childNodes[e-1],e=Vu(n);else if(n.nodeType==1&&e<n.childNodes.length&&t>=0)n=n.childNodes[e],e=0;else return null}}function YK(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}class JK{constructor(){this.changes=[]}compareRange(e,t){X1(e,t,this.changes)}comparePoint(e,t){X1(e,t,this.changes)}}function ZK(n,e,t){let i=new JK;return In.compare(n,e,t,i),i.changes}function xK(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function $K(n,e,t=1){let i=n.charCategorizer(e),s=n.doc.lineAt(e),r=e-s.from;if(s.length==0)return Je.cursor(e);r==0?t=1:r==s.length&&(t=-1);let o=r,l=r;t<0?o=Es(s.text,r,!1):l=Es(s.text,r);let a=i(s.text.slice(o,l));for(;o>0;){let c=Es(s.text,o,!1);if(i(s.text.slice(c,o))!=a)break;o=c}for(;l<s.length;){let c=Es(s.text,l);if(i(s.text.slice(l,c))!=a)break;l=c}return Je.range(o+s.from,l+s.from)}function eX(n,e){return e.left>n?e.left-n:Math.max(0,n-e.right)}function tX(n,e){return e.top>n?e.top-n:Math.max(0,n-e.bottom)}function Up(n,e){return n.top<e.bottom-1&&n.bottom>e.top+1}function FE(n,e){return e<n.top?{top:e,left:n.left,right:n.right,bottom:n.bottom}:n}function jE(n,e){return e>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:e}:n}function Z1(n,e,t){let i,s,r,o,l=!1,a,c,u,f;for(let m=n.firstChild;m;m=m.nextSibling){let p=Wu(m);for(let _=0;_<p.length;_++){let v=p[_];s&&Up(s,v)&&(v=FE(jE(v,s.bottom),s.top));let y=eX(e,v),w=tX(t,v);if(y==0&&w==0)return m.nodeType==3?HE(m,e,t):Z1(m,e,t);if(!i||o>w||o==w&&r>y){i=m,s=v,r=y,o=w;let A=w?t<v.top?-1:1:y?e<v.left?-1:1:0;l=!A||(A>0?_<p.length-1:_>0)}y==0?t>v.bottom&&(!u||u.bottom<v.bottom)?(a=m,u=v):t<v.top&&(!f||f.top>v.top)&&(c=m,f=v):u&&Up(u,v)?u=jE(u,v.bottom):f&&Up(f,v)&&(f=FE(f,v.top))}}if(u&&u.bottom>=t?(i=a,s=u):f&&f.top<=t&&(i=c,s=f),!i)return{node:n,offset:0};let h=Math.max(s.left,Math.min(s.right,e));if(i.nodeType==3)return HE(i,h,t);if(l&&i.contentEditable!="false")return Z1(i,h,t);let d=Array.prototype.indexOf.call(n.childNodes,i)+(e>=(s.left+s.right)/2?1:0);return{node:n,offset:d}}function HE(n,e,t){let i=n.nodeValue.length,s=-1,r=1e9,o=0;for(let l=0;l<i;l++){let a=$a(n,l,l+1).getClientRects();for(let c=0;c<a.length;c++){let u=a[c];if(u.top==u.bottom)continue;o||(o=e-u.left);let f=(u.top>t?u.top-t:t-u.bottom)-1;if(u.left-1<=e&&u.right+1>=e&&f<r){let h=e>=(u.left+u.right)/2,d=h;if((It.chrome||It.gecko)&&$a(n,l).getBoundingClientRect().left==u.right&&(d=!h),f<=0)return{node:n,offset:l+(d?1:0)};s=l+(d?1:0),r=f}}}return{node:n,offset:s>-1?s:o>0?n.nodeValue.length:0}}function l5(n,e,t,i=-1){var s;let r=n.contentDOM.getBoundingClientRect(),o=r.top+n.viewState.paddingTop,l,{docHeight:a}=n.viewState,{x:c,y:u}=e,f=u-o;if(f<0)return 0;if(f>a)return n.state.doc.length;for(let w=n.defaultLineHeight/2,A=!1;l=n.elementAtHeight(f),l.type!=Un.Text;)for(;f=i>0?l.bottom+w:l.top-w,!(f>=0&&f<=a);){if(A)return t?null:0;A=!0,i=-i}u=o+f;let h=l.from;if(h<n.viewport.from)return n.viewport.from==0?0:t?null:qE(n,r,l,c,u);if(h>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:t?null:qE(n,r,l,c,u);let d=n.dom.ownerDocument,m=n.root.elementFromPoint?n.root:d,p=m.elementFromPoint(c,u);p&&!n.contentDOM.contains(p)&&(p=null),p||(c=Math.max(r.left+1,Math.min(r.right-1,c)),p=m.elementFromPoint(c,u),p&&!n.contentDOM.contains(p)&&(p=null));let _,v=-1;if(p&&((s=n.docView.nearest(p))===null||s===void 0?void 0:s.isEditable)!=!1){if(d.caretPositionFromPoint){let w=d.caretPositionFromPoint(c,u);w&&({offsetNode:_,offset:v}=w)}else if(d.caretRangeFromPoint){let w=d.caretRangeFromPoint(c,u);w&&({startContainer:_,startOffset:v}=w,(!n.contentDOM.contains(_)||It.safari&&nX(_,v,c)||It.chrome&&iX(_,v,c))&&(_=void 0))}}if(!_||!n.docView.dom.contains(_)){let w=ws.find(n.docView,h);if(!w)return f>l.top+l.height/2?l.to:l.from;({node:_,offset:v}=Z1(w.dom,c,u))}let y=n.docView.nearest(_);if(!y)return null;if(y.isWidget){let w=y.dom.getBoundingClientRect();return e.y<w.top||e.y<=w.bottom&&e.x<=(w.left+w.right)/2?y.posAtStart:y.posAtEnd}else return y.localPosFromDOM(_,v)+y.posAtStart}function qE(n,e,t,i,s){let r=Math.round((i-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&t.height>n.defaultLineHeight*1.5){let l=Math.floor((s-t.top)/n.defaultLineHeight);r+=l*n.viewState.heightOracle.lineLength}let o=n.state.sliceDoc(t.from,t.to);return t.from+U1(o,r,n.state.tabSize)}function nX(n,e,t){let i;if(n.nodeType!=3||e!=(i=n.nodeValue.length))return!1;for(let s=n.nextSibling;s;s=s.nextSibling)if(s.nodeType!=1||s.nodeName!="BR")return!1;return $a(n,i-1,i).getBoundingClientRect().left>t}function iX(n,e,t){if(e!=0)return!1;for(let s=n;;){let r=s.parentNode;if(!r||r.nodeType!=1||r.firstChild!=s)return!1;if(r.classList.contains("cm-line"))break;s=r}let i=n.nodeType==1?n.getBoundingClientRect():$a(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect();return t-i.left>5}function sX(n,e,t,i){let s=n.state.doc.lineAt(e.head),r=!i||!n.lineWrapping?null:n.coordsAtPos(e.assoc<0&&e.head>s.from?e.head-1:e.head);if(r){let a=n.dom.getBoundingClientRect(),c=n.textDirectionAt(s.from),u=n.posAtCoords({x:t==(c==si.LTR)?a.right-1:a.left+1,y:(r.top+r.bottom)/2});if(u!=null)return Je.cursor(u,t?-1:1)}let o=ws.find(n.docView,e.head),l=o?t?o.posAtEnd:o.posAtStart:t?s.to:s.from;return Je.cursor(l,t?-1:1)}function zE(n,e,t,i){let s=n.state.doc.lineAt(e.head),r=n.bidiSpans(s),o=n.textDirectionAt(s.from);for(let l=e,a=null;;){let c=GK(s,r,o,l,t),u=i5;if(!c){if(s.number==(t?n.state.doc.lines:1))return l;u=`
`,s=n.state.doc.line(s.number+(t?1:-1)),r=n.bidiSpans(s),c=Je.cursor(t?s.from:s.to)}if(a){if(!a(u))return l}else{if(!i)return c;a=i(u)}l=c}}function rX(n,e,t){let i=n.state.charCategorizer(e),s=i(t);return r=>{let o=i(r);return s==ti.Space&&(s=o),s==o}}function oX(n,e,t,i){let s=e.head,r=t?1:-1;if(s==(t?n.state.doc.length:0))return Je.cursor(s,e.assoc);let o=e.goalColumn,l,a=n.contentDOM.getBoundingClientRect(),c=n.coordsAtPos(s),u=n.documentTop;if(c)o==null&&(o=c.left-a.left),l=r<0?c.top:c.bottom;else{let d=n.viewState.lineBlockAt(s);o==null&&(o=Math.min(a.right-a.left,n.defaultCharacterWidth*(s-d.from))),l=(r<0?d.top:d.bottom)+u}let f=a.left+o,h=i??n.defaultLineHeight>>1;for(let d=0;;d+=10){let m=l+(h+d)*r,p=l5(n,{x:f,y:m},!1,r);if(m<a.top||m>a.bottom||(r<0?p<s:p>s))return Je.cursor(p,e.assoc,void 0,o)}}function Wp(n,e,t){let i=n.state.facet($R).map(s=>s(n));for(;;){let s=!1;for(let r of i)r.between(t.from-1,t.from+1,(o,l,a)=>{t.from>o&&t.from<l&&(t=e.head>t.from?Je.cursor(o,1):Je.cursor(l,-1),s=!0)});if(!s)return t}}class lX{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.mouseSelection=null;let t=(i,s)=>{this.ignoreDuringComposition(s)||s.type=="keydown"&&this.keydown(e,s)||(this.mustFlushObserver(s)&&e.observer.forceFlush(),this.runCustomHandlers(s.type,e,s)?s.preventDefault():i(e,s))};for(let i in Pi){let s=Pi[i];e.contentDOM.addEventListener(i,r=>{GE(e,r)&&t(s,r)},x1[i]),this.registeredEvents.push(i)}e.scrollDOM.addEventListener("mousedown",i=>{i.target==e.scrollDOM&&i.clientY>e.contentDOM.getBoundingClientRect().bottom&&t(Pi.mousedown,i)}),It.chrome&&It.chrome_version==102&&e.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=e.hasFocus,It.safari&&e.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e,t){var i;let s;this.customHandlers=[];for(let r of t)if(s=(i=r.update(e).spec)===null||i===void 0?void 0:i.domEventHandlers){this.customHandlers.push({plugin:r.value,handlers:s});for(let o in s)this.registeredEvents.indexOf(o)<0&&o!="scroll"&&(this.registeredEvents.push(o),e.contentDOM.addEventListener(o,l=>{GE(e,l)&&this.runCustomHandlers(o,e,l)&&l.preventDefault()}))}}runCustomHandlers(e,t,i){for(let s of this.customHandlers){let r=s.handlers[e];if(r)try{if(r.call(s.plugin,i,t)||i.defaultPrevented)return!0}catch(o){Hs(t.state,o)}}return!1}runScrollHandlers(e,t){this.lastScrollTop=e.scrollDOM.scrollTop,this.lastScrollLeft=e.scrollDOM.scrollLeft;for(let i of this.customHandlers){let s=i.handlers.scroll;if(s)try{s.call(i.plugin,t,e)}catch(r){Hs(e.state,r)}}}keydown(e,t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),t.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(It.android&&It.chrome&&!t.synthetic&&(t.keyCode==13||t.keyCode==8))return e.observer.delayAndroidKey(t.key,t.keyCode),!0;let i;return It.ios&&!t.synthetic&&!t.altKey&&!t.metaKey&&((i=a5.find(s=>s.keyCode==t.keyCode))&&!t.ctrlKey||aX.indexOf(t.key)>-1&&t.ctrlKey&&!t.shiftKey)?(this.pendingIOSKey=i||t,setTimeout(()=>this.flushIOSKey(e),250),!0):!1}flushIOSKey(e){let t=this.pendingIOSKey;return t?(this.pendingIOSKey=void 0,Ra(e.contentDOM,t.key,t.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:It.safari&&!It.ios&&Date.now()-this.compositionEndedAt<100?(this.compositionEndedAt=0,!0):!1:!1}mustFlushObserver(e){return e.type=="keydown"&&e.keyCode!=229}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const a5=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],aX="dthko",c5=[16,17,18,20,91,92,224,225];function Xf(n){return n*.7+8}class cX{constructor(e,t,i,s){this.view=e,this.style=i,this.mustSelect=s,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParent=RK(e.contentDOM);let r=e.contentDOM.ownerDocument;r.addEventListener("mousemove",this.move=this.move.bind(this)),r.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(ln.allowMultipleSelections)&&uX(e,t),this.dragMove=fX(e,t),this.dragging=hX(e,t)&&d5(t)==1?null:!1}start(e){this.dragging===!1&&(e.preventDefault(),this.select(e))}move(e){var t;if(e.buttons==0)return this.destroy();if(this.dragging!==!1)return;this.select(this.lastEvent=e);let i=0,s=0,r=((t=this.scrollParent)===null||t===void 0?void 0:t.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight};e.clientX<=r.left?i=-Xf(r.left-e.clientX):e.clientX>=r.right&&(i=Xf(e.clientX-r.right)),e.clientY<=r.top?s=-Xf(r.top-e.clientY):e.clientY>=r.bottom&&(s=Xf(e.clientY-r.bottom)),this.setScrollSpeed(i,s)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}select(e){let t=this.style.get(e,this.extend,this.multiple);(this.mustSelect||!t.eq(this.view.state.selection)||t.main.assoc!=this.view.state.selection.main.assoc)&&this.view.dispatch({selection:t,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function uX(n,e){let t=n.state.facet(zR);return t.length?t[0](e):It.mac?e.metaKey:e.ctrlKey}function fX(n,e){let t=n.state.facet(GR);return t.length?t[0](e):It.mac?!e.altKey:!e.ctrlKey}function hX(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let i=gd(n.root);if(!i||i.rangeCount==0)return!0;let s=i.getRangeAt(0).getClientRects();for(let r=0;r<s.length;r++){let o=s[r];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function GE(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,i;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(i=$n.get(t))&&i.ignoreEvent(e))return!1;return!0}const Pi=Object.create(null),x1=Object.create(null),u5=It.ie&&It.ie_version<15||It.ios&&It.webkit_version<604;function dX(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),f5(n,t.value)},50)}function f5(n,e){let{state:t}=n,i,s=1,r=t.toText(e),o=r.lines==t.selection.ranges.length;if($1!=null&&t.selection.ranges.every(a=>a.empty)&&$1==r.toString()){let a=-1;i=t.changeByRange(c=>{let u=t.doc.lineAt(c.from);if(u.from==a)return{range:c};a=u.from;let f=t.toText((o?r.line(s++).text:e)+t.lineBreak);return{changes:{from:u.from,insert:f},range:Je.cursor(c.from+f.length)}})}else o?i=t.changeByRange(a=>{let c=r.line(s++);return{changes:{from:a.from,to:a.to,insert:c.text},range:Je.cursor(a.from+c.length)}}):i=t.replaceSelection(r);n.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}Pi.keydown=(n,e)=>{n.inputState.setSelectionOrigin("select"),e.keyCode==27?n.inputState.lastEscPress=Date.now():c5.indexOf(e.keyCode)<0&&(n.inputState.lastEscPress=0)};Pi.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};Pi.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};x1.touchstart=x1.touchmove={passive:!0};Pi.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return;let t=null;for(let i of n.state.facet(KR))if(t=i(n,e),t)break;if(!t&&e.button==0&&(t=gX(n,e)),t){let i=n.root.activeElement!=n.contentDOM;n.inputState.startMouseSelection(new cX(n,e,t,i)),i&&n.observer.ignore(()=>DR(n.contentDOM)),n.inputState.mouseSelection&&n.inputState.mouseSelection.start(e)}};function KE(n,e,t,i){if(i==1)return Je.cursor(e,t);if(i==2)return $K(n.state,e,t);{let s=ws.find(n.docView,e),r=n.state.doc.lineAt(s?s.posAtEnd:e),o=s?s.posAtStart:r.from,l=s?s.posAtEnd:r.to;return l<n.state.doc.length&&l==r.to&&l++,Je.range(o,l)}}let h5=(n,e)=>n>=e.top&&n<=e.bottom,XE=(n,e,t)=>h5(e,t)&&n>=t.left&&n<=t.right;function mX(n,e,t,i){let s=ws.find(n.docView,e);if(!s)return 1;let r=e-s.posAtStart;if(r==0)return 1;if(r==s.length)return-1;let o=s.coordsAt(r,-1);if(o&&XE(t,i,o))return-1;let l=s.coordsAt(r,1);return l&&XE(t,i,l)?1:o&&h5(i,o)?-1:1}function QE(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:mX(n,t,e.clientX,e.clientY)}}const pX=It.ie&&It.ie_version<=11;let YE=null,JE=0,ZE=0;function d5(n){if(!pX)return n.detail;let e=YE,t=ZE;return YE=n,ZE=Date.now(),JE=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(JE+1)%3:1}function gX(n,e){let t=QE(n,e),i=d5(e),s=n.state.selection;return{update(r){r.docChanged&&(t.pos=r.changes.mapPos(t.pos),s=s.map(r.changes))},get(r,o,l){let a=QE(n,r),c=KE(n,a.pos,a.bias,i);if(t.pos!=a.pos&&!o){let u=KE(n,t.pos,t.bias,i),f=Math.min(u.from,c.from),h=Math.max(u.to,c.to);c=f<c.from?Je.range(f,h):Je.range(h,f)}return o?s.replaceRange(s.main.extend(c.from,c.to)):l&&s.ranges.length>1&&s.ranges.some(u=>u.eq(c))?vX(s,c):l?s.addRange(c):Je.create([c])}}}function vX(n,e){for(let t=0;;t++)if(n.ranges[t].eq(e))return Je.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}Pi.dragstart=(n,e)=>{let{selection:{main:t}}=n.state,{mouseSelection:i}=n.inputState;i&&(i.dragging=t),e.dataTransfer&&(e.dataTransfer.setData("Text",n.state.sliceDoc(t.from,t.to)),e.dataTransfer.effectAllowed="copyMove")};function xE(n,e,t,i){if(!t)return;let s=n.posAtCoords({x:e.clientX,y:e.clientY},!1);e.preventDefault();let{mouseSelection:r}=n.inputState,o=i&&r&&r.dragging&&r.dragMove?{from:r.dragging.from,to:r.dragging.to}:null,l={from:s,insert:t},a=n.state.changes(o?[o,l]:l);n.focus(),n.dispatch({changes:a,selection:{anchor:a.mapPos(s,-1),head:a.mapPos(s,1)},userEvent:o?"move.drop":"input.drop"})}Pi.drop=(n,e)=>{if(!e.dataTransfer)return;if(n.state.readOnly)return e.preventDefault();let t=e.dataTransfer.files;if(t&&t.length){e.preventDefault();let i=Array(t.length),s=0,r=()=>{++s==t.length&&xE(n,e,i.filter(o=>o!=null).join(n.state.lineBreak),!1)};for(let o=0;o<t.length;o++){let l=new FileReader;l.onerror=r,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(i[o]=l.result),r()},l.readAsText(t[o])}}else xE(n,e,e.dataTransfer.getData("Text"),!0)};Pi.paste=(n,e)=>{if(n.state.readOnly)return e.preventDefault();n.observer.flush();let t=u5?null:e.clipboardData;t?(f5(n,t.getData("text/plain")),e.preventDefault()):dX(n)};function bX(n,e){let t=n.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),n.focus()},50)}function _X(n){let e=[],t=[],i=!1;for(let s of n.selection.ranges)s.empty||(e.push(n.sliceDoc(s.from,s.to)),t.push(s));if(!e.length){let s=-1;for(let{from:r}of n.selection.ranges){let o=n.doc.lineAt(r);o.number>s&&(e.push(o.text),t.push({from:o.from,to:Math.min(n.doc.length,o.to+1)})),s=o.number}i=!0}return{text:e.join(n.lineBreak),ranges:t,linewise:i}}let $1=null;Pi.copy=Pi.cut=(n,e)=>{let{text:t,ranges:i,linewise:s}=_X(n.state);if(!t&&!s)return;$1=s?t:null;let r=u5?null:e.clipboardData;r?(e.preventDefault(),r.clearData(),r.setData("text/plain",t)):bX(n,t),e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"})};const m5=Eo.define();function p5(n,e){let t=[];for(let i of n.facet(YR)){let s=i(n,e);s&&t.push(s)}return t?n.update({effects:t,annotations:m5.of(!0)}):null}function g5(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let t=p5(n.state,e);t?n.dispatch(t):n.update([])}},10)}Pi.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),g5(n)};Pi.blur=n=>{n.observer.clearSelectionRange(),g5(n)};Pi.compositionstart=Pi.compositionupdate=n=>{n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0)};Pi.compositionend=n=>{n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionFirstChange=null,It.chrome&&It.android&&n.observer.flushSoon(),setTimeout(()=>{n.inputState.composing<0&&n.docView.compositionDeco.size&&n.update([])},50)};Pi.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};Pi.beforeinput=(n,e)=>{var t;let i;if(It.chrome&&It.android&&(i=a5.find(s=>s.inputType==e.inputType))&&(n.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let s=((t=window.visualViewport)===null||t===void 0?void 0:t.height)||0;setTimeout(()=>{var r;(((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0)>s+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}};const $E=["pre-wrap","normal","pre-line","break-spaces"];class yX{constructor(e){this.lineWrapping=e,this.doc=Tn.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return $E.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let s=e[i];s<0?i++:this.heightSamples[Math.floor(s*10)]||(t=!0,this.heightSamples[Math.floor(s*10)]=!0)}return t}refresh(e,t,i,s,r){let o=$E.indexOf(e)>-1,l=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=o;if(this.lineWrapping=o,this.lineHeight=t,this.charWidth=i,this.lineLength=s,l){this.heightSamples={};for(let a=0;a<r.length;a++){let c=r[a];c<0?a++:this.heightSamples[Math.floor(c*10)]=!0}}return l}}class SX{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class to{constructor(e,t,i,s,r){this.from=e,this.length=t,this.top=i,this.height=s,this.type=r}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(e){let t=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(e.type)?e.type:[e]);return new to(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var Qn=function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n}(Qn||(Qn={}));const kh=.001;class Ts{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>kh&&(e.heightChanged=!0),this.height=t)}replace(e,t,i){return Ts.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,s){let r=this,o=i.doc;for(let l=s.length-1;l>=0;l--){let{fromA:a,toA:c,fromB:u,toB:f}=s[l],h=r.lineAt(a,Qn.ByPosNoHeight,i.setDoc(t),0,0),d=h.to>=c?h:r.lineAt(c,Qn.ByPosNoHeight,i,0,0);for(f+=d.to-c,c=d.to;l>0&&h.from<=s[l-1].toA;)a=s[l-1].fromA,u=s[l-1].fromB,l--,a<h.from&&(h=r.lineAt(a,Qn.ByPosNoHeight,i,0,0));u+=h.from-a,a=h.from;let m=hb.build(i.setDoc(o),e,u,f);r=r.replace(a,c,m)}return r.updateHeight(i,0)}static empty(){return new Us(0,0)}static of(e){if(e.length==1)return e[0];let t=0,i=e.length,s=0,r=0;for(;;)if(t==i)if(s>r*2){let l=e[t-1];l.break?e.splice(--t,1,l.left,null,l.right):e.splice(--t,1,l.left,l.right),i+=1+l.break,s-=l.size}else if(r>s*2){let l=e[i];l.break?e.splice(i,1,l.left,null,l.right):e.splice(i,1,l.left,l.right),i+=2+l.break,r-=l.size}else break;else if(s<r){let l=e[t++];l&&(s+=l.size)}else{let l=e[--i];l&&(r+=l.size)}let o=0;return e[t-1]==null?(o=1,t--):e[t]==null&&(o=1,i++),new EX(Ts.of(e.slice(0,t)),o,Ts.of(e.slice(i)))}}Ts.prototype.size=1;class v5 extends Ts{constructor(e,t,i){super(e,t),this.type=i}blockAt(e,t,i,s){return new to(s,this.length,i,this.height,this.type)}lineAt(e,t,i,s,r){return this.blockAt(0,i,s,r)}forEachLine(e,t,i,s,r,o){e<=r+this.length&&t>=r&&o(this.blockAt(0,i,s,r))}updateHeight(e,t=0,i=!1,s){return s&&s.from<=t&&s.more&&this.setHeight(e,s.heights[s.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Us extends v5{constructor(e,t){super(e,t,Un.Text),this.collapsed=0,this.widgetHeight=0}replace(e,t,i){let s=i[0];return i.length==1&&(s instanceof Us||s instanceof zi&&s.flags&4)&&Math.abs(this.length-s.length)<10?(s instanceof zi?s=new Us(s.length,this.height):s.height=this.height,this.outdated||(s.outdated=!1),s):Ts.of(i)}updateHeight(e,t=0,i=!1,s){return s&&s.from<=t&&s.more?this.setHeight(e,s.heights[s.index++]):(i||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class zi extends Ts{constructor(e){super(e,0)}heightMetrics(e,t){let i=e.doc.lineAt(t).number,s=e.doc.lineAt(t+this.length).number,r=s-i+1,o,l=0;if(e.lineWrapping){let a=Math.min(this.height,e.lineHeight*r);o=a/r,l=(this.height-a)/(this.length-r-1)}else o=this.height/r;return{firstLine:i,lastLine:s,perLine:o,perChar:l}}blockAt(e,t,i,s){let{firstLine:r,lastLine:o,perLine:l,perChar:a}=this.heightMetrics(t,s);if(t.lineWrapping){let c=s+Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length),u=t.doc.lineAt(c),f=l+u.length*a,h=Math.max(i,e-f/2);return new to(u.from,u.length,h,f,Un.Text)}else{let c=Math.max(0,Math.min(o-r,Math.floor((e-i)/l))),{from:u,length:f}=t.doc.line(r+c);return new to(u,f,i+l*c,l,Un.Text)}}lineAt(e,t,i,s,r){if(t==Qn.ByHeight)return this.blockAt(e,i,s,r);if(t==Qn.ByPosNoHeight){let{from:d,to:m}=i.doc.lineAt(e);return new to(d,m-d,0,0,Un.Text)}let{firstLine:o,perLine:l,perChar:a}=this.heightMetrics(i,r),c=i.doc.lineAt(e),u=l+c.length*a,f=c.number-o,h=s+l*f+a*(c.from-r-f);return new to(c.from,c.length,Math.max(s,Math.min(h,s+this.height-u)),u,Un.Text)}forEachLine(e,t,i,s,r,o){e=Math.max(e,r),t=Math.min(t,r+this.length);let{firstLine:l,perLine:a,perChar:c}=this.heightMetrics(i,r);for(let u=e,f=s;u<=t;){let h=i.doc.lineAt(u);if(u==e){let m=h.number-l;f+=a*m+c*(e-r-m)}let d=a+c*h.length;o(new to(h.from,h.length,f,d,Un.Text)),f+=d,u=h.to+1}}replace(e,t,i){let s=this.length-t;if(s>0){let r=i[i.length-1];r instanceof zi?i[i.length-1]=new zi(r.length+s):i.push(null,new zi(s-1))}if(e>0){let r=i[0];r instanceof zi?i[0]=new zi(e+r.length):i.unshift(new zi(e-1),null)}return Ts.of(i)}decomposeLeft(e,t){t.push(new zi(e-1),null)}decomposeRight(e,t){t.push(null,new zi(this.length-e-1))}updateHeight(e,t=0,i=!1,s){let r=t+this.length;if(s&&s.from<=t+this.length&&s.more){let o=[],l=Math.max(t,s.from),a=-1;for(s.from>t&&o.push(new zi(s.from-t-1).updateHeight(e,t));l<=r&&s.more;){let u=e.doc.lineAt(l).length;o.length&&o.push(null);let f=s.heights[s.index++];a==-1?a=f:Math.abs(f-a)>=kh&&(a=-2);let h=new Us(u,f);h.outdated=!1,o.push(h),l+=u+1}l<=r&&o.push(null,new zi(r-l).updateHeight(e,l));let c=Ts.of(o);return(a<0||Math.abs(c.height-this.height)>=kh||Math.abs(a-this.heightMetrics(e,t).perLine)>=kh)&&(e.heightChanged=!0),c}else(i||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class EX extends Ts{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,t,i,s){let r=i+this.left.height;return e<r?this.left.blockAt(e,t,i,s):this.right.blockAt(e,t,r,s+this.left.length+this.break)}lineAt(e,t,i,s,r){let o=s+this.left.height,l=r+this.left.length+this.break,a=t==Qn.ByHeight?e<o:e<l,c=a?this.left.lineAt(e,t,i,s,r):this.right.lineAt(e,t,i,o,l);if(this.break||(a?c.to<l:c.from>l))return c;let u=t==Qn.ByPosNoHeight?Qn.ByPosNoHeight:Qn.ByPos;return a?c.join(this.right.lineAt(l,u,i,o,l)):this.left.lineAt(l,u,i,s,r).join(c)}forEachLine(e,t,i,s,r,o){let l=s+this.left.height,a=r+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,t,i,s,r,o),t>=a&&this.right.forEachLine(e,t,i,l,a,o);else{let c=this.lineAt(a,Qn.ByPos,i,s,r);e<c.from&&this.left.forEachLine(e,c.from-1,i,s,r,o),c.to>=e&&c.from<=t&&o(c),t>c.to&&this.right.forEachLine(c.to+1,t,i,l,a,o)}}replace(e,t,i){let s=this.left.length+this.break;if(t<s)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-s,t-s,i));let r=[];e>0&&this.decomposeLeft(e,r);let o=r.length;for(let l of i)r.push(l);if(e>0&&ew(r,o-1),t<this.length){let l=r.length;this.decomposeRight(t,r),ew(r,l)}return Ts.of(r)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,s=i+this.break;if(e>=s)return this.right.decomposeRight(e-s,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<s&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Ts.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,s){let{left:r,right:o}=this,l=t+r.length+this.break,a=null;return s&&s.from<=t+r.length&&s.more?a=r=r.updateHeight(e,t,i,s):r.updateHeight(e,t,i),s&&s.from<=l+o.length&&s.more?a=o=o.updateHeight(e,l,i,s):o.updateHeight(e,l,i),a?this.balanced(r,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function ew(n,e){let t,i;n[e]==null&&(t=n[e-1])instanceof zi&&(i=n[e+1])instanceof zi&&n.splice(e-1,3,new zi(t.length+1+i.length))}const wX=5;class hb{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let i=Math.min(t,this.lineEnd),s=this.nodes[this.nodes.length-1];s instanceof Us?s.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new Us(i-this.pos,-1)),this.writtenTo=i,t>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let s=i.widget?i.widget.estimatedHeight:0;s<0&&(s=this.oracle.lineHeight);let r=t-e;i.block?this.addBlock(new v5(r,s,i.type)):(r||s>=wX)&&this.addLineDeco(s,r)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Us(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let i=new zi(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Us)return e;let t=new Us(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine(),e.type==Un.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,e.type!=Un.WidgetBefore&&(this.covering=e)}addLineDeco(e,t){let i=this.ensureLine();i.length+=t,i.collapsed+=t,i.widgetHeight=Math.max(i.widgetHeight,e),this.writtenTo=this.pos=this.pos+t}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof Us)&&!this.isCovered?this.nodes.push(new Us(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let s of this.nodes)s instanceof Us&&s.updateHeight(this.oracle,i),i+=s?s.length:1;return this.nodes}static build(e,t,i,s){let r=new hb(i,e);return In.spans(t,i,s,r,0),r.finish(i)}}function AX(n,e,t){let i=new CX;return In.compare(n,e,t,i,0),i.changes}class CX{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,s){(e<t||i&&i.heightRelevant||s&&s.heightRelevant)&&X1(e,t,this.changes,5)}}function kX(n,e){let t=n.getBoundingClientRect(),i=n.ownerDocument,s=i.defaultView||window,r=Math.max(0,t.left),o=Math.min(s.innerWidth,t.right),l=Math.max(0,t.top),a=Math.min(s.innerHeight,t.bottom);for(let c=n.parentNode;c&&c!=i.body;)if(c.nodeType==1){let u=c,f=window.getComputedStyle(u);if((u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth)&&f.overflow!="visible"){let h=u.getBoundingClientRect();r=Math.max(r,h.left),o=Math.min(o,h.right),l=Math.max(l,h.top),a=c==n.parentNode?h.bottom:Math.min(a,h.bottom)}c=f.position=="absolute"||f.position=="fixed"?u.offsetParent:u.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:r-t.left,right:Math.max(r,o)-t.left,top:l-(t.top+e),bottom:Math.max(l,a)-(t.top+e)}}function TX(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class Vp{constructor(e,t,i){this.from=e,this.to=t,this.size=i}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let s=e[i],r=t[i];if(s.from!=r.from||s.to!=r.to||s.size!=r.size)return!1}return!0}draw(e){return Lt.replace({widget:new IX(this.size,e)}).range(this.from,this.to)}}class IX extends sl{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class tw{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scaler=nw,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=si.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(fb).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new yX(t),this.stateDeco=e.facet(Fu).filter(i=>typeof i!="function"),this.heightMap=Ts.empty().applyChanges(this.stateDeco,Tn.empty,this.heightOracle.setDoc(e.doc),[new qr(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Lt.set(this.lineGaps.map(i=>i.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let s=i?t.head:t.anchor;if(!e.some(({from:r,to:o})=>s>=r&&s<=o)){let{from:r,to:o}=this.lineBlockAt(s);e.push(new Qf(r,o))}}this.viewports=e.sort((i,s)=>i.from-s.from),this.scaler=this.heightMap.height<=7e6?nw:new DX(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:Kc(e,this.scaler))})}update(e,t=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(Fu).filter(c=>typeof c!="function");let s=e.changedRanges,r=qr.extendWithRanges(s,AX(i,this.stateDeco,e?e.changes:Oi.empty(this.state.doc.length))),o=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),r),this.heightMap.height!=o&&(e.flags|=2);let l=r.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<l.from||t.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,t));let a=!e.changes.empty||e.flags&2||l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,this.updateForViewport(),a&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>2e3<<1)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(ZR)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,i=window.getComputedStyle(t),s=this.heightOracle,r=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?si.RTL:si.LTR;let o=this.heightOracle.mustRefreshForWrapping(r),l=t.getBoundingClientRect(),a=o||this.mustMeasureContent||this.contentDOMHeight!=l.height;this.contentDOMHeight=l.height,this.mustMeasureContent=!1;let c=0,u=0,f=parseInt(i.paddingTop)||0,h=parseInt(i.paddingBottom)||0;(this.paddingTop!=f||this.paddingBottom!=h)&&(this.paddingTop=f,this.paddingBottom=h,c|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(s.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,c|=8);let d=(this.printing?TX:kX)(t,this.paddingTop),m=d.top-this.pixelViewport.top,p=d.bottom-this.pixelViewport.bottom;this.pixelViewport=d;let _=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(_!=this.inView&&(this.inView=_,_&&(a=!0)),!this.inView&&!this.scrollTarget)return 0;let v=l.width;if((this.contentDOMWidth!=v||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=l.width,this.editorHeight=e.scrollDOM.clientHeight,c|=8),a){let w=e.docView.measureVisibleLineHeights(this.viewport);if(s.mustRefreshForHeights(w)&&(o=!0),o||s.lineWrapping&&Math.abs(v-this.contentDOMWidth)>s.charWidth){let{lineHeight:A,charWidth:E}=e.docView.measureTextSize();o=A>0&&s.refresh(r,A,E,v/E,w),o&&(e.docView.minWidth=0,c|=8)}m>0&&p>0?u=Math.max(m,p):m<0&&p<0&&(u=Math.min(m,p)),s.heightChanged=!1;for(let A of this.viewports){let E=A.from==this.viewport.from?w:e.docView.measureVisibleLineHeights(A);this.heightMap=(o?Ts.empty().applyChanges(this.stateDeco,Tn.empty,this.heightOracle,[new qr(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(s,0,o,new SX(A.from,E))}s.heightChanged&&(c|=2)}let y=!this.viewportIsAppropriate(this.viewport,u)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return y&&(this.viewport=this.getViewport(u,this.scrollTarget)),this.updateForViewport(),(c&2||y)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>2e3<<1)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),c|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),c}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),s=this.heightMap,r=this.heightOracle,{visibleTop:o,visibleBottom:l}=this,a=new Qf(s.lineAt(o-i*1e3,Qn.ByHeight,r,0,0).from,s.lineAt(l+(1-i)*1e3,Qn.ByHeight,r,0,0).to);if(t){let{head:c}=t.range;if(c<a.from||c>a.to){let u=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),f=s.lineAt(c,Qn.ByPos,r,0,0),h;t.y=="center"?h=(f.top+f.bottom)/2-u/2:t.y=="start"||t.y=="nearest"&&c<a.from?h=f.top:h=f.bottom-u,a=new Qf(s.lineAt(h-1e3/2,Qn.ByHeight,r,0,0).from,s.lineAt(h+u+1e3/2,Qn.ByHeight,r,0,0).to)}}return a}mapViewport(e,t){let i=t.mapPos(e.from,-1),s=t.mapPos(e.to,1);return new Qf(this.heightMap.lineAt(i,Qn.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(s,Qn.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){if(!this.inView)return!0;let{top:s}=this.heightMap.lineAt(e,Qn.ByPos,this.heightOracle,0,0),{bottom:r}=this.heightMap.lineAt(t,Qn.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:l}=this;return(e==0||s<=o-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||r>=l+Math.max(10,Math.min(i,250)))&&s>o-2*1e3&&r<l+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let s of e)t.touchesRange(s.from,s.to)||i.push(new Vp(t.mapPos(s.from),t.mapPos(s.to),s.size));return i}ensureLineGaps(e,t){let i=this.heightOracle.lineWrapping,s=i?1e4:2e3,r=s>>1,o=s<<1;if(this.defaultTextDirection!=si.LTR&&!i)return[];let l=[],a=(c,u,f,h)=>{if(u-c<r)return;let d=this.state.selection.main,m=[d.from];d.empty||m.push(d.to);for(let _ of m)if(_>c&&_<u){a(c,_-10,f,h),a(_+10,u,f,h);return}let p=RX(e,_=>_.from>=f.from&&_.to<=f.to&&Math.abs(_.from-c)<r&&Math.abs(_.to-u)<r&&!m.some(v=>_.from<v&&_.to>v));if(!p){if(u<f.to&&t&&i&&t.visibleRanges.some(_=>_.from<=u&&_.to>=u)){let _=t.moveToLineBoundary(Je.cursor(u),!1,!0).head;_>c&&(u=_)}p=new Vp(c,u,this.gapSize(f,c,u,h))}l.push(p)};for(let c of this.viewportLines){if(c.length<o)continue;let u=OX(c.from,c.to,this.stateDeco);if(u.total<o)continue;let f=this.scrollTarget?this.scrollTarget.range.head:null,h,d;if(i){let m=s/this.heightOracle.lineLength*this.heightOracle.lineHeight,p,_;if(f!=null){let v=Jf(u,f),y=((this.visibleBottom-this.visibleTop)/2+m)/c.height;p=v-y,_=v+y}else p=(this.visibleTop-c.top-m)/c.height,_=(this.visibleBottom-c.top+m)/c.height;h=Yf(u,p),d=Yf(u,_)}else{let m=u.total*this.heightOracle.charWidth,p=s*this.heightOracle.charWidth,_,v;if(f!=null){let y=Jf(u,f),w=((this.pixelViewport.right-this.pixelViewport.left)/2+p)/m;_=y-w,v=y+w}else _=(this.pixelViewport.left-p)/m,v=(this.pixelViewport.right+p)/m;h=Yf(u,_),d=Yf(u,v)}h>c.from&&a(c.from,h,c,u),d<c.to&&a(d,c.to,c,u)}return l}gapSize(e,t,i,s){let r=Jf(s,i)-Jf(s,t);return this.heightOracle.lineWrapping?e.height*r:s.total*this.heightOracle.charWidth*r}updateLineGaps(e){Vp.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Lt.set(e.map(t=>t.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];In.spans(e,this.viewport.from,this.viewport.to,{span(s,r){t.push({from:s,to:r})},point(){}},20);let i=t.length!=this.visibleRanges.length||this.visibleRanges.some((s,r)=>s.from!=t[r].from||s.to!=t[r].to);return this.visibleRanges=t,i?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||Kc(this.heightMap.lineAt(e,Qn.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return Kc(this.heightMap.lineAt(this.scaler.fromDOM(e),Qn.ByHeight,this.heightOracle,0,0),this.scaler)}elementAtHeight(e){return Kc(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Qf{constructor(e,t){this.from=e,this.to=t}}function OX(n,e,t){let i=[],s=n,r=0;return In.spans(t,n,e,{span(){},point(o,l){o>s&&(i.push({from:s,to:o}),r+=o-s),s=l}},20),s<e&&(i.push({from:s,to:e}),r+=e-s),{total:r,ranges:i}}function Yf({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let i=Math.floor(n*t);for(let s=0;;s++){let{from:r,to:o}=e[s],l=o-r;if(i<=l)return r+i;i-=l}}function Jf(n,e){let t=0;for(let{from:i,to:s}of n.ranges){if(e<=s){t+=e-i;break}t+=s-i}return t/n.total}function RX(n,e){for(let t of n)if(e(t))return t}const nw={toDOM(n){return n},fromDOM(n){return n},scale:1};class DX{constructor(e,t,i){let s=0,r=0,o=0;this.viewports=i.map(({from:l,to:a})=>{let c=t.lineAt(l,Qn.ByPos,e,0,0).top,u=t.lineAt(a,Qn.ByPos,e,0,0).bottom;return s+=u-c,{from:l,to:a,top:c,bottom:u,domTop:0,domBottom:0}}),this.scale=(7e6-s)/(t.height-s);for(let l of this.viewports)l.domTop=o+(l.top-r)*this.scale,o=l.domBottom=l.domTop+(l.bottom-l.top),r=l.bottom}toDOM(e){for(let t=0,i=0,s=0;;t++){let r=t<this.viewports.length?this.viewports[t]:null;if(!r||e<r.top)return s+(e-i)*this.scale;if(e<=r.bottom)return r.domTop+(e-r.top);i=r.bottom,s=r.domBottom}}fromDOM(e){for(let t=0,i=0,s=0;;t++){let r=t<this.viewports.length?this.viewports[t]:null;if(!r||e<r.domTop)return i+(e-s)/this.scale;if(e<=r.domBottom)return r.top+(e-r.domTop);i=r.bottom,s=r.domBottom}}}function Kc(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),i=e.toDOM(n.bottom);return new to(n.from,n.length,t,i-t,Array.isArray(n.type)?n.type.map(s=>Kc(s,e)):n.type)}const Zf=Tt.define({combine:n=>n.join(" ")}),e0=Tt.define({combine:n=>n.indexOf(!0)>-1}),t0=xo.newName(),b5=xo.newName(),_5=xo.newName(),y5={"&light":"."+b5,"&dark":"."+_5};function n0(n,e,t){return new xo(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,s=>{if(s=="&")return n;if(!t||!t[s])throw new RangeError(`Unsupported selector: ${s}`);return t[s]}):n+" "+i}})}const NX=n0("."+t0,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},y5);class PX{constructor(e,t,i,s){this.typeOver=s,this.bounds=null,this.text="";let{impreciseHead:r,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,i,0))){let l=r||o?[]:BX(e),a=new s5(l,e.state);a.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=a.text,this.newSel=LX(l,this.bounds.from)}else{let l=e.observer.selectionRange,a=r&&r.node==l.focusNode&&r.offset==l.focusOffset||!xa(e.contentDOM,l.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(l.focusNode,l.focusOffset),c=o&&o.node==l.anchorNode&&o.offset==l.anchorOffset||!xa(e.contentDOM,l.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(l.anchorNode,l.anchorOffset);this.newSel=Je.single(c,a)}}}function S5(n,e){let t,{newSel:i}=e,s=n.state.selection.main;if(e.bounds){let{from:r,to:o}=e.bounds,l=s.from,a=null;(n.inputState.lastKeyCode===8&&n.inputState.lastKeyTime>Date.now()-100||It.android&&e.text.length<o-r)&&(l=s.to,a="end");let c=MX(n.state.doc.sliceString(r,o,Bo),e.text,l-r,a);c&&(It.chrome&&n.inputState.lastKeyCode==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==Bo+Bo&&c.toB--,t={from:r+c.from,to:r+c.toA,insert:Tn.of(e.text.slice(c.from,c.toB).split(Bo))})}else i&&(!n.hasFocus&&n.state.facet(zm)||i.main.eq(s))&&(i=null);if(!t&&!i)return!1;if(!t&&e.typeOver&&!s.empty&&i&&i.main.empty?t={from:s.from,to:s.to,insert:n.state.doc.slice(s.from,s.to)}:t&&t.from>=s.from&&t.to<=s.to&&(t.from!=s.from||t.to!=s.to)&&s.to-s.from-(t.to-t.from)<=4?t={from:s.from,to:s.to,insert:n.state.doc.slice(s.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,s.to))}:(It.mac||It.android)&&t&&t.from==t.to&&t.from==s.head-1&&/^\. ?$/.test(t.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(i&&t.insert.length==2&&(i=Je.single(i.main.anchor-1,i.main.head-1)),t={from:s.from,to:s.to,insert:Tn.of([" "])}):It.chrome&&t&&t.from==t.to&&t.from==s.head&&t.insert.toString()==`
 `&&n.lineWrapping&&(i&&(i=Je.single(i.main.anchor-1,i.main.head-1)),t={from:s.from,to:s.to,insert:Tn.of([" "])}),t){let r=n.state;if(It.ios&&n.inputState.flushIOSKey(n)||It.android&&(t.from==s.from&&t.to==s.to&&t.insert.length==1&&t.insert.lines==2&&Ra(n.contentDOM,"Enter",13)||t.from==s.from-1&&t.to==s.to&&t.insert.length==0&&Ra(n.contentDOM,"Backspace",8)||t.from==s.from&&t.to==s.to+1&&t.insert.length==0&&Ra(n.contentDOM,"Delete",46)))return!0;let o=t.insert.toString();if(n.state.facet(QR).some(c=>c(n,t.from,t.to,o)))return!0;n.inputState.composing>=0&&n.inputState.composing++;let l;if(t.from>=s.from&&t.to<=s.to&&t.to-t.from>=(s.to-s.from)/3&&(!i||i.main.empty&&i.main.from==t.from+t.insert.length)&&n.inputState.composing<0){let c=s.from<t.from?r.sliceDoc(s.from,t.from):"",u=s.to>t.to?r.sliceDoc(t.to,s.to):"";l=r.replaceSelection(n.state.toText(c+t.insert.sliceString(0,void 0,n.state.lineBreak)+u))}else{let c=r.changes(t),u=i&&!r.selection.main.eq(i.main)&&i.main.to<=c.newLength?i.main:void 0;if(r.selection.ranges.length>1&&n.inputState.composing>=0&&t.to<=s.to&&t.to>=s.to-10){let f=n.state.sliceDoc(t.from,t.to),h=r5(n)||n.state.doc.lineAt(s.head),d=s.to-t.to,m=s.to-s.from;l=r.changeByRange(p=>{if(p.from==s.from&&p.to==s.to)return{changes:c,range:u||p.map(c)};let _=p.to-d,v=_-f.length;if(p.to-p.from!=m||n.state.sliceDoc(v,_)!=f||h&&p.to>=h.from&&p.from<=h.to)return{range:p};let y=r.changes({from:v,to:_,insert:t.insert}),w=p.to-s.to;return{changes:y,range:u?Je.range(Math.max(0,u.anchor+w),Math.max(0,u.head+w)):p.map(y)}})}else l={changes:c,selection:u&&r.selection.replaceRange(u)}}let a="input.type";return n.composing&&(a+=".compose",n.inputState.compositionFirstChange&&(a+=".start",n.inputState.compositionFirstChange=!1)),n.dispatch(l,{scrollIntoView:!0,userEvent:a}),!0}else if(i&&!i.main.eq(s)){let r=!1,o="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(r=!0),o=n.inputState.lastSelectionOrigin),n.dispatch({selection:i,scrollIntoView:r,userEvent:o}),!0}else return!1}function MX(n,e,t,i){let s=Math.min(n.length,e.length),r=0;for(;r<s&&n.charCodeAt(r)==e.charCodeAt(r);)r++;if(r==s&&n.length==e.length)return null;let o=n.length,l=e.length;for(;o>0&&l>0&&n.charCodeAt(o-1)==e.charCodeAt(l-1);)o--,l--;if(i=="end"){let a=Math.max(0,r-Math.min(o,l));t-=o+a-r}if(o<r&&n.length<e.length){let a=t<=r&&t>=o?r-t:0;r-=a,l=r+(l-o),o=r}else if(l<r){let a=t<=r&&t>=l?r-t:0;r-=a,o=r+(o-l),l=r}return{from:r,toA:o,toB:l}}function BX(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:i,focusNode:s,focusOffset:r}=n.observer.selectionRange;return t&&(e.push(new UE(t,i)),(s!=t||r!=i)&&e.push(new UE(s,r))),e}function LX(n,e){if(n.length==0)return null;let t=n[0].pos,i=n.length==2?n[1].pos:t;return t>-1&&i>-1?Je.single(t+e,i+e):null}const UX={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Fp=It.ie&&It.ie_version<=11;class WX{constructor(e){this.view=e,this.active=!1,this.selectionRange=new DK,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.resizeContent=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let i of t)this.queue.push(i);(It.ie&&It.ie_version<=11||It.ios&&e.composing)&&t.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),Fp&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM),this.resizeContent=new ResizeObserver(()=>this.view.requestMeasure()),this.resizeContent.observe(e.contentDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runScrollHandlers(this.view,e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,i)=>t!=e[i]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,s=this.selectionRange;if(i.state.facet(zm)?i.root.activeElement!=this.dom:!Ch(i.dom,s))return;let r=s.anchorNode&&i.docView.nearest(s.anchorNode);if(r&&r.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(It.ie&&It.ie_version<=11||It.android&&It.chrome)&&!i.state.selection.main.empty&&s.focusNode&&vd(s.focusNode,s.focusOffset,s.anchorNode,s.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=It.safari&&e.root.nodeType==11&&TK(this.dom.ownerDocument)==this.dom&&VX(this.view)||gd(e.root);if(!t||this.selectionRange.eq(t))return!1;let i=Ch(this.dom,t);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&PK(this.dom,t)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(t),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(i.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=t)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,UX),Fp&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Fp&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var i;if(!this.delayedAndroidKey){let s=()=>{let r=this.delayedAndroidKey;r&&(this.clearDelayedAndroidKey(),!this.flush()&&r.force&&Ra(this.dom,r.key,r.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(s)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}processRecords(){let e=this.queue;for(let r of this.observer.takeRecords())e.push(r);e.length&&(this.queue=[]);let t=-1,i=-1,s=!1;for(let r of e){let o=this.readMutation(r);o&&(o.typeOver&&(s=!0),t==-1?{from:t,to:i}=o:(t=Math.min(o.from,t),i=Math.max(o.to,i)))}return{from:t,to:i,typeOver:s}}readChange(){let{from:e,to:t,typeOver:i}=this.processRecords(),s=this.selectionChanged&&Ch(this.dom,this.selectionRange);return e<0&&!s?null:(e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1,new PX(this.view,e,t,i))}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return!1;let i=this.view.state,s=S5(this.view,t);return this.view.state==i&&this.view.update([]),s}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.dirty|=4),e.type=="childList"){let i=iw(t,e.previousSibling||e.target.previousSibling,-1),s=iw(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:s?t.posBefore(s):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,t,i,s;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect(),(s=this.resizeContent)===null||s===void 0||s.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function iw(n,e,t){for(;e;){let i=$n.get(e);if(i&&i.parent==n)return i;let s=e.parentNode;e=s!=n.dom?s:t>0?e.nextSibling:e.previousSibling}return null}function VX(n){let e=null;function t(a){a.preventDefault(),a.stopImmediatePropagation(),e=a.getTargetRanges()[0]}if(n.contentDOM.addEventListener("beforeinput",t,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",t,!0),!e)return null;let i=e.startContainer,s=e.startOffset,r=e.endContainer,o=e.endOffset,l=n.docView.domAtPos(n.state.selection.main.anchor);return vd(l.node,l.offset,r,o)&&([i,s,r,o]=[r,o,i,s]),{anchorNode:i,anchorOffset:s,focusNode:r,focusOffset:o}}class Ct{constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: fixed; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(t=>this.update([t])),this.dispatch=this.dispatch.bind(this),this._root=e.root||NK(e.parent)||document,this.viewState=new tw(e.state||ln.create(e)),this.plugins=this.state.facet(zc).map(t=>new Lp(t));for(let t of this.plugins)t.update(this);this.observer=new WX(this),this.inputState=new lX(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new WE(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(...e){this._dispatch(e.length==1&&e[0]instanceof Di?e[0]:this.state.update(...e))}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,i=!1,s,r=this.state;for(let h of e){if(h.startState!=r)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");r=h.state}if(this.destroyed){this.viewState.state=r;return}let o=this.hasFocus,l=0,a=null;e.some(h=>h.annotation(m5))?(this.inputState.notifiedFocused=o,l=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,a=p5(r,o),a||(l=1));let c=this.observer.delayedAndroidKey,u=null;if(c?(this.observer.clearDelayedAndroidKey(),u=this.observer.readChange(),(u&&!this.state.doc.eq(r.doc)||!this.state.selection.eq(r.selection))&&(u=null)):this.observer.clear(),r.facet(ln.phrases)!=this.state.facet(ln.phrases))return this.setState(r);s=yd.create(this,r,e),s.flags|=l;let f=this.viewState.scrollTarget;try{this.updateState=2;for(let h of e){if(f&&(f=f.map(h.changes)),h.scrollIntoView){let{main:d}=h.state.selection;f=new _d(d.empty?d:Je.cursor(d.head,d.head>d.anchor?-1:1))}for(let d of h.effects)d.is(BE)&&(f=d.value)}this.viewState.update(s,f),this.bidiCache=Sd.update(this.bidiCache,s.changes),s.empty||(this.updatePlugins(s),this.inputState.update(s)),t=this.docView.update(s),this.state.facet(Gc)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(h=>h.isUserEvent("select.pointer")))}finally{this.updateState=0}if(s.startState.facet(Zf)!=s.state.facet(Zf)&&(this.viewState.mustMeasureContent=!0),(t||i||f||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!s.empty)for(let h of this.state.facet(Q1))h(s);(a||u)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),u&&!S5(this,u)&&c.force&&Ra(this.contentDOM,c.key,c.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new tw(e),this.plugins=e.facet(zc).map(i=>new Lp(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView=new WE(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(zc),i=e.state.facet(zc);if(t!=i){let s=[];for(let r of i){let o=t.indexOf(r);if(o<0)s.push(new Lp(r));else{let l=this.plugins[o];l.mustUpdate=e,s.push(l)}}for(let r of this.plugins)r.mustUpdate!=e&&r.destroy(this);this.plugins=s,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let s of this.plugins)s.mustUpdate=e;for(let s=0;s<this.plugins.length;s++)this.plugins[s].update(this)}measure(e=!0){if(this.destroyed)return;this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,{scrollHeight:i,scrollTop:s,clientHeight:r}=this.scrollDOM,o=s>i-r-4?i:s;try{for(let l=0;;l++){this.updateState=1;let a=this.viewport,c=this.viewState.lineBlockAtHeight(o),u=this.viewState.measure(this);if(!u&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let f=[];u&4||([this.measureRequests,f]=[f,this.measureRequests]);let h=f.map(_=>{try{return _.read(this)}catch(v){return Hs(this.state,v),sw}}),d=yd.create(this,this.state,[]),m=!1,p=!1;d.flags|=u,t?t.flags|=u:t=d,this.updateState=2,d.empty||(this.updatePlugins(d),this.inputState.update(d),this.updateAttrs(),m=this.docView.update(d));for(let _=0;_<f.length;_++)if(h[_]!=sw)try{let v=f[_];v.write&&v.write(h[_],this)}catch(v){Hs(this.state,v)}if(this.viewState.editorHeight)if(this.viewState.scrollTarget)this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,p=!0;else{let _=this.viewState.lineBlockAt(c.from).top-c.top;(_>1||_<-1)&&(this.scrollDOM.scrollTop+=_,p=!0)}if(m&&this.docView.updateSelection(!0),this.viewport.from==a.from&&this.viewport.to==a.to&&!p&&this.measureRequests.length==0)break}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let l of this.state.facet(Q1))l(t)}get themeClasses(){return t0+" "+(this.state.facet(e0)?_5:b5)+" "+this.state.facet(Zf)}updateAttrs(){let e=rw(this,xR,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(zm)?"true":"false",class:"cm-content",style:`${It.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),rw(this,fb,t);let i=this.observer.ignore(()=>{let s=K1(this.contentDOM,this.contentAttrs,t),r=K1(this.dom,this.editorAttrs,e);return s||r});return this.editorAttrs=e,this.contentAttrs=t,i}showAnnouncements(e){let t=!0;for(let i of e)for(let s of i.effects)if(s.is(Ct.announce)){t&&(this.announceDOM.textContent=""),t=!1;let r=this.announceDOM.appendChild(document.createElement("div"));r.textContent=s.value}}mountStyles(){this.styleModules=this.state.facet(Gc),xo.mount(this.root,this.styleModules.concat(NX).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(i=>i.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return Wp(this,e,zE(this,e,t,i))}moveByGroup(e,t){return Wp(this,e,zE(this,e,t,i=>rX(this,e.head,i)))}moveToLineBoundary(e,t,i=!0){return sX(this,e,t,i)}moveVertically(e,t,i){return Wp(this,e,oX(this,e,t,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),l5(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let s=this.state.doc.lineAt(e),r=this.bidiSpans(s),o=r[Da.find(r,e-s.from,-1,t)];return lb(i,o.dir==si.LTR==t>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(JR)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>FX)return n5(e.length);let t=this.textDirectionAt(e.from);for(let s of this.bidiCache)if(s.from==e.from&&s.dir==t)return s.order;let i=zK(e.text,t);return this.bidiCache.push(new Sd(e.from,e.to,t,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||It.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{DR(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return BE.of(new _d(typeof e=="number"?Je.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}static domEventHandlers(e){return ki.define(()=>({}),{eventHandlers:e})}static theme(e,t){let i=xo.newName(),s=[Zf.of(i),Gc.of(n0(`.${i}`,e))];return t&&t.dark&&s.push(e0.of(!0)),s}static baseTheme(e){return Ec.lowest(Gc.of(n0("."+t0,e,y5)))}static findFromDOM(e){var t;let i=e.querySelector(".cm-content"),s=i&&$n.get(i)||$n.get(e);return((t=s==null?void 0:s.rootView)===null||t===void 0?void 0:t.view)||null}}Ct.styleModule=Gc;Ct.inputHandler=QR;Ct.focusChangeEffect=YR;Ct.perLineTextDirection=JR;Ct.exceptionSink=XR;Ct.updateListener=Q1;Ct.editable=zm;Ct.mouseSelectionStyle=KR;Ct.dragMovesSelection=GR;Ct.clickAddsSelectionRange=zR;Ct.decorations=Fu;Ct.atomicRanges=$R;Ct.scrollMargins=e5;Ct.darkTheme=e0;Ct.contentAttributes=fb;Ct.editorAttributes=xR;Ct.lineWrapping=Ct.contentAttributes.of({class:"cm-lineWrapping"});Ct.announce=en.define();const FX=4096,sw={};class Sd{constructor(e,t,i,s){this.from=e,this.to=t,this.dir=i,this.order=s}static update(e,t){if(t.empty)return e;let i=[],s=e.length?e[e.length-1].dir:si.LTR;for(let r=Math.max(0,e.length-10);r<e.length;r++){let o=e[r];o.dir==s&&!t.touchesRange(o.from,o.to)&&i.push(new Sd(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.order))}return i}}function rw(n,e,t){for(let i=n.state.facet(e),s=i.length-1;s>=0;s--){let r=i[s],o=typeof r=="function"?r(n):r;o&&G1(o,t)}return t}const jX=It.mac?"mac":It.windows?"win":It.linux?"linux":"key";function HX(n,e){const t=n.split(/-(?!$)/);let i=t[t.length-1];i=="Space"&&(i=" ");let s,r,o,l;for(let a=0;a<t.length-1;++a){const c=t[a];if(/^(cmd|meta|m)$/i.test(c))l=!0;else if(/^a(lt)?$/i.test(c))s=!0;else if(/^(c|ctrl|control)$/i.test(c))r=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))e=="mac"?l=!0:r=!0;else throw new Error("Unrecognized modifier name: "+c)}return s&&(i="Alt-"+i),r&&(i="Ctrl-"+i),l&&(i="Meta-"+i),o&&(i="Shift-"+i),i}function xf(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}const qX=Ec.default(Ct.domEventHandlers({keydown(n,e){return w5(E5(e.state),n,e,"editor")}})),Gm=Tt.define({enables:qX}),ow=new WeakMap;function E5(n){let e=n.facet(Gm),t=ow.get(e);return t||ow.set(e,t=KX(e.reduce((i,s)=>i.concat(s),[]))),t}function zX(n,e,t){return w5(E5(n.state),e,n,t)}let Oo=null;const GX=4e3;function KX(n,e=jX){let t=Object.create(null),i=Object.create(null),s=(o,l)=>{let a=i[o];if(a==null)i[o]=l;else if(a!=l)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},r=(o,l,a,c)=>{var u,f;let h=t[o]||(t[o]=Object.create(null)),d=l.split(/ (?!$)/).map(_=>HX(_,e));for(let _=1;_<d.length;_++){let v=d.slice(0,_).join(" ");s(v,!0),h[v]||(h[v]={preventDefault:!0,run:[y=>{let w=Oo={view:y,prefix:v,scope:o};return setTimeout(()=>{Oo==w&&(Oo=null)},GX),!0}]})}let m=d.join(" ");s(m,!1);let p=h[m]||(h[m]={preventDefault:!1,run:((f=(u=h._any)===null||u===void 0?void 0:u.run)===null||f===void 0?void 0:f.slice())||[]});a&&p.run.push(a),c&&(p.preventDefault=!0)};for(let o of n){let l=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let c of l){let u=t[c]||(t[c]=Object.create(null));u._any||(u._any={preventDefault:!1,run:[]});for(let f in u)u[f].run.push(o.any)}let a=o[e]||o.key;if(a)for(let c of l)r(c,a,o.run,o.preventDefault),o.shift&&r(c,"Shift-"+a,o.shift,o.preventDefault)}return t}function w5(n,e,t,i){let s=kK(e),r=Xi(s,0),o=xs(r)==s.length&&s!=" ",l="",a=!1;Oo&&Oo.view==t&&Oo.scope==i&&(l=Oo.prefix+" ",(a=c5.indexOf(e.keyCode)<0)&&(Oo=null));let c=new Set,u=m=>{if(m){for(let p of m.run)if(!c.has(p)&&(c.add(p),p(t,e)))return!0;m.preventDefault&&(a=!0)}return!1},f=n[i],h,d;if(f){if(u(f[l+xf(s,e,!o)]))return!0;if(o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(It.windows&&e.ctrlKey&&e.altKey)&&(h=$o[e.keyCode])&&h!=s){if(u(f[l+xf(h,e,!0)]))return!0;if(e.shiftKey&&(d=Uu[e.keyCode])!=s&&d!=h&&u(f[l+xf(d,e,!1)]))return!0}else if(o&&e.shiftKey&&u(f[l+xf(s,e,!0)]))return!0;if(u(f._any))return!0}return a}class Ef{constructor(e,t,i,s,r){this.className=e,this.left=t,this.top=i,this.width=s,this.height=r}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,i){if(i.empty){let s=e.coordsAtPos(i.head,i.assoc||1);if(!s)return[];let r=A5(e);return[new Ef(t,s.left-r.left,s.top-r.top,null,s.bottom-s.top)]}else return XX(e,t,i)}}function A5(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==si.LTR?e.left:e.right-n.scrollDOM.clientWidth)-n.scrollDOM.scrollLeft,top:e.top-n.scrollDOM.scrollTop}}function lw(n,e,t){let i=Je.cursor(e);return{from:Math.max(t.from,n.moveToLineBoundary(i,!1,!0).from),to:Math.min(t.to,n.moveToLineBoundary(i,!0,!0).from),type:Un.Text}}function aw(n,e){let t=n.lineBlockAt(e);if(Array.isArray(t.type)){for(let i of t.type)if(i.to>e||i.to==e&&(i.to==t.to||i.type==Un.Text))return i}return t}function XX(n,e,t){if(t.to<=n.viewport.from||t.from>=n.viewport.to)return[];let i=Math.max(t.from,n.viewport.from),s=Math.min(t.to,n.viewport.to),r=n.textDirection==si.LTR,o=n.contentDOM,l=o.getBoundingClientRect(),a=A5(n),c=window.getComputedStyle(o.firstChild),u=l.left+parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)),f=l.right-parseInt(c.paddingRight),h=aw(n,i),d=aw(n,s),m=h.type==Un.Text?h:null,p=d.type==Un.Text?d:null;if(n.lineWrapping&&(m&&(m=lw(n,i,m)),p&&(p=lw(n,s,p))),m&&p&&m.from==p.from)return v(y(t.from,t.to,m));{let A=m?y(t.from,null,m):w(h,!1),E=p?y(null,t.to,p):w(d,!0),C=[];return(m||h).to<(p||d).from-1?C.push(_(u,A.bottom,f,E.top)):A.bottom<E.top&&n.elementAtHeight((A.bottom+E.top)/2).type==Un.Text&&(A.bottom=E.top=(A.bottom+E.top)/2),v(A).concat(C).concat(v(E))}function _(A,E,C,R){return new Ef(e,A-a.left,E-a.top-.01,C-A,R-E+.01)}function v({top:A,bottom:E,horizontal:C}){let R=[];for(let D=0;D<C.length;D+=2)R.push(_(C[D],A,C[D+1],E));return R}function y(A,E,C){let R=1e9,D=-1e9,N=[];function L(Q,O,K,X,J){let te=n.coordsAtPos(Q,Q==C.to?-2:2),j=n.coordsAtPos(K,K==C.from?2:-2);R=Math.min(te.top,j.top,R),D=Math.max(te.bottom,j.bottom,D),J==si.LTR?N.push(r&&O?u:te.left,r&&X?f:j.right):N.push(!r&&X?u:j.left,!r&&O?f:te.right)}let F=A??C.from,P=E??C.to;for(let Q of n.visibleRanges)if(Q.to>F&&Q.from<P)for(let O=Math.max(Q.from,F),K=Math.min(Q.to,P);;){let X=n.state.doc.lineAt(O);for(let J of n.bidiSpans(X)){let te=J.from+X.from,j=J.to+X.from;if(te>=K)break;j>O&&L(Math.max(te,O),A==null&&te<=F,Math.min(j,K),E==null&&j>=P,J.dir)}if(O=X.to+1,O>=K)break}return N.length==0&&L(F,A==null,P,E==null,n.textDirection),{top:R,bottom:D,horizontal:N}}function w(A,E){let C=l.top+(E?A.top:A.bottom);return{top:C,bottom:C,horizontal:[]}}}function QX(n,e){return n.constructor==e.constructor&&n.eq(e)}class YX{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(Th)!=e.state.facet(Th)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&e.view.requestMeasure(this.measureReq)}setOrder(e){let t=0,i=e.facet(Th);for(;t<i.length&&i[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}draw(e){if(e.length!=this.drawn.length||e.some((t,i)=>!QX(t,this.drawn[i]))){let t=this.dom.firstChild,i=0;for(let s of e)s.update&&t&&s.constructor&&this.drawn[i].constructor&&s.update(t,this.drawn[i])?(t=t.nextSibling,i++):this.dom.insertBefore(s.draw(),t);for(;t;){let s=t.nextSibling;t.remove(),t=s}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Th=Tt.define();function C5(n){return[ki.define(e=>new YX(e,n)),Th.of(n)]}const k5=!It.ios,ju=Tt.define({combine(n){return Er(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function JX(n={}){return[ju.of(n),ZX,xX,$X,ZR.of(!0)]}function T5(n){return n.startState.facet(ju)!=n.state.facet(ju)}const ZX=C5({above:!0,markers(n){let{state:e}=n,t=e.facet(ju),i=[];for(let s of e.selection.ranges){let r=s==e.selection.main;if(s.empty?!r||k5:t.drawRangeCursor){let o=r?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",l=s.empty?s:Je.cursor(s.head,s.head>s.anchor?-1:1);for(let a of Ef.forRange(n,o,l))i.push(a)}}return i},update(n,e){n.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=T5(n);return t&&cw(n.state,e),n.docChanged||n.selectionSet||t},mount(n,e){cw(e.state,n)},class:"cm-cursorLayer"});function cw(n,e){e.style.animationDuration=n.facet(ju).cursorBlinkRate+"ms"}const xX=C5({above:!1,markers(n){return n.state.selection.ranges.map(e=>e.empty?[]:Ef.forRange(n,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(n,e){return n.docChanged||n.selectionSet||n.viewportChanged||T5(n)},class:"cm-selectionLayer"}),I5={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};k5&&(I5[".cm-line"].caretColor="transparent !important");const $X=Ec.highest(Ct.theme(I5)),O5=en.define({map(n,e){return n==null?null:e.mapPos(n)}}),Xc=Ui.define({create(){return null},update(n,e){return n!=null&&(n=e.changes.mapPos(n)),e.effects.reduce((t,i)=>i.is(O5)?i.value:t,n)}}),eQ=ki.fromClass(class{constructor(n){this.view=n,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(n){var e;let t=n.state.field(Xc);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(n.startState.field(Xc)!=t||n.docChanged||n.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let n=this.view.state.field(Xc),e=n!=null&&this.view.coordsAtPos(n);if(!e)return null;let t=this.view.scrollDOM.getBoundingClientRect();return{left:e.left-t.left+this.view.scrollDOM.scrollLeft,top:e.top-t.top+this.view.scrollDOM.scrollTop,height:e.bottom-e.top}}drawCursor(n){this.cursor&&(n?(this.cursor.style.left=n.left+"px",this.cursor.style.top=n.top+"px",this.cursor.style.height=n.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(n){this.view.state.field(Xc)!=n&&this.view.dispatch({effects:O5.of(n)})}},{eventHandlers:{dragover(n){this.setDropPos(this.view.posAtCoords({x:n.clientX,y:n.clientY}))},dragleave(n){(n.target==this.view.contentDOM||!this.view.contentDOM.contains(n.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function tQ(){return[Xc,eQ]}function uw(n,e,t,i,s){e.lastIndex=0;for(let r=n.iterRange(t,i),o=t,l;!r.next().done;o+=r.value.length)if(!r.lineBreak)for(;l=e.exec(r.value);)s(o+l.index,l)}function nQ(n,e){let t=n.visibleRanges;if(t.length==1&&t[0].from==n.viewport.from&&t[0].to==n.viewport.to)return t;let i=[];for(let{from:s,to:r}of t)s=Math.max(n.state.doc.lineAt(s).from,s-e),r=Math.min(n.state.doc.lineAt(r).to,r+e),i.length&&i[i.length-1].to>=s?i[i.length-1].to=r:i.push({from:s,to:r});return i}class iQ{constructor(e){const{regexp:t,decoration:i,decorate:s,boundary:r,maxLength:o=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,s)this.addMatch=(l,a,c,u)=>s(u,c,c+l[0].length,l,a);else if(typeof i=="function")this.addMatch=(l,a,c,u)=>{let f=i(l,a,c);f&&u(c,c+l[0].length,f)};else if(i)this.addMatch=(l,a,c,u)=>u(c,c+l[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=r,this.maxLength=o}createDeco(e){let t=new Zo,i=t.add.bind(t);for(let{from:s,to:r}of nQ(e,this.maxLength))uw(e.state.doc,this.regexp,s,r,(o,l)=>this.addMatch(l,e,o,i));return t.finish()}updateDeco(e,t){let i=1e9,s=-1;return e.docChanged&&e.changes.iterChanges((r,o,l,a)=>{a>e.view.viewport.from&&l<e.view.viewport.to&&(i=Math.min(l,i),s=Math.max(a,s))}),e.viewportChanged||s-i>1e3?this.createDeco(e.view):s>-1?this.updateRange(e.view,t.map(e.changes),i,s):t}updateRange(e,t,i,s){for(let r of e.visibleRanges){let o=Math.max(r.from,i),l=Math.min(r.to,s);if(l>o){let a=e.state.doc.lineAt(o),c=a.to<l?e.state.doc.lineAt(l):a,u=Math.max(r.from,a.from),f=Math.min(r.to,c.to);if(this.boundary){for(;o>a.from;o--)if(this.boundary.test(a.text[o-1-a.from])){u=o;break}for(;l<c.to;l++)if(this.boundary.test(c.text[l-c.from])){f=l;break}}let h=[],d,m=(p,_,v)=>h.push(v.range(p,_));if(a==c)for(this.regexp.lastIndex=u-a.from;(d=this.regexp.exec(a.text))&&d.index<f-a.from;)this.addMatch(d,e,d.index+a.from,m);else uw(e.state.doc,this.regexp,u,f,(p,_)=>this.addMatch(_,e,p,m));t=t.update({filterFrom:u,filterTo:f,filter:(p,_)=>p<u||_>f,add:h})}}return t}}const i0=/x/.unicode!=null?"gu":"g",sQ=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,i0),rQ={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let jp=null;function oQ(){var n;if(jp==null&&typeof document<"u"&&document.body){let e=document.body.style;jp=((n=e.tabSize)!==null&&n!==void 0?n:e.MozTabSize)!=null}return jp||!1}const Ih=Tt.define({combine(n){let e=Er(n,{render:null,specialChars:sQ,addSpecialChars:null});return(e.replaceTabs=!oQ())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,i0)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,i0)),e}});function lQ(n={}){return[Ih.of(n),aQ()]}let fw=null;function aQ(){return fw||(fw=ki.fromClass(class{constructor(n){this.view=n,this.decorations=Lt.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(n.state.facet(Ih)),this.decorations=this.decorator.createDeco(n)}makeDecorator(n){return new iQ({regexp:n.specialChars,decoration:(e,t,i)=>{let{doc:s}=t.state,r=Xi(e[0],0);if(r==9){let o=s.lineAt(i),l=t.state.tabSize,a=yf(o.text,l,i-o.from);return Lt.replace({widget:new hQ((l-a%l)*this.view.defaultCharacterWidth)})}return this.decorationCache[r]||(this.decorationCache[r]=Lt.replace({widget:new fQ(n,r)}))},boundary:n.replaceTabs?void 0:/[^]/})}update(n){let e=n.state.facet(Ih);n.startState.facet(Ih)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(n.view)):this.decorations=this.decorator.updateDeco(n,this.decorations)}},{decorations:n=>n.decorations}))}const cQ="•";function uQ(n){return n>=32?cQ:n==10?"␤":String.fromCharCode(9216+n)}class fQ extends sl{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=uQ(this.code),i=e.state.phrase("Control character")+" "+(rQ[this.code]||"0x"+this.code.toString(16)),s=this.options.render&&this.options.render(this.code,i,t);if(s)return s;let r=document.createElement("span");return r.textContent=t,r.title=i,r.setAttribute("aria-label",i),r.className="cm-specialChar",r}ignoreEvent(){return!1}}class hQ extends sl{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function dQ(){return pQ}const mQ=Lt.line({class:"cm-activeLine"}),pQ=ki.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=-1,t=[];for(let i of n.state.selection.ranges){let s=n.lineBlockAt(i.head);s.from>e&&(t.push(mQ.range(s.from)),e=s.from)}return Lt.set(t)}},{decorations:n=>n.decorations}),s0=2e3;function gQ(n,e,t){let i=Math.min(e.line,t.line),s=Math.max(e.line,t.line),r=[];if(e.off>s0||t.off>s0||e.col<0||t.col<0){let o=Math.min(e.off,t.off),l=Math.max(e.off,t.off);for(let a=i;a<=s;a++){let c=n.doc.line(a);c.length<=l&&r.push(Je.range(c.from+o,c.to+l))}}else{let o=Math.min(e.col,t.col),l=Math.max(e.col,t.col);for(let a=i;a<=s;a++){let c=n.doc.line(a),u=U1(c.text,o,n.tabSize,!0);if(u<0)r.push(Je.cursor(c.to));else{let f=U1(c.text,l,n.tabSize);r.push(Je.range(c.from+u,c.from+f))}}}return r}function vQ(n,e){let t=n.coordsAtPos(n.viewport.from);return t?Math.round(Math.abs((t.left-e)/n.defaultCharacterWidth)):-1}function hw(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1),i=n.state.doc.lineAt(t),s=t-i.from,r=s>s0?-1:s==i.length?vQ(n,e.clientX):yf(i.text,n.state.tabSize,t-i.from);return{line:i.number,col:r,off:s}}function bQ(n,e){let t=hw(n,e),i=n.state.selection;return t?{update(s){if(s.docChanged){let r=s.changes.mapPos(s.startState.doc.line(t.line).from),o=s.state.doc.lineAt(r);t={line:o.number,col:t.col,off:Math.min(t.off,o.length)},i=i.map(s.changes)}},get(s,r,o){let l=hw(n,s);if(!l)return i;let a=gQ(n.state,t,l);return a.length?o?Je.create(a.concat(i.ranges)):Je.create(a):i}}:null}function _Q(n){let e=(n==null?void 0:n.eventFilter)||(t=>t.altKey&&t.button==0);return Ct.mouseSelectionStyle.of((t,i)=>e(i)?bQ(t,i):null)}const yQ={Alt:[18,n=>n.altKey],Control:[17,n=>n.ctrlKey],Shift:[16,n=>n.shiftKey],Meta:[91,n=>n.metaKey]},SQ={style:"cursor: crosshair"};function EQ(n={}){let[e,t]=yQ[n.key||"Alt"],i=ki.fromClass(class{constructor(s){this.view=s,this.isDown=!1}set(s){this.isDown!=s&&(this.isDown=s,this.view.update([]))}},{eventHandlers:{keydown(s){this.set(s.keyCode==e||t(s))},keyup(s){(s.keyCode==e||!t(s))&&this.set(!1)},mousemove(s){this.set(t(s))}}});return[i,Ct.contentAttributes.of(s=>{var r;return!((r=s.plugin(i))===null||r===void 0)&&r.isDown?SQ:null})]}const $f="-10000px";class R5{constructor(e,t,i){this.facet=t,this.createTooltipView=i,this.input=e.state.facet(t),this.tooltips=this.input.filter(s=>s),this.tooltipViews=this.tooltips.map(i)}update(e){var t;let i=e.state.facet(this.facet),s=i.filter(o=>o);if(i===this.input){for(let o of this.tooltipViews)o.update&&o.update(e);return!1}let r=[];for(let o=0;o<s.length;o++){let l=s[o],a=-1;if(l){for(let c=0;c<this.tooltips.length;c++){let u=this.tooltips[c];u&&u.create==l.create&&(a=c)}if(a<0)r[o]=this.createTooltipView(l);else{let c=r[o]=this.tooltipViews[a];c.update&&c.update(e)}}}for(let o of this.tooltipViews)r.indexOf(o)<0&&(o.dom.remove(),(t=o.destroy)===null||t===void 0||t.call(o));return this.input=i,this.tooltips=s,this.tooltipViews=r,!0}}function wQ(n){let{win:e}=n;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const Hp=Tt.define({combine:n=>{var e,t,i;return{position:It.ios?"absolute":((e=n.find(s=>s.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=n.find(s=>s.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((i=n.find(s=>s.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||wQ}}}),dw=new WeakMap,D5=ki.fromClass(class{constructor(n){this.view=n,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let e=n.state.facet(Hp);this.position=e.position,this.parent=e.parent,this.classes=n.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new R5(n,Km,t=>this.createTooltip(t)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),n.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let n of this.manager.tooltipViews)this.intersectionObserver.observe(n.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(n){n.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(n);e&&this.observeIntersection();let t=e||n.geometryChanged,i=n.state.facet(Hp);if(i.position!=this.position){this.position=i.position;for(let s of this.manager.tooltipViews)s.dom.style.position=this.position;t=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let s of this.manager.tooltipViews)this.container.appendChild(s.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(n){let e=n.create(this.view);if(e.dom.classList.add("cm-tooltip"),n.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let t=document.createElement("div");t.className="cm-tooltip-arrow",e.dom.appendChild(t)}return e.dom.style.position=this.position,e.dom.style.top=$f,this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var n,e;this.view.win.removeEventListener("resize",this.measureSoon);for(let t of this.manager.tooltipViews)t.dom.remove(),(n=t.destroy)===null||n===void 0||n.call(t);(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let n=this.view.dom.getBoundingClientRect();return{editor:n,parent:this.parent?this.container.getBoundingClientRect():n,pos:this.manager.tooltips.map((e,t)=>{let i=this.manager.tooltipViews[t];return i.getCoords?i.getCoords(e.pos):this.view.coordsAtPos(e.pos)}),size:this.manager.tooltipViews.map(({dom:e})=>e.getBoundingClientRect()),space:this.view.state.facet(Hp).tooltipSpace(this.view)}}writeMeasure(n){var e;let{editor:t,space:i}=n,s=[];for(let r=0;r<this.manager.tooltips.length;r++){let o=this.manager.tooltips[r],l=this.manager.tooltipViews[r],{dom:a}=l,c=n.pos[r],u=n.size[r];if(!c||c.bottom<=Math.max(t.top,i.top)||c.top>=Math.min(t.bottom,i.bottom)||c.right<Math.max(t.left,i.left)-.1||c.left>Math.min(t.right,i.right)+.1){a.style.top=$f;continue}let f=o.arrow?l.dom.querySelector(".cm-tooltip-arrow"):null,h=f?7:0,d=u.right-u.left,m=(e=dw.get(l))!==null&&e!==void 0?e:u.bottom-u.top,p=l.offset||CQ,_=this.view.textDirection==si.LTR,v=u.width>i.right-i.left?_?i.left:i.right-u.width:_?Math.min(c.left-(f?14:0)+p.x,i.right-d):Math.max(i.left,c.left-d+(f?14:0)-p.x),y=!!o.above;!o.strictSide&&(y?c.top-(u.bottom-u.top)-p.y<i.top:c.bottom+(u.bottom-u.top)+p.y>i.bottom)&&y==i.bottom-c.bottom>c.top-i.top&&(y=!y);let w=(y?c.top-i.top:i.bottom-c.bottom)-h;if(w<m&&l.resize!==!1){if(w<this.view.defaultLineHeight){a.style.top=$f;continue}dw.set(l,m),a.style.height=(m=w)+"px"}else a.style.height&&(a.style.height="");let A=y?c.top-m-h-p.y:c.bottom+h+p.y,E=v+d;if(l.overlap!==!0)for(let C of s)C.left<E&&C.right>v&&C.top<A+m&&C.bottom>A&&(A=y?C.top-m-2-h:C.bottom+h+2);this.position=="absolute"?(a.style.top=A-n.parent.top+"px",a.style.left=v-n.parent.left+"px"):(a.style.top=A+"px",a.style.left=v+"px"),f&&(f.style.left=`${c.left+(_?p.x:-p.x)-(v+14-7)}px`),l.overlap!==!0&&s.push({left:v,top:A,right:E,bottom:A+m}),a.classList.toggle("cm-tooltip-above",y),a.classList.toggle("cm-tooltip-below",!y),l.positioned&&l.positioned(n.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let n of this.manager.tooltipViews)n.dom.style.top=$f}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),AQ=Ct.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:`${7}px`,width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:`${7}px solid transparent`,borderRight:`${7}px solid transparent`},".cm-tooltip-above &":{bottom:`-${7}px`,"&:before":{borderTop:`${7}px solid #bbb`},"&:after":{borderTop:`${7}px solid #f5f5f5`,bottom:"1px"}},".cm-tooltip-below &":{top:`-${7}px`,"&:before":{borderBottom:`${7}px solid #bbb`},"&:after":{borderBottom:`${7}px solid #f5f5f5`,top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),CQ={x:0,y:0},Km=Tt.define({enables:[D5,AQ]}),Ed=Tt.define();class db{constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new R5(e,Ed,t=>this.createHostedView(t))}static create(e){return new db(e)}createHostedView(e){let t=e.create(this.view);return t.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(t.dom),this.mounted&&t.mount&&t.mount(this.view),t}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}}const kQ=Km.compute([Ed],n=>{let e=n.facet(Ed).filter(t=>t);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.filter(t=>t.end!=null).map(t=>t.end)),create:db.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class TQ{constructor(e,t,i,s,r){this.view=e,this.source=t,this.field=i,this.setHover=s,this.hoverTime=r,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:e}=this,t=this.view.contentDOM.contains(e.target)?this.view.posAtCoords(e):null;if(t==null)return;let i=this.view.coordsAtPos(t);if(i==null||e.y<i.top||e.y>i.bottom||e.x<i.left-this.view.defaultCharacterWidth||e.x>i.right+this.view.defaultCharacterWidth)return;let s=this.view.bidiSpans(this.view.state.doc.lineAt(t)).find(l=>l.from<=t&&l.to>=t),r=s&&s.dir==si.RTL?-1:1,o=this.source(this.view,t,e.x<i.left?-r:r);if(o!=null&&o.then){let l=this.pending={pos:t};o.then(a=>{this.pending==l&&(this.pending=null,a&&this.view.dispatch({effects:this.setHover.of(a)}))},a=>Hs(this.view.state,a,"hover tooltip"))}else o&&this.view.dispatch({effects:this.setHover.of(o)})}mousemove(e){var t;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let i=this.active;if(i&&!mw(this.lastMove.target)||this.pending){let{pos:s}=i||this.pending,r=(t=i==null?void 0:i.end)!==null&&t!==void 0?t:s;(s==r?this.view.posAtCoords(this.lastMove)!=s:!IQ(this.view,s,r,e.clientX,e.clientY,6))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&!mw(e.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function mw(n){for(let e=n;e;e=e.parentNode)if(e.nodeType==1&&e.classList.contains("cm-tooltip"))return!0;return!1}function IQ(n,e,t,i,s,r){let o=document.createRange(),l=n.domAtPos(e),a=n.domAtPos(t);o.setEnd(a.node,a.offset),o.setStart(l.node,l.offset);let c=o.getClientRects();o.detach();for(let u=0;u<c.length;u++){let f=c[u];if(Math.max(f.top-s,s-f.bottom,f.left-i,i-f.right)<=r)return!0}return!1}function OQ(n,e={}){let t=en.define(),i=Ui.define({create(){return null},update(s,r){if(s&&(e.hideOnChange&&(r.docChanged||r.selection)||e.hideOn&&e.hideOn(r,s)))return null;if(s&&r.docChanged){let o=r.changes.mapPos(s.pos,-1,ys.TrackDel);if(o==null)return null;let l=Object.assign(Object.create(null),s);l.pos=o,s.end!=null&&(l.end=r.changes.mapPos(s.end)),s=l}for(let o of r.effects)o.is(t)&&(s=o.value),o.is(DQ)&&(s=null);return s},provide:s=>Ed.from(s)});return[i,ki.define(s=>new TQ(s,n,i,t,e.hoverTime||300)),kQ]}function RQ(n,e){let t=n.plugin(D5);if(!t)return null;let i=t.manager.tooltips.indexOf(e);return i<0?null:t.manager.tooltipViews[i]}const DQ=en.define(),pw=Tt.define({combine(n){let e,t;for(let i of n)e=e||i.topContainer,t=t||i.bottomContainer;return{topContainer:e,bottomContainer:t}}});function Hu(n,e){let t=n.plugin(N5),i=t?t.specs.indexOf(e):-1;return i>-1?t.panels[i]:null}const N5=ki.fromClass(class{constructor(n){this.input=n.state.facet(qu),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(n));let e=n.state.facet(pw);this.top=new eh(n,!0,e.topContainer),this.bottom=new eh(n,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(n){let e=n.state.facet(pw);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new eh(n.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new eh(n.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=n.state.facet(qu);if(t!=this.input){let i=t.filter(a=>a),s=[],r=[],o=[],l=[];for(let a of i){let c=this.specs.indexOf(a),u;c<0?(u=a(n.view),l.push(u)):(u=this.panels[c],u.update&&u.update(n)),s.push(u),(u.top?r:o).push(u)}this.specs=i,this.panels=s,this.top.sync(r),this.bottom.sync(o);for(let a of l)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}else for(let i of this.panels)i.update&&i.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>Ct.scrollMargins.of(e=>{let t=e.plugin(n);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class eh{constructor(e,t,i){this.view=e,this.top=t,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=gw(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=gw(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function gw(n){let e=n.nextSibling;return n.remove(),e}const qu=Tt.define({enables:N5});class Kr extends Kl{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Kr.prototype.elementClass="";Kr.prototype.toDOM=void 0;Kr.prototype.mapMode=ys.TrackBefore;Kr.prototype.startSide=Kr.prototype.endSide=-1;Kr.prototype.point=!0;const Oh=Tt.define(),NQ={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>In.empty,lineMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},lu=Tt.define();function P5(n){return[M5(),lu.of(Object.assign(Object.assign({},NQ),n))]}const r0=Tt.define({combine:n=>n.some(e=>e)});function M5(n){let e=[PQ];return n&&n.fixed===!1&&e.push(r0.of(!0)),e}const PQ=ki.fromClass(class{constructor(n){this.view=n,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=n.state.facet(lu).map(e=>new bw(n,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!n.state.facet(r0),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}update(n){if(this.updateGutters(n)){let e=this.prevViewport,t=n.view.viewport,i=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(i<(t.to-t.from)*.8)}n.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(r0)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&this.dom.remove();let t=In.iter(this.view.state.facet(Oh),this.view.viewport.from),i=[],s=this.gutters.map(r=>new MQ(r,this.view.viewport,-this.view.documentPadding.top));for(let r of this.view.viewportLineBlocks){let o;if(Array.isArray(r.type)){for(let l of r.type)if(l.type==Un.Text){o=l;break}}else o=r.type==Un.Text?r:void 0;if(o){i.length&&(i=[]),B5(t,i,r.from);for(let l of s)l.line(this.view,o,i)}}for(let r of s)r.finish();n&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(n){let e=n.startState.facet(lu),t=n.state.facet(lu),i=n.docChanged||n.heightChanged||n.viewportChanged||!In.eq(n.startState.facet(Oh),n.state.facet(Oh),n.view.viewport.from,n.view.viewport.to);if(e==t)for(let s of this.gutters)s.update(n)&&(i=!0);else{i=!0;let s=[];for(let r of t){let o=e.indexOf(r);o<0?s.push(new bw(this.view,r)):(this.gutters[o].update(n),s.push(this.gutters[o]))}for(let r of this.gutters)r.dom.remove(),s.indexOf(r)<0&&r.destroy();for(let r of s)this.dom.appendChild(r.dom);this.gutters=s}return i}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove()}},{provide:n=>Ct.scrollMargins.of(e=>{let t=e.plugin(n);return!t||t.gutters.length==0||!t.fixed?null:e.textDirection==si.LTR?{left:t.dom.offsetWidth}:{right:t.dom.offsetWidth}})});function vw(n){return Array.isArray(n)?n:[n]}function B5(n,e,t){for(;n.value&&n.from<=t;)n.from==t&&e.push(n.value),n.next()}class MQ{constructor(e,t,i){this.gutter=e,this.height=i,this.i=0,this.cursor=In.iter(e.markers,t.from)}line(e,t,i){let s=[];B5(this.cursor,s,t.from),i.length&&(s=s.concat(i));let r=this.gutter.config.lineMarker(e,t,s);r&&s.unshift(r);let o=this.gutter;if(s.length==0&&!o.config.renderEmptyElements)return;let l=t.top-this.height;if(this.i==o.elements.length){let a=new L5(e,t.height,l,s);o.elements.push(a),o.dom.appendChild(a.dom)}else o.elements[this.i].update(e,t.height,l,s);this.height=t.bottom,this.i++}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class bw{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in t.domEventHandlers)this.dom.addEventListener(i,s=>{let r=s.target,o;if(r!=this.dom&&this.dom.contains(r)){for(;r.parentNode!=this.dom;)r=r.parentNode;let a=r.getBoundingClientRect();o=(a.top+a.bottom)/2}else o=s.clientY;let l=e.lineBlockAtHeight(o-e.documentTop);t.domEventHandlers[i](e,l,s)&&s.preventDefault()});this.markers=vw(t.markers(e)),t.initialSpacer&&(this.spacer=new L5(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=vw(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let s=this.config.updateSpacer(this.spacer.markers[0],e);s!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[s])}let i=e.view.viewport;return!In.eq(this.markers,t,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class L5{constructor(e,t,i,s){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,i,s)}update(e,t,i,s){this.height!=t&&(this.dom.style.height=(this.height=t)+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),BQ(this.markers,s)||this.setMarkers(e,s)}setMarkers(e,t){let i="cm-gutterElement",s=this.dom.firstChild;for(let r=0,o=0;;){let l=o,a=r<t.length?t[r++]:null,c=!1;if(a){let u=a.elementClass;u&&(i+=" "+u);for(let f=o;f<this.markers.length;f++)if(this.markers[f].compare(a)){l=f,c=!0;break}}else l=this.markers.length;for(;o<l;){let u=this.markers[o++];if(u.toDOM){u.destroy(s);let f=s.nextSibling;s.remove(),s=f}}if(!a)break;a.toDOM&&(c?s=s.nextSibling:this.dom.insertBefore(a.toDOM(e),s)),c&&o++}this.dom.className=i,this.markers=t}destroy(){this.setMarkers(null,[])}}function BQ(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].compare(e[t]))return!1;return!0}const LQ=Tt.define(),Sa=Tt.define({combine(n){return Er(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let i=Object.assign({},e);for(let s in t){let r=i[s],o=t[s];i[s]=r?(l,a,c)=>r(l,a,c)||o(l,a,c):o}return i}})}});class qp extends Kr{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function zp(n,e){return n.state.facet(Sa).formatNumber(e,n.state)}const UQ=lu.compute([Sa],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(LQ)},lineMarker(e,t,i){return i.some(s=>s.toDOM)?null:new qp(zp(e,e.state.doc.lineAt(t.from).number))},lineMarkerChange:e=>e.startState.facet(Sa)!=e.state.facet(Sa),initialSpacer(e){return new qp(zp(e,_w(e.state.doc.lines)))},updateSpacer(e,t){let i=zp(t.view,_w(t.view.state.doc.lines));return i==e.number?e:new qp(i)},domEventHandlers:n.facet(Sa).domEventHandlers}));function WQ(n={}){return[Sa.of(n),M5(),UQ]}function _w(n){let e=9;for(;e<n;)e=e*10+9;return e}const VQ=new class extends Kr{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},FQ=Oh.compute(["selection"],n=>{let e=[],t=-1;for(let i of n.selection.ranges){let s=n.doc.lineAt(i.head).from;s>t&&(t=s,e.push(VQ.range(s)))}return In.of(e)});function jQ(){return FQ}const U5=1024;let HQ=0;class Gp{constructor(e,t){this.from=e,this.to=t}}class on{constructor(e={}){this.id=HQ++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Bs.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}}on.closedBy=new on({deserialize:n=>n.split(" ")});on.openedBy=new on({deserialize:n=>n.split(" ")});on.group=new on({deserialize:n=>n.split(" ")});on.contextHash=new on({perNode:!0});on.lookAhead=new on({perNode:!0});on.mounted=new on({perNode:!0});const qQ=Object.create(null);class Bs{constructor(e,t,i,s=0){this.name=e,this.props=t,this.id=i,this.flags=s}static define(e){let t=e.props&&e.props.length?Object.create(null):qQ,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),s=new Bs(e.name||"",t,e.id,i);if(e.props){for(let r of e.props)if(Array.isArray(r)||(r=r(s)),r){if(r[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[r[0].id]=r[1]}}return s}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(on.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let s of i.split(" "))t[s]=e[i];return i=>{for(let s=i.prop(on.group),r=-1;r<(s?s.length:0);r++){let o=t[r<0?i.name:s[r]];if(o)return o}}}}Bs.none=new Bs("",Object.create(null),0,8);class mb{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let s=null;for(let r of e){let o=r(i);o&&(s||(s=Object.assign({},i.props)),s[o[0].id]=o[1])}t.push(s?new Bs(i.name,s,i.id,i.flags):i)}return new mb(t)}}const th=new WeakMap,yw=new WeakMap;var Yi;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(Yi||(Yi={}));class Ai{constructor(e,t,i,s,r){if(this.type=e,this.children=t,this.positions=i,this.length=s,this.props=null,r&&r.length){this.props=Object.create(null);for(let[o,l]of r)this.props[typeof o=="number"?o:o.id]=l}}toString(){let e=this.prop(on.mounted);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let s=i.toString();s&&(t&&(t+=","),t+=s)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new Cd(this.topNode,e)}cursorAt(e,t=0,i=0){let s=th.get(this)||this.topNode,r=new Cd(s);return r.moveTo(e,t),th.set(this,r._tree),r}get topNode(){return new ao(this,0,0,null)}resolve(e,t=0){let i=tc(th.get(this)||this.topNode,e,t,!1);return th.set(this,i),i}resolveInner(e,t=0){let i=tc(yw.get(this)||this.topNode,e,t,!0);return yw.set(this,i),i}iterate(e){let{enter:t,leave:i,from:s=0,to:r=this.length}=e;for(let o=this.cursor((e.mode||0)|Yi.IncludeAnonymous);;){let l=!1;if(o.from<=r&&o.to>=s&&(o.type.isAnonymous||t(o)!==!1)){if(o.firstChild())continue;l=!0}for(;l&&i&&!o.type.isAnonymous&&i(o),!o.nextSibling();){if(!o.parent())return;l=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:vb(Bs.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,s)=>new Ai(this.type,t,i,s,this.propValues),e.makeTree||((t,i,s)=>new Ai(Bs.none,t,i,s)))}static build(e){return GQ(e)}}Ai.empty=new Ai(Bs.none,[],[],0);class pb{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new pb(this.buffer,this.index)}}class oa{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return Bs.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],s=this.set.types[t],r=s.name;if(/\W/.test(r)&&!s.isError&&(r=JSON.stringify(r)),e+=4,i==e)return r;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return r+"("+o.join(",")+")"}findChild(e,t,i,s,r){let{buffer:o}=this,l=-1;for(let a=e;a!=t&&!(W5(r,s,o[a+1],o[a+2])&&(l=a,i>0));a=o[a+3]);return l}slice(e,t,i){let s=this.buffer,r=new Uint16Array(t-e),o=0;for(let l=e,a=0;l<t;){r[a++]=s[l++],r[a++]=s[l++]-i;let c=r[a++]=s[l++]-i;r[a++]=s[l++]-e,o=Math.max(o,c)}return new oa(r,o,this.set)}}function W5(n,e,t,i){switch(n){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function V5(n,e){let t=n.childBefore(e);for(;t;){let i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(n=t,t=i.prevSibling):t=i}return n}function tc(n,e,t,i){for(var s;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let o=!i&&n instanceof ao&&n.index<0?null:n.parent;if(!o)return n;n=o}let r=i?0:Yi.IgnoreOverlays;if(i)for(let o=n,l=o.parent;l;o=l,l=o.parent)o instanceof ao&&o.index<0&&((s=l.enter(e,t,r))===null||s===void 0?void 0:s.from)!=o.from&&(n=l);for(;;){let o=n.enter(e,t,r);if(!o)return n;n=o}}class ao{constructor(e,t,i,s){this._tree=e,this.from=t,this.index=i,this._parent=s}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,s,r=0){for(let o=this;;){for(let{children:l,positions:a}=o._tree,c=t>0?l.length:-1;e!=c;e+=t){let u=l[e],f=a[e]+o.from;if(W5(s,i,f,f+u.length)){if(u instanceof oa){if(r&Yi.ExcludeBuffers)continue;let h=u.findChild(0,u.buffer.length,t,i-f,s);if(h>-1)return new Lo(new zQ(o,u,e,f),null,h)}else if(r&Yi.IncludeAnonymous||!u.type.isAnonymous||gb(u)){let h;if(!(r&Yi.IgnoreMounts)&&u.props&&(h=u.prop(on.mounted))&&!h.overlay)return new ao(h.tree,f,e,o);let d=new ao(u,f,e,o);return r&Yi.IncludeAnonymous||!d.type.isAnonymous?d:d.nextChild(t<0?u.children.length-1:0,t,i,s)}}}if(r&Yi.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let s;if(!(i&Yi.IgnoreOverlays)&&(s=this._tree.prop(on.mounted))&&s.overlay){let r=e-this.from;for(let{from:o,to:l}of s.overlay)if((t>0?o<=r:o<r)&&(t<0?l>=r:l>r))return new ao(s.tree,s.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new Cd(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,t=0){return tc(this,e,t,!1)}resolveInner(e,t=0){return tc(this,e,t,!0)}enterUnfinishedNodesBefore(e){return V5(this,e)}getChild(e,t=null,i=null){let s=wd(this,e,t,i);return s.length?s[0]:null}getChildren(e,t=null,i=null){return wd(this,e,t,i)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return Ad(this,e)}}function wd(n,e,t,i){let s=n.cursor(),r=[];if(!s.firstChild())return r;if(t!=null){for(;!s.type.is(t);)if(!s.nextSibling())return r}for(;;){if(i!=null&&s.type.is(i))return r;if(s.type.is(e)&&r.push(s.node),!s.nextSibling())return i==null?r:[]}}function Ad(n,e,t=e.length-1){for(let i=n.parent;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}class zQ{constructor(e,t,i,s){this.parent=e,this.buffer=t,this.index=i,this.start=s}}class Lo{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,i){this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,t,i){let{buffer:s}=this.context,r=s.findChild(this.index+4,s.buffer[this.index+3],e,t-this.context.start,i);return r<0?null:new Lo(this.context,this,r)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&Yi.ExcludeBuffers)return null;let{buffer:s}=this.context,r=s.findChild(this.index+4,s.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return r<0?null:new Lo(this.context,this,r)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Lo(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Lo(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}cursor(e=0){return new Cd(this,e)}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,s=this.index+4,r=i.buffer[this.index+3];if(r>s){let o=i.buffer[this.index+1];e.push(i.slice(s,r,o)),t.push(0)}return new Ai(this.type,e,t,this.to-this.from)}resolve(e,t=0){return tc(this,e,t,!1)}resolveInner(e,t=0){return tc(this,e,t,!0)}enterUnfinishedNodesBefore(e){return V5(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,i=null){let s=wd(this,e,t,i);return s.length?s[0]:null}getChildren(e,t=null,i=null){return wd(this,e,t,i)}get node(){return this}matchContext(e){return Ad(this,e)}}class Cd{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof ao)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:s}=this.buffer;return this.type=t||s.set.types[s.buffer[e]],this.from=i+s.buffer[e+1],this.to=i+s.buffer[e+2],!0}yield(e){return e?e instanceof ao?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:s}=this.buffer,r=s.findChild(this.index+4,s.buffer[this.index+3],e,t-this.buffer.start,i);return r<0?!1:(this.stack.push(this.index),this.yieldBuf(r))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?i&Yi.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Yi.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Yi.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let s=i<0?0:this.stack[i]+4;if(this.index!=s)return this.yieldBuf(t.findChild(s,this.index,-1,0,4))}else{let s=t.buffer[this.index+3];if(s<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(s)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:s}=this;if(s){if(e>0){if(this.index<s.buffer.buffer.length)return!1}else for(let r=0;r<this.index;r++)if(s.buffer.buffer[r+3]<this.index)return!1;({index:t,parent:i}=s)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let r=t+e,o=e<0?-1:i._tree.children.length;r!=o;r+=e){let l=i._tree.children[r];if(this.mode&Yi.IncludeAnonymous||l instanceof oa||!l.type.isAnonymous||gb(l))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer){e:for(let s=this.index,r=this.stack.length;r>=0;){for(let o=e;o;o=o._parent)if(o.index==s){if(s==this.index)return o;t=o,i=r+1;break e}s=this.stack[--r]}}for(let s=i;s<this.stack.length;s++)t=new Lo(this.buffer,t,this.stack[s]);return this.bufferNode=new Lo(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let s=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(s=!0)}for(;s&&t&&t(this),s=this.type.isAnonymous,!this.nextSibling();){if(!i)return;this.parent(),i--,s=!0}}}matchContext(e){if(!this.buffer)return Ad(this.node,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let s=e.length-1,r=this.stack.length-1;s>=0;r--){if(r<0)return Ad(this.node,e,s);let o=i[t.buffer[this.stack[r]]];if(!o.isAnonymous){if(e[s]&&e[s]!=o.name)return!1;s--}}return!0}}function gb(n){return n.children.some(e=>e instanceof oa||!e.type.isAnonymous||gb(e))}function GQ(n){var e;let{buffer:t,nodeSet:i,maxBufferLength:s=U5,reused:r=[],minRepeatType:o=i.types.length}=n,l=Array.isArray(t)?new pb(t,t.length):t,a=i.types,c=0,u=0;function f(A,E,C,R,D){let{id:N,start:L,end:F,size:P}=l,Q=u;for(;P<0;)if(l.next(),P==-1){let te=r[N];C.push(te),R.push(L-A);return}else if(P==-3){c=N;return}else if(P==-4){u=N;return}else throw new RangeError(`Unrecognized record size: ${P}`);let O=a[N],K,X,J=L-A;if(F-L<=s&&(X=p(l.pos-E,D))){let te=new Uint16Array(X.size-X.skip),j=l.pos-X.size,x=te.length;for(;l.pos>j;)x=_(X.start,te,x);K=new oa(te,F-X.start,i),J=X.start-A}else{let te=l.pos-P;l.next();let j=[],x=[],Z=N>=o?N:-1,V=0,ce=F;for(;l.pos>te;)Z>=0&&l.id==Z&&l.size>=0?(l.end<=ce-s&&(d(j,x,L,V,l.end,ce,Z,Q),V=j.length,ce=l.end),l.next()):f(L,te,j,x,Z);if(Z>=0&&V>0&&V<j.length&&d(j,x,L,V,L,ce,Z,Q),j.reverse(),x.reverse(),Z>-1&&V>0){let pe=h(O);K=vb(O,j,x,0,j.length,0,F-L,pe,pe)}else K=m(O,j,x,F-L,Q-F)}C.push(K),R.push(J)}function h(A){return(E,C,R)=>{let D=0,N=E.length-1,L,F;if(N>=0&&(L=E[N])instanceof Ai){if(!N&&L.type==A&&L.length==R)return L;(F=L.prop(on.lookAhead))&&(D=C[N]+L.length+F)}return m(A,E,C,R,D)}}function d(A,E,C,R,D,N,L,F){let P=[],Q=[];for(;A.length>R;)P.push(A.pop()),Q.push(E.pop()+C-D);A.push(m(i.types[L],P,Q,N-D,F-N)),E.push(D-C)}function m(A,E,C,R,D=0,N){if(c){let L=[on.contextHash,c];N=N?[L].concat(N):[L]}if(D>25){let L=[on.lookAhead,D];N=N?[L].concat(N):[L]}return new Ai(A,E,C,R,N)}function p(A,E){let C=l.fork(),R=0,D=0,N=0,L=C.end-s,F={size:0,start:0,skip:0};e:for(let P=C.pos-A;C.pos>P;){let Q=C.size;if(C.id==E&&Q>=0){F.size=R,F.start=D,F.skip=N,N+=4,R+=4,C.next();continue}let O=C.pos-Q;if(Q<0||O<P||C.start<L)break;let K=C.id>=o?4:0,X=C.start;for(C.next();C.pos>O;){if(C.size<0)if(C.size==-3)K+=4;else break e;else C.id>=o&&(K+=4);C.next()}D=X,R+=Q,N+=K}return(E<0||R==A)&&(F.size=R,F.start=D,F.skip=N),F.size>4?F:void 0}function _(A,E,C){let{id:R,start:D,end:N,size:L}=l;if(l.next(),L>=0&&R<o){let F=C;if(L>4){let P=l.pos-(L-4);for(;l.pos>P;)C=_(A,E,C)}E[--C]=F,E[--C]=N-A,E[--C]=D-A,E[--C]=R}else L==-3?c=R:L==-4&&(u=R);return C}let v=[],y=[];for(;l.pos>0;)f(n.start||0,n.bufferStart||0,v,y,-1);let w=(e=n.length)!==null&&e!==void 0?e:v.length?y[0]+v[0].length:0;return new Ai(a[n.topID],v.reverse(),y.reverse(),w)}const Sw=new WeakMap;function Rh(n,e){if(!n.isAnonymous||e instanceof oa||e.type!=n)return 1;let t=Sw.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=n||!(i instanceof Ai)){t=1;break}t+=Rh(n,i)}Sw.set(e,t)}return t}function vb(n,e,t,i,s,r,o,l,a){let c=0;for(let m=i;m<s;m++)c+=Rh(n,e[m]);let u=Math.ceil(c*1.5/8),f=[],h=[];function d(m,p,_,v,y){for(let w=_;w<v;){let A=w,E=p[w],C=Rh(n,m[w]);for(w++;w<v;w++){let R=Rh(n,m[w]);if(C+R>=u)break;C+=R}if(w==A+1){if(C>u){let R=m[A];d(R.children,R.positions,0,R.children.length,p[A]+y);continue}f.push(m[A])}else{let R=p[w-1]+m[w-1].length-E;f.push(vb(n,m,p,A,w,E,R,null,a))}h.push(E+y-r)}}return d(e,t,i,s,0),(l||a)(f,h,o)}class Nl{constructor(e,t,i,s,r=!1,o=!1){this.from=e,this.to=t,this.tree=i,this.offset=s,this.open=(r?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],i=!1){let s=[new Nl(0,e.length,e,0,!1,i)];for(let r of t)r.to>e.length&&s.push(r);return s}static applyChanges(e,t,i=128){if(!t.length)return e;let s=[],r=1,o=e.length?e[0]:null;for(let l=0,a=0,c=0;;l++){let u=l<t.length?t[l]:null,f=u?u.fromA:1e9;if(f-a>=i)for(;o&&o.from<f;){let h=o;if(a>=h.from||f<=h.to||c){let d=Math.max(h.from,a)-c,m=Math.min(h.to,f)-c;h=d>=m?null:new Nl(d,m,h.tree,h.offset+c,l>0,!!u)}if(h&&s.push(h),o.to>f)break;o=r<e.length?e[r++]:null}if(!u)break;a=u.toA,c=u.toA-u.toB}return s}}class F5{startParse(e,t,i){return typeof e=="string"&&(e=new KQ(e)),i=i?i.length?i.map(s=>new Gp(s.from,s.to)):[new Gp(0,0)]:[new Gp(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let s=this.startParse(e,t,i);for(;;){let r=s.advance();if(r)return r}}}class KQ{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new on({perNode:!0});let XQ=0;class Dr{constructor(e,t,i){this.set=e,this.base=t,this.modified=i,this.id=XQ++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let t=new Dr([],null,[]);if(t.set.push(t),e)for(let i of e.set)t.set.push(i);return t}static defineModifier(){let e=new kd;return t=>t.modified.indexOf(e)>-1?t:kd.get(t.base||t,t.modified.concat(e).sort((i,s)=>i.id-s.id))}}let QQ=0;class kd{constructor(){this.instances=[],this.id=QQ++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find(l=>l.base==e&&YQ(t,l.modified));if(i)return i;let s=[],r=new Dr(s,e,t);for(let l of t)l.instances.push(r);let o=JQ(t);for(let l of e.set)if(!l.modified.length)for(let a of o)s.push(kd.get(l,a));return r}}function YQ(n,e){return n.length==e.length&&n.every((t,i)=>t==e[i])}function JQ(n){let e=[[]];for(let t=0;t<n.length;t++)for(let i=0,s=e.length;i<s;i++)e.push(e[i].concat(n[t]));return e.sort((t,i)=>i.length-t.length)}function j5(n){let e=Object.create(null);for(let t in n){let i=n[t];Array.isArray(i)||(i=[i]);for(let s of t.split(" "))if(s){let r=[],o=2,l=s;for(let f=0;;){if(l=="..."&&f>0&&f+3==s.length){o=1;break}let h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!h)throw new RangeError("Invalid path: "+s);if(r.push(h[0]=="*"?"":h[0][0]=='"'?JSON.parse(h[0]):h[0]),f+=h[0].length,f==s.length)break;let d=s[f++];if(f==s.length&&d=="!"){o=0;break}if(d!="/")throw new RangeError("Invalid path: "+s);l=s.slice(f)}let a=r.length-1,c=r[a];if(!c)throw new RangeError("Invalid path: "+s);let u=new Td(i,o,a>0?r.slice(0,a):null);e[c]=u.sort(e[c])}}return H5.add(e)}const H5=new on;class Td{constructor(e,t,i,s){this.tags=e,this.mode=t,this.context=i,this.next=s}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Td.empty=new Td([],2,null);function q5(n,e){let t=Object.create(null);for(let r of n)if(!Array.isArray(r.tag))t[r.tag.id]=r.class;else for(let o of r.tag)t[o.id]=r.class;let{scope:i,all:s=null}=e||{};return{style:r=>{let o=s;for(let l of r)for(let a of l.set){let c=t[a.id];if(c){o=o?o+" "+c:c;break}}return o},scope:i}}function ZQ(n,e){let t=null;for(let i of n){let s=i.style(e);s&&(t=t?t+" "+s:s)}return t}function xQ(n,e,t,i=0,s=n.length){let r=new $Q(i,Array.isArray(e)?e:[e],t);r.highlightRange(n.cursor(),i,s,"",r.highlighters),r.flush(s)}class $Q{constructor(e,t,i){this.at=e,this.highlighters=t,this.span=i,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,i,s,r){let{type:o,from:l,to:a}=e;if(l>=i||a<=t)return;o.isTop&&(r=this.highlighters.filter(d=>!d.scope||d.scope(o)));let c=s,u=eY(e)||Td.empty,f=ZQ(r,u.tags);if(f&&(c&&(c+=" "),c+=f,u.mode==1&&(s+=(s?" ":"")+f)),this.startSpan(e.from,c),u.opaque)return;let h=e.tree&&e.tree.prop(on.mounted);if(h&&h.overlay){let d=e.node.enter(h.overlay[0].from+l,1),m=this.highlighters.filter(_=>!_.scope||_.scope(h.tree.type)),p=e.firstChild();for(let _=0,v=l;;_++){let y=_<h.overlay.length?h.overlay[_]:null,w=y?y.from+l:a,A=Math.max(t,v),E=Math.min(i,w);if(A<E&&p)for(;e.from<E&&(this.highlightRange(e,A,E,s,r),this.startSpan(Math.min(E,e.to),c),!(e.to>=w||!e.nextSibling())););if(!y||w>i)break;v=y.to+l,v>t&&(this.highlightRange(d.cursor(),Math.max(t,y.from+l),Math.min(i,v),s,m),this.startSpan(v,c))}p&&e.parent()}else if(e.firstChild()){do if(!(e.to<=t)){if(e.from>=i)break;this.highlightRange(e,t,i,s,r),this.startSpan(Math.min(i,e.to),c)}while(e.nextSibling());e.parent()}}}function eY(n){let e=n.type.prop(H5);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}const dt=Dr.define,nh=dt(),To=dt(),Ew=dt(To),ww=dt(To),Io=dt(),ih=dt(Io),Kp=dt(Io),Rr=dt(),fl=dt(Rr),Tr=dt(),Ir=dt(),o0=dt(),Pc=dt(o0),sh=dt(),ct={comment:nh,lineComment:dt(nh),blockComment:dt(nh),docComment:dt(nh),name:To,variableName:dt(To),typeName:Ew,tagName:dt(Ew),propertyName:ww,attributeName:dt(ww),className:dt(To),labelName:dt(To),namespace:dt(To),macroName:dt(To),literal:Io,string:ih,docString:dt(ih),character:dt(ih),attributeValue:dt(ih),number:Kp,integer:dt(Kp),float:dt(Kp),bool:dt(Io),regexp:dt(Io),escape:dt(Io),color:dt(Io),url:dt(Io),keyword:Tr,self:dt(Tr),null:dt(Tr),atom:dt(Tr),unit:dt(Tr),modifier:dt(Tr),operatorKeyword:dt(Tr),controlKeyword:dt(Tr),definitionKeyword:dt(Tr),moduleKeyword:dt(Tr),operator:Ir,derefOperator:dt(Ir),arithmeticOperator:dt(Ir),logicOperator:dt(Ir),bitwiseOperator:dt(Ir),compareOperator:dt(Ir),updateOperator:dt(Ir),definitionOperator:dt(Ir),typeOperator:dt(Ir),controlOperator:dt(Ir),punctuation:o0,separator:dt(o0),bracket:Pc,angleBracket:dt(Pc),squareBracket:dt(Pc),paren:dt(Pc),brace:dt(Pc),content:Rr,heading:fl,heading1:dt(fl),heading2:dt(fl),heading3:dt(fl),heading4:dt(fl),heading5:dt(fl),heading6:dt(fl),contentSeparator:dt(Rr),list:dt(Rr),quote:dt(Rr),emphasis:dt(Rr),strong:dt(Rr),link:dt(Rr),monospace:dt(Rr),strikethrough:dt(Rr),inserted:dt(),deleted:dt(),changed:dt(),invalid:dt(),meta:sh,documentMeta:dt(sh),annotation:dt(sh),processingInstruction:dt(sh),definition:Dr.defineModifier(),constant:Dr.defineModifier(),function:Dr.defineModifier(),standard:Dr.defineModifier(),local:Dr.defineModifier(),special:Dr.defineModifier()};q5([{tag:ct.link,class:"tok-link"},{tag:ct.heading,class:"tok-heading"},{tag:ct.emphasis,class:"tok-emphasis"},{tag:ct.strong,class:"tok-strong"},{tag:ct.keyword,class:"tok-keyword"},{tag:ct.atom,class:"tok-atom"},{tag:ct.bool,class:"tok-bool"},{tag:ct.url,class:"tok-url"},{tag:ct.labelName,class:"tok-labelName"},{tag:ct.inserted,class:"tok-inserted"},{tag:ct.deleted,class:"tok-deleted"},{tag:ct.literal,class:"tok-literal"},{tag:ct.string,class:"tok-string"},{tag:ct.number,class:"tok-number"},{tag:[ct.regexp,ct.escape,ct.special(ct.string)],class:"tok-string2"},{tag:ct.variableName,class:"tok-variableName"},{tag:ct.local(ct.variableName),class:"tok-variableName tok-local"},{tag:ct.definition(ct.variableName),class:"tok-variableName tok-definition"},{tag:ct.special(ct.variableName),class:"tok-variableName2"},{tag:ct.definition(ct.propertyName),class:"tok-propertyName tok-definition"},{tag:ct.typeName,class:"tok-typeName"},{tag:ct.namespace,class:"tok-namespace"},{tag:ct.className,class:"tok-className"},{tag:ct.macroName,class:"tok-macroName"},{tag:ct.propertyName,class:"tok-propertyName"},{tag:ct.operator,class:"tok-operator"},{tag:ct.comment,class:"tok-comment"},{tag:ct.meta,class:"tok-meta"},{tag:ct.invalid,class:"tok-invalid"},{tag:ct.punctuation,class:"tok-punctuation"}]);var Xp;const Ea=new on;function tY(n){return Tt.define({combine:n?e=>e.concat(n):void 0})}const nY=new on;class pr{constructor(e,t,i=[],s=""){this.data=e,this.name=s,ln.prototype.hasOwnProperty("tree")||Object.defineProperty(ln.prototype,"tree",{get(){return ms(this)}}),this.parser=t,this.extension=[tl.of(this),ln.languageData.of((r,o,l)=>{let a=Aw(r,o,l),c=a.type.prop(Ea);if(!c)return[];let u=r.facet(c),f=a.type.prop(nY);if(f){let h=a.resolve(o-a.from,l);for(let d of f)if(d.test(h,r)){let m=r.facet(d.facet);return d.type=="replace"?m:m.concat(u)}}return u})].concat(i)}isActiveAt(e,t,i=-1){return Aw(e,t,i).type.prop(Ea)==this.data}findRegions(e){let t=e.facet(tl);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[],s=(r,o)=>{if(r.prop(Ea)==this.data){i.push({from:o,to:o+r.length});return}let l=r.prop(on.mounted);if(l){if(l.tree.prop(Ea)==this.data){if(l.overlay)for(let a of l.overlay)i.push({from:a.from+o,to:a.to+o});else i.push({from:o,to:o+r.length});return}else if(l.overlay){let a=i.length;if(s(l.tree,l.overlay[0].from+o),i.length>a)return}}for(let a=0;a<r.children.length;a++){let c=r.children[a];c instanceof Ai&&s(c,r.positions[a]+o)}};return s(ms(e),0),i}get allowsNesting(){return!0}}pr.setState=en.define();function Aw(n,e,t){let i=n.facet(tl),s=ms(n).topNode;if(!i||i.allowsNesting)for(let r=s;r;r=r.enter(e,t,Yi.ExcludeBuffers))r.type.isTop&&(s=r);return s}class Id extends pr{constructor(e,t,i){super(e,t,[],i),this.parser=t}static define(e){let t=tY(e.languageData);return new Id(t,e.parser.configure({props:[Ea.add(i=>i.isTop?t:void 0)]}),e.name)}configure(e,t){return new Id(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function ms(n){let e=n.field(pr.state,!1);return e?e.tree:Ai.empty}class iY{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}}let Mc=null;class Od{constructor(e,t,i=[],s,r,o,l,a){this.parser=e,this.state=t,this.fragments=i,this.tree=s,this.treeLen=r,this.viewport=o,this.skipped=l,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,i){return new Od(e,t,[],Ai.empty,0,i,[],null)}startParse(){return this.parser.startParse(new iY(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=Ai.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let s=Date.now()+e;e=()=>Date.now()>s}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let s=this.parse.advance();if(s)if(this.fragments=this.withoutTempSkipped(Nl.addTree(s,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=s,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Nl.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=Mc;Mc=this;try{return e()}finally{Mc=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=Cw(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:s,treeLen:r,viewport:o,skipped:l}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((c,u,f,h)=>a.push({fromA:c,toA:u,fromB:f,toB:h})),i=Nl.applyChanges(i,a),s=Ai.empty,r=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){l=[];for(let c of this.skipped){let u=e.mapPos(c.from,1),f=e.mapPos(c.to,-1);u<f&&l.push({from:u,to:f})}}}return new Od(this.parser,t,i,s,r,o,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:s,to:r}=this.skipped[i];s<e.to&&r>e.from&&(this.fragments=Cw(this.fragments,s,r),this.skipped.splice(i--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends F5{createParse(t,i,s){let r=s[0].from,o=s[s.length-1].to;return{parsedPos:r,advance(){let a=Mc;if(a){for(let c of s)a.tempSkipped.push(c);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=o,new Ai(Bs.none,[],[],o-r)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return Mc}}function Cw(n,e,t){return Nl.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class nc{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,i)||t.takeTree(),new nc(t)}static init(e){let t=Math.min(3e3,e.doc.length),i=Od.create(e.facet(tl).parser,e,{from:0,to:t});return i.work(20,t)||i.takeTree(),new nc(i)}}pr.state=Ui.define({create:nc.init,update(n,e){for(let t of e.effects)if(t.is(pr.setState))return t.value;return e.startState.facet(tl)!=e.state.facet(tl)?nc.init(e.state):n.apply(e)}});let z5=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(z5=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:500-100})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const Qp=typeof navigator<"u"&&(!((Xp=navigator.scheduling)===null||Xp===void 0)&&Xp.isInputPending)?()=>navigator.scheduling.isInputPending():null,sY=ki.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(pr.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(pr.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=z5(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:s}}=this.view,r=i.field(pr.state);if(r.tree==r.context.tree&&r.context.isDone(s+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!Qp?Math.max(25,e.timeRemaining()-5):1e9),l=r.context.treeLen<s&&i.doc.length>s+1e3,a=r.context.work(()=>Qp&&Qp()||Date.now()>o,s+(l?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(r.context.takeTree(),this.view.dispatch({effects:pr.setState.of(new nc(r.context))})),this.chunkBudget>0&&!(a&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(r.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>Hs(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),tl=Tt.define({combine(n){return n.length?n[0]:null},enables:n=>[pr.state,sY,Ct.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]});class rY{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const oY=Tt.define(),Xm=Tt.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function Rd(n){let e=n.facet(Xm);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function zu(n,e){let t="",i=n.tabSize,s=n.facet(Xm)[0];if(s=="	"){for(;e>=i;)t+="	",e-=i;s=" "}for(let r=0;r<e;r++)t+=s;return t}function bb(n,e){n instanceof ln&&(n=new Qm(n));for(let i of n.state.facet(oY)){let s=i(n,e);if(s!==void 0)return s}let t=ms(n.state);return t?lY(n,t,e):null}class Qm{constructor(e,t={}){this.state=e,this.options=t,this.unit=Rd(e)}lineAt(e,t=1){let i=this.state.doc.lineAt(e),{simulateBreak:s,simulateDoubleBreak:r}=this.options;return s!=null&&s>=i.from&&s<=i.to?r&&s==e?{text:"",from:e}:(t<0?s<e:s<=e)?{text:i.text.slice(s-i.from),from:s}:{text:i.text.slice(0,s-i.from),from:i.from}:i}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:s}=this.lineAt(e,t);return i.slice(e-s,Math.min(i.length,e+100-s))}column(e,t=1){let{text:i,from:s}=this.lineAt(e,t),r=this.countColumn(i,e-s),o=this.options.overrideIndentation?this.options.overrideIndentation(s):-1;return o>-1&&(r+=o-this.countColumn(i,i.search(/\S|$/))),r}countColumn(e,t=e.length){return yf(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:i,from:s}=this.lineAt(e,t),r=this.options.overrideIndentation;if(r){let o=r(s);if(o>-1)return o}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const G5=new on;function lY(n,e,t){return K5(e.resolveInner(t).enterUnfinishedNodesBefore(t),t,n)}function aY(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function cY(n){let e=n.type.prop(G5);if(e)return e;let t=n.firstChild,i;if(t&&(i=t.type.prop(on.closedBy))){let s=n.lastChild,r=s&&i.indexOf(s.name)>-1;return o=>dY(o,!0,1,void 0,r&&!aY(o)?s.from:void 0)}return n.parent==null?uY:null}function K5(n,e,t){for(;n;n=n.parent){let i=cY(n);if(i)return i(_b.create(t,e,n))}return null}function uY(){return 0}class _b extends Qm{constructor(e,t,i){super(e.state,e.options),this.base=e,this.pos=t,this.node=i}static create(e,t,i){return new _b(e,t,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let e=this.state.doc.lineAt(this.node.from);for(;;){let t=this.node.resolve(e.from);for(;t.parent&&t.parent.from==t.from;)t=t.parent;if(fY(t,this.node))break;e=this.state.doc.lineAt(t.from)}return this.lineIndent(e.from)}continue(){let e=this.node.parent;return e?K5(e,this.pos,this.base):0}}function fY(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function hY(n){let e=n.node,t=e.childAfter(e.from),i=e.lastChild;if(!t)return null;let s=n.options.simulateBreak,r=n.state.doc.lineAt(t.from),o=s==null||s<=r.from?r.to:Math.min(r.to,s);for(let l=t.to;;){let a=e.childAfter(l);if(!a||a==i)return null;if(!a.type.isSkipped)return a.from<o?t:null;l=a.to}}function dY(n,e,t,i,s){let r=n.textAfter,o=r.match(/^\s*/)[0].length,l=i&&r.slice(o,o+i.length)==i||s==n.pos+o,a=e?hY(n):null;return a?l?n.column(a.from):n.column(a.to):n.baseIndent+(l?0:n.unit*t)}function kw({except:n,units:e=1}={}){return t=>{let i=n&&n.test(t.textAfter);return t.baseIndent+(i?0:e*t.unit)}}const mY=200;function pY(){return ln.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let e=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!e.length)return n;let t=n.newDoc,{head:i}=n.newSelection.main,s=t.lineAt(i);if(i>s.from+mY)return n;let r=t.sliceString(s.from,i);if(!e.some(c=>c.test(r)))return n;let{state:o}=n,l=-1,a=[];for(let{head:c}of o.selection.ranges){let u=o.doc.lineAt(c);if(u.from==l)continue;l=u.from;let f=bb(o,u.from);if(f==null)continue;let h=/^\s*/.exec(u.text)[0],d=zu(o,f);h!=d&&a.push({from:u.from,to:u.from+h.length,insert:d})}return a.length?[n,{changes:a,sequential:!0}]:n})}const gY=Tt.define(),X5=new on;function vY(n){let e=n.firstChild,t=n.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?n.to:t.from}:null}function bY(n,e,t){let i=ms(n);if(i.length<t)return null;let s=i.resolveInner(t,1),r=null;for(let o=s;o;o=o.parent){if(o.to<=t||o.from>t)continue;if(r&&o.from<e)break;let l=o.type.prop(X5);if(l&&(o.to<i.length-50||i.length==n.doc.length||!_Y(o))){let a=l(o,n);a&&a.from<=t&&a.from>=e&&a.to>t&&(r=a)}}return r}function _Y(n){let e=n.lastChild;return e&&e.to==n.to&&e.type.isError}function Dd(n,e,t){for(let i of n.facet(gY)){let s=i(n,e,t);if(s)return s}return bY(n,e,t)}function Q5(n,e){let t=e.mapPos(n.from,1),i=e.mapPos(n.to,-1);return t>=i?void 0:{from:t,to:i}}const Ym=en.define({map:Q5}),wf=en.define({map:Q5});function Y5(n){let e=[];for(let{head:t}of n.state.selection.ranges)e.some(i=>i.from<=t&&i.to>=t)||e.push(n.lineBlockAt(t));return e}const Ql=Ui.define({create(){return Lt.none},update(n,e){n=n.map(e.changes);for(let t of e.effects)t.is(Ym)&&!yY(n,t.value.from,t.value.to)?n=n.update({add:[Tw.range(t.value.from,t.value.to)]}):t.is(wf)&&(n=n.update({filter:(i,s)=>t.value.from!=i||t.value.to!=s,filterFrom:t.value.from,filterTo:t.value.to}));if(e.selection){let t=!1,{head:i}=e.selection.main;n.between(i,i,(s,r)=>{s<i&&r>i&&(t=!0)}),t&&(n=n.update({filterFrom:i,filterTo:i,filter:(s,r)=>r<=i||s>=i}))}return n},provide:n=>Ct.decorations.from(n),toJSON(n,e){let t=[];return n.between(0,e.doc.length,(i,s)=>{t.push(i,s)}),t},fromJSON(n){if(!Array.isArray(n)||n.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<n.length;){let i=n[t++],s=n[t++];if(typeof i!="number"||typeof s!="number")throw new RangeError("Invalid JSON for fold state");e.push(Tw.range(i,s))}return Lt.set(e,!0)}});function Nd(n,e,t){var i;let s=null;return(i=n.field(Ql,!1))===null||i===void 0||i.between(e,t,(r,o)=>{(!s||s.from>r)&&(s={from:r,to:o})}),s}function yY(n,e,t){let i=!1;return n.between(e,e,(s,r)=>{s==e&&r==t&&(i=!0)}),i}function J5(n,e){return n.field(Ql,!1)?e:e.concat(en.appendConfig.of($5()))}const SY=n=>{for(let e of Y5(n)){let t=Dd(n.state,e.from,e.to);if(t)return n.dispatch({effects:J5(n.state,[Ym.of(t),Z5(n,t)])}),!0}return!1},EY=n=>{if(!n.state.field(Ql,!1))return!1;let e=[];for(let t of Y5(n)){let i=Nd(n.state,t.from,t.to);i&&e.push(wf.of(i),Z5(n,i,!1))}return e.length&&n.dispatch({effects:e}),e.length>0};function Z5(n,e,t=!0){let i=n.state.doc.lineAt(e.from).number,s=n.state.doc.lineAt(e.to).number;return Ct.announce.of(`${n.state.phrase(t?"Folded lines":"Unfolded lines")} ${i} ${n.state.phrase("to")} ${s}.`)}const wY=n=>{let{state:e}=n,t=[];for(let i=0;i<e.doc.length;){let s=n.lineBlockAt(i),r=Dd(e,s.from,s.to);r&&t.push(Ym.of(r)),i=(r?n.lineBlockAt(r.to):s).to+1}return t.length&&n.dispatch({effects:J5(n.state,t)}),!!t.length},AY=n=>{let e=n.state.field(Ql,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,n.state.doc.length,(i,s)=>{t.push(wf.of({from:i,to:s}))}),n.dispatch({effects:t}),!0},CY=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:SY},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:EY},{key:"Ctrl-Alt-[",run:wY},{key:"Ctrl-Alt-]",run:AY}],kY={placeholderDOM:null,placeholderText:"…"},x5=Tt.define({combine(n){return Er(n,kY)}});function $5(n){let e=[Ql,OY];return n&&e.push(x5.of(n)),e}const Tw=Lt.replace({widget:new class extends sl{toDOM(n){let{state:e}=n,t=e.facet(x5),i=r=>{let o=n.lineBlockAt(n.posAtDOM(r.target)),l=Nd(n.state,o.from,o.to);l&&n.dispatch({effects:wf.of(l)}),r.preventDefault()};if(t.placeholderDOM)return t.placeholderDOM(n,i);let s=document.createElement("span");return s.textContent=t.placeholderText,s.setAttribute("aria-label",e.phrase("folded code")),s.title=e.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=i,s}}}),TY={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class Yp extends Kr{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function IY(n={}){let e=Object.assign(Object.assign({},TY),n),t=new Yp(e,!0),i=new Yp(e,!1),s=ki.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(tl)!=o.state.facet(tl)||o.startState.field(Ql,!1)!=o.state.field(Ql,!1)||ms(o.startState)!=ms(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let l=new Zo;for(let a of o.viewportLineBlocks){let c=Nd(o.state,a.from,a.to)?i:Dd(o.state,a.from,a.to)?t:null;c&&l.add(a.from,a.from,c)}return l.finish()}}),{domEventHandlers:r}=e;return[s,P5({class:"cm-foldGutter",markers(o){var l;return((l=o.plugin(s))===null||l===void 0?void 0:l.markers)||In.empty},initialSpacer(){return new Yp(e,!1)},domEventHandlers:Object.assign(Object.assign({},r),{click:(o,l,a)=>{if(r.click&&r.click(o,l,a))return!0;let c=Nd(o.state,l.from,l.to);if(c)return o.dispatch({effects:wf.of(c)}),!0;let u=Dd(o.state,l.from,l.to);return u?(o.dispatch({effects:Ym.of(u)}),!0):!1}})}),$5()]}const OY=Ct.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Af{constructor(e,t){this.specs=e;let i;function s(l){let a=xo.newName();return(i||(i=Object.create(null)))["."+a]=l,a}const r=typeof t.all=="string"?t.all:t.all?s(t.all):void 0,o=t.scope;this.scope=o instanceof pr?l=>l.prop(Ea)==o.data:o?l=>l==o:void 0,this.style=q5(e.map(l=>({tag:l.tag,class:l.class||s(Object.assign({},l,{tag:null}))})),{all:r}).style,this.module=i?new xo(i):null,this.themeType=t.themeType}static define(e,t){return new Af(e,t||{})}}const l0=Tt.define(),eD=Tt.define({combine(n){return n.length?[n[0]]:null}});function Jp(n){let e=n.facet(l0);return e.length?e:n.facet(eD)}function tD(n,e){let t=[DY],i;return n instanceof Af&&(n.module&&t.push(Ct.styleModule.of(n.module)),i=n.themeType),e!=null&&e.fallback?t.push(eD.of(n)):i?t.push(l0.computeN([Ct.darkTheme],s=>s.facet(Ct.darkTheme)==(i=="dark")?[n]:[])):t.push(l0.of(n)),t}class RY{constructor(e){this.markCache=Object.create(null),this.tree=ms(e.state),this.decorations=this.buildDeco(e,Jp(e.state))}update(e){let t=ms(e.state),i=Jp(e.state),s=i!=Jp(e.startState);t.length<e.view.viewport.to&&!s&&t.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(t!=this.tree||e.viewportChanged||s)&&(this.tree=t,this.decorations=this.buildDeco(e.view,i))}buildDeco(e,t){if(!t||!this.tree.length)return Lt.none;let i=new Zo;for(let{from:s,to:r}of e.visibleRanges)xQ(this.tree,t,(o,l,a)=>{i.add(o,l,this.markCache[a]||(this.markCache[a]=Lt.mark({class:a})))},s,r);return i.finish()}}const DY=Ec.high(ki.fromClass(RY,{decorations:n=>n.decorations})),NY=Af.define([{tag:ct.meta,color:"#404740"},{tag:ct.link,textDecoration:"underline"},{tag:ct.heading,textDecoration:"underline",fontWeight:"bold"},{tag:ct.emphasis,fontStyle:"italic"},{tag:ct.strong,fontWeight:"bold"},{tag:ct.strikethrough,textDecoration:"line-through"},{tag:ct.keyword,color:"#708"},{tag:[ct.atom,ct.bool,ct.url,ct.contentSeparator,ct.labelName],color:"#219"},{tag:[ct.literal,ct.inserted],color:"#164"},{tag:[ct.string,ct.deleted],color:"#a11"},{tag:[ct.regexp,ct.escape,ct.special(ct.string)],color:"#e40"},{tag:ct.definition(ct.variableName),color:"#00f"},{tag:ct.local(ct.variableName),color:"#30a"},{tag:[ct.typeName,ct.namespace],color:"#085"},{tag:ct.className,color:"#167"},{tag:[ct.special(ct.variableName),ct.macroName],color:"#256"},{tag:ct.definition(ct.propertyName),color:"#00c"},{tag:ct.comment,color:"#940"},{tag:ct.invalid,color:"#f00"}]),PY=Ct.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),nD=1e4,iD="()[]{}",sD=Tt.define({combine(n){return Er(n,{afterCursor:!0,brackets:iD,maxScanDistance:nD,renderMatch:LY})}}),MY=Lt.mark({class:"cm-matchingBracket"}),BY=Lt.mark({class:"cm-nonmatchingBracket"});function LY(n){let e=[],t=n.matched?MY:BY;return e.push(t.range(n.start.from,n.start.to)),n.end&&e.push(t.range(n.end.from,n.end.to)),e}const UY=Ui.define({create(){return Lt.none},update(n,e){if(!e.docChanged&&!e.selection)return n;let t=[],i=e.state.facet(sD);for(let s of e.state.selection.ranges){if(!s.empty)continue;let r=Br(e.state,s.head,-1,i)||s.head>0&&Br(e.state,s.head-1,1,i)||i.afterCursor&&(Br(e.state,s.head,1,i)||s.head<e.state.doc.length&&Br(e.state,s.head+1,-1,i));r&&(t=t.concat(i.renderMatch(r,e.state)))}return Lt.set(t,!0)},provide:n=>Ct.decorations.from(n)}),WY=[UY,PY];function VY(n={}){return[sD.of(n),WY]}const FY=new on;function a0(n,e,t){let i=n.prop(e<0?on.openedBy:on.closedBy);if(i)return i;if(n.name.length==1){let s=t.indexOf(n.name);if(s>-1&&s%2==(e<0?1:0))return[t[s+e]]}return null}function c0(n){let e=n.type.prop(FY);return e?e(n.node):n}function Br(n,e,t,i={}){let s=i.maxScanDistance||nD,r=i.brackets||iD,o=ms(n),l=o.resolveInner(e,t);for(let a=l;a;a=a.parent){let c=a0(a.type,t,r);if(c&&a.from<a.to){let u=c0(a);if(u&&(t>0?e>=u.from&&e<u.to:e>u.from&&e<=u.to))return jY(n,e,t,a,u,c,r)}}return HY(n,e,t,o,l.type,s,r)}function jY(n,e,t,i,s,r,o){let l=i.parent,a={from:s.from,to:s.to},c=0,u=l==null?void 0:l.cursor();if(u&&(t<0?u.childBefore(i.from):u.childAfter(i.to)))do if(t<0?u.to<=i.from:u.from>=i.to){if(c==0&&r.indexOf(u.type.name)>-1&&u.from<u.to){let f=c0(u);return{start:a,end:f?{from:f.from,to:f.to}:void 0,matched:!0}}else if(a0(u.type,t,o))c++;else if(a0(u.type,-t,o)){if(c==0){let f=c0(u);return{start:a,end:f&&f.from<f.to?{from:f.from,to:f.to}:void 0,matched:!1}}c--}}while(t<0?u.prevSibling():u.nextSibling());return{start:a,matched:!1}}function HY(n,e,t,i,s,r,o){let l=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),a=o.indexOf(l);if(a<0||a%2==0!=t>0)return null;let c={from:t<0?e-1:e,to:t>0?e+1:e},u=n.doc.iterRange(e,t>0?n.doc.length:0),f=0;for(let h=0;!u.next().done&&h<=r;){let d=u.value;t<0&&(h+=d.length);let m=e+h*t;for(let p=t>0?0:d.length-1,_=t>0?d.length:-1;p!=_;p+=t){let v=o.indexOf(d[p]);if(!(v<0||i.resolveInner(m+p,1).type!=s))if(v%2==0==t>0)f++;else{if(f==1)return{start:c,end:{from:m+p,to:m+p+1},matched:v>>1==a>>1};f--}}t>0&&(h+=d.length)}return u.done?{start:c,matched:!1}:null}const qY=Object.create(null),Iw=[Bs.none],Ow=[],zY=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])zY[n]=GY(qY,e);function Zp(n,e){Ow.indexOf(n)>-1||(Ow.push(n),console.warn(e))}function GY(n,e){let t=null;for(let r of e.split(".")){let o=n[r]||ct[r];o?typeof o=="function"?t?t=o(t):Zp(r,`Modifier ${r} used at start of tag`):t?Zp(r,`Tag ${r} used as modifier`):t=o:Zp(r,`Unknown highlighting tag ${r}`)}if(!t)return 0;let i=e.replace(/ /g,"_"),s=Bs.define({id:Iw.length,name:i,props:[j5({[i]:t})]});return Iw.push(s),s.id}const KY=n=>{let{state:e}=n,t=e.doc.lineAt(e.selection.main.head),i=Sb(n.state,t.from);return i.line?XY(n):i.block?YY(n):!1};function yb(n,e){return({state:t,dispatch:i})=>{if(t.readOnly)return!1;let s=n(e,t);return s?(i(t.update(s)),!0):!1}}const XY=yb(xY,0),QY=yb(rD,0),YY=yb((n,e)=>rD(n,e,ZY(e)),0);function Sb(n,e){let t=n.languageDataAt("commentTokens",e);return t.length?t[0]:{}}const Bc=50;function JY(n,{open:e,close:t},i,s){let r=n.sliceDoc(i-Bc,i),o=n.sliceDoc(s,s+Bc),l=/\s*$/.exec(r)[0].length,a=/^\s*/.exec(o)[0].length,c=r.length-l;if(r.slice(c-e.length,c)==e&&o.slice(a,a+t.length)==t)return{open:{pos:i-l,margin:l&&1},close:{pos:s+a,margin:a&&1}};let u,f;s-i<=2*Bc?u=f=n.sliceDoc(i,s):(u=n.sliceDoc(i,i+Bc),f=n.sliceDoc(s-Bc,s));let h=/^\s*/.exec(u)[0].length,d=/\s*$/.exec(f)[0].length,m=f.length-d-t.length;return u.slice(h,h+e.length)==e&&f.slice(m,m+t.length)==t?{open:{pos:i+h+e.length,margin:/\s/.test(u.charAt(h+e.length))?1:0},close:{pos:s-d-t.length,margin:/\s/.test(f.charAt(m-1))?1:0}}:null}function ZY(n){let e=[];for(let t of n.selection.ranges){let i=n.doc.lineAt(t.from),s=t.to<=i.to?i:n.doc.lineAt(t.to),r=e.length-1;r>=0&&e[r].to>i.from?e[r].to=s.to:e.push({from:i.from,to:s.to})}return e}function rD(n,e,t=e.selection.ranges){let i=t.map(r=>Sb(e,r.from).block);if(!i.every(r=>r))return null;let s=t.map((r,o)=>JY(e,i[o],r.from,r.to));if(n!=2&&!s.every(r=>r))return{changes:e.changes(t.map((r,o)=>s[o]?[]:[{from:r.from,insert:i[o].open+" "},{from:r.to,insert:" "+i[o].close}]))};if(n!=1&&s.some(r=>r)){let r=[];for(let o=0,l;o<s.length;o++)if(l=s[o]){let a=i[o],{open:c,close:u}=l;r.push({from:c.pos-a.open.length,to:c.pos+c.margin},{from:u.pos-u.margin,to:u.pos+a.close.length})}return{changes:r}}return null}function xY(n,e,t=e.selection.ranges){let i=[],s=-1;for(let{from:r,to:o}of t){let l=i.length,a=1e9;for(let c=r;c<=o;){let u=e.doc.lineAt(c);if(u.from>s&&(r==o||o>u.from)){s=u.from;let f=Sb(e,u.from).line;if(!f)continue;let h=/^\s*/.exec(u.text)[0].length,d=h==u.length,m=u.text.slice(h,h+f.length)==f?h:-1;h<u.text.length&&h<a&&(a=h),i.push({line:u,comment:m,token:f,indent:h,empty:d,single:!1})}c=u.to+1}if(a<1e9)for(let c=l;c<i.length;c++)i[c].indent<i[c].line.text.length&&(i[c].indent=a);i.length==l+1&&(i[l].single=!0)}if(n!=2&&i.some(r=>r.comment<0&&(!r.empty||r.single))){let r=[];for(let{line:l,token:a,indent:c,empty:u,single:f}of i)(f||!u)&&r.push({from:l.from+c,insert:a+" "});let o=e.changes(r);return{changes:o,selection:e.selection.map(o,1)}}else if(n!=1&&i.some(r=>r.comment>=0)){let r=[];for(let{line:o,comment:l,token:a}of i)if(l>=0){let c=o.from+l,u=c+a.length;o.text[u-o.from]==" "&&u++,r.push({from:c,to:u})}return{changes:r}}return null}const u0=Eo.define(),$Y=Eo.define(),eJ=Tt.define(),oD=Tt.define({combine(n){return Er(n,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(i,s)=>e(i,s)||t(i,s)})}});function tJ(n){let e=0;return n.iterChangedRanges((t,i)=>e=i),e}const Eb=Ui.define({create(){return Lr.empty},update(n,e){let t=e.state.facet(oD),i=e.annotation(u0);if(i){let a=e.docChanged?Je.single(tJ(e.changes)):void 0,c=Ps.fromTransaction(e,a),u=i.side,f=u==0?n.undone:n.done;return c?f=Md(f,f.length,t.minDepth,c):f=cD(f,e.startState.selection),new Lr(u==0?i.rest:f,u==0?f:i.rest)}let s=e.annotation($Y);if((s=="full"||s=="before")&&(n=n.isolate()),e.annotation(Di.addToHistory)===!1)return e.changes.empty?n:n.addMapping(e.changes.desc);let r=Ps.fromTransaction(e),o=e.annotation(Di.time),l=e.annotation(Di.userEvent);return r?n=n.addChanges(r,o,l,t,e):e.selection&&(n=n.addSelection(e.startState.selection,o,l,t.newGroupDelay)),(s=="full"||s=="after")&&(n=n.isolate()),n},toJSON(n){return{done:n.done.map(e=>e.toJSON()),undone:n.undone.map(e=>e.toJSON())}},fromJSON(n){return new Lr(n.done.map(Ps.fromJSON),n.undone.map(Ps.fromJSON))}});function nJ(n={}){return[Eb,oD.of(n),Ct.domEventHandlers({beforeinput(e,t){let i=e.inputType=="historyUndo"?wb:e.inputType=="historyRedo"?Pd:null;return i?(e.preventDefault(),i(t)):!1}})]}function Jm(n,e){return function({state:t,dispatch:i}){if(!e&&t.readOnly)return!1;let s=t.field(Eb,!1);if(!s)return!1;let r=s.pop(n,t,e);return r?(i(r),!0):!1}}const wb=Jm(0,!1),Pd=Jm(1,!1),iJ=Jm(0,!0),sJ=Jm(1,!0);function lD(n){return function(e){let t=e.field(Eb,!1);if(!t)return 0;let i=n==0?t.done:t.undone;return i.length-(i.length&&!i[0].changes?1:0)}}const rJ=lD(0),oJ=lD(1);class Ps{constructor(e,t,i,s,r){this.changes=e,this.effects=t,this.mapped=i,this.startSelection=s,this.selectionsAfter=r}setSelAfter(e){return new Ps(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(s=>s.toJSON())}}static fromJSON(e){return new Ps(e.changes&&Oi.fromJSON(e.changes),[],e.mapped&&Hr.fromJSON(e.mapped),e.startSelection&&Je.fromJSON(e.startSelection),e.selectionsAfter.map(Je.fromJSON))}static fromTransaction(e,t){let i=er;for(let s of e.startState.facet(eJ)){let r=s(e);r.length&&(i=i.concat(r))}return!i.length&&e.changes.empty?null:new Ps(e.changes.invert(e.startState.doc),i,void 0,t||e.startState.selection,er)}static selection(e){return new Ps(void 0,er,void 0,void 0,e)}}function Md(n,e,t,i){let s=e+1>t+20?e-t-1:0,r=n.slice(s,e);return r.push(i),r}function lJ(n,e){let t=[],i=!1;return n.iterChangedRanges((s,r)=>t.push(s,r)),e.iterChangedRanges((s,r,o,l)=>{for(let a=0;a<t.length;){let c=t[a++],u=t[a++];l>=c&&o<=u&&(i=!0)}}),i}function aJ(n,e){return n.ranges.length==e.ranges.length&&n.ranges.filter((t,i)=>t.empty!=e.ranges[i].empty).length===0}function aD(n,e){return n.length?e.length?n.concat(e):n:e}const er=[],cJ=200;function cD(n,e){if(n.length){let t=n[n.length-1],i=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-cJ));return i.length&&i[i.length-1].eq(e)?n:(i.push(e),Md(n,n.length-1,1e9,t.setSelAfter(i)))}else return[Ps.selection([e])]}function uJ(n){let e=n[n.length-1],t=n.slice();return t[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function xp(n,e){if(!n.length)return n;let t=n.length,i=er;for(;t;){let s=fJ(n[t-1],e,i);if(s.changes&&!s.changes.empty||s.effects.length){let r=n.slice(0,t);return r[t-1]=s,r}else e=s.mapped,t--,i=s.selectionsAfter}return i.length?[Ps.selection(i)]:er}function fJ(n,e,t){let i=aD(n.selectionsAfter.length?n.selectionsAfter.map(l=>l.map(e)):er,t);if(!n.changes)return Ps.selection(i);let s=n.changes.map(e),r=e.mapDesc(n.changes,!0),o=n.mapped?n.mapped.composeDesc(r):r;return new Ps(s,en.mapEffects(n.effects,e),o,n.startSelection.map(r),i)}const hJ=/^(input\.type|delete)($|\.)/;class Lr{constructor(e,t,i=0,s=void 0){this.done=e,this.undone=t,this.prevTime=i,this.prevUserEvent=s}isolate(){return this.prevTime?new Lr(this.done,this.undone):this}addChanges(e,t,i,s,r){let o=this.done,l=o[o.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!i||hJ.test(i))&&(!l.selectionsAfter.length&&t-this.prevTime<s.newGroupDelay&&s.joinToEvent(r,lJ(l.changes,e.changes))||i=="input.type.compose")?o=Md(o,o.length-1,s.minDepth,new Ps(e.changes.compose(l.changes),aD(e.effects,l.effects),l.mapped,l.startSelection,er)):o=Md(o,o.length,s.minDepth,e),new Lr(o,er,t,i)}addSelection(e,t,i,s){let r=this.done.length?this.done[this.done.length-1].selectionsAfter:er;return r.length>0&&t-this.prevTime<s&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&aJ(r[r.length-1],e)?this:new Lr(cD(this.done,e),this.undone,t,i)}addMapping(e){return new Lr(xp(this.done,e),xp(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,i){let s=e==0?this.done:this.undone;if(s.length==0)return null;let r=s[s.length-1];if(i&&r.selectionsAfter.length)return t.update({selection:r.selectionsAfter[r.selectionsAfter.length-1],annotations:u0.of({side:e,rest:uJ(s)}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(r.changes){let o=s.length==1?er:s.slice(0,s.length-1);return r.mapped&&(o=xp(o,r.mapped)),t.update({changes:r.changes,selection:r.startSelection,effects:r.effects,annotations:u0.of({side:e,rest:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Lr.empty=new Lr(er,er);const dJ=[{key:"Mod-z",run:wb,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Pd,preventDefault:!0},{linux:"Ctrl-Shift-z",run:Pd,preventDefault:!0},{key:"Mod-u",run:iJ,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:sJ,preventDefault:!0}];function wc(n,e){return Je.create(n.ranges.map(e),n.mainIndex)}function Yr(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function wr({state:n,dispatch:e},t){let i=wc(n.selection,t);return i.eq(n.selection)?!1:(e(Yr(n,i)),!0)}function Zm(n,e){return Je.cursor(e?n.to:n.from)}function uD(n,e){return wr(n,t=>t.empty?n.moveByChar(t,e):Zm(t,e))}function ps(n){return n.textDirectionAt(n.state.selection.main.head)==si.LTR}const fD=n=>uD(n,!ps(n)),hD=n=>uD(n,ps(n));function dD(n,e){return wr(n,t=>t.empty?n.moveByGroup(t,e):Zm(t,e))}const mJ=n=>dD(n,!ps(n)),pJ=n=>dD(n,ps(n));function gJ(n,e,t){if(e.type.prop(t))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function xm(n,e,t){let i=ms(n).resolveInner(e.head),s=t?on.closedBy:on.openedBy;for(let a=e.head;;){let c=t?i.childAfter(a):i.childBefore(a);if(!c)break;gJ(n,c,s)?i=c:a=t?c.to:c.from}let r=i.type.prop(s),o,l;return r&&(o=t?Br(n,i.from,1):Br(n,i.to,-1))&&o.matched?l=t?o.end.to:o.end.from:l=t?i.to:i.from,Je.cursor(l,t?-1:1)}const vJ=n=>wr(n,e=>xm(n.state,e,!ps(n))),bJ=n=>wr(n,e=>xm(n.state,e,ps(n)));function mD(n,e){return wr(n,t=>{if(!t.empty)return Zm(t,e);let i=n.moveVertically(t,e);return i.head!=t.head?i:n.moveToLineBoundary(t,e)})}const pD=n=>mD(n,!1),gD=n=>mD(n,!0);function vD(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,t=0,i=0,s;if(e){for(let r of n.state.facet(Ct.scrollMargins)){let o=r(n);o!=null&&o.top&&(t=Math.max(o==null?void 0:o.top,t)),o!=null&&o.bottom&&(i=Math.max(o==null?void 0:o.bottom,i))}s=n.scrollDOM.clientHeight-t-i}else s=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:i,selfScroll:e,height:Math.max(n.defaultLineHeight,s-5)}}function bD(n,e){let t=vD(n),{state:i}=n,s=wc(i.selection,o=>o.empty?n.moveVertically(o,e,t.height):Zm(o,e));if(s.eq(i.selection))return!1;let r;if(t.selfScroll){let o=n.coordsAtPos(i.selection.main.head),l=n.scrollDOM.getBoundingClientRect(),a=l.top+t.marginTop,c=l.bottom-t.marginBottom;o&&o.top>a&&o.bottom<c&&(r=Ct.scrollIntoView(s.main.head,{y:"start",yMargin:o.top-a}))}return n.dispatch(Yr(i,s),{effects:r}),!0}const Rw=n=>bD(n,!1),f0=n=>bD(n,!0);function rl(n,e,t){let i=n.lineBlockAt(e.head),s=n.moveToLineBoundary(e,t);if(s.head==e.head&&s.head!=(t?i.to:i.from)&&(s=n.moveToLineBoundary(e,t,!1)),!t&&s.head==i.from&&i.length){let r=/^\s*/.exec(n.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;r&&e.head!=i.from+r&&(s=Je.cursor(i.from+r))}return s}const _J=n=>wr(n,e=>rl(n,e,!0)),yJ=n=>wr(n,e=>rl(n,e,!1)),SJ=n=>wr(n,e=>rl(n,e,!ps(n))),EJ=n=>wr(n,e=>rl(n,e,ps(n))),wJ=n=>wr(n,e=>Je.cursor(n.lineBlockAt(e.head).from,1)),AJ=n=>wr(n,e=>Je.cursor(n.lineBlockAt(e.head).to,-1));function CJ(n,e,t){let i=!1,s=wc(n.selection,r=>{let o=Br(n,r.head,-1)||Br(n,r.head,1)||r.head>0&&Br(n,r.head-1,1)||r.head<n.doc.length&&Br(n,r.head+1,-1);if(!o||!o.end)return r;i=!0;let l=o.start.from==r.head?o.end.to:o.end.from;return t?Je.range(r.anchor,l):Je.cursor(l)});return i?(e(Yr(n,s)),!0):!1}const kJ=({state:n,dispatch:e})=>CJ(n,e,!1);function or(n,e){let t=wc(n.state.selection,i=>{let s=e(i);return Je.range(i.anchor,s.head,s.goalColumn,s.bidiLevel||void 0)});return t.eq(n.state.selection)?!1:(n.dispatch(Yr(n.state,t)),!0)}function _D(n,e){return or(n,t=>n.moveByChar(t,e))}const yD=n=>_D(n,!ps(n)),SD=n=>_D(n,ps(n));function ED(n,e){return or(n,t=>n.moveByGroup(t,e))}const TJ=n=>ED(n,!ps(n)),IJ=n=>ED(n,ps(n)),OJ=n=>or(n,e=>xm(n.state,e,!ps(n))),RJ=n=>or(n,e=>xm(n.state,e,ps(n)));function wD(n,e){return or(n,t=>n.moveVertically(t,e))}const AD=n=>wD(n,!1),CD=n=>wD(n,!0);function kD(n,e){return or(n,t=>n.moveVertically(t,e,vD(n).height))}const Dw=n=>kD(n,!1),Nw=n=>kD(n,!0),DJ=n=>or(n,e=>rl(n,e,!0)),NJ=n=>or(n,e=>rl(n,e,!1)),PJ=n=>or(n,e=>rl(n,e,!ps(n))),MJ=n=>or(n,e=>rl(n,e,ps(n))),BJ=n=>or(n,e=>Je.cursor(n.lineBlockAt(e.head).from)),LJ=n=>or(n,e=>Je.cursor(n.lineBlockAt(e.head).to)),Pw=({state:n,dispatch:e})=>(e(Yr(n,{anchor:0})),!0),Mw=({state:n,dispatch:e})=>(e(Yr(n,{anchor:n.doc.length})),!0),Bw=({state:n,dispatch:e})=>(e(Yr(n,{anchor:n.selection.main.anchor,head:0})),!0),Lw=({state:n,dispatch:e})=>(e(Yr(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),UJ=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),WJ=({state:n,dispatch:e})=>{let t=ep(n).map(({from:i,to:s})=>Je.range(i,Math.min(s+1,n.doc.length)));return e(n.update({selection:Je.create(t),userEvent:"select"})),!0},VJ=({state:n,dispatch:e})=>{let t=wc(n.selection,i=>{var s;let r=ms(n).resolveInner(i.head,1);for(;!(r.from<i.from&&r.to>=i.to||r.to>i.to&&r.from<=i.from||!(!((s=r.parent)===null||s===void 0)&&s.parent));)r=r.parent;return Je.range(r.to,r.from)});return e(Yr(n,t)),!0},FJ=({state:n,dispatch:e})=>{let t=n.selection,i=null;return t.ranges.length>1?i=Je.create([t.main]):t.main.empty||(i=Je.create([Je.cursor(t.main.head)])),i?(e(Yr(n,i)),!0):!1};function $m(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:i}=n,s=i.changeByRange(r=>{let{from:o,to:l}=r;if(o==l){let a=e(o);a<o?(t="delete.backward",a=rh(n,a,!1)):a>o&&(t="delete.forward",a=rh(n,a,!0)),o=Math.min(o,a),l=Math.max(l,a)}else o=rh(n,o,!1),l=rh(n,l,!0);return o==l?{range:r}:{changes:{from:o,to:l},range:Je.cursor(o)}});return s.changes.empty?!1:(n.dispatch(i.update(s,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?Ct.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function rh(n,e,t){if(n instanceof Ct)for(let i of n.state.facet(Ct.atomicRanges).map(s=>s(n)))i.between(e,e,(s,r)=>{s<e&&r>e&&(e=t?r:s)});return e}const TD=(n,e)=>$m(n,t=>{let{state:i}=n,s=i.doc.lineAt(t),r,o;if(!e&&t>s.from&&t<s.from+200&&!/[^ \t]/.test(r=s.text.slice(0,t-s.from))){if(r[r.length-1]=="	")return t-1;let l=yf(r,i.tabSize),a=l%Rd(i)||Rd(i);for(let c=0;c<a&&r[r.length-1-c]==" ";c++)t--;o=t}else o=Es(s.text,t-s.from,e,e)+s.from,o==t&&s.number!=(e?i.doc.lines:1)&&(o+=e?1:-1);return o}),h0=n=>TD(n,!1),ID=n=>TD(n,!0),OD=(n,e)=>$m(n,t=>{let i=t,{state:s}=n,r=s.doc.lineAt(i),o=s.charCategorizer(i);for(let l=null;;){if(i==(e?r.to:r.from)){i==t&&r.number!=(e?s.doc.lines:1)&&(i+=e?1:-1);break}let a=Es(r.text,i-r.from,e)+r.from,c=r.text.slice(Math.min(i,a)-r.from,Math.max(i,a)-r.from),u=o(c);if(l!=null&&u!=l)break;(c!=" "||i!=t)&&(l=u),i=a}return i}),RD=n=>OD(n,!1),jJ=n=>OD(n,!0),DD=n=>$m(n,e=>{let t=n.lineBlockAt(e).to;return e<t?t:Math.min(n.state.doc.length,e+1)}),HJ=n=>$m(n,e=>{let t=n.lineBlockAt(e).from;return e>t?t:Math.max(0,e-1)}),qJ=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:Tn.of(["",""])},range:Je.cursor(i.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},zJ=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(i=>{if(!i.empty||i.from==0||i.from==n.doc.length)return{range:i};let s=i.from,r=n.doc.lineAt(s),o=s==r.from?s-1:Es(r.text,s-r.from,!1)+r.from,l=s==r.to?s+1:Es(r.text,s-r.from,!0)+r.from;return{changes:{from:o,to:l,insert:n.doc.slice(s,l).append(n.doc.slice(o,s))},range:Je.cursor(l)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function ep(n){let e=[],t=-1;for(let i of n.selection.ranges){let s=n.doc.lineAt(i.from),r=n.doc.lineAt(i.to);if(!i.empty&&i.to==r.from&&(r=n.doc.lineAt(i.to-1)),t>=s.number){let o=e[e.length-1];o.to=r.to,o.ranges.push(i)}else e.push({from:s.from,to:r.to,ranges:[i]});t=r.number+1}return e}function ND(n,e,t){if(n.readOnly)return!1;let i=[],s=[];for(let r of ep(n)){if(t?r.to==n.doc.length:r.from==0)continue;let o=n.doc.lineAt(t?r.to+1:r.from-1),l=o.length+1;if(t){i.push({from:r.to,to:o.to},{from:r.from,insert:o.text+n.lineBreak});for(let a of r.ranges)s.push(Je.range(Math.min(n.doc.length,a.anchor+l),Math.min(n.doc.length,a.head+l)))}else{i.push({from:o.from,to:r.from},{from:r.to,insert:n.lineBreak+o.text});for(let a of r.ranges)s.push(Je.range(a.anchor-l,a.head-l))}}return i.length?(e(n.update({changes:i,scrollIntoView:!0,selection:Je.create(s,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const GJ=({state:n,dispatch:e})=>ND(n,e,!1),KJ=({state:n,dispatch:e})=>ND(n,e,!0);function PD(n,e,t){if(n.readOnly)return!1;let i=[];for(let s of ep(n))t?i.push({from:s.from,insert:n.doc.slice(s.from,s.to)+n.lineBreak}):i.push({from:s.to,insert:n.lineBreak+n.doc.slice(s.from,s.to)});return e(n.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const XJ=({state:n,dispatch:e})=>PD(n,e,!1),QJ=({state:n,dispatch:e})=>PD(n,e,!0),YJ=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(ep(e).map(({from:s,to:r})=>(s>0?s--:r<e.doc.length&&r++,{from:s,to:r}))),i=wc(e.selection,s=>n.moveVertically(s,!0)).map(t);return n.dispatch({changes:t,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function JJ(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=ms(n).resolveInner(e),i=t.childBefore(e),s=t.childAfter(e),r;return i&&s&&i.to<=e&&s.from>=e&&(r=i.type.prop(on.closedBy))&&r.indexOf(s.name)>-1&&n.doc.lineAt(i.to).from==n.doc.lineAt(s.from).from?{from:i.to,to:s.from}:null}const ZJ=MD(!1),xJ=MD(!0);function MD(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange(s=>{let{from:r,to:o}=s,l=e.doc.lineAt(r),a=!n&&r==o&&JJ(e,r);n&&(r=o=(o<=l.to?l:e.doc.lineAt(o)).to);let c=new Qm(e,{simulateBreak:r,simulateDoubleBreak:!!a}),u=bb(c,r);for(u==null&&(u=/^\s*/.exec(e.doc.lineAt(r).text)[0].length);o<l.to&&/\s/.test(l.text[o-l.from]);)o++;a?{from:r,to:o}=a:r>l.from&&r<l.from+100&&!/\S/.test(l.text.slice(0,r))&&(r=l.from);let f=["",zu(e,u)];return a&&f.push(zu(e,c.lineIndent(l.from,-1))),{changes:{from:r,to:o,insert:Tn.of(f)},range:Je.cursor(r+1+f[1].length)}});return t(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function Ab(n,e){let t=-1;return n.changeByRange(i=>{let s=[];for(let o=i.from;o<=i.to;){let l=n.doc.lineAt(o);l.number>t&&(i.empty||i.to>l.from)&&(e(l,s,i),t=l.number),o=l.to+1}let r=n.changes(s);return{changes:s,range:Je.range(r.mapPos(i.anchor,1),r.mapPos(i.head,1))}})}const $J=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),i=new Qm(n,{overrideIndentation:r=>{let o=t[r];return o??-1}}),s=Ab(n,(r,o,l)=>{let a=bb(i,r.from);if(a==null)return;/\S/.test(r.text)||(a=0);let c=/^\s*/.exec(r.text)[0],u=zu(n,a);(c!=u||l.from<r.from+c.length)&&(t[r.from]=a,o.push({from:r.from,to:r.from+c.length,insert:u}))});return s.changes.empty||e(n.update(s,{userEvent:"indent"})),!0},BD=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(Ab(n,(t,i)=>{i.push({from:t.from,insert:n.facet(Xm)})}),{userEvent:"input.indent"})),!0),LD=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(Ab(n,(t,i)=>{let s=/^\s*/.exec(t.text)[0];if(!s)return;let r=yf(s,n.tabSize),o=0,l=zu(n,Math.max(0,r-Rd(n)));for(;o<s.length&&o<l.length&&s.charCodeAt(o)==l.charCodeAt(o);)o++;i.push({from:t.from+o,to:t.from+s.length,insert:l.slice(o)})}),{userEvent:"delete.dedent"})),!0),eZ=[{key:"Ctrl-b",run:fD,shift:yD,preventDefault:!0},{key:"Ctrl-f",run:hD,shift:SD},{key:"Ctrl-p",run:pD,shift:AD},{key:"Ctrl-n",run:gD,shift:CD},{key:"Ctrl-a",run:wJ,shift:BJ},{key:"Ctrl-e",run:AJ,shift:LJ},{key:"Ctrl-d",run:ID},{key:"Ctrl-h",run:h0},{key:"Ctrl-k",run:DD},{key:"Ctrl-Alt-h",run:RD},{key:"Ctrl-o",run:qJ},{key:"Ctrl-t",run:zJ},{key:"Ctrl-v",run:f0}],tZ=[{key:"ArrowLeft",run:fD,shift:yD,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:mJ,shift:TJ,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:SJ,shift:PJ,preventDefault:!0},{key:"ArrowRight",run:hD,shift:SD,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:pJ,shift:IJ,preventDefault:!0},{mac:"Cmd-ArrowRight",run:EJ,shift:MJ,preventDefault:!0},{key:"ArrowUp",run:pD,shift:AD,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Pw,shift:Bw},{mac:"Ctrl-ArrowUp",run:Rw,shift:Dw},{key:"ArrowDown",run:gD,shift:CD,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Mw,shift:Lw},{mac:"Ctrl-ArrowDown",run:f0,shift:Nw},{key:"PageUp",run:Rw,shift:Dw},{key:"PageDown",run:f0,shift:Nw},{key:"Home",run:yJ,shift:NJ,preventDefault:!0},{key:"Mod-Home",run:Pw,shift:Bw},{key:"End",run:_J,shift:DJ,preventDefault:!0},{key:"Mod-End",run:Mw,shift:Lw},{key:"Enter",run:ZJ},{key:"Mod-a",run:UJ},{key:"Backspace",run:h0,shift:h0},{key:"Delete",run:ID},{key:"Mod-Backspace",mac:"Alt-Backspace",run:RD},{key:"Mod-Delete",mac:"Alt-Delete",run:jJ},{mac:"Mod-Backspace",run:HJ},{mac:"Mod-Delete",run:DD}].concat(eZ.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),nZ=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:vJ,shift:OJ},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:bJ,shift:RJ},{key:"Alt-ArrowUp",run:GJ},{key:"Shift-Alt-ArrowUp",run:XJ},{key:"Alt-ArrowDown",run:KJ},{key:"Shift-Alt-ArrowDown",run:QJ},{key:"Escape",run:FJ},{key:"Mod-Enter",run:xJ},{key:"Alt-l",mac:"Ctrl-l",run:WJ},{key:"Mod-i",run:VJ,preventDefault:!0},{key:"Mod-[",run:LD},{key:"Mod-]",run:BD},{key:"Mod-Alt-\\",run:$J},{key:"Shift-Mod-k",run:YJ},{key:"Shift-Mod-\\",run:kJ},{key:"Mod-/",run:KY},{key:"Alt-A",run:QY}].concat(tZ),iZ={key:"Tab",run:BD,shift:LD};function Fn(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var s=t[i];typeof s=="string"?n.setAttribute(i,s):s!=null&&(n[i]=s)}e++}for(;e<arguments.length;e++)UD(n,arguments[e]);return n}function UD(n,e){if(typeof e=="string")n.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)n.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)UD(n,e[t]);else throw new RangeError("Unsupported child node: "+e)}const Uw=typeof String.prototype.normalize=="function"?n=>n.normalize("NFKD"):n=>n;class ic{constructor(e,t,i=0,s=e.length,r,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,s),this.bufferStart=i,this.normalize=r?l=>r(Uw(l)):Uw,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Xi(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=ib(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=xs(e);let s=this.normalize(t);for(let r=0,o=i;;r++){let l=s.charCodeAt(r),a=this.match(l,o);if(a)return this.value=a,this;if(r==s.length-1)break;o==i&&r<t.length&&t.charCodeAt(r)==l&&o++}}}match(e,t){let i=null;for(let s=0;s<this.matches.length;s+=2){let r=this.matches[s],o=!1;this.query.charCodeAt(r)==e&&(r==this.query.length-1?i={from:this.matches[s+1],to:t+1}:(this.matches[s]++,o=!0)),o||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:t,to:t+1}:this.matches.push(1,t)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferPos)&&(i=null),i}}typeof Symbol<"u"&&(ic.prototype[Symbol.iterator]=function(){return this});const WD={from:-1,to:-1,match:/.*/.exec("")},Cb="gm"+(/x/.unicode==null?"":"u");class VD{constructor(e,t,i,s=0,r=e.length){if(this.text=e,this.to=r,this.curLine="",this.done=!1,this.value=WD,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new FD(e,t,i,s,r);this.re=new RegExp(t,Cb+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.iter=e.iter();let o=e.lineAt(s);this.curLineStart=o.from,this.matchPos=Bd(e,s),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let i=this.curLineStart+t.index,s=i+t[0].length;if(this.matchPos=Bd(this.text,s+(i==s?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<s||i>this.value.to)&&(!this.test||this.test(i,s,t)))return this.value={from:i,to:s,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const $p=new WeakMap;class Na{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,i){let s=$p.get(e);if(!s||s.from>=i||s.to<=t){let l=new Na(t,e.sliceString(t,i));return $p.set(e,l),l}if(s.from==t&&s.to==i)return s;let{text:r,from:o}=s;return o>t&&(r=e.sliceString(t,o)+r,o=t),s.to<i&&(r+=e.sliceString(s.to,i)),$p.set(e,new Na(o,r)),new Na(t,r.slice(t-o,i-o))}}class FD{constructor(e,t,i,s,r){this.text=e,this.to=r,this.done=!1,this.value=WD,this.matchPos=Bd(e,s),this.re=new RegExp(t,Cb+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.flat=Na.get(e,s,this.chunkEnd(s+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let i=this.flat.from+t.index,s=i+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,s,t)))return this.value={from:i,to:s,match:t},this.matchPos=Bd(this.text,s+(i==s?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Na.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(VD.prototype[Symbol.iterator]=FD.prototype[Symbol.iterator]=function(){return this});function sZ(n){try{return new RegExp(n,Cb),!0}catch{return!1}}function Bd(n,e){if(e>=n.length)return e;let t=n.lineAt(e),i;for(;e<t.to&&(i=t.text.charCodeAt(e-t.from))>=56320&&i<57344;)e++;return e}function d0(n){let e=Fn("input",{class:"cm-textfield",name:"line"}),t=Fn("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),n.dispatch({effects:Ld.of(!1)}),n.focus()):s.keyCode==13&&(s.preventDefault(),i())},onsubmit:s=>{s.preventDefault(),i()}},Fn("label",n.state.phrase("Go to line"),": ",e)," ",Fn("button",{class:"cm-button",type:"submit"},n.state.phrase("go")));function i(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);if(!s)return;let{state:r}=n,o=r.doc.lineAt(r.selection.main.head),[,l,a,c,u]=s,f=c?+c.slice(1):0,h=a?+a:o.number;if(a&&u){let m=h/100;l&&(m=m*(l=="-"?-1:1)+o.number/r.doc.lines),h=Math.round(r.doc.lines*m)}else a&&l&&(h=h*(l=="-"?-1:1)+o.number);let d=r.doc.line(Math.max(1,Math.min(r.doc.lines,h)));n.dispatch({effects:Ld.of(!1),selection:Je.cursor(d.from+Math.max(0,Math.min(f,d.length))),scrollIntoView:!0}),n.focus()}return{dom:t}}const Ld=en.define(),Ww=Ui.define({create(){return!0},update(n,e){for(let t of e.effects)t.is(Ld)&&(n=t.value);return n},provide:n=>qu.from(n,e=>e?d0:null)}),rZ=n=>{let e=Hu(n,d0);if(!e){let t=[Ld.of(!0)];n.state.field(Ww,!1)==null&&t.push(en.appendConfig.of([Ww,oZ])),n.dispatch({effects:t}),e=Hu(n,d0)}return e&&e.dom.querySelector("input").focus(),!0},oZ=Ct.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),lZ={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},jD=Tt.define({combine(n){return Er(n,lZ,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function aZ(n){let e=[dZ,hZ];return n&&e.push(jD.of(n)),e}const cZ=Lt.mark({class:"cm-selectionMatch"}),uZ=Lt.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function Vw(n,e,t,i){return(t==0||n(e.sliceDoc(t-1,t))!=ti.Word)&&(i==e.doc.length||n(e.sliceDoc(i,i+1))!=ti.Word)}function fZ(n,e,t,i){return n(e.sliceDoc(t,t+1))==ti.Word&&n(e.sliceDoc(i-1,i))==ti.Word}const hZ=ki.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.selectionSet||n.docChanged||n.viewportChanged)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=n.state.facet(jD),{state:t}=n,i=t.selection;if(i.ranges.length>1)return Lt.none;let s=i.main,r,o=null;if(s.empty){if(!e.highlightWordAroundCursor)return Lt.none;let a=t.wordAt(s.head);if(!a)return Lt.none;o=t.charCategorizer(s.head),r=t.sliceDoc(a.from,a.to)}else{let a=s.to-s.from;if(a<e.minSelectionLength||a>200)return Lt.none;if(e.wholeWords){if(r=t.sliceDoc(s.from,s.to),o=t.charCategorizer(s.head),!(Vw(o,t,s.from,s.to)&&fZ(o,t,s.from,s.to)))return Lt.none}else if(r=t.sliceDoc(s.from,s.to).trim(),!r)return Lt.none}let l=[];for(let a of n.visibleRanges){let c=new ic(t.doc,r,a.from,a.to);for(;!c.next().done;){let{from:u,to:f}=c.value;if((!o||Vw(o,t,u,f))&&(s.empty&&u<=s.from&&f>=s.to?l.push(uZ.range(u,f)):(u>=s.to||f<=s.from)&&l.push(cZ.range(u,f)),l.length>e.maxMatches))return Lt.none}}return Lt.set(l)}},{decorations:n=>n.decorations}),dZ=Ct.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),mZ=({state:n,dispatch:e})=>{let{selection:t}=n,i=Je.create(t.ranges.map(s=>n.wordAt(s.head)||Je.cursor(s.head)),t.mainIndex);return i.eq(t)?!1:(e(n.update({selection:i})),!0)};function pZ(n,e){let{main:t,ranges:i}=n.selection,s=n.wordAt(t.head),r=s&&s.from==t.from&&s.to==t.to;for(let o=!1,l=new ic(n.doc,e,i[i.length-1].to);;)if(l.next(),l.done){if(o)return null;l=new ic(n.doc,e,0,Math.max(0,i[i.length-1].from-1)),o=!0}else{if(o&&i.some(a=>a.from==l.value.from))continue;if(r){let a=n.wordAt(l.value.from);if(!a||a.from!=l.value.from||a.to!=l.value.to)continue}return l.value}}const gZ=({state:n,dispatch:e})=>{let{ranges:t}=n.selection;if(t.some(r=>r.from===r.to))return mZ({state:n,dispatch:e});let i=n.sliceDoc(t[0].from,t[0].to);if(n.selection.ranges.some(r=>n.sliceDoc(r.from,r.to)!=i))return!1;let s=pZ(n,i);return s?(e(n.update({selection:n.selection.addRange(Je.range(s.from,s.to),!1),effects:Ct.scrollIntoView(s.to)})),!0):!1},tp=Tt.define({combine(n){return Er(n,{top:!1,caseSensitive:!1,literal:!1,wholeWord:!1,createPanel:e=>new OZ(e)})}});function vZ(n){return n?[tp.of(n),p0]:p0}class HD{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||sZ(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new SZ(this):new _Z(this)}getCursor(e,t=0,i){let s=e.doc?e:ln.create({doc:e});return i==null&&(i=s.doc.length),this.regexp?ba(this,s,t,i):va(this,s,t,i)}}class qD{constructor(e){this.spec=e}}function va(n,e,t,i){return new ic(e.doc,n.unquoted,t,i,n.caseSensitive?void 0:s=>s.toLowerCase(),n.wholeWord?bZ(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function bZ(n,e){return(t,i,s,r)=>((r>t||r+s.length<i)&&(r=Math.max(0,t-2),s=n.sliceString(r,Math.min(n.length,i+2))),(e(Ud(s,t-r))!=ti.Word||e(Wd(s,t-r))!=ti.Word)&&(e(Wd(s,i-r))!=ti.Word||e(Ud(s,i-r))!=ti.Word))}class _Z extends qD{constructor(e){super(e)}nextMatch(e,t,i){let s=va(this.spec,e,i,e.doc.length).nextOverlapping();return s.done&&(s=va(this.spec,e,0,t).nextOverlapping()),s.done?null:s.value}prevMatchInRange(e,t,i){for(let s=i;;){let r=Math.max(t,s-1e4-this.spec.unquoted.length),o=va(this.spec,e,r,s),l=null;for(;!o.nextOverlapping().done;)l=o.value;if(l)return l;if(r==t)return null;s-=1e4}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let i=va(this.spec,e,0,e.doc.length),s=[];for(;!i.next().done;){if(s.length>=t)return null;s.push(i.value)}return s}highlight(e,t,i,s){let r=va(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!r.next().done;)s(r.value.from,r.value.to)}}function ba(n,e,t,i){return new VD(e.doc,n.search,{ignoreCase:!n.caseSensitive,test:n.wholeWord?yZ(e.charCategorizer(e.selection.main.head)):void 0},t,i)}function Ud(n,e){return n.slice(Es(n,e,!1),e)}function Wd(n,e){return n.slice(e,Es(n,e))}function yZ(n){return(e,t,i)=>!i[0].length||(n(Ud(i.input,i.index))!=ti.Word||n(Wd(i.input,i.index))!=ti.Word)&&(n(Wd(i.input,i.index+i[0].length))!=ti.Word||n(Ud(i.input,i.index+i[0].length))!=ti.Word)}class SZ extends qD{nextMatch(e,t,i){let s=ba(this.spec,e,i,e.doc.length).next();return s.done&&(s=ba(this.spec,e,0,t).next()),s.done?null:s.value}prevMatchInRange(e,t,i){for(let s=1;;s++){let r=Math.max(t,i-s*1e4),o=ba(this.spec,e,r,i),l=null;for(;!o.next().done;)l=o.value;if(l&&(r==t||l.from>r+10))return l;if(r==t)return null}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g,(t,i)=>i=="$"?"$":i=="&"?e.match[0]:i!="0"&&+i<e.match.length?e.match[i]:t))}matchAll(e,t){let i=ba(this.spec,e,0,e.doc.length),s=[];for(;!i.next().done;){if(s.length>=t)return null;s.push(i.value)}return s}highlight(e,t,i,s){let r=ba(this.spec,e,Math.max(0,t-250),Math.min(i+250,e.doc.length));for(;!r.next().done;)s(r.value.from,r.value.to)}}const Gu=en.define(),kb=en.define(),jo=Ui.define({create(n){return new eg(m0(n).create(),null)},update(n,e){for(let t of e.effects)t.is(Gu)?n=new eg(t.value.create(),n.panel):t.is(kb)&&(n=new eg(n.query,t.value?Tb:null));return n},provide:n=>qu.from(n,e=>e.panel)});class eg{constructor(e,t){this.query=e,this.panel=t}}const EZ=Lt.mark({class:"cm-searchMatch"}),wZ=Lt.mark({class:"cm-searchMatch cm-searchMatch-selected"}),AZ=ki.fromClass(class{constructor(n){this.view=n,this.decorations=this.highlight(n.state.field(jo))}update(n){let e=n.state.field(jo);(e!=n.startState.field(jo)||n.docChanged||n.selectionSet||n.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:n,panel:e}){if(!e||!n.spec.valid)return Lt.none;let{view:t}=this,i=new Zo;for(let s=0,r=t.visibleRanges,o=r.length;s<o;s++){let{from:l,to:a}=r[s];for(;s<o-1&&a>r[s+1].from-2*250;)a=r[++s].to;n.highlight(t.state,l,a,(c,u)=>{let f=t.state.selection.ranges.some(h=>h.from==c&&h.to==u);i.add(c,u,f?wZ:EZ)})}return i.finish()}},{decorations:n=>n.decorations});function Cf(n){return e=>{let t=e.state.field(jo,!1);return t&&t.query.spec.valid?n(e,t):Ib(e)}}const Vd=Cf((n,{query:e})=>{let{to:t}=n.state.selection.main,i=e.nextMatch(n.state,t,t);return i?(n.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:Rb(n,i),userEvent:"select.search"}),!0):!1}),Fd=Cf((n,{query:e})=>{let{state:t}=n,{from:i}=t.selection.main,s=e.prevMatch(t,i,i);return s?(n.dispatch({selection:{anchor:s.from,head:s.to},scrollIntoView:!0,effects:Rb(n,s),userEvent:"select.search"}),!0):!1}),CZ=Cf((n,{query:e})=>{let t=e.matchAll(n.state,1e3);return!t||!t.length?!1:(n.dispatch({selection:Je.create(t.map(i=>Je.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),kZ=({state:n,dispatch:e})=>{let t=n.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:i,to:s}=t.main,r=[],o=0;for(let l=new ic(n.doc,n.sliceDoc(i,s));!l.next().done;){if(r.length>1e3)return!1;l.value.from==i&&(o=r.length),r.push(Je.range(l.value.from,l.value.to))}return e(n.update({selection:Je.create(r,o),userEvent:"select.search.matches"})),!0},Fw=Cf((n,{query:e})=>{let{state:t}=n,{from:i,to:s}=t.selection.main;if(t.readOnly)return!1;let r=e.nextMatch(t,i,i);if(!r)return!1;let o=[],l,a,c=[];if(r.from==i&&r.to==s&&(a=t.toText(e.getReplacement(r)),o.push({from:r.from,to:r.to,insert:a}),r=e.nextMatch(t,r.from,r.to),c.push(Ct.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(i).number)+"."))),r){let u=o.length==0||o[0].from>=r.to?0:r.to-r.from-a.length;l={anchor:r.from-u,head:r.to-u},c.push(Rb(n,r))}return n.dispatch({changes:o,selection:l,scrollIntoView:!!l,effects:c,userEvent:"input.replace"}),!0}),TZ=Cf((n,{query:e})=>{if(n.state.readOnly)return!1;let t=e.matchAll(n.state,1e9).map(s=>{let{from:r,to:o}=s;return{from:r,to:o,insert:e.getReplacement(s)}});if(!t.length)return!1;let i=n.state.phrase("replaced $ matches",t.length)+".";return n.dispatch({changes:t,effects:Ct.announce.of(i),userEvent:"input.replace.all"}),!0});function Tb(n){return n.state.facet(tp).createPanel(n)}function m0(n,e){var t,i,s,r;let o=n.selection.main,l=o.empty||o.to>o.from+100?"":n.sliceDoc(o.from,o.to);if(e&&!l)return e;let a=n.facet(tp);return new HD({search:((t=e==null?void 0:e.literal)!==null&&t!==void 0?t:a.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(i=e==null?void 0:e.caseSensitive)!==null&&i!==void 0?i:a.caseSensitive,literal:(s=e==null?void 0:e.literal)!==null&&s!==void 0?s:a.literal,wholeWord:(r=e==null?void 0:e.wholeWord)!==null&&r!==void 0?r:a.wholeWord})}const Ib=n=>{let e=n.state.field(jo,!1);if(e&&e.panel){let t=Hu(n,Tb);if(!t)return!1;let i=t.dom.querySelector("[main-field]");if(i&&i!=n.root.activeElement){let s=m0(n.state,e.query.spec);s.valid&&n.dispatch({effects:Gu.of(s)}),i.focus(),i.select()}}else n.dispatch({effects:[kb.of(!0),e?Gu.of(m0(n.state,e.query.spec)):en.appendConfig.of(p0)]});return!0},Ob=n=>{let e=n.state.field(jo,!1);if(!e||!e.panel)return!1;let t=Hu(n,Tb);return t&&t.dom.contains(n.root.activeElement)&&n.focus(),n.dispatch({effects:kb.of(!1)}),!0},IZ=[{key:"Mod-f",run:Ib,scope:"editor search-panel"},{key:"F3",run:Vd,shift:Fd,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Vd,shift:Fd,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Ob,scope:"editor search-panel"},{key:"Mod-Shift-l",run:kZ},{key:"Alt-g",run:rZ},{key:"Mod-d",run:gZ,preventDefault:!0}];class OZ{constructor(e){this.view=e;let t=this.query=e.state.field(jo).query.spec;this.commit=this.commit.bind(this),this.searchField=Fn("input",{value:t.search,placeholder:Ls(e,"Find"),"aria-label":Ls(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Fn("input",{value:t.replace,placeholder:Ls(e,"Replace"),"aria-label":Ls(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Fn("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=Fn("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=Fn("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function i(s,r,o){return Fn("button",{class:"cm-button",name:s,onclick:r,type:"button"},o)}this.dom=Fn("div",{onkeydown:s=>this.keydown(s),class:"cm-search"},[this.searchField,i("next",()=>Vd(e),[Ls(e,"next")]),i("prev",()=>Fd(e),[Ls(e,"previous")]),i("select",()=>CZ(e),[Ls(e,"all")]),Fn("label",null,[this.caseField,Ls(e,"match case")]),Fn("label",null,[this.reField,Ls(e,"regexp")]),Fn("label",null,[this.wordField,Ls(e,"by word")]),...e.state.readOnly?[]:[Fn("br"),this.replaceField,i("replace",()=>Fw(e),[Ls(e,"replace")]),i("replaceAll",()=>TZ(e),[Ls(e,"replace all")])],Fn("button",{name:"close",onclick:()=>Ob(e),"aria-label":Ls(e,"close"),type:"button"},["×"])])}commit(){let e=new HD({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Gu.of(e)}))}keydown(e){zX(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Fd:Vd)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),Fw(this.view))}update(e){for(let t of e.transactions)for(let i of t.effects)i.is(Gu)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(tp).top}}function Ls(n,e){return n.state.phrase(e)}const oh=30,lh=/[\s\.,:;?!]/;function Rb(n,{from:e,to:t}){let i=n.state.doc.lineAt(e),s=n.state.doc.lineAt(t).to,r=Math.max(i.from,e-oh),o=Math.min(s,t+oh),l=n.state.sliceDoc(r,o);if(r!=i.from){for(let a=0;a<oh;a++)if(!lh.test(l[a+1])&&lh.test(l[a])){l=l.slice(a);break}}if(o!=s){for(let a=l.length-1;a>l.length-oh;a--)if(!lh.test(l[a-1])&&lh.test(l[a])){l=l.slice(0,a);break}}return Ct.announce.of(`${n.state.phrase("current match")}. ${l} ${n.state.phrase("on line")} ${i.number}.`)}const RZ=Ct.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),p0=[jo,Ec.lowest(AZ),RZ];class zD{constructor(e,t,i){this.state=e,this.pos=t,this.explicit=i,this.abortListeners=[]}tokenBefore(e){let t=ms(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),i=Math.max(t.from,this.pos-250),s=t.text.slice(i-t.from,this.pos-t.from),r=s.search(GD(e,!1));return r<0?null:{from:i+r,to:this.pos,text:s.slice(r)}}get aborted(){return this.abortListeners==null}addEventListener(e,t){e=="abort"&&this.abortListeners&&this.abortListeners.push(t)}}function jw(n){let e=Object.keys(n).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function DZ(n){let e=Object.create(null),t=Object.create(null);for(let{label:s}of n){e[s[0]]=!0;for(let r=1;r<s.length;r++)t[s[r]]=!0}let i=jw(e)+jw(t)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function NZ(n){let e=n.map(s=>typeof s=="string"?{label:s}:s),[t,i]=e.every(s=>/^\w+$/.test(s.label))?[/\w*$/,/\w+$/]:DZ(e);return s=>{let r=s.matchBefore(i);return r||s.explicit?{from:r?r.from:s.pos,options:e,validFor:t}:null}}class Hw{constructor(e,t,i){this.completion=e,this.source=t,this.match=i}}function Ho(n){return n.selection.main.head}function GD(n,e){var t;let{source:i}=n,s=e&&i[0]!="^",r=i[i.length-1]!="$";return!s&&!r?n:new RegExp(`${s?"^":""}(?:${i})${r?"$":""}`,(t=n.flags)!==null&&t!==void 0?t:n.ignoreCase?"i":"")}const PZ=Eo.define();function MZ(n,e,t,i){return Object.assign(Object.assign({},n.changeByRange(s=>{if(s==n.selection.main)return{changes:{from:t,to:i,insert:e},range:Je.cursor(t+e.length)};let r=i-t;return!s.empty||r&&n.sliceDoc(s.from-r,s.from)!=n.sliceDoc(t,i)?{range:s}:{changes:{from:s.from-r,to:s.from,insert:e},range:Je.cursor(s.from-r+e.length)}})),{userEvent:"input.complete"})}function KD(n,e){const t=e.completion.apply||e.completion.label;let i=e.source;typeof t=="string"?n.dispatch(Object.assign(Object.assign({},MZ(n.state,t,i.from,i.to)),{annotations:PZ.of(e.completion)})):t(n,e.completion,i.from,i.to)}const qw=new WeakMap;function BZ(n){if(!Array.isArray(n))return n;let e=qw.get(n);return e||qw.set(n,e=NZ(n)),e}class LZ{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let t=0;t<e.length;){let i=Xi(e,t),s=xs(i);this.chars.push(i);let r=e.slice(t,t+s),o=r.toUpperCase();this.folded.push(Xi(o==r?r.toLowerCase():o,0)),t+=s}this.astral=e.length!=this.chars.length}match(e){if(this.pattern.length==0)return[0];if(e.length<this.pattern.length)return null;let{chars:t,folded:i,any:s,precise:r,byWord:o}=this;if(t.length==1){let y=Xi(e,0),w=xs(y),A=w==e.length?0:-100;if(y!=t[0])if(y==i[0])A+=-200;else return null;return[A,0,w]}let l=e.indexOf(this.pattern);if(l==0)return[e.length==this.pattern.length?0:-100,0,this.pattern.length];let a=t.length,c=0;if(l<0){for(let y=0,w=Math.min(e.length,200);y<w&&c<a;){let A=Xi(e,y);(A==t[c]||A==i[c])&&(s[c++]=y),y+=xs(A)}if(c<a)return null}let u=0,f=0,h=!1,d=0,m=-1,p=-1,_=/[a-z]/.test(e),v=!0;for(let y=0,w=Math.min(e.length,200),A=0;y<w&&f<a;){let E=Xi(e,y);l<0&&(u<a&&E==t[u]&&(r[u++]=y),d<a&&(E==t[d]||E==i[d]?(d==0&&(m=y),p=y+1,d++):d=0));let C,R=E<255?E>=48&&E<=57||E>=97&&E<=122?2:E>=65&&E<=90?1:0:(C=ib(E))!=C.toLowerCase()?1:C!=C.toUpperCase()?2:0;(!y||R==1&&_||A==0&&R!=0)&&(t[f]==E||i[f]==E&&(h=!0)?o[f++]=y:o.length&&(v=!1)),A=R,y+=xs(E)}return f==a&&o[0]==0&&v?this.result(-100+(h?-200:0),o,e):d==a&&m==0?[-200-e.length+(p==e.length?0:-100),0,p]:l>-1?[-700-e.length,l,l+this.pattern.length]:d==a?[-200+-700-e.length,m,p]:f==a?this.result(-100+(h?-200:0)+-700+(v?0:-1100),o,e):t.length==2?null:this.result((s[0]?-700:0)+-200+-1100,s,e)}result(e,t,i){let s=[e-i.length],r=1;for(let o of t){let l=o+(this.astral?xs(Xi(i,o)):1);r>1&&s[r-1]==o?s[r-1]=l:(s[r++]=o,s[r++]=l)}return s}}const rr=Tt.define({combine(n){return Er(n,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>i=>zw(e(i),t(i)),optionClass:(e,t)=>i=>zw(e(i),t(i)),addToOptions:(e,t)=>e.concat(t)})}});function zw(n,e){return n?e?n+" "+e:n:e}function UZ(n){let e=n.addToOptions.slice();return n.icons&&e.push({render(t){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),t.type&&i.classList.add(...t.type.split(/\s+/g).map(s=>"cm-completionIcon-"+s)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(t,i,s){let r=document.createElement("span");r.className="cm-completionLabel";let{label:o}=t,l=0;for(let a=1;a<s.length;){let c=s[a++],u=s[a++];c>l&&r.appendChild(document.createTextNode(o.slice(l,c)));let f=r.appendChild(document.createElement("span"));f.appendChild(document.createTextNode(o.slice(c,u))),f.className="cm-completionMatchedText",l=u}return l<o.length&&r.appendChild(document.createTextNode(o.slice(l))),r},position:50},{render(t){if(!t.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=t.detail,i},position:80}),e.sort((t,i)=>t.position-i.position).map(t=>t.render)}function Gw(n,e,t){if(n<=t)return{from:0,to:n};if(e<0&&(e=0),e<=n>>1){let s=Math.floor(e/t);return{from:s*t,to:(s+1)*t}}let i=Math.floor((n-e)/t);return{from:n-(i+1)*t,to:n-i*t}}class WZ{constructor(e,t){this.view=e,this.stateField=t,this.info=null,this.placeInfo={read:()=>this.measureInfo(),write:l=>this.positionInfo(l),key:this},this.space=null,this.currentClass="";let i=e.state.field(t),{options:s,selected:r}=i.open,o=e.state.facet(rr);this.optionContent=UZ(o),this.optionClass=o.optionClass,this.tooltipClass=o.tooltipClass,this.range=Gw(s.length,r,o.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{for(let a=l.target,c;a&&a!=this.dom;a=a.parentNode)if(a.nodeName=="LI"&&(c=/-(\d+)$/.exec(a.id))&&+c[1]<s.length){KD(e,s[+c[1]]),l.preventDefault();return}}),this.list=this.dom.appendChild(this.createListBox(s,i.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})}mount(){this.updateSel()}update(e){var t,i,s;let r=e.state.field(this.stateField),o=e.startState.field(this.stateField);this.updateTooltipClass(e.state),r!=o&&(this.updateSel(),((t=r.open)===null||t===void 0?void 0:t.disabled)!=((i=o.open)===null||i===void 0?void 0:i.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!(!((s=r.open)===null||s===void 0)&&s.disabled)))}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of t.split(" "))i&&this.dom.classList.add(i);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfo)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=Gw(t.options.length,t.selected,this.view.state.facet(rr).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(t.options,e.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})),this.updateSelectedOption(t.selected)){this.info&&(this.info.remove(),this.info=null);let{completion:i}=t.options[t.selected],{info:s}=i;if(!s)return;let r=typeof s=="string"?document.createTextNode(s):s(i);if(!r)return;"then"in r?r.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o)}).catch(o=>Hs(this.view.state,o,"completion info")):this.addInfoPane(r)}}addInfoPane(e){let t=this.info=document.createElement("div");t.className="cm-tooltip cm-completionInfo",t.appendChild(e),this.dom.appendChild(t),this.view.requestMeasure(this.placeInfo)}updateSelectedOption(e){let t=null;for(let i=this.list.firstChild,s=this.range.from;i;i=i.nextSibling,s++)s==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),t=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return t&&FZ(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),s=e.getBoundingClientRect(),r=this.space;if(!r){let m=this.dom.ownerDocument.defaultView||window;r={left:0,top:0,right:m.innerWidth,bottom:m.innerHeight}}if(s.top>Math.min(r.bottom,t.bottom)-10||s.bottom<Math.max(r.top,t.top)+10)return null;let o=this.view.textDirection==si.RTL,l=o,a=!1,c,u="",f="",h=t.left-r.left,d=r.right-t.right;if(l&&h<Math.min(i.width,d)?l=!1:!l&&d<Math.min(i.width,h)&&(l=!0),i.width<=(l?h:d))u=Math.max(r.top,Math.min(s.top,r.bottom-i.height))-t.top+"px",c=Math.min(400,l?h:d)+"px";else{a=!0,c=Math.min(400,(o?t.right:r.right-t.left)-30)+"px";let m=r.bottom-t.bottom;m>=i.height||m>t.top?u=s.bottom-t.top+"px":f=t.bottom-s.top+"px"}return{top:u,bottom:f,maxWidth:c,class:a?o?"left-narrow":"right-narrow":l?"left":"right"}}positionInfo(e){this.info&&(e?(this.info.style.top=e.top,this.info.style.bottom=e.bottom,this.info.style.maxWidth=e.maxWidth,this.info.className="cm-tooltip cm-completionInfo cm-completionInfo-"+e.class):this.info.style.top="-1e6px")}createListBox(e,t,i){const s=document.createElement("ul");s.id=t,s.setAttribute("role","listbox"),s.setAttribute("aria-expanded","true"),s.setAttribute("aria-label",this.view.state.phrase("Completions"));for(let r=i.from;r<i.to;r++){let{completion:o,match:l}=e[r];const a=s.appendChild(document.createElement("li"));a.id=t+"-"+r,a.setAttribute("role","option");let c=this.optionClass(o);c&&(a.className=c);for(let u of this.optionContent){let f=u(o,this.view.state,l);f&&a.appendChild(f)}}return i.from&&s.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&s.classList.add("cm-completionListIncompleteBottom"),s}}function VZ(n){return e=>new WZ(e,n)}function FZ(n,e){let t=n.getBoundingClientRect(),i=e.getBoundingClientRect();i.top<t.top?n.scrollTop-=t.top-i.top:i.bottom>t.bottom&&(n.scrollTop+=i.bottom-t.bottom)}function Kw(n){return(n.boost||0)*100+(n.apply?10:0)+(n.info?5:0)+(n.type?1:0)}function jZ(n,e){let t=[],i=0;for(let l of n)if(l.hasResult())if(l.result.filter===!1){let a=l.result.getMatch;for(let c of l.result.options){let u=[1e9-i++];if(a)for(let f of a(c))u.push(f);t.push(new Hw(c,l,u))}}else{let a=new LZ(e.sliceDoc(l.from,l.to)),c;for(let u of l.result.options)(c=a.match(u.label))&&(u.boost!=null&&(c[0]+=u.boost),t.push(new Hw(u,l,c)))}let s=[],r=null,o=e.facet(rr).compareCompletions;for(let l of t.sort((a,c)=>c.match[0]-a.match[0]||o(a.completion,c.completion)))!r||r.label!=l.completion.label||r.detail!=l.completion.detail||r.type!=null&&l.completion.type!=null&&r.type!=l.completion.type||r.apply!=l.completion.apply?s.push(l):Kw(l.completion)>Kw(r)&&(s[s.length-1]=l),r=l.completion;return s}class wa{constructor(e,t,i,s,r,o){this.options=e,this.attrs=t,this.tooltip=i,this.timestamp=s,this.selected=r,this.disabled=o}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new wa(this.options,Xw(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,i,s,r){let o=jZ(e,t);if(!o.length)return s&&e.some(a=>a.state==1)?new wa(s.options,s.attrs,s.tooltip,s.timestamp,s.selected,!0):null;let l=t.facet(rr).selectOnOpen?0:-1;if(s&&s.selected!=l&&s.selected!=-1){let a=s.options[s.selected].completion;for(let c=0;c<o.length;c++)if(o[c].completion==a){l=c;break}}return new wa(o,Xw(i,l),{pos:e.reduce((a,c)=>c.hasResult()?Math.min(a,c.from):a,1e8),create:VZ(Ys),above:r.aboveCursor},s?s.timestamp:Date.now(),l,!1)}map(e){return new wa(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class jd{constructor(e,t,i){this.active=e,this.id=t,this.open=i}static start(){return new jd(zZ,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,i=t.facet(rr),r=(i.override||t.languageDataAt("autocomplete",Ho(t)).map(BZ)).map(l=>(this.active.find(c=>c.source==l)||new Ns(l,this.active.some(c=>c.state!=0)?1:0)).update(e,i));r.length==this.active.length&&r.every((l,a)=>l==this.active[a])&&(r=this.active);let o=this.open;o&&e.docChanged&&(o=o.map(e.changes)),e.selection||r.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!HZ(r,this.active)?o=wa.build(r,t,this.id,o,i):o&&o.disabled&&!r.some(l=>l.state==1)&&(o=null),!o&&r.every(l=>l.state!=1)&&r.some(l=>l.hasResult())&&(r=r.map(l=>l.hasResult()?new Ns(l.source,0):l));for(let l of e.effects)l.is(QD)&&(o=o&&o.setSelected(l.value,this.id));return r==this.active&&o==this.open?this:new jd(r,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:qZ}}function HZ(n,e){if(n==e)return!0;for(let t=0,i=0;;){for(;t<n.length&&!n[t].hasResult;)t++;for(;i<e.length&&!e[i].hasResult;)i++;let s=t==n.length,r=i==e.length;if(s||r)return s==r;if(n[t++].result!=e[i++].result)return!1}}const qZ={"aria-autocomplete":"list"};function Xw(n,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":n};return e>-1&&(t["aria-activedescendant"]=n+"-"+e),t}const zZ=[];function g0(n){return n.isUserEvent("input.type")?"input":n.isUserEvent("delete.backward")?"delete":null}class Ns{constructor(e,t,i=-1){this.source=e,this.state=t,this.explicitPos=i}hasResult(){return!1}update(e,t){let i=g0(e),s=this;i?s=s.handleUserEvent(e,i,t):e.docChanged?s=s.handleChange(e):e.selection&&s.state!=0&&(s=new Ns(s.source,0));for(let r of e.effects)if(r.is(Db))s=new Ns(s.source,1,r.value?Ho(e.state):-1);else if(r.is(Hd))s=new Ns(s.source,0);else if(r.is(XD))for(let o of r.value)o.source==s.source&&(s=o);return s}handleUserEvent(e,t,i){return t=="delete"||!i.activateOnTyping?this.map(e.changes):new Ns(this.source,1)}handleChange(e){return e.changes.touchesRange(Ho(e.startState))?new Ns(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new Ns(this.source,this.state,e.mapPos(this.explicitPos))}}class au extends Ns{constructor(e,t,i,s,r){super(e,2,t),this.result=i,this.from=s,this.to=r}hasResult(){return!0}handleUserEvent(e,t,i){var s;let r=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),l=Ho(e.state);if((this.explicitPos<0?l<=r:l<this.from)||l>o||t=="delete"&&Ho(e.startState)==this.from)return new Ns(this.source,t=="input"&&i.activateOnTyping?1:0);let a=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos),c;return GZ(this.result.validFor,e.state,r,o)?new au(this.source,a,this.result,r,o):this.result.update&&(c=this.result.update(this.result,r,o,new zD(e.state,l,a>=0)))?new au(this.source,a,c,c.from,(s=c.to)!==null&&s!==void 0?s:Ho(e.state)):new Ns(this.source,1,a)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new Ns(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new au(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}function GZ(n,e,t,i){if(!n)return!1;let s=e.sliceDoc(t,i);return typeof n=="function"?n(s,t,i,e):GD(n,!0).test(s)}const Db=en.define(),Hd=en.define(),XD=en.define({map(n,e){return n.map(t=>t.map(e))}}),QD=en.define(),Ys=Ui.define({create(){return jd.start()},update(n,e){return n.update(e)},provide:n=>[Km.from(n,e=>e.tooltip),Ct.contentAttributes.from(n,e=>e.attrs)]});function ah(n,e="option"){return t=>{let i=t.state.field(Ys,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<t.state.facet(rr).interactionDelay)return!1;let s=1,r;e=="page"&&(r=RQ(t,i.open.tooltip))&&(s=Math.max(2,Math.floor(r.dom.offsetHeight/r.dom.querySelector("li").offsetHeight)-1));let{length:o}=i.open.options,l=i.open.selected>-1?i.open.selected+s*(n?1:-1):n?0:o-1;return l<0?l=e=="page"?0:o-1:l>=o&&(l=e=="page"?o-1:0),t.dispatch({effects:QD.of(l)}),!0}}const KZ=n=>{let e=n.state.field(Ys,!1);return n.state.readOnly||!e||!e.open||e.open.selected<0||Date.now()-e.open.timestamp<n.state.facet(rr).interactionDelay?!1:(e.open.disabled||KD(n,e.open.options[e.open.selected]),!0)},XZ=n=>n.state.field(Ys,!1)?(n.dispatch({effects:Db.of(!0)}),!0):!1,QZ=n=>{let e=n.state.field(Ys,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(n.dispatch({effects:Hd.of(null)}),!0)};class YZ{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const Qw=50,JZ=50,ZZ=1e3,xZ=ki.fromClass(class{constructor(n){this.view=n,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let e of n.state.field(Ys).active)e.state==1&&this.startQuery(e)}update(n){let e=n.state.field(Ys);if(!n.selectionSet&&!n.docChanged&&n.startState.field(Ys)==e)return;let t=n.transactions.some(i=>(i.selection||i.docChanged)&&!g0(i));for(let i=0;i<this.running.length;i++){let s=this.running[i];if(t||s.updates.length+n.transactions.length>JZ&&Date.now()-s.time>ZZ){for(let r of s.context.abortListeners)try{r()}catch(o){Hs(this.view.state,o)}s.context.abortListeners=null,this.running.splice(i--,1)}else s.updates.push(...n.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=e.active.some(i=>i.state==1&&!this.running.some(s=>s.active.source==i.source))?setTimeout(()=>this.startUpdate(),Qw):-1,this.composing!=0)for(let i of n.transactions)g0(i)=="input"?this.composing=2:this.composing==2&&i.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:n}=this.view,e=n.field(Ys);for(let t of e.active)t.state==1&&!this.running.some(i=>i.active.source==t.source)&&this.startQuery(t)}startQuery(n){let{state:e}=this.view,t=Ho(e),i=new zD(e,t,n.explicitPos==t),s=new YZ(n,i);this.running.push(s),Promise.resolve(n.source(i)).then(r=>{s.context.aborted||(s.done=r||null,this.scheduleAccept())},r=>{this.view.dispatch({effects:Hd.of(null)}),Hs(this.view.state,r)})}scheduleAccept(){this.running.every(n=>n.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),Qw))}accept(){var n;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(rr);for(let i=0;i<this.running.length;i++){let s=this.running[i];if(s.done===void 0)continue;if(this.running.splice(i--,1),s.done){let o=new au(s.active.source,s.active.explicitPos,s.done,s.done.from,(n=s.done.to)!==null&&n!==void 0?n:Ho(s.updates.length?s.updates[0].startState:this.view.state));for(let l of s.updates)o=o.update(l,t);if(o.hasResult()){e.push(o);continue}}let r=this.view.state.field(Ys).active.find(o=>o.source==s.active.source);if(r&&r.state==1)if(s.done==null){let o=new Ns(s.active.source,0);for(let l of s.updates)o=o.update(l,t);o.state!=1&&e.push(o)}else this.startQuery(r)}e.length&&this.view.dispatch({effects:XD.of(e)})}},{eventHandlers:{blur(){let n=this.view.state.field(Ys,!1);n&&n.tooltip&&this.view.state.facet(rr).closeOnBlur&&this.view.dispatch({effects:Hd.of(null)})},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Db.of(!1)}),20),this.composing=0}}}),$Z=Ct.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:`${400}px`,boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:`${30}px`},".cm-completionInfo.cm-completionInfo-right-narrow":{left:`${30}px`},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),Ku={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},wl=en.define({map(n,e){let t=e.mapPos(n,-1,ys.TrackAfter);return t??void 0}}),Nb=en.define({map(n,e){return e.mapPos(n)}}),Pb=new class extends Kl{};Pb.startSide=1;Pb.endSide=-1;const YD=Ui.define({create(){return In.empty},update(n,e){if(e.selection){let t=e.state.doc.lineAt(e.selection.main.head).from,i=e.startState.doc.lineAt(e.startState.selection.main.head).from;t!=e.changes.mapPos(i,-1)&&(n=In.empty)}n=n.map(e.changes);for(let t of e.effects)t.is(wl)?n=n.update({add:[Pb.range(t.value,t.value+1)]}):t.is(Nb)&&(n=n.update({filter:i=>i!=t.value}));return n}});function ex(){return[nx,YD]}const tg="()[]{}<>";function JD(n){for(let e=0;e<tg.length;e+=2)if(tg.charCodeAt(e)==n)return tg.charAt(e+1);return ib(n<128?n:n+1)}function ZD(n,e){return n.languageDataAt("closeBrackets",e)[0]||Ku}const tx=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),nx=Ct.inputHandler.of((n,e,t,i)=>{if((tx?n.composing:n.compositionStarted)||n.state.readOnly)return!1;let s=n.state.selection.main;if(i.length>2||i.length==2&&xs(Xi(i,0))==1||e!=s.from||t!=s.to)return!1;let r=rx(n.state,i);return r?(n.dispatch(r),!0):!1}),ix=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let i=ZD(n,n.selection.main.head).brackets||Ku.brackets,s=null,r=n.changeByRange(o=>{if(o.empty){let l=ox(n.doc,o.head);for(let a of i)if(a==l&&np(n.doc,o.head)==JD(Xi(a,0)))return{changes:{from:o.head-a.length,to:o.head+a.length},range:Je.cursor(o.head-a.length)}}return{range:s=o}});return s||e(n.update(r,{scrollIntoView:!0,userEvent:"delete.backward"})),!s},sx=[{key:"Backspace",run:ix}];function rx(n,e){let t=ZD(n,n.selection.main.head),i=t.brackets||Ku.brackets;for(let s of i){let r=JD(Xi(s,0));if(e==s)return r==s?cx(n,s,i.indexOf(s+s+s)>-1,t):lx(n,s,r,t.before||Ku.before);if(e==r&&xD(n,n.selection.main.from))return ax(n,s,r)}return null}function xD(n,e){let t=!1;return n.field(YD).between(0,n.doc.length,i=>{i==e&&(t=!0)}),t}function np(n,e){let t=n.sliceString(e,e+2);return t.slice(0,xs(Xi(t,0)))}function ox(n,e){let t=n.sliceString(e-2,e);return xs(Xi(t,0))==t.length?t:t.slice(1)}function lx(n,e,t,i){let s=null,r=n.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:t,from:o.to}],effects:wl.of(o.to+e.length),range:Je.range(o.anchor+e.length,o.head+e.length)};let l=np(n.doc,o.head);return!l||/\s/.test(l)||i.indexOf(l)>-1?{changes:{insert:e+t,from:o.head},effects:wl.of(o.head+e.length),range:Je.cursor(o.head+e.length)}:{range:s=o}});return s?null:n.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function ax(n,e,t){let i=null,s=n.selection.ranges.map(r=>r.empty&&np(n.doc,r.head)==t?Je.cursor(r.head+t.length):i=r);return i?null:n.update({selection:Je.create(s,n.selection.mainIndex),scrollIntoView:!0,effects:n.selection.ranges.map(({from:r})=>Nb.of(r))})}function cx(n,e,t,i){let s=i.stringPrefixes||Ku.stringPrefixes,r=null,o=n.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:e,from:l.to}],effects:wl.of(l.to+e.length),range:Je.range(l.anchor+e.length,l.head+e.length)};let a=l.head,c=np(n.doc,a),u;if(c==e){if(Yw(n,a))return{changes:{insert:e+e,from:a},effects:wl.of(a+e.length),range:Je.cursor(a+e.length)};if(xD(n,a)){let f=t&&n.sliceDoc(a,a+e.length*3)==e+e+e;return{range:Je.cursor(a+e.length*(f?3:1)),effects:Nb.of(a)}}}else{if(t&&n.sliceDoc(a-2*e.length,a)==e+e&&(u=Jw(n,a-2*e.length,s))>-1&&Yw(n,u))return{changes:{insert:e+e+e+e,from:a},effects:wl.of(a+e.length),range:Je.cursor(a+e.length)};if(n.charCategorizer(a)(c)!=ti.Word&&Jw(n,a,s)>-1&&!ux(n,a,e,s))return{changes:{insert:e+e,from:a},effects:wl.of(a+e.length),range:Je.cursor(a+e.length)}}return{range:r=l}});return r?null:n.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function Yw(n,e){let t=ms(n).resolveInner(e+1);return t.parent&&t.from==e}function ux(n,e,t,i){let s=ms(n).resolveInner(e,-1),r=i.reduce((o,l)=>Math.max(o,l.length),0);for(let o=0;o<5;o++){let l=n.sliceDoc(s.from,Math.min(s.to,s.from+t.length+r)),a=l.indexOf(t);if(!a||a>-1&&i.indexOf(l.slice(0,a))>-1){let u=s.firstChild;for(;u&&u.from==s.from&&u.to-u.from>t.length+a;){if(n.sliceDoc(u.to-t.length,u.to)==t)return!1;u=u.firstChild}return!0}let c=s.to==e&&s.parent;if(!c)break;s=c}return!1}function Jw(n,e,t){let i=n.charCategorizer(e);if(i(n.sliceDoc(e-1,e))!=ti.Word)return e;for(let s of t){let r=e-s.length;if(n.sliceDoc(r,e)==s&&i(n.sliceDoc(r-1,r))!=ti.Word)return r}return-1}function fx(n={}){return[Ys,rr.of(n),xZ,hx,$Z]}const $D=[{key:"Ctrl-Space",run:XZ},{key:"Escape",run:QZ},{key:"ArrowDown",run:ah(!0)},{key:"ArrowUp",run:ah(!1)},{key:"PageDown",run:ah(!0,"page")},{key:"PageUp",run:ah(!1,"page")},{key:"Enter",run:KZ}],hx=Ec.highest(Gm.computeN([rr],n=>n.facet(rr).defaultKeymap?[$D]:[]));class dx{constructor(e,t,i){this.from=e,this.to=t,this.diagnostic=i}}class gl{constructor(e,t,i){this.diagnostics=e,this.panel=t,this.selected=i}static init(e,t,i){let s=e,r=i.facet(Al).markerFilter;r&&(s=r(s));let o=Lt.set(s.map(l=>l.from==l.to||l.from==l.to-1&&i.doc.lineAt(l.from).to==l.from?Lt.widget({widget:new Ex(l),diagnostic:l}).range(l.from):Lt.mark({attributes:{class:"cm-lintRange cm-lintRange-"+l.severity},diagnostic:l}).range(l.from,l.to)),!0);return new gl(o,t,sc(o))}}function sc(n,e=null,t=0){let i=null;return n.between(t,1e9,(s,r,{spec:o})=>{if(!(e&&o.diagnostic!=e))return i=new dx(s,r,o.diagnostic),!1}),i}function eN(n,e){return!!(n.effects.some(t=>t.is(ip))||n.changes.touchesRange(e.pos))}function tN(n,e){return n.field(Fs,!1)?e:e.concat(en.appendConfig.of([Fs,Ct.decorations.compute([Fs],t=>{let{selected:i,panel:s}=t.field(Fs);return!i||!s||i.from==i.to?Lt.none:Lt.set([px.range(i.from,i.to)])}),OQ(gx,{hideOn:eN}),wx]))}function mx(n,e){return{effects:tN(n,[ip.of(e)])}}const ip=en.define(),Mb=en.define(),nN=en.define(),Fs=Ui.define({create(){return new gl(Lt.none,null,null)},update(n,e){if(e.docChanged){let t=n.diagnostics.map(e.changes),i=null;if(n.selected){let s=e.changes.mapPos(n.selected.from,1);i=sc(t,n.selected.diagnostic,s)||sc(t,null,s)}n=new gl(t,n.panel,i)}for(let t of e.effects)t.is(ip)?n=gl.init(t.value,n.panel,e.state):t.is(Mb)?n=new gl(n.diagnostics,t.value?sp.open:null,n.selected):t.is(nN)&&(n=new gl(n.diagnostics,n.panel,t.value));return n},provide:n=>[qu.from(n,e=>e.panel),Ct.decorations.from(n,e=>e.diagnostics)]}),px=Lt.mark({class:"cm-lintRange cm-lintRange-active"});function gx(n,e,t){let{diagnostics:i}=n.state.field(Fs),s=[],r=2e8,o=0;i.between(e-(t<0?1:0),e+(t>0?1:0),(a,c,{spec:u})=>{e>=a&&e<=c&&(a==c||(e>a||t>0)&&(e<c||t<0))&&(s.push(u.diagnostic),r=Math.min(a,r),o=Math.max(c,o))});let l=n.state.facet(Al).tooltipFilter;return l&&(s=l(s)),s.length?{pos:r,end:o,above:n.state.doc.lineAt(r).to<o,create(){return{dom:iN(n,s)}}}:null}function iN(n,e){return Fn("ul",{class:"cm-tooltip-lint"},e.map(t=>rN(n,t,!1)))}const vx=n=>{let e=n.state.field(Fs,!1);(!e||!e.panel)&&n.dispatch({effects:tN(n.state,[Mb.of(!0)])});let t=Hu(n,sp.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},Zw=n=>{let e=n.state.field(Fs,!1);return!e||!e.panel?!1:(n.dispatch({effects:Mb.of(!1)}),!0)},bx=n=>{let e=n.state.field(Fs,!1);if(!e)return!1;let t=n.state.selection.main,i=e.diagnostics.iter(t.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==t.from&&i.to==t.to)?!1:(n.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},_x=[{key:"Mod-Shift-m",run:vx,preventDefault:!0},{key:"F8",run:bx}],yx=ki.fromClass(class{constructor(n){this.view=n,this.timeout=-1,this.set=!0;let{delay:e}=n.state.facet(Al);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){let n=Date.now();if(n<this.lintTime-10)setTimeout(this.run,this.lintTime-n);else{this.set=!1;let{state:e}=this.view,{sources:t}=e.facet(Al);Promise.all(t.map(i=>Promise.resolve(i(this.view)))).then(i=>{let s=i.reduce((r,o)=>r.concat(o));this.view.state.doc==e.doc&&this.view.dispatch(mx(this.view.state,s))},i=>{Hs(this.view.state,i)})}}update(n){let e=n.state.facet(Al);(n.docChanged||e!=n.startState.facet(Al))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),Al=Tt.define({combine(n){return Object.assign({sources:n.map(e=>e.source)},Er(n.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null}))},enables:yx});function Sx(n,e={}){return Al.of({source:n,config:e})}function sN(n){let e=[];if(n)e:for(let{name:t}of n){for(let i=0;i<t.length;i++){let s=t[i];if(/[a-zA-Z]/.test(s)&&!e.some(r=>r.toLowerCase()==s.toLowerCase())){e.push(s);continue e}}e.push("")}return e}function rN(n,e,t){var i;let s=t?sN(e.actions):[];return Fn("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},Fn("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(i=e.actions)===null||i===void 0?void 0:i.map((r,o)=>{let l=!1,a=h=>{if(h.preventDefault(),l)return;l=!0;let d=sc(n.state.field(Fs).diagnostics,e);d&&r.apply(n,d.from,d.to)},{name:c}=r,u=s[o]?c.indexOf(s[o]):-1,f=u<0?c:[c.slice(0,u),Fn("u",c.slice(u,u+1)),c.slice(u+1)];return Fn("button",{type:"button",class:"cm-diagnosticAction",onclick:a,onmousedown:a,"aria-label":` Action: ${c}${u<0?"":` (access key "${s[o]})"`}.`},f)}),e.source&&Fn("div",{class:"cm-diagnosticSource"},e.source))}class Ex extends sl{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return Fn("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class xw{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=rN(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class sp{constructor(e){this.view=e,this.items=[];let t=s=>{if(s.keyCode==27)Zw(this.view),this.view.focus();else if(s.keyCode==38||s.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(s.keyCode==40||s.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(s.keyCode==36)this.moveSelection(0);else if(s.keyCode==35)this.moveSelection(this.items.length-1);else if(s.keyCode==13)this.view.focus();else if(s.keyCode>=65&&s.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:r}=this.items[this.selectedIndex],o=sN(r.actions);for(let l=0;l<o.length;l++)if(o[l].toUpperCase().charCodeAt(0)==s.keyCode){let a=sc(this.view.state.field(Fs).diagnostics,r);a&&r.actions[l].apply(e,a.from,a.to)}}else return;s.preventDefault()},i=s=>{for(let r=0;r<this.items.length;r++)this.items[r].dom.contains(s.target)&&this.moveSelection(r)};this.list=Fn("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:i}),this.dom=Fn("div",{class:"cm-panel-lint"},this.list,Fn("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>Zw(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(Fs).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(Fs),i=0,s=!1,r=null;for(e.between(0,this.view.state.doc.length,(o,l,{spec:a})=>{let c=-1,u;for(let f=i;f<this.items.length;f++)if(this.items[f].diagnostic==a.diagnostic){c=f;break}c<0?(u=new xw(this.view,a.diagnostic),this.items.splice(i,0,u),s=!0):(u=this.items[c],c>i&&(this.items.splice(i,c-i),s=!0)),t&&u.diagnostic==t.diagnostic?u.dom.hasAttribute("aria-selected")||(u.dom.setAttribute("aria-selected","true"),r=u):u.dom.hasAttribute("aria-selected")&&u.dom.removeAttribute("aria-selected"),i++});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)s=!0,this.items.pop();this.items.length==0&&(this.items.push(new xw(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),s=!0),r?(this.list.setAttribute("aria-activedescendant",r.id),this.view.requestMeasure({key:this,read:()=>({sel:r.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:o,panel:l})=>{o.top<l.top?this.list.scrollTop-=l.top-o.top:o.bottom>l.bottom&&(this.list.scrollTop+=o.bottom-l.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),s&&this.sync()}sync(){let e=this.list.firstChild;function t(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)t();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(Fs),i=sc(t.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:nN.of(i)})}static open(e){return new sp(e)}}function Dh(n,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(n)}</svg>')`}function ng(n){return Dh(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${n}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const wx=Ct.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:ng("#d11")},".cm-lintRange-warning":{backgroundImage:ng("orange")},".cm-lintRange-info":{backgroundImage:ng("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});class Ax extends Kr{constructor(e){super(),this.diagnostics=e,this.severity=e.reduce((t,i)=>{let s=i.severity;return s=="error"||s=="warning"&&t=="info"?s:t},"info")}toDOM(e){let t=document.createElement("div");t.className="cm-lint-marker cm-lint-marker-"+this.severity;let i=this.diagnostics,s=e.state.facet(rp).tooltipFilter;return s&&(i=s(i)),i.length&&(t.onmouseover=()=>kx(e,t,i)),t}}function Cx(n,e){let t=i=>{let s=e.getBoundingClientRect();if(!(i.clientX>s.left-10&&i.clientX<s.right+10&&i.clientY>s.top-10&&i.clientY<s.bottom+10)){for(let r=i.target;r;r=r.parentNode)if(r.nodeType==1&&r.classList.contains("cm-tooltip-lint"))return;window.removeEventListener("mousemove",t),n.state.field(lN)&&n.dispatch({effects:Bb.of(null)})}};window.addEventListener("mousemove",t)}function kx(n,e,t){function i(){let o=n.elementAtHeight(e.getBoundingClientRect().top+5-n.documentTop);n.coordsAtPos(o.from)&&n.dispatch({effects:Bb.of({pos:o.from,above:!1,create(){return{dom:iN(n,t),getCoords:()=>e.getBoundingClientRect()}}})}),e.onmouseout=e.onmousemove=null,Cx(n,e)}let{hoverTime:s}=n.state.facet(rp),r=setTimeout(i,s);e.onmouseout=()=>{clearTimeout(r),e.onmouseout=e.onmousemove=null},e.onmousemove=()=>{clearTimeout(r),r=setTimeout(i,s)}}function Tx(n,e){let t=Object.create(null);for(let s of e){let r=n.lineAt(s.from);(t[r.from]||(t[r.from]=[])).push(s)}let i=[];for(let s in t)i.push(new Ax(t[s]).range(+s));return In.of(i,!0)}const Ix=P5({class:"cm-gutter-lint",markers:n=>n.state.field(oN)}),oN=Ui.define({create(){return In.empty},update(n,e){n=n.map(e.changes);let t=e.state.facet(rp).markerFilter;for(let i of e.effects)if(i.is(ip)){let s=i.value;t&&(s=t(s||[])),n=Tx(e.state.doc,s.slice(0))}return n}}),Bb=en.define(),lN=Ui.define({create(){return null},update(n,e){return n&&e.docChanged&&(n=eN(e,n)?null:Object.assign(Object.assign({},n),{pos:e.changes.mapPos(n.pos)})),e.effects.reduce((t,i)=>i.is(Bb)?i.value:t,n)},provide:n=>Km.from(n)}),Ox=Ct.baseTheme({".cm-gutter-lint":{width:"1.4em","& .cm-gutterElement":{padding:".2em"}},".cm-lint-marker":{width:"1em",height:"1em"},".cm-lint-marker-info":{content:Dh('<path fill="#aaf" stroke="#77e" stroke-width="6" stroke-linejoin="round" d="M5 5L35 5L35 35L5 35Z"/>')},".cm-lint-marker-warning":{content:Dh('<path fill="#fe8" stroke="#fd7" stroke-width="6" stroke-linejoin="round" d="M20 6L37 35L3 35Z"/>')},".cm-lint-marker-error":{content:Dh('<circle cx="20" cy="20" r="15" fill="#f87" stroke="#f43" stroke-width="6"/>')}}),rp=Tt.define({combine(n){return Er(n,{hoverTime:300,markerFilter:null,tooltipFilter:null})}});function Rx(n={}){return[rp.of(n),oN,Ix,Ox,lN]}const Dx=(()=>[WQ(),jQ(),lQ(),nJ(),IY(),JX(),tQ(),ln.allowMultipleSelections.of(!0),pY(),tD(NY,{fallback:!0}),VY(),ex(),fx(),_Q(),EQ(),dQ(),aZ(),Gm.of([...sx,...nZ,...IZ,...dJ,...CY,...$D,..._x])])();class qd{constructor(e,t,i,s,r,o,l,a,c,u=0,f){this.p=e,this.stack=t,this.state=i,this.reducePos=s,this.pos=r,this.score=o,this.buffer=l,this.bufferBase=a,this.curContext=c,this.lookAhead=u,this.parent=f}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,i=0){let s=e.parser.context;return new qd(e,[],t,i,i,0,[],0,s?new $w(s,s.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let i=e>>19,s=e&65535,{parser:r}=this.p,o=r.dynamicPrecedence(s);if(o&&(this.score+=o),i==0){this.pushState(r.getGoto(this.state,s,!0),this.reducePos),s<r.minRepeatTerm&&this.storeNode(s,this.reducePos,this.reducePos,4,!0),this.reduceContext(s,this.reducePos);return}let l=this.stack.length-(i-1)*3-(e&262144?6:0),a=l?this.stack[l-2]:this.p.ranges[0].from,c=this.reducePos-a;c>=2e3&&!(!((t=this.p.parser.nodeSet.types[s])===null||t===void 0)&&t.isAnonymous)&&(a==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=c):this.p.lastBigReductionSize<c&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=a,this.p.lastBigReductionSize=c));let u=l?this.stack[l-1]:0,f=this.bufferBase+this.buffer.length-u;if(s<r.minRepeatTerm||e&131072){let h=r.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(s,a,h,f+4,!0)}if(e&262144)this.state=this.stack[l];else{let h=this.stack[l-3];this.state=r.getGoto(h,s,!0)}for(;this.stack.length>l;)this.stack.pop();this.reduceContext(s,a)}storeNode(e,t,i,s=4,r=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let o=this,l=this.buffer.length;if(l==0&&o.parent&&(l=o.bufferBase-o.parent.bufferBase,o=o.parent),l>0&&o.buffer[l-4]==0&&o.buffer[l-1]>-1){if(t==i)return;if(o.buffer[l-2]>=t){o.buffer[l-2]=i;return}}}if(!r||this.pos==i)this.buffer.push(e,t,i,s);else{let o=this.buffer.length;if(o>0&&this.buffer[o-4]!=0)for(;o>0&&this.buffer[o-2]>i;)this.buffer[o]=this.buffer[o-4],this.buffer[o+1]=this.buffer[o-3],this.buffer[o+2]=this.buffer[o-2],this.buffer[o+3]=this.buffer[o-1],o-=4,s>4&&(s-=4);this.buffer[o]=e,this.buffer[o+1]=t,this.buffer[o+2]=i,this.buffer[o+3]=s}}shift(e,t,i){let s=this.pos;if(e&131072)this.pushState(e&65535,this.pos);else if(e&262144)this.pos=i,this.shiftContext(t,s),t<=this.p.parser.maxNode&&this.buffer.push(t,s,i,4);else{let r=e,{parser:o}=this.p;(i>this.pos||t<=o.maxNode)&&(this.pos=i,o.stateFlag(r,1)||(this.reducePos=i)),this.pushState(r,s),this.shiftContext(t,s),t<=o.maxNode&&this.buffer.push(t,s,i,4)}}apply(e,t,i){e&65536?this.reduce(e):this.shift(e,t,i)}useNode(e,t){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let s=this.pos;this.reducePos=this.pos=s+e.length,this.pushState(t,s),this.buffer.push(i,s,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let i=e.buffer.slice(t),s=e.bufferBase+t;for(;e&&s==e.bufferBase;)e=e.parent;return new qd(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,s,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,i?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new Nx(this);;){let i=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(i==0)return!1;if(!(i&65536))return!0;t.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>4<<1||this.stack.length>=120){let s=[];for(let r=0,o;r<t.length;r+=2)(o=t[r+1])!=this.state&&this.p.parser.hasAction(o,e)&&s.push(t[r],o);if(this.stack.length<120)for(let r=0;s.length<4<<1&&r<t.length;r+=2){let o=t[r+1];s.some((l,a)=>a&1&&l==o)||s.push(t[r],o)}t=s}let i=[];for(let s=0;s<t.length&&i.length<4;s+=2){let r=t[s+1];if(r==this.state)continue;let o=this.split();o.pushState(r,this.pos),o.storeNode(0,o.pos,o.pos,4,!0),o.shiftContext(t[s],this.pos),o.score-=200,i.push(o)}return i}forceReduce(){let e=this.p.parser.stateSlot(this.state,5);if(!(e&65536))return!1;let{parser:t}=this.p;if(!t.validAction(this.state,e)){let i=e>>19,s=e&65535,r=this.stack.length-i*3;if(r<0||t.getGoto(this.stack[r],s,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(e),!0}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new $w(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class $w{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}var eA;(function(n){n[n.Insert=200]="Insert",n[n.Delete=190]="Delete",n[n.Reduce=100]="Reduce",n[n.MaxNext=4]="MaxNext",n[n.MaxInsertStackDepth=300]="MaxInsertStackDepth",n[n.DampenInsertStackDepth=120]="DampenInsertStackDepth",n[n.MinBigReduction=2e3]="MinBigReduction"})(eA||(eA={}));class Nx{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,i=e>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let s=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=s}}class zd{constructor(e,t,i){this.stack=e,this.pos=t,this.index=i,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new zd(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new zd(this.stack,this.pos,this.index)}}function ch(n,e=Uint16Array){if(typeof n!="string")return n;let t=null;for(let i=0,s=0;i<n.length;){let r=0;for(;;){let o=n.charCodeAt(i++),l=!1;if(o==126){r=65535;break}o>=92&&o--,o>=34&&o--;let a=o-32;if(a>=46&&(a-=46,l=!0),r+=a,l)break;r*=46}t?t[s++]=r:t=new e(r)}return t}class Nh{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const tA=new Nh;class Px{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=tA,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let i=this.range,s=this.rangeIndex,r=this.pos+e;for(;r<i.from;){if(!s)return null;let o=this.ranges[--s];r-=i.from-o.to,i=o}for(;t<0?r>i.to:r>=i.to;){if(s==this.ranges.length-1)return null;let o=this.ranges[++s];r+=o.from-i.to,i=o}return r}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,i,s;if(t>=0&&t<this.chunk.length)i=this.pos+e,s=this.chunk.charCodeAt(t);else{let r=this.resolveOffset(e,1);if(r==null)return-1;if(i=r,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)s=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let o=this.rangeIndex,l=this.range;for(;l.to<=i;)l=this.ranges[++o];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>l.to&&(this.chunk2=this.chunk2.slice(0,l.to-i)),s=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),s}acceptToken(e,t=0){let i=t?this.resolveOffset(t,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=tA,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let i="";for(let s of this.ranges){if(s.from>=t)break;s.to>e&&(i+=this.input.read(Math.max(s.from,e),Math.min(s.to,t)))}return i}}class Pa{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:i}=t.p;Mx(this.data,e,t,this.id,i.data,i.tokenPrecTable)}}Pa.prototype.contextual=Pa.prototype.fallback=Pa.prototype.extend=!1;Pa.prototype.fallback=Pa.prototype.extend=!1;function Mx(n,e,t,i,s,r){let o=0,l=1<<i,{dialect:a}=t.p.parser;e:for(;l&n[o];){let c=n[o+1];for(let d=o+3;d<c;d+=2)if((n[d+1]&l)>0){let m=n[d];if(a.allows(m)&&(e.token.value==-1||e.token.value==m||Bx(m,e.token.value,s,r))){e.acceptToken(m);break}}let u=e.next,f=0,h=n[o+2];if(e.next<0&&h>f&&n[c+h*3-3]==65535&&n[c+h*3-3]==65535){o=n[c+h*3-1];continue e}for(;f<h;){let d=f+h>>1,m=c+d+(d<<1),p=n[m],_=n[m+1]||65536;if(u<p)h=d;else if(u>=_)f=d+1;else{o=n[m+2],e.advance();continue e}}break}}function nA(n,e,t){for(let i=e,s;(s=n[i])!=65535;i++)if(s==t)return i-e;return-1}function Bx(n,e,t,i){let s=nA(t,i,e);return s<0||nA(t,i,n)<s}const ur=typeof process<"u"&&process.env&&/\bparse\b/.test({}.LOG);let ig=null;var iA;(function(n){n[n.Margin=25]="Margin"})(iA||(iA={}));function sA(n,e,t){let i=n.cursor(Yi.IncludeAnonymous);for(i.moveTo(e);;)if(!(t<0?i.childBefore(e):i.childAfter(e)))for(;;){if((t<0?i.to<e:i.from>e)&&!i.type.isError)return t<0?Math.max(0,Math.min(i.to-1,e-25)):Math.min(n.length,Math.max(i.from+1,e+25));if(t<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return t<0?0:n.length}}class Lx{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?sA(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?sA(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let i=this.trees[t],s=this.index[t];if(s==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let r=i.children[s],o=this.start[t]+i.positions[s];if(o>e)return this.nextStart=o,null;if(r instanceof Ai){if(o==e){if(o<this.safeFrom)return null;let l=o+r.length;if(l<=this.safeTo){let a=r.prop(on.lookAhead);if(!a||l+a<this.fragment.to)return r}}this.index[t]++,o+r.length>=Math.max(this.safeFrom,e)&&(this.trees.push(r),this.start.push(o),this.index.push(0))}else this.index[t]++,this.nextStart=o+r.length}}}class Ux{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(i=>new Nh)}getActions(e){let t=0,i=null,{parser:s}=e.p,{tokenizers:r}=s,o=s.stateSlot(e.state,3),l=e.curContext?e.curContext.hash:0,a=0;for(let c=0;c<r.length;c++){if(!(1<<c&o))continue;let u=r[c],f=this.tokens[c];if(!(i&&!u.fallback)&&((u.contextual||f.start!=e.pos||f.mask!=o||f.context!=l)&&(this.updateCachedToken(f,u,e),f.mask=o,f.context=l),f.lookAhead>f.end+25&&(a=Math.max(f.lookAhead,a)),f.value!=0)){let h=t;if(f.extended>-1&&(t=this.addActions(e,f.extended,f.end,t)),t=this.addActions(e,f.value,f.end,t),!u.extend&&(i=f,t>h))break}}for(;this.actions.length>t;)this.actions.pop();return a&&e.setLookAhead(a),!i&&e.pos==this.stream.end&&(i=new Nh,i.value=e.p.parser.eofTerm,i.start=i.end=e.pos,t=this.addActions(e,i.value,i.end,t)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new Nh,{pos:i,p:s}=e;return t.start=i,t.end=Math.min(i+1,s.stream.end),t.value=i==s.stream.end?s.parser.eofTerm:0,t}updateCachedToken(e,t,i){let s=this.stream.clipPos(i.pos);if(t.token(this.stream.reset(s,e),i),e.value>-1){let{parser:r}=i.p;for(let o=0;o<r.specialized.length;o++)if(r.specialized[o]==e.value){let l=r.specializers[o](this.stream.read(e.start,e.end),i);if(l>=0&&i.p.parser.dialect.allows(l>>1)){l&1?e.extended=l>>1:e.value=l>>1;break}}}else e.value=0,e.end=this.stream.clipPos(s+1)}putAction(e,t,i,s){for(let r=0;r<s;r+=3)if(this.actions[r]==e)return s;return this.actions[s++]=e,this.actions[s++]=t,this.actions[s++]=i,s}addActions(e,t,i,s){let{state:r}=e,{parser:o}=e.p,{data:l}=o;for(let a=0;a<2;a++)for(let c=o.stateSlot(r,a?2:1);;c+=3){if(l[c]==65535)if(l[c+1]==1)c=xr(l,c+2);else{s==0&&l[c+1]==2&&(s=this.putAction(xr(l,c+2),t,i,s));break}l[c]==t&&(s=this.putAction(xr(l,c+1),t,i,s))}return s}}var rA;(function(n){n[n.Distance=5]="Distance",n[n.MaxRemainingPerStep=3]="MaxRemainingPerStep",n[n.MinBufferLengthPrune=500]="MinBufferLengthPrune",n[n.ForceReduceLimit=10]="ForceReduceLimit",n[n.CutDepth=15e3]="CutDepth",n[n.CutTo=9e3]="CutTo",n[n.MaxLeftAssociativeReductionCount=300]="MaxLeftAssociativeReductionCount",n[n.MaxStackCount=12]="MaxStackCount"})(rA||(rA={}));class Wx{constructor(e,t,i,s){this.parser=e,this.input=t,this.ranges=s,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new Px(t,s),this.tokens=new Ux(e,this.stream),this.topTerm=e.top[1];let{from:r}=s[0];this.stacks=[qd.start(this,e.top[0],r)],this.fragments=i.length&&this.stream.end-r>e.bufferLength*4?new Lx(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,i=this.stacks=[],s,r;if(this.bigReductionCount>300&&e.length==1){let[o]=e;for(;o.forceReduce()&&o.stack.length&&o.stack[o.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let o=0;o<e.length;o++){let l=e[o];for(;;){if(this.tokens.mainToken=null,l.pos>t)i.push(l);else{if(this.advanceStack(l,i,e))continue;{s||(s=[],r=[]),s.push(l);let a=this.tokens.getMainToken(l);r.push(a.value,a.end)}}break}}if(!i.length){let o=s&&Fx(s);if(o)return this.stackToTree(o);if(this.parser.strict)throw ur&&s&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&s){let o=this.stoppedAt!=null&&s[0].pos>this.stoppedAt?s[0]:this.runRecovery(s,r,i);if(o)return this.stackToTree(o.forceAll())}if(this.recovering){let o=this.recovering==1?1:this.recovering*3;if(i.length>o)for(i.sort((l,a)=>a.score-l.score);i.length>o;)i.pop();i.some(l=>l.reducePos>t)&&this.recovering--}else if(i.length>1){e:for(let o=0;o<i.length-1;o++){let l=i[o];for(let a=o+1;a<i.length;a++){let c=i[a];if(l.sameState(c)||l.buffer.length>500&&c.buffer.length>500)if((l.score-c.score||l.buffer.length-c.buffer.length)>0)i.splice(a--,1);else{i.splice(o--,1);continue e}}}i.length>12&&i.splice(12,i.length-12)}this.minStackPos=i[0].pos;for(let o=1;o<i.length;o++)i[o].pos<this.minStackPos&&(this.minStackPos=i[o].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,i){let s=e.pos,{parser:r}=this,o=ur?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&s>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let c=e.curContext&&e.curContext.tracker.strict,u=c?e.curContext.hash:0;for(let f=this.fragments.nodeAt(s);f;){let h=this.parser.nodeSet.types[f.type.id]==f.type?r.getGoto(e.state,f.type.id):-1;if(h>-1&&f.length&&(!c||(f.prop(on.contextHash)||0)==u))return e.useNode(f,h),ur&&console.log(o+this.stackID(e)+` (via reuse of ${r.getName(f.type.id)})`),!0;if(!(f instanceof Ai)||f.children.length==0||f.positions[0]>0)break;let d=f.children[0];if(d instanceof Ai&&f.positions[0]==0)f=d;else break}}let l=r.stateSlot(e.state,4);if(l>0)return e.reduce(l),ur&&console.log(o+this.stackID(e)+` (via always-reduce ${r.getName(l&65535)})`),!0;if(e.stack.length>=15e3)for(;e.stack.length>9e3&&e.forceReduce(););let a=this.tokens.getActions(e);for(let c=0;c<a.length;){let u=a[c++],f=a[c++],h=a[c++],d=c==a.length||!i,m=d?e:e.split();if(m.apply(u,f,h),ur&&console.log(o+this.stackID(m)+` (via ${u&65536?`reduce of ${r.getName(u&65535)}`:"shift"} for ${r.getName(f)} @ ${s}${m==e?"":", split"})`),d)return!0;m.pos>s?t.push(m):i.push(m)}return!1}advanceFully(e,t){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return oA(e,t),!0}}runRecovery(e,t,i){let s=null,r=!1;for(let o=0;o<e.length;o++){let l=e[o],a=t[o<<1],c=t[(o<<1)+1],u=ur?this.stackID(l)+" -> ":"";if(l.deadEnd&&(r||(r=!0,l.restart(),ur&&console.log(u+this.stackID(l)+" (restarted)"),this.advanceFully(l,i))))continue;let f=l.split(),h=u;for(let d=0;f.forceReduce()&&d<10&&(ur&&console.log(h+this.stackID(f)+" (via force-reduce)"),!this.advanceFully(f,i));d++)ur&&(h=this.stackID(f)+" -> ");for(let d of l.recoverByInsert(a))ur&&console.log(u+this.stackID(d)+" (via recover-insert)"),this.advanceFully(d,i);this.stream.end>l.pos?(c==l.pos&&(c++,a=0),l.recoverByDelete(a,c),ur&&console.log(u+this.stackID(l)+` (via recover-delete ${this.parser.getName(a)})`),oA(l,i)):(!s||s.score<l.score)&&(s=l)}return s}stackToTree(e){return e.close(),Ai.build({buffer:zd.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(ig||(ig=new WeakMap)).get(e);return t||ig.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function oA(n,e){for(let t=0;t<e.length;t++){let i=e[t];if(i.pos==n.pos&&i.sameState(n)){e[t].score<n.score&&(e[t]=n);return}}e.push(n)}class Vx{constructor(e,t,i){this.source=e,this.flags=t,this.disabled=i}allows(e){return!this.disabled||this.disabled[e]==0}}class Gd extends F5{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (${14})`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let l=0;l<e.repeatNodeCount;l++)t.push("");let i=Object.keys(e.topRules).map(l=>e.topRules[l][1]),s=[];for(let l=0;l<t.length;l++)s.push([]);function r(l,a,c){s[l].push([a,a.deserialize(String(c))])}if(e.nodeProps)for(let l of e.nodeProps){let a=l[0];typeof a=="string"&&(a=on[a]);for(let c=1;c<l.length;){let u=l[c++];if(u>=0)r(u,a,l[c++]);else{let f=l[c+-u];for(let h=-u;h>0;h--)r(l[c++],a,f);c++}}}this.nodeSet=new mb(t.map((l,a)=>Bs.define({name:a>=this.minRepeatTerm?void 0:l,id:a,props:s[a],top:i.indexOf(a)>-1,error:a==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(a)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=U5;let o=ch(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let l=0;l<this.specializerSpecs.length;l++)this.specialized[l]=this.specializerSpecs[l].term;this.specializers=this.specializerSpecs.map(lA),this.states=ch(e.states,Uint32Array),this.data=ch(e.stateData),this.goto=ch(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(l=>typeof l=="number"?new Pa(o,l):l),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,i){let s=new Wx(this,e,t,i);for(let r of this.wrappers)s=r(s,e,t,i);return s}getGoto(e,t,i=!1){let s=this.goto;if(t>=s[0])return-1;for(let r=s[t+1];;){let o=s[r++],l=o&1,a=s[r++];if(l&&i)return a;for(let c=r+(o>>1);r<c;r++)if(s[r]==e)return a;if(l)return-1}}hasAction(e,t){let i=this.data;for(let s=0;s<2;s++)for(let r=this.stateSlot(e,s?2:1),o;;r+=3){if((o=i[r])==65535)if(i[r+1]==1)o=i[r=xr(i,r+2)];else{if(i[r+1]==2)return xr(i,r+2);break}if(o==t||o==0)return xr(i,r+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){if(t==this.stateSlot(e,4))return!0;for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=xr(this.data,i+2);else return!1;if(t==xr(this.data,i+1))return!0}}nextStates(e){let t=[];for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=xr(this.data,i+2);else break;if(!(this.data[i+2]&1)){let s=this.data[i+1];t.some((r,o)=>o&1&&r==s)||t.push(this.data[i],s)}}return t}configure(e){let t=Object.assign(Object.create(Gd.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=i}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(i=>{let s=e.tokenizers.find(r=>r.from==i);return s?s.to:i})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((i,s)=>{let r=e.specializers.find(l=>l.from==i.external);if(!r)return i;let o=Object.assign(Object.assign({},i),{external:r.to});return t.specializers[s]=lA(o),o})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),i=t.map(()=>!1);if(e)for(let r of e.split(" ")){let o=t.indexOf(r);o>=0&&(i[o]=!0)}let s=null;for(let r=0;r<t.length;r++)if(!i[r])for(let o=this.dialects[t[r]],l;(l=this.data[o++])!=65535;)(s||(s=new Uint8Array(this.maxTerm+1)))[l]=1;return new Vx(e,i,s)}static deserialize(e){return new Gd(e)}}function xr(n,e){return n[e]|n[e+1]<<16}function Fx(n){let e=null;for(let t of n){let i=t.p.stoppedAt;(t.pos==t.p.stream.end||i!=null&&t.pos>i)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function lA(n){if(n.external){let e=n.extend?1:0;return(t,i)=>n.external(t,i)<<1|e}return n.get}const jx=j5({String:ct.string,Number:ct.number,"True False":ct.bool,PropertyName:ct.propertyName,Null:ct.null,",":ct.separator,"[ ]":ct.squareBracket,"{ }":ct.brace}),Hx=Gd.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#CjOOQO'#Cp'#CpQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CrOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59U,59UO!iQPO,59UOVQPO,59QOqQPO'#CkO!nQPO,59^OOQO1G.k1G.kOVQPO'#ClO!vQPO,59aOOQO1G.p1G.pOOQO1G.l1G.lOOQO,59V,59VOOQO-E6i-E6iOOQO,59W,59WOOQO-E6j-E6j",stateData:"#O~OcOS~OQSORSOSSOTSOWQO]ROePO~OVXOeUO~O[[O~PVOg^O~Oh_OVfX~OVaO~OhbO[iX~O[dO~Oh_OVfa~OhbO[ia~O",goto:"!kjPPPPPPkPPkqwPPk{!RPPP!XP!ePP!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:"⚠ JsonText True False Null Number String } { Object Property PropertyName ] [ Array",maxTerm:25,nodeProps:[["openedBy",7,"{",12,"["],["closedBy",8,"}",13,"]"]],propSources:[jx],skippedNodes:[0],repeatNodeCount:2,tokenData:"(p~RaXY!WYZ!W]^!Wpq!Wrs!]|}$i}!O$n!Q!R$w!R![&V![!]&h!}#O&m#P#Q&r#Y#Z&w#b#c'f#h#i'}#o#p(f#q#r(k~!]Oc~~!`Upq!]qr!]rs!rs#O!]#O#P!w#P~!]~!wOe~~!zXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#g~#jR!Q![#s!c!i#s#T#Z#s~#vR!Q![$P!c!i$P#T#Z$P~$SR!Q![$]!c!i$]#T#Z$]~$`R!Q![!]!c!i!]#T#Z!]~$nOh~~$qQ!Q!R$w!R![&V~$|RT~!O!P%V!g!h%k#X#Y%k~%YP!Q![%]~%bRT~!Q![%]!g!h%k#X#Y%k~%nR{|%w}!O%w!Q![%}~%zP!Q![%}~&SPT~!Q![%}~&[ST~!O!P%V!Q![&V!g!h%k#X#Y%k~&mOg~~&rO]~~&wO[~~&zP#T#U&}~'QP#`#a'T~'WP#g#h'Z~'^P#X#Y'a~'fOR~~'iP#i#j'l~'oP#`#a'r~'uP#`#a'x~'}OS~~(QP#f#g(T~(WP#i#j(Z~(^P#X#Y(a~(fOQ~~(kOW~~(pOV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0}),qx=Id.define({name:"json",parser:Hx.configure({props:[G5.add({Object:kw({except:/^\s*\}/}),Array:kw({except:/^\s*\]/})}),X5.add({"Object Array":vY})]}),languageData:{closeBrackets:{brackets:["[","{",'"']},indentOnInput:/^\s*[\}\]]$/}});function zx(){return new rY(qx)}function aA(n){let e,t,i;return{c(){e=k("div"),t=q("Line: "),i=q(n[0]),this.h()},l(s){e=T(s,"DIV",{class:!0});var r=I(e);t=z(r,"Line: "),i=z(r,n[0]),r.forEach(b),this.h()},h(){S(e,"class","jse-status-bar-info svelte-outk3w")},m(s,r){H(s,e,r),g(e,t),g(e,i)},p(s,r){r&1&&Le(i,s[0])},d(s){s&&b(e)}}}function cA(n){let e,t,i;return{c(){e=k("div"),t=q("Column: "),i=q(n[1]),this.h()},l(s){e=T(s,"DIV",{class:!0});var r=I(e);t=z(r,"Column: "),i=z(r,n[1]),r.forEach(b),this.h()},h(){S(e,"class","jse-status-bar-info svelte-outk3w")},m(s,r){H(s,e,r),g(e,t),g(e,i)},p(s,r){r&2&&Le(i,s[1])},d(s){s&&b(e)}}}function uA(n){let e,t,i,s;return{c(){e=k("div"),t=q("Selection: "),i=q(n[2]),s=q(" characters"),this.h()},l(r){e=T(r,"DIV",{class:!0});var o=I(e);t=z(o,"Selection: "),i=z(o,n[2]),s=z(o," characters"),o.forEach(b),this.h()},h(){S(e,"class","jse-status-bar-info svelte-outk3w")},m(r,o){H(r,e,o),g(e,t),g(e,i),g(e,s)},p(r,o){o&4&&Le(i,r[2])},d(r){r&&b(e)}}}function Gx(n){let e,t,i,s=n[0]!==void 0&&aA(n),r=n[1]!==void 0&&cA(n),o=n[2]!==void 0&&n[2]>0&&uA(n);return{c(){e=k("div"),s&&s.c(),t=U(),r&&r.c(),i=U(),o&&o.c(),this.h()},l(l){e=T(l,"DIV",{class:!0});var a=I(e);s&&s.l(a),t=W(a),r&&r.l(a),i=W(a),o&&o.l(a),a.forEach(b),this.h()},h(){S(e,"class","jse-status-bar svelte-outk3w")},m(l,a){H(l,e,a),s&&s.m(e,null),g(e,t),r&&r.m(e,null),g(e,i),o&&o.m(e,null)},p(l,[a]){l[0]!==void 0?s?s.p(l,a):(s=aA(l),s.c(),s.m(e,t)):s&&(s.d(1),s=null),l[1]!==void 0?r?r.p(l,a):(r=cA(l),r.c(),r.m(e,i)):r&&(r.d(1),r=null),l[2]!==void 0&&l[2]>0?o?o.p(l,a):(o=uA(l),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},i:Xe,o:Xe,d(l){l&&b(e),s&&s.d(),r&&r.d(),o&&o.d()}}}function Kx(n,e,t){let{editorState:i}=e,s,r,o,l,a;return n.$$set=c=>{"editorState"in c&&t(3,i=c.editorState)},n.$$.update=()=>{var c,u,f,h,d;n.$$.dirty&8&&t(4,s=(u=(c=i==null?void 0:i.selection)==null?void 0:c.main)==null?void 0:u.head),n.$$.dirty&24&&t(5,r=(f=i==null?void 0:i.doc)==null?void 0:f.lineAt(s)),n.$$.dirty&32&&t(0,o=r?r.number:void 0),n.$$.dirty&48&&t(1,l=r?s-r.from+1:void 0),n.$$.dirty&8&&t(2,a=(d=(h=i==null?void 0:i.selection)==null?void 0:h.ranges)==null?void 0:d.reduce((m,p)=>m+p.to-p.from,0))},[o,l,a,i,s,r]}class Xx extends st{constructor(e){super(),rt(this,e,Kx,Gx,kt,{editorState:3})}}const Qx=Xx,Lb=Af.define([{tag:ct.propertyName,color:"var(--jse-key-color)"},{tag:ct.number,color:"var(--jse-value-color-number)"},{tag:ct.bool,color:"var(--jse-value-color-boolean)"},{tag:ct.string,color:"var(--jse-value-color-string)"},{tag:ct.keyword,color:"var(--jse-value-color-null)"}]),Yx=tD(Lb),Jx=Lb.style;Lb.style=n=>Jx(n||[]);function Zx(n){return n&&n.space===!0&&Object.keys(n).length===1}function fA(n){return typeof n.parseError=="object"&&n.parseError!==null}function xx(n){return Array.isArray(n.validationErrors)}var hA=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function $x(n,e){return!!(n===e||hA(n)&&hA(e))}function e$(n,e){if(n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(!$x(n[t],e[t]))return!1;return!0}function Ub(n,e){e===void 0&&(e=e$);var t=null;function i(){for(var s=[],r=0;r<arguments.length;r++)s[r]=arguments[r];if(t&&t.lastThis===this&&e(s,t.lastArgs))return t.lastResult;var o=n.apply(this,s);return t={lastResult:o,lastArgs:s,lastThis:this},o}return i.clear=function(){t=null},i}function Qc(n,e){const t=Date.now(),i=n(),s=Date.now();return e(s-t),i}const _a=Is("validation");function t$(n){const e={};return n.forEach(t=>{e[ht(t.path)]=t}),n.forEach(t=>{let i=t.path;for(;i.length>0;){i=gn(i);const s=ht(i);s in e||(e[s]={isChildError:!0,path:i,message:"Contains invalid data"})}}),e}function n$(n,e,t,i){if(_a("validateJSON"),!e)return[];if(t!==i){const s=i.parse(t.stringify(n));return e(s)}else return e(n)}function i$(n,e,t,i){if(_a("validateText"),n.length>OU)return{validationErrors:[{path:[],message:"Validation turned off: the document is too large",severity:Za.info}]};if(n.length===0)return{validationErrors:[]};try{const s=Qc(()=>t.parse(n),l=>_a(`validate: parsed json in ${l} ms`));if(!e)return{validationErrors:[]};const r=t===i?s:Qc(()=>i.parse(n),l=>_a(`validate: parsed json with the validationParser in ${l} ms`));return{validationErrors:Qc(()=>e(r),l=>_a(`validate: validated json in ${l} ms`))}}catch(s){const r=Qc(()=>s$(n,t),l=>_a(`validate: checked whether repairable in ${l} ms`));return{parseError:Qv(n,s.message||s.toString()),isRepairable:r}}}function s$(n,e){if(n.length>RU)return!1;try{return e.parse(Fo(n)),!0}catch{return!1}}function dA(n){let e,t;return e=new rK({props:{readOnly:n[0],onFormat:n[17],onCompact:n[18],onSort:n[19],onTransform:n[20],onToggleSearch:n[21],onUndo:n[22],onRedo:n[23],canFormat:!n[15],canCompact:!n[15],canSort:!n[15],canTransform:!n[15],canUndo:n[11],canRedo:n[12],onRenderMenu:n[4]}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,s){const r={};s[0]&1&&(r.readOnly=i[0]),s[0]&32768&&(r.canFormat=!i[15]),s[0]&32768&&(r.canCompact=!i[15]),s[0]&32768&&(r.canSort=!i[15]),s[0]&32768&&(r.canTransform=!i[15]),s[0]&2048&&(r.canUndo=i[11]),s[0]&4096&&(r.canRedo=i[12]),s[0]&16&&(r.onRenderMenu=i[4]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function r$(n){let e,t,i,s,r;return{c(){e=k("div"),t=k("div"),i=U(),s=k("div"),r=q("loading..."),this.h()},l(o){e=T(o,"DIV",{class:!0});var l=I(e);t=T(l,"DIV",{class:!0}),I(t).forEach(b),i=W(l),s=T(l,"DIV",{class:!0});var a=I(s);r=z(a,"loading..."),a.forEach(b),l.forEach(b),this.h()},h(){S(t,"class","jse-loading-space svelte-1pffwih"),S(s,"class","jse-loading svelte-1pffwih"),S(e,"class","jse-contents svelte-1pffwih")},m(o,l){H(o,e,l),g(e,t),g(e,i),g(e,s),g(s,r)},p:Xe,i:Xe,o:Xe,d(o){o&&b(e)}}}function o$(n){let e,t,i,s,r,o,l=n[10]&&mA(n),a=n[2]&&pA(n),c=!n[10]&&gA(n);return{c(){l&&l.c(),e=U(),t=k("div"),i=U(),a&&a.c(),s=U(),c&&c.c(),r=et(),this.h()},l(u){l&&l.l(u),e=W(u),t=T(u,"DIV",{class:!0}),I(t).forEach(b),i=W(u),a&&a.l(u),s=W(u),c&&c.l(u),r=et(),this.h()},h(){S(t,"class","jse-contents svelte-1pffwih"),xe(t,"jse-hidden",n[10])},m(u,f){l&&l.m(u,f),H(u,e,f),H(u,t,f),n[48](t),H(u,i,f),a&&a.m(u,f),H(u,s,f),c&&c.m(u,f),H(u,r,f),o=!0},p(u,f){u[10]?l?(l.p(u,f),f[0]&1024&&B(l,1)):(l=mA(u),l.c(),B(l,1),l.m(e.parentNode,e)):l&&(He(),G(l,1,1,()=>{l=null}),qe()),(!o||f[0]&1024)&&xe(t,"jse-hidden",u[10]),u[2]?a?(a.p(u,f),f[0]&4&&B(a,1)):(a=pA(u),a.c(),B(a,1),a.m(s.parentNode,s)):a&&(He(),G(a,1,1,()=>{a=null}),qe()),u[10]?c&&(He(),G(c,1,1,()=>{c=null}),qe()):c?(c.p(u,f),f[0]&1024&&B(c,1)):(c=gA(u),c.c(),B(c,1),c.m(r.parentNode,r))},i(u){o||(B(l),B(a),B(c),o=!0)},o(u){G(l),G(a),G(c),o=!1},d(u){l&&l.d(u),u&&b(e),u&&b(t),n[48](null),u&&b(i),a&&a.d(u),u&&b(s),c&&c.d(u),u&&b(r)}}}function mA(n){let e,t;return e=new ra({props:{icon:sa,type:"error",message:`The JSON document is larger than ${jf(i1,1024)}, and may crash your browser when loading it in text mode. Actual size: ${jf(n[5].length,1024)}.`,actions:[{text:"Open anyway",title:"Open the document in text mode. This may freeze or crash your browser.",onClick:n[24]},{text:"Open in tree mode",title:"Open the document in tree mode. Tree mode can handle large documents.",onClick:n[3]},{text:"Cancel",title:"Cancel opening this large document.",onClick:n[25]}]}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,s){const r={};s[0]&32&&(r.message=`The JSON document is larger than ${jf(i1,1024)}, and may crash your browser when loading it in text mode. Actual size: ${jf(i[5].length,1024)}.`),s[0]&8&&(r.actions=[{text:"Open anyway",title:"Open the document in text mode. This may freeze or crash your browser.",onClick:i[24]},{text:"Open in tree mode",title:"Open the document in tree mode. Tree mode can handle large documents.",onClick:i[3]},{text:"Cancel",title:"Cancel opening this large document.",onClick:i[25]}]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function pA(n){let e,t;return e=new Qx({props:{editorState:n[8]}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,s){const r={};s[0]&256&&(r.editorState=i[8]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function gA(n){let e,t,i,s=n[13]&&vA(n);return t=new uR({props:{validationErrors:n[9],selectError:n[26]}}),{c(){s&&s.c(),e=U(),ke(t.$$.fragment)},l(r){s&&s.l(r),e=W(r),Oe(t.$$.fragment,r)},m(r,o){s&&s.m(r,o),H(r,e,o),Te(t,r,o),i=!0},p(r,o){r[13]?s?(s.p(r,o),o[0]&8192&&B(s,1)):(s=vA(r),s.c(),B(s,1),s.m(e.parentNode,e)):s&&(He(),G(s,1,1,()=>{s=null}),qe());const l={};o[0]&512&&(l.validationErrors=r[9]),t.$set(l)},i(r){i||(B(s),B(t.$$.fragment,r),i=!0)},o(r){G(s),G(t.$$.fragment,r),i=!1},d(r){s&&s.d(r),r&&b(e),Ie(t,r)}}}function vA(n){let e,t;return e=new ra({props:{type:"error",icon:sa,message:n[13].message,actions:n[14],onClick:n[49]}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,s){const r={};s[0]&8192&&(r.message=i[13].message),s[0]&16384&&(r.actions=i[14]),s[0]&8192&&(r.onClick=i[49]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function l$(n){let e,t,i,s,r,o=n[1]&&dA(n);const l=[o$,r$],a=[];function c(u,f){return u[16]?1:0}return i=c(n),s=a[i]=l[i](n),{c(){e=k("div"),o&&o.c(),t=U(),s.c(),this.h()},l(u){e=T(u,"DIV",{class:!0});var f=I(e);o&&o.l(f),t=W(f),s.l(f),f.forEach(b),this.h()},h(){S(e,"class","jse-text-mode svelte-1pffwih"),xe(e,"no-main-menu",!n[1])},m(u,f){H(u,e,f),o&&o.m(e,null),g(e,t),a[i].m(e,null),n[50](e),r=!0},p(u,f){u[1]?o?(o.p(u,f),f[0]&2&&B(o,1)):(o=dA(u),o.c(),B(o,1),o.m(e,t)):o&&(He(),G(o,1,1,()=>{o=null}),qe()),s.p(u,f),(!r||f[0]&2)&&xe(e,"no-main-menu",!u[1])},i(u){r||(B(o),B(s),r=!0)},o(u){G(o),G(s),r=!1},d(u){u&&b(e),o&&o.d(),a[i].d(),n[50](null)}}}function bA(n){return{from:n.from,to:n.to,message:n.message,actions:n.actions,severity:n.severity,source:void 0}}function a$(n,e,t){let i,s,r,{readOnly:o}=e,{mainMenuBar:l}=e,{statusBar:a}=e,{externalContent:c}=e,{indentation:u}=e,{tabSize:f}=e,{escapeUnicodeCharacters:h}=e,{parser:d}=e,{validator:m}=e,{validationParser:p}=e,{onChange:_}=e,{onSwitchToTreeMode:v}=e,{onError:y}=e,{onFocus:w}=e,{onBlur:A}=e,{onRenderMenu:E}=e,{onSortModal:C}=e,{onTransformModal:R}=e;const D=Is("jsoneditor:TextMode"),N={key:"Mod-i",run:he,shift:M,preventDefault:!0},L=typeof window>"u";D("isSSR:",L);let F,P,Q,O,K=!1,X=[];const J=new eo,te=new eo,j=new eo,x=new eo,Z=new eo;let V=c,ce=VS(V,u,d),pe=ft(ce,K),re=h;Mi(async()=>{if(!L)try{P=Pe({target:F,initialText:pe?"":s.escapeValue(ce),readOnly:o,indentation:u}),We()}catch(Ge){console.error(Ge)}}),br(()=>{P&&(D("Destroy CodeMirror editor"),P.destroy())});let ye=!1,Ne=!1;const Y=hd(),Ce=hd();function We(){P&&(D("focus"),P.focus())}let se=!1;lR({onMount:Mi,onDestroy:br,getWindow:()=>Pu(Q),hasFocus:()=>se&&document.hasFocus()||E1(Q),onFocus:w,onBlur:A});function Me(Ge){D("patch",Ge);const yt=d.parse(ce),zt=Rl(yt,Ge),dn=oO(yt,Ge);return Ee({text:d.stringify(zt,null,u)}),{json:zt,previousJson:yt,undo:dn,redo:Ge}}function he(){if(D("format"),!o)try{const Ge=d.parse(ce);Ee({text:d.stringify(Ge,null,u)})}catch(Ge){y(Ge)}}function M(){if(D("compact"),!o)try{const Ge=d.parse(ce);Ee({text:d.stringify(Ge)})}catch(Ge){y(Ge)}}function ae(){if(D("repair"),!o)try{Ee({text:Fo(ce)}),t(47,un=Ap),t(13,tn=void 0)}catch(Ge){y(Ge)}}function de(){if(!o)try{const Ge=d.parse(ce);se=!0,C({id:Y,json:Ge,selectedPath:[],onSort:async yt=>{D("onSort",yt),Me(yt)},onClose:()=>{se=!1,We()}})}catch(Ge){y(Ge)}}function ee({id:Ge,selectedPath:yt,onTransform:zt,onClose:dn}){try{const mn=d.parse(ce);se=!0,R({id:Ge||Ce,json:mn,selectedPath:yt,onTransform:zt?Qt=>{zt({operations:Qt,json:mn,transformedJson:Rl(mn,Qt)})}:Qt=>{D("onTransform",Qt),Me(Qt)},onClose:()=>{se=!1,We(),dn&&dn()}})}catch(mn){y(mn)}}function $(){o||ee({selectedPath:[]})}function ne(){P&&(F&&F.querySelector(".cm-search")?Ob(P):Ib(P))}function me(){o||P&&(wb(P),We())}function le(){o||P&&(Pd(P),We())}function ie(){K=!0,Ee(c,!0)}function be(){ze()}function we(Ge){D("select validation error",Ge);const yt=tt(Ge);ge(yt.from,yt.to),We()}function Ae(Ge){D("select parse error",Ge);const yt=Ke(Ge,!1);ge(yt.from,yt.to),We()}function ge(Ge,yt){D("setSelection",{anchor:Ge,head:yt}),P&&P.dispatch(P.state.update({selection:{anchor:Ge,head:yt},scrollIntoView:!0}))}function Be(Ge,yt){if(yt.state.selection.ranges.length===1){const zt=yt.state.selection.ranges[0],dn=ce.slice(zt.from,zt.to);if(dn==="{"||dn==="["){const mn=Om.parse(ce),Qt=Object.keys(mn.pointers).find(Dt=>{var Pt;return((Pt=mn.pointers[Dt].value)==null?void 0:Pt.pos)===zt.from}),nt=mn.pointers[Qt];if(Qt&&nt&&nt.value&&nt.valueEnd){D("pointer found, selecting inner contents of path:",Qt,nt);const Dt=nt.value.pos+1,mi=nt.valueEnd.pos-1;ge(Dt,mi)}}}}function ve(){return Sx(An,{delay:q2})}function Pe({target:Ge,initialText:yt,readOnly:zt,indentation:dn}){D("Create CodeMirror editor",{readOnly:zt,indentation:dn});const mn=ln.create({doc:yt,extensions:[Gm.of([iZ,N]),J.of(ve()),Rx(),Dx,Yx,Ct.domEventHandlers({dblclick:Be}),Ct.updateListener.of(Qt=>{t(8,O=Qt.state),Qt.docChanged&&nn()}),zx(),vZ({top:!0}),j.of(ln.readOnly.of(zt)),te.of(Ct.editable.of(!zt)),Z.of(ln.tabSize.of(f)),x.of(At(dn)),Ct.lineWrapping]});return P=new Ct({state:mn,parent:Ge}),P}function Se(){return P?s.unescapeValue(P.state.doc.toString()):""}function tt(Ge){const{path:yt,message:zt}=Ge,{line:dn,column:mn,from:Qt,to:nt}=hz(s.escapeValue(ce),yt);return{path:yt,line:dn,column:mn,from:Qt,to:nt,message:zt,severity:Za.warning,actions:[]}}function Ke(Ge,yt){const{line:zt,column:dn,position:mn,message:Qt}=Ge;return{path:null,line:zt,column:dn,from:mn||0,to:mn||0,severity:Za.error,message:Qt,actions:yt&&!o?[{name:"Auto repair",apply:()=>ae()}]:null}}function Ee(Ge,yt=!1){const zt=VS(Ge,u,d);if(t(10,pe=ft(zt,K)),pe){D("externalContent not applying text: editor is disabled");return}const dn=!En(Ge,V);if(D("setCodeMirrorContent",{isChanged:dn,forceUpdate:yt}),!P||!dn&&!yt)return;const mn=V;V=Ge,t(5,ce=zt),P.dispatch({changes:{from:0,to:P.state.doc.length,insert:s.escapeValue(ce)}}),jt(),dn&&Zt(V,mn)}function it(){D("refresh");const Ge=P.state.doc.length;P.dispatch({changes:{from:Ge,to:Ge,insert:" "}}),P.dispatch({changes:{from:Ge,to:Ge+1,insert:""}})}function De(){D("forceUpdateText",{escapeUnicodeCharacters:h}),P&&P.dispatch({changes:{from:0,to:P.state.doc.length,insert:s.escapeValue(ce)}})}function ze(){if(!P)return;const Ge=Se(),yt=Ge!==ce;if(D("onChangeCodeMirrorValue",{isChanged:yt}),!yt)return;const zt=V;t(5,ce=Ge),V={text:ce},jt(),Zt(V,zt)}function Re(Ge){D("updateLinter",Ge),P&&P.dispatch({effects:J.reconfigure(ve())})}function ut(Ge){P&&(D("updateIndentation",Ge),P.dispatch({effects:x.reconfigure(At(Ge))}))}function Bt(Ge){P&&(D("updateTabSize",Ge),P.dispatch({effects:Z.reconfigure(ln.tabSize.of(Ge))}))}function gt(Ge){P&&(D("updateReadOnly",Ge),P.dispatch({effects:[j.reconfigure(ln.readOnly.of(Ge)),te.reconfigure(Ct.editable.of(!Ge))]}))}function At(Ge){return Xm.of(typeof Ge=="number"?" ".repeat(Ge):Ge)}function jt(){t(11,ye=rJ(P.state)>0),t(12,Ne=oJ(P.state)>0),D({canUndo:ye,canRedo:Ne})}const nn=jm(ze,q2);function Zt(Ge,yt){_&&_(Ge,yt,{contentErrors:vn(),patchResult:null})}function ft(Ge,yt){return Ge&&Ge.length>i1&&!yt}let un=Ap,tn=null;function An(){if(pe)return[];const Ge=vn();if(fA(Ge)){const{parseError:yt,isRepairable:zt}=Ge;return[bA(Ke(yt,zt))]}return xx(Ge)?Ge.validationErrors.map(tt).map(bA):[]}function vn(){D("validate:start"),nn.flush();const Ge=Ln(s.escapeValue(ce),m,d,p);return fA(Ge)?(t(47,un=Ge.isRepairable?X2:PU),t(13,tn=Ge.parseError),t(9,X=[])):(t(47,un=Ap),t(13,tn=null),t(9,X=Ge.validationErrors)),D("validate:end"),Ge}const Ln=Ub(i$);function Cn(Ge){Ut[Ge?"unshift":"push"](()=>{F=Ge,t(6,F)})}const Wn=()=>Ae(tn);function di(Ge){Ut[Ge?"unshift":"push"](()=>{Q=Ge,t(7,Q)})}return n.$$set=Ge=>{"readOnly"in Ge&&t(0,o=Ge.readOnly),"mainMenuBar"in Ge&&t(1,l=Ge.mainMenuBar),"statusBar"in Ge&&t(2,a=Ge.statusBar),"externalContent"in Ge&&t(28,c=Ge.externalContent),"indentation"in Ge&&t(29,u=Ge.indentation),"tabSize"in Ge&&t(30,f=Ge.tabSize),"escapeUnicodeCharacters"in Ge&&t(31,h=Ge.escapeUnicodeCharacters),"parser"in Ge&&t(32,d=Ge.parser),"validator"in Ge&&t(33,m=Ge.validator),"validationParser"in Ge&&t(34,p=Ge.validationParser),"onChange"in Ge&&t(35,_=Ge.onChange),"onSwitchToTreeMode"in Ge&&t(3,v=Ge.onSwitchToTreeMode),"onError"in Ge&&t(36,y=Ge.onError),"onFocus"in Ge&&t(37,w=Ge.onFocus),"onBlur"in Ge&&t(38,A=Ge.onBlur),"onRenderMenu"in Ge&&t(4,E=Ge.onRenderMenu),"onSortModal"in Ge&&t(39,C=Ge.onSortModal),"onTransformModal"in Ge&&t(40,R=Ge.onTransformModal)},n.$$.update=()=>{n.$$.dirty[0]&32&&t(15,i=ce.length===0),n.$$.dirty[1]&1&&(s=XO({escapeControlCharacters:!1,escapeUnicodeCharacters:h})),n.$$.dirty[0]&268435456&&Ee(c),n.$$.dirty[1]&4&&Re(m),n.$$.dirty[0]&536870912&&ut(u),n.$$.dirty[0]&1073741824&&Bt(f),n.$$.dirty[0]&1&&gt(o),n.$$.dirty[1]&32769&&re!==h&&(t(46,re=h),De()),n.$$.dirty[0]&1|n.$$.dirty[1]&65536&&t(14,r=un===X2&&!o?[{icon:xv,text:"Auto repair",title:"Automatically repair JSON",onClick:ae}]:[])},[o,l,a,v,E,ce,F,Q,O,X,pe,ye,Ne,tn,r,i,L,he,M,de,$,ne,me,le,ie,be,we,Ae,c,u,f,h,d,m,p,_,y,w,A,C,R,We,Me,ee,it,vn,re,un,Cn,Wn,di]}class c$ extends st{constructor(e){super(),rt(this,e,a$,l$,cn,{readOnly:0,mainMenuBar:1,statusBar:2,externalContent:28,indentation:29,tabSize:30,escapeUnicodeCharacters:31,parser:32,validator:33,validationParser:34,onChange:35,onSwitchToTreeMode:3,onError:36,onFocus:37,onBlur:38,onRenderMenu:4,onSortModal:39,onTransformModal:40,focus:41,patch:42,openTransformModal:43,refresh:44,validate:45},null,[-1,-1,-1])}get focus(){return this.$$.ctx[41]}get patch(){return this.$$.ctx[42]}get openTransformModal(){return this.$$.ctx[43]}get refresh(){return this.$$.ctx[44]}get validate(){return this.$$.ctx[45]}}const u$=c$,sg=Is("jsoneditor:AutoScrollHandler");function f$(n){sg("createAutoScrollHandler",n);let e,t;function i(c){return c<20?kU:c<50?TU:IU}function s(){if(n){const c=e*(z2/1e3);n.scrollTop+=c}}function r(c){(!t||c!==e)&&(o(),sg("startAutoScroll",c),e=c,t=setInterval(s,z2))}function o(){t&&(sg("stopAutoScroll"),clearInterval(t),t=void 0,e=void 0)}function l(c){if(n){const u=c.clientY,{top:f,bottom:h}=n.getBoundingClientRect();if(u<f){const d=i(f-u);r(-d)}else if(u>h){const d=i(u-h);r(d)}else o()}}function a(){o()}return{onDrag:l,onDragEnd:a}}const h$=(n,e,t,i)=>(n/=i/2,n<1?t/2*n*n+e:(n--,-t/2*(n*(n-2)-1)+e)),d$=()=>{let n,e,t,i,s,r,o,l,a,c,u,f,h,d;function m(){return n.scrollY||n.pageYOffset||n.scrollTop}function p(A){const E=A.getBoundingClientRect().top,C=n.getBoundingClientRect?n.getBoundingClientRect().top:0;return E-C+t}function _(A){n.scrollTo?n.scrollTo(0,A):n.scrollTop=A}function v(A){c||(c=A),u=A-c,f=r(u,t,l,a),_(f),d=!0,u<a?requestAnimationFrame(v):y()}function y(){_(t+l),e&&o&&(e.setAttribute("tabindex","-1"),e.focus()),typeof h=="function"&&h(),c=!1,d=!1}function w(A,E={}){switch(a=E.duration||1e3,s=E.offset||0,h=E.callback,r=E.easing||h$,o=E.a11y||!1,typeof E.container){case"object":n=E.container;break;case"string":n=document.querySelector(E.container);break;default:n=window}switch(t=m(),typeof A){case"number":e=void 0,o=!1,i=t+A;break;case"object":e=A,i=p(e);break;case"string":e=document.querySelector(A),i=p(e);break}switch(l=i-t+s,typeof E.duration){case"number":a=E.duration;break;case"function":a=E.duration(l);break}d?c=!1:requestAnimationFrame(v)}return w};function m$(n,e){const t={start:n,end:Math.min(v0(n),e)},i=Math.max(Kd((n+e)/2),n),s={start:i,end:Math.min(v0(i),e)},r=Kd(e),o=r===e?r-ku:r,l={start:Math.max(o,n),end:e},a=[t],c=s.start>=t.end&&s.end<=l.start;return c&&a.push(s),l.start>=(c?s.end:t.end)&&a.push(l),a}function aN(n){const e=tz(n,i=>i.start),t=[e[0]];for(let i=0;i<e.length;i++){const s=t.length-1,r=t[s],o=e[i];o.start<=r.end?t[s]={start:Math.min(r.start,o.start),end:Math.max(r.end,o.end)}:t.push(o)}return t}function p$(n,e){return n.some(t=>e>=t.start&&e<t.end)}function v0(n){return Kd(n)+ku}function Kd(n){return Math.floor(n/ku)*ku}function _A(n){let e={expandedMap:{},enforceStringMap:{},visibleSectionsMap:{},selection:void 0};return n!=null&&n.select&&(e={...e,selection:n.select(n.json,e)}),n!=null&&n.expand&&(e=Zr(n.json,e,[],n.expand)),e}function op(n,e){return n.visibleSectionsMap[e]||jl}function Wb(n,e,t){e.forEach(({start:i,end:s})=>{zO(i,Math.min(n.length,s),t)})}function rg(n,e,t){const i={...e.expandedMap},s={...e.visibleSectionsMap};for(let r=0;r<=t.length;r++){const o=t.slice(0,r),l=ht(o),a=wt(n,o);if(Ri(a)&&(i[l]=!0),Array.isArray(a)&&r<t.length){const c=s[l]||jl,u=wi(t[r]);if(!p$(c,u)){const f=Kd(u),h=v0(f),d={start:f,end:h};s[l]=aN(c.concat(d))}}}return{...e,expandedMap:i,visibleSectionsMap:s}}function Zr(n,e,t,i){const s={...e.expandedMap};function r(l){const a=o.length;if(Array.isArray(l)){if(i(o)){const c=ht(o);if(s[c]=!0,l.length>0){const u=op(e,c);Wb(l,u,f=>{o[a]=String(f),r(l[f])}),o.pop()}}}else if(ji(l)&&i(o)){s[ht(o)]=!0;const c=Object.keys(l);if(c.length>0){for(const u of c)o[a]=u,r(l[u]);o.pop()}}}const o=t.slice();return r(wt(n,t)),{...e,expandedMap:s}}function g$(n,e){return{...n,expandedMap:{...n.expandedMap,[ht(e)]:!0}}}function cN(n,e){const t=Ma(n.expandedMap,e),i=Ma(n.enforceStringMap,e),s=Ma(n.visibleSectionsMap,e);return{...n,expandedMap:t,enforceStringMap:i,visibleSectionsMap:s}}function v$(n,e,t){if(t){const i={...n.enforceStringMap};return i[e]=t,{...n,enforceStringMap:i}}else if(typeof n.enforceStringMap[e]=="boolean"){const i={...n.enforceStringMap};return delete i[e],{...n,enforceStringMap:i}}else return n}function b$(n,e,t,i){return{...e,visibleSectionsMap:{...e.visibleSectionsMap,[t]:aN(op(e,t).concat(i))}}}function _$(n,e,t){const i=Rl(n,t),s=t.reduce((r,o)=>$4(o)?uN(i,r,o):eO(o)?fN(i,r,o):tO(o)?y$(i,r,o):r1(o)||Ga(o)?S$(i,r,o):r,e);return{json:i,documentState:s}}function uN(n,e,t){const i=Fr(n,t.path),s=gn(i),r=ht(s),o=wt(n,s);if(hi(o)){const l=wi(Xt(i)),a=Ba(e.expandedMap,s,l,1),c=Ba(e.enforceStringMap,s,l,1);let u=Ba(e.visibleSectionsMap,s,l,1);return u=hN(u,r,f=>dN(f,l,1)),{...e,expandedMap:a,enforceStringMap:c,visibleSectionsMap:u}}return e}function fN(n,e,t){const i=Fr(n,t.path),s=gn(i),r=ht(s),o=wt(n,s);let{expandedMap:l,enforceStringMap:a,visibleSectionsMap:c}=e;if(l=Ma(l,i),a=Ma(a,i),c=Ma(c,i),hi(o)){const u=wi(Xt(i));l=Ba(l,s,u,-1),a=Ba(a,s,u,-1),c=Ba(c,s,u,-1),c=hN(c,r,f=>dN(f,u,-1))}return{...e,expandedMap:l,enforceStringMap:a,visibleSectionsMap:c}}function y$(n,e,t){const i=t.path,s=cg(n,e.expandedMap),r=cg(n,e.enforceStringMap),o=cg(n,e.visibleSectionsMap);return!Li(t.value)&&!hi(t.value)&&delete s[i],hi(t.value)||delete o[i],(Li(t.value)||hi(t.value))&&delete r[i],{...e,expandedMap:s,enforceStringMap:r,visibleSectionsMap:o}}function S$(n,e,t){if(Ga(t)&&t.from===t.path)return e;const i=f=>t.path+f.substring(t.from.length),s=ag(og(e.expandedMap,t.from),i),r=ag(og(e.enforceStringMap,t.from),i),o=ag(og(e.visibleSectionsMap,t.from),i);let l=e;Ga(t)&&(l=fN(n,l,{op:"remove",path:t.from})),l=uN(n,l,{op:"add",path:t.path,value:null});const a=lg(l.expandedMap,s),c=lg(l.enforceStringMap,r),u=lg(l.visibleSectionsMap,o);return{...e,expandedMap:a,enforceStringMap:c,visibleSectionsMap:u}}function Ma(n,e){const t={},i=ht(e);return Object.keys(n).forEach(s=>{Ka(s,i)||(t[s]=n[s])}),t}function og(n,e){const t={};return Object.keys(n).forEach(i=>{Ka(i,e)&&(t[i]=n[i])}),t}function lg(n,e){return{...n,...e}}function ag(n,e){const t={};return Object.keys(n).forEach(i=>{const s=e(i);t[s]=n[i]}),t}function Ba(n,e,t,i){const s=e.length,r=ht(e),o=[];for(const a of Object.keys(n))if(Ka(a,r)){const c=Yo(a),u=wi(c[s]);u>=t&&(c[s]=String(u+i),o.push({oldPointer:a,newPointer:ht(c),value:n[a]}))}if(o.length===0)return n;const l={...n};return o.forEach(a=>{delete l[a.oldPointer]}),o.forEach(a=>{l[a.newPointer]=a.value}),l}function cg(n,e){const t={};return Object.keys(e).filter(i=>Qo(n,Fr(n,i))).forEach(i=>{t[i]=e[i]}),t}function hN(n,e,t){const i=n[e];if(e in n){const s=t(i);if(!En(i,s)){const r={...n};return s===void 0?delete r[e]:r[e]=s,r}}return n}function dN(n,e,t){return n.map(i=>({start:i.start>e?i.start+t:i.start,end:i.end>=e?i.end+t:i.end}))}function kf(n,e,t,i){const s=e?e[t]:void 0;return typeof s=="boolean"?s:KW(n,i)}function Tf(n,e,t=!1){const i=n.indexOf(e);return i!==-1?t?n.slice(i):n.slice(i+1):[]}function Vb(n,e){const t=[];function i(s,r){t.push(r);const o=ht(r);if(s&&e.expandedMap[o]===!0){if(hi(s)){const l=op(e,o);Wb(s,l,a=>{i(s[a],r.concat(String(a)))})}Li(s)&&Object.keys(s).forEach(l=>{i(s[l],r.concat(l))})}}return i(n,[]),t}function mN(n,e,t=!0){const i=[];function s(r,o){i.push({path:o,type:dr.value});const l=ht(o);if(r&&e.expandedMap[l]===!0){if(t&&i.push({path:o,type:dr.inside}),hi(r)){const a=op(e,l);Wb(r,a,c=>{const u=o.concat(String(c));s(r[c],u),t&&i.push({path:u,type:dr.after})})}Li(r)&&Object.keys(r).forEach(c=>{const u=o.concat(c);i.push({path:u,type:dr.key}),s(r[c],u),t&&i.push({path:u,type:dr.after})})}}return s(n,[]),i}function E$(n,e,t){const i=Vb(n,e),s=i.map(ht),r=ht(t),o=s.indexOf(r);return o!==-1&&o>0?i[o-1]:null}function b0(n,e,t){const i=Vb(n,e),r=i.map(ht).indexOf(ht(t));return r!==-1&&r<i.length-1?i[r+1]:null}const w$=1e3,uh=Is("jsoneditor:History");function A$(n={}){const e=n.maxItems||w$;let t=[],i=0;function s(){return i<t.length}function r(){return i>0}function o(){return{canUndo:s(),canRedo:r(),length:t.length}}function l(){n.onChange&&n.onChange(o())}function a(h){uh("add",h),t=[h].concat(t.slice(i)).slice(0,e),i=0,l()}function c(){uh("clear"),t=[],i=0,l()}function u(){if(s()){const h=t[i];return i+=1,uh("undo",h),l(),h}}function f(){if(r())return i-=1,uh("redo",t[i]),l(),t[i]}return{add:a,clear:c,getState:o,undo:u,redo:f}}function If(n,e){const t=new Set(e),i=n.replace(/ \(copy( \d+)?\)$/,"");let s=n,r=1;for(;t.has(s);){const o="copy"+(r>1?" "+r:"");s=`${i} (${o})`,r++}return s}function Xd(n,e){const t="...",i=e-t.length;return n.length>e?n.substring(0,i)+t:n}function C$(n){if(n==="")return"";const e=n.toLowerCase();if(e==="null")return null;if(e==="true")return!0;if(e==="false")return!1;if(e==="undefined")return;const t=Number(n),i=parseFloat(n);return!isNaN(t)&&!isNaN(i)?t:n}function gr(n){return n&&n.type===Pn.after}function Ci(n){return n&&n.type===Pn.inside}function ci(n){return n&&n.type===Pn.key}function _n(n){return n&&n.type===Pn.value}function yn(n){return n&&n.type===Pn.multi}function k$(n,e,t){if(En(e,t))return[e];{const i=P$(e,t);if(e.length===i.length||t.length===i.length)return[i];const s=e[i.length],r=t[i.length],o=wt(n,i);if(Li(o)){const l=Object.keys(o),a=l.indexOf(s),c=l.indexOf(r);if(a!==-1&&c!==-1){const u=Math.min(a,c),f=Math.max(a,c),h=[];for(let d=u;d<=f;d++)h.push(i.concat(l[d]));return h}}if(hi(o)){const l=Math.min(wi(s),wi(r)),a=Math.max(wi(s),wi(r)),c=[];for(let u=l;u<=a;u++)c.push(i.concat(String(u)));return c}}throw new Error("Failed to create selection")}function pN(n){return Ci(n)?n.focusPath:gn(n.focusPath)}function rc(n){return yn(n)?ks(n.paths):n.focusPath}function lp(n){return yn(n)?Xt(n.paths):n.focusPath}function T$(n,e){return Xu(n.focusPath,e)&&(n.focusPath.length>e.length||Ci(n))}function I$(n,e,t){if(!n)return!1;const i=e.slice(0);if(yn(n))for(;i.length>0;){if(n.pointersMap[ht(i)]===!0)return!0;i.pop()}return ci(n)?t===Pn.key&&En(n.focusPath,e):!!(_n(n)&&(t===Pn.value&&En(n.focusPath,e)||Xu(e,n.focusPath)&&e.length>n.focusPath.length&&(t===Pn.key||t===Pn.value||t===Pn.multi)))}function yA(n,e,t=!1,i=!1){const s=e.selection,r=!i&&yn(s)?ks(s.paths):s.focusPath,o=E$(n,e,r);if(o===null)return null;const l=o,a=o;if(t)return gr(s)||Ci(s)?ui(n,s.anchorPath,s.anchorPath):ui(n,s.anchorPath,a);if(ci(s)){const c=gn(o),u=wt(n,c);return Array.isArray(u)||ii(o)?Yn(o,!1):qs(o,!1)}return _n(s)?Yn(o,!1):gr(s)||Ci(s)?ui(n,r,r):ui(n,l,a)}function O$(n,e,t=!1,i=!1){const s=e.selection,r=!i&&yn(s)?Xt(s.paths):s.focusPath,o=b0(n,e,r),l=o,a=o;if(o===null)return null;if(t){const c=Ri(wt(n,r))?cN(e,r):e,u=b0(n,c,r);return u===null?null:gr(s)?ui(n,u,u):Ci(s)?ui(n,l,a):ui(n,s.anchorPath,u)}if(ci(s)){const c=gn(o),u=wt(n,c);return Array.isArray(u)?Yn(a,!1):qs(a,!1)}return _n(s)?Yn(a,!1):Ci(s)?ui(n,l,a):ui(n,o,o)}function R$(n,e,t){const i=gn(t),s=[Xt(t)],r=b0(wt(n,i),e,s);return r?Yn(i.concat(r),!1):_o(t)}function gN(n,e,t){const i=e.selection,s=mN(n,e,t),r=s.findIndex(o=>En(o.path,i.focusPath)&&String(o.type)===String(i.type));return{caret:r!==-1?s[r]:null,previous:r!==-1&&r>0?s[r-1]:null,next:r!==-1&&r<s.length-1?s[r+1]:null}}function D$(n,e,t=!1,i=!0){const s=e.selection,{caret:r,previous:o}=gN(n,e,i);if(t)return yn(s)?null:ui(n,s.anchorPath,s.focusPath);if(r&&o)return Fb(o);const l=gn(s.focusPath),a=wt(n,l);return _n(s)&&Array.isArray(a)?ui(n,s.focusPath,s.focusPath):yn(s)&&!Array.isArray(a)?qs(s.focusPath,!1):null}function N$(n,e,t=!1,i=!0){const s=e.selection,{caret:r,next:o}=gN(n,e,i);return t?yn(s)?null:ui(n,s.anchorPath,s.focusPath):r&&o?Fb(o):yn(s)?Yn(s.focusPath,!1):null}function fh(n,e){const t=Vb(n,e);let i=0;for(;i<t.length-1&&t[i+1].length>t[i].length;)i++;const s=t[i];return s.length===0||Array.isArray(wt(n,gn(s)))?Yn(s,!1):qs(s,!1)}function oc(n,e){if(e.length===1){const i=ks(e);if(i.op==="replace"||i.op==="move"){const s=Fr(n,i.path);return Yn(s,!1)}}if(!ii(e)&&e.every(i=>i.op==="move")){const i=ks(e),s=e.slice(1);if((r1(i)||Ga(i))&&i.from!==i.path&&s.every(r=>(r1(r)||Ga(r))&&r.from===r.path)){const r=Fr(n,i.path);return qs(r,!1)}}const t=e.filter(i=>i.op!=="test"&&i.op!=="remove"&&(i.op!=="move"||i.from!==i.path)&&typeof i.path=="string").map(i=>Fr(n,i.path));return ii(t)?null:{type:Pn.multi,paths:t,anchorPath:ks(t),focusPath:Xt(t),pointersMap:vN(t)}}function vN(n){const e={};return n.forEach(t=>{e[ht(t)]=!0}),e}function ap(n){return{[ht(n)]:!0}}function P$(n,e){let t=0;for(;t<n.length&&t<e.length&&n[t]===e[t];)t++;return n.slice(0,t)}function _0(n){return n&&(ci(n)||_n(n)||yn(n)&&n.paths.length===1)}function SA(n,e){return _0(e)&&Ri(wt(n,e.focusPath))?e.focusPath:gn(e.focusPath)}function Xu(n,e){if(n.length<e.length)return!1;for(let t=0;t<e.length;t++)if(n[t]!==e[t])return!1;return!0}function Ao(n){const e=n.selection;return(ci(e)||_n(e))&&e.edit?{...n,selection:{...e,edit:!1}}:n}function qs(n,e){return{type:Pn.key,anchorPath:n,focusPath:n,pointersMap:ap(n),edit:e}}function Yn(n,e){return{type:Pn.value,anchorPath:n,focusPath:n,pointersMap:ap(n),edit:e}}function Ur(n){return{type:Pn.inside,anchorPath:n,focusPath:n,pointersMap:ap(n)}}function _o(n){return{type:Pn.after,anchorPath:n,focusPath:n,pointersMap:ap(n)}}function ui(n,e,t){const i=k$(n,e,t),s=Xu(t,Xt(i))||Xu(e,ks(i));return{type:Pn.multi,anchorPath:s?ks(i):Xt(i),focusPath:s?Xt(i):ks(i),paths:i,pointersMap:vN(i)}}function EA(n,e,t,i){if(ci(e))return String(Xt(e.focusPath));if(_n(e)){const s=wt(n,e.focusPath);return typeof s=="string"?s:i.stringify(s,null,t)}if(yn(e)){if(ii(e.focusPath))return i.stringify(n,null,t);const s=pN(e),r=wt(n,s);if(Array.isArray(r))if(e.paths.length===1){const o=wt(n,ks(e.paths));return i.stringify(o,null,t)}else return e.paths.map(o=>{const l=wt(n,o);return`${i.stringify(l,null,t)},`}).join(`
`);else return e.paths.map(o=>{const l=Xt(o),a=wt(n,o);return`${i.stringify(l)}: ${i.stringify(a,null,t)},`}).join(`
`)}return null}function bN(n){return yn(n)?n.paths:[n.focusPath]}function cu(n){return(ci(n)||_n(n))&&n.edit}function M$(n,e,t=!0){return e===void 0&&!t?n:{...n,selection:e}}function B$(){return Yn([],!1)}function Ph(n){if(!n)return!1;if(ci(n)||_n(n)||yn(n)&&n.paths.length===1)return!0}function Fb(n){switch(n.type){case dr.key:return qs(n.path,!1);case dr.value:return Yn(n.path,!1);case dr.after:return _o(n.path);case dr.inside:return Ur(n.path)}}function wA(n,e,t){switch(e){case Pn.key:return qs(t,!1);case Pn.value:return Yn(t,!1);case Pn.after:return _o(t);case Pn.inside:return Ur(t);case Pn.multi:return ui(n,t,t)}}function AA(n,e){if(n)return Object.keys(n.pointersMap).some(t=>Ka(t,e)||Ka(e,t))?n:void 0}function hh(n,e,t){const i=gn(e),s=wt(n,i);if(hi(s)){const r=wi(Xt(e));return t.map((o,l)=>({op:"add",path:ht(i.concat(String(r+l))),value:o.value}))}else if(Li(s)){const r=Xt(e),o=Object.keys(s),l=Tf(o,r,!0);return[...t.map(a=>{const c=If(a.key,o);return{op:"add",path:ht(i.concat(c)),value:a.value}}),...l.map(a=>Yl(i,a))]}else throw new Error("Cannot create insert operations: parent must be an Object or Array")}function CA(n,e,t){const i=wt(n,e);if(Array.isArray(i)){const s=i.length;return t.map((r,o)=>({op:"add",path:ht(e.concat(String(s+o))),value:r.value}))}else return t.map(s=>{const r=If(s.key,Object.keys(i));return{op:"add",path:ht(e.concat(r)),value:s.value}})}function Of(n,e,t,i){const s=e.filter(l=>l!==t),r=If(i,s),o=Tf(e,t,!1);return[{op:"move",from:ht(n.concat(t)),path:ht(n.concat(r))},...o.map(l=>Yl(n,l))]}function L$(n,e,t){const i=ks(e),s=gn(i),r=wt(n,s);if(hi(r)){const o=ks(e),l=o?wi(Xt(o)):0;return[...y0(e),...t.map((a,c)=>({op:"add",path:ht(s.concat(String(c+l))),value:a.value}))]}else if(Li(r)){const o=Xt(e),l=gn(o),a=Xt(o),c=Object.keys(r),u=Tf(c,a,!1),f=new Set(e.map(d=>Xt(d))),h=c.filter(d=>!f.has(d));return[...y0(e),...t.map(d=>{const m=If(d.key,h);return{op:"add",path:ht(l.concat(m)),value:d.value}}),...u.map(d=>Yl(l,d))]}else throw new Error("Cannot create replace operations: parent must be an Object or Array")}function U$(n,e){const t=Xt(e);if(ii(t))throw new Error("Cannot duplicate root object");const i=gn(t),s=Xt(t),r=wt(n,i);if(hi(r)){const o=Xt(e),l=o?wi(Xt(o))+1:0;return[...e.map((a,c)=>({op:"copy",from:ht(a),path:ht(i.concat(String(c+l)))}))]}else if(Li(r)){const o=Object.keys(r),l=Tf(o,s,!1);return[...e.map(a=>{const c=Xt(a),u=If(c,o);return{op:"copy",from:ht(a),path:ht(i.concat(u))}}),...l.map(a=>Yl(i,a))]}else throw new Error("Cannot create duplicate operations: parent must be an Object or Array")}function W$(n,e){if(_n(e))return[{op:"move",from:ht(e.focusPath),path:""}];if(yn(e)){const t=gn(e.focusPath),i=wt(n,t);if(hi(i))return[{op:"replace",path:"",value:e.paths.map(r=>{const o=wi(Xt(r));return i[o]})}];if(Li(i)){const s={};return e.paths.forEach(r=>{const o=String(Xt(r));s[o]=i[o]}),[{op:"replace",path:"",value:s}]}}else throw new Error("Cannot create extract operations: parent must be an Object or Array");throw new Error("Cannot extract: unsupported type of selection "+JSON.stringify(e))}function kA(n,e,t,i){if(ci(e)){const s=GO(t,i),r=gn(e.focusPath),o=wt(n,r),l=Object.keys(o),a=Xt(e.focusPath);return Of(r,l,a,typeof s=="string"?s:t)}if(_n(e)||yn(e)&&ii(e.focusPath))try{return[{op:"replace",path:ht(e.focusPath),value:Xv(t,s=>Kv(s,i))}]}catch{return[{op:"replace",path:ht(e.focusPath),value:t}]}if(yn(e)){const s=ug(t,i);return L$(n,e.paths,s)}if(gr(e)){const s=ug(t,i),r=e.focusPath,o=gn(r),l=wt(n,o);if(hi(l)){const a=wi(Xt(r)),c=o.concat(String(a+1));return hh(n,c,s)}else if(Li(l)){const a=String(Xt(r)),c=Object.keys(l);if(ii(c)||Xt(c)===a)return CA(n,o,s);{const u=c.indexOf(a),f=c[u+1],h=o.concat(f);return hh(n,h,s)}}else throw new Error("Cannot create insert operations: parent must be an Object or Array")}if(Ci(e)){const s=ug(t,i),r=e.focusPath,o=wt(n,r);if(hi(o)){const l=r.concat("0");return hh(n,l,s)}else if(Li(o)){const l=Object.keys(o);if(ii(l))return CA(n,r,s);{const a=ks(l),c=r.concat(a);return hh(n,c,s)}}else throw new Error("Cannot create insert operations: parent must be an Object or Array")}throw new Error("Cannot insert: unsupported type of selection "+JSON.stringify(e))}function V$(n,e,t){const i=t.beforePath,s=t.append,r=gn(e.focusPath),o=wt(n,r);if(!s&&!(i&&Xu(i,r)&&i.length>r.length))return[];const l=rc(e),a=lp(e),c=Xt(l),u=Xt(a),f=i?i[r.length]:void 0;if(Li(o)){const h=Object.keys(o),d=h.indexOf(c),m=h.indexOf(u),p=s?h.length:h.indexOf(f);if(d!==-1&&m!==-1&&p!==-1)return p>d?[...h.slice(d,m+1),...h.slice(p,h.length)].map(_=>Yl(r,_)):[...h.slice(p,d),...h.slice(m+1,h.length)].map(_=>Yl(r,_))}else if(hi(o)){const h=wi(c),d=wi(u),m=f!==void 0?wi(f):o.length,p=d-h+1;return m<h?MS(p,_=>({op:"move",from:ht(r.concat(String(h+_))),path:ht(r.concat(String(m+_)))})):MS(p,()=>({op:"move",from:ht(r.concat(String(h))),path:ht(r.concat(String(m)))}))}else throw new Error("Cannot create move operations: parent must be an Object or Array")}function F$(n,e,t){if(t==="object")return{};if(t==="array")return[];if(t==="structure"){const i=pN(e),s=wt(n,i);if(Array.isArray(s)&&!ii(s)){const r=ks(s);return Ri(r)?CH(r,o=>Array.isArray(o)?[]:ji(o)?void 0:""):""}}return""}function y0(n){return n.map(e=>({op:"remove",path:ht(e)})).reverse()}function Yl(n,e){return{op:"move",from:ht(n.concat(e)),path:ht(n.concat(e))}}function ug(n,e){const t=/^\s*{/.test(n),i=/^\s*\[/.test(n),s=GO(n,e),r=s!==void 0?s:Xv(n,o=>Kv(o,e));return t&&ji(r)||i&&Array.isArray(r)?[{key:"New item",value:r}]:Array.isArray(r)?r.map((o,l)=>({key:"New item "+l,value:o})):ji(r)?Object.keys(r).map(o=>({key:o,value:r[o]})):[{key:"New item",value:r}]}function TA(n,e){if(ci(e)){const t=gn(e.focusPath),i=wt(n,t),s=Object.keys(i),r=Xt(e.focusPath),l=Of(t,s,r,""),a=oc(n,l);return{operations:l,newSelection:a}}if(_n(e))return{operations:[{op:"replace",path:ht(e.focusPath),value:""}],newSelection:e};if(yn(e)){const t=y0(e.paths),i=Xt(e.paths);if(ii(i)){const o=[{op:"replace",path:"",value:""}],l=Yn([],!1);return{operations:o,newSelection:l}}const s=gn(i),r=wt(n,s);if(hi(r)){const o=ks(e.paths),l=wi(Xt(o)),a=l===0?Ur(s):_o(s.concat(String(l-1)));return{operations:t,newSelection:a}}else if(Li(r)){const o=Object.keys(r),l=ks(e.paths),a=Xt(l),c=o.indexOf(a),u=o[c-1],f=c===0?Ur(s):_o(s.concat(u));return{operations:t,newSelection:f}}else throw new Error("Cannot create remove operations: parent must be an Object or Array")}throw new Error("Cannot remove: unsupported type of selection "+JSON.stringify(e))}function j$(n,e){return oO(n,e,{before:(t,i,s)=>{if(eO(i)){const r=Yo(i.path);return{revertOperations:[...s,...IA(t,r)]}}if(Ga(i)){const r=Yo(i.from);return{revertOperations:[...s,...IA(t,r)]}}return{revertOperations:s}}})}function IA(n,e){const t=gn(e),i=Xt(e),s=wt(n,t);if(Li(s)){const r=Object.keys(s);return Tf(r,i,!1).map(l=>Yl(t,l))}return[]}function H$(n,e,t){const i=t!=null&&t.activeItem?DA(t.activeItem):void 0,s=e.findIndex(a=>En(i,DA(a))),r=s!==-1?s:(t==null?void 0:t.activeIndex)<e.length?t==null?void 0:t.activeIndex:e.length>0?0:-1,o=e.map((a,c)=>({...a,active:c===r})),l=o[r];return{items:o,itemsMap:Gv(o,a=>ht(a.path)),activeItem:l,activeIndex:r}}function q$(n){const e=n.activeIndex<n.items.length-1?n.activeIndex+1:n.items.length>0?0:-1,t=n.items[e],i=n.items.map((s,r)=>({...s,active:r===e}));return{...n,items:i,itemsMap:Gv(i,s=>ht(s.path)),activeItem:t,activeIndex:e}}function z$(n){const e=n.activeIndex>0?n.activeIndex-1:n.items.length-1,t=n.items[e],i=n.items.map((s,r)=>({...s,active:r===e}));return{...n,items:i,itemsMap:Gv(i,s=>ht(s.path)),activeItem:t,activeIndex:e}}function _N(n,e,t,i=1/0){const s=[],r=[];function o(a){s.length<i&&s.push(a)}function l(a,c){if(hi(c)){const u=r.length;r.push("0");for(let f=0;f<c.length;f++)if(r[u]=String(f),l(a,c[f]),s.length>=i)return;r.pop()}else if(Li(c)){const u=Object.keys(c),f=r.length;r.push("");for(const h of u)if(r[f]=h,OA(h,a,r,vr.key,o),l(a,c[h]),s.length>=i)return;r.pop()}else OA(String(c),a,r,vr.value,o)}if(typeof n=="string"&&n!==""){const a=n.toLowerCase();l(a,e)}return s}function OA(n,e,t,i,s){const r=n.toLowerCase();let o=0,l=-1,a=-1;do a=r.indexOf(e,l),a!==-1&&(l=a+e.length,s({path:t.slice(0),field:i,fieldIndex:o,start:a,end:l}),o++);while(a!==-1)}function S0(n,e,t,i){return n.substring(0,t)+e+n.substring(i)}function RA(n,e,t){let i=n;return Pq(t,s=>{i=S0(i,e,s.start,s.end)}),i}function G$(n,e,t,i,s){const{field:r,path:o,start:l,end:a}=i;if(r===vr.key){const c=gn(o),u=wt(n,c),f=Xt(o),h=Object.keys(u),d=S0(f,t,l,a),m=Of(c,h,f,d);return{newSelection:oc(n,m),operations:m}}else if(r===vr.value){const c=wt(n,o);if(c===void 0)throw new Error(`Cannot replace: path not found ${ht(o)}`);const u=typeof c=="string"?c:String(c),f=ht(o),h=kf(c,e.enforceStringMap,f,s),d=S0(u,t,l,a),m=[{op:"replace",path:ht(o),value:h?d:gf(d,s)}];return{newSelection:oc(n,m),operations:m}}else throw new Error(`Cannot replace: unknown type of search result field ${r}`)}function K$(n,e,t,i,s){const r=_N(t,n,e,1/0),o=[];for(let c=0;c<r.length;c++){const u=r[c-1],f=r[c];c===0||f.field!==u.field||!En(f.path,u.path)?o.push({path:f.path,field:f.field,items:[f]}):Xt(o).items.push(f)}o.sort((c,u)=>c.field!==u.field?c.field===vr.key?1:-1:u.path.length-c.path.length);let l=[],a;return o.forEach(c=>{const{field:u,path:f,items:h}=c;if(u===vr.key){const d=gn(f),m=wt(n,d),p=Xt(f),_=Object.keys(m),v=RA(p,i,h),y=Of(d,_,p,v);l=l.concat(y),a=oc(n,y)}else if(u===vr.value){const d=wt(n,f);if(d===void 0)throw new Error(`Cannot replace: path not found ${ht(f)}`);const m=typeof d=="string"?d:String(d),p=ht(f),_=kf(d,e.enforceStringMap,p,s),v=RA(m,i,h),y=[{op:"replace",path:ht(f),value:_?v:gf(v,s)}];l=l.concat(y),a=oc(n,y)}else throw new Error(`Cannot replace: unknown type of search result field ${u}`)}),{operations:l,newSelection:a}}function X$(n,e){const t=[];let i=0;for(const r of e){const o=n.slice(i,r.start);o!==""&&t.push({type:"normal",text:o,active:!1});const l=n.slice(r.start,r.end);t.push({type:"highlight",text:l,active:r.active}),i=r.end}const s=Xt(e);return s.end<n.length&&t.push({type:"normal",text:n.slice(s.end),active:!1}),t}function DA(n){return n.path.concat(n.field,String(n.fieldIndex))}function Q$(n,e){var i;const t=(i=n==null?void 0:n[e])==null?void 0:i.filter(s=>s.field===vr.key);if(!(!t||t.length===0))return t}function NA(n,e){var i;const t=(i=n==null?void 0:n[e])==null?void 0:i.filter(s=>s.field===vr.value);if(!(!t||t.length===0))return t}function E0(n){var e;if(navigator.clipboard)return navigator.clipboard.writeText(n);if((e=document.queryCommandSupported)!=null&&e.call(document,"copy")){const t=document.createElement("textarea");t.value=n,t.style.position="fixed",t.style.opacity="0",document.body.appendChild(t),t.select();try{document.execCommand("copy")}catch(i){console.error(i)}finally{document.body.removeChild(t)}}else console.error("Copy failed.")}function Y$(n){let e,t,i,s,r,o,l,a,c;return o=new Vt({props:{data:_f}}),{c(){e=k("div"),t=k("div"),i=q(n[0]),s=U(),r=k("button"),ke(o.$$.fragment),this.h()},l(u){e=T(u,"DIV",{class:!0});var f=I(e);t=T(f,"DIV",{class:!0});var h=I(t);i=z(h,n[0]),h.forEach(b),s=W(f),r=T(f,"BUTTON",{type:!0,class:!0});var d=I(r);Oe(o.$$.fragment,d),d.forEach(b),f.forEach(b),this.h()},h(){S(t,"class","jse-title svelte-1djqugc"),S(r,"type","button"),S(r,"class","jse-close svelte-1djqugc"),S(e,"class","jse-header svelte-1djqugc")},m(u,f){H(u,e,f),g(e,t),g(t,i),g(e,s),g(e,r),Te(o,r,null),l=!0,a||(c=_e(r,"click",n[1]),a=!0)},p(u,[f]){(!l||f&1)&&Le(i,u[0])},i(u){l||(B(o.$$.fragment,u),l=!0)},o(u){G(o.$$.fragment,u),l=!1},d(u){u&&b(e),Ie(o),a=!1,c()}}}function J$(n,e,t){let{title:i="Modal"}=e;const{close:s}=Bn("simple-modal");return n.$$set=r=>{"title"in r&&t(0,i=r.title)},[i,s]}let Z$=class extends st{constructor(e){super(),rt(this,e,J$,Y$,cn,{title:0})}};const yN=Z$;function x$(n){let e,t,i,s,r,o,l,a,c,u,f,h,d,m,p,_,v,y,w,A,E,C,R,D,N,L,F,P,Q,O,K,X;return t=new yN({props:{title:"Copying and pasting"}}),{c(){e=k("div"),ke(t.$$.fragment),i=U(),s=k("div"),r=k("div"),o=q("These actions are unavailable via the menu. Please use:"),l=U(),a=k("div"),c=k("div"),u=k("div"),f=q(n[1]),h=q("+C"),d=q(`
        for copy`),m=U(),p=k("div"),_=k("div"),v=q(n[1]),y=q("+X"),w=q(`
        for cut`),A=U(),E=k("div"),C=k("div"),R=q(n[1]),D=q("+V"),N=q(`
        for paste`),L=U(),F=k("div"),P=k("button"),Q=q("Close"),this.h()},l(J){e=T(J,"DIV",{class:!0});var te=I(e);Oe(t.$$.fragment,te),i=W(te),s=T(te,"DIV",{class:!0});var j=I(s);r=T(j,"DIV",{});var x=I(r);o=z(x,"These actions are unavailable via the menu. Please use:"),x.forEach(b),l=W(j),a=T(j,"DIV",{class:!0});var Z=I(a);c=T(Z,"DIV",{class:!0});var V=I(c);u=T(V,"DIV",{class:!0});var ce=I(u);f=z(ce,n[1]),h=z(ce,"+C"),ce.forEach(b),d=z(V,`
        for copy`),V.forEach(b),m=W(Z),p=T(Z,"DIV",{class:!0});var pe=I(p);_=T(pe,"DIV",{class:!0});var re=I(_);v=z(re,n[1]),y=z(re,"+X"),re.forEach(b),w=z(pe,`
        for cut`),pe.forEach(b),A=W(Z),E=T(Z,"DIV",{class:!0});var ye=I(E);C=T(ye,"DIV",{class:!0});var Ne=I(C);R=z(Ne,n[1]),D=z(Ne,"+V"),Ne.forEach(b),N=z(ye,`
        for paste`),ye.forEach(b),Z.forEach(b),L=W(j),F=T(j,"DIV",{class:!0});var Y=I(F);P=T(Y,"BUTTON",{type:!0,class:!0});var Ce=I(P);Q=z(Ce,"Close"),Ce.forEach(b),Y.forEach(b),j.forEach(b),te.forEach(b),this.h()},h(){S(u,"class","jse-key svelte-wp98us"),S(c,"class","jse-shortcut"),S(_,"class","jse-key svelte-wp98us"),S(p,"class","jse-shortcut"),S(C,"class","jse-key svelte-wp98us"),S(E,"class","jse-shortcut"),S(a,"class","jse-shortcuts svelte-wp98us"),S(P,"type","button"),S(P,"class","jse-primary svelte-wp98us"),S(F,"class","jse-actions svelte-wp98us"),S(s,"class","jse-contents svelte-wp98us"),S(e,"class","jse-modal jse-copy-paste svelte-wp98us")},m(J,te){H(J,e,te),Te(t,e,null),g(e,i),g(e,s),g(s,r),g(r,o),g(s,l),g(s,a),g(a,c),g(c,u),g(u,f),g(u,h),g(c,d),g(a,m),g(a,p),g(p,_),g(_,v),g(_,y),g(p,w),g(a,A),g(a,E),g(E,C),g(C,R),g(C,D),g(E,N),g(s,L),g(s,F),g(F,P),g(P,Q),O=!0,K||(X=_e(P,"click",n[0]),K=!0)},p:Xe,i(J){O||(B(t.$$.fragment,J),O=!0)},o(J){G(t.$$.fragment,J),O=!1},d(J){J&&b(e),Ie(t),K=!1,X()}}}function $$(n){const{close:e}=Bn("simple-modal");return[e,tR?"⌘":"Ctrl"]}class eee extends st{constructor(e){super(),rt(this,e,$$,x$,cn,{})}}const tee=eee;function nee(n){let e,t;return{c(){e=k("div"),t=q("Repair invalid JSON, then click apply"),this.h()},l(i){e=T(i,"DIV",{slot:!0,class:!0});var s=I(e);t=z(s,"Repair invalid JSON, then click apply"),s.forEach(b),this.h()},h(){S(e,"slot","left"),S(e,"class","jse-info svelte-1puchbn")},m(i,s){H(i,e,s),g(e,t)},p:Xe,d(i){i&&b(e)}}}function iee(n){let e,t;return e=new ra({props:{type:"success",message:"JSON is valid now and can be parsed.",actions:n[5]}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,s){const r={};s&32&&(r.actions=i[5]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function see(n){let e,t;return e=new ra({props:{type:"error",icon:sa,message:`Cannot parse JSON: ${n[2].message}`,actions:n[6]}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,s){const r={};s&4&&(r.message=`Cannot parse JSON: ${i[2].message}`),s&64&&(r.actions=i[6]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function ree(n){let e,t,i,s,r,o,l,a,c,u;t=new nb({props:{items:n[7],$$slots:{left:[nee]},$$scope:{ctx:n}}});const f=[see,iee],h=[];function d(m,p){return m[2]?0:1}return s=d(n),r=h[s]=f[s](n),{c(){e=k("div"),ke(t.$$.fragment),i=U(),r.c(),o=U(),l=k("textarea"),this.h()},l(m){e=T(m,"DIV",{class:!0});var p=I(e);Oe(t.$$.fragment,p),i=W(p),r.l(p),o=W(p),l=T(p,"TEXTAREA",{class:!0,autocomplete:!0,autocapitalize:!0,spellcheck:!0}),I(l).forEach(b),p.forEach(b),this.h()},h(){l.value=n[0],l.readOnly=n[1],S(l,"class","jse-json-text svelte-1puchbn"),S(l,"autocomplete","off"),S(l,"autocapitalize","off"),S(l,"spellcheck","false"),S(e,"class","jse-json-repair-component svelte-1puchbn")},m(m,p){H(m,e,p),Te(t,e,null),g(e,i),h[s].m(e,null),g(e,o),g(e,l),n[19](l),n[20](e),a=!0,c||(u=_e(l,"input",n[8]),c=!0)},p(m,[p]){const _={};p&128&&(_.items=m[7]),p&134217728&&(_.$$scope={dirty:p,ctx:m}),t.$set(_);let v=s;s=d(m),s===v?h[s].p(m,p):(He(),G(h[v],1,1,()=>{h[v]=null}),qe(),r=h[s],r?r.p(m,p):(r=h[s]=f[s](m),r.c()),B(r,1),r.m(e,o)),(!a||p&1)&&(l.value=m[0]),(!a||p&2)&&(l.readOnly=m[1])},i(m){a||(B(t.$$.fragment,m),B(r),a=!0)},o(m){G(t.$$.fragment,m),G(r),a=!1},d(m){m&&b(e),Ie(t),h[s].d(),n[19](null),n[20](null),c=!1,u()}}}function oee(n,e,t){let i,s,r,o,l,a,c,u,{text:f=""}=e,{readOnly:h=!1}=e,{onParse:d}=e,{onRepair:m}=e,{onChange:p=null}=e,{onApply:_}=e,{onCancel:v}=e,{onRenderMenu:y=Hn}=e;const w=Is("jsoneditor:JSONRepair");let A,E;function C(O){try{return d(O),null}catch(K){return Qv(O,K.message)}}function R(O){try{return m(O),!0}catch{return!1}}function D(){E&&i&&i.position!=null&&(E.setSelectionRange(i.position,i.position),setTimeout(()=>{E.focus()}))}function N(O){w("handleChange");const K=O.target.value;f!==K&&(t(0,f=K),p&&p(f))}function L(){_(f)}function F(){try{t(0,f=m(f)),p&&p(f)}catch{}}function P(O){Ut[O?"unshift":"push"](()=>{E=O,t(4,E)})}function Q(O){Ut[O?"unshift":"push"](()=>{A=O,t(3,A)})}return n.$$set=O=>{"text"in O&&t(0,f=O.text),"readOnly"in O&&t(1,h=O.readOnly),"onParse"in O&&t(9,d=O.onParse),"onRepair"in O&&t(10,m=O.onRepair),"onChange"in O&&t(11,p=O.onChange),"onApply"in O&&t(12,_=O.onApply),"onCancel"in O&&t(13,v=O.onCancel),"onRenderMenu"in O&&t(14,y=O.onRenderMenu)},n.$$.update=()=>{n.$$.dirty&1&&t(2,i=C(f)),n.$$.dirty&1&&t(17,s=R(f)),n.$$.dirty&4&&w("error",i),n.$$.dirty&8192&&t(18,r=[{space:!0},{icon:_f,title:"Cancel repair",className:"jse-cancel",onClick:v}]),n.$$.dirty&278528&&t(7,o=y("repair",r)||r),n.$$.dirty&229376&&t(6,c=s?[l,a]:[l]),n.$$.dirty&2&&t(5,u=[{icon:C1,text:"Apply",title:"Apply fixed JSON",disabled:h,onClick:L}])},t(15,l={icon:oG,text:"Show me",title:"Scroll to the error location",onClick:D}),t(16,a={icon:xv,text:"Auto repair",title:"Automatically repair JSON",onClick:F}),[f,h,i,A,E,u,c,o,N,d,m,p,_,v,y,l,a,s,r,P,Q]}class lee extends st{constructor(e){super(),rt(this,e,oee,ree,cn,{text:0,readOnly:1,onParse:9,onRepair:10,onChange:11,onApply:12,onCancel:13,onRenderMenu:14})}}const aee=lee;function cee(n){let e,t,i,s;function r(l){n[7](l)}let o={onParse:n[1],onRepair:n[2],onApply:n[4],onCancel:n[5],onRenderMenu:n[3]};return n[0]!==void 0&&(o.text=n[0]),t=new aee({props:o}),Ut.push(()=>Ws(t,"text",r)),{c(){e=k("div"),ke(t.$$.fragment),this.h()},l(l){e=T(l,"DIV",{class:!0});var a=I(e);Oe(t.$$.fragment,a),a.forEach(b),this.h()},h(){S(e,"class","jse-modal jse-repair svelte-1ffm3pm")},m(l,a){H(l,e,a),Te(t,e,null),s=!0},p(l,[a]){const c={};a&2&&(c.onParse=l[1]),a&4&&(c.onRepair=l[2]),a&8&&(c.onRenderMenu=l[3]),!i&&a&1&&(i=!0,c.text=l[0],Js(()=>i=!1)),t.$set(c)},i(l){s||(B(t.$$.fragment,l),s=!0)},o(l){G(t.$$.fragment,l),s=!1},d(l){l&&b(e),Ie(t)}}}function uee(n,e,t){let{text:i}=e,{onParse:s}=e,{onRepair:r}=e,{onApply:o}=e,{onRenderMenu:l}=e;const{close:a}=Bn("simple-modal");function c(h){a(),o(h)}function u(){a()}function f(h){i=h,t(0,i)}return n.$$set=h=>{"text"in h&&t(0,i=h.text),"onParse"in h&&t(1,s=h.onParse),"onRepair"in h&&t(2,r=h.onRepair),"onApply"in h&&t(6,o=h.onApply),"onRenderMenu"in h&&t(3,l=h.onRenderMenu)},[i,s,r,l,c,u,o,f]}class fee extends st{constructor(e){super(),rt(this,e,uee,cee,cn,{text:0,onParse:1,onRepair:2,onApply:6,onRenderMenu:3})}}const hee=fee;function PA(n,e,t){const i=n.slice();return i[11]=e[t],i}const dee=n=>({}),MA=n=>({});function BA(n){let e,t;return e=new Vt({props:{data:n[11].icon}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,s){const r={};s&1&&(r.data=i[11].icon),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function LA(n){let e,t,i,s=n[11].text+"",r,o,l,a,c,u,f,h=n[11].icon&&BA(n);function d(){return n[9](n[11])}return{c(){e=k("li"),t=k("button"),h&&h.c(),i=U(),r=q(s),a=U(),this.h()},l(m){e=T(m,"LI",{class:!0});var p=I(e);t=T(p,"BUTTON",{type:!0,title:!0,class:!0});var _=I(t);h&&h.l(_),i=W(_),r=z(_,s),_.forEach(b),a=W(p),p.forEach(b),this.h()},h(){S(t,"type","button"),S(t,"title",o=n[11].title),t.disabled=l=n[11].disabled,S(t,"class","svelte-kae4bx"),S(e,"class","svelte-kae4bx")},m(m,p){H(m,e,p),g(e,t),h&&h.m(t,null),g(t,i),g(t,r),g(e,a),c=!0,u||(f=_e(t,"click",d),u=!0)},p(m,p){n=m,n[11].icon?h?(h.p(n,p),p&1&&B(h,1)):(h=BA(n),h.c(),B(h,1),h.m(t,i)):h&&(He(),G(h,1,1,()=>{h=null}),qe()),(!c||p&1)&&s!==(s=n[11].text+"")&&Le(r,s),(!c||p&1&&o!==(o=n[11].title))&&S(t,"title",o),(!c||p&1&&l!==(l=n[11].disabled))&&(t.disabled=l)},i(m){c||(B(h),c=!0)},o(m){G(h),c=!1},d(m){m&&b(e),h&&h.d(),u=!1,f()}}}function mee(n){let e,t,i,s,r,o,l,a,c,u;const f=n[8].defaultItem,h=ls(f,n,n[7],MA);s=new Vt({props:{data:Mr}});let d=n[0],m=[];for(let _=0;_<d.length;_+=1)m[_]=LA(PA(n,d,_));const p=_=>G(m[_],1,1,()=>{m[_]=null});return{c(){e=k("div"),h&&h.c(),t=U(),i=k("button"),ke(s.$$.fragment),r=U(),o=k("div"),l=k("ul");for(let _=0;_<m.length;_+=1)m[_].c();this.h()},l(_){e=T(_,"DIV",{class:!0,title:!0});var v=I(e);h&&h.l(v),t=W(v),i=T(v,"BUTTON",{type:!0,class:!0,"data-type":!0});var y=I(i);Oe(s.$$.fragment,y),y.forEach(b),r=W(v),o=T(v,"DIV",{class:!0,style:!0});var w=I(o);l=T(w,"UL",{class:!0});var A=I(l);for(let E=0;E<m.length;E+=1)m[E].l(A);A.forEach(b),w.forEach(b),v.forEach(b),this.h()},h(){S(i,"type","button"),S(i,"class","jse-open-dropdown svelte-kae4bx"),S(i,"data-type","jse-open-dropdown"),i.disabled=n[4],xe(i,"jse-visible",n[3]),S(l,"class","svelte-kae4bx"),S(o,"class","jse-dropdown-items svelte-kae4bx"),lt(o,"width",n[2]),xe(o,"jse-visible",n[3]),S(e,"class","jse-dropdown-button svelte-kae4bx"),S(e,"title",n[1])},m(_,v){H(_,e,v),h&&h.m(e,null),g(e,t),g(e,i),Te(s,i,null),g(e,r),g(e,o),g(o,l);for(let y=0;y<m.length;y+=1)m[y].m(l,null);a=!0,c||(u=[_e(i,"click",n[5]),_e(e,"click",n[6])],c=!0)},p(_,[v]){if(h&&h.p&&(!a||v&128)&&as(h,f,_,_[7],a?us(f,_[7],v,dee):cs(_[7]),MA),(!a||v&16)&&(i.disabled=_[4]),(!a||v&8)&&xe(i,"jse-visible",_[3]),v&1){d=_[0];let y;for(y=0;y<d.length;y+=1){const w=PA(_,d,y);m[y]?(m[y].p(w,v),B(m[y],1)):(m[y]=LA(w),m[y].c(),B(m[y],1),m[y].m(l,null))}for(He(),y=d.length;y<m.length;y+=1)p(y);qe()}(!a||v&4)&&lt(o,"width",_[2]),(!a||v&8)&&xe(o,"jse-visible",_[3]),(!a||v&2)&&S(e,"title",_[1])},i(_){if(!a){B(h,_),B(s.$$.fragment,_);for(let v=0;v<d.length;v+=1)B(m[v]);a=!0}},o(_){G(h,_),G(s.$$.fragment,_),m=m.filter(Boolean);for(let v=0;v<m.length;v+=1)G(m[v]);a=!1},d(_){_&&b(e),h&&h.d(_),Ie(s),Ft(m,_),c=!1,an(u)}}}function pee(n,e,t){let i,{$$slots:s={},$$scope:r}=e,{items:o=[]}=e,{title:l=void 0}=e,{width:a="120px"}=e,c=!1;function u(){const m=c;setTimeout(()=>t(3,c=!m))}function f(){t(3,c=!1)}function h(m){ia(m)==="Escape"&&(m.preventDefault(),t(3,c=!1))}Mi(()=>{document.addEventListener("click",f),document.addEventListener("keydown",h)}),br(()=>{document.removeEventListener("click",f),document.removeEventListener("keydown",h)});const d=m=>m.onClick();return n.$$set=m=>{"items"in m&&t(0,o=m.items),"title"in m&&t(1,l=m.title),"width"in m&&t(2,a=m.width),"$$scope"in m&&t(7,r=m.$$scope)},n.$$.update=()=>{n.$$.dirty&1&&t(4,i=o.every(m=>m.disabled===!0))},[o,l,a,c,i,u,f,r,s,d]}class gee extends st{constructor(e){super(),rt(this,e,pee,mee,cn,{items:0,title:1,width:2})}}const fg=gee;var vee={prefix:"far",iconName:"lightbulb",icon:[384,512,[128161],"f0eb","M281.2 248.9C295.6 228.3 304 203.2 304 176c0-70.7-57.3-128-128-128S48 105.3 48 176c0 27.2 8.4 52.3 22.8 72.9c3.7 5.3 8.1 11.3 12.8 17.7l0 0c12.9 17.7 28.3 38.9 39.8 59.8c10.4 19 15.7 38.8 18.3 57.5H93c-2.2-12-5.9-23.7-11.8-34.5c-9.9-18-22.2-34.9-34.5-51.8l0 0 0 0c-5.2-7.1-10.4-14.2-15.4-21.4C11.6 247.9 0 213.3 0 176C0 78.8 78.8 0 176 0s176 78.8 176 176c0 37.3-11.6 71.9-31.4 100.3c-5 7.2-10.2 14.3-15.4 21.4l0 0 0 0c-12.3 16.8-24.6 33.7-34.5 51.8c-5.9 10.8-9.6 22.5-11.8 34.5H210.4c2.6-18.7 7.9-38.6 18.3-57.5c11.5-20.9 26.9-42.1 39.8-59.8l0 0 0 0 0 0c4.7-6.4 9-12.4 12.7-17.7zM176 128c-26.5 0-48 21.5-48 48c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-44.2 35.8-80 80-80c8.8 0 16 7.2 16 16s-7.2 16-16 16zm0 384c-44.2 0-80-35.8-80-80V416H256v16c0 44.2-35.8 80-80 80z"]},bee={prefix:"far",iconName:"square-check",icon:[448,512,[9745,9989,61510,"check-square"],"f14a","M211.8 339.8C200.9 350.7 183.1 350.7 172.2 339.8L108.2 275.8C97.27 264.9 97.27 247.1 108.2 236.2C119.1 225.3 136.9 225.3 147.8 236.2L192 280.4L300.2 172.2C311.1 161.3 328.9 161.3 339.8 172.2C350.7 183.1 350.7 200.9 339.8 211.8L211.8 339.8zM0 96C0 60.65 28.65 32 64 32H384C419.3 32 448 60.65 448 96V416C448 451.3 419.3 480 384 480H64C28.65 480 0 451.3 0 416V96zM48 96V416C48 424.8 55.16 432 64 432H384C392.8 432 400 424.8 400 416V96C400 87.16 392.8 80 384 80H64C55.16 80 48 87.16 48 96z"]},Qd=bee,Yd={prefix:"far",iconName:"square",icon:[448,512,[9632,9723,9724,61590],"f0c8","M384 32C419.3 32 448 60.65 448 96V416C448 451.3 419.3 480 384 480H64C28.65 480 0 451.3 0 416V96C0 60.65 28.65 32 64 32H384zM384 80H64C55.16 80 48 87.16 48 96V416C48 424.8 55.16 432 64 432H384C392.8 432 400 424.8 400 416V96C400 87.16 392.8 80 384 80z"]},_ee={prefix:"far",iconName:"clock",icon:[512,512,[128339,"clock-four"],"f017","M464 256A208 208 0 1 1 48 256a208 208 0 1 1 416 0zM0 256a256 256 0 1 0 512 0A256 256 0 1 0 0 256zM232 120V256c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2V120c0-13.3-10.7-24-24-24s-24 10.7-24 24z"]};function yee(n){let e,t,i,s,r,o,l;return t=new Vt({props:{data:$v}}),{c(){e=k("button"),ke(t.$$.fragment),i=q(" Edit value"),this.h()},l(a){e=T(a,"BUTTON",{type:!0,slot:!0,title:!0,class:!0});var c=I(e);Oe(t.$$.fragment,c),i=z(c," Edit value"),c.forEach(b),this.h()},h(){S(e,"type","button"),S(e,"slot","defaultItem"),S(e,"title","Edit the value (Double-click on the value)"),e.disabled=s=!n[2],S(e,"class","svelte-1jwirqu")},m(a,c){H(a,e,c),Te(t,e,null),g(e,i),r=!0,o||(l=_e(e,"click",n[18]),o=!0)},p(a,c){(!r||c[0]&4&&s!==(s=!a[2]))&&(e.disabled=s)},i(a){r||(B(t.$$.fragment,a),r=!0)},o(a){G(t.$$.fragment,a),r=!1},d(a){a&&b(e),Ie(t),o=!1,l()}}}function See(n){let e,t,i,s,r,o,l;return t=new Vt({props:{data:A1}}),{c(){e=k("button"),ke(t.$$.fragment),i=q(" Cut"),this.h()},l(a){e=T(a,"BUTTON",{type:!0,slot:!0,title:!0,class:!0});var c=I(e);Oe(t.$$.fragment,c),i=z(c," Cut"),c.forEach(b),this.h()},h(){S(e,"type","button"),S(e,"slot","defaultItem"),S(e,"title","Cut selected contents, formatted with indentation (Ctrl+X)"),e.disabled=s=!n[1],S(e,"class","svelte-1jwirqu")},m(a,c){H(a,e,c),Te(t,e,null),g(e,i),r=!0,o||(l=_e(e,"click",n[19]),o=!0)},p(a,c){(!r||c[0]&2&&s!==(s=!a[1]))&&(e.disabled=s)},i(a){r||(B(t.$$.fragment,a),r=!0)},o(a){G(t.$$.fragment,a),r=!1},d(a){a&&b(e),Ie(t),o=!1,l()}}}function Eee(n){let e,t,i,s,r,o,l;return t=new Vt({props:{data:Mu}}),{c(){e=k("button"),ke(t.$$.fragment),i=q(" Copy"),this.h()},l(a){e=T(a,"BUTTON",{type:!0,slot:!0,title:!0,class:!0});var c=I(e);Oe(t.$$.fragment,c),i=z(c," Copy"),c.forEach(b),this.h()},h(){S(e,"type","button"),S(e,"slot","defaultItem"),S(e,"title","Copy selected contents, formatted with indentation (Ctrl+C)"),e.disabled=s=!n[1],S(e,"class","svelte-1jwirqu")},m(a,c){H(a,e,c),Te(t,e,null),g(e,i),r=!0,o||(l=_e(e,"click",n[20]),o=!0)},p(a,c){(!r||c[0]&2&&s!==(s=!a[1]))&&(e.disabled=s)},i(a){r||(B(t.$$.fragment,a),r=!0)},o(a){G(t.$$.fragment,a),r=!1},d(a){a&&b(e),Ie(t),o=!1,l()}}}function UA(n){let e,t,i,s,r,o,l,a;return s=new Vt({props:{data:vee}}),{c(){e=k("div"),t=k("div"),i=k("div"),ke(s.$$.fragment),r=U(),o=k("div"),l=q("Tip: you can open this context menu via right-click or with Ctrl+Q"),this.h()},l(c){e=T(c,"DIV",{class:!0});var u=I(e);t=T(u,"DIV",{class:!0});var f=I(t);i=T(f,"DIV",{class:!0});var h=I(i);Oe(s.$$.fragment,h),h.forEach(b),r=W(f),o=T(f,"DIV",{class:!0});var d=I(o);l=z(d,"Tip: you can open this context menu via right-click or with Ctrl+Q"),d.forEach(b),f.forEach(b),u.forEach(b),this.h()},h(){S(i,"class","svelte-1jwirqu"),S(o,"class","svelte-1jwirqu"),S(t,"class","jse-tip svelte-1jwirqu"),S(e,"class","jse-row svelte-1jwirqu")},m(c,u){H(c,e,u),g(e,t),g(t,i),Te(s,i,null),g(t,r),g(t,o),g(o,l),a=!0},p:Xe,i(c){a||(B(s.$$.fragment,c),a=!0)},o(c){G(s.$$.fragment,c),a=!1},d(c){c&&b(e),Ie(s)}}}function wee(n){let e,t,i,s,r,o,l,a,c,u,f,h,d,m,p,_,v,y,w,A,E,C,R,D,N,L,F,P,Q,O,K,X,J,te,j,x,Z,V,ce,pe,re,ye,Ne,Y,Ce,We,se,Me,he,M,ae,de,ee,$,ne,me,le,ie,be="+",we,Ae,ge,Be,ve,Pe,Se,tt="{}",Ke,Ee,it,De,ze,Re,ut,Bt,gt,At,jt,nn,Zt,ft,un,tn,An,vn,Ln,Cn,Wn,di,Ge,yt,zt,dn,mn,Qt,nt,Dt,mi,Pt,sn,Ht,Wi,gs;s=new Vt({props:{data:$v}}),a=new fg({props:{width:"11em",items:n[8],$$slots:{defaultItem:[yee]},$$scope:{ctx:n}}}),d=new fg({props:{width:"10em",items:n[7],$$slots:{defaultItem:[See]},$$scope:{ctx:n}}}),p=new fg({props:{width:"12em",items:n[6],$$slots:{defaultItem:[Eee]},$$scope:{ctx:n}}}),y=new Vt({props:{data:jz}}),F=new Vt({props:{data:_f}}),X=new Vt({props:{data:cG}}),Z=new Vt({props:{data:$z}}),ye=new Vt({props:{data:eb}}),se=new Vt({props:{data:Zv}}),zt=new Vt({props:{data:Yz}}),Dt=new Vt({props:{data:Gz}});let Sn=n[0]&&UA();return{c(){e=k("div"),t=k("div"),i=k("button"),ke(s.$$.fragment),r=q(" Edit key"),l=U(),ke(a.$$.fragment),c=U(),u=k("div"),f=U(),h=k("div"),ke(d.$$.fragment),m=U(),ke(p.$$.fragment),_=U(),v=k("button"),ke(y.$$.fragment),w=q(" Paste"),E=U(),C=k("div"),R=U(),D=k("div"),N=k("div"),L=k("button"),ke(F.$$.fragment),P=q(" Remove"),O=U(),K=k("button"),ke(X.$$.fragment),J=q(" Duplicate"),j=U(),x=k("button"),ke(Z.$$.fragment),V=q(" Extract"),pe=U(),re=k("button"),ke(ye.$$.fragment),Ne=q(" Sort"),Ce=U(),We=k("button"),ke(se.$$.fragment),Me=q(" Transform"),M=U(),ae=k("div"),de=k("div"),ee=q(n[13]),$=q(":"),ne=U(),me=k("button"),le=k("span"),ie=k("span"),we=q(be),Ae=q(" Structure"),ve=U(),Pe=k("button"),Se=k("span"),Ke=q(tt),Ee=q(" Object"),ze=U(),Re=k("button"),ut=k("span"),Bt=q("[]"),gt=q(" Array"),nn=U(),Zt=k("button"),ft=k("span"),un=k("span"),tn=q('"'),An=q(" Value"),Cn=U(),Wn=k("div"),di=U(),Ge=k("div"),yt=k("button"),ke(zt.$$.fragment),dn=q(" Insert before"),Qt=U(),nt=k("button"),ke(Dt.$$.fragment),mi=q(" Insert after"),sn=U(),Sn&&Sn.c(),this.h()},l(pt){e=T(pt,"DIV",{class:!0});var ue=I(e);t=T(ue,"DIV",{class:!0});var _t=I(t);i=T(_t,"BUTTON",{type:!0,title:!0,class:!0});var $t=I(i);Oe(s.$$.fragment,$t),r=z($t," Edit key"),$t.forEach(b),l=W(_t),Oe(a.$$.fragment,_t),_t.forEach(b),c=W(ue),u=T(ue,"DIV",{class:!0}),I(u).forEach(b),f=W(ue),h=T(ue,"DIV",{class:!0});var On=I(h);Oe(d.$$.fragment,On),m=W(On),Oe(p.$$.fragment,On),_=W(On),v=T(On,"BUTTON",{type:!0,title:!0,class:!0});var pi=I(v);Oe(y.$$.fragment,pi),w=z(pi," Paste"),pi.forEach(b),On.forEach(b),E=W(ue),C=T(ue,"DIV",{class:!0}),I(C).forEach(b),R=W(ue),D=T(ue,"DIV",{class:!0});var Ti=I(D);N=T(Ti,"DIV",{class:!0});var gi=I(N);L=T(gi,"BUTTON",{type:!0,title:!0,class:!0});var vs=I(L);Oe(F.$$.fragment,vs),P=z(vs," Remove"),vs.forEach(b),O=W(gi),K=T(gi,"BUTTON",{type:!0,title:!0,class:!0});var lr=I(K);Oe(X.$$.fragment,lr),J=z(lr," Duplicate"),lr.forEach(b),j=W(gi),x=T(gi,"BUTTON",{type:!0,title:!0,class:!0});var Os=I(x);Oe(Z.$$.fragment,Os),V=z(Os," Extract"),Os.forEach(b),pe=W(gi),re=T(gi,"BUTTON",{type:!0,title:!0,class:!0});var zn=I(re);Oe(ye.$$.fragment,zn),Ne=z(zn," Sort"),zn.forEach(b),Ce=W(gi),We=T(gi,"BUTTON",{type:!0,title:!0,class:!0});var Jr=I(We);Oe(se.$$.fragment,Jr),Me=z(Jr," Transform"),Jr.forEach(b),gi.forEach(b),M=W(Ti),ae=T(Ti,"DIV",{class:!0});var bs=I(ae);de=T(bs,"DIV",{class:!0});var Ii=I(de);ee=z(Ii,n[13]),$=z(Ii,":"),Ii.forEach(b),ne=W(bs),me=T(bs,"BUTTON",{type:!0,title:!0,class:!0});var ar=I(me);le=T(ar,"SPAN",{class:!0});var ol=I(le);ie=T(ol,"SPAN",{class:!0});var cr=I(ie);we=z(cr,be),cr.forEach(b),ol.forEach(b),Ae=z(ar," Structure"),ar.forEach(b),ve=W(bs),Pe=T(bs,"BUTTON",{type:!0,title:!0,class:!0});var Ar=I(Pe);Se=T(Ar,"SPAN",{class:!0});var ll=I(Se);Ke=z(ll,tt),ll.forEach(b),Ee=z(Ar," Object"),Ar.forEach(b),ze=W(bs),Re=T(bs,"BUTTON",{type:!0,title:!0,class:!0});var Ac=I(Re);ut=T(Ac,"SPAN",{class:!0});var Rf=I(ut);Bt=z(Rf,"[]"),Rf.forEach(b),gt=z(Ac," Array"),Ac.forEach(b),nn=W(bs),Zt=T(bs,"BUTTON",{type:!0,title:!0,class:!0});var Cc=I(Zt);ft=T(Cc,"SPAN",{class:!0});var wo=I(ft);un=T(wo,"SPAN",{class:!0});var al=I(un);tn=z(al,'"'),al.forEach(b),wo.forEach(b),An=z(Cc," Value"),Cc.forEach(b),bs.forEach(b),Ti.forEach(b),Cn=W(ue),Wn=T(ue,"DIV",{class:!0}),I(Wn).forEach(b),di=W(ue),Ge=T(ue,"DIV",{class:!0});var ca=I(Ge);yt=T(ca,"BUTTON",{type:!0,title:!0,class:!0});var kc=I(yt);Oe(zt.$$.fragment,kc),dn=z(kc," Insert before"),kc.forEach(b),Qt=W(ca),nt=T(ca,"BUTTON",{type:!0,title:!0,class:!0});var Tc=I(nt);Oe(Dt.$$.fragment,Tc),mi=z(Tc," Insert after"),Tc.forEach(b),ca.forEach(b),sn=W(ue),Sn&&Sn.l(ue),ue.forEach(b),this.h()},h(){S(i,"type","button"),S(i,"title","Edit the key (Double-click on the key)"),i.disabled=o=!n[14],S(i,"class","svelte-1jwirqu"),S(t,"class","jse-row svelte-1jwirqu"),S(u,"class","jse-separator svelte-1jwirqu"),S(v,"type","button"),S(v,"title","Paste clipboard contents (Ctrl+V)"),v.disabled=A=!n[3],S(v,"class","svelte-1jwirqu"),S(h,"class","jse-row svelte-1jwirqu"),S(C,"class","jse-separator svelte-1jwirqu"),S(L,"type","button"),S(L,"title","Remove selected contents (Delete)"),L.disabled=Q=!n[1],S(L,"class","svelte-1jwirqu"),S(K,"type","button"),S(K,"title","Duplicate selected contents (Ctrl+D)"),K.disabled=te=!n[16],S(K,"class","svelte-1jwirqu"),S(x,"type","button"),S(x,"title","Extract selected contents"),x.disabled=ce=!n[15],S(x,"class","svelte-1jwirqu"),S(re,"type","button"),S(re,"title","Sort array or object contents"),re.disabled=Y=!n[1],S(re,"class","svelte-1jwirqu"),S(We,"type","button"),S(We,"title","Transform array or object contents (filter, sort, project)"),We.disabled=he=!n[1],S(We,"class","svelte-1jwirqu"),S(N,"class","jse-column svelte-1jwirqu"),S(de,"class","jse-label svelte-1jwirqu"),S(ie,"class","jse-plus svelte-1jwirqu"),S(le,"class","jse-insert svelte-1jwirqu"),S(me,"type","button"),S(me,"title",ge=n[13]+" structure"),me.disabled=Be=!n[12],S(me,"class","svelte-1jwirqu"),S(Se,"class","jse-insert svelte-1jwirqu"),S(Pe,"type","button"),S(Pe,"title",it=n[13]+" object"),Pe.disabled=De=!n[11],S(Pe,"class","svelte-1jwirqu"),S(ut,"class","jse-insert svelte-1jwirqu"),S(Re,"type","button"),S(Re,"title",At=n[13]+" array"),Re.disabled=jt=!n[10],S(Re,"class","svelte-1jwirqu"),S(un,"class","jse-quote svelte-1jwirqu"),S(ft,"class","jse-insert svelte-1jwirqu"),S(Zt,"type","button"),S(Zt,"title",vn=n[13]+" value"),Zt.disabled=Ln=!n[9],S(Zt,"class","svelte-1jwirqu"),S(ae,"class","jse-column svelte-1jwirqu"),S(D,"class","jse-row svelte-1jwirqu"),S(Wn,"class","jse-separator svelte-1jwirqu"),S(yt,"type","button"),S(yt,"title","Select area before current entry to insert or paste contents"),yt.disabled=mn=!n[1]||n[4],S(yt,"class","svelte-1jwirqu"),S(nt,"type","button"),S(nt,"title","Select area after current entry to insert or paste contents"),nt.disabled=Pt=!n[1]||n[4],S(nt,"class","svelte-1jwirqu"),S(Ge,"class","jse-row svelte-1jwirqu"),S(e,"class","jse-contextmenu svelte-1jwirqu")},m(pt,ue){H(pt,e,ue),g(e,t),g(t,i),Te(s,i,null),g(i,r),g(t,l),Te(a,t,null),g(e,c),g(e,u),g(e,f),g(e,h),Te(d,h,null),g(h,m),Te(p,h,null),g(h,_),g(h,v),Te(y,v,null),g(v,w),g(e,E),g(e,C),g(e,R),g(e,D),g(D,N),g(N,L),Te(F,L,null),g(L,P),g(N,O),g(N,K),Te(X,K,null),g(K,J),g(N,j),g(N,x),Te(Z,x,null),g(x,V),g(N,pe),g(N,re),Te(ye,re,null),g(re,Ne),g(N,Ce),g(N,We),Te(se,We,null),g(We,Me),g(D,M),g(D,ae),g(ae,de),g(de,ee),g(de,$),g(ae,ne),g(ae,me),g(me,le),g(le,ie),g(ie,we),g(me,Ae),g(ae,ve),g(ae,Pe),g(Pe,Se),g(Se,Ke),g(Pe,Ee),g(ae,ze),g(ae,Re),g(Re,ut),g(ut,Bt),g(Re,gt),g(ae,nn),g(ae,Zt),g(Zt,ft),g(ft,un),g(un,tn),g(Zt,An),g(e,Cn),g(e,Wn),g(e,di),g(e,Ge),g(Ge,yt),Te(zt,yt,null),g(yt,dn),g(Ge,Qt),g(Ge,nt),Te(Dt,nt,null),g(nt,mi),g(e,sn),Sn&&Sn.m(e,null),n[59](e),Ht=!0,Wi||(gs=[_e(i,"click",n[17]),_e(v,"click",n[21]),_e(L,"click",n[22]),_e(K,"click",n[23]),_e(x,"click",n[24]),_e(re,"click",n[26]),_e(We,"click",n[27]),_e(me,"click",n[55]),_e(Pe,"click",n[56]),_e(Re,"click",n[57]),_e(Zt,"click",n[58]),_e(yt,"click",n[28]),_e(nt,"click",n[29]),_e(e,"keydown",n[30])],Wi=!0)},p(pt,ue){(!Ht||ue[0]&16384&&o!==(o=!pt[14]))&&(i.disabled=o);const _t={};ue[0]&256&&(_t.items=pt[8]),ue[0]&4|ue[2]&2&&(_t.$$scope={dirty:ue,ctx:pt}),a.$set(_t);const $t={};ue[0]&128&&($t.items=pt[7]),ue[0]&2|ue[2]&2&&($t.$$scope={dirty:ue,ctx:pt}),d.$set($t);const On={};ue[0]&64&&(On.items=pt[6]),ue[0]&2|ue[2]&2&&(On.$$scope={dirty:ue,ctx:pt}),p.$set(On),(!Ht||ue[0]&8&&A!==(A=!pt[3]))&&(v.disabled=A),(!Ht||ue[0]&2&&Q!==(Q=!pt[1]))&&(L.disabled=Q),(!Ht||ue[0]&65536&&te!==(te=!pt[16]))&&(K.disabled=te),(!Ht||ue[0]&32768&&ce!==(ce=!pt[15]))&&(x.disabled=ce),(!Ht||ue[0]&2&&Y!==(Y=!pt[1]))&&(re.disabled=Y),(!Ht||ue[0]&2&&he!==(he=!pt[1]))&&(We.disabled=he),(!Ht||ue[0]&8192)&&Le(ee,pt[13]),(!Ht||ue[0]&8192&&ge!==(ge=pt[13]+" structure"))&&S(me,"title",ge),(!Ht||ue[0]&4096&&Be!==(Be=!pt[12]))&&(me.disabled=Be),(!Ht||ue[0]&8192&&it!==(it=pt[13]+" object"))&&S(Pe,"title",it),(!Ht||ue[0]&2048&&De!==(De=!pt[11]))&&(Pe.disabled=De),(!Ht||ue[0]&8192&&At!==(At=pt[13]+" array"))&&S(Re,"title",At),(!Ht||ue[0]&1024&&jt!==(jt=!pt[10]))&&(Re.disabled=jt),(!Ht||ue[0]&8192&&vn!==(vn=pt[13]+" value"))&&S(Zt,"title",vn),(!Ht||ue[0]&512&&Ln!==(Ln=!pt[9]))&&(Zt.disabled=Ln),(!Ht||ue[0]&18&&mn!==(mn=!pt[1]||pt[4]))&&(yt.disabled=mn),(!Ht||ue[0]&18&&Pt!==(Pt=!pt[1]||pt[4]))&&(nt.disabled=Pt),pt[0]?Sn?(Sn.p(pt,ue),ue[0]&1&&B(Sn,1)):(Sn=UA(),Sn.c(),B(Sn,1),Sn.m(e,null)):Sn&&(He(),G(Sn,1,1,()=>{Sn=null}),qe())},i(pt){Ht||(B(s.$$.fragment,pt),B(a.$$.fragment,pt),B(d.$$.fragment,pt),B(p.$$.fragment,pt),B(y.$$.fragment,pt),B(F.$$.fragment,pt),B(X.$$.fragment,pt),B(Z.$$.fragment,pt),B(ye.$$.fragment,pt),B(se.$$.fragment,pt),B(zt.$$.fragment,pt),B(Dt.$$.fragment,pt),B(Sn),Ht=!0)},o(pt){G(s.$$.fragment,pt),G(a.$$.fragment,pt),G(d.$$.fragment,pt),G(p.$$.fragment,pt),G(y.$$.fragment,pt),G(F.$$.fragment,pt),G(X.$$.fragment,pt),G(Z.$$.fragment,pt),G(ye.$$.fragment,pt),G(se.$$.fragment,pt),G(zt.$$.fragment,pt),G(Dt.$$.fragment,pt),G(Sn),Ht=!1},d(pt){pt&&b(e),Ie(s),Ie(a),Ie(d),Ie(p),Ie(y),Ie(F),Ie(X),Ie(Z),Ie(ye),Ie(se),Ie(zt),Ie(Dt),Sn&&Sn.d(),n[59](null),Wi=!1,an(gs)}}}function Aee(n,e,t){let i,s,r,o,l,a,c,u,f,h,d,m,p,_,v,y,w,A,E,C,{json:R}=e,{documentState:D}=e,{parser:N}=e,{showTip:L}=e,{onCloseContextMenu:F}=e,{onEditKey:P}=e,{onEditValue:Q}=e,{onToggleEnforceString:O}=e,{onCut:K}=e,{onCopy:X}=e,{onPaste:J}=e,{onRemove:te}=e,{onDuplicate:j}=e,{onExtract:x}=e,{onInsertBefore:Z}=e,{onInsert:V}=e,{onConvert:ce}=e,{onInsertAfter:pe}=e,{onSort:re}=e,{onTransform:ye}=e,Ne;Mi(()=>{setTimeout(()=>{const Se=[...Ne.querySelectorAll("button")].find(tt=>!tt.disabled);Se&&Se.focus()})});function Y(){F(),P()}function Ce(){F(),Q()}function We(){F(),O()}function se(){F(),K(!0)}function Me(){F(),K(!1)}function he(){F(),X(!0)}function M(){F(),X(!1)}function ae(){F(),J()}function de(){F(),te()}function ee(){F(),j()}function $(){F(),x()}function ne(Se){F(),a?ce(Se):V(Se)}function me(){F(),re()}function le(){F(),ye()}function ie(){F(),Z()}function be(){F(),pe()}function we(Se){const tt=ia(Se).replace(/^Command\+/,"Ctrl+");if(tt==="Up"||tt==="Down"||tt==="Left"||tt==="Right"){Se.preventDefault();const Ke=Array.from(Ne.querySelectorAll("button:not([disabled])")),Ee=Oz({allElements:Ke,currentElement:Se.target,direction:tt,hasPrio:it=>it.getAttribute("data-type")!=="jse-open-dropdown"});Ee&&Ee.focus()}}const Ae=()=>ne("structure"),ge=()=>ne("object"),Be=()=>ne("array"),ve=()=>ne("value");function Pe(Se){Ut[Se?"unshift":"push"](()=>{Ne=Se,t(5,Ne)})}return n.$$set=Se=>{"json"in Se&&t(31,R=Se.json),"documentState"in Se&&t(32,D=Se.documentState),"parser"in Se&&t(33,N=Se.parser),"showTip"in Se&&t(0,L=Se.showTip),"onCloseContextMenu"in Se&&t(34,F=Se.onCloseContextMenu),"onEditKey"in Se&&t(35,P=Se.onEditKey),"onEditValue"in Se&&t(36,Q=Se.onEditValue),"onToggleEnforceString"in Se&&t(37,O=Se.onToggleEnforceString),"onCut"in Se&&t(38,K=Se.onCut),"onCopy"in Se&&t(39,X=Se.onCopy),"onPaste"in Se&&t(40,J=Se.onPaste),"onRemove"in Se&&t(41,te=Se.onRemove),"onDuplicate"in Se&&t(42,j=Se.onDuplicate),"onExtract"in Se&&t(43,x=Se.onExtract),"onInsertBefore"in Se&&t(44,Z=Se.onInsertBefore),"onInsert"in Se&&t(45,V=Se.onInsert),"onConvert"in Se&&t(46,ce=Se.onConvert),"onInsertAfter"in Se&&t(47,pe=Se.onInsertAfter),"onSort"in Se&&t(48,re=Se.onSort),"onTransform"in Se&&t(49,ye=Se.onTransform)},n.$$.update=()=>{n.$$.dirty[1]&2&&t(51,i=D.selection),n.$$.dirty[1]&1&&t(54,s=R!==void 0),n.$$.dirty[1]&1048576&&t(3,r=i!=null),n.$$.dirty[0]&8|n.$$.dirty[1]&1048576&&t(4,o=r&&ii(i.focusPath)),n.$$.dirty[0]&8|n.$$.dirty[1]&1048577&&t(52,l=r?wt(R,i.focusPath):void 0),n.$$.dirty[1]&9437184&&t(1,a=s&&(yn(i)||ci(i)||_n(i))),n.$$.dirty[0]&18|n.$$.dirty[1]&8388608&&t(16,c=s&&a&&!o),n.$$.dirty[0]&16|n.$$.dirty[1]&9437184&&t(15,u=s&&i!=null&&(yn(i)||_n(i))&&!o),n.$$.dirty[0]&16|n.$$.dirty[1]&9437185&&t(14,f=s&&i!=null&&_0(i)&&!o&&!Array.isArray(wt(R,gn(i.focusPath)))),n.$$.dirty[1]&11534336&&t(2,h=s&&i!=null&&_0(i)&&!Ri(l)),n.$$.dirty[0]&2&&t(53,d=a),n.$$.dirty[1]&4194304&&t(13,m=d?"Convert to":"Insert"),n.$$.dirty[0]&8|n.$$.dirty[1]&4194304&&t(12,p=d?!1:r),n.$$.dirty[0]&8|n.$$.dirty[1]&7340032&&t(11,_=d?Ph(i)&&!ji(l):r),n.$$.dirty[0]&8|n.$$.dirty[1]&7340032&&t(10,v=d?Ph(i)&&!Array.isArray(l):r),n.$$.dirty[0]&8|n.$$.dirty[1]&7340032&&t(9,y=d?Ph(i)&&Ri(l):r),n.$$.dirty[1]&3145734&&t(50,w=i!=null?kf(l,D.enforceStringMap,ht(i.focusPath),N):!1),n.$$.dirty[0]&4|n.$$.dirty[1]&524288&&t(8,A=[{icon:$v,text:"Edit value",title:"Edit the value (Double-click on the value)",onClick:Ce,disabled:!h},{icon:w?Qd:Yd,text:"Enforce string",title:"Enforce keeping the value as string when it contains a numeric value",onClick:We,disabled:!h}]),n.$$.dirty[0]&2&&t(7,E=[{icon:A1,text:"Cut formatted",title:"Cut selected contents, formatted with indentation (Ctrl+X)",onClick:se,disabled:!a},{icon:A1,text:"Cut compacted",title:"Cut selected contents, without indentation (Ctrl+Shift+X)",onClick:Me,disabled:!a}]),n.$$.dirty[0]&2&&t(6,C=[{icon:Mu,text:"Copy formatted",title:"Copy selected contents, formatted with indentation (Ctrl+C)",onClick:he,disabled:!a},{icon:Mu,text:"Copy compacted",title:"Copy selected contents, without indentation (Ctrl+Shift+C)",onClick:M,disabled:!a}])},[L,a,h,r,o,Ne,C,E,A,y,v,_,p,m,f,u,c,Y,Ce,se,he,ae,de,ee,$,ne,me,le,ie,be,we,R,D,N,F,P,Q,O,K,X,J,te,j,x,Z,V,ce,pe,re,ye,w,i,l,d,s,Ae,ge,Be,ve,Pe]}class Cee extends st{constructor(e){super(),rt(this,e,Aee,wee,cn,{json:31,documentState:32,parser:33,showTip:0,onCloseContextMenu:34,onEditKey:35,onEditValue:36,onToggleEnforceString:37,onCut:38,onCopy:39,onPaste:40,onRemove:41,onDuplicate:42,onExtract:43,onInsertBefore:44,onInsert:45,onConvert:46,onInsertAfter:47,onSort:48,onTransform:49},null,[-1,-1,-1])}}const kee=Cee;var w0={},Tee={get exports(){return w0},set exports(n){w0=n}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(n){(function(){var e={}.hasOwnProperty;function t(){for(var i=[],s=0;s<arguments.length;s++){var r=arguments[s];if(r){var o=typeof r;if(o==="string"||o==="number")i.push(r);else if(Array.isArray(r)){if(r.length){var l=t.apply(null,r);l&&i.push(l)}}else if(o==="object"){if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]")){i.push(r.toString());continue}for(var a in r)e.call(r,a)&&r[a]&&i.push(a)}}}return i.join(" ")}n.exports?(t.default=t,n.exports=t):window.classNames=t})()})(Tee);const lc=w0;function WA(n,e,t){const i=n.slice();return i[13]=e[t],i}function VA(n){let e,t,i=n[13].start+"",s,r,o=n[13].end+"",l,a,c,u;function f(){return n[12](n[13])}return{c(){e=k("button"),t=q("show "),s=q(i),r=q("-"),l=q(o),a=U(),this.h()},l(h){e=T(h,"BUTTON",{type:!0,class:!0});var d=I(e);t=z(d,"show "),s=z(d,i),r=z(d,"-"),l=z(d,o),a=W(d),d.forEach(b),this.h()},h(){S(e,"type","button"),S(e,"class","jse-expand-items svelte-a94vy2")},m(h,d){H(h,e,d),g(e,t),g(e,s),g(e,r),g(e,l),g(e,a),c||(u=_e(e,"click",f),c=!0)},p(h,d){n=h,d&16&&i!==(i=n[13].start+"")&&Le(s,i),d&16&&o!==(o=n[13].end+"")&&Le(l,o)},d(h){h&&b(e),c=!1,u()}}}function Iee(n){let e,t,i,s,r,o,l,a,c,u,f,h=n[4],d=[];for(let m=0;m<h.length;m+=1)d[m]=VA(WA(n,h,m));return{c(){e=k("div"),t=k("div"),i=k("div"),s=q("Items "),r=q(n[3]),o=q("-"),l=q(n[2]),a=U();for(let m=0;m<d.length;m+=1)d[m].c();this.h()},l(m){e=T(m,"DIV",{class:!0,style:!0});var p=I(e);t=T(p,"DIV",{});var _=I(t);i=T(_,"DIV",{class:!0});var v=I(i);s=z(v,"Items "),r=z(v,n[3]),o=z(v,"-"),l=z(v,n[2]),v.forEach(b),a=W(_);for(let y=0;y<d.length;y+=1)d[y].l(_);_.forEach(b),p.forEach(b),this.h()},h(){S(i,"class","jse-text svelte-a94vy2"),S(e,"class","jse-collapsed-items svelte-a94vy2"),S(e,"style",c=FA(n[0].length+2)),xe(e,"jse-selected",n[5])},m(m,p){H(m,e,p),g(e,t),g(t,i),g(i,s),g(i,r),g(i,o),g(i,l),g(t,a);for(let _=0;_<d.length;_+=1)d[_].m(t,null);u||(f=_e(e,"mousemove",Oee),u=!0)},p(m,[p]){if(p&8&&Le(r,m[3]),p&4&&Le(l,m[2]),p&19){h=m[4];let _;for(_=0;_<h.length;_+=1){const v=WA(m,h,_);d[_]?d[_].p(v,p):(d[_]=VA(v),d[_].c(),d[_].m(t,null))}for(;_<d.length;_+=1)d[_].d(1);d.length=h.length}p&1&&c!==(c=FA(m[0].length+2))&&S(e,"style",c),p&32&&xe(e,"jse-selected",m[5])},i:Xe,o:Xe,d(m){m&&b(e),Ft(d,m),u=!1,f()}}}function FA(n){return`margin-left: calc(${n} * var(--jse-indent-size))`}function Oee(n){n.stopPropagation()}function Ree(n,e,t){let i,s,r,o,l,{visibleSections:a}=e,{sectionIndex:c}=e,{total:u}=e,{path:f}=e,{pointer:h}=e,{selection:d}=e,{onExpandSection:m}=e;const p=_=>m(f,_);return n.$$set=_=>{"visibleSections"in _&&t(6,a=_.visibleSections),"sectionIndex"in _&&t(7,c=_.sectionIndex),"total"in _&&t(8,u=_.total),"path"in _&&t(0,f=_.path),"pointer"in _&&t(9,h=_.pointer),"selection"in _&&t(10,d=_.selection),"onExpandSection"in _&&t(1,m=_.onExpandSection)},n.$$.update=()=>{n.$$.dirty&192&&t(11,i=a[c]),n.$$.dirty&2048&&t(3,s=i.end),n.$$.dirty&448&&t(2,r=a[c+1]?a[c+1].start:u),n.$$.dirty&1544&&t(5,o=yn(d)?d.pointersMap[l1(h,s)]===!0:!1),n.$$.dirty&12&&t(4,l=m$(s,r))},[f,m,r,s,l,o,a,c,u,h,d,i,p]}class Dee extends st{constructor(e){super(),rt(this,e,Ree,Iee,cn,{visibleSections:6,sectionIndex:7,total:8,path:0,pointer:9,selection:10,onExpandSection:1})}}const Nee=Dee;function Pee(n){let e,t,i,s,r;return t=new Vt({props:{data:Mr}}),{c(){e=k("button"),ke(t.$$.fragment),this.h()},l(o){e=T(o,"BUTTON",{type:!0,class:!0,title:!0});var l=I(e);Oe(t.$$.fragment,l),l.forEach(b),this.h()},h(){S(e,"type","button"),S(e,"class","jse-context-menu-button svelte-1lm9yxm"),S(e,"title",x4),xe(e,"jse-selected",n[0])},m(o,l){H(o,e,l),Te(t,e,null),i=!0,s||(r=_e(e,"click",n[1]),s=!0)},p(o,[l]){(!i||l&1)&&xe(e,"jse-selected",o[0])},i(o){i||(B(t.$$.fragment,o),i=!0)},o(o){G(t.$$.fragment,o),i=!1},d(o){o&&b(e),Ie(t),s=!1,r()}}}function Mee(n,e,t){let{selected:i}=e,{onContextMenu:s}=e;function r(o){let l=o.target;for(;l&&l.nodeName!=="BUTTON";)l=l.parentNode;l&&s({anchor:l,left:0,top:0,width:qc,height:Hc,offsetTop:2,offsetLeft:0,showTip:!0})}return n.$$set=o=>{"selected"in o&&t(0,i=o.selected),"onContextMenu"in o&&t(2,s=o.onContextMenu)},[i,r,s]}class Bee extends st{constructor(e){super(),rt(this,e,Mee,Pee,cn,{selected:0,onContextMenu:2})}}const la=Bee;function jA(n,e,t){const i=n.slice();return i[3]=e[t],i}function Lee(n){let e,t=Gl(n[3].text)+"",i;return{c(){e=k("span"),i=q(t),this.h()},l(s){e=T(s,"SPAN",{class:!0});var r=I(e);i=z(r,t),r.forEach(b),this.h()},h(){S(e,"class","jse-highlight svelte-mtessu"),xe(e,"jse-active",n[3].active)},m(s,r){H(s,e,r),g(e,i)},p(s,r){r&1&&t!==(t=Gl(s[3].text)+"")&&Le(i,t),r&1&&xe(e,"jse-active",s[3].active)},d(s){s&&b(e)}}}function Uee(n){let e=n[3].text+"",t;return{c(){t=q(e)},l(i){t=z(i,e)},m(i,s){H(i,t,s)},p(i,s){s&1&&e!==(e=i[3].text+"")&&Le(t,e)},d(i){i&&b(t)}}}function HA(n){let e;function t(r,o){return r[3].type==="normal"?Uee:Lee}let i=t(n),s=i(n);return{c(){s.c(),e=et()},l(r){s.l(r),e=et()},m(r,o){s.m(r,o),H(r,e,o)},p(r,o){i===(i=t(r))&&s?s.p(r,o):(s.d(1),s=i(r),s&&(s.c(),s.m(e.parentNode,e)))},d(r){s.d(r),r&&b(e)}}}function Wee(n){let e,t=n[0],i=[];for(let s=0;s<t.length;s+=1)i[s]=HA(jA(n,t,s));return{c(){for(let s=0;s<i.length;s+=1)i[s].c();e=et()},l(s){for(let r=0;r<i.length;r+=1)i[r].l(s);e=et()},m(s,r){for(let o=0;o<i.length;o+=1)i[o].m(s,r);H(s,e,r)},p(s,[r]){if(r&1){t=s[0];let o;for(o=0;o<t.length;o+=1){const l=jA(s,t,o);i[o]?i[o].p(l,r):(i[o]=HA(l),i[o].c(),i[o].m(e.parentNode,e))}for(;o<i.length;o+=1)i[o].d(1);i.length=t.length}},i:Xe,o:Xe,d(s){Ft(i,s),s&&b(e)}}}function Vee(n,e,t){let i,{text:s}=e,{searchResultItems:r}=e;return n.$$set=o=>{"text"in o&&t(1,s=o.text),"searchResultItems"in o&&t(2,r=o.searchResultItems)},n.$$.update=()=>{n.$$.dirty&6&&t(0,i=X$(String(s),r))},[i,s,r]}class Fee extends st{constructor(e){super(),rt(this,e,Vee,Wee,kt,{text:1,searchResultItems:2})}}const SN=Fee;function jee(n){let e,t,i,s;return{c(){e=k("div"),this.h()},l(r){e=T(r,"DIV",{class:!0,contenteditable:!0,spellcheck:!0}),I(e).forEach(b),this.h()},h(){S(e,"class",t=Ze(lc("jse-editable-div",n[2],{"jse-short-text":n[0]}))+" svelte-1rwbo30"),S(e,"contenteditable","true"),S(e,"spellcheck","false")},m(r,o){H(r,e,o),n[13](e),i||(s=[_e(e,"input",n[3]),_e(e,"keydown",n[4]),_e(e,"paste",n[5]),_e(e,"blur",n[6])],i=!0)},p(r,[o]){o&5&&t!==(t=Ze(lc("jse-editable-div",r[2],{"jse-short-text":r[0]}))+" svelte-1rwbo30")&&S(e,"class",t)},i:Xe,o:Xe,d(r){r&&b(e),n[13](null),i=!1,an(s)}}}function Hee(n,e,t){const i=Is("jsoneditor:EditableDiv");let{value:s}=e,{shortText:r=!1}=e,{onChange:o}=e,{onCancel:l}=e,{onFind:a}=e,{onPaste:c=Hn}=e,{onValueClass:u=()=>""}=e,f,h=u(s),d=!1;Mi(()=>{i("onMount",{value:s}),p(s),setTimeout(()=>eR(f))}),br(()=>{const E=m();i("onDestroy",{closed:d,value:s,newValue:E}),!d&&E!==s&&o(E,Ol.NO)});function m(){return wz(f.innerText)}function p(E){t(1,f.innerText=Gl(E),f)}function _(){const E=m();E===""&&p(""),t(2,h=u(E))}function v(E){E.stopPropagation();const C=ia(E).replace(/^Command\+/,"Ctrl+");if(C==="Escape"&&(d=!0,l()),C==="Enter"||C==="Tab"){d=!0;const R=m();o(R,Ol.NEXT_INSIDE)}C==="Ctrl+F"&&(E.preventDefault(),a(!1)),C==="Ctrl+H"&&(E.preventDefault(),a(!0))}function y(E){if(!c)return;const C=E.clipboardData.getData("text/plain");c(C)}function w(){const E=document.hasFocus(),C=m();i("handleBlur",{hasFocus:E,closed:d,value:s,newValue:C}),document.hasFocus()&&!d&&(d=!0,C!==s?o(C,Ol.SELF):l())}function A(E){Ut[E?"unshift":"push"](()=>{f=E,t(1,f)})}return n.$$set=E=>{"value"in E&&t(7,s=E.value),"shortText"in E&&t(0,r=E.shortText),"onChange"in E&&t(8,o=E.onChange),"onCancel"in E&&t(9,l=E.onCancel),"onFind"in E&&t(10,a=E.onFind),"onPaste"in E&&t(11,c=E.onPaste),"onValueClass"in E&&t(12,u=E.onValueClass)},[r,f,h,_,v,y,w,s,o,l,a,c,u,A]}class qee extends st{constructor(e){super(),rt(this,e,Hee,jee,cn,{value:7,shortText:0,onChange:8,onCancel:9,onFind:10,onPaste:11,onValueClass:12})}}const EN=qee;function zee(n){let e,t,i,s,r,o,l;const a=[Xee,Kee],c=[];function u(f,h){return f[1]?0:1}return t=u(n),i=c[t]=a[t](n),{c(){e=k("div"),i.c(),this.h()},l(f){e=T(f,"DIV",{"data-type":!0,class:!0});var h=I(e);i.l(h),h.forEach(b),this.h()},h(){S(e,"data-type","selectable-key"),S(e,"class",s=Ze(n[6](n[0]))+" svelte-1cm0o9n")},m(f,h){H(f,e,h),c[t].m(e,null),r=!0,o||(l=_e(e,"dblclick",n[5]),o=!0)},p(f,h){let d=t;t=u(f),t===d?c[t].p(f,h):(He(),G(c[d],1,1,()=>{c[d]=null}),qe(),i=c[t],i?i.p(f,h):(i=c[t]=a[t](f),i.c()),B(i,1),i.m(e,null)),(!r||h&1&&s!==(s=Ze(f[6](f[0]))+" svelte-1cm0o9n"))&&S(e,"class",s)},i(f){r||(B(i),r=!0)},o(f){G(i),r=!1},d(f){f&&b(e),c[t].d(),o=!1,l()}}}function Gee(n){let e,t;return e=new EN({props:{value:n[2].normalization.escapeValue(n[0]),shortText:!0,onChange:n[7],onCancel:n[8],onFind:n[2].onFind}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,s){const r={};s&5&&(r.value=i[2].normalization.escapeValue(i[0])),s&4&&(r.onFind=i[2].onFind),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function Kee(n){let e=Gl(n[2].normalization.escapeValue(n[0]))+"",t;return{c(){t=q(e)},l(i){t=z(i,e)},m(i,s){H(i,t,s)},p(i,s){s&5&&e!==(e=Gl(i[2].normalization.escapeValue(i[0]))+"")&&Le(t,e)},i:Xe,o:Xe,d(i){i&&b(t)}}}function Xee(n){let e,t;return e=new SN({props:{text:n[2].normalization.escapeValue(n[0]),searchResultItems:n[1]}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,s){const r={};s&5&&(r.text=i[2].normalization.escapeValue(i[0])),s&2&&(r.searchResultItems=i[1]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function qA(n){let e,t;return e=new la({props:{selected:!0,onContextMenu:n[2].onContextMenu}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,s){const r={};s&4&&(r.onContextMenu=i[2].onContextMenu),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function Qee(n){let e,t,i,s,r;const o=[Gee,zee],l=[];function a(u,f){return u[4]?0:1}e=a(n),t=l[e]=o[e](n);let c=!n[2].readOnly&&n[3]&&!n[4]&&qA(n);return{c(){t.c(),i=U(),c&&c.c(),s=et()},l(u){t.l(u),i=W(u),c&&c.l(u),s=et()},m(u,f){l[e].m(u,f),H(u,i,f),c&&c.m(u,f),H(u,s,f),r=!0},p(u,[f]){let h=e;e=a(u),e===h?l[e].p(u,f):(He(),G(l[h],1,1,()=>{l[h]=null}),qe(),t=l[e],t?t.p(u,f):(t=l[e]=o[e](u),t.c()),B(t,1),t.m(i.parentNode,i)),!u[2].readOnly&&u[3]&&!u[4]?c?(c.p(u,f),f&28&&B(c,1)):(c=qA(u),c.c(),B(c,1),c.m(s.parentNode,s)):c&&(He(),G(c,1,1,()=>{c=null}),qe())},i(u){r||(B(t),B(c),r=!0)},o(u){G(t),G(c),r=!1},d(u){l[e].d(u),u&&b(i),c&&c.d(u),u&&b(s)}}}function Yee(n,e,t){let i,s,{path:r}=e,{pointer:o}=e,{key:l}=e,{selection:a}=e,{searchResultItems:c}=e,{onUpdateKey:u}=e,{context:f}=e;function h(_){!s&&!f.readOnly&&(_.preventDefault(),f.onSelect(qs(r,!0)))}function d(_){return lc("jse-key",{"jse-empty":_===""})}function m(_,v){const y=u(l,f.normalization.unescapeValue(_)),w=gn(r).concat(y);f.onSelect(v===Ol.NEXT_INSIDE?Yn(w,!1):qs(w,!1)),v!==Ol.SELF&&f.focus()}function p(){f.onSelect(qs(r,!1)),f.focus()}return n.$$set=_=>{"path"in _&&t(9,r=_.path),"pointer"in _&&t(10,o=_.pointer),"key"in _&&t(0,l=_.key),"selection"in _&&t(11,a=_.selection),"searchResultItems"in _&&t(1,c=_.searchResultItems),"onUpdateKey"in _&&t(12,u=_.onUpdateKey),"context"in _&&t(2,f=_.context)},n.$$.update=()=>{n.$$.dirty&3072&&t(3,i=a?a.pointersMap[o]===!0&&ci(a):void 0),n.$$.dirty&2056&&t(4,s=i&&cu(a))},[l,c,f,i,s,h,d,m,p,r,o,a,u]}class Jee extends st{constructor(e){super(),rt(this,e,Yee,Qee,cn,{path:9,pointer:10,key:0,selection:11,searchResultItems:1,onUpdateKey:12,context:2})}}const Zee=Jee;function zA(n,e,t){const i=n.slice();return i[9]=e[t],i}function GA(n){let e,t,i;const s=[n[9].props];var r=n[9].component;function o(l){let a={};for(let c=0;c<s.length;c+=1)a=Xr(a,s[c]);return{props:a}}return r&&(e=wn(r,o())),{c(){e&&ke(e.$$.fragment),t=et()},l(l){e&&Oe(e.$$.fragment,l),t=et()},m(l,a){e&&Te(e,l,a),H(l,t,a),i=!0},p(l,a){const c=a&1?Qr(s,[Zl(l[9].props)]):{};if(r!==(r=l[9].component)){if(e){He();const u=e;G(u.$$.fragment,1,0,()=>{Ie(u,1)}),qe()}r?(e=wn(r,o()),ke(e.$$.fragment),B(e.$$.fragment,1),Te(e,t.parentNode,t)):e=null}else r&&e.$set(c)},i(l){i||(e&&B(e.$$.fragment,l),i=!0)},o(l){e&&G(e.$$.fragment,l),i=!1},d(l){l&&b(t),e&&Ie(e,l)}}}function xee(n){let e,t,i=n[0],s=[];for(let o=0;o<i.length;o+=1)s[o]=GA(zA(n,i,o));const r=o=>G(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();e=et()},l(o){for(let l=0;l<s.length;l+=1)s[l].l(o);e=et()},m(o,l){for(let a=0;a<s.length;a+=1)s[a].m(o,l);H(o,e,l),t=!0},p(o,[l]){if(l&1){i=o[0];let a;for(a=0;a<i.length;a+=1){const c=zA(o,i,a);s[a]?(s[a].p(c,l),B(s[a],1)):(s[a]=GA(c),s[a].c(),B(s[a],1),s[a].m(e.parentNode,e))}for(He(),a=i.length;a<s.length;a+=1)r(a);qe()}},i(o){if(!t){for(let l=0;l<i.length;l+=1)B(s[l]);t=!0}},o(o){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)G(s[l]);t=!1},d(o){Ft(s,o),o&&b(e)}}}function $ee(n,e,t){let i,s,{path:r}=e,{value:o}=e,{context:l}=e,{isSelected:a}=e,{enforceString:c}=e,{selection:u}=e,{searchResultItems:f}=e;return n.$$set=h=>{"path"in h&&t(1,r=h.path),"value"in h&&t(2,o=h.value),"context"in h&&t(3,l=h.context),"isSelected"in h&&t(4,a=h.isSelected),"enforceString"in h&&t(5,c=h.enforceString),"selection"in h&&t(6,u=h.selection),"searchResultItems"in h&&t(7,f=h.searchResultItems)},n.$$.update=()=>{n.$$.dirty&72&&t(8,i=!l.readOnly&&_n(u)&&cu(u)),n.$$.dirty&510&&t(0,s=l.onRenderValue({path:r,value:o,readOnly:l.readOnly,enforceString:c,isSelected:a,isEditing:i,parser:l.parser,normalization:l.normalization,selection:u,searchResultItems:f,onPatch:l.onPatch,onPasteJson:l.onPasteJson,onSelect:l.onSelect,onFind:l.onFind,focus:l.focus}))},[s,r,o,l,a,c,u,f,i]}class ete extends st{constructor(e){super(),rt(this,e,$ee,xee,cn,{path:1,value:2,context:3,isSelected:4,enforceString:5,selection:6,searchResultItems:7})}}const tte=ete,Vi={selecting:!1,selectionAnchor:null,selectionAnchorType:null,selectionFocus:null,dragging:!1};function hg({json:n,documentState:e,deltaY:t,items:i}){const s=e.selection,r=t<0?nte({json:n,selection:s,deltaY:t,items:i}):ite({json:n,selection:s,deltaY:t,items:i});if(!r||r.offset===0)return{operations:void 0,updatedSelection:void 0,offset:0};const o=V$(n,e.selection,r),l=gn(rc(s)),a=wt(n,l);if(Array.isArray(a)){const c=ste({items:i,json:n,selection:s,offset:r.offset});return{operations:o,updatedSelection:c,offset:r.offset}}else return{operations:o,updatedSelection:void 0,offset:r.offset}}function nte({items:n,selection:e,deltaY:t}){const i=rc(e),s=n.findIndex(u=>En(u.path,i)),r=()=>{var u;return(u=n[o-1])==null?void 0:u.height};let o=s,l=0;for(;r()!==void 0&&Math.abs(t)>l+r()/2;)l+=r(),o-=1;const a=n[o].path,c=o-s;return o!==s&&n[o]!==void 0?{beforePath:a,offset:c}:void 0}function ite({json:n,items:e,selection:t,deltaY:i}){var p;const s=lp(t),r=e.findIndex(_=>En(_.path,s));let o=0,l=r;const a=()=>{var _;return(_=e[l+1])==null?void 0:_.height};for(;a()!==void 0&&Math.abs(i)>o+a()/2;)o+=a(),l+=1;const c=gn(s),u=wt(n,c),h=Array.isArray(u)?l:l+1,d=(p=e[h])==null?void 0:p.path,m=l-r;return d?{beforePath:d,offset:m}:{append:!0,offset:m}}function ste({items:n,json:e,selection:t,offset:i}){var u,f;const s=rc(t),r=lp(t),o=n.findIndex(h=>En(h.path,s)),l=n.findIndex(h=>En(h.path,r)),a=(u=n[o+i])==null?void 0:u.path,c=(f=n[l+i])==null?void 0:f.path;return ui(e,a,c)}function rte(n,e){if(!n)return;const t={};for(const i of Object.keys(n))e(i,n[i])&&(t[i]=n[i]);return Object.keys(t).length>0?t:void 0}function Or(n,e){return rte(n,t=>Ka(t,e))}function ote(n){let e,t;return{c(){e=k("div"),t=q(n[0]),this.h()},l(i){e=T(i,"DIV",{class:!0});var s=I(e);t=z(s,n[0]),s.forEach(b),this.h()},h(){S(e,"class","jse-tooltip svelte-r4omvg")},m(i,s){H(i,e,s),g(e,t)},p(i,[s]){s&1&&Le(t,i[0])},i:Xe,o:Xe,d(i){i&&b(e)}}}function lte(n,e,t){let{text:i}=e;return n.$$set=s=>{"text"in s&&t(0,i=s.text)},[i]}class ate extends st{constructor(e){super(),rt(this,e,lte,ote,kt,{text:0})}}const cte=ate;function jb(n,{text:e,openAbsolutePopup:t,closeAbsolutePopup:i}){let s;function r(){s=t(cte,{text:e},{position:"top",width:10*e.length,offsetTop:3,anchor:n,closeOnOuterClick:!0})}function o(){i(s)}return n.addEventListener("mouseenter",r),n.addEventListener("mouseleave",o),{destroy(){n.removeEventListener("mouseenter",r),n.removeEventListener("mouseleave",o)}}}function ute(n){let e,t,i,s,r,o;return t=new Vt({props:{data:sa}}),{c(){e=k("button"),ke(t.$$.fragment),this.h()},l(l){e=T(l,"BUTTON",{type:!0,class:!0});var a=I(e);Oe(t.$$.fragment,a),a.forEach(b),this.h()},h(){S(e,"type","button"),S(e,"class","jse-validation-error svelte-1q62mys")},m(l,a){H(l,e,a),Te(t,e,null),s=!0,r||(o=[_e(e,"click",function(){Mn(n[0])&&n[0].apply(this,arguments)}),ac(i=jb.call(null,e,{text:n[1],...n[2]}))],r=!0)},p(l,[a]){n=l,i&&Mn(i.update)&&a&2&&i.update.call(null,{text:n[1],...n[2]})},i(l){s||(B(t.$$.fragment,l),s=!0)},o(l){G(t.$$.fragment,l),s=!1},d(l){l&&b(e),Ie(t),r=!1,an(o)}}}function fte(n,e,t){let i;const s=Bn("absolute-popup");let{validationError:r}=e,{onExpand:o}=e;return n.$$set=l=>{"validationError"in l&&t(3,r=l.validationError),"onExpand"in l&&t(0,o=l.onExpand)},n.$$.update=()=>{n.$$.dirty&8&&t(1,i=r.isChildError?"Contains invalid data":r.message)},[o,i,s,r]}class hte extends st{constructor(e){super(),rt(this,e,fte,ute,kt,{validationError:3,onExpand:0})}}const Hb=hte;const dte=n=>({}),KA=n=>({});function XA(n,e,t){const i=n.slice();return i[53]=e[t],i}const mte=n=>({}),QA=n=>({});function YA(n,e,t){const i=n.slice();return i[47]=e[t],i[49]=t,i}function JA(n,e,t){const i=n.slice();return i[50]=e[t],i}const pte=n=>({}),ZA=n=>({});function gte(n){let e,t,i,s,r,o,l=!n[8].readOnly&&n[16]&&n[7]&&(_n(n[7])||yn(n[7]))&&!n[7].edit&&En(n[7].focusPath,n[1]),a,c,u;const f=n[34].identifier,h=ls(f,n,n[35],KA);let d=!n[17]&&xA();r=new tte({props:{path:n[1],value:n[0],enforceString:n[13],isSelected:n[16],selection:n[16]?n[7]:void 0,searchResultItems:NA(n[6],n[9]),context:n[8]}});let m=l&&$A(n),p=n[15]&&eC(n),_=!n[17]&&tC(n);return{c(){e=k("div"),t=k("div"),h&&h.c(),i=U(),d&&d.c(),s=U(),ke(r.$$.fragment),o=U(),m&&m.c(),a=U(),p&&p.c(),c=U(),_&&_.c(),this.h()},l(v){e=T(v,"DIV",{class:!0,style:!0});var y=I(e);t=T(y,"DIV",{class:!0});var w=I(t);h&&h.l(w),i=W(w),d&&d.l(w),s=W(w),Oe(r.$$.fragment,w),o=W(w),m&&m.l(w),w.forEach(b),a=W(y),p&&p.l(y),c=W(y),_&&_.l(y),y.forEach(b),this.h()},h(){S(t,"class","jse-contents svelte-1dkd71f"),S(e,"class","jse-contents-outer svelte-1dkd71f"),S(e,"style",n[18])},m(v,y){H(v,e,y),g(e,t),h&&h.m(t,null),g(t,i),d&&d.m(t,null),g(t,s),Te(r,t,null),g(t,o),m&&m.m(t,null),g(e,a),p&&p.m(e,null),g(e,c),_&&_.m(e,null),u=!0},p(v,y){h&&h.p&&(!u||y[1]&16)&&as(h,f,v,v[35],u?us(f,v[35],y,dte):cs(v[35]),KA),v[17]?d&&(d.d(1),d=null):d||(d=xA(),d.c(),d.m(t,s));const w={};y[0]&2&&(w.path=v[1]),y[0]&1&&(w.value=v[0]),y[0]&8192&&(w.enforceString=v[13]),y[0]&65536&&(w.isSelected=v[16]),y[0]&65664&&(w.selection=v[16]?v[7]:void 0),y[0]&576&&(w.searchResultItems=NA(v[6],v[9])),y[0]&256&&(w.context=v[8]),r.$set(w),y[0]&65922&&(l=!v[8].readOnly&&v[16]&&v[7]&&(_n(v[7])||yn(v[7]))&&!v[7].edit&&En(v[7].focusPath,v[1])),l?m?(m.p(v,y),y[0]&65922&&B(m,1)):(m=$A(v),m.c(),B(m,1),m.m(t,null)):m&&(He(),G(m,1,1,()=>{m=null}),qe()),v[15]?p?(p.p(v,y),y[0]&32768&&B(p,1)):(p=eC(v),p.c(),B(p,1),p.m(e,c)):p&&(He(),G(p,1,1,()=>{p=null}),qe()),v[17]?_&&(_.d(1),_=null):_?_.p(v,y):(_=tC(v),_.c(),_.m(e,null)),(!u||y[0]&262144)&&S(e,"style",v[18])},i(v){u||(B(h,v),B(r.$$.fragment,v),B(m),B(p),u=!0)},o(v){G(h,v),G(r.$$.fragment,v),G(m),G(p),u=!1},d(v){v&&b(e),h&&h.d(v),d&&d.d(),Ie(r),m&&m.d(),p&&p.d(),_&&_.d()}}}function vte(n){let e,t,i,s,r,o,l,a,c,u,f,h=!n[8].readOnly&&n[16]&&n[7]&&(_n(n[7])||yn(n[7]))&&!n[7].edit&&En(n[7].focusPath,n[1]),d,m,p,_,v,y,w;const A=[yte,_te],E=[];function C(j,x){return j[12]?0:1}s=C(n),r=E[s]=A[s](n);const R=n[34].identifier,D=ls(R,n,n[35],QA);let N=!n[17]&&nC();function L(j,x){return j[12]?Ete:Ste}let F=L(n),P=F(n),Q=h&&iC(n),O=n[15]&&(!n[12]||!n[15].isChildError)&&sC(n);function K(j,x){if(j[12])return Ate;if(!j[17])return wte}let X=K(n),J=X&&X(n),te=n[12]&&rC(n);return{c(){e=k("div"),t=k("div"),i=k("button"),r.c(),o=U(),D&&D.c(),l=U(),N&&N.c(),a=U(),c=k("div"),u=k("div"),P.c(),f=U(),Q&&Q.c(),d=U(),O&&O.c(),m=U(),J&&J.c(),p=U(),te&&te.c(),_=et(),this.h()},l(j){e=T(j,"DIV",{class:!0,style:!0});var x=I(e);t=T(x,"DIV",{class:!0});var Z=I(t);i=T(Z,"BUTTON",{type:!0,class:!0,title:!0});var V=I(i);r.l(V),V.forEach(b),o=W(Z),D&&D.l(Z),l=W(Z),N&&N.l(Z),a=W(Z),c=T(Z,"DIV",{class:!0,"data-type":!0});var ce=I(c);u=T(ce,"DIV",{class:!0});var pe=I(u);P.l(pe),pe.forEach(b),ce.forEach(b),f=W(Z),Q&&Q.l(Z),Z.forEach(b),d=W(x),O&&O.l(x),m=W(x),J&&J.l(x),x.forEach(b),p=W(j),te&&te.l(j),_=et(),this.h()},h(){S(i,"type","button"),S(i,"class","jse-expand svelte-1dkd71f"),S(i,"title","Expand or collapse this object (Ctrl+Click to expand/collapse recursively)"),S(u,"class","jse-meta-inner svelte-1dkd71f"),S(c,"class","jse-meta svelte-1dkd71f"),S(c,"data-type","selectable-value"),S(t,"class","jse-header svelte-1dkd71f"),S(e,"class","jse-header-outer svelte-1dkd71f"),S(e,"style",n[18])},m(j,x){H(j,e,x),g(e,t),g(t,i),E[s].m(i,null),g(t,o),D&&D.m(t,null),g(t,l),N&&N.m(t,null),g(t,a),g(t,c),g(c,u),P.m(u,null),g(t,f),Q&&Q.m(t,null),g(e,d),O&&O.m(e,null),g(e,m),J&&J.m(e,null),H(j,p,x),te&&te.m(j,x),H(j,_,x),v=!0,y||(w=_e(i,"click",n[21]),y=!0)},p(j,x){let Z=s;s=C(j),s===Z?E[s].p(j,x):(He(),G(E[Z],1,1,()=>{E[Z]=null}),qe(),r=E[s],r?r.p(j,x):(r=E[s]=A[s](j),r.c()),B(r,1),r.m(i,null)),D&&D.p&&(!v||x[1]&16)&&as(D,R,j,j[35],v?us(R,j[35],x,mte):cs(j[35]),QA),j[17]?N&&(N.d(1),N=null):N||(N=nC(),N.c(),N.m(t,a)),F===(F=L(j))&&P?P.p(j,x):(P.d(1),P=F(j),P&&(P.c(),P.m(u,null))),x[0]&65922&&(h=!j[8].readOnly&&j[16]&&j[7]&&(_n(j[7])||yn(j[7]))&&!j[7].edit&&En(j[7].focusPath,j[1])),h?Q?(Q.p(j,x),x[0]&65922&&B(Q,1)):(Q=iC(j),Q.c(),B(Q,1),Q.m(t,null)):Q&&(He(),G(Q,1,1,()=>{Q=null}),qe()),j[15]&&(!j[12]||!j[15].isChildError)?O?(O.p(j,x),x[0]&36864&&B(O,1)):(O=sC(j),O.c(),B(O,1),O.m(e,m)):O&&(He(),G(O,1,1,()=>{O=null}),qe()),X===(X=K(j))&&J?J.p(j,x):(J&&J.d(1),J=X&&X(j),J&&(J.c(),J.m(e,null))),(!v||x[0]&262144)&&S(e,"style",j[18]),j[12]?te?(te.p(j,x),x[0]&4096&&B(te,1)):(te=rC(j),te.c(),B(te,1),te.m(_.parentNode,_)):te&&(He(),G(te,1,1,()=>{te=null}),qe())},i(j){v||(B(r),B(D,j),B(Q),B(O),B(te),v=!0)},o(j){G(r),G(D,j),G(Q),G(O),G(te),v=!1},d(j){j&&b(e),E[s].d(),D&&D.d(j),N&&N.d(),P.d(),Q&&Q.d(),O&&O.d(),J&&J.d(),j&&b(p),te&&te.d(j),j&&b(_),y=!1,w()}}}function bte(n){let e,t,i,s,r,o,l,a,c,u,f,h=!n[8].readOnly&&n[16]&&n[7]&&(_n(n[7])||yn(n[7]))&&!n[7].edit&&En(n[7].focusPath,n[1]),d,m,p,_,v,y,w;const A=[Tte,kte],E=[];function C(j,x){return j[12]?0:1}s=C(n),r=E[s]=A[s](n);const R=n[34].identifier,D=ls(R,n,n[35],ZA);let N=!n[17]&&cC();function L(j,x){return j[12]?Ote:Ite}let F=L(n),P=F(n),Q=h&&uC(n),O=n[15]&&(!n[12]||!n[15].isChildError)&&fC(n);function K(j,x){return j[12]?Dte:Rte}let X=K(n),J=X(n),te=n[12]&&hC(n);return{c(){e=k("div"),t=k("div"),i=k("button"),r.c(),o=U(),D&&D.c(),l=U(),N&&N.c(),a=U(),c=k("div"),u=k("div"),P.c(),f=U(),Q&&Q.c(),d=U(),O&&O.c(),m=U(),J.c(),p=U(),te&&te.c(),_=et(),this.h()},l(j){e=T(j,"DIV",{class:!0,style:!0});var x=I(e);t=T(x,"DIV",{class:!0});var Z=I(t);i=T(Z,"BUTTON",{type:!0,class:!0,title:!0});var V=I(i);r.l(V),V.forEach(b),o=W(Z),D&&D.l(Z),l=W(Z),N&&N.l(Z),a=W(Z),c=T(Z,"DIV",{class:!0});var ce=I(c);u=T(ce,"DIV",{class:!0,"data-type":!0});var pe=I(u);P.l(pe),pe.forEach(b),ce.forEach(b),f=W(Z),Q&&Q.l(Z),Z.forEach(b),d=W(x),O&&O.l(x),m=W(x),J.l(x),x.forEach(b),p=W(j),te&&te.l(j),_=et(),this.h()},h(){S(i,"type","button"),S(i,"class","jse-expand svelte-1dkd71f"),S(i,"title","Expand or collapse this array (Ctrl+Click to expand/collapse recursively)"),S(u,"class","jse-meta-inner svelte-1dkd71f"),S(u,"data-type","selectable-value"),S(c,"class","jse-meta svelte-1dkd71f"),S(t,"class","jse-header svelte-1dkd71f"),S(e,"class","jse-header-outer svelte-1dkd71f"),S(e,"style",n[18])},m(j,x){H(j,e,x),g(e,t),g(t,i),E[s].m(i,null),g(t,o),D&&D.m(t,null),g(t,l),N&&N.m(t,null),g(t,a),g(t,c),g(c,u),P.m(u,null),g(t,f),Q&&Q.m(t,null),g(e,d),O&&O.m(e,null),g(e,m),J.m(e,null),H(j,p,x),te&&te.m(j,x),H(j,_,x),v=!0,y||(w=_e(i,"click",n[21]),y=!0)},p(j,x){let Z=s;s=C(j),s===Z?E[s].p(j,x):(He(),G(E[Z],1,1,()=>{E[Z]=null}),qe(),r=E[s],r?r.p(j,x):(r=E[s]=A[s](j),r.c()),B(r,1),r.m(i,null)),D&&D.p&&(!v||x[1]&16)&&as(D,R,j,j[35],v?us(R,j[35],x,pte):cs(j[35]),ZA),j[17]?N&&(N.d(1),N=null):N||(N=cC(),N.c(),N.m(t,a)),F===(F=L(j))&&P?P.p(j,x):(P.d(1),P=F(j),P&&(P.c(),P.m(u,null))),x[0]&65922&&(h=!j[8].readOnly&&j[16]&&j[7]&&(_n(j[7])||yn(j[7]))&&!j[7].edit&&En(j[7].focusPath,j[1])),h?Q?(Q.p(j,x),x[0]&65922&&B(Q,1)):(Q=uC(j),Q.c(),B(Q,1),Q.m(t,null)):Q&&(He(),G(Q,1,1,()=>{Q=null}),qe()),j[15]&&(!j[12]||!j[15].isChildError)?O?(O.p(j,x),x[0]&36864&&B(O,1)):(O=fC(j),O.c(),B(O,1),O.m(e,m)):O&&(He(),G(O,1,1,()=>{O=null}),qe()),X===(X=K(j))&&J?J.p(j,x):(J.d(1),J=X(j),J&&(J.c(),J.m(e,null))),(!v||x[0]&262144)&&S(e,"style",j[18]),j[12]?te?(te.p(j,x),x[0]&4096&&B(te,1)):(te=hC(j),te.c(),B(te,1),te.m(_.parentNode,_)):te&&(He(),G(te,1,1,()=>{te=null}),qe())},i(j){v||(B(r),B(D,j),B(Q),B(O),B(te),v=!0)},o(j){G(r),G(D,j),G(Q),G(O),G(te),v=!1},d(j){j&&b(e),E[s].d(),D&&D.d(j),N&&N.d(),P.d(),Q&&Q.d(),O&&O.d(),J.d(),j&&b(p),te&&te.d(j),j&&b(_),y=!1,w()}}}function xA(n){let e,t;return{c(){e=k("div"),t=q(":"),this.h()},l(i){e=T(i,"DIV",{class:!0});var s=I(e);t=z(s,":"),s.forEach(b),this.h()},h(){S(e,"class","jse-separator svelte-1dkd71f")},m(i,s){H(i,e,s),g(e,t)},d(i){i&&b(e)}}}function $A(n){let e,t,i;return t=new la({props:{selected:!0,onContextMenu:n[8].onContextMenu}}),{c(){e=k("div"),ke(t.$$.fragment),this.h()},l(s){e=T(s,"DIV",{class:!0});var r=I(e);Oe(t.$$.fragment,r),r.forEach(b),this.h()},h(){S(e,"class","jse-context-menu-button-anchor svelte-1dkd71f")},m(s,r){H(s,e,r),Te(t,e,null),i=!0},p(s,r){const o={};r[0]&256&&(o.onContextMenu=s[8].onContextMenu),t.$set(o)},i(s){i||(B(t.$$.fragment,s),i=!0)},o(s){G(t.$$.fragment,s),i=!1},d(s){s&&b(e),Ie(t)}}}function eC(n){let e,t;return e=new Hb({props:{validationError:n[15],onExpand:n[22]}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,s){const r={};s[0]&32768&&(r.validationError=i[15]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function tC(n){let e,t,i;return{c(){e=k("div"),this.h()},l(s){e=T(s,"DIV",{class:!0,"data-type":!0}),I(e).forEach(b),this.h()},h(){S(e,"class","jse-insert-selection-area jse-after svelte-1dkd71f"),S(e,"data-type","insert-selection-area-after")},m(s,r){H(s,e,r),t||(i=_e(e,"click",n[30]),t=!0)},p:Xe,d(s){s&&b(e),t=!1,i()}}}function _te(n){let e,t;return e=new Vt({props:{data:No}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p:Xe,i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function yte(n){let e,t;return e=new Vt({props:{data:Mr}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p:Xe,i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function nC(n){let e,t;return{c(){e=k("div"),t=q(":"),this.h()},l(i){e=T(i,"DIV",{class:!0});var s=I(e);t=z(s,":"),s.forEach(b),this.h()},h(){S(e,"class","jse-separator svelte-1dkd71f")},m(i,s){H(i,e,s),g(e,t)},d(i){i&&b(e)}}}function Ste(n){let e,t,i,s,r=Object.keys(n[0]).length+"",o,l,a=Object.keys(n[0]).length===1?"prop":"props",c,u,f,h,d,m;return{c(){e=k("div"),t=q("{"),i=U(),s=k("button"),o=q(r),l=U(),c=q(a),u=U(),f=k("div"),h=q("}"),this.h()},l(p){e=T(p,"DIV",{class:!0});var _=I(e);t=z(_,"{"),_.forEach(b),i=W(p),s=T(p,"BUTTON",{type:!0,class:!0});var v=I(s);o=z(v,r),l=W(v),c=z(v,a),v.forEach(b),u=W(p),f=T(p,"DIV",{class:!0});var y=I(f);h=z(y,"}"),y.forEach(b),this.h()},h(){S(e,"class","jse-bracket svelte-1dkd71f"),S(s,"type","button"),S(s,"class","jse-tag svelte-1dkd71f"),S(f,"class","jse-bracket svelte-1dkd71f")},m(p,_){H(p,e,_),g(e,t),H(p,i,_),H(p,s,_),g(s,o),g(s,l),g(s,c),H(p,u,_),H(p,f,_),g(f,h),d||(m=_e(s,"click",n[22]),d=!0)},p(p,_){_[0]&1&&r!==(r=Object.keys(p[0]).length+"")&&Le(o,r),_[0]&1&&a!==(a=Object.keys(p[0]).length===1?"prop":"props")&&Le(c,a)},d(p){p&&b(e),p&&b(i),p&&b(s),p&&b(u),p&&b(f),d=!1,m()}}}function Ete(n){let e,t;return{c(){e=k("div"),t=q("{"),this.h()},l(i){e=T(i,"DIV",{class:!0});var s=I(e);t=z(s,"{"),s.forEach(b),this.h()},h(){S(e,"class","jse-bracket jse-expanded svelte-1dkd71f")},m(i,s){H(i,e,s),g(e,t)},p:Xe,d(i){i&&b(e)}}}function iC(n){let e,t,i;return t=new la({props:{selected:!0,onContextMenu:n[8].onContextMenu}}),{c(){e=k("div"),ke(t.$$.fragment),this.h()},l(s){e=T(s,"DIV",{class:!0});var r=I(e);Oe(t.$$.fragment,r),r.forEach(b),this.h()},h(){S(e,"class","jse-context-menu-button-anchor svelte-1dkd71f")},m(s,r){H(s,e,r),Te(t,e,null),i=!0},p(s,r){const o={};r[0]&256&&(o.onContextMenu=s[8].onContextMenu),t.$set(o)},i(s){i||(B(t.$$.fragment,s),i=!0)},o(s){G(t.$$.fragment,s),i=!1},d(s){s&&b(e),Ie(t)}}}function sC(n){let e,t;return e=new Hb({props:{validationError:n[15],onExpand:n[22]}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,s){const r={};s[0]&32768&&(r.validationError=i[15]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function wte(n){let e,t,i;return{c(){e=k("div"),this.h()},l(s){e=T(s,"DIV",{class:!0,"data-type":!0}),I(e).forEach(b),this.h()},h(){S(e,"class","jse-insert-selection-area jse-after svelte-1dkd71f"),S(e,"data-type","insert-selection-area-after")},m(s,r){H(s,e,r),t||(i=_e(e,"click",n[30]),t=!0)},p:Xe,d(s){s&&b(e),t=!1,i()}}}function Ate(n){let e,t,i;return{c(){e=k("div"),this.h()},l(s){e=T(s,"DIV",{class:!0,"data-type":!0}),I(e).forEach(b),this.h()},h(){S(e,"class","jse-insert-selection-area jse-inside svelte-1dkd71f"),S(e,"data-type","insert-selection-area-inside")},m(s,r){H(s,e,r),t||(i=_e(e,"click",n[29]),t=!0)},p:Xe,d(s){s&&b(e),t=!1,i()}}}function rC(n){let e,t=!n[8].readOnly&&(n[10]===vo||n[16]&&Ci(n[7])),i,s,r,o,l,a,c,u,f=t&&oC(n),h=n[19](n[1],n[0],n[2],n[3],n[4],n[5],n[6],n[7],n[11]),d=[];for(let _=0;_<h.length;_+=1)d[_]=lC(XA(n,h,_));const m=_=>G(d[_],1,1,()=>{d[_]=null});let p=!n[17]&&aC(n);return{c(){e=k("div"),f&&f.c(),i=U();for(let _=0;_<d.length;_+=1)d[_].c();s=U(),r=k("div"),o=k("div"),l=k("div"),a=q("}"),c=U(),p&&p.c(),this.h()},l(_){e=T(_,"DIV",{class:!0});var v=I(e);f&&f.l(v),i=W(v);for(let E=0;E<d.length;E+=1)d[E].l(v);v.forEach(b),s=W(_),r=T(_,"DIV",{class:!0,style:!0});var y=I(r);o=T(y,"DIV",{"data-type":!0,class:!0});var w=I(o);l=T(w,"DIV",{class:!0});var A=I(l);a=z(A,"}"),A.forEach(b),w.forEach(b),c=W(y),p&&p.l(y),y.forEach(b),this.h()},h(){S(e,"class","jse-props svelte-1dkd71f"),S(l,"class","jse-bracket svelte-1dkd71f"),S(o,"data-type","selectable-value"),S(o,"class","jse-footer svelte-1dkd71f"),S(r,"class","jse-footer-outer svelte-1dkd71f"),S(r,"style",n[18])},m(_,v){H(_,e,v),f&&f.m(e,null),g(e,i);for(let y=0;y<d.length;y+=1)d[y].m(e,null);H(_,s,v),H(_,r,v),g(r,o),g(o,l),g(l,a),g(r,c),p&&p.m(r,null),u=!0},p(_,v){if(v[0]&66944&&(t=!_[8].readOnly&&(_[10]===vo||_[16]&&Ci(_[7]))),t?f?(f.p(_,v),v[0]&66944&&B(f,1)):(f=oC(_),f.c(),B(f,1),f.m(e,i)):f&&(He(),G(f,1,1,()=>{f=null}),qe()),v[0]&76024319){h=_[19](_[1],_[0],_[2],_[3],_[4],_[5],_[6],_[7],_[11]);let y;for(y=0;y<h.length;y+=1){const w=XA(_,h,y);d[y]?(d[y].p(w,v),B(d[y],1)):(d[y]=lC(w),d[y].c(),B(d[y],1),d[y].m(e,null))}for(He(),y=h.length;y<d.length;y+=1)m(y);qe()}_[17]?p&&(p.d(1),p=null):p?p.p(_,v):(p=aC(_),p.c(),p.m(r,null)),(!u||v[0]&262144)&&S(r,"style",_[18])},i(_){if(!u){B(f);for(let v=0;v<h.length;v+=1)B(d[v]);u=!0}},o(_){G(f),d=d.filter(Boolean);for(let v=0;v<d.length;v+=1)G(d[v]);u=!1},d(_){_&&b(e),f&&f.d(),Ft(d,_),_&&b(s),_&&b(r),p&&p.d()}}}function oC(n){let e,t,i,s;return t=new la({props:{selected:n[16]&&Ci(n[7]),onContextMenu:n[31]}}),{c(){e=k("div"),ke(t.$$.fragment),this.h()},l(r){e=T(r,"DIV",{class:!0,"data-type":!0,style:!0,title:!0});var o=I(e);Oe(t.$$.fragment,o),o.forEach(b),this.h()},h(){S(e,"class","jse-insert-area jse-inside svelte-1dkd71f"),S(e,"data-type","insert-selection-area-inside"),S(e,"style",i=Qu(n[1].length+1)),S(e,"title",Tv),xe(e,"jse-hovered",n[10]===vo),xe(e,"jse-selected",n[16]&&Ci(n[7]))},m(r,o){H(r,e,o),Te(t,e,null),s=!0},p(r,o){const l={};o[0]&65664&&(l.selected=r[16]&&Ci(r[7])),t.$set(l),(!s||o[0]&2&&i!==(i=Qu(r[1].length+1)))&&S(e,"style",i),(!s||o[0]&1024)&&xe(e,"jse-hovered",r[10]===vo),(!s||o[0]&65664)&&xe(e,"jse-selected",r[16]&&Ci(r[7]))},i(r){s||(B(t.$$.fragment,r),s=!0)},o(r){G(t.$$.fragment,r),s=!1},d(r){r&&b(e),Ie(t)}}}function Cte(n){let e,t,i,s;return t=new Zee({props:{path:n[53].path,pointer:n[53].pointer,key:n[53].key,selection:n[53].selection,searchResultItems:n[53].keySearchResultItemsMap,context:n[8],onUpdateKey:n[23]}}),{c(){e=k("div"),ke(t.$$.fragment),i=U(),this.h()},l(r){e=T(r,"DIV",{slot:!0,class:!0});var o=I(e);Oe(t.$$.fragment,o),i=W(o),o.forEach(b),this.h()},h(){S(e,"slot","identifier"),S(e,"class","jse-identifier svelte-1dkd71f")},m(r,o){H(r,e,o),Te(t,e,null),g(e,i),s=!0},p(r,o){const l={};o[0]&2303&&(l.path=r[53].path),o[0]&2303&&(l.pointer=r[53].pointer),o[0]&2303&&(l.key=r[53].key),o[0]&2303&&(l.selection=r[53].selection),o[0]&2303&&(l.searchResultItems=r[53].keySearchResultItemsMap),o[0]&256&&(l.context=r[8]),t.$set(l)},i(r){s||(B(t.$$.fragment,r),s=!0)},o(r){G(t.$$.fragment,r),s=!1},d(r){r&&b(e),Ie(t)}}}function lC(n){let e,t;return e=new qb({props:{value:n[53].value,path:n[53].path,expandedMap:n[53].expandedMap,enforceStringMap:n[53].enforceStringMap,visibleSectionsMap:n[53].visibleSectionsMap,validationErrorsMap:n[53].validationErrorsMap,searchResultItemsMap:n[53].valueSearchResultItemsMap,selection:n[53].selection,context:n[8],onDragSelectionStart:n[26],$$slots:{identifier:[Cte]},$$scope:{ctx:n}}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,s){const r={};s[0]&2303&&(r.value=i[53].value),s[0]&2303&&(r.path=i[53].path),s[0]&2303&&(r.expandedMap=i[53].expandedMap),s[0]&2303&&(r.enforceStringMap=i[53].enforceStringMap),s[0]&2303&&(r.visibleSectionsMap=i[53].visibleSectionsMap),s[0]&2303&&(r.validationErrorsMap=i[53].validationErrorsMap),s[0]&2303&&(r.searchResultItemsMap=i[53].valueSearchResultItemsMap),s[0]&2303&&(r.selection=i[53].selection),s[0]&256&&(r.context=i[8]),s[0]&2559|s[1]&16&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function aC(n){let e,t,i;return{c(){e=k("div"),this.h()},l(s){e=T(s,"DIV",{class:!0,"data-type":!0}),I(e).forEach(b),this.h()},h(){S(e,"class","jse-insert-selection-area jse-after svelte-1dkd71f"),S(e,"data-type","insert-selection-area-after")},m(s,r){H(s,e,r),t||(i=_e(e,"click",n[30]),t=!0)},p:Xe,d(s){s&&b(e),t=!1,i()}}}function kte(n){let e,t;return e=new Vt({props:{data:No}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p:Xe,i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function Tte(n){let e,t;return e=new Vt({props:{data:Mr}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p:Xe,i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function cC(n){let e,t;return{c(){e=k("div"),t=q(":"),this.h()},l(i){e=T(i,"DIV",{class:!0});var s=I(e);t=z(s,":"),s.forEach(b),this.h()},h(){S(e,"class","jse-separator svelte-1dkd71f")},m(i,s){H(i,e,s),g(e,t)},d(i){i&&b(e)}}}function Ite(n){let e,t,i,s,r=n[0].length+"",o,l,a=n[0].length===1?"item":"items",c,u,f,h,d,m;return{c(){e=k("div"),t=q("["),i=U(),s=k("button"),o=q(r),l=U(),c=q(a),u=U(),f=k("div"),h=q("]"),this.h()},l(p){e=T(p,"DIV",{class:!0});var _=I(e);t=z(_,"["),_.forEach(b),i=W(p),s=T(p,"BUTTON",{type:!0,class:!0});var v=I(s);o=z(v,r),l=W(v),c=z(v,a),v.forEach(b),u=W(p),f=T(p,"DIV",{class:!0});var y=I(f);h=z(y,"]"),y.forEach(b),this.h()},h(){S(e,"class","jse-bracket svelte-1dkd71f"),S(s,"type","button"),S(s,"class","jse-tag svelte-1dkd71f"),S(f,"class","jse-bracket svelte-1dkd71f")},m(p,_){H(p,e,_),g(e,t),H(p,i,_),H(p,s,_),g(s,o),g(s,l),g(s,c),H(p,u,_),H(p,f,_),g(f,h),d||(m=_e(s,"click",n[22]),d=!0)},p(p,_){_[0]&1&&r!==(r=p[0].length+"")&&Le(o,r),_[0]&1&&a!==(a=p[0].length===1?"item":"items")&&Le(c,a)},d(p){p&&b(e),p&&b(i),p&&b(s),p&&b(u),p&&b(f),d=!1,m()}}}function Ote(n){let e,t,i,s,r=n[0].length+"",o,l,a=n[0].length===1?"item":"items",c;return{c(){e=k("div"),t=q("["),i=U(),s=k("span"),o=q(r),l=U(),c=q(a),this.h()},l(u){e=T(u,"DIV",{class:!0});var f=I(e);t=z(f,"["),f.forEach(b),i=W(u),s=T(u,"SPAN",{class:!0});var h=I(s);o=z(h,r),l=W(h),c=z(h,a),h.forEach(b),this.h()},h(){S(e,"class","jse-bracket svelte-1dkd71f"),S(s,"class","jse-tag jse-expanded svelte-1dkd71f")},m(u,f){H(u,e,f),g(e,t),H(u,i,f),H(u,s,f),g(s,o),g(s,l),g(s,c)},p(u,f){f[0]&1&&r!==(r=u[0].length+"")&&Le(o,r),f[0]&1&&a!==(a=u[0].length===1?"item":"items")&&Le(c,a)},d(u){u&&b(e),u&&b(i),u&&b(s)}}}function uC(n){let e,t,i;return t=new la({props:{selected:!0,onContextMenu:n[8].onContextMenu}}),{c(){e=k("div"),ke(t.$$.fragment),this.h()},l(s){e=T(s,"DIV",{class:!0});var r=I(e);Oe(t.$$.fragment,r),r.forEach(b),this.h()},h(){S(e,"class","jse-context-menu-button-anchor svelte-1dkd71f")},m(s,r){H(s,e,r),Te(t,e,null),i=!0},p(s,r){const o={};r[0]&256&&(o.onContextMenu=s[8].onContextMenu),t.$set(o)},i(s){i||(B(t.$$.fragment,s),i=!0)},o(s){G(t.$$.fragment,s),i=!1},d(s){s&&b(e),Ie(t)}}}function fC(n){let e,t;return e=new Hb({props:{validationError:n[15],onExpand:n[22]}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,s){const r={};s[0]&32768&&(r.validationError=i[15]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function Rte(n){let e,t,i;return{c(){e=k("div"),this.h()},l(s){e=T(s,"DIV",{class:!0,"data-type":!0}),I(e).forEach(b),this.h()},h(){S(e,"class","jse-insert-selection-area jse-after svelte-1dkd71f"),S(e,"data-type","insert-selection-area-after")},m(s,r){H(s,e,r),t||(i=_e(e,"click",n[30]),t=!0)},p:Xe,d(s){s&&b(e),t=!1,i()}}}function Dte(n){let e,t,i;return{c(){e=k("div"),this.h()},l(s){e=T(s,"DIV",{class:!0,"data-type":!0}),I(e).forEach(b),this.h()},h(){S(e,"class","jse-insert-selection-area jse-inside svelte-1dkd71f"),S(e,"data-type","insert-selection-area-inside")},m(s,r){H(s,e,r),t||(i=_e(e,"click",n[29]),t=!0)},p:Xe,d(s){s&&b(e),t=!1,i()}}}function hC(n){let e,t=!n[8].readOnly&&(n[10]===vo||n[16]&&Ci(n[7])),i,s=[],r=new Map,o,l,a,c,u,f,h,d=t&&dC(n),m=n[14]||jl;const p=v=>v[49];for(let v=0;v<m.length;v+=1){let y=YA(n,m,v),w=p(y);r.set(w,s[v]=gC(w,y))}let _=!n[17]&&vC(n);return{c(){e=k("div"),d&&d.c(),i=U();for(let v=0;v<s.length;v+=1)s[v].c();o=U(),l=k("div"),a=k("div"),c=k("span"),u=q("]"),f=U(),_&&_.c(),this.h()},l(v){e=T(v,"DIV",{class:!0});var y=I(e);d&&d.l(y),i=W(y);for(let C=0;C<s.length;C+=1)s[C].l(y);y.forEach(b),o=W(v),l=T(v,"DIV",{class:!0,style:!0});var w=I(l);a=T(w,"DIV",{"data-type":!0,class:!0});var A=I(a);c=T(A,"SPAN",{class:!0});var E=I(c);u=z(E,"]"),E.forEach(b),A.forEach(b),f=W(w),_&&_.l(w),w.forEach(b),this.h()},h(){S(e,"class","jse-items svelte-1dkd71f"),S(c,"class","jse-bracket svelte-1dkd71f"),S(a,"data-type","selectable-value"),S(a,"class","jse-footer svelte-1dkd71f"),S(l,"class","jse-footer-outer svelte-1dkd71f"),S(l,"style",n[18])},m(v,y){H(v,e,y),d&&d.m(e,null),g(e,i);for(let w=0;w<s.length;w+=1)s[w].m(e,null);H(v,o,y),H(v,l,y),g(l,a),g(a,c),g(c,u),g(l,f),_&&_.m(l,null),h=!0},p(v,y){y[0]&66944&&(t=!v[8].readOnly&&(v[10]===vo||v[16]&&Ci(v[7]))),t?d?(d.p(v,y),y[0]&66944&&B(d,1)):(d=dC(v),d.c(),B(d,1),d.m(e,i)):d&&(He(),G(d,1,1,()=>{d=null}),qe()),y[0]&68176895&&(m=v[14]||jl,He(),s=Zu(s,y,p,1,v,m,r,e,$d,gC,null,YA),qe()),v[17]?_&&(_.d(1),_=null):_?_.p(v,y):(_=vC(v),_.c(),_.m(l,null)),(!h||y[0]&262144)&&S(l,"style",v[18])},i(v){if(!h){B(d);for(let y=0;y<m.length;y+=1)B(s[y]);h=!0}},o(v){G(d);for(let y=0;y<s.length;y+=1)G(s[y]);h=!1},d(v){v&&b(e),d&&d.d();for(let y=0;y<s.length;y+=1)s[y].d();v&&b(o),v&&b(l),_&&_.d()}}}function dC(n){let e,t,i,s;return t=new la({props:{selected:n[16]&&Ci(n[7]),onContextMenu:n[31]}}),{c(){e=k("div"),ke(t.$$.fragment),this.h()},l(r){e=T(r,"DIV",{class:!0,"data-type":!0,style:!0,title:!0});var o=I(e);Oe(t.$$.fragment,o),o.forEach(b),this.h()},h(){S(e,"class","jse-insert-area jse-inside svelte-1dkd71f"),S(e,"data-type","insert-selection-area-inside"),S(e,"style",i=Qu(n[1].length+1)),S(e,"title",Tv),xe(e,"jse-hovered",n[10]===vo),xe(e,"jse-selected",n[16]&&Ci(n[7]))},m(r,o){H(r,e,o),Te(t,e,null),s=!0},p(r,o){const l={};o[0]&65664&&(l.selected=r[16]&&Ci(r[7])),t.$set(l),(!s||o[0]&2&&i!==(i=Qu(r[1].length+1)))&&S(e,"style",i),(!s||o[0]&1024)&&xe(e,"jse-hovered",r[10]===vo),(!s||o[0]&65664)&&xe(e,"jse-selected",r[16]&&Ci(r[7]))},i(r){s||(B(t.$$.fragment,r),s=!0)},o(r){G(t.$$.fragment,r),s=!1},d(r){r&&b(e),Ie(t)}}}function Nte(n){let e,t,i=n[50].index+"",s;return{c(){e=k("div"),t=k("div"),s=q(i),this.h()},l(r){e=T(r,"DIV",{slot:!0,class:!0});var o=I(e);t=T(o,"DIV",{class:!0});var l=I(t);s=z(l,i),l.forEach(b),o.forEach(b),this.h()},h(){S(t,"class","jse-index svelte-1dkd71f"),S(e,"slot","identifier"),S(e,"class","jse-identifier svelte-1dkd71f")},m(r,o){H(r,e,o),g(e,t),g(t,s)},p(r,o){o[0]&18687&&i!==(i=r[50].index+"")&&Le(s,i)},d(r){r&&b(e)}}}function mC(n,e){let t,i,s;return i=new qb({props:{value:e[50].value,path:e[50].path,expandedMap:e[50].expandedMap,enforceStringMap:e[50].enforceStringMap,visibleSectionsMap:e[50].visibleSectionsMap,validationErrorsMap:e[50].validationErrorsMap,searchResultItemsMap:e[50].searchResultItemsMap,selection:e[50].selection,context:e[8],onDragSelectionStart:e[26],$$slots:{identifier:[Nte]},$$scope:{ctx:e}}}),{key:n,first:null,c(){t=et(),ke(i.$$.fragment),this.h()},l(r){t=et(),Oe(i.$$.fragment,r),this.h()},h(){this.first=t},m(r,o){H(r,t,o),Te(i,r,o),s=!0},p(r,o){e=r;const l={};o[0]&18687&&(l.value=e[50].value),o[0]&18687&&(l.path=e[50].path),o[0]&18687&&(l.expandedMap=e[50].expandedMap),o[0]&18687&&(l.enforceStringMap=e[50].enforceStringMap),o[0]&18687&&(l.visibleSectionsMap=e[50].visibleSectionsMap),o[0]&18687&&(l.validationErrorsMap=e[50].validationErrorsMap),o[0]&18687&&(l.searchResultItemsMap=e[50].searchResultItemsMap),o[0]&18687&&(l.selection=e[50].selection),o[0]&256&&(l.context=e[8]),o[0]&18687|o[1]&16&&(l.$$scope={dirty:o,ctx:e}),i.$set(l)},i(r){s||(B(i.$$.fragment,r),s=!0)},o(r){G(i.$$.fragment,r),s=!1},d(r){r&&b(t),Ie(i,r)}}}function pC(n){let e,t;return e=new Nee({props:{visibleSections:n[14]||jl,sectionIndex:n[49],total:n[0].length,path:n[1],pointer:n[9],onExpandSection:n[8].onExpandSection,selection:n[7]}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,s){const r={};s[0]&16384&&(r.visibleSections=i[14]||jl),s[0]&16384&&(r.sectionIndex=i[49]),s[0]&1&&(r.total=i[0].length),s[0]&2&&(r.path=i[1]),s[0]&512&&(r.pointer=i[9]),s[0]&256&&(r.onExpandSection=i[8].onExpandSection),s[0]&128&&(r.selection=i[7]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function gC(n,e){let t,i=[],s=new Map,r,o,l,a=e[20](e[1],e[0],e[47],e[2],e[3],e[4],e[5],e[6],e[7],e[11]);const c=f=>f[50].index;for(let f=0;f<a.length;f+=1){let h=JA(e,a,f),d=c(h);s.set(d,i[f]=mC(d,h))}let u=e[47].end<e[0].length&&pC(e);return{key:n,first:null,c(){t=et();for(let f=0;f<i.length;f+=1)i[f].c();r=U(),u&&u.c(),o=et(),this.h()},l(f){t=et();for(let h=0;h<i.length;h+=1)i[h].l(f);r=W(f),u&&u.l(f),o=et(),this.h()},h(){this.first=t},m(f,h){H(f,t,h);for(let d=0;d<i.length;d+=1)i[d].m(f,h);H(f,r,h),u&&u.m(f,h),H(f,o,h),l=!0},p(f,h){e=f,h[0]&68176383&&(a=e[20](e[1],e[0],e[47],e[2],e[3],e[4],e[5],e[6],e[7],e[11]),He(),i=Zu(i,h,c,1,e,a,s,r.parentNode,$d,mC,r,JA),qe()),e[47].end<e[0].length?u?(u.p(e,h),h[0]&16385&&B(u,1)):(u=pC(e),u.c(),B(u,1),u.m(o.parentNode,o)):u&&(He(),G(u,1,1,()=>{u=null}),qe())},i(f){if(!l){for(let h=0;h<a.length;h+=1)B(i[h]);B(u),l=!0}},o(f){for(let h=0;h<i.length;h+=1)G(i[h]);G(u),l=!1},d(f){f&&b(t);for(let h=0;h<i.length;h+=1)i[h].d(f);f&&b(r),u&&u.d(f),f&&b(o)}}}function vC(n){let e,t,i;return{c(){e=k("div"),this.h()},l(s){e=T(s,"DIV",{class:!0,"data-type":!0}),I(e).forEach(b),this.h()},h(){S(e,"class","jse-insert-selection-area jse-after svelte-1dkd71f"),S(e,"data-type","insert-selection-area-after")},m(s,r){H(s,e,r),t||(i=_e(e,"click",n[30]),t=!0)},p:Xe,d(s){s&&b(e),t=!1,i()}}}function bC(n){let e,t,i;return t=new la({props:{selected:n[16]&&gr(n[7]),onContextMenu:n[32]}}),{c(){e=k("div"),ke(t.$$.fragment),this.h()},l(s){e=T(s,"DIV",{class:!0,"data-type":!0,style:!0,title:!0});var r=I(e);Oe(t.$$.fragment,r),r.forEach(b),this.h()},h(){S(e,"class","jse-insert-area jse-after svelte-1dkd71f"),S(e,"data-type","insert-selection-area-after"),S(e,"style",n[18]),S(e,"title",Tv),xe(e,"jse-hovered",n[10]===Tu),xe(e,"jse-selected",n[16]&&gr(n[7]))},m(s,r){H(s,e,r),Te(t,e,null),i=!0},p(s,r){const o={};r[0]&65664&&(o.selected=s[16]&&gr(s[7])),t.$set(o),(!i||r[0]&262144)&&S(e,"style",s[18]),(!i||r[0]&1024)&&xe(e,"jse-hovered",s[10]===Tu),(!i||r[0]&65664)&&xe(e,"jse-selected",s[16]&&gr(s[7]))},i(s){i||(B(t.$$.fragment,s),i=!0)},o(s){G(t.$$.fragment,s),i=!1},d(s){s&&b(e),Ie(t)}}}function Pte(n){let e,t,i,s,r,o,l=!n[8].readOnly&&(n[10]===Tu||n[16]&&gr(n[7])),a,c,u,f,h;const d=[bte,vte,gte],m=[];function p(v,y){return y[0]&1&&(t=null),y[0]&1&&(i=null),t==null&&(t=!!Array.isArray(v[0])),t?0:(i==null&&(i=!!ji(v[0])),i?1:2)}s=p(n,[-1,-1]),r=m[s]=d[s](n);let _=l&&bC(n);return{c(){e=k("div"),r.c(),o=U(),_&&_.c(),this.h()},l(v){e=T(v,"DIV",{class:!0,"data-path":!0});var y=I(e);r.l(y),o=W(y),_&&_.l(y),y.forEach(b),this.h()},h(){S(e,"class",a=Ze(lc("jse-json-node",{"jse-expanded":n[12]},n[8].onClassName(n[1],n[0])))+" svelte-1dkd71f"),S(e,"data-path",c=w1(n[1])),xe(e,"jse-root",n[17]),xe(e,"jse-selected",n[16]&&yn(n[7])),xe(e,"jse-selected-key",n[16]&&ci(n[7])),xe(e,"jse-selected-value",n[16]&&_n(n[7])),xe(e,"jse-hovered",n[10]===s1)},m(v,y){H(v,e,y),m[s].m(e,null),g(e,o),_&&_.m(e,null),u=!0,f||(h=[_e(e,"mousedown",n[24]),_e(e,"mousemove",n[25]),_e(e,"mouseover",n[27]),_e(e,"mouseout",n[28]),_e(e,"focus",void 0),_e(e,"blur",void 0)],f=!0)},p(v,y){let w=s;s=p(v,y),s===w?m[s].p(v,y):(He(),G(m[w],1,1,()=>{m[w]=null}),qe(),r=m[s],r?r.p(v,y):(r=m[s]=d[s](v),r.c()),B(r,1),r.m(e,o)),y[0]&66944&&(l=!v[8].readOnly&&(v[10]===Tu||v[16]&&gr(v[7]))),l?_?(_.p(v,y),y[0]&66944&&B(_,1)):(_=bC(v),_.c(),B(_,1),_.m(e,null)):_&&(He(),G(_,1,1,()=>{_=null}),qe()),(!u||y[0]&4355&&a!==(a=Ze(lc("jse-json-node",{"jse-expanded":v[12]},v[8].onClassName(v[1],v[0])))+" svelte-1dkd71f"))&&S(e,"class",a),(!u||y[0]&2&&c!==(c=w1(v[1])))&&S(e,"data-path",c),(!u||y[0]&135427)&&xe(e,"jse-root",v[17]),(!u||y[0]&70019)&&xe(e,"jse-selected",v[16]&&yn(v[7])),(!u||y[0]&70019)&&xe(e,"jse-selected-key",v[16]&&ci(v[7])),(!u||y[0]&70019)&&xe(e,"jse-selected-value",v[16]&&_n(v[7])),(!u||y[0]&5379)&&xe(e,"jse-hovered",v[10]===s1)},i(v){u||(B(r),B(_),u=!0)},o(v){G(r),G(_),u=!1},d(v){v&&b(e),m[s].d(),_&&_.d(),f=!1,an(h)}}}function Qu(n){return`margin-left: calc(${n} * var(--jse-indent-size))`}function Mte(n,e,t){let i,s,{$$slots:r={},$$scope:o}=e,{value:l}=e,{path:a}=e,{expandedMap:c}=e,{enforceStringMap:u}=e,{visibleSectionsMap:f}=e,{validationErrorsMap:h}=e,{searchResultItemsMap:d}=e,{selection:m}=e,{context:p}=e,{onDragSelectionStart:_}=e;const v=Is("jsoneditor:JSONNode");let y,w,A;const E=WG();let C,R,D,N,L,F;function P(he,M,ae,de,ee,$,ne,me,le){let ie=Object.keys(M).map(be=>{const we=l1(C,be);return{key:be,value:M[be],path:E(he.concat(be)),pointer:we,expandedMap:Or(ae,we),enforceStringMap:Or(de,we),visibleSectionsMap:Or(ee,we),validationErrorsMap:Or($,we),keySearchResultItemsMap:Q$(ne,we),valueSearchResultItemsMap:Or(ne,we),selection:AA(me,we)}});return le&&le.offset!==0&&(ie=WS(ie,le.selectionStartIndex,le.selectionItemsCount,le.offset)),ie}function Q(he,M,ae,de,ee,$,ne,me,le,ie){const be=ae.start,we=Math.min(ae.end,M.length);let Ae=[];for(let ge=be;ge<we;ge++){const Be=l1(C,ge);Ae.push({index:ge,value:M[ge],path:E(he.concat(String(ge))),pointer:Be,expandedMap:Or(de,Be),enforceStringMap:Or(ee,Be),visibleSectionsMap:Or($,Be),validationErrorsMap:Or(ne,Be),searchResultItemsMap:Or(me,Be),selection:AA(le,Be)})}if(ie&&ie.offset!==0){const ge=Ae.map(Be=>Be.index);Ae=WS(Ae,ie.selectionStartIndex,ie.selectionItemsCount,ie.offset);for(let Be=0;Be<Ae.length;Be++)Ae[Be].index=ge[Be]}return Ae}function O(he){he.stopPropagation();const M=he.ctrlKey;p.onExpand(a,!R,M)}function K(he){he.stopPropagation(),p.onExpand(a,!0)}function X(he,M){const ae=Of(a,Object.keys(l),he,M);return p.onPatch(ae),Xt(Yo(ae[0].path))}function J(he){if(Az(he.target)||he.which===1&&$O(he.target,"BUTTON"))return;he.stopPropagation(),he.preventDefault(),document.addEventListener("mousemove",j,!0),document.addEventListener("mouseup",x);const M=Dp(he.target),ae=p.getJson(),de=p.getDocumentState();if(I$(m,a,M)){he.button===0&&_(he);return}if(Vi.selecting=!0,Vi.selectionAnchor=a,Vi.selectionAnchorType=M,Vi.selectionFocus=a,he.shiftKey)m&&p.onSelect(ui(ae,m.anchorPath,a));else if(M===Pn.multi)if(i&&he.target.hasAttribute("data-path")){const ee=Xt(mN(l,de));p.onSelect(Fb(ee))}else p.onSelect(ui(ae,a,a));else p.onSelect(wA(ae,M,a));p.focus()}function te(he){if(Vi.selecting){he.preventDefault(),he.stopPropagation(),Vi.selectionFocus==null&&window.getSelection&&window.getSelection().empty();const M=Dp(he.target);if(!En(a,Vi.selectionFocus)||M!==Vi.selectionAnchorType){Vi.selectionFocus=a,Vi.selectionAnchorType=M;const ae=p.getJson();p.onSelect(ui(ae,Vi.selectionAnchor,Vi.selectionFocus))}}}function j(he){p.onDrag(he)}function x(he){Vi.selecting&&(Vi.selecting=!1,he.stopPropagation()),p.onDragEnd(),document.removeEventListener("mousemove",j,!0),document.removeEventListener("mouseup",x)}function Z(){var he,M;return((M=(he=p.findElement([]))==null?void 0:he.getBoundingClientRect())==null?void 0:M.top)||0}function V(he,M){const de=Z()-he.initialContentTop;return M.clientY-he.initialClientY-de}function ce(he){if(p.readOnly)return;const M=gn(m.focusPath);if(!En(a,M)){_(he);return}const ae=ye(m,N||jl);if(v("dragSelectionStart",{selection:m,items:ae}),!ae){v("Cannot drag the current selection (probably spread over multiple sections)");return}const de=rc(m),ee=ae.findIndex(le=>En(le.path,de)),$=p.getJson(),ne=p.getDocumentState(),{offset:me}=hg({json:$,documentState:ne,deltaY:0,items:ae});t(11,A={initialTarget:he.target,initialClientY:he.clientY,initialContentTop:Z(),selectionStartIndex:ee,selectionItemsCount:bN(m).length,items:ae,offset:me,didMoveItems:!1}),Vi.dragging=!0,document.addEventListener("mousemove",pe,!0),document.addEventListener("mouseup",re)}function pe(he){if(A){const M=p.getJson(),ae=p.getDocumentState(),de=V(A,he),{offset:ee}=hg({json:M,documentState:ae,deltaY:de,items:A.items});ee!==A.offset&&(v("drag selection",ee,de),t(11,A={...A,offset:ee,didMoveItems:!0}))}}function re(he){if(A){const M=p.getJson(),ae=p.getDocumentState(),de=V(A,he),{operations:ee,updatedSelection:$}=hg({json:M,documentState:ae,deltaY:de,items:A.items});if(ee)p.onPatch(ee,(ne,me)=>({state:{...me,selection:$||m}}));else if(he.target===A.initialTarget&&!A.didMoveItems){const ne=Dp(he.target),me=Iz(he.target);me&&p.onSelect(wA(M,ne,me))}t(11,A=void 0),Vi.dragging=!1,document.removeEventListener("mousemove",pe,!0),document.removeEventListener("mouseup",re)}}function ye(he,M){const ae=[];function de(ee){const $=a.concat(ee),ne=p.findElement($);ne!=null&&ae.push({path:$,height:ne.clientHeight})}if(Array.isArray(l)){const ee=rc(he),$=lp(he),ne=Xt(ee),me=Xt($),le=M.find(we=>ne>=we.start&&me<=we.end);if(!le)return null;const{start:ie,end:be}=le;zO(ie,Math.min(l.length,be),we=>de(String(we)))}else Object.keys(l).forEach(de);return ae}function Ne(he){Vi.selecting||Vi.dragging||(he.stopPropagation(),Sl(he.target,"data-type","selectable-value")?t(10,y=s1):Sl(he.target,"data-type","insert-selection-area-inside")?t(10,y=vo):Sl(he.target,"data-type","insert-selection-area-after")&&t(10,y=Tu),clearTimeout(w))}function Y(he){he.stopPropagation(),w=setTimeout(()=>t(10,y=void 0))}function Ce(he){he.shiftKey||(he.stopPropagation(),he.preventDefault(),p.onSelect(Ur(a)))}function We(he){he.shiftKey||(he.stopPropagation(),he.preventDefault(),p.onSelect(_o(a)))}function se(he){p.onSelect(Ur(a)),p.onContextMenu(he)}function Me(he){p.onSelect(_o(a)),p.onContextMenu(he)}return n.$$set=he=>{"value"in he&&t(0,l=he.value),"path"in he&&t(1,a=he.path),"expandedMap"in he&&t(2,c=he.expandedMap),"enforceStringMap"in he&&t(3,u=he.enforceStringMap),"visibleSectionsMap"in he&&t(4,f=he.visibleSectionsMap),"validationErrorsMap"in he&&t(5,h=he.validationErrorsMap),"searchResultItemsMap"in he&&t(6,d=he.searchResultItemsMap),"selection"in he&&t(7,m=he.selection),"context"in he&&t(8,p=he.context),"onDragSelectionStart"in he&&t(33,_=he.onDragSelectionStart),"$$scope"in he&&t(35,o=he.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&2&&t(9,C=ht(a)),n.$$.dirty[0]&516&&t(12,R=c?c[C]===!0:!1),n.$$.dirty[0]&777&&t(13,D=kf(l,u,C,p.parser)),n.$$.dirty[0]&528&&t(14,N=f?f[C]:void 0),n.$$.dirty[0]&544&&t(15,L=h?h[C]:void 0),n.$$.dirty[0]&640&&t(16,F=m?m.pointersMap[C]===!0:!1),n.$$.dirty[0]&2&&t(17,i=a.length===0),n.$$.dirty[0]&2&&t(18,s=Qu(a.length))},[l,a,c,u,f,h,d,m,p,C,y,A,R,D,N,L,F,i,s,P,Q,O,K,X,J,te,ce,Ne,Y,Ce,We,se,Me,_,r,o]}class qb extends st{constructor(e){super(),rt(this,e,Mte,Pte,cn,{value:0,path:1,expandedMap:2,enforceStringMap:3,visibleSectionsMap:4,validationErrorsMap:5,searchResultItemsMap:6,selection:7,context:8,onDragSelectionStart:33},null,[-1,-1])}}const Bte=qb;function Lte(n){let e,t;return e=new nb({props:{items:n[0]}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,[s]){const r={};s&1&&(r.items=i[0]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function Ute(n,e,t){let i,s,r,o,l,a,c,{json:u}=e,{selection:f}=e,{readOnly:h}=e,{showSearch:d=!1}=e,{historyState:m}=e,{onExpandAll:p}=e,{onCollapseAll:_}=e,{onUndo:v}=e,{onRedo:y}=e,{onSort:w}=e,{onTransform:A}=e,{onContextMenu:E}=e,{onCopy:C}=e,{onRenderMenu:R=Hn}=e;function D(){t(1,d=!d)}return n.$$set=N=>{"json"in N&&t(2,u=N.json),"selection"in N&&t(3,f=N.selection),"readOnly"in N&&t(4,h=N.readOnly),"showSearch"in N&&t(1,d=N.showSearch),"historyState"in N&&t(5,m=N.historyState),"onExpandAll"in N&&t(6,p=N.onExpandAll),"onCollapseAll"in N&&t(7,_=N.onCollapseAll),"onUndo"in N&&t(8,v=N.onUndo),"onRedo"in N&&t(9,y=N.onRedo),"onSort"in N&&t(10,w=N.onSort),"onTransform"in N&&t(11,A=N.onTransform),"onContextMenu"in N&&t(12,E=N.onContextMenu),"onCopy"in N&&t(13,C=N.onCopy),"onRenderMenu"in N&&t(14,R=N.onRenderMenu)},n.$$.update=()=>{n.$$.dirty&4&&t(20,i=u!==void 0),n.$$.dirty&8,n.$$.dirty&1048584&&t(17,s=i&&(yn(f)||ci(f)||_n(f))),n.$$.dirty&68&&t(19,r={icon:zG,title:"Expand all",className:"jse-expand-all",onClick:p,disabled:!Ri(u)}),n.$$.dirty&132&&t(18,o={icon:GG,title:"Collapse all",className:"jse-collapse-all",onClick:_,disabled:!Ri(u)}),n.$$.dirty&4&&t(16,l={icon:tb,title:"Search (Ctrl+F)",className:"jse-search",onClick:D,disabled:u===void 0}),n.$$.dirty&999220&&t(15,a=h?[r,o,{separator:!0},{icon:Mu,title:"Copy (Ctrl+C)",className:"jse-copy",onClick:C,disabled:!s},{separator:!0},l,{space:!0}]:[r,o,{separator:!0},{icon:eb,title:"Sort",className:"jse-sort",onClick:w,disabled:h||u===void 0},{icon:Zv,title:"Transform contents (filter, sort, project)",className:"jse-transform",onClick:A,disabled:h||u===void 0},l,{icon:iG,title:x4,className:"jse-contextmenu",onClick:E},{separator:!0},{icon:rR,title:"Undo (Ctrl+Z)",className:"jse-undo",onClick:v,disabled:!m.canUndo},{icon:sR,title:"Redo (Ctrl+Shift+Z)",className:"jse-redo",onClick:y,disabled:!m.canRedo},{space:!0}]),n.$$.dirty&49152&&t(0,c=R("tree",a)||a)},[c,d,u,f,h,m,p,_,v,y,w,A,E,C,R,a,l,s,o,r,i]}class Wte extends st{constructor(e){super(),rt(this,e,Ute,Lte,cn,{json:2,selection:3,readOnly:4,showSearch:1,historyState:5,onExpandAll:6,onCollapseAll:7,onUndo:8,onRedo:9,onSort:10,onTransform:11,onContextMenu:12,onCopy:13,onRenderMenu:14})}}const Vte=Wte;function _C(n){let e,t,i,s,r,o,l,a,c,u,f,h,d,m,p,_,v,y;return{c(){e=k("ul"),t=k("li"),i=q("Click inside the editor"),s=U(),r=k("li"),o=q("Paste clipboard data using "),l=k("span"),a=q("Ctrl+V"),c=U(),u=k("li"),f=q("Create a new object by typing "),h=k("span"),d=q("{"),m=U(),p=k("li"),_=q("Create a new array by typing "),v=k("span"),y=q("["),this.h()},l(w){e=T(w,"UL",{class:!0});var A=I(e);t=T(A,"LI",{class:!0});var E=I(t);i=z(E,"Click inside the editor"),E.forEach(b),s=W(A),r=T(A,"LI",{class:!0});var C=I(r);o=z(C,"Paste clipboard data using "),l=T(C,"SPAN",{class:!0});var R=I(l);a=z(R,"Ctrl+V"),R.forEach(b),C.forEach(b),c=W(A),u=T(A,"LI",{class:!0});var D=I(u);f=z(D,"Create a new object by typing "),h=T(D,"SPAN",{class:!0});var N=I(h);d=z(N,"{"),N.forEach(b),D.forEach(b),m=W(A),p=T(A,"LI",{class:!0});var L=I(p);_=z(L,"Create a new array by typing "),v=T(L,"SPAN",{class:!0});var F=I(v);y=z(F,"["),F.forEach(b),L.forEach(b),A.forEach(b),this.h()},h(){S(t,"class","svelte-17jij2m"),S(l,"class","jse-bold svelte-17jij2m"),S(r,"class","svelte-17jij2m"),S(h,"class","jse-bold svelte-17jij2m"),S(u,"class","svelte-17jij2m"),S(v,"class","jse-bold svelte-17jij2m"),S(p,"class","svelte-17jij2m"),S(e,"class","svelte-17jij2m")},m(w,A){H(w,e,A),g(e,t),g(t,i),g(e,s),g(e,r),g(r,o),g(r,l),g(l,a),g(e,c),g(e,u),g(u,f),g(u,h),g(h,d),g(e,m),g(e,p),g(p,_),g(p,v),g(v,y)},d(w){w&&b(e)}}}function Fte(n){let e,t,i,s,r,o,l,a=!n[0]&&_C();return{c(){e=k("div"),t=k("div"),i=U(),s=k("div"),r=q(`Empty document
    `),a&&a.c(),o=U(),l=k("div"),this.h()},l(c){e=T(c,"DIV",{class:!0});var u=I(e);t=T(u,"DIV",{class:!0}),I(t).forEach(b),i=W(u),s=T(u,"DIV",{class:!0});var f=I(s);r=z(f,`Empty document
    `),a&&a.l(f),f.forEach(b),o=W(u),l=T(u,"DIV",{class:!0}),I(l).forEach(b),u.forEach(b),this.h()},h(){S(t,"class","jse-space jse-before svelte-17jij2m"),S(s,"class","jse-contents svelte-17jij2m"),S(l,"class","jse-space jse-after svelte-17jij2m"),S(e,"class","jse-welcome svelte-17jij2m")},m(c,u){H(c,e,u),g(e,t),g(e,i),g(e,s),g(s,r),a&&a.m(s,null),g(e,o),g(e,l)},p(c,[u]){c[0]?a&&(a.d(1),a=null):a||(a=_C(),a.c(),a.m(s,null))},i:Xe,o:Xe,d(c){c&&b(e),a&&a.d()}}}function jte(n,e,t){let{readOnly:i}=e;return n.$$set=s=>{"readOnly"in s&&t(0,i=s.readOnly)},[i]}class Hte extends st{constructor(e){super(),rt(this,e,jte,Fte,cn,{readOnly:0})}}const qte=Hte;var A0={},zte={get exports(){return A0},set exports(n){A0=n}};/*
 * @version    1.4.0
 * @date       2015-10-26
 * @stability  3 - Stable
 * @author     Lauri Rooden (https://github.com/litejs/natural-compare-lite)
 * @license    MIT License
 */var yC=function(n,e){var t,i,s=1,r=0,o=0,l=String.alphabet;function a(c,u,f){if(f){for(t=u;f=a(c,t),f<76&&f>65;)++t;return+c.slice(u-1,t)}return f=l&&l.indexOf(c.charAt(u)),f>-1?f+76:(f=c.charCodeAt(u)||0,f<45||f>127?f:f<46?65:f<48?f-1:f<58?f+18:f<65?f-11:f<91?f+11:f<97?f-37:f<123?f+5:f-63)}if((n+="")!=(e+="")){for(;s;)if(i=a(n,r++),s=a(e,o++),i<76&&s<76&&i>66&&s>66&&(i=a(n,r,r),s=a(e,o,r=t),o=t),i!=s)return i<s?-1:1}return 0};try{zte.exports=yC}catch{String.naturalCompare=yC}function zb(n,e){const t=typeof n=="string"?n.toLowerCase():n,i=typeof e=="string"?e.toLowerCase():e;return A0(t,i)}function Gte(n,e=[],t=1){const i=wt(n,e),r=Object.keys(i).slice();r.sort((l,a)=>t*zb(l,a));const o=[];for(let l=0;l<r.length;l++){const a=r[l],c=ht(e.concat(a));o.push({op:"move",from:c,path:c})}return o}function Kte(n,e=[],t=[],i=1){const s=Xte(t,i),r=wt(n,e);return[{op:"replace",path:ht(e),value:r.slice(0).sort(s)}]}function Xte(n,e){return function(i,s){const r=wt(i,n),o=wt(s,n);return r===void 0?e:o===void 0?-e:typeof r!="string"&&typeof o!="string"?r>o?e:r<o?-e:0:e*zb(r,o)}}function SC(n,e,t){const i=n.slice();return i[4]=e[t],i}function EC(n,e){let t,i=Xd(e[4],AC)+"",s,r,o,l;function a(){return e[3](e[4])}return{key:n,first:null,c(){t=k("button"),s=q(i),this.h()},l(c){t=T(c,"BUTTON",{type:!0,class:!0,title:!0});var u=I(t);s=z(u,i),u.forEach(b),this.h()},h(){S(t,"type","button"),S(t,"class","jse-navigation-bar-dropdown-item svelte-1rtf8mz"),S(t,"title",r=e[4]),xe(t,"jse-selected",e[4]===e[1]),this.first=t},m(c,u){H(c,t,u),g(t,s),o||(l=_e(t,"click",R0(a)),o=!0)},p(c,u){e=c,u&1&&i!==(i=Xd(e[4],AC)+"")&&Le(s,i),u&1&&r!==(r=e[4])&&S(t,"title",r),u&3&&xe(t,"jse-selected",e[4]===e[1])},d(c){c&&b(t),o=!1,l()}}}function wC(n){let e,t;return{c(){e=k("button"),t=q("..."),this.h()},l(i){e=T(i,"BUTTON",{type:!0,class:!0,title:!0});var s=I(e);t=z(s,"..."),s.forEach(b),this.h()},h(){S(e,"type","button"),S(e,"class","jse-navigation-bar-dropdown-item svelte-1rtf8mz"),S(e,"title","Limited to "+Yc+" items")},m(i,s){H(i,e,s),g(e,t)},p:Xe,d(i){i&&b(e)}}}function Qte(n){let e,t=[],i=new Map,s,r=BS(n[0],Yc);const o=a=>a[4];for(let a=0;a<r.length;a+=1){let c=SC(n,r,a),u=o(c);i.set(u,t[a]=EC(u,c))}let l=n[0].length>Yc&&wC();return{c(){e=k("div");for(let a=0;a<t.length;a+=1)t[a].c();s=U(),l&&l.c(),this.h()},l(a){e=T(a,"DIV",{class:!0});var c=I(e);for(let u=0;u<t.length;u+=1)t[u].l(c);s=W(c),l&&l.l(c),c.forEach(b),this.h()},h(){S(e,"class","jse-navigation-bar-dropdown svelte-1rtf8mz")},m(a,c){H(a,e,c);for(let u=0;u<t.length;u+=1)t[u].m(e,null);g(e,s),l&&l.m(e,null)},p(a,[c]){c&7&&(r=BS(a[0],Yc),t=Zu(t,c,o,1,a,r,i,e,LN,EC,s,SC)),a[0].length>Yc?l?l.p(a,c):(l=wC(),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},i:Xe,o:Xe,d(a){a&&b(e);for(let c=0;c<t.length;c+=1)t[c].d();l&&l.d()}}}const Yc=100,AC=30;function Yte(n,e,t){let{items:i}=e,{selectedItem:s}=e,{onSelect:r}=e;const o=l=>r(l);return n.$$set=l=>{"items"in l&&t(0,i=l.items),"selectedItem"in l&&t(1,s=l.selectedItem),"onSelect"in l&&t(2,r=l.onSelect)},[i,s,r,o]}class Jte extends st{constructor(e){super(),rt(this,e,Yte,Qte,cn,{items:0,selectedItem:1,onSelect:2})}}const Zte=Jte;function CC(n){let e,t,i,s;return{c(){e=k("button"),t=q(n[2]),this.h()},l(r){e=T(r,"BUTTON",{type:!0,class:!0});var o=I(e);t=z(o,n[2]),o.forEach(b),this.h()},h(){S(e,"type","button"),S(e,"class","jse-navigation-bar-button svelte-4ttwnh")},m(r,o){H(r,e,o),g(e,t),i||(s=_e(e,"click",n[9]),i=!0)},p(r,o){o&4&&Le(t,r[2])},d(r){r&&b(e),i=!1,s()}}}function xte(n){let e,t,i,s,r,o,l;i=new Vt({props:{data:iR}});let a=n[2]!==void 0&&CC(n);return{c(){e=k("div"),t=k("button"),ke(i.$$.fragment),s=U(),a&&a.c(),this.h()},l(c){e=T(c,"DIV",{class:!0});var u=I(e);t=T(u,"BUTTON",{type:!0,class:!0});var f=I(t);Oe(i.$$.fragment,f),f.forEach(b),s=W(u),a&&a.l(u),u.forEach(b),this.h()},h(){S(t,"type","button"),S(t,"class","jse-navigation-bar-button jse-navigation-bar-arrow svelte-4ttwnh"),xe(t,"jse-open",n[1]),S(e,"class","jse-navigation-bar-item svelte-4ttwnh")},m(c,u){H(c,e,u),g(e,t),Te(i,t,null),g(e,s),a&&a.m(e,null),n[10](e),r=!0,o||(l=_e(t,"click",n[4]),o=!0)},p(c,[u]){(!r||u&2)&&xe(t,"jse-open",c[1]),c[2]!==void 0?a?a.p(c,u):(a=CC(c),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},i(c){r||(B(i.$$.fragment,c),r=!0)},o(c){G(i.$$.fragment,c),r=!1},d(c){c&&b(e),Ie(i),a&&a.d(),n[10](null),o=!1,l()}}}function $te(n,e,t){let i,s;const{openAbsolutePopup:r,closeAbsolutePopup:o}=Bn("absolute-popup");let{path:l}=e,{index:a}=e,{onSelect:c}=e,{getItems:u}=e,f,h=!1,d;function m(y){o(d),c(i.concat(y))}function p(){if(f){t(1,h=!0);const y={items:u(i),selectedItem:s,onSelect:m};d=r(Zte,y,{anchor:f,closeOnOuterClick:!0,onClose:()=>{t(1,h=!1)}})}}const _=()=>m(s);function v(y){Ut[y?"unshift":"push"](()=>{f=y,t(0,f)})}return n.$$set=y=>{"path"in y&&t(5,l=y.path),"index"in y&&t(6,a=y.index),"onSelect"in y&&t(7,c=y.onSelect),"getItems"in y&&t(8,u=y.getItems)},n.$$.update=()=>{n.$$.dirty&96&&(i=l.slice(0,a)),n.$$.dirty&96&&t(2,s=l[a])},[f,h,s,m,p,l,a,c,u,_,v]}class ene extends st{constructor(e){super(),rt(this,e,$te,xte,cn,{path:5,index:6,onSelect:7,getItems:8})}}const wN=ene;function kC(n){let e,t,i,s,r,o;return t=new Vt({props:{data:sa}}),{c(){e=k("button"),ke(t.$$.fragment),this.h()},l(l){e=T(l,"BUTTON",{type:!0,class:!0});var a=I(e);Oe(t.$$.fragment,a),a.forEach(b),this.h()},h(){S(e,"type","button"),S(e,"class","jse-navigation-bar-validation-error svelte-1etw4zg")},m(l,a){H(l,e,a),Te(t,e,null),s=!0,r||(o=ac(i=jb.call(null,e,{text:n[3],...n[4]})),r=!0)},p(l,a){i&&Mn(i.update)&&a&8&&i.update.call(null,{text:l[3],...l[4]})},i(l){s||(B(t.$$.fragment,l),s=!0)},o(l){G(t.$$.fragment,l),s=!1},d(l){l&&b(e),Ie(t),r=!1,o()}}}function TC(n){let e,t;return{c(){e=k("div"),t=q("Copied!"),this.h()},l(i){e=T(i,"DIV",{class:!0});var s=I(e);t=z(s,"Copied!"),s.forEach(b),this.h()},h(){S(e,"class","jse-copied-text svelte-1etw4zg")},m(i,s){H(i,e,s),g(e,t)},d(i){i&&b(e)}}}function tne(n){let e,t,i,s,r,o,l,a,c,u,f=n[3]&&kC(n),h=n[2]&&TC();return l=new Vt({props:{data:Mu}}),{c(){e=k("div"),t=k("input"),i=U(),f&&f.c(),s=U(),h&&h.c(),r=U(),o=k("button"),ke(l.$$.fragment),this.h()},l(d){e=T(d,"DIV",{class:!0});var m=I(e);t=T(m,"INPUT",{type:!0,class:!0}),i=W(m),f&&f.l(m),s=W(m),h&&h.l(m),r=W(m),o=T(m,"BUTTON",{type:!0,class:!0,title:!0});var p=I(o);Oe(l.$$.fragment,p),p.forEach(b),m.forEach(b),this.h()},h(){S(t,"type","text"),S(t,"class","jse-navigation-bar-text svelte-1etw4zg"),t.value=n[0],S(o,"type","button"),S(o,"class","jse-navigation-bar-copy svelte-1etw4zg"),S(o,"title","Copy selected path to the clipboard"),xe(o,"copied",n[2]),S(e,"class","jse-navigation-bar-path-editor svelte-1etw4zg"),xe(e,"error",n[3])},m(d,m){H(d,e,m),g(e,t),n[15](t),g(e,i),f&&f.m(e,null),g(e,s),h&&h.m(e,null),g(e,r),g(e,o),Te(l,o,null),a=!0,c||(u=[_e(t,"keydown",R0(n[6])),_e(t,"input",n[5]),_e(o,"click",n[7])],c=!0)},p(d,[m]){(!a||m&1&&t.value!==d[0])&&(t.value=d[0]),d[3]?f?(f.p(d,m),m&8&&B(f,1)):(f=kC(d),f.c(),B(f,1),f.m(e,s)):f&&(He(),G(f,1,1,()=>{f=null}),qe()),d[2]?h||(h=TC(),h.c(),h.m(e,r)):h&&(h.d(1),h=null),(!a||m&4)&&xe(o,"copied",d[2]),(!a||m&8)&&xe(e,"error",d[3])},i(d){a||(B(f),B(l.$$.fragment,d),a=!0)},o(d){G(f),G(l.$$.fragment,d),a=!1},d(d){d&&b(e),n[15](null),f&&f.d(),h&&h.d(),Ie(l),c=!1,an(u)}}}const nne=1e3;function ine(n,e,t){let i;const s=Bn("absolute-popup");let{path:r}=e,{pathParser:o}=e,{onChange:l}=e,{onClose:a}=e,{onError:c}=e,{pathExists:u}=e,f,h,d=!1,m,p=!1;Mi(()=>{_()}),br(()=>{clearTimeout(m)});function _(){f.focus()}function v(R){try{const D=o.parse(R);return y(D),{path:D,error:void 0}}catch(D){return{path:void 0,error:D}}}function y(R){if(!u(R))throw new Error("Path does not exist in current document")}function w(R){t(0,h=R.currentTarget.value)}function A(R){const D=ia(R);if(D==="Escape"&&a(),D==="Enter"){t(14,d=!0);const N=v(h);N.path!==void 0?l(N.path):c(N.error)}}function E(){E0(h),t(2,p=!0),m=setTimeout(()=>t(2,p=!1),nne),_()}function C(R){Ut[R?"unshift":"push"](()=>{f=R,t(1,f)})}return n.$$set=R=>{"path"in R&&t(8,r=R.path),"pathParser"in R&&t(9,o=R.pathParser),"onChange"in R&&t(10,l=R.onChange),"onClose"in R&&t(11,a=R.onClose),"onError"in R&&t(12,c=R.onError),"pathExists"in R&&t(13,u=R.pathExists)},n.$$.update=()=>{n.$$.dirty&768&&t(0,h=o.stringify(r)),n.$$.dirty&16385&&t(3,i=d?v(h).error:void 0)},[h,f,p,i,s,w,A,E,r,o,l,a,c,u,d,C]}class sne extends st{constructor(e){super(),rt(this,e,ine,tne,kt,{path:8,pathParser:9,onChange:10,onClose:11,onError:12,pathExists:13})}}const rne=sne;function IC(n,e,t){const i=n.slice();return i[20]=e[t],i[22]=t,i}function one(n){let e,t;return e=new rne({props:{path:n[3],onClose:n[12],onChange:n[13],onError:n[1],pathExists:n[9],pathParser:n[2]}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,s){const r={};s&8&&(r.path=i[3]),s&2&&(r.onError=i[1]),s&4&&(r.pathParser=i[2]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function lne(n){let e=[],t=new Map,i,s,r,o=n[3];const l=c=>c[22];for(let c=0;c<o.length;c+=1){let u=IC(n,o,c),f=l(u);t.set(f,e[c]=OC(f,u))}let a=n[7]&&RC(n);return{c(){for(let c=0;c<e.length;c+=1)e[c].c();i=U(),a&&a.c(),s=et()},l(c){for(let u=0;u<e.length;u+=1)e[u].l(c);i=W(c),a&&a.l(c),s=et()},m(c,u){for(let f=0;f<e.length;f+=1)e[f].m(c,u);H(c,i,u),a&&a.m(c,u),H(c,s,u),r=!0},p(c,u){u&1288&&(o=c[3],He(),e=Zu(e,u,l,1,c,o,t,i.parentNode,$d,OC,i,IC),qe()),c[7]?a?(a.p(c,u),u&128&&B(a,1)):(a=RC(c),a.c(),B(a,1),a.m(s.parentNode,s)):a&&(He(),G(a,1,1,()=>{a=null}),qe())},i(c){if(!r){for(let u=0;u<o.length;u+=1)B(e[u]);B(a),r=!0}},o(c){for(let u=0;u<e.length;u+=1)G(e[u]);G(a),r=!1},d(c){for(let u=0;u<e.length;u+=1)e[u].d(c);c&&b(i),a&&a.d(c),c&&b(s)}}}function OC(n,e){let t,i,s;return i=new wN({props:{getItems:e[8],path:e[3],index:e[22],onSelect:e[10]}}),{key:n,first:null,c(){t=et(),ke(i.$$.fragment),this.h()},l(r){t=et(),Oe(i.$$.fragment,r),this.h()},h(){this.first=t},m(r,o){H(r,t,o),Te(i,r,o),s=!0},p(r,o){e=r;const l={};o&8&&(l.path=e[3]),o&8&&(l.index=e[22]),i.$set(l)},i(r){s||(B(i.$$.fragment,r),s=!0)},o(r){G(i.$$.fragment,r),s=!1},d(r){r&&b(t),Ie(i,r)}}}function RC(n){let e,t;return e=new wN({props:{getItems:n[8],path:n[3],index:void 0,onSelect:n[10]}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,s){const r={};s&8&&(r.path=i[3]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function ane(n){let e,t,i,s,r,o,l=!Ri(n[0])&&!n[6]?"Navigation bar":" ",a,c,u,f,h,d,m;const p=[lne,one],_=[];function v(y,w){return y[6]?1:0}return t=v(n),i=_[t]=p[t](n),u=new Vt({props:{data:n[6]?XS:KS}}),{c(){e=k("div"),i.c(),s=U(),r=k("button"),o=k("span"),a=q(l),c=U(),ke(u.$$.fragment),this.h()},l(y){e=T(y,"DIV",{class:!0});var w=I(e);i.l(w),s=W(w),r=T(w,"BUTTON",{type:!0,class:!0,title:!0});var A=I(r);o=T(A,"SPAN",{class:!0});var E=I(o);a=z(E,l),E.forEach(b),c=W(A),Oe(u.$$.fragment,A),A.forEach(b),w.forEach(b),this.h()},h(){S(o,"class","jse-navigation-bar-space svelte-12s2kay"),S(r,"type","button"),S(r,"class","jse-navigation-bar-edit svelte-12s2kay"),S(r,"title",f=n[6]?"Cancel editing the selected path":"Edit the selected path"),xe(r,"flex",!n[6]),xe(r,"editing",n[6]),S(e,"class","jse-navigation-bar svelte-12s2kay")},m(y,w){H(y,e,w),_[t].m(e,null),g(e,s),g(e,r),g(r,o),g(o,a),g(r,c),Te(u,r,null),n[16](r),n[17](e),h=!0,d||(m=_e(r,"click",n[11]),d=!0)},p(y,[w]){let A=t;t=v(y),t===A?_[t].p(y,w):(He(),G(_[A],1,1,()=>{_[A]=null}),qe(),i=_[t],i?i.p(y,w):(i=_[t]=p[t](y),i.c()),B(i,1),i.m(e,s)),(!h||w&65)&&l!==(l=!Ri(y[0])&&!y[6]?"Navigation bar":" ")&&Le(a,l);const E={};w&64&&(E.data=y[6]?XS:KS),u.$set(E),(!h||w&64&&f!==(f=y[6]?"Cancel editing the selected path":"Edit the selected path"))&&S(r,"title",f),(!h||w&64)&&xe(r,"flex",!y[6]),(!h||w&64)&&xe(r,"editing",y[6])},i(y){h||(B(i),B(u.$$.fragment,y),h=!0)},o(y){G(i),G(u.$$.fragment,y),h=!1},d(y){y&&b(e),_[t].d(),Ie(u),n[16](null),n[17](null),d=!1,m()}}}function cne(n,e,t){let i,s;const r=Is("jsoneditor:NavigationBar");let{json:o}=e,{documentState:l}=e,{onSelect:a}=e,{onError:c}=e,{pathParser:u}=e,f,h,d=!1;function m(){setTimeout(()=>{if(f&&f.scrollTo){const R=f.scrollWidth-f.clientWidth;R>0&&(r("scrollTo ",R),f.scrollTo({left:R,behavior:"smooth"}))}})}function p(R){r("get items for path",R);const D=wt(o,R);if(Array.isArray(D))return $q(0,D.length).map(String);if(ji(D)){const L=Object.keys(D).slice(0);return L.sort(zb),L}else return[]}function _(R){return Qo(o,R)}function v(R){r("select path",JSON.stringify(R)),a(ui(o,R,R))}function y(){t(6,d=!d)}function w(){t(6,d=!1)}function A(R){w(),v(R)}function E(R){Ut[R?"unshift":"push"](()=>{h=R,t(5,h)})}function C(R){Ut[R?"unshift":"push"](()=>{f=R,t(4,f)})}return n.$$set=R=>{"json"in R&&t(0,o=R.json),"documentState"in R&&t(14,l=R.documentState),"onSelect"in R&&t(15,a=R.onSelect),"onError"in R&&t(1,c=R.onError),"pathParser"in R&&t(2,u=R.pathParser)},n.$$.update=()=>{n.$$.dirty&16384&&t(3,i=l.selection?l.selection.focusPath:[]),n.$$.dirty&9&&t(7,s=Ri(wt(o,i))),n.$$.dirty&8&&m()},[o,c,u,i,f,h,d,s,p,_,v,y,w,A,l,a,E,C]}class une extends st{constructor(e){super(),rt(this,e,cne,ane,cn,{json:0,documentState:14,onSelect:15,onError:1,pathParser:2})}}const fne=une;function DC(n){let e,t,i,s,r,o,l,a,c,u,f,h,d,m=n[3]!==-1?`${n[3]+1}/`:"",p,_,v,y,w,A,E,C,R,D,N,L,F,P,Q,O=!n[4]&&NC(n);const K=[dne,hne],X=[];function J(j,x){return j[2]?0:1}l=J(n),a=X[l]=K[l](n),w=new Vt({props:{data:aG}}),C=new Vt({props:{data:Xz}}),N=new Vt({props:{data:_f}});let te=n[0]&&!n[4]&&PC(n);return{c(){e=k("div"),t=k("form"),O&&O.c(),i=U(),s=k("div"),r=k("div"),o=k("div"),a.c(),c=U(),u=k("label"),f=k("input"),h=U(),d=k("div"),p=q(m),_=q(n[10]),v=U(),y=k("button"),ke(w.$$.fragment),A=U(),E=k("button"),ke(C.$$.fragment),R=U(),D=k("button"),ke(N.$$.fragment),L=U(),te&&te.c(),this.h()},l(j){e=T(j,"DIV",{class:!0});var x=I(e);t=T(x,"FORM",{class:!0});var Z=I(t);O&&O.l(Z),i=W(Z),s=T(Z,"DIV",{class:!0});var V=I(s);r=T(V,"DIV",{class:!0});var ce=I(r);o=T(ce,"DIV",{class:!0});var pe=I(o);a.l(pe),pe.forEach(b),c=W(ce),u=T(ce,"LABEL",{class:!0,about:!0});var re=I(u);f=T(re,"INPUT",{class:!0,title:!0,type:!0,placeholder:!0}),re.forEach(b),h=W(ce),d=T(ce,"DIV",{class:!0});var ye=I(d);p=z(ye,m),_=z(ye,n[10]),ye.forEach(b),v=W(ce),y=T(ce,"BUTTON",{type:!0,class:!0,title:!0});var Ne=I(y);Oe(w.$$.fragment,Ne),Ne.forEach(b),A=W(ce),E=T(ce,"BUTTON",{type:!0,class:!0,title:!0});var Y=I(E);Oe(C.$$.fragment,Y),Y.forEach(b),R=W(ce),D=T(ce,"BUTTON",{type:!0,class:!0,title:!0});var Ce=I(D);Oe(N.$$.fragment,Ce),Ce.forEach(b),ce.forEach(b),L=W(V),te&&te.l(V),V.forEach(b),Z.forEach(b),x.forEach(b),this.h()},h(){S(o,"class","jse-search-icon svelte-10nesp9"),S(f,"class","jse-search-input svelte-10nesp9"),S(f,"title","Enter text to search"),S(f,"type","text"),S(f,"placeholder","Find"),S(u,"class","jse-search-input-label svelte-10nesp9"),S(u,"about","jse-search input"),S(d,"class","jse-search-count svelte-10nesp9"),xe(d,"jse-visible",n[8]!==""),S(y,"type","button"),S(y,"class","jse-search-next svelte-10nesp9"),S(y,"title","Go to next search result (Enter)"),S(E,"type","button"),S(E,"class","jse-search-previous svelte-10nesp9"),S(E,"title","Go to previous search result (Shift+Enter)"),S(D,"type","button"),S(D,"class","jse-search-clear svelte-10nesp9"),S(D,"title","Close search box (Esc)"),S(r,"class","jse-search-section svelte-10nesp9"),S(s,"class","jse-search-contents svelte-10nesp9"),S(t,"class","jse-search-form svelte-10nesp9"),S(e,"class","jse-search-box svelte-10nesp9")},m(j,x){H(j,e,x),g(e,t),O&&O.m(t,null),g(t,i),g(t,s),g(s,r),g(r,o),X[l].m(o,null),g(r,c),g(r,u),g(u,f),Ms(f,n[8]),g(r,h),g(r,d),g(d,p),g(d,_),g(r,v),g(r,y),Te(w,y,null),g(r,A),g(r,E),Te(C,E,null),g(r,R),g(r,D),Te(N,D,null),g(s,L),te&&te.m(s,null),F=!0,P||(Q=[_e(f,"input",n[21]),ac(pne.call(null,f)),_e(y,"click",n[22]),_e(E,"click",n[23]),_e(D,"click",n[24]),_e(t,"submit",n[12]),_e(t,"keydown",n[13])],P=!0)},p(j,x){j[4]?O&&(He(),G(O,1,1,()=>{O=null}),qe()):O?(O.p(j,x),x&16&&B(O,1)):(O=NC(j),O.c(),B(O,1),O.m(t,i));let Z=l;l=J(j),l===Z?X[l].p(j,x):(He(),G(X[Z],1,1,()=>{X[Z]=null}),qe(),a=X[l],a?a.p(j,x):(a=X[l]=K[l](j),a.c()),B(a,1),a.m(o,null)),x&256&&f.value!==j[8]&&Ms(f,j[8]),(!F||x&8)&&m!==(m=j[3]!==-1?`${j[3]+1}/`:"")&&Le(p,m),(!F||x&1024)&&Le(_,j[10]),(!F||x&256)&&xe(d,"jse-visible",j[8]!==""),j[0]&&!j[4]?te?te.p(j,x):(te=PC(j),te.c(),te.m(s,null)):te&&(te.d(1),te=null)},i(j){F||(B(O),B(a),B(w.$$.fragment,j),B(C.$$.fragment,j),B(N.$$.fragment,j),F=!0)},o(j){G(O),G(a),G(w.$$.fragment,j),G(C.$$.fragment,j),G(N.$$.fragment,j),F=!1},d(j){j&&b(e),O&&O.d(),X[l].d(),Ie(w),Ie(C),Ie(N),te&&te.d(),P=!1,an(Q)}}}function NC(n){let e,t,i,s,r;return t=new Vt({props:{data:n[0]?Mr:No}}),{c(){e=k("button"),ke(t.$$.fragment),this.h()},l(o){e=T(o,"BUTTON",{type:!0,class:!0,title:!0});var l=I(e);Oe(t.$$.fragment,l),l.forEach(b),this.h()},h(){S(e,"type","button"),S(e,"class","jse-replace-toggle svelte-10nesp9"),S(e,"title","Toggle visibility of replace options (Ctrl+H)")},m(o,l){H(o,e,l),Te(t,e,null),i=!0,s||(r=_e(e,"click",n[11]),s=!0)},p(o,l){const a={};l&1&&(a.data=o[0]?Mr:No),t.$set(a)},i(o){i||(B(t.$$.fragment,o),i=!0)},o(o){G(t.$$.fragment,o),i=!1},d(o){o&&b(e),Ie(t),s=!1,r()}}}function hne(n){let e,t;return e=new Vt({props:{data:tb}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p:Xe,i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function dne(n){let e,t;return e=new Vt({props:{data:Hz,spin:!0}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p:Xe,i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function PC(n){let e,t,i,s,r,o,l,a,c,u;return{c(){e=k("div"),t=k("input"),i=U(),s=k("button"),r=q("Replace"),o=U(),l=k("button"),a=q("All"),this.h()},l(f){e=T(f,"DIV",{class:!0});var h=I(e);t=T(h,"INPUT",{class:!0,title:!0,type:!0,placeholder:!0}),i=W(h),s=T(h,"BUTTON",{type:!0,title:!0,class:!0});var d=I(s);r=z(d,"Replace"),d.forEach(b),o=W(h),l=T(h,"BUTTON",{type:!0,title:!0,class:!0});var m=I(l);a=z(m,"All"),m.forEach(b),h.forEach(b),this.h()},h(){S(t,"class","jse-replace-input svelte-10nesp9"),S(t,"title","Enter replacement text"),S(t,"type","text"),S(t,"placeholder","Replace"),S(s,"type","button"),S(s,"title","Replace current occurrence (Ctrl+Enter)"),S(s,"class","svelte-10nesp9"),S(l,"type","button"),S(l,"title","Replace all occurrences"),S(l,"class","svelte-10nesp9"),S(e,"class","jse-replace-section svelte-10nesp9")},m(f,h){H(f,e,h),g(e,t),Ms(t,n[9]),g(e,i),g(e,s),g(s,r),g(e,o),g(e,l),g(l,a),c||(u=[_e(t,"input",n[25]),_e(s,"click",n[14]),_e(l,"click",n[15])],c=!0)},p(f,h){h&512&&t.value!==f[9]&&Ms(t,f[9])},d(f){f&&b(e),c=!1,an(u)}}}function mne(n){let e,t,i=n[1]&&DC(n);return{c(){i&&i.c(),e=et()},l(s){i&&i.l(s),e=et()},m(s,r){i&&i.m(s,r),H(s,e,r),t=!0},p(s,[r]){s[1]?i?(i.p(s,r),r&2&&B(i,1)):(i=DC(s),i.c(),B(i,1),i.m(e.parentNode,e)):i&&(He(),G(i,1,1,()=>{i=null}),qe())},i(s){t||(B(i),t=!0)},o(s){G(i),t=!1},d(s){i&&i.d(s),s&&b(e)}}}function pne(n){n.select()}function gne(n,e,t){let i,s,{show:r=!1}=e,{searching:o}=e,{resultCount:l=0}=e,{activeIndex:a=0}=e,{showReplace:c=!1}=e,{readOnly:u=!1}=e,{onChange:f=Hn}=e,{onPrevious:h=Hn}=e,{onNext:d=Hn}=e,{onReplace:m=Hn}=e,{onReplaceAll:p=Hn}=e,{onClose:_=Hn}=e,v="",y="",w="";function A(){v!==""&&f(v)}function E(){t(0,c=!c&&!u)}function C(K){K.preventDefault(),v!==y?(y=v,s.cancel(),f(v)):d()}function R(K){K.stopPropagation();const X=ia(K);X==="Enter"&&(K.preventDefault(),d()),X==="Shift+Enter"&&(K.preventDefault(),h()),(X==="Ctrl+Enter"||X==="Command+Enter")&&(K.preventDefault(),c?D():d()),X==="Ctrl+H"&&(K.preventDefault(),E()),X==="Escape"&&(K.preventDefault(),_())}function D(){u||m(v,w)}function N(){u||p(v,w)}function L(){v=this.value,t(8,v)}const F=()=>d(),P=()=>h(),Q=()=>_();function O(){w=this.value,t(9,w)}return n.$$set=K=>{"show"in K&&t(1,r=K.show),"searching"in K&&t(2,o=K.searching),"resultCount"in K&&t(16,l=K.resultCount),"activeIndex"in K&&t(3,a=K.activeIndex),"showReplace"in K&&t(0,c=K.showReplace),"readOnly"in K&&t(4,u=K.readOnly),"onChange"in K&&t(17,f=K.onChange),"onPrevious"in K&&t(5,h=K.onPrevious),"onNext"in K&&t(6,d=K.onNext),"onReplace"in K&&t(18,m=K.onReplace),"onReplaceAll"in K&&t(19,p=K.onReplaceAll),"onClose"in K&&t(7,_=K.onClose)},n.$$.update=()=>{n.$$.dirty&65536&&t(10,i=l>=n1?`${n1-1}+`:String(l)),n.$$.dirty&131072&&t(20,s=jm(f,Z4)),n.$$.dirty&1048832&&s(v),n.$$.dirty&2&&r&&A()},[c,r,o,a,u,h,d,_,v,w,i,E,C,R,D,N,l,f,m,p,s,L,F,P,Q,O]}class vne extends st{constructor(e){super(),rt(this,e,gne,mne,cn,{show:1,searching:2,resultCount:16,activeIndex:3,showReplace:0,readOnly:4,onChange:17,onPrevious:5,onNext:6,onReplace:18,onReplaceAll:19,onClose:7})}}const bne=vne;const{window:_ne}=Ju;function MC(n){let e,t,i;function s(o){n[73](o)}let r={json:n[9],selection:n[15].selection,readOnly:n[0],historyState:n[21],onExpandAll:n[39],onCollapseAll:n[40],onUndo:n[35],onRedo:n[36],onSort:n[37],onTransform:n[38],onContextMenu:n[44],onCopy:n[33],onRenderMenu:n[6]};return n[18]!==void 0&&(r.showSearch=n[18]),e=new Vte({props:r}),Ut.push(()=>Ws(e,"showSearch",s)),{c(){ke(e.$$.fragment)},l(o){Oe(e.$$.fragment,o)},m(o,l){Te(e,o,l),i=!0},p(o,l){const a={};l[0]&512&&(a.json=o[9]),l[0]&32768&&(a.selection=o[15].selection),l[0]&1&&(a.readOnly=o[0]),l[0]&2097152&&(a.historyState=o[21]),l[0]&64&&(a.onRenderMenu=o[6]),!t&&l[0]&262144&&(t=!0,a.showSearch=o[18],Js(()=>t=!1)),e.$set(a)},i(o){i||(B(e.$$.fragment,o),i=!0)},o(o){G(e.$$.fragment,o),i=!1},d(o){Ie(e,o)}}}function BC(n){let e,t;return e=new fne({props:{json:n[9],documentState:n[15],onSelect:n[47],onError:n[4],pathParser:n[3]}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,s){const r={};s[0]&512&&(r.json=i[9]),s[0]&32768&&(r.documentState=i[15]),s[0]&16&&(r.onError=i[4]),s[0]&8&&(r.pathParser=i[3]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function yne(n){let e,t,i,s,r;return{c(){e=k("div"),t=k("div"),i=U(),s=k("div"),r=q("loading..."),this.h()},l(o){e=T(o,"DIV",{class:!0});var l=I(e);t=T(l,"DIV",{class:!0}),I(t).forEach(b),i=W(l),s=T(l,"DIV",{class:!0});var a=I(s);r=z(a,"loading..."),a.forEach(b),l.forEach(b),this.h()},h(){S(t,"class","jse-loading-space svelte-15tyejh"),S(s,"class","jse-loading svelte-15tyejh"),S(e,"class","jse-contents svelte-15tyejh")},m(o,l){H(o,e,l),g(e,t),g(e,i),g(e,s),g(s,r)},p:Xe,i:Xe,o:Xe,d(o){o&&b(e)}}}function Sne(n){let e,t,i,s,r,o,l,a,c;const u=[wne,Ene],f=[];function h(d,m){return d[9]===void 0?0:1}return s=h(n),r=f[s]=u[s](n),{c(){e=k("label"),t=k("input"),i=U(),r.c(),o=et(),this.h()},l(d){e=T(d,"LABEL",{class:!0});var m=I(e);t=T(m,"INPUT",{type:!0,tabindex:!0,class:!0}),m.forEach(b),i=W(d),r.l(d),o=et(),this.h()},h(){S(t,"type","text"),t.readOnly="readonly",S(t,"tabindex","-1"),S(t,"class","jse-hidden-input svelte-15tyejh"),S(e,"class","jse-hidden-input-label svelte-15tyejh")},m(d,m){H(d,e,m),g(e,t),n[74](t),H(d,i,m),f[s].m(d,m),H(d,o,m),l=!0,a||(c=_e(t,"paste",n[34]),a=!0)},p(d,m){let p=s;s=h(d),s===p?f[s].p(d,m):(He(),G(f[p],1,1,()=>{f[p]=null}),qe(),r=f[s],r?r.p(d,m):(r=f[s]=u[s](d),r.c()),B(r,1),r.m(o.parentNode,o))},i(d){l||(B(r),l=!0)},o(d){G(r),l=!1},d(d){d&&b(e),n[74](null),d&&b(i),f[s].d(d),d&&b(o),a=!1,c()}}}function Ene(n){var d,m,p,_;let e,t,i,s,r,o,l,a,c,u;t=new bne({props:{show:n[18],resultCount:((m=(d=n[16])==null?void 0:d.items)==null?void 0:m.length)||0,activeIndex:((p=n[16])==null?void 0:p.activeIndex)||0,showReplace:n[19],searching:n[20],readOnly:n[0],onChange:n[26],onNext:n[27],onPrevious:n[28],onReplace:n[29],onReplaceAll:n[30],onClose:n[31]}}),r=new Bte({props:{value:n[9],path:n[25],expandedMap:n[15].expandedMap,enforceStringMap:n[15].enforceStringMap,visibleSectionsMap:n[15].visibleSectionsMap,validationErrorsMap:n[23],searchResultItemsMap:(_=n[16])==null?void 0:_.itemsMap,selection:n[15].selection,context:n[12],onDragSelectionStart:Hn}});let f=n[17]&&LC(n),h=n[22]&&UC(n);return c=new uR({props:{validationErrors:n[11],selectError:n[32]}}),{c(){e=k("div"),ke(t.$$.fragment),i=U(),s=k("div"),ke(r.$$.fragment),o=U(),f&&f.c(),l=U(),h&&h.c(),a=U(),ke(c.$$.fragment),this.h()},l(v){e=T(v,"DIV",{class:!0});var y=I(e);Oe(t.$$.fragment,y),y.forEach(b),i=W(v),s=T(v,"DIV",{class:!0,"data-jsoneditor-scrollable-contents":!0});var w=I(s);Oe(r.$$.fragment,w),w.forEach(b),o=W(v),f&&f.l(v),l=W(v),h&&h.l(v),a=W(v),Oe(c.$$.fragment,v),this.h()},h(){S(e,"class","jse-search-box-container svelte-15tyejh"),S(s,"class","jse-contents svelte-15tyejh"),S(s,"data-jsoneditor-scrollable-contents",!0)},m(v,y){H(v,e,y),Te(t,e,null),H(v,i,y),H(v,s,y),Te(r,s,null),n[75](s),H(v,o,y),f&&f.m(v,y),H(v,l,y),h&&h.m(v,y),H(v,a,y),Te(c,v,y),u=!0},p(v,y){var C,R,D,N;const w={};y[0]&262144&&(w.show=v[18]),y[0]&65536&&(w.resultCount=((R=(C=v[16])==null?void 0:C.items)==null?void 0:R.length)||0),y[0]&65536&&(w.activeIndex=((D=v[16])==null?void 0:D.activeIndex)||0),y[0]&524288&&(w.showReplace=v[19]),y[0]&1048576&&(w.searching=v[20]),y[0]&1&&(w.readOnly=v[0]),t.$set(w);const A={};y[0]&512&&(A.value=v[9]),y[0]&32768&&(A.expandedMap=v[15].expandedMap),y[0]&32768&&(A.enforceStringMap=v[15].enforceStringMap),y[0]&32768&&(A.visibleSectionsMap=v[15].visibleSectionsMap),y[0]&8388608&&(A.validationErrorsMap=v[23]),y[0]&65536&&(A.searchResultItemsMap=(N=v[16])==null?void 0:N.itemsMap),y[0]&32768&&(A.selection=v[15].selection),y[0]&4096&&(A.context=v[12]),r.$set(A),v[17]?f?(f.p(v,y),y[0]&131072&&B(f,1)):(f=LC(v),f.c(),B(f,1),f.m(l.parentNode,l)):f&&(He(),G(f,1,1,()=>{f=null}),qe()),v[22]?h?(h.p(v,y),y[0]&4194304&&B(h,1)):(h=UC(v),h.c(),B(h,1),h.m(a.parentNode,a)):h&&(He(),G(h,1,1,()=>{h=null}),qe());const E={};y[0]&2048&&(E.validationErrors=v[11]),c.$set(E)},i(v){u||(B(t.$$.fragment,v),B(r.$$.fragment,v),B(f),B(h),B(c.$$.fragment,v),u=!0)},o(v){G(t.$$.fragment,v),G(r.$$.fragment,v),G(f),G(h),G(c.$$.fragment,v),u=!1},d(v){v&&b(e),Ie(t),v&&b(i),v&&b(s),Ie(r),n[75](null),v&&b(o),f&&f.d(v),v&&b(l),h&&h.d(v),v&&b(a),Ie(c,v)}}}function wne(n){let e,t,i,s;const r=[Cne,Ane],o=[];function l(a,c){return a[10]===""||a[10]===void 0?0:1}return e=l(n),t=o[e]=r[e](n),{c(){t.c(),i=et()},l(a){t.l(a),i=et()},m(a,c){o[e].m(a,c),H(a,i,c),s=!0},p(a,c){let u=e;e=l(a),e===u?o[e].p(a,c):(He(),G(o[u],1,1,()=>{o[u]=null}),qe(),t=o[e],t?t.p(a,c):(t=o[e]=r[e](a),t.c()),B(t,1),t.m(i.parentNode,i))},i(a){s||(B(t),s=!0)},o(a){G(t),s=!1},d(a){o[e].d(a),a&&b(i)}}}function LC(n){let e,t;return e=new ra({props:{type:"info",message:`You pasted a JSON ${Array.isArray(n[17].contents)?"array":"object"} as text`,actions:[{icon:xv,text:"Paste as JSON instead",onMouseDown:n[45]},{text:"Leave as is",onClick:n[46]}]}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,s){const r={};s[0]&131072&&(r.message=`You pasted a JSON ${Array.isArray(i[17].contents)?"array":"object"} as text`),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function UC(n){let e,t;return e=new ra({props:{type:"success",message:"The loaded JSON document was invalid but is successfully repaired.",actions:n[0]?[]:[{icon:C1,text:"Ok",onClick:n[7]},{icon:dd,text:"Repair manually instead",onClick:n[5]}]}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,s){const r={};s[0]&33&&(r.actions=i[0]?[]:[{icon:C1,text:"Ok",onClick:i[7]},{icon:dd,text:"Repair manually instead",onClick:i[5]}]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function Ane(n){let e,t,i,s=Xd(n[10],G2)+"",r,o;return e=new ra({props:{type:"error",message:"The loaded JSON document is invalid and could not be repaired automatically.",actions:n[0]?[]:[{icon:dd,text:"Repair manually",onClick:n[5]}]}}),{c(){ke(e.$$.fragment),t=U(),i=k("div"),r=q(s),this.h()},l(l){Oe(e.$$.fragment,l),t=W(l),i=T(l,"DIV",{class:!0});var a=I(i);r=z(a,s),a.forEach(b),this.h()},h(){S(i,"class","jse-preview svelte-15tyejh")},m(l,a){Te(e,l,a),H(l,t,a),H(l,i,a),g(i,r),o=!0},p(l,a){const c={};a[0]&33&&(c.actions=l[0]?[]:[{icon:dd,text:"Repair manually",onClick:l[5]}]),e.$set(c),(!o||a[0]&1024)&&s!==(s=Xd(l[10],G2)+"")&&Le(r,s)},i(l){o||(B(e.$$.fragment,l),o=!0)},o(l){G(e.$$.fragment,l),o=!1},d(l){Ie(e,l),l&&b(t),l&&b(i)}}}function Cne(n){let e,t;return e=new qte({props:{readOnly:n[0]}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,s){const r={};s[0]&1&&(r.readOnly=i[0]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function kne(n){let e,t,i,s,r,o,l,a,c=n[1]&&MC(n),u=n[2]&&BC(n);const f=[Sne,yne],h=[];function d(m,p){return m[24]?1:0}return s=d(n),r=h[s]=f[s](n),{c(){e=k("div"),c&&c.c(),t=U(),u&&u.c(),i=U(),r.c(),this.h()},l(m){e=T(m,"DIV",{class:!0});var p=I(e);c&&c.l(p),t=W(p),u&&u.l(p),i=W(p),r.l(p),p.forEach(b),this.h()},h(){S(e,"class","jse-tree-mode svelte-15tyejh"),xe(e,"no-main-menu",!n[1])},m(m,p){H(m,e,p),c&&c.m(e,null),g(e,t),u&&u.m(e,null),g(e,i),h[s].m(e,null),n[76](e),o=!0,l||(a=[_e(_ne,"mousedown",n[48]),_e(e,"keydown",n[41]),_e(e,"mousedown",n[42]),_e(e,"contextmenu",n[43])],l=!0)},p(m,p){m[1]?c?(c.p(m,p),p[0]&2&&B(c,1)):(c=MC(m),c.c(),B(c,1),c.m(e,t)):c&&(He(),G(c,1,1,()=>{c=null}),qe()),m[2]?u?(u.p(m,p),p[0]&4&&B(u,1)):(u=BC(m),u.c(),B(u,1),u.m(e,i)):u&&(He(),G(u,1,1,()=>{u=null}),qe()),r.p(m,p),(!o||p[0]&2)&&xe(e,"no-main-menu",!m[1])},i(m){o||(B(c),B(u),B(r),o=!0)},o(m){G(c),G(u),G(r),o=!1},d(m){m&&b(e),c&&c.d(),u&&u.d(),h[s].d(),n[76](null),l=!1,an(a)}}}function ha(n){return n.length===0?!0:n.length===1&&n[0]==="0"}function dh(){return!0}function Tne(n,e,t){let i;const s=Is("jsoneditor:TreeMode"),r=typeof window>"u";s("isSSR:",r);const{open:o}=Bn("simple-modal"),l=hd(),a=hd(),{openAbsolutePopup:c,closeAbsolutePopup:u}=Bn("absolute-popup");let f,h,d,m=!1;const p=d$();let{readOnly:_}=e,{externalContent:v}=e,{mainMenuBar:y}=e,{navigationBar:w}=e,{escapeControlCharacters:A}=e,{escapeUnicodeCharacters:E}=e,{parser:C}=e,{validator:R}=e,{validationParser:D}=e,{pathParser:N}=e,{indentation:L}=e,{onError:F}=e,{onChange:P}=e,{onRenderValue:Q}=e,{onRequestRepair:O}=e,{onRenderMenu:K}=e,{onClassName:X}=e,{onFocus:J}=e,{onBlur:te}=e,{onSortModal:j}=e,{onTransformModal:x}=e,Z=!1;lR({onMount:Mi,onDestroy:br,getWindow:()=>Pu(d),hasFocus:()=>Z&&document.hasFocus()||E1(d),onFocus:()=>{m=!0,J&&J()},onBlur:()=>{m=!1,te&&te()}});let V,ce;const pe=[];let re;function ye(oe){s("updateSelection",oe);const Ve=typeof oe=="function"?oe(Y.selection):oe;En(Ve,Y.selection)||t(15,Y={...Y,selection:Ve})}let Ne=!1,Y=_A(),Ce,We,se;function Me(oe){return FS({json:oe},K2)?ha:dh}let he=!1,M=!1,ae=!1,de="";async function ee(oe){s("search text updated",oe),t(72,de=oe),await oi(),await be()}async function $(){t(16,Ce=Ce?q$(Ce):void 0),await be()}async function ne(){t(16,Ce=Ce?z$(Ce):void 0),await be()}async function me(oe,Ve){const Qe=Ce==null?void 0:Ce.activeItem;if(s("handleReplace",{replacementText:Ve,activeItem:Qe}),!Qe)return;const{operations:St,newSelection:ot}=G$(V,Y,Ve,Qe,C);zn(St,(Gt,Gn)=>({state:{...Gn,selection:ot}})),await oi(),await be()}async function le(oe,Ve){s("handleReplaceAll",{text:oe,replacementText:Ve});const{operations:Qe,newSelection:St}=K$(V,Y,oe,Ve,C);zn(Qe,(ot,Gt)=>({state:{...Gt,selection:St}})),await oi(),await be()}function ie(){t(18,he=!1),t(19,M=!1),ee(""),Rs()}async function be(){const oe=Ce==null?void 0:Ce.activeItem;if(s("focusActiveSearchResult",Ce),oe){const Ve=oe.path;t(15,Y={...rg(V,Y,Ve),selection:void 0}),await oi(),await gi(Ve)}}function we(){if(de===""){s("clearing search result"),Ce!==void 0&&t(16,Ce=void 0);return}t(20,ae=!0),setTimeout(()=>{s("searching...",de);const oe=_N(de,V,Y,n1);t(16,Ce=H$(V,oe,Ce)),t(20,ae=!1)})}function Ae(oe){s("select validation error",oe),ye(Yn(oe.path,!1)),gi(oe.path)}const ge=A$({onChange:oe=>{t(21,Be=oe)}});let Be=ge.getState();function ve(oe=()=>!0){s("expand");const Ve={...Y,expandedMap:{},visibleSectionsMap:{}};t(15,Y=Zr(V,Ve,pe,oe))}const Pe=iz(we,CU);let Se=!1,tt=[],Ke;const Ee=Ub(n$);function it(oe,Ve,Qe,St){Qc(()=>{let ot;try{ot=Ee(oe,Ve,Qe,St)}catch(Gt){ot=[{path:[],message:"Failed to validate: "+Gt.message,severity:Za.warning}]}En(ot,tt)||(s("validationErrors changed:",ot),t(11,tt=ot))},ot=>s(`validationErrors updated in ${ot} ms`))}function De(){return s("validate"),re?{parseError:re,isRepairable:!1}:(it(V,R,C,D),{validationErrors:tt})}function ze(){return V}function Re(){return Y}function ut(oe){oe.json!==void 0&&Bt(oe.json),oe.text!==void 0&&gt(oe.text)}function Bt(oe){if(oe===void 0)return;const Ve=!En(V,oe);if(s("update external json",{isChanged:Ve,currentlyText:V===void 0}),!Ve)return;const Qe={json:V,text:ce},St=Y,ot=V,Gt=ce,Gn=Se;t(9,V=oe),At(V),t(10,ce=void 0),t(22,Se=!1),jt(V),nn({previousJson:ot,previousState:St,previousText:Gt,previousTextIsRepaired:Gn}),Os(Qe,null)}function gt(oe){if(oe===void 0||v.json!==void 0)return;const Ve=oe===ce;if(s("update external text",{isChanged:Ve}),Ve)return;const Qe={json:V,text:ce},St=V,ot=Y,Gt=ce,Gn=Se;try{t(9,V=C.parse(oe)),At(V),t(10,ce=oe),t(22,Se=!1),re=void 0,jt(V)}catch(Kn){try{t(9,V=C.parse(Fo(oe))),At(V),t(10,ce=oe),t(22,Se=!0),re=void 0,jt(V)}catch{t(9,V=void 0),t(10,ce=v.text),t(22,Se=!1),re=Qv(ce,Kn.message||Kn.toString()),jt(V)}}nn({previousJson:St,previousState:ot,previousText:Gt,previousTextIsRepaired:Gn}),Os(Qe,null)}function At(oe){Ne||(Ne=!0,t(15,Y=Zr(oe,Y,pe,Me(oe))))}function jt(oe){Y.selection!==void 0&&(Y.selection&&Qo(oe,Y.selection.anchorPath)&&Qo(oe,Y.selection.focusPath)||(s("clearing selection: path does not exist anymore",Y.selection),t(15,Y={...Y,selection:void 0})))}function nn({previousJson:oe,previousState:Ve,previousText:Qe,previousTextIsRepaired:St}){oe===void 0&&Qe===void 0||(V!==void 0?oe!==void 0?ge.add({undo:{patch:[{op:"replace",path:"",value:oe}],state:Ao(Ve),json:void 0,text:Qe,textIsRepaired:St},redo:{patch:[{op:"replace",path:"",value:V}],state:Ao(Y),json:void 0,text:ce,textIsRepaired:Se}}):ge.add({undo:{patch:void 0,json:void 0,text:Qe,state:Ao(Ve),textIsRepaired:St},redo:{patch:void 0,json:V,state:Ao(Y),text:ce,textIsRepaired:Se}}):oe!==void 0&&ge.add({undo:{patch:void 0,json:oe,state:Ao(Ve),text:Qe,textIsRepaired:St},redo:{patch:void 0,json:void 0,text:ce,textIsRepaired:Se,state:Ao(Y)}}))}function Zt(){s("createDefaultSelection"),t(15,Y={...Y,selection:ui(V||{},[],[])})}function ft(oe,Ve){if(s("patch",oe,Ve),V===void 0)throw new Error("Cannot apply patch: no JSON");const Qe={json:V,text:ce},St=V,ot=Y,Gt=ce,Gn=Se,vi=j$(V,oe),Kn=_$(V,Y,oe),cl=oc(V,oe),Kb=M$(Kn.documentState,cl,!1);s("patch updatedSelection",cl);const ua=typeof Ve=="function"?Ve(Kn.json,Kb):void 0;t(9,V=ua&&ua.json!==void 0?ua.json:Kn.json);const Xb=ua&&ua.state!==void 0?ua.state:Kb;t(15,Y=Xb),t(10,ce=void 0),t(22,Se=!1),jt(V),ge.add({undo:{patch:vi,json:void 0,text:Gt,state:Ao(ot),textIsRepaired:Gn},redo:{patch:oe,json:void 0,state:Ao(Xb),text:ce,textIsRepaired:Se}});const Qb={json:V,previousJson:St,undo:vi,redo:oe};return Os(Qe,Qb),Qb}function un(oe){return yn(oe)||ci(oe)||_n(oe)}function tn(){_||!Y.selection||ye(qs(Y.selection.focusPath,!0))}function An(){_||!Y.selection||ye(Yn(Y.selection.focusPath,!0))}function vn(){if(_||!_n(Y.selection))return;const oe=Y.selection.focusPath,Ve=ht(oe),Qe=wt(V,oe),St=!kf(Qe,Y.enforceStringMap,Ve,C),ot=St?String(Qe):gf(String(Qe),C);s("handleToggleEnforceString",{enforceString:St,value:Qe,updatedValue:ot}),zn([{op:"replace",path:ht(oe),value:ot}],(Gt,Gn)=>({state:v$(Gn,Ve,St)}))}function Ln(){return Se&&V!==void 0&&Jr(V),{json:V,text:ce}}async function Cn(oe=!0){if(_||!un(Y.selection))return;const Ve=oe?L:null,Qe=EA(V,Y.selection,Ve,C);if(Qe==null)return;s("cut",{selection:Y.selection,clipboard:Qe,indent:oe}),await E0(Qe);const{operations:St,newSelection:ot}=TA(V,Y.selection);zn(St,(Gt,Gn)=>({state:{...Gn,selection:ot}}))}async function Wn(oe=!0){const Ve=oe?L:null,Qe=EA(V,Y.selection,Ve,C);Qe!=null&&(s("copy",{clipboard:Qe,indent:oe}),await E0(Qe))}function di(oe){if(oe.preventDefault(),_)return;const Ve=oe.clipboardData.getData("text/plain");try{yt(Ve)}catch{zt(Ve,St=>{s("repaired pasted text: ",St),yt(St)})}}function Ge(){o(tee,{},{...rd,styleWindow:{width:"450px"}},{onClose:()=>Rs()})}function yt(oe){if(V!==void 0){Y.selection||Zt();const Ve=kA(V,Y.selection,oe,C);s("paste",{clipboardText:oe,operations:Ve,selection:Y.selection}),zn(Ve,(Qe,St)=>{let ot=St;return Ve.filter(Gt=>($4(Gt)||tO(Gt))&&Ri(Gt.value)).forEach(Gt=>{const Gn=Fr(V,Gt.path);ot=Ii(Qe,ot,Gn)}),{state:ot}})}else s("paste text",{clipboardText:oe}),bs(oe,(Ve,Qe)=>{if(Ve)return{state:Ii(Ve,Qe,[])}})}function zt(oe,Ve){o(hee,{text:oe,onParse:Xv,onRepair:cz,onApply:Ve,onRenderMenu:K},{...rd,styleWindow:{width:"600px",height:"500px"},styleContent:{padding:0,height:"100%"}},{onClose:()=>Rs()})}function dn(){if(_||!Y.selection)return;const oe=ci(Y.selection)||_n(Y.selection)?ui(V,Y.selection.anchorPath,Y.selection.focusPath):Y.selection;if(ii(Y.selection.focusPath))s("remove root",{selection:Y.selection}),P({text:"",json:void 0},{text:ce,json:V},{contentErrors:De(),patchResult:null});else{const{operations:Ve,newSelection:Qe}=TA(V,oe);s("remove",{operations:Ve,selection:Y.selection,newSelection:Qe}),zn(Ve,(St,ot)=>({state:{...ot,selection:Qe}}))}}function mn(){if(_||!un(Y.selection)||ii(Y.selection.focusPath))return;s("duplicate",{selection:Y.selection});const oe=U$(V,bN(Y.selection));zn(oe)}function Qt(){if(_||!Y.selection||!yn(Y.selection)&&!_n(Y.selection)||ii(Y.selection.focusPath))return;s("extract",{selection:Y.selection});const oe=W$(V,Y.selection);zn(oe,(Ve,Qe)=>{if(Ri(Ve))return{state:Ii(Ve,Qe,[])}})}function nt(oe){if(_||!Y.selection)return;const Ve=F$(V,Y.selection,oe);if(V!==void 0){const Qe=C.stringify(Ve),St=kA(V,Y.selection,Qe,C);s("handleInsert",{type:oe,operations:St,newValue:Ve,data:Qe});const ot=Xt(St.filter(Gt=>Gt.op==="add"||Gt.op==="replace"));zn(St,(Gt,Gn)=>{if(ot){const vi=Fr(Gt,ot.path);if(Ri(Ve))return{state:{...Zr(Gt,Gn,vi,dh),selection:Ur(vi)}};if(Ve===""){const Kn=ii(vi)?null:wt(Gt,gn(vi));return s("test A",vi,Ur(vi)),{state:rg(Gt,{...Y,selection:ji(Kn)?qs(vi,!0):Yn(vi,!0)},vi)}}return}}),s("after patch"),ot&&Ve===""&&oi().then(()=>{setTimeout(()=>Ht("",!0))})}else{s("handleInsert",{type:oe,newValue:Ve});const Qe=[];Jr(Ve,(St,ot)=>({state:{...Ii(St,ot,Qe),selection:Ur(Qe)}}))}}function Dt(oe){ci(Y.selection)&&ye(Yn(Y.selection.focusPath,!1)),nt(oe)}function mi(oe){if(!(_||!Y.selection)){if(!Ph(Y.selection)){F(new Error(`Cannot convert current selection to ${oe}`));return}try{const Ve=Y.selection.anchorPath,Qe=wt(V,Ve),St=dz(Qe,oe,C);if(St===Qe)return;const ot=[{op:"replace",path:ht(Ve),value:St}];s("handleConvert",{selection:Y.selection,path:Ve,type:oe,operations:ot}),zn(ot,(Gt,Gn)=>({state:Ii(Gt,Gn,Y.selection.focusPath)}))}catch(Ve){F(Ve)}}}function Pt(){const oe=yA(V,Y,!1),Ve=gn(Y.selection.focusPath);!ii(oe.focusPath)&&En(Ve,gn(oe.focusPath))?ye(_o(oe.focusPath)):ye(Ur(Ve)),s("insert before",{selection:Y.selection,selectionBefore:oe,parentPath:Ve}),oi().then(al)}function sn(){const oe=yn(Y.selection)?Xt(Y.selection.paths):Y.selection.focusPath;s("insert after",oe),ye(_o(oe)),oi().then(al)}function Ht(oe,Ve){const Qe=Pu(d).document.activeElement;Qe.isContentEditable&&(Qe.textContent=Ve?oe:Qe.textContent+oe,eR(Qe))}async function Wi(oe){if(!(_||!Y.selection)){if(ci(Y.selection)){const Ve=!Y.selection.edit;ye({...Y.selection,edit:!0}),await oi(),setTimeout(()=>Ht(oe,Ve));return}if(oe==="{")nt("object");else if(oe==="[")nt("array");else if(_n(Y.selection)){if(!Ri(wt(V,Y.selection.focusPath))){const Ve=!Y.selection.edit;ye({...Y.selection,edit:!0}),await oi(),setTimeout(()=>Ht(oe,Ve))}}else await gs(oe)}}async function gs(oe){if(_||!Y.selection)return;nt("value");const Ve=!cu(Y.selection),Qe=Y.selection.focusPath,St=wt(V,gn(Qe));Array.isArray(St)||!St||_n(Y.selection)?ye(Yn(Qe,!0)):ye(qs(Qe,!0)),await oi(),setTimeout(()=>Ht(oe,Ve))}function Sn(){if(_||!ge.getState().canUndo)return;const oe=ge.undo();if(!oe)return;const Ve={json:V,text:ce};t(9,V=oe.undo.patch?Rl(V,oe.undo.patch):oe.undo.json),t(15,Y=oe.undo.state),t(10,ce=oe.undo.text),t(22,Se=oe.undo.textIsRepaired),s("undo",{item:oe,json:V,documentState:Y});const Qe={json:V,previousJson:Ve.json,redo:oe.undo.patch,undo:oe.redo.patch};Os(Ve,Qe),Rs(),Y.selection&&gi(Y.selection.focusPath,!1)}function pt(){if(_||!ge.getState().canRedo)return;const oe=ge.redo();if(!oe)return;const Ve={json:V,text:ce};t(9,V=oe.redo.patch?Rl(V,oe.redo.patch):oe.redo.json),t(15,Y=oe.redo.state),t(10,ce=oe.redo.text),t(22,Se=oe.redo.textIsRepaired),s("redo",{item:oe,json:V,documentState:Y});const Qe={json:V,previousJson:Ve.json,redo:oe.redo.patch,undo:oe.undo.patch};Os(Ve,Qe),Rs(),Y.selection&&gi(Y.selection.focusPath,!1)}function ue(oe){_||(Z=!0,j({id:l,json:V,selectedPath:oe,onSort:async Ve=>{s("onSort",oe,Ve),zn(Ve,(Qe,St)=>({state:{...Ii(Qe,St,oe),selection:Yn(oe,!1)}}))},onClose:()=>{Z=!1,Rs()}}))}function _t(){if(!Y.selection)return;const oe=SA(V,Y.selection);ue(oe)}function $t(){ue([])}function On({id:oe,selectedPath:Ve,onTransform:Qe,onClose:St}){Z=!0,x({id:oe||a,json:V,selectedPath:Ve,onTransform:Qe?ot=>{Qe({operations:ot,json:V,transformedJson:Rl(V,ot)})}:ot=>{s("onTransform",Ve,ot),zn(ot,(Gt,Gn)=>({state:{...Ii(Gt,Gn,Ve),selection:Yn(Ve,!1)}}))},onClose:()=>{Z=!1,Rs(),St&&St()}})}function pi(){if(!Y.selection)return;const oe=SA(V,Y.selection);On({selectedPath:oe})}function Ti(){On({selectedPath:[]})}async function gi(oe,Ve=!0){t(15,Y=rg(V,Y,gn(oe))),await oi();const Qe=vs(oe);if(Qe){s("scrollTo",{path:oe,elem:Qe,refContents:f});const St=f.getBoundingClientRect(),ot=Qe.getBoundingClientRect();if(!Ve&&ot.bottom>St.top&&ot.top<St.bottom)return;const Gt=-(St.height/4);p(Qe,{container:f,offset:Gt,duration:AU})}}function vs(oe){return f?f.querySelector(`div[data-path="${w1(oe)}"]`):null}function lr(oe){const Ve=vs(oe);if(!Ve||!f)return;const Qe=f.getBoundingClientRect(),St=Ve.getBoundingClientRect(),ot=20,Gt=Ri(wt(V,oe))?ot:St.height;St.top<Qe.top+ot?p(Ve,{container:f,offset:-ot,duration:0}):St.top+Gt>Qe.bottom-ot&&p(Ve,{container:f,offset:-(Qe.height-Gt-ot),duration:0})}function Os(oe,Ve){oe.json===void 0&&(oe==null?void 0:oe.text)===void 0||(ce!==void 0?P({text:ce,json:void 0},oe,{contentErrors:De(),patchResult:Ve}):V!==void 0&&P({text:void 0,json:V},oe,{contentErrors:De(),patchResult:Ve}))}function zn(oe,Ve){if(_)return;s("handlePatch",oe,Ve);const Qe=ft(oe,Ve);return t(17,se=void 0),Qe}function Jr(oe,Ve){const Qe=Y,St=V,ot=ce,Gt={json:V,text:ce},Gn=Se,vi=Zr(V,Y,pe,ha),Kn=typeof Ve=="function"?Ve(oe,vi):void 0;t(9,V=Kn&&Kn.json!==void 0?Kn.json:oe),t(15,Y=Kn&&Kn.state!==void 0?Kn.state:vi),t(10,ce=void 0),t(22,Se=!1),jt(V),nn({previousJson:St,previousState:Qe,previousText:ot,previousTextIsRepaired:Gn}),Os(Gt,null)}function bs(oe,Ve){s("handleChangeText");const Qe=Y,St=V,ot=ce,Gt={json:V,text:ce},Gn=Se;try{t(9,V=C.parse(oe)),t(15,Y=Zr(V,Y,pe,ha)),t(10,ce=void 0),t(22,Se=!1)}catch{try{t(9,V=C.parse(Fo(oe))),t(15,Y=Zr(V,Y,pe,ha)),t(10,ce=oe),t(22,Se=!0)}catch{t(9,V=void 0),t(15,Y=_A({json:V,expand:ha})),t(10,ce=oe),t(22,Se=!1)}}if(typeof Ve=="function"){const Kn=Ve(V,Y);t(9,V=Kn&&Kn.json?Kn.json:V),t(15,Y=Kn&&Kn.state?Kn.state:Y)}jt(V),nn({previousJson:St,previousState:Qe,previousText:ot,previousTextIsRepaired:Gn}),Os(Gt,null)}function Ii(oe,Ve,Qe){const St=wt(oe,Qe),Gt=!FS({json:St},K2)?dh:ha;return Zr(oe,Ve,Qe,Gt)}function ar(oe,Ve,Qe=!1){s("expand",{path:oe,expanded:Ve,recursive:Qe}),Ve?Qe?t(15,Y=Zr(V,Y,oe,dh)):t(15,Y=g$(Y,oe)):t(15,Y=cN(Y,oe)),Y.selection&&!Ve&&T$(Y.selection,oe)&&ye(void 0),setTimeout(()=>{E1(d)||Rs()})}function ol(){ar([],!0,!0)}function cr(){ar([],!1,!0)}function Ar(oe){s("openFind",{findAndReplace:oe}),t(18,he=!1),t(19,M=!1),oi().then(()=>{t(18,he=!0),t(19,M=oe)})}function ll(oe,Ve){s("handleExpandSection",oe,Ve);const Qe=ht(oe);t(15,Y=b$(V,Y,Qe,Ve))}function Ac(oe){s("pasted json as text",oe),t(17,se=oe)}function Rf(oe){const Ve=ia(oe).replace(/^Command\+/,"Ctrl+"),Qe=oe.shiftKey;if(s("keydown",{combo:Ve,key:oe.key}),Ve==="Ctrl+X"&&(oe.preventDefault(),Cn(!0)),Ve==="Ctrl+Shift+X"&&(oe.preventDefault(),Cn(!1)),Ve==="Ctrl+C"&&(oe.preventDefault(),Wn(!0)),Ve==="Ctrl+Shift+C"&&(oe.preventDefault(),Wn(!1)),Ve==="Ctrl+D"&&(oe.preventDefault(),mn()),(Ve==="Delete"||Ve==="Backspace")&&(oe.preventDefault(),dn()),Ve==="Insert"&&(oe.preventDefault(),nt("structure")),Ve==="Ctrl+A"&&(oe.preventDefault(),ye(B$())),Ve==="Ctrl+Q"&&al(oe),Ve==="Up"||Ve==="Shift+Up"){oe.preventDefault();const ot=Y.selection?yA(V,Y,Qe,!0)||Y.selection:fh(V,Y);ye(ot),lr(ot.focusPath)}if(Ve==="Down"||Ve==="Shift+Down"){oe.preventDefault();const ot=Y.selection?O$(V,Y,Qe,!0)||Y.selection:fh(V,Y);ye(ot),lr(ot.focusPath)}if(Ve==="Left"||Ve==="Shift+Left"){oe.preventDefault();const ot=Y.selection?D$(V,Y,Qe,!_)||Y.selection:fh(V,Y);ye(ot),lr(ot.focusPath)}if(Ve==="Right"||Ve==="Shift+Right"){oe.preventDefault();const ot=Y.selection?N$(V,Y,Qe,!_)||Y.selection:fh(V,Y);ye(ot),lr(ot.focusPath)}if(Ve==="Enter"&&Y.selection){if(!_&&yn(Y.selection)&&Y.selection.paths.length===1){const ot=Y.selection.focusPath,Gt=wt(V,gn(ot));Array.isArray(Gt)&&ye(Yn(ot,!1))}if(!_&&ci(Y.selection)&&(oe.preventDefault(),ye({...Y.selection,edit:!0})),_n(Y.selection)){oe.preventDefault();const ot=wt(V,Y.selection.focusPath);Ri(ot)?ar(Y.selection.focusPath,!0):_||ye({...Y.selection,edit:!0})}}if(Ve.replace(/^Shift\+/,"").replace(/^Numpad_/,"").length===1&&Y.selection){oe.preventDefault(),Wi(oe.key);return}if(Ve==="Enter"&&(gr(Y.selection)||Ci(Y.selection))){oe.preventDefault(),Wi("");return}if(Ve==="Ctrl+Enter"&&_n(Y.selection)){const ot=wt(V,Y.selection.focusPath);Mv(ot)&&window.open(String(ot),"_blank")}if(Ve==="Escape"&&Y.selection&&(oe.preventDefault(),ye(void 0)),Ve==="Ctrl+F"&&(oe.preventDefault(),Ar(!1)),Ve==="Ctrl+H"&&(oe.preventDefault(),Ar(!0)),Ve==="Ctrl+Z"){oe.preventDefault();const ot=document.activeElement;ot&&ot.blur&&ot.focus?(ot.blur(),setTimeout(()=>{Sn(),setTimeout(()=>ot.select())})):Sn()}if(Ve==="Ctrl+Shift+Z"){oe.preventDefault();const ot=document.activeElement;ot&&ot.blur&&ot.focus?(ot.blur(),setTimeout(()=>{pt(),setTimeout(()=>ot.select())})):pt()}}function Cc(oe){s("handleMouseDown",oe),setTimeout(()=>{setTimeout(()=>{!m&&!$O(oe.target,"BUTTON")&&(Rs(),!Y.selection&&V===void 0&&(ce===""||ce===void 0)&&Zt())})})}function wo({anchor:oe,left:Ve,top:Qe,width:St,height:ot,offsetTop:Gt,offsetLeft:Gn,showTip:vi}){const Kn={json:V,documentState:Y,parser:C,showTip:vi,onEditKey:tn,onEditValue:An,onToggleEnforceString:vn,onCut:Cn,onCopy:Wn,onPaste:Ge,onRemove:dn,onDuplicate:mn,onExtract:Qt,onInsertBefore:Pt,onInsert:Dt,onConvert:mi,onInsertAfter:sn,onSort:_t,onTransform:pi,onCloseContextMenu(){u(cl),Rs()}};Z=!0;const cl=c(kee,Kn,{left:Ve,top:Qe,offsetTop:Gt,offsetLeft:Gn,width:St,height:ot,anchor:oe,closeOnOuterClick:!0,onClose:()=>{Z=!1,Rs()}})}function al(oe){if(!(_||cu(Y.selection))){if(oe&&(oe.stopPropagation(),oe.preventDefault()),oe&&oe.type==="contextmenu"&&oe.target!==h)wo({left:oe.clientX,top:oe.clientY,width:qc,height:Hc,showTip:!1});else{const Ve=f==null?void 0:f.querySelector(".jse-context-menu-button.jse-selected");if(Ve)wo({anchor:Ve,offsetTop:2,width:qc,height:Hc,showTip:!1});else{const Qe=f==null?void 0:f.getBoundingClientRect();Qe&&wo({top:Qe.top+2,left:Qe.left+2,width:qc,height:Hc,showTip:!1})}}return!1}}function ca(oe){_||wo({anchor:kz(oe.target,"BUTTON"),offsetTop:0,width:qc,height:Hc,showTip:!0})}async function kc(){s("apply pasted json",se);const{path:oe,contents:Ve}=se;ye(Yn(oe,!1)),await oi();const Qe=[{op:"replace",path:ht(oe),value:Ve}];zn(Qe,(St,ot)=>({state:Ii(St,ot,oe)}))}function Tc(){s("clear pasted json"),t(17,se=void 0)}function TN(oe){ye(oe),Rs(),gi(oe.focusPath)}function Rs(){s("focus"),h&&(h.focus(),h.select())}function IN(oe){!bf(oe.target,Qe=>Qe===d)&&cu(Y.selection)&&(s("click outside the editor, stop edit mode"),ye(Qe=>ci(Qe)?{...Qe,edit:!1}:_n(Qe)?{...Qe,edit:!1}:Qe),m&&h&&(h.focus(),h.blur()),oi().then(()=>{setTimeout(()=>{h&&h.blur()})}))}function ON(oe){i&&i.onDrag(oe)}function RN(){i&&i.onDragEnd()}let cp;function DN(oe){he=oe,t(18,he)}function NN(oe){Ut[oe?"unshift":"push"](()=>{h=oe,t(13,h)})}function PN(oe){Ut[oe?"unshift":"push"](()=>{f=oe,t(8,f)})}function MN(oe){Ut[oe?"unshift":"push"](()=>{d=oe,t(14,d)})}return n.$$set=oe=>{"readOnly"in oe&&t(0,_=oe.readOnly),"externalContent"in oe&&t(49,v=oe.externalContent),"mainMenuBar"in oe&&t(1,y=oe.mainMenuBar),"navigationBar"in oe&&t(2,w=oe.navigationBar),"escapeControlCharacters"in oe&&t(50,A=oe.escapeControlCharacters),"escapeUnicodeCharacters"in oe&&t(51,E=oe.escapeUnicodeCharacters),"parser"in oe&&t(52,C=oe.parser),"validator"in oe&&t(53,R=oe.validator),"validationParser"in oe&&t(54,D=oe.validationParser),"pathParser"in oe&&t(3,N=oe.pathParser),"indentation"in oe&&t(55,L=oe.indentation),"onError"in oe&&t(4,F=oe.onError),"onChange"in oe&&t(56,P=oe.onChange),"onRenderValue"in oe&&t(57,Q=oe.onRenderValue),"onRequestRepair"in oe&&t(5,O=oe.onRequestRepair),"onRenderMenu"in oe&&t(6,K=oe.onRenderMenu),"onClassName"in oe&&t(58,X=oe.onClassName),"onFocus"in oe&&t(59,J=oe.onFocus),"onBlur"in oe&&t(60,te=oe.onBlur),"onSortModal"in oe&&t(61,j=oe.onSortModal),"onTransformModal"in oe&&t(62,x=oe.onTransformModal)},n.$$.update=()=>{n.$$.dirty[1]&1572864&&t(71,We=XO({escapeControlCharacters:A,escapeUnicodeCharacters:E})),n.$$.dirty[1]&262144&&ut(v),n.$$.dirty[0]&512|n.$$.dirty[2]&1024&&Pe(de,V),n.$$.dirty[0]&1536,n.$$.dirty[0]&512|n.$$.dirty[1]&14680064&&it(V,R,C,D),n.$$.dirty[0]&2048&&t(23,Ke=t$(tt)),n.$$.dirty[0]&256&&(i=f?f$(f):void 0),n.$$.dirty[0]&1|n.$$.dirty[1]&203423744|n.$$.dirty[2]&512&&t(12,cp={readOnly:_,parser:C,normalization:We,getJson:ze,getDocumentState:Re,findElement:vs,focus:Rs,onPatch:zn,onInsert:nt,onExpand:ar,onSelect:ye,onFind:Ar,onExpandSection:ll,onPasteJson:Ac,onRenderValue:Q,onContextMenu:wo,onClassName:X||(()=>{}),onDrag:ON,onDragEnd:RN}),n.$$.dirty[0]&4096&&s("context changed",cp)},[_,y,w,N,F,O,K,Ln,f,V,ce,tt,cp,h,d,Y,Ce,se,he,M,ae,Be,Se,Ke,r,pe,ee,$,ne,me,le,ie,Ae,Wn,di,Sn,pt,$t,Ti,ol,cr,Rf,Cc,al,ca,kc,Tc,TN,IN,v,A,E,C,R,D,L,P,Q,X,J,te,j,x,ve,De,ze,ft,On,gi,vs,Rs,We,de,DN,NN,PN,MN]}class Ine extends st{constructor(e){super(),rt(this,e,Tne,kne,cn,{readOnly:0,externalContent:49,mainMenuBar:1,navigationBar:2,escapeControlCharacters:50,escapeUnicodeCharacters:51,parser:52,validator:53,validationParser:54,pathParser:3,indentation:55,onError:4,onChange:56,onRenderValue:57,onRequestRepair:5,onRenderMenu:6,onClassName:58,onFocus:59,onBlur:60,onSortModal:61,onTransformModal:62,expand:63,validate:64,getJson:65,patch:66,acceptAutoRepair:7,openTransformModal:67,scrollTo:68,findElement:69,focus:70},null,[-1,-1,-1,-1,-1])}get expand(){return this.$$.ctx[63]}get validate(){return this.$$.ctx[64]}get getJson(){return this.$$.ctx[65]}get patch(){return this.$$.ctx[66]}get acceptAutoRepair(){return this.$$.ctx[7]}get openTransformModal(){return this.$$.ctx[67]}get scrollTo(){return this.$$.ctx[68]}get findElement(){return this.$$.ctx[69]}get focus(){return this.$$.ctx[70]}}const Gb=Ine,One=`
<p>
  Enter a JavaScript function to filter, sort, or transform the data.
</p>
`,Rne={id:"javascript",name:"JavaScript",description:One,createQuery:Dne,executeQuery:Nne};function Dne(n,e){const{filter:t,sort:i,projection:s}=e,r=[];if(t&&t.path&&t.relation&&t.value){const o=`item => item${ul(t.path)}`,l=C$(t.value),a=typeof l=="string"?`'${t.value}'`:XW(t.value)&&!Number.isSafeInteger(l)?`${t.value}n`:t.value;r.push(`  data = data.filter(${o} ${t.relation} ${a})
`)}if(i&&i.path&&i.direction&&(i.direction==="desc"?r.push(`  data = data.slice().sort((a, b) => {
    // sort descending
    const valueA = a${ul(i.path)}
    const valueB = b${ul(i.path)}
    return valueA > valueB ? -1 : valueA < valueB ? 1 : 0
  })
`):r.push(`  data = data.slice().sort((a, b) => {
    // sort ascending
    const valueA = a${ul(i.path)}
    const valueB = b${ul(i.path)}
    return valueA > valueB ? 1 : valueA < valueB ? -1 : 0
  })
`)),s&&s.paths)if(s.paths.length>1){const o=s.paths.map(l=>{const a=l[l.length-1]||"item",c=`item${ul(l)}`;return`    ${JSON.stringify(a)}: ${c}`});r.push(`  data = data.map(item => ({
${o.join(`,
`)}})
  )
`)}else{const o=`item${ul(s.paths[0])}`;r.push(`  data = data.map(item => ${o})
`)}return r.push(`  return data
`),`function query (data) {
${r.join("")}}`}function Nne(n,e){const i=new Function(`"use strict";

`+e+`

if (typeof query !== "function") {
  throw new Error("Cannot execute query: expecting a function named 'query' but is undefined")
}

return query;
`)()(n);return i!==void 0?i:null}function Pne(n){let e,t,i,s,r,o;return t=new Vt({props:{data:n[0]===!0?Qd:Yd}}),{c(){e=k("div"),ke(t.$$.fragment),this.h()},l(l){e=T(l,"DIV",{class:!0,title:!0});var a=I(e);Oe(t.$$.fragment,a),a.forEach(b),this.h()},h(){S(e,"class","jse-boolean-toggle svelte-zs5o25"),S(e,"title",i=n[1]?`Boolean value ${n[0]}`:"Click to toggle this boolean value")},m(l,a){H(l,e,a),Te(t,e,null),s=!0,r||(o=_e(e,"mousedown",n[2]),r=!0)},p(l,[a]){const c={};a&1&&(c.data=l[0]===!0?Qd:Yd),t.$set(c),(!s||a&3&&i!==(i=l[1]?`Boolean value ${l[0]}`:"Click to toggle this boolean value"))&&S(e,"title",i)},i(l){s||(B(t.$$.fragment,l),s=!0)},o(l){G(t.$$.fragment,l),s=!1},d(l){l&&b(e),Ie(t),r=!1,o()}}}function Mne(n,e,t){let{path:i}=e,{value:s}=e,{readOnly:r}=e,{onPatch:o}=e,{focus:l}=e;function a(c){c.stopPropagation(),!r&&(o([{op:"replace",path:ht(i),value:!s}]),setTimeout(l))}return n.$$set=c=>{"path"in c&&t(3,i=c.path),"value"in c&&t(0,s=c.value),"readOnly"in c&&t(1,r=c.readOnly),"onPatch"in c&&t(4,o=c.onPatch),"focus"in c&&t(5,l=c.focus)},[s,r,a,i,o,l]}class Bne extends st{constructor(e){super(),rt(this,e,Mne,Pne,cn,{path:3,value:0,readOnly:1,onPatch:4,focus:5})}}const Lne=Bne;function Une(n){let e;return{c(){e=k("div"),this.h()},l(t){e=T(t,"DIV",{class:!0}),I(e).forEach(b),this.h()},h(){S(e,"class","jse-color-picker-popup svelte-1las40j")},m(t,i){H(t,e,i),n[4](e)},p:Xe,i:Xe,o:Xe,d(t){t&&b(e),n[4](null)}}}function Wne(n,e,t){let{color:i}=e,{onChange:s}=e,{showOnTop:r}=e,o,l;Mi(async()=>{const c=(await O0(()=>import("../../chunks/vanilla-picker-edfc159c.js"),[],import.meta.url)).default;l=new c({parent:o,color:i,popup:r?"top":"bottom",onDone(u){const h=u.rgba[3]===1?u.hex.substring(0,7):u.hex;s(h)}}),l.show()}),br(()=>{l&&l.destroy()});function a(c){Ut[c?"unshift":"push"](()=>{o=c,t(0,o)})}return n.$$set=c=>{"color"in c&&t(1,i=c.color),"onChange"in c&&t(2,s=c.onChange),"showOnTop"in c&&t(3,r=c.showOnTop)},[o,i,s,r,a]}class Vne extends st{constructor(e){super(),rt(this,e,Wne,Une,kt,{color:1,onChange:2,showOnTop:3})}}const Fne=Vne;function jne(n){let e,t,i,s;return{c(){e=k("button"),this.h()},l(r){e=T(r,"BUTTON",{type:!0,class:!0,style:!0,title:!0}),I(e).forEach(b),this.h()},h(){S(e,"type","button"),S(e,"class","jse-color-picker-button svelte-fk1u9y"),lt(e,"background",n[2]),S(e,"title",t=n[1]?`Color ${n[0]}`:"Click to open a color picker")},m(r,o){H(r,e,o),i||(s=_e(e,"click",n[3]),i=!0)},p(r,[o]){o&4&&lt(e,"background",r[2]),o&3&&t!==(t=r[1]?`Color ${r[0]}`:"Click to open a color picker")&&S(e,"title",t)},i:Xe,o:Xe,d(r){r&&b(e),i=!1,s()}}}function Hne(n,e,t){let i;const{openAbsolutePopup:s}=Bn("absolute-popup");let{path:r}=e,{value:o}=e,{readOnly:l}=e,{onPatch:a}=e,{focus:c}=e;function u(d){a([{op:"replace",path:ht(r),value:d}]),f()}function f(){c()}function h(d){if(l)return;const m=300,p=d.target.getBoundingClientRect().top,v=Pu(d.target).innerHeight-p<m&&p>m;s(Fne,{color:o,onChange:u,showOnTop:v},{anchor:d.target,closeOnOuterClick:!0,onClose:f,offsetTop:18,offsetLeft:-8,height:m})}return n.$$set=d=>{"path"in d&&t(4,r=d.path),"value"in d&&t(0,o=d.value),"readOnly"in d&&t(1,l=d.readOnly),"onPatch"in d&&t(5,a=d.onPatch),"focus"in d&&t(6,c=d.focus)},n.$$.update=()=>{n.$$.dirty&1&&t(2,i=fO(o))},[o,l,i,h,r,a,c]}class qne extends st{constructor(e){super(),rt(this,e,Hne,jne,cn,{path:4,value:0,readOnly:1,onPatch:5,focus:6})}}const zne=qne;function C0(n,e){const t=hO(n,e);return lc("jse-value","jse-"+t,{"jse-url":Mv(n),"jse-empty":typeof n=="string"&&n.length===0})}function Gne(n){let e,t;return e=new EN({props:{value:n[1].escapeValue(n[0]),onChange:n[3],onCancel:n[4],onPaste:n[5],onFind:n[2],onValueClass:n[6]}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,[s]){const r={};s&3&&(r.value=i[1].escapeValue(i[0])),s&4&&(r.onFind=i[2]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function Kne(n,e,t){let{path:i}=e,{value:s}=e,{parser:r}=e,{normalization:o}=e,{enforceString:l}=e,{onPatch:a}=e,{onPasteJson:c}=e,{onSelect:u}=e,{onFind:f}=e,{focus:h}=e;function d(y){return l?y:gf(y,r)}function m(y,w){a([{op:"replace",path:ht(i),value:d(o.unescapeValue(y))}],(A,E)=>{const C=w===Ol.NEXT_INSIDE?R$(A,E,i)||E.selection:Yn(i,!1);return{state:{...E,selection:C}}}),w!==Ol.SELF&&h()}function p(){u(Yn(i,!1)),h()}function _(y){try{const w=r.parse(y);Ri(w)&&c({path:i,contents:w})}catch{}}function v(y){return C0(d(o.unescapeValue(y)),r)}return n.$$set=y=>{"path"in y&&t(7,i=y.path),"value"in y&&t(0,s=y.value),"parser"in y&&t(8,r=y.parser),"normalization"in y&&t(1,o=y.normalization),"enforceString"in y&&t(9,l=y.enforceString),"onPatch"in y&&t(10,a=y.onPatch),"onPasteJson"in y&&t(11,c=y.onPasteJson),"onSelect"in y&&t(12,u=y.onSelect),"onFind"in y&&t(2,f=y.onFind),"focus"in y&&t(13,h=y.focus)},[s,o,f,m,p,_,v,i,r,l,a,c,u,h]}class Xne extends st{constructor(e){super(),rt(this,e,Kne,Gne,cn,{path:7,value:0,parser:8,normalization:1,enforceString:9,onPatch:10,onPasteJson:11,onSelect:12,onFind:2,focus:13})}}const Qne=Xne;function Yne(n){let e=Gl(n[1].escapeValue(n[0]))+"",t;return{c(){t=q(e)},l(i){t=z(i,e)},m(i,s){H(i,t,s)},p(i,s){s&3&&e!==(e=Gl(i[1].escapeValue(i[0]))+"")&&Le(t,e)},i:Xe,o:Xe,d(i){i&&b(t)}}}function Jne(n){let e,t;return e=new SN({props:{text:n[1].escapeValue(n[0]),searchResultItems:n[3]}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,s){const r={};s&3&&(r.text=i[1].escapeValue(i[0])),s&8&&(r.searchResultItems=i[3]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function Zne(n){let e,t,i,s,r,o,l,a;const c=[Jne,Yne],u=[];function f(h,d){return h[3]?0:1}return t=f(n),i=u[t]=c[t](n),{c(){e=k("div"),i.c(),this.h()},l(h){e=T(h,"DIV",{"data-type":!0,class:!0,title:!0});var d=I(e);i.l(d),d.forEach(b),this.h()},h(){S(e,"data-type","selectable-value"),S(e,"class",s=Ze(C0(n[0],n[2]))+" svelte-wuf5jd"),S(e,"title",r=n[4]?"Ctrl+Click or Ctrl+Enter to open url in new window":null)},m(h,d){H(h,e,d),u[t].m(e,null),o=!0,l||(a=[_e(e,"click",n[5]),_e(e,"dblclick",n[6])],l=!0)},p(h,[d]){let m=t;t=f(h),t===m?u[t].p(h,d):(He(),G(u[m],1,1,()=>{u[m]=null}),qe(),i=u[t],i?i.p(h,d):(i=u[t]=c[t](h),i.c()),B(i,1),i.m(e,null)),(!o||d&5&&s!==(s=Ze(C0(h[0],h[2]))+" svelte-wuf5jd"))&&S(e,"class",s),(!o||d&16&&r!==(r=h[4]?"Ctrl+Click or Ctrl+Enter to open url in new window":null))&&S(e,"title",r)},i(h){o||(B(i),o=!0)},o(h){G(i),o=!1},d(h){h&&b(e),u[t].d(),l=!1,an(a)}}}function xne(n,e,t){let i,{path:s}=e,{value:r}=e,{readOnly:o}=e,{normalization:l}=e,{parser:a}=e,{onSelect:c}=e,{searchResultItems:u}=e;function f(d){typeof r=="string"&&i&&d.ctrlKey&&(d.preventDefault(),d.stopPropagation(),window.open(r,"_blank"))}function h(d){o||(d.preventDefault(),c(Yn(s,!0)))}return n.$$set=d=>{"path"in d&&t(7,s=d.path),"value"in d&&t(0,r=d.value),"readOnly"in d&&t(8,o=d.readOnly),"normalization"in d&&t(1,l=d.normalization),"parser"in d&&t(2,a=d.parser),"onSelect"in d&&t(9,c=d.onSelect),"searchResultItems"in d&&t(3,u=d.searchResultItems)},n.$$.update=()=>{n.$$.dirty&1&&t(4,i=Mv(r))},[r,l,a,u,i,f,h,s,o,c]}class $ne extends st{constructor(e){super(),rt(this,e,xne,Zne,cn,{path:7,value:0,readOnly:8,normalization:1,parser:2,onSelect:9,searchResultItems:3})}}const eie=$ne;function tie(n){let e,t,i,s,r,o;return t=new Vt({props:{data:_ee}}),{c(){e=k("div"),ke(t.$$.fragment),this.h()},l(l){e=T(l,"DIV",{class:!0});var a=I(e);Oe(t.$$.fragment,a),a.forEach(b),this.h()},h(){S(e,"class","jse-timestamp svelte-1u00zub")},m(l,a){H(l,e,a),Te(t,e,null),s=!0,r||(o=ac(i=jb.call(null,e,{text:n[0],...n[1]})),r=!0)},p(l,[a]){i&&Mn(i.update)&&a&1&&i.update.call(null,{text:l[0],...l[1]})},i(l){s||(B(t.$$.fragment,l),s=!0)},o(l){G(t.$$.fragment,l),s=!1},d(l){l&&b(e),Ie(t),r=!1,o()}}}function nie(n,e,t){let i;const s=Bn("absolute-popup");let{value:r}=e;return n.$$set=o=>{"value"in o&&t(2,r=o.value)},n.$$.update=()=>{n.$$.dirty&4&&t(0,i=`Time: ${new Date(r).toString()}`)},[i,s,r]}class iie extends st{constructor(e){super(),rt(this,e,nie,tie,cn,{value:2})}}const sie=iie;function rie({path:n,value:e,readOnly:t,enforceString:i,searchResultItems:s,isEditing:r,parser:o,normalization:l,onPatch:a,onPasteJson:c,onSelect:u,onFind:f,focus:h}){const d=[];return!r&&qW(e)&&d.push({component:Lne,props:{path:n,value:e,readOnly:t,onPatch:a,focus:h}}),!r&&zW(e)&&d.push({component:zne,props:{path:n,value:e,readOnly:t,onPatch:a,focus:h}}),r&&d.push({component:Qne,props:{path:n,value:e,enforceString:i,parser:o,normalization:l,onPatch:a,onPasteJson:c,onSelect:u,onFind:f,focus:h}}),r||d.push({component:eie,props:{path:n,value:e,readOnly:t,parser:o,normalization:l,searchResultItems:s,onSelect:u}}),!r&&d1(e)&&d.push({component:sie,props:{value:e}}),d}const fr={};function oie(n,e){const t=n.getBoundingClientRect(),i=e.getBoundingClientRect(),s={};return s.top=t.top<0,s.left=t.left<0,s.bottom=t.bottom+i.height>(window.innerHeight||document.documentElement.clientHeight),s.right=t.right>(window.innerWidth||document.documentElement.clientWidth),s.any=s.top||s.left||s.bottom||s.right,s}function lie(n){let e,t=n[0](n[1],n[2])+"",i;return{c(){e=k("div"),this.h()},l(s){e=T(s,"DIV",{class:!0});var r=I(e);r.forEach(b),this.h()},h(){S(e,"class",i="item "+n[3]+" svelte-3e0qet")},m(s,r){H(s,e,r),e.innerHTML=t},p(s,[r]){r&7&&t!==(t=s[0](s[1],s[2])+"")&&(e.innerHTML=t),r&8&&i!==(i="item "+s[3]+" svelte-3e0qet")&&S(e,"class",i)},i:Xe,o:Xe,d(s){s&&b(e)}}}function aie(n,e,t){let{isActive:i=!1}=e,{isFirst:s=!1}=e,{isHover:r=!1}=e,{isSelectable:o=!1}=e,{getOptionLabel:l=void 0}=e,{item:a=void 0}=e,{filterText:c=""}=e,u="";return n.$$set=f=>{"isActive"in f&&t(4,i=f.isActive),"isFirst"in f&&t(5,s=f.isFirst),"isHover"in f&&t(6,r=f.isHover),"isSelectable"in f&&t(7,o=f.isSelectable),"getOptionLabel"in f&&t(0,l=f.getOptionLabel),"item"in f&&t(1,a=f.item),"filterText"in f&&t(2,c=f.filterText)},n.$$.update=()=>{if(n.$$.dirty&242){const f=[];i&&f.push("active"),s&&f.push("first"),r&&f.push("hover"),a.isGroupHeader&&f.push("groupHeader"),a.isGroupItem&&f.push("groupItem"),o||f.push("notSelectable"),t(3,u=f.join(" "))}},[l,a,c,u,i,s,r,o]}class AN extends st{constructor(e){super(),rt(this,e,aie,lie,kt,{isActive:4,isFirst:5,isHover:6,isSelectable:7,getOptionLabel:0,item:1,filterText:2})}}function WC(n,e,t){const i=n.slice();return i[41]=e[t],i[42]=t,i}function cie(n){let e,t,i=n[1],s=[];for(let l=0;l<i.length;l+=1)s[l]=jC(WC(n,i,l));const r=l=>G(s[l],1,1,()=>{s[l]=null});let o=null;return i.length||(o=VC(n)),{c(){for(let l=0;l<s.length;l+=1)s[l].c();e=et(),o&&o.c()},l(l){for(let a=0;a<s.length;a+=1)s[a].l(l);e=et(),o&&o.l(l)},m(l,a){for(let c=0;c<s.length;c+=1)s[c].m(l,a);H(l,e,a),o&&o.m(l,a),t=!0},p(l,a){if(a[0]&114390){i=l[1];let c;for(c=0;c<i.length;c+=1){const u=WC(l,i,c);s[c]?(s[c].p(u,a),B(s[c],1)):(s[c]=jC(u),s[c].c(),B(s[c],1),s[c].m(e.parentNode,e))}for(He(),c=i.length;c<s.length;c+=1)r(c);qe(),!i.length&&o?o.p(l,a):i.length?o&&(o.d(1),o=null):(o=VC(l),o.c(),o.m(e.parentNode,e))}},i(l){if(!t){for(let a=0;a<i.length;a+=1)B(s[a]);t=!0}},o(l){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)G(s[a]);t=!1},d(l){Ft(s,l),l&&b(e),o&&o.d(l)}}}function uie(n){let e,t,i;var s=n[3];function r(o){return{props:{items:o[1],itemHeight:o[8],$$slots:{default:[die,({item:l,i:a})=>({41:l,42:a}),({item:l,i:a})=>[0,(l?1024:0)|(a?2048:0)]]},$$scope:{ctx:o}}}}return s&&(e=wn(s,r(n))),{c(){e&&ke(e.$$.fragment),t=et()},l(o){e&&Oe(e.$$.fragment,o),t=et()},m(o,l){e&&Te(e,o,l),H(o,t,l),i=!0},p(o,l){const a={};if(l[0]&2&&(a.items=o[1]),l[0]&256&&(a.itemHeight=o[8]),l[0]&9814|l[1]&11264&&(a.$$scope={dirty:l,ctx:o}),s!==(s=o[3])){if(e){He();const c=e;G(c.$$.fragment,1,0,()=>{Ie(c,1)}),qe()}s?(e=wn(s,r(o)),ke(e.$$.fragment),B(e.$$.fragment,1),Te(e,t.parentNode,t)):e=null}else s&&e.$set(a)},i(o){i||(e&&B(e.$$.fragment,o),i=!0)},o(o){e&&G(e.$$.fragment,o),i=!1},d(o){o&&b(t),e&&Ie(e,o)}}}function VC(n){let e,t=!n[11]&&FC(n);return{c(){t&&t.c(),e=et()},l(i){t&&t.l(i),e=et()},m(i,s){t&&t.m(i,s),H(i,e,s)},p(i,s){i[11]?t&&(t.d(1),t=null):t?t.p(i,s):(t=FC(i),t.c(),t.m(e.parentNode,e))},d(i){t&&t.d(i),i&&b(e)}}}function FC(n){let e,t;return{c(){e=k("div"),t=q(n[12]),this.h()},l(i){e=T(i,"DIV",{class:!0});var s=I(e);t=z(s,n[12]),s.forEach(b),this.h()},h(){S(e,"class","empty svelte-1uyqfml")},m(i,s){H(i,e,s),g(e,t)},p(i,s){s[0]&4096&&Le(t,i[12])},d(i){i&&b(e)}}}function fie(n){let e,t,i,s,r,o;var l=n[4];function a(h){return{props:{item:h[41],filterText:h[13],getOptionLabel:h[6],isFirst:k0(h[42]),isActive:Jd(h[41],h[9],h[10]),isHover:Zd(h[2],h[41],h[42],h[1]),isSelectable:Jl(h[41])}}}l&&(t=wn(l,a(n)));function c(){return n[29](n[42])}function u(){return n[30](n[42])}function f(...h){return n[31](n[41],n[42],...h)}return{c(){e=k("div"),t&&ke(t.$$.fragment),i=U(),this.h()},l(h){e=T(h,"DIV",{class:!0,tabindex:!0});var d=I(e);t&&Oe(t.$$.fragment,d),i=W(d),d.forEach(b),this.h()},h(){S(e,"class","listItem"),S(e,"tabindex","-1")},m(h,d){H(h,e,d),t&&Te(t,e,null),g(e,i),s=!0,r||(o=[_e(e,"mouseover",c),_e(e,"focus",u),_e(e,"click",f)],r=!0)},p(h,d){n=h;const m={};if(d[0]&2&&(m.item=n[41]),d[0]&8192&&(m.filterText=n[13]),d[0]&64&&(m.getOptionLabel=n[6]),d[0]&1538&&(m.isActive=Jd(n[41],n[9],n[10])),d[0]&6&&(m.isHover=Zd(n[2],n[41],n[42],n[1])),d[0]&2&&(m.isSelectable=Jl(n[41])),l!==(l=n[4])){if(t){He();const p=t;G(p.$$.fragment,1,0,()=>{Ie(p,1)}),qe()}l?(t=wn(l,a(n)),ke(t.$$.fragment),B(t.$$.fragment,1),Te(t,e,i)):t=null}else l&&t.$set(m)},i(h){s||(t&&B(t.$$.fragment,h),s=!0)},o(h){t&&G(t.$$.fragment,h),s=!1},d(h){h&&b(e),t&&Ie(t),r=!1,an(o)}}}function hie(n){let e,t=n[7](n[41])+"",i;return{c(){e=k("div"),i=q(t),this.h()},l(s){e=T(s,"DIV",{class:!0});var r=I(e);i=z(r,t),r.forEach(b),this.h()},h(){S(e,"class","listGroupTitle svelte-1uyqfml")},m(s,r){H(s,e,r),g(e,i)},p(s,r){r[0]&130&&t!==(t=s[7](s[41])+"")&&Le(i,t)},i:Xe,o:Xe,d(s){s&&b(e)}}}function jC(n){let e,t,i,s;const r=[hie,fie],o=[];function l(a,c){return a[41].isGroupHeader&&!a[41].isSelectable?0:1}return e=l(n),t=o[e]=r[e](n),{c(){t.c(),i=et()},l(a){t.l(a),i=et()},m(a,c){o[e].m(a,c),H(a,i,c),s=!0},p(a,c){let u=e;e=l(a),e===u?o[e].p(a,c):(He(),G(o[u],1,1,()=>{o[u]=null}),qe(),t=o[e],t?t.p(a,c):(t=o[e]=r[e](a),t.c()),B(t,1),t.m(i.parentNode,i))},i(a){s||(B(t),s=!0)},o(a){G(t),s=!1},d(a){o[e].d(a),a&&b(i)}}}function die(n){let e,t,i,s,r;var o=n[4];function l(f){return{props:{item:f[41],filterText:f[13],getOptionLabel:f[6],isFirst:k0(f[42]),isActive:Jd(f[41],f[9],f[10]),isHover:Zd(f[2],f[41],f[42],f[1]),isSelectable:Jl(f[41])}}}o&&(t=wn(o,l(n)));function a(){return n[26](n[42])}function c(){return n[27](n[42])}function u(...f){return n[28](n[41],n[42],...f)}return{c(){e=k("div"),t&&ke(t.$$.fragment),this.h()},l(f){e=T(f,"DIV",{class:!0});var h=I(e);t&&Oe(t.$$.fragment,h),h.forEach(b),this.h()},h(){S(e,"class","listItem")},m(f,h){H(f,e,h),t&&Te(t,e,null),i=!0,s||(r=[_e(e,"mouseover",a),_e(e,"focus",c),_e(e,"click",u)],s=!0)},p(f,h){n=f;const d={};if(h[1]&1024&&(d.item=n[41]),h[0]&8192&&(d.filterText=n[13]),h[0]&64&&(d.getOptionLabel=n[6]),h[1]&2048&&(d.isFirst=k0(n[42])),h[0]&1536|h[1]&1024&&(d.isActive=Jd(n[41],n[9],n[10])),h[0]&6|h[1]&3072&&(d.isHover=Zd(n[2],n[41],n[42],n[1])),h[1]&1024&&(d.isSelectable=Jl(n[41])),o!==(o=n[4])){if(t){He();const m=t;G(m.$$.fragment,1,0,()=>{Ie(m,1)}),qe()}o?(t=wn(o,l(n)),ke(t.$$.fragment),B(t.$$.fragment,1),Te(t,e,null)):t=null}else o&&t.$set(d)},i(f){i||(t&&B(t.$$.fragment,f),i=!0)},o(f){t&&G(t.$$.fragment,f),i=!1},d(f){f&&b(e),t&&Ie(t),s=!1,an(r)}}}function mie(n){let e,t,i,s,r,o;const l=[uie,cie],a=[];function c(u,f){return u[5]?0:1}return t=c(n),i=a[t]=l[t](n),{c(){e=k("div"),i.c(),this.h()},l(u){e=T(u,"DIV",{class:!0,style:!0});var f=I(e);i.l(f),f.forEach(b),this.h()},h(){S(e,"class","listContainer svelte-1uyqfml"),S(e,"style",n[14]),xe(e,"virtualList",n[5])},m(u,f){H(u,e,f),a[t].m(e,null),n[32](e),s=!0,r||(o=[_e(window,"keydown",n[17]),_e(window,"resize",n[18])],r=!0)},p(u,f){let h=t;t=c(u),t===h?a[t].p(u,f):(He(),G(a[h],1,1,()=>{a[h]=null}),qe(),i=a[t],i?i.p(u,f):(i=a[t]=l[t](u),i.c()),B(i,1),i.m(e,null)),(!s||f[0]&16384)&&S(e,"style",u[14]),(!s||f[0]&32)&&xe(e,"virtualList",u[5])},i(u){s||(B(i),s=!0)},o(u){G(i),s=!1},d(u){u&&b(e),a[t].d(),n[32](null),r=!1,an(o)}}}function Jd(n,e,t){return e&&e[t]===n[t]}function k0(n){return n===0}function Zd(n,e,t,i){return Jl(e)&&(n===t||i.length===1)}function Jl(n){return n.isGroupHeader&&n.isSelectable||n.selectable||!n.hasOwnProperty("selectable")}function pie(n,e,t){const i=Yu();let{container:s=void 0}=e,{VirtualList:r=null}=e,{Item:o=AN}=e,{isVirtualList:l=!1}=e,{items:a=[]}=e,{labelIdentifier:c="label"}=e,{getOptionLabel:u=(Y,Ce)=>{if(Y)return Y.isCreator?`Create "${Ce}"`:Y[c]}}=e,{getGroupHeaderLabel:f=null}=e,{itemHeight:h=40}=e,{hoverItemIndex:d=0}=e,{value:m=void 0}=e,{optionIdentifier:p="value"}=e,{hideEmptyState:_=!1}=e,{noOptionsMessage:v="No options"}=e,{isMulti:y=!1}=e,{activeItemIndex:w=0}=e,{filterText:A=""}=e,{parent:E=null}=e,{listPlacement:C=null}=e,{listAutoWidth:R=null}=e,{listOffset:D=5}=e,N=0,L=!1,F;Mi(()=>{if(a.length>0&&!y&&m){const Y=a.findIndex(Ce=>Ce[p]===m[p]);Y&&t(2,d=Y)}te("active"),s.addEventListener("scroll",()=>{clearTimeout(N),N=setTimeout(()=>{L=!1},100)},!1)}),oT(()=>{a||t(1,a=[]),a!==F&&a.length>0&&t(2,d=0),F=a});function P(Y){Y.isCreator||i("itemSelected",Y)}function Q(Y){L||t(2,d=Y)}function O(Y){const{item:Ce,i:We,event:se}=Y;if(se.stopPropagation(),m&&!y&&m[p]===Ce[p])return K();Ce.isCreator?i("itemCreated",A):Jl(Ce)&&(t(19,w=We),t(2,d=We),P(Ce))}function K(){i("closeList")}async function X(Y){if(l)return;let Ce=!0;for(;Ce;)Y>0&&d===a.length-1?t(2,d=0):Y<0&&d===0?t(2,d=a.length-1):t(2,d=d+Y),Ce=!Jl(a[d]);await oi(),te("hover")}function J(Y){switch(Y.key){case"Escape":Y.preventDefault(),K();break;case"ArrowDown":Y.preventDefault(),a.length&&X(1);break;case"ArrowUp":Y.preventDefault(),a.length&&X(-1);break;case"Enter":if(Y.preventDefault(),a.length===0)break;const Ce=a[d];if(m&&!y&&m[p]===Ce[p]){K();break}Ce.isCreator?i("itemCreated",A):(t(19,w=d),P(a[d]));break;case"Tab":if(Y.preventDefault(),a.length===0||m&&m[p]===a[d][p])return K();t(19,w=d),P(a[d]);break}}function te(Y){if(l||!s)return;let Ce;const We=s.querySelector(`.listItem .${Y}`);We&&(Ce=s.getBoundingClientRect().bottom-We.getBoundingClientRect().bottom),t(0,s.scrollTop-=Ce,s)}let j;function x(){const{height:Y,width:Ce}=E.getBoundingClientRect();t(14,j=""),t(14,j+=`min-width:${Ce}px;width:${R?"auto":"100%"};`),C==="top"||C==="auto"&&oie(E,s).bottom?t(14,j+=`bottom:${Y+D}px;`):t(14,j+=`top:${Y+D}px;`)}const Z=Y=>Q(Y),V=Y=>Q(Y),ce=(Y,Ce,We)=>O({item:Y,i:Ce,event:We}),pe=Y=>Q(Y),re=Y=>Q(Y),ye=(Y,Ce,We)=>O({item:Y,i:Ce,event:We});function Ne(Y){Ut[Y?"unshift":"push"](()=>{s=Y,t(0,s)})}return n.$$set=Y=>{"container"in Y&&t(0,s=Y.container),"VirtualList"in Y&&t(3,r=Y.VirtualList),"Item"in Y&&t(4,o=Y.Item),"isVirtualList"in Y&&t(5,l=Y.isVirtualList),"items"in Y&&t(1,a=Y.items),"labelIdentifier"in Y&&t(20,c=Y.labelIdentifier),"getOptionLabel"in Y&&t(6,u=Y.getOptionLabel),"getGroupHeaderLabel"in Y&&t(7,f=Y.getGroupHeaderLabel),"itemHeight"in Y&&t(8,h=Y.itemHeight),"hoverItemIndex"in Y&&t(2,d=Y.hoverItemIndex),"value"in Y&&t(9,m=Y.value),"optionIdentifier"in Y&&t(10,p=Y.optionIdentifier),"hideEmptyState"in Y&&t(11,_=Y.hideEmptyState),"noOptionsMessage"in Y&&t(12,v=Y.noOptionsMessage),"isMulti"in Y&&t(21,y=Y.isMulti),"activeItemIndex"in Y&&t(19,w=Y.activeItemIndex),"filterText"in Y&&t(13,A=Y.filterText),"parent"in Y&&t(22,E=Y.parent),"listPlacement"in Y&&t(23,C=Y.listPlacement),"listAutoWidth"in Y&&t(24,R=Y.listAutoWidth),"listOffset"in Y&&t(25,D=Y.listOffset)},n.$$.update=()=>{n.$$.dirty[0]&4194305&&E&&s&&x()},[s,a,d,r,o,l,u,f,h,m,p,_,v,A,j,Q,O,J,x,w,c,y,E,C,R,D,Z,V,ce,pe,re,ye,Ne]}class gie extends st{constructor(e){super(),rt(this,e,pie,mie,kt,{container:0,VirtualList:3,Item:4,isVirtualList:5,items:1,labelIdentifier:20,getOptionLabel:6,getGroupHeaderLabel:7,itemHeight:8,hoverItemIndex:2,value:9,optionIdentifier:10,hideEmptyState:11,noOptionsMessage:12,isMulti:21,activeItemIndex:19,filterText:13,parent:22,listPlacement:23,listAutoWidth:24,listOffset:25},null,[-1,-1])}}function vie(n){let e,t=n[0](n[1])+"";return{c(){e=k("div"),this.h()},l(i){e=T(i,"DIV",{class:!0});var s=I(e);s.forEach(b),this.h()},h(){S(e,"class","selection svelte-pu1q1n")},m(i,s){H(i,e,s),e.innerHTML=t},p(i,[s]){s&3&&t!==(t=i[0](i[1])+"")&&(e.innerHTML=t)},i:Xe,o:Xe,d(i){i&&b(e)}}}function bie(n,e,t){let{getSelectionLabel:i=void 0}=e,{item:s=void 0}=e;return n.$$set=r=>{"getSelectionLabel"in r&&t(0,i=r.getSelectionLabel),"item"in r&&t(1,s=r.item)},[i,s]}class _ie extends st{constructor(e){super(),rt(this,e,bie,vie,kt,{getSelectionLabel:0,item:1})}}function HC(n,e,t){const i=n.slice();return i[9]=e[t],i[11]=t,i}function qC(n){let e,t,i,s,r;function o(...l){return n[6](n[11],...l)}return{c(){e=k("div"),t=nr("svg"),i=nr("path"),this.h()},l(l){e=T(l,"DIV",{class:!0});var a=I(e);t=ir(a,"svg",{width:!0,height:!0,viewBox:!0,focusable:!0,"aria-hidden":!0,role:!0,class:!0});var c=I(t);i=ir(c,"path",{d:!0}),I(i).forEach(b),c.forEach(b),a.forEach(b),this.h()},h(){S(i,"d","M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124 l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z"),S(t,"width","100%"),S(t,"height","100%"),S(t,"viewBox","-2 -2 50 50"),S(t,"focusable","false"),S(t,"aria-hidden","true"),S(t,"role","presentation"),S(t,"class","svelte-liu9pa"),S(e,"class","multiSelectItem_clear svelte-liu9pa")},m(l,a){H(l,e,a),g(e,t),g(t,i),s||(r=_e(e,"click",o),s=!0)},p(l,a){n=l},d(l){l&&b(e),s=!1,r()}}}function zC(n){let e,t,i=n[4](n[9])+"",s,r,o,l,a,c=!n[2]&&!n[3]&&qC(n);function u(...f){return n[7](n[11],...f)}return{c(){e=k("div"),t=k("div"),s=U(),c&&c.c(),r=U(),this.h()},l(f){e=T(f,"DIV",{class:!0});var h=I(e);t=T(h,"DIV",{class:!0});var d=I(t);d.forEach(b),s=W(h),c&&c.l(h),r=W(h),h.forEach(b),this.h()},h(){S(t,"class","multiSelectItem_label svelte-liu9pa"),S(e,"class",o="multiSelectItem "+(n[1]===n[11]?"active":"")+" "+(n[2]?"disabled":"")+" svelte-liu9pa")},m(f,h){H(f,e,h),g(e,t),t.innerHTML=i,g(e,s),c&&c.m(e,null),g(e,r),l||(a=_e(e,"click",u),l=!0)},p(f,h){n=f,h&17&&i!==(i=n[4](n[9])+"")&&(t.innerHTML=i),!n[2]&&!n[3]?c?c.p(n,h):(c=qC(n),c.c(),c.m(e,r)):c&&(c.d(1),c=null),h&6&&o!==(o="multiSelectItem "+(n[1]===n[11]?"active":"")+" "+(n[2]?"disabled":"")+" svelte-liu9pa")&&S(e,"class",o)},d(f){f&&b(e),c&&c.d(),l=!1,a()}}}function yie(n){let e,t=n[0],i=[];for(let s=0;s<t.length;s+=1)i[s]=zC(HC(n,t,s));return{c(){for(let s=0;s<i.length;s+=1)i[s].c();e=et()},l(s){for(let r=0;r<i.length;r+=1)i[r].l(s);e=et()},m(s,r){for(let o=0;o<i.length;o+=1)i[o].m(s,r);H(s,e,r)},p(s,[r]){if(r&63){t=s[0];let o;for(o=0;o<t.length;o+=1){const l=HC(s,t,o);i[o]?i[o].p(l,r):(i[o]=zC(l),i[o].c(),i[o].m(e.parentNode,e))}for(;o<i.length;o+=1)i[o].d(1);i.length=t.length}},i:Xe,o:Xe,d(s){Ft(i,s),s&&b(e)}}}function Sie(n,e,t){const i=Yu();let{value:s=[]}=e,{activeValue:r=void 0}=e,{isDisabled:o=!1}=e,{multiFullItemClearable:l=!1}=e,{getSelectionLabel:a=void 0}=e;function c(h,d){d.stopPropagation(),i("multiItemClear",{i:h})}const u=(h,d)=>c(h,d),f=(h,d)=>l?c(h,d):{};return n.$$set=h=>{"value"in h&&t(0,s=h.value),"activeValue"in h&&t(1,r=h.activeValue),"isDisabled"in h&&t(2,o=h.isDisabled),"multiFullItemClearable"in h&&t(3,l=h.multiFullItemClearable),"getSelectionLabel"in h&&t(4,a=h.getSelectionLabel)},[s,r,o,l,a,c,u,f]}class Eie extends st{constructor(e){super(),rt(this,e,Sie,yie,kt,{value:0,activeValue:1,isDisabled:2,multiFullItemClearable:3,getSelectionLabel:4})}}function GC(n,e,t){const i=n.slice();return i[23]=e[t],i}const wie=n=>({item:n&32,i:n&32,hoverItemIndex:n&2}),KC=n=>({item:n[23].data,i:n[23].index,hoverItemIndex:n[1]});function Aie(n){let e;return{c(){e=q("Missing template")},l(t){e=z(t,"Missing template")},m(t,i){H(t,e,i)},d(t){t&&b(e)}}}function XC(n,e){let t,i,s;const r=e[15].default,o=ls(r,e,e[14],KC),l=o||Aie();return{key:n,first:null,c(){t=k("svelte-virtual-list-row"),l&&l.c(),i=U(),this.h()},l(a){t=T(a,"SVELTE-VIRTUAL-LIST-ROW",{class:!0});var c=I(t);l&&l.l(c),i=W(c),c.forEach(b),this.h()},h(){mg(t,"class","svelte-g2cagw"),this.first=t},m(a,c){H(a,t,c),l&&l.m(t,null),g(t,i),s=!0},p(a,c){e=a,o&&o.p&&(!s||c&16418)&&as(o,r,e,e[14],s?us(r,e[14],c,wie):cs(e[14]),KC)},i(a){s||(B(l,a),s=!0)},o(a){G(l,a),s=!1},d(a){a&&b(t),l&&l.d(a)}}}function Cie(n){let e,t,i=[],s=new Map,r,o,l,a,c=n[5];const u=f=>f[23].index;for(let f=0;f<c.length;f+=1){let h=GC(n,c,f),d=u(h);s.set(d,i[f]=XC(d,h))}return{c(){e=k("svelte-virtual-list-viewport"),t=k("svelte-virtual-list-contents");for(let f=0;f<i.length;f+=1)i[f].c();this.h()},l(f){e=T(f,"SVELTE-VIRTUAL-LIST-VIEWPORT",{style:!0,class:!0});var h=I(e);t=T(h,"SVELTE-VIRTUAL-LIST-CONTENTS",{style:!0,class:!0});var d=I(t);for(let m=0;m<i.length;m+=1)i[m].l(d);d.forEach(b),h.forEach(b),this.h()},h(){lt(t,"padding-top",n[6]+"px"),lt(t,"padding-bottom",n[7]+"px"),mg(t,"class","svelte-g2cagw"),lt(e,"height",n[0]),mg(e,"class","svelte-g2cagw"),uu(()=>n[18].call(e))},m(f,h){H(f,e,h),g(e,t);for(let d=0;d<i.length;d+=1)i[d].m(t,null);n[16](t),n[17](e),r=UN(e,n[18].bind(e)),o=!0,l||(a=_e(e,"scroll",n[8]),l=!0)},p(f,[h]){h&16418&&(c=f[5],He(),i=Zu(i,h,u,1,f,c,s,t,$d,XC,null,GC),qe()),(!o||h&64)&&lt(t,"padding-top",f[6]+"px"),(!o||h&128)&&lt(t,"padding-bottom",f[7]+"px"),(!o||h&1)&&lt(e,"height",f[0])},i(f){if(!o){for(let h=0;h<c.length;h+=1)B(i[h]);o=!0}},o(f){for(let h=0;h<i.length;h+=1)G(i[h]);o=!1},d(f){f&&b(e);for(let h=0;h<i.length;h+=1)i[h].d();n[16](null),n[17](null),r(),l=!1,a()}}}function kie(n,e,t){let{$$slots:i={},$$scope:s}=e,{items:r=void 0}=e,{height:o="100%"}=e,{itemHeight:l=40}=e,{hoverItemIndex:a=0}=e,{start:c=0}=e,{end:u=0}=e,f=[],h,d,m,p=0,_,v,y=0,w=0,A;async function E(L,F,P){const{scrollTop:Q}=d;await oi();let O=y-Q,K=c;for(;O<F&&K<L.length;){let J=h[K-c];J||(t(10,u=K+1),await oi(),J=h[K-c]);const te=f[K]=P||J.offsetHeight;O+=te,K+=1}t(10,u=K);const X=L.length-u;A=(y+O)/u,t(7,w=X*A),f.length=L.length,d&&t(3,d.scrollTop=0,d)}async function C(){const{scrollTop:L}=d,F=c;for(let K=0;K<h.length;K+=1)f[c+K]=l||h[K].offsetHeight;let P=0,Q=0;for(;P<r.length;){const K=f[P]||A;if(Q+K>L){t(9,c=P),t(6,y=Q);break}Q+=K,P+=1}for(;P<r.length&&(Q+=f[P]||A,P+=1,!(Q>L+p)););t(10,u=P);const O=r.length-u;for(A=Q/u;P<r.length;)f[P++]=A;if(t(7,w=O*A),c<F){await oi();let K=0,X=0;for(let te=c;te<F;te+=1)h[te-c]&&(K+=f[te],X+=l||h[te-c].offsetHeight);const J=X-K;d.scrollTo(0,L+J)}}Mi(()=>{h=m.getElementsByTagName("svelte-virtual-list-row"),t(13,v=!0)});function R(L){Ut[L?"unshift":"push"](()=>{m=L,t(4,m)})}function D(L){Ut[L?"unshift":"push"](()=>{d=L,t(3,d)})}function N(){p=this.offsetHeight,t(2,p)}return n.$$set=L=>{"items"in L&&t(11,r=L.items),"height"in L&&t(0,o=L.height),"itemHeight"in L&&t(12,l=L.itemHeight),"hoverItemIndex"in L&&t(1,a=L.hoverItemIndex),"start"in L&&t(9,c=L.start),"end"in L&&t(10,u=L.end),"$$scope"in L&&t(14,s=L.$$scope)},n.$$.update=()=>{n.$$.dirty&3584&&t(5,_=r.slice(c,u).map((L,F)=>({index:F+c,data:L}))),n.$$.dirty&14340&&v&&E(r,p,l)},[o,a,p,d,m,_,y,w,C,c,u,r,l,v,s,i,R,D,N]}class Tie extends st{constructor(e){super(),rt(this,e,kie,Cie,kt,{items:11,height:0,itemHeight:12,hoverItemIndex:1,start:9,end:10})}}function Iie(n){let e,t;return{c(){e=nr("svg"),t=nr("path"),this.h()},l(i){e=ir(i,"svg",{width:!0,height:!0,viewBox:!0,focusable:!0,"aria-hidden":!0,role:!0});var s=I(e);t=ir(s,"path",{fill:!0,d:!0}),I(t).forEach(b),s.forEach(b),this.h()},h(){S(t,"fill","currentColor"),S(t,"d",`M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124
    l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z`),S(e,"width","100%"),S(e,"height","100%"),S(e,"viewBox","-2 -2 50 50"),S(e,"focusable","false"),S(e,"aria-hidden","true"),S(e,"role","presentation")},m(i,s){H(i,e,s),g(e,t)},p:Xe,i:Xe,o:Xe,d(i){i&&b(e)}}}class Oie extends st{constructor(e){super(),rt(this,e,null,Iie,kt,{})}}function Rie(n,e,t){let i;return function(){let r=this,o=arguments,l=function(){i=null,t||n.apply(r,o)},a=t&&!i;clearTimeout(i),i=setTimeout(l,e),a&&n.apply(r,o)}}function QC(n,e,t){const i=n.slice();return i[103]=e[t],i}function YC(n){let e,t,i,s,r;return{c(){e=k("span"),t=q(n[33]),i=U(),s=k("span"),r=q(n[32]),this.h()},l(o){e=T(o,"SPAN",{id:!0});var l=I(e);t=z(l,n[33]),l.forEach(b),i=W(o),s=T(o,"SPAN",{id:!0});var a=I(s);r=z(a,n[32]),a.forEach(b),this.h()},h(){S(e,"id","aria-selection"),S(s,"id","aria-context")},m(o,l){H(o,e,l),g(e,t),H(o,i,l),H(o,s,l),g(s,r)},p(o,l){l[1]&4&&Le(t,o[33]),l[1]&2&&Le(r,o[32])},d(o){o&&b(e),o&&b(i),o&&b(s)}}}function JC(n){let e,t,i;const s=[n[18]];var r=n[17];function o(l){let a={};for(let c=0;c<s.length;c+=1)a=Xr(a,s[c]);return{props:a}}return r&&(e=wn(r,o())),{c(){e&&ke(e.$$.fragment),t=et()},l(l){e&&Oe(e.$$.fragment,l),t=et()},m(l,a){e&&Te(e,l,a),H(l,t,a),i=!0},p(l,a){const c=a[0]&262144?Qr(s,[Zl(l[18])]):{};if(r!==(r=l[17])){if(e){He();const u=e;G(u.$$.fragment,1,0,()=>{Ie(u,1)}),qe()}r?(e=wn(r,o()),ke(e.$$.fragment),B(e.$$.fragment,1),Te(e,t.parentNode,t)):e=null}else r&&e.$set(c)},i(l){i||(e&&B(e.$$.fragment,l),i=!0)},o(l){e&&G(e.$$.fragment,l),i=!1},d(l){l&&b(t),e&&Ie(e,l)}}}function ZC(n){let e,t,i;var s=n[26];function r(o){return{props:{value:o[2],getSelectionLabel:o[12],activeValue:o[30],isDisabled:o[9],multiFullItemClearable:o[8]}}}return s&&(e=wn(s,r(n)),e.$on("multiItemClear",n[38]),e.$on("focus",n[40])),{c(){e&&ke(e.$$.fragment),t=et()},l(o){e&&Oe(e.$$.fragment,o),t=et()},m(o,l){e&&Te(e,o,l),H(o,t,l),i=!0},p(o,l){const a={};if(l[0]&4&&(a.value=o[2]),l[0]&4096&&(a.getSelectionLabel=o[12]),l[0]&1073741824&&(a.activeValue=o[30]),l[0]&512&&(a.isDisabled=o[9]),l[0]&256&&(a.multiFullItemClearable=o[8]),s!==(s=o[26])){if(e){He();const c=e;G(c.$$.fragment,1,0,()=>{Ie(c,1)}),qe()}s?(e=wn(s,r(o)),e.$on("multiItemClear",o[38]),e.$on("focus",o[40]),ke(e.$$.fragment),B(e.$$.fragment,1),Te(e,t.parentNode,t)):e=null}else s&&e.$set(a)},i(o){i||(e&&B(e.$$.fragment,o),i=!0)},o(o){e&&G(e.$$.fragment,o),i=!1},d(o){o&&b(t),e&&Ie(e,o)}}}function xC(n){let e,t,i,s,r;var o=n[25];function l(a){return{props:{item:a[2],getSelectionLabel:a[12]}}}return o&&(t=wn(o,l(n))),{c(){e=k("div"),t&&ke(t.$$.fragment),this.h()},l(a){e=T(a,"DIV",{class:!0});var c=I(e);t&&Oe(t.$$.fragment,c),c.forEach(b),this.h()},h(){S(e,"class","selectedItem svelte-17l1npl")},m(a,c){H(a,e,c),t&&Te(t,e,null),i=!0,s||(r=_e(e,"focus",n[40]),s=!0)},p(a,c){const u={};if(c[0]&4&&(u.item=a[2]),c[0]&4096&&(u.getSelectionLabel=a[12]),o!==(o=a[25])){if(t){He();const f=t;G(f.$$.fragment,1,0,()=>{Ie(f,1)}),qe()}o?(t=wn(o,l(a)),ke(t.$$.fragment),B(t.$$.fragment,1),Te(t,e,null)):t=null}else o&&t.$set(u)},i(a){i||(t&&B(t.$$.fragment,a),i=!0)},o(a){t&&G(t.$$.fragment,a),i=!1},d(a){a&&b(e),t&&Ie(t),s=!1,r()}}}function $C(n){let e,t,i,s,r;var o=n[23];function l(a){return{}}return o&&(t=wn(o,l())),{c(){e=k("div"),t&&ke(t.$$.fragment),this.h()},l(a){e=T(a,"DIV",{class:!0,"aria-hidden":!0});var c=I(e);t&&Oe(t.$$.fragment,c),c.forEach(b),this.h()},h(){S(e,"class","clearSelect svelte-17l1npl"),S(e,"aria-hidden","true")},m(a,c){H(a,e,c),t&&Te(t,e,null),i=!0,s||(r=_e(e,"click",WN(n[27])),s=!0)},p(a,c){if(o!==(o=a[23])){if(t){He();const u=t;G(u.$$.fragment,1,0,()=>{Ie(u,1)}),qe()}o?(t=wn(o,l()),ke(t.$$.fragment),B(t.$$.fragment,1),Te(t,e,null)):t=null}},i(a){i||(t&&B(t.$$.fragment,a),i=!0)},o(a){t&&G(t.$$.fragment,a),i=!1},d(a){a&&b(e),t&&Ie(t),s=!1,r()}}}function ek(n){let e;function t(r,o){return r[22]?Nie:Die}let i=t(n),s=i(n);return{c(){e=k("div"),s.c(),this.h()},l(r){e=T(r,"DIV",{class:!0,"aria-hidden":!0});var o=I(e);s.l(o),o.forEach(b),this.h()},h(){S(e,"class","indicator svelte-17l1npl"),S(e,"aria-hidden","true")},m(r,o){H(r,e,o),s.m(e,null)},p(r,o){i===(i=t(r))&&s?s.p(r,o):(s.d(1),s=i(r),s&&(s.c(),s.m(e,null)))},d(r){r&&b(e),s.d()}}}function Die(n){let e,t;return{c(){e=nr("svg"),t=nr("path"),this.h()},l(i){e=ir(i,"svg",{width:!0,height:!0,viewBox:!0,focusable:!0,"aria-hidden":!0,class:!0});var s=I(e);t=ir(s,"path",{d:!0}),I(t).forEach(b),s.forEach(b),this.h()},h(){S(t,"d",`M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747
          3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0
          1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502
          0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0
          0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z`),S(e,"width","100%"),S(e,"height","100%"),S(e,"viewBox","0 0 20 20"),S(e,"focusable","false"),S(e,"aria-hidden","true"),S(e,"class","svelte-17l1npl")},m(i,s){H(i,e,s),g(e,t)},p:Xe,d(i){i&&b(e)}}}function Nie(n){let e,t;return{c(){e=new VN(!1),t=et(),this.h()},l(i){e=FN(i,!1),t=et(),this.h()},h(){e.a=t},m(i,s){e.m(n[22],i,s),H(i,t,s)},p(i,s){s[0]&4194304&&e.p(i[22])},d(i){i&&b(t),i&&e.d()}}}function tk(n){let e,t,i;return{c(){e=k("div"),t=nr("svg"),i=nr("circle"),this.h()},l(s){e=T(s,"DIV",{class:!0});var r=I(e);t=ir(r,"svg",{class:!0,viewBox:!0});var o=I(t);i=ir(o,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-miterlimit":!0}),I(i).forEach(b),o.forEach(b),r.forEach(b),this.h()},h(){S(i,"class","spinner_path svelte-17l1npl"),S(i,"cx","50"),S(i,"cy","50"),S(i,"r","20"),S(i,"fill","none"),S(i,"stroke","currentColor"),S(i,"stroke-width","5"),S(i,"stroke-miterlimit","10"),S(t,"class","spinner_icon svelte-17l1npl"),S(t,"viewBox","25 25 50 50"),S(e,"class","spinner svelte-17l1npl")},m(s,r){H(s,e,r),g(e,t),g(t,i)},d(s){s&&b(e)}}}function nk(n){let e,t,i,s;const r=[n[34]];function o(c){n[84](c)}var l=n[24];function a(c){let u={};for(let f=0;f<r.length;f+=1)u=Xr(u,r[f]);return c[28]!==void 0&&(u.hoverItemIndex=c[28]),{props:u}}return l&&(e=wn(l,a(n)),Ut.push(()=>Ws(e,"hoverItemIndex",o)),e.$on("itemSelected",n[43]),e.$on("itemCreated",n[44]),e.$on("closeList",n[45])),{c(){e&&ke(e.$$.fragment),i=et()},l(c){e&&Oe(e.$$.fragment,c),i=et()},m(c,u){e&&Te(e,c,u),H(c,i,u),s=!0},p(c,u){const f=u[1]&8?Qr(r,[Zl(c[34])]):{};if(!t&&u[0]&268435456&&(t=!0,f.hoverItemIndex=c[28],Js(()=>t=!1)),l!==(l=c[24])){if(e){He();const h=e;G(h.$$.fragment,1,0,()=>{Ie(h,1)}),qe()}l?(e=wn(l,a(c)),Ut.push(()=>Ws(e,"hoverItemIndex",o)),e.$on("itemSelected",c[43]),e.$on("itemCreated",c[44]),e.$on("closeList",c[45]),ke(e.$$.fragment),B(e.$$.fragment,1),Te(e,i.parentNode,i)):e=null}else l&&e.$set(f)},i(c){s||(e&&B(e.$$.fragment,c),s=!0)},o(c){e&&G(e.$$.fragment,c),s=!1},d(c){c&&b(i),e&&Ie(e,c)}}}function ik(n){let e,t,i;return{c(){e=k("input"),this.h()},l(s){e=T(s,"INPUT",{name:!0,type:!0,class:!0}),this.h()},h(){S(e,"name",t=n[16].name),S(e,"type","hidden"),e.value=i=n[2]?n[12](n[2]):null,S(e,"class","svelte-17l1npl")},m(s,r){H(s,e,r)},p(s,r){r[0]&65536&&t!==(t=s[16].name)&&S(e,"name",t),r[0]&4100&&i!==(i=s[2]?s[12](s[2]):null)&&(e.value=i)},d(s){s&&b(e)}}}function sk(n){let e,t=n[2],i=[];for(let s=0;s<t.length;s+=1)i[s]=rk(QC(n,t,s));return{c(){for(let s=0;s<i.length;s+=1)i[s].c();e=et()},l(s){for(let r=0;r<i.length;r+=1)i[r].l(s);e=et()},m(s,r){for(let o=0;o<i.length;o+=1)i[o].m(s,r);H(s,e,r)},p(s,r){if(r[0]&69636){t=s[2];let o;for(o=0;o<t.length;o+=1){const l=QC(s,t,o);i[o]?i[o].p(l,r):(i[o]=rk(l),i[o].c(),i[o].m(e.parentNode,e))}for(;o<i.length;o+=1)i[o].d(1);i.length=t.length}},d(s){Ft(i,s),s&&b(e)}}}function rk(n){let e,t,i;return{c(){e=k("input"),this.h()},l(s){e=T(s,"INPUT",{name:!0,type:!0,class:!0}),this.h()},h(){S(e,"name",t=n[16].name),S(e,"type","hidden"),e.value=i=n[103]?n[12](n[103]):null,S(e,"class","svelte-17l1npl")},m(s,r){H(s,e,r)},p(s,r){r[0]&65536&&t!==(t=s[16].name)&&S(e,"name",t),r[0]&4100&&i!==(i=s[103]?s[12](s[103]):null)&&(e.value=i)},d(s){s&&b(e)}}}function Pie(n){let e,t,i,s,r,o,l,a,c,u,f,h,d,m,p,_,v,y,w=n[1]&&YC(n),A=n[17]&&JC(n),E=n[35]&&ZC(n),C=[{readOnly:l=!n[13]},n[31],{placeholder:n[36]},{style:n[14]},{disabled:n[9]}],R={};for(let K=0;K<C.length;K+=1)R=Xr(R,C[K]);let D=!n[7]&&n[29]&&xC(n),N=n[37]&&$C(n),L=!n[37]&&(n[20]||n[19]&&!n[2]||!n[13]&&!n[9]&&!n[4]&&(n[29]&&!n[15]||!n[29]))&&ek(n),F=n[4]&&tk(),P=n[5]&&nk(n),Q=(!n[7]||n[7]&&!n[35])&&ik(n),O=n[7]&&n[35]&&sk(n);return{c(){e=k("div"),t=k("span"),w&&w.c(),i=U(),A&&A.c(),s=U(),E&&E.c(),r=U(),o=k("input"),a=U(),D&&D.c(),c=U(),N&&N.c(),u=U(),L&&L.c(),f=U(),F&&F.c(),h=U(),P&&P.c(),d=U(),Q&&Q.c(),m=U(),O&&O.c(),this.h()},l(K){e=T(K,"DIV",{class:!0,style:!0});var X=I(e);t=T(X,"SPAN",{"aria-live":!0,"aria-atomic":!0,"aria-relevant":!0,class:!0});var J=I(t);w&&w.l(J),J.forEach(b),i=W(X),A&&A.l(X),s=W(X),E&&E.l(X),r=W(X),o=T(X,"INPUT",{placeholder:!0,style:!0}),a=W(X),D&&D.l(X),c=W(X),N&&N.l(X),u=W(X),L&&L.l(X),f=W(X),F&&F.l(X),h=W(X),P&&P.l(X),d=W(X),Q&&Q.l(X),m=W(X),O&&O.l(X),X.forEach(b),this.h()},h(){S(t,"aria-live","polite"),S(t,"aria-atomic","false"),S(t,"aria-relevant","additions text"),S(t,"class","a11yText svelte-17l1npl"),Yb(o,R),xe(o,"svelte-17l1npl",!0),S(e,"class",p="selectContainer "+n[21]+" svelte-17l1npl"),S(e,"style",n[11]),xe(e,"hasError",n[10]),xe(e,"multiSelect",n[7]),xe(e,"disabled",n[9]),xe(e,"focused",n[1])},m(K,X){H(K,e,X),g(e,t),w&&w.m(t,null),g(e,i),A&&A.m(e,null),g(e,s),E&&E.m(e,null),g(e,r),g(e,o),o.autofocus&&o.focus(),n[82](o),Ms(o,n[3]),g(e,a),D&&D.m(e,null),g(e,c),N&&N.m(e,null),g(e,u),L&&L.m(e,null),g(e,f),F&&F.m(e,null),g(e,h),P&&P.m(e,null),g(e,d),Q&&Q.m(e,null),g(e,m),O&&O.m(e,null),n[85](e),_=!0,v||(y=[_e(window,"click",n[41]),_e(window,"focusin",n[41]),_e(window,"keydown",n[39]),_e(o,"focus",n[40]),_e(o,"input",n[83]),_e(e,"click",n[42])],v=!0)},p(K,X){K[1]?w?w.p(K,X):(w=YC(K),w.c(),w.m(t,null)):w&&(w.d(1),w=null),K[17]?A?(A.p(K,X),X[0]&131072&&B(A,1)):(A=JC(K),A.c(),B(A,1),A.m(e,s)):A&&(He(),G(A,1,1,()=>{A=null}),qe()),K[35]?E?(E.p(K,X),X[1]&16&&B(E,1)):(E=ZC(K),E.c(),B(E,1),E.m(e,r)):E&&(He(),G(E,1,1,()=>{E=null}),qe()),Yb(o,R=Qr(C,[(!_||X[0]&8192&&l!==(l=!K[13]))&&{readOnly:l},X[1]&1&&K[31],(!_||X[1]&32)&&{placeholder:K[36]},(!_||X[0]&16384)&&{style:K[14]},(!_||X[0]&512)&&{disabled:K[9]}])),X[0]&8&&o.value!==K[3]&&Ms(o,K[3]),xe(o,"svelte-17l1npl",!0),!K[7]&&K[29]?D?(D.p(K,X),X[0]&536871040&&B(D,1)):(D=xC(K),D.c(),B(D,1),D.m(e,c)):D&&(He(),G(D,1,1,()=>{D=null}),qe()),K[37]?N?(N.p(K,X),X[1]&64&&B(N,1)):(N=$C(K),N.c(),B(N,1),N.m(e,u)):N&&(He(),G(N,1,1,()=>{N=null}),qe()),!K[37]&&(K[20]||K[19]&&!K[2]||!K[13]&&!K[9]&&!K[4]&&(K[29]&&!K[15]||!K[29]))?L?L.p(K,X):(L=ek(K),L.c(),L.m(e,f)):L&&(L.d(1),L=null),K[4]?F||(F=tk(),F.c(),F.m(e,h)):F&&(F.d(1),F=null),K[5]?P?(P.p(K,X),X[0]&32&&B(P,1)):(P=nk(K),P.c(),B(P,1),P.m(e,d)):P&&(He(),G(P,1,1,()=>{P=null}),qe()),!K[7]||K[7]&&!K[35]?Q?Q.p(K,X):(Q=ik(K),Q.c(),Q.m(e,m)):Q&&(Q.d(1),Q=null),K[7]&&K[35]?O?O.p(K,X):(O=sk(K),O.c(),O.m(e,null)):O&&(O.d(1),O=null),(!_||X[0]&2097152&&p!==(p="selectContainer "+K[21]+" svelte-17l1npl"))&&S(e,"class",p),(!_||X[0]&2048)&&S(e,"style",K[11]),(!_||X[0]&2098176)&&xe(e,"hasError",K[10]),(!_||X[0]&2097280)&&xe(e,"multiSelect",K[7]),(!_||X[0]&2097664)&&xe(e,"disabled",K[9]),(!_||X[0]&2097154)&&xe(e,"focused",K[1])},i(K){_||(B(A),B(E),B(D),B(N),B(P),_=!0)},o(K){G(A),G(E),G(D),G(N),G(P),_=!1},d(K){K&&b(e),w&&w.d(),A&&A.d(),E&&E.d(),n[82](null),D&&D.d(),N&&N.d(),L&&L.d(),F&&F.d(),P&&P.d(),Q&&Q.d(),O&&O.d(),n[85](null),v=!1,an(y)}}}function ok(n){return n.map((e,t)=>({index:t,value:e,label:`${e}`}))}function Mie(n,e,t){let i,s,r,o,l,a,c,u;const f=Yu();let{id:h=null}=e,{container:d=void 0}=e,{input:m=void 0}=e,{isMulti:p=!1}=e,{multiFullItemClearable:_=!1}=e,{isDisabled:v=!1}=e,{isCreatable:y=!1}=e,{isFocused:w=!1}=e,{value:A=null}=e,{filterText:E=""}=e,{placeholder:C="Select..."}=e,{placeholderAlwaysShow:R=!1}=e,{items:D=null}=e,{itemFilter:N=(ue,_t,$t)=>`${ue}`.toLowerCase().includes(_t.toLowerCase())}=e,{groupBy:L=void 0}=e,{groupFilter:F=ue=>ue}=e,{isGroupHeaderSelectable:P=!1}=e,{getGroupHeaderLabel:Q=ue=>ue[O]||ue.id}=e,{labelIdentifier:O="label"}=e,{getOptionLabel:K=(ue,_t)=>ue.isCreator?`Create "${_t}"`:ue[O]}=e,{optionIdentifier:X="value"}=e,{loadOptions:J=void 0}=e,{hasError:te=!1}=e,{containerStyles:j=""}=e,{getSelectionLabel:x=ue=>ue?ue[O]:null}=e,{createGroupHeaderItem:Z=ue=>({value:ue,label:ue})}=e,{createItem:V=ue=>({value:ue,label:ue})}=e;const ce=()=>i;let{isSearchable:pe=!0}=e,{inputStyles:re=""}=e,{isClearable:ye=!0}=e,{isWaiting:Ne=!1}=e,{listPlacement:Y="auto"}=e,{listOpen:Ce=!1}=e,{isVirtualList:We=!1}=e,{loadOptionsInterval:se=300}=e,{noOptionsMessage:Me="No options"}=e,{hideEmptyState:he=!1}=e,{inputAttributes:M={}}=e,{listAutoWidth:ae=!0}=e,{itemHeight:de=40}=e,{Icon:ee=void 0}=e,{iconProps:$={}}=e,{showChevron:ne=!1}=e,{showIndicator:me=!1}=e,{containerClasses:le=""}=e,{indicatorSvg:ie=void 0}=e,{listOffset:be=5}=e,{ClearIcon:we=Oie}=e,{Item:Ae=AN}=e,{List:ge=gie}=e,{Selection:Be=_ie}=e,{MultiSelection:ve=Eie}=e,{VirtualList:Pe=Tie}=e;function Se(ue){if(ue.loadOptions&&ue.filterText.length>0)return;if(!ue.items)return[];ue.items&&ue.items.length>0&&typeof ue.items[0]!="object"&&(ue.items=ok(ue.items));let _t=ue.items.filter($t=>{let On=N(K($t,ue.filterText),ue.filterText,$t);return On&&ue.isMulti&&ue.value&&Array.isArray(ue.value)&&(On=!ue.value.some(pi=>pi[ue.optionIdentifier]===$t[ue.optionIdentifier])),On});return ue.groupBy&&(_t=nn(_t)),ue.isCreatable&&(_t=tt(_t,ue.filterText)),_t}function tt(ue,_t){if(_t.length===0)return ue;const $t=V(_t);return ue[0]&&_t===ue[0][O]?ue:($t.isCreator=!0,[...ue,$t])}let{selectedValue:Ke=null}=e,Ee,it,De,ze,Re,ut;const Bt=Rie(async()=>{t(4,Ne=!0);let ue=await J(E).catch(_t=>{console.warn("svelte-select loadOptions error :>> ",_t),f("error",{type:"loadOptions",details:_t})});ue&&!ue.cancelled&&(ue?(ue&&ue.length>0&&typeof ue[0]!="object"&&(ue=ok(ue)),t(81,i=[...ue]),f("loaded",{items:i})):t(81,i=[]),y&&t(81,i=tt(i,E)),t(4,Ne=!1),t(1,w=!0),t(5,Ce=!0))},se);function gt(){typeof A=="string"?t(2,A={[X]:A,label:A}):p&&Array.isArray(A)&&A.length>0&&t(2,A=A.map(ue=>typeof ue=="string"?{value:ue,label:ue}:ue))}let At;function jt(){t(31,At=Object.assign({autocapitalize:"none",autocomplete:"off",autocorrect:"off",spellcheck:!1,tabindex:0,type:"text","aria-autocomplete":"list"},M)),h&&t(31,At.id=h,At),pe||t(31,At.readonly=!0,At)}function nn(ue){const _t=[],$t={};ue.forEach(pi=>{const Ti=L(pi);_t.includes(Ti)||(_t.push(Ti),$t[Ti]=[],Ti&&$t[Ti].push(Object.assign(Z(Ti,pi),{id:Ti,isGroupHeader:!0,isSelectable:P}))),$t[Ti].push(Object.assign({isGroupItem:!!Ti},pi))});const On=[];return F(_t).forEach(pi=>{On.push(...$t[pi])}),On}function Zt(){if(p){JSON.stringify(A)!==JSON.stringify(it)&&vn()&&f("select",A);return}(!it||JSON.stringify(A[X])!==JSON.stringify(it[X]))&&f("select",A)}function ft(){w||Ce?Ge():m&&m.blur()}function un(){A&&(Array.isArray(A)?t(2,A=[...A]):t(2,A=[A]))}function tn(){A&&t(2,A=null)}function An(){E.length!==0&&(t(1,w=!0),t(5,Ce=!0),J?Bt():(t(5,Ce=!0),p&&t(30,Ee=void 0)))}oT(async()=>{t(77,it=A),t(78,De=E),t(79,ze=w),t(80,Re=p)});function vn(){let ue=!0;if(A){const _t=[],$t=[];A.forEach(On=>{_t.includes(On[X])?ue=!1:(_t.push(On[X]),$t.push(On))}),ue||t(2,A=$t)}return ue}function Ln(ue){let _t=ue?ue[X]:A[X];return D.find($t=>$t[X]===_t)}function Cn(ue){!ue||ue.length===0||ue.some(_t=>typeof _t!="object")||!A||(p?A.some(_t=>!_t||!_t[X]):!A[X])||(Array.isArray(A)?t(2,A=A.map(_t=>Ln(_t)||_t)):t(2,A=Ln()||A))}function Wn(ue){const{detail:_t}=ue,$t=A[_t?_t.i:A.length-1];A.length===1?t(2,A=void 0):t(2,A=A.filter(On=>On!==$t)),f("clear",$t)}function di(ue){if(w)switch(ue.key){case"ArrowDown":ue.preventDefault(),t(5,Ce=!0),t(30,Ee=void 0);break;case"ArrowUp":ue.preventDefault(),t(5,Ce=!0),t(30,Ee=void 0);break;case"Tab":Ce||t(1,w=!1);break;case"Backspace":if(!p||E.length>0)return;if(p&&A&&A.length>0){if(Wn(Ee!==void 0?Ee:A.length-1),Ee===0||Ee===void 0)break;t(30,Ee=A.length>Ee?Ee-1:void 0)}break;case"ArrowLeft":if(!p||E.length>0)return;Ee===void 0?t(30,Ee=A.length-1):A.length>Ee&&Ee!==0&&t(30,Ee-=1);break;case"ArrowRight":if(!p||E.length>0||Ee===void 0)return;Ee===A.length-1?t(30,Ee=void 0):Ee<A.length-1&&t(30,Ee+=1);break}}function Ge(){t(1,w=!0),m&&m.focus()}function yt(ue){if(!d)return;const _t=ue.path&&ue.path.length>0?ue.path[0]:ue.target;d.contains(_t)||d.contains(ue.relatedTarget)||(t(1,w=!1),t(5,Ce=!1),t(30,Ee=void 0),m&&m.blur())}function zt(){v||(t(1,w=!0),t(5,Ce=!Ce))}function dn(){t(2,A=void 0),t(5,Ce=!1),f("clear",A),Ge()}Mi(()=>{w&&m&&m.focus()});function mn(ue){const{detail:_t}=ue;if(_t){t(3,E="");const $t=Object.assign({},_t);(!$t.isGroupHeader||$t.isSelectable)&&(p?t(2,A=A?A.concat([$t]):[$t]):t(2,A=$t),t(2,A),setTimeout(()=>{t(5,Ce=!1),t(30,Ee=void 0)}))}}function Qt(ue){const{detail:_t}=ue;p?(t(2,A=A||[]),t(2,A=[...A,V(_t)])):t(2,A=V(_t)),f("itemCreated",_t),t(3,E=""),t(5,Ce=!1),t(30,Ee=void 0)}function nt(){t(3,E=""),t(5,Ce=!1)}let{ariaValues:Dt=ue=>`Option ${ue}, selected.`}=e,{ariaListOpen:mi=(ue,_t)=>`You are currently focused on option ${ue}. There are ${_t} results available.`}=e,{ariaFocused:Pt=()=>"Select is focused, type to refine list, press down to open the menu."}=e;function sn(){let ue;return p&&A.length>0?ue=A.map(_t=>x(_t)).join(", "):ue=x(A),Dt(ue)}function Ht(){if(!w||!i||i.length===0)return"";let ue=i[ut];if(Ce&&ue){let _t=x(ue),$t=i?i.length:0;return mi(_t,$t)}else return Pt()}function Wi(ue){Ut[ue?"unshift":"push"](()=>{m=ue,t(6,m)})}function gs(){E=this.value,t(3,E)}function Sn(ue){ut=ue,t(28,ut)}function pt(ue){Ut[ue?"unshift":"push"](()=>{d=ue,t(0,d)})}return n.$$set=ue=>{"id"in ue&&t(46,h=ue.id),"container"in ue&&t(0,d=ue.container),"input"in ue&&t(6,m=ue.input),"isMulti"in ue&&t(7,p=ue.isMulti),"multiFullItemClearable"in ue&&t(8,_=ue.multiFullItemClearable),"isDisabled"in ue&&t(9,v=ue.isDisabled),"isCreatable"in ue&&t(47,y=ue.isCreatable),"isFocused"in ue&&t(1,w=ue.isFocused),"value"in ue&&t(2,A=ue.value),"filterText"in ue&&t(3,E=ue.filterText),"placeholder"in ue&&t(48,C=ue.placeholder),"placeholderAlwaysShow"in ue&&t(49,R=ue.placeholderAlwaysShow),"items"in ue&&t(50,D=ue.items),"itemFilter"in ue&&t(51,N=ue.itemFilter),"groupBy"in ue&&t(52,L=ue.groupBy),"groupFilter"in ue&&t(53,F=ue.groupFilter),"isGroupHeaderSelectable"in ue&&t(54,P=ue.isGroupHeaderSelectable),"getGroupHeaderLabel"in ue&&t(55,Q=ue.getGroupHeaderLabel),"labelIdentifier"in ue&&t(56,O=ue.labelIdentifier),"getOptionLabel"in ue&&t(57,K=ue.getOptionLabel),"optionIdentifier"in ue&&t(58,X=ue.optionIdentifier),"loadOptions"in ue&&t(59,J=ue.loadOptions),"hasError"in ue&&t(10,te=ue.hasError),"containerStyles"in ue&&t(11,j=ue.containerStyles),"getSelectionLabel"in ue&&t(12,x=ue.getSelectionLabel),"createGroupHeaderItem"in ue&&t(60,Z=ue.createGroupHeaderItem),"createItem"in ue&&t(61,V=ue.createItem),"isSearchable"in ue&&t(13,pe=ue.isSearchable),"inputStyles"in ue&&t(14,re=ue.inputStyles),"isClearable"in ue&&t(15,ye=ue.isClearable),"isWaiting"in ue&&t(4,Ne=ue.isWaiting),"listPlacement"in ue&&t(63,Y=ue.listPlacement),"listOpen"in ue&&t(5,Ce=ue.listOpen),"isVirtualList"in ue&&t(64,We=ue.isVirtualList),"loadOptionsInterval"in ue&&t(65,se=ue.loadOptionsInterval),"noOptionsMessage"in ue&&t(66,Me=ue.noOptionsMessage),"hideEmptyState"in ue&&t(67,he=ue.hideEmptyState),"inputAttributes"in ue&&t(16,M=ue.inputAttributes),"listAutoWidth"in ue&&t(68,ae=ue.listAutoWidth),"itemHeight"in ue&&t(69,de=ue.itemHeight),"Icon"in ue&&t(17,ee=ue.Icon),"iconProps"in ue&&t(18,$=ue.iconProps),"showChevron"in ue&&t(19,ne=ue.showChevron),"showIndicator"in ue&&t(20,me=ue.showIndicator),"containerClasses"in ue&&t(21,le=ue.containerClasses),"indicatorSvg"in ue&&t(22,ie=ue.indicatorSvg),"listOffset"in ue&&t(70,be=ue.listOffset),"ClearIcon"in ue&&t(23,we=ue.ClearIcon),"Item"in ue&&t(71,Ae=ue.Item),"List"in ue&&t(24,ge=ue.List),"Selection"in ue&&t(25,Be=ue.Selection),"MultiSelection"in ue&&t(26,ve=ue.MultiSelection),"VirtualList"in ue&&t(72,Pe=ue.VirtualList),"selectedValue"in ue&&t(73,Ke=ue.selectedValue),"ariaValues"in ue&&t(74,Dt=ue.ariaValues),"ariaListOpen"in ue&&t(75,mi=ue.ariaListOpen),"ariaFocused"in ue&&t(76,Pt=ue.ariaFocused)},n.$$.update=()=>{n.$$.dirty[0]&140|n.$$.dirty[1]&405340160&&t(81,i=Se({loadOptions:J,filterText:E,items:D,value:A,isMulti:p,optionIdentifier:X,groupBy:L,isCreatable:y})),n.$$.dirty[2]&2048&&Ke&&console.warn("selectedValue is no longer used. Please use value instead."),n.$$.dirty[1]&524288&&Cn(D),n.$$.dirty[0]&4&&A&&gt(),n.$$.dirty[0]&73728&&(M||!pe)&&jt(),n.$$.dirty[0]&128|n.$$.dirty[2]&262144&&(p&&un(),Re&&!p&&tn()),n.$$.dirty[0]&132&&p&&A&&A.length>1&&vn(),n.$$.dirty[0]&4&&A&&Zt(),n.$$.dirty[0]&132|n.$$.dirty[2]&32768&&!A&&p&&it&&f("select",A),n.$$.dirty[0]&2|n.$$.dirty[2]&131072&&w!==ze&&ft(),n.$$.dirty[0]&8|n.$$.dirty[2]&65536&&E!==De&&An(),n.$$.dirty[0]&12&&t(29,s=A&&E.length===0),n.$$.dirty[0]&536904208&&t(37,r=s&&ye&&!v&&!Ne),n.$$.dirty[0]&132|n.$$.dirty[1]&393216&&t(36,o=R&&p?C:A?"":C),n.$$.dirty[0]&132&&t(35,l=p&&A&&A.length>0),n.$$.dirty[0]&141|n.$$.dirty[1]&218103808|n.$$.dirty[2]&526326&&t(34,a={Item:Ae,filterText:E,optionIdentifier:X,noOptionsMessage:Me,hideEmptyState:he,isVirtualList:We,VirtualList:Pe,value:A,isMulti:p,getGroupHeaderLabel:Q,items:i,itemHeight:de,getOptionLabel:K,listPlacement:Y,parent:d,listAutoWidth:ae,listOffset:be}),n.$$.dirty[0]&132&&t(33,c=A?sn():""),n.$$.dirty[0]&268435490|n.$$.dirty[2]&524288&&t(32,u=Ht())},[d,w,A,E,Ne,Ce,m,p,_,v,te,j,x,pe,re,ye,M,ee,$,ne,me,le,ie,we,ge,Be,ve,dn,ut,s,Ee,At,u,c,a,l,o,r,Wn,di,Ge,yt,zt,mn,Qt,nt,h,y,C,R,D,N,L,F,P,Q,O,K,X,J,Z,V,ce,Y,We,se,Me,he,ae,de,be,Ae,Pe,Ke,Dt,mi,Pt,it,De,ze,Re,i,Wi,gs,Sn,pt]}class vl extends st{constructor(e){super(),rt(this,e,Mie,Pie,kt,{id:46,container:0,input:6,isMulti:7,multiFullItemClearable:8,isDisabled:9,isCreatable:47,isFocused:1,value:2,filterText:3,placeholder:48,placeholderAlwaysShow:49,items:50,itemFilter:51,groupBy:52,groupFilter:53,isGroupHeaderSelectable:54,getGroupHeaderLabel:55,labelIdentifier:56,getOptionLabel:57,optionIdentifier:58,loadOptions:59,hasError:10,containerStyles:11,getSelectionLabel:12,createGroupHeaderItem:60,createItem:61,getFilteredItems:62,isSearchable:13,inputStyles:14,isClearable:15,isWaiting:4,listPlacement:63,listOpen:5,isVirtualList:64,loadOptionsInterval:65,noOptionsMessage:66,hideEmptyState:67,inputAttributes:16,listAutoWidth:68,itemHeight:69,Icon:17,iconProps:18,showChevron:19,showIndicator:20,containerClasses:21,indicatorSvg:22,listOffset:70,ClearIcon:23,Item:71,List:24,Selection:25,MultiSelection:26,VirtualList:72,selectedValue:73,handleClear:27,ariaValues:74,ariaListOpen:75,ariaFocused:76},null,[-1,-1,-1,-1])}get getFilteredItems(){return this.$$.ctx[62]}get handleClear(){return this.$$.ctx[27]}}function Bie(n){let e,t,i,s,r,o,l,a,c,u,f,h,d,m,p,_,v,y,w,A,E,C,R,D,N,L,F,P,Q,O,K,X,J,te,j,x,Z,V;function ce(he){n[16](he)}let pe={containerClasses:"jse-filter-path",showIndicator:!0,items:n[6]};n[0]!==void 0&&(pe.value=n[0]),a=new vl({props:pe}),Ut.push(()=>Ws(a,"value",ce));function re(he){n[17](he)}let ye={containerClasses:"jse-filter-relation",showIndicator:!0,items:n[8]};n[1]!==void 0&&(ye.value=n[1]),f=new vl({props:ye}),Ut.push(()=>Ws(f,"value",re));function Ne(he){n[19](he)}let Y={containerClasses:"jse-sort-path",showIndicator:!0,items:n[6]};n[3]!==void 0&&(Y.value=n[3]),C=new vl({props:Y}),Ut.push(()=>Ws(C,"value",Ne));function Ce(he){n[20](he)}let We={containerClasses:"jse-sort-direction",showIndicator:!0,items:n[9]};n[4]!==void 0&&(We.value=n[4]),N=new vl({props:We}),Ut.push(()=>Ws(N,"value",Ce));function se(he){n[21](he)}let Me={containerClasses:"jse-projection-paths",isMulti:!0,showIndicator:!0,items:n[7]};return n[5]!==void 0&&(Me.value=n[5]),te=new vl({props:Me}),Ut.push(()=>Ws(te,"value",se)),{c(){e=k("table"),t=k("tr"),i=k("th"),s=q("Filter"),r=U(),o=k("td"),l=k("div"),ke(a.$$.fragment),u=U(),ke(f.$$.fragment),d=U(),m=k("input"),p=U(),_=k("tr"),v=k("th"),y=q("Sort"),w=U(),A=k("td"),E=k("div"),ke(C.$$.fragment),D=U(),ke(N.$$.fragment),F=U(),P=k("tr"),Q=k("th"),O=q("Pick"),K=U(),X=k("td"),J=k("div"),ke(te.$$.fragment),this.h()},l(he){e=T(he,"TABLE",{class:!0});var M=I(e);t=T(M,"TR",{});var ae=I(t);i=T(ae,"TH",{class:!0});var de=I(i);s=z(de,"Filter"),de.forEach(b),r=W(ae),o=T(ae,"TD",{});var ee=I(o);l=T(ee,"DIV",{class:!0});var $=I(l);Oe(a.$$.fragment,$),u=W($),Oe(f.$$.fragment,$),d=W($),m=T($,"INPUT",{class:!0}),$.forEach(b),ee.forEach(b),ae.forEach(b),p=W(M),_=T(M,"TR",{});var ne=I(_);v=T(ne,"TH",{class:!0});var me=I(v);y=z(me,"Sort"),me.forEach(b),w=W(ne),A=T(ne,"TD",{});var le=I(A);E=T(le,"DIV",{class:!0});var ie=I(E);Oe(C.$$.fragment,ie),D=W(ie),Oe(N.$$.fragment,ie),ie.forEach(b),le.forEach(b),ne.forEach(b),F=W(M),P=T(M,"TR",{});var be=I(P);Q=T(be,"TH",{class:!0});var we=I(Q);O=z(we,"Pick"),we.forEach(b),K=W(be),X=T(be,"TD",{});var Ae=I(X);J=T(Ae,"DIV",{class:!0});var ge=I(J);Oe(te.$$.fragment,ge),ge.forEach(b),Ae.forEach(b),be.forEach(b),M.forEach(b),this.h()},h(){S(i,"class","svelte-1pbg0mn"),S(m,"class","jse-filter-value svelte-1pbg0mn"),S(l,"class","jse-horizontal svelte-1pbg0mn"),S(v,"class","svelte-1pbg0mn"),S(E,"class","jse-horizontal svelte-1pbg0mn"),S(Q,"class","svelte-1pbg0mn"),S(J,"class","jse-horizontal svelte-1pbg0mn"),S(e,"class","jse-transform-wizard svelte-1pbg0mn")},m(he,M){H(he,e,M),g(e,t),g(t,i),g(i,s),g(t,r),g(t,o),g(o,l),Te(a,l,null),g(l,u),Te(f,l,null),g(l,d),g(l,m),Ms(m,n[2]),g(e,p),g(e,_),g(_,v),g(v,y),g(_,w),g(_,A),g(A,E),Te(C,E,null),g(E,D),Te(N,E,null),g(e,F),g(e,P),g(P,Q),g(Q,O),g(P,K),g(P,X),g(X,J),Te(te,J,null),x=!0,Z||(V=_e(m,"input",n[18]),Z=!0)},p(he,[M]){const ae={};M&64&&(ae.items=he[6]),!c&&M&1&&(c=!0,ae.value=he[0],Js(()=>c=!1)),a.$set(ae);const de={};!h&&M&2&&(h=!0,de.value=he[1],Js(()=>h=!1)),f.$set(de),M&4&&m.value!==he[2]&&Ms(m,he[2]);const ee={};M&64&&(ee.items=he[6]),!R&&M&8&&(R=!0,ee.value=he[3],Js(()=>R=!1)),C.$set(ee);const $={};!L&&M&16&&(L=!0,$.value=he[4],Js(()=>L=!1)),N.$set($);const ne={};M&128&&(ne.items=he[7]),!j&&M&32&&(j=!0,ne.value=he[5],Js(()=>j=!1)),te.$set(ne)},i(he){x||(B(a.$$.fragment,he),B(f.$$.fragment,he),B(C.$$.fragment,he),B(N.$$.fragment,he),B(te.$$.fragment,he),x=!0)},o(he){G(a.$$.fragment,he),G(f.$$.fragment,he),G(C.$$.fragment,he),G(N.$$.fragment,he),G(te.$$.fragment,he),x=!1},d(he){he&&b(e),Ie(a),Ie(f),Ie(C),Ie(N),Ie(te),Z=!1,V()}}}function Lie(n,e,t){var X,J,te,j,x,Z;let i,s,r,o,l;const a=Is("jsoneditor:TransformWizard");let{json:c}=e,{queryOptions:u={}}=e,{onChange:f}=e;const h=["==","!=","<","<=",">",">="].map(V=>({value:V,label:V})),d=[{value:"asc",label:"ascending"},{value:"desc",label:"descending"}];let m=(X=u==null?void 0:u.filter)!=null&&X.path?ga(u.filter.path):null,p=(J=u==null?void 0:u.filter)!=null&&J.relation?h.find(V=>V.value===u.filter.relation):null,_=((te=u==null?void 0:u.filter)==null?void 0:te.value)||"",v=(j=u==null?void 0:u.sort)!=null&&j.path?ga(u.sort.path):null,y=(x=u==null?void 0:u.sort)!=null&&x.direction?d.find(V=>V.value===u.sort.direction):null,w=(Z=u==null?void 0:u.projection)!=null&&Z.paths?u.projection.paths.map(ga):null;function A(V){var ce;En((ce=u==null?void 0:u.filter)==null?void 0:ce.path,V)||(a("changeFilterPath",V),t(10,u=hr(u,["filter","path"],V,!0)),f(u))}function E(V){var ce;En((ce=u==null?void 0:u.filter)==null?void 0:ce.relation,V)||(a("changeFilterRelation",V),t(10,u=hr(u,["filter","relation"],V,!0)),f(u))}function C(V){var ce;En((ce=u==null?void 0:u.filter)==null?void 0:ce.value,V)||(a("changeFilterValue",V),t(10,u=hr(u,["filter","value"],V,!0)),f(u))}function R(V){var ce;En((ce=u==null?void 0:u.sort)==null?void 0:ce.path,V)||(a("changeSortPath",V),t(10,u=hr(u,["sort","path"],V,!0)),f(u))}function D(V){var ce;En((ce=u==null?void 0:u.sort)==null?void 0:ce.direction,V)||(a("changeSortDirection",V),t(10,u=hr(u,["sort","direction"],V,!0)),f(u))}function N(V){var ce;En((ce=u==null?void 0:u.projection)==null?void 0:ce.paths,V)||(a("changeProjectionPaths",V),t(10,u=hr(u,["projection","paths"],V,!0)),f(u))}function L(V){m=V,t(0,m)}function F(V){p=V,t(1,p)}function P(){_=this.value,t(2,_)}function Q(V){v=V,t(3,v)}function O(V){y=V,t(4,y)}function K(V){w=V,t(5,w)}return n.$$set=V=>{"json"in V&&t(11,c=V.json),"queryOptions"in V&&t(10,u=V.queryOptions),"onChange"in V&&t(12,f=V.onChange)},n.$$.update=()=>{var V;n.$$.dirty&2048&&t(15,i=Array.isArray(c)),n.$$.dirty&34816&&t(14,s=i?S1(c):[]),n.$$.dirty&34816&&t(13,r=i?S1(c,!0):[]),n.$$.dirty&16384&&t(6,o=s.map(ga)),n.$$.dirty&8192&&t(7,l=r?r.map(ga):[]),n.$$.dirty&1088&&(V=u==null?void 0:u.filter)!=null&&V.path&&o.find(ce=>{var pe;return En(ce.value,(pe=u==null?void 0:u.filter)==null?void 0:pe.path)}),n.$$.dirty&1&&A((m==null?void 0:m.value)||null),n.$$.dirty&2&&E((p==null?void 0:p.value)||null),n.$$.dirty&4&&C(_||null),n.$$.dirty&8&&R((v==null?void 0:v.value)||null),n.$$.dirty&16&&D((y==null?void 0:y.value)||null),n.$$.dirty&32&&N(w?w.map(ce=>ce.value):null)},[m,p,_,v,y,w,o,l,h,d,u,c,f,r,s,i,L,F,P,Q,O,K]}class Uie extends st{constructor(e){super(),rt(this,e,Lie,Bie,cn,{json:11,queryOptions:10,onChange:12})}}const Wie=Uie;function lk(n,e,t){const i=n.slice();return i[5]=e[t],i}function Vie(n){let e,t;return e=new Vt({props:{data:Yd}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p:Xe,i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function Fie(n){let e,t;return e=new Vt({props:{data:Qd}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p:Xe,i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function ak(n){let e,t,i,s,r=n[5].name+"",o,l,a,c,u,f;const h=[Fie,Vie],d=[];function m(_,v){return _[5].id===_[0]?0:1}t=m(n),i=d[t]=h[t](n);function p(){return n[4](n[5])}return{c(){e=k("button"),i.c(),s=U(),o=q(r),l=U(),this.h()},l(_){e=T(_,"BUTTON",{type:!0,class:!0,title:!0});var v=I(e);i.l(v),s=W(v),o=z(v,r),l=W(v),v.forEach(b),this.h()},h(){S(e,"type","button"),S(e,"class","jse-query-language svelte-ifjr8a"),S(e,"title",a=`Select ${n[5].name} as query language`),xe(e,"selected",n[5].id===n[0])},m(_,v){H(_,e,v),d[t].m(e,null),g(e,s),g(e,o),g(e,l),c=!0,u||(f=_e(e,"click",p),u=!0)},p(_,v){n=_;let y=t;t=m(n),t===y?d[t].p(n,v):(He(),G(d[y],1,1,()=>{d[y]=null}),qe(),i=d[t],i?i.p(n,v):(i=d[t]=h[t](n),i.c()),B(i,1),i.m(e,s)),(!c||v&2)&&r!==(r=n[5].name+"")&&Le(o,r),(!c||v&2&&a!==(a=`Select ${n[5].name} as query language`))&&S(e,"title",a),(!c||v&3)&&xe(e,"selected",n[5].id===n[0])},i(_){c||(B(i),c=!0)},o(_){G(i),c=!1},d(_){_&&b(e),d[t].d(),u=!1,f()}}}function jie(n){let e,t,i,s=n[1],r=[];for(let l=0;l<s.length;l+=1)r[l]=ak(lk(n,s,l));const o=l=>G(r[l],1,1,()=>{r[l]=null});return{c(){e=k("div"),t=k("div");for(let l=0;l<r.length;l+=1)r[l].c();this.h()},l(l){e=T(l,"DIV",{class:!0});var a=I(e);t=T(a,"DIV",{class:!0});var c=I(t);for(let u=0;u<r.length;u+=1)r[u].l(c);c.forEach(b),a.forEach(b),this.h()},h(){S(t,"class","jse-select-query-language-container svelte-ifjr8a"),S(e,"class","jse-select-query-language svelte-ifjr8a")},m(l,a){H(l,e,a),g(e,t);for(let c=0;c<r.length;c+=1)r[c].m(t,null);i=!0},p(l,[a]){if(a&7){s=l[1];let c;for(c=0;c<s.length;c+=1){const u=lk(l,s,c);r[c]?(r[c].p(u,a),B(r[c],1)):(r[c]=ak(u),r[c].c(),B(r[c],1),r[c].m(t,null))}for(He(),c=s.length;c<r.length;c+=1)o(c);qe()}},i(l){if(!i){for(let a=0;a<s.length;a+=1)B(r[a]);i=!0}},o(l){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)G(r[a]);i=!1},d(l){l&&b(e),Ft(r,l)}}}function Hie(n,e,t){let{queryLanguages:i}=e,{queryLanguageId:s}=e,{onChangeQueryLanguage:r}=e;function o(a){t(0,s=a),r(a)}const l=a=>o(a.id);return n.$$set=a=>{"queryLanguages"in a&&t(1,i=a.queryLanguages),"queryLanguageId"in a&&t(0,s=a.queryLanguageId),"onChangeQueryLanguage"in a&&t(3,r=a.onChangeQueryLanguage)},[s,i,o,r,l]}class qie extends st{constructor(e){super(),rt(this,e,Hie,jie,kt,{queryLanguages:1,queryLanguageId:0,onChangeQueryLanguage:3})}}const zie=qie;function ck(n){let e,t,i,s,r;return t=new Vt({props:{data:tG}}),{c(){e=k("button"),ke(t.$$.fragment),this.h()},l(o){e=T(o,"BUTTON",{type:!0,class:!0,title:!0});var l=I(e);Oe(t.$$.fragment,l),l.forEach(b),this.h()},h(){S(e,"type","button"),S(e,"class","jse-config svelte-1djqugc"),S(e,"title","Select a query language")},m(o,l){H(o,e,l),Te(t,e,null),n[6](e),i=!0,s||(r=_e(e,"click",n[3]),s=!0)},p:Xe,i(o){i||(B(t.$$.fragment,o),i=!0)},o(o){G(t.$$.fragment,o),i=!1},d(o){o&&b(e),Ie(t),n[6](null),s=!1,r()}}}function Gie(n){let e,t,i,s,r,o,l,a,c,u,f=n[0].length>1&&ck(n);return l=new Vt({props:{data:_f}}),{c(){e=k("div"),t=k("div"),i=q("Transform"),s=U(),f&&f.c(),r=U(),o=k("button"),ke(l.$$.fragment),this.h()},l(h){e=T(h,"DIV",{class:!0});var d=I(e);t=T(d,"DIV",{class:!0});var m=I(t);i=z(m,"Transform"),m.forEach(b),s=W(d),f&&f.l(d),r=W(d),o=T(d,"BUTTON",{type:!0,class:!0});var p=I(o);Oe(l.$$.fragment,p),p.forEach(b),d.forEach(b),this.h()},h(){S(t,"class","jse-title svelte-1djqugc"),S(o,"type","button"),S(o,"class","jse-close svelte-1djqugc"),S(e,"class","jse-header svelte-1djqugc")},m(h,d){H(h,e,d),g(e,t),g(t,i),g(e,s),f&&f.m(e,null),g(e,r),g(e,o),Te(l,o,null),a=!0,c||(u=_e(o,"click",n[2]),c=!0)},p(h,[d]){h[0].length>1?f?(f.p(h,d),d&1&&B(f,1)):(f=ck(h),f.c(),B(f,1),f.m(e,r)):f&&(He(),G(f,1,1,()=>{f=null}),qe())},i(h){a||(B(f),B(l.$$.fragment,h),a=!0)},o(h){G(f),G(l.$$.fragment,h),a=!1},d(h){h&&b(e),f&&f.d(),Ie(l),c=!1,u()}}}function Kie(n,e,t){let{queryLanguages:i}=e,{queryLanguageId:s}=e,{onChangeQueryLanguage:r}=e,o,l;const{close:a}=Bn("simple-modal"),{openAbsolutePopup:c,closeAbsolutePopup:u}=Bn("absolute-popup");function f(){l=c(zie,{queryLanguages:i,queryLanguageId:s,onChangeQueryLanguage:m=>{u(l),r(m)}},{position:"bottom",offsetTop:-2,offsetLeft:0,anchor:o,closeOnOuterClick:!0})}function h(d){Ut[d?"unshift":"push"](()=>{o=d,t(1,o)})}return n.$$set=d=>{"queryLanguages"in d&&t(0,i=d.queryLanguages),"queryLanguageId"in d&&t(4,s=d.queryLanguageId),"onChangeQueryLanguage"in d&&t(5,r=d.onChangeQueryLanguage)},[i,o,a,f,s,r,h]}class Xie extends st{constructor(e){super(),rt(this,e,Kie,Gie,cn,{queryLanguages:0,queryLanguageId:4,onChangeQueryLanguage:5})}}const Qie=Xie;function uk(n){let e,t,i,s,r;const o=[Jie,Yie],l=[];function a(c,u){return u[0]&1024&&(e=null),e==null&&(e=!!Array.isArray(c[10])),e?0:1}return t=a(n,[-1,-1]),i=l[t]=o[t](n),{c(){i.c(),s=et()},l(c){i.l(c),s=et()},m(c,u){l[t].m(c,u),H(c,s,u),r=!0},p(c,u){let f=t;t=a(c,u),t===f?l[t].p(c,u):(He(),G(l[f],1,1,()=>{l[f]=null}),qe(),i=l[t],i?i.p(c,u):(i=l[t]=o[t](c),i.c()),B(i,1),i.m(s.parentNode,s))},i(c){r||(B(i),r=!0)},o(c){G(i),r=!1},d(c){l[t].d(c),c&&b(s)}}}function Yie(n){let e;return{c(){e=q("(Only available for arrays, not for objects)")},l(t){e=z(t,"(Only available for arrays, not for objects)")},m(t,i){H(t,e,i)},p:Xe,i:Xe,o:Xe,d(t){t&&b(e)}}}function Jie(n){let e,t;return e=new Wie({props:{queryOptions:n[8],json:n[10],onChange:n[17]}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,s){const r={};s[0]&256&&(r.queryOptions=i[8]),s[0]&1024&&(r.json=i[10]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function fk(n){let e,t;return e=new Gb({props:{externalContent:n[15],readOnly:!0,mainMenuBar:!1,navigationBar:!1,escapeControlCharacters:n[2],escapeUnicodeCharacters:n[3],parser:n[4],onRenderValue:n[6],onError:console.error,onChange:Hn,onFocus:Hn,onBlur:Hn,onSortModal:Hn,onTransformModal:Hn,onClassName:n[7]}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,s){const r={};s[0]&32768&&(r.externalContent=i[15]),s[0]&4&&(r.escapeControlCharacters=i[2]),s[0]&8&&(r.escapeUnicodeCharacters=i[3]),s[0]&16&&(r.parser=i[4]),s[0]&64&&(r.onRenderValue=i[6]),s[0]&128&&(r.onClassName=i[7]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function Zie(n){let e,t=n[13].toString()+"",i;return{c(){e=k("div"),i=q(t),this.h()},l(s){e=T(s,"DIV",{class:!0});var r=I(e);i=z(r,t),r.forEach(b),this.h()},h(){S(e,"class","jse-preview jse-error svelte-mr4kda")},m(s,r){H(s,e,r),g(e,i)},p(s,r){r[0]&8192&&t!==(t=s[13].toString()+"")&&Le(i,t)},i:Xe,o:Xe,d(s){s&&b(e)}}}function xie(n){let e,t;return e=new Gb({props:{externalContent:n[14],readOnly:!0,mainMenuBar:!1,navigationBar:!1,escapeControlCharacters:n[2],escapeUnicodeCharacters:n[3],parser:n[4],onRenderValue:n[6],onError:console.error,onChange:Hn,onFocus:Hn,onBlur:Hn,onSortModal:Hn,onTransformModal:Hn,onClassName:n[7]}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,s){const r={};s[0]&16384&&(r.externalContent=i[14]),s[0]&4&&(r.escapeControlCharacters=i[2]),s[0]&8&&(r.escapeUnicodeCharacters=i[3]),s[0]&16&&(r.parser=i[4]),s[0]&64&&(r.onRenderValue=i[6]),s[0]&128&&(r.onClassName=i[7]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function $ie(n){let e,t,i,s,r,o,l,a,c,u,f=n[16](n[0]).description+"",h,d,m,p,_,v,y,w,A,E,C,R,D,N,L,F,P,Q,O,K,X,J,te,j,x,Z,V,ce,pe,re,ye,Ne,Y,Ce,We,se,Me,he,M,ae,de,ee,$,ne,me;e=new Qie({props:{queryLanguages:n[5],queryLanguageId:n[0],onChangeQueryLanguage:n[22]}}),R=new Vt({props:{data:n[11]?Mr:No}});let le=n[11]&&uk(n);V=new Vt({props:{data:n[12]?Mr:No}});let ie=n[12]&&fk(n);const be=[xie,Zie],we=[];function Ae(ge,Be){return ge[13]?1:0}return se=Ae(n),Me=we[se]=be[se](n),{c(){ke(e.$$.fragment),t=U(),i=k("div"),s=k("div"),r=k("div"),o=k("div"),l=k("div"),a=q("Language"),c=U(),u=k("div"),h=U(),d=k("div"),m=k("div"),p=q("Path"),_=U(),v=k("input"),w=U(),A=k("div"),E=k("div"),C=k("button"),ke(R.$$.fragment),D=q(`
                Wizard`),N=U(),le&&le.c(),L=U(),F=k("div"),P=k("div"),Q=q("Query"),O=U(),K=k("textarea"),X=U(),J=k("div"),te=k("div"),j=k("div"),x=k("div"),Z=k("button"),ke(V.$$.fragment),ce=q(`
                  Original`),pe=U(),ie&&ie.c(),re=U(),ye=k("div"),Ne=k("div"),Y=k("div"),Ce=q("Preview"),We=U(),Me.c(),he=U(),M=k("div"),ae=k("button"),de=q("Transform"),this.h()},l(ge){Oe(e.$$.fragment,ge),t=W(ge),i=T(ge,"DIV",{class:!0});var Be=I(i);s=T(Be,"DIV",{class:!0});var ve=I(s);r=T(ve,"DIV",{class:!0});var Pe=I(r);o=T(Pe,"DIV",{class:!0});var Se=I(o);l=T(Se,"DIV",{class:!0});var tt=I(l);a=z(tt,"Language"),tt.forEach(b),Se.forEach(b),c=W(Pe),u=T(Pe,"DIV",{class:!0});var Ke=I(u);Ke.forEach(b),h=W(Pe),d=T(Pe,"DIV",{class:!0});var Ee=I(d);m=T(Ee,"DIV",{class:!0});var it=I(m);p=z(it,"Path"),it.forEach(b),Ee.forEach(b),_=W(Pe),v=T(Pe,"INPUT",{class:!0,type:!0,title:!0}),w=W(Pe),A=T(Pe,"DIV",{class:!0});var De=I(A);E=T(De,"DIV",{class:!0});var ze=I(E);C=T(ze,"BUTTON",{type:!0,class:!0});var Re=I(C);Oe(R.$$.fragment,Re),D=z(Re,`
                Wizard`),Re.forEach(b),ze.forEach(b),De.forEach(b),N=W(Pe),le&&le.l(Pe),L=W(Pe),F=T(Pe,"DIV",{class:!0});var ut=I(F);P=T(ut,"DIV",{class:!0});var Bt=I(P);Q=z(Bt,"Query"),Bt.forEach(b),ut.forEach(b),O=W(Pe),K=T(Pe,"TEXTAREA",{class:!0,spellcheck:!0}),I(K).forEach(b),Pe.forEach(b),X=W(ve),J=T(ve,"DIV",{class:!0});var gt=I(J);te=T(gt,"DIV",{class:!0});var At=I(te);j=T(At,"DIV",{class:!0});var jt=I(j);x=T(jt,"DIV",{class:!0});var nn=I(x);Z=T(nn,"BUTTON",{type:!0,class:!0});var Zt=I(Z);Oe(V.$$.fragment,Zt),ce=z(Zt,`
                  Original`),Zt.forEach(b),nn.forEach(b),jt.forEach(b),pe=W(At),ie&&ie.l(At),At.forEach(b),re=W(gt),ye=T(gt,"DIV",{class:!0});var ft=I(ye);Ne=T(ft,"DIV",{class:!0});var un=I(Ne);Y=T(un,"DIV",{class:!0});var tn=I(Y);Ce=z(tn,"Preview"),tn.forEach(b),un.forEach(b),We=W(ft),Me.l(ft),ft.forEach(b),gt.forEach(b),ve.forEach(b),he=W(Be),M=T(Be,"DIV",{class:!0});var An=I(M);ae=T(An,"BUTTON",{type:!0,class:!0});var vn=I(ae);de=z(vn,"Transform"),vn.forEach(b),An.forEach(b),Be.forEach(b),this.h()},h(){S(l,"class","jse-label-inner svelte-mr4kda"),S(o,"class","jse-label svelte-mr4kda"),S(u,"class","jse-description svelte-mr4kda"),S(m,"class","jse-label-inner svelte-mr4kda"),S(d,"class","jse-label svelte-mr4kda"),S(v,"class","jse-path svelte-mr4kda"),S(v,"type","text"),v.readOnly=!0,S(v,"title","Selected path"),v.value=y=ii(n[1])?"(whole document)":bo(n[1]),S(C,"type","button"),S(C,"class","svelte-mr4kda"),S(E,"class","jse-label-inner svelte-mr4kda"),S(A,"class","jse-label svelte-mr4kda"),S(P,"class","jse-label-inner svelte-mr4kda"),S(F,"class","jse-label svelte-mr4kda"),S(K,"class","jse-query svelte-mr4kda"),S(K,"spellcheck","false"),K.value=n[9],S(r,"class","jse-query-contents svelte-mr4kda"),S(Z,"type","button"),S(Z,"class","svelte-mr4kda"),S(x,"class","jse-label-inner svelte-mr4kda"),S(j,"class","jse-label svelte-mr4kda"),S(te,"class","jse-original-data svelte-mr4kda"),xe(te,"jse-hide",!n[12]),S(Y,"class","jse-label-inner svelte-mr4kda"),S(Ne,"class","jse-label svelte-mr4kda"),S(ye,"class","jse-preview-data svelte-mr4kda"),S(J,"class","jse-data-contents svelte-mr4kda"),xe(J,"jse-hide-original-data",!n[12]),S(s,"class","jse-main-contents svelte-mr4kda"),S(ae,"type","button"),S(ae,"class","jse-primary svelte-mr4kda"),ae.disabled=ee=!!n[13],S(M,"class","jse-actions svelte-mr4kda"),S(i,"class","jse-contents svelte-mr4kda")},m(ge,Be){Te(e,ge,Be),H(ge,t,Be),H(ge,i,Be),g(i,s),g(s,r),g(r,o),g(o,l),g(l,a),g(r,c),g(r,u),u.innerHTML=f,g(r,h),g(r,d),g(d,m),g(m,p),g(r,_),g(r,v),g(r,w),g(r,A),g(A,E),g(E,C),Te(R,C,null),g(C,D),g(r,N),le&&le.m(r,null),g(r,L),g(r,F),g(F,P),g(P,Q),g(r,O),g(r,K),g(s,X),g(s,J),g(J,te),g(te,j),g(j,x),g(x,Z),Te(V,Z,null),g(Z,ce),g(te,pe),ie&&ie.m(te,null),g(J,re),g(J,ye),g(ye,Ne),g(Ne,Y),g(Y,Ce),g(ye,We),we[se].m(ye,null),g(i,he),g(i,M),g(M,ae),g(ae,de),$=!0,ne||(me=[_e(C,"click",n[20]),_e(K,"input",n[18]),_e(Z,"click",n[21]),_e(ae,"click",n[19]),ac(tse.call(null,ae))],ne=!0)},p(ge,Be){const ve={};Be[0]&32&&(ve.queryLanguages=ge[5]),Be[0]&1&&(ve.queryLanguageId=ge[0]),e.$set(ve),(!$||Be[0]&1)&&f!==(f=ge[16](ge[0]).description+"")&&(u.innerHTML=f),(!$||Be[0]&2&&y!==(y=ii(ge[1])?"(whole document)":bo(ge[1]))&&v.value!==y)&&(v.value=y);const Pe={};Be[0]&2048&&(Pe.data=ge[11]?Mr:No),R.$set(Pe),ge[11]?le?(le.p(ge,Be),Be[0]&2048&&B(le,1)):(le=uk(ge),le.c(),B(le,1),le.m(r,L)):le&&(He(),G(le,1,1,()=>{le=null}),qe()),(!$||Be[0]&512)&&(K.value=ge[9]);const Se={};Be[0]&4096&&(Se.data=ge[12]?Mr:No),V.$set(Se),ge[12]?ie?(ie.p(ge,Be),Be[0]&4096&&B(ie,1)):(ie=fk(ge),ie.c(),B(ie,1),ie.m(te,null)):ie&&(He(),G(ie,1,1,()=>{ie=null}),qe()),(!$||Be[0]&4096)&&xe(te,"jse-hide",!ge[12]);let tt=se;se=Ae(ge),se===tt?we[se].p(ge,Be):(He(),G(we[tt],1,1,()=>{we[tt]=null}),qe(),Me=we[se],Me?Me.p(ge,Be):(Me=we[se]=be[se](ge),Me.c()),B(Me,1),Me.m(ye,null)),(!$||Be[0]&4096)&&xe(J,"jse-hide-original-data",!ge[12]),(!$||Be[0]&8192&&ee!==(ee=!!ge[13]))&&(ae.disabled=ee)},i(ge){$||(B(e.$$.fragment,ge),B(R.$$.fragment,ge),B(le),B(V.$$.fragment,ge),B(ie),B(Me),$=!0)},o(ge){G(e.$$.fragment,ge),G(R.$$.fragment,ge),G(le),G(V.$$.fragment,ge),G(ie),G(Me),$=!1},d(ge){Ie(e,ge),ge&&b(t),ge&&b(i),Ie(R),le&&le.d(),Ie(V),ie&&ie.d(),we[se].d(),ne=!1,an(me)}}}function ese(n){let e,t,i;return t=new nR({props:{$$slots:{default:[$ie]},$$scope:{ctx:n}}}),{c(){e=k("div"),ke(t.$$.fragment),this.h()},l(s){e=T(s,"DIV",{class:!0});var r=I(e);Oe(t.$$.fragment,r),r.forEach(b),this.h()},h(){S(e,"class","jse-modal jse-transform svelte-mr4kda")},m(s,r){H(s,e,r),Te(t,e,null),i=!0},p(s,r){const o={};r[0]&65535|r[1]&16&&(o.$$scope={dirty:r,ctx:s}),t.$set(o)},i(s){i||(B(t.$$.fragment,s),i=!0)},o(s){G(t.$$.fragment,s),i=!1},d(s){s&&b(e),Ie(t)}}}function tse(n){n.focus()}function nse(n,e,t){let i,s;const r=Is("jsoneditor:TransformModal");let{id:o="transform-modal-"+nu()}=e,{json:l}=e,{selectedPath:a=[]}=e,{escapeControlCharacters:c}=e,{escapeUnicodeCharacters:u}=e,{parser:f}=e,{queryLanguages:h}=e,{queryLanguageId:d}=e,{onChangeQueryLanguage:m}=e,{onRenderValue:p}=e,{onClassName:_}=e,{onTransform:v}=e;const{close:y}=Bn("simple-modal"),w=`${o}:${ht(a)}`,A=fr[w]||{};let E=fr.showWizard!==!1,C=fr.showOriginal!==!1,R=A.queryOptions||{},D=d===A.queryLanguageId&&A.query?A.query:P(d).createQuery(l,A.queryOptions||{}),N=A.isManual||!1,L,F={text:""};function P(Z){return h.find(V=>V.id===Z)||h[0]}function Q(Z){t(8,R=Z),t(9,D=P(d).createQuery(l,Z)),t(28,N=!1),r("updateQueryByWizard",{queryOptions:R,query:D,isManual:N})}function O(Z){t(9,D=Z.target.value),t(28,N=!0),r("handleChangeQuery",{query:D,isManual:N})}function K(Z,V){try{r("previewTransform",{query:V});const ce=P(d).executeQuery(Z,V);t(14,F={json:ce}),t(13,L=void 0)}catch(ce){t(14,F={text:""}),t(13,L=ce)}}const X=jm(K,Z4);function J(){try{r("handleTransform",{query:D});const Z=P(d).executeQuery(i,D);v([{op:"replace",path:ht(a),value:Z}]),y()}catch(Z){console.error(Z),t(14,F={text:""}),t(13,L=Z.toString())}}function te(){t(11,E=!E),t(27,fr.showWizard=E,fr)}function j(){t(12,C=!C),t(27,fr.showOriginal=C,fr)}function x(Z){r("handleChangeQueryLanguage",Z),t(0,d=Z),m(Z);const V=P(d);t(9,D=V.createQuery(l,R)),t(28,N=!1)}return n.$$set=Z=>{"id"in Z&&t(23,o=Z.id),"json"in Z&&t(24,l=Z.json),"selectedPath"in Z&&t(1,a=Z.selectedPath),"escapeControlCharacters"in Z&&t(2,c=Z.escapeControlCharacters),"escapeUnicodeCharacters"in Z&&t(3,u=Z.escapeUnicodeCharacters),"parser"in Z&&t(4,f=Z.parser),"queryLanguages"in Z&&t(5,h=Z.queryLanguages),"queryLanguageId"in Z&&t(0,d=Z.queryLanguageId),"onChangeQueryLanguage"in Z&&t(25,m=Z.onChangeQueryLanguage),"onRenderValue"in Z&&t(6,p=Z.onRenderValue),"onClassName"in Z&&t(7,_=Z.onClassName),"onTransform"in Z&&t(26,v=Z.onTransform)},n.$$.update=()=>{n.$$.dirty[0]&16777218&&t(10,i=wt(l,a)),n.$$.dirty[0]&1024&&t(15,s={json:i}),n.$$.dirty[0]&1536&&X(i,D),n.$$.dirty[0]&402653953&&(t(27,fr[w]={queryOptions:R,query:D,queryLanguageId:d,isManual:N},fr),r("store state in memory",w,fr[w]))},[d,a,c,u,f,h,p,_,R,D,i,E,C,L,F,s,P,Q,O,J,te,j,x,o,l,m,v,fr,N]}class ise extends st{constructor(e){super(),rt(this,e,nse,ese,cn,{id:23,json:24,selectedPath:1,escapeControlCharacters:2,escapeUnicodeCharacters:3,parser:4,queryLanguages:5,queryLanguageId:0,onChangeQueryLanguage:25,onRenderValue:6,onClassName:7,onTransform:26},null,[-1,-1])}}const sse=ise,Co={};function hk(n){let e,t,i,s,r,o,l,a;function c(f){n[13](f)}let u={showIndicator:!0,items:n[4]};return n[1]!==void 0&&(u.value=n[1]),o=new vl({props:u}),Ut.push(()=>Ws(o,"value",c)),{c(){e=k("tr"),t=k("th"),i=q("Property"),s=U(),r=k("td"),ke(o.$$.fragment),this.h()},l(f){e=T(f,"TR",{});var h=I(e);t=T(h,"TH",{class:!0});var d=I(t);i=z(d,"Property"),d.forEach(b),s=W(h),r=T(h,"TD",{class:!0});var m=I(r);Oe(o.$$.fragment,m),m.forEach(b),h.forEach(b),this.h()},h(){S(t,"class","svelte-j8vz8h"),S(r,"class","svelte-j8vz8h")},m(f,h){H(f,e,h),g(e,t),g(t,i),g(e,s),g(e,r),Te(o,r,null),a=!0},p(f,h){const d={};h&16&&(d.items=f[4]),!l&&h&2&&(l=!0,d.value=f[1],Js(()=>l=!1)),o.$set(d)},i(f){a||(B(o.$$.fragment,f),a=!0)},o(f){G(o.$$.fragment,f),a=!1},d(f){f&&b(e),Ie(o)}}}function dk(n){let e,t;return{c(){e=k("div"),t=q(n[5]),this.h()},l(i){e=T(i,"DIV",{class:!0});var s=I(e);t=z(s,n[5]),s.forEach(b),this.h()},h(){S(e,"class","jse-error svelte-j8vz8h")},m(i,s){H(i,e,s),g(e,t)},p(i,s){s&32&&Le(t,i[5])},d(i){i&&b(e)}}}function rse(n){let e,t,i,s,r,o,l,a,c,u,f,h,d,m,p,_,v,y,w,A,E,C,R,D,N,L,F,P,Q,O,K,X,J,te,j,x,Z;t=new yN({props:{title:n[3]?"Sort array items":"Sort object keys"}});let V=n[3]&&(n[4].length>1||n[1]===void 0)&&hk(n);function ce(ye){n[14](ye)}let pe={showIndicator:!0,items:n[6],isClearable:!1};n[2]!==void 0&&(pe.value=n[2]),L=new vl({props:pe}),Ut.push(()=>Ws(L,"value",ce));let re=n[5]&&dk(n);return{c(){e=k("div"),ke(t.$$.fragment),i=U(),s=k("div"),r=k("table"),o=k("colgroup"),l=k("col"),a=U(),c=k("col"),u=U(),f=k("tbody"),h=k("tr"),d=k("th"),m=q("Path"),p=U(),_=k("td"),v=k("input"),w=U(),V&&V.c(),A=U(),E=k("tr"),C=k("th"),R=q("Direction"),D=U(),N=k("td"),ke(L.$$.fragment),P=U(),Q=k("div"),re&&re.c(),O=U(),K=k("div"),X=k("button"),J=q("Sort"),this.h()},l(ye){e=T(ye,"DIV",{class:!0});var Ne=I(e);Oe(t.$$.fragment,Ne),i=W(Ne),s=T(Ne,"DIV",{class:!0});var Y=I(s);r=T(Y,"TABLE",{class:!0});var Ce=I(r);o=T(Ce,"COLGROUP",{});var We=I(o);l=T(We,"COL",{width:!0}),a=W(We),c=T(We,"COL",{width:!0}),We.forEach(b),u=W(Ce),f=T(Ce,"TBODY",{});var se=I(f);h=T(se,"TR",{});var Me=I(h);d=T(Me,"TH",{class:!0});var he=I(d);m=z(he,"Path"),he.forEach(b),p=W(Me),_=T(Me,"TD",{class:!0});var M=I(_);v=T(M,"INPUT",{class:!0,type:!0,title:!0}),M.forEach(b),Me.forEach(b),w=W(se),V&&V.l(se),A=W(se),E=T(se,"TR",{});var ae=I(E);C=T(ae,"TH",{class:!0});var de=I(C);R=z(de,"Direction"),de.forEach(b),D=W(ae),N=T(ae,"TD",{class:!0});var ee=I(N);Oe(L.$$.fragment,ee),ee.forEach(b),ae.forEach(b),se.forEach(b),Ce.forEach(b),P=W(Y),Q=T(Y,"DIV",{class:!0});var $=I(Q);re&&re.l($),$.forEach(b),O=W(Y),K=T(Y,"DIV",{class:!0});var ne=I(K);X=T(ne,"BUTTON",{type:!0,class:!0});var me=I(X);J=z(me,"Sort"),me.forEach(b),ne.forEach(b),Y.forEach(b),Ne.forEach(b),this.h()},h(){S(l,"width","25%"),S(c,"width","75%"),S(d,"class","svelte-j8vz8h"),S(v,"class","jse-path svelte-j8vz8h"),S(v,"type","text"),v.readOnly=!0,S(v,"title","Selected path"),v.value=y=ii(n[0])?"(whole document)":bo(n[0]),S(_,"class","svelte-j8vz8h"),S(C,"class","svelte-j8vz8h"),S(N,"class","svelte-j8vz8h"),S(r,"class","svelte-j8vz8h"),S(Q,"class","jse-space svelte-j8vz8h"),S(X,"type","button"),S(X,"class","jse-primary svelte-j8vz8h"),X.disabled=te=n[3]?!n[1]:!1,S(K,"class","jse-actions svelte-j8vz8h"),S(s,"class","jse-contents svelte-j8vz8h"),S(e,"class","jse-modal jse-sort svelte-j8vz8h")},m(ye,Ne){H(ye,e,Ne),Te(t,e,null),g(e,i),g(e,s),g(s,r),g(r,o),g(o,l),g(o,a),g(o,c),g(r,u),g(r,f),g(f,h),g(h,d),g(d,m),g(h,p),g(h,_),g(_,v),g(f,w),V&&V.m(f,null),g(f,A),g(f,E),g(E,C),g(C,R),g(E,D),g(E,N),Te(L,N,null),g(s,P),g(s,Q),re&&re.m(Q,null),g(s,O),g(s,K),g(K,X),g(X,J),j=!0,x||(Z=[_e(X,"click",n[7]),ac(ose.call(null,X))],x=!0)},p(ye,[Ne]){const Y={};Ne&8&&(Y.title=ye[3]?"Sort array items":"Sort object keys"),t.$set(Y),(!j||Ne&1&&y!==(y=ii(ye[0])?"(whole document)":bo(ye[0]))&&v.value!==y)&&(v.value=y),ye[3]&&(ye[4].length>1||ye[1]===void 0)?V?(V.p(ye,Ne),Ne&26&&B(V,1)):(V=hk(ye),V.c(),B(V,1),V.m(f,A)):V&&(He(),G(V,1,1,()=>{V=null}),qe());const Ce={};!F&&Ne&4&&(F=!0,Ce.value=ye[2],Js(()=>F=!1)),L.$set(Ce),ye[5]?re?re.p(ye,Ne):(re=dk(ye),re.c(),re.m(Q,null)):re&&(re.d(1),re=null),(!j||Ne&10&&te!==(te=ye[3]?!ye[1]:!1))&&(X.disabled=te)},i(ye){j||(B(t.$$.fragment,ye),B(V),B(L.$$.fragment,ye),j=!0)},o(ye){G(t.$$.fragment,ye),G(V),G(L.$$.fragment,ye),j=!1},d(ye){ye&&b(e),Ie(t),V&&V.d(),Ie(L),re&&re.d(),x=!1,an(Z)}}}function ose(n){n.focus()}function lse(n,e,t){let i,s,r;const o=Is("jsoneditor:SortModal");let{id:l}=e,{json:a}=e,{selectedPath:c}=e,{onSort:u}=e;const{close:f}=Bn("simple-modal"),h=`${l}:${ht(c)}`,d=wt(a,c),m={value:1,label:"ascending"},_=[m,{value:-1,label:"descending"}];let v=Co[h]&&Co[h].selectedProperty||void 0,y=Co[h]&&Co[h].selectedDirection||m,w;function A(){try{if(t(5,w=void 0),i){if(!v)return;const R=v.value,D=y.value,N=Kte(a,c,R,D);u(N)}else if(ji(d)){const R=y.value,D=Gte(a,c,R);u(D)}else console.error("Cannot sort: no array or object");f()}catch(R){t(5,w=R.toString())}}function E(R){v=R,t(1,v),t(4,r),t(12,s),t(3,i)}function C(R){y=R,t(2,y)}return n.$$set=R=>{"id"in R&&t(8,l=R.id),"json"in R&&t(9,a=R.json),"selectedPath"in R&&t(0,c=R.selectedPath),"onSort"in R&&t(10,u=R.onSort)},n.$$.update=()=>{n.$$.dirty&8&&t(12,s=i?S1(d):void 0),n.$$.dirty&4096&&t(4,r=s?s.map(ga):void 0),n.$$.dirty&18&&v===void 0&&r&&r.length===1&&t(1,v=r[0]),n.$$.dirty&2054&&(t(11,Co[h]={selectedProperty:v,selectedDirection:y},Co),o("store state in memory",h,Co[h]))},t(3,i=Array.isArray(d)),[c,v,y,i,r,w,_,A,l,a,u,Co,s,E,C]}class ase extends st{constructor(e){super(),rt(this,e,lse,rse,cn,{id:8,json:9,selectedPath:0,onSort:10})}}const cse=ase;function use(n,e,t){const i=Bn("simple-modal"),s=i.open,r=i.close;return[s,r]}class fse extends st{constructor(e){super(),rt(this,e,use,null,cn,{open:0,close:1})}get open(){return this.$$.ctx[0]}get close(){return this.$$.ctx[1]}}const hse=fse;function dse(n){let e,t,i={readOnly:n[2],indentation:n[3],externalContent:n[0],mainMenuBar:n[5],navigationBar:n[6],escapeControlCharacters:n[8],escapeUnicodeCharacters:n[9],parser:n[10],validator:n[11],validationParser:n[12],pathParser:n[13],onError:n[16],onChange:n[24],onRequestRepair:n[25],onRenderValue:n[14],onClassName:n[15],onFocus:n[27],onBlur:n[28],onRenderMenu:n[23],onSortModal:n[30],onTransformModal:n[29]};return e=new Gb({props:i}),n[57](e),{c(){ke(e.$$.fragment)},l(s){Oe(e.$$.fragment,s)},m(s,r){Te(e,s,r),t=!0},p(s,r){const o={};r[0]&4&&(o.readOnly=s[2]),r[0]&8&&(o.indentation=s[3]),r[0]&1&&(o.externalContent=s[0]),r[0]&32&&(o.mainMenuBar=s[5]),r[0]&64&&(o.navigationBar=s[6]),r[0]&256&&(o.escapeControlCharacters=s[8]),r[0]&512&&(o.escapeUnicodeCharacters=s[9]),r[0]&1024&&(o.parser=s[10]),r[0]&2048&&(o.validator=s[11]),r[0]&4096&&(o.validationParser=s[12]),r[0]&8192&&(o.pathParser=s[13]),r[0]&65536&&(o.onError=s[16]),r[0]&16384&&(o.onRenderValue=s[14]),r[0]&32768&&(o.onClassName=s[15]),r[0]&8388608&&(o.onRenderMenu=s[23]),e.$set(o)},i(s){t||(B(e.$$.fragment,s),t=!0)},o(s){G(e.$$.fragment,s),t=!1},d(s){n[57](null),Ie(e,s)}}}function mse(n){let e,t,i={externalContent:n[0],readOnly:n[2],indentation:n[3],tabSize:n[4],mainMenuBar:n[5],statusBar:n[7],escapeUnicodeCharacters:n[9],parser:n[10],validator:n[11],validationParser:n[12],onChange:n[24],onSwitchToTreeMode:n[26],onError:n[16],onFocus:n[27],onBlur:n[28],onRenderMenu:n[23],onSortModal:n[30],onTransformModal:n[29]};return e=new u$({props:i}),n[56](e),{c(){ke(e.$$.fragment)},l(s){Oe(e.$$.fragment,s)},m(s,r){Te(e,s,r),t=!0},p(s,r){const o={};r[0]&1&&(o.externalContent=s[0]),r[0]&4&&(o.readOnly=s[2]),r[0]&8&&(o.indentation=s[3]),r[0]&16&&(o.tabSize=s[4]),r[0]&32&&(o.mainMenuBar=s[5]),r[0]&128&&(o.statusBar=s[7]),r[0]&512&&(o.escapeUnicodeCharacters=s[9]),r[0]&1024&&(o.parser=s[10]),r[0]&2048&&(o.validator=s[11]),r[0]&4096&&(o.validationParser=s[12]),r[0]&65536&&(o.onError=s[16]),r[0]&8388608&&(o.onRenderMenu=s[23]),e.$set(o)},i(s){t||(B(e.$$.fragment,s),t=!0)},o(s){G(e.$$.fragment,s),t=!1},d(s){n[56](null),Ie(e,s)}}}function mk(n){let e,t,i,s;const r=[mse,dse],o=[];function l(a,c){return a[1]===Xs.text||a[1]==="code"?0:1}return e=l(n),t=o[e]=r[e](n),{c(){t.c(),i=et()},l(a){t.l(a),i=et()},m(a,c){o[e].m(a,c),H(a,i,c),s=!0},p(a,c){let u=e;e=l(a),e===u?o[e].p(a,c):(He(),G(o[u],1,1,()=>{o[u]=null}),qe(),t=o[e],t?t.p(a,c):(t=o[e]=r[e](a),t.c()),B(t,1),t.m(i.parentNode,i))},i(a){s||(B(t),s=!0)},o(a){G(t),s=!1},d(a){o[e].d(a),a&&b(i)}}}function pse(n){let e,t=n[17],i,s=mk(n);return{c(){e=k("div"),s.c(),this.h()},l(r){e=T(r,"DIV",{class:!0});var o=I(e);s.l(o),o.forEach(b),this.h()},h(){S(e,"class","jse-main svelte-qi4kho"),xe(e,"jse-focus",n[18])},m(r,o){H(r,e,o),s.m(e,null),n[58](e),i=!0},p(r,o){o[0]&131072&&cn(t,t=r[17])?(He(),G(s,1,1,Xe),qe(),s=mk(r),s.c(),B(s,1),s.m(e,null)):s.p(r,o),(!i||o[0]&262144)&&xe(e,"jse-focus",r[18])},i(r){i||(B(s),i=!0)},o(r){G(s),i=!1},d(r){r&&b(e),s.d(r),n[58](null)}}}function gse(n){let e,t,i,s,r;function o(a){n[55](a)}let l={};return n[22]!==void 0&&(l.open=n[22]),e=new hse({props:l}),Ut.push(()=>Ws(e,"open",o)),s=new nR({props:{$$slots:{default:[pse]},$$scope:{ctx:n}}}),{c(){ke(e.$$.fragment),i=U(),ke(s.$$.fragment)},l(a){Oe(e.$$.fragment,a),i=W(a),Oe(s.$$.fragment,a)},m(a,c){Te(e,a,c),H(a,i,c),Te(s,a,c),r=!0},p(a,c){const u={};!t&&c[0]&4194304&&(t=!0,u.open=a[22],Js(()=>t=!1)),e.$set(u);const f={};c[0]&12582911|c[2]&2&&(f.$$scope={dirty:c,ctx:a}),s.$set(f)},i(a){r||(B(e.$$.fragment,a),B(s.$$.fragment,a),r=!0)},o(a){G(e.$$.fragment,a),G(s.$$.fragment,a),r=!1},d(a){Ie(e,a),a&&b(i),Ie(s,a)}}}function vse(n){let e,t;return e=new wU({props:{$$slots:{default:[gse]},$$scope:{ctx:n}}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,s){const r={};s[0]&16777215|s[2]&2&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function CN(n){this.$set(n)}function kN(){this.$destroy()}function bse(n,e,t){let i;const s=Is("jsoneditor:Main");let{content:r={text:""}}=e,{readOnly:o=!1}=e,{indentation:l=2}=e,{tabSize:a=4}=e,{mode:c=Xs.tree}=e,{mainMenuBar:u=!0}=e,{navigationBar:f=!0}=e,{statusBar:h=!0}=e,{escapeControlCharacters:d=!1}=e,{escapeUnicodeCharacters:m=!1}=e,{parser:p=JSON}=e,{validator:_=null}=e,{validationParser:v=JSON}=e,{pathParser:y={parse:PG,stringify:bo}}=e,{queryLanguages:w=[Rne]}=e,{queryLanguageId:A=w[0].id}=e,{onChangeQueryLanguage:E=Hn}=e,{onChange:C=null}=e,{onRenderValue:R=rie}=e,{onClassName:D=()=>{}}=e,{onRenderMenu:N=Hn}=e,{onChangeMode:L=Hn}=e,{onError:F=ve=>{console.error(ve),alert(ve.toString())}}=e,{onFocus:P=Hn}=e,{onBlur:Q=Hn}=e,O=nu(),K=!1,X,J,te,j,x=p;function Z(){return r}function V(ve){s("set");const Pe=Rp(ve);if(Pe)throw new Error(Pe);t(17,O=nu()),t(0,r=ve)}function ce(ve){s("update");const Pe=Rp(ve);if(Pe)throw new Error(Pe);t(0,r=ve)}function pe(ve){if(Yv(r))try{t(0,r={json:p.parse(r.text),text:void 0})}catch{throw new Error("Cannot apply patch: current document contains invalid JSON")}if(J)return J.patch(ve);if(te)return te.patch(ve)}function re(ve){if(J)return J.expand(ve);throw new Error(`Method expand is not available in mode "${c}"`)}function ye(ve){if(te)te.openTransformModal(ve);else if(J)J.openTransformModal(ve);else throw new Error(`Method transform is not available in mode "${c}"`)}function Ne(){if(te)return te.validate();if(J)return J.validate();throw new Error(`Method validate is not available in mode "${c}"`)}function Y(){return J?J.acceptAutoRepair():r}function Ce(ve){if(J)return J.scrollTo(ve);throw new Error(`Method scrollTo is not available in mode "${c}"`)}function We(ve){if(J)return J.findElement(ve);throw new Error(`Method findElement is not available in mode "${c}"`)}function se(){te?te.focus():J&&J.focus()}function Me(){te&&te.refresh()}function he(ve,Pe,Se){t(0,r=ve),C&&C(ve,Pe,Se)}async function M(){t(1,c=Xs.text),await oi(),L(Xs.text)}async function ae(){t(1,c=Xs.tree),await oi(),L(Xs.tree)}function de(){t(18,K=!0),P&&P()}function ee(){t(18,K=!1),Q&&Q()}async function $(ve){c!==ve&&(t(1,c=ve),await oi(),se(),L(ve))}let ne;const me={separator:!0};function le(ve){s("handleChangeQueryLanguage",ve),t(31,A=ve),E(ve)}function ie({id:ve,json:Pe,selectedPath:Se,onTransform:tt,onClose:Ke}){o||j(sse,{id:ve,json:Pe,selectedPath:Se,escapeControlCharacters:d,escapeUnicodeCharacters:m,parser:p,queryLanguages:w,queryLanguageId:A,onChangeQueryLanguage:le,onRenderValue:R,onClassName:D,onTransform:tt},NU,{onClose:Ke})}function be({id:ve,json:Pe,selectedPath:Se,onSort:tt,onClose:Ke}){o||j(cse,{id:ve,json:Pe,selectedPath:Se,onSort:tt},DU,{onClose:Ke})}function we(ve){j=ve,t(22,j)}function Ae(ve){Ut[ve?"unshift":"push"](()=>{te=ve,t(21,te)})}function ge(ve){Ut[ve?"unshift":"push"](()=>{J=ve,t(20,J)})}function Be(ve){Ut[ve?"unshift":"push"](()=>{X=ve,t(19,X)})}return n.$$set=ve=>{"content"in ve&&t(0,r=ve.content),"readOnly"in ve&&t(2,o=ve.readOnly),"indentation"in ve&&t(3,l=ve.indentation),"tabSize"in ve&&t(4,a=ve.tabSize),"mode"in ve&&t(1,c=ve.mode),"mainMenuBar"in ve&&t(5,u=ve.mainMenuBar),"navigationBar"in ve&&t(6,f=ve.navigationBar),"statusBar"in ve&&t(7,h=ve.statusBar),"escapeControlCharacters"in ve&&t(8,d=ve.escapeControlCharacters),"escapeUnicodeCharacters"in ve&&t(9,m=ve.escapeUnicodeCharacters),"parser"in ve&&t(10,p=ve.parser),"validator"in ve&&t(11,_=ve.validator),"validationParser"in ve&&t(12,v=ve.validationParser),"pathParser"in ve&&t(13,y=ve.pathParser),"queryLanguages"in ve&&t(32,w=ve.queryLanguages),"queryLanguageId"in ve&&t(31,A=ve.queryLanguageId),"onChangeQueryLanguage"in ve&&t(33,E=ve.onChangeQueryLanguage),"onChange"in ve&&t(34,C=ve.onChange),"onRenderValue"in ve&&t(14,R=ve.onRenderValue),"onClassName"in ve&&t(15,D=ve.onClassName),"onRenderMenu"in ve&&t(35,N=ve.onRenderMenu),"onChangeMode"in ve&&t(36,L=ve.onChangeMode),"onError"in ve&&t(16,F=ve.onError),"onFocus"in ve&&t(37,P=ve.onFocus),"onBlur"in ve&&t(38,Q=ve.onBlur)},n.$$.update=()=>{if(n.$$.dirty[0]&1){const ve=Rp(r);ve&&console.error("Error: "+ve)}n.$$.dirty[0]&1024|n.$$.dirty[1]&4194304&&(vz(p,x)||(s("parser changed, recreate editor"),t(53,x=p),t(17,O=nu()))),n.$$.dirty[0]&2&&t(54,ne=[{text:"text",title:`Switch to text mode (current mode: ${c})`,className:"jse-group-button jse-first"+(c===Xs.text||c==="code"?" jse-selected":""),onClick:()=>$(Xs.text)},{text:"tree",title:`Switch to tree mode (current mode: ${c})`,className:"jse-group-button jse-last"+(c===Xs.tree?" jse-selected":""),onClick:()=>$(Xs.tree)}]),n.$$.dirty[1]&8388624&&t(23,i=(ve,Pe)=>{const Se=Zx(Pe[0])?ne.concat(Pe):ne.concat(me,Pe);return N(ve,Se)||Se}),n.$$.dirty[0]&2&&(s("mode changed to",c),c==="code"&&console.warn('Deprecation warning: "code" mode is renamed to "text". Please use mode="text" instead.'))},[r,c,o,l,a,u,f,h,d,m,p,_,v,y,R,D,F,O,K,X,J,te,j,i,he,M,ae,de,ee,ie,be,A,w,E,C,N,L,P,Q,Z,V,ce,pe,re,ye,Ne,Y,Ce,We,se,Me,CN,kN,x,ne,we,Ae,ge,Be]}class _se extends st{constructor(e){super(),rt(this,e,bse,vse,cn,{content:0,readOnly:2,indentation:3,tabSize:4,mode:1,mainMenuBar:5,navigationBar:6,statusBar:7,escapeControlCharacters:8,escapeUnicodeCharacters:9,parser:10,validator:11,validationParser:12,pathParser:13,queryLanguages:32,queryLanguageId:31,onChangeQueryLanguage:33,onChange:34,onRenderValue:14,onClassName:15,onRenderMenu:35,onChangeMode:36,onError:16,onFocus:37,onBlur:38,get:39,set:40,update:41,patch:42,expand:43,transform:44,validate:45,acceptAutoRepair:46,scrollTo:47,findElement:48,focus:49,refresh:50,updateProps:51,destroy:52},null,[-1,-1,-1])}get get(){return this.$$.ctx[39]}get set(){return this.$$.ctx[40]}get update(){return this.$$.ctx[41]}get patch(){return this.$$.ctx[42]}get expand(){return this.$$.ctx[43]}get transform(){return this.$$.ctx[44]}get validate(){return this.$$.ctx[45]}get acceptAutoRepair(){return this.$$.ctx[46]}get scrollTo(){return this.$$.ctx[47]}get findElement(){return this.$$.ctx[48]}get focus(){return this.$$.ctx[49]}get refresh(){return this.$$.ctx[50]}get updateProps(){return CN}get destroy(){return kN}}const yse=_se;function mh(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}function pk(n){let e,t;return e=new yse({props:{content:n[2],mode:"code",onChange:n[5]}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,s){const r={};s&4&&(r.content=i[2]),s&4&&(r.onChange=i[5]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function Sse(n){let e,t,i,s,r,o,l,a,c=n[0],u,f,h,d=pk(n);return{c(){e=k("div"),t=k("div"),i=k("h1"),s=q("Edit your character sheet manually"),r=U(),o=k("button"),l=q("Commit Changes"),a=U(),d.c(),this.h()},l(m){e=T(m,"DIV",{class:!0});var p=I(e);t=T(p,"DIV",{class:!0});var _=I(t);i=T(_,"H1",{});var v=I(i);s=z(v,"Edit your character sheet manually"),v.forEach(b),r=W(_),o=T(_,"BUTTON",{});var y=I(o);l=z(y,"Commit Changes"),y.forEach(b),_.forEach(b),a=W(p),d.l(p),p.forEach(b),this.h()},h(){S(t,"class","content"),S(e,"class","container svelte-1sggtte")},m(m,p){H(m,e,p),g(e,t),g(t,i),g(i,s),g(t,r),g(t,o),g(o,l),g(e,a),d.m(e,null),u=!0,f||(h=_e(o,"click",n[4]),f=!0)},p(m,[p]){p&1&&kt(c,c=m[0])?(He(),G(d,1,1,Xe),qe(),d=pk(m),d.c(),B(d,1),d.m(e,null)):d.p(m,p)},i(m){u||(B(d),u=!0)},o(m){G(d),u=!1},d(m){m&&b(e),d.d(m),f=!1,h()}}}function Ese(n,e,t){let{fullSheet:i}=e,{onChangeSheet:s}=e,r={current:null},o;const l=()=>{let c=o.json;if(o.text)try{c=JSON.parse(o.text)}catch{alert("failed to parse the editor text")}else o.json?c=o.json:alert("failed to parse the editor at all");if(c)if(confirm("Are you sure you want to update your sheet? Your sheet will be downloaded as a back up before the change is committed"))V4(i,"BACKUP-"),s(c);else return},a=c=>{t(2,o=c)};return n.$$set=c=>{"fullSheet"in c&&t(0,i=c.fullSheet),"onChangeSheet"in c&&t(1,s=c.onChangeSheet)},n.$$.update=()=>{n.$$.dirty&9&&r.current!==i&&(t(3,r.current=i,r),t(2,o={json:i}))},[i,s,o,r,l,a]}class wse extends st{constructor(e){super(),rt(this,e,Ese,Sse,kt,{fullSheet:0,onChangeSheet:1})}}function gk(n,e,t){const i=n.slice();return i[12]=e[t],i}function vk(n){let e,t,i;return{c(){e=k("img"),this.h()},l(s){e=T(s,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){var s;S(e,"class",t=Ze(`icon ${(s=n[3])!=null&&s.has(n[12])?"equipped":"not-equipped"}`)+" svelte-tg3npo"),Pl(e.src,i=nd[n[12]])||S(e,"src",i),S(e,"alt","icon")},m(s,r){H(s,e,r)},p(s,r){var o;r&136&&t!==(t=Ze(`icon ${(o=s[3])!=null&&o.has(s[12])?"equipped":"not-equipped"}`)+" svelte-tg3npo")&&S(e,"class",t),r&128&&!Pl(e.src,i=nd[s[12]])&&S(e,"src",i)},d(s){s&&b(e)}}}function bk(n){let e,t=nd[n[12]]&&vk(n);return{c(){t&&t.c(),e=et()},l(i){t&&t.l(i),e=et()},m(i,s){t&&t.m(i,s),H(i,e,s)},p(i,s){nd[i[12]]?t?t.p(i,s):(t=vk(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(i){t&&t.d(i),i&&b(e)}}}function _k(n){var l,a;let e,t,i,s=((l=n[4][n[0]])==null?void 0:l.reason)&&yk(n),r=n[6]&&Sk(n),o=((a=n[4][n[0]])==null?void 0:a.description)&&Ek(n);return{c(){e=k("div"),s&&s.c(),t=U(),r&&r.c(),i=U(),o&&o.c(),this.h()},l(c){e=T(c,"DIV",{class:!0});var u=I(e);s&&s.l(u),t=W(u),r&&r.l(u),i=W(u),o&&o.l(u),u.forEach(b),this.h()},h(){S(e,"class","description svelte-tg3npo")},m(c,u){H(c,e,u),s&&s.m(e,null),g(e,t),r&&r.m(e,null),g(e,i),o&&o.m(e,null)},p(c,u){var f,h;(f=c[4][c[0]])!=null&&f.reason?s?s.p(c,u):(s=yk(c),s.c(),s.m(e,t)):s&&(s.d(1),s=null),c[6]?r?r.p(c,u):(r=Sk(c),r.c(),r.m(e,i)):r&&(r.d(1),r=null),(h=c[4][c[0]])!=null&&h.description?o?o.p(c,u):(o=Ek(c),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},d(c){c&&b(e),s&&s.d(),r&&r.d(),o&&o.d()}}}function yk(n){let e,t=n[4][n[0]].reason+"",i,s,r;return{c(){e=k("div"),i=q(t),s=U(),r=k("br"),this.h()},l(o){e=T(o,"DIV",{class:!0});var l=I(e);i=z(l,t),l.forEach(b),s=W(o),r=T(o,"BR",{}),this.h()},h(){S(e,"class","reason svelte-tg3npo")},m(o,l){H(o,e,l),g(e,i),H(o,s,l),H(o,r,l)},p(o,l){l&17&&t!==(t=o[4][o[0]].reason+"")&&Le(i,t)},d(o){o&&b(e),o&&b(s),o&&b(r)}}}function Sk(n){let e,t;return{c(){e=k("span"),t=q(n[6])},l(i){e=T(i,"SPAN",{});var s=I(e);t=z(s,n[6]),s.forEach(b)},m(i,s){H(i,e,s),g(e,t)},p(i,s){s&64&&Le(t,i[6])},d(i){i&&b(e)}}}function Ek(n){let e,t,i=n[4][n[0]].description+"",s,r=n[6]&&wk();return{c(){r&&r.c(),e=U(),t=k("div"),s=q(i),this.h()},l(o){r&&r.l(o),e=W(o),t=T(o,"DIV",{class:!0});var l=I(t);s=z(l,i),l.forEach(b),this.h()},h(){S(t,"class","description-extra svelte-tg3npo")},m(o,l){r&&r.m(o,l),H(o,e,l),H(o,t,l),g(t,s)},p(o,l){o[6]?r||(r=wk(),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),l&17&&i!==(i=o[4][o[0]].description+"")&&Le(s,i)},d(o){r&&r.d(o),o&&b(e),o&&b(t)}}}function wk(n){let e;return{c(){e=k("br")},l(t){e=T(t,"BR",{})},m(t,i){H(t,e,i)},d(t){t&&b(e)}}}function Ase(n){let e,t,i,s,r=n[4][n[0]].label+"",o,l,a,c,u,f,h,d,m,p,_,v,y=n[7],w=[];for(let E=0;E<y.length;E+=1)w[E]=bk(gk(n,y,E));d=new Im({props:{isEquipped:n[1].includes(n[0]),onClick:n[11],isVisible:n[1].length<po||n[1].includes(n[0])}});let A=n[5]&&_k(n);return{c(){e=k("div"),t=k("div"),i=k("div"),s=k("span"),o=q(r),l=U();for(let E=0;E<w.length;E+=1)w[E].c();a=U(),c=k("div"),u=q("v"),h=U(),ke(d.$$.fragment),m=U(),A&&A.c(),this.h()},l(E){e=T(E,"DIV",{class:!0});var C=I(e);t=T(C,"DIV",{class:!0});var R=I(t);i=T(R,"DIV",{class:!0});var D=I(i);s=T(D,"SPAN",{});var N=I(s);o=z(N,r),N.forEach(b),l=W(D);for(let F=0;F<w.length;F+=1)w[F].l(D);D.forEach(b),a=W(R),c=T(R,"DIV",{class:!0});var L=I(c);u=z(L,"v"),L.forEach(b),h=W(R),Oe(d.$$.fragment,R),R.forEach(b),m=W(C),A&&A.l(C),C.forEach(b),this.h()},h(){S(i,"class","label svelte-tg3npo"),S(c,"class",f=Ze(`caret ${n[5]?"":"flip"}`)+" svelte-tg3npo"),S(t,"class","content svelte-tg3npo"),S(e,"class","container svelte-tg3npo")},m(E,C){H(E,e,C),g(e,t),g(t,i),g(i,s),g(s,o),g(i,l);for(let R=0;R<w.length;R+=1)w[R].m(i,null);g(t,a),g(t,c),g(c,u),g(t,h),Te(d,t,null),g(e,m),A&&A.m(e,null),p=!0,_||(v=[_e(i,"click",n[9]),_e(c,"click",n[10])],_=!0)},p(E,[C]){if((!p||C&17)&&r!==(r=E[4][E[0]].label+"")&&Le(o,r),C&136){y=E[7];let D;for(D=0;D<y.length;D+=1){const N=gk(E,y,D);w[D]?w[D].p(N,C):(w[D]=bk(N),w[D].c(),w[D].m(i,null))}for(;D<w.length;D+=1)w[D].d(1);w.length=y.length}(!p||C&32&&f!==(f=Ze(`caret ${E[5]?"":"flip"}`)+" svelte-tg3npo"))&&S(c,"class",f);const R={};C&3&&(R.isEquipped=E[1].includes(E[0])),C&5&&(R.onClick=E[11]),C&3&&(R.isVisible=E[1].length<po||E[1].includes(E[0])),d.$set(R),E[5]?A?A.p(E,C):(A=_k(E),A.c(),A.m(e,null)):A&&(A.d(1),A=null)},i(E){p||(B(d.$$.fragment,E),p=!0)},o(E){G(d.$$.fragment,E),p=!1},d(E){E&&b(e),Ft(w,E),Ie(d),A&&A.d(),_=!1,an(v)}}}function Cse(n,e,t){let i,s,r,{art:o}=e,{equippedCombatArts:l}=e,{onToggleCombatArts:a}=e,{allCombatArts:c}=e,{equippedWeaponTypes:u}=e,f=!1;const h=()=>t(5,f=!f),d=()=>t(5,f=!f),m=()=>a(o);return n.$$set=p=>{"art"in p&&t(0,o=p.art),"equippedCombatArts"in p&&t(1,l=p.equippedCombatArts),"onToggleCombatArts"in p&&t(2,a=p.onToggleCombatArts),"allCombatArts"in p&&t(8,c=p.allCombatArts),"equippedWeaponTypes"in p&&t(3,u=p.equippedWeaponTypes)},n.$$.update=()=>{var p;n.$$.dirty&256&&t(4,i=c.fullFeatures),n.$$.dirty&17&&t(7,s=((p=i[o])==null?void 0:p.compatibleWeapons)||[]),n.$$.dirty&17&&t(6,r=j4(i[o],{disableDescription:!0}))},[o,l,a,u,i,f,r,s,c,h,d,m]}class kse extends st{constructor(e){super(),rt(this,e,Cse,Ase,kt,{art:0,equippedCombatArts:1,onToggleCombatArts:2,allCombatArts:8,equippedWeaponTypes:3})}}function Ak(n,e,t){const i=n.slice();return i[11]=e[t],i}function Tse(n){let e,t,i=n[1].length+"",s,r,o,l,a,c;return{c(){e=k("span"),t=q("("),s=q(i),r=q("/"),o=q(po),l=q(")")},l(u){e=T(u,"SPAN",{});var f=I(e);t=z(f,"("),s=z(f,i),r=z(f,"/"),o=z(f,po),l=z(f,")"),f.forEach(b)},m(u,f){H(u,e,f),g(e,t),g(e,s),g(e,r),g(e,o),g(e,l),a||(c=_e(e,"click",n[9]),a=!0)},p(u,f){f&2&&i!==(i=u[1].length+"")&&Le(s,i)},d(u){u&&b(e),a=!1,c()}}}function Ise(n){let e,t;return{c(){e=k("div"),t=q("Click to Clear All"),this.h()},l(i){e=T(i,"DIV",{slot:!0});var s=I(e);t=z(s,"Click to Clear All"),s.forEach(b),this.h()},h(){S(e,"slot","t")},m(i,s){H(i,e,s),g(e,t)},p:Xe,d(i){i&&b(e)}}}function Ose(n){let e,t,i,s,r,o,l,a,c,u,f,h;return o=new ai({props:{tooltipStyle:ns.BOTTOM_CENTER,$$slots:{t:[Ise],default:[Tse]},$$scope:{ctx:n}}}),{c(){e=k("div"),t=k("div"),i=k("span"),s=q("Combat Arts"),r=U(),ke(o.$$.fragment),l=U(),a=k("button"),c=q("+"),this.h()},l(d){e=T(d,"DIV",{slot:!0,class:!0});var m=I(e);t=T(m,"DIV",{});var p=I(t);i=T(p,"SPAN",{});var _=I(i);s=z(_,"Combat Arts"),_.forEach(b),r=W(p),Oe(o.$$.fragment,p),p.forEach(b),l=W(m),a=T(m,"BUTTON",{class:!0});var v=I(a);c=z(v,"+"),v.forEach(b),m.forEach(b),this.h()},h(){S(a,"class","svelte-pbyt6h"),S(e,"slot","content"),S(e,"class","header svelte-pbyt6h")},m(d,m){H(d,e,m),g(e,t),g(t,i),g(i,s),g(t,r),Te(o,t,null),g(e,l),g(e,a),g(a,c),u=!0,f||(h=_e(a,"click",function(){Mn(n[3])&&n[3].apply(this,arguments)}),f=!0)},p(d,m){n=d;const p={};m&16390&&(p.$$scope={dirty:m,ctx:n}),o.$set(p)},i(d){u||(B(o.$$.fragment,d),u=!0)},o(d){G(o.$$.fragment,d),u=!1},d(d){d&&b(e),Ie(o),f=!1,h()}}}function Ck(n){let e,t;return e=new kse({props:{art:n[11],allCombatArts:n[0],equippedCombatArts:n[1],onToggleCombatArts:n[2],equippedWeaponTypes:n[4]}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,s){const r={};s&1&&(r.art=i[11]),s&1&&(r.allCombatArts=i[0]),s&2&&(r.equippedCombatArts=i[1]),s&4&&(r.onToggleCombatArts=i[2]),s&16&&(r.equippedWeaponTypes=i[4]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function Rse(n){let e,t,i,s,r,o,l;t=new vc({props:{$$slots:{content:[Ose]},$$scope:{ctx:n}}});let a=n[0].fullArray,c=[];for(let f=0;f<a.length;f+=1)c[f]=Ck(Ak(n,a,f));const u=f=>G(c[f],1,1,()=>{c[f]=null});return{c(){e=k("div"),ke(t.$$.fragment),i=U(),s=k("div"),r=U(),o=k("div");for(let f=0;f<c.length;f+=1)c[f].c();this.h()},l(f){e=T(f,"DIV",{class:!0});var h=I(e);Oe(t.$$.fragment,h),i=W(h),s=T(h,"DIV",{}),I(s).forEach(b),r=W(h),o=T(h,"DIV",{class:!0});var d=I(o);for(let m=0;m<c.length;m+=1)c[m].l(d);d.forEach(b),h.forEach(b),this.h()},h(){lt(s,"height","11px"),S(o,"class","content svelte-pbyt6h"),S(e,"class","container svelte-pbyt6h")},m(f,h){H(f,e,h),Te(t,e,null),g(e,i),g(e,s),g(e,r),g(e,o);for(let d=0;d<c.length;d+=1)c[d].m(o,null);l=!0},p(f,[h]){const d={};if(h&16398&&(d.$$scope={dirty:h,ctx:f}),t.$set(d),h&23){a=f[0].fullArray;let m;for(m=0;m<a.length;m+=1){const p=Ak(f,a,m);c[m]?(c[m].p(p,h),B(c[m],1)):(c[m]=Ck(p),c[m].c(),B(c[m],1),c[m].m(o,null))}for(He(),m=a.length;m<c.length;m+=1)u(m);qe()}},i(f){if(!l){B(t.$$.fragment,f);for(let h=0;h<a.length;h+=1)B(c[h]);l=!0}},o(f){G(t.$$.fragment,f),c=c.filter(Boolean);for(let h=0;h<c.length;h+=1)G(c[h]);l=!1},d(f){f&&b(e),Ie(t),Ft(c,f)}}}function Dse(n,e,t){let i,s,r;const{open:o}=Bn(hs.MODAL);let{allCombatArts:l}=e,{customCombatArts:a}=e,{onUpdateCustomCombatArts:c}=e,{equippedCombatArts:u}=e,{onToggleCombatArts:f}=e,{equippedWeapons:h}=e;const d=()=>u.forEach(m=>{f(m)});return n.$$set=m=>{"allCombatArts"in m&&t(0,l=m.allCombatArts),"customCombatArts"in m&&t(5,a=m.customCombatArts),"onUpdateCustomCombatArts"in m&&t(6,c=m.onUpdateCustomCombatArts),"equippedCombatArts"in m&&t(1,u=m.equippedCombatArts),"onToggleCombatArts"in m&&t(2,f=m.onToggleCombatArts),"equippedWeapons"in m&&t(7,h=m.equippedWeapons)},n.$$.update=()=>{n.$$.dirty&128&&t(4,i=new Set(h.map(m=>{var p;return(p=tr[m])==null?void 0:p.type}))),n.$$.dirty&1&&t(8,s=Object.values(vt).filter(m=>!l.fullSet.has(m))),n.$$.dirty&352&&t(3,r=()=>{o(Cu,{pickOne:[{type:Nn.CombatArt,options:s}],reason:"Manually adding in combat arts section",customCombatArts:a,onUpdateCustomCombatArts:m=>c({...a,...m})})})},[l,u,f,r,i,a,c,h,s,d]}class Nse extends st{constructor(e){super(),rt(this,e,Dse,Rse,kt,{allCombatArts:0,customCombatArts:5,onUpdateCustomCombatArts:6,equippedCombatArts:1,onToggleCombatArts:2,equippedWeapons:7})}}function kk(n){var c,u;let e,t,i,s=((c=n[1])==null?void 0:c.description)+"",r,o,l,a=((u=n[1])==null?void 0:u.reason)&&Tk(n);return{c(){e=k("div"),a&&a.c(),t=U(),i=k("div"),r=q(s),this.h()},l(f){e=T(f,"DIV",{class:!0});var h=I(e);a&&a.l(h),t=W(h),i=T(h,"DIV",{});var d=I(i);r=z(d,s),d.forEach(b),h.forEach(b),this.h()},h(){S(e,"class","description svelte-1fase9x")},m(f,h){H(f,e,h),a&&a.m(e,null),g(e,t),g(e,i),g(i,r),o||(l=_e(e,"click",n[9]),o=!0)},p(f,h){var d,m;(d=f[1])!=null&&d.reason?a?a.p(f,h):(a=Tk(f),a.c(),a.m(e,t)):a&&(a.d(1),a=null),h&2&&s!==(s=((m=f[1])==null?void 0:m.description)+"")&&Le(r,s)},d(f){f&&b(e),a&&a.d(),o=!1,l()}}}function Tk(n){let e,t=n[1].reason+"",i,s,r;return{c(){e=k("div"),i=q(t),s=U(),r=k("br"),this.h()},l(o){e=T(o,"DIV",{class:!0});var l=I(e);i=z(l,t),l.forEach(b),s=W(o),r=T(o,"BR",{}),this.h()},h(){S(e,"class","reason svelte-1fase9x")},m(o,l){H(o,e,l),g(e,i),H(o,s,l),H(o,r,l)},p(o,l){l&2&&t!==(t=o[1].reason+"")&&Le(i,t)},d(o){o&&b(e),o&&b(s),o&&b(r)}}}function Pse(n){var v;let e,t,i,s=((v=n[1])==null?void 0:v.label)+"",r,o,l,a,c,u,f,h,d,m,p;f=new Im({props:{isEquipped:n[2],onClick:n[8],isVisible:n[4]<go||n[2]}});let _=!n[5]&&kk(n);return{c(){e=k("div"),t=k("div"),i=k("div"),r=q(s),o=U(),l=k("div"),a=q("v"),u=U(),ke(f.$$.fragment),h=U(),_&&_.c(),this.h()},l(y){e=T(y,"DIV",{class:!0});var w=I(e);t=T(w,"DIV",{class:!0});var A=I(t);i=T(A,"DIV",{class:!0});var E=I(i);r=z(E,s),E.forEach(b),o=W(A),l=T(A,"DIV",{class:!0});var C=I(l);a=z(C,"v"),C.forEach(b),u=W(A),Oe(f.$$.fragment,A),A.forEach(b),h=W(w),_&&_.l(w),w.forEach(b),this.h()},h(){S(i,"class","label svelte-1fase9x"),S(l,"class",c=Ze(`caret ${n[5]?"flip":""}`)+" svelte-1fase9x"),S(t,"class","skill-container svelte-1fase9x"),S(e,"class","container svelte-1fase9x")},m(y,w){H(y,e,w),g(e,t),g(t,i),g(i,r),g(t,o),g(t,l),g(l,a),g(t,u),Te(f,t,null),g(e,h),_&&_.m(e,null),d=!0,m||(p=[_e(i,"click",n[6]),_e(l,"click",n[7])],m=!0)},p(y,[w]){var E;(!d||w&2)&&s!==(s=((E=y[1])==null?void 0:E.label)+"")&&Le(r,s),(!d||w&32&&c!==(c=Ze(`caret ${y[5]?"flip":""}`)+" svelte-1fase9x"))&&S(l,"class",c);const A={};w&4&&(A.isEquipped=y[2]),w&9&&(A.onClick=y[8]),w&20&&(A.isVisible=y[4]<go||y[2]),f.$set(A),y[5]?_&&(_.d(1),_=null):_?_.p(y,w):(_=kk(y),_.c(),_.m(e,null))},i(y){d||(B(f.$$.fragment,y),d=!0)},o(y){G(f.$$.fragment,y),d=!1},d(y){y&&b(e),Ie(f),_&&_.d(),m=!1,an(p)}}}function Mse(n,e,t){let{skill:i}=e,{feature:s}=e,{isEquipped:r}=e,{onToggleCombatSkill:o}=e,{numEquipped:l}=e,a=!0;const c=()=>t(5,a=!a),u=()=>t(5,a=!a),f=()=>o(i),h=()=>t(5,a=!0);return n.$$set=d=>{"skill"in d&&t(0,i=d.skill),"feature"in d&&t(1,s=d.feature),"isEquipped"in d&&t(2,r=d.isEquipped),"onToggleCombatSkill"in d&&t(3,o=d.onToggleCombatSkill),"numEquipped"in d&&t(4,l=d.numEquipped)},[i,s,r,o,l,a,c,u,f,h]}class Bse extends st{constructor(e){super(),rt(this,e,Mse,Pse,kt,{skill:0,feature:1,isEquipped:2,onToggleCombatSkill:3,numEquipped:4})}}function Ik(n,e,t){const i=n.slice();return i[11]=e[t],i}function Lse(n){let e,t,i=n[0].length+"",s,r,o,l,a,c;return{c(){e=k("span"),t=q("("),s=q(i),r=q("/"),o=q(go),l=q(")")},l(u){e=T(u,"SPAN",{});var f=I(e);t=z(f,"("),s=z(f,i),r=z(f,"/"),o=z(f,go),l=z(f,")"),f.forEach(b)},m(u,f){H(u,e,f),g(e,t),g(e,s),g(e,r),g(e,o),g(e,l),a||(c=_e(e,"click",n[9]),a=!0)},p(u,f){f&1&&i!==(i=u[0].length+"")&&Le(s,i)},d(u){u&&b(e),a=!1,c()}}}function Use(n){let e,t;return{c(){e=k("div"),t=q("Click to Clear All"),this.h()},l(i){e=T(i,"DIV",{slot:!0});var s=I(e);t=z(s,"Click to Clear All"),s.forEach(b),this.h()},h(){S(e,"slot","t")},m(i,s){H(i,e,s),g(e,t)},p:Xe,d(i){i&&b(e)}}}function Wse(n){let e,t,i,s,r,o,l,a,c,u,f,h;return o=new ai({props:{tooltipStyle:ns.BOTTOM_CENTER,$$slots:{t:[Use],default:[Lse]},$$scope:{ctx:n}}}),{c(){e=k("div"),t=k("div"),i=k("span"),s=q("Combat Skills"),r=U(),ke(o.$$.fragment),l=U(),a=k("button"),c=q("+"),this.h()},l(d){e=T(d,"DIV",{slot:!0,class:!0});var m=I(e);t=T(m,"DIV",{});var p=I(t);i=T(p,"SPAN",{});var _=I(i);s=z(_,"Combat Skills"),_.forEach(b),r=W(p),Oe(o.$$.fragment,p),p.forEach(b),l=W(m),a=T(m,"BUTTON",{class:!0});var v=I(a);c=z(v,"+"),v.forEach(b),m.forEach(b),this.h()},h(){S(a,"class","svelte-1sd84cd"),S(e,"slot","content"),S(e,"class","header svelte-1sd84cd")},m(d,m){H(d,e,m),g(e,t),g(t,i),g(i,s),g(t,r),Te(o,t,null),g(e,l),g(e,a),g(a,c),u=!0,f||(h=_e(a,"click",function(){Mn(n[2])&&n[2].apply(this,arguments)}),f=!0)},p(d,m){n=d;const p={};m&16387&&(p.$$scope={dirty:m,ctx:n}),o.$set(p)},i(d){u||(B(o.$$.fragment,d),u=!0)},o(d){G(o.$$.fragment,d),u=!1},d(d){d&&b(e),Ie(o),f=!1,h()}}}function Ok(n){let e,t;return e=new Bse({props:{skill:n[11],feature:n[3][n[11]],isEquipped:n[0].indexOf(n[11])!==-1,onToggleCombatSkill:n[1],numEquipped:n[0].length}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,s){const r={};s&16&&(r.skill=i[11]),s&24&&(r.feature=i[3][i[11]]),s&17&&(r.isEquipped=i[0].indexOf(i[11])!==-1),s&2&&(r.onToggleCombatSkill=i[1]),s&1&&(r.numEquipped=i[0].length),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function Vse(n){let e,t,i,s,r,o,l;t=new vc({props:{$$slots:{content:[Wse]},$$scope:{ctx:n}}});let a=n[4],c=[];for(let f=0;f<a.length;f+=1)c[f]=Ok(Ik(n,a,f));const u=f=>G(c[f],1,1,()=>{c[f]=null});return{c(){e=k("div"),ke(t.$$.fragment),i=U(),s=k("div"),r=U(),o=k("div");for(let f=0;f<c.length;f+=1)c[f].c();this.h()},l(f){e=T(f,"DIV",{class:!0});var h=I(e);Oe(t.$$.fragment,h),i=W(h),s=T(h,"DIV",{}),I(s).forEach(b),r=W(h),o=T(h,"DIV",{class:!0});var d=I(o);for(let m=0;m<c.length;m+=1)c[m].l(d);d.forEach(b),h.forEach(b),this.h()},h(){lt(s,"height","11px"),S(o,"class","content svelte-1sd84cd"),S(e,"class","container svelte-1sd84cd")},m(f,h){H(f,e,h),Te(t,e,null),g(e,i),g(e,s),g(e,r),g(e,o);for(let d=0;d<c.length;d+=1)c[d].m(o,null);l=!0},p(f,[h]){const d={};if(h&16391&&(d.$$scope={dirty:h,ctx:f}),t.$set(d),h&27){a=f[4];let m;for(m=0;m<a.length;m+=1){const p=Ik(f,a,m);c[m]?(c[m].p(p,h),B(c[m],1)):(c[m]=Ok(p),c[m].c(),B(c[m],1),c[m].m(o,null))}for(He(),m=a.length;m<c.length;m+=1)u(m);qe()}},i(f){if(!l){B(t.$$.fragment,f);for(let h=0;h<a.length;h+=1)B(c[h]);l=!0}},o(f){G(t.$$.fragment,f),c=c.filter(Boolean);for(let h=0;h<c.length;h+=1)G(c[h]);l=!1},d(f){f&&b(e),Ie(t),Ft(c,f)}}}function Fse(n,e,t){let i,s,r,o;const{open:l}=Bn(hs.MODAL);let{allCombatSkills:a}=e,{equippedCombatSkills:c}=e,{onToggleCombatSkill:u}=e,{customCombatSkills:f}=e,{onUpdateCustomCombatSkills:h}=e;const d=()=>c.forEach(m=>{u(m)});return n.$$set=m=>{"allCombatSkills"in m&&t(5,a=m.allCombatSkills),"equippedCombatSkills"in m&&t(0,c=m.equippedCombatSkills),"onToggleCombatSkill"in m&&t(1,u=m.onToggleCombatSkill),"customCombatSkills"in m&&t(6,f=m.customCombatSkills),"onUpdateCustomCombatSkills"in m&&t(7,h=m.onUpdateCustomCombatSkills)},n.$$.update=()=>{n.$$.dirty&32&&t(4,i=a.fullArray),n.$$.dirty&32&&t(3,s=a.fullFeatures),n.$$.dirty&32&&t(8,r=Object.values(Ue).filter(m=>!a.fullSet.has(m))),n.$$.dirty&448&&t(2,o=()=>{l(Cu,{pickOne:[{type:Nn.CombatSkill,options:r}],reason:"Manually adding in combat skills section",customCombatSkills:f,onUpdateCustomCombatSkills:m=>h({...f,...m})})})},[c,u,o,s,i,a,f,h,r,d]}class jse extends st{constructor(e){super(),rt(this,e,Fse,Vse,kt,{allCombatSkills:5,equippedCombatSkills:0,onToggleCombatSkill:1,customCombatSkills:6,onUpdateCustomCombatSkills:7})}}function Rk(n){let e,t;return e=new ai({props:{tooltipStyle:ns.CENTER,hiddenFirst:!0,$$slots:{t:[qse],default:[Hse]},$$scope:{ctx:n}}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,s){const r={};s[0]&15|s[1]&1024&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function Hse(n){let e,t,i;return{c(){e=k("div"),t=k("span"),i=q("!"),this.h()},l(s){e=T(s,"DIV",{class:!0});var r=I(e);t=T(r,"SPAN",{class:!0});var o=I(t);i=z(o,"!"),o.forEach(b),r.forEach(b),this.h()},h(){S(t,"class","warning svelte-1yghy27"),S(e,"class","warning-container svelte-1yghy27")},m(s,r){H(s,e,r),g(e,t),g(t,i)},p:Xe,d(s){s&&b(e)}}}function Dk(n){let e,t;return{c(){e=k("u"),t=q("No Equipped Class")},l(i){e=T(i,"U",{});var s=I(e);t=z(s,"No Equipped Class"),s.forEach(b)},m(i,s){H(i,e,s),g(e,t)},d(i){i&&b(e)}}}function Nk(n){let e,t;return{c(){e=k("u"),t=q("Max Weapons not Equipped")},l(i){e=T(i,"U",{});var s=I(e);t=z(s,"Max Weapons not Equipped"),s.forEach(b)},m(i,s){H(i,e,s),g(e,t)},d(i){i&&b(e)}}}function Pk(n){let e,t;return{c(){e=k("u"),t=q("Max Combat Skills not Equipped")},l(i){e=T(i,"U",{});var s=I(e);t=z(s,"Max Combat Skills not Equipped"),s.forEach(b)},m(i,s){H(i,e,s),g(e,t)},d(i){i&&b(e)}}}function Mk(n){let e,t;return{c(){e=k("u"),t=q("Max Combat Arts not Equipped")},l(i){e=T(i,"U",{});var s=I(e);t=z(s,"Max Combat Arts not Equipped"),s.forEach(b)},m(i,s){H(i,e,s),g(e,t)},d(i){i&&b(e)}}}function qse(n){var c,u,f;let e,t,i,s,r=!n[2]&&Dk(),o=((c=n[0])==null?void 0:c.length)!==Vl&&Nk(),l=((u=n[3])==null?void 0:u.length)!==go&&Pk(),a=((f=n[1])==null?void 0:f.length)!==po&&Mk();return{c(){e=k("div"),r&&r.c(),t=U(),o&&o.c(),i=U(),l&&l.c(),s=U(),a&&a.c(),this.h()},l(h){e=T(h,"DIV",{slot:!0,class:!0});var d=I(e);r&&r.l(d),t=W(d),o&&o.l(d),i=W(d),l&&l.l(d),s=W(d),a&&a.l(d),d.forEach(b),this.h()},h(){S(e,"slot","t"),S(e,"class","warning-tooltip svelte-1yghy27")},m(h,d){H(h,e,d),r&&r.m(e,null),g(e,t),o&&o.m(e,null),g(e,i),l&&l.m(e,null),g(e,s),a&&a.m(e,null)},p(h,d){var m,p,_;h[2]?r&&(r.d(1),r=null):r||(r=Dk(),r.c(),r.m(e,t)),((m=h[0])==null?void 0:m.length)!==Vl?o||(o=Nk(),o.c(),o.m(e,i)):o&&(o.d(1),o=null),((p=h[3])==null?void 0:p.length)!==go?l||(l=Pk(),l.c(),l.m(e,s)):l&&(l.d(1),l=null),((_=h[1])==null?void 0:_.length)!==po?a||(a=Mk(),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},d(h){h&&b(e),r&&r.d(),o&&o.d(),l&&l.d(),a&&a.d()}}}function zse(n){let e,t,i,s,r,o,l,a,c,u,f,h;return{c(){e=k("div"),t=k("span"),i=q(n[32]),s=q(" +"),r=U(),o=k("div"),l=k("div"),a=q("Terrain"),c=U(),u=k("input"),this.h()},l(d){e=T(d,"DIV",{class:!0});var m=I(e);t=T(m,"SPAN",{class:!0});var p=I(t);i=z(p,n[32]),s=z(p," +"),p.forEach(b),r=W(m),o=T(m,"DIV",{class:!0});var _=I(o);l=T(_,"DIV",{});var v=I(l);a=z(v,"Terrain"),v.forEach(b),c=W(_),u=T(_,"INPUT",{type:!0,class:!0}),_.forEach(b),m.forEach(b),this.h()},h(){S(t,"class","big-text svelte-1yghy27"),S(u,"type","number"),u.value=n[4],S(u,"class","svelte-1yghy27"),S(o,"class","terrain-container svelte-1yghy27"),S(e,"class","ac-value svelte-1yghy27")},m(d,m){H(d,e,m),g(e,t),g(t,i),g(t,s),g(e,r),g(e,o),g(o,l),g(l,a),g(o,c),g(o,u),f||(h=_e(u,"input",n[33]),f=!0)},p(d,m){m[1]&2&&Le(i,d[32]),m[0]&16&&u.value!==d[4]&&(u.value=d[4])},d(d){d&&b(e),f=!1,h()}}}function Gse(n){let e,t=`AC = ${Jg} + ${n[8]} (dex modifier) + ${n[26]} (class bonus) + ${n[23]} (combat skill bonus) + ${n[24]} (selected weapon) + ${n[25]} (weapon bonus) + ${n[4]}(terrain mod)`,i;return{c(){e=k("div"),i=q(t),this.h()},l(s){e=T(s,"DIV",{slot:!0,class:!0});var r=I(e);i=z(r,t),r.forEach(b),this.h()},h(){S(e,"slot","t"),S(e,"class","tooltip svelte-1yghy27")},m(s,r){H(s,e,r),g(e,i)},p(s,r){r[0]&125829392&&t!==(t=`AC = ${Jg} + ${s[8]} (dex modifier) + ${s[26]} (class bonus) + ${s[23]} (combat skill bonus) + ${s[24]} (selected weapon) + ${s[25]} (weapon bonus) + ${s[4]}(terrain mod)`)&&Le(i,t)},d(s){s&&b(e)}}}function Kse(n){let e,t;return{c(){e=k("div"),t=q(n[31]),this.h()},l(i){e=T(i,"DIV",{class:!0});var s=I(e);t=z(s,n[31]),s.forEach(b),this.h()},h(){S(e,"class","big-text skinny svelte-1yghy27")},m(i,s){H(i,e,s),g(e,t)},p(i,s){s[1]&1&&Le(t,i[31])},d(i){i&&b(e)}}}function Xse(n){let e,t=`Move Speed = ${Zg} + ${n[22]} (from class) + ${n[21]} (from combat skills)`,i;return{c(){e=k("div"),i=q(t),this.h()},l(s){e=T(s,"DIV",{slot:!0,class:!0});var r=I(e);i=z(r,t),r.forEach(b),this.h()},h(){S(e,"slot","t"),S(e,"class","skinny-tooltip svelte-1yghy27")},m(s,r){H(s,e,r),g(e,i)},p(s,r){r[0]&6291456&&t!==(t=`Move Speed = ${Zg} + ${s[22]} (from class) + ${s[21]} (from combat skills)`)&&Le(i,t)},d(s){s&&b(e)}}}function Qse(n){let e,t;return{c(){e=k("div"),t=q(n[30]),this.h()},l(i){e=T(i,"DIV",{class:!0});var s=I(e);t=z(s,n[30]),s.forEach(b),this.h()},h(){S(e,"class","big-text skinny svelte-1yghy27"),lt(e,"flex","0")},m(i,s){H(i,e,s),g(e,t)},p(i,s){s[0]&1073741824&&Le(t,i[30])},d(i){i&&b(e)}}}function Yse(n){let e,t=`HP Max = ${xg} + ${n[20]} (from unlocked classes) + ${n[19]} (from unlocking an intermediate class) + ${n[18]} (from combat skills) + ${n[17]} (CON modifier * 2)`,i;return{c(){e=k("div"),i=q(t),this.h()},l(s){e=T(s,"DIV",{slot:!0,class:!0});var r=I(e);i=z(r,t),r.forEach(b),this.h()},h(){S(e,"slot","t"),S(e,"class","skinny-tooltip svelte-1yghy27")},m(s,r){H(s,e,r),g(e,i)},p(s,r){r[0]&1966080&&t!==(t=`HP Max = ${xg} + ${s[20]} (from unlocked classes) + ${s[19]} (from unlocking an intermediate class) + ${s[18]} (from combat skills) + ${s[17]} (CON modifier * 2)`)&&Le(i,t)},d(s){s&&b(e)}}}function Jse(n){let e,t;return{c(){e=k("div"),t=q(n[27]),this.h()},l(i){e=T(i,"DIV",{class:!0});var s=I(e);t=z(s,n[27]),s.forEach(b),this.h()},h(){S(e,"class","big-text svelte-1yghy27")},m(i,s){H(i,e,s),g(e,t)},p(i,s){s[0]&134217728&&Le(t,i[27])},d(i){i&&b(e)}}}function Zse(n){let e,t=`Attack Speed = ${n[8]} (dex modifier) + ${n[7]} (selected weapon) + ${n[6]} (skills) + ${n[5]} (equipped class)`,i;return{c(){e=k("div"),i=q(t),this.h()},l(s){e=T(s,"DIV",{slot:!0,class:!0});var r=I(e);i=z(r,t),r.forEach(b),this.h()},h(){S(e,"slot","t"),S(e,"class","svelte-1yghy27")},m(s,r){H(s,e,r),g(e,i)},p(s,r){r[0]&480&&t!==(t=`Attack Speed = ${s[8]} (dex modifier) + ${s[7]} (selected weapon) + ${s[6]} (skills) + ${s[5]} (equipped class)`)&&Le(i,t)},d(s){s&&b(e)}}}function xse(n){let e,t;return{c(){e=k("div"),t=q(n[29]),this.h()},l(i){e=T(i,"DIV",{class:!0});var s=I(e);t=z(s,n[29]),s.forEach(b),this.h()},h(){S(e,"class","big-text svelte-1yghy27")},m(i,s){H(i,e,s),g(e,t)},p(i,s){s[0]&536870912&&Le(t,i[29])},d(i){i&&b(e)}}}function $se(n){let e,t=`Protection = ${$g} + ${n[16]} (from unlocked classes) + ${n[15]} (from unlocking an intermediate martial class) + ${n[14]} (from equipped class) + ${n[13]} (from skills)`,i;return{c(){e=k("div"),i=q(t),this.h()},l(s){e=T(s,"DIV",{slot:!0,class:!0});var r=I(e);i=z(r,t),r.forEach(b),this.h()},h(){S(e,"slot","t"),S(e,"class","svelte-1yghy27")},m(s,r){H(s,e,r),g(e,i)},p(s,r){r[0]&122880&&t!==(t=`Protection = ${$g} + ${s[16]} (from unlocked classes) + ${s[15]} (from unlocking an intermediate martial class) + ${s[14]} (from equipped class) + ${s[13]} (from skills)`)&&Le(i,t)},d(s){s&&b(e)}}}function ere(n){let e,t;return{c(){e=k("div"),t=q(n[28]),this.h()},l(i){e=T(i,"DIV",{class:!0});var s=I(e);t=z(s,n[28]),s.forEach(b),this.h()},h(){S(e,"class","big-text svelte-1yghy27")},m(i,s){H(i,e,s),g(e,t)},p(i,s){s[0]&268435456&&Le(t,i[28])},d(i){i&&b(e)}}}function tre(n){let e,t=`Resilience = ${e1} + ${n[12]} (from unlocked classes) + ${n[11]} (from unlocking an intermediate magic class) ${As(n[10])} (from equipped class) + ${n[9]} (from skills)`,i;return{c(){e=k("div"),i=q(t),this.h()},l(s){e=T(s,"DIV",{slot:!0,class:!0});var r=I(e);i=z(r,t),r.forEach(b),this.h()},h(){S(e,"slot","t"),S(e,"class","svelte-1yghy27")},m(s,r){H(s,e,r),g(e,i)},p(s,r){r[0]&7680&&t!==(t=`Resilience = ${e1} + ${s[12]} (from unlocked classes) + ${s[11]} (from unlocking an intermediate magic class) ${As(s[10])} (from equipped class) + ${s[9]} (from skills)`)&&Le(i,t)},d(s){s&&b(e)}}}function nre(n){var Z,V,ce;let e,t,i,s,r,o,l,a,c,u,f,h,d,m,p,_,v,y,w,A,E,C,R,D,N,L,F,P,Q,O,K,X,J,te,j,x=(!n[2]||((Z=n[0])==null?void 0:Z.length)!==Vl||((V=n[3])==null?void 0:V.length)!==go||((ce=n[1])==null?void 0:ce.length)!==po)&&Rk(n);return D=new ai({props:{tooltipStyle:ns.CENTER,$$slots:{t:[Gse],default:[zse]},$$scope:{ctx:n}}}),L=new ai({props:{tooltipStyle:ns.CENTER,$$slots:{t:[Xse],default:[Kse]},$$scope:{ctx:n}}}),P=new ai({props:{tooltipStyle:ns.LEFT_END,$$slots:{t:[Yse],default:[Qse]},$$scope:{ctx:n}}}),O=new ai({props:{tooltipStyle:ns.LEFT_END,$$slots:{t:[Zse],default:[Jse]},$$scope:{ctx:n}}}),X=new ai({props:{tooltipStyle:ns.LEFT_END,$$slots:{t:[$se],default:[xse]},$$scope:{ctx:n}}}),te=new ai({props:{tooltipStyle:ns.LEFT_END,hiddenFirst:!0,$$slots:{t:[tre],default:[ere]},$$scope:{ctx:n}}}),{c(){e=k("div"),t=k("span"),i=U(),s=k("span"),r=q("AC"),o=U(),l=k("span"),a=q("MS"),c=U(),u=k("span"),f=q("HP Max"),h=U(),d=k("span"),m=q("AS"),p=U(),_=k("span"),v=q("Prt"),y=U(),w=k("span"),A=q("Res"),E=U(),C=k("div"),x&&x.c(),R=U(),ke(D.$$.fragment),N=U(),ke(L.$$.fragment),F=U(),ke(P.$$.fragment),Q=U(),ke(O.$$.fragment),K=U(),ke(X.$$.fragment),J=U(),ke(te.$$.fragment),this.h()},l(pe){e=T(pe,"DIV",{class:!0});var re=I(e);t=T(re,"SPAN",{class:!0}),I(t).forEach(b),i=W(re),s=T(re,"SPAN",{class:!0});var ye=I(s);r=z(ye,"AC"),ye.forEach(b),o=W(re),l=T(re,"SPAN",{class:!0});var Ne=I(l);a=z(Ne,"MS"),Ne.forEach(b),c=W(re),u=T(re,"SPAN",{class:!0});var Y=I(u);f=z(Y,"HP Max"),Y.forEach(b),h=W(re),d=T(re,"SPAN",{class:!0});var Ce=I(d);m=z(Ce,"AS"),Ce.forEach(b),p=W(re),_=T(re,"SPAN",{class:!0});var We=I(_);v=z(We,"Prt"),We.forEach(b),y=W(re),w=T(re,"SPAN",{class:!0});var se=I(w);A=z(se,"Res"),se.forEach(b),E=W(re),C=T(re,"DIV",{class:!0});var Me=I(C);x&&x.l(Me),Me.forEach(b),R=W(re),Oe(D.$$.fragment,re),N=W(re),Oe(L.$$.fragment,re),F=W(re),Oe(P.$$.fragment,re),Q=W(re),Oe(O.$$.fragment,re),K=W(re),Oe(X.$$.fragment,re),J=W(re),Oe(te.$$.fragment,re),re.forEach(b),this.h()},h(){S(t,"class","label svelte-1yghy27"),lt(t,"border-left-width","0"),S(s,"class","label svelte-1yghy27"),S(l,"class","label svelte-1yghy27"),S(u,"class","label svelte-1yghy27"),S(d,"class","label svelte-1yghy27"),S(_,"class","label svelte-1yghy27"),S(w,"class","label svelte-1yghy27"),lt(w,"border-right-width","0"),S(C,"class","svelte-1yghy27"),lt(C,"border-left-width","0"),S(e,"class","container svelte-1yghy27")},m(pe,re){H(pe,e,re),g(e,t),g(e,i),g(e,s),g(s,r),g(e,o),g(e,l),g(l,a),g(e,c),g(e,u),g(u,f),g(e,h),g(e,d),g(d,m),g(e,p),g(e,_),g(_,v),g(e,y),g(e,w),g(w,A),g(e,E),g(e,C),x&&x.m(C,null),g(e,R),Te(D,e,null),g(e,N),Te(L,e,null),g(e,F),Te(P,e,null),g(e,Q),Te(O,e,null),g(e,K),Te(X,e,null),g(e,J),Te(te,e,null),j=!0},p(pe,re){var Me,he,M;!pe[2]||((Me=pe[0])==null?void 0:Me.length)!==Vl||((he=pe[3])==null?void 0:he.length)!==go||((M=pe[1])==null?void 0:M.length)!==po?x?(x.p(pe,re),re[0]&15&&B(x,1)):(x=Rk(pe),x.c(),B(x,1),x.m(C,null)):x&&(He(),G(x,1,1,()=>{x=null}),qe());const ye={};re[0]&125829392|re[1]&1026&&(ye.$$scope={dirty:re,ctx:pe}),D.$set(ye);const Ne={};re[0]&6291456|re[1]&1025&&(Ne.$$scope={dirty:re,ctx:pe}),L.$set(Ne);const Y={};re[0]&1075707904|re[1]&1024&&(Y.$$scope={dirty:re,ctx:pe}),P.$set(Y);const Ce={};re[0]&134218208|re[1]&1024&&(Ce.$$scope={dirty:re,ctx:pe}),O.$set(Ce);const We={};re[0]&536993792|re[1]&1024&&(We.$$scope={dirty:re,ctx:pe}),X.$set(We);const se={};re[0]&268443136|re[1]&1024&&(se.$$scope={dirty:re,ctx:pe}),te.$set(se)},i(pe){j||(B(x),B(D.$$.fragment,pe),B(L.$$.fragment,pe),B(P.$$.fragment,pe),B(O.$$.fragment,pe),B(X.$$.fragment,pe),B(te.$$.fragment,pe),j=!0)},o(pe){G(x),G(D.$$.fragment,pe),G(L.$$.fragment,pe),G(P.$$.fragment,pe),G(O.$$.fragment,pe),G(X.$$.fragment,pe),G(te.$$.fragment,pe),j=!1},d(pe){pe&&b(e),x&&x.d(),Ie(D),Ie(L),Ie(P),Ie(O),Ie(X),Ie(te)}}}function ire(n,e,t){let i,s,r,o,l,a,c,u,f,h,d,m,p,_,v,y,w,A,E,C,R,D,N,L,F,P,Q,O,K,X,{stats:J}=e,{equippedWeapons:te}=e,{equippedCombatArts:j}=e,{unlockedClasses:x}=e,{equippedClass:Z}=e,{equippedCombatSkills:V}=e,{allWeapons:ce}=e,{allCombatSkills:pe}=e,{selectedWeapon:re}=e,ye=0;const Ne=Y=>{const Ce=parseInt(Y.currentTarget.value);isNaN(Ce)?t(4,ye=0):t(4,ye=Ce)};return n.$$set=Y=>{"stats"in Y&&t(34,J=Y.stats),"equippedWeapons"in Y&&t(0,te=Y.equippedWeapons),"equippedCombatArts"in Y&&t(1,j=Y.equippedCombatArts),"unlockedClasses"in Y&&t(35,x=Y.unlockedClasses),"equippedClass"in Y&&t(2,Z=Y.equippedClass),"equippedCombatSkills"in Y&&t(3,V=Y.equippedCombatSkills),"allWeapons"in Y&&t(36,ce=Y.allWeapons),"allCombatSkills"in Y&&t(37,pe=Y.allCombatSkills),"selectedWeapon"in Y&&t(38,re=Y.selectedWeapon)},n.$$.update=()=>{var Y,Ce,We,se,Me,he,M,ae,de,ee,$;n.$$.dirty[1]&8&&t(8,i=$s(J[Ye.DEX])),n.$$.dirty[1]&32&&t(40,o=ce.fullFeatures),n.$$.dirty[1]&640&&t(39,l=(Y=o[re])==null?void 0:Y.type),n.$$.dirty[1]&640&&t(24,a=((Ce=o[re])==null?void 0:Ce.acBonus)||0),n.$$.dirty[0]&8|n.$$.dirty[1]&256&&t(23,c=V.reduce((ne,me)=>{const le=_s[me],{acBonusCompatibility:ie,acBonus:be}=le||{};return be&&(!ie||ie.includes(l))?ne+(_s[me].acBonus||0):ne},0)),n.$$.dirty[0]&125829392&&t(32,u=Jg+i+s+r+a+c+ye),n.$$.dirty[0]&4&&t(22,f=((se=(We=Yt[Z])==null?void 0:We.whenEquipped)==null?void 0:se.msBonus)||0),n.$$.dirty[0]&6291456&&t(31,d=Zg+f+h),n.$$.dirty[1]&16&&t(20,m=x.reduce((ne,me)=>{var le,ie;return ne+(((ie=(le=Yt==null?void 0:Yt[me])==null?void 0:le.unlocks)==null?void 0:ie.hpBonus)||0)},0)),n.$$.dirty[1]&16&&t(19,p=x.reduce((ne,me)=>{var le;return Il.has(me)?((le=Yt==null?void 0:Yt[me])==null?void 0:le.canUseMagic)===!0?Math.max(ne,r7):Math.max(ne,s7):ne},0)),n.$$.dirty[0]&8&&t(18,_=V.reduce((ne,me)=>ne+(_s[me].hpBonus||0),0)),n.$$.dirty[1]&8&&t(17,v=$s(J[Ye.CON])*2),n.$$.dirty[0]&1966080&&t(30,y=xg+m+p+_+v),n.$$.dirty[1]&16&&t(16,w=x.reduce((ne,me)=>{var le,ie;return ne+((ie=(le=Yt==null?void 0:Yt[me])==null?void 0:le.unlocks)==null?void 0:ie.protectionBonus)||0},0)),n.$$.dirty[1]&16&&t(15,A=x.reduce((ne,me)=>{var le;return Il.has(me)?(le=Yt==null?void 0:Yt[me])!=null&&le.canUseMagic?ne:o7:ne},0)),n.$$.dirty[0]&4&&t(14,E=((he=(Me=Yt[Z])==null?void 0:Me.whenEquipped)==null?void 0:he.protectionBonus)||0),n.$$.dirty[0]&8&&t(13,C=V.reduce((ne,me)=>ne+(_s[me].protectionBonus||0),0)),n.$$.dirty[0]&122880&&t(29,R=$g+w+A+E+C),n.$$.dirty[1]&16&&t(12,D=x.reduce((ne,me)=>{var le,ie;return ne+((ie=(le=Yt==null?void 0:Yt[me])==null?void 0:le.unlocks)==null?void 0:ie.protectionBonus)||0},0)),n.$$.dirty[1]&16&&t(11,N=x.reduce((ne,me)=>{var le;return Il.has(me)&&(le=Yt==null?void 0:Yt[me])!=null&&le.canUseMagic?l7:ne},0)),n.$$.dirty[0]&4&&t(10,L=((ae=(M=Yt[Z])==null?void 0:M.whenEquipped)==null?void 0:ae.resilienceBonus)||0),n.$$.dirty[0]&8&&t(9,F=V.reduce((ne,me)=>ne+(_s[me].resilienceBonus||0),0)),n.$$.dirty[0]&7680&&t(28,P=e1+D+N+L+F),n.$$.dirty[0]&4&&t(5,Q=((ee=(de=Yt[Z])==null?void 0:de.whenEquipped)==null?void 0:ee.followUpBonus)||0),n.$$.dirty[1]&160&&t(7,O=(($=ce.fullFeatures[re])==null?void 0:$.followUpBonus)||0),n.$$.dirty[1]&64&&t(6,K=pe.fullArray.reduce((ne,me)=>ne+(pe.fullFeatures[me].followUpBonus||0),0)),n.$$.dirty[0]&480&&t(27,X=i+O+K+Q)},t(26,s=0),t(25,r=0),t(21,h=0),[te,j,Z,V,ye,Q,K,O,i,F,L,N,D,C,E,A,w,v,_,p,m,h,f,c,a,r,s,X,P,R,y,d,u,Ne,J,x,ce,pe,re,l,o]}class sre extends st{constructor(e){super(),rt(this,e,ire,nre,kt,{stats:34,equippedWeapons:0,equippedCombatArts:1,unlockedClasses:35,equippedClass:2,equippedCombatSkills:3,allWeapons:36,allCombatSkills:37,selectedWeapon:38},null,[-1,-1])}}function Bk(n,e,t){const i=n.slice();return i[16]=e[t],i}function rre(n){let e,t;return e=new Q4({props:{isUnlocked:n[0][n[3]]===jn.PROFICIENT||n[0][n[3]]===jn.AWFUL,isMastered:n[0][n[3]]===jn.EXPERT,onClick:n[13],unlockedFilter:n[0][n[3]]===jn.PROFICIENT?"sepia(100%) saturate(1000%) brightness(45%) hue-rotate(174deg)":"sepia(100%) saturate(1000%) brightness(45%) hue-rotate(287deg)"}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,s){const r={};s&9&&(r.isUnlocked=i[0][i[3]]===jn.PROFICIENT||i[0][i[3]]===jn.AWFUL),s&9&&(r.isMastered=i[0][i[3]]===jn.EXPERT),s&12&&(r.onClick=i[13]),s&9&&(r.unlockedFilter=i[0][i[3]]===jn.PROFICIENT?"sepia(100%) saturate(1000%) brightness(45%) hue-rotate(174deg)":"sepia(100%) saturate(1000%) brightness(45%) hue-rotate(287deg)"),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function ore(n){let e,t;return{c(){e=k("div"),t=q("From Master/Current Class"),this.h()},l(i){e=T(i,"DIV",{slot:!0});var s=I(e);t=z(s,"From Master/Current Class"),s.forEach(b),this.h()},h(){S(e,"slot","t")},m(i,s){H(i,e,s),g(e,t)},p:Xe,d(i){i&&b(e)}}}function Lk(n){let e,t,i,s=n[6],r=[];for(let o=0;o<s.length;o+=1)r[o]=Uk(Bk(n,s,o));return{c(){e=k("select");for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){e=T(o,"SELECT",{name:!0});var l=I(e);for(let a=0;a<r.length;a+=1)r[a].l(l);l.forEach(b),this.h()},h(){S(e,"name","stat-type")},m(o,l){H(o,e,l);for(let a=0;a<r.length;a+=1)r[a].m(e,null);t||(i=_e(e,"change",n[15]),t=!0)},p(o,l){if(l&96){s=o[6];let a;for(a=0;a<s.length;a+=1){const c=Bk(o,s,a);r[a]?r[a].p(c,l):(r[a]=Uk(c),r[a].c(),r[a].m(e,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=s.length}},d(o){o&&b(e),Ft(r,o),t=!1,i()}}}function Uk(n){let e,t=zs[n[16]]+"",i,s,r,o;return{c(){e=k("option"),i=q(t),s=U(),this.h()},l(l){e=T(l,"OPTION",{});var a=I(e);i=z(a,t),s=W(a),a.forEach(b),this.h()},h(){e.__value=r=n[16],e.value=e.__value,e.selected=o=n[5]===n[16]},m(l,a){H(l,e,a),g(e,i),g(e,s)},p(l,a){a&64&&t!==(t=zs[l[16]]+"")&&Le(i,t),a&64&&r!==(r=l[16])&&(e.__value=r,e.value=e.__value),a&96&&o!==(o=l[5]===l[16])&&(e.selected=o)},d(l){l&&b(e)}}}function Wk(n){let e,t=`(${zs[n[5]]})`,i;return{c(){e=k("span"),i=q(t)},l(s){e=T(s,"SPAN",{});var r=I(e);i=z(r,t),r.forEach(b)},m(s,r){H(s,e,r),g(e,i)},p(s,r){r&32&&t!==(t=`(${zs[s[5]]})`)&&Le(i,t)},d(s){s&&b(e)}}}function lre(n){let e,t,i,s,r,o,l=n[9]+n[8]+n[7]+"",a,c,u=`${td[n[3]]} `,f,h,d=Array.isArray(n[6]),m,p=!Array.isArray(n[6]),_,v,y;t=new ai({props:{disabled:n[1][n[3]]===void 0,$$slots:{t:[ore],default:[rre]},$$scope:{ctx:n}}});let w=d&&Lk(n),A=p&&Wk(n);return{c(){e=k("div"),ke(t.$$.fragment),i=U(),s=k("div"),r=k("span"),o=k("span"),a=q(l),c=U(),f=q(u),h=U(),w&&w.c(),m=U(),A&&A.c(),this.h()},l(E){e=T(E,"DIV",{class:!0});var C=I(e);Oe(t.$$.fragment,C),i=W(C),s=T(C,"DIV",{class:!0});var R=I(s);r=T(R,"SPAN",{class:!0});var D=I(r);o=T(D,"SPAN",{class:!0});var N=I(o);a=z(N,l),N.forEach(b),c=W(D),f=z(D,u),D.forEach(b),h=W(R),w&&w.l(R),m=W(R),A&&A.l(R),R.forEach(b),C.forEach(b),this.h()},h(){S(o,"class","total"),S(r,"class","label-text svelte-7dm9fu"),S(s,"class","label"),S(e,"class","container svelte-7dm9fu")},m(E,C){H(E,e,C),Te(t,e,null),g(e,i),g(e,s),g(s,r),g(r,o),g(o,a),g(r,c),g(r,f),g(s,h),w&&w.m(s,null),g(s,m),A&&A.m(s,null),_=!0,v||(y=_e(r,"click",n[14]),v=!0)},p(E,[C]){const R={};C&10&&(R.disabled=E[1][E[3]]===void 0),C&524301&&(R.$$scope={dirty:C,ctx:E}),t.$set(R),(!_||C&896)&&l!==(l=E[9]+E[8]+E[7]+"")&&Le(a,l),(!_||C&8)&&u!==(u=`${td[E[3]]} `)&&Le(f,u),C&64&&(d=Array.isArray(E[6])),d?w?w.p(E,C):(w=Lk(E),w.c(),w.m(s,m)):w&&(w.d(1),w=null),C&64&&(p=!Array.isArray(E[6])),p?A?A.p(E,C):(A=Wk(E),A.c(),A.m(s,null)):A&&(A.d(1),A=null)},i(E){_||(B(t.$$.fragment,E),_=!0)},o(E){G(t.$$.fragment,E),_=!1},d(E){E&&b(e),Ie(t),w&&w.d(),A&&A.d(),v=!1,y()}}}function are(n,e,t){let i,s,r,o,l,{stats:a}=e,{skillProficiency:c}=e,{classProficiencies:u}=e,{skillBonus:f}=e,{onToggleSkillProficiency:h}=e,{skill:d}=e,{playerName:m}=e,p=Array.isArray(o)?o[0]:o;const _=()=>h(d),v=()=>io([Et.d20],{modifier:[s+r+l],chatEntryOnRes:{playerName:m,rollName:td[d],rollBonus:Qs([s+r+l])},db:i}),y=w=>{t(5,p=w.currentTarget.value)};return n.$$set=w=>{"stats"in w&&t(11,a=w.stats),"skillProficiency"in w&&t(0,c=w.skillProficiency),"classProficiencies"in w&&t(1,u=w.classProficiencies),"skillBonus"in w&&t(12,f=w.skillBonus),"onToggleSkillProficiency"in w&&t(2,h=w.onToggleSkillProficiency),"skill"in w&&t(3,d=w.skill),"playerName"in w&&t(4,m=w.playerName)},n.$$.update=()=>{n.$$.dirty&4104&&t(9,s=f[d]||0),n.$$.dirty&9&&t(8,r=c[d]!==jn.NONE&&c[d]!==void 0?z4*(c[d]||1):0),n.$$.dirty&8&&t(6,o=TL[d]),n.$$.dirty&64&&t(5,p=Array.isArray(o)?o[0]:o),n.$$.dirty&2080&&t(7,l=$s(a[p]))},t(10,i=Bn(hs.DB)),[c,u,h,d,m,p,o,l,r,s,i,a,f,_,v,y]}class cre extends st{constructor(e){super(),rt(this,e,are,lre,kt,{stats:11,skillProficiency:0,classProficiencies:1,skillBonus:12,onToggleSkillProficiency:2,skill:3,playerName:4})}}function Vk(n,e,t){const i=n.slice();return i[9]=e[t],i}function Fk(n){let e,t;return e=new cre({props:{playerName:n[3],skill:n[9],stats:n[0],skillBonus:n[1],classProficiencies:n[4],skillProficiency:n[5],onToggleSkillProficiency:n[2]}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,s){const r={};s&8&&(r.playerName=i[3]),s&1&&(r.stats=i[0]),s&2&&(r.skillBonus=i[1]),s&16&&(r.classProficiencies=i[4]),s&32&&(r.skillProficiency=i[5]),s&4&&(r.onToggleSkillProficiency=i[2]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function ure(n){let e,t,i,s,r,o,l;t=new vc({props:{label:"Skills"}});let a=Object.values(rn),c=[];for(let f=0;f<a.length;f+=1)c[f]=Fk(Vk(n,a,f));const u=f=>G(c[f],1,1,()=>{c[f]=null});return{c(){e=k("div"),ke(t.$$.fragment),i=U(),s=k("div"),r=U(),o=k("div");for(let f=0;f<c.length;f+=1)c[f].c();this.h()},l(f){e=T(f,"DIV",{class:!0});var h=I(e);Oe(t.$$.fragment,h),i=W(h),s=T(h,"DIV",{class:!0}),I(s).forEach(b),r=W(h),o=T(h,"DIV",{class:!0});var d=I(o);for(let m=0;m<c.length;m+=1)c[m].l(d);d.forEach(b),h.forEach(b),this.h()},h(){S(s,"class","divider svelte-1bsm0kx"),S(o,"class","skills svelte-1bsm0kx"),S(e,"class","container svelte-1bsm0kx")},m(f,h){H(f,e,h),Te(t,e,null),g(e,i),g(e,s),g(e,r),g(e,o);for(let d=0;d<c.length;d+=1)c[d].m(o,null);l=!0},p(f,[h]){if(h&63){a=Object.values(rn);let d;for(d=0;d<a.length;d+=1){const m=Vk(f,a,d);c[d]?(c[d].p(m,h),B(c[d],1)):(c[d]=Fk(m),c[d].c(),B(c[d],1),c[d].m(o,null))}for(He(),d=a.length;d<c.length;d+=1)u(d);qe()}},i(f){if(!l){B(t.$$.fragment,f);for(let h=0;h<a.length;h+=1)B(c[h]);l=!0}},o(f){G(t.$$.fragment,f),c=c.filter(Boolean);for(let h=0;h<c.length;h+=1)G(c[h]);l=!1},d(f){f&&b(e),Ie(t),Ft(c,f)}}}function fre(n,e,t){let i,s,{stats:r=kv}=e,{skillProficiency:o=G4}=e,{skillBonus:l=K4}=e,{onToggleSkillProficiency:a}=e,{equippedClass:c}=e,{masteredClasses:u}=e,{playerName:f}=e;return n.$$set=h=>{"stats"in h&&t(0,r=h.stats),"skillProficiency"in h&&t(6,o=h.skillProficiency),"skillBonus"in h&&t(1,l=h.skillBonus),"onToggleSkillProficiency"in h&&t(2,a=h.onToggleSkillProficiency),"equippedClass"in h&&t(7,c=h.equippedClass),"masteredClasses"in h&&t(8,u=h.masteredClasses),"playerName"in h&&t(3,f=h.playerName)},n.$$.update=()=>{n.$$.dirty&384&&t(4,i={...c?Yt[c].whenEquipped.playerSkills:{},...u.reduce((h,d)=>{var m;return h={...h,...(m=Yt[d].whenMastered)==null?void 0:m.playerSkills},h},{})}),n.$$.dirty&80&&t(5,s=Object.keys(i).reduce((h,d)=>(h[d]===void 0?h[d]=i[d]:h[d]=Math.max(h[d],i[d]),h),{...o}))},[r,l,a,f,i,s,o,c,u]}class hre extends st{constructor(e){super(),rt(this,e,fre,ure,kt,{stats:0,skillProficiency:6,skillBonus:1,onToggleSkillProficiency:2,equippedClass:7,masteredClasses:8,playerName:3})}}function jk(n,e,t){const i=n.slice();return i[17]=e[t],i}function Hk(n,e,t){const i=n.slice();return i[20]=e[t],i}function qk(n){let e,t,i=pg[n[20]]+"",s,r,o,l=$s(n[0][n[20]])+"",a,c,u,f,h,d;function m(){return n[9](n[20])}function p(..._){return n[10](n[20],..._)}return{c(){e=k("div"),t=k("button"),s=q(i),r=U(),o=k("div"),a=q(l),c=U(),u=k("input"),this.h()},l(_){e=T(_,"DIV",{class:!0});var v=I(e);t=T(v,"BUTTON",{class:!0});var y=I(t);s=z(y,i),y.forEach(b),r=W(v),o=T(v,"DIV",{class:!0});var w=I(o);a=z(w,l),w.forEach(b),c=W(v),u=T(v,"INPUT",{class:!0,type:!0}),v.forEach(b),this.h()},h(){S(t,"class","label svelte-qeu3p9"),S(o,"class","mod svelte-qeu3p9"),S(u,"class","value svelte-qeu3p9"),u.value=f=typeof n[0][n[20]]=="number"?n[0][n[20]]:0,S(u,"type","number"),S(e,"class","stat-container svelte-qeu3p9")},m(_,v){H(_,e,v),g(e,t),g(t,s),g(e,r),g(e,o),g(o,a),g(e,c),g(e,u),h||(d=[_e(t,"click",m),_e(u,"input",p)],h=!0)},p(_,v){n=_,v&1&&i!==(i=pg[n[20]]+"")&&Le(s,i),v&1&&l!==(l=$s(n[0][n[20]])+"")&&Le(a,l),v&1&&f!==(f=typeof n[0][n[20]]=="number"?n[0][n[20]]:0)&&u.value!==f&&(u.value=f)},d(_){_&&b(e),h=!1,an(d)}}}function zk(n){let e,t;return e=new ai({props:{$$slots:{t:[mre],default:[dre]},$$scope:{ctx:n}}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,s){const r={};s&8388626&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function dre(n){let e,t,i,s;return{c(){e=k("div"),t=k("img"),this.h()},l(r){e=T(r,"DIV",{class:!0});var o=I(e);t=T(o,"IMG",{class:!0,src:!0,alt:!0}),o.forEach(b),this.h()},h(){var r;S(t,"class","crest-image svelte-qeu3p9"),Pl(t.src,i=n[4].image)||S(t,"src",i),S(t,"alt",s=(r=n[1])==null?void 0:r.type),lt(t,"border-color",n[1].isMajor?"slateblue":"lightskyblue"),S(e,"class","image-container")},m(r,o){H(r,e,o),g(e,t)},p(r,o){var l;o&16&&!Pl(t.src,i=r[4].image)&&S(t,"src",i),o&2&&s!==(s=(l=r[1])==null?void 0:l.type)&&S(t,"alt",s),o&2&&lt(t,"border-color",r[1].isMajor?"slateblue":"lightskyblue")},d(r){r&&b(e)}}}function mre(n){var v,y,w,A;let e,t,i,s,r=((v=n[4])==null?void 0:v.label)+"",o,l,a=Jb((y=n[1])==null?void 0:y.isMajor)+"",c,u,f=n[4].activationDC[ny((w=n[1])==null?void 0:w.isMajor)]+"",h,d,m,p=`${(A=n[4])==null?void 0:A.description}`,_;return{c(){e=k("div"),t=k("div"),i=k("u"),s=q("Crest of "),o=q(r),l=q(" ("),c=q(a),u=q(`,
							DC `),h=q(f),d=q(")"),m=U(),_=q(p),this.h()},l(E){e=T(E,"DIV",{slot:!0});var C=I(e);t=T(C,"DIV",{});var R=I(t);i=T(R,"U",{});var D=I(i);s=z(D,"Crest of "),o=z(D,r),l=z(D," ("),c=z(D,a),u=z(D,`,
							DC `),h=z(D,f),d=z(D,")"),D.forEach(b),R.forEach(b),m=W(C),_=z(C,p),C.forEach(b),this.h()},h(){S(e,"slot","t")},m(E,C){H(E,e,C),g(e,t),g(t,i),g(i,s),g(i,o),g(i,l),g(i,c),g(i,u),g(i,h),g(i,d),g(e,m),g(e,_)},p(E,C){var R,D,N,L;C&16&&r!==(r=((R=E[4])==null?void 0:R.label)+"")&&Le(o,r),C&2&&a!==(a=Jb((D=E[1])==null?void 0:D.isMajor)+"")&&Le(c,a),C&18&&f!==(f=E[4].activationDC[ny((N=E[1])==null?void 0:N.isMajor)]+"")&&Le(h,f),C&16&&p!==(p=`${(L=E[4])==null?void 0:L.description}`)&&Le(_,p)},d(E){E&&b(e)}}}function Gk(n){var o;let e,t=((o=Ds[n[17]])==null?void 0:o.label)+"",i,s,r;return{c(){e=k("option"),i=q(t),s=U(),this.h()},l(l){e=T(l,"OPTION",{});var a=I(e);i=z(a,t),s=W(a),a.forEach(b),this.h()},h(){var l;e.__value=n[17],e.value=e.__value,e.selected=r=((l=n[1])==null?void 0:l.type)===n[17]},m(l,a){H(l,e,a),g(e,i),g(e,s)},p(l,a){var c;a&2&&r!==(r=((c=l[1])==null?void 0:c.type)===l[17])&&(e.selected=r)},d(l){l&&b(e)}}}function pre(n){var Q;let e,t,i,s,r,o,l,a,c,u,f,h,d,m,p,_="Major",v,y,w="Minor",A,E,C,R;t=new vc({props:{label:"Stats"}});let D=Object.keys(n[0]),N=[];for(let O=0;O<D.length;O+=1)N[O]=qk(Hk(n,D,O));let L=((Q=n[4])==null?void 0:Q.image)&&zk(n),F=Object.keys(fn),P=[];for(let O=0;O<F.length;O+=1)P[O]=Gk(jk(n,F,O));return{c(){e=k("div"),ke(t.$$.fragment),i=U();for(let O=0;O<N.length;O+=1)N[O].c();s=U(),r=k("div"),L&&L.c(),o=U(),l=k("select"),a=k("option"),c=q("Crest?");for(let O=0;O<P.length;O+=1)P[O].c();f=U(),h=k("select"),d=k("option"),m=q("Major/Minor?"),p=k("option"),v=q(_),y=k("option"),A=q(w),this.h()},l(O){e=T(O,"DIV",{class:!0});var K=I(e);Oe(t.$$.fragment,K),i=W(K);for(let ce=0;ce<N.length;ce+=1)N[ce].l(K);s=W(K),r=T(K,"DIV",{class:!0});var X=I(r);L&&L.l(X),o=W(X),l=T(X,"SELECT",{name:!0});var J=I(l);a=T(J,"OPTION",{});var te=I(a);c=z(te,"Crest?"),te.forEach(b);for(let ce=0;ce<P.length;ce+=1)P[ce].l(J);J.forEach(b),f=W(X),h=T(X,"SELECT",{name:!0});var j=I(h);d=T(j,"OPTION",{});var x=I(d);m=z(x,"Major/Minor?"),x.forEach(b),p=T(j,"OPTION",{});var Z=I(p);v=z(Z,_),Z.forEach(b),y=T(j,"OPTION",{});var V=I(y);A=z(V,w),V.forEach(b),j.forEach(b),X.forEach(b),K.forEach(b),this.h()},h(){a.__value="",a.value=a.__value,a.selected=u=!n[1].type,S(l,"name","crest"),d.__value="none",d.value=d.__value,p.__value=mo.MAJOR,p.value=p.__value,y.__value=mo.MINOR,y.value=y.__value,S(h,"name","major-minor"),S(r,"class","crest svelte-qeu3p9"),S(e,"class","container svelte-qeu3p9")},m(O,K){H(O,e,K),Te(t,e,null),g(e,i);for(let X=0;X<N.length;X+=1)N[X].m(e,null);g(e,s),g(e,r),L&&L.m(r,null),g(r,o),g(r,l),g(l,a),g(a,c);for(let X=0;X<P.length;X+=1)P[X].m(l,null);g(r,f),g(r,h),g(h,d),g(d,m),g(h,p),g(p,v),g(h,y),g(y,A),n[12](h),E=!0,C||(R=[_e(l,"change",n[11]),_e(h,"change",n[13])],C=!0)},p(O,[K]){var X;if(K&97){D=Object.keys(O[0]);let J;for(J=0;J<D.length;J+=1){const te=Hk(O,D,J);N[J]?N[J].p(te,K):(N[J]=qk(te),N[J].c(),N[J].m(e,s))}for(;J<N.length;J+=1)N[J].d(1);N.length=D.length}if((X=O[4])!=null&&X.image?L?(L.p(O,K),K&16&&B(L,1)):(L=zk(O),L.c(),B(L,1),L.m(r,o)):L&&(He(),G(L,1,1,()=>{L=null}),qe()),(!E||K&2&&u!==(u=!O[1].type))&&(a.selected=u),K&2){F=Object.keys(fn);let J;for(J=0;J<F.length;J+=1){const te=jk(O,F,J);P[J]?P[J].p(te,K):(P[J]=Gk(te),P[J].c(),P[J].m(l,null))}for(;J<P.length;J+=1)P[J].d(1);P.length=F.length}},i(O){E||(B(t.$$.fragment,O),B(L),E=!0)},o(O){G(t.$$.fragment,O),G(L),E=!1},d(O){O&&b(e),Ie(t),Ft(N,O),L&&L.d(),Ft(P,O),n[12](null),C=!1,an(R)}}}function gre(n,e,t){let i,s;Bn(hs.MODAL);let{stats:r=kv}=e,{onUpdatePlayerStats:o}=e,{playerName:l}=e,{playerCrest:a}=e,{onUpdateCrest:c}=e,u={};const f=y=>{const w=$s(r[y]);io([Et.d20],{modifier:[w],chatEntryOnRes:{playerName:l,rollName:pg[y],rollBonus:w},db:i})},h=(y,w)=>{o({...r,[y]:isNaN(w)?0:w})},d=y=>f(y),m=(y,w)=>h(y,parseInt(w.currentTarget.value)),p=y=>{c({type:y.currentTarget.value,isMajor:!1})};function _(y){Ut[y?"unshift":"push"](()=>{u=y,t(3,u),t(1,a)})}const v=y=>c({...a,isMajor:y.currentTarget.value==="MAJOR"});return n.$$set=y=>{"stats"in y&&t(0,r=y.stats),"onUpdatePlayerStats"in y&&t(7,o=y.onUpdatePlayerStats),"playerName"in y&&t(8,l=y.playerName),"playerCrest"in y&&t(1,a=y.playerCrest),"onUpdateCrest"in y&&t(2,c=y.onUpdateCrest)},n.$$.update=()=>{n.$$.dirty&10&&u&&t(3,u.value=a.type?a!=null&&a.isMajor?mo.MAJOR:mo.MINOR:"none",u),n.$$.dirty&2&&t(4,s=Ds[a==null?void 0:a.type]||{})},i=Bn(hs.DB),[r,a,c,u,s,f,h,o,l,d,m,p,_,v]}class vre extends st{constructor(e){super(),rt(this,e,gre,pre,kt,{stats:0,onUpdatePlayerStats:7,playerName:8,playerCrest:1,onUpdateCrest:2})}}function Kk(n,e,t){const i=n.slice();return i[14]=e[t],i}function Xk(n){let e,t,i,s=n[0],r=[];for(let o=0;o<s.length;o+=1)r[o]=Qk(Kk(n,s,o));return{c(){e=k("select");for(let o=0;o<r.length;o+=1)r[o].c()},l(o){e=T(o,"SELECT",{});var l=I(e);for(let a=0;a<r.length;a+=1)r[a].l(l);l.forEach(b)},m(o,l){H(o,e,l);for(let a=0;a<r.length;a+=1)r[a].m(e,null);t||(i=_e(e,"change",n[10]),t=!0)},p(o,l){if(l&19){s=o[0];let a;for(a=0;a<s.length;a+=1){const c=Kk(o,s,a);r[a]?r[a].p(c,l):(r[a]=Qk(c),r[a].c(),r[a].m(e,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=s.length}},d(o){o&&b(e),Ft(r,o),t=!1,i()}}}function Qk(n){let e,t=n[1][n[14]].label+"",i,s,r=Au(n[1][n[14]])+"",o,l,a,c;return{c(){e=k("option"),i=q(t),s=q(": "),o=q(r),l=U(),this.h()},l(u){e=T(u,"OPTION",{});var f=I(e);i=z(f,t),s=z(f,": "),o=z(f,r),l=W(f),f.forEach(b),this.h()},h(){e.__value=a=n[14],e.value=e.__value,e.selected=c=n[14]===n[4]},m(u,f){H(u,e,f),g(e,i),g(e,s),g(e,o),g(e,l)},p(u,f){f&3&&t!==(t=u[1][u[14]].label+"")&&Le(i,t),f&3&&r!==(r=Au(u[1][u[14]])+"")&&Le(o,r),f&1&&a!==(a=u[14])&&(e.__value=a,e.value=e.__value),f&17&&c!==(c=u[14]===u[4])&&(e.selected=c)},d(u){u&&b(e)}}}function Yk(n){let e,t,i,s,r,o,l;return{c(){e=k("div"),t=k("div"),i=q("Reason:"),s=U(),r=k("textarea"),this.h()},l(a){e=T(a,"DIV",{class:!0});var c=I(e);t=T(c,"DIV",{});var u=I(t);i=z(u,"Reason:"),u.forEach(b),s=W(c),r=T(c,"TEXTAREA",{id:!0,type:!0,rows:!0,class:!0}),I(r).forEach(b),c.forEach(b),this.h()},h(){S(r,"id","custom-weapon-prompt-input"),S(r,"type","text"),S(r,"rows",3),S(r,"class","svelte-96eo25"),S(e,"class","content")},m(a,c){H(a,e,c),g(e,t),g(t,i),g(e,s),g(e,r),n[11](r),Ms(r,n[3]),o||(l=_e(r,"input",n[12]),o=!0)},p(a,c){c&8&&Ms(r,a[3])},d(a){a&&b(e),n[11](null),o=!1,l()}}}function Jk(n){var l;let e,t,i,s,r=((l=n[2][n[0]])==null?void 0:l.reason)+"",o;return{c(){e=k("div"),t=k("b"),i=q("Current Reason:"),s=U(),o=q(r),this.h()},l(a){e=T(a,"DIV",{class:!0});var c=I(e);t=T(c,"B",{});var u=I(t);i=z(u,"Current Reason:"),u.forEach(b),s=W(c),o=z(c,r),c.forEach(b),this.h()},h(){S(e,"class","content")},m(a,c){H(a,e,c),g(e,t),g(t,i),g(e,s),g(e,o)},p(a,c){var u;c&5&&r!==(r=((u=a[2][a[0]])==null?void 0:u.reason)+"")&&Le(o,r)},d(a){a&&b(e)}}}function bre(n){let e,t,i=n[5]?"Removing":"Adding",s,r,o,l=Array.isArray(n[0]),a,c,u,f,h,d=n[5]?"Remove":"Submit",m,p,_,v=l&&Xk(n),y=!n[5]&&Yk(n),w=n[5]&&Jk(n);return{c(){e=k("div"),t=k("h1"),s=q(i),r=q(" custom weapon:"),o=U(),v&&v.c(),a=U(),y&&y.c(),c=U(),w&&w.c(),u=U(),f=k("button"),h=q("Click to "),m=q(d),this.h()},l(A){e=T(A,"DIV",{class:!0});var E=I(e);t=T(E,"H1",{});var C=I(t);s=z(C,i),r=z(C," custom weapon:"),C.forEach(b),o=W(E),v&&v.l(E),a=W(E),y&&y.l(E),c=W(E),w&&w.l(E),u=W(E),f=T(E,"BUTTON",{class:!0});var R=I(f);h=z(R,"Click to "),m=z(R,d),R.forEach(b),E.forEach(b),this.h()},h(){S(f,"class","action svelte-96eo25"),S(e,"class","container svelte-96eo25")},m(A,E){H(A,e,E),g(e,t),g(t,s),g(t,r),g(e,o),v&&v.m(e,null),g(e,a),y&&y.m(e,null),g(e,c),w&&w.m(e,null),g(e,u),g(e,f),g(f,h),g(f,m),p||(_=_e(f,"click",function(){Mn(n[7])&&n[7].apply(this,arguments)}),p=!0)},p(A,[E]){n=A,E&32&&i!==(i=n[5]?"Removing":"Adding")&&Le(s,i),E&1&&(l=Array.isArray(n[0])),l?v?v.p(n,E):(v=Xk(n),v.c(),v.m(e,a)):v&&(v.d(1),v=null),n[5]?y&&(y.d(1),y=null):y?y.p(n,E):(y=Yk(n),y.c(),y.m(e,c)),n[5]?w?w.p(n,E):(w=Jk(n),w.c(),w.m(e,u)):w&&(w.d(1),w=null),E&32&&d!==(d=n[5]?"Remove":"Submit")&&Le(m,d)},i:Xe,o:Xe,d(A){A&&b(e),v&&v.d(),y&&y.d(),w&&w.d(),p=!1,_()}}}function _re(n,e,t){let i,s;const{close:r}=Bn(hs.MODAL);let{defaultReason:o=""}=e,{weapon:l}=e,{weaponsToFeatures:a}=e,{customWeapons:c}=e,{onUpdateCustomWeapons:u}=e,f=o,h,d=Array.isArray(l)?l[0]:l;Mi(()=>{h==null||h.select()});const m=v=>t(4,d=v.currentTarget.value);function p(v){Ut[v?"unshift":"push"](()=>{h=v,t(6,h)})}function _(){f=this.value,t(3,f)}return n.$$set=v=>{"defaultReason"in v&&t(8,o=v.defaultReason),"weapon"in v&&t(0,l=v.weapon),"weaponsToFeatures"in v&&t(1,a=v.weaponsToFeatures),"customWeapons"in v&&t(2,c=v.customWeapons),"onUpdateCustomWeapons"in v&&t(9,u=v.onUpdateCustomWeapons)},n.$$.update=()=>{n.$$.dirty&5&&t(5,i=Array.isArray(l)?!1:c[l]),n.$$.dirty&572&&t(7,s=()=>{if(i){const{[d]:v,...y}=c;u(y)}else u({...c,[d]:{...c[d],reason:f}});r()})},[l,a,c,f,d,i,h,s,o,u,m,p,_]}class Zk extends st{constructor(e){super(),rt(this,e,_re,bre,kt,{defaultReason:8,weapon:0,weaponsToFeatures:1,customWeapons:2,onUpdateCustomWeapons:9})}}function yre(n){let e,t=n[3].weaponsToLabel[n[0]]+"",i,s;return{c(){e=k("div"),i=q(t),this.h()},l(r){e=T(r,"DIV",{class:!0});var o=I(e);i=z(o,t),o.forEach(b),this.h()},h(){S(e,"class",s=Ze(Zi("label",{magic:n[4],custom:n[6]}))+" svelte-12aohl3")},m(r,o){H(r,e,o),g(e,i)},p(r,o){o&9&&t!==(t=r[3].weaponsToLabel[r[0]]+"")&&Le(i,t),o&80&&s!==(s=Ze(Zi("label",{magic:r[4],custom:r[6]}))+" svelte-12aohl3")&&S(e,"class",s)},d(r){r&&b(e)}}}function Sre(n){let e,t=Au(n[3].fullFeatures[n[0]])+"",i,s,r,o=n[5][n[0]].reason?`(${n[5][n[0]].reason})`:"",l;return{c(){e=k("div"),i=q(t),s=U(),r=k("span"),l=q(o),this.h()},l(a){e=T(a,"DIV",{slot:!0});var c=I(e);i=z(c,t),s=W(c),r=T(c,"SPAN",{});var u=I(r);l=z(u,o),u.forEach(b),c.forEach(b),this.h()},h(){lt(r,"color","#9c8e8e"),S(e,"slot","t")},m(a,c){H(a,e,c),g(e,i),g(e,s),g(e,r),g(r,l)},p(a,c){c&9&&t!==(t=Au(a[3].fullFeatures[a[0]])+"")&&Le(i,t),c&33&&o!==(o=a[5][a[0]].reason?`(${a[5][a[0]].reason})`:"")&&Le(l,o)},d(a){a&&b(e)}}}function xk(n){let e,t,i;return t=new Im({props:{isEquipped:n[1].includes(n[0]),onClick:n[21],isVisible:n[1].length<Vl||n[1].includes(n[0])}}),{c(){e=k("div"),ke(t.$$.fragment),this.h()},l(s){e=T(s,"DIV",{class:!0});var r=I(e);Oe(t.$$.fragment,r),r.forEach(b),this.h()},h(){S(e,"class","equip-button svelte-12aohl3")},m(s,r){H(s,e,r),Te(t,e,null),i=!0},p(s,r){const o={};r&3&&(o.isEquipped=s[1].includes(s[0])),r&1029&&(o.onClick=s[21]),r&3&&(o.isVisible=s[1].length<Vl||s[1].includes(s[0])),t.$set(o)},i(s){i||(B(t.$$.fragment,s),i=!0)},o(s){G(t.$$.fragment,s),i=!1},d(s){s&&b(e),Ie(t)}}}function $k(n){let e,t=n[7],i,s,r,o=e3(n);return{c(){e=k("div"),o.c(),i=q(`
			/`),s=k("span"),r=q(n[7]),this.h()},l(l){e=T(l,"DIV",{class:!0});var a=I(e);o.l(a),i=z(a,`
			/`),s=T(a,"SPAN",{});var c=I(s);r=z(c,n[7]),c.forEach(b),a.forEach(b),this.h()},h(){lt(s,"width","15px"),S(e,"class","equip-button svelte-12aohl3")},m(l,a){H(l,e,a),o.m(e,null),g(e,i),g(e,s),g(s,r)},p(l,a){a&128&&kt(t,t=l[7])?(o.d(1),o=e3(l),o.c(),o.m(e,i)):o.p(l,a),a&128&&Le(r,l[7])},d(l){l&&b(e),o.d(l)}}}function e3(n){let e,t,i,s;return{c(){e=k("input"),this.h()},l(r){e=T(r,"INPUT",{class:!0,type:!0,min:!0}),this.h()},h(){S(e,"class",t=Ze("count "+(n[9]===0?"bad":n[9]<=Math.ceil(n[7]/3)?"danger":""))+" svelte-12aohl3"),S(e,"type","number"),S(e,"min","0"),e.value=n[9]},m(r,o){H(r,e,o),i||(s=_e(e,"change",n[22]),i=!0)},p(r,o){o&640&&t!==(t=Ze("count "+(r[9]===0?"bad":r[9]<=Math.ceil(r[7]/3)?"danger":""))+" svelte-12aohl3")&&S(e,"class",t),o&512&&e.value!==r[9]&&(e.value=r[9])},d(r){r&&b(e),i=!1,s()}}}function Ere(n){let e,t,i,s,r;t=new ai({props:{tooltipStyle:ns.CENTER,timeout:300,$$slots:{t:[Sre],default:[yre]},$$scope:{ctx:n}}});let o=!n[4]&&xk(n),l=n[4]&&$k(n);return{c(){e=k("div"),ke(t.$$.fragment),i=U(),o&&o.c(),s=U(),l&&l.c(),this.h()},l(a){e=T(a,"DIV",{class:!0});var c=I(e);Oe(t.$$.fragment,c),i=W(c),o&&o.l(c),s=W(c),l&&l.l(c),c.forEach(b),this.h()},h(){S(e,"class","container svelte-12aohl3")},m(a,c){H(a,e,c),Te(t,e,null),g(e,i),o&&o.m(e,null),g(e,s),l&&l.m(e,null),r=!0},p(a,[c]){const u={};c&16777337&&(u.$$scope={dirty:c,ctx:a}),t.$set(u),a[4]?o&&(He(),G(o,1,1,()=>{o=null}),qe()):o?(o.p(a,c),c&16&&B(o,1)):(o=xk(a),o.c(),B(o,1),o.m(e,s)),a[4]?l?l.p(a,c):(l=$k(a),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},i(a){r||(B(t.$$.fragment,a),B(o),r=!0)},o(a){G(t.$$.fragment,a),G(o),r=!1},d(a){a&&b(e),Ie(t),o&&o.d(),l&&l.d()}}}function wre(n,e,t){let i,s,r,o,l,a,c,u,f,{weapon:h}=e,{equippedClass:d}=e,{equippedWeapons:m}=e,{equippedCombatSkills:p}=e,{onToggleEquip:_}=e,{allWeapons:v}=e,{spellUseFlag:y}=e,{isMagic:w}=e,{weaponUses:A}=e,{onUpdateWeaponUses:E}=e,C={current:y},R={current:null};const D=()=>_(h,u),N=L=>{const F=parseInt(L.currentTarget.value);F>=0&&F<=s?(o(F),L.currentTarget.value=F+""):L.currentTarget.value=s+""};return n.$$set=L=>{"weapon"in L&&t(0,h=L.weapon),"equippedClass"in L&&t(11,d=L.equippedClass),"equippedWeapons"in L&&t(1,m=L.equippedWeapons),"equippedCombatSkills"in L&&t(12,p=L.equippedCombatSkills),"onToggleEquip"in L&&t(2,_=L.onToggleEquip),"allWeapons"in L&&t(3,v=L.allWeapons),"spellUseFlag"in L&&t(13,y=L.spellUseFlag),"isMagic"in L&&t(4,w=L.isMagic),"weaponUses"in L&&t(14,A=L.weaponUses),"onUpdateWeaponUses"in L&&t(15,E=L.onUpdateWeaponUses)},n.$$.update=()=>{var L;n.$$.dirty&6144&&t(20,i=W4(d,p)),n.$$.dirty&1048585&&t(7,s=(((L=v.fullFeatures[h])==null?void 0:L.uses)||1/0)*(i&&h===Fe.HEAL?2:1)),n.$$.dirty&16385&&t(9,r=A[h]),n.$$.dirty&640&&r===void 0&&s!==void 0&&t(9,r=s),n.$$.dirty&32897&&t(8,o=F=>{F<=s&&F>=0&&E(h,F)}),n.$$.dirty&205184&&(C.current!=y||s!==R.current)&&(o(s),t(17,R.current=s,R),t(16,C.current=y,C)),n.$$.dirty&9&&t(6,l=v==null?void 0:v.customSet.has(h)),n.$$.dirty&9&&t(19,a=(v==null?void 0:v.classUnlockSet.has(h))||(v==null?void 0:v.equippedClassSet.has(h))),n.$$.dirty&1&&t(18,c=h.indexOf("TRAINING")>=0),n.$$.dirty&786496&&t(10,u=l||a||c),n.$$.dirty&8&&t(5,f=v.fullFeatures),n.$$.dirty&33&&f[h].reason},[h,m,_,v,w,f,l,s,o,r,u,d,p,y,A,E,C,R,c,a,i,D,N]}class aa extends st{constructor(e){super(),rt(this,e,wre,Ere,kt,{weapon:0,equippedClass:11,equippedWeapons:1,equippedCombatSkills:12,onToggleEquip:2,allWeapons:3,spellUseFlag:13,isMagic:4,weaponUses:14,onUpdateWeaponUses:15})}}function t3(n,e,t){const i=n.slice();return i[33]=e[t],i}function n3(n,e,t){const i=n.slice();return i[33]=e[t],i}function i3(n,e,t){const i=n.slice();return i[33]=e[t],i}function s3(n,e,t){const i=n.slice();return i[33]=e[t],i}function r3(n,e,t){const i=n.slice();return i[33]=e[t],i}function o3(n,e,t){const i=n.slice();return i[33]=e[t],i}function l3(n,e,t){const i=n.slice();return i[33]=e[t],i}function a3(n){let e,t,i,s,r,o,l=n[12],a=[];for(let u=0;u<l.length;u+=1)a[u]=c3(l3(n,l,u));const c=u=>G(a[u],1,1,()=>{a[u]=null});return{c(){e=k("div"),t=k("div"),i=q("Swords"),s=U(),r=k("div");for(let u=0;u<a.length;u+=1)a[u].c();this.h()},l(u){e=T(u,"DIV",{class:!0});var f=I(e);t=T(f,"DIV",{class:!0});var h=I(t);i=z(h,"Swords"),h.forEach(b),s=W(f),r=T(f,"DIV",{class:!0});var d=I(r);for(let m=0;m<a.length;m+=1)a[m].l(d);d.forEach(b),f.forEach(b),this.h()},h(){S(t,"class","label svelte-1x5cszy"),S(r,"class","category-container svelte-1x5cszy"),S(e,"class","category svelte-1x5cszy")},m(u,f){H(u,e,f),g(e,t),g(t,i),g(e,s),g(e,r);for(let h=0;h<a.length;h+=1)a[h].m(r,null);o=!0},p(u,f){if(f[0]&1052735){l=u[12];let h;for(h=0;h<l.length;h+=1){const d=l3(u,l,h);a[h]?(a[h].p(d,f),B(a[h],1)):(a[h]=c3(d),a[h].c(),B(a[h],1),a[h].m(r,null))}for(He(),h=l.length;h<a.length;h+=1)c(h);qe()}},i(u){if(!o){for(let f=0;f<l.length;f+=1)B(a[f]);o=!0}},o(u){a=a.filter(Boolean);for(let f=0;f<a.length;f+=1)G(a[f]);o=!1},d(u){u&&b(e),Ft(a,u)}}}function c3(n){let e,t;return e=new aa({props:{allWeapons:n[3],equippedWeapons:n[0],weapon:n[33],onToggleEquip:n[20],isMagic:!1,spellUseFlag:0,equippedCombatSkills:n[1],equippedClass:n[2],weaponUses:n[4],onUpdateWeaponUses:n[5]}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,s){const r={};s[0]&8&&(r.allWeapons=i[3]),s[0]&1&&(r.equippedWeapons=i[0]),s[0]&4096&&(r.weapon=i[33]),s[0]&1048576&&(r.onToggleEquip=i[20]),s[0]&2&&(r.equippedCombatSkills=i[1]),s[0]&4&&(r.equippedClass=i[2]),s[0]&16&&(r.weaponUses=i[4]),s[0]&32&&(r.onUpdateWeaponUses=i[5]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function u3(n){let e,t,i,s,r,o,l=n[9],a=[];for(let u=0;u<l.length;u+=1)a[u]=f3(o3(n,l,u));const c=u=>G(a[u],1,1,()=>{a[u]=null});return{c(){e=k("div"),t=k("div"),i=q("Lances"),s=U(),r=k("div");for(let u=0;u<a.length;u+=1)a[u].c();this.h()},l(u){e=T(u,"DIV",{class:!0});var f=I(e);t=T(f,"DIV",{class:!0});var h=I(t);i=z(h,"Lances"),h.forEach(b),s=W(f),r=T(f,"DIV",{class:!0});var d=I(r);for(let m=0;m<a.length;m+=1)a[m].l(d);d.forEach(b),f.forEach(b),this.h()},h(){S(t,"class","label svelte-1x5cszy"),S(r,"class","category-container svelte-1x5cszy"),S(e,"class","category svelte-1x5cszy")},m(u,f){H(u,e,f),g(e,t),g(t,i),g(e,s),g(e,r);for(let h=0;h<a.length;h+=1)a[h].m(r,null);o=!0},p(u,f){if(f[0]&1049151){l=u[9];let h;for(h=0;h<l.length;h+=1){const d=o3(u,l,h);a[h]?(a[h].p(d,f),B(a[h],1)):(a[h]=f3(d),a[h].c(),B(a[h],1),a[h].m(r,null))}for(He(),h=l.length;h<a.length;h+=1)c(h);qe()}},i(u){if(!o){for(let f=0;f<l.length;f+=1)B(a[f]);o=!0}},o(u){a=a.filter(Boolean);for(let f=0;f<a.length;f+=1)G(a[f]);o=!1},d(u){u&&b(e),Ft(a,u)}}}function f3(n){let e,t;return e=new aa({props:{equippedWeapons:n[0],weapon:n[33],onToggleEquip:n[20],allWeapons:n[3],isMagic:!1,spellUseFlag:0,equippedCombatSkills:n[1],equippedClass:n[2],weaponUses:n[4],onUpdateWeaponUses:n[5]}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,s){const r={};s[0]&1&&(r.equippedWeapons=i[0]),s[0]&512&&(r.weapon=i[33]),s[0]&1048576&&(r.onToggleEquip=i[20]),s[0]&8&&(r.allWeapons=i[3]),s[0]&2&&(r.equippedCombatSkills=i[1]),s[0]&4&&(r.equippedClass=i[2]),s[0]&16&&(r.weaponUses=i[4]),s[0]&32&&(r.onUpdateWeaponUses=i[5]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function h3(n){let e,t,i,s,r,o,l=n[13],a=[];for(let u=0;u<l.length;u+=1)a[u]=d3(r3(n,l,u));const c=u=>G(a[u],1,1,()=>{a[u]=null});return{c(){e=k("div"),t=k("div"),i=q("Axes"),s=U(),r=k("div");for(let u=0;u<a.length;u+=1)a[u].c();this.h()},l(u){e=T(u,"DIV",{class:!0});var f=I(e);t=T(f,"DIV",{class:!0});var h=I(t);i=z(h,"Axes"),h.forEach(b),s=W(f),r=T(f,"DIV",{class:!0});var d=I(r);for(let m=0;m<a.length;m+=1)a[m].l(d);d.forEach(b),f.forEach(b),this.h()},h(){S(t,"class","label svelte-1x5cszy"),S(r,"class","category-container svelte-1x5cszy"),S(e,"class","category svelte-1x5cszy")},m(u,f){H(u,e,f),g(e,t),g(t,i),g(e,s),g(e,r);for(let h=0;h<a.length;h+=1)a[h].m(r,null);o=!0},p(u,f){if(f[0]&1056831){l=u[13];let h;for(h=0;h<l.length;h+=1){const d=r3(u,l,h);a[h]?(a[h].p(d,f),B(a[h],1)):(a[h]=d3(d),a[h].c(),B(a[h],1),a[h].m(r,null))}for(He(),h=l.length;h<a.length;h+=1)c(h);qe()}},i(u){if(!o){for(let f=0;f<l.length;f+=1)B(a[f]);o=!0}},o(u){a=a.filter(Boolean);for(let f=0;f<a.length;f+=1)G(a[f]);o=!1},d(u){u&&b(e),Ft(a,u)}}}function d3(n){let e,t;return e=new aa({props:{equippedWeapons:n[0],weapon:n[33],onToggleEquip:n[20],allWeapons:n[3],isMagic:!1,spellUseFlag:0,equippedCombatSkills:n[1],equippedClass:n[2],weaponUses:n[4],onUpdateWeaponUses:n[5]}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,s){const r={};s[0]&1&&(r.equippedWeapons=i[0]),s[0]&8192&&(r.weapon=i[33]),s[0]&1048576&&(r.onToggleEquip=i[20]),s[0]&8&&(r.allWeapons=i[3]),s[0]&2&&(r.equippedCombatSkills=i[1]),s[0]&4&&(r.equippedClass=i[2]),s[0]&16&&(r.weaponUses=i[4]),s[0]&32&&(r.onUpdateWeaponUses=i[5]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function m3(n){let e,t,i,s,r,o,l=n[11],a=[];for(let u=0;u<l.length;u+=1)a[u]=p3(s3(n,l,u));const c=u=>G(a[u],1,1,()=>{a[u]=null});return{c(){e=k("div"),t=k("div"),i=q("Bows"),s=U(),r=k("div");for(let u=0;u<a.length;u+=1)a[u].c();this.h()},l(u){e=T(u,"DIV",{class:!0});var f=I(e);t=T(f,"DIV",{class:!0});var h=I(t);i=z(h,"Bows"),h.forEach(b),s=W(f),r=T(f,"DIV",{class:!0});var d=I(r);for(let m=0;m<a.length;m+=1)a[m].l(d);d.forEach(b),f.forEach(b),this.h()},h(){S(t,"class","label svelte-1x5cszy"),S(r,"class","category-container svelte-1x5cszy"),S(e,"class","category svelte-1x5cszy")},m(u,f){H(u,e,f),g(e,t),g(t,i),g(e,s),g(e,r);for(let h=0;h<a.length;h+=1)a[h].m(r,null);o=!0},p(u,f){if(f[0]&1050687){l=u[11];let h;for(h=0;h<l.length;h+=1){const d=s3(u,l,h);a[h]?(a[h].p(d,f),B(a[h],1)):(a[h]=p3(d),a[h].c(),B(a[h],1),a[h].m(r,null))}for(He(),h=l.length;h<a.length;h+=1)c(h);qe()}},i(u){if(!o){for(let f=0;f<l.length;f+=1)B(a[f]);o=!0}},o(u){a=a.filter(Boolean);for(let f=0;f<a.length;f+=1)G(a[f]);o=!1},d(u){u&&b(e),Ft(a,u)}}}function p3(n){let e,t;return e=new aa({props:{equippedWeapons:n[0],weapon:n[33],onToggleEquip:n[20],allWeapons:n[3],isMagic:!1,spellUseFlag:0,equippedCombatSkills:n[1],equippedClass:n[2],weaponUses:n[4],onUpdateWeaponUses:n[5]}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,s){const r={};s[0]&1&&(r.equippedWeapons=i[0]),s[0]&2048&&(r.weapon=i[33]),s[0]&1048576&&(r.onToggleEquip=i[20]),s[0]&8&&(r.allWeapons=i[3]),s[0]&2&&(r.equippedCombatSkills=i[1]),s[0]&4&&(r.equippedClass=i[2]),s[0]&16&&(r.weaponUses=i[4]),s[0]&32&&(r.onUpdateWeaponUses=i[5]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function g3(n){let e,t,i,s,r,o,l=n[10],a=[];for(let u=0;u<l.length;u+=1)a[u]=v3(i3(n,l,u));const c=u=>G(a[u],1,1,()=>{a[u]=null});return{c(){e=k("div"),t=k("div"),i=q("Fists"),s=U(),r=k("div");for(let u=0;u<a.length;u+=1)a[u].c();this.h()},l(u){e=T(u,"DIV",{class:!0});var f=I(e);t=T(f,"DIV",{class:!0});var h=I(t);i=z(h,"Fists"),h.forEach(b),s=W(f),r=T(f,"DIV",{class:!0});var d=I(r);for(let m=0;m<a.length;m+=1)a[m].l(d);d.forEach(b),f.forEach(b),this.h()},h(){S(t,"class","label svelte-1x5cszy"),S(r,"class","category-container svelte-1x5cszy"),S(e,"class","category svelte-1x5cszy")},m(u,f){H(u,e,f),g(e,t),g(t,i),g(e,s),g(e,r);for(let h=0;h<a.length;h+=1)a[h].m(r,null);o=!0},p(u,f){if(f[0]&1049663){l=u[10];let h;for(h=0;h<l.length;h+=1){const d=i3(u,l,h);a[h]?(a[h].p(d,f),B(a[h],1)):(a[h]=v3(d),a[h].c(),B(a[h],1),a[h].m(r,null))}for(He(),h=l.length;h<a.length;h+=1)c(h);qe()}},i(u){if(!o){for(let f=0;f<l.length;f+=1)B(a[f]);o=!0}},o(u){a=a.filter(Boolean);for(let f=0;f<a.length;f+=1)G(a[f]);o=!1},d(u){u&&b(e),Ft(a,u)}}}function v3(n){let e,t;return e=new aa({props:{equippedWeapons:n[0],weapon:n[33],onToggleEquip:n[20],allWeapons:n[3],spellUseFlag:0,isMagic:!1,equippedCombatSkills:n[1],equippedClass:n[2],weaponUses:n[4],onUpdateWeaponUses:n[5]}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,s){const r={};s[0]&1&&(r.equippedWeapons=i[0]),s[0]&1024&&(r.weapon=i[33]),s[0]&1048576&&(r.onToggleEquip=i[20]),s[0]&8&&(r.allWeapons=i[3]),s[0]&2&&(r.equippedCombatSkills=i[1]),s[0]&4&&(r.equippedClass=i[2]),s[0]&16&&(r.weaponUses=i[4]),s[0]&32&&(r.onUpdateWeaponUses=i[5]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function b3(n){let e,t,i,s,r,o,l,a=Array.from(n[14]),c=[];for(let f=0;f<a.length;f+=1)c[f]=_3(n3(n,a,f));const u=f=>G(c[f],1,1,()=>{c[f]=null});return{c(){e=k("div"),t=k("div"),i=q("Training Weapons"),s=U(),r=k("div");for(let f=0;f<c.length;f+=1)c[f].c();this.h()},l(f){e=T(f,"DIV",{class:!0});var h=I(e);t=T(h,"DIV",{class:!0});var d=I(t);i=z(d,"Training Weapons"),d.forEach(b),s=W(h),r=T(h,"DIV",{class:!0});var m=I(r);for(let p=0;p<c.length;p+=1)c[p].l(m);m.forEach(b),h.forEach(b),this.h()},h(){S(t,"class","label svelte-1x5cszy"),S(r,"class","category-container svelte-1x5cszy"),S(e,"class",o=Ze(Zi("category",{"min-width":n[16]}))+" svelte-1x5cszy")},m(f,h){H(f,e,h),g(e,t),g(t,i),g(e,s),g(e,r);for(let d=0;d<c.length;d+=1)c[d].m(r,null);l=!0},p(f,h){if(h[0]&1065023){a=Array.from(f[14]);let d;for(d=0;d<a.length;d+=1){const m=n3(f,a,d);c[d]?(c[d].p(m,h),B(c[d],1)):(c[d]=_3(m),c[d].c(),B(c[d],1),c[d].m(r,null))}for(He(),d=a.length;d<c.length;d+=1)u(d);qe()}(!l||h[0]&65536&&o!==(o=Ze(Zi("category",{"min-width":f[16]}))+" svelte-1x5cszy"))&&S(e,"class",o)},i(f){if(!l){for(let h=0;h<a.length;h+=1)B(c[h]);l=!0}},o(f){c=c.filter(Boolean);for(let h=0;h<c.length;h+=1)G(c[h]);l=!1},d(f){f&&b(e),Ft(c,f)}}}function _3(n){let e,t;return e=new aa({props:{equippedWeapons:n[0],weapon:n[33],onToggleEquip:n[20],allWeapons:n[3],spellUseFlag:0,isMagic:!1,equippedCombatSkills:n[1],equippedClass:n[2],weaponUses:n[4],onUpdateWeaponUses:n[5]}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,s){const r={};s[0]&1&&(r.equippedWeapons=i[0]),s[0]&16384&&(r.weapon=i[33]),s[0]&1048576&&(r.onToggleEquip=i[20]),s[0]&8&&(r.allWeapons=i[3]),s[0]&2&&(r.equippedCombatSkills=i[1]),s[0]&4&&(r.equippedClass=i[2]),s[0]&16&&(r.weaponUses=i[4]),s[0]&32&&(r.onUpdateWeaponUses=i[5]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function y3(n){let e,t,i,s=[...n[22],...n[21]],r=[];for(let l=0;l<s.length;l+=1)r[l]=S3(t3(n,s,l));const o=l=>G(r[l],1,1,()=>{r[l]=null});return{c(){e=k("div"),t=k("div");for(let l=0;l<r.length;l+=1)r[l].c();this.h()},l(l){e=T(l,"DIV",{class:!0});var a=I(e);t=T(a,"DIV",{class:!0});var c=I(t);for(let u=0;u<r.length;u+=1)r[u].l(c);c.forEach(b),a.forEach(b),this.h()},h(){S(t,"class","category svelte-1x5cszy"),S(e,"class","magic-category svelte-1x5cszy")},m(l,a){H(l,e,a),g(e,t);for(let c=0;c<r.length;c+=1)r[c].m(t,null);i=!0},p(l,a){if(a[0]&7372863){s=[...l[22],...l[21]];let c;for(c=0;c<s.length;c+=1){const u=t3(l,s,c);r[c]?(r[c].p(u,a),B(r[c],1)):(r[c]=S3(u),r[c].c(),B(r[c],1),r[c].m(t,null))}for(He(),c=s.length;c<r.length;c+=1)o(c);qe()}},i(l){if(!i){for(let a=0;a<s.length;a+=1)B(r[a]);i=!0}},o(l){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)G(r[a]);i=!1},d(l){l&&b(e),Ft(r,l)}}}function S3(n){let e,t;return e=new aa({props:{equippedWeapons:n[0],weapon:n[33],onToggleEquip:n[20],allWeapons:n[3],isMagic:!0,spellUseFlag:n[15],equippedCombatSkills:n[1],equippedClass:n[2],weaponUses:n[4],onUpdateWeaponUses:n[5]}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,s){const r={};s[0]&1&&(r.equippedWeapons=i[0]),s[0]&6291456&&(r.weapon=i[33]),s[0]&1048576&&(r.onToggleEquip=i[20]),s[0]&8&&(r.allWeapons=i[3]),s[0]&32768&&(r.spellUseFlag=i[15]),s[0]&2&&(r.equippedCombatSkills=i[1]),s[0]&4&&(r.equippedClass=i[2]),s[0]&16&&(r.weaponUses=i[4]),s[0]&32&&(r.onUpdateWeaponUses=i[5]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function Are(n){let e,t,i,s,r,o,l,a,c,u,f,h,d,m,p,_,v,y,w,A,E,C,R,D,N,L,F,P,Q,O,K,X,J,te,j,x,Z,V,ce,pe,re,ye,Ne,Y,Ce,We,se,Me,he,M,ae,de,ee,$,ne,me;t=new vc({props:{label:"Weapons"}});let le=n[12].length&&a3(n),ie=n[9].length&&u3(n),be=n[13].length&&h3(n),we=n[11].length&&m3(n),Ae=n[10].length&&g3(n),ge=n[14].size>0&&b3(n),Be=(n[22].length||n[21].length)&&y3(n);return{c(){e=k("div"),ke(t.$$.fragment),i=U(),s=k("div"),r=k("span"),o=q("Martial Weapons"),l=U(),a=k("div"),c=k("span"),u=q("Superiority Dies:"),f=U(),h=k("input"),m=U(),p=k("span"),_=q("/ "),v=q(n[7]),y=U(),w=k("button"),A=q("Reset Superiority Dice"),E=U(),C=k("button"),R=q("Reset Spell Uses"),D=U(),N=k("button"),L=q("Unequip all weapons"),F=U(),P=k("div"),Q=U(),O=k("div"),K=U(),X=k("div"),le&&le.c(),J=U(),ie&&ie.c(),te=U(),be&&be.c(),j=U(),we&&we.c(),x=U(),Ae&&Ae.c(),Z=U(),ge&&ge.c(),V=U(),ce=k("div"),pe=k("span"),re=q("Magic Weapons"),ye=U(),Ne=k("button"),Y=q("Add new martial weapon"),Ce=U(),We=k("button"),se=q("Add new magic weapon"),Me=U(),he=k("div"),M=U(),ae=k("div"),de=U(),ee=k("div"),Be&&Be.c(),this.h()},l(ve){e=T(ve,"DIV",{class:!0});var Pe=I(e);Oe(t.$$.fragment,Pe),i=W(Pe),s=T(Pe,"DIV",{class:!0});var Se=I(s);r=T(Se,"SPAN",{});var tt=I(r);o=z(tt,"Martial Weapons"),tt.forEach(b),l=W(Se),a=T(Se,"DIV",{class:!0});var Ke=I(a);c=T(Ke,"SPAN",{});var Ee=I(c);u=z(Ee,"Superiority Dies:"),Ee.forEach(b),f=W(Ke),h=T(Ke,"INPUT",{type:!0,class:!0,min:!0}),m=W(Ke),p=T(Ke,"SPAN",{});var it=I(p);_=z(it,"/ "),v=z(it,n[7]),it.forEach(b),Ke.forEach(b),y=W(Se),w=T(Se,"BUTTON",{class:!0});var De=I(w);A=z(De,"Reset Superiority Dice"),De.forEach(b),E=W(Se),C=T(Se,"BUTTON",{class:!0});var ze=I(C);R=z(ze,"Reset Spell Uses"),ze.forEach(b),D=W(Se),N=T(Se,"BUTTON",{class:!0});var Re=I(N);L=z(Re,"Unequip all weapons"),Re.forEach(b),Se.forEach(b),F=W(Pe),P=T(Pe,"DIV",{class:!0}),I(P).forEach(b),Q=W(Pe),O=T(Pe,"DIV",{class:!0}),I(O).forEach(b),K=W(Pe),X=T(Pe,"DIV",{class:!0});var ut=I(X);le&&le.l(ut),J=W(ut),ie&&ie.l(ut),te=W(ut),be&&be.l(ut),j=W(ut),we&&we.l(ut),x=W(ut),Ae&&Ae.l(ut),Z=W(ut),ge&&ge.l(ut),ut.forEach(b),V=W(Pe),ce=T(Pe,"DIV",{class:!0});var Bt=I(ce);pe=T(Bt,"SPAN",{});var gt=I(pe);re=z(gt,"Magic Weapons"),gt.forEach(b),ye=W(Bt),Ne=T(Bt,"BUTTON",{class:!0});var At=I(Ne);Y=z(At,"Add new martial weapon"),At.forEach(b),Ce=W(Bt),We=T(Bt,"BUTTON",{class:!0});var jt=I(We);se=z(jt,"Add new magic weapon"),jt.forEach(b),Bt.forEach(b),Me=W(Pe),he=T(Pe,"DIV",{class:!0}),I(he).forEach(b),M=W(Pe),ae=T(Pe,"DIV",{class:!0}),I(ae).forEach(b),de=W(Pe),ee=T(Pe,"DIV",{class:!0});var nn=I(ee);Be&&Be.l(nn),nn.forEach(b),Pe.forEach(b),this.h()},h(){S(h,"type","number"),S(h,"class",d=Ze(`die-input ${n[6]<=0?"bad":n[6]<=Math.ceil(n[7]/3)?"danger":""}`)+" svelte-1x5cszy"),S(h,"min","0"),h.value=n[6],lt(h,"width","25px"),S(a,"class","superiority-die svelte-1x5cszy"),S(w,"class","svelte-1x5cszy"),S(C,"class","svelte-1x5cszy"),S(N,"class","svelte-1x5cszy"),S(s,"class","actions svelte-1x5cszy"),lt(s,"white-space","nowrap"),S(P,"class","divider svelte-1x5cszy"),lt(P,"height","2px"),S(O,"class","divider svelte-1x5cszy"),S(X,"class","martial-weapons svelte-1x5cszy"),lt(pe,"flex","1"),S(Ne,"class","svelte-1x5cszy"),lt(Ne,"margin-right","5px"),S(We,"class","svelte-1x5cszy"),S(ce,"class","actions svelte-1x5cszy"),lt(ce,"white-space","nowrap"),S(he,"class","divider svelte-1x5cszy"),lt(he,"height","2px"),S(ae,"class","divider svelte-1x5cszy"),S(ee,"class","magic-weapons svelte-1x5cszy"),S(e,"class","container svelte-1x5cszy")},m(ve,Pe){H(ve,e,Pe),Te(t,e,null),g(e,i),g(e,s),g(s,r),g(r,o),g(s,l),g(s,a),g(a,c),g(c,u),g(a,f),g(a,h),g(a,m),g(a,p),g(p,_),g(p,v),g(s,y),g(s,w),g(w,A),g(s,E),g(s,C),g(C,R),g(s,D),g(s,N),g(N,L),g(e,F),g(e,P),g(e,Q),g(e,O),g(e,K),g(e,X),le&&le.m(X,null),g(X,J),ie&&ie.m(X,null),g(X,te),be&&be.m(X,null),g(X,j),we&&we.m(X,null),g(X,x),Ae&&Ae.m(X,null),g(X,Z),ge&&ge.m(X,null),g(e,V),g(e,ce),g(ce,pe),g(pe,re),g(ce,ye),g(ce,Ne),g(Ne,Y),g(ce,Ce),g(ce,We),g(We,se),g(e,Me),g(e,he),g(e,M),g(e,ae),g(e,de),g(e,ee),Be&&Be.m(ee,null),$=!0,ne||(me=[_e(h,"change",n[29]),_e(w,"click",n[30]),_e(C,"click",n[31]),_e(N,"click",function(){Mn(n[19])&&n[19].apply(this,arguments)}),_e(Ne,"click",function(){Mn(n[18])&&n[18].apply(this,arguments)}),_e(We,"click",function(){Mn(n[17])&&n[17].apply(this,arguments)})],ne=!0)},p(ve,Pe){n=ve,(!$||Pe[0]&192&&d!==(d=Ze(`die-input ${n[6]<=0?"bad":n[6]<=Math.ceil(n[7]/3)?"danger":""}`)+" svelte-1x5cszy"))&&S(h,"class",d),(!$||Pe[0]&64&&h.value!==n[6])&&(h.value=n[6]),(!$||Pe[0]&128)&&Le(v,n[7]),n[12].length?le?(le.p(n,Pe),Pe[0]&4096&&B(le,1)):(le=a3(n),le.c(),B(le,1),le.m(X,J)):le&&(He(),G(le,1,1,()=>{le=null}),qe()),n[9].length?ie?(ie.p(n,Pe),Pe[0]&512&&B(ie,1)):(ie=u3(n),ie.c(),B(ie,1),ie.m(X,te)):ie&&(He(),G(ie,1,1,()=>{ie=null}),qe()),n[13].length?be?(be.p(n,Pe),Pe[0]&8192&&B(be,1)):(be=h3(n),be.c(),B(be,1),be.m(X,j)):be&&(He(),G(be,1,1,()=>{be=null}),qe()),n[11].length?we?(we.p(n,Pe),Pe[0]&2048&&B(we,1)):(we=m3(n),we.c(),B(we,1),we.m(X,x)):we&&(He(),G(we,1,1,()=>{we=null}),qe()),n[10].length?Ae?(Ae.p(n,Pe),Pe[0]&1024&&B(Ae,1)):(Ae=g3(n),Ae.c(),B(Ae,1),Ae.m(X,Z)):Ae&&(He(),G(Ae,1,1,()=>{Ae=null}),qe()),n[14].size>0?ge?(ge.p(n,Pe),Pe[0]&16384&&B(ge,1)):(ge=b3(n),ge.c(),B(ge,1),ge.m(X,null)):ge&&(He(),G(ge,1,1,()=>{ge=null}),qe()),n[22].length||n[21].length?Be?(Be.p(n,Pe),Pe[0]&6291456&&B(Be,1)):(Be=y3(n),Be.c(),B(Be,1),Be.m(ee,null)):Be&&(He(),G(Be,1,1,()=>{Be=null}),qe())},i(ve){$||(B(t.$$.fragment,ve),B(le),B(ie),B(be),B(we),B(Ae),B(ge),B(Be),$=!0)},o(ve){G(t.$$.fragment,ve),G(le),G(ie),G(be),G(we),G(Ae),G(ge),G(Be),$=!1},d(ve){ve&&b(e),Ie(t),le&&le.d(),ie&&ie.d(),be&&be.d(),we&&we.d(),Ae&&Ae.d(),ge&&ge.d(),Be&&Be.d(),ne=!1,an(me)}}}function Cre(n,e,t){let i,s,r,o,l,a,c,u,f,h,d,m,p,_,v,y;const{open:w}=Bn(hs.MODAL);let{equippedWeapons:A}=e,{onToggleEquippedWeapons:E}=e,{equippedCombatSkills:C}=e,{equippedClass:R}=e,{allWeapons:D}=e,{weaponUses:N}=e,{onUpdateWeaponUses:L}=e,{customWeapons:F}=e,{onUpdateCustomWeapons:P}=e,{curSuperiorityDies:Q}=e,{maxSuperiorityDie:O}=e,{setCurSuperiorityDie:K}=e,X=0;const J=x=>{const Z=parseInt(x.currentTarget.value);Z>=0&&Z<=O?(K(Z),x.currentTarget.value=Z+""):x.currentTarget.value=Q+""},te=()=>K(O),j=()=>t(15,X+=1);return n.$$set=x=>{"equippedWeapons"in x&&t(0,A=x.equippedWeapons),"onToggleEquippedWeapons"in x&&t(23,E=x.onToggleEquippedWeapons),"equippedCombatSkills"in x&&t(1,C=x.equippedCombatSkills),"equippedClass"in x&&t(2,R=x.equippedClass),"allWeapons"in x&&t(3,D=x.allWeapons),"weaponUses"in x&&t(4,N=x.weaponUses),"onUpdateWeaponUses"in x&&t(5,L=x.onUpdateWeaponUses),"customWeapons"in x&&t(24,F=x.customWeapons),"onUpdateCustomWeapons"in x&&t(25,P=x.onUpdateCustomWeapons),"curSuperiorityDies"in x&&t(6,Q=x.curSuperiorityDies),"maxSuperiorityDie"in x&&t(7,O=x.maxSuperiorityDie),"setCurSuperiorityDie"in x&&t(8,K=x.setCurSuperiorityDie)},n.$$.update=()=>{n.$$.dirty[0]&8&&t(28,i=D.fullFeatures),n.$$.dirty[0]&268435464&&t(22,s=D.fullArray.filter(x=>i[x].type===fe.REASON)),n.$$.dirty[0]&268435464&&t(21,r=D.fullArray.filter(x=>i[x].type===fe.FAITH)),n.$$.dirty[0]&8388608&&t(20,o=x=>{E(x)}),n.$$.dirty[0]&8388609&&t(19,l=()=>A.forEach(x=>E(x))),n.$$.dirty[0]&318767112&&t(18,a=()=>{w(Zk,{weapon:VL.filter(x=>!D.fullSet.has(x)),weaponsToFeatures:i,defaultReason:"Manually added in weapons section",customWeapons:F,onUpdateCustomWeapons:P})}),n.$$.dirty[0]&318767112&&t(17,c=()=>{w(Zk,{weapon:q4.filter(x=>!D.fullSet.has(x)),weaponsToFeatures:i,defaultReason:"Manually added in weapons section",customWeapons:F,onUpdateCustomWeapons:P})}),n.$$.dirty[0]&8&&t(26,u=D.fullSet),n.$$.dirty[0]&268435464&&t(27,f=D.fullArray.reduce((x,Z)=>{const V=i[Z].type;return!Xg.has(Z)&&!Tm.includes(V)&&x.add(V),x},new Set)),n.$$.dirty[0]&134217728&&t(14,h=new Set(f.size<4?Array.from(Xg):[])),n.$$.dirty[0]&67125248&&t(12,d=ML.filter(x=>u.has(x)&&!h.has(x))),n.$$.dirty[0]&67125248&&t(9,m=BL.filter(x=>u.has(x)&&!h.has(x))),n.$$.dirty[0]&67125248&&t(13,p=LL.filter(x=>u.has(x)&&!h.has(x))),n.$$.dirty[0]&67125248&&t(11,_=H4.filter(x=>u.has(x)&&!h.has(x))),n.$$.dirty[0]&67125248&&t(10,v=UL.filter(x=>u.has(x)&&!h.has(x))),n.$$.dirty[0]&15872&&t(16,y=!(p!=null&&p.length)&&!(d!=null&&d.length)&&!(_!=null&&_.length)&&!(v!=null&&v.length)&&!(m!=null&&m.length))},[A,C,R,D,N,L,Q,O,K,m,v,_,d,p,h,X,y,c,a,l,o,r,s,E,F,P,u,f,i,J,te,j]}class kre extends st{constructor(e){super(),rt(this,e,Cre,Are,kt,{equippedWeapons:0,onToggleEquippedWeapons:23,equippedCombatSkills:1,equippedClass:2,allWeapons:3,weaponUses:4,onUpdateWeaponUses:5,customWeapons:24,onUpdateCustomWeapons:25,curSuperiorityDies:6,maxSuperiorityDie:7,setCurSuperiorityDie:8},null,[-1,-1])}}function E3(n){let e,t,i,s,r,o;return t=new vre({props:{stats:n[14],playerName:n[0],onUpdatePlayerStats:n[15],playerCrest:n[8],onUpdateCrest:n[9]}}),r=new hre({props:{stats:n[14],playerName:n[0],skillProficiency:n[23],skillBonus:n[22],onToggleSkillProficiency:n[24],equippedClass:n[31],masteredClasses:n[5]}}),{c(){e=k("div"),ke(t.$$.fragment),i=U(),s=k("div"),ke(r.$$.fragment),this.h()},l(l){e=T(l,"DIV",{class:!0});var a=I(e);Oe(t.$$.fragment,a),a.forEach(b),i=W(l),s=T(l,"DIV",{class:!0});var c=I(s);Oe(r.$$.fragment,c),c.forEach(b),this.h()},h(){S(e,"class","stats svelte-1qqh4vl"),S(s,"class","skills svelte-1qqh4vl")},m(l,a){H(l,e,a),Te(t,e,null),H(l,i,a),H(l,s,a),Te(r,s,null),o=!0},p(l,a){const c={};a[0]&16384&&(c.stats=l[14]),a[0]&1&&(c.playerName=l[0]),a[0]&32768&&(c.onUpdatePlayerStats=l[15]),a[0]&256&&(c.playerCrest=l[8]),a[0]&512&&(c.onUpdateCrest=l[9]),t.$set(c);const u={};a[0]&16384&&(u.stats=l[14]),a[0]&1&&(u.playerName=l[0]),a[0]&8388608&&(u.skillProficiency=l[23]),a[0]&4194304&&(u.skillBonus=l[22]),a[0]&16777216&&(u.onToggleSkillProficiency=l[24]),a[1]&1&&(u.equippedClass=l[31]),a[0]&32&&(u.masteredClasses=l[5]),r.$set(u)},i(l){o||(B(t.$$.fragment,l),B(r.$$.fragment,l),o=!0)},o(l){G(t.$$.fragment,l),G(r.$$.fragment,l),o=!1},d(l){l&&b(e),Ie(t),l&&b(i),l&&b(s),Ie(r)}}}function w3(n){let e,t,i,s,r,o,l,a;return t=new dU({props:{equippedClass:n[31],setEquippedClass:n[32],unlockedClasses:n[33],onUpdateUnlockedClasses:n[34],masteredClasses:n[5],customCombatSkills:n[16],onUpdateCustomCombatSkills:n[17],customWeapons:n[20],onUpdateCustomWeapons:n[21],customCombatArts:n[18],onUpdateCustomCombatArts:n[19],playerStats:n[14],onUpdatePlayerStats:n[15]}}),r=new Nse({props:{allCombatArts:n[4],equippedCombatArts:n[27],onToggleCombatArts:n[28],equippedWeapons:n[25],customCombatArts:n[18],onUpdateCustomCombatArts:n[19]}}),l=new jse({props:{allCombatSkills:n[3],equippedCombatSkills:n[29],onToggleCombatSkill:n[30],customCombatSkills:n[16],onUpdateCustomCombatSkills:n[17]}}),{c(){e=k("div"),ke(t.$$.fragment),i=U(),s=k("div"),ke(r.$$.fragment),o=U(),ke(l.$$.fragment),this.h()},l(c){e=T(c,"DIV",{class:!0});var u=I(e);Oe(t.$$.fragment,u),u.forEach(b),i=W(c),s=T(c,"DIV",{class:!0});var f=I(s);Oe(r.$$.fragment,f),o=W(f),Oe(l.$$.fragment,f),f.forEach(b),this.h()},h(){S(e,"class","classes svelte-1qqh4vl"),S(s,"class","arts svelte-1qqh4vl")},m(c,u){H(c,e,u),Te(t,e,null),H(c,i,u),H(c,s,u),Te(r,s,null),g(s,o),Te(l,s,null),a=!0},p(c,u){const f={};u[1]&1&&(f.equippedClass=c[31]),u[1]&2&&(f.setEquippedClass=c[32]),u[1]&4&&(f.unlockedClasses=c[33]),u[1]&8&&(f.onUpdateUnlockedClasses=c[34]),u[0]&32&&(f.masteredClasses=c[5]),u[0]&65536&&(f.customCombatSkills=c[16]),u[0]&131072&&(f.onUpdateCustomCombatSkills=c[17]),u[0]&1048576&&(f.customWeapons=c[20]),u[0]&2097152&&(f.onUpdateCustomWeapons=c[21]),u[0]&262144&&(f.customCombatArts=c[18]),u[0]&524288&&(f.onUpdateCustomCombatArts=c[19]),u[0]&16384&&(f.playerStats=c[14]),u[0]&32768&&(f.onUpdatePlayerStats=c[15]),t.$set(f);const h={};u[0]&16&&(h.allCombatArts=c[4]),u[0]&134217728&&(h.equippedCombatArts=c[27]),u[0]&268435456&&(h.onToggleCombatArts=c[28]),u[0]&33554432&&(h.equippedWeapons=c[25]),u[0]&262144&&(h.customCombatArts=c[18]),u[0]&524288&&(h.onUpdateCustomCombatArts=c[19]),r.$set(h);const d={};u[0]&8&&(d.allCombatSkills=c[3]),u[0]&536870912&&(d.equippedCombatSkills=c[29]),u[0]&1073741824&&(d.onToggleCombatSkill=c[30]),u[0]&65536&&(d.customCombatSkills=c[16]),u[0]&131072&&(d.onUpdateCustomCombatSkills=c[17]),l.$set(d)},i(c){a||(B(t.$$.fragment,c),B(r.$$.fragment,c),B(l.$$.fragment,c),a=!0)},o(c){G(t.$$.fragment,c),G(r.$$.fragment,c),G(l.$$.fragment,c),a=!1},d(c){c&&b(e),Ie(t),c&&b(i),c&&b(s),Ie(r),Ie(l)}}}function A3(n){let e,t,i,s,r,o,l,a,c;return i=new kre({props:{allWeapons:n[2],equippedWeapons:n[25],onToggleEquippedWeapons:n[26],equippedCombatSkills:n[29],equippedClass:n[31],weaponUses:n[6],onUpdateWeaponUses:n[7],curSuperiorityDies:n[41],maxSuperiorityDie:n[40],setCurSuperiorityDie:n[42],customWeapons:n[20],onUpdateCustomWeapons:n[21]}}),o=new sre({props:{stats:n[14],allWeapons:n[2],equippedClass:n[31],unlockedClasses:n[33],equippedCombatSkills:n[29],selectedWeapon:n[12],equippedWeapons:n[25],equippedCombatArts:n[27],allCombatSkills:n[3]}}),a=new x7({props:{playerName:n[0],equippedClass:n[31],equippedWeapons:n[25],equippedCombatArts:n[27],equippedCombatSkills:n[29],weaponUses:n[6],onUpdateWeaponUses:n[7],curSuperiorityDies:n[41],setCurSuperiorityDie:n[42],allWeapons:n[2],allCombatArts:n[4],playerCrest:n[8],playerStats:n[14],selectedWeapon:n[12],setSelectedWeapon:n[13],selectedCombatArt:n[10],setSelectedCombatArt:n[11]}}),{c(){e=k("div"),t=k("div"),ke(i.$$.fragment),s=U(),r=k("div"),ke(o.$$.fragment),l=U(),ke(a.$$.fragment),this.h()},l(u){e=T(u,"DIV",{class:!0});var f=I(e);t=T(f,"DIV",{class:!0});var h=I(t);Oe(i.$$.fragment,h),h.forEach(b),s=W(f),r=T(f,"DIV",{class:!0});var d=I(r);Oe(o.$$.fragment,d),l=W(d),Oe(a.$$.fragment,d),d.forEach(b),f.forEach(b),this.h()},h(){S(t,"class","weapons svelte-1qqh4vl"),S(r,"class","other svelte-1qqh4vl"),S(e,"class","rest svelte-1qqh4vl")},m(u,f){H(u,e,f),g(e,t),Te(i,t,null),g(e,s),g(e,r),Te(o,r,null),g(r,l),Te(a,r,null),c=!0},p(u,f){const h={};f[0]&4&&(h.allWeapons=u[2]),f[0]&33554432&&(h.equippedWeapons=u[25]),f[0]&67108864&&(h.onToggleEquippedWeapons=u[26]),f[0]&536870912&&(h.equippedCombatSkills=u[29]),f[1]&1&&(h.equippedClass=u[31]),f[0]&64&&(h.weaponUses=u[6]),f[0]&128&&(h.onUpdateWeaponUses=u[7]),f[1]&1024&&(h.curSuperiorityDies=u[41]),f[1]&512&&(h.maxSuperiorityDie=u[40]),f[0]&1048576&&(h.customWeapons=u[20]),f[0]&2097152&&(h.onUpdateCustomWeapons=u[21]),i.$set(h);const d={};f[0]&16384&&(d.stats=u[14]),f[0]&4&&(d.allWeapons=u[2]),f[1]&1&&(d.equippedClass=u[31]),f[1]&4&&(d.unlockedClasses=u[33]),f[0]&536870912&&(d.equippedCombatSkills=u[29]),f[0]&4096&&(d.selectedWeapon=u[12]),f[0]&33554432&&(d.equippedWeapons=u[25]),f[0]&134217728&&(d.equippedCombatArts=u[27]),f[0]&8&&(d.allCombatSkills=u[3]),o.$set(d);const m={};f[0]&1&&(m.playerName=u[0]),f[1]&1&&(m.equippedClass=u[31]),f[0]&33554432&&(m.equippedWeapons=u[25]),f[0]&134217728&&(m.equippedCombatArts=u[27]),f[0]&536870912&&(m.equippedCombatSkills=u[29]),f[0]&64&&(m.weaponUses=u[6]),f[0]&128&&(m.onUpdateWeaponUses=u[7]),f[1]&1024&&(m.curSuperiorityDies=u[41]),f[0]&4&&(m.allWeapons=u[2]),f[0]&16&&(m.allCombatArts=u[4]),f[0]&256&&(m.playerCrest=u[8]),f[0]&16384&&(m.playerStats=u[14]),f[0]&4096&&(m.selectedWeapon=u[12]),f[0]&8192&&(m.setSelectedWeapon=u[13]),f[0]&1024&&(m.selectedCombatArt=u[10]),f[0]&2048&&(m.setSelectedCombatArt=u[11]),a.$set(m)},i(u){c||(B(i.$$.fragment,u),B(o.$$.fragment,u),B(a.$$.fragment,u),c=!0)},o(u){G(i.$$.fragment,u),G(o.$$.fragment,u),G(a.$$.fragment,u),c=!1},d(u){u&&b(e),Ie(i),Ie(o),Ie(a)}}}function C3(n){let e,t,i;return t=new X4({props:{chatEntries:n[35],spoilersOn:n[36],toggleSpoilersOn:n[37],alreadyRevealed:n[38],setAlreadyRevealed:n[39]}}),{c(){e=k("div"),ke(t.$$.fragment),this.h()},l(s){e=T(s,"DIV",{});var r=I(e);Oe(t.$$.fragment,r),r.forEach(b),this.h()},h(){lt(e,"grid-area",n[1]%3===1?"1 / classes/ 1 / rest":"1 / stats / 1 / arts")},m(s,r){H(s,e,r),Te(t,e,null),i=!0},p(s,r){const o={};r[1]&16&&(o.chatEntries=s[35]),r[1]&32&&(o.spoilersOn=s[36]),r[1]&64&&(o.toggleSpoilersOn=s[37]),r[1]&128&&(o.alreadyRevealed=s[38]),r[1]&256&&(o.setAlreadyRevealed=s[39]),t.$set(o),r[0]&2&&lt(e,"grid-area",s[1]%3===1?"1 / classes/ 1 / rest":"1 / stats / 1 / arts")},i(s){i||(B(t.$$.fragment,s),i=!0)},o(s){G(t.$$.fragment,s),i=!1},d(s){s&&b(e),Ie(t)}}}function Tre(n){let e,t,i,s,r,o=n[1]%3!==2&&E3(n),l=n[1]%3===0&&w3(n),a=n[1]%3!==1&&A3(n),c=n[1]%3!==0&&C3(n);return{c(){e=k("div"),o&&o.c(),t=U(),l&&l.c(),i=U(),a&&a.c(),s=U(),c&&c.c(),this.h()},l(u){e=T(u,"DIV",{class:!0});var f=I(e);o&&o.l(f),t=W(f),l&&l.l(f),i=W(f),a&&a.l(f),s=W(f),c&&c.l(f),f.forEach(b),this.h()},h(){S(e,"class","container svelte-1qqh4vl")},m(u,f){H(u,e,f),o&&o.m(e,null),g(e,t),l&&l.m(e,null),g(e,i),a&&a.m(e,null),g(e,s),c&&c.m(e,null),r=!0},p(u,f){u[1]%3!==2?o?(o.p(u,f),f[0]&2&&B(o,1)):(o=E3(u),o.c(),B(o,1),o.m(e,t)):o&&(He(),G(o,1,1,()=>{o=null}),qe()),u[1]%3===0?l?(l.p(u,f),f[0]&2&&B(l,1)):(l=w3(u),l.c(),B(l,1),l.m(e,i)):l&&(He(),G(l,1,1,()=>{l=null}),qe()),u[1]%3!==1?a?(a.p(u,f),f[0]&2&&B(a,1)):(a=A3(u),a.c(),B(a,1),a.m(e,s)):a&&(He(),G(a,1,1,()=>{a=null}),qe()),u[1]%3!==0?c?(c.p(u,f),f[0]&2&&B(c,1)):(c=C3(u),c.c(),B(c,1),c.m(e,null)):c&&(He(),G(c,1,1,()=>{c=null}),qe())},i(u){r||(B(o),B(l),B(a),B(c),r=!0)},o(u){G(o),G(l),G(a),G(c),r=!1},d(u){u&&b(e),o&&o.d(),l&&l.d(),a&&a.d(),c&&c.d()}}}function Ire(n,e,t){let i,{playerName:s}=e,{homeMode:r}=e,{allWeapons:o}=e,{allCombatSkills:l}=e,{allCombatArts:a}=e,{masteredClasses:c}=e,{weaponUses:u}=e,{onUpdateWeaponUses:f}=e,{playerCrest:h}=e,{onUpdateCrest:d}=e,{selectedCombatArt:m}=e,{setSelectedCombatArt:p}=e,{selectedWeapon:_}=e,{setSelectedWeapon:v}=e,{playerStats:y}=e,{onUpdatePlayerStats:w}=e,{customCombatSkills:A}=e,{onUpdateCustomCombatSkills:E}=e,{customCombatArts:C}=e,{onUpdateCustomCombatArts:R}=e,{customWeapons:D}=e,{onUpdateCustomWeapons:N}=e,{playerSkillBonus:L}=e,{playerSkillProficiency:F}=e,{onToggleSkillProficiency:P}=e,{equippedWeapons:Q}=e,{onToggleEquippedWeapons:O}=e,{equippedCombatArts:K}=e,{onToggleCombatArts:X}=e,{equippedCombatSkills:J}=e,{onToggleCombatSkill:te}=e,{equippedClass:j}=e,{setEquippedClass:x}=e,{unlockedClasses:Z}=e,{onUpdateUnlockedClasses:V}=e,{chatEntries:ce}=e,{spoilersOn:pe}=e,{toggleSpoilersOn:re}=e,{alreadyRevealed:ye}=e,{setAlreadyRevealed:Ne}=e,Y={current:0},Ce=i;const We=se=>{t(41,Ce=se)};return n.$$set=se=>{"playerName"in se&&t(0,s=se.playerName),"homeMode"in se&&t(1,r=se.homeMode),"allWeapons"in se&&t(2,o=se.allWeapons),"allCombatSkills"in se&&t(3,l=se.allCombatSkills),"allCombatArts"in se&&t(4,a=se.allCombatArts),"masteredClasses"in se&&t(5,c=se.masteredClasses),"weaponUses"in se&&t(6,u=se.weaponUses),"onUpdateWeaponUses"in se&&t(7,f=se.onUpdateWeaponUses),"playerCrest"in se&&t(8,h=se.playerCrest),"onUpdateCrest"in se&&t(9,d=se.onUpdateCrest),"selectedCombatArt"in se&&t(10,m=se.selectedCombatArt),"setSelectedCombatArt"in se&&t(11,p=se.setSelectedCombatArt),"selectedWeapon"in se&&t(12,_=se.selectedWeapon),"setSelectedWeapon"in se&&t(13,v=se.setSelectedWeapon),"playerStats"in se&&t(14,y=se.playerStats),"onUpdatePlayerStats"in se&&t(15,w=se.onUpdatePlayerStats),"customCombatSkills"in se&&t(16,A=se.customCombatSkills),"onUpdateCustomCombatSkills"in se&&t(17,E=se.onUpdateCustomCombatSkills),"customCombatArts"in se&&t(18,C=se.customCombatArts),"onUpdateCustomCombatArts"in se&&t(19,R=se.onUpdateCustomCombatArts),"customWeapons"in se&&t(20,D=se.customWeapons),"onUpdateCustomWeapons"in se&&t(21,N=se.onUpdateCustomWeapons),"playerSkillBonus"in se&&t(22,L=se.playerSkillBonus),"playerSkillProficiency"in se&&t(23,F=se.playerSkillProficiency),"onToggleSkillProficiency"in se&&t(24,P=se.onToggleSkillProficiency),"equippedWeapons"in se&&t(25,Q=se.equippedWeapons),"onToggleEquippedWeapons"in se&&t(26,O=se.onToggleEquippedWeapons),"equippedCombatArts"in se&&t(27,K=se.equippedCombatArts),"onToggleCombatArts"in se&&t(28,X=se.onToggleCombatArts),"equippedCombatSkills"in se&&t(29,J=se.equippedCombatSkills),"onToggleCombatSkill"in se&&t(30,te=se.onToggleCombatSkill),"equippedClass"in se&&t(31,j=se.equippedClass),"setEquippedClass"in se&&t(32,x=se.setEquippedClass),"unlockedClasses"in se&&t(33,Z=se.unlockedClasses),"onUpdateUnlockedClasses"in se&&t(34,V=se.onUpdateUnlockedClasses),"chatEntries"in se&&t(35,ce=se.chatEntries),"spoilersOn"in se&&t(36,pe=se.spoilersOn),"toggleSpoilersOn"in se&&t(37,re=se.toggleSpoilersOn),"alreadyRevealed"in se&&t(38,ye=se.alreadyRevealed),"setAlreadyRevealed"in se&&t(39,Ne=se.setAlreadyRevealed)},n.$$.update=()=>{n.$$.dirty[1]&4&&t(40,i=FL(Z)),n.$$.dirty[1]&4608&&Y.current!==i&&(t(41,Ce=i),t(43,Y.current=i,Y))},[s,r,o,l,a,c,u,f,h,d,m,p,_,v,y,w,A,E,C,R,D,N,L,F,P,Q,O,K,X,J,te,j,x,Z,V,ce,pe,re,ye,Ne,i,Ce,We,Y]}class Ore extends st{constructor(e){super(),rt(this,e,Ire,Tre,kt,{playerName:0,homeMode:1,allWeapons:2,allCombatSkills:3,allCombatArts:4,masteredClasses:5,weaponUses:6,onUpdateWeaponUses:7,playerCrest:8,onUpdateCrest:9,selectedCombatArt:10,setSelectedCombatArt:11,selectedWeapon:12,setSelectedWeapon:13,playerStats:14,onUpdatePlayerStats:15,customCombatSkills:16,onUpdateCustomCombatSkills:17,customCombatArts:18,onUpdateCustomCombatArts:19,customWeapons:20,onUpdateCustomWeapons:21,playerSkillBonus:22,playerSkillProficiency:23,onToggleSkillProficiency:24,equippedWeapons:25,onToggleEquippedWeapons:26,equippedCombatArts:27,onToggleCombatArts:28,equippedCombatSkills:29,onToggleCombatSkill:30,equippedClass:31,setEquippedClass:32,unlockedClasses:33,onUpdateUnlockedClasses:34,chatEntries:35,spoilersOn:36,toggleSpoilersOn:37,alreadyRevealed:38,setAlreadyRevealed:39},null,[-1,-1])}}function k3(n,e,t){const i=n.slice();return i[21]=e[t],i}function T3(n){let e,t,i=n[5]%3===0?"All":n[5]%3===1?"RP":"COMBAT",s,r,o,l;return{c(){e=k("button"),t=q("MODE: "),s=q(i),this.h()},l(a){e=T(a,"BUTTON",{class:!0});var c=I(e);t=z(c,"MODE: "),s=z(c,i),c.forEach(b),this.h()},h(){S(e,"class",r=Ze(n[0]==="HOME"?"active":"")+" svelte-fxg17h")},m(a,c){H(a,e,c),g(e,t),g(e,s),o||(l=_e(e,"click",n[13]),o=!0)},p(a,c){c&32&&i!==(i=a[5]%3===0?"All":a[5]%3===1?"RP":"COMBAT")&&Le(s,i),c&1&&r!==(r=Ze(a[0]==="HOME"?"active":"")+" svelte-fxg17h")&&S(e,"class",r)},d(a){a&&b(e),o=!1,l()}}}function I3(n){let e,t=n[21]+"",i,s,r;return{c(){e=k("option"),i=q(t),this.h()},l(o){e=T(o,"OPTION",{});var l=I(e);i=z(l,t),l.forEach(b),this.h()},h(){e.__value=s=n[21],e.value=e.__value,e.selected=r=n[8]===n[21]},m(o,l){H(o,e,l),g(e,i)},p(o,l){l&512&&t!==(t=o[21]+"")&&Le(i,t),l&512&&s!==(s=o[21])&&(e.__value=s,e.value=e.__value),l&768&&r!==(r=o[8]===o[21])&&(e.selected=r)},d(o){o&&b(e)}}}function Rre(n){let e,t,i,s,r,o,l,a,c,u,f,h,d,m,p,_,v,y,w,A,E,C,R,D,N,L,F,P,Q,O,K,X,J,te,j,x,Z,V=n[0]==="HOME"&&T3(n),ce=n[9],pe=[];for(let re=0;re<ce.length;re+=1)pe[re]=I3(k3(n,ce,re));return{c(){e=k("div"),t=k("textarea"),i=U(),s=k("button"),r=q("Home"),l=U(),V&&V.c(),a=U(),c=k("button"),u=q("Chat"),h=U(),d=k("button"),m=q("Weapon XP"),_=U(),v=k("select"),y=k("option"),w=q("Main Sheet");for(let re=0;re<pe.length;re+=1)pe[re].c();E=U(),C=k("button"),R=q("Sheet Editor"),N=U(),L=k("button"),F=q("Dice Editor"),Q=U(),O=k("button"),K=q("Other Sheets"),J=U(),te=k("button"),j=q("Export Sheet"),this.h()},l(re){e=T(re,"DIV",{class:!0});var ye=I(e);t=T(ye,"TEXTAREA",{type:!0,class:!0,rows:!0}),I(t).forEach(b),i=W(ye),s=T(ye,"BUTTON",{class:!0});var Ne=I(s);r=z(Ne,"Home"),Ne.forEach(b),l=W(ye),V&&V.l(ye),a=W(ye),c=T(ye,"BUTTON",{class:!0});var Y=I(c);u=z(Y,"Chat"),Y.forEach(b),h=W(ye),d=T(ye,"BUTTON",{class:!0});var Ce=I(d);m=z(Ce,"Weapon XP"),Ce.forEach(b),_=W(ye),v=T(ye,"SELECT",{});var We=I(v);y=T(We,"OPTION",{});var se=I(y);w=z(se,"Main Sheet"),se.forEach(b);for(let de=0;de<pe.length;de+=1)pe[de].l(We);We.forEach(b),E=W(ye),C=T(ye,"BUTTON",{class:!0});var Me=I(C);R=z(Me,"Sheet Editor"),Me.forEach(b),N=W(ye),L=T(ye,"BUTTON",{class:!0});var he=I(L);F=z(he,"Dice Editor"),he.forEach(b),Q=W(ye),O=T(ye,"BUTTON",{class:!0});var M=I(O);K=z(M,"Other Sheets"),M.forEach(b),J=W(ye),te=T(ye,"BUTTON",{class:!0});var ae=I(te);j=z(ae,"Export Sheet"),ae.forEach(b),ye.forEach(b),this.h()},h(){S(t,"type","text"),S(t,"class","name svelte-fxg17h"),t.value=n[2],S(t,"rows","3"),S(s,"class",o=Ze(n[0]==="HOME"?"active":"")+" svelte-fxg17h"),S(c,"class",f=Ze(n[0]==="ROLLS"?"active":"")+" svelte-fxg17h"),S(d,"class",p=Ze(n[0]==="XP"?"active":"")+" svelte-fxg17h"),y.__value="sheet",y.value=y.__value,y.selected=A=n[8]==="sheet",S(C,"class",D=Ze(n[0]==="EDITOR"?"active":"")+" svelte-fxg17h"),S(L,"class",P=Ze(n[0]==="DICE_EDITOR"?"active":"")+" svelte-fxg17h"),S(O,"class",X=Ze(n[0]==="OTHER_SHEETS"?"active":"")+" svelte-fxg17h"),S(te,"class","svelte-fxg17h"),S(e,"class","container svelte-fxg17h")},m(re,ye){H(re,e,ye),g(e,t),g(e,i),g(e,s),g(s,r),g(e,l),V&&V.m(e,null),g(e,a),g(e,c),g(c,u),g(e,h),g(e,d),g(d,m),g(e,_),g(e,v),g(v,y),g(y,w);for(let Ne=0;Ne<pe.length;Ne+=1)pe[Ne].m(v,null);g(e,E),g(e,C),g(C,R),g(e,N),g(e,L),g(L,F),g(e,Q),g(e,O),g(O,K),g(e,J),g(e,te),g(te,j),x||(Z=[_e(t,"input",n[11]),_e(s,"click",n[12]),_e(c,"click",n[14]),_e(d,"click",n[15]),_e(v,"change",n[16]),_e(C,"click",n[17]),_e(L,"click",n[18]),_e(O,"click",n[19]),_e(te,"click",n[20])],x=!0)},p(re,[ye]){if(ye&4&&(t.value=re[2]),ye&1&&o!==(o=Ze(re[0]==="HOME"?"active":"")+" svelte-fxg17h")&&S(s,"class",o),re[0]==="HOME"?V?V.p(re,ye):(V=T3(re),V.c(),V.m(e,a)):V&&(V.d(1),V=null),ye&1&&f!==(f=Ze(re[0]==="ROLLS"?"active":"")+" svelte-fxg17h")&&S(c,"class",f),ye&1&&p!==(p=Ze(re[0]==="XP"?"active":"")+" svelte-fxg17h")&&S(d,"class",p),ye&256&&A!==(A=re[8]==="sheet")&&(y.selected=A),ye&768){ce=re[9];let Ne;for(Ne=0;Ne<ce.length;Ne+=1){const Y=k3(re,ce,Ne);pe[Ne]?pe[Ne].p(Y,ye):(pe[Ne]=I3(Y),pe[Ne].c(),pe[Ne].m(v,null))}for(;Ne<pe.length;Ne+=1)pe[Ne].d(1);pe.length=ce.length}ye&1&&D!==(D=Ze(re[0]==="EDITOR"?"active":"")+" svelte-fxg17h")&&S(C,"class",D),ye&1&&P!==(P=Ze(re[0]==="DICE_EDITOR"?"active":"")+" svelte-fxg17h")&&S(L,"class",P),ye&1&&X!==(X=Ze(re[0]==="OTHER_SHEETS"?"active":"")+" svelte-fxg17h")&&S(O,"class",X)},i:Xe,o:Xe,d(re){re&&b(e),V&&V.d(),Ft(pe,re),x=!1,an(Z)}}}function Dre(n,e,t){let i,{currentPage:s}=e,{fullSheet:r}=e,{playerName:o}=e,{onUpdatePlayerName:l}=e,{onChangePage:a}=e,{homeMode:c}=e,{toggleHomeMode:u}=e,{onChangeCurSheet:f}=e,{curSheet:h}=e,{otherSheetNames:d}=e;const m=D=>l(D.currentTarget.value||""),p=()=>a("HOME"),_=()=>u(),v=()=>a("ROLLS"),y=()=>a("XP"),w=D=>f(D.currentTarget.value),A=()=>a("EDITOR"),E=()=>a("DICE_EDITOR"),C=()=>a("OTHER_SHEETS"),R=()=>V4(r);return n.$$set=D=>{"currentPage"in D&&t(0,s=D.currentPage),"fullSheet"in D&&t(1,r=D.fullSheet),"playerName"in D&&t(2,o=D.playerName),"onUpdatePlayerName"in D&&t(3,l=D.onUpdatePlayerName),"onChangePage"in D&&t(4,a=D.onChangePage),"homeMode"in D&&t(5,c=D.homeMode),"toggleHomeMode"in D&&t(6,u=D.toggleHomeMode),"onChangeCurSheet"in D&&t(7,f=D.onChangeCurSheet),"curSheet"in D&&t(8,h=D.curSheet),"otherSheetNames"in D&&t(10,d=D.otherSheetNames)},n.$$.update=()=>{n.$$.dirty&1024&&t(9,i=d.sort())},[s,r,o,l,a,c,u,f,h,i,d,m,p,_,v,y,w,A,E,C,R]}class Nre extends st{constructor(e){super(),rt(this,e,Dre,Rre,kt,{currentPage:0,fullSheet:1,playerName:2,onUpdatePlayerName:3,onChangePage:4,homeMode:5,toggleHomeMode:6,onChangeCurSheet:7,curSheet:8,otherSheetNames:10})}}const Pre=qN(null);const{window:Mre}=Ju;function O3(n){let e,t,i,s,r,o,l,a,c,u,f,h,d,m,p,_,v,y=n[1].closeButton&&R3(n);var w=n[2];function A(E){return{}}return w&&(o=wn(w,A())),{c(){e=k("div"),t=k("div"),i=k("div"),y&&y.c(),s=U(),r=k("div"),o&&ke(o.$$.fragment),this.h()},l(E){e=T(E,"DIV",{class:!0,style:!0});var C=I(e);t=T(C,"DIV",{class:!0,style:!0});var R=I(t);i=T(R,"DIV",{class:!0,role:!0,"aria-modal":!0,"aria-label":!0,"aria-labelledby":!0,style:!0});var D=I(i);y&&y.l(D),s=W(D),r=T(D,"DIV",{id:!0,class:!0,style:!0});var N=I(r);o&&Oe(o.$$.fragment,N),N.forEach(b),D.forEach(b),R.forEach(b),C.forEach(b),this.h()},h(){S(r,"id","SPECIAL_modal-content"),S(r,"class",l=Ze(n[1].classContent)+" svelte-1qgo808"),S(r,"style",n[9]),xe(r,"content",!n[0]),S(i,"class",a=Ze(n[1].classWindow)+" svelte-1qgo808"),S(i,"role","dialog"),S(i,"aria-modal","true"),S(i,"aria-label",c=n[1].ariaLabelledBy?null:n[1].ariaLabel||null),S(i,"aria-labelledby",u=n[1].ariaLabelledBy||null),S(i,"style",n[8]),xe(i,"window",!n[0]),S(t,"class",h=Ze(n[1].classWindowWrap)+" svelte-1qgo808"),S(t,"style",n[7]),xe(t,"wrap",!n[0]),S(e,"class",d=Ze(n[1].classBg)+" svelte-1qgo808"),S(e,"style",n[6]),xe(e,"bg",!n[0])},m(E,C){H(E,e,C),g(e,t),g(t,i),y&&y.m(i,null),g(i,s),g(i,r),o&&Te(o,r,null),n[48](i),n[49](t),n[50](e),p=!0,_||(v=[_e(i,"introstart",function(){Mn(n[13])&&n[13].apply(this,arguments)}),_e(i,"outrostart",function(){Mn(n[14])&&n[14].apply(this,arguments)}),_e(i,"introend",function(){Mn(n[15])&&n[15].apply(this,arguments)}),_e(i,"outroend",function(){Mn(n[16])&&n[16].apply(this,arguments)}),_e(e,"mousedown",n[20]),_e(e,"mouseup",n[21])],_=!0)},p(E,C){if(n=E,n[1].closeButton?y?(y.p(n,C),C[0]&2&&B(y,1)):(y=R3(n),y.c(),B(y,1),y.m(i,s)):y&&(He(),G(y,1,1,()=>{y=null}),qe()),w!==(w=n[2])){if(o){He();const R=o;G(R.$$.fragment,1,0,()=>{Ie(R,1)}),qe()}w?(o=wn(w,A()),ke(o.$$.fragment),B(o.$$.fragment,1),Te(o,r,null)):o=null}(!p||C[0]&2&&l!==(l=Ze(n[1].classContent)+" svelte-1qgo808"))&&S(r,"class",l),(!p||C[0]&512)&&S(r,"style",n[9]),(!p||C[0]&3)&&xe(r,"content",!n[0]),(!p||C[0]&2&&a!==(a=Ze(n[1].classWindow)+" svelte-1qgo808"))&&S(i,"class",a),(!p||C[0]&2&&c!==(c=n[1].ariaLabelledBy?null:n[1].ariaLabel||null))&&S(i,"aria-label",c),(!p||C[0]&2&&u!==(u=n[1].ariaLabelledBy||null))&&S(i,"aria-labelledby",u),(!p||C[0]&256)&&S(i,"style",n[8]),(!p||C[0]&3)&&xe(i,"window",!n[0]),(!p||C[0]&2&&h!==(h=Ze(n[1].classWindowWrap)+" svelte-1qgo808"))&&S(t,"class",h),(!p||C[0]&128)&&S(t,"style",n[7]),(!p||C[0]&3)&&xe(t,"wrap",!n[0]),(!p||C[0]&2&&d!==(d=Ze(n[1].classBg)+" svelte-1qgo808"))&&S(e,"class",d),(!p||C[0]&64)&&S(e,"style",n[6]),(!p||C[0]&3)&&xe(e,"bg",!n[0])},i(E){p||(B(y),o&&B(o.$$.fragment,E),uu(()=>{f||(f=Ro(i,n[12],n[1].transitionWindowProps,!0)),f.run(1)}),uu(()=>{m||(m=Ro(e,n[11],n[1].transitionBgProps,!0)),m.run(1)}),p=!0)},o(E){G(y),o&&G(o.$$.fragment,E),f||(f=Ro(i,n[12],n[1].transitionWindowProps,!1)),f.run(0),m||(m=Ro(e,n[11],n[1].transitionBgProps,!1)),m.run(0),p=!1},d(E){E&&b(e),y&&y.d(),o&&Ie(o),n[48](null),E&&f&&f.end(),n[49](null),n[50](null),E&&m&&m.end(),_=!1,an(v)}}}function R3(n){let e,t,i,s,r;const o=[Lre,Bre],l=[];function a(c,u){return u[0]&2&&(e=null),e==null&&(e=!!c[17](c[1].closeButton)),e?0:1}return t=a(n,[-1,-1,-1]),i=l[t]=o[t](n),{c(){i.c(),s=et()},l(c){i.l(c),s=et()},m(c,u){l[t].m(c,u),H(c,s,u),r=!0},p(c,u){let f=t;t=a(c,u),t===f?l[t].p(c,u):(He(),G(l[f],1,1,()=>{l[f]=null}),qe(),i=l[t],i?i.p(c,u):(i=l[t]=o[t](c),i.c()),B(i,1),i.m(s.parentNode,s))},i(c){r||(B(i),r=!0)},o(c){G(i),r=!1},d(c){l[t].d(c),c&&b(s)}}}function Bre(n){let e,t,i,s;return{c(){e=k("button"),this.h()},l(r){e=T(r,"BUTTON",{class:!0,"aria-label":!0,style:!0}),I(e).forEach(b),this.h()},h(){S(e,"class",t=Ze(n[1].classCloseButton)+" svelte-1qgo808"),S(e,"aria-label","Close modal"),S(e,"style",n[10]),xe(e,"close",!n[0])},m(r,o){H(r,e,o),i||(s=_e(e,"click",n[18]),i=!0)},p(r,o){o[0]&2&&t!==(t=Ze(r[1].classCloseButton)+" svelte-1qgo808")&&S(e,"class",t),o[0]&1024&&S(e,"style",r[10]),o[0]&3&&xe(e,"close",!r[0])},i:Xe,o:Xe,d(r){r&&b(e),i=!1,s()}}}function Lre(n){let e,t,i;var s=n[1].closeButton;function r(o){return{props:{onClose:o[18]}}}return s&&(e=wn(s,r(n))),{c(){e&&ke(e.$$.fragment),t=et()},l(o){e&&Oe(e.$$.fragment,o),t=et()},m(o,l){e&&Te(e,o,l),H(o,t,l),i=!0},p(o,l){if(s!==(s=o[1].closeButton)){if(e){He();const a=e;G(a.$$.fragment,1,0,()=>{Ie(a,1)}),qe()}s?(e=wn(s,r(o)),ke(e.$$.fragment),B(e.$$.fragment,1),Te(e,t.parentNode,t)):e=null}},i(o){i||(e&&B(e.$$.fragment,o),i=!0)},o(o){e&&G(e.$$.fragment,o),i=!1},d(o){o&&b(t),e&&Ie(e,o)}}}function Ure(n){let e,t,i,s,r=n[2]&&O3(n);const o=n[47].default,l=ls(o,n,n[46],null);return{c(){r&&r.c(),e=U(),l&&l.c()},l(a){r&&r.l(a),e=W(a),l&&l.l(a)},m(a,c){r&&r.m(a,c),H(a,e,c),l&&l.m(a,c),t=!0,i||(s=_e(Mre,"keydown",n[19]),i=!0)},p(a,c){a[2]?r?(r.p(a,c),c[0]&4&&B(r,1)):(r=O3(a),r.c(),B(r,1),r.m(e.parentNode,e)):r&&(He(),G(r,1,1,()=>{r=null}),qe()),l&&l.p&&(!t||c[1]&32768)&&as(l,o,a,a[46],t?us(o,a[46],c,null):cs(a[46]),null)},i(a){t||(B(r),B(l,a),t=!0)},o(a){G(r),G(l,a),t=!1},d(a){r&&r.d(a),a&&b(e),l&&l.d(a),i=!1,s()}}}function Wre(n,e={}){return function(i){return new n({...i,props:{...e,...i.props}})}}function Vre(n,e,t){let{$$slots:i={},$$scope:s}=e;const r=Yu(),o=xd;let{show:l=null}=e,{key:a=hs.MODAL}=e,{ariaLabel:c=null}=e,{ariaLabelledBy:u=null}=e,{closeButton:f=!0}=e,{closeOnEsc:h=!0}=e,{closeOnOuterClick:d=!0}=e,{styleBg:m={}}=e,{styleWindowWrap:p={}}=e,{styleWindow:_={}}=e,{styleContent:v={}}=e,{styleCloseButton:y={}}=e,{classBg:w=null}=e,{classWindowWrap:A=null}=e,{classWindow:E=null}=e,{classContent:C=null}=e,{classCloseButton:R=null}=e,{unstyled:D=!1}=e,{setContext:N=o}=e,{transitionBg:L=J4}=e,{transitionBgProps:F={duration:250}}=e,{transitionWindow:P=L}=e,{transitionWindowProps:Q=F}=e,{disableFocusTrap:O=!1}=e;const K={ariaLabel:c,ariaLabelledBy:u,closeButton:f,closeOnEsc:h,closeOnOuterClick:d,styleBg:m,styleWindowWrap:p,styleWindow:_,styleContent:v,styleCloseButton:y,classBg:w,classWindowWrap:A,classWindow:E,classContent:C,classCloseButton:R,transitionBg:L,transitionBgProps:F,transitionWindow:P,transitionWindowProps:Q,disableFocusTrap:O,unstyled:D};let X={...K},J=null,te,j,x,Z,V,ce,pe,re,ye,Ne,Y,Ce,We,se,Me;const he=Ee=>Ee.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase(),M=Ee=>Ee?Object.keys(Ee).reduce((it,De)=>`${it}; ${he(De)}: ${Ee[De]}`,""):"",ae=Ee=>!!(Ee&&Ee.constructor&&Ee.call&&Ee.apply),de=()=>{t(6,V=M(Object.assign({},{width:window.innerWidth,height:window.innerHeight},X.styleBg))),t(7,ce=M(X.styleWindowWrap)),t(8,pe=M(X.styleWindow)),t(9,re=M(X.styleContent)),t(10,ye=M(X.styleCloseButton)),t(11,Ne=X.transitionBg),t(12,Y=X.transitionWindow)},ee=()=>{};let $=ee,ne=ee,me=ee,le=ee;const ie=(Ee,it={},De={},ze={})=>{t(2,J=Wre(Ee,it)),t(1,X={...K,...De}),de();const Re=document.getElementById("SPECIAL_modal-content");if(Re)for(;Re.firstChild;)Re.removeChild(Re.firstChild);Be(),t(13,$=ut=>{ze.onOpen&&ze.onOpen(ut),r("open"),r("opening")}),t(14,ne=ut=>{ze.onClose&&ze.onClose(ut),it.SPECIAL_callOnClose&&it.SPECIAL_callOnClose(),r("close"),r("closing")}),t(15,me=ut=>{ze.onOpened&&ze.onOpened(ut),r("opened")}),t(16,le=ut=>{ze.onClosed&&ze.onClosed(ut),r("closed")})},be=(Ee={})=>{J&&(t(14,ne=Ee.onClose||ne),t(16,le=Ee.onClosed||le),t(2,J=null),ve())},we=Ee=>{if(X.closeOnEsc&&J&&Ee.key==="Escape"&&(Ee.preventDefault(),be()),J&&Ee.key==="Tab"&&!X.disableFocusTrap){const it=x.querySelectorAll("*"),De=Array.from(it).filter(Re=>Re.tabIndex>=0);let ze=De.indexOf(document.activeElement);ze===-1&&Ee.shiftKey&&(ze=0),ze+=De.length+(Ee.shiftKey?-1:1),ze%=De.length,De[ze].focus(),Ee.preventDefault()}},Ae=Ee=>{X.closeOnOuterClick&&(Ee.target===te||Ee.target===j)&&(Me=Ee.target)},ge=Ee=>{X.closeOnOuterClick&&Ee.target===Me&&(Ee.preventDefault(),be())},Be=()=>{Z=window.scrollY,Ce=document.body.style.position,We=document.body.style.overflow,se=document.body.style.width,document.body.style.position="fixed",document.body.style.top=`-${Z}px`,document.body.style.overflow="hidden",document.body.style.width="100%"},ve=()=>{document.body.style.position=Ce||"",document.body.style.top="",document.body.style.overflow=We||"",document.body.style.width=se||"",window.scrollTo(0,Z)};N(a,{open:ie,close:be});let Pe=!1;br(()=>{Pe&&be()}),Mi(()=>{t(45,Pe=!0)});function Se(Ee){Ut[Ee?"unshift":"push"](()=>{x=Ee,t(5,x)})}function tt(Ee){Ut[Ee?"unshift":"push"](()=>{j=Ee,t(4,j)})}function Ke(Ee){Ut[Ee?"unshift":"push"](()=>{te=Ee,t(3,te)})}return n.$$set=Ee=>{"show"in Ee&&t(22,l=Ee.show),"key"in Ee&&t(23,a=Ee.key),"ariaLabel"in Ee&&t(24,c=Ee.ariaLabel),"ariaLabelledBy"in Ee&&t(25,u=Ee.ariaLabelledBy),"closeButton"in Ee&&t(26,f=Ee.closeButton),"closeOnEsc"in Ee&&t(27,h=Ee.closeOnEsc),"closeOnOuterClick"in Ee&&t(28,d=Ee.closeOnOuterClick),"styleBg"in Ee&&t(29,m=Ee.styleBg),"styleWindowWrap"in Ee&&t(30,p=Ee.styleWindowWrap),"styleWindow"in Ee&&t(31,_=Ee.styleWindow),"styleContent"in Ee&&t(32,v=Ee.styleContent),"styleCloseButton"in Ee&&t(33,y=Ee.styleCloseButton),"classBg"in Ee&&t(34,w=Ee.classBg),"classWindowWrap"in Ee&&t(35,A=Ee.classWindowWrap),"classWindow"in Ee&&t(36,E=Ee.classWindow),"classContent"in Ee&&t(37,C=Ee.classContent),"classCloseButton"in Ee&&t(38,R=Ee.classCloseButton),"unstyled"in Ee&&t(0,D=Ee.unstyled),"setContext"in Ee&&t(39,N=Ee.setContext),"transitionBg"in Ee&&t(40,L=Ee.transitionBg),"transitionBgProps"in Ee&&t(41,F=Ee.transitionBgProps),"transitionWindow"in Ee&&t(42,P=Ee.transitionWindow),"transitionWindowProps"in Ee&&t(43,Q=Ee.transitionWindowProps),"disableFocusTrap"in Ee&&t(44,O=Ee.disableFocusTrap),"$$scope"in Ee&&t(46,s=Ee.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&4194304|n.$$.dirty[1]&16384&&Pe&&(ae(l)?ie(l):be())},[D,X,J,te,j,x,V,ce,pe,re,ye,Ne,Y,$,ne,me,le,ae,be,we,Ae,ge,l,a,c,u,f,h,d,m,p,_,v,y,w,A,E,C,R,N,L,F,P,Q,O,Pe,s,i,Se,tt,Ke]}class Fre extends st{constructor(e){super(),rt(this,e,Vre,Ure,kt,{show:22,key:23,ariaLabel:24,ariaLabelledBy:25,closeButton:26,closeOnEsc:27,closeOnOuterClick:28,styleBg:29,styleWindowWrap:30,styleWindow:31,styleContent:32,styleCloseButton:33,classBg:34,classWindowWrap:35,classWindow:36,classContent:37,classCloseButton:38,unstyled:0,setContext:39,transitionBg:40,transitionBgProps:41,transitionWindow:42,transitionWindowProps:43,disableFocusTrap:44},null,[-1,-1,-1])}}function D3(n){let e,t;return{c(){e=k("div"),t=q(n[1])},l(i){e=T(i,"DIV",{});var s=I(e);t=z(s,n[1]),s.forEach(b)},m(i,s){H(i,e,s),g(e,t)},p(i,s){s&2&&Le(t,i[1])},d(i){i&&b(e)}}}function N3(n){let e,t,i;const s=[n[3]];var r=n[2];function o(l){let a={};for(let c=0;c<s.length;c+=1)a=Xr(a,s[c]);return{props:a}}return r&&(e=wn(r,o())),{c(){e&&ke(e.$$.fragment),t=et()},l(l){e&&Oe(e.$$.fragment,l),t=et()},m(l,a){e&&Te(e,l,a),H(l,t,a),i=!0},p(l,a){const c=a&8?Qr(s,[Zl(l[3])]):{};if(r!==(r=l[2])){if(e){He();const u=e;G(u.$$.fragment,1,0,()=>{Ie(u,1)}),qe()}r?(e=wn(r,o()),ke(e.$$.fragment),B(e.$$.fragment,1),Te(e,t.parentNode,t)):e=null}else r&&e.$set(c)},i(l){i||(e&&B(e.$$.fragment,l),i=!0)},o(l){e&&G(e.$$.fragment,l),i=!1},d(l){l&&b(t),e&&Ie(e,l)}}}function jre(n){let e,t,i,s,r,o,l,a,c,u,f,h=n[1]&&D3(n),d=n[2]&&N3(n);return{c(){e=k("div"),t=k("h2"),i=q(n[0]),s=U(),h&&h.c(),r=U(),d&&d.c(),o=U(),l=k("button"),a=q("Close"),this.h()},l(m){e=T(m,"DIV",{class:!0});var p=I(e);t=T(p,"H2",{});var _=I(t);i=z(_,n[0]),_.forEach(b),s=W(p),h&&h.l(p),r=W(p),d&&d.l(p),o=W(p),l=T(p,"BUTTON",{});var v=I(l);a=z(v,"Close"),v.forEach(b),p.forEach(b),this.h()},h(){lt(l,"width","100%"),S(e,"class","container svelte-1wlyb3r")},m(m,p){H(m,e,p),g(e,t),g(t,i),g(e,s),h&&h.m(e,null),g(e,r),d&&d.m(e,null),g(e,o),g(e,l),g(l,a),c=!0,u||(f=_e(l,"click",n[5]),u=!0)},p(m,[p]){(!c||p&1)&&Le(i,m[0]),m[1]?h?h.p(m,p):(h=D3(m),h.c(),h.m(e,r)):h&&(h.d(1),h=null),m[2]?d?(d.p(m,p),p&4&&B(d,1)):(d=N3(m),d.c(),B(d,1),d.m(e,o)):d&&(He(),G(d,1,1,()=>{d=null}),qe())},i(m){c||(B(d),c=!0)},o(m){G(d),c=!1},d(m){m&&b(e),h&&h.d(),d&&d.d(),u=!1,f()}}}function Hre(n,e,t){const{close:i}=Bn(hs.MODAL);let{header:s}=e,{content:r}=e,{childElement:o}=e,{childElementProps:l}=e;const a=()=>i();return n.$$set=c=>{"header"in c&&t(0,s=c.header),"content"in c&&t(1,r=c.content),"childElement"in c&&t(2,o=c.childElement),"childElementProps"in c&&t(3,l=c.childElementProps)},[s,r,o,l,i,a]}class qre extends st{constructor(e){super(),rt(this,e,Hre,jre,kt,{header:0,content:1,childElement:2,childElementProps:3})}}function P3(n,e,t){const i=n.slice();return i[14]=e[t],i}function zre(n){let e,t;return{c(){e=k("label"),t=q("Battalion Equipped?"),this.h()},l(i){e=T(i,"LABEL",{for:!0});var s=I(e);t=z(s,"Battalion Equipped?"),s.forEach(b),this.h()},h(){S(e,"for","battalion-equipped")},m(i,s){H(i,e,s),g(e,t)},p:Xe,d(i){i&&b(e)}}}function Gre(n){let e,t;return{c(){e=k("div"),t=q("If you have a battalion equipped, you will gain 50% of Max XP to the leadership skill"),this.h()},l(i){e=T(i,"DIV",{slot:!0});var s=I(e);t=z(s,"If you have a battalion equipped, you will gain 50% of Max XP to the leadership skill"),s.forEach(b),this.h()},h(){S(e,"slot","t"),lt(e,"white-space","break-spaces")},m(i,s){H(i,e,s),g(e,t)},p:Xe,d(i){i&&b(e)}}}function M3(n){let e,t,i=Math.round(n[1]/Object.keys(n[3]).length*(n[6][n[14]]||1))+"",s;return{c(){e=k("div"),t=q("+"),s=q(i)},l(r){e=T(r,"DIV",{});var o=I(e);t=z(o,"+"),s=z(o,i),o.forEach(b)},m(r,o){H(r,e,o),g(e,t),g(e,s)},p(r,o){o&74&&i!==(i=Math.round(r[1]/Object.keys(r[3]).length*(r[6][r[14]]||1))+"")&&Le(s,i)},d(r){r&&b(e)}}}function B3(n){let e,t,i,s,r,o,l=so[n[14]]+"",a,c,u,f,h;function d(){return n[12](n[14])}let m=n[3][n[14]]&&M3(n);return{c(){e=k("div"),t=k("div"),i=k("input"),r=U(),o=k("label"),a=q(l),c=U(),m&&m.c(),u=U(),this.h()},l(p){e=T(p,"DIV",{});var _=I(e);t=T(_,"DIV",{});var v=I(t);i=T(v,"INPUT",{type:!0,name:!0,id:!0}),r=W(v),o=T(v,"LABEL",{for:!0});var y=I(o);a=z(y,l),y.forEach(b),v.forEach(b),c=W(_),m&&m.l(_),u=W(_),_.forEach(b),this.h()},h(){S(i,"type","checkbox"),S(i,"name","weapon"),S(i,"id",n[14]),i.checked=s=n[3][n[14]],S(o,"for",n[14]),lt(t,"display","flex"),lt(e,"display","flex"),lt(e,"flex-direction","column"),lt(e,"align-items","center")},m(p,_){H(p,e,_),g(e,t),g(t,i),g(t,r),g(t,o),g(o,a),g(e,c),m&&m.m(e,null),g(e,u),f||(h=_e(i,"click",d),f=!0)},p(p,_){n=p,_&8&&s!==(s=n[3][n[14]])&&(i.checked=s),n[3][n[14]]?m?m.p(n,_):(m=M3(n),m.c(),m.m(e,u)):m&&(m.d(1),m=null)},d(p){p&&b(e),m&&m.d(),f=!1,h()}}}function L3(n){let e,t=t1(n[4],{prefix:"Extra XP from equipped class:"})+"",i;return{c(){e=k("div"),i=q(t)},l(s){e=T(s,"DIV",{});var r=I(e);i=z(r,t),r.forEach(b)},m(s,r){H(s,e,r),g(e,i)},p(s,r){r&16&&t!==(t=t1(s[4],{prefix:"Extra XP from equipped class:"})+"")&&Le(i,t)},d(s){s&&b(e)}}}function Kre(n){let e,t,i,s,r,o,l,a,c,u,f,h=(Wl[n[0]]||"None")+"",d,m,p,_,v,y,w,A,E,C,R,D,N,L,F,P,Q,O,K,X,J,te,j,x,Z,V,ce,pe,re,ye,Ne;C=new ai({props:{$$slots:{t:[Gre],default:[zre]},$$scope:{ctx:n}}});let Y=iy,Ce=[];for(let se=0;se<Y.length;se+=1)Ce[se]=B3(P3(n,Y,se));let We=n[5]&&L3(n);return{c(){e=k("div"),t=k("div"),i=k("span"),s=k("u"),r=q("Combat XP"),o=U(),l=k("span"),a=k("div"),c=q("Equipped Class:"),u=U(),f=k("b"),d=q(h),m=U(),p=k("span"),_=k("div"),v=q("Total XP for the Combat:"),y=U(),w=k("input"),A=U(),E=k("span"),ke(C.$$.fragment),R=U(),D=k("input"),N=U(),L=k("div"),F=k("fieldset"),P=k("legend"),Q=q("Select all weapons used in the combat"),O=U();for(let se=0;se<Ce.length;se+=1)Ce[se].c();K=U(),We&&We.c(),X=U(),J=k("div"),te=k("button"),j=q("Add combat XP"),Z=U(),V=k("button"),ce=q("Click to clear all"),this.h()},l(se){e=T(se,"DIV",{class:!0});var Me=I(e);t=T(Me,"DIV",{});var he=I(t);i=T(he,"SPAN",{});var M=I(i);s=T(M,"U",{});var ae=I(s);r=z(ae,"Combat XP"),ae.forEach(b),M.forEach(b),o=W(he),l=T(he,"SPAN",{});var de=I(l);a=T(de,"DIV",{});var ee=I(a);c=z(ee,"Equipped Class:"),ee.forEach(b),u=W(de),f=T(de,"B",{});var $=I(f);d=z($,h),$.forEach(b),de.forEach(b),m=W(he),p=T(he,"SPAN",{});var ne=I(p);_=T(ne,"DIV",{});var me=I(_);v=z(me,"Total XP for the Combat:"),me.forEach(b),y=W(ne),w=T(ne,"INPUT",{type:!0}),ne.forEach(b),A=W(he),E=T(he,"SPAN",{});var le=I(E);Oe(C.$$.fragment,le),R=W(le),D=T(le,"INPUT",{id:!0,type:!0}),le.forEach(b),he.forEach(b),N=W(Me),L=T(Me,"DIV",{});var ie=I(L);F=T(ie,"FIELDSET",{class:!0});var be=I(F);P=T(be,"LEGEND",{});var we=I(P);Q=z(we,"Select all weapons used in the combat"),we.forEach(b),O=W(be);for(let ve=0;ve<Ce.length;ve+=1)Ce[ve].l(be);be.forEach(b),K=W(ie),We&&We.l(ie),ie.forEach(b),X=W(Me),J=T(Me,"DIV",{class:!0});var Ae=I(J);te=T(Ae,"BUTTON",{});var ge=I(te);j=z(ge,"Add combat XP"),ge.forEach(b),Z=W(Ae),V=T(Ae,"BUTTON",{});var Be=I(V);ce=z(Be,"Click to clear all"),Be.forEach(b),Ae.forEach(b),Me.forEach(b),this.h()},h(){lt(l,"display","flex"),lt(l,"column-gap","5px"),S(w,"type","number"),lt(w,"width","30px"),lt(p,"display","flex"),lt(p,"column-gap","5px"),S(D,"id","battalion-equipped"),S(D,"type","checkbox"),lt(E,"display","flex"),lt(E,"column-gap","5px"),lt(t,"display","flex"),lt(t,"flex-direction","column"),S(F,"class","svelte-we8b5v"),lt(L,"flex","1"),lt(L,"display","flex"),lt(L,"flex-direction","column"),te.disabled=x=!Object.keys(n[3]).length,V.disabled=pe=!Object.keys(n[3]).length,S(J,"class","button-container svelte-we8b5v"),S(e,"class","container svelte-we8b5v")},m(se,Me){H(se,e,Me),g(e,t),g(t,i),g(i,s),g(s,r),g(t,o),g(t,l),g(l,a),g(a,c),g(l,u),g(l,f),g(f,d),g(t,m),g(t,p),g(p,_),g(_,v),g(p,y),g(p,w),Ms(w,n[1]),g(t,A),g(t,E),Te(C,E,null),g(E,R),g(E,D),D.checked=n[2],g(e,N),g(e,L),g(L,F),g(F,P),g(P,Q),g(F,O);for(let he=0;he<Ce.length;he+=1)Ce[he].m(F,null);g(L,K),We&&We.m(L,null),g(e,X),g(e,J),g(J,te),g(te,j),g(J,Z),g(J,V),g(V,ce),re=!0,ye||(Ne=[_e(w,"input",n[10]),_e(D,"change",n[11]),_e(te,"click",function(){Mn(n[7])&&n[7].apply(this,arguments)}),_e(V,"click",n[13])],ye=!0)},p(se,[Me]){n=se,(!re||Me&1)&&h!==(h=(Wl[n[0]]||"None")+"")&&Le(d,h),Me&2&&lT(w.value)!==n[1]&&Ms(w,n[1]);const he={};if(Me&131072&&(he.$$scope={dirty:Me,ctx:n}),C.$set(he),Me&4&&(D.checked=n[2]),Me&74){Y=iy;let M;for(M=0;M<Y.length;M+=1){const ae=P3(n,Y,M);Ce[M]?Ce[M].p(ae,Me):(Ce[M]=B3(ae),Ce[M].c(),Ce[M].m(F,null))}for(;M<Ce.length;M+=1)Ce[M].d(1);Ce.length=Y.length}n[5]?We?We.p(n,Me):(We=L3(n),We.c(),We.m(L,null)):We&&(We.d(1),We=null),(!re||Me&8&&x!==(x=!Object.keys(n[3]).length))&&(te.disabled=x),(!re||Me&8&&pe!==(pe=!Object.keys(n[3]).length))&&(V.disabled=pe)},i(se){re||(B(C.$$.fragment,se),re=!0)},o(se){G(C.$$.fragment,se),re=!1},d(se){se&&b(e),Ie(C),Ft(Ce,se),We&&We.d(),ye=!1,an(Ne)}}}function Xre(n,e,t){let i,s,r,o,{equippedClass:l}=e,{weaponXP:a}=e,{onWeaponXpChange:c}=e,u=24,f=!1,h={};function d(){u=lT(this.value),t(1,u)}function m(){f=this.checked,t(2,f)}const p=v=>{if(h[v]){const{[v]:y,...w}=h;t(3,h=w)}else t(3,h={...h,[v]:!0})},_=()=>t(3,h={});return n.$$set=v=>{"equippedClass"in v&&t(0,l=v.equippedClass),"weaponXP"in v&&t(8,a=v.weaponXP),"onWeaponXpChange"in v&&t(9,c=v.onWeaponXpChange)},n.$$.update=()=>{var v,y,w,A;n.$$.dirty&1&&t(4,i=((y=(v=Yt[l])==null?void 0:v.whenEquipped)==null?void 0:y.xpMooch)||{}),n.$$.dirty&1&&t(6,s=((A=(w=Yt[l])==null?void 0:w.whenEquipped)==null?void 0:A.xpMods)||{}),n.$$.dirty&16&&t(5,r=!!Object.keys(i).length),n.$$.dirty&894&&t(7,o=async()=>{const E=Object.keys(h),C=E.reduce((D,N)=>(D[N]=Math.round(u/E.length*(s[N]||1)),D),{});r&&Object.keys(i).forEach(D=>C[D]=Math.round(u*i[D]));const R=Object.keys(C);for(const D of R){const N=a[D]||{level:je.E,total:0,mastered:!1};await c(C[D],{type:D,curLevel:N.level,curXP:N.total,maxXP:Yg[N.level]})}if(f){const D=fe.LEADERSHIP,N=a[D]||{level:je.E,total:0,mastered:!1};c(Math.round(u/2),{type:D,curLevel:N.level,curXP:N.total,maxXP:Yg[N.level]})}})},[l,u,f,h,i,r,s,o,a,c,d,m,p,_]}class Qre extends st{constructor(e){super(),rt(this,e,Xre,Kre,kt,{equippedClass:0,weaponXP:8,onWeaponXpChange:9})}}function U3(n){let e,t;return{c(){e=k("div"),t=q(n[1])},l(i){e=T(i,"DIV",{});var s=I(e);t=z(s,n[1]),s.forEach(b)},m(i,s){H(i,e,s),g(e,t)},p(i,s){s&2&&Le(t,i[1])},d(i){i&&b(e)}}}function W3(n){let e,t;return{c(){e=k("div"),t=q("Nothing :)")},l(i){e=T(i,"DIV",{});var s=I(e);t=z(s,"Nothing :)"),s.forEach(b)},m(i,s){H(i,e,s),g(e,t)},d(i){i&&b(e)}}}function Yre(n){let e,t,i,s=n[0]?"Always ":"",r,o,l,a,c=n[1]&&U3(n),u=!n[1]&&W3();return{c(){e=k("div"),t=k("div"),i=k("u"),r=q(s),o=q("Unlocks"),l=U(),c&&c.c(),a=U(),u&&u.c(),this.h()},l(f){e=T(f,"DIV",{class:!0});var h=I(e);t=T(h,"DIV",{});var d=I(t);i=T(d,"U",{});var m=I(i);r=z(m,s),o=z(m,"Unlocks"),m.forEach(b),d.forEach(b),l=W(h),c&&c.l(h),a=W(h),u&&u.l(h),h.forEach(b),this.h()},h(){S(e,"class","container")},m(f,h){H(f,e,h),g(e,t),g(t,i),g(i,r),g(i,o),g(e,l),c&&c.m(e,null),g(e,a),u&&u.m(e,null)},p(f,[h]){h&1&&s!==(s=f[0]?"Always ":"")&&Le(r,s),f[1]?c?c.p(f,h):(c=U3(f),c.c(),c.m(e,a)):c&&(c.d(1),c=null),f[1]?u&&(u.d(1),u=null):u||(u=W3(),u.c(),u.m(e,null))},i:Xe,o:Xe,d(f){f&&b(e),c&&c.d(),u&&u.d()}}}function Jre(n,e,t){let i,{type:s}=e,{level:r}=e,{disablePickOne:o=!1}=e;return n.$$set=l=>{"type"in l&&t(2,s=l.type),"level"in l&&t(3,r=l.level),"disablePickOne"in l&&t(0,o=l.disablePickOne)},n.$$.update=()=>{var l;n.$$.dirty&13&&t(1,i=sd((l=Ko[s])==null?void 0:l[r],o))},[o,i,s,r]}class dg extends st{constructor(e){super(),rt(this,e,Jre,Yre,kt,{type:2,level:3,disablePickOne:0})}}function V3(n,e,t){var l,a;const i=n.slice();i[44]=e[t],i[49]=t;const s=((l=i[2][i[44]])==null?void 0:l.total)||0;i[45]=s;const r=id.has(i[44])?a7:Il.has(i[44])?c7:1e4;i[46]=r;const o=(a=i[2][i[44]])==null?void 0:a.mastered;return i[47]=o,i}function F3(n,e,t){var c,u,f;const i=n.slice();i[50]=e[t],i[49]=t;const s=((c=i[1][i[50]])==null?void 0:c.total)||0;i[45]=s;const r=((u=i[1][i[50]])==null?void 0:u.level)||je.E;i[51]=r;const o=oo[oo.findIndex(function(...d){return n[37](i[50],...d)})+1];i[52]=o;const l=sd((f=Ko[i[50]])==null?void 0:f[i[52]]);i[53]=l;const a=Yg[i[51]];return i[46]=a,i}function j3(n,e,t){const i=n.slice();return i[55]=e[t],i}function H3(n,e,t){const i=n.slice();return i[58]=e[t],i}function Zre(n){let e,t;return{c(){e=k("u"),t=q("Stat Modifier"),this.h()},l(i){e=T(i,"U",{class:!0});var s=I(e);t=z(s,"Stat Modifier"),s.forEach(b),this.h()},h(){S(e,"class","header svelte-3zpgt7"),lt(e,"text-align","center"),lt(e,"white-space","nowrap")},m(i,s){H(i,e,s),g(e,t)},p:Xe,d(i){i&&b(e)}}}function xre(n){let e,t;return{c(){e=k("div"),t=q("The stat that will be added when doing XP rolls."),this.h()},l(i){e=T(i,"DIV",{slot:!0});var s=I(e);t=z(s,"The stat that will be added when doing XP rolls."),s.forEach(b),this.h()},h(){S(e,"slot","t")},m(i,s){H(i,e,s),g(e,t)},p:Xe,d(i){i&&b(e)}}}function q3(n){let e,t=yh[n[58]]+"",i,s;return{c(){e=k("option"),i=q(t),this.h()},l(r){e=T(r,"OPTION",{});var o=I(e);i=z(o,t),o.forEach(b),this.h()},h(){e.__value=je[n[58]],e.value=e.__value,e.selected=s=n[51]===n[58]},m(r,o){H(r,e,o),g(e,i)},p(r,o){o[0]&2&&s!==(s=r[51]===r[58])&&(e.selected=s)},d(r){r&&b(e)}}}function $re(n){let e,t,i,s,r=Object.keys(je),o=[];for(let a=0;a<r.length;a+=1)o[a]=q3(H3(n,r,a));function l(...a){return n[34](n[50],n[51],...a)}return{c(){e=k("div"),t=k("select");for(let a=0;a<o.length;a+=1)o[a].c();this.h()},l(a){e=T(a,"DIV",{class:!0});var c=I(e);t=T(c,"SELECT",{name:!0});var u=I(t);for(let f=0;f<o.length;f+=1)o[f].l(u);u.forEach(b),c.forEach(b),this.h()},h(){S(t,"name","weapon_level"),S(e,"class","content svelte-3zpgt7")},m(a,c){H(a,e,c),g(e,t);for(let u=0;u<o.length;u+=1)o[u].m(t,null);i||(s=[_e(t,"change",l),_e(t,"mouseover",n[15](n[49],!0)),_e(t,"mouseleave",n[15](-1,!0)),_e(t,"focus",n[15](n[49],!0))],i=!0)},p(a,c){if(n=a,c[0]&2){r=Object.keys(je);let u;for(u=0;u<r.length;u+=1){const f=H3(n,r,u);o[u]?o[u].p(f,c):(o[u]=q3(f),o[u].c(),o[u].m(t,null))}for(;u<o.length;u+=1)o[u].d(1);o.length=r.length}},d(a){a&&b(e),Ft(o,a),i=!1,an(s)}}}function eoe(n){var v;let e,t,i,s,r,o,l=(sd((v=Ko[n[50]])==null?void 0:v[n[51]])||"Nothing")+"",a,c,u,f,h,d,m,p=(n[53]||"Nothing")+"",_;return{c(){e=k("div"),t=k("div"),i=k("u"),s=q("Current Level:"),r=U(),o=k("div"),a=q(l),c=U(),u=k("div"),f=k("u"),h=q("On Level Up:"),d=U(),m=k("div"),_=q(p),this.h()},l(y){e=T(y,"DIV",{slot:!0});var w=I(e);t=T(w,"DIV",{});var A=I(t);i=T(A,"U",{});var E=I(i);s=z(E,"Current Level:"),E.forEach(b),A.forEach(b),r=W(w),o=T(w,"DIV",{});var C=I(o);a=z(C,l),C.forEach(b),c=W(w),u=T(w,"DIV",{});var R=I(u);f=T(R,"U",{});var D=I(f);h=z(D,"On Level Up:"),D.forEach(b),R.forEach(b),d=W(w),m=T(w,"DIV",{});var N=I(m);_=z(N,p),N.forEach(b),w.forEach(b),this.h()},h(){S(e,"slot","t")},m(y,w){H(y,e,w),g(e,t),g(t,i),g(i,s),g(e,r),g(e,o),g(o,a),g(e,c),g(e,u),g(u,f),g(f,h),g(e,d),g(e,m),g(m,_)},p(y,w){var A;w[0]&2&&l!==(l=(sd((A=Ko[y[50]])==null?void 0:A[y[51]])||"Nothing")+"")&&Le(a,l),w[0]&2&&p!==(p=(y[53]||"Nothing")+"")&&Le(_,p)},d(y){y&&b(e)}}}function z3(n){let e,t;return e=new ai({props:{tooltipStyle:ns.BOTTOM_CENTER,$$slots:{t:[eoe],default:[$re]},$$scope:{ctx:n}}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,s){const r={};s[0]&8226|s[1]&1073741824&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function toe(n){let e,t,i,s=ro[n[50]],r=[];for(let l=0;l<s.length;l+=1)r[l]=G3(j3(n,s,l));function o(...l){return n[35](n[50],...l)}return{c(){e=k("select");for(let l=0;l<r.length;l+=1)r[l].c();this.h()},l(l){e=T(l,"SELECT",{class:!0});var a=I(e);for(let c=0;c<r.length;c+=1)r[c].l(a);a.forEach(b),this.h()},h(){S(e,"class","content svelte-3zpgt7")},m(l,a){H(l,e,a);for(let c=0;c<r.length;c+=1)r[c].m(e,null);t||(i=[_e(e,"change",o),_e(e,"mouseover",n[15](n[49],!0)),_e(e,"mouseleave",n[15](-1,!0)),_e(e,"focus",n[15](n[49],!0))],t=!0)},p(l,a){if(n=l,a[0]&512){s=ro[n[50]];let c;for(c=0;c<s.length;c+=1){const u=j3(n,s,c);r[c]?r[c].p(u,a):(r[c]=G3(u),r[c].c(),r[c].m(e,null))}for(;c<r.length;c+=1)r[c].d(1);r.length=s.length}},d(l){l&&b(e),Ft(r,l),t=!1,an(i)}}}function G3(n){let e,t=zs[n[55]]+"",i,s;return{c(){e=k("option"),i=q(t),this.h()},l(r){e=T(r,"OPTION",{});var o=I(e);i=z(o,t),o.forEach(b),this.h()},h(){e.__value=n[55],e.value=e.__value,e.selected=s=n[9][n[50]]===n[55]},m(r,o){H(r,e,o),g(e,i)},p(r,o){o[0]&512&&s!==(s=r[9][r[50]]===r[55])&&(e.selected=s)},d(r){r&&b(e)}}}function noe(n){let e,t=zs[ro[n[50]][0]]+"",i;return{c(){e=k("span"),i=q(t),this.h()},l(s){e=T(s,"SPAN",{class:!0});var r=I(e);i=z(r,t),r.forEach(b),this.h()},h(){S(e,"class","content svelte-3zpgt7"),lt(e,"text-align","center"),lt(e,"cursor","default")},m(s,r){H(s,e,r),g(e,i)},p:Xe,d(s){s&&b(e)}}}function ioe(n){let e,t,i,s,r,o;function l(){return n[36](n[51],n[45],n[46],n[50])}return{c(){e=k("button"),t=q("Roll"),s=U(),this.h()},l(a){e=T(a,"BUTTON",{});var c=I(e);t=z(c,"Roll"),c.forEach(b),s=W(a),this.h()},h(){e.disabled=i=n[7]<=0},m(a,c){H(a,e,c),g(e,t),H(a,s,c),r||(o=[_e(e,"click",l),_e(e,"mouseover",n[15](n[49],!0)),_e(e,"mouseleave",n[15](-1,!0)),_e(e,"focus",n[15](n[49],!0))],r=!0)},p(a,c){n=a,c[0]&128&&i!==(i=n[7]<=0)&&(e.disabled=i)},d(a){a&&b(e),a&&b(s),r=!1,an(o)}}}function soe(n){let e,t,i,s,r,o,l="<= 1 Awful",a,c,u,f,h,d,m,p="2-5 Poor",_,v,y,w,A,E,C,R,D,N,L,F,P,Q,O=">= 16 Great",K,X,J,te,j,x,Z,V,ce,pe,re,ye,Ne,Y,Ce,We,se,Me,he;return{c(){e=k("div"),t=k("div"),i=q("Roll for your lecture:"),s=U(),r=k("div"),o=k("span"),a=q(l),c=U(),u=k("span"),f=q("= 0 XP"),h=U(),d=k("div"),m=k("span"),_=q(p),v=U(),y=k("span"),w=q("= 6 XP"),A=U(),E=k("div"),C=k("span"),R=q("6-15 Good"),D=U(),N=k("span"),L=q("= 9 XP"),F=U(),P=k("div"),Q=k("span"),K=q(O),X=U(),J=k("span"),te=q("= 12 XP and +1 Roll (1 per session)"),j=U(),x=k("div"),Z=k("span"),V=q("Nat 1 Awful"),ce=U(),pe=k("span"),re=q("= 0 XP"),ye=U(),Ne=k("div"),Y=k("span"),Ce=q("Nat 20 Perfect"),We=U(),se=k("span"),Me=q("= 16 XP and +1 Roll"),he=U(),this.h()},l(M){e=T(M,"DIV",{slot:!0});var ae=I(e);t=T(ae,"DIV",{});var de=I(t);i=z(de,"Roll for your lecture:"),de.forEach(b),s=W(ae),r=T(ae,"DIV",{class:!0});var ee=I(r);o=T(ee,"SPAN",{class:!0});var $=I(o);a=z($,l),$.forEach(b),c=W(ee),u=T(ee,"SPAN",{class:!0});var ne=I(u);f=z(ne,"= 0 XP"),ne.forEach(b),ee.forEach(b),h=W(ae),d=T(ae,"DIV",{class:!0});var me=I(d);m=T(me,"SPAN",{class:!0});var le=I(m);_=z(le,p),le.forEach(b),v=W(me),y=T(me,"SPAN",{class:!0});var ie=I(y);w=z(ie,"= 6 XP"),ie.forEach(b),me.forEach(b),A=W(ae),E=T(ae,"DIV",{class:!0});var be=I(E);C=T(be,"SPAN",{class:!0});var we=I(C);R=z(we,"6-15 Good"),we.forEach(b),D=W(be),N=T(be,"SPAN",{class:!0});var Ae=I(N);L=z(Ae,"= 9 XP"),Ae.forEach(b),be.forEach(b),F=W(ae),P=T(ae,"DIV",{class:!0});var ge=I(P);Q=T(ge,"SPAN",{class:!0});var Be=I(Q);K=z(Be,O),Be.forEach(b),X=W(ge),J=T(ge,"SPAN",{class:!0});var ve=I(J);te=z(ve,"= 12 XP and +1 Roll (1 per session)"),ve.forEach(b),ge.forEach(b),j=W(ae),x=T(ae,"DIV",{class:!0});var Pe=I(x);Z=T(Pe,"SPAN",{class:!0});var Se=I(Z);V=z(Se,"Nat 1 Awful"),Se.forEach(b),ce=W(Pe),pe=T(Pe,"SPAN",{class:!0});var tt=I(pe);re=z(tt,"= 0 XP"),tt.forEach(b),Pe.forEach(b),ye=W(ae),Ne=T(ae,"DIV",{class:!0});var Ke=I(Ne);Y=T(Ke,"SPAN",{class:!0});var Ee=I(Y);Ce=z(Ee,"Nat 20 Perfect"),Ee.forEach(b),We=W(Ke),se=T(Ke,"SPAN",{class:!0});var it=I(se);Me=z(it,"= 16 XP and +1 Roll"),it.forEach(b),Ke.forEach(b),he=W(ae),ae.forEach(b),this.h()},h(){S(o,"class","svelte-3zpgt7"),S(u,"class","svelte-3zpgt7"),S(r,"class","test svelte-3zpgt7"),S(m,"class","svelte-3zpgt7"),S(y,"class","svelte-3zpgt7"),S(d,"class","test svelte-3zpgt7"),S(C,"class","svelte-3zpgt7"),S(N,"class","svelte-3zpgt7"),S(E,"class","test svelte-3zpgt7"),S(Q,"class","svelte-3zpgt7"),S(J,"class","svelte-3zpgt7"),S(P,"class","test svelte-3zpgt7"),S(Z,"class","svelte-3zpgt7"),S(pe,"class","svelte-3zpgt7"),S(x,"class","test svelte-3zpgt7"),S(Y,"class","svelte-3zpgt7"),S(se,"class","svelte-3zpgt7"),S(Ne,"class","test svelte-3zpgt7"),S(e,"slot","t")},m(M,ae){H(M,e,ae),g(e,t),g(t,i),g(e,s),g(e,r),g(r,o),g(o,a),g(r,c),g(r,u),g(u,f),g(e,h),g(e,d),g(d,m),g(m,_),g(d,v),g(d,y),g(y,w),g(e,A),g(e,E),g(E,C),g(C,R),g(E,D),g(E,N),g(N,L),g(e,F),g(e,P),g(P,Q),g(Q,K),g(P,X),g(P,J),g(J,te),g(e,j),g(e,x),g(x,Z),g(Z,V),g(x,ce),g(x,pe),g(pe,re),g(e,ye),g(e,Ne),g(Ne,Y),g(Y,Ce),g(Ne,We),g(Ne,se),g(se,Me),g(e,he)},p:Xe,d(M){M&&b(e)}}}function K3(n){let e,t=so[n[50]]+"",i,s,r,o,l,a,c=`${n[45]} / ${n[46]}`,u,f,h,d,m,p,_,v,y=n[5],w,A,E,C,R,D,N;function L(...O){return n[33](n[51],n[45],n[46],n[50],...O)}let F=z3(n),P=ro[n[50]].length>1&&toe(n),Q=ro[n[50]].length<=1&&noe(n);return C=new ai({props:{tooltipStyle:ns.BOTTOM_CENTER,tooltipPositionerStyle:"z-index: 100",$$slots:{t:[soe],default:[ioe]},$$scope:{ctx:n}}}),{c(){e=k("div"),i=q(t),r=U(),o=k("div"),l=k("div"),a=k("span"),u=q(c),f=U(),h=k("div"),d=k("div"),m=q("XP to Add"),p=U(),_=k("input"),v=U(),F.c(),w=U(),P&&P.c(),A=U(),Q&&Q.c(),E=U(),ke(C.$$.fragment),this.h()},l(O){e=T(O,"DIV",{class:!0});var K=I(e);i=z(K,t),K.forEach(b),r=W(O),o=T(O,"DIV",{class:!0});var X=I(o);l=T(X,"DIV",{class:!0});var J=I(l);a=T(J,"SPAN",{class:!0});var te=I(a);u=z(te,c),te.forEach(b),J.forEach(b),X.forEach(b),f=W(O),h=T(O,"DIV",{class:!0});var j=I(h);d=T(j,"DIV",{class:!0});var x=I(d);m=z(x,"XP to Add"),x.forEach(b),p=W(j),_=T(j,"INPUT",{type:!0,class:!0}),j.forEach(b),v=W(O),F.l(O),w=W(O),P&&P.l(O),A=W(O),Q&&Q.l(O),E=W(O),Oe(C.$$.fragment,O),this.h()},h(){S(e,"class",s=Ze(Zi("label content",{focused:n[11].i===n[49]&&n[11].weaponSide}))+" svelte-3zpgt7"),S(a,"class","svelte-3zpgt7"),S(l,"class","fill svelte-3zpgt7"),lt(l,"right",`${(n[46]-n[45])/n[46]*100}%`),S(o,"class","xp-bar content svelte-3zpgt7"),S(d,"class","prompt"),S(_,"type","number"),S(_,"class","svelte-3zpgt7"),S(h,"class","form content svelte-3zpgt7")},m(O,K){H(O,e,K),g(e,i),H(O,r,K),H(O,o,K),g(o,l),g(l,a),g(a,u),H(O,f,K),H(O,h,K),g(h,d),g(d,m),g(h,p),g(h,_),H(O,v,K),F.m(O,K),H(O,w,K),P&&P.m(O,K),H(O,A,K),Q&&Q.m(O,K),H(O,E,K),Te(C,O,K),R=!0,D||(N=[_e(_,"mouseover",n[15](n[49],!0)),_e(_,"mouseleave",n[15](-1,!0)),_e(_,"focus",n[15](n[49],!0)),_e(_,"change",L)],D=!0)},p(O,K){n=O,(!R||K[0]&2048&&s!==(s=Ze(Zi("label content",{focused:n[11].i===n[49]&&n[11].weaponSide}))+" svelte-3zpgt7"))&&S(e,"class",s),(!R||K[0]&2)&&c!==(c=`${n[45]} / ${n[46]}`)&&Le(u,c),K[0]&2&&lt(l,"right",`${(n[46]-n[45])/n[46]*100}%`),K[0]&32&&kt(y,y=n[5])?(He(),G(F,1,1,Xe),qe(),F=z3(n),F.c(),B(F,1),F.m(w.parentNode,w)):F.p(n,K),ro[n[50]].length>1&&P.p(n,K),ro[n[50]].length<=1&&Q.p(n,K);const X={};K[0]&4226|K[1]&1073741824&&(X.$$scope={dirty:K,ctx:n}),C.$set(X)},i(O){R||(B(F),B(C.$$.fragment,O),R=!0)},o(O){G(F),G(C.$$.fragment,O),R=!1},d(O){O&&b(e),O&&b(r),O&&b(o),O&&b(f),O&&b(h),O&&b(v),F.d(O),O&&b(w),P&&P.d(O),O&&b(A),Q&&Q.d(O),O&&b(E),Ie(C,O),D=!1,an(N)}}}function roe(n){let e,t,i;return{c(){e=k("span"),t=q("# of rolls remaining:"),this.h()},l(s){e=T(s,"SPAN",{class:!0});var r=I(e);t=z(r,"# of rolls remaining:"),r.forEach(b),this.h()},h(){S(e,"class",i=Ze(Zi({"great-already":n[8]}))+" svelte-3zpgt7")},m(s,r){H(s,e,r),g(e,t)},p(s,r){r[0]&256&&i!==(i=Ze(Zi({"great-already":s[8]}))+" svelte-3zpgt7")&&S(e,"class",i)},d(s){s&&b(e)}}}function ooe(n){let e,t,i,s,r,o,l,a;return{c(){e=k("div"),t=k("span"),i=q(`This text turns orange when you have rolled a 16+ for this training session already.
						Meaning any more 16+ will not add 1 to your available training sessions.`),s=U(),r=k("br"),o=U(),l=k("span"),a=q("Will be reset when you click the Reset Rolls button"),this.h()},l(c){e=T(c,"DIV",{slot:!0});var u=I(e);t=T(u,"SPAN",{});var f=I(t);i=z(f,`This text turns orange when you have rolled a 16+ for this training session already.
						Meaning any more 16+ will not add 1 to your available training sessions.`),f.forEach(b),s=W(u),r=T(u,"BR",{}),o=W(u),l=T(u,"SPAN",{});var h=I(l);a=z(h,"Will be reset when you click the Reset Rolls button"),h.forEach(b),u.forEach(b),this.h()},h(){S(e,"slot","t")},m(c,u){H(c,e,u),g(e,t),g(t,i),g(e,s),g(e,r),g(e,o),g(e,l),g(l,a)},p:Xe,d(c){c&&b(e)}}}function X3(n){let e,t=Wl[n[44]]+"",i,s,r,o,l,a,c=`${n[45]} / ${n[46]}`,u,f,h,d,m,p,_,v,y,w,A,E,C,R,D,N;function L(...F){return n[40](n[45],n[46],n[44],...F)}return{c(){e=k("div"),i=q(t),r=U(),o=k("div"),l=k("div"),a=k("span"),u=q(c),h=U(),d=k("div"),m=k("div"),p=q("XP to Add"),_=U(),v=k("input"),y=U(),w=k("span"),A=U(),E=k("span"),C=U(),R=k("span"),this.h()},l(F){e=T(F,"DIV",{class:!0});var P=I(e);i=z(P,t),P.forEach(b),r=W(F),o=T(F,"DIV",{class:!0});var Q=I(o);l=T(Q,"DIV",{class:!0});var O=I(l);a=T(O,"SPAN",{class:!0});var K=I(a);u=z(K,c),K.forEach(b),O.forEach(b),Q.forEach(b),h=W(F),d=T(F,"DIV",{class:!0});var X=I(d);m=T(X,"DIV",{class:!0});var J=I(m);p=z(J,"XP to Add"),J.forEach(b),_=W(X),v=T(X,"INPUT",{type:!0,class:!0}),X.forEach(b),y=W(F),w=T(F,"SPAN",{}),I(w).forEach(b),A=W(F),E=T(F,"SPAN",{}),I(E).forEach(b),C=W(F),R=T(F,"SPAN",{}),I(R).forEach(b),this.h()},h(){S(e,"class",s=Ze(Zi("label content",{focused:n[11].i===n[49]&&!n[11].weaponSide}))+" svelte-3zpgt7"),S(a,"class","svelte-3zpgt7"),S(l,"class",f=Ze(`fill ${n[47]?"mastered":""}`)+" svelte-3zpgt7"),lt(l,"right",`${(n[46]-n[45])/n[46]*100}%`),S(o,"class","xp-bar content svelte-3zpgt7"),S(m,"class","prompt"),S(v,"type","number"),S(v,"class","svelte-3zpgt7"),S(d,"class","form svelte-3zpgt7")},m(F,P){H(F,e,P),g(e,i),H(F,r,P),H(F,o,P),g(o,l),g(l,a),g(a,u),H(F,h,P),H(F,d,P),g(d,m),g(m,p),g(d,_),g(d,v),H(F,y,P),H(F,w,P),H(F,A,P),H(F,E,P),H(F,C,P),H(F,R,P),D||(N=[_e(v,"mouseover",n[15](n[49],!1)),_e(v,"mouseleave",n[15](-1,!1)),_e(v,"focus",n[15](n[49],!1)),_e(v,"change",L)],D=!0)},p(F,P){n=F,P[0]&1&&t!==(t=Wl[n[44]]+"")&&Le(i,t),P[0]&2048&&s!==(s=Ze(Zi("label content",{focused:n[11].i===n[49]&&!n[11].weaponSide}))+" svelte-3zpgt7")&&S(e,"class",s),P[0]&5&&c!==(c=`${n[45]} / ${n[46]}`)&&Le(u,c),P[0]&5&&f!==(f=Ze(`fill ${n[47]?"mastered":""}`)+" svelte-3zpgt7")&&S(l,"class",f),P[0]&5&&lt(l,"right",`${(n[46]-n[45])/n[46]*100}%`)},d(F){F&&b(e),F&&b(r),F&&b(o),F&&b(h),F&&b(d),F&&b(y),F&&b(w),F&&b(A),F&&b(E),F&&b(C),F&&b(R),D=!1,an(N)}}}function loe(n){let e,t,i,s,r,o,l,a,c,u,f,h,d,m,p,_,v,y,w,A,E,C,R,D,N,L,F,P,Q,O,K,X,J,te,j,x,Z,V,ce,pe,re,ye,Ne,Y,Ce,We,se,Me,he,M,ae;p=new ai({props:{$$slots:{t:[xre],default:[Zre]},$$scope:{ctx:n}}});let de=Object.keys(fe),ee=[];for(let le=0;le<de.length;le+=1)ee[le]=K3(F3(n,de,le));const $=le=>G(ee[le],1,1,()=>{ee[le]=null});A=new Qre({props:{equippedClass:n[4],weaponXP:n[1],onWeaponXpChange:n[10]}}),F=new ai({props:{$$slots:{t:[ooe],default:[roe]},$$scope:{ctx:n}}});let ne=n[0],me=[];for(let le=0;le<ne.length;le+=1)me[le]=X3(V3(n,ne,le));return{c(){e=k("div"),t=k("div"),i=k("div"),s=k("u"),r=q("Type"),o=U(),l=k("u"),a=q("XP (Current XP / XP Required to Level Up)"),c=U(),u=k("span"),f=U(),h=k("u"),d=q("Lvl"),m=U(),ke(p.$$.fragment),_=U(),v=k("span"),y=U();for(let le=0;le<ee.length;le+=1)ee[le].c();w=U(),ke(A.$$.fragment),E=U(),C=k("div"),R=k("span"),D=k("u"),N=q("Automatic Training"),L=U(),ke(F.$$.fragment),P=U(),Q=k("input"),O=U(),K=k("button"),X=q("Reset Rolls"),J=U(),te=k("div"),j=k("u"),x=q("Class"),Z=U(),V=k("u"),ce=q("Class XP (Current Battles / Battles Required to Master)"),pe=U(),re=k("span"),ye=U(),Ne=k("span"),Y=U(),Ce=k("span"),We=U(),se=k("span"),Me=U();for(let le=0;le<me.length;le+=1)me[le].c();this.h()},l(le){e=T(le,"DIV",{class:!0});var ie=I(e);t=T(ie,"DIV",{class:!0});var be=I(t);i=T(be,"DIV",{class:!0});var we=I(i);s=T(we,"U",{class:!0});var Ae=I(s);r=z(Ae,"Type"),Ae.forEach(b),o=W(we),l=T(we,"U",{class:!0});var ge=I(l);a=z(ge,"XP (Current XP / XP Required to Level Up)"),ge.forEach(b),c=W(we),u=T(we,"SPAN",{class:!0}),I(u).forEach(b),f=W(we),h=T(we,"U",{class:!0});var Be=I(h);d=z(Be,"Lvl"),Be.forEach(b),m=W(we),Oe(p.$$.fragment,we),_=W(we),v=T(we,"SPAN",{class:!0}),I(v).forEach(b),y=W(we);for(let De=0;De<ee.length;De+=1)ee[De].l(we);we.forEach(b),w=W(be),Oe(A.$$.fragment,be),E=W(be),C=T(be,"DIV",{class:!0});var ve=I(C);R=T(ve,"SPAN",{});var Pe=I(R);D=T(Pe,"U",{});var Se=I(D);N=z(Se,"Automatic Training"),Se.forEach(b),Pe.forEach(b),L=W(ve),Oe(F.$$.fragment,ve),P=W(ve),Q=T(ve,"INPUT",{type:!0,class:!0}),O=W(ve),K=T(ve,"BUTTON",{});var tt=I(K);X=z(tt,"Reset Rolls"),tt.forEach(b),ve.forEach(b),be.forEach(b),J=W(ie),te=T(ie,"DIV",{class:!0});var Ke=I(te);j=T(Ke,"U",{class:!0});var Ee=I(j);x=z(Ee,"Class"),Ee.forEach(b),Z=W(Ke),V=T(Ke,"U",{class:!0});var it=I(V);ce=z(it,"Class XP (Current Battles / Battles Required to Master)"),it.forEach(b),pe=W(Ke),re=T(Ke,"SPAN",{class:!0}),I(re).forEach(b),ye=W(Ke),Ne=T(Ke,"SPAN",{class:!0}),I(Ne).forEach(b),Y=W(Ke),Ce=T(Ke,"SPAN",{class:!0}),I(Ce).forEach(b),We=W(Ke),se=T(Ke,"SPAN",{class:!0}),I(se).forEach(b),Me=W(Ke);for(let De=0;De<me.length;De+=1)me[De].l(Ke);Ke.forEach(b),ie.forEach(b),this.h()},h(){S(s,"class","header svelte-3zpgt7"),lt(s,"justify-content","flex-start"),S(l,"class","header svelte-3zpgt7"),lt(l,"text-align","center"),lt(l,"white-space","nowrap"),S(u,"class","header svelte-3zpgt7"),S(h,"class","header svelte-3zpgt7"),lt(h,"text-align","center"),lt(h,"white-space","nowrap"),S(v,"class","header svelte-3zpgt7"),S(i,"class","category svelte-3zpgt7"),lt(R,"flex","1"),S(Q,"type","number"),Q.value=n[7],S(Q,"class","svelte-3zpgt7"),S(C,"class","auto-xp svelte-3zpgt7"),lt(C,"flex","1"),S(t,"class","weapon-xp-container svelte-3zpgt7"),S(j,"class","header svelte-3zpgt7"),lt(j,"justify-content","flex-start"),S(V,"class","header svelte-3zpgt7"),lt(V,"text-align","center"),lt(V,"white-space","nowrap"),lt(V,"justify-content","flex-start"),S(re,"class","header svelte-3zpgt7"),S(Ne,"class","header svelte-3zpgt7"),lt(Ne,"padding","0"),S(Ce,"class","header svelte-3zpgt7"),lt(Ce,"padding","0"),S(se,"class","header svelte-3zpgt7"),lt(se,"padding","0"),S(te,"class","category class-xp-container svelte-3zpgt7"),S(e,"class","container svelte-3zpgt7")},m(le,ie){H(le,e,ie),g(e,t),g(t,i),g(i,s),g(s,r),g(i,o),g(i,l),g(l,a),g(i,c),g(i,u),g(i,f),g(i,h),g(h,d),g(i,m),Te(p,i,null),g(i,_),g(i,v),g(i,y);for(let be=0;be<ee.length;be+=1)ee[be].m(i,null);g(t,w),Te(A,t,null),g(t,E),g(t,C),g(C,R),g(R,D),g(D,N),g(C,L),Te(F,C,null),g(C,P),g(C,Q),g(C,O),g(C,K),g(K,X),g(e,J),g(e,te),g(te,j),g(j,x),g(te,Z),g(te,V),g(V,ce),g(te,pe),g(te,re),g(te,ye),g(te,Ne),g(te,Y),g(te,Ce),g(te,We),g(te,se),g(te,Me);for(let be=0;be<me.length;be+=1)me[be].m(te,null);he=!0,M||(ae=[_e(Q,"change",n[38]),_e(K,"click",n[39])],M=!0)},p(le,ie){const be={};if(ie[1]&1073741824&&(be.$$scope={dirty:ie,ctx:le}),p.$set(be),ie[0]&64162){de=Object.keys(fe);let ge;for(ge=0;ge<de.length;ge+=1){const Be=F3(le,de,ge);ee[ge]?(ee[ge].p(Be,ie),B(ee[ge],1)):(ee[ge]=K3(Be),ee[ge].c(),B(ee[ge],1),ee[ge].m(i,null))}for(He(),ge=de.length;ge<ee.length;ge+=1)$(ge);qe()}const we={};ie[0]&16&&(we.equippedClass=le[4]),ie[0]&2&&(we.weaponXP=le[1]),ie[0]&1024&&(we.onWeaponXpChange=le[10]),A.$set(we);const Ae={};if(ie[0]&256|ie[1]&1073741824&&(Ae.$$scope={dirty:ie,ctx:le}),F.$set(Ae),(!he||ie[0]&128&&Q.value!==le[7])&&(Q.value=le[7]),ie[0]&34893){ne=le[0];let ge;for(ge=0;ge<ne.length;ge+=1){const Be=V3(le,ne,ge);me[ge]?me[ge].p(Be,ie):(me[ge]=X3(Be),me[ge].c(),me[ge].m(te,null))}for(;ge<me.length;ge+=1)me[ge].d(1);me.length=ne.length}},i(le){if(!he){B(p.$$.fragment,le);for(let ie=0;ie<de.length;ie+=1)B(ee[ie]);B(A.$$.fragment,le),B(F.$$.fragment,le),he=!0}},o(le){G(p.$$.fragment,le),ee=ee.filter(Boolean);for(let ie=0;ie<ee.length;ie+=1)G(ee[ie]);G(A.$$.fragment,le),G(F.$$.fragment,le),he=!1},d(le){le&&b(e),Ie(p),Ft(ee,le),Ie(A),Ie(F),Ft(me,le),M=!1,an(ae)}}}const Q3=4;function aoe(n,e,t){let i,s,r,o,l,a;const{open:c}=Bn(hs.MODAL);let{unlockedClasses:u}=e,{weaponXP:f}=e,{classXP:h}=e,{playerSkillProficiency:d}=e,{playerSkillBonus:m}=e,{onUpdateClassXP:p}=e,{onUpdateWeaponXP:_}=e,{customCombatArts:v}=e,{customCombatSkills:y}=e,{customWeapons:w}=e,{playerStats:A}=e,{onUpdatePlayerStats:E}=e,{onUpdateCustomCombatArts:C}=e,{onUpdateCustomCombatSkills:R}=e,{onUpdateCustomWeapons:D}=e,{equippedClass:N}=e,{playerName:L}=e,F=!0,P=new Audio("success-sound.webm"),Q=new Audio("failure.webm"),O=new Audio("bell.webm"),K=new Audio("item-received.webm"),X=new Audio("success-sound.webm");const J=()=>{Q.pause(),O.pause(),K.pause(),X.pause()};let te=Q3,j=!1,x=Object.keys(ro).reduce((se,Me)=>(se[Me]=ro[Me][0],se),{}),Z={i:-1,weaponSide:!0};const V=(se,Me)=>()=>{t(11,Z={i:se,weaponSide:Me})},ce=(se,Me,he,M,ae)=>o(ae,{curLevel:se,curXP:Me,maxXP:he,type:M}),pe=(se,Me,he)=>{t(5,F=!F),l(he,{type:se,curLevel:Me})},re=(se,Me)=>{t(9,x={...x,[se]:Me.currentTarget.value})},ye=(se,Me,he,M)=>a({curLevel:se,curXP:Me,maxXP:he,type:M}),Ne=(se,Me)=>{var he;return Me===((he=f[se])==null?void 0:he.level)},Y=se=>t(7,te=parseInt(se.currentTarget.value)),Ce=()=>{t(7,te=Q3),t(8,j=!1)},We=(se,Me,he,M)=>{let ae=parseInt(M.currentTarget.value),de=se+ae;de>=Me&&(de=Me,t(6,P.currentTime=0,P),P.play()),p(he,de,de===Me),M.currentTarget.value=""};return n.$$set=se=>{"unlockedClasses"in se&&t(0,u=se.unlockedClasses),"weaponXP"in se&&t(1,f=se.weaponXP),"classXP"in se&&t(2,h=se.classXP),"playerSkillProficiency"in se&&t(16,d=se.playerSkillProficiency),"playerSkillBonus"in se&&t(17,m=se.playerSkillBonus),"onUpdateClassXP"in se&&t(3,p=se.onUpdateClassXP),"onUpdateWeaponXP"in se&&t(18,_=se.onUpdateWeaponXP),"customCombatArts"in se&&t(19,v=se.customCombatArts),"customCombatSkills"in se&&t(20,y=se.customCombatSkills),"customWeapons"in se&&t(21,w=se.customWeapons),"playerStats"in se&&t(22,A=se.playerStats),"onUpdatePlayerStats"in se&&t(23,E=se.onUpdatePlayerStats),"onUpdateCustomCombatArts"in se&&t(24,C=se.onUpdateCustomCombatArts),"onUpdateCustomCombatSkills"in se&&t(25,R=se.onUpdateCustomCombatSkills),"onUpdateCustomWeapons"in se&&t(26,D=se.onUpdateCustomWeapons),"equippedClass"in se&&t(4,N=se.equippedClass),"playerName"in se&&t(27,L=se.playerName)},n.$$.update=()=>{n.$$.dirty[0]&133693512&&t(32,s=(se,Me,he=()=>{},M=()=>{})=>{var de,ee;J(),t(6,P.currentTime=0,P),P.play();const ae=(ee=(de=Ko[se][Me])==null?void 0:de.unlocks)==null?void 0:ee.pickOne;ae?(c(Cu,{SPECIAL_callOnClose:()=>{M()},pickOne:ae,onSubmit:he,reason:`Unlocked ${so[se]} level ${yh[Me]}`,customCombatArts:v,customCombatSkills:y,customWeapons:w,playerStats:A,onUpdatePlayerStats:E,onUpdateClassXP:p,onUpdateCustomCombatArts:C,onUpdateCustomCombatSkills:R,onUpdateCustomWeapons:D,descriptionElement:dg,descriptionElementProps:{type:se,level:Me,disablePickOne:!0}}),c(Cu,{SPECIAL_callOnClose:()=>{M()},pickOne:ae,onSubmit:he,reason:`Unlocked ${so[se]} level ${yh[Me]}`,customCombatArts:v,customCombatSkills:y,customWeapons:w,playerStats:A,onUpdatePlayerStats:E,onUpdateClassXP:p,onUpdateCustomCombatArts:C,onUpdateCustomCombatSkills:R,onUpdateCustomWeapons:D,descriptionElement:dg,descriptionElementProps:{type:se,level:Me,disablePickOne:!0}})):c(qre,{header:`Unlocked ${so[se]} level ${yh[Me]}`,childElement:dg,childElementProps:{type:se,level:Me},SPECIAL_callOnClose:()=>{he(),M()}})}),n.$$.dirty[0]&262240|n.$$.dirty[1]&2&&t(10,r=(se,{curLevel:Me,curXP:he,maxXP:M,type:ae,onSuccess:de})=>new Promise(ee=>{let $=Me,ne=he+se;const me={current:!1},le=()=>{_(ae,ne,$),t(5,F=!F),de&&de(),ee(!0),me.current=!0},ie=()=>{me.current||(alert("Rolling back this Level Up b/c prompt was not completed"),ee(!1))};ne>=M?($=oo[oo.indexOf(Me)+1]||Me,ne=ne-M,console.log("should play",P),s(ae,$,le,ie)):le()})),n.$$.dirty[0]&1024&&t(14,o=(se,Me)=>{const he=se.currentTarget,M=parseInt(se.currentTarget.value);r(M,{...Me,onSuccess:()=>{he.value=""}})}),n.$$.dirty[0]&262176|n.$$.dirty[1]&2&&t(13,l=(se,{type:Me,curLevel:he})=>{const M=se.currentTarget.value,ae=()=>{_(Me,0,M)};!he||oo.indexOf(he)<oo.indexOf(M)?s(Me,M,ae):ae()}),n.$$.dirty[0]&2017658752|n.$$.dirty[1]&1&&t(12,a=async se=>{const{type:Me}=se,he=x[Me],M=he===rn.ANIMAL_HANDLING,ae=(d[rn.ANIMAL_HANDLING]*z4||0)+(m[rn.ANIMAL_HANDLING]||0),de=M?"Animal Handling":zs[he],ee=M?$s(A[Ye.WIS])+ae:$s(A[he]),$=(ie,be)=>{let we="",Ae=be+ee;return be===20?we="Perfect: 16 XP + 1 roll!":be===1||Ae<=1?we="Awful: 0 XP":Ae<=5?we="Poor: 6 XP":Ae<=15?we="Good: 9 XP":we=`Great: 12 XP ${j?"":"+ 1 roll (once per session)"}`,`<div><span style=${be===20?'"color: green"':be===1?'"color: red"':""}>${be}</span> ${As(ee,!0)}(${de}) = ${Ae}</div><div style='text-align:center'>${we}</div>`},{value:ne}=await io([Et.d20],{customResultBoxLabel:$}),me=ne+ee;Cv(i,{playerName:L,rollName:"XP Roll ("+so[Me]+")",rollBonus:ee,roll:me+"",rollTooltip:ne+As(ee)});let le=te-1;J(),ne===20?(t(30,X.currentTime=0,X),X.play(),r(16,se),le+=1):ne===1||me<=1?(t(28,Q.currentTime=0,Q),Q.play()):me<=5?(t(28,Q.currentTime=0,Q),Q.play(),r(6,se)):me<=15?(t(29,K.currentTime=0,K),K.play(),r(9,se)):(t(30,X.currentTime=0,X),X.play(),j||(le+=1),r(12,se),t(8,j=!0)),t(7,te=le)})},t(6,P.volume=.05,P),t(28,Q.volume=.05,Q),O.volume=.05,t(29,K.volume=.1,K),t(30,X.volume=.025,X),t(31,i=Bn(hs.DB)),[u,f,h,p,N,F,P,te,j,x,r,Z,a,l,o,V,d,m,_,v,y,w,A,E,C,R,D,L,Q,K,X,i,s,ce,pe,re,ye,Ne,Y,Ce,We]}class coe extends st{constructor(e){super(),rt(this,e,aoe,loe,kt,{unlockedClasses:0,weaponXP:1,classXP:2,playerSkillProficiency:16,playerSkillBonus:17,onUpdateClassXP:3,onUpdateWeaponXP:18,customCombatArts:19,customCombatSkills:20,customWeapons:21,playerStats:22,onUpdatePlayerStats:23,onUpdateCustomCombatArts:24,onUpdateCustomCombatSkills:25,onUpdateCustomWeapons:26,equippedClass:4,playerName:27},null,[-1,-1])}}const uoe=(n,e)=>foe(n.unlockedClasses,n.customWeapons,n.classXP,n.weaponXP,e),foe=Ub((n,e,t,i,s)=>{var p,_;const r=Array.from(Xg),o=new Set(Object.keys(e)),l=new Set(Object.keys(((_=(p=Yt[s])==null?void 0:p.whenEquipped)==null?void 0:_.weapons)||{})),a=new Set;n.forEach(v=>{var w,A,E,C,R;Object.keys(((A=(w=Yt[v])==null?void 0:w.unlocks)==null?void 0:A.weapons)||{}).forEach(D=>a.add(D));const y=(C=(E=Yt[v])==null?void 0:E.whenMastered)==null?void 0:C.weapons;y&&((R=t==null?void 0:t[v])!=null&&R.mastered)&&Object.keys(y).forEach(D=>a.add(D))}),o.delete("pickOne"),l.delete("pickOne"),a.delete("pickOne");const c=Object.keys(i).reduce((v,y)=>{const{level:w}=i[y]||{},A=Ko[y],E=w||je.E;if(!E)return v;let C=1/0;return oo.filter((D,N)=>(E===D&&(C=N),N<=C)).forEach(D=>{var L,F;const N=A[D];(L=N.removes)!=null&&L.weapons&&Object.keys(N.removes.weapons).forEach(P=>v.delete(P)),(F=N.unlocks)!=null&&F.weapons&&Object.keys(N.unlocks.weapons).forEach(P=>v.add(P))}),v},new Set),u=new Set([...r,...o,...l,...a,...c]),f=Object.keys(e).reduce((v,y)=>(v[y]={...tr[y],...v[y]},v),{...e}),h={...tr,...f},d=Object.keys(h).reduce((v,y)=>(v[y]=h[y].label,v),{}),m=Object.keys(h).reduce((v,y)=>(v[y]=h[y].type,v),{});return{customSet:o,equippedClassSet:l,classUnlockSet:a,fullSet:u,fullArray:Array.from(u),fullFeatures:h,weaponsToLabel:d,weaponsToType:m}}),hoe=(n,e,t,i)=>doe(n.unlockedClasses,n.customCombatSkills,n.classXP,n.weaponXP,e,t,i),doe=(n,e,t,i,s,r,o)=>{var d,m;const l=new Set(Object.keys(e)),a=new Set(Object.keys(((m=(d=Yt[s])==null?void 0:d.whenEquipped)==null?void 0:m.combatSkills)||{})),c=new Set;n.forEach(p=>{var v,y,w,A,E;Object.keys(((y=(v=Yt[p])==null?void 0:v.unlocks)==null?void 0:y.combatSkills)||{}).forEach(C=>c.add(C));const _=(A=(w=Yt[p])==null?void 0:w.whenMastered)==null?void 0:A.combatSkills;_&&((E=t==null?void 0:t[p])!=null&&E.mastered)&&Object.keys(_).forEach(C=>c.add(C))});const u=Object.keys(i).reduce((p,_)=>{const{level:v}=i[_]||{},y=Ko[_],w=v||je.E;if(!w)return p;let A=1/0;return oo.filter((C,R)=>(w===C&&(A=R),R<=A)).forEach(C=>{var D,N;const R=y[C];(D=R.removes)!=null&&D.combatSkills&&Object.keys(R.removes.combatSkills).forEach(L=>p.delete(L)),(N=R.unlocks)!=null&&N.combatSkills&&Object.keys(R.unlocks.combatSkills).forEach(L=>p.add(L))}),p},new Set),f=new Set([...l,...a,...c,...u]);r.forEach(p=>{f.has(p)||o(p)});const h=Object.keys(e).reduce((p,_)=>(p[_]={..._s[_],...p[_]},p),{...e});return{customSet:l,equippedClassSet:a,classUnlockSet:c,weaponXPLevelSkillSet:u,fullSet:f,fullArray:Array.from(f).sort(),fullFeatures:{..._s,...h}}},moe=(n,e,t)=>poe(n.unlockedClasses,n.customCombatArts,n.classXP,n.weaponXP,e,t),poe=(n,e,t,i,s,r)=>{var _,v;const o=[],l=new Set(Object.keys(e)),a=new Set(Object.keys(((v=(_=Yt[s])==null?void 0:_.whenEquipped)==null?void 0:v.combatArts)||{})),c=new Set;n.forEach(y=>{var A,E,C,R,D;Object.keys(((E=(A=Yt[y])==null?void 0:A.unlocks)==null?void 0:E.combatArts)||{}).forEach(N=>c.add(N));const w=(R=(C=Yt[y])==null?void 0:C.whenMastered)==null?void 0:R.combatArts;w&&((D=t==null?void 0:t[y])!=null&&D.mastered)&&Object.keys(w).forEach(N=>c.add(N))});const u=Object.keys(i).reduce((y,w)=>{const{level:A}=i[w]||{},E=Ko[w],C=A||je.E;if(!C)return y;let R=1/0;return oo.filter((N,L)=>(C===N&&(R=L),L<=R)).forEach(N=>{var F;const L=E[N];(F=L.unlocks)!=null&&F.combatArts&&Object.keys(L.unlocks.combatArts).forEach(P=>y.add(P))}),y},new Set),f=new Set([...o,...l,...a,...c,...u,...r.has(Ue.GRAPPLER)?[vt.REPOSITION,vt.SWAP,vt.PULL_BACK,vt.SHOVE]:[]]),h=Object.keys(e).reduce((y,w)=>(y[w]={...Vr[w],...y[w]},y),{...e}),d={...Vr,...h},m=Object.keys(vt),p=Array.from(f).sort((y,w)=>{const A=m.indexOf(y),E=m.indexOf(w);return A<=E?-1:1});return{customSet:l,equippedClassSet:a,classUnlockSet:c,fullSet:f,fullArray:p,fullFeatures:d}};function Y3(n){let e,t;return{c(){e=k("span"),t=q("EXAMPLE"),this.h()},l(i){e=T(i,"SPAN",{});var s=I(e);t=z(s,"EXAMPLE"),s.forEach(b),this.h()},h(){lt(e,"background-color",n[2]("themeColor"))},m(i,s){H(i,e,s),g(e,t)},p(i,s){s&4&&lt(e,"background-color",i[2]("themeColor"))},d(i){i&&b(e)}}}function J3(n){let e,t,i,s,r,o,l,a,c,u,f,h,d,m,p,_,v,y,w,A,E,C,R,D,N,L=n[2]("themeColor").length===7,F,P,Q,O,K,X,J,te,j,x=n[2]("gravity")+"",Z,V,ce,pe,re,ye,Ne,Y,Ce,We,se=n[2]("mass")+"",Me,he,M,ae,de,ee,$,ne,me,le,ie=n[2]("scale")+"",be,we,Ae,ge,Be,ve,Pe,Se,tt,Ke,Ee=n[2]("friction")+"",it,De,ze,Re,ut,Bt,gt,At,jt,nn,Zt=n[2]("throwForce")+"",ft,un,tn,An,vn,Ln,Cn,Wn,di,Ge,yt=n[2]("startingHeight")+"",zt,dn,mn,Qt=L&&Y3(n);return{c(){e=k("div"),t=k("div"),i=k("button"),s=q("Test Settings"),r=U(),o=k("button"),l=q("Save Changes"),a=U(),c=k("div"),u=k("button"),f=q("Reset to Current Settings"),h=U(),d=k("button"),m=q("Reset Form to Current Settings"),p=U(),_=k("button"),v=q("Reset Form to Default Settings"),y=U(),w=k("div"),A=k("span"),E=q("Die Color (must be full RGB hex (e.g. #FF0000 for red))"),C=U(),R=k("input"),N=U(),Qt&&Qt.c(),F=U(),P=k("div"),Q=k("span"),O=q("Gravity"),K=U(),X=k("input"),te=U(),j=k("span"),Z=q(x),V=U(),ce=k("div"),pe=k("span"),re=q("Mass"),ye=U(),Ne=k("input"),Ce=U(),We=k("span"),Me=q(se),he=U(),M=k("div"),ae=k("span"),de=q("Scale"),ee=U(),$=k("input"),me=U(),le=k("span"),be=q(ie),we=U(),Ae=k("div"),ge=k("span"),Be=q("Friction"),ve=U(),Pe=k("input"),tt=U(),Ke=k("span"),it=q(Ee),De=U(),ze=k("div"),Re=k("span"),ut=q("Throw Force"),Bt=U(),gt=k("input"),jt=U(),nn=k("span"),ft=q(Zt),un=U(),tn=k("div"),An=k("span"),vn=q("Starting Height"),Ln=U(),Cn=k("input"),di=U(),Ge=k("span"),zt=q(yt),this.h()},l(nt){e=T(nt,"DIV",{class:!0});var Dt=I(e);t=T(Dt,"DIV",{class:!0});var mi=I(t);i=T(mi,"BUTTON",{});var Pt=I(i);s=z(Pt,"Test Settings"),Pt.forEach(b),r=W(mi),o=T(mi,"BUTTON",{});var sn=I(o);l=z(sn,"Save Changes"),sn.forEach(b),mi.forEach(b),a=W(Dt),c=T(Dt,"DIV",{class:!0});var Ht=I(c);u=T(Ht,"BUTTON",{});var Wi=I(u);f=z(Wi,"Reset to Current Settings"),Wi.forEach(b),h=W(Ht),d=T(Ht,"BUTTON",{});var gs=I(d);m=z(gs,"Reset Form to Current Settings"),gs.forEach(b),p=W(Ht),_=T(Ht,"BUTTON",{});var Sn=I(_);v=z(Sn,"Reset Form to Default Settings"),Sn.forEach(b),Ht.forEach(b),Dt.forEach(b),y=W(nt),w=T(nt,"DIV",{class:!0});var pt=I(w);A=T(pt,"SPAN",{});var ue=I(A);E=z(ue,"Die Color (must be full RGB hex (e.g. #FF0000 for red))"),ue.forEach(b),C=W(pt),R=T(pt,"INPUT",{}),N=W(pt),Qt&&Qt.l(pt),pt.forEach(b),F=W(nt),P=T(nt,"DIV",{class:!0});var _t=I(P);Q=T(_t,"SPAN",{});var $t=I(Q);O=z($t,"Gravity"),$t.forEach(b),K=W(_t),X=T(_t,"INPUT",{type:!0,min:!0,max:!0,class:!0,id:!0}),te=W(_t),j=T(_t,"SPAN",{});var On=I(j);Z=z(On,x),On.forEach(b),_t.forEach(b),V=W(nt),ce=T(nt,"DIV",{class:!0});var pi=I(ce);pe=T(pi,"SPAN",{});var Ti=I(pe);re=z(Ti,"Mass"),Ti.forEach(b),ye=W(pi),Ne=T(pi,"INPUT",{type:!0,min:!0,max:!0,class:!0,id:!0}),Ce=W(pi),We=T(pi,"SPAN",{});var gi=I(We);Me=z(gi,se),gi.forEach(b),pi.forEach(b),he=W(nt),M=T(nt,"DIV",{class:!0});var vs=I(M);ae=T(vs,"SPAN",{});var lr=I(ae);de=z(lr,"Scale"),lr.forEach(b),ee=W(vs),$=T(vs,"INPUT",{type:!0,min:!0,max:!0,class:!0,id:!0}),me=W(vs),le=T(vs,"SPAN",{});var Os=I(le);be=z(Os,ie),Os.forEach(b),vs.forEach(b),we=W(nt),Ae=T(nt,"DIV",{class:!0});var zn=I(Ae);ge=T(zn,"SPAN",{});var Jr=I(ge);Be=z(Jr,"Friction"),Jr.forEach(b),ve=W(zn),Pe=T(zn,"INPUT",{type:!0,min:!0,max:!0,class:!0,id:!0}),tt=W(zn),Ke=T(zn,"SPAN",{});var bs=I(Ke);it=z(bs,Ee),bs.forEach(b),zn.forEach(b),De=W(nt),ze=T(nt,"DIV",{class:!0});var Ii=I(ze);Re=T(Ii,"SPAN",{});var ar=I(Re);ut=z(ar,"Throw Force"),ar.forEach(b),Bt=W(Ii),gt=T(Ii,"INPUT",{type:!0,min:!0,max:!0,class:!0,id:!0}),jt=W(Ii),nn=T(Ii,"SPAN",{});var ol=I(nn);ft=z(ol,Zt),ol.forEach(b),Ii.forEach(b),un=W(nt),tn=T(nt,"DIV",{class:!0});var cr=I(tn);An=T(cr,"SPAN",{});var Ar=I(An);vn=z(Ar,"Starting Height"),Ar.forEach(b),Ln=W(cr),Cn=T(cr,"INPUT",{type:!0,min:!0,max:!0,class:!0,id:!0}),di=W(cr),Ge=T(cr,"SPAN",{});var ll=I(Ge);zt=z(ll,yt),ll.forEach(b),cr.forEach(b),this.h()},h(){S(t,"class",""),S(c,"class",""),S(e,"class","button-container svelte-nnvf4p"),R.value=D=n[2]("themeColor","#FF0000"),S(w,"class","field"),S(X,"type","range"),S(X,"min","1"),S(X,"max","10"),S(X,"class","slider"),X.value=J=n[2]("gravity"),S(X,"id","myRange"),S(P,"class","field"),S(Ne,"type","range"),S(Ne,"min","1"),S(Ne,"max","20"),S(Ne,"class","slider"),Ne.value=Y=n[2]("mass"),S(Ne,"id","myRange"),S(ce,"class","field"),S($,"type","range"),S($,"min","1"),S($,"max","10"),S($,"class","slider"),$.value=ne=n[2]("scale"),S($,"id","myRange"),S(M,"class","field"),S(Pe,"type","range"),S(Pe,"min","1"),S(Pe,"max","10"),S(Pe,"class","slider"),Pe.value=Se=n[2]("friction")*10,S(Pe,"id","myRange"),S(Ae,"class","field"),S(gt,"type","range"),S(gt,"min","0"),S(gt,"max","15"),S(gt,"class","slider"),gt.value=At=n[2]("throwForce"),S(gt,"id","myRange"),S(ze,"class","field"),S(Cn,"type","range"),S(Cn,"min","1"),S(Cn,"max","15"),S(Cn,"class","slider"),Cn.value=Wn=n[2]("startingHeight"),S(Cn,"id","myRange"),S(tn,"class","field")},m(nt,Dt){H(nt,e,Dt),g(e,t),g(t,i),g(i,s),g(t,r),g(t,o),g(o,l),g(e,a),g(e,c),g(c,u),g(u,f),g(c,h),g(c,d),g(d,m),g(c,p),g(c,_),g(_,v),H(nt,y,Dt),H(nt,w,Dt),g(w,A),g(A,E),g(w,C),g(w,R),g(w,N),Qt&&Qt.m(w,null),H(nt,F,Dt),H(nt,P,Dt),g(P,Q),g(Q,O),g(P,K),g(P,X),g(P,te),g(P,j),g(j,Z),H(nt,V,Dt),H(nt,ce,Dt),g(ce,pe),g(pe,re),g(ce,ye),g(ce,Ne),g(ce,Ce),g(ce,We),g(We,Me),H(nt,he,Dt),H(nt,M,Dt),g(M,ae),g(ae,de),g(M,ee),g(M,$),g(M,me),g(M,le),g(le,be),H(nt,we,Dt),H(nt,Ae,Dt),g(Ae,ge),g(ge,Be),g(Ae,ve),g(Ae,Pe),g(Ae,tt),g(Ae,Ke),g(Ke,it),H(nt,De,Dt),H(nt,ze,Dt),g(ze,Re),g(Re,ut),g(ze,Bt),g(ze,gt),g(ze,jt),g(ze,nn),g(nn,ft),H(nt,un,Dt),H(nt,tn,Dt),g(tn,An),g(An,vn),g(tn,Ln),g(tn,Cn),g(tn,di),g(tn,Ge),g(Ge,zt),dn||(mn=[_e(i,"click",n[6]),_e(o,"click",n[7]),_e(u,"click",n[8]),_e(d,"click",n[9]),_e(_,"click",n[10]),_e(R,"input",n[11]),_e(X,"input",n[12]),_e(Ne,"input",n[13]),_e($,"input",n[14]),_e(Pe,"input",n[15]),_e(gt,"input",n[16]),_e(Cn,"input",n[17])],dn=!0)},p(nt,Dt){Dt&4&&D!==(D=nt[2]("themeColor","#FF0000"))&&R.value!==D&&(R.value=D),Dt&4&&(L=nt[2]("themeColor").length===7),L?Qt?Qt.p(nt,Dt):(Qt=Y3(nt),Qt.c(),Qt.m(w,null)):Qt&&(Qt.d(1),Qt=null),Dt&4&&J!==(J=nt[2]("gravity"))&&(X.value=J),Dt&4&&x!==(x=nt[2]("gravity")+"")&&Le(Z,x),Dt&4&&Y!==(Y=nt[2]("mass"))&&(Ne.value=Y),Dt&4&&se!==(se=nt[2]("mass")+"")&&Le(Me,se),Dt&4&&ne!==(ne=nt[2]("scale"))&&($.value=ne),Dt&4&&ie!==(ie=nt[2]("scale")+"")&&Le(be,ie),Dt&4&&Se!==(Se=nt[2]("friction")*10)&&(Pe.value=Se),Dt&4&&Ee!==(Ee=nt[2]("friction")+"")&&Le(it,Ee),Dt&4&&At!==(At=nt[2]("throwForce"))&&(gt.value=At),Dt&4&&Zt!==(Zt=nt[2]("throwForce")+"")&&Le(ft,Zt),Dt&4&&Wn!==(Wn=nt[2]("startingHeight"))&&(Cn.value=Wn),Dt&4&&yt!==(yt=nt[2]("startingHeight")+"")&&Le(zt,yt)},d(nt){nt&&b(e),nt&&b(y),nt&&b(w),Qt&&Qt.d(),nt&&b(F),nt&&b(P),nt&&b(V),nt&&b(ce),nt&&b(he),nt&&b(M),nt&&b(we),nt&&b(Ae),nt&&b(De),nt&&b(ze),nt&&b(un),nt&&b(tn),dn=!1,an(mn)}}}function goe(n){let e,t,i,s,r=n[1],o=J3(n);return{c(){e=k("div"),t=k("h1"),i=q("Update how your dice rolls look"),s=U(),o.c(),this.h()},l(l){e=T(l,"DIV",{class:!0});var a=I(e);t=T(a,"H1",{});var c=I(t);i=z(c,"Update how your dice rolls look"),c.forEach(b),s=W(a),o.l(a),a.forEach(b),this.h()},h(){S(e,"class","container")},m(l,a){H(l,e,a),g(e,t),g(t,i),g(e,s),o.m(e,null)},p(l,[a]){a&2&&kt(r,r=l[1])?(o.d(1),o=J3(l),o.c(),o.m(e,null)):o.p(l,a)},i:Xe,o:Xe,d(l){l&&b(e),o.d(l)}}}function voe(n,e,t){let i,s,r=null,o={},l={},a=0;Mi(()=>{O0(()=>import("../../chunks/dice-box.es-150bdd15.js"),["../../chunks/dice-box.es-150bdd15.js","../../chunks/preload-helper-41c905a7.js"],import.meta.url).then(C=>{t(4,r=C.default)}),c()});const c=()=>{try{t(5,l=JSON.parse(localStorage.getItem("diceBoxOptions")||"{}"))}catch(C){console.log(C)}return l},u=()=>{i().then(()=>{io([Et.d20])})},f=()=>{i(!0)},h=()=>{i(!1,!0).then(()=>{io([Et.d20])})},d=()=>{t(0,o={}),t(1,a+=1)},m=()=>{t(0,o={...jc}),t(1,a+=1)},p=C=>{t(0,o.themeColor=C.currentTarget.value,o)},_=C=>t(0,o.gravity=parseInt(C.currentTarget.value),o),v=C=>t(0,o.mass=parseInt(C.currentTarget.value),o),y=C=>t(0,o.scale=parseInt(C.currentTarget.value),o),w=C=>t(0,o.friction=parseInt(C.currentTarget.value)/10,o),A=C=>t(0,o.throwForce=parseInt(C.currentTarget.value),o),E=C=>t(0,o.startingHeight=parseInt(C.currentTarget.value),o);return n.$$.update=()=>{n.$$.dirty&17&&t(3,i=(C=!1,R=!1)=>{const D=R?{}:o;let N;try{N=c()}catch(F){console.log(F)}if(C)try{localStorage.setItem("diceBoxOptions",JSON.stringify({...N,...D})),t(5,l={...N,...D})}catch(F){console.log(F)}const L=new r("#dice-box",{...jc,...N,...D});return window.diceBoxContainer.removeChild(document.getElementById("dice-canvas")),L.init().then(()=>{window.diceBox=L})}),n.$$.dirty&33&&t(2,s=(C,R=1)=>{const D=o[C]!==void 0?o[C]:null;if(D!==null)return D;const N=l[C]!==void 0?l[C]:null;if(N!==null)return N;const L=jc[C]!==void 0?jc[C]:null;return L!==null?L:R})},[o,a,s,i,r,l,u,f,h,d,m,p,_,v,y,w,A,E]}class boe extends st{constructor(e){super(),rt(this,e,voe,goe,kt,{})}}var T0={},_oe={get exports(){return T0},set exports(n){T0=n}};(function(n,e){(function(t,i){i()})($r,function(){function t(c,u){return typeof u>"u"?u={autoBom:!1}:typeof u!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),u={autoBom:!u}),u.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c}function i(c,u,f){var h=new XMLHttpRequest;h.open("GET",c),h.responseType="blob",h.onload=function(){a(h.response,u,f)},h.onerror=function(){console.error("could not download file")},h.send()}function s(c){var u=new XMLHttpRequest;u.open("HEAD",c,!1);try{u.send()}catch{}return 200<=u.status&&299>=u.status}function r(c){try{c.dispatchEvent(new MouseEvent("click"))}catch{var u=document.createEvent("MouseEvents");u.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),c.dispatchEvent(u)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof $r=="object"&&$r.global===$r?$r:void 0,l=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),a=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(c,u,f){var h=o.URL||o.webkitURL,d=document.createElement("a");u=u||c.name||"download",d.download=u,d.rel="noopener",typeof c=="string"?(d.href=c,d.origin===location.origin?r(d):s(d.href)?i(c,u,f):r(d,d.target="_blank")):(d.href=h.createObjectURL(c),setTimeout(function(){h.revokeObjectURL(d.href)},4e4),setTimeout(function(){r(d)},0))}:"msSaveOrOpenBlob"in navigator?function(c,u,f){if(u=u||c.name||"download",typeof c!="string")navigator.msSaveOrOpenBlob(t(c,f),u);else if(s(c))i(c,u,f);else{var h=document.createElement("a");h.href=c,h.target="_blank",setTimeout(function(){r(h)})}}:function(c,u,f,h){if(h=h||open("","_blank"),h&&(h.document.title=h.document.body.innerText="downloading..."),typeof c=="string")return i(c,u,f);var d=c.type==="application/octet-stream",m=/constructor/i.test(o.HTMLElement)||o.safari,p=/CriOS\/[\d]+/.test(navigator.userAgent);if((p||d&&m||l)&&typeof FileReader<"u"){var _=new FileReader;_.onloadend=function(){var w=_.result;w=p?w:w.replace(/^data:[^;]*;/,"data:attachment/file;"),h?h.location.href=w:location=w,h=null},_.readAsDataURL(c)}else{var v=o.URL||o.webkitURL,y=v.createObjectURL(c);h?h.location=y:location.href=y,h=null,setTimeout(function(){v.revokeObjectURL(y)},4e4)}});o.saveAs=a.saveAs=a,n.exports=a})})(_oe);const yoe=T0;var I0={},Soe={get exports(){return I0},set exports(n){I0=n}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(n,e){(function(t){n.exports=t()})(function(){return function t(i,s,r){function o(c,u){if(!s[c]){if(!i[c]){var f=typeof mh=="function"&&mh;if(!u&&f)return f(c,!0);if(l)return l(c,!0);var h=new Error("Cannot find module '"+c+"'");throw h.code="MODULE_NOT_FOUND",h}var d=s[c]={exports:{}};i[c][0].call(d.exports,function(m){var p=i[c][1][m];return o(p||m)},d,d.exports,t,i,s,r)}return s[c].exports}for(var l=typeof mh=="function"&&mh,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(t,i,s){var r=t("./utils"),o=t("./support"),l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";s.encode=function(a){for(var c,u,f,h,d,m,p,_=[],v=0,y=a.length,w=y,A=r.getTypeOf(a)!=="string";v<a.length;)w=y-v,f=A?(c=a[v++],u=v<y?a[v++]:0,v<y?a[v++]:0):(c=a.charCodeAt(v++),u=v<y?a.charCodeAt(v++):0,v<y?a.charCodeAt(v++):0),h=c>>2,d=(3&c)<<4|u>>4,m=1<w?(15&u)<<2|f>>6:64,p=2<w?63&f:64,_.push(l.charAt(h)+l.charAt(d)+l.charAt(m)+l.charAt(p));return _.join("")},s.decode=function(a){var c,u,f,h,d,m,p=0,_=0,v="data:";if(a.substr(0,v.length)===v)throw new Error("Invalid base64 input, it looks like a data url.");var y,w=3*(a=a.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(a.charAt(a.length-1)===l.charAt(64)&&w--,a.charAt(a.length-2)===l.charAt(64)&&w--,w%1!=0)throw new Error("Invalid base64 input, bad content length.");for(y=o.uint8array?new Uint8Array(0|w):new Array(0|w);p<a.length;)c=l.indexOf(a.charAt(p++))<<2|(h=l.indexOf(a.charAt(p++)))>>4,u=(15&h)<<4|(d=l.indexOf(a.charAt(p++)))>>2,f=(3&d)<<6|(m=l.indexOf(a.charAt(p++))),y[_++]=c,d!==64&&(y[_++]=u),m!==64&&(y[_++]=f);return y}},{"./support":30,"./utils":32}],2:[function(t,i,s){var r=t("./external"),o=t("./stream/DataWorker"),l=t("./stream/Crc32Probe"),a=t("./stream/DataLengthProbe");function c(u,f,h,d,m){this.compressedSize=u,this.uncompressedSize=f,this.crc32=h,this.compression=d,this.compressedContent=m}c.prototype={getContentWorker:function(){var u=new o(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new a("data_length")),f=this;return u.on("end",function(){if(this.streamInfo.data_length!==f.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),u},getCompressedWorker:function(){return new o(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(u,f,h){return u.pipe(new l).pipe(new a("uncompressedSize")).pipe(f.compressWorker(h)).pipe(new a("compressedSize")).withStreamInfo("compression",f)},i.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,i,s){var r=t("./stream/GenericWorker");s.STORE={magic:"\0\0",compressWorker:function(){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},s.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,i,s){var r=t("./utils"),o=function(){for(var l,a=[],c=0;c<256;c++){l=c;for(var u=0;u<8;u++)l=1&l?3988292384^l>>>1:l>>>1;a[c]=l}return a}();i.exports=function(l,a){return l!==void 0&&l.length?r.getTypeOf(l)!=="string"?function(c,u,f,h){var d=o,m=h+f;c^=-1;for(var p=h;p<m;p++)c=c>>>8^d[255&(c^u[p])];return-1^c}(0|a,l,l.length,0):function(c,u,f,h){var d=o,m=h+f;c^=-1;for(var p=h;p<m;p++)c=c>>>8^d[255&(c^u.charCodeAt(p))];return-1^c}(0|a,l,l.length,0):0}},{"./utils":32}],5:[function(t,i,s){s.base64=!1,s.binary=!1,s.dir=!1,s.createFolders=!0,s.date=null,s.compression=null,s.compressionOptions=null,s.comment=null,s.unixPermissions=null,s.dosPermissions=null},{}],6:[function(t,i,s){var r=null;r=typeof Promise<"u"?Promise:t("lie"),i.exports={Promise:r}},{lie:37}],7:[function(t,i,s){var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=t("pako"),l=t("./utils"),a=t("./stream/GenericWorker"),c=r?"uint8array":"array";function u(f,h){a.call(this,"FlateWorker/"+f),this._pako=null,this._pakoAction=f,this._pakoOptions=h,this.meta={}}s.magic="\b\0",l.inherits(u,a),u.prototype.processChunk=function(f){this.meta=f.meta,this._pako===null&&this._createPako(),this._pako.push(l.transformTo(c,f.data),!1)},u.prototype.flush=function(){a.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},u.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this._pako=null},u.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var f=this;this._pako.onData=function(h){f.push({data:h,meta:f.meta})}},s.compressWorker=function(f){return new u("Deflate",f)},s.uncompressWorker=function(){return new u("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,i,s){function r(d,m){var p,_="";for(p=0;p<m;p++)_+=String.fromCharCode(255&d),d>>>=8;return _}function o(d,m,p,_,v,y){var w,A,E=d.file,C=d.compression,R=y!==c.utf8encode,D=l.transformTo("string",y(E.name)),N=l.transformTo("string",c.utf8encode(E.name)),L=E.comment,F=l.transformTo("string",y(L)),P=l.transformTo("string",c.utf8encode(L)),Q=N.length!==E.name.length,O=P.length!==L.length,K="",X="",J="",te=E.dir,j=E.date,x={crc32:0,compressedSize:0,uncompressedSize:0};m&&!p||(x.crc32=d.crc32,x.compressedSize=d.compressedSize,x.uncompressedSize=d.uncompressedSize);var Z=0;m&&(Z|=8),R||!Q&&!O||(Z|=2048);var V=0,ce=0;te&&(V|=16),v==="UNIX"?(ce=798,V|=function(re,ye){var Ne=re;return re||(Ne=ye?16893:33204),(65535&Ne)<<16}(E.unixPermissions,te)):(ce=20,V|=function(re){return 63&(re||0)}(E.dosPermissions)),w=j.getUTCHours(),w<<=6,w|=j.getUTCMinutes(),w<<=5,w|=j.getUTCSeconds()/2,A=j.getUTCFullYear()-1980,A<<=4,A|=j.getUTCMonth()+1,A<<=5,A|=j.getUTCDate(),Q&&(X=r(1,1)+r(u(D),4)+N,K+="up"+r(X.length,2)+X),O&&(J=r(1,1)+r(u(F),4)+P,K+="uc"+r(J.length,2)+J);var pe="";return pe+=`
\0`,pe+=r(Z,2),pe+=C.magic,pe+=r(w,2),pe+=r(A,2),pe+=r(x.crc32,4),pe+=r(x.compressedSize,4),pe+=r(x.uncompressedSize,4),pe+=r(D.length,2),pe+=r(K.length,2),{fileRecord:f.LOCAL_FILE_HEADER+pe+D+K,dirRecord:f.CENTRAL_FILE_HEADER+r(ce,2)+pe+r(F.length,2)+"\0\0\0\0"+r(V,4)+r(_,4)+D+K+F}}var l=t("../utils"),a=t("../stream/GenericWorker"),c=t("../utf8"),u=t("../crc32"),f=t("../signature");function h(d,m,p,_){a.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=m,this.zipPlatform=p,this.encodeFileName=_,this.streamFiles=d,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}l.inherits(h,a),h.prototype.push=function(d){var m=d.meta.percent||0,p=this.entriesCount,_=this._sources.length;this.accumulate?this.contentBuffer.push(d):(this.bytesWritten+=d.data.length,a.prototype.push.call(this,{data:d.data,meta:{currentFile:this.currentFile,percent:p?(m+100*(p-_-1))/p:100}}))},h.prototype.openedSource=function(d){this.currentSourceOffset=this.bytesWritten,this.currentFile=d.file.name;var m=this.streamFiles&&!d.file.dir;if(m){var p=o(d,m,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:p.fileRecord,meta:{percent:0}})}else this.accumulate=!0},h.prototype.closedSource=function(d){this.accumulate=!1;var m=this.streamFiles&&!d.file.dir,p=o(d,m,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(p.dirRecord),m)this.push({data:function(_){return f.DATA_DESCRIPTOR+r(_.crc32,4)+r(_.compressedSize,4)+r(_.uncompressedSize,4)}(d),meta:{percent:100}});else for(this.push({data:p.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},h.prototype.flush=function(){for(var d=this.bytesWritten,m=0;m<this.dirRecords.length;m++)this.push({data:this.dirRecords[m],meta:{percent:100}});var p=this.bytesWritten-d,_=function(v,y,w,A,E){var C=l.transformTo("string",E(A));return f.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(v,2)+r(v,2)+r(y,4)+r(w,4)+r(C.length,2)+C}(this.dirRecords.length,p,d,this.zipComment,this.encodeFileName);this.push({data:_,meta:{percent:100}})},h.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},h.prototype.registerPrevious=function(d){this._sources.push(d);var m=this;return d.on("data",function(p){m.processChunk(p)}),d.on("end",function(){m.closedSource(m.previous.streamInfo),m._sources.length?m.prepareNextSource():m.end()}),d.on("error",function(p){m.error(p)}),this},h.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},h.prototype.error=function(d){var m=this._sources;if(!a.prototype.error.call(this,d))return!1;for(var p=0;p<m.length;p++)try{m[p].error(d)}catch{}return!0},h.prototype.lock=function(){a.prototype.lock.call(this);for(var d=this._sources,m=0;m<d.length;m++)d[m].lock()},i.exports=h},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,i,s){var r=t("../compressions"),o=t("./ZipFileWorker");s.generateWorker=function(l,a,c){var u=new o(a.streamFiles,c,a.platform,a.encodeFileName),f=0;try{l.forEach(function(h,d){f++;var m=function(y,w){var A=y||w,E=r[A];if(!E)throw new Error(A+" is not a valid compression method !");return E}(d.options.compression,a.compression),p=d.options.compressionOptions||a.compressionOptions||{},_=d.dir,v=d.date;d._compressWorker(m,p).withStreamInfo("file",{name:h,dir:_,date:v,comment:d.comment||"",unixPermissions:d.unixPermissions,dosPermissions:d.dosPermissions}).pipe(u)}),u.entriesCount=f}catch(h){u.error(h)}return u}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,i,s){function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new r;for(var l in this)typeof this[l]!="function"&&(o[l]=this[l]);return o}}(r.prototype=t("./object")).loadAsync=t("./load"),r.support=t("./support"),r.defaults=t("./defaults"),r.version="3.10.1",r.loadAsync=function(o,l){return new r().loadAsync(o,l)},r.external=t("./external"),i.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,i,s){var r=t("./utils"),o=t("./external"),l=t("./utf8"),a=t("./zipEntries"),c=t("./stream/Crc32Probe"),u=t("./nodejsUtils");function f(h){return new o.Promise(function(d,m){var p=h.decompressed.getContentWorker().pipe(new c);p.on("error",function(_){m(_)}).on("end",function(){p.streamInfo.crc32!==h.decompressed.crc32?m(new Error("Corrupted zip : CRC32 mismatch")):d()}).resume()})}i.exports=function(h,d){var m=this;return d=r.extend(d||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:l.utf8decode}),u.isNode&&u.isStream(h)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",h,!0,d.optimizedBinaryString,d.base64).then(function(p){var _=new a(d);return _.load(p),_}).then(function(p){var _=[o.Promise.resolve(p)],v=p.files;if(d.checkCRC32)for(var y=0;y<v.length;y++)_.push(f(v[y]));return o.Promise.all(_)}).then(function(p){for(var _=p.shift(),v=_.files,y=0;y<v.length;y++){var w=v[y],A=w.fileNameStr,E=r.resolve(w.fileNameStr);m.file(E,w.decompressed,{binary:!0,optimizedBinaryString:!0,date:w.date,dir:w.dir,comment:w.fileCommentStr.length?w.fileCommentStr:null,unixPermissions:w.unixPermissions,dosPermissions:w.dosPermissions,createFolders:d.createFolders}),w.dir||(m.file(E).unsafeOriginalName=A)}return _.zipComment.length&&(m.comment=_.zipComment),m})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,i,s){var r=t("../utils"),o=t("../stream/GenericWorker");function l(a,c){o.call(this,"Nodejs stream input adapter for "+a),this._upstreamEnded=!1,this._bindStream(c)}r.inherits(l,o),l.prototype._bindStream=function(a){var c=this;(this._stream=a).pause(),a.on("data",function(u){c.push({data:u,meta:{percent:0}})}).on("error",function(u){c.isPaused?this.generatedError=u:c.error(u)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},l.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},l.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},i.exports=l},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,i,s){var r=t("readable-stream").Readable;function o(l,a,c){r.call(this,a),this._helper=l;var u=this;l.on("data",function(f,h){u.push(f)||u._helper.pause(),c&&c(h)}).on("error",function(f){u.emit("error",f)}).on("end",function(){u.push(null)})}t("../utils").inherits(o,r),o.prototype._read=function(){this._helper.resume()},i.exports=o},{"../utils":32,"readable-stream":16}],14:[function(t,i,s){i.exports={isNode:typeof Buffer<"u",newBufferFrom:function(r,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(r,o);if(typeof r=="number")throw new Error('The "data" argument must not be a number');return new Buffer(r,o)},allocBuffer:function(r){if(Buffer.alloc)return Buffer.alloc(r);var o=new Buffer(r);return o.fill(0),o},isBuffer:function(r){return Buffer.isBuffer(r)},isStream:function(r){return r&&typeof r.on=="function"&&typeof r.pause=="function"&&typeof r.resume=="function"}}},{}],15:[function(t,i,s){function r(E,C,R){var D,N=l.getTypeOf(C),L=l.extend(R||{},u);L.date=L.date||new Date,L.compression!==null&&(L.compression=L.compression.toUpperCase()),typeof L.unixPermissions=="string"&&(L.unixPermissions=parseInt(L.unixPermissions,8)),L.unixPermissions&&16384&L.unixPermissions&&(L.dir=!0),L.dosPermissions&&16&L.dosPermissions&&(L.dir=!0),L.dir&&(E=v(E)),L.createFolders&&(D=_(E))&&y.call(this,D,!0);var F=N==="string"&&L.binary===!1&&L.base64===!1;R&&R.binary!==void 0||(L.binary=!F),(C instanceof f&&C.uncompressedSize===0||L.dir||!C||C.length===0)&&(L.base64=!1,L.binary=!0,C="",L.compression="STORE",N="string");var P=null;P=C instanceof f||C instanceof a?C:m.isNode&&m.isStream(C)?new p(E,C):l.prepareContent(E,C,L.binary,L.optimizedBinaryString,L.base64);var Q=new h(E,P,L);this.files[E]=Q}var o=t("./utf8"),l=t("./utils"),a=t("./stream/GenericWorker"),c=t("./stream/StreamHelper"),u=t("./defaults"),f=t("./compressedObject"),h=t("./zipObject"),d=t("./generate"),m=t("./nodejsUtils"),p=t("./nodejs/NodejsStreamInputAdapter"),_=function(E){E.slice(-1)==="/"&&(E=E.substring(0,E.length-1));var C=E.lastIndexOf("/");return 0<C?E.substring(0,C):""},v=function(E){return E.slice(-1)!=="/"&&(E+="/"),E},y=function(E,C){return C=C!==void 0?C:u.createFolders,E=v(E),this.files[E]||r.call(this,E,null,{dir:!0,createFolders:C}),this.files[E]};function w(E){return Object.prototype.toString.call(E)==="[object RegExp]"}var A={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(E){var C,R,D;for(C in this.files)D=this.files[C],(R=C.slice(this.root.length,C.length))&&C.slice(0,this.root.length)===this.root&&E(R,D)},filter:function(E){var C=[];return this.forEach(function(R,D){E(R,D)&&C.push(D)}),C},file:function(E,C,R){if(arguments.length!==1)return E=this.root+E,r.call(this,E,C,R),this;if(w(E)){var D=E;return this.filter(function(L,F){return!F.dir&&D.test(L)})}var N=this.files[this.root+E];return N&&!N.dir?N:null},folder:function(E){if(!E)return this;if(w(E))return this.filter(function(N,L){return L.dir&&E.test(N)});var C=this.root+E,R=y.call(this,C),D=this.clone();return D.root=R.name,D},remove:function(E){E=this.root+E;var C=this.files[E];if(C||(E.slice(-1)!=="/"&&(E+="/"),C=this.files[E]),C&&!C.dir)delete this.files[E];else for(var R=this.filter(function(N,L){return L.name.slice(0,E.length)===E}),D=0;D<R.length;D++)delete this.files[R[D].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(E){var C,R={};try{if((R=l.extend(E||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=R.type.toLowerCase(),R.compression=R.compression.toUpperCase(),R.type==="binarystring"&&(R.type="string"),!R.type)throw new Error("No output type specified.");l.checkSupport(R.type),R.platform!=="darwin"&&R.platform!=="freebsd"&&R.platform!=="linux"&&R.platform!=="sunos"||(R.platform="UNIX"),R.platform==="win32"&&(R.platform="DOS");var D=R.comment||this.comment||"";C=d.generateWorker(this,R,D)}catch(N){(C=new a("error")).error(N)}return new c(C,R.type||"string",R.mimeType)},generateAsync:function(E,C){return this.generateInternalStream(E).accumulate(C)},generateNodeStream:function(E,C){return(E=E||{}).type||(E.type="nodebuffer"),this.generateInternalStream(E).toNodejsStream(C)}};i.exports=A},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,i,s){i.exports=t("stream")},{stream:void 0}],17:[function(t,i,s){var r=t("./DataReader");function o(l){r.call(this,l);for(var a=0;a<this.data.length;a++)l[a]=255&l[a]}t("../utils").inherits(o,r),o.prototype.byteAt=function(l){return this.data[this.zero+l]},o.prototype.lastIndexOfSignature=function(l){for(var a=l.charCodeAt(0),c=l.charCodeAt(1),u=l.charCodeAt(2),f=l.charCodeAt(3),h=this.length-4;0<=h;--h)if(this.data[h]===a&&this.data[h+1]===c&&this.data[h+2]===u&&this.data[h+3]===f)return h-this.zero;return-1},o.prototype.readAndCheckSignature=function(l){var a=l.charCodeAt(0),c=l.charCodeAt(1),u=l.charCodeAt(2),f=l.charCodeAt(3),h=this.readData(4);return a===h[0]&&c===h[1]&&u===h[2]&&f===h[3]},o.prototype.readData=function(l){if(this.checkOffset(l),l===0)return[];var a=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,a},i.exports=o},{"../utils":32,"./DataReader":18}],18:[function(t,i,s){var r=t("../utils");function o(l){this.data=l,this.length=l.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(l){this.checkIndex(this.index+l)},checkIndex:function(l){if(this.length<this.zero+l||l<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+l+"). Corrupted zip ?")},setIndex:function(l){this.checkIndex(l),this.index=l},skip:function(l){this.setIndex(this.index+l)},byteAt:function(){},readInt:function(l){var a,c=0;for(this.checkOffset(l),a=this.index+l-1;a>=this.index;a--)c=(c<<8)+this.byteAt(a);return this.index+=l,c},readString:function(l){return r.transformTo("string",this.readData(l))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var l=this.readInt(4);return new Date(Date.UTC(1980+(l>>25&127),(l>>21&15)-1,l>>16&31,l>>11&31,l>>5&63,(31&l)<<1))}},i.exports=o},{"../utils":32}],19:[function(t,i,s){var r=t("./Uint8ArrayReader");function o(l){r.call(this,l)}t("../utils").inherits(o,r),o.prototype.readData=function(l){this.checkOffset(l);var a=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,a},i.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,i,s){var r=t("./DataReader");function o(l){r.call(this,l)}t("../utils").inherits(o,r),o.prototype.byteAt=function(l){return this.data.charCodeAt(this.zero+l)},o.prototype.lastIndexOfSignature=function(l){return this.data.lastIndexOf(l)-this.zero},o.prototype.readAndCheckSignature=function(l){return l===this.readData(4)},o.prototype.readData=function(l){this.checkOffset(l);var a=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,a},i.exports=o},{"../utils":32,"./DataReader":18}],21:[function(t,i,s){var r=t("./ArrayReader");function o(l){r.call(this,l)}t("../utils").inherits(o,r),o.prototype.readData=function(l){if(this.checkOffset(l),l===0)return new Uint8Array(0);var a=this.data.subarray(this.zero+this.index,this.zero+this.index+l);return this.index+=l,a},i.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(t,i,s){var r=t("../utils"),o=t("../support"),l=t("./ArrayReader"),a=t("./StringReader"),c=t("./NodeBufferReader"),u=t("./Uint8ArrayReader");i.exports=function(f){var h=r.getTypeOf(f);return r.checkSupport(h),h!=="string"||o.uint8array?h==="nodebuffer"?new c(f):o.uint8array?new u(r.transformTo("uint8array",f)):new l(r.transformTo("array",f)):new a(f)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,i,s){s.LOCAL_FILE_HEADER="PK",s.CENTRAL_FILE_HEADER="PK",s.CENTRAL_DIRECTORY_END="PK",s.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",s.ZIP64_CENTRAL_DIRECTORY_END="PK",s.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,i,s){var r=t("./GenericWorker"),o=t("../utils");function l(a){r.call(this,"ConvertWorker to "+a),this.destType=a}o.inherits(l,r),l.prototype.processChunk=function(a){this.push({data:o.transformTo(this.destType,a.data),meta:a.meta})},i.exports=l},{"../utils":32,"./GenericWorker":28}],25:[function(t,i,s){var r=t("./GenericWorker"),o=t("../crc32");function l(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(l,r),l.prototype.processChunk=function(a){this.streamInfo.crc32=o(a.data,this.streamInfo.crc32||0),this.push(a)},i.exports=l},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,i,s){var r=t("../utils"),o=t("./GenericWorker");function l(a){o.call(this,"DataLengthProbe for "+a),this.propName=a,this.withStreamInfo(a,0)}r.inherits(l,o),l.prototype.processChunk=function(a){if(a){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+a.data.length}o.prototype.processChunk.call(this,a)},i.exports=l},{"../utils":32,"./GenericWorker":28}],27:[function(t,i,s){var r=t("../utils"),o=t("./GenericWorker");function l(a){o.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,a.then(function(u){c.dataIsReady=!0,c.data=u,c.max=u&&u.length||0,c.type=r.getTypeOf(u),c.isPaused||c._tickAndRepeat()},function(u){c.error(u)})}r.inherits(l,o),l.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},l.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},l.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},l.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var a=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":a=this.data.substring(this.index,c);break;case"uint8array":a=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":a=this.data.slice(this.index,c)}return this.index=c,this.push({data:a,meta:{percent:this.max?this.index/this.max*100:0}})},i.exports=l},{"../utils":32,"./GenericWorker":28}],28:[function(t,i,s){function r(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,l){return this._listeners[o].push(l),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,l){if(this._listeners[o])for(var a=0;a<this._listeners[o].length;a++)this._listeners[o][a].call(this,l)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var l=this;return o.on("data",function(a){l.processChunk(a)}),o.on("end",function(){l.end()}),o.on("error",function(a){l.error(a)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,l){return this.extraStreamInfo[o]=l,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},i.exports=r},{}],29:[function(t,i,s){var r=t("../utils"),o=t("./ConvertWorker"),l=t("./GenericWorker"),a=t("../base64"),c=t("../support"),u=t("../external"),f=null;if(c.nodestream)try{f=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function h(m,p){return new u.Promise(function(_,v){var y=[],w=m._internalType,A=m._outputType,E=m._mimeType;m.on("data",function(C,R){y.push(C),p&&p(R)}).on("error",function(C){y=[],v(C)}).on("end",function(){try{var C=function(R,D,N){switch(R){case"blob":return r.newBlob(r.transformTo("arraybuffer",D),N);case"base64":return a.encode(D);default:return r.transformTo(R,D)}}(A,function(R,D){var N,L=0,F=null,P=0;for(N=0;N<D.length;N++)P+=D[N].length;switch(R){case"string":return D.join("");case"array":return Array.prototype.concat.apply([],D);case"uint8array":for(F=new Uint8Array(P),N=0;N<D.length;N++)F.set(D[N],L),L+=D[N].length;return F;case"nodebuffer":return Buffer.concat(D);default:throw new Error("concat : unsupported type '"+R+"'")}}(w,y),E);_(C)}catch(R){v(R)}y=[]}).resume()})}function d(m,p,_){var v=p;switch(p){case"blob":case"arraybuffer":v="uint8array";break;case"base64":v="string"}try{this._internalType=v,this._outputType=p,this._mimeType=_,r.checkSupport(v),this._worker=m.pipe(new o(v)),m.lock()}catch(y){this._worker=new l("error"),this._worker.error(y)}}d.prototype={accumulate:function(m){return h(this,m)},on:function(m,p){var _=this;return m==="data"?this._worker.on(m,function(v){p.call(_,v.data,v.meta)}):this._worker.on(m,function(){r.delay(p,arguments,_)}),this},resume:function(){return r.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(m){if(r.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new f(this,{objectMode:this._outputType!=="nodebuffer"},m)}},i.exports=d},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,i,s){if(s.base64=!0,s.array=!0,s.string=!0,s.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",s.nodebuffer=typeof Buffer<"u",s.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")s.blob=!1;else{var r=new ArrayBuffer(0);try{s.blob=new Blob([r],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(r),s.blob=o.getBlob("application/zip").size===0}catch{s.blob=!1}}}try{s.nodestream=!!t("readable-stream").Readable}catch{s.nodestream=!1}},{"readable-stream":16}],31:[function(t,i,s){for(var r=t("./utils"),o=t("./support"),l=t("./nodejsUtils"),a=t("./stream/GenericWorker"),c=new Array(256),u=0;u<256;u++)c[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;c[254]=c[254]=1;function f(){a.call(this,"utf-8 decode"),this.leftOver=null}function h(){a.call(this,"utf-8 encode")}s.utf8encode=function(d){return o.nodebuffer?l.newBufferFrom(d,"utf-8"):function(m){var p,_,v,y,w,A=m.length,E=0;for(y=0;y<A;y++)(64512&(_=m.charCodeAt(y)))==55296&&y+1<A&&(64512&(v=m.charCodeAt(y+1)))==56320&&(_=65536+(_-55296<<10)+(v-56320),y++),E+=_<128?1:_<2048?2:_<65536?3:4;for(p=o.uint8array?new Uint8Array(E):new Array(E),y=w=0;w<E;y++)(64512&(_=m.charCodeAt(y)))==55296&&y+1<A&&(64512&(v=m.charCodeAt(y+1)))==56320&&(_=65536+(_-55296<<10)+(v-56320),y++),_<128?p[w++]=_:(_<2048?p[w++]=192|_>>>6:(_<65536?p[w++]=224|_>>>12:(p[w++]=240|_>>>18,p[w++]=128|_>>>12&63),p[w++]=128|_>>>6&63),p[w++]=128|63&_);return p}(d)},s.utf8decode=function(d){return o.nodebuffer?r.transformTo("nodebuffer",d).toString("utf-8"):function(m){var p,_,v,y,w=m.length,A=new Array(2*w);for(p=_=0;p<w;)if((v=m[p++])<128)A[_++]=v;else if(4<(y=c[v]))A[_++]=65533,p+=y-1;else{for(v&=y===2?31:y===3?15:7;1<y&&p<w;)v=v<<6|63&m[p++],y--;1<y?A[_++]=65533:v<65536?A[_++]=v:(v-=65536,A[_++]=55296|v>>10&1023,A[_++]=56320|1023&v)}return A.length!==_&&(A.subarray?A=A.subarray(0,_):A.length=_),r.applyFromCharCode(A)}(d=r.transformTo(o.uint8array?"uint8array":"array",d))},r.inherits(f,a),f.prototype.processChunk=function(d){var m=r.transformTo(o.uint8array?"uint8array":"array",d.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var p=m;(m=new Uint8Array(p.length+this.leftOver.length)).set(this.leftOver,0),m.set(p,this.leftOver.length)}else m=this.leftOver.concat(m);this.leftOver=null}var _=function(y,w){var A;for((w=w||y.length)>y.length&&(w=y.length),A=w-1;0<=A&&(192&y[A])==128;)A--;return A<0||A===0?w:A+c[y[A]]>w?A:w}(m),v=m;_!==m.length&&(o.uint8array?(v=m.subarray(0,_),this.leftOver=m.subarray(_,m.length)):(v=m.slice(0,_),this.leftOver=m.slice(_,m.length))),this.push({data:s.utf8decode(v),meta:d.meta})},f.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=f,r.inherits(h,a),h.prototype.processChunk=function(d){this.push({data:s.utf8encode(d.data),meta:d.meta})},s.Utf8EncodeWorker=h},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,i,s){var r=t("./support"),o=t("./base64"),l=t("./nodejsUtils"),a=t("./external");function c(p){return p}function u(p,_){for(var v=0;v<p.length;++v)_[v]=255&p.charCodeAt(v);return _}t("setimmediate"),s.newBlob=function(p,_){s.checkSupport("blob");try{return new Blob([p],{type:_})}catch{try{var v=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return v.append(p),v.getBlob(_)}catch{throw new Error("Bug : can't construct the Blob.")}}};var f={stringifyByChunk:function(p,_,v){var y=[],w=0,A=p.length;if(A<=v)return String.fromCharCode.apply(null,p);for(;w<A;)_==="array"||_==="nodebuffer"?y.push(String.fromCharCode.apply(null,p.slice(w,Math.min(w+v,A)))):y.push(String.fromCharCode.apply(null,p.subarray(w,Math.min(w+v,A)))),w+=v;return y.join("")},stringifyByChar:function(p){for(var _="",v=0;v<p.length;v++)_+=String.fromCharCode(p[v]);return _},applyCanBeUsed:{uint8array:function(){try{return r.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return r.nodebuffer&&String.fromCharCode.apply(null,l.allocBuffer(1)).length===1}catch{return!1}}()}};function h(p){var _=65536,v=s.getTypeOf(p),y=!0;if(v==="uint8array"?y=f.applyCanBeUsed.uint8array:v==="nodebuffer"&&(y=f.applyCanBeUsed.nodebuffer),y)for(;1<_;)try{return f.stringifyByChunk(p,v,_)}catch{_=Math.floor(_/2)}return f.stringifyByChar(p)}function d(p,_){for(var v=0;v<p.length;v++)_[v]=p[v];return _}s.applyFromCharCode=h;var m={};m.string={string:c,array:function(p){return u(p,new Array(p.length))},arraybuffer:function(p){return m.string.uint8array(p).buffer},uint8array:function(p){return u(p,new Uint8Array(p.length))},nodebuffer:function(p){return u(p,l.allocBuffer(p.length))}},m.array={string:h,array:c,arraybuffer:function(p){return new Uint8Array(p).buffer},uint8array:function(p){return new Uint8Array(p)},nodebuffer:function(p){return l.newBufferFrom(p)}},m.arraybuffer={string:function(p){return h(new Uint8Array(p))},array:function(p){return d(new Uint8Array(p),new Array(p.byteLength))},arraybuffer:c,uint8array:function(p){return new Uint8Array(p)},nodebuffer:function(p){return l.newBufferFrom(new Uint8Array(p))}},m.uint8array={string:h,array:function(p){return d(p,new Array(p.length))},arraybuffer:function(p){return p.buffer},uint8array:c,nodebuffer:function(p){return l.newBufferFrom(p)}},m.nodebuffer={string:h,array:function(p){return d(p,new Array(p.length))},arraybuffer:function(p){return m.nodebuffer.uint8array(p).buffer},uint8array:function(p){return d(p,new Uint8Array(p.length))},nodebuffer:c},s.transformTo=function(p,_){if(_=_||"",!p)return _;s.checkSupport(p);var v=s.getTypeOf(_);return m[v][p](_)},s.resolve=function(p){for(var _=p.split("/"),v=[],y=0;y<_.length;y++){var w=_[y];w==="."||w===""&&y!==0&&y!==_.length-1||(w===".."?v.pop():v.push(w))}return v.join("/")},s.getTypeOf=function(p){return typeof p=="string"?"string":Object.prototype.toString.call(p)==="[object Array]"?"array":r.nodebuffer&&l.isBuffer(p)?"nodebuffer":r.uint8array&&p instanceof Uint8Array?"uint8array":r.arraybuffer&&p instanceof ArrayBuffer?"arraybuffer":void 0},s.checkSupport=function(p){if(!r[p.toLowerCase()])throw new Error(p+" is not supported by this platform")},s.MAX_VALUE_16BITS=65535,s.MAX_VALUE_32BITS=-1,s.pretty=function(p){var _,v,y="";for(v=0;v<(p||"").length;v++)y+="\\x"+((_=p.charCodeAt(v))<16?"0":"")+_.toString(16).toUpperCase();return y},s.delay=function(p,_,v){setImmediate(function(){p.apply(v||null,_||[])})},s.inherits=function(p,_){function v(){}v.prototype=_.prototype,p.prototype=new v},s.extend=function(){var p,_,v={};for(p=0;p<arguments.length;p++)for(_ in arguments[p])Object.prototype.hasOwnProperty.call(arguments[p],_)&&v[_]===void 0&&(v[_]=arguments[p][_]);return v},s.prepareContent=function(p,_,v,y,w){return a.Promise.resolve(_).then(function(A){return r.blob&&(A instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(A))!==-1)&&typeof FileReader<"u"?new a.Promise(function(E,C){var R=new FileReader;R.onload=function(D){E(D.target.result)},R.onerror=function(D){C(D.target.error)},R.readAsArrayBuffer(A)}):A}).then(function(A){var E=s.getTypeOf(A);return E?(E==="arraybuffer"?A=s.transformTo("uint8array",A):E==="string"&&(w?A=o.decode(A):v&&y!==!0&&(A=function(C){return u(C,r.uint8array?new Uint8Array(C.length):new Array(C.length))}(A))),A):a.Promise.reject(new Error("Can't read the data of '"+p+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,i,s){var r=t("./reader/readerFor"),o=t("./utils"),l=t("./signature"),a=t("./zipEntry"),c=t("./support");function u(f){this.files=[],this.loadOptions=f}u.prototype={checkSignature:function(f){if(!this.reader.readAndCheckSignature(f)){this.reader.index-=4;var h=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(h)+", expected "+o.pretty(f)+")")}},isSignature:function(f,h){var d=this.reader.index;this.reader.setIndex(f);var m=this.reader.readString(4)===h;return this.reader.setIndex(d),m},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var f=this.reader.readData(this.zipCommentLength),h=c.uint8array?"uint8array":"array",d=o.transformTo(h,f);this.zipComment=this.loadOptions.decodeFileName(d)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var f,h,d,m=this.zip64EndOfCentralSize-44;0<m;)f=this.reader.readInt(2),h=this.reader.readInt(4),d=this.reader.readData(h),this.zip64ExtensibleData[f]={id:f,length:h,value:d}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var f,h;for(f=0;f<this.files.length;f++)h=this.files[f],this.reader.setIndex(h.localHeaderOffset),this.checkSignature(l.LOCAL_FILE_HEADER),h.readLocalPart(this.reader),h.handleUTF8(),h.processAttributes()},readCentralDir:function(){var f;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(l.CENTRAL_FILE_HEADER);)(f=new a({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(f);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var f=this.reader.lastIndexOfSignature(l.CENTRAL_DIRECTORY_END);if(f<0)throw this.isSignature(0,l.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(f);var h=f;if(this.checkSignature(l.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(f=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(f),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,l.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var d=this.centralDirOffset+this.centralDirSize;this.zip64&&(d+=20,d+=12+this.zip64EndOfCentralSize);var m=h-d;if(0<m)this.isSignature(h,l.CENTRAL_FILE_HEADER)||(this.reader.zero=m);else if(m<0)throw new Error("Corrupted zip: missing "+Math.abs(m)+" bytes.")},prepareReader:function(f){this.reader=r(f)},load:function(f){this.prepareReader(f),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},i.exports=u},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,i,s){var r=t("./reader/readerFor"),o=t("./utils"),l=t("./compressedObject"),a=t("./crc32"),c=t("./utf8"),u=t("./compressions"),f=t("./support");function h(d,m){this.options=d,this.loadOptions=m}h.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(d){var m,p;if(d.skip(22),this.fileNameLength=d.readInt(2),p=d.readInt(2),this.fileName=d.readData(this.fileNameLength),d.skip(p),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((m=function(_){for(var v in u)if(Object.prototype.hasOwnProperty.call(u,v)&&u[v].magic===_)return u[v];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new l(this.compressedSize,this.uncompressedSize,this.crc32,m,d.readData(this.compressedSize))},readCentralPart:function(d){this.versionMadeBy=d.readInt(2),d.skip(2),this.bitFlag=d.readInt(2),this.compressionMethod=d.readString(2),this.date=d.readDate(),this.crc32=d.readInt(4),this.compressedSize=d.readInt(4),this.uncompressedSize=d.readInt(4);var m=d.readInt(2);if(this.extraFieldsLength=d.readInt(2),this.fileCommentLength=d.readInt(2),this.diskNumberStart=d.readInt(2),this.internalFileAttributes=d.readInt(2),this.externalFileAttributes=d.readInt(4),this.localHeaderOffset=d.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");d.skip(m),this.readExtraFields(d),this.parseZIP64ExtraField(d),this.fileComment=d.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var d=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),d==0&&(this.dosPermissions=63&this.externalFileAttributes),d==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var d=r(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=d.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=d.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=d.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=d.readInt(4))}},readExtraFields:function(d){var m,p,_,v=d.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});d.index+4<v;)m=d.readInt(2),p=d.readInt(2),_=d.readData(p),this.extraFields[m]={id:m,length:p,value:_};d.setIndex(v)},handleUTF8:function(){var d=f.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var m=this.findExtraFieldUnicodePath();if(m!==null)this.fileNameStr=m;else{var p=o.transformTo(d,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(p)}var _=this.findExtraFieldUnicodeComment();if(_!==null)this.fileCommentStr=_;else{var v=o.transformTo(d,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(v)}}},findExtraFieldUnicodePath:function(){var d=this.extraFields[28789];if(d){var m=r(d.value);return m.readInt(1)!==1||a(this.fileName)!==m.readInt(4)?null:c.utf8decode(m.readData(d.length-5))}return null},findExtraFieldUnicodeComment:function(){var d=this.extraFields[25461];if(d){var m=r(d.value);return m.readInt(1)!==1||a(this.fileComment)!==m.readInt(4)?null:c.utf8decode(m.readData(d.length-5))}return null}},i.exports=h},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,i,s){function r(m,p,_){this.name=m,this.dir=_.dir,this.date=_.date,this.comment=_.comment,this.unixPermissions=_.unixPermissions,this.dosPermissions=_.dosPermissions,this._data=p,this._dataBinary=_.binary,this.options={compression:_.compression,compressionOptions:_.compressionOptions}}var o=t("./stream/StreamHelper"),l=t("./stream/DataWorker"),a=t("./utf8"),c=t("./compressedObject"),u=t("./stream/GenericWorker");r.prototype={internalStream:function(m){var p=null,_="string";try{if(!m)throw new Error("No output type specified.");var v=(_=m.toLowerCase())==="string"||_==="text";_!=="binarystring"&&_!=="text"||(_="string"),p=this._decompressWorker();var y=!this._dataBinary;y&&!v&&(p=p.pipe(new a.Utf8EncodeWorker)),!y&&v&&(p=p.pipe(new a.Utf8DecodeWorker))}catch(w){(p=new u("error")).error(w)}return new o(p,_,"")},async:function(m,p){return this.internalStream(m).accumulate(p)},nodeStream:function(m,p){return this.internalStream(m||"nodebuffer").toNodejsStream(p)},_compressWorker:function(m,p){if(this._data instanceof c&&this._data.compression.magic===m.magic)return this._data.getCompressedWorker();var _=this._decompressWorker();return this._dataBinary||(_=_.pipe(new a.Utf8EncodeWorker)),c.createWorkerFrom(_,m,p)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof u?this._data:new l(this._data)}};for(var f=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],h=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<f.length;d++)r.prototype[f[d]]=h;i.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,i,s){(function(r){var o,l,a=r.MutationObserver||r.WebKitMutationObserver;if(a){var c=0,u=new a(m),f=r.document.createTextNode("");u.observe(f,{characterData:!0}),o=function(){f.data=c=++c%2}}else if(r.setImmediate||r.MessageChannel===void 0)o="document"in r&&"onreadystatechange"in r.document.createElement("script")?function(){var p=r.document.createElement("script");p.onreadystatechange=function(){m(),p.onreadystatechange=null,p.parentNode.removeChild(p),p=null},r.document.documentElement.appendChild(p)}:function(){setTimeout(m,0)};else{var h=new r.MessageChannel;h.port1.onmessage=m,o=function(){h.port2.postMessage(0)}}var d=[];function m(){var p,_;l=!0;for(var v=d.length;v;){for(_=d,d=[],p=-1;++p<v;)_[p]();v=d.length}l=!1}i.exports=function(p){d.push(p)!==1||l||o()}}).call(this,typeof $r<"u"?$r:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,i,s){var r=t("immediate");function o(){}var l={},a=["REJECTED"],c=["FULFILLED"],u=["PENDING"];function f(v){if(typeof v!="function")throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,v!==o&&p(this,v)}function h(v,y,w){this.promise=v,typeof y=="function"&&(this.onFulfilled=y,this.callFulfilled=this.otherCallFulfilled),typeof w=="function"&&(this.onRejected=w,this.callRejected=this.otherCallRejected)}function d(v,y,w){r(function(){var A;try{A=y(w)}catch(E){return l.reject(v,E)}A===v?l.reject(v,new TypeError("Cannot resolve promise with itself")):l.resolve(v,A)})}function m(v){var y=v&&v.then;if(v&&(typeof v=="object"||typeof v=="function")&&typeof y=="function")return function(){y.apply(v,arguments)}}function p(v,y){var w=!1;function A(R){w||(w=!0,l.reject(v,R))}function E(R){w||(w=!0,l.resolve(v,R))}var C=_(function(){y(E,A)});C.status==="error"&&A(C.value)}function _(v,y){var w={};try{w.value=v(y),w.status="success"}catch(A){w.status="error",w.value=A}return w}(i.exports=f).prototype.finally=function(v){if(typeof v!="function")return this;var y=this.constructor;return this.then(function(w){return y.resolve(v()).then(function(){return w})},function(w){return y.resolve(v()).then(function(){throw w})})},f.prototype.catch=function(v){return this.then(null,v)},f.prototype.then=function(v,y){if(typeof v!="function"&&this.state===c||typeof y!="function"&&this.state===a)return this;var w=new this.constructor(o);return this.state!==u?d(w,this.state===c?v:y,this.outcome):this.queue.push(new h(w,v,y)),w},h.prototype.callFulfilled=function(v){l.resolve(this.promise,v)},h.prototype.otherCallFulfilled=function(v){d(this.promise,this.onFulfilled,v)},h.prototype.callRejected=function(v){l.reject(this.promise,v)},h.prototype.otherCallRejected=function(v){d(this.promise,this.onRejected,v)},l.resolve=function(v,y){var w=_(m,y);if(w.status==="error")return l.reject(v,w.value);var A=w.value;if(A)p(v,A);else{v.state=c,v.outcome=y;for(var E=-1,C=v.queue.length;++E<C;)v.queue[E].callFulfilled(y)}return v},l.reject=function(v,y){v.state=a,v.outcome=y;for(var w=-1,A=v.queue.length;++w<A;)v.queue[w].callRejected(y);return v},f.resolve=function(v){return v instanceof this?v:l.resolve(new this(o),v)},f.reject=function(v){var y=new this(o);return l.reject(y,v)},f.all=function(v){var y=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var w=v.length,A=!1;if(!w)return this.resolve([]);for(var E=new Array(w),C=0,R=-1,D=new this(o);++R<w;)N(v[R],R);return D;function N(L,F){y.resolve(L).then(function(P){E[F]=P,++C!==w||A||(A=!0,l.resolve(D,E))},function(P){A||(A=!0,l.reject(D,P))})}},f.race=function(v){var y=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var w=v.length,A=!1;if(!w)return this.resolve([]);for(var E=-1,C=new this(o);++E<w;)R=v[E],y.resolve(R).then(function(D){A||(A=!0,l.resolve(C,D))},function(D){A||(A=!0,l.reject(C,D))});var R;return C}},{immediate:36}],38:[function(t,i,s){var r={};(0,t("./lib/utils/common").assign)(r,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),i.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,i,s){var r=t("./zlib/deflate"),o=t("./utils/common"),l=t("./utils/strings"),a=t("./zlib/messages"),c=t("./zlib/zstream"),u=Object.prototype.toString,f=0,h=-1,d=0,m=8;function p(v){if(!(this instanceof p))return new p(v);this.options=o.assign({level:h,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},v||{});var y=this.options;y.raw&&0<y.windowBits?y.windowBits=-y.windowBits:y.gzip&&0<y.windowBits&&y.windowBits<16&&(y.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var w=r.deflateInit2(this.strm,y.level,y.method,y.windowBits,y.memLevel,y.strategy);if(w!==f)throw new Error(a[w]);if(y.header&&r.deflateSetHeader(this.strm,y.header),y.dictionary){var A;if(A=typeof y.dictionary=="string"?l.string2buf(y.dictionary):u.call(y.dictionary)==="[object ArrayBuffer]"?new Uint8Array(y.dictionary):y.dictionary,(w=r.deflateSetDictionary(this.strm,A))!==f)throw new Error(a[w]);this._dict_set=!0}}function _(v,y){var w=new p(y);if(w.push(v,!0),w.err)throw w.msg||a[w.err];return w.result}p.prototype.push=function(v,y){var w,A,E=this.strm,C=this.options.chunkSize;if(this.ended)return!1;A=y===~~y?y:y===!0?4:0,typeof v=="string"?E.input=l.string2buf(v):u.call(v)==="[object ArrayBuffer]"?E.input=new Uint8Array(v):E.input=v,E.next_in=0,E.avail_in=E.input.length;do{if(E.avail_out===0&&(E.output=new o.Buf8(C),E.next_out=0,E.avail_out=C),(w=r.deflate(E,A))!==1&&w!==f)return this.onEnd(w),!(this.ended=!0);E.avail_out!==0&&(E.avail_in!==0||A!==4&&A!==2)||(this.options.to==="string"?this.onData(l.buf2binstring(o.shrinkBuf(E.output,E.next_out))):this.onData(o.shrinkBuf(E.output,E.next_out)))}while((0<E.avail_in||E.avail_out===0)&&w!==1);return A===4?(w=r.deflateEnd(this.strm),this.onEnd(w),this.ended=!0,w===f):A!==2||(this.onEnd(f),!(E.avail_out=0))},p.prototype.onData=function(v){this.chunks.push(v)},p.prototype.onEnd=function(v){v===f&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg},s.Deflate=p,s.deflate=_,s.deflateRaw=function(v,y){return(y=y||{}).raw=!0,_(v,y)},s.gzip=function(v,y){return(y=y||{}).gzip=!0,_(v,y)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,i,s){var r=t("./zlib/inflate"),o=t("./utils/common"),l=t("./utils/strings"),a=t("./zlib/constants"),c=t("./zlib/messages"),u=t("./zlib/zstream"),f=t("./zlib/gzheader"),h=Object.prototype.toString;function d(p){if(!(this instanceof d))return new d(p);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},p||{});var _=this.options;_.raw&&0<=_.windowBits&&_.windowBits<16&&(_.windowBits=-_.windowBits,_.windowBits===0&&(_.windowBits=-15)),!(0<=_.windowBits&&_.windowBits<16)||p&&p.windowBits||(_.windowBits+=32),15<_.windowBits&&_.windowBits<48&&!(15&_.windowBits)&&(_.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var v=r.inflateInit2(this.strm,_.windowBits);if(v!==a.Z_OK)throw new Error(c[v]);this.header=new f,r.inflateGetHeader(this.strm,this.header)}function m(p,_){var v=new d(_);if(v.push(p,!0),v.err)throw v.msg||c[v.err];return v.result}d.prototype.push=function(p,_){var v,y,w,A,E,C,R=this.strm,D=this.options.chunkSize,N=this.options.dictionary,L=!1;if(this.ended)return!1;y=_===~~_?_:_===!0?a.Z_FINISH:a.Z_NO_FLUSH,typeof p=="string"?R.input=l.binstring2buf(p):h.call(p)==="[object ArrayBuffer]"?R.input=new Uint8Array(p):R.input=p,R.next_in=0,R.avail_in=R.input.length;do{if(R.avail_out===0&&(R.output=new o.Buf8(D),R.next_out=0,R.avail_out=D),(v=r.inflate(R,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&N&&(C=typeof N=="string"?l.string2buf(N):h.call(N)==="[object ArrayBuffer]"?new Uint8Array(N):N,v=r.inflateSetDictionary(this.strm,C)),v===a.Z_BUF_ERROR&&L===!0&&(v=a.Z_OK,L=!1),v!==a.Z_STREAM_END&&v!==a.Z_OK)return this.onEnd(v),!(this.ended=!0);R.next_out&&(R.avail_out!==0&&v!==a.Z_STREAM_END&&(R.avail_in!==0||y!==a.Z_FINISH&&y!==a.Z_SYNC_FLUSH)||(this.options.to==="string"?(w=l.utf8border(R.output,R.next_out),A=R.next_out-w,E=l.buf2string(R.output,w),R.next_out=A,R.avail_out=D-A,A&&o.arraySet(R.output,R.output,w,A,0),this.onData(E)):this.onData(o.shrinkBuf(R.output,R.next_out)))),R.avail_in===0&&R.avail_out===0&&(L=!0)}while((0<R.avail_in||R.avail_out===0)&&v!==a.Z_STREAM_END);return v===a.Z_STREAM_END&&(y=a.Z_FINISH),y===a.Z_FINISH?(v=r.inflateEnd(this.strm),this.onEnd(v),this.ended=!0,v===a.Z_OK):y!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),!(R.avail_out=0))},d.prototype.onData=function(p){this.chunks.push(p)},d.prototype.onEnd=function(p){p===a.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=p,this.msg=this.strm.msg},s.Inflate=d,s.inflate=m,s.inflateRaw=function(p,_){return(_=_||{}).raw=!0,m(p,_)},s.ungzip=m},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,i,s){var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";s.assign=function(a){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var u=c.shift();if(u){if(typeof u!="object")throw new TypeError(u+"must be non-object");for(var f in u)u.hasOwnProperty(f)&&(a[f]=u[f])}}return a},s.shrinkBuf=function(a,c){return a.length===c?a:a.subarray?a.subarray(0,c):(a.length=c,a)};var o={arraySet:function(a,c,u,f,h){if(c.subarray&&a.subarray)a.set(c.subarray(u,u+f),h);else for(var d=0;d<f;d++)a[h+d]=c[u+d]},flattenChunks:function(a){var c,u,f,h,d,m;for(c=f=0,u=a.length;c<u;c++)f+=a[c].length;for(m=new Uint8Array(f),c=h=0,u=a.length;c<u;c++)d=a[c],m.set(d,h),h+=d.length;return m}},l={arraySet:function(a,c,u,f,h){for(var d=0;d<f;d++)a[h+d]=c[u+d]},flattenChunks:function(a){return[].concat.apply([],a)}};s.setTyped=function(a){a?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,o)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,l))},s.setTyped(r)},{}],42:[function(t,i,s){var r=t("./common"),o=!0,l=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{l=!1}for(var a=new r.Buf8(256),c=0;c<256;c++)a[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function u(f,h){if(h<65537&&(f.subarray&&l||!f.subarray&&o))return String.fromCharCode.apply(null,r.shrinkBuf(f,h));for(var d="",m=0;m<h;m++)d+=String.fromCharCode(f[m]);return d}a[254]=a[254]=1,s.string2buf=function(f){var h,d,m,p,_,v=f.length,y=0;for(p=0;p<v;p++)(64512&(d=f.charCodeAt(p)))==55296&&p+1<v&&(64512&(m=f.charCodeAt(p+1)))==56320&&(d=65536+(d-55296<<10)+(m-56320),p++),y+=d<128?1:d<2048?2:d<65536?3:4;for(h=new r.Buf8(y),p=_=0;_<y;p++)(64512&(d=f.charCodeAt(p)))==55296&&p+1<v&&(64512&(m=f.charCodeAt(p+1)))==56320&&(d=65536+(d-55296<<10)+(m-56320),p++),d<128?h[_++]=d:(d<2048?h[_++]=192|d>>>6:(d<65536?h[_++]=224|d>>>12:(h[_++]=240|d>>>18,h[_++]=128|d>>>12&63),h[_++]=128|d>>>6&63),h[_++]=128|63&d);return h},s.buf2binstring=function(f){return u(f,f.length)},s.binstring2buf=function(f){for(var h=new r.Buf8(f.length),d=0,m=h.length;d<m;d++)h[d]=f.charCodeAt(d);return h},s.buf2string=function(f,h){var d,m,p,_,v=h||f.length,y=new Array(2*v);for(d=m=0;d<v;)if((p=f[d++])<128)y[m++]=p;else if(4<(_=a[p]))y[m++]=65533,d+=_-1;else{for(p&=_===2?31:_===3?15:7;1<_&&d<v;)p=p<<6|63&f[d++],_--;1<_?y[m++]=65533:p<65536?y[m++]=p:(p-=65536,y[m++]=55296|p>>10&1023,y[m++]=56320|1023&p)}return u(y,m)},s.utf8border=function(f,h){var d;for((h=h||f.length)>f.length&&(h=f.length),d=h-1;0<=d&&(192&f[d])==128;)d--;return d<0||d===0?h:d+a[f[d]]>h?d:h}},{"./common":41}],43:[function(t,i,s){i.exports=function(r,o,l,a){for(var c=65535&r|0,u=r>>>16&65535|0,f=0;l!==0;){for(l-=f=2e3<l?2e3:l;u=u+(c=c+o[a++]|0)|0,--f;);c%=65521,u%=65521}return c|u<<16|0}},{}],44:[function(t,i,s){i.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,i,s){var r=function(){for(var o,l=[],a=0;a<256;a++){o=a;for(var c=0;c<8;c++)o=1&o?3988292384^o>>>1:o>>>1;l[a]=o}return l}();i.exports=function(o,l,a,c){var u=r,f=c+a;o^=-1;for(var h=c;h<f;h++)o=o>>>8^u[255&(o^l[h])];return-1^o}},{}],46:[function(t,i,s){var r,o=t("../utils/common"),l=t("./trees"),a=t("./adler32"),c=t("./crc32"),u=t("./messages"),f=0,h=4,d=0,m=-2,p=-1,_=4,v=2,y=8,w=9,A=286,E=30,C=19,R=2*A+1,D=15,N=3,L=258,F=L+N+1,P=42,Q=113,O=1,K=2,X=3,J=4;function te(M,ae){return M.msg=u[ae],ae}function j(M){return(M<<1)-(4<M?9:0)}function x(M){for(var ae=M.length;0<=--ae;)M[ae]=0}function Z(M){var ae=M.state,de=ae.pending;de>M.avail_out&&(de=M.avail_out),de!==0&&(o.arraySet(M.output,ae.pending_buf,ae.pending_out,de,M.next_out),M.next_out+=de,ae.pending_out+=de,M.total_out+=de,M.avail_out-=de,ae.pending-=de,ae.pending===0&&(ae.pending_out=0))}function V(M,ae){l._tr_flush_block(M,0<=M.block_start?M.block_start:-1,M.strstart-M.block_start,ae),M.block_start=M.strstart,Z(M.strm)}function ce(M,ae){M.pending_buf[M.pending++]=ae}function pe(M,ae){M.pending_buf[M.pending++]=ae>>>8&255,M.pending_buf[M.pending++]=255&ae}function re(M,ae){var de,ee,$=M.max_chain_length,ne=M.strstart,me=M.prev_length,le=M.nice_match,ie=M.strstart>M.w_size-F?M.strstart-(M.w_size-F):0,be=M.window,we=M.w_mask,Ae=M.prev,ge=M.strstart+L,Be=be[ne+me-1],ve=be[ne+me];M.prev_length>=M.good_match&&($>>=2),le>M.lookahead&&(le=M.lookahead);do if(be[(de=ae)+me]===ve&&be[de+me-1]===Be&&be[de]===be[ne]&&be[++de]===be[ne+1]){ne+=2,de++;do;while(be[++ne]===be[++de]&&be[++ne]===be[++de]&&be[++ne]===be[++de]&&be[++ne]===be[++de]&&be[++ne]===be[++de]&&be[++ne]===be[++de]&&be[++ne]===be[++de]&&be[++ne]===be[++de]&&ne<ge);if(ee=L-(ge-ne),ne=ge-L,me<ee){if(M.match_start=ae,le<=(me=ee))break;Be=be[ne+me-1],ve=be[ne+me]}}while((ae=Ae[ae&we])>ie&&--$!=0);return me<=M.lookahead?me:M.lookahead}function ye(M){var ae,de,ee,$,ne,me,le,ie,be,we,Ae=M.w_size;do{if($=M.window_size-M.lookahead-M.strstart,M.strstart>=Ae+(Ae-F)){for(o.arraySet(M.window,M.window,Ae,Ae,0),M.match_start-=Ae,M.strstart-=Ae,M.block_start-=Ae,ae=de=M.hash_size;ee=M.head[--ae],M.head[ae]=Ae<=ee?ee-Ae:0,--de;);for(ae=de=Ae;ee=M.prev[--ae],M.prev[ae]=Ae<=ee?ee-Ae:0,--de;);$+=Ae}if(M.strm.avail_in===0)break;if(me=M.strm,le=M.window,ie=M.strstart+M.lookahead,be=$,we=void 0,we=me.avail_in,be<we&&(we=be),de=we===0?0:(me.avail_in-=we,o.arraySet(le,me.input,me.next_in,we,ie),me.state.wrap===1?me.adler=a(me.adler,le,we,ie):me.state.wrap===2&&(me.adler=c(me.adler,le,we,ie)),me.next_in+=we,me.total_in+=we,we),M.lookahead+=de,M.lookahead+M.insert>=N)for(ne=M.strstart-M.insert,M.ins_h=M.window[ne],M.ins_h=(M.ins_h<<M.hash_shift^M.window[ne+1])&M.hash_mask;M.insert&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[ne+N-1])&M.hash_mask,M.prev[ne&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=ne,ne++,M.insert--,!(M.lookahead+M.insert<N)););}while(M.lookahead<F&&M.strm.avail_in!==0)}function Ne(M,ae){for(var de,ee;;){if(M.lookahead<F){if(ye(M),M.lookahead<F&&ae===f)return O;if(M.lookahead===0)break}if(de=0,M.lookahead>=N&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+N-1])&M.hash_mask,de=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart),de!==0&&M.strstart-de<=M.w_size-F&&(M.match_length=re(M,de)),M.match_length>=N)if(ee=l._tr_tally(M,M.strstart-M.match_start,M.match_length-N),M.lookahead-=M.match_length,M.match_length<=M.max_lazy_match&&M.lookahead>=N){for(M.match_length--;M.strstart++,M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+N-1])&M.hash_mask,de=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart,--M.match_length!=0;);M.strstart++}else M.strstart+=M.match_length,M.match_length=0,M.ins_h=M.window[M.strstart],M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+1])&M.hash_mask;else ee=l._tr_tally(M,0,M.window[M.strstart]),M.lookahead--,M.strstart++;if(ee&&(V(M,!1),M.strm.avail_out===0))return O}return M.insert=M.strstart<N-1?M.strstart:N-1,ae===h?(V(M,!0),M.strm.avail_out===0?X:J):M.last_lit&&(V(M,!1),M.strm.avail_out===0)?O:K}function Y(M,ae){for(var de,ee,$;;){if(M.lookahead<F){if(ye(M),M.lookahead<F&&ae===f)return O;if(M.lookahead===0)break}if(de=0,M.lookahead>=N&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+N-1])&M.hash_mask,de=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart),M.prev_length=M.match_length,M.prev_match=M.match_start,M.match_length=N-1,de!==0&&M.prev_length<M.max_lazy_match&&M.strstart-de<=M.w_size-F&&(M.match_length=re(M,de),M.match_length<=5&&(M.strategy===1||M.match_length===N&&4096<M.strstart-M.match_start)&&(M.match_length=N-1)),M.prev_length>=N&&M.match_length<=M.prev_length){for($=M.strstart+M.lookahead-N,ee=l._tr_tally(M,M.strstart-1-M.prev_match,M.prev_length-N),M.lookahead-=M.prev_length-1,M.prev_length-=2;++M.strstart<=$&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+N-1])&M.hash_mask,de=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart),--M.prev_length!=0;);if(M.match_available=0,M.match_length=N-1,M.strstart++,ee&&(V(M,!1),M.strm.avail_out===0))return O}else if(M.match_available){if((ee=l._tr_tally(M,0,M.window[M.strstart-1]))&&V(M,!1),M.strstart++,M.lookahead--,M.strm.avail_out===0)return O}else M.match_available=1,M.strstart++,M.lookahead--}return M.match_available&&(ee=l._tr_tally(M,0,M.window[M.strstart-1]),M.match_available=0),M.insert=M.strstart<N-1?M.strstart:N-1,ae===h?(V(M,!0),M.strm.avail_out===0?X:J):M.last_lit&&(V(M,!1),M.strm.avail_out===0)?O:K}function Ce(M,ae,de,ee,$){this.good_length=M,this.max_lazy=ae,this.nice_length=de,this.max_chain=ee,this.func=$}function We(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*R),this.dyn_dtree=new o.Buf16(2*(2*E+1)),this.bl_tree=new o.Buf16(2*(2*C+1)),x(this.dyn_ltree),x(this.dyn_dtree),x(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(D+1),this.heap=new o.Buf16(2*A+1),x(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*A+1),x(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function se(M){var ae;return M&&M.state?(M.total_in=M.total_out=0,M.data_type=v,(ae=M.state).pending=0,ae.pending_out=0,ae.wrap<0&&(ae.wrap=-ae.wrap),ae.status=ae.wrap?P:Q,M.adler=ae.wrap===2?0:1,ae.last_flush=f,l._tr_init(ae),d):te(M,m)}function Me(M){var ae=se(M);return ae===d&&function(de){de.window_size=2*de.w_size,x(de.head),de.max_lazy_match=r[de.level].max_lazy,de.good_match=r[de.level].good_length,de.nice_match=r[de.level].nice_length,de.max_chain_length=r[de.level].max_chain,de.strstart=0,de.block_start=0,de.lookahead=0,de.insert=0,de.match_length=de.prev_length=N-1,de.match_available=0,de.ins_h=0}(M.state),ae}function he(M,ae,de,ee,$,ne){if(!M)return m;var me=1;if(ae===p&&(ae=6),ee<0?(me=0,ee=-ee):15<ee&&(me=2,ee-=16),$<1||w<$||de!==y||ee<8||15<ee||ae<0||9<ae||ne<0||_<ne)return te(M,m);ee===8&&(ee=9);var le=new We;return(M.state=le).strm=M,le.wrap=me,le.gzhead=null,le.w_bits=ee,le.w_size=1<<le.w_bits,le.w_mask=le.w_size-1,le.hash_bits=$+7,le.hash_size=1<<le.hash_bits,le.hash_mask=le.hash_size-1,le.hash_shift=~~((le.hash_bits+N-1)/N),le.window=new o.Buf8(2*le.w_size),le.head=new o.Buf16(le.hash_size),le.prev=new o.Buf16(le.w_size),le.lit_bufsize=1<<$+6,le.pending_buf_size=4*le.lit_bufsize,le.pending_buf=new o.Buf8(le.pending_buf_size),le.d_buf=1*le.lit_bufsize,le.l_buf=3*le.lit_bufsize,le.level=ae,le.strategy=ne,le.method=de,Me(M)}r=[new Ce(0,0,0,0,function(M,ae){var de=65535;for(de>M.pending_buf_size-5&&(de=M.pending_buf_size-5);;){if(M.lookahead<=1){if(ye(M),M.lookahead===0&&ae===f)return O;if(M.lookahead===0)break}M.strstart+=M.lookahead,M.lookahead=0;var ee=M.block_start+de;if((M.strstart===0||M.strstart>=ee)&&(M.lookahead=M.strstart-ee,M.strstart=ee,V(M,!1),M.strm.avail_out===0)||M.strstart-M.block_start>=M.w_size-F&&(V(M,!1),M.strm.avail_out===0))return O}return M.insert=0,ae===h?(V(M,!0),M.strm.avail_out===0?X:J):(M.strstart>M.block_start&&(V(M,!1),M.strm.avail_out),O)}),new Ce(4,4,8,4,Ne),new Ce(4,5,16,8,Ne),new Ce(4,6,32,32,Ne),new Ce(4,4,16,16,Y),new Ce(8,16,32,32,Y),new Ce(8,16,128,128,Y),new Ce(8,32,128,256,Y),new Ce(32,128,258,1024,Y),new Ce(32,258,258,4096,Y)],s.deflateInit=function(M,ae){return he(M,ae,y,15,8,0)},s.deflateInit2=he,s.deflateReset=Me,s.deflateResetKeep=se,s.deflateSetHeader=function(M,ae){return M&&M.state?M.state.wrap!==2?m:(M.state.gzhead=ae,d):m},s.deflate=function(M,ae){var de,ee,$,ne;if(!M||!M.state||5<ae||ae<0)return M?te(M,m):m;if(ee=M.state,!M.output||!M.input&&M.avail_in!==0||ee.status===666&&ae!==h)return te(M,M.avail_out===0?-5:m);if(ee.strm=M,de=ee.last_flush,ee.last_flush=ae,ee.status===P)if(ee.wrap===2)M.adler=0,ce(ee,31),ce(ee,139),ce(ee,8),ee.gzhead?(ce(ee,(ee.gzhead.text?1:0)+(ee.gzhead.hcrc?2:0)+(ee.gzhead.extra?4:0)+(ee.gzhead.name?8:0)+(ee.gzhead.comment?16:0)),ce(ee,255&ee.gzhead.time),ce(ee,ee.gzhead.time>>8&255),ce(ee,ee.gzhead.time>>16&255),ce(ee,ee.gzhead.time>>24&255),ce(ee,ee.level===9?2:2<=ee.strategy||ee.level<2?4:0),ce(ee,255&ee.gzhead.os),ee.gzhead.extra&&ee.gzhead.extra.length&&(ce(ee,255&ee.gzhead.extra.length),ce(ee,ee.gzhead.extra.length>>8&255)),ee.gzhead.hcrc&&(M.adler=c(M.adler,ee.pending_buf,ee.pending,0)),ee.gzindex=0,ee.status=69):(ce(ee,0),ce(ee,0),ce(ee,0),ce(ee,0),ce(ee,0),ce(ee,ee.level===9?2:2<=ee.strategy||ee.level<2?4:0),ce(ee,3),ee.status=Q);else{var me=y+(ee.w_bits-8<<4)<<8;me|=(2<=ee.strategy||ee.level<2?0:ee.level<6?1:ee.level===6?2:3)<<6,ee.strstart!==0&&(me|=32),me+=31-me%31,ee.status=Q,pe(ee,me),ee.strstart!==0&&(pe(ee,M.adler>>>16),pe(ee,65535&M.adler)),M.adler=1}if(ee.status===69)if(ee.gzhead.extra){for($=ee.pending;ee.gzindex<(65535&ee.gzhead.extra.length)&&(ee.pending!==ee.pending_buf_size||(ee.gzhead.hcrc&&ee.pending>$&&(M.adler=c(M.adler,ee.pending_buf,ee.pending-$,$)),Z(M),$=ee.pending,ee.pending!==ee.pending_buf_size));)ce(ee,255&ee.gzhead.extra[ee.gzindex]),ee.gzindex++;ee.gzhead.hcrc&&ee.pending>$&&(M.adler=c(M.adler,ee.pending_buf,ee.pending-$,$)),ee.gzindex===ee.gzhead.extra.length&&(ee.gzindex=0,ee.status=73)}else ee.status=73;if(ee.status===73)if(ee.gzhead.name){$=ee.pending;do{if(ee.pending===ee.pending_buf_size&&(ee.gzhead.hcrc&&ee.pending>$&&(M.adler=c(M.adler,ee.pending_buf,ee.pending-$,$)),Z(M),$=ee.pending,ee.pending===ee.pending_buf_size)){ne=1;break}ne=ee.gzindex<ee.gzhead.name.length?255&ee.gzhead.name.charCodeAt(ee.gzindex++):0,ce(ee,ne)}while(ne!==0);ee.gzhead.hcrc&&ee.pending>$&&(M.adler=c(M.adler,ee.pending_buf,ee.pending-$,$)),ne===0&&(ee.gzindex=0,ee.status=91)}else ee.status=91;if(ee.status===91)if(ee.gzhead.comment){$=ee.pending;do{if(ee.pending===ee.pending_buf_size&&(ee.gzhead.hcrc&&ee.pending>$&&(M.adler=c(M.adler,ee.pending_buf,ee.pending-$,$)),Z(M),$=ee.pending,ee.pending===ee.pending_buf_size)){ne=1;break}ne=ee.gzindex<ee.gzhead.comment.length?255&ee.gzhead.comment.charCodeAt(ee.gzindex++):0,ce(ee,ne)}while(ne!==0);ee.gzhead.hcrc&&ee.pending>$&&(M.adler=c(M.adler,ee.pending_buf,ee.pending-$,$)),ne===0&&(ee.status=103)}else ee.status=103;if(ee.status===103&&(ee.gzhead.hcrc?(ee.pending+2>ee.pending_buf_size&&Z(M),ee.pending+2<=ee.pending_buf_size&&(ce(ee,255&M.adler),ce(ee,M.adler>>8&255),M.adler=0,ee.status=Q)):ee.status=Q),ee.pending!==0){if(Z(M),M.avail_out===0)return ee.last_flush=-1,d}else if(M.avail_in===0&&j(ae)<=j(de)&&ae!==h)return te(M,-5);if(ee.status===666&&M.avail_in!==0)return te(M,-5);if(M.avail_in!==0||ee.lookahead!==0||ae!==f&&ee.status!==666){var le=ee.strategy===2?function(ie,be){for(var we;;){if(ie.lookahead===0&&(ye(ie),ie.lookahead===0)){if(be===f)return O;break}if(ie.match_length=0,we=l._tr_tally(ie,0,ie.window[ie.strstart]),ie.lookahead--,ie.strstart++,we&&(V(ie,!1),ie.strm.avail_out===0))return O}return ie.insert=0,be===h?(V(ie,!0),ie.strm.avail_out===0?X:J):ie.last_lit&&(V(ie,!1),ie.strm.avail_out===0)?O:K}(ee,ae):ee.strategy===3?function(ie,be){for(var we,Ae,ge,Be,ve=ie.window;;){if(ie.lookahead<=L){if(ye(ie),ie.lookahead<=L&&be===f)return O;if(ie.lookahead===0)break}if(ie.match_length=0,ie.lookahead>=N&&0<ie.strstart&&(Ae=ve[ge=ie.strstart-1])===ve[++ge]&&Ae===ve[++ge]&&Ae===ve[++ge]){Be=ie.strstart+L;do;while(Ae===ve[++ge]&&Ae===ve[++ge]&&Ae===ve[++ge]&&Ae===ve[++ge]&&Ae===ve[++ge]&&Ae===ve[++ge]&&Ae===ve[++ge]&&Ae===ve[++ge]&&ge<Be);ie.match_length=L-(Be-ge),ie.match_length>ie.lookahead&&(ie.match_length=ie.lookahead)}if(ie.match_length>=N?(we=l._tr_tally(ie,1,ie.match_length-N),ie.lookahead-=ie.match_length,ie.strstart+=ie.match_length,ie.match_length=0):(we=l._tr_tally(ie,0,ie.window[ie.strstart]),ie.lookahead--,ie.strstart++),we&&(V(ie,!1),ie.strm.avail_out===0))return O}return ie.insert=0,be===h?(V(ie,!0),ie.strm.avail_out===0?X:J):ie.last_lit&&(V(ie,!1),ie.strm.avail_out===0)?O:K}(ee,ae):r[ee.level].func(ee,ae);if(le!==X&&le!==J||(ee.status=666),le===O||le===X)return M.avail_out===0&&(ee.last_flush=-1),d;if(le===K&&(ae===1?l._tr_align(ee):ae!==5&&(l._tr_stored_block(ee,0,0,!1),ae===3&&(x(ee.head),ee.lookahead===0&&(ee.strstart=0,ee.block_start=0,ee.insert=0))),Z(M),M.avail_out===0))return ee.last_flush=-1,d}return ae!==h?d:ee.wrap<=0?1:(ee.wrap===2?(ce(ee,255&M.adler),ce(ee,M.adler>>8&255),ce(ee,M.adler>>16&255),ce(ee,M.adler>>24&255),ce(ee,255&M.total_in),ce(ee,M.total_in>>8&255),ce(ee,M.total_in>>16&255),ce(ee,M.total_in>>24&255)):(pe(ee,M.adler>>>16),pe(ee,65535&M.adler)),Z(M),0<ee.wrap&&(ee.wrap=-ee.wrap),ee.pending!==0?d:1)},s.deflateEnd=function(M){var ae;return M&&M.state?(ae=M.state.status)!==P&&ae!==69&&ae!==73&&ae!==91&&ae!==103&&ae!==Q&&ae!==666?te(M,m):(M.state=null,ae===Q?te(M,-3):d):m},s.deflateSetDictionary=function(M,ae){var de,ee,$,ne,me,le,ie,be,we=ae.length;if(!M||!M.state||(ne=(de=M.state).wrap)===2||ne===1&&de.status!==P||de.lookahead)return m;for(ne===1&&(M.adler=a(M.adler,ae,we,0)),de.wrap=0,we>=de.w_size&&(ne===0&&(x(de.head),de.strstart=0,de.block_start=0,de.insert=0),be=new o.Buf8(de.w_size),o.arraySet(be,ae,we-de.w_size,de.w_size,0),ae=be,we=de.w_size),me=M.avail_in,le=M.next_in,ie=M.input,M.avail_in=we,M.next_in=0,M.input=ae,ye(de);de.lookahead>=N;){for(ee=de.strstart,$=de.lookahead-(N-1);de.ins_h=(de.ins_h<<de.hash_shift^de.window[ee+N-1])&de.hash_mask,de.prev[ee&de.w_mask]=de.head[de.ins_h],de.head[de.ins_h]=ee,ee++,--$;);de.strstart=ee,de.lookahead=N-1,ye(de)}return de.strstart+=de.lookahead,de.block_start=de.strstart,de.insert=de.lookahead,de.lookahead=0,de.match_length=de.prev_length=N-1,de.match_available=0,M.next_in=le,M.input=ie,M.avail_in=me,de.wrap=ne,d},s.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,i,s){i.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,i,s){i.exports=function(r,o){var l,a,c,u,f,h,d,m,p,_,v,y,w,A,E,C,R,D,N,L,F,P,Q,O,K;l=r.state,a=r.next_in,O=r.input,c=a+(r.avail_in-5),u=r.next_out,K=r.output,f=u-(o-r.avail_out),h=u+(r.avail_out-257),d=l.dmax,m=l.wsize,p=l.whave,_=l.wnext,v=l.window,y=l.hold,w=l.bits,A=l.lencode,E=l.distcode,C=(1<<l.lenbits)-1,R=(1<<l.distbits)-1;e:do{w<15&&(y+=O[a++]<<w,w+=8,y+=O[a++]<<w,w+=8),D=A[y&C];t:for(;;){if(y>>>=N=D>>>24,w-=N,(N=D>>>16&255)===0)K[u++]=65535&D;else{if(!(16&N)){if(!(64&N)){D=A[(65535&D)+(y&(1<<N)-1)];continue t}if(32&N){l.mode=12;break e}r.msg="invalid literal/length code",l.mode=30;break e}L=65535&D,(N&=15)&&(w<N&&(y+=O[a++]<<w,w+=8),L+=y&(1<<N)-1,y>>>=N,w-=N),w<15&&(y+=O[a++]<<w,w+=8,y+=O[a++]<<w,w+=8),D=E[y&R];n:for(;;){if(y>>>=N=D>>>24,w-=N,!(16&(N=D>>>16&255))){if(!(64&N)){D=E[(65535&D)+(y&(1<<N)-1)];continue n}r.msg="invalid distance code",l.mode=30;break e}if(F=65535&D,w<(N&=15)&&(y+=O[a++]<<w,(w+=8)<N&&(y+=O[a++]<<w,w+=8)),d<(F+=y&(1<<N)-1)){r.msg="invalid distance too far back",l.mode=30;break e}if(y>>>=N,w-=N,(N=u-f)<F){if(p<(N=F-N)&&l.sane){r.msg="invalid distance too far back",l.mode=30;break e}if(Q=v,(P=0)===_){if(P+=m-N,N<L){for(L-=N;K[u++]=v[P++],--N;);P=u-F,Q=K}}else if(_<N){if(P+=m+_-N,(N-=_)<L){for(L-=N;K[u++]=v[P++],--N;);if(P=0,_<L){for(L-=N=_;K[u++]=v[P++],--N;);P=u-F,Q=K}}}else if(P+=_-N,N<L){for(L-=N;K[u++]=v[P++],--N;);P=u-F,Q=K}for(;2<L;)K[u++]=Q[P++],K[u++]=Q[P++],K[u++]=Q[P++],L-=3;L&&(K[u++]=Q[P++],1<L&&(K[u++]=Q[P++]))}else{for(P=u-F;K[u++]=K[P++],K[u++]=K[P++],K[u++]=K[P++],2<(L-=3););L&&(K[u++]=K[P++],1<L&&(K[u++]=K[P++]))}break}}break}}while(a<c&&u<h);a-=L=w>>3,y&=(1<<(w-=L<<3))-1,r.next_in=a,r.next_out=u,r.avail_in=a<c?c-a+5:5-(a-c),r.avail_out=u<h?h-u+257:257-(u-h),l.hold=y,l.bits=w}},{}],49:[function(t,i,s){var r=t("../utils/common"),o=t("./adler32"),l=t("./crc32"),a=t("./inffast"),c=t("./inftrees"),u=1,f=2,h=0,d=-2,m=1,p=852,_=592;function v(P){return(P>>>24&255)+(P>>>8&65280)+((65280&P)<<8)+((255&P)<<24)}function y(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function w(P){var Q;return P&&P.state?(Q=P.state,P.total_in=P.total_out=Q.total=0,P.msg="",Q.wrap&&(P.adler=1&Q.wrap),Q.mode=m,Q.last=0,Q.havedict=0,Q.dmax=32768,Q.head=null,Q.hold=0,Q.bits=0,Q.lencode=Q.lendyn=new r.Buf32(p),Q.distcode=Q.distdyn=new r.Buf32(_),Q.sane=1,Q.back=-1,h):d}function A(P){var Q;return P&&P.state?((Q=P.state).wsize=0,Q.whave=0,Q.wnext=0,w(P)):d}function E(P,Q){var O,K;return P&&P.state?(K=P.state,Q<0?(O=0,Q=-Q):(O=1+(Q>>4),Q<48&&(Q&=15)),Q&&(Q<8||15<Q)?d:(K.window!==null&&K.wbits!==Q&&(K.window=null),K.wrap=O,K.wbits=Q,A(P))):d}function C(P,Q){var O,K;return P?(K=new y,(P.state=K).window=null,(O=E(P,Q))!==h&&(P.state=null),O):d}var R,D,N=!0;function L(P){if(N){var Q;for(R=new r.Buf32(512),D=new r.Buf32(32),Q=0;Q<144;)P.lens[Q++]=8;for(;Q<256;)P.lens[Q++]=9;for(;Q<280;)P.lens[Q++]=7;for(;Q<288;)P.lens[Q++]=8;for(c(u,P.lens,0,288,R,0,P.work,{bits:9}),Q=0;Q<32;)P.lens[Q++]=5;c(f,P.lens,0,32,D,0,P.work,{bits:5}),N=!1}P.lencode=R,P.lenbits=9,P.distcode=D,P.distbits=5}function F(P,Q,O,K){var X,J=P.state;return J.window===null&&(J.wsize=1<<J.wbits,J.wnext=0,J.whave=0,J.window=new r.Buf8(J.wsize)),K>=J.wsize?(r.arraySet(J.window,Q,O-J.wsize,J.wsize,0),J.wnext=0,J.whave=J.wsize):(K<(X=J.wsize-J.wnext)&&(X=K),r.arraySet(J.window,Q,O-K,X,J.wnext),(K-=X)?(r.arraySet(J.window,Q,O-K,K,0),J.wnext=K,J.whave=J.wsize):(J.wnext+=X,J.wnext===J.wsize&&(J.wnext=0),J.whave<J.wsize&&(J.whave+=X))),0}s.inflateReset=A,s.inflateReset2=E,s.inflateResetKeep=w,s.inflateInit=function(P){return C(P,15)},s.inflateInit2=C,s.inflate=function(P,Q){var O,K,X,J,te,j,x,Z,V,ce,pe,re,ye,Ne,Y,Ce,We,se,Me,he,M,ae,de,ee,$=0,ne=new r.Buf8(4),me=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!P||!P.state||!P.output||!P.input&&P.avail_in!==0)return d;(O=P.state).mode===12&&(O.mode=13),te=P.next_out,X=P.output,x=P.avail_out,J=P.next_in,K=P.input,j=P.avail_in,Z=O.hold,V=O.bits,ce=j,pe=x,ae=h;e:for(;;)switch(O.mode){case m:if(O.wrap===0){O.mode=13;break}for(;V<16;){if(j===0)break e;j--,Z+=K[J++]<<V,V+=8}if(2&O.wrap&&Z===35615){ne[O.check=0]=255&Z,ne[1]=Z>>>8&255,O.check=l(O.check,ne,2,0),V=Z=0,O.mode=2;break}if(O.flags=0,O.head&&(O.head.done=!1),!(1&O.wrap)||(((255&Z)<<8)+(Z>>8))%31){P.msg="incorrect header check",O.mode=30;break}if((15&Z)!=8){P.msg="unknown compression method",O.mode=30;break}if(V-=4,M=8+(15&(Z>>>=4)),O.wbits===0)O.wbits=M;else if(M>O.wbits){P.msg="invalid window size",O.mode=30;break}O.dmax=1<<M,P.adler=O.check=1,O.mode=512&Z?10:12,V=Z=0;break;case 2:for(;V<16;){if(j===0)break e;j--,Z+=K[J++]<<V,V+=8}if(O.flags=Z,(255&O.flags)!=8){P.msg="unknown compression method",O.mode=30;break}if(57344&O.flags){P.msg="unknown header flags set",O.mode=30;break}O.head&&(O.head.text=Z>>8&1),512&O.flags&&(ne[0]=255&Z,ne[1]=Z>>>8&255,O.check=l(O.check,ne,2,0)),V=Z=0,O.mode=3;case 3:for(;V<32;){if(j===0)break e;j--,Z+=K[J++]<<V,V+=8}O.head&&(O.head.time=Z),512&O.flags&&(ne[0]=255&Z,ne[1]=Z>>>8&255,ne[2]=Z>>>16&255,ne[3]=Z>>>24&255,O.check=l(O.check,ne,4,0)),V=Z=0,O.mode=4;case 4:for(;V<16;){if(j===0)break e;j--,Z+=K[J++]<<V,V+=8}O.head&&(O.head.xflags=255&Z,O.head.os=Z>>8),512&O.flags&&(ne[0]=255&Z,ne[1]=Z>>>8&255,O.check=l(O.check,ne,2,0)),V=Z=0,O.mode=5;case 5:if(1024&O.flags){for(;V<16;){if(j===0)break e;j--,Z+=K[J++]<<V,V+=8}O.length=Z,O.head&&(O.head.extra_len=Z),512&O.flags&&(ne[0]=255&Z,ne[1]=Z>>>8&255,O.check=l(O.check,ne,2,0)),V=Z=0}else O.head&&(O.head.extra=null);O.mode=6;case 6:if(1024&O.flags&&(j<(re=O.length)&&(re=j),re&&(O.head&&(M=O.head.extra_len-O.length,O.head.extra||(O.head.extra=new Array(O.head.extra_len)),r.arraySet(O.head.extra,K,J,re,M)),512&O.flags&&(O.check=l(O.check,K,re,J)),j-=re,J+=re,O.length-=re),O.length))break e;O.length=0,O.mode=7;case 7:if(2048&O.flags){if(j===0)break e;for(re=0;M=K[J+re++],O.head&&M&&O.length<65536&&(O.head.name+=String.fromCharCode(M)),M&&re<j;);if(512&O.flags&&(O.check=l(O.check,K,re,J)),j-=re,J+=re,M)break e}else O.head&&(O.head.name=null);O.length=0,O.mode=8;case 8:if(4096&O.flags){if(j===0)break e;for(re=0;M=K[J+re++],O.head&&M&&O.length<65536&&(O.head.comment+=String.fromCharCode(M)),M&&re<j;);if(512&O.flags&&(O.check=l(O.check,K,re,J)),j-=re,J+=re,M)break e}else O.head&&(O.head.comment=null);O.mode=9;case 9:if(512&O.flags){for(;V<16;){if(j===0)break e;j--,Z+=K[J++]<<V,V+=8}if(Z!==(65535&O.check)){P.msg="header crc mismatch",O.mode=30;break}V=Z=0}O.head&&(O.head.hcrc=O.flags>>9&1,O.head.done=!0),P.adler=O.check=0,O.mode=12;break;case 10:for(;V<32;){if(j===0)break e;j--,Z+=K[J++]<<V,V+=8}P.adler=O.check=v(Z),V=Z=0,O.mode=11;case 11:if(O.havedict===0)return P.next_out=te,P.avail_out=x,P.next_in=J,P.avail_in=j,O.hold=Z,O.bits=V,2;P.adler=O.check=1,O.mode=12;case 12:if(Q===5||Q===6)break e;case 13:if(O.last){Z>>>=7&V,V-=7&V,O.mode=27;break}for(;V<3;){if(j===0)break e;j--,Z+=K[J++]<<V,V+=8}switch(O.last=1&Z,V-=1,3&(Z>>>=1)){case 0:O.mode=14;break;case 1:if(L(O),O.mode=20,Q!==6)break;Z>>>=2,V-=2;break e;case 2:O.mode=17;break;case 3:P.msg="invalid block type",O.mode=30}Z>>>=2,V-=2;break;case 14:for(Z>>>=7&V,V-=7&V;V<32;){if(j===0)break e;j--,Z+=K[J++]<<V,V+=8}if((65535&Z)!=(Z>>>16^65535)){P.msg="invalid stored block lengths",O.mode=30;break}if(O.length=65535&Z,V=Z=0,O.mode=15,Q===6)break e;case 15:O.mode=16;case 16:if(re=O.length){if(j<re&&(re=j),x<re&&(re=x),re===0)break e;r.arraySet(X,K,J,re,te),j-=re,J+=re,x-=re,te+=re,O.length-=re;break}O.mode=12;break;case 17:for(;V<14;){if(j===0)break e;j--,Z+=K[J++]<<V,V+=8}if(O.nlen=257+(31&Z),Z>>>=5,V-=5,O.ndist=1+(31&Z),Z>>>=5,V-=5,O.ncode=4+(15&Z),Z>>>=4,V-=4,286<O.nlen||30<O.ndist){P.msg="too many length or distance symbols",O.mode=30;break}O.have=0,O.mode=18;case 18:for(;O.have<O.ncode;){for(;V<3;){if(j===0)break e;j--,Z+=K[J++]<<V,V+=8}O.lens[me[O.have++]]=7&Z,Z>>>=3,V-=3}for(;O.have<19;)O.lens[me[O.have++]]=0;if(O.lencode=O.lendyn,O.lenbits=7,de={bits:O.lenbits},ae=c(0,O.lens,0,19,O.lencode,0,O.work,de),O.lenbits=de.bits,ae){P.msg="invalid code lengths set",O.mode=30;break}O.have=0,O.mode=19;case 19:for(;O.have<O.nlen+O.ndist;){for(;Ce=($=O.lencode[Z&(1<<O.lenbits)-1])>>>16&255,We=65535&$,!((Y=$>>>24)<=V);){if(j===0)break e;j--,Z+=K[J++]<<V,V+=8}if(We<16)Z>>>=Y,V-=Y,O.lens[O.have++]=We;else{if(We===16){for(ee=Y+2;V<ee;){if(j===0)break e;j--,Z+=K[J++]<<V,V+=8}if(Z>>>=Y,V-=Y,O.have===0){P.msg="invalid bit length repeat",O.mode=30;break}M=O.lens[O.have-1],re=3+(3&Z),Z>>>=2,V-=2}else if(We===17){for(ee=Y+3;V<ee;){if(j===0)break e;j--,Z+=K[J++]<<V,V+=8}V-=Y,M=0,re=3+(7&(Z>>>=Y)),Z>>>=3,V-=3}else{for(ee=Y+7;V<ee;){if(j===0)break e;j--,Z+=K[J++]<<V,V+=8}V-=Y,M=0,re=11+(127&(Z>>>=Y)),Z>>>=7,V-=7}if(O.have+re>O.nlen+O.ndist){P.msg="invalid bit length repeat",O.mode=30;break}for(;re--;)O.lens[O.have++]=M}}if(O.mode===30)break;if(O.lens[256]===0){P.msg="invalid code -- missing end-of-block",O.mode=30;break}if(O.lenbits=9,de={bits:O.lenbits},ae=c(u,O.lens,0,O.nlen,O.lencode,0,O.work,de),O.lenbits=de.bits,ae){P.msg="invalid literal/lengths set",O.mode=30;break}if(O.distbits=6,O.distcode=O.distdyn,de={bits:O.distbits},ae=c(f,O.lens,O.nlen,O.ndist,O.distcode,0,O.work,de),O.distbits=de.bits,ae){P.msg="invalid distances set",O.mode=30;break}if(O.mode=20,Q===6)break e;case 20:O.mode=21;case 21:if(6<=j&&258<=x){P.next_out=te,P.avail_out=x,P.next_in=J,P.avail_in=j,O.hold=Z,O.bits=V,a(P,pe),te=P.next_out,X=P.output,x=P.avail_out,J=P.next_in,K=P.input,j=P.avail_in,Z=O.hold,V=O.bits,O.mode===12&&(O.back=-1);break}for(O.back=0;Ce=($=O.lencode[Z&(1<<O.lenbits)-1])>>>16&255,We=65535&$,!((Y=$>>>24)<=V);){if(j===0)break e;j--,Z+=K[J++]<<V,V+=8}if(Ce&&!(240&Ce)){for(se=Y,Me=Ce,he=We;Ce=($=O.lencode[he+((Z&(1<<se+Me)-1)>>se)])>>>16&255,We=65535&$,!(se+(Y=$>>>24)<=V);){if(j===0)break e;j--,Z+=K[J++]<<V,V+=8}Z>>>=se,V-=se,O.back+=se}if(Z>>>=Y,V-=Y,O.back+=Y,O.length=We,Ce===0){O.mode=26;break}if(32&Ce){O.back=-1,O.mode=12;break}if(64&Ce){P.msg="invalid literal/length code",O.mode=30;break}O.extra=15&Ce,O.mode=22;case 22:if(O.extra){for(ee=O.extra;V<ee;){if(j===0)break e;j--,Z+=K[J++]<<V,V+=8}O.length+=Z&(1<<O.extra)-1,Z>>>=O.extra,V-=O.extra,O.back+=O.extra}O.was=O.length,O.mode=23;case 23:for(;Ce=($=O.distcode[Z&(1<<O.distbits)-1])>>>16&255,We=65535&$,!((Y=$>>>24)<=V);){if(j===0)break e;j--,Z+=K[J++]<<V,V+=8}if(!(240&Ce)){for(se=Y,Me=Ce,he=We;Ce=($=O.distcode[he+((Z&(1<<se+Me)-1)>>se)])>>>16&255,We=65535&$,!(se+(Y=$>>>24)<=V);){if(j===0)break e;j--,Z+=K[J++]<<V,V+=8}Z>>>=se,V-=se,O.back+=se}if(Z>>>=Y,V-=Y,O.back+=Y,64&Ce){P.msg="invalid distance code",O.mode=30;break}O.offset=We,O.extra=15&Ce,O.mode=24;case 24:if(O.extra){for(ee=O.extra;V<ee;){if(j===0)break e;j--,Z+=K[J++]<<V,V+=8}O.offset+=Z&(1<<O.extra)-1,Z>>>=O.extra,V-=O.extra,O.back+=O.extra}if(O.offset>O.dmax){P.msg="invalid distance too far back",O.mode=30;break}O.mode=25;case 25:if(x===0)break e;if(re=pe-x,O.offset>re){if((re=O.offset-re)>O.whave&&O.sane){P.msg="invalid distance too far back",O.mode=30;break}ye=re>O.wnext?(re-=O.wnext,O.wsize-re):O.wnext-re,re>O.length&&(re=O.length),Ne=O.window}else Ne=X,ye=te-O.offset,re=O.length;for(x<re&&(re=x),x-=re,O.length-=re;X[te++]=Ne[ye++],--re;);O.length===0&&(O.mode=21);break;case 26:if(x===0)break e;X[te++]=O.length,x--,O.mode=21;break;case 27:if(O.wrap){for(;V<32;){if(j===0)break e;j--,Z|=K[J++]<<V,V+=8}if(pe-=x,P.total_out+=pe,O.total+=pe,pe&&(P.adler=O.check=O.flags?l(O.check,X,pe,te-pe):o(O.check,X,pe,te-pe)),pe=x,(O.flags?Z:v(Z))!==O.check){P.msg="incorrect data check",O.mode=30;break}V=Z=0}O.mode=28;case 28:if(O.wrap&&O.flags){for(;V<32;){if(j===0)break e;j--,Z+=K[J++]<<V,V+=8}if(Z!==(4294967295&O.total)){P.msg="incorrect length check",O.mode=30;break}V=Z=0}O.mode=29;case 29:ae=1;break e;case 30:ae=-3;break e;case 31:return-4;case 32:default:return d}return P.next_out=te,P.avail_out=x,P.next_in=J,P.avail_in=j,O.hold=Z,O.bits=V,(O.wsize||pe!==P.avail_out&&O.mode<30&&(O.mode<27||Q!==4))&&F(P,P.output,P.next_out,pe-P.avail_out)?(O.mode=31,-4):(ce-=P.avail_in,pe-=P.avail_out,P.total_in+=ce,P.total_out+=pe,O.total+=pe,O.wrap&&pe&&(P.adler=O.check=O.flags?l(O.check,X,pe,P.next_out-pe):o(O.check,X,pe,P.next_out-pe)),P.data_type=O.bits+(O.last?64:0)+(O.mode===12?128:0)+(O.mode===20||O.mode===15?256:0),(ce==0&&pe===0||Q===4)&&ae===h&&(ae=-5),ae)},s.inflateEnd=function(P){if(!P||!P.state)return d;var Q=P.state;return Q.window&&(Q.window=null),P.state=null,h},s.inflateGetHeader=function(P,Q){var O;return P&&P.state&&2&(O=P.state).wrap?((O.head=Q).done=!1,h):d},s.inflateSetDictionary=function(P,Q){var O,K=Q.length;return P&&P.state?(O=P.state).wrap!==0&&O.mode!==11?d:O.mode===11&&o(1,Q,K,0)!==O.check?-3:F(P,Q,K,K)?(O.mode=31,-4):(O.havedict=1,h):d},s.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,i,s){var r=t("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];i.exports=function(u,f,h,d,m,p,_,v){var y,w,A,E,C,R,D,N,L,F=v.bits,P=0,Q=0,O=0,K=0,X=0,J=0,te=0,j=0,x=0,Z=0,V=null,ce=0,pe=new r.Buf16(16),re=new r.Buf16(16),ye=null,Ne=0;for(P=0;P<=15;P++)pe[P]=0;for(Q=0;Q<d;Q++)pe[f[h+Q]]++;for(X=F,K=15;1<=K&&pe[K]===0;K--);if(K<X&&(X=K),K===0)return m[p++]=20971520,m[p++]=20971520,v.bits=1,0;for(O=1;O<K&&pe[O]===0;O++);for(X<O&&(X=O),P=j=1;P<=15;P++)if(j<<=1,(j-=pe[P])<0)return-1;if(0<j&&(u===0||K!==1))return-1;for(re[1]=0,P=1;P<15;P++)re[P+1]=re[P]+pe[P];for(Q=0;Q<d;Q++)f[h+Q]!==0&&(_[re[f[h+Q]]++]=Q);if(R=u===0?(V=ye=_,19):u===1?(V=o,ce-=257,ye=l,Ne-=257,256):(V=a,ye=c,-1),P=O,C=p,te=Q=Z=0,A=-1,E=(x=1<<(J=X))-1,u===1&&852<x||u===2&&592<x)return 1;for(;;){for(D=P-te,L=_[Q]<R?(N=0,_[Q]):_[Q]>R?(N=ye[Ne+_[Q]],V[ce+_[Q]]):(N=96,0),y=1<<P-te,O=w=1<<J;m[C+(Z>>te)+(w-=y)]=D<<24|N<<16|L|0,w!==0;);for(y=1<<P-1;Z&y;)y>>=1;if(y!==0?(Z&=y-1,Z+=y):Z=0,Q++,--pe[P]==0){if(P===K)break;P=f[h+_[Q]]}if(X<P&&(Z&E)!==A){for(te===0&&(te=X),C+=O,j=1<<(J=P-te);J+te<K&&!((j-=pe[J+te])<=0);)J++,j<<=1;if(x+=1<<J,u===1&&852<x||u===2&&592<x)return 1;m[A=Z&E]=X<<24|J<<16|C-p|0}}return Z!==0&&(m[C+Z]=P-te<<24|64<<16|0),v.bits=X,0}},{"../utils/common":41}],51:[function(t,i,s){i.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,i,s){var r=t("../utils/common"),o=0,l=1;function a($){for(var ne=$.length;0<=--ne;)$[ne]=0}var c=0,u=29,f=256,h=f+1+u,d=30,m=19,p=2*h+1,_=15,v=16,y=7,w=256,A=16,E=17,C=18,R=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],D=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],N=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],L=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],F=new Array(2*(h+2));a(F);var P=new Array(2*d);a(P);var Q=new Array(512);a(Q);var O=new Array(256);a(O);var K=new Array(u);a(K);var X,J,te,j=new Array(d);function x($,ne,me,le,ie){this.static_tree=$,this.extra_bits=ne,this.extra_base=me,this.elems=le,this.max_length=ie,this.has_stree=$&&$.length}function Z($,ne){this.dyn_tree=$,this.max_code=0,this.stat_desc=ne}function V($){return $<256?Q[$]:Q[256+($>>>7)]}function ce($,ne){$.pending_buf[$.pending++]=255&ne,$.pending_buf[$.pending++]=ne>>>8&255}function pe($,ne,me){$.bi_valid>v-me?($.bi_buf|=ne<<$.bi_valid&65535,ce($,$.bi_buf),$.bi_buf=ne>>v-$.bi_valid,$.bi_valid+=me-v):($.bi_buf|=ne<<$.bi_valid&65535,$.bi_valid+=me)}function re($,ne,me){pe($,me[2*ne],me[2*ne+1])}function ye($,ne){for(var me=0;me|=1&$,$>>>=1,me<<=1,0<--ne;);return me>>>1}function Ne($,ne,me){var le,ie,be=new Array(_+1),we=0;for(le=1;le<=_;le++)be[le]=we=we+me[le-1]<<1;for(ie=0;ie<=ne;ie++){var Ae=$[2*ie+1];Ae!==0&&($[2*ie]=ye(be[Ae]++,Ae))}}function Y($){var ne;for(ne=0;ne<h;ne++)$.dyn_ltree[2*ne]=0;for(ne=0;ne<d;ne++)$.dyn_dtree[2*ne]=0;for(ne=0;ne<m;ne++)$.bl_tree[2*ne]=0;$.dyn_ltree[2*w]=1,$.opt_len=$.static_len=0,$.last_lit=$.matches=0}function Ce($){8<$.bi_valid?ce($,$.bi_buf):0<$.bi_valid&&($.pending_buf[$.pending++]=$.bi_buf),$.bi_buf=0,$.bi_valid=0}function We($,ne,me,le){var ie=2*ne,be=2*me;return $[ie]<$[be]||$[ie]===$[be]&&le[ne]<=le[me]}function se($,ne,me){for(var le=$.heap[me],ie=me<<1;ie<=$.heap_len&&(ie<$.heap_len&&We(ne,$.heap[ie+1],$.heap[ie],$.depth)&&ie++,!We(ne,le,$.heap[ie],$.depth));)$.heap[me]=$.heap[ie],me=ie,ie<<=1;$.heap[me]=le}function Me($,ne,me){var le,ie,be,we,Ae=0;if($.last_lit!==0)for(;le=$.pending_buf[$.d_buf+2*Ae]<<8|$.pending_buf[$.d_buf+2*Ae+1],ie=$.pending_buf[$.l_buf+Ae],Ae++,le===0?re($,ie,ne):(re($,(be=O[ie])+f+1,ne),(we=R[be])!==0&&pe($,ie-=K[be],we),re($,be=V(--le),me),(we=D[be])!==0&&pe($,le-=j[be],we)),Ae<$.last_lit;);re($,w,ne)}function he($,ne){var me,le,ie,be=ne.dyn_tree,we=ne.stat_desc.static_tree,Ae=ne.stat_desc.has_stree,ge=ne.stat_desc.elems,Be=-1;for($.heap_len=0,$.heap_max=p,me=0;me<ge;me++)be[2*me]!==0?($.heap[++$.heap_len]=Be=me,$.depth[me]=0):be[2*me+1]=0;for(;$.heap_len<2;)be[2*(ie=$.heap[++$.heap_len]=Be<2?++Be:0)]=1,$.depth[ie]=0,$.opt_len--,Ae&&($.static_len-=we[2*ie+1]);for(ne.max_code=Be,me=$.heap_len>>1;1<=me;me--)se($,be,me);for(ie=ge;me=$.heap[1],$.heap[1]=$.heap[$.heap_len--],se($,be,1),le=$.heap[1],$.heap[--$.heap_max]=me,$.heap[--$.heap_max]=le,be[2*ie]=be[2*me]+be[2*le],$.depth[ie]=($.depth[me]>=$.depth[le]?$.depth[me]:$.depth[le])+1,be[2*me+1]=be[2*le+1]=ie,$.heap[1]=ie++,se($,be,1),2<=$.heap_len;);$.heap[--$.heap_max]=$.heap[1],function(ve,Pe){var Se,tt,Ke,Ee,it,De,ze=Pe.dyn_tree,Re=Pe.max_code,ut=Pe.stat_desc.static_tree,Bt=Pe.stat_desc.has_stree,gt=Pe.stat_desc.extra_bits,At=Pe.stat_desc.extra_base,jt=Pe.stat_desc.max_length,nn=0;for(Ee=0;Ee<=_;Ee++)ve.bl_count[Ee]=0;for(ze[2*ve.heap[ve.heap_max]+1]=0,Se=ve.heap_max+1;Se<p;Se++)jt<(Ee=ze[2*ze[2*(tt=ve.heap[Se])+1]+1]+1)&&(Ee=jt,nn++),ze[2*tt+1]=Ee,Re<tt||(ve.bl_count[Ee]++,it=0,At<=tt&&(it=gt[tt-At]),De=ze[2*tt],ve.opt_len+=De*(Ee+it),Bt&&(ve.static_len+=De*(ut[2*tt+1]+it)));if(nn!==0){do{for(Ee=jt-1;ve.bl_count[Ee]===0;)Ee--;ve.bl_count[Ee]--,ve.bl_count[Ee+1]+=2,ve.bl_count[jt]--,nn-=2}while(0<nn);for(Ee=jt;Ee!==0;Ee--)for(tt=ve.bl_count[Ee];tt!==0;)Re<(Ke=ve.heap[--Se])||(ze[2*Ke+1]!==Ee&&(ve.opt_len+=(Ee-ze[2*Ke+1])*ze[2*Ke],ze[2*Ke+1]=Ee),tt--)}}($,ne),Ne(be,Be,$.bl_count)}function M($,ne,me){var le,ie,be=-1,we=ne[1],Ae=0,ge=7,Be=4;for(we===0&&(ge=138,Be=3),ne[2*(me+1)+1]=65535,le=0;le<=me;le++)ie=we,we=ne[2*(le+1)+1],++Ae<ge&&ie===we||(Ae<Be?$.bl_tree[2*ie]+=Ae:ie!==0?(ie!==be&&$.bl_tree[2*ie]++,$.bl_tree[2*A]++):Ae<=10?$.bl_tree[2*E]++:$.bl_tree[2*C]++,be=ie,Be=(Ae=0)===we?(ge=138,3):ie===we?(ge=6,3):(ge=7,4))}function ae($,ne,me){var le,ie,be=-1,we=ne[1],Ae=0,ge=7,Be=4;for(we===0&&(ge=138,Be=3),le=0;le<=me;le++)if(ie=we,we=ne[2*(le+1)+1],!(++Ae<ge&&ie===we)){if(Ae<Be)for(;re($,ie,$.bl_tree),--Ae!=0;);else ie!==0?(ie!==be&&(re($,ie,$.bl_tree),Ae--),re($,A,$.bl_tree),pe($,Ae-3,2)):Ae<=10?(re($,E,$.bl_tree),pe($,Ae-3,3)):(re($,C,$.bl_tree),pe($,Ae-11,7));be=ie,Be=(Ae=0)===we?(ge=138,3):ie===we?(ge=6,3):(ge=7,4)}}a(j);var de=!1;function ee($,ne,me,le){pe($,(c<<1)+(le?1:0),3),function(ie,be,we,Ae){Ce(ie),Ae&&(ce(ie,we),ce(ie,~we)),r.arraySet(ie.pending_buf,ie.window,be,we,ie.pending),ie.pending+=we}($,ne,me,!0)}s._tr_init=function($){de||(function(){var ne,me,le,ie,be,we=new Array(_+1);for(ie=le=0;ie<u-1;ie++)for(K[ie]=le,ne=0;ne<1<<R[ie];ne++)O[le++]=ie;for(O[le-1]=ie,ie=be=0;ie<16;ie++)for(j[ie]=be,ne=0;ne<1<<D[ie];ne++)Q[be++]=ie;for(be>>=7;ie<d;ie++)for(j[ie]=be<<7,ne=0;ne<1<<D[ie]-7;ne++)Q[256+be++]=ie;for(me=0;me<=_;me++)we[me]=0;for(ne=0;ne<=143;)F[2*ne+1]=8,ne++,we[8]++;for(;ne<=255;)F[2*ne+1]=9,ne++,we[9]++;for(;ne<=279;)F[2*ne+1]=7,ne++,we[7]++;for(;ne<=287;)F[2*ne+1]=8,ne++,we[8]++;for(Ne(F,h+1,we),ne=0;ne<d;ne++)P[2*ne+1]=5,P[2*ne]=ye(ne,5);X=new x(F,R,f+1,h,_),J=new x(P,D,0,d,_),te=new x(new Array(0),N,0,m,y)}(),de=!0),$.l_desc=new Z($.dyn_ltree,X),$.d_desc=new Z($.dyn_dtree,J),$.bl_desc=new Z($.bl_tree,te),$.bi_buf=0,$.bi_valid=0,Y($)},s._tr_stored_block=ee,s._tr_flush_block=function($,ne,me,le){var ie,be,we=0;0<$.level?($.strm.data_type===2&&($.strm.data_type=function(Ae){var ge,Be=4093624447;for(ge=0;ge<=31;ge++,Be>>>=1)if(1&Be&&Ae.dyn_ltree[2*ge]!==0)return o;if(Ae.dyn_ltree[18]!==0||Ae.dyn_ltree[20]!==0||Ae.dyn_ltree[26]!==0)return l;for(ge=32;ge<f;ge++)if(Ae.dyn_ltree[2*ge]!==0)return l;return o}($)),he($,$.l_desc),he($,$.d_desc),we=function(Ae){var ge;for(M(Ae,Ae.dyn_ltree,Ae.l_desc.max_code),M(Ae,Ae.dyn_dtree,Ae.d_desc.max_code),he(Ae,Ae.bl_desc),ge=m-1;3<=ge&&Ae.bl_tree[2*L[ge]+1]===0;ge--);return Ae.opt_len+=3*(ge+1)+5+5+4,ge}($),ie=$.opt_len+3+7>>>3,(be=$.static_len+3+7>>>3)<=ie&&(ie=be)):ie=be=me+5,me+4<=ie&&ne!==-1?ee($,ne,me,le):$.strategy===4||be===ie?(pe($,2+(le?1:0),3),Me($,F,P)):(pe($,4+(le?1:0),3),function(Ae,ge,Be,ve){var Pe;for(pe(Ae,ge-257,5),pe(Ae,Be-1,5),pe(Ae,ve-4,4),Pe=0;Pe<ve;Pe++)pe(Ae,Ae.bl_tree[2*L[Pe]+1],3);ae(Ae,Ae.dyn_ltree,ge-1),ae(Ae,Ae.dyn_dtree,Be-1)}($,$.l_desc.max_code+1,$.d_desc.max_code+1,we+1),Me($,$.dyn_ltree,$.dyn_dtree)),Y($),le&&Ce($)},s._tr_tally=function($,ne,me){return $.pending_buf[$.d_buf+2*$.last_lit]=ne>>>8&255,$.pending_buf[$.d_buf+2*$.last_lit+1]=255&ne,$.pending_buf[$.l_buf+$.last_lit]=255&me,$.last_lit++,ne===0?$.dyn_ltree[2*me]++:($.matches++,ne--,$.dyn_ltree[2*(O[me]+f+1)]++,$.dyn_dtree[2*V(ne)]++),$.last_lit===$.lit_bufsize-1},s._tr_align=function($){pe($,2,3),re($,w,F),function(ne){ne.bi_valid===16?(ce(ne,ne.bi_buf),ne.bi_buf=0,ne.bi_valid=0):8<=ne.bi_valid&&(ne.pending_buf[ne.pending++]=255&ne.bi_buf,ne.bi_buf>>=8,ne.bi_valid-=8)}($)}},{"../utils/common":41}],53:[function(t,i,s){i.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,i,s){(function(r){(function(o,l){if(!o.setImmediate){var a,c,u,f,h=1,d={},m=!1,p=o.document,_=Object.getPrototypeOf&&Object.getPrototypeOf(o);_=_&&_.setTimeout?_:o,a={}.toString.call(o.process)==="[object process]"?function(A){process.nextTick(function(){y(A)})}:function(){if(o.postMessage&&!o.importScripts){var A=!0,E=o.onmessage;return o.onmessage=function(){A=!1},o.postMessage("","*"),o.onmessage=E,A}}()?(f="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",w,!1):o.attachEvent("onmessage",w),function(A){o.postMessage(f+A,"*")}):o.MessageChannel?((u=new MessageChannel).port1.onmessage=function(A){y(A.data)},function(A){u.port2.postMessage(A)}):p&&"onreadystatechange"in p.createElement("script")?(c=p.documentElement,function(A){var E=p.createElement("script");E.onreadystatechange=function(){y(A),E.onreadystatechange=null,c.removeChild(E),E=null},c.appendChild(E)}):function(A){setTimeout(y,0,A)},_.setImmediate=function(A){typeof A!="function"&&(A=new Function(""+A));for(var E=new Array(arguments.length-1),C=0;C<E.length;C++)E[C]=arguments[C+1];var R={callback:A,args:E};return d[h]=R,a(h),h++},_.clearImmediate=v}function v(A){delete d[A]}function y(A){if(m)setTimeout(y,0,A);else{var E=d[A];if(E){m=!0;try{(function(C){var R=C.callback,D=C.args;switch(D.length){case 0:R();break;case 1:R(D[0]);break;case 2:R(D[0],D[1]);break;case 3:R(D[0],D[1],D[2]);break;default:R.apply(l,D)}})(E)}finally{v(A),m=!1}}}}function w(A){A.source===o&&typeof A.data=="string"&&A.data.indexOf(f)===0&&y(+A.data.slice(f.length))}})(typeof self>"u"?r===void 0?this:r:self)}).call(this,typeof $r<"u"?$r:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Soe);const Eoe=I0;function Z3(n,e,t){const i=n.slice();return i[15]=e[t],i}function x3(n){let e,t=n[15]+"",i,s,r;return{c(){e=k("option"),i=q(t),this.h()},l(o){e=T(o,"OPTION",{});var l=I(e);i=z(l,t),l.forEach(b),this.h()},h(){e.__value=s=n[15],e.value=e.__value,e.selected=r=n[0]===n[15]},m(o,l){H(o,e,l),g(e,i)},p(o,l){l&128&&t!==(t=o[15]+"")&&Le(i,t),l&128&&s!==(s=o[15])&&(e.__value=s,e.value=e.__value),l&129&&r!==(r=o[0]===o[15])&&(e.selected=r)},d(o){o&&b(e)}}}function woe(n){let e,t,i,s,r,o,l,a,c,u,f,h,d,m,p,_,v,y,w,A,E,C,R,D,N,L,F,P,Q,O,K,X,J=n[7],te=[];for(let j=0;j<J.length;j+=1)te[j]=x3(Z3(n,J,j));return{c(){e=k("div"),t=k("h1"),i=q("Manage other sheets"),s=U(),r=k("select"),o=k("option"),l=q("Main Sheet");for(let j=0;j<te.length;j+=1)te[j].c();c=U(),u=k("input"),f=U(),h=k("button"),d=q("Add New Sheet"),p=U(),_=k("br"),v=U(),y=k("div"),w=k("button"),A=q("Export all sheets"),E=U(),C=k("br"),R=U(),D=k("br"),N=U(),L=k("div"),F=k("button"),P=q("Import all sheets"),Q=U(),O=k("input"),this.h()},l(j){e=T(j,"DIV",{class:!0});var x=I(e);t=T(x,"H1",{});var Z=I(t);i=z(Z,"Manage other sheets"),Z.forEach(b),s=W(x),r=T(x,"SELECT",{});var V=I(r);o=T(V,"OPTION",{});var ce=I(o);l=z(ce,"Main Sheet"),ce.forEach(b);for(let Ce=0;Ce<te.length;Ce+=1)te[Ce].l(V);V.forEach(b),c=W(x),u=T(x,"INPUT",{}),f=W(x),h=T(x,"BUTTON",{});var pe=I(h);d=z(pe,"Add New Sheet"),pe.forEach(b),p=W(x),_=T(x,"BR",{}),v=W(x),y=T(x,"DIV",{});var re=I(y);w=T(re,"BUTTON",{});var ye=I(w);A=z(ye,"Export all sheets"),ye.forEach(b),E=W(re),C=T(re,"BR",{}),R=W(re),D=T(re,"BR",{}),N=W(re),L=T(re,"DIV",{});var Ne=I(L);F=T(Ne,"BUTTON",{});var Y=I(F);P=z(Y,"Import all sheets"),Y.forEach(b),Q=W(Ne),O=T(Ne,"INPUT",{type:!0}),Ne.forEach(b),re.forEach(b),x.forEach(b),this.h()},h(){o.__value="sheet",o.value=o.__value,o.selected=a=n[0]==="sheet",h.disabled=m=!n[5]||n[3].includes(n[5]),S(O,"type","file"),O.multiple=!0,S(e,"class","container")},m(j,x){H(j,e,x),g(e,t),g(t,i),g(e,s),g(e,r),g(r,o),g(o,l);for(let Z=0;Z<te.length;Z+=1)te[Z].m(r,null);g(e,c),g(e,u),Ms(u,n[5]),g(e,f),g(e,h),g(h,d),g(e,p),g(e,_),g(e,v),g(e,y),g(y,w),g(w,A),g(y,E),g(y,C),g(y,R),g(y,D),g(y,N),g(y,L),g(L,F),g(F,P),g(L,Q),g(L,O),n[13](O),K||(X=[_e(r,"change",n[10]),_e(u,"input",n[11]),_e(h,"click",n[12]),_e(w,"click",function(){Mn(n[9])&&n[9].apply(this,arguments)}),_e(F,"click",function(){Mn(n[8])&&n[8].apply(this,arguments)}),_e(O,"change",n[14])],K=!0)},p(j,[x]){if(n=j,x&1&&a!==(a=n[0]==="sheet")&&(o.selected=a),x&129){J=n[7];let Z;for(Z=0;Z<J.length;Z+=1){const V=Z3(n,J,Z);te[Z]?te[Z].p(V,x):(te[Z]=x3(V),te[Z].c(),te[Z].m(r,null))}for(;Z<te.length;Z+=1)te[Z].d(1);te.length=J.length}x&32&&u.value!==n[5]&&Ms(u,n[5]),x&40&&m!==(m=!n[5]||n[3].includes(n[5]))&&(h.disabled=m)},i:Xe,o:Xe,d(j){j&&b(e),Ft(te,j),n[13](null),K=!1,an(X)}}}function Aoe(n,e,t){let i,s,r,{curSheet:o}=e,{onChangeCurSheet:l}=e,{onAddSheet:a}=e,{otherSheetNames:c}=e,u,f,h=null;const d=y=>l(y.currentTarget.value);function m(){u=this.value,t(5,u)}const p=()=>{a(u),t(5,u="")};function _(y){Ut[y?"unshift":"push"](()=>{f=y,t(6,f)})}const v=y=>{var w;t(4,h=((w=y==null?void 0:y.currentTarget)==null?void 0:w.files)||null)};return n.$$set=y=>{"curSheet"in y&&t(0,o=y.curSheet),"onChangeCurSheet"in y&&t(1,l=y.onChangeCurSheet),"onAddSheet"in y&&t(2,a=y.onAddSheet),"otherSheetNames"in y&&t(3,c=y.otherSheetNames)},n.$$.update=()=>{n.$$.dirty&8&&t(9,i=async()=>{let y=new Eoe;try{console.log(c),[...c,"sheet"].forEach(w=>{var E;console.log("downloading",w);const A=localStorage.getItem(w)||"";(E=y.folder("fe3h-sheets"))==null||E.file(w,A)}),await(y==null?void 0:y.generateAsync({type:"blob"}).then(w=>{yoe.saveAs(w,"fe3h-sheets.zip")}))}catch(w){console.error(w)}}),n.$$.dirty&24&&t(8,s=()=>{if(!h||!(h!=null&&h.length)){alert("no sheets provided");return}let y=new Set(c);try{Array.from(h).forEach(A=>{const E=A.name.split(".")[0];y.add(E);const C=new FileReader;C.onload=R=>{var D,N,L;console.log(E,(D=R.target)==null?void 0:D.result),localStorage.setItem(E,((L=(N=R.target)==null?void 0:N.result)==null?void 0:L.toString())||"")},C.readAsText(A,"UTF-8")}),console.log(y)}catch(w){console.log(w)}localStorage.setItem("otherSheetNames",JSON.stringify(Array.from(y).filter(w=>w!="sheet"))),location.reload()}),n.$$.dirty&8&&t(7,r=c.sort())},[o,l,a,c,h,u,f,r,s,i,d,m,p,_,v]}class Coe extends st{constructor(e){super(),rt(this,e,Aoe,woe,kt,{curSheet:0,onChangeCurSheet:1,onAddSheet:2,otherSheetNames:3})}}var koe="firebase",Toe="9.17.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Aa(koe,Toe,"app");const{document:hl}=Ju;function $3(n){let e,t;return e=new Fre({props:{show:n[53],$$slots:{default:[Ioe]},$$scope:{ctx:n}}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,s){const r={};s[1]&4194304&&(r.show=i[53]),s[0]&2147352575|s[1]&4194303|s[2]&512&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function eT(n){let e,t;return e=new coe({props:{unlockedClasses:n[7],classXP:n[6],weaponXP:n[12],onUpdateClassXP:n[33],onUpdateWeaponXP:n[34],customCombatArts:n[47],customCombatSkills:n[48],customWeapons:n[49],playerSkillProficiency:n[15],playerSkillBonus:n[50],playerStats:n[51],playerName:n[16],onUpdatePlayerStats:n[44],onUpdateCustomCombatArts:n[29],onUpdateCustomCombatSkills:n[28],onUpdateCustomWeapons:n[30],equippedClass:n[9]}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,s){const r={};s[0]&128&&(r.unlockedClasses=i[7]),s[0]&64&&(r.classXP=i[6]),s[0]&4096&&(r.weaponXP=i[12]),s[1]&4&&(r.onUpdateClassXP=i[33]),s[1]&8&&(r.onUpdateWeaponXP=i[34]),s[1]&65536&&(r.customCombatArts=i[47]),s[1]&131072&&(r.customCombatSkills=i[48]),s[1]&262144&&(r.customWeapons=i[49]),s[0]&32768&&(r.playerSkillProficiency=i[15]),s[1]&524288&&(r.playerSkillBonus=i[50]),s[1]&1048576&&(r.playerStats=i[51]),s[0]&65536&&(r.playerName=i[16]),s[1]&8192&&(r.onUpdatePlayerStats=i[44]),s[0]&536870912&&(r.onUpdateCustomCombatArts=i[29]),s[0]&268435456&&(r.onUpdateCustomCombatSkills=i[28]),s[0]&1073741824&&(r.onUpdateCustomWeapons=i[30]),s[0]&512&&(r.equippedClass=i[9]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function tT(n){let e,t;return e=new wse({props:{fullSheet:n[0],onChangeSheet:n[45]}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,s){const r={};s[0]&1&&(r.fullSheet=i[0]),s[1]&16384&&(r.onChangeSheet=i[45]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function nT(n){let e,t;return e=new boe({}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function iT(n){let e,t;return e=new Coe({props:{onAddSheet:n[27],otherSheetNames:n[3],curSheet:n[2],onChangeCurSheet:n[54]}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,s){const r={};s[0]&134217728&&(r.onAddSheet=i[27]),s[0]&8&&(r.otherSheetNames=i[3]),s[0]&4&&(r.curSheet=i[2]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function sT(n){let e,t;return e=new X4({props:{chatEntries:n[4],spoilersOn:n[5],toggleSpoilersOn:n[23],alreadyRevealed:n[22],setAlreadyRevealed:n[55]}}),{c(){ke(e.$$.fragment)},l(i){Oe(e.$$.fragment,i)},m(i,s){Te(e,i,s),t=!0},p(i,s){const r={};s[0]&16&&(r.chatEntries=i[4]),s[0]&32&&(r.spoilersOn=i[5]),s[0]&8388608&&(r.toggleSpoilersOn=i[23]),s[0]&4194304&&(r.alreadyRevealed=i[22]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){G(e.$$.fragment,i),t=!1},d(i){Ie(e,i)}}}function Ioe(n){let e,t,i,s,r,o,l,a,c,u,f,h,d,m,p,_,v,y,w,A,E,C,R,D,N,L;r=new Nre({props:{playerName:n[16],onUpdatePlayerName:n[43],fullSheet:n[0],onChangePage:n[35],currentPage:n[20],homeMode:n[21],toggleHomeMode:n[52],otherSheetNames:n[3],curSheet:n[2],onChangeCurSheet:n[54]}}),c=new Ore({props:{playerName:n[16],homeMode:n[21],allWeapons:n[26],allCombatSkills:n[8],allCombatArts:n[25],playerStats:n[51],onUpdatePlayerStats:n[44],playerSkillBonus:n[50],playerSkillProficiency:n[15],onToggleSkillProficiency:n[42],equippedWeapons:n[13],onToggleEquippedWeapons:n[37],equippedCombatArts:n[14],onToggleCombatArts:n[38],equippedClass:n[9],setEquippedClass:n[41],equippedCombatSkills:n[11],onToggleCombatSkill:n[10],unlockedClasses:n[7],onUpdateUnlockedClasses:n[36],masteredClasses:n[24],playerCrest:n[46],onUpdateCrest:n[32],selectedCombatArt:n[18],setSelectedCombatArt:n[39],selectedWeapon:n[19],setSelectedWeapon:n[40],weaponUses:n[1],onUpdateWeaponUses:n[31],customCombatSkills:n[48],onUpdateCustomCombatSkills:n[28],customWeapons:n[49],onUpdateCustomWeapons:n[30],customCombatArts:n[47],onUpdateCustomCombatArts:n[29],chatEntries:n[4],spoilersOn:n[5],toggleSpoilersOn:n[23],alreadyRevealed:n[22],setAlreadyRevealed:n[55]}});let F=n[20]==="XP"&&eT(n),P=n[20]==="EDITOR"&&tT(n),Q=n[20]==="DICE_EDITOR"&&nT(),O=n[20]==="OTHER_SHEETS"&&iT(n),K=n[20]==="ROLLS"&&sT(n);return{c(){e=k("div"),t=k("span"),i=U(),s=k("div"),ke(r.$$.fragment),o=U(),l=k("div"),a=k("div"),ke(c.$$.fragment),f=U(),h=k("div"),F&&F.c(),m=U(),p=k("div"),P&&P.c(),v=U(),y=k("div"),Q&&Q.c(),A=U(),E=k("div"),O&&O.c(),R=U(),D=k("div"),K&&K.c(),this.h()},l(X){e=T(X,"DIV",{id:!0,class:!0});var J=I(e);t=T(J,"SPAN",{id:!0,class:!0}),I(t).forEach(b),J.forEach(b),i=W(X),s=T(X,"DIV",{class:!0});var te=I(s);Oe(r.$$.fragment,te),te.forEach(b),o=W(X),l=T(X,"DIV",{class:!0});var j=I(l);a=T(j,"DIV",{class:!0});var x=I(a);Oe(c.$$.fragment,x),x.forEach(b),f=W(j),h=T(j,"DIV",{class:!0});var Z=I(h);F&&F.l(Z),Z.forEach(b),m=W(j),p=T(j,"DIV",{class:!0});var V=I(p);P&&P.l(V),V.forEach(b),v=W(j),y=T(j,"DIV",{class:!0});var ce=I(y);Q&&Q.l(ce),ce.forEach(b),A=W(j),E=T(j,"DIV",{class:!0});var pe=I(E);O&&O.l(pe),pe.forEach(b),R=W(j),D=T(j,"DIV",{class:!0});var re=I(D);K&&K.l(re),re.forEach(b),j.forEach(b),this.h()},h(){S(t,"id","dice-box-result"),S(t,"class","svelte-1l595ii"),S(e,"id","dice-box"),S(e,"class","svelte-1l595ii"),S(s,"class","header svelte-1l595ii"),S(a,"class",u=Ze(n[20]==="HOME"?"":"invisible")+" svelte-1l595ii"),S(h,"class",d=Ze(n[20]==="XP"?"":"invisible")+" svelte-1l595ii"),S(p,"class",_=Ze(n[20]==="EDITOR"?"":"invisible")+" svelte-1l595ii"),S(y,"class",w=Ze(n[20]==="DICE_EDITOR"?"":"invisible")+" svelte-1l595ii"),S(E,"class",C=Ze(n[20]==="OTHER_SHEETS"?"":"invisible")+" svelte-1l595ii"),S(D,"class",N=Ze(n[20]==="ROLLS"?"":"invisible")+" svelte-1l595ii"),S(l,"class","content svelte-1l595ii")},m(X,J){H(X,e,J),g(e,t),H(X,i,J),H(X,s,J),Te(r,s,null),H(X,o,J),H(X,l,J),g(l,a),Te(c,a,null),g(l,f),g(l,h),F&&F.m(h,null),g(l,m),g(l,p),P&&P.m(p,null),g(l,v),g(l,y),Q&&Q.m(y,null),g(l,A),g(l,E),O&&O.m(E,null),g(l,R),g(l,D),K&&K.m(D,null),L=!0},p(X,J){const te={};J[0]&65536&&(te.playerName=X[16]),J[1]&4096&&(te.onUpdatePlayerName=X[43]),J[0]&1&&(te.fullSheet=X[0]),J[1]&16&&(te.onChangePage=X[35]),J[0]&1048576&&(te.currentPage=X[20]),J[0]&2097152&&(te.homeMode=X[21]),J[1]&2097152&&(te.toggleHomeMode=X[52]),J[0]&8&&(te.otherSheetNames=X[3]),J[0]&4&&(te.curSheet=X[2]),r.$set(te);const j={};J[0]&65536&&(j.playerName=X[16]),J[0]&2097152&&(j.homeMode=X[21]),J[0]&67108864&&(j.allWeapons=X[26]),J[0]&256&&(j.allCombatSkills=X[8]),J[0]&33554432&&(j.allCombatArts=X[25]),J[1]&1048576&&(j.playerStats=X[51]),J[1]&8192&&(j.onUpdatePlayerStats=X[44]),J[1]&524288&&(j.playerSkillBonus=X[50]),J[0]&32768&&(j.playerSkillProficiency=X[15]),J[1]&2048&&(j.onToggleSkillProficiency=X[42]),J[0]&8192&&(j.equippedWeapons=X[13]),J[1]&64&&(j.onToggleEquippedWeapons=X[37]),J[0]&16384&&(j.equippedCombatArts=X[14]),J[1]&128&&(j.onToggleCombatArts=X[38]),J[0]&512&&(j.equippedClass=X[9]),J[1]&1024&&(j.setEquippedClass=X[41]),J[0]&2048&&(j.equippedCombatSkills=X[11]),J[0]&1024&&(j.onToggleCombatSkill=X[10]),J[0]&128&&(j.unlockedClasses=X[7]),J[1]&32&&(j.onUpdateUnlockedClasses=X[36]),J[0]&16777216&&(j.masteredClasses=X[24]),J[1]&32768&&(j.playerCrest=X[46]),J[1]&2&&(j.onUpdateCrest=X[32]),J[0]&262144&&(j.selectedCombatArt=X[18]),J[1]&256&&(j.setSelectedCombatArt=X[39]),J[0]&524288&&(j.selectedWeapon=X[19]),J[1]&512&&(j.setSelectedWeapon=X[40]),J[0]&2&&(j.weaponUses=X[1]),J[1]&1&&(j.onUpdateWeaponUses=X[31]),J[1]&131072&&(j.customCombatSkills=X[48]),J[0]&268435456&&(j.onUpdateCustomCombatSkills=X[28]),J[1]&262144&&(j.customWeapons=X[49]),J[0]&1073741824&&(j.onUpdateCustomWeapons=X[30]),J[1]&65536&&(j.customCombatArts=X[47]),J[0]&536870912&&(j.onUpdateCustomCombatArts=X[29]),J[0]&16&&(j.chatEntries=X[4]),J[0]&32&&(j.spoilersOn=X[5]),J[0]&8388608&&(j.toggleSpoilersOn=X[23]),J[0]&4194304&&(j.alreadyRevealed=X[22]),c.$set(j),(!L||J[0]&1048576&&u!==(u=Ze(X[20]==="HOME"?"":"invisible")+" svelte-1l595ii"))&&S(a,"class",u),X[20]==="XP"?F?(F.p(X,J),J[0]&1048576&&B(F,1)):(F=eT(X),F.c(),B(F,1),F.m(h,null)):F&&(He(),G(F,1,1,()=>{F=null}),qe()),(!L||J[0]&1048576&&d!==(d=Ze(X[20]==="XP"?"":"invisible")+" svelte-1l595ii"))&&S(h,"class",d),X[20]==="EDITOR"?P?(P.p(X,J),J[0]&1048576&&B(P,1)):(P=tT(X),P.c(),B(P,1),P.m(p,null)):P&&(He(),G(P,1,1,()=>{P=null}),qe()),(!L||J[0]&1048576&&_!==(_=Ze(X[20]==="EDITOR"?"":"invisible")+" svelte-1l595ii"))&&S(p,"class",_),X[20]==="DICE_EDITOR"?Q?J[0]&1048576&&B(Q,1):(Q=nT(),Q.c(),B(Q,1),Q.m(y,null)):Q&&(He(),G(Q,1,1,()=>{Q=null}),qe()),(!L||J[0]&1048576&&w!==(w=Ze(X[20]==="DICE_EDITOR"?"":"invisible")+" svelte-1l595ii"))&&S(y,"class",w),X[20]==="OTHER_SHEETS"?O?(O.p(X,J),J[0]&1048576&&B(O,1)):(O=iT(X),O.c(),B(O,1),O.m(E,null)):O&&(He(),G(O,1,1,()=>{O=null}),qe()),(!L||J[0]&1048576&&C!==(C=Ze(X[20]==="OTHER_SHEETS"?"":"invisible")+" svelte-1l595ii"))&&S(E,"class",C),X[20]==="ROLLS"?K?(K.p(X,J),J[0]&1048576&&B(K,1)):(K=sT(X),K.c(),B(K,1),K.m(D,null)):K&&(He(),G(K,1,1,()=>{K=null}),qe()),(!L||J[0]&1048576&&N!==(N=Ze(X[20]==="ROLLS"?"":"invisible")+" svelte-1l595ii"))&&S(D,"class",N)},i(X){L||(B(r.$$.fragment,X),B(c.$$.fragment,X),B(F),B(P),B(Q),B(O),B(K),L=!0)},o(X){G(r.$$.fragment,X),G(c.$$.fragment,X),G(F),G(P),G(Q),G(O),G(K),L=!1},d(X){X&&b(e),X&&b(i),X&&b(s),Ie(r),X&&b(o),X&&b(l),Ie(c),F&&F.d(),P&&P.d(),Q&&Q.d(),O&&O.d(),K&&K.d()}}}function rT(n){let e,t;return{c(){e=k("div"),t=q("Loading"),this.h()},l(i){e=T(i,"DIV",{class:!0});var s=I(e);t=z(s,"Loading"),s.forEach(b),this.h()},h(){S(e,"class","not-ready svelte-1l595ii")},m(i,s){H(i,e,s),g(e,t)},d(i){i&&b(e)}}}function Ooe(n){let e,t,i,s,r,o,l,a,c,u;hl.title=r=n[16];let f=n[17]&&$3(n),h=!n[17]&&rT();return{c(){e=k("link"),t=k("link"),i=k("link"),s=k("link"),o=U(),l=k("div"),f&&f.c(),a=U(),h&&h.c(),this.h()},l(d){const m=jN("svelte-1welig4",hl.head);e=T(m,"LINK",{rel:!0,href:!0}),t=T(m,"LINK",{rel:!0,href:!0}),i=T(m,"LINK",{rel:!0,href:!0}),s=T(m,"LINK",{href:!0,rel:!0}),m.forEach(b),o=W(d),l=T(d,"DIV",{class:!0});var p=I(l);f&&f.l(p),a=W(p),h&&h.l(p),p.forEach(b),this.h()},h(){S(e,"rel","preconnect"),S(e,"href","https://fonts.googleapis.com"),S(t,"rel","preconnect"),S(t,"href","https://fonts.gstatic.com"),S(i,"rel","icon"),S(i,"href",zN+"/favicon.jpg"),S(s,"href","https://fonts.googleapis.com/css2?family=EB+Garamond:wght@400;500;600;700&family=Ibarra+Real+Nova:wght@400;500;700&display=swap&family=Great+Vibes&display=swap"),S(s,"rel","stylesheet"),S(l,"class",c=Ze(`${n[17]?"":"no-clicks"} container`)+" svelte-1l595ii")},m(d,m){g(hl.head,e),g(hl.head,t),g(hl.head,i),g(hl.head,s),H(d,o,m),H(d,l,m),f&&f.m(l,null),g(l,a),h&&h.m(l,null),u=!0},p(d,m){(!u||m[0]&65536)&&r!==(r=d[16])&&(hl.title=r),d[17]?f?(f.p(d,m),m[0]&131072&&B(f,1)):(f=$3(d),f.c(),B(f,1),f.m(l,a)):f&&(He(),G(f,1,1,()=>{f=null}),qe()),d[17]?h&&(h.d(1),h=null):h||(h=rT(),h.c(),h.m(l,null)),(!u||m[0]&131072&&c!==(c=Ze(`${d[17]?"":"no-clicks"} container`)+" svelte-1l595ii"))&&S(l,"class",c)},i(d){u||(B(f),u=!0)},o(d){G(f),u=!1},d(d){b(e),b(t),b(i),b(s),d&&b(o),d&&b(l),f&&f.d(),h&&h.d()}}}function Roe(n,e,t){let i,s,r,o,l,a,c,u,f,h,d,m,p,_,v,y,w,A,E,C,R,D,N,L,F,P,Q,O,K,X,J,te,j,x,Z,V,ce,pe,re,ye,Ne,Y,Ce,We;HN(n,Pre,De=>t(53,We=De));const Me=pT({apiKey:"AIzaSyBds7SmknRyVNwc5XTC6TvFzQoR_ACsLTo",authDomain:"fe3h-sheet.firebaseapp.com",projectId:"fe3h-sheet",storageBucket:"fe3h-sheet.appspot.com",messagingSenderId:"149307616871",appId:"1:149307616871:web:1038f39d161deeb9372ec2"}),M=1e3*60*60*24,ae=new Date(Date.now()-M),de=eL(Me);xd(hs.DB,de);const ee={playerStats:kv,playerName:"No Name",playerSkills:G4,skillBonuses:K4,unlockedClasses:[],customWeapons:{},customCombatSkills:{},customCombatArts:{},classXP:{},weaponXP:{},crest:{type:"",isMajor:!1},equippedClass:"",equippedWeapons:[],equippedCombatSkills:[],equippedCombatArts:[]};let $=!1,ne=ee,me,le,ie={},be="HOME",we="sheet",Ae=[],ge=[],Be=0;const ve=hL(E4(de,"lobby","taboola",U4()),dL("date",">",fi.fromDate(ae))),Pe=yL(ve,De=>{const ze=[];De.forEach(Re=>{ze.push(Re.data())}),t(4,ge=ze)});br(()=>{Pe()});const Se=De=>{try{t(3,Ae=JSON.parse(localStorage.getItem("otherSheetNames")||"[]"))}catch(Re){console.log(Re)}const ze=localStorage.getItem(De);if(ze)try{t(0,ne={...ee,...JSON.parse(ze)})}catch(Re){console.error(Re)}else t(0,ne={...ee,playerName:De})},tt=De=>{t(2,we=De),w(),Se(De),localStorage.setItem(we,JSON.stringify(ne))};Mi(()=>{Se(we),t(17,$=!0),O0(()=>import("../../chunks/dice-box.es-150bdd15.js"),["../../chunks/dice-box.es-150bdd15.js","../../chunks/preload-helper-41c905a7.js"],import.meta.url).then(De=>{let ze;try{ze=JSON.parse(localStorage.getItem("diceBoxOptions")||"{}")}catch(ut){console.log(ut)}const Re=new De.default("#dice-box",{...jc,...ze});window.diceBoxContainer=document.getElementById("dice-box"),Re.init().then(()=>{window.diceBox=Re})})});let Ke=1/0,Ee={};const it=De=>{t(22,Ee[De]=!0,Ee)};return n.$$.update=()=>{n.$$.dirty[0]&2097152&&t(52,i=()=>{t(21,Be+=1)}),n.$$.dirty[0]&4|n.$$.dirty[1]&67108864&&t(45,A=De=>{w(),t(0,ne=De),localStorage.setItem(we,JSON.stringify(De))}),n.$$.dirty[0]&5&&t(56,E=(De,ze)=>{t(0,ne={...ne,[De]:ze}),localStorage.setItem(we,JSON.stringify(ne))}),n.$$.dirty[0]&1&&t(51,s=ne.playerStats),n.$$.dirty[0]&1&&t(15,r=ne.playerSkills),n.$$.dirty[0]&1&&t(50,o=ne.skillBonuses),n.$$.dirty[0]&1&&t(7,l=ne.unlockedClasses),n.$$.dirty[0]&1&&t(16,a=ne.playerName),n.$$.dirty[0]&1&&t(49,c=ne.customWeapons),n.$$.dirty[0]&1&&t(48,u=ne.customCombatSkills),n.$$.dirty[0]&1&&t(47,f=ne.customCombatArts),n.$$.dirty[0]&1&&t(6,h=ne.classXP),n.$$.dirty[0]&1&&t(12,d=ne.weaponXP),n.$$.dirty[0]&1&&t(46,m=ne.crest),n.$$.dirty[0]&1&&t(9,p=ne.equippedClass),n.$$.dirty[0]&1&&t(13,_=ne.equippedWeapons),n.$$.dirty[0]&1&&t(11,v=ne.equippedCombatSkills),n.$$.dirty[0]&1&&t(14,y=ne.equippedCombatArts),n.$$.dirty[1]&33554432&&t(44,C=De=>{E("playerStats",De)}),n.$$.dirty[1]&33554432&&t(43,R=De=>{E("playerName",De)}),n.$$.dirty[0]&32768|n.$$.dirty[1]&33554432&&t(42,D=De=>{const ze=r[De]||jn.NONE;let Re;ze===jn.NONE?Re=jn.PROFICIENT:ze===jn.PROFICIENT?Re=jn.EXPERT:ze===jn.EXPERT?Re=jn.AWFUL:ze===jn.AWFUL&&(Re=jn.NONE),E("playerSkills",{...r,[De]:Re})}),n.$$.dirty[0]&512|n.$$.dirty[1]&33554432&&t(41,N=De=>{t(9,p=De),E("equippedClass",p)}),n.$$.dirty[0]&16384|n.$$.dirty[1]&33554432&&t(38,P=De=>{y.indexOf(De)!==-1?t(14,y=y.filter(ze=>ze!==De)):y.length<po&&t(14,y=[...y,De]),E("equippedCombatArts",y)}),n.$$.dirty[0]&2048|n.$$.dirty[1]&33554432&&t(10,Q=De=>{v.indexOf(De)!==-1?t(11,v=v.filter(ze=>ze!==De)):v.length<go&&t(11,v=[...v,De]),E("equippedCombatSkills",v)}),n.$$.dirty[0]&8192|n.$$.dirty[1]&33554432&&t(37,O=De=>{_.includes(De)?t(13,_=_.filter(ze=>ze!==De)):_.length<Vl&&t(13,_=[..._,De]),E("equippedWeapons",_)}),n.$$.dirty[1]&33554432&&t(36,K=De=>{const ze=Object.values(kn),Re=[...De].sort((ut,Bt)=>{const gt=ze.indexOf(ut),At=ze.indexOf(Bt);return gt>At?1:-1});E("unlockedClasses",Re)}),n.$$.dirty[0]&4096|n.$$.dirty[1]&33554432&&t(34,J=(De,ze,Re,ut)=>{E("weaponXP",{...d,[De]:{total:ze,level:Re,mastered:ut}})}),n.$$.dirty[0]&64|n.$$.dirty[1]&33554432&&t(33,te=(De,ze,Re)=>{E("classXP",{...h,[De]:{total:ze,mastered:Re}})}),n.$$.dirty[1]&33554432&&t(32,j=De=>{E("crest",De)}),n.$$.dirty[0]&2&&t(31,x=(De,ze)=>{let Re=ze;ze<0&&(Re=ie[De]+ze),Re=Math.max(Re,0),t(1,ie={...ie,[De]:Re})}),n.$$.dirty[1]&33554432&&t(30,Z=De=>{E("customWeapons",De)}),n.$$.dirty[1]&33554432&&t(29,V=De=>{E("customCombatArts",De)}),n.$$.dirty[1]&33554432&&t(28,ce=De=>{E("customCombatSkills",De)}),n.$$.dirty[0]&8&&t(27,pe=De=>{t(3,Ae=[...Ae,De]),localStorage.setItem("otherSheetNames",JSON.stringify(Ae)),tt(De)}),n.$$.dirty[0]&513&&t(26,re=uoe(ne,p)),n.$$.dirty[0]&3585&&t(8,ye=hoe(ne,p,v,Q)),n.$$.dirty[0]&769&&t(25,Ne=moe(ne,p,ye.fullSet)),n.$$.dirty[0]&192&&t(24,Y=l.filter(De=>{var ze;return(ze=h[De])==null?void 0:ze.mastered})),n.$$.dirty[0]&48&&t(23,Ce=()=>{Ke===1/0?t(5,Ke=ge.length):t(5,Ke=1/0)})},t(57,w=()=>{t(9,p=""),t(13,_=[]),t(11,v=[]),t(14,y=[]),t(18,me=""),t(19,le=""),t(1,ie={})}),t(40,L=De=>{t(19,le=De)}),t(39,F=De=>{t(18,me=De)}),t(35,X=De=>{t(20,be=De)}),[ne,ie,we,Ae,ge,Ke,h,l,ye,p,Q,v,d,_,y,r,a,$,me,le,be,Be,Ee,Ce,Y,Ne,re,pe,ce,V,Z,x,j,te,J,X,K,O,P,F,L,N,D,R,C,A,m,f,u,c,o,s,i,We,tt,it,E,w]}class Woe extends st{constructor(e){super(),rt(this,e,Roe,Ooe,kt,{},null,[-1,-1,-1])}}export{Woe as default};
