import{_ as R0}from"../../chunks/preload-helper-41c905a7.js";import{S as rt,i as ot,s as It,k as C,q as z,a as F,l as k,m as T,r as G,h as b,c as j,n as S,b as X,H as p,C as Xe,o as Mi,p as ct,J as Se,e as tt,D as cs,f as B,g as He,t as Q,d as qe,E as us,F as fs,G as hs,K as _r,L as xe,v as Vt,x as Te,y as De,z as Oe,u as Be,A as Re,M as ds,N as Bn,O as an,P as Nn,Q as Ht,R as Qr,T as Yr,U as Zl,w as Cn,V as Pl,W as jN,X as Yu,Y as Ju,Z as $e,_ as uu,$ as Ro,a0 as Zd,a1 as fn,a2 as ir,a3 as sr,a4 as Mh,a5 as Vs,a6 as Zs,a7 as D0,a8 as ac,a9 as Zu,aa as xd,ab as HN,B as ci,ac as hI,ad as mg,ae as qN,af as Jb,ag as zN,ah as GN,ai as KN,aj as dI,ak as XN,I as QN}from"../../chunks/index-356c7614.js";import{b as mI,w as YN}from"../../chunks/paths-ce4d3c10.js";const Ke={STR:"pc_strength",DEX:"pc_dexterity",CON:"pc_constitution",INT:"pc_intelligence",WIS:"pc_wisdom",CHA:"pc_charisma"},pg={[Ke.STR]:"Strength",[Ke.DEX]:"Dexterity",[Ke.CON]:"Constitution",[Ke.INT]:"Intelligence",[Ke.WIS]:"Wisdom",[Ke.CHA]:"Charisma"},Gs={[Ke.STR]:"Str",[Ke.DEX]:"Dex",[Ke.CON]:"Con",[Ke.INT]:"Int",[Ke.WIS]:"Wis",[Ke.CHA]:"Cha",ANIMAL_HANDLING:"AnHan"};var st=(n=>(n.d2="1d2",n.d3="1d3",n.d4="1d4",n.d5="1d5",n.d6="1d6",n.d8="1d8",n.d10="1d10",n.d12="1d12",n.d20="1d20",n))(st||{});const os=(n,e=!1)=>`${n>=0?"+":"-"}${e?" ":""}${Math.abs(n)}`,Zb=n=>n?"Major":"Minor",Zi=(...n)=>n.map(t=>typeof t=="object"?Object.keys(t).filter(i=>t[i]).join(" "):t).join(" "),xb=n=>n<0?"Cant' Crit":n===0?"20":`${20-n} to 20`;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},JN=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const s=n[t++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=n[t++];e[i++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=n[t++],o=n[t++],l=n[t++],a=((s&7)<<18|(r&63)<<12|(o&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(a>>10)),e[i++]=String.fromCharCode(56320+(a&1023))}else{const r=n[t++],o=n[t++];e[i++]=String.fromCharCode((s&15)<<12|(r&63)<<6|o&63)}}return e.join("")},gI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const r=n[s],o=s+1<n.length,l=o?n[s+1]:0,a=s+2<n.length,c=a?n[s+2]:0,u=r>>2,f=(r&3)<<4|l>>4;let h=(l&15)<<2|c>>6,d=c&63;a||(d=64,o||(h=64)),i.push(t[u],t[f],t[h],t[d])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(pI(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):JN(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const r=t[n.charAt(s++)],l=s<n.length?t[n.charAt(s)]:0;++s;const c=s<n.length?t[n.charAt(s)]:64;++s;const f=s<n.length?t[n.charAt(s)]:64;if(++s,r==null||l==null||c==null||f==null)throw Error();const h=r<<2|l>>4;if(i.push(h),c!==64){const d=l<<4&240|c>>2;if(i.push(d),f!==64){const m=c<<6&192|f;i.push(m)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},ZN=function(n){const e=pI(n);return gI.encodeByteArray(e,!0)},Bh=function(n){return ZN(n).replace(/\./g,"")},xN=function(n){try{return gI.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $N(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eP=()=>$N().__FIREBASE_DEFAULTS__,tP=()=>{if(typeof process>"u"||typeof process.env>"u")return;const n={}.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},nP=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&xN(n[1]);return e&&JSON.parse(e)},vI=()=>{try{return eP()||tP()||nP()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},iP=n=>{var e,t;return(t=(e=vI())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},sP=n=>{const e=iP(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},rP=()=>{var n;return(n=vI())===null||n===void 0?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lP(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",s=n.iat||0,r=n.sub||n.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},n),l="";return[Bh(JSON.stringify(t)),Bh(JSON.stringify(o)),l].join(".")}function aP(){try{return typeof indexedDB=="object"}catch{return!1}}function cP(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var r;e(((r=s.error)===null||r===void 0?void 0:r.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uP="FirebaseError";class cc extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=uP,Object.setPrototypeOf(this,cc.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bI.prototype.create)}}class bI{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},s=`${this.service}/${e}`,r=this.errors[e],o=r?fP(r,i):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new cc(s,l,i)}}function fP(n,e){return n.replace(hP,(t,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const hP=/\{\$([^}]+)}/g;function gg(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const s of t){if(!i.includes(s))return!1;const r=n[s],o=e[s];if($b(r)&&$b(o)){if(!gg(r,o))return!1}else if(r!==o)return!1}for(const s of i)if(!t.includes(s))return!1;return!0}function $b(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ml(n){return n&&n._delegate?n._delegate:n}class fu{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ml="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new oP;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(pP(e))try{this.getOrInitializeService({instanceIdentifier:ml})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const r=this.getOrInitializeService({instanceIdentifier:s});i.resolve(r)}catch{}}}}clearInstance(e=ml){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ml){return this.instances.has(e)}getOptions(e=ml){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[r,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(r);i===l&&o.resolve(s)}return s}onInit(e,t){var i;const s=this.normalizeInstanceIdentifier(t),r=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;r.add(e),this.onInitCallbacks.set(s,r);const o=this.instances.get(s);return o&&e(o,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const s of i)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:mP(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ml){return this.component?this.component.multipleInstances?e:ml:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function mP(n){return n===ml?void 0:n}function pP(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new dP(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rn;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Rn||(Rn={}));const vP={debug:Rn.DEBUG,verbose:Rn.VERBOSE,info:Rn.INFO,warn:Rn.WARN,error:Rn.ERROR,silent:Rn.SILENT},bP=Rn.INFO,_P={[Rn.DEBUG]:"log",[Rn.VERBOSE]:"log",[Rn.INFO]:"info",[Rn.WARN]:"warn",[Rn.ERROR]:"error"},yP=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),s=_P[e];if(s)console[s](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class _I{constructor(e){this.name=e,this._logLevel=bP,this._logHandler=yP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Rn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Rn.DEBUG,...e),this._logHandler(this,Rn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Rn.VERBOSE,...e),this._logHandler(this,Rn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Rn.INFO,...e),this._logHandler(this,Rn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Rn.WARN,...e),this._logHandler(this,Rn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Rn.ERROR,...e),this._logHandler(this,Rn.ERROR,...e)}}const SP=(n,e)=>e.some(t=>n instanceof t);let e_,t_;function EP(){return e_||(e_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function AP(){return t_||(t_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const yI=new WeakMap,vg=new WeakMap,SI=new WeakMap,up=new WeakMap,N0=new WeakMap;function wP(n){const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("success",r),n.removeEventListener("error",o)},r=()=>{t(Wo(n.result)),s()},o=()=>{i(n.error),s()};n.addEventListener("success",r),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&yI.set(t,n)}).catch(()=>{}),N0.set(e,n),e}function CP(n){if(vg.has(n))return;const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("complete",r),n.removeEventListener("error",o),n.removeEventListener("abort",o)},r=()=>{t(),s()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",r),n.addEventListener("error",o),n.addEventListener("abort",o)});vg.set(n,e)}let bg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return vg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||SI.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Wo(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function kP(n){bg=n(bg)}function IP(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(fp(this),e,...t);return SI.set(i,e.sort?e.sort():[e]),Wo(i)}:AP().includes(n)?function(...e){return n.apply(fp(this),e),Wo(yI.get(this))}:function(...e){return Wo(n.apply(fp(this),e))}}function TP(n){return typeof n=="function"?IP(n):(n instanceof IDBTransaction&&CP(n),SP(n,EP())?new Proxy(n,bg):n)}function Wo(n){if(n instanceof IDBRequest)return wP(n);if(up.has(n))return up.get(n);const e=TP(n);return e!==n&&(up.set(n,e),N0.set(e,n)),e}const fp=n=>N0.get(n);function OP(n,e,{blocked:t,upgrade:i,blocking:s,terminated:r}={}){const o=indexedDB.open(n,e),l=Wo(o);return i&&o.addEventListener("upgradeneeded",a=>{i(Wo(o.result),a.oldVersion,a.newVersion,Wo(o.transaction))}),t&&o.addEventListener("blocked",()=>t()),l.then(a=>{r&&a.addEventListener("close",()=>r()),s&&a.addEventListener("versionchange",()=>s())}).catch(()=>{}),l}const RP=["get","getKey","getAll","getAllKeys","count"],DP=["put","add","delete","clear"],hp=new Map;function n_(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(hp.get(e))return hp.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,s=DP.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(s||RP.includes(t)))return;const r=async function(o,...l){const a=this.transaction(o,s?"readwrite":"readonly");let c=a.store;return i&&(c=c.index(l.shift())),(await Promise.all([c[t](...l),s&&a.done]))[0]};return hp.set(e,r),r}kP(n=>({...n,get:(e,t,i)=>n_(e,t)||n.get(e,t,i),has:(e,t)=>!!n_(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(PP(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function PP(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const _g="@firebase/app",i_="0.9.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bl=new _I("@firebase/app"),MP="@firebase/app-compat",BP="@firebase/analytics-compat",LP="@firebase/analytics",WP="@firebase/app-check-compat",UP="@firebase/app-check",VP="@firebase/auth",FP="@firebase/auth-compat",jP="@firebase/database",HP="@firebase/database-compat",qP="@firebase/functions",zP="@firebase/functions-compat",GP="@firebase/installations",KP="@firebase/installations-compat",XP="@firebase/messaging",QP="@firebase/messaging-compat",YP="@firebase/performance",JP="@firebase/performance-compat",ZP="@firebase/remote-config",xP="@firebase/remote-config-compat",$P="@firebase/storage",eM="@firebase/storage-compat",tM="@firebase/firestore",nM="@firebase/firestore-compat",iM="firebase",sM="9.17.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yg="[DEFAULT]",rM={[_g]:"fire-core",[MP]:"fire-core-compat",[LP]:"fire-analytics",[BP]:"fire-analytics-compat",[UP]:"fire-app-check",[WP]:"fire-app-check-compat",[VP]:"fire-auth",[FP]:"fire-auth-compat",[jP]:"fire-rtdb",[HP]:"fire-rtdb-compat",[qP]:"fire-fn",[zP]:"fire-fn-compat",[GP]:"fire-iid",[KP]:"fire-iid-compat",[XP]:"fire-fcm",[QP]:"fire-fcm-compat",[YP]:"fire-perf",[JP]:"fire-perf-compat",[ZP]:"fire-rc",[xP]:"fire-rc-compat",[$P]:"fire-gcs",[eM]:"fire-gcs-compat",[tM]:"fire-fst",[nM]:"fire-fst-compat","fire-js":"fire-js",[iM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lh=new Map,Sg=new Map;function oM(n,e){try{n.container.addComponent(e)}catch(t){Bl.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Wh(n){const e=n.name;if(Sg.has(e))return Bl.debug(`There were multiple attempts to register component ${e}.`),!1;Sg.set(e,n);for(const t of Lh.values())oM(t,n);return!0}function lM(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aM={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Uo=new bI("app","Firebase",aM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new fu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Uo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uM=sM;function EI(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:yg,automaticDataCollectionEnabled:!1},e),s=i.name;if(typeof s!="string"||!s)throw Uo.create("bad-app-name",{appName:String(s)});if(t||(t=rP()),!t)throw Uo.create("no-options");const r=Lh.get(s);if(r){if(gg(t,r.options)&&gg(i,r.config))return r;throw Uo.create("duplicate-app",{appName:s})}const o=new gP(s);for(const a of Sg.values())o.addComponent(a);const l=new cM(t,i,o);return Lh.set(s,l),l}function fM(n=yg){const e=Lh.get(n);if(!e&&n===yg)return EI();if(!e)throw Uo.create("no-app",{appName:n});return e}function wa(n,e,t){var i;let s=(i=rM[n])!==null&&i!==void 0?i:n;t&&(s+=`-${t}`);const r=s.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const l=[`Unable to register library "${s}" with version "${e}":`];r&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Bl.warn(l.join(" "));return}Wh(new fu(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hM="firebase-heartbeat-database",dM=1,hu="firebase-heartbeat-store";let dp=null;function AI(){return dp||(dp=OP(hM,dM,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(hu)}}}).catch(n=>{throw Uo.create("idb-open",{originalErrorMessage:n.message})})),dp}async function mM(n){try{return(await AI()).transaction(hu).objectStore(hu).get(wI(n))}catch(e){if(e instanceof cc)Bl.warn(e.message);else{const t=Uo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Bl.warn(t.message)}}}async function s_(n,e){try{const i=(await AI()).transaction(hu,"readwrite");return await i.objectStore(hu).put(e,wI(n)),i.done}catch(t){if(t instanceof cc)Bl.warn(t.message);else{const i=Uo.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Bl.warn(i.message)}}}function wI(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pM=1024,gM=30*24*60*60*1e3;class vM{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new _M(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=r_();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(s=>s.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const r=new Date(s.date).valueOf();return Date.now()-r<=gM}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=r_(),{heartbeatsToSend:t,unsentEntries:i}=bM(this._heartbeatsCache.heartbeats),s=Bh(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function r_(){return new Date().toISOString().substring(0,10)}function bM(n,e=pM){const t=[];let i=n.slice();for(const s of n){const r=t.find(o=>o.agent===s.agent);if(r){if(r.dates.push(s.date),o_(t)>e){r.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),o_(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class _M{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return aP()?cP().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await mM(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return s_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return s_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function o_(n){return Bh(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yM(n){Wh(new fu("platform-logger",e=>new NP(e),"PRIVATE")),Wh(new fu("heartbeat",e=>new vM(e),"PRIVATE")),wa(_g,i_,n),wa(_g,i_,"esm2017"),wa("fire-js","")}yM("");var SM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Nt,P0=P0||{},Qt=SM||self;function Uh(){}function $d(n){var e=typeof n;return e=e!="object"?e:n?Array.isArray(n)?"array":e:"null",e=="array"||e=="object"&&typeof n.length=="number"}function xu(n){var e=typeof n;return e=="object"&&n!=null||e=="function"}function EM(n){return Object.prototype.hasOwnProperty.call(n,mp)&&n[mp]||(n[mp]=++AM)}var mp="closure_uid_"+(1e9*Math.random()>>>0),AM=0;function wM(n,e,t){return n.call.apply(n.bind,arguments)}function CM(n,e,t){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,i),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function ls(n,e,t){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?ls=wM:ls=CM,ls.apply(null,arguments)}function Df(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var i=t.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function $i(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(i,s,r){for(var o=Array(arguments.length-2),l=2;l<arguments.length;l++)o[l-2]=arguments[l];return e.prototype[s].apply(i,o)}}function il(){this.s=this.s,this.o=this.o}var kM=0;il.prototype.s=!1;il.prototype.na=function(){!this.s&&(this.s=!0,this.M(),kM!=0)&&EM(this)};il.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const CI=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if(typeof n=="string")return typeof e!="string"||e.length!=1?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function M0(n){const e=n.length;if(0<e){const t=Array(e);for(let i=0;i<e;i++)t[i]=n[i];return t}return[]}function l_(n,e){for(let t=1;t<arguments.length;t++){const i=arguments[t];if($d(i)){const s=n.length||0,r=i.length||0;n.length=s+r;for(let o=0;o<r;o++)n[s+o]=i[o]}else n.push(i)}}function as(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}as.prototype.h=function(){this.defaultPrevented=!0};var IM=function(){if(!Qt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Qt.addEventListener("test",Uh,e),Qt.removeEventListener("test",Uh,e)}catch{}return n}();function Vh(n){return/^[\s\xa0]*$/.test(n)}var a_=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function pp(n,e){return n<e?-1:n>e?1:0}function em(){var n=Qt.navigator;return n&&(n=n.userAgent)?n:""}function Pr(n){return em().indexOf(n)!=-1}function B0(n){return B0[" "](n),n}B0[" "]=Uh;function TM(n){var e=DM;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}var OM=Pr("Opera"),Wa=Pr("Trident")||Pr("MSIE"),kI=Pr("Edge"),Eg=kI||Wa,II=Pr("Gecko")&&!(em().toLowerCase().indexOf("webkit")!=-1&&!Pr("Edge"))&&!(Pr("Trident")||Pr("MSIE"))&&!Pr("Edge"),RM=em().toLowerCase().indexOf("webkit")!=-1&&!Pr("Edge");function TI(){var n=Qt.document;return n?n.documentMode:void 0}var Fh;e:{var gp="",vp=function(){var n=em();if(II)return/rv:([^\);]+)(\)|;)/.exec(n);if(kI)return/Edge\/([\d\.]+)/.exec(n);if(Wa)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n);if(RM)return/WebKit\/(\S+)/.exec(n);if(OM)return/(?:Version)[ \/]?(\S+)/.exec(n)}();if(vp&&(gp=vp?vp[1]:""),Wa){var bp=TI();if(bp!=null&&bp>parseFloat(gp)){Fh=String(bp);break e}}Fh=gp}var DM={};function NM(){return TM(function(){let n=0;const e=a_(String(Fh)).split("."),t=a_("9").split("."),i=Math.max(e.length,t.length);for(let o=0;n==0&&o<i;o++){var s=e[o]||"",r=t[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],s[0].length==0&&r[0].length==0)break;n=pp(s[1].length==0?0:parseInt(s[1],10),r[1].length==0?0:parseInt(r[1],10))||pp(s[2].length==0,r[2].length==0)||pp(s[2],r[2]),s=s[3],r=r[3]}while(n==0)}return 0<=n})}var Ag;if(Qt.document&&Wa){var c_=TI();Ag=c_||parseInt(Fh,10)||void 0}else Ag=void 0;var PM=Ag;function du(n,e){if(as.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(II){e:{try{B0(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else t=="mouseover"?e=n.fromElement:t=="mouseout"&&(e=n.toElement);this.relatedTarget=e,i?(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=n.clientX!==void 0?n.clientX:n.pageX,this.clientY=n.clientY!==void 0?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType=typeof n.pointerType=="string"?n.pointerType:MM[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&du.X.h.call(this)}}$i(du,as);var MM={2:"touch",3:"pen",4:"mouse"};du.prototype.h=function(){du.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var $u="closure_listenable_"+(1e6*Math.random()|0),BM=0;function LM(n,e,t,i,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!i,this.ha=s,this.key=++BM,this.ba=this.ea=!1}function tm(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function L0(n,e,t){for(const i in n)e.call(t,n[i],i,n)}function OI(n){const e={};for(const t in n)e[t]=n[t];return e}const u_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function RI(n,e){let t,i;for(let s=1;s<arguments.length;s++){i=arguments[s];for(t in i)n[t]=i[t];for(let r=0;r<u_.length;r++)t=u_[r],Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}}function nm(n){this.src=n,this.g={},this.h=0}nm.prototype.add=function(n,e,t,i,s){var r=n.toString();n=this.g[r],n||(n=this.g[r]=[],this.h++);var o=Cg(n,e,i,s);return-1<o?(e=n[o],t||(e.ea=!1)):(e=new LM(e,this.src,r,!!i,s),e.ea=t,n.push(e)),e};function wg(n,e){var t=e.type;if(t in n.g){var i=n.g[t],s=CI(i,e),r;(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(tm(e),n.g[t].length==0&&(delete n.g[t],n.h--))}}function Cg(n,e,t,i){for(var s=0;s<n.length;++s){var r=n[s];if(!r.ba&&r.listener==e&&r.capture==!!t&&r.ha==i)return s}return-1}var W0="closure_lm_"+(1e6*Math.random()|0),_p={};function DI(n,e,t,i,s){if(i&&i.once)return PI(n,e,t,i,s);if(Array.isArray(e)){for(var r=0;r<e.length;r++)DI(n,e[r],t,i,s);return null}return t=F0(t),n&&n[$u]?n.N(e,t,xu(i)?!!i.capture:!!i,s):NI(n,e,t,!1,i,s)}function NI(n,e,t,i,s,r){if(!e)throw Error("Invalid event type");var o=xu(s)?!!s.capture:!!s,l=V0(n);if(l||(n[W0]=l=new nm(n)),t=l.add(e,t,i,o,r),t.proxy)return t;if(i=WM(),t.proxy=i,i.src=n,i.listener=t,n.addEventListener)IM||(s=o),s===void 0&&(s=!1),n.addEventListener(e.toString(),i,s);else if(n.attachEvent)n.attachEvent(BI(e.toString()),i);else if(n.addListener&&n.removeListener)n.addListener(i);else throw Error("addEventListener and attachEvent are unavailable.");return t}function WM(){function n(t){return e.call(n.src,n.listener,t)}const e=UM;return n}function PI(n,e,t,i,s){if(Array.isArray(e)){for(var r=0;r<e.length;r++)PI(n,e[r],t,i,s);return null}return t=F0(t),n&&n[$u]?n.O(e,t,xu(i)?!!i.capture:!!i,s):NI(n,e,t,!0,i,s)}function MI(n,e,t,i,s){if(Array.isArray(e))for(var r=0;r<e.length;r++)MI(n,e[r],t,i,s);else i=xu(i)?!!i.capture:!!i,t=F0(t),n&&n[$u]?(n=n.i,e=String(e).toString(),e in n.g&&(r=n.g[e],t=Cg(r,t,i,s),-1<t&&(tm(r[t]),Array.prototype.splice.call(r,t,1),r.length==0&&(delete n.g[e],n.h--)))):n&&(n=V0(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Cg(e,t,i,s)),(t=-1<n?e[n]:null)&&U0(t))}function U0(n){if(typeof n!="number"&&n&&!n.ba){var e=n.src;if(e&&e[$u])wg(e.i,n);else{var t=n.type,i=n.proxy;e.removeEventListener?e.removeEventListener(t,i,n.capture):e.detachEvent?e.detachEvent(BI(t),i):e.addListener&&e.removeListener&&e.removeListener(i),(t=V0(e))?(wg(t,n),t.h==0&&(t.src=null,e[W0]=null)):tm(n)}}}function BI(n){return n in _p?_p[n]:_p[n]="on"+n}function UM(n,e){if(n.ba)n=!0;else{e=new du(e,this);var t=n.listener,i=n.ha||n.src;n.ea&&U0(n),n=t.call(i,e)}return n}function V0(n){return n=n[W0],n instanceof nm?n:null}var yp="__closure_events_fn_"+(1e9*Math.random()>>>0);function F0(n){return typeof n=="function"?n:(n[yp]||(n[yp]=function(e){return n.handleEvent(e)}),n[yp])}function ji(){il.call(this),this.i=new nm(this),this.P=this,this.I=null}$i(ji,il);ji.prototype[$u]=!0;ji.prototype.removeEventListener=function(n,e,t,i){MI(this,n,e,t,i)};function Ji(n,e){var t,i=n.I;if(i)for(t=[];i;i=i.I)t.push(i);if(n=n.P,i=e.type||e,typeof e=="string")e=new as(e,n);else if(e instanceof as)e.target=e.target||n;else{var s=e;e=new as(i,n),RI(e,s)}if(s=!0,t)for(var r=t.length-1;0<=r;r--){var o=e.g=t[r];s=Nf(o,i,!0,e)&&s}if(o=e.g=n,s=Nf(o,i,!0,e)&&s,s=Nf(o,i,!1,e)&&s,t)for(r=0;r<t.length;r++)o=e.g=t[r],s=Nf(o,i,!1,e)&&s}ji.prototype.M=function(){if(ji.X.M.call(this),this.i){var n=this.i,e;for(e in n.g){for(var t=n.g[e],i=0;i<t.length;i++)tm(t[i]);delete n.g[e],n.h--}}this.I=null};ji.prototype.N=function(n,e,t,i){return this.i.add(String(n),e,!1,t,i)};ji.prototype.O=function(n,e,t,i){return this.i.add(String(n),e,!0,t,i)};function Nf(n,e,t,i){if(e=n.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,r=0;r<e.length;++r){var o=e[r];if(o&&!o.ba&&o.capture==t){var l=o.listener,a=o.ha||o.src;o.ea&&wg(n.i,o),s=l.call(a,i)!==!1&&s}}return s&&!i.defaultPrevented}var j0=Qt.JSON.stringify;function VM(){var n=UI;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}class FM{constructor(){this.h=this.g=null}add(e,t){const i=LI.get();i.set(e,t),this.h?this.h.next=i:this.g=i,this.h=i}}var LI=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new jM,n=>n.reset());class jM{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function HM(n){Qt.setTimeout(()=>{throw n},0)}function WI(n,e){kg||qM(),Ig||(kg(),Ig=!0),UI.add(n,e)}var kg;function qM(){var n=Qt.Promise.resolve(void 0);kg=function(){n.then(zM)}}var Ig=!1,UI=new FM;function zM(){for(var n;n=VM();){try{n.h.call(n.g)}catch(t){HM(t)}var e=LI;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Ig=!1}function im(n,e){ji.call(this),this.h=n||1,this.g=e||Qt,this.j=ls(this.lb,this),this.l=Date.now()}$i(im,ji);Nt=im.prototype;Nt.ca=!1;Nt.R=null;Nt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Ji(this,"tick"),this.ca&&(H0(this),this.start()))}};Nt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function H0(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}Nt.M=function(){im.X.M.call(this),H0(this),delete this.g};function q0(n,e,t){if(typeof n=="function")t&&(n=ls(n,t));else if(n&&typeof n.handleEvent=="function")n=ls(n.handleEvent,n);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:Qt.setTimeout(n,e||0)}function VI(n){n.g=q0(()=>{n.g=null,n.i&&(n.i=!1,VI(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}class GM extends il{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:VI(this)}M(){super.M(),this.g&&(Qt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function mu(n){il.call(this),this.h=n,this.g={}}$i(mu,il);var f_=[];function FI(n,e,t,i){Array.isArray(t)||(t&&(f_[0]=t.toString()),t=f_);for(var s=0;s<t.length;s++){var r=DI(e,t[s],i||n.handleEvent,!1,n.h||n);if(!r)break;n.g[r.key]=r}}function jI(n){L0(n.g,function(e,t){this.g.hasOwnProperty(t)&&U0(e)},n),n.g={}}mu.prototype.M=function(){mu.X.M.call(this),jI(this)};mu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function sm(){this.g=!0}sm.prototype.Aa=function(){this.g=!1};function KM(n,e,t,i,s,r){n.info(function(){if(n.g)if(r)for(var o="",l=r.split("&"),a=0;a<l.length;a++){var c=l[a].split("=");if(1<c.length){var u=c[0];c=c[1];var f=u.split("_");o=2<=f.length&&f[1]=="type"?o+(u+"="+c+"&"):o+(u+"=redacted&")}}else o=null;else o=r;return"XMLHTTP REQ ("+i+") [attempt "+s+"]: "+e+`
`+t+`
`+o})}function XM(n,e,t,i,s,r,o){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+s+"]: "+e+`
`+t+`
`+r+" "+o})}function ya(n,e,t,i){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+YM(n,t)+(i?" "+i:"")})}function QM(n,e){n.info(function(){return"TIMEOUT: "+e})}sm.prototype.info=function(){};function YM(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t){for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var i=t[n];if(!(2>i.length)){var s=i[1];if(Array.isArray(s)&&!(1>s.length)){var r=s[0];if(r!="noop"&&r!="stop"&&r!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return j0(t)}catch{return e}}var xl={},h_=null;function rm(){return h_=h_||new ji}xl.Pa="serverreachability";function HI(n){as.call(this,xl.Pa,n)}$i(HI,as);function pu(n){const e=rm();Ji(e,new HI(e))}xl.STAT_EVENT="statevent";function qI(n,e){as.call(this,xl.STAT_EVENT,n),this.stat=e}$i(qI,as);function Es(n){const e=rm();Ji(e,new qI(e,n))}xl.Qa="timingevent";function zI(n,e){as.call(this,xl.Qa,n),this.size=e}$i(zI,as);function ef(n,e){if(typeof n!="function")throw Error("Fn must not be null and must be a function");return Qt.setTimeout(function(){n()},e)}var om={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},GI={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function z0(){}z0.prototype.h=null;function d_(n){return n.h||(n.h=n.i())}function KI(){}var tf={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function G0(){as.call(this,"d")}$i(G0,as);function K0(){as.call(this,"c")}$i(K0,as);var Tg;function lm(){}$i(lm,z0);lm.prototype.g=function(){return new XMLHttpRequest};lm.prototype.i=function(){return{}};Tg=new lm;function nf(n,e,t,i){this.l=n,this.j=e,this.m=t,this.U=i||1,this.S=new mu(this),this.O=JM,n=Eg?125:void 0,this.T=new im(n),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new XI}function XI(){this.i=null,this.g="",this.h=!1}var JM=45e3,Og={},jh={};Nt=nf.prototype;Nt.setTimeout=function(n){this.O=n};function Rg(n,e,t){n.K=1,n.v=cm(co(e)),n.s=t,n.P=!0,QI(n,null)}function QI(n,e){n.F=Date.now(),sf(n),n.A=co(n.v);var t=n.A,i=n.U;Array.isArray(i)||(i=[String(i)]),nT(t.i,"t",i),n.C=0,t=n.l.H,n.h=new XI,n.g=AT(n.l,t?e:null,!n.s),0<n.N&&(n.L=new GM(ls(n.La,n,n.g),n.N)),FI(n.S,n.g,"readystatechange",n.ib),e=n.H?OI(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),pu(),KM(n.j,n.u,n.A,n.m,n.U,n.s)}Nt.ib=function(n){n=n.target;const e=this.L;e&&io(n)==3?e.l():this.La(n)};Nt.La=function(n){try{if(n==this.g)e:{const u=io(this.g);var e=this.g.Ea();const f=this.g.aa();if(!(3>u)&&(u!=3||Eg||this.g&&(this.h.h||this.g.fa()||v_(this.g)))){this.I||u!=4||e==7||(e==8||0>=f?pu(3):pu(2)),am(this);var t=this.g.aa();this.Y=t;t:if(YI(this)){var i=v_(this.g);n="";var s=i.length,r=io(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){_l(this),Jc(this);var o="";break t}this.h.i=new Qt.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(i[e],{stream:r&&e==s-1});i.splice(0,s),this.h.g+=n,this.C=0,o=this.h.g}else o=this.g.fa();if(this.i=t==200,XM(this.j,this.u,this.A,this.m,this.U,u,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var l,a=this.g;if((l=a.g?a.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Vh(l)){var c=l;break t}}c=null}if(t=c)ya(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Dg(this,t);else{this.i=!1,this.o=3,Es(12),_l(this),Jc(this);break e}}this.P?(JI(this,u,o),Eg&&this.i&&u==3&&(FI(this.S,this.T,"tick",this.hb),this.T.start())):(ya(this.j,this.m,o,null),Dg(this,o)),u==4&&_l(this),this.i&&!this.I&&(u==4?_T(this.l,this):(this.i=!1,sf(this)))}else t==400&&0<o.indexOf("Unknown SID")?(this.o=3,Es(12)):(this.o=0,Es(13)),_l(this),Jc(this)}}}catch{}finally{}};function YI(n){return n.g?n.u=="GET"&&n.K!=2&&n.l.Da:!1}function JI(n,e,t){let i=!0,s;for(;!n.I&&n.C<t.length;)if(s=ZM(n,t),s==jh){e==4&&(n.o=4,Es(14),i=!1),ya(n.j,n.m,null,"[Incomplete Response]");break}else if(s==Og){n.o=4,Es(15),ya(n.j,n.m,t,"[Invalid Chunk]"),i=!1;break}else ya(n.j,n.m,s,null),Dg(n,s);YI(n)&&s!=jh&&s!=Og&&(n.h.g="",n.C=0),e!=4||t.length!=0||n.h.h||(n.o=1,Es(16),i=!1),n.i=n.i&&i,i?0<t.length&&!n.$&&(n.$=!0,e=n.l,e.g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),$0(e),e.K=!0,Es(11))):(ya(n.j,n.m,t,"[Invalid Chunked Response]"),_l(n),Jc(n))}Nt.hb=function(){if(this.g){var n=io(this.g),e=this.g.fa();this.C<e.length&&(am(this),JI(this,n,e),this.i&&n!=4&&sf(this))}};function ZM(n,e){var t=n.C,i=e.indexOf(`
`,t);return i==-1?jh:(t=Number(e.substring(t,i)),isNaN(t)?Og:(i+=1,i+t>e.length?jh:(e=e.substr(i,t),n.C=i+t,e)))}Nt.cancel=function(){this.I=!0,_l(this)};function sf(n){n.V=Date.now()+n.O,ZI(n,n.O)}function ZI(n,e){if(n.B!=null)throw Error("WatchDog timer not null");n.B=ef(ls(n.gb,n),e)}function am(n){n.B&&(Qt.clearTimeout(n.B),n.B=null)}Nt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(QM(this.j,this.A),this.K!=2&&(pu(),Es(17)),_l(this),this.o=2,Jc(this)):ZI(this,this.V-n)};function Jc(n){n.l.G==0||n.I||_T(n.l,n)}function _l(n){am(n);var e=n.L;e&&typeof e.na=="function"&&e.na(),n.L=null,H0(n.T),jI(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Dg(n,e){try{var t=n.l;if(t.G!=0&&(t.g==n||Ng(t.h,n))){if(!n.J&&Ng(t.h,n)&&t.G==3){try{var i=t.Fa.g.parse(e)}catch{i=null}if(Array.isArray(i)&&i.length==3){var s=i;if(s[0]==0){e:if(!t.u){if(t.g)if(t.g.F+3e3<n.F)zh(t),hm(t);else break e;x0(t),Es(18)}}else t.Ba=s[1],0<t.Ba-t.T&&37500>s[2]&&t.L&&t.A==0&&!t.v&&(t.v=ef(ls(t.cb,t),6e3));if(1>=rT(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else yl(t,11)}else if((n.J||t.g==n)&&zh(t),!Vh(e))for(s=t.Fa.g.parse(e),e=0;e<s.length;e++){let c=s[e];if(t.T=c[0],c=c[1],t.G==2)if(c[0]=="c"){t.I=c[1],t.ka=c[2];const u=c[3];u!=null&&(t.ma=u,t.j.info("VER="+t.ma));const f=c[4];f!=null&&(t.Ca=f,t.j.info("SVER="+t.Ca));const h=c[5];h!=null&&typeof h=="number"&&0<h&&(i=1.5*h,t.J=i,t.j.info("backChannelRequestTimeoutMs_="+i)),i=t;const d=n.g;if(d){const m=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(m){var r=i.h;r.g||m.indexOf("spdy")==-1&&m.indexOf("quic")==-1&&m.indexOf("h2")==-1||(r.j=r.l,r.g=new Set,r.h&&(X0(r,r.h),r.h=null))}if(i.D){const g=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;g&&(i.za=g,ti(i.F,i.D,g))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms")),i=t;var o=n;if(i.sa=ET(i,i.H?i.ka:null,i.V),o.J){oT(i.h,o);var l=o,a=i.J;a&&l.setTimeout(a),l.B&&(am(l),sf(l)),i.g=o}else vT(i);0<t.i.length&&dm(t)}else c[0]!="stop"&&c[0]!="close"||yl(t,7);else t.G==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?yl(t,7):Z0(t):c[0]!="noop"&&t.l&&t.l.wa(c),t.A=0)}}pu(4)}catch{}}function xM(n){if(n.W&&typeof n.W=="function")return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if(typeof n=="string")return n.split("");if($d(n)){for(var e=[],t=n.length,i=0;i<t;i++)e.push(n[i]);return e}e=[],t=0;for(i in n)e[t++]=n[i];return e}function $M(n){if(n.oa&&typeof n.oa=="function")return n.oa();if(!n.W||typeof n.W!="function"){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if($d(n)||typeof n=="string"){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const i in n)e[t++]=i;return e}}}function xI(n,e){if(n.forEach&&typeof n.forEach=="function")n.forEach(e,void 0);else if($d(n)||typeof n=="string")Array.prototype.forEach.call(n,e,void 0);else for(var t=$M(n),i=xM(n),s=i.length,r=0;r<s;r++)e.call(void 0,i[r],t&&t[r],n)}var $I=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function e6(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var i=n[t].indexOf("="),s=null;if(0<=i){var r=n[t].substring(0,i);s=n[t].substring(i+1)}else r=n[t];e(r,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function kl(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof kl){this.h=e!==void 0?e:n.h,Hh(this,n.j),this.s=n.s,this.g=n.g,qh(this,n.m),this.l=n.l,e=n.i;var t=new gu;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),m_(this,t),this.o=n.o}else n&&(t=String(n).match($I))?(this.h=!!e,Hh(this,t[1]||"",!0),this.s=Lc(t[2]||""),this.g=Lc(t[3]||"",!0),qh(this,t[4]),this.l=Lc(t[5]||"",!0),m_(this,t[6]||"",!0),this.o=Lc(t[7]||"")):(this.h=!!e,this.i=new gu(null,this.h))}kl.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Wc(e,p_,!0),":");var t=this.g;return(t||e=="file")&&(n.push("//"),(e=this.s)&&n.push(Wc(e,p_,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.m,t!=null&&n.push(":",String(t))),(t=this.l)&&(this.g&&t.charAt(0)!="/"&&n.push("/"),n.push(Wc(t,t.charAt(0)=="/"?i6:n6,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Wc(t,r6)),n.join("")};function co(n){return new kl(n)}function Hh(n,e,t){n.j=t?Lc(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function qh(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function m_(n,e,t){e instanceof gu?(n.i=e,o6(n.i,n.h)):(t||(e=Wc(e,s6)),n.i=new gu(e,n.h))}function ti(n,e,t){n.i.set(e,t)}function cm(n){return ti(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Lc(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Wc(n,e,t){return typeof n=="string"?(n=encodeURI(n).replace(e,t6),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function t6(n){return n=n.charCodeAt(0),"%"+(n>>4&15).toString(16)+(n&15).toString(16)}var p_=/[#\/\?@]/g,n6=/[#\?:]/g,i6=/[#\?]/g,s6=/[#\?@]/g,r6=/#/g;function gu(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function sl(n){n.g||(n.g=new Map,n.h=0,n.i&&e6(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}Nt=gu.prototype;Nt.add=function(n,e){sl(this),this.i=null,n=uc(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this};function eT(n,e){sl(n),e=uc(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function tT(n,e){return sl(n),e=uc(n,e),n.g.has(e)}Nt.forEach=function(n,e){sl(this),this.g.forEach(function(t,i){t.forEach(function(s){n.call(e,s,i,this)},this)},this)};Nt.oa=function(){sl(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let i=0;i<e.length;i++){const s=n[i];for(let r=0;r<s.length;r++)t.push(e[i])}return t};Nt.W=function(n){sl(this);let e=[];if(typeof n=="string")tT(this,n)&&(e=e.concat(this.g.get(uc(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e};Nt.set=function(n,e){return sl(this),this.i=null,n=uc(this,n),tT(this,n)&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this};Nt.get=function(n,e){return n?(n=this.W(n),0<n.length?String(n[0]):e):e};function nT(n,e,t){eT(n,e),0<t.length&&(n.i=null,n.g.set(uc(n,e),M0(t)),n.h+=t.length)}Nt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var i=e[t];const r=encodeURIComponent(String(i)),o=this.W(i);for(i=0;i<o.length;i++){var s=r;o[i]!==""&&(s+="="+encodeURIComponent(String(o[i]))),n.push(s)}}return this.i=n.join("&")};function uc(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function o6(n,e){e&&!n.j&&(sl(n),n.i=null,n.g.forEach(function(t,i){var s=i.toLowerCase();i!=s&&(eT(this,i),nT(this,s,t))},n)),n.j=e}var l6=class{constructor(e,t){this.h=e,this.g=t}};function iT(n){this.l=n||a6,Qt.PerformanceNavigationTiming?(n=Qt.performance.getEntriesByType("navigation"),n=0<n.length&&(n[0].nextHopProtocol=="hq"||n[0].nextHopProtocol=="h2")):n=!!(Qt.g&&Qt.g.Ga&&Qt.g.Ga()&&Qt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var a6=10;function sT(n){return n.h?!0:n.g?n.g.size>=n.j:!1}function rT(n){return n.h?1:n.g?n.g.size:0}function Ng(n,e){return n.h?n.h==e:n.g?n.g.has(e):!1}function X0(n,e){n.g?n.g.add(e):n.h=e}function oT(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}iT.prototype.cancel=function(){if(this.i=lT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const n of this.g.values())n.cancel();this.g.clear()}};function lT(n){if(n.h!=null)return n.i.concat(n.h.D);if(n.g!=null&&n.g.size!==0){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return M0(n.i)}function Q0(){}Q0.prototype.stringify=function(n){return Qt.JSON.stringify(n,void 0)};Q0.prototype.parse=function(n){return Qt.JSON.parse(n,void 0)};function c6(){this.g=new Q0}function u6(n,e,t){const i=t||"";try{xI(n,function(s,r){let o=s;xu(s)&&(o=j0(s)),e.push(i+r+"="+encodeURIComponent(o))})}catch(s){throw e.push(i+"type="+encodeURIComponent("_badmap")),s}}function f6(n,e){const t=new sm;if(Qt.Image){const i=new Image;i.onload=Df(Pf,t,i,"TestLoadImage: loaded",!0,e),i.onerror=Df(Pf,t,i,"TestLoadImage: error",!1,e),i.onabort=Df(Pf,t,i,"TestLoadImage: abort",!1,e),i.ontimeout=Df(Pf,t,i,"TestLoadImage: timeout",!1,e),Qt.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else e(!1)}function Pf(n,e,t,i,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(i)}catch{}}function rf(n){this.l=n.ac||null,this.j=n.jb||!1}$i(rf,z0);rf.prototype.g=function(){return new um(this.l,this.j)};rf.prototype.i=function(n){return function(){return n}}({});function um(n,e){ji.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Y0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}$i(um,ji);var Y0=0;Nt=um.prototype;Nt.open=function(n,e){if(this.readyState!=Y0)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,vu(this)};Nt.send=function(n){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Qt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))};Nt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,of(this)),this.readyState=Y0};Nt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,vu(this)),this.g&&(this.readyState=3,vu(this),this.g)))if(this.responseType==="arraybuffer")n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Qt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;aT(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))};function aT(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}Nt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?of(this):vu(this),this.readyState==3&&aT(this)}};Nt.Va=function(n){this.g&&(this.response=this.responseText=n,of(this))};Nt.Ua=function(n){this.g&&(this.response=n,of(this))};Nt.ga=function(){this.g&&of(this)};function of(n){n.readyState=4,n.l=null,n.j=null,n.A=null,vu(n)}Nt.setRequestHeader=function(n,e){this.v.append(n,e)};Nt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""};Nt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)t=t.value,n.push(t[0]+": "+t[1]),t=e.next();return n.join(`\r
`)};function vu(n){n.onreadystatechange&&n.onreadystatechange.call(n)}Object.defineProperty(um.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(n){this.m=n?"include":"same-origin"}});var h6=Qt.JSON.parse;function oi(n){ji.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=cT,this.K=this.L=!1}$i(oi,ji);var cT="",d6=/^https?$/i,m6=["POST","PUT"];Nt=oi.prototype;Nt.Ka=function(n){this.L=n};Nt.da=function(n,e,t,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Tg.g(),this.C=this.u?d_(this.u):d_(Tg),this.g.onreadystatechange=ls(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(r){g_(this,r);return}if(n=t||"",t=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var s in i)t.set(s,i[s]);else if(typeof i.keys=="function"&&typeof i.get=="function")for(const r of i.keys())t.set(r,i.get(r));else throw Error("Unknown input type for opt_headers: "+String(i));i=Array.from(t.keys()).find(r=>r.toLowerCase()=="content-type"),s=Qt.FormData&&n instanceof Qt.FormData,!(0<=CI(m6,e))||i||s||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[r,o]of t)this.g.setRequestHeader(r,o);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{hT(this),0<this.B&&((this.K=p6(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ls(this.qa,this)):this.A=q0(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(r){g_(this,r)}};function p6(n){return Wa&&NM()&&typeof n.timeout=="number"&&n.ontimeout!==void 0}Nt.qa=function(){typeof P0<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ji(this,"timeout"),this.abort(8))};function g_(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,uT(n),fm(n)}function uT(n){n.D||(n.D=!0,Ji(n,"complete"),Ji(n,"error"))}Nt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ji(this,"complete"),Ji(this,"abort"),fm(this))};Nt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),fm(this,!0)),oi.X.M.call(this)};Nt.Ha=function(){this.s||(this.F||this.v||this.l?fT(this):this.fb())};Nt.fb=function(){fT(this)};function fT(n){if(n.h&&typeof P0<"u"&&(!n.C[1]||io(n)!=4||n.aa()!=2)){if(n.v&&io(n)==4)q0(n.Ha,0,n);else if(Ji(n,"readystatechange"),io(n)==4){n.h=!1;try{const l=n.aa();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var i;if(i=l===0){var s=String(n.H).match($I)[1]||null;if(!s&&Qt.self&&Qt.self.location){var r=Qt.self.location.protocol;s=r.substr(0,r.length-1)}i=!d6.test(s?s.toLowerCase():"")}t=i}if(t)Ji(n,"complete"),Ji(n,"success");else{n.m=6;try{var o=2<io(n)?n.g.statusText:""}catch{o=""}n.j=o+" ["+n.aa()+"]",uT(n)}}finally{fm(n)}}}}function fm(n,e){if(n.g){hT(n);const t=n.g,i=n.C[0]?Uh:null;n.g=null,n.C=null,e||Ji(n,"ready");try{t.onreadystatechange=i}catch{}}}function hT(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Qt.clearTimeout(n.A),n.A=null)}function io(n){return n.g?n.g.readyState:0}Nt.aa=function(){try{return 2<io(this)?this.g.status:-1}catch{return-1}};Nt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}};Nt.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&e.indexOf(n)==0&&(e=e.substring(n.length)),h6(e)}};function v_(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case cT:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}Nt.Ea=function(){return this.m};Nt.Oa=function(){return typeof this.j=="string"?this.j:String(this.j)};function dT(n){let e="";return L0(n,function(t,i){e+=i,e+=":",e+=t,e+=`\r
`}),e}function J0(n,e,t){e:{for(i in t){var i=!1;break e}i=!0}i||(t=dT(t),typeof n=="string"?t!=null&&encodeURIComponent(String(t)):ti(n,e,t))}function Tc(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function mT(n){this.Ca=0,this.i=[],this.j=new sm,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Tc("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Tc("baseRetryDelayMs",5e3,n),this.bb=Tc("retryDelaySeedMs",1e4,n),this.$a=Tc("forwardChannelMaxRetries",2,n),this.ta=Tc("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new iT(n&&n.concurrentRequestLimit),this.Fa=new c6,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}Nt=mT.prototype;Nt.ma=8;Nt.G=1;function Z0(n){if(pT(n),n.G==3){var e=n.U++,t=co(n.F);ti(t,"SID",n.I),ti(t,"RID",e),ti(t,"TYPE","terminate"),lf(n,t),e=new nf(n,n.j,e,void 0),e.K=2,e.v=cm(co(t)),t=!1,Qt.navigator&&Qt.navigator.sendBeacon&&(t=Qt.navigator.sendBeacon(e.v.toString(),"")),!t&&Qt.Image&&(new Image().src=e.v,t=!0),t||(e.g=AT(e.l,null),e.g.da(e.v)),e.F=Date.now(),sf(e)}ST(n)}function hm(n){n.g&&($0(n),n.g.cancel(),n.g=null)}function pT(n){hm(n),n.u&&(Qt.clearTimeout(n.u),n.u=null),zh(n),n.h.cancel(),n.m&&(typeof n.m=="number"&&Qt.clearTimeout(n.m),n.m=null)}function dm(n){sT(n.h)||n.m||(n.m=!0,WI(n.Ja,n),n.C=0)}function g6(n,e){return rT(n.h)>=n.h.j-(n.m?1:0)?!1:n.m?(n.i=e.D.concat(n.i),!0):n.G==1||n.G==2||n.C>=(n.Za?0:n.$a)?!1:(n.m=ef(ls(n.Ja,n,e),yT(n,n.C)),n.C++,!0)}Nt.Ja=function(n){if(this.m)if(this.m=null,this.G==1){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const s=new nf(this,this.j,n,void 0);let r=this.s;if(this.S&&(r?(r=OI(r),RI(r,this.S)):r=this.S),this.o!==null||this.N||(s.H=r,r=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){t:{var i=this.i[t];if("__data__"in i.g&&(i=i.g.__data__,typeof i=="string")){i=i.length;break t}i=void 0}if(i===void 0)break;if(e+=i,4096<e){e=t;break e}if(e===4096||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=gT(this,s,e),t=co(this.F),ti(t,"RID",n),ti(t,"CVER",22),this.D&&ti(t,"X-HTTP-Session-Id",this.D),lf(this,t),r&&(this.N?e="headers="+encodeURIComponent(String(dT(r)))+"&"+e:this.o&&J0(t,this.o,r)),X0(this.h,s),this.Ya&&ti(t,"TYPE","init"),this.O?(ti(t,"$req",e),ti(t,"SID","null"),s.Z=!0,Rg(s,t,null)):Rg(s,t,e),this.G=2}}else this.G==3&&(n?b_(this,n):this.i.length==0||sT(this.h)||b_(this))};function b_(n,e){var t;e?t=e.m:t=n.U++;const i=co(n.F);ti(i,"SID",n.I),ti(i,"RID",t),ti(i,"AID",n.T),lf(n,i),n.o&&n.s&&J0(i,n.o,n.s),t=new nf(n,n.j,t,n.C+1),n.o===null&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=gT(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),X0(n.h,t),Rg(t,i,e)}function lf(n,e){n.ia&&L0(n.ia,function(t,i){ti(e,i,t)}),n.l&&xI({},function(t,i){ti(e,i,t)})}function gT(n,e,t){t=Math.min(n.i.length,t);var i=n.l?ls(n.l.Ra,n.l,n):null;e:{var s=n.i;let r=-1;for(;;){const o=["count="+t];r==-1?0<t?(r=s[0].h,o.push("ofs="+r)):r=0:o.push("ofs="+r);let l=!0;for(let a=0;a<t;a++){let c=s[a].h;const u=s[a].g;if(c-=r,0>c)r=Math.max(0,s[a].h-100),l=!1;else try{u6(u,o,"req"+c+"_")}catch{i&&i(u)}}if(l){i=o.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,i}function vT(n){n.g||n.u||(n.Z=1,WI(n.Ia,n),n.A=0)}function x0(n){return n.g||n.u||3<=n.A?!1:(n.Z++,n.u=ef(ls(n.Ia,n),yT(n,n.A)),n.A++,!0)}Nt.Ia=function(){if(this.u=null,bT(this),this.$&&!(this.K||this.g==null||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=ef(ls(this.eb,this),n)}};Nt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Es(10),hm(this),bT(this))};function $0(n){n.B!=null&&(Qt.clearTimeout(n.B),n.B=null)}function bT(n){n.g=new nf(n,n.j,"rpc",n.Z),n.o===null&&(n.g.H=n.s),n.g.N=0;var e=co(n.sa);ti(e,"RID","rpc"),ti(e,"SID",n.I),ti(e,"CI",n.L?"0":"1"),ti(e,"AID",n.T),ti(e,"TYPE","xmlhttp"),lf(n,e),n.o&&n.s&&J0(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=cm(co(e)),t.s=null,t.P=!0,QI(t,n)}Nt.cb=function(){this.v!=null&&(this.v=null,hm(this),x0(this),Es(19))};function zh(n){n.v!=null&&(Qt.clearTimeout(n.v),n.v=null)}function _T(n,e){var t=null;if(n.g==e){zh(n),$0(n),n.g=null;var i=2}else if(Ng(n.h,e))t=e.D,oT(n.h,e),i=1;else return;if(n.G!=0){if(n.pa=e.Y,e.i)if(i==1){t=e.s?e.s.length:0,e=Date.now()-e.F;var s=n.C;i=rm(),Ji(i,new zI(i,t)),dm(n)}else vT(n);else if(s=e.o,s==3||s==0&&0<n.pa||!(i==1&&g6(n,e)||i==2&&x0(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),s){case 1:yl(n,5);break;case 4:yl(n,10);break;case 3:yl(n,6);break;default:yl(n,2)}}}function yT(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function yl(n,e){if(n.j.info("Error code "+e),e==2){var t=null;n.l&&(t=null);var i=ls(n.kb,n);t||(t=new kl("//www.google.com/images/cleardot.gif"),Qt.location&&Qt.location.protocol=="http"||Hh(t,"https"),cm(t)),f6(t.toString(),i)}else Es(2);n.G=0,n.l&&n.l.va(e),ST(n),pT(n)}Nt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Es(2)):(this.j.info("Failed to ping google.com"),Es(1))};function ST(n){if(n.G=0,n.la=[],n.l){const e=lT(n.h);(e.length!=0||n.i.length!=0)&&(l_(n.la,e),l_(n.la,n.i),n.h.i.length=0,M0(n.i),n.i.length=0),n.l.ua()}}function ET(n,e,t){var i=t instanceof kl?co(t):new kl(t,void 0);if(i.g!="")e&&(i.g=e+"."+i.g),qh(i,i.m);else{var s=Qt.location;i=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var r=new kl(null,void 0);i&&Hh(r,i),e&&(r.g=e),s&&qh(r,s),t&&(r.l=t),i=r}return t=n.D,e=n.za,t&&e&&ti(i,t,e),ti(i,"VER",n.ma),lf(n,i),i}function AT(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=t&&n.Da&&!n.ra?new oi(new rf({jb:!0})):new oi(n.ra),e.Ka(n.H),e}function wT(){}Nt=wT.prototype;Nt.xa=function(){};Nt.wa=function(){};Nt.va=function(){};Nt.ua=function(){};Nt.Ra=function(){};function Gh(){if(Wa&&!(10<=Number(PM)))throw Error("Environmental error: no available transport.")}Gh.prototype.g=function(n,e){return new Ks(n,e)};function Ks(n,e){ji.call(this),this.g=new mT(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!Vh(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Vh(e)&&(this.g.D=e,n=this.h,n!==null&&e in n&&(n=this.h,e in n&&delete n[e])),this.j=new fc(this)}$i(Ks,ji);Ks.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Es(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=ET(n,null,n.V),dm(n)};Ks.prototype.close=function(){Z0(this.g)};Ks.prototype.u=function(n){var e=this.g;if(typeof n=="string"){var t={};t.__data__=n,n=t}else this.v&&(t={},t.__data__=j0(n),n=t);e.i.push(new l6(e.ab++,n)),e.G==3&&dm(e)};Ks.prototype.M=function(){this.g.l=null,delete this.j,Z0(this.g),delete this.g,Ks.X.M.call(this)};function CT(n){G0.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=e!==null&&n in e?e[n]:void 0),this.data=e}else this.data=n}$i(CT,G0);function kT(){K0.call(this),this.status=1}$i(kT,K0);function fc(n){this.g=n}$i(fc,wT);fc.prototype.xa=function(){Ji(this.g,"a")};fc.prototype.wa=function(n){Ji(this.g,new CT(n))};fc.prototype.va=function(n){Ji(this.g,new kT)};fc.prototype.ua=function(){Ji(this.g,"b")};Gh.prototype.createWebChannel=Gh.prototype.g;Ks.prototype.send=Ks.prototype.u;Ks.prototype.open=Ks.prototype.m;Ks.prototype.close=Ks.prototype.close;om.NO_ERROR=0;om.TIMEOUT=8;om.HTTP_ERROR=6;GI.COMPLETE="complete";KI.EventType=tf;tf.OPEN="a";tf.CLOSE="b";tf.ERROR="c";tf.MESSAGE="d";ji.prototype.listen=ji.prototype.N;oi.prototype.listenOnce=oi.prototype.O;oi.prototype.getLastError=oi.prototype.Oa;oi.prototype.getLastErrorCode=oi.prototype.Ea;oi.prototype.getStatus=oi.prototype.aa;oi.prototype.getResponseJson=oi.prototype.Sa;oi.prototype.getResponseText=oi.prototype.fa;oi.prototype.send=oi.prototype.da;oi.prototype.setWithCredentials=oi.prototype.Ka;var v6=function(){return new Gh},b6=function(){return rm()},Sp=om,_6=GI,y6=xl,__={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},S6=rf,Mf=KI,E6=oi;const y_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}es.UNAUTHENTICATED=new es(null),es.GOOGLE_CREDENTIALS=new es("google-credentials-uid"),es.FIRST_PARTY=new es("first-party-uid"),es.MOCK_USER=new es("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hc="9.17.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ll=new _I("@firebase/firestore");function S_(){return Ll.logLevel}function Mt(n,...e){if(Ll.logLevel<=Rn.DEBUG){const t=e.map(ev);Ll.debug(`Firestore (${hc}): ${n}`,...t)}}function uo(n,...e){if(Ll.logLevel<=Rn.ERROR){const t=e.map(ev);Ll.error(`Firestore (${hc}): ${n}`,...t)}}function Pg(n,...e){if(Ll.logLevel<=Rn.WARN){const t=e.map(ev);Ll.warn(`Firestore (${hc}): ${n}`,...t)}}function ev(n){if(typeof n=="string")return n;try{return e=n,JSON.stringify(e)}catch{return n}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(n="Unexpected state"){const e=`FIRESTORE (${hc}) INTERNAL ASSERTION FAILED: `+n;throw uo(e),new Error(e)}function Kn(n,e){n||zt()}function $t(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const et={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Dt extends cc{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class A6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(es.UNAUTHENTICATED))}shutdown(){}}class w6{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class C6{constructor(e){this.t=e,this.currentUser=es.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let i=this.i;const s=a=>this.i!==i?(i=this.i,t(a)):Promise.resolve();let r=new Il;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Il,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const a=r;e.enqueueRetryable(async()=>{await a.promise,await s(this.currentUser)})},l=a=>{Mt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=a,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(a=>l(a)),setTimeout(()=>{if(!this.auth){const a=this.t.getImmediate({optional:!0});a?l(a):(Mt("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Il)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(Mt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Kn(typeof i.accessToken=="string"),new IT(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Kn(e===null||typeof e=="string"),new es(e)}}class k6{constructor(e,t,i,s){this.h=e,this.l=t,this.m=i,this.g=s,this.type="FirstParty",this.user=es.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Kn(!(typeof this.h!="object"||this.h===null||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class I6{constructor(e,t,i,s){this.h=e,this.l=t,this.m=i,this.g=s}getToken(){return Promise.resolve(new k6(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(es.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class T6{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class O6{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const i=r=>{r.error!=null&&Mt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const o=r.token!==this.A;return this.A=r.token,Mt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(r.token):Promise.resolve()};this.o=r=>{e.enqueueRetryable(()=>i(r))};const s=r=>{Mt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.appCheck.addTokenListener(this.o)};this.T.onInit(r=>s(r)),setTimeout(()=>{if(!this.appCheck){const r=this.T.getImmediate({optional:!0});r?s(r):Mt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Kn(typeof t.token=="string"),this.A=t.token,new T6(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R6(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const s=R6(40);for(let r=0;r<s.length;++r)i.length<20&&s[r]<t&&(i+=e.charAt(s[r]%e.length))}return i}}function Dn(n,e){return n<e?-1:n>e?1:0}function Ua(n,e,t){return n.length===e.length&&n.every((i,s)=>t(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Dt(et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Dt(et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Dt(et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Dt(et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return mi.fromMillis(Date.now())}static fromDate(e){return mi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new mi(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Dn(this.nanoseconds,e.nanoseconds):Dn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new xt(e)}static min(){return new xt(new mi(0,0))}static max(){return new xt(new mi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,t,i){t===void 0?t=0:t>e.length&&zt(),i===void 0?i=e.length-t:i>e.length-t&&zt(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return bu.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof bu?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let s=0;s<i;s++){const r=e.get(s),o=t.get(s);if(r<o)return-1;if(r>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class $n extends bu{construct(e,t,i){return new $n(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Dt(et.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(s=>s.length>0))}return new $n(t)}static emptyPath(){return new $n([])}}const D6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ss extends bu{construct(e,t,i){return new ss(e,t,i)}static isValidIdentifier(e){return D6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ss.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ss(["__name__"])}static fromServerFormat(e){const t=[];let i="",s=0;const r=()=>{if(i.length===0)throw new Dt(et.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new Dt(et.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const a=e[s+1];if(a!=="\\"&&a!=="."&&a!=="`")throw new Dt(et.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=a,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(i+=l,s++):(r(),s++)}if(r(),o)throw new Dt(et.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ss(t)}static emptyPath(){return new ss([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.path=e}static fromPath(e){return new Bt($n.fromString(e))}static fromName(e){return new Bt($n.fromString(e).popFirst(5))}static empty(){return new Bt($n.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&$n.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return $n.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Bt(new $n(e.slice()))}}function N6(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=xt.fromTimestamp(i===1e9?new mi(t+1,0):new mi(t,i));return new qo(s,Bt.empty(),e)}function P6(n){return new qo(n.readTime,n.key,-1)}class qo{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new qo(xt.min(),Bt.empty(),-1)}static max(){return new qo(xt.max(),Bt.empty(),-1)}}function M6(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Bt.comparator(n.documentKey,e.documentKey),t!==0?t:Dn(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class L6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function af(n){if(n.code!==et.FAILED_PRECONDITION||n.message!==B6)throw n;Mt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&zt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ut((i,s)=>{this.nextCallback=r=>{this.wrapSuccess(e,r).next(i,s)},this.catchCallback=r=>{this.wrapFailure(t,r).next(i,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ut?t:ut.resolve(t)}catch(t){return ut.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ut.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ut.reject(t)}static resolve(e){return new ut((t,i)=>{t(e)})}static reject(e){return new ut((t,i)=>{i(e)})}static waitFor(e){return new ut((t,i)=>{let s=0,r=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++r,o&&r===s&&t()},a=>i(a))}),o=!0,r===s&&t()})}static or(e){let t=ut.resolve(!1);for(const i of e)t=t.next(s=>s?ut.resolve(s):i());return t}static forEach(e,t){const i=[];return e.forEach((s,r)=>{i.push(t.call(this,s,r))}),this.waitFor(i)}static mapArray(e,t){return new ut((i,s)=>{const r=e.length,o=new Array(r);let l=0;for(let a=0;a<r;a++){const c=a;t(e[c]).next(u=>{o[c]=u,++l,l===r&&i(o)},u=>s(u))}})}static doWhile(e,t){return new ut((i,s)=>{const r=()=>{e()===!0?t().next(()=>{r()},s):i()};r()})}}function cf(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ut(i),this.ct=i=>t.writeSequenceNumber(i))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}tv.at=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W6{constructor(e,t,i,s,r,o,l,a){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=s,this.ssl=r,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.useFetchStreams=a}}class _u{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new _u("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof _u&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function dc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function OT(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mm(n){return n==null}function Kh(n){return n===0&&1/n==-1/0}function U6(n){return typeof n=="number"&&Number.isInteger(n)&&!Kh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new ms(t)}static fromUint8Array(e){const t=function(i){let s="";for(let r=0;r<i.length;++r)s+=String.fromCharCode(i[r]);return s}(e);return new ms(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Dn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ms.EMPTY_BYTE_STRING=new ms("");const V6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zo(n){if(Kn(!!n),typeof n=="string"){let e=0;const t=V6.exec(n);if(Kn(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:_i(n.seconds),nanos:_i(n.nanos)}}function _i(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Va(n){return typeof n=="string"?ms.fromBase64String(n):ms.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RT(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function DT(n){const e=n.mapValue.fields.__previous_value__;return RT(e)?DT(e):e}function yu(n){const e=zo(n.mapValue.fields.__local_write_time__.timestampValue);return new mi(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bf={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Wl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?RT(n)?4:F6(n)?9007199254740991:10:zt()}function Gr(n,e){if(n===e)return!0;const t=Wl(n);if(t!==Wl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return yu(n).isEqual(yu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const r=zo(i.timestampValue),o=zo(s.timestampValue);return r.seconds===o.seconds&&r.nanos===o.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return Va(i.bytesValue).isEqual(Va(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return _i(i.geoPointValue.latitude)===_i(s.geoPointValue.latitude)&&_i(i.geoPointValue.longitude)===_i(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return _i(i.integerValue)===_i(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const r=_i(i.doubleValue),o=_i(s.doubleValue);return r===o?Kh(r)===Kh(o):isNaN(r)&&isNaN(o)}return!1}(n,e);case 9:return Ua(n.arrayValue.values||[],e.arrayValue.values||[],Gr);case 10:return function(i,s){const r=i.mapValue.fields||{},o=s.mapValue.fields||{};if(E_(r)!==E_(o))return!1;for(const l in r)if(r.hasOwnProperty(l)&&(o[l]===void 0||!Gr(r[l],o[l])))return!1;return!0}(n,e);default:return zt()}}function Su(n,e){return(n.values||[]).find(t=>Gr(t,e))!==void 0}function Fa(n,e){if(n===e)return 0;const t=Wl(n),i=Wl(e);if(t!==i)return Dn(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Dn(n.booleanValue,e.booleanValue);case 2:return function(s,r){const o=_i(s.integerValue||s.doubleValue),l=_i(r.integerValue||r.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(n,e);case 3:return A_(n.timestampValue,e.timestampValue);case 4:return A_(yu(n),yu(e));case 5:return Dn(n.stringValue,e.stringValue);case 6:return function(s,r){const o=Va(s),l=Va(r);return o.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,r){const o=s.split("/"),l=r.split("/");for(let a=0;a<o.length&&a<l.length;a++){const c=Dn(o[a],l[a]);if(c!==0)return c}return Dn(o.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,r){const o=Dn(_i(s.latitude),_i(r.latitude));return o!==0?o:Dn(_i(s.longitude),_i(r.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,r){const o=s.values||[],l=r.values||[];for(let a=0;a<o.length&&a<l.length;++a){const c=Fa(o[a],l[a]);if(c)return c}return Dn(o.length,l.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,r){if(s===Bf.mapValue&&r===Bf.mapValue)return 0;if(s===Bf.mapValue)return 1;if(r===Bf.mapValue)return-1;const o=s.fields||{},l=Object.keys(o),a=r.fields||{},c=Object.keys(a);l.sort(),c.sort();for(let u=0;u<l.length&&u<c.length;++u){const f=Dn(l[u],c[u]);if(f!==0)return f;const h=Fa(o[l[u]],a[c[u]]);if(h!==0)return h}return Dn(l.length,c.length)}(n.mapValue,e.mapValue);default:throw zt()}}function A_(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Dn(n,e);const t=zo(n),i=zo(e),s=Dn(t.seconds,i.seconds);return s!==0?s:Dn(t.nanos,i.nanos)}function ja(n){return Mg(n)}function Mg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const s=zo(i);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Va(n.bytesValue).toBase64():"referenceValue"in n?(t=n.referenceValue,Bt.fromName(t).toString()):"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(i){let s="[",r=!0;for(const o of i.values||[])r?r=!1:s+=",",s+=Mg(o);return s+"]"}(n.arrayValue):"mapValue"in n?function(i){const s=Object.keys(i.fields||{}).sort();let r="{",o=!0;for(const l of s)o?o=!1:r+=",",r+=`${l}:${Mg(i.fields[l])}`;return r+"}"}(n.mapValue):zt();var e,t}function w_(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Bg(n){return!!n&&"integerValue"in n}function nv(n){return!!n&&"arrayValue"in n}function C_(n){return!!n&&"nullValue"in n}function k_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ph(n){return!!n&&"mapValue"in n}function Zc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return dc(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Zc(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Zc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function F6(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e,t){this.position=e,this.inclusive=t}}function I_(n,e,t){let i=0;for(let s=0;s<n.position.length;s++){const r=e[s],o=n.position[s];if(r.field.isKeyField()?i=Bt.comparator(Bt.fromName(o.referenceValue),t.key):i=Fa(o,t.data.field(r.field)),r.dir==="desc"&&(i*=-1),i!==0)break}return i}function T_(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Gr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{}class Si extends NT{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new H6(e,t,i):t==="array-contains"?new G6(e,i):t==="in"?new K6(e,i):t==="not-in"?new X6(e,i):t==="array-contains-any"?new Q6(e,i):new Si(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new q6(e,i):new z6(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Fa(t,this.value)):t!==null&&Wl(this.value)===Wl(t)&&this.matchesComparison(Fa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return zt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class yr extends NT{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new yr(e,t)}matches(e){return PT(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ht!==null||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return e!==null?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function PT(n){return n.op==="and"}function MT(n){return j6(n)&&PT(n)}function j6(n){for(const e of n.filters)if(e instanceof yr)return!1;return!0}function Lg(n){if(n instanceof Si)return n.field.canonicalString()+n.op.toString()+ja(n.value);if(MT(n))return n.filters.map(e=>Lg(e)).join(",");{const e=n.filters.map(t=>Lg(t)).join(",");return`${n.op}(${e})`}}function BT(n,e){return n instanceof Si?function(t,i){return i instanceof Si&&t.op===i.op&&t.field.isEqual(i.field)&&Gr(t.value,i.value)}(n,e):n instanceof yr?function(t,i){return i instanceof yr&&t.op===i.op&&t.filters.length===i.filters.length?t.filters.reduce((s,r,o)=>s&&BT(r,i.filters[o]),!0):!1}(n,e):void zt()}function LT(n){return n instanceof Si?function(e){return`${e.field.canonicalString()} ${e.op} ${ja(e.value)}`}(n):n instanceof yr?function(e){return e.op.toString()+" {"+e.getFilters().map(LT).join(" ,")+"}"}(n):"Filter"}class H6 extends Si{constructor(e,t,i){super(e,t,i),this.key=Bt.fromName(i.referenceValue)}matches(e){const t=Bt.comparator(e.key,this.key);return this.matchesComparison(t)}}class q6 extends Si{constructor(e,t){super(e,"in",t),this.keys=WT("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class z6 extends Si{constructor(e,t){super(e,"not-in",t),this.keys=WT("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function WT(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>Bt.fromName(i.referenceValue))}class G6 extends Si{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return nv(t)&&Su(t.arrayValue,this.value)}}class K6 extends Si{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Su(this.value.arrayValue,t)}}class X6 extends Si{constructor(e,t){super(e,"not-in",t)}matches(e){if(Su(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Su(this.value.arrayValue,t)}}class Q6 extends Si{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!nv(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Su(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(e,t="asc"){this.field=e,this.dir=t}}function Y6(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e,t){this.comparator=e,this.root=t||Gi.EMPTY}insert(e,t){return new Bi(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Gi.BLACK,null,null))}remove(e){return new Bi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return t+i.left.size;s<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Lf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Lf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Lf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Lf(this.root,e,this.comparator,!0)}}class Lf{constructor(e,t,i,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=t?i(e.key,t):1,t&&s&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(r===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Gi{constructor(e,t,i,s,r){this.key=e,this.value=t,this.color=i??Gi.RED,this.left=s??Gi.EMPTY,this.right=r??Gi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,s,r){return new Gi(e??this.key,t??this.value,i??this.color,s??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let s=this;const r=i(e,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(e,t,i),null):r===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Gi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Gi.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Gi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Gi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw zt();const e=this.left.check();if(e!==this.right.check())throw zt();return e+(this.isRed()?0:1)}}Gi.EMPTY=null,Gi.RED=!0,Gi.BLACK=!1;Gi.EMPTY=new class{constructor(){this.size=0}get key(){throw zt()}get value(){throw zt()}get color(){throw zt()}get left(){throw zt()}get right(){throw zt()}copy(n,e,t,i,s){return this}insert(n,e,t){return new Gi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e){this.comparator=e,this.data=new Bi(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new O_(this.data.getIterator())}getIteratorFrom(e){return new O_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof Ni)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,r=i.getNext().key;if(this.comparator(s,r)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ni(this.comparator);return t.data=e,t}}class O_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e){this.fields=e,e.sort(ss.comparator)}static empty(){return new mr([])}unionWith(e){let t=new Ni(ss.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new mr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ua(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e){this.value=e}static empty(){return new xs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!ph(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zc(t)}setAll(e){let t=ss.emptyPath(),i={},s=[];e.forEach((o,l)=>{if(!t.isImmediateParentOf(l)){const a=this.getFieldsMap(t);this.applyChanges(a,i,s),i={},s=[],t=l.popLast()}o?i[l.lastSegment()]=Zc(o):s.push(l.lastSegment())});const r=this.getFieldsMap(t);this.applyChanges(r,i,s)}delete(e){const t=this.field(e.popLast());ph(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Gr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=t.mapValue.fields[e.get(i)];ph(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,i){dc(t,(s,r)=>e[s]=r);for(const s of i)delete e[s]}clone(){return new xs(Zc(this.value))}}function UT(n){const e=[];return dc(n.fields,(t,i)=>{const s=new ss([t]);if(ph(i)){const r=UT(i.mapValue).fields;if(r.length===0)e.push(s);else for(const o of r)e.push(s.child(o))}else e.push(s)}),new mr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e,t,i,s,r,o,l){this.key=e,this.documentType=t,this.version=i,this.readTime=s,this.createTime=r,this.data=o,this.documentState=l}static newInvalidDocument(e){return new ns(e,0,xt.min(),xt.min(),xt.min(),xs.empty(),0)}static newFoundDocument(e,t,i,s){return new ns(e,1,t,xt.min(),i,s,0)}static newNoDocument(e,t){return new ns(e,2,t,xt.min(),xt.min(),xs.empty(),0)}static newUnknownDocument(e,t){return new ns(e,3,t,xt.min(),xt.min(),xs.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(xt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ns&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ns(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J6{constructor(e,t=null,i=[],s=[],r=null,o=null,l=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=s,this.limit=r,this.startAt=o,this.endAt=l,this.ft=null}}function R_(n,e=null,t=[],i=[],s=null,r=null,o=null){return new J6(n,e,t,i,s,r,o)}function iv(n){const e=$t(n);if(e.ft===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>Lg(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),mm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>ja(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>ja(i)).join(",")),e.ft=t}return e.ft}function sv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Y6(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!BT(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!T_(n.startAt,e.startAt)&&T_(n.endAt,e.endAt)}function Wg(n){return Bt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(e,t=null,i=[],s=[],r=null,o="F",l=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=s,this.limit=r,this.limitType=o,this.startAt=l,this.endAt=a,this.dt=null,this._t=null,this.startAt,this.endAt}}function Z6(n,e,t,i,s,r,o,l){return new uf(n,e,t,i,s,r,o,l)}function rv(n){return new uf(n)}function D_(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function VT(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function ov(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(t!==null)return t}return null}function FT(n){return n.collectionGroup!==null}function Ca(n){const e=$t(n);if(e.dt===null){e.dt=[];const t=ov(e),i=VT(e);if(t!==null&&i===null)t.isKeyField()||e.dt.push(new xc(t)),e.dt.push(new xc(ss.keyField(),"asc"));else{let s=!1;for(const r of e.explicitOrderBy)e.dt.push(r),r.field.isKeyField()&&(s=!0);if(!s){const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new xc(ss.keyField(),r))}}}return e.dt}function fo(n){const e=$t(n);if(!e._t)if(e.limitType==="F")e._t=R_(e.path,e.collectionGroup,Ca(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const r of Ca(e)){const o=r.dir==="desc"?"asc":"desc";t.push(new xc(r.field,o))}const i=e.endAt?new Xh(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new Xh(e.startAt.position,e.startAt.inclusive):null;e._t=R_(e.path,e.collectionGroup,t,e.filters,e.limit,i,s)}return e._t}function Ug(n,e){e.getFirstInequalityField(),ov(n);const t=n.filters.concat([e]);return new uf(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Vg(n,e,t){return new uf(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function pm(n,e){return sv(fo(n),fo(e))&&n.limitType===e.limitType}function jT(n){return`${iv(fo(n))}|lt:${n.limitType}`}function Fg(n){return`Query(target=${function(e){let t=e.path.canonicalString();return e.collectionGroup!==null&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(i=>LT(i)).join(", ")}]`),mm(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>ja(i)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>ja(i)).join(",")),`Target(${t})`}(fo(n))}; limitType=${n.limitType})`}function gm(n,e){return e.isFoundDocument()&&function(t,i){const s=i.key.path;return t.collectionGroup!==null?i.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(s):Bt.isDocumentKey(t.path)?t.path.isEqual(s):t.path.isImmediateParentOf(s)}(n,e)&&function(t,i){for(const s of Ca(t))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(t,i){for(const s of t.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(t,i){return!(t.startAt&&!function(s,r,o){const l=I_(s,r,o);return s.inclusive?l<=0:l<0}(t.startAt,Ca(t),i)||t.endAt&&!function(s,r,o){const l=I_(s,r,o);return s.inclusive?l>=0:l>0}(t.endAt,Ca(t),i))}(n,e)}function x6(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function HT(n){return(e,t)=>{let i=!1;for(const s of Ca(n)){const r=$6(s,e,t);if(r!==0)return r;i=i||s.field.isKeyField()}return 0}}function $6(n,e,t){const i=n.field.isKeyField()?Bt.comparator(e.key,t.key):function(s,r,o){const l=r.data.field(s),a=o.data.field(s);return l!==null&&a!==null?Fa(l,a):zt()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return zt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qT(n,e){if(n.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Kh(e)?"-0":e}}function zT(n){return{integerValue:""+n}}function eB(n,e){return U6(e)?zT(e):qT(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(){this._=void 0}}function tB(n,e,t){return n instanceof Qh?function(i,s){const r={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&(r.fields.__previous_value__=s),{mapValue:r}}(t,e):n instanceof Eu?KT(n,e):n instanceof Au?XT(n,e):function(i,s){const r=GT(i,s),o=N_(r)+N_(i.gt);return Bg(r)&&Bg(i.gt)?zT(o):qT(i.yt,o)}(n,e)}function nB(n,e,t){return n instanceof Eu?KT(n,e):n instanceof Au?XT(n,e):t}function GT(n,e){return n instanceof Yh?Bg(t=e)||function(i){return!!i&&"doubleValue"in i}(t)?e:{integerValue:0}:null;var t}class Qh extends vm{}class Eu extends vm{constructor(e){super(),this.elements=e}}function KT(n,e){const t=QT(e);for(const i of n.elements)t.some(s=>Gr(s,i))||t.push(i);return{arrayValue:{values:t}}}class Au extends vm{constructor(e){super(),this.elements=e}}function XT(n,e){let t=QT(e);for(const i of n.elements)t=t.filter(s=>!Gr(s,i));return{arrayValue:{values:t}}}class Yh extends vm{constructor(e,t){super(),this.yt=e,this.gt=t}}function N_(n){return _i(n.integerValue||n.doubleValue)}function QT(n){return nv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function iB(n,e){return n.field.isEqual(e.field)&&function(t,i){return t instanceof Eu&&i instanceof Eu||t instanceof Au&&i instanceof Au?Ua(t.elements,i.elements,Gr):t instanceof Yh&&i instanceof Yh?Gr(t.gt,i.gt):t instanceof Qh&&i instanceof Qh}(n.transform,e.transform)}class sB{constructor(e,t){this.version=e,this.transformResults=t}}class lo{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new lo}static exists(e){return new lo(void 0,e)}static updateTime(e){return new lo(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function gh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class bm{}function YT(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new ZT(n.key,lo.none()):new ff(n.key,n.data,lo.none());{const t=n.data,i=xs.empty();let s=new Ni(ss.comparator);for(let r of e.fields)if(!s.has(r)){let o=t.field(r);o===null&&r.length>1&&(r=r.popLast(),o=t.field(r)),o===null?i.delete(r):i.set(r,o),s=s.add(r)}return new $l(n.key,i,new mr(s.toArray()),lo.none())}}function rB(n,e,t){n instanceof ff?function(i,s,r){const o=i.value.clone(),l=M_(i.fieldTransforms,s,r.transformResults);o.setAll(l),s.convertToFoundDocument(r.version,o).setHasCommittedMutations()}(n,e,t):n instanceof $l?function(i,s,r){if(!gh(i.precondition,s))return void s.convertToUnknownDocument(r.version);const o=M_(i.fieldTransforms,s,r.transformResults),l=s.data;l.setAll(JT(i)),l.setAll(o),s.convertToFoundDocument(r.version,l).setHasCommittedMutations()}(n,e,t):function(i,s,r){s.convertToNoDocument(r.version).setHasCommittedMutations()}(0,e,t)}function $c(n,e,t,i){return n instanceof ff?function(s,r,o,l){if(!gh(s.precondition,r))return o;const a=s.value.clone(),c=B_(s.fieldTransforms,l,r);return a.setAll(c),r.convertToFoundDocument(r.version,a).setHasLocalMutations(),null}(n,e,t,i):n instanceof $l?function(s,r,o,l){if(!gh(s.precondition,r))return o;const a=B_(s.fieldTransforms,l,r),c=r.data;return c.setAll(JT(s)),c.setAll(a),r.convertToFoundDocument(r.version,c).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(u=>u.field))}(n,e,t,i):function(s,r,o){return gh(s.precondition,r)?(r.convertToNoDocument(r.version).setHasLocalMutations(),null):o}(n,e,t)}function oB(n,e){let t=null;for(const i of n.fieldTransforms){const s=e.data.field(i.field),r=GT(i.transform,s||null);r!=null&&(t===null&&(t=xs.empty()),t.set(i.field,r))}return t||null}function P_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(t,i){return t===void 0&&i===void 0||!(!t||!i)&&Ua(t,i,(s,r)=>iB(s,r))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class ff extends bm{constructor(e,t,i,s=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class $l extends bm{constructor(e,t,i,s,r=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function JT(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function M_(n,e,t){const i=new Map;Kn(n.length===t.length);for(let s=0;s<t.length;s++){const r=n[s],o=r.transform,l=e.data.field(r.field);i.set(r.field,nB(o,l,t[s]))}return i}function B_(n,e,t){const i=new Map;for(const s of n){const r=s.transform,o=t.data.field(s.field);i.set(s.field,tB(r,o,e))}return i}class ZT extends bm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class lB extends bm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aB{constructor(e){this.count=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bi,vn;function cB(n){switch(n){default:return zt();case et.CANCELLED:case et.UNKNOWN:case et.DEADLINE_EXCEEDED:case et.RESOURCE_EXHAUSTED:case et.INTERNAL:case et.UNAVAILABLE:case et.UNAUTHENTICATED:return!1;case et.INVALID_ARGUMENT:case et.NOT_FOUND:case et.ALREADY_EXISTS:case et.PERMISSION_DENIED:case et.FAILED_PRECONDITION:case et.ABORTED:case et.OUT_OF_RANGE:case et.UNIMPLEMENTED:case et.DATA_LOSS:return!0}}function xT(n){if(n===void 0)return uo("GRPC error has no .code"),et.UNKNOWN;switch(n){case bi.OK:return et.OK;case bi.CANCELLED:return et.CANCELLED;case bi.UNKNOWN:return et.UNKNOWN;case bi.DEADLINE_EXCEEDED:return et.DEADLINE_EXCEEDED;case bi.RESOURCE_EXHAUSTED:return et.RESOURCE_EXHAUSTED;case bi.INTERNAL:return et.INTERNAL;case bi.UNAVAILABLE:return et.UNAVAILABLE;case bi.UNAUTHENTICATED:return et.UNAUTHENTICATED;case bi.INVALID_ARGUMENT:return et.INVALID_ARGUMENT;case bi.NOT_FOUND:return et.NOT_FOUND;case bi.ALREADY_EXISTS:return et.ALREADY_EXISTS;case bi.PERMISSION_DENIED:return et.PERMISSION_DENIED;case bi.FAILED_PRECONDITION:return et.FAILED_PRECONDITION;case bi.ABORTED:return et.ABORTED;case bi.OUT_OF_RANGE:return et.OUT_OF_RANGE;case bi.UNIMPLEMENTED:return et.UNIMPLEMENTED;case bi.DATA_LOSS:return et.DATA_LOSS;default:return zt()}}(vn=bi||(bi={}))[vn.OK=0]="OK",vn[vn.CANCELLED=1]="CANCELLED",vn[vn.UNKNOWN=2]="UNKNOWN",vn[vn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",vn[vn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",vn[vn.NOT_FOUND=5]="NOT_FOUND",vn[vn.ALREADY_EXISTS=6]="ALREADY_EXISTS",vn[vn.PERMISSION_DENIED=7]="PERMISSION_DENIED",vn[vn.UNAUTHENTICATED=16]="UNAUTHENTICATED",vn[vn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",vn[vn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",vn[vn.ABORTED=10]="ABORTED",vn[vn.OUT_OF_RANGE=11]="OUT_OF_RANGE",vn[vn.UNIMPLEMENTED=12]="UNIMPLEMENTED",vn[vn.INTERNAL=13]="INTERNAL",vn[vn.UNAVAILABLE=14]="UNAVAILABLE",vn[vn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[s,r]of i)if(this.equalsFn(s,e))return r}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return void(s[r]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[t]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){dc(this.inner,(t,i)=>{for(const[s,r]of i)e(s,r)})}isEmpty(){return OT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uB=new Bi(Bt.comparator);function ho(){return uB}const $T=new Bi(Bt.comparator);function Uc(...n){let e=$T;for(const t of n)e=e.insert(t.key,t);return e}function e4(n){let e=$T;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Sl(){return eu()}function t4(){return eu()}function eu(){return new mc(n=>n.toString(),(n,e)=>n.isEqual(e))}const fB=new Bi(Bt.comparator),hB=new Ni(Bt.comparator);function dn(...n){let e=hB;for(const t of n)e=e.add(t);return e}const dB=new Ni(Dn);function n4(){return dB}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(e,t,i,s,r){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const s=new Map;return s.set(e,hf.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new _m(xt.min(),s,n4(),ho(),dn())}}class hf{constructor(e,t,i,s,r){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new hf(i,t,dn(),dn(),dn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e,t,i,s){this.It=e,this.removedTargetIds=t,this.key=i,this.Tt=s}}class i4{constructor(e,t){this.targetId=e,this.Et=t}}class s4{constructor(e,t,i=ms.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=s}}class L_{constructor(){this.At=0,this.Rt=U_(),this.bt=ms.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return this.At!==0}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=dn(),t=dn(),i=dn();return this.Rt.forEach((s,r)=>{switch(r){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:i=i.add(s);break;default:zt()}}),new hf(this.bt,this.Pt,e,t,i)}xt(){this.vt=!1,this.Rt=U_()}Nt(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class mB{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=ho(),this.qt=W_(),this.Ut=new Ni(Dn)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}jt(e){this.forEachTarget(e,t=>{const i=this.Wt(t);switch(e.state){case 0:this.zt(t)&&i.Dt(e.resumeToken);break;case 1:i.Mt(),i.Vt||i.xt(),i.Dt(e.resumeToken);break;case 2:i.Mt(),i.Vt||this.removeTarget(t);break;case 3:this.zt(t)&&(i.Ft(),i.Dt(e.resumeToken));break;case 4:this.zt(t)&&(this.Ht(t),i.Dt(e.resumeToken));break;default:zt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((i,s)=>{this.zt(s)&&t(s)})}Jt(e){const t=e.targetId,i=e.Et.count,s=this.Yt(t);if(s){const r=s.target;if(Wg(r))if(i===0){const o=new Bt(r.path);this.Qt(t,o,ns.newNoDocument(o,xt.min()))}else Kn(i===1);else this.Xt(t)!==i&&(this.Ht(t),this.Ut=this.Ut.add(t))}}Zt(e){const t=new Map;this.Bt.forEach((r,o)=>{const l=this.Yt(o);if(l){if(r.current&&Wg(l.target)){const a=new Bt(l.target.path);this.Lt.get(a)!==null||this.te(o,a)||this.Qt(o,a,ns.newNoDocument(a,e))}r.St&&(t.set(o,r.Ct()),r.xt())}});let i=dn();this.qt.forEach((r,o)=>{let l=!0;o.forEachWhile(a=>{const c=this.Yt(a);return!c||c.purpose===2||(l=!1,!1)}),l&&(i=i.add(r))}),this.Lt.forEach((r,o)=>o.setReadTime(e));const s=new _m(e,t,this.Ut,this.Lt,i);return this.Lt=ho(),this.qt=W_(),this.Ut=new Ni(Dn),s}Gt(e,t){if(!this.zt(e))return;const i=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,i),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,i){if(!this.zt(e))return;const s=this.Wt(e);this.te(e,t)?s.Nt(t,1):s.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),i&&(this.Lt=this.Lt.insert(t,i))}removeTarget(e){this.Bt.delete(e)}Xt(e){const t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let t=this.Bt.get(e);return t||(t=new L_,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new Ni(Dn),this.qt=this.qt.insert(e,t)),t}zt(e){const t=this.Yt(e)!==null;return t||Mt("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new L_),this.$t.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}function W_(){return new Bi(Bt.comparator)}function U_(){return new Bi(Bt.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pB=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),gB=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),vB=(()=>({and:"AND",or:"OR"}))();class bB{constructor(e,t){this.databaseId=e,this.wt=t}}function Jh(n,e){return n.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function r4(n,e){return n.wt?e.toBase64():e.toUint8Array()}function _B(n,e){return Jh(n,e.toTimestamp())}function Vr(n){return Kn(!!n),xt.fromTimestamp(function(e){const t=zo(e);return new mi(t.seconds,t.nanos)}(n))}function lv(n,e){return function(t){return new $n(["projects",t.projectId,"databases",t.database])}(n).child("documents").child(e).canonicalString()}function o4(n){const e=$n.fromString(n);return Kn(u4(e)),e}function jg(n,e){return lv(n.databaseId,e.path)}function Ep(n,e){const t=o4(e);if(t.get(1)!==n.databaseId.projectId)throw new Dt(et.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Dt(et.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Bt(l4(t))}function Hg(n,e){return lv(n.databaseId,e)}function yB(n){const e=o4(n);return e.length===4?$n.emptyPath():l4(e)}function qg(n){return new $n(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function l4(n){return Kn(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function V_(n,e,t){return{name:jg(n,e),fields:t.value.mapValue.fields}}function SB(n,e){let t;if("targetChange"in e){e.targetChange;const i=function(a){return a==="NO_CHANGE"?0:a==="ADD"?1:a==="REMOVE"?2:a==="CURRENT"?3:a==="RESET"?4:zt()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],r=function(a,c){return a.wt?(Kn(c===void 0||typeof c=="string"),ms.fromBase64String(c||"")):(Kn(c===void 0||c instanceof Uint8Array),ms.fromUint8Array(c||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(a){const c=a.code===void 0?et.UNKNOWN:xT(a.code);return new Dt(c,a.message||"")}(o);t=new s4(i,s,r,l||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=Ep(n,i.document.name),r=Vr(i.document.updateTime),o=i.document.createTime?Vr(i.document.createTime):xt.min(),l=new xs({mapValue:{fields:i.document.fields}}),a=ns.newFoundDocument(s,r,o,l),c=i.targetIds||[],u=i.removedTargetIds||[];t=new vh(c,u,a.key,a)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=Ep(n,i.document),r=i.readTime?Vr(i.readTime):xt.min(),o=ns.newNoDocument(s,r),l=i.removedTargetIds||[];t=new vh([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=Ep(n,i.document),r=i.removedTargetIds||[];t=new vh([],r,s,null)}else{if(!("filter"in e))return zt();{e.filter;const i=e.filter;i.targetId;const s=i.count||0,r=new aB(s),o=i.targetId;t=new i4(o,r)}}return t}function EB(n,e){let t;if(e instanceof ff)t={update:V_(n,e.key,e.value)};else if(e instanceof ZT)t={delete:jg(n,e.key)};else if(e instanceof $l)t={update:V_(n,e.key,e.data),updateMask:DB(e.fieldMask)};else{if(!(e instanceof lB))return zt();t={verify:jg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(s,r){const o=r.transform;if(o instanceof Qh)return{fieldPath:r.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Eu)return{fieldPath:r.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Au)return{fieldPath:r.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Yh)return{fieldPath:r.field.canonicalString(),increment:o.gt};throw zt()}(0,i))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:_B(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:zt()}(n,e.precondition)),t}function AB(n,e){return n&&n.length>0?(Kn(e!==void 0),n.map(t=>function(i,s){let r=i.updateTime?Vr(i.updateTime):Vr(s);return r.isEqual(xt.min())&&(r=Vr(s)),new sB(r,i.transformResults||[])}(t,e))):[]}function wB(n,e){return{documents:[Hg(n,e.path)]}}function CB(n,e){const t={structuredQuery:{}},i=e.path;e.collectionGroup!==null?(t.parent=Hg(n,i),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Hg(n,i.popLast()),t.structuredQuery.from=[{collectionId:i.lastSegment()}]);const s=function(a){if(a.length!==0)return c4(yr.create(a,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const r=function(a){if(a.length!==0)return a.map(c=>function(u){return{field:da(u.field),direction:TB(u.dir)}}(c))}(e.orderBy);r&&(t.structuredQuery.orderBy=r);const o=function(a,c){return a.wt||mm(c)?c:{value:c}}(n,e.limit);var l;return o!==null&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt={before:(l=e.startAt).inclusive,values:l.position}),e.endAt&&(t.structuredQuery.endAt=function(a){return{before:!a.inclusive,values:a.position}}(e.endAt)),t}function kB(n){let e=yB(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let s=null;if(i>0){Kn(i===1);const u=t.from[0];u.allDescendants?s=u.collectionId:e=e.child(u.collectionId)}let r=[];t.where&&(r=function(u){const f=a4(u);return f instanceof yr&&MT(f)?f.getFilters():[f]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(u=>function(f){return new xc(ma(f.field),function(h){switch(h){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(f.direction))}(u)));let l=null;t.limit&&(l=function(u){let f;return f=typeof u=="object"?u.value:u,mm(f)?null:f}(t.limit));let a=null;t.startAt&&(a=function(u){const f=!!u.before,h=u.values||[];return new Xh(h,f)}(t.startAt));let c=null;return t.endAt&&(c=function(u){const f=!u.before,h=u.values||[];return new Xh(h,f)}(t.endAt)),Z6(e,s,o,r,l,"F",a,c)}function IB(n,e){const t=function(i,s){switch(s){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return zt()}}(0,e.purpose);return t==null?null:{"goog-listen-tags":t}}function a4(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=ma(e.unaryFilter.field);return Si.create(t,"==",{doubleValue:NaN});case"IS_NULL":const i=ma(e.unaryFilter.field);return Si.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ma(e.unaryFilter.field);return Si.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=ma(e.unaryFilter.field);return Si.create(r,"!=",{nullValue:"NULL_VALUE"});default:return zt()}}(n):n.fieldFilter!==void 0?function(e){return Si.create(ma(e.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return zt()}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return yr.create(e.compositeFilter.filters.map(t=>a4(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return zt()}}(e.compositeFilter.op))}(n):zt()}function TB(n){return pB[n]}function OB(n){return gB[n]}function RB(n){return vB[n]}function da(n){return{fieldPath:n.canonicalString()}}function ma(n){return ss.fromServerFormat(n.fieldPath)}function c4(n){return n instanceof Si?function(e){if(e.op==="=="){if(k_(e.value))return{unaryFilter:{field:da(e.field),op:"IS_NAN"}};if(C_(e.value))return{unaryFilter:{field:da(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(k_(e.value))return{unaryFilter:{field:da(e.field),op:"IS_NOT_NAN"}};if(C_(e.value))return{unaryFilter:{field:da(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:da(e.field),op:OB(e.op),value:e.value}}}(n):n instanceof yr?function(e){const t=e.getFilters().map(i=>c4(i));return t.length===1?t[0]:{compositeFilter:{op:RB(e.op),filters:t}}}(n):zt()}function DB(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function u4(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NB{constructor(e,t,i,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const r=this.mutations[s];r.key.isEqual(e.key)&&rB(r,e,i[s])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=$c(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=$c(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=t4();return this.mutations.forEach(s=>{const r=e.get(s.key),o=r.overlayedDocument;let l=this.applyToLocalView(o,r.mutatedFields);l=t.has(s.key)?null:l;const a=YT(o,l);a!==null&&i.set(s.key,a),o.isValidDocument()||o.convertToNoDocument(xt.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),dn())}isEqual(e){return this.batchId===e.batchId&&Ua(this.mutations,e.mutations,(t,i)=>P_(t,i))&&Ua(this.baseMutations,e.baseMutations,(t,i)=>P_(t,i))}}class av{constructor(e,t,i,s){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=s}static from(e,t,i){Kn(e.mutations.length===i.length);let s=fB;const r=e.mutations;for(let o=0;o<r.length;o++)s=s.insert(r[o].key,i[o].version);return new av(e,t,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PB{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(e,t,i,s,r=xt.min(),o=xt.min(),l=ms.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l}withSequenceNumber(e){return new Tl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Tl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Tl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MB{constructor(e){this.ie=e}}function BB(n){const e=kB({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Vg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LB{constructor(){this.Je=new WB}addToCollectionParentIndex(e,t){return this.Je.add(t),ut.resolve()}getCollectionParents(e,t){return ut.resolve(this.Je.getEntries(t))}addFieldIndex(e,t){return ut.resolve()}deleteFieldIndex(e,t){return ut.resolve()}getDocumentsMatchingTarget(e,t){return ut.resolve(null)}getIndexType(e,t){return ut.resolve(0)}getFieldIndexes(e,t){return ut.resolve([])}getNextCollectionGroupToUpdate(e){return ut.resolve(null)}getMinOffset(e,t){return ut.resolve(qo.min())}getMinOffsetFromCollectionGroup(e,t){return ut.resolve(qo.min())}updateCollectionGroup(e,t,i){return ut.resolve()}updateIndexEntries(e,t){return ut.resolve()}}class WB{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t]||new Ni($n.comparator),r=!s.has(i);return this.index[t]=s.add(i),r}has(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t];return s&&s.has(i)}getEntries(e){return(this.index[e]||new Ni($n.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Ha(0)}static vn(){return new Ha(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UB{constructor(){this.changes=new mc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ns.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?ut.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VB{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FB{constructor(e,t,i,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(i!==null&&$c(i.mutation,s,mr.empty(),mi.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,dn()).next(()=>i))}getLocalViewOfDocuments(e,t,i=dn()){const s=Sl();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,i).next(r=>{let o=Uc();return r.forEach((l,a)=>{o=o.insert(l,a.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const i=Sl();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,dn()))}populateOverlays(e,t,i){const s=[];return i.forEach(r=>{t.has(r)||s.push(r)}),this.documentOverlayCache.getOverlays(e,s).next(r=>{r.forEach((o,l)=>{t.set(o,l)})})}computeViews(e,t,i,s){let r=ho();const o=eu(),l=eu();return t.forEach((a,c)=>{const u=i.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof $l)?r=r.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),$c(u.mutation,c,u.mutation.getFieldMask(),mi.now())):o.set(c.key,mr.empty())}),this.recalculateAndSaveOverlays(e,r).next(a=>(a.forEach((c,u)=>o.set(c,u)),t.forEach((c,u)=>{var f;return l.set(c,new VB(u,(f=o.get(c))!==null&&f!==void 0?f:null))}),l))}recalculateAndSaveOverlays(e,t){const i=eu();let s=new Bi((o,l)=>o-l),r=dn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const l of o)l.keys().forEach(a=>{const c=t.get(a);if(c===null)return;let u=i.get(a)||mr.empty();u=l.applyToLocalView(c,u),i.set(a,u);const f=(s.get(l.batchId)||dn()).add(a);s=s.insert(l.batchId,f)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const a=l.getNext(),c=a.key,u=a.value,f=t4();u.forEach(h=>{if(!r.has(h)){const d=YT(t.get(h),i.get(h));d!==null&&f.set(h,d),r=r.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return ut.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i){return function(s){return Bt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):FT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i):this.getDocumentsMatchingCollectionQuery(e,t,i)}getNextDocuments(e,t,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,s).next(r=>{const o=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,s-r.size):ut.resolve(Sl());let l=-1,a=r;return o.next(c=>ut.forEach(c,(u,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),r.get(u)?ut.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{a=a.insert(u,h)}))).next(()=>this.populateOverlays(e,c,r)).next(()=>this.computeViews(e,a,c,dn())).next(u=>({batchId:l,changes:e4(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Bt(t)).next(i=>{let s=Uc();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,i){const s=t.collectionGroup;let r=Uc();return this.indexManager.getCollectionParents(e,s).next(o=>ut.forEach(o,l=>{const a=function(c,u){return new uf(u,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,a,i).next(c=>{c.forEach((u,f)=>{r=r.insert(u,f)})})}).next(()=>r))}getDocumentsMatchingCollectionQuery(e,t,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(r=>(s=r,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,s))).next(r=>{s.forEach((l,a)=>{const c=a.getKey();r.get(c)===null&&(r=r.insert(c,ns.newInvalidDocument(c)))});let o=Uc();return r.forEach((l,a)=>{const c=s.get(l);c!==void 0&&$c(c.mutation,a,mr.empty(),mi.now()),gm(t,a)&&(o=o.insert(l,a))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jB{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return ut.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var i;return this.Zn.set(t.id,{id:(i=t).id,version:i.version,createTime:Vr(i.createTime)}),ut.resolve()}getNamedQuery(e,t){return ut.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,function(i){return{name:i.name,query:BB(i.bundledQuery),readTime:Vr(i.readTime)}}(t)),ut.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HB{constructor(){this.overlays=new Bi(Bt.comparator),this.es=new Map}getOverlay(e,t){return ut.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Sl();return ut.forEach(t,s=>this.getOverlay(e,s).next(r=>{r!==null&&i.set(s,r)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((s,r)=>{this.oe(e,t,r)}),ut.resolve()}removeOverlaysForBatchId(e,t,i){const s=this.es.get(i);return s!==void 0&&(s.forEach(r=>this.overlays=this.overlays.remove(r)),this.es.delete(i)),ut.resolve()}getOverlaysForCollection(e,t,i){const s=Sl(),r=t.length+1,o=new Bt(t.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const a=l.getNext().value,c=a.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===r&&a.largestBatchId>i&&s.set(a.getKey(),a)}return ut.resolve(s)}getOverlaysForCollectionGroup(e,t,i,s){let r=new Bi((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>i){let u=r.get(c.largestBatchId);u===null&&(u=Sl(),r=r.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const l=Sl(),a=r.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((c,u)=>l.set(c,u)),!(l.size()>=s)););return ut.resolve(l)}oe(e,t,i){const s=this.overlays.get(i.key);if(s!==null){const o=this.es.get(s.largestBatchId).delete(i.key);this.es.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new PB(t,i));let r=this.es.get(t);r===void 0&&(r=dn(),this.es.set(t,r)),this.es.set(t,r.add(i.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(){this.ns=new Ni(Vi.ss),this.rs=new Ni(Vi.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const i=new Vi(e,t);this.ns=this.ns.add(i),this.rs=this.rs.add(i)}us(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.cs(new Vi(e,t))}hs(e,t){e.forEach(i=>this.removeReference(i,t))}ls(e){const t=new Bt(new $n([])),i=new Vi(t,e),s=new Vi(t,e+1),r=[];return this.rs.forEachInRange([i,s],o=>{this.cs(o),r.push(o.key)}),r}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Bt(new $n([])),i=new Vi(t,e),s=new Vi(t,e+1);let r=dn();return this.rs.forEachInRange([i,s],o=>{r=r.add(o.key)}),r}containsKey(e){const t=new Vi(e,0),i=this.ns.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Vi{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Bt.comparator(e.key,t.key)||Dn(e._s,t._s)}static os(e,t){return Dn(e._s,t._s)||Bt.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qB{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new Ni(Vi.ss)}checkEmpty(e){return ut.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,s){const r=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new NB(r,t,i,s);this.mutationQueue.push(o);for(const l of s)this.gs=this.gs.add(new Vi(l.key,r)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return ut.resolve(o)}lookupMutationBatch(e,t){return ut.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,s=this.ps(i),r=s<0?0:s;return ut.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return ut.resolve(this.mutationQueue.length===0?-1:this.ws-1)}getAllMutationBatches(e){return ut.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Vi(t,0),s=new Vi(t,Number.POSITIVE_INFINITY),r=[];return this.gs.forEachInRange([i,s],o=>{const l=this.ys(o._s);r.push(l)}),ut.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Ni(Dn);return t.forEach(s=>{const r=new Vi(s,0),o=new Vi(s,Number.POSITIVE_INFINITY);this.gs.forEachInRange([r,o],l=>{i=i.add(l._s)})}),ut.resolve(this.Is(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,s=i.length+1;let r=i;Bt.isDocumentKey(r)||(r=r.child(""));const o=new Vi(new Bt(r),0);let l=new Ni(Dn);return this.gs.forEachWhile(a=>{const c=a.key.path;return!!i.isPrefixOf(c)&&(c.length===s&&(l=l.add(a._s)),!0)},o),ut.resolve(this.Is(l))}Is(e){const t=[];return e.forEach(i=>{const s=this.ys(i);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){Kn(this.Ts(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.gs;return ut.forEach(t.mutations,s=>{const r=new Vi(s.key,t.batchId);return i=i.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.gs=i})}An(e){}containsKey(e,t){const i=new Vi(t,0),s=this.gs.firstAfterOrEqual(i);return ut.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ut.resolve()}Ts(e,t){return this.ps(e)}ps(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zB{constructor(e){this.Es=e,this.docs=new Bi(Bt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,s=this.docs.get(i),r=s?s.size:0,o=this.Es(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:o}),this.size+=o-r,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ut.resolve(i?i.document.mutableCopy():ns.newInvalidDocument(t))}getEntries(e,t){let i=ho();return t.forEach(s=>{const r=this.docs.get(s);i=i.insert(s,r?r.document.mutableCopy():ns.newInvalidDocument(s))}),ut.resolve(i)}getDocumentsMatchingQuery(e,t,i,s){let r=ho();const o=t.path,l=new Bt(o.child("")),a=this.docs.getIteratorFrom(l);for(;a.hasNext();){const{key:c,value:{document:u}}=a.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||M6(P6(u),i)<=0||(s.has(u.key)||gm(t,u))&&(r=r.insert(u.key,u.mutableCopy()))}return ut.resolve(r)}getAllFromCollectionGroup(e,t,i,s){zt()}As(e,t){return ut.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new GB(this)}getSize(e){return ut.resolve(this.size)}}class GB extends UB{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?t.push(this.Yn.addEntry(e,s)):this.Yn.removeEntry(i)}),ut.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KB{constructor(e){this.persistence=e,this.Rs=new mc(t=>iv(t),sv),this.lastRemoteSnapshotVersion=xt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new cv,this.targetCount=0,this.vs=Ha.Pn()}forEachTarget(e,t){return this.Rs.forEach((i,s)=>t(s)),ut.resolve()}getLastRemoteSnapshotVersion(e){return ut.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ut.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),ut.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.bs&&(this.bs=t),ut.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Ha(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,ut.resolve()}updateTargetData(e,t){return this.Dn(t),ut.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,ut.resolve()}removeTargets(e,t,i){let s=0;const r=[];return this.Rs.forEach((o,l)=>{l.sequenceNumber<=t&&i.get(l.targetId)===null&&(this.Rs.delete(o),r.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),ut.waitFor(r).next(()=>s)}getTargetCount(e){return ut.resolve(this.targetCount)}getTargetData(e,t){const i=this.Rs.get(t)||null;return ut.resolve(i)}addMatchingKeys(e,t,i){return this.Ps.us(t,i),ut.resolve()}removeMatchingKeys(e,t,i){this.Ps.hs(t,i);const s=this.persistence.referenceDelegate,r=[];return s&&t.forEach(o=>{r.push(s.markPotentiallyOrphaned(e,o))}),ut.waitFor(r)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),ut.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Ps.ds(t);return ut.resolve(i)}containsKey(e,t){return ut.resolve(this.Ps.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XB{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new tv(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new KB(this),this.indexManager=new LB,this.remoteDocumentCache=function(i){return new zB(i)}(i=>this.referenceDelegate.xs(i)),this.yt=new MB(t),this.Ns=new jB(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new HB,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Vs[e.toKey()];return i||(i=new qB(t,this.referenceDelegate),this.Vs[e.toKey()]=i),i}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,i){Mt("MemoryPersistence","Starting transaction:",e);const s=new QB(this.Ss.next());return this.referenceDelegate.ks(),i(s).next(r=>this.referenceDelegate.Os(s).next(()=>r)).toPromise().then(r=>(s.raiseOnCommittedEvent(),r))}Ms(e,t){return ut.or(Object.values(this.Vs).map(i=>()=>i.containsKey(e,t)))}}class QB extends L6{constructor(e){super(),this.currentSequenceNumber=e}}class uv{constructor(e){this.persistence=e,this.Fs=new cv,this.$s=null}static Bs(e){return new uv(e)}get Ls(){if(this.$s)return this.$s;throw zt()}addReference(e,t,i){return this.Fs.addReference(i,t),this.Ls.delete(i.toString()),ut.resolve()}removeReference(e,t,i){return this.Fs.removeReference(i,t),this.Ls.add(i.toString()),ut.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),ut.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(s=>this.Ls.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(r=>this.Ls.add(r.toString()))}).next(()=>i.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ut.forEach(this.Ls,i=>{const s=Bt.fromPath(i);return this.qs(e,s).next(r=>{r||t.removeEntry(s,xt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.qs(e,t).next(i=>{i?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}qs(e,t){return ut.or([()=>ut.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(e,t,i,s){this.targetId=e,this.fromCache=t,this.Si=i,this.Di=s}static Ci(e,t){let i=dn(),s=dn();for(const r of t.docChanges)switch(r.type){case 0:i=i.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new fv(e,t.fromCache,i,s)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YB{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,i,s){return this.ki(e,t).next(r=>r||this.Oi(e,t,s,i)).next(r=>r||this.Mi(e,t))}ki(e,t){if(D_(t))return ut.resolve(null);let i=fo(t);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=Vg(t,null,"F"),i=fo(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(r=>{const o=dn(...r);return this.Ni.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,i).next(a=>{const c=this.Fi(t,l);return this.$i(t,c,o,a.readTime)?this.ki(e,Vg(t,null,"F")):this.Bi(e,c,t,a)}))})))}Oi(e,t,i,s){return D_(t)||s.isEqual(xt.min())?this.Mi(e,t):this.Ni.getDocuments(e,i).next(r=>{const o=this.Fi(t,r);return this.$i(t,o,i,s)?this.Mi(e,t):(S_()<=Rn.DEBUG&&Mt("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Fg(t)),this.Bi(e,o,t,N6(s,-1)))})}Fi(e,t){let i=new Ni(HT(e));return t.forEach((s,r)=>{gm(e,r)&&(i=i.add(r))}),i}$i(e,t,i,s){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const r=e.limitType==="F"?t.last():t.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}Mi(e,t){return S_()<=Rn.DEBUG&&Mt("QueryEngine","Using full collection scan to execute query:",Fg(t)),this.Ni.getDocumentsMatchingQuery(e,t,qo.min())}Bi(e,t,i,s){return this.Ni.getDocumentsMatchingQuery(e,i,s).next(r=>(t.forEach(o=>{r=r.insert(o.key,o)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JB{constructor(e,t,i,s){this.persistence=e,this.Li=t,this.yt=s,this.qi=new Bi(Dn),this.Ui=new mc(r=>iv(r),sv),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(i)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new FB(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qi))}}function ZB(n,e,t,i){return new JB(n,e,t,i)}async function f4(n,e){const t=$t(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let s;return t.mutationQueue.getAllMutationBatches(i).next(r=>(s=r,t.Qi(e),t.mutationQueue.getAllMutationBatches(i))).next(r=>{const o=[],l=[];let a=dn();for(const c of s){o.push(c.batchId);for(const u of c.mutations)a=a.add(u.key)}for(const c of r){l.push(c.batchId);for(const u of c.mutations)a=a.add(u.key)}return t.localDocuments.getDocuments(i,a).next(c=>({ji:c,removedBatchIds:o,addedBatchIds:l}))})})}function xB(n,e){const t=$t(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),r=t.Gi.newChangeBuffer({trackRemovals:!0});return function(o,l,a,c){const u=a.batch,f=u.keys();let h=ut.resolve();return f.forEach(d=>{h=h.next(()=>c.getEntry(l,d)).next(m=>{const g=a.docVersions.get(d);Kn(g!==null),m.version.compareTo(g)<0&&(u.applyToRemoteDocument(m,a),m.isValidDocument()&&(m.setReadTime(a.commitVersion),c.addEntry(m)))})}),h.next(()=>o.mutationQueue.removeMutationBatch(l,u))}(t,i,e,r).next(()=>r.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(o){let l=dn();for(let a=0;a<o.mutationResults.length;++a)o.mutationResults[a].transformResults.length>0&&(l=l.add(o.batch.mutations[a].key));return l}(e))).next(()=>t.localDocuments.getDocuments(i,s))})}function h4(n){const e=$t(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function $B(n,e){const t=$t(n),i=e.snapshotVersion;let s=t.qi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const o=t.Gi.newChangeBuffer({trackRemovals:!0});s=t.qi;const l=[];e.targetChanges.forEach((u,f)=>{const h=s.get(f);if(!h)return;l.push(t.Cs.removeMatchingKeys(r,u.removedDocuments,f).next(()=>t.Cs.addMatchingKeys(r,u.addedDocuments,f)));let d=h.withSequenceNumber(r.currentSequenceNumber);e.targetMismatches.has(f)?d=d.withResumeToken(ms.EMPTY_BYTE_STRING,xt.min()).withLastLimboFreeSnapshotVersion(xt.min()):u.resumeToken.approximateByteSize()>0&&(d=d.withResumeToken(u.resumeToken,i)),s=s.insert(f,d),function(m,g,_){return m.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(h,d,u)&&l.push(t.Cs.updateTargetData(r,d))});let a=ho(),c=dn();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&l.push(t.persistence.referenceDelegate.updateLimboDocument(r,u))}),l.push(e8(r,o,e.documentUpdates).next(u=>{a=u.Wi,c=u.zi})),!i.isEqual(xt.min())){const u=t.Cs.getLastRemoteSnapshotVersion(r).next(f=>t.Cs.setTargetsMetadata(r,r.currentSequenceNumber,i));l.push(u)}return ut.waitFor(l).next(()=>o.apply(r)).next(()=>t.localDocuments.getLocalViewOfDocuments(r,a,c)).next(()=>a)}).then(r=>(t.qi=s,r))}function e8(n,e,t){let i=dn(),s=dn();return t.forEach(r=>i=i.add(r)),e.getEntries(n,i).next(r=>{let o=ho();return t.forEach((l,a)=>{const c=r.get(l);a.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(l)),a.isNoDocument()&&a.version.isEqual(xt.min())?(e.removeEntry(l,a.readTime),o=o.insert(l,a)):!c.isValidDocument()||a.version.compareTo(c.version)>0||a.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(a),o=o.insert(l,a)):Mt("LocalStore","Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",a.version)}),{Wi:o,zi:s}})}function t8(n,e){const t=$t(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function n8(n,e){const t=$t(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return t.Cs.getTargetData(i,e).next(r=>r?(s=r,ut.resolve(s)):t.Cs.allocateTargetId(i).next(o=>(s=new Tl(e,o,0,i.currentSequenceNumber),t.Cs.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=t.qi.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.qi=t.qi.insert(i.targetId,i),t.Ui.set(e,i.targetId)),i})}async function zg(n,e,t){const i=$t(n),s=i.qi.get(e),r=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",r,o=>i.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!cf(o))throw o;Mt("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.qi=i.qi.remove(e),i.Ui.delete(s.target)}function F_(n,e,t){const i=$t(n);let s=xt.min(),r=dn();return i.persistence.runTransaction("Execute query","readonly",o=>function(l,a,c){const u=$t(l),f=u.Ui.get(c);return f!==void 0?ut.resolve(u.qi.get(f)):u.Cs.getTargetData(a,c)}(i,o,fo(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,i.Cs.getMatchingKeysForTargetId(o,l.targetId).next(a=>{r=a})}).next(()=>i.Li.getDocumentsMatchingQuery(o,e,t?s:xt.min(),t?r:dn())).next(l=>(i8(i,x6(e),l),{documents:l,Hi:r})))}function i8(n,e,t){let i=n.Ki.get(e)||xt.min();t.forEach((s,r)=>{r.readTime.compareTo(i)>0&&(i=r.readTime)}),n.Ki.set(e,i)}class j_{constructor(){this.activeTargetIds=n4()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class s8{constructor(){this.Lr=new j_,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,t,i){this.qr[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new j_,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r8{Ur(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Mt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Mt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l8{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a8 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.oo=t+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,i,s,r){const o=this.ho(e,t);Mt("RestConnection","Sending: ",o,i);const l={};return this.lo(l,s,r),this.fo(e,o,l,i).then(a=>(Mt("RestConnection","Received: ",a),a),a=>{throw Pg("RestConnection",`${e} failed with error: `,a,"url: ",o,"request:",i),a})}_o(e,t,i,s,r,o){return this.ao(e,t,i,s,r)}lo(e,t,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+hc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,r)=>e[r]=s),i&&i.headers.forEach((s,r)=>e[r]=s)}ho(e,t){const i=o8[e];return`${this.oo}/v1/${t}:${i}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,i,s){return new Promise((r,o)=>{const l=new E6;l.setWithCredentials(!0),l.listenOnce(_6.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Sp.NO_ERROR:const c=l.getResponseJson();Mt("Connection","XHR received:",JSON.stringify(c)),r(c);break;case Sp.TIMEOUT:Mt("Connection",'RPC "'+e+'" timed out'),o(new Dt(et.DEADLINE_EXCEEDED,"Request time out"));break;case Sp.HTTP_ERROR:const u=l.getStatus();if(Mt("Connection",'RPC "'+e+'" failed with status:',u,"response text:",l.getResponseText()),u>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const h=f==null?void 0:f.error;if(h&&h.status&&h.message){const d=function(m){const g=m.toLowerCase().replace(/_/g,"-");return Object.values(et).indexOf(g)>=0?g:et.UNKNOWN}(h.status);o(new Dt(d,h.message))}else o(new Dt(et.UNKNOWN,"Server responded with status "+l.getStatus()))}else o(new Dt(et.UNAVAILABLE,"Connection failed."));break;default:zt()}}finally{Mt("Connection",'RPC "'+e+'" completed.')}});const a=JSON.stringify(s);l.send(t,"POST",a,i,15)})}wo(e,t,i){const s=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=v6(),o=b6(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(l.xmlHttpFactory=new S6({})),this.lo(l.initMessageHeaders,t,i),l.encodeInitMessageHeaders=!0;const a=s.join("");Mt("Connection","Creating WebChannel: "+a,l);const c=r.createWebChannel(a,l);let u=!1,f=!1;const h=new l8({Hr:m=>{f?Mt("Connection","Not sending because WebChannel is closed:",m):(u||(Mt("Connection","Opening WebChannel transport."),c.open(),u=!0),Mt("Connection","WebChannel sending:",m),c.send(m))},Jr:()=>c.close()}),d=(m,g,_)=>{m.listen(g,v=>{try{_(v)}catch(y){setTimeout(()=>{throw y},0)}})};return d(c,Mf.EventType.OPEN,()=>{f||Mt("Connection","WebChannel transport opened.")}),d(c,Mf.EventType.CLOSE,()=>{f||(f=!0,Mt("Connection","WebChannel transport closed"),h.io())}),d(c,Mf.EventType.ERROR,m=>{f||(f=!0,Pg("Connection","WebChannel transport errored:",m),h.io(new Dt(et.UNAVAILABLE,"The operation could not be completed")))}),d(c,Mf.EventType.MESSAGE,m=>{var g;if(!f){const _=m.data[0];Kn(!!_);const v=_,y=v.error||((g=v[0])===null||g===void 0?void 0:g.error);if(y){Mt("Connection","WebChannel received error:",y);const E=y.status;let w=function(I){const R=bi[I];if(R!==void 0)return xT(R)}(E),A=y.message;w===void 0&&(w=et.INTERNAL,A="Unknown error status: "+E+" with message "+y.message),f=!0,h.io(new Dt(w,A)),c.close()}else Mt("Connection","WebChannel received:",_),h.ro(_)}}),d(o,y6.STAT_EVENT,m=>{m.stat===__.PROXY?Mt("Connection","Detected buffering proxy"):m.stat===__.NOPROXY&&Mt("Connection","Detected no buffering proxy")}),setTimeout(()=>{h.so()},0),h}}function Ap(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ym(n){return new bB(n,!0)}class d4{constructor(e,t,i=1e3,s=1.5,r=6e4){this.Hs=e,this.timerId=t,this.mo=i,this.yo=s,this.po=r,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),i=Math.max(0,Date.now()-this.Eo),s=Math.max(0,t-i);s>0&&Mt("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,s,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){this.To!==null&&(this.To.skipDelay(),this.To=null)}cancel(){this.To!==null&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{constructor(e,t,i,s,r,o,l,a){this.Hs=e,this.vo=i,this.Vo=s,this.connection=r,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=a,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new d4(e,t)}No(){return this.state===1||this.state===5||this.ko()}ko(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Oo()}async stop(){this.No()&&await this.close(0)}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&this.Do===null&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}async $o(){if(this.ko())return this.close(0)}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}async close(e,t){this.Lo(),this.qo(),this.xo.cancel(),this.So++,e!==4?this.xo.reset():t&&t.code===et.RESOURCE_EXHAUSTED?(uo(t.toString()),uo("Using maximum backoff delay to prevent overloading the backend."),this.xo.Ao()):t&&t.code===et.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Uo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zr(t)}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.So===t&&this.Go(i,s)},i=>{e(()=>{const s=new Dt(et.UNKNOWN,"Fetching auth token failed: "+i.message);return this.Qo(s)})})}Go(e,t){const i=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{i(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(s=>{i(()=>this.Qo(s))}),this.stream.onMessage(s=>{i(()=>this.onMessage(s))})}Oo(){this.state=5,this.xo.Ro(async()=>{this.state=0,this.start()})}Qo(e){return Mt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Mt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class c8 extends m4{constructor(e,t,i,s,r,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,s,o),this.yt=r}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=SB(this.yt,e),i=function(s){if(!("targetChange"in s))return xt.min();const r=s.targetChange;return r.targetIds&&r.targetIds.length?xt.min():r.readTime?Vr(r.readTime):xt.min()}(e);return this.listener.Wo(t,i)}zo(e){const t={};t.database=qg(this.yt),t.addTarget=function(s,r){let o;const l=r.target;return o=Wg(l)?{documents:wB(s,l)}:{query:CB(s,l)},o.targetId=r.targetId,r.resumeToken.approximateByteSize()>0?o.resumeToken=r4(s,r.resumeToken):r.snapshotVersion.compareTo(xt.min())>0&&(o.readTime=Jh(s,r.snapshotVersion.toTimestamp())),o}(this.yt,e);const i=IB(this.yt,e);i&&(t.labels=i),this.Bo(t)}Ho(e){const t={};t.database=qg(this.yt),t.removeTarget=e,this.Bo(t)}}class u8 extends m4{constructor(e,t,i,s,r,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,s,o),this.yt=r,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(Kn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=AB(e.writeResults,e.commitTime),i=Vr(e.commitTime);return this.listener.Zo(i,t)}return Kn(!e.writeResults||e.writeResults.length===0),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=qg(this.yt),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>EB(this.yt,i))};this.Bo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f8 extends class{}{constructor(e,t,i,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.yt=s,this.nu=!1}su(){if(this.nu)throw new Dt(et.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,r])=>this.connection.ao(e,t,i,s,r)).catch(s=>{throw s.name==="FirebaseError"?(s.code===et.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Dt(et.UNKNOWN,s.toString())})}_o(e,t,i,s){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,o])=>this.connection._o(e,t,i,r,o,s)).catch(r=>{throw r.name==="FirebaseError"?(r.code===et.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Dt(et.UNKNOWN,r.toString())})}terminate(){this.nu=!0}}class h8{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){this.iu===0&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){this.state==="Online"?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,e==="Online"&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(uo(t),this.ou=!1):Mt("OnlineStateTracker",t)}lu(){this.ru!==null&&(this.ru.cancel(),this.ru=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d8{constructor(e,t,i,s,r){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=r,this.mu.Ur(o=>{i.enqueueAndForget(async()=>{ea(this)&&(Mt("RemoteStore","Restarting streams for network reachability change."),await async function(l){const a=$t(l);a._u.add(4),await df(a),a.gu.set("Unknown"),a._u.delete(4),await Sm(a)}(this))})}),this.gu=new h8(i,s)}}async function Sm(n){if(ea(n))for(const e of n.wu)await e(!0)}async function df(n){for(const e of n.wu)await e(!1)}function p4(n,e){const t=$t(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),mv(t)?dv(t):pc(t).ko()&&hv(t,e))}function g4(n,e){const t=$t(n),i=pc(t);t.du.delete(e),i.ko()&&v4(t,e),t.du.size===0&&(i.ko()?i.Fo():ea(t)&&t.gu.set("Unknown"))}function hv(n,e){n.yu.Ot(e.targetId),pc(n).zo(e)}function v4(n,e){n.yu.Ot(e),pc(n).Ho(e)}function dv(n){n.yu=new mB({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>n.du.get(e)||null}),pc(n).start(),n.gu.uu()}function mv(n){return ea(n)&&!pc(n).No()&&n.du.size>0}function ea(n){return $t(n)._u.size===0}function b4(n){n.yu=void 0}async function m8(n){n.du.forEach((e,t)=>{hv(n,e)})}async function p8(n,e){b4(n),mv(n)?(n.gu.hu(e),dv(n)):n.gu.set("Unknown")}async function g8(n,e,t){if(n.gu.set("Online"),e instanceof s4&&e.state===2&&e.cause)try{await async function(i,s){const r=s.cause;for(const o of s.targetIds)i.du.has(o)&&(await i.remoteSyncer.rejectListen(o,r),i.du.delete(o),i.yu.removeTarget(o))}(n,e)}catch(i){Mt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Zh(n,i)}else if(e instanceof vh?n.yu.Kt(e):e instanceof i4?n.yu.Jt(e):n.yu.jt(e),!t.isEqual(xt.min()))try{const i=await h4(n.localStore);t.compareTo(i)>=0&&await function(s,r){const o=s.yu.Zt(r);return o.targetChanges.forEach((l,a)=>{if(l.resumeToken.approximateByteSize()>0){const c=s.du.get(a);c&&s.du.set(a,c.withResumeToken(l.resumeToken,r))}}),o.targetMismatches.forEach(l=>{const a=s.du.get(l);if(!a)return;s.du.set(l,a.withResumeToken(ms.EMPTY_BYTE_STRING,a.snapshotVersion)),v4(s,l);const c=new Tl(a.target,l,1,a.sequenceNumber);hv(s,c)}),s.remoteSyncer.applyRemoteEvent(o)}(n,t)}catch(i){Mt("RemoteStore","Failed to raise snapshot:",i),await Zh(n,i)}}async function Zh(n,e,t){if(!cf(e))throw e;n._u.add(1),await df(n),n.gu.set("Offline"),t||(t=()=>h4(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Mt("RemoteStore","Retrying IndexedDB access"),await t(),n._u.delete(1),await Sm(n)})}function _4(n,e){return e().catch(t=>Zh(n,t,e))}async function Em(n){const e=$t(n),t=Go(e);let i=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;v8(e);)try{const s=await t8(e.localStore,i);if(s===null){e.fu.length===0&&t.Fo();break}i=s.batchId,b8(e,s)}catch(s){await Zh(e,s)}y4(e)&&S4(e)}function v8(n){return ea(n)&&n.fu.length<10}function b8(n,e){n.fu.push(e);const t=Go(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function y4(n){return ea(n)&&!Go(n).No()&&n.fu.length>0}function S4(n){Go(n).start()}async function _8(n){Go(n).eu()}async function y8(n){const e=Go(n);for(const t of n.fu)e.Xo(t.mutations)}async function S8(n,e,t){const i=n.fu.shift(),s=av.from(i,e,t);await _4(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await Em(n)}async function E8(n,e){e&&Go(n).Yo&&await async function(t,i){if(s=i.code,cB(s)&&s!==et.ABORTED){const r=t.fu.shift();Go(t).Mo(),await _4(t,()=>t.remoteSyncer.rejectFailedWrite(r.batchId,i)),await Em(t)}var s}(n,e),y4(n)&&S4(n)}async function q_(n,e){const t=$t(n);t.asyncQueue.verifyOperationInProgress(),Mt("RemoteStore","RemoteStore received new credentials");const i=ea(t);t._u.add(3),await df(t),i&&t.gu.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),await Sm(t)}async function A8(n,e){const t=$t(n);e?(t._u.delete(2),await Sm(t)):e||(t._u.add(2),await df(t),t.gu.set("Unknown"))}function pc(n){return n.pu||(n.pu=function(e,t,i){const s=$t(e);return s.su(),new c8(t,s.connection,s.authCredentials,s.appCheckCredentials,s.yt,i)}(n.datastore,n.asyncQueue,{Yr:m8.bind(null,n),Zr:p8.bind(null,n),Wo:g8.bind(null,n)}),n.wu.push(async e=>{e?(n.pu.Mo(),mv(n)?dv(n):n.gu.set("Unknown")):(await n.pu.stop(),b4(n))})),n.pu}function Go(n){return n.Iu||(n.Iu=function(e,t,i){const s=$t(e);return s.su(),new u8(t,s.connection,s.authCredentials,s.appCheckCredentials,s.yt,i)}(n.datastore,n.asyncQueue,{Yr:_8.bind(null,n),Zr:E8.bind(null,n),tu:y8.bind(null,n),Zo:S8.bind(null,n)}),n.wu.push(async e=>{e?(n.Iu.Mo(),await Em(n)):(await n.Iu.stop(),n.fu.length>0&&(Mt("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))})),n.Iu}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{constructor(e,t,i,s,r){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=s,this.removalCallback=r,this.deferred=new Il,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,t,i,s,r){const o=Date.now()+i,l=new pv(e,t,o,s,r);return l.start(i),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Dt(et.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gv(n,e){if(uo("AsyncQueue",`${e}: ${n}`),cf(n))return new Dt(et.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e){this.comparator=e?(t,i)=>e(t,i)||Bt.comparator(t.key,i.key):(t,i)=>Bt.comparator(t.key,i.key),this.keyedMap=Uc(),this.sortedSet=new Bi(this.comparator)}static emptySet(e){return new ka(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ka)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,r=i.getNext().key;if(!s.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new ka;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(){this.Tu=new Bi(Bt.comparator)}track(e){const t=e.doc.key,i=this.Tu.get(t);i?e.type!==0&&i.type===3?this.Tu=this.Tu.insert(t,e):e.type===3&&i.type!==1?this.Tu=this.Tu.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.Tu=this.Tu.remove(t):e.type===1&&i.type===2?this.Tu=this.Tu.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):zt():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,i)=>{e.push(i)}),e}}class qa{constructor(e,t,i,s,r,o,l,a,c){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=r,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(e,t,i,s,r){const o=[];return t.forEach(l=>{o.push({type:0,doc:l})}),new qa(e,t,ka.emptySet(t),o,i,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==i[s].type||!t[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w8{constructor(){this.Au=void 0,this.listeners=[]}}class C8{constructor(){this.queries=new mc(e=>jT(e),pm),this.onlineState="Unknown",this.Ru=new Set}}async function k8(n,e){const t=$t(n),i=e.query;let s=!1,r=t.queries.get(i);if(r||(s=!0,r=new w8),s)try{r.Au=await t.onListen(i)}catch(o){const l=gv(o,`Initialization of query '${Fg(e.query)}' failed`);return void e.onError(l)}t.queries.set(i,r),r.listeners.push(e),e.bu(t.onlineState),r.Au&&e.Pu(r.Au)&&vv(t)}async function I8(n,e){const t=$t(n),i=e.query;let s=!1;const r=t.queries.get(i);if(r){const o=r.listeners.indexOf(e);o>=0&&(r.listeners.splice(o,1),s=r.listeners.length===0)}if(s)return t.queries.delete(i),t.onUnlisten(i)}function T8(n,e){const t=$t(n);let i=!1;for(const s of e){const r=s.query,o=t.queries.get(r);if(o){for(const l of o.listeners)l.Pu(s)&&(i=!0);o.Au=s}}i&&vv(t)}function O8(n,e,t){const i=$t(n),s=i.queries.get(e);if(s)for(const r of s.listeners)r.onError(t);i.queries.delete(e)}function vv(n){n.Ru.forEach(e=>{e.next()})}class R8{constructor(e,t,i){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=i||{}}Pu(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new qa(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){if(!e.fromCache)return!0;const i=t!=="Offline";return(!this.options.Nu||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Du(e){if(e.docChanges.length>0)return!0;const t=this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}xu(e){e=qa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4{constructor(e){this.key=e}}class A4{constructor(e){this.key=e}}class D8{constructor(e,t){this.query=e,this.qu=t,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=dn(),this.mutatedKeys=dn(),this.Gu=HT(e),this.Qu=new ka(this.Gu)}get ju(){return this.qu}Wu(e,t){const i=t?t.zu:new z_,s=t?t.Qu:this.Qu;let r=t?t.mutatedKeys:this.mutatedKeys,o=s,l=!1;const a=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((u,f)=>{const h=s.get(u),d=gm(this.query,f)?f:null,m=!!h&&this.mutatedKeys.has(h.key),g=!!d&&(d.hasLocalMutations||this.mutatedKeys.has(d.key)&&d.hasCommittedMutations);let _=!1;h&&d?h.data.isEqual(d.data)?m!==g&&(i.track({type:3,doc:d}),_=!0):this.Hu(h,d)||(i.track({type:2,doc:d}),_=!0,(a&&this.Gu(d,a)>0||c&&this.Gu(d,c)<0)&&(l=!0)):!h&&d?(i.track({type:0,doc:d}),_=!0):h&&!d&&(i.track({type:1,doc:h}),_=!0,(a||c)&&(l=!0)),_&&(d?(o=o.add(d),r=g?r.add(u):r.delete(u)):(o=o.delete(u),r=r.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),r=r.delete(u.key),i.track({type:1,doc:u})}return{Qu:o,zu:i,$i:l,mutatedKeys:r}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i){const s=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const r=e.zu.Eu();r.sort((c,u)=>function(f,h){const d=m=>{switch(m){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return zt()}};return d(f)-d(h)}(c.type,u.type)||this.Gu(c.doc,u.doc)),this.Ju(i);const o=t?this.Yu():[],l=this.Ku.size===0&&this.current?1:0,a=l!==this.Uu;return this.Uu=l,r.length!==0||a?{snapshot:new qa(this.query,e.Qu,s,r,e.mutatedKeys,l===0,a,!1,!!i&&i.resumeToken.approximateByteSize()>0),Xu:o}:{Xu:o}}bu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new z_,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.qu=this.qu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qu=this.qu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=dn(),this.Qu.forEach(i=>{this.Zu(i.key)&&(this.Ku=this.Ku.add(i.key))});const t=[];return e.forEach(i=>{this.Ku.has(i)||t.push(new A4(i))}),this.Ku.forEach(i=>{e.has(i)||t.push(new E4(i))}),t}tc(e){this.qu=e.Hi,this.Ku=dn();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return qa.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,this.Uu===0,this.hasCachedResults)}}class N8{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class P8{constructor(e){this.key=e,this.nc=!1}}class M8{constructor(e,t,i,s,r,o){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=o,this.sc={},this.ic=new mc(l=>jT(l),pm),this.rc=new Map,this.oc=new Set,this.uc=new Bi(Bt.comparator),this.cc=new Map,this.ac=new cv,this.hc={},this.lc=new Map,this.fc=Ha.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return this.dc===!0}}async function B8(n,e){const t=G8(n);let i,s;const r=t.ic.get(e);if(r)i=r.targetId,t.sharedClientState.addLocalQueryTarget(i),s=r.view.ec();else{const o=await n8(t.localStore,fo(e));t.isPrimaryClient&&p4(t.remoteStore,o);const l=t.sharedClientState.addLocalQueryTarget(o.targetId);i=o.targetId,s=await L8(t,e,i,l==="current",o.resumeToken)}return s}async function L8(n,e,t,i,s){n._c=(f,h,d)=>async function(m,g,_,v){let y=g.view.Wu(_);y.$i&&(y=await F_(m.localStore,g.query,!1).then(({documents:A})=>g.view.Wu(A,y)));const E=v&&v.targetChanges.get(g.targetId),w=g.view.applyChanges(y,m.isPrimaryClient,E);return K_(m,g.targetId,w.Xu),w.snapshot}(n,f,h,d);const r=await F_(n.localStore,e,!0),o=new D8(e,r.Hi),l=o.Wu(r.documents),a=hf.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",s),c=o.applyChanges(l,n.isPrimaryClient,a);K_(n,t,c.Xu);const u=new N8(e,t,o);return n.ic.set(e,u),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),c.snapshot}async function W8(n,e){const t=$t(n),i=t.ic.get(e),s=t.rc.get(i.targetId);if(s.length>1)return t.rc.set(i.targetId,s.filter(r=>!pm(r,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(i.targetId),t.sharedClientState.isActiveQueryTarget(i.targetId)||await zg(t.localStore,i.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(i.targetId),g4(t.remoteStore,i.targetId),Gg(t,i.targetId)}).catch(af)):(Gg(t,i.targetId),await zg(t.localStore,i.targetId,!0))}async function U8(n,e,t){const i=K8(n);try{const s=await function(r,o){const l=$t(r),a=mi.now(),c=o.reduce((h,d)=>h.add(d.key),dn());let u,f;return l.persistence.runTransaction("Locally write mutations","readwrite",h=>{let d=ho(),m=dn();return l.Gi.getEntries(h,c).next(g=>{d=g,d.forEach((_,v)=>{v.isValidDocument()||(m=m.add(_))})}).next(()=>l.localDocuments.getOverlayedDocuments(h,d)).next(g=>{u=g;const _=[];for(const v of o){const y=oB(v,u.get(v.key).overlayedDocument);y!=null&&_.push(new $l(v.key,y,UT(y.value.mapValue),lo.exists(!0)))}return l.mutationQueue.addMutationBatch(h,a,_,o)}).next(g=>{f=g;const _=g.applyToLocalDocumentSet(u,m);return l.documentOverlayCache.saveOverlays(h,g.batchId,_)})}).then(()=>({batchId:f.batchId,changes:e4(u)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(r,o,l){let a=r.hc[r.currentUser.toKey()];a||(a=new Bi(Dn)),a=a.insert(o,l),r.hc[r.currentUser.toKey()]=a}(i,s.batchId,t),await mf(i,s.changes),await Em(i.remoteStore)}catch(s){const r=gv(s,"Failed to persist write");t.reject(r)}}async function w4(n,e){const t=$t(n);try{const i=await $B(t.localStore,e);e.targetChanges.forEach((s,r)=>{const o=t.cc.get(r);o&&(Kn(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.nc=!0:s.modifiedDocuments.size>0?Kn(o.nc):s.removedDocuments.size>0&&(Kn(o.nc),o.nc=!1))}),await mf(t,i,e)}catch(i){await af(i)}}function G_(n,e,t){const i=$t(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const s=[];i.ic.forEach((r,o)=>{const l=o.view.bu(e);l.snapshot&&s.push(l.snapshot)}),function(r,o){const l=$t(r);l.onlineState=o;let a=!1;l.queries.forEach((c,u)=>{for(const f of u.listeners)f.bu(o)&&(a=!0)}),a&&vv(l)}(i.eventManager,e),s.length&&i.sc.Wo(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function V8(n,e,t){const i=$t(n);i.sharedClientState.updateQueryState(e,"rejected",t);const s=i.cc.get(e),r=s&&s.key;if(r){let o=new Bi(Bt.comparator);o=o.insert(r,ns.newNoDocument(r,xt.min()));const l=dn().add(r),a=new _m(xt.min(),new Map,new Ni(Dn),o,l);await w4(i,a),i.uc=i.uc.remove(r),i.cc.delete(e),bv(i)}else await zg(i.localStore,e,!1).then(()=>Gg(i,e,t)).catch(af)}async function F8(n,e){const t=$t(n),i=e.batch.batchId;try{const s=await xB(t.localStore,e);k4(t,i,null),C4(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await mf(t,s)}catch(s){await af(s)}}async function j8(n,e,t){const i=$t(n);try{const s=await function(r,o){const l=$t(r);return l.persistence.runTransaction("Reject batch","readwrite-primary",a=>{let c;return l.mutationQueue.lookupMutationBatch(a,o).next(u=>(Kn(u!==null),c=u.keys(),l.mutationQueue.removeMutationBatch(a,u))).next(()=>l.mutationQueue.performConsistencyCheck(a)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(a,c,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,c)).next(()=>l.localDocuments.getDocuments(a,c))})}(i.localStore,e);k4(i,e,t),C4(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await mf(i,s)}catch(s){await af(s)}}function C4(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function k4(n,e,t){const i=$t(n);let s=i.hc[i.currentUser.toKey()];if(s){const r=s.get(e);r&&(t?r.reject(t):r.resolve(),s=s.remove(e)),i.hc[i.currentUser.toKey()]=s}}function Gg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.rc.get(e))n.ic.delete(i),t&&n.sc.wc(i,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(i=>{n.ac.containsKey(i)||I4(n,i)})}function I4(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);t!==null&&(g4(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),bv(n))}function K_(n,e,t){for(const i of t)i instanceof E4?(n.ac.addReference(i.key,e),H8(n,i)):i instanceof A4?(Mt("SyncEngine","Document no longer in limbo: "+i.key),n.ac.removeReference(i.key,e),n.ac.containsKey(i.key)||I4(n,i.key)):zt()}function H8(n,e){const t=e.key,i=t.path.canonicalString();n.uc.get(t)||n.oc.has(i)||(Mt("SyncEngine","New document in limbo: "+t),n.oc.add(i),bv(n))}function bv(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new Bt($n.fromString(e)),i=n.fc.next();n.cc.set(i,new P8(t)),n.uc=n.uc.insert(t,i),p4(n.remoteStore,new Tl(fo(rv(t.path)),i,2,tv.at))}}async function mf(n,e,t){const i=$t(n),s=[],r=[],o=[];i.ic.isEmpty()||(i.ic.forEach((l,a)=>{o.push(i._c(a,e,t).then(c=>{if((c||t)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(a.targetId,c!=null&&c.fromCache?"not-current":"current"),c){s.push(c);const u=fv.Ci(a.targetId,c);r.push(u)}}))}),await Promise.all(o),i.sc.Wo(s),await async function(l,a){const c=$t(l);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",u=>ut.forEach(a,f=>ut.forEach(f.Si,h=>c.persistence.referenceDelegate.addReference(u,f.targetId,h)).next(()=>ut.forEach(f.Di,h=>c.persistence.referenceDelegate.removeReference(u,f.targetId,h)))))}catch(u){if(!cf(u))throw u;Mt("LocalStore","Failed to update sequence numbers: "+u)}for(const u of a){const f=u.targetId;if(!u.fromCache){const h=c.qi.get(f),d=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(d);c.qi=c.qi.insert(f,m)}}}(i.localStore,r))}async function q8(n,e){const t=$t(n);if(!t.currentUser.isEqual(e)){Mt("SyncEngine","User change. New user:",e.toKey());const i=await f4(t.localStore,e);t.currentUser=e,function(s,r){s.lc.forEach(o=>{o.forEach(l=>{l.reject(new Dt(et.CANCELLED,r))})}),s.lc.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await mf(t,i.ji)}}function z8(n,e){const t=$t(n),i=t.cc.get(e);if(i&&i.nc)return dn().add(i.key);{let s=dn();const r=t.rc.get(e);if(!r)return s;for(const o of r){const l=t.ic.get(o);s=s.unionWith(l.view.ju)}return s}}function G8(n){const e=$t(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=w4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=z8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=V8.bind(null,e),e.sc.Wo=T8.bind(null,e.eventManager),e.sc.wc=O8.bind(null,e.eventManager),e}function K8(n){const e=$t(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=F8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=j8.bind(null,e),e}class X8{constructor(){this.synchronizeTabs=!1}async initialize(e){this.yt=ym(e.databaseInfo.databaseId),this.sharedClientState=this.gc(e),this.persistence=this.yc(e),await this.persistence.start(),this.localStore=this.Ic(e),this.gcScheduler=this.Tc(e,this.localStore),this.indexBackfillerScheduler=this.Ec(e,this.localStore)}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return ZB(this.persistence,new YB,e.initialUser,this.yt)}yc(e){return new XB(uv.Bs,this.yt)}gc(e){return new s8}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Q8{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>G_(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=q8.bind(null,this.syncEngine),await A8(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new C8}createDatastore(e){const t=ym(e.databaseInfo.databaseId),i=(s=e.databaseInfo,new a8(s));var s;return function(r,o,l,a){return new f8(r,o,l,a)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return t=this.localStore,i=this.datastore,s=e.asyncQueue,r=l=>G_(this.syncEngine,l,0),o=H_.C()?new H_:new r8,new d8(t,i,s,r,o);var t,i,s,r,o}createSyncEngine(e,t){return function(i,s,r,o,l,a,c){const u=new M8(i,s,r,o,l,a);return c&&(u.dc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=$t(e);Mt("RemoteStore","RemoteStore shutting down."),t._u.add(5),await df(t),t.mu.shutdown(),t.gu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T4(n,e,t){if(!t)throw new Dt(et.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Y8(n,e,t,i){if(e===!0&&i===!0)throw new Dt(et.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function X_(n){if(!Bt.isDocumentKey(n))throw new Dt(et.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Q_(n){if(Bt.isDocumentKey(n))throw new Dt(et.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Am(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":zt()}function tu(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Dt(et.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Am(n);throw new Dt(et.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y_=new Map;class J_{constructor(e){var t;if(e.host===void 0){if(e.ssl!==void 0)throw new Dt(et.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Dt(et.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Y8("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(e,t,i,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new J_({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Dt(et.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new Dt(et.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new J_(e),e.credentials!==void 0&&(this._authCredentials=function(t){if(!t)return new A6;switch(t.type){case"gapi":const i=t.client;return new I6(i,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Dt(et.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Y_.get(e);t&&(Mt("ComponentProvider","Removing Datastore"),Y_.delete(e),t.terminate())}(this),Promise.resolve()}}function J8(n,e,t,i={}){var s;const r=(n=tu(n,wm))._getSettings();if(r.host!=="firestore.googleapis.com"&&r.host!==e&&Pg("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},r),{host:`${e}:${t}`,ssl:!1})),i.mockUserToken){let o,l;if(typeof i.mockUserToken=="string")o=i.mockUserToken,l=es.MOCK_USER;else{o=lP(i.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const a=i.mockUserToken.sub||i.mockUserToken.user_id;if(!a)throw new Dt(et.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new es(a)}n._authCredentials=new w6(new IT(o,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Hs(this.firestore,e,this._key)}}class gc{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new gc(this.firestore,e,this._query)}}class Vo extends gc{constructor(e,t,i){super(e,t,rv(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Hs(this.firestore,null,new Bt(e))}withConverter(e){return new Vo(this.firestore,e,this._path)}}function O4(n,e,...t){if(n=Ml(n),T4("collection","path",e),n instanceof wm){const i=$n.fromString(e,...t);return Q_(i),new Vo(n,null,i)}{if(!(n instanceof Hs||n instanceof Vo))throw new Dt(et.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child($n.fromString(e,...t));return Q_(i),new Vo(n.firestore,null,i)}}function Z8(n,e,...t){if(n=Ml(n),arguments.length===1&&(e=TT.R()),T4("doc","path",e),n instanceof wm){const i=$n.fromString(e,...t);return X_(i),new Hs(n,null,new Bt(i))}{if(!(n instanceof Hs||n instanceof Vo))throw new Dt(et.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child($n.fromString(e,...t));return X_(i),new Hs(n.firestore,n instanceof Vo?n.converter:null,new Bt(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x8{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):uo("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $8{constructor(e,t,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=s,this.user=es.UNAUTHENTICATED,this.clientId=TT.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,async r=>{Mt("FirestoreClient","Received user=",r.uid),await this.authCredentialListener(r),this.user=r}),this.appCheckCredentials.start(i,r=>(Mt("FirestoreClient","Received new app check token=",r),this.appCheckCredentialListener(r,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Dt(et.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Il;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=gv(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function eL(n,e){n.asyncQueue.verifyOperationInProgress(),Mt("FirestoreClient","Initializing OfflineComponentProvider");const t=await n.getConfiguration();await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async s=>{i.isEqual(s)||(await f4(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}async function tL(n,e){n.asyncQueue.verifyOperationInProgress();const t=await nL(n);Mt("FirestoreClient","Initializing OnlineComponentProvider");const i=await n.getConfiguration();await e.initialize(t,i),n.setCredentialChangeListener(s=>q_(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,r)=>q_(e.remoteStore,r)),n.onlineComponents=e}async function nL(n){return n.offlineComponents||(Mt("FirestoreClient","Using default OfflineComponentProvider"),await eL(n,new X8)),n.offlineComponents}async function R4(n){return n.onlineComponents||(Mt("FirestoreClient","Using default OnlineComponentProvider"),await tL(n,new Q8)),n.onlineComponents}function iL(n){return R4(n).then(e=>e.syncEngine)}async function Z_(n){const e=await R4(n),t=e.eventManager;return t.onListen=B8.bind(null,e.syncEngine),t.onUnlisten=W8.bind(null,e.syncEngine),t}class sL{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new d4(this,"async_queue_retry"),this.Wc=()=>{const t=Ap();t&&Mt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=Ap();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const t=Ap();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const t=new Il;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}async Jc(){if(this.Lc.length!==0){try{await this.Lc[0](),this.Lc.shift(),this.xo.reset()}catch(e){if(!cf(e))throw e;Mt("AsyncQueue","Operation failed with retryable error: "+e)}this.Lc.length>0&&this.xo.Ro(()=>this.Jc())}}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(i=>{this.Kc=i,this.Gc=!1;const s=function(r){let o=r.message||"";return r.stack&&(o=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),o}(i);throw uo("INTERNAL UNHANDLED ERROR: ",s),i}).then(i=>(this.Gc=!1,i))));return this.Bc=t,t}enqueueAfterDelay(e,t,i){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const s=pv.createAndSchedule(this,e,t,i,r=>this.Yc(r));return this.Uc.push(s),s}zc(){this.Kc&&zt()}verifyOperationInProgress(){}async Xc(){let e;do e=this.Bc,await e;while(e!==this.Bc)}Zc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function x_(n){return function(e,t){if(typeof e!="object"||e===null)return!1;const i=e;for(const s of t)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}class xh extends wm{constructor(e,t,i,s){super(e,t,i,s),this.type="firestore",this._queue=new sL,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||N4(this),this._firestoreClient.terminate()}}function rL(n,e){const t=typeof n=="object"?n:fM(),i=typeof n=="string"?n:e||"(default)",s=lM(t,"firestore").getImmediate({identifier:i});if(!s._initialized){const r=sP("firestore");r&&J8(s,...r)}return s}function D4(n){return n._firestoreClient||N4(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function N4(n){var e;const t=n._freezeSettings(),i=function(s,r,o,l){return new W6(s,r,o,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,l.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,t);n._firestoreClient=new $8(n._authCredentials,n._appCheckCredentials,n._queue,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e){this._byteString=e}static fromBase64String(e){try{return new za(ms.fromBase64String(e))}catch(t){throw new Dt(et.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new za(ms.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Dt(et.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ss(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Dt(et.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Dt(et.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Dn(this._lat,e._lat)||Dn(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oL=/^__.*__$/;class lL{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new $l(e,this.data,this.fieldMask,t,this.fieldTransforms):new ff(e,this.data,t,this.fieldTransforms)}}function M4(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw zt()}}class Sv{constructor(e,t,i,s,r,o){this.settings=e,this.databaseId=t,this.yt=i,this.ignoreUndefinedProperties=s,r===void 0&&this.na(),this.fieldTransforms=r||[],this.fieldMask=o||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new Sv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.ia({path:i,oa:!1});return s.ua(e),s}ca(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.ia({path:i,oa:!1});return s.na(),s}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return $h(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(e.length===0)throw this.ha("Document fields must not be empty");if(M4(this.sa)&&oL.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class aL{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.yt=i||ym(e)}da(e,t,i,s=!1){return new Sv({sa:e,methodName:t,fa:i,path:ss.emptyPath(),oa:!1,la:s},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function B4(n){const e=n._freezeSettings(),t=ym(n._databaseId);return new aL(n._databaseId,!!e.ignoreUndefinedProperties,t)}function cL(n,e,t,i,s,r={}){const o=n.da(r.merge||r.mergeFields?2:0,e,t,s);U4("Data must be an object, but it was:",o,i);const l=L4(i,o);let a,c;if(r.merge)a=new mr(o.fieldMask),c=o.fieldTransforms;else if(r.mergeFields){const u=[];for(const f of r.mergeFields){const h=fL(e,f,t);if(!o.contains(h))throw new Dt(et.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);dL(u,h)||u.push(h)}a=new mr(u),c=o.fieldTransforms.filter(f=>a.covers(f.field))}else a=null,c=o.fieldTransforms;return new lL(new xs(l),a,c)}function uL(n,e,t,i=!1){return Ev(t,n.da(i?4:3,e))}function Ev(n,e){if(W4(n=Ml(n)))return U4("Unsupported field value:",e,n),L4(n,e);if(n instanceof P4)return function(t,i){if(!M4(i.sa))throw i.ha(`${t._methodName}() can only be used with update() and set()`);if(!i.path)throw i.ha(`${t._methodName}() is not currently supported inside arrays`);const s=t._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&e.sa!==4)throw e.ha("Nested arrays are not supported");return function(t,i){const s=[];let r=0;for(const o of t){let l=Ev(o,i.aa(r));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),r++}return{arrayValue:{values:s}}}(n,e)}return function(t,i){if((t=Ml(t))===null)return{nullValue:"NULL_VALUE"};if(typeof t=="number")return eB(i.yt,t);if(typeof t=="boolean")return{booleanValue:t};if(typeof t=="string")return{stringValue:t};if(t instanceof Date){const s=mi.fromDate(t);return{timestampValue:Jh(i.yt,s)}}if(t instanceof mi){const s=new mi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Jh(i.yt,s)}}if(t instanceof yv)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof za)return{bytesValue:r4(i.yt,t._byteString)};if(t instanceof Hs){const s=i.databaseId,r=t.firestore._databaseId;if(!r.isEqual(s))throw i.ha(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:lv(t.firestore._databaseId||i.databaseId,t._key.path)}}throw i.ha(`Unsupported field value: ${Am(t)}`)}(n,e)}function L4(n,e){const t={};return OT(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):dc(n,(i,s)=>{const r=Ev(s,e.ra(i));r!=null&&(t[i]=r)}),{mapValue:{fields:t}}}function W4(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof mi||n instanceof yv||n instanceof za||n instanceof Hs||n instanceof P4)}function U4(n,e,t){if(!W4(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const i=Am(t);throw i==="an object"?e.ha(n+" a custom object"):e.ha(n+" "+i)}}function fL(n,e,t){if((e=Ml(e))instanceof _v)return e._internalPath;if(typeof e=="string")return V4(n,e);throw $h("Field path arguments must be of type string or ",n,!1,void 0,t)}const hL=new RegExp("[~\\*/\\[\\]]");function V4(n,e,t){if(e.search(hL)>=0)throw $h(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new _v(...e.split("."))._internalPath}catch{throw $h(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function $h(n,e,t,i,s){const r=i&&!i.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;t&&(l+=" (via `toFirestore()`)"),l+=". ";let a="";return(r||o)&&(a+=" (found",r&&(a+=` in field ${i}`),o&&(a+=` in document ${s}`),a+=")"),new Dt(et.INVALID_ARGUMENT,l+n+a)}function dL(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(e,t,i,s,r){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Hs(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new mL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Av("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class mL extends F4{data(){return super.data()}}function Av(n,e){return typeof e=="string"?V4(n,e):e instanceof _v?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pL(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Dt(et.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class wv{}class gL extends wv{}function vL(n,e,...t){let i=[];e instanceof wv&&i.push(e),i=i.concat(t),function(s){const r=s.filter(l=>l instanceof Cv).length,o=s.filter(l=>l instanceof Cm).length;if(r>1||r>0&&o>0)throw new Dt(et.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)n=s._apply(n);return n}class Cm extends gL{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Cm(e,t,i)}_apply(e){const t=this._parse(e);return j4(e._query,t),new gc(e.firestore,e.converter,Ug(e._query,t))}_parse(e){const t=B4(e.firestore);return function(s,r,o,l,a,c,u){let f;if(a.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new Dt(et.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){ey(u,c);const h=[];for(const d of u)h.push($_(l,s,d));f={arrayValue:{values:h}}}else f=$_(l,s,u)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||ey(u,c),f=uL(o,r,u,c==="in"||c==="not-in");return Si.create(a,c,f)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function bL(n,e,t){const i=e,s=Av("where",n);return Cm._create(s,i,t)}class Cv extends wv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Cv(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:yr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let r=i;const o=s.getFlattenedFilters();for(const l of o)j4(r,l),r=Ug(r,l)}(e._query,t),new gc(e.firestore,e.converter,Ug(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function $_(n,e,t){if(typeof(t=Ml(t))=="string"){if(t==="")throw new Dt(et.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!FT(e)&&t.indexOf("/")!==-1)throw new Dt(et.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child($n.fromString(t));if(!Bt.isDocumentKey(i))throw new Dt(et.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return w_(n,new Bt(i))}if(t instanceof Hs)return w_(n,t._key);throw new Dt(et.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Am(t)}.`)}function ey(n,e){if(!Array.isArray(n)||n.length===0)throw new Dt(et.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Dt(et.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function j4(n,e){if(e.isInequality()){const i=ov(n),s=e.field;if(i!==null&&!i.isEqual(s))throw new Dt(et.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${i.toString()}' and '${s.toString()}'`);const r=VT(n);r!==null&&_L(n,s,r)}const t=function(i,s){for(const r of i)for(const o of r.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Dt(et.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Dt(et.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function _L(n,e,t){if(!t.isEqual(e))throw new Dt(et.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class yL{convertValue(e,t="none"){switch(Wl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _i(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Va(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw zt()}}convertObject(e,t){const i={};return dc(e.fields,(s,r)=>{i[s]=this.convertValue(r,t)}),i}convertGeoPoint(e){return new yv(_i(e.latitude),_i(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=DT(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(yu(e));default:return null}}convertTimestamp(e){const t=zo(e);return new mi(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=$n.fromString(e);Kn(u4(i));const s=new _u(i.get(1),i.get(3)),r=new Bt(i.popFirst(5));return s.isEqual(t)||uo(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SL(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class H4 extends F4{constructor(e,t,i,s,r,o){super(e,t,i,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new bh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Av("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class bh extends H4{data(e={}){return super.data(e)}}class EL{constructor(e,t,i,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Vc(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new bh(this._firestore,this._userDataWriter,i.key,i,new Vc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Dt(et.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let r=0;return i._snapshot.docChanges.map(o=>{const l=new bh(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Vc(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:r++}})}{let r=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const l=new bh(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Vc(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let a=-1,c=-1;return o.type!==0&&(a=r.indexOf(o.doc.key),r=r.delete(o.doc.key)),o.type!==1&&(r=r.add(o.doc),c=r.indexOf(o.doc.key)),{type:AL(o.type),doc:l,oldIndex:a,newIndex:c}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function AL(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return zt()}}class q4 extends yL{constructor(e){super(),this.firestore=e}convertBytes(e){return new za(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Hs(this.firestore,null,t)}}function wL(n,e){const t=tu(n.firestore,xh),i=Z8(n),s=SL(n.converter,e);return kL(t,[cL(B4(n.firestore),"addDoc",i._key,s,n.converter!==null,{}).toMutation(i._key,lo.exists(!1))]).then(()=>i)}function CL(n,...e){var t,i,s;n=Ml(n);let r={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||x_(e[o])||(r=e[o],o++);const l={includeMetadataChanges:r.includeMetadataChanges};if(x_(e[o])){const f=e[o];e[o]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[o+1]=(i=f.error)===null||i===void 0?void 0:i.bind(f),e[o+2]=(s=f.complete)===null||s===void 0?void 0:s.bind(f)}let a,c,u;if(n instanceof Hs)c=tu(n.firestore,xh),u=rv(n._key.path),a={next:f=>{e[o]&&e[o](IL(c,n,f))},error:e[o+1],complete:e[o+2]};else{const f=tu(n,gc);c=tu(f.firestore,xh),u=f._query;const h=new q4(c);a={next:d=>{e[o]&&e[o](new EL(c,h,f,d))},error:e[o+1],complete:e[o+2]},pL(n._query)}return function(f,h,d,m){const g=new x8(m),_=new R8(h,g,d);return f.asyncQueue.enqueueAndForget(async()=>k8(await Z_(f),_)),()=>{g.bc(),f.asyncQueue.enqueueAndForget(async()=>I8(await Z_(f),_))}}(D4(c),u,l,a)}function kL(n,e){return function(t,i){const s=new Il;return t.asyncQueue.enqueueAndForget(async()=>U8(await iL(t),i,s)),s.promise}(D4(n),e)}function IL(n,e,t){const i=t.docs.get(e._key),s=new q4(n);return new H4(n,s,e._key,i,new Vc(t.hasPendingWrites,t.fromCache),e.converter)}(function(n,e=!0){(function(t){hc=t})(uM),Wh(new fu("firestore",(t,{instanceIdentifier:i,options:s})=>{const r=t.getProvider("app").getImmediate(),o=new xh(new C6(t.getProvider("auth-internal")),new O6(t.getProvider("app-check-internal")),function(l,a){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new Dt(et.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _u(l.options.projectId,a)}(r,i),r);return s=Object.assign({useFetchStreams:e},s),o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),wa(y_,"3.8.3",n),wa(y_,"3.8.3","esm2017")})();const Kg=n=>Object.values(st).includes(n),TL=n=>parseInt(n.split("d")[1]),Fc=n=>Math.floor(Math.random()*n+1),ty=n=>{if(typeof n=="number")return n;const[e,t]=n.split("d");return parseInt(e)*Fc(parseInt(t))},Ln=(n,e)=>{const t=n.reduce((i,s,r)=>((s==="-"||parseInt(s+"")<0)&&(i=i.substr(0,i.length-1)),i+(s+"")+(r===n.length-1?"":"+")),"");return t.toString()[0]!=="-"&&e?"+"+t:t},OL=n=>n.some(e=>Object.values(st).includes(e)),Ys=(n,{returnAsString:e=!1}={})=>{if(!Array.isArray(n))return ty(n);const t=n.map(r=>r==="-"?r:ty(r));let i=1;const s=t.reduce((r,o,l)=>{let a=i;if(o==="-")return i=-1,r;i=1;const c=parseInt(o+"");return r+c*a},0);return e?{value:s,resultText:t.reduce((r,o,l)=>{let a=i;if(o==="-")return i=-1,r;i=1;const c=parseInt(o+"")*a,u=Kg(n[l])?`(${n[l]})`:"";return r+""+(l>0?" "+os(c,!0):c)+u},"")}:s},Ko=n=>{let e=!1;const t="-",i={numSum:0,remainingDice:[]},s=new Set(Object.values(st)),{remainingDice:r,numSum:o}=n.reduce((l,a)=>(a===t?e=!0:s.has(a)?e?(e=!1,l.remainingDice=[...l.remainingDice,t,a]):l.remainingDice=[...l.remainingDice,a]:e?(e=!1,i.numSum-=a):i.numSum+=a,l),i);return[...r,o]},ny=()=>document.getElementById("dice-box-result"),so=(n=[st.d20],e={})=>{const t=[new Audio("roll.mp3"),new Audio("roll-2.mp3"),new Audio("roll-3.mp3"),new Audio("roll-4.mp3")],i=()=>{t.forEach(s=>{s.pause(),s.currentTime=0})};return new Promise(s=>{let r=!0,o=null,l=null,a=!1,c=s;e!=null&&e.chatEntryOnRes&&(c=async(m,...g)=>{const _=e==null?void 0:e.db,v=m==null?void 0:m.value,y=m==null?void 0:m.resultText;console.log(_,v,y),km(_,{...e==null?void 0:e.chatEntryOnRes,roll:v,rollTooltip:y}),s(m,...g)});const u=n.map(m=>{switch(m){case st.d2:return st.d4;case st.d3:return st.d6;case st.d5:return st.d10;default:return m}}),f=()=>{var m;if(r=!1,window.diceBox.clear(),window.diceBoxContainer.style.pointerEvents="none",(((m=ny())==null?void 0:m.style)||{opacity:0}).opacity=0,o&&clearTimeout(o),l)l();else if(!a&&!(e!=null&&e.disableRollOnCancel)){const g=n.map(y=>Ys([y])),_=[...g,...(e==null?void 0:e.modifier)||[]],v=Ys([...g,...(e==null?void 0:e.modifier)||[]]);c({value:v,resultText:h(_,v,{hideResult:!0}),resultArray:g})}},h=(m,g,{hideResult:_=!1}={})=>{let v;return v=m.reduce((y,E,w)=>{const A=w===0?"":" ",I=w===0?E:os(E,!0);return y+A+`${I}${w>=n.length?"":`(${n[w]})`}`},""),_?v:`${v} = ${g}`};i();const d=[0,1,2,3];n.forEach(()=>{if(!d.length)return;const m=Math.floor(Math.random()*d.length),[g]=d.splice(m,1);t[g].play()}),window.diceBox.roll(u).then(m=>{if(a=!0,!r)return;let g=!1;m.map(({value:A})=>A);const v=[...m.map(({value:A},I)=>u[I]!==n[I]?(g=!0,TL(n[I]),Math.ceil(A/2)):A),...e.modifier||[]],y=Ys(v),E=ny();E&&!e.disableResultBox&&(E.style.opacity="1",E.innerHTML=e!=null&&e.customResultBoxLabel?e==null?void 0:e.customResultBoxLabel(v,y,{sanitizedDice:u,hasUnrealDice:g}):h(v,y));const w={resultArray:v,resultText:h(v,y,{hideResult:!0}),value:y};e.clearTimeout?(l=()=>c(w),o=setTimeout(f,e.clearTimeout)):c(w)}),window.diceBoxContainer.style.pointerEvents="auto",window.diceBoxContainer.addEventListener("click",f,{once:!0})})},z4=()=>new Date().toISOString().slice(0,8).replace(/-/g,""),km=(n,e)=>wL(O4(n,"lobby","taboola",z4()),{...e,date:mi.now()}),RL=(n,e)=>{if(n.size!==e.size)return!1;for(var t of n)if(!e.has(t))return!1;return!0},er=n=>n===void 0?0:Math.floor((n-10)/2),iy=n=>n?mo.MAJOR:mo.MINOR,G4=(n,e)=>e.includes(We.HEAL_PLUS)||n===Wt.PRIEST,DL=(n,e,t)=>{var i=document.createElement("a"),s=new Blob([n],{type:t});i.href=URL.createObjectURL(s),i.download=e,i.click()},K4=(n,e="")=>{try{DL(JSON.stringify(n),`${e}${n.playerName}-fe3h.json`,"text/plain")}catch(t){alert("Failed to export sheet, see console"),console.error(t)}},Oc=n=>{navigator.clipboard.writeText(n)},on={ACROBATICS:"ACROBATICS",ANIMAL_HANDLING:"ANIMAL_HANDLING",ARCANA:"ARCANA",ATHLETICS:"ATHLETICS",BARTERING:"BARTERING",CLEANING:"CLEANING",COOKING:"COOKING",DECEPTION:"DECEPTION",GARDENING:"GARDENING",GUARD_DUTY:"GUARD_DUTY",HISTORY:"HISTORY",HUNTING:"HUNTING",INSIGHT:"INSIGHT",INTIMIDATION:"INTIMIDATION",INVESTIGATION:"INVESTIGATION",LOCKPICKING:"LOCKPICKING",MEDICINE:"MEDICINE",NATURE:"NATURE",PERCEPTION:"PERCEPTION",PERFORMANCE:"PERFORMANCE",PERSUASION:"PERSUASION",RELIGION:"RELIGION",SLEIGHT_OF_HAND:"SLEIGHT_OF_HAND",STEALTH:"STEALTH",SURVIVAL:"SURVIVAL"},ed={[on.ACROBATICS]:{label:"Acrobatics",stat:Ke.DEX},[on.ANIMAL_HANDLING]:{label:"Animal Handling",stat:Ke.WIS},[on.ARCANA]:{label:"Arcana",stat:Ke.INT},[on.ATHLETICS]:{label:"Athletics",stat:Ke.STR},[on.BARTERING]:{label:"Bartering",stat:[Ke.WIS,Ke.CHA]},[on.CLEANING]:{label:"Cleaning",stat:[Ke.CON,Ke.WIS]},[on.COOKING]:{label:"Cooking",stat:[Ke.INT,Ke.WIS]},[on.DECEPTION]:{label:"Deception",stat:Ke.CHA},[on.GARDENING]:{label:"Gardening",stat:[Ke.STR,Ke.CON,Ke.WIS]},[on.GUARD_DUTY]:{label:"Guard Duty",stat:[Ke.CON,Ke.WIS]},[on.HISTORY]:{label:"History",stat:Ke.INT},[on.HUNTING]:{label:"Hunting",stat:[Ke.WIS,Ke.DEX]},[on.INSIGHT]:{label:"Insight",stat:Ke.WIS},[on.INTIMIDATION]:{label:"Intimidation",stat:Ke.CHA},[on.INVESTIGATION]:{label:"Investigation",stat:Ke.INT},[on.LOCKPICKING]:{label:"Lockpicking",stat:Ke.DEX},[on.MEDICINE]:{label:"Medicine",stat:Ke.WIS},[on.NATURE]:{label:"Nature",stat:Ke.INT},[on.PERCEPTION]:{label:"Perception",stat:Ke.WIS},[on.PERFORMANCE]:{label:"Performance",stat:Ke.CHA},[on.PERSUASION]:{label:"Persuasion",stat:Ke.CHA},[on.RELIGION]:{label:"Religion",stat:Ke.INT},[on.SLEIGHT_OF_HAND]:{label:"Sleight of Hand",stat:Ke.DEX},[on.STEALTH]:{label:"Stealth",stat:Ke.DEX},[on.SURVIVAL]:{label:"Survival",stat:Ke.WIS}},NL=Object.keys(ed).reduce((n,e)=>(n[e]=ed[e].stat,n),{}),td=Object.keys(ed).reduce((n,e)=>(n[e]=ed[e].label,n),{});var zn=(n=>(n[n.NONE=0]="NONE",n[n.PROFICIENT=1]="PROFICIENT",n[n.EXPERT=2]="EXPERT",n[n.AWFUL=-2]="AWFUL",n))(zn||{});const PL=""+new URL("../../assets/sword-removebg-preview-6a200c6b.png",import.meta.url).href,ML="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAADqRJREFUaEPVWntQVPe9/573LrDs8g7GCEgUlawsvhA0Qe/M7WOSNnXmtvYxLdDcNvGRakzGTFJbJTZ6L9MGjdG26b1xldsYTbRE01gyqW7R+ggk4m7tjVpEiVSJwi6wwO7Z8+h8v2fPshAfDcof/c3swJ49+zvfz/f7+T5/y8C/+GJQ/kutZ7dvfXlD5fXr1wkOo5uotGHw1Nj1ocsMwwC+cGmacb/5fqRucF9dNzZhWTb2HbyG781rOmPcZ97LAEd7CjzA4OAgJCUlwapn17vzCx6ooifv/N8t3jdedzszMjJiAIwvGwKxUcFVMATFhZ+bgo4EMBKE+TkPOkQiEdB0HQRBAI4TQFEUkJWoolhDGQzH0zNQYfjeBMdpIRBFEfr7++Hf/v1h3/efeHo6SbS5ptrr8zU7ZVkeZgFdV4cBYAUxJny8dm9nAfNzgQHAZyAAFIRleQKg6gxwHAeyEqG/JgBFM6xgWjnVJsHAwAApYU7Jg74lT60xANRsXOM9e6bFqSlDAsdbwDQlaIYF4s0br+3YfSO5E33PCyw9HBcKikBUlQFBkiApyQ7WpESw2WyB1IyM0xmZGYG01KyW1PT0i47UtBYHCBdDWnfttl9uq2xvvwyzSub7nnz6JwaAX79S4/3T4QanJIgkHFLGBBAvlMAZn5sgbiLnMJrF38PxzDCNhtEaGgs2uz2Qlp5VvWrZf7pT8ooDN9u3zdtYvqHmvz26zkDxrDLfsqeeNwBs+cV674cf/NnJaCO9NOqUMeIbjnezpaoqUQMXUUXTolRhiSr4slqtEFE14HkeQrICAi8E7skev3DDpm0tt1PI4Xder9i+w+1GJc6dt/DuA0BnMyMKCoN0wReCSkxMJFDI4YyseyAQCAD6brIt2b3VvbsqXni/v82RkpL3GUv836s/3/7uwXcrcb/Zcx+KA1DzgvdU8zFnLGyZhmCGh1HQb20BdDYUGPexWCwkOFoFowaGP8Fqo+uffvop5OXlAcOJ9auWrqzKK745bUxg3d2t9s0bfx44e/YsKcM1q9T35NMmhe4SAFNw/NvX10dgkDIoNC5bSgZcu3aNQmhfT6979+//OEzzt6LQpbbzazeufXZdb28vAZheNMv35OqoE2+5DYBYHmBubYH4iDQyOqE/dPWGIC01CxISEuq3vbZj0e04H//58cZDh1/d+osFuA8qwOma6Vuxem3Uie8SAPQB5Dj+tdls9HykD66kpKSAPX3cabs9zTO3aOamhYsW3TTa3AjYm6/v1P9w4M1YFCyaMce3YvVPhwOAEVGIjWZic8NINP3fSnPIe/QF5DxGnayszE1FLtfmqiXPXfw8Go+/95Pz58vr6tyeC3/z0Z64ZqIPxFOo5cPjTl0d7rSfF4AZRinySKJ7/vz51TcTvL/Hv5YB/VyCPXXXrYB1t7baz33S5nn55S0uq6RRJEMFzS59KM6JX1rvbT5x1GluZHJ+5MYaGD5gAmMgmrmjlkLnlcQE6OkPQuns+bnL17x46VbC6WfOiExhoVG/3GBh5Pno2AnPa9v/x2WzJIAimyXHIMwufdC3zMzEW+4SAExOoHOQkpEO3/l2hVtKTHBn3ZOdy0liLlqeZUXggA0kpKRtvh2dSPgTJz1v7d7jGgwPAI8lqoYFINZMowUQLUZNC8UsEKtWjSKtp78fOFaC5FQH9PUOgGiVIDk5BRxJqfDII49cHDdxUuG4ceMGbgai62rbiuaTx1cebHgn9/KldpAkASSsUHWRMviYAQCOpfjvSE+HwYEIAM+CHFYhMzsLrl3rhmmTC1sefviR3cWl82sYZihLorZTU/N7ENDVq22P/tXrrd+35w24+mkHpNodEAz2EgAGpJgF5pQ9NAoKjbCA2S+YXYIcMcph7Bsc9nTo6LxCiQyrzdzcfHf1iy/dMHF1dl4uysoafxoBHHrv7badO7fnKqEwWBME6O3yg91ug3A4DCxIMQuMCQAsjzFLBvqCIIc1SLTbKOlMmlLgXv3chmHCf/zxx7YpU6b0xdMoGOws+tm6F1rOnPHCvVn3wMBgL+gyFoCSEX10kRQUUUNwVwBE24OYDIkJNmhtbYWCqVMoofGiBBPz8+tX/3gjZV2kSorF4blwsd3z1t43Fzz7kw3F8QBOnzq24oV16zZlpDlACcnQ1d0J+RNy4Wrn36kcUSJszAIl88rvnEIjAWCxh4lGtEiUjcdPyIHHf7Akd9zEaZf8f7+QI4qiR5bDuQcb3oP6+nrY83bDUI+Kre1r2w43NPxhgRoJgcjyAIwCFk6A3r4AZfaIzMRRqNy3/BmzFvonwyjSgbiI3TUAhAZlijqCZCGNC5JInO/p6YGZM2fCY489ti4lK78a7w33dmyXB+XKuro68P3lDN2/Y8+BGIDrHecfXbNmTT1SJSKHgVE0YDkNBKq/NOotVF0gAKOmEGZAEwBVmDob3dhoYDBU4z2zZs2CiqpKd1rW/cT7wb4r5eHBQU/9W/vg+PHjMBgKE/ApU6fmPhNNdhf++tHhjf+1YQE1PhEZWFWPAcDefCSAufPKfUtWRXviV2p/Rpk4NvK4wfgEBVEUQ+NIHU1lAVgGdI0FhdEN08oylJSUwNe/sbhyfM7UHfidYOeFogjonr179zo+ONoIwWAQBMlKFpxVMnflk8+s3dz2/6cqDv3xffexY8eof9BUGTgdE5+hEEZXogCMPIAWGBWASCRMM5lQRIZwSCWuM8BDWFNAkiSYOnVq4IePP1GVkj6hnoT3Xy7SVc2zs26HAzUvMdEpAyeQoEXFM2Dx4sUtTR80u/bu3UvCkhJ1BTDqm7UjAsDrimZQSNHCUFL20Oe3gDlmkVXsZa0gJlggHFJAsCbAhAkTAt+rqlyYl1dIve2Vy3+ryMxI3fSbbb9ynGg6AawGIHAqWUAULWC320GyJkJmZia0tl2kFpNnuWhQMrjPsCpwGoAOmgEgmonRAqMCgBpBjqITi0IC9A4EQVUA5pTNC3x10aMLJ08uJuGD/qsrOIHb9JtXfwVnWrwgEyUYUCP91KXhQAvzRf9gmDTa0xcEh8MBcihMABhGJwrFA8Dr6p1mYo415jmMwENE1kHnOCiYPC3whS89vLB4zjwS3u+/sj0UGqg8eOAdeP/99yDU1w/5k/Oh9ex5sCeJ5EOhsNE340ALBe8N9hMQNaJEp30aAdAhQhbAWSfS644BsFFnDasKqAoD02fMgG996zuu8RMfoDKgq6tjO8/zlb/9bR0cazwCosgDRFToCfZAarIDGC1Egg8MhrGtpJEiCoYAkFLmYA3DJgLQdJkAYCTF+zTGQgoMRwaoH4jLA9XepuONTnTEUCgEHMfTg0IhmZwTX9hhRTgbmV6RQzBt2jT4+n8sWpdfUExxvu9ae62uqyv37NkDTSdPGDNQRaaEJgoctZa8IN2uir7157pAn+NwpGRemW/JiuhU4pXaFwgAPoziPMuR0Ni6mGNEFEjhk0kTBZPyoaKioj7v/kIqEfxX2so5nvXs2/sWNDU1wbXOq5TQdNUo7iySQIoBxnTSUeKIAtAYHeaWzfMtMSdzW2vXe5tONDqpDBBxfAhEkVhYAwBRtIJ/IATl5eXwla981eNIsy7C4ROWCIPhwRaPx+M47DkE/mtdIAkcWSoUGjBmRJIxhb5zAEYFoDEazMUw+tRzRlOPFmg+ccSJWsY4L8sRqucx25LzqCpIUgLcO/F+WLp0mTszO4cyLParrEP0HPjd71wNDQ3A8SxoWD1KRueEdTwCQArhHixnUGC0S9eMc4LPANjyUjUBMDIxR9rCOI80woYEgeTk5MB3H6twj88rNITvbrUnCUmeXbt2uT76sBk6OzvBIgokMIcPwdolSiGeM5RwpxZAAGQBVoHSsgVDFDIBoA9EIsbgFeM8Jh2M86WlpbDoa19z5xQWk/BIG6stqX7PG7tcR48ehYC/G9LT06Gvxxj16KpqnKgIHDmxrikEgMEK8w5WPICSsgVDs9FX0AdONjrRANjLUr0hYwBmYUrBA/DlL31xZVHZg9SIy8HOomAw6Dn47kHHkcY/QXt7O9x3331UXTK6ZhwTacbsBqtXFBwtipS682UEFRVUwH5guXnAsXUzOvERp6KowHMW49REAXC5ZsA3F3+vMmeqUZjJ/stFA3LEs2/fPgcWXhqWFIIQOzUROKPhMAEgGHPMjk5tHm6MHogBQNEVKCkrHzrgqK35qfcv3mYnhjp7chr09gbh/vyCwNInli7MzJtMGbb/+vVHNT3o3r9/v6OxsZGEFnnDOamC1Azq4Ro5EBu9wMO/qSjGXJThGZjuwtFidDaKAE6fOulEAfqDYRg3bnzLs888X2UKL/v9FcH+oPvtA7vB6/VCR0cHbYQA4g/7zFPKsQKAh6BUyvAMFLnm+H40BGAdAUC8ebmTWn70w6qF5lGP/3J7rSMjY+Wuujo4fPj3gONtjDJYChiRRgWeZ2Ph9m5p+0b7mIcnDM8NB4CnlF5vE1GodMGC3OXL11zCMClq0iZGFyqxPMBooyhGXLfQCSNL2dWgjsHNsV6xxMqxUDxjbrwFqr2+lmYnmmf5suUrp0/Oc2uSzdPb0+c6dOgQ7NtH/QlYRTxVVI3QqBtnvkg7sxszD6rHCgjHMRRgsCOcOXu+b8XqdUYmrq2p9p7+6AMCsH79ekhKSoZTp07B5U86YP/+/ZCdfS90d3eDwEYoqpgHz+ZhA2oGrWE68VgBQEtTkTgSwJbaDd4PT/6ZaqGCggI4d+4cJaYrVzpJ4wnWRKJKgqhTsYdAKVdEz3wxw5rWGCvhKbrFNVRzSsuHqtFfb6nxnjx+xImRpaurC9LS0gB/N2G3p1C06breTXMZTg+RoHiNjklDIcOJBWMOZEahsQKBLS3VVlYLzJlX7vvBktUGhS5d+PiNF198fjHSA1+mhrVoh8RzRn2k6UM/7DB/PhB/8D3ytxMmEPMebOqp1Ij7IUf8/yOz9WcCg2gh+bKzs+Hxpat2T5xU+M1hk7Gx0txY7vsP+HBmqXYwJbIAAAAASUVORK5CYII=",BL=""+new URL("../../assets/axe-removebg-preview-6ec4ca46.png",import.meta.url).href,LL=""+new URL("../../assets/bow-removebg-preview-75a7b4cd.png",import.meta.url).href,WL=""+new URL("../../assets/fists-removebg-preview-1b211e37.png",import.meta.url).href,ne={SWORD:"SWORD",LANCE:"LANCE",AXE:"AXE",BOW:"BOW",FISTS:"FISTS",HEAVY_ARMOR:"HEAVY_ARMOR",RIDING:"RIDING",REASON:"REASON",FAITH:"FAITH",LEADERSHIP:"LEADERSHIP"},pr={[ne.SWORD]:"Sword",[ne.LANCE]:"Lance",[ne.AXE]:"Axe",[ne.BOW]:"Bow",[ne.FISTS]:"Fists",[ne.HEAVY_ARMOR]:"Heavy Armor",[ne.RIDING]:"Riding",[ne.REASON]:"Reason",[ne.FAITH]:"Faith",[ne.LEADERSHIP]:"Leadership"},ro={[ne.SWORD]:[Ke.STR,Ke.DEX],[ne.LANCE]:[Ke.STR,Ke.DEX],[ne.AXE]:[Ke.STR],[ne.BOW]:[Ke.DEX],[ne.FISTS]:[Ke.STR,Ke.DEX],[ne.HEAVY_ARMOR]:[Ke.CON],[ne.RIDING]:[on.ANIMAL_HANDLING],[ne.REASON]:[Ke.INT],[ne.FAITH]:[Ke.INT],[ne.LEADERSHIP]:[Ke.WIS,Ke.CHA]},X4=[ne.SWORD,ne.LANCE,ne.AXE,ne.BOW,ne.FISTS],Im=[ne.REASON,ne.FAITH],sy=[...X4,...Im],nd={[ne.SWORD]:PL,[ne.LANCE]:ML,[ne.AXE]:BL,[ne.BOW]:LL,[ne.FISTS]:WL,[ne.HEAVY_ARMOR]:null,[ne.RIDING]:null,[ne.REASON]:null,[ne.FAITH]:null,[ne.LEADERSHIP]:null},ft={WRATH_STRIKE:"WRATH_STRIKE",GROUNDER:"GROUNDER",HAZE_SLICE:"HAZE_SLICE",SUNDER:"SUNDER",BANE_OF_MONSTERS:"BANE_OF_MONSTERS",WINDSWEEP:"WINDSWEEP",TEMPEST_LANCE:"TEMPEST_LANCE",KNIGHT_KNEELER:"KNIGHT_KNEELER",SHATTER_SLASH:"SHATTER_SLASH",HIT_AND_RUN:"HIT_AND_RUN",MONSTER_PIERCER:"MONSTER_PIERCER",SWIFT_STRIKES:"SWIFT_STRIKES",SMASH:"SMASH",HELM_SPLITTER:"HELM_SPLITTER",FOCUSED_STRIKE:"FOCUSED_STRIKE",SPIKE:"SPIKE",WILD_ABANDON:"WILD_ABANDON",DIAMOND_AXE:"DIAMOND_AXE",MONSTER_BREAKER:"MONSTER_BREAKER",CURVED_SHOT:"CURVED_SHOT",DEADEYE:"DEADEYE",HEAVY_DRAW:"HEAVY_DRAW",WANING_SHOT:"WANING_SHOT",BREAK_SHOT:"BREAK_SHOT",SCHISM_SHOT:"SCHISM_SHOT",MONSTER_BLAST:"MONSTER_BLAST",POINT_BLANK_VOLLEY:"POINT_BLANK_VOLLEY",ENCLOSER:"ENCLOSER",WARD_ARROW:"WARD_ARROW",FADING_BLOW:"FADING_BLOW",RUSHING_BLOW:"RUSHING_BLOW",DRAINING_BLOW:"DRAINING_BLOW",NIMBLE_COMBO:"NIMBLE_COMBO",BOMBARD:"BOMBARD",ONE_TWO_PUNCH:"ONE_TWO_PUNCH",MONSTER_CRUSHER:"MONSTER_CRUSHER",MIGHTY_BLOW:"MIGHTY_BLOW",SWAP:"SWAP",SHOVE:"SHOVE",REPOSITION:"REPOSITION",HEALING_FOCUS:"HEALING_FOCUS",PULL_BACK:"PULL_BACK"},kr={roll:st.d20,target:10,mod:1},_s={roll:st.d20,target:10,mod:-1},UL={roll:1,target:1,mod:1},Fr={[ft.SWAP]:{label:"Swap",description:"As action, switch places with an adjacent ally. Does not consume a superiority die when used."},[ft.REPOSITION]:{label:"Reposition",description:"As an action, move an adjacent ally directly across you. Does not consume a superiority die"},[ft.SHOVE]:{label:"Shove",description:"As an action, push an adjacent ally 1 space away from you. Does not consume a superiority die"},[ft.PULL_BACK]:{label:"Pull Back",description:"As an action, pull you and an adjacent ally 1 square back. Does not consume a superiority die."},[ft.HEALING_FOCUS]:{label:"Healing Focus",description:"As an action, regain half your HP"},[ft.WRATH_STRIKE]:{label:"Wrath Strike",description:"",compatibleWeapons:[ne.SWORD],damageBonus:[st.d2],attackBonus:[2],dieCost:_s},[ft.GROUNDER]:{label:"Grounder",description:"2x damage against flying units",compatibleWeapons:[ne.SWORD],damageBonus:[1],attackBonus:[4]},[ft.BANE_OF_MONSTERS]:{label:"Bane of Monsters",description:"2x damage against monsters",compatibleWeapons:[ne.SWORD],damageBonus:[st.d2],critBonus:[2]},[ft.HAZE_SLICE]:{label:"Haze Slice",description:"Add +6 to AC against retaliatory attack.",compatibleWeapons:[ne.SWORD],damageBonus:[st.d2,-1],dieCost:kr},[ft.SUNDER]:{label:"Sunder",description:"",compatibleWeapons:[ne.SWORD],damageBonus:[1],critBonus:[3],dieCost:_s},[ft.WINDSWEEP]:{label:"Windsweep",description:"Enemy does not retaliate",compatibleWeapons:[ne.SWORD],damageBonus:[1],attackBonus:[4],critBonus:[2],dieCost:kr},[ft.TEMPEST_LANCE]:{label:"Tempest Lance",description:"",compatibleWeapons:[ne.LANCE],damageBonus:[2],attackBonus:[2],dieCost:kr},[ft.KNIGHT_KNEELER]:{label:"Knightkneeler",description:"2x damage against cavalry units",compatibleWeapons:[ne.LANCE],damageBonus:[st.d2],attackBonus:[3]},[ft.SHATTER_SLASH]:{label:"Shatter Slash",description:"Damaged unit takes +1 more damage from martial attacks for 1 round",compatibleWeapons:[ne.LANCE],damageBonus:[1],attackBonus:[2],dieCost:_s},[ft.HIT_AND_RUN]:{label:"Hit and Run",description:"Add +4 to AC against retaliatory attack. After combat, move 1 space backwards if possible",compatibleWeapons:[ne.LANCE],damageBonus:[1],attackBonus:[2]},[ft.MONSTER_PIERCER]:{label:"Monster Piercer",description:"2x damage against monsters",compatibleWeapons:[ne.LANCE],damageBonus:[2]},[ft.SWIFT_STRIKES]:{label:"Swift Strike",description:"Attack twice before the enemy attacks",compatibleWeapons:[ne.LANCE],damageBonus:[1]},[ft.SMASH]:{label:"Smash",description:"",compatibleWeapons:[ne.AXE],damageBonus:[1],attackBonus:[4],critBonus:[4],dieCost:kr},[ft.HELM_SPLITTER]:{label:"Helm Splitter",description:"2x damage against armored units",compatibleWeapons:[ne.AXE],damageBonus:[2],critBonus:[1],dieCost:kr},[ft.MONSTER_BREAKER]:{label:"Monster Breaker",description:"2x damage against monsters",compatibleWeapons:[ne.AXE],attackBonus:[st.d2,1],dieCost:kr},[ft.FOCUSED_STRIKE]:{label:"Focused Strike",description:"",compatibleWeapons:[ne.AXE],attackBonus:[6]},[ft.SPIKE]:{label:"Spike",description:"",compatibleWeapons:[ne.AXE],damageBonus:[st.d2],attackBonus:[3],critBonus:[2],dieCost:kr},[ft.WILD_ABANDON]:{label:"Wild Abandon",description:"",compatibleWeapons:[ne.AXE],damageBonus:[st.d3,1],attackBonus:[-6],critBonus:[2],dieCost:kr},[ft.DIAMOND_AXE]:{label:"Diamond Axe",description:"",compatibleWeapons:[ne.AXE],damageBonus:[st.d2,3],attackBonus:[-4],dieCost:UL},[ft.CURVED_SHOT]:{label:"Curved Shot",description:"",compatibleWeapons:[ne.BOW],attackBonus:[4],range:[2,3],dieCost:_s},[ft.DEADEYE]:{label:"Deadeye",description:"",compatibleWeapons:[ne.BOW],damageBonus:[st.d2],range:[3,5],dieCost:kr},[ft.HEAVY_DRAW]:{label:"Heavy Draw",description:"",compatibleWeapons:[ne.BOW],attackBonus:[st.d2],damageBonus:[2],range:[2],dieCost:kr},[ft.WANING_SHOT]:{label:"Waning Shot",description:"Damaged units deal -1 damage on attacks for 1 round",compatibleWeapons:[ne.BOW],damageBonus:[1],attackBonus:[2],range:[2,3],dieCost:_s},[ft.MONSTER_BLAST]:{label:"Monster Blast",description:"2x damage against monsters",compatibleWeapons:[ne.BOW],damageBonus:[st.d2],range:[2]},[ft.BREAK_SHOT]:{label:"Break Shot",description:"Damaged unit takes +1 more damage from martial attacks for 1 round",compatibleWeapons:[ne.BOW],damageBonus:[1],attackBonus:[1],range:[2,3],dieCost:_s},[ft.SCHISM_SHOT]:{label:"Schism Shot",description:"Damaged unit takes +1 more damage from magic attacks for 1 round",compatibleWeapons:[ne.BOW],attackBonus:[3],damageBonus:[1],range:[2,3],dieCost:_s},[ft.POINT_BLANK_VOLLEY]:{label:"Point Blank Volley",description:"2 consecutive hits; add +2 AC against retaliation",compatibleWeapons:[ne.BOW],attackBonus:[2],damageBonus:[1],range:[1]},[ft.ENCLOSER]:{label:"Encloser",description:"On hit, target cannot move for 1 turn",compatibleWeapons:[ne.BOW],attackBonus:[3],damageBonus:[1],range:[2],dieCost:_s},[ft.WARD_ARROW]:{label:"Ward Arrow",description:"On hit, target cannot use magic for 1 turn",compatibleWeapons:[ne.BOW],attackBonus:[3],damageBonus:[1],range:[2],dieCost:_s},[ft.FADING_BLOW]:{label:"Fading Blow",description:"Add +6 to AC against retaliatory attack. After combat, move 1 space backwards if possible",compatibleWeapons:[ne.FISTS],attackBonus:[2],damageBonus:[2],dieCost:_s},[ft.RUSHING_BLOW]:{label:"Rushing Blow",description:"Add +2 to AC against retaliatory attack. After combat, user moves 1 space in front of the enemy.",compatibleWeapons:[ne.FISTS],attackBonus:[4],damageBonus:[2],dieCost:_s},[ft.DRAINING_BLOW]:{label:"Draining Blow",description:"Restores HP equal to 50% of the damage inflicted to the enemy.",compatibleWeapons:[ne.FISTS],attackBonus:[4],damageBonus:[st.d2],dieCost:_s},[ft.NIMBLE_COMBO]:{label:"Nimble Combo",description:"Attack twice before retaliation attack. Add +4 to AC against retaliatory attack",compatibleWeapons:[ne.FISTS],damageBonus:[1],dieCost:_s},[ft.BOMBARD]:{label:"Bombard",description:"Attack twice before retaliation attack. Add +4 to AC against retaliatory attack",compatibleWeapons:[ne.FISTS],damageBonus:[1],critBonus:[2],dieCost:_s},[ft.ONE_TWO_PUNCH]:{label:"One-Two Punch",description:"Guaranteed follow up attack.",compatibleWeapons:[ne.FISTS],damageBonus:[2],attackBonus:[4]},[ft.MONSTER_CRUSHER]:{label:"Monster Crusher",description:"2x damage against monsters",compatibleWeapons:[ne.FISTS],attackBonus:[2],critBonus:[2],damageBonus:[st.d2,2]},[ft.MIGHTY_BLOW]:{label:"Mighty Blow",description:"",compatibleWeapons:[ne.FISTS],attackBonus:[-1],damageBonus:[st.d2,st.d2],critBonus:[4],dieCost:_s}},Q4=(n,e={})=>{const{disableDescription:t}=e,{damageBonus:i,attackBonus:s,critBonus:r,rangeBonus:o,range:l,dieCost:a,compatibleWeapons:c,description:u}=n,{roll:f,target:h,mod:d=0}=a||{};let m="1";f==st.d20?m=`1 (${(h||0)/20*100}% of the time cost ${Math.abs(d)} ${d>0?"more":"less"})`:h===1&&(m=1+d+"");let g=Ln(s||[]);return g[0]!=="-"&&(g="+"+g),[s?`Attack: ${g}`:"",i?`Damage: ${Ln(i)}`:"",r?`Crit Bonus: ${Ln(r)}`:"",o?`Extra Range: ${o}`:"",l?`Range: ${l[0]}${l[1]?"-"+l[1]:""}`:"",c?`Cost: ${m}`:""].filter(v=>v).join(", ")+(u&&!t?`. ${u}`:"")},Ae={TRAINING_SWORD:"TRAINING_SWORD",IRON_SWORD:"IRON_SWORD",STEEL_SWORD:"STEEL_SWORD",LEVIN_SWORD:"LEVIN_SWORD",SILVER_SWORD:"SILVER_SWORD",SWORD_OF_THE_CREATOR:"SWORD_OF_THE_CREATOR",TRAINING_LANCE:"TRAINING_LANCE",IRON_LANCE:"IRON_LANCE",STEEL_LANCE:"STEEL_LANCE",SILVER_LANCE:"SILVER_LANCE",PIKE:"PIKE",LANCE_OF_RUIN:"LANCE_OF_RUIN",TRAINING_AXE:"TRAINING_AXE",IRON_AXE:"IRON_AXE",STEEL_AXE:"STEEL_AXE",SILVER_AXE:"SILVER_AXE",HAND_AXE:"HAND_AXE",HAMMER:"HAMMER",TRAINING_BOW:"TRAINING_BOW",IRON_BOW:"IRON_BOW",STEEL_BOW:"STEEL_BOW",SILVER_BOW:"SILVER_BOW",SHORT_BOW:"SHORT_BOW",TRAINING_GAUNTLETS:"TRAINING_GAUNTLETS",IRON_GAUNTLETS:"IRON_GAUNTLETS",STEEL_GAUNTLETS:"STEEL_GAUNTLETS",SILVER_GAUNTLETS:"SILVER_GAUNTLETS",CLOTH_GAUNTLETS:"CLOTH_GAUNTLETS",MIASMA:"MIASMA",FIRE:"FIRE",THUNDER:"THUNDER",WIND:"WIND",BLIZZARD:"BLIZZARD",BOLGANONE:"BOLGANONE",THORON:"THORON",CUTTING_GALE:"CUTTING_GALE",SAGITTAE:"SAGITTAE",HAILSTORM:"HAILSTORM",MIRE_B:"MIRE_B",BANSHEE:"BANSHEE",DARK_SPIKES:"DARK_SPIKES",RAGNAROK:"RAGNAROK",METEOR:"METEOR",EXCALIBUR:"EXCALIBUR",BOLTING:"BOLTING",FIMBULVETR:"FIMBULVETR",AGNEAS_ARROW:"AGNEAS_ARROW",HEAL:"HEAL",NOSFERATU:"NOSFERATU",SERAPHIM:"SERAPHIM",ABRAXAS:"ABRAXAS",AURA:"AURA",RECOVER:"RECOVER",PHYSIC:"PHYSIC",RESTORE:"RESTORE",FORTIFY:"FORTIFY",RESCUE:"RESCUE",WARP:"WARP",SILENCE:"SILENCE",WARD:"WARD"},Xg=new Set([Ae.TRAINING_SWORD,Ae.TRAINING_LANCE,Ae.TRAINING_AXE,Ae.TRAINING_BOW,Ae.TRAINING_GAUNTLETS]),VL=[Ae.TRAINING_SWORD,Ae.IRON_SWORD,Ae.STEEL_SWORD,Ae.SILVER_SWORD,Ae.LEVIN_SWORD,Ae.SWORD_OF_THE_CREATOR],FL=[Ae.TRAINING_LANCE,Ae.IRON_LANCE,Ae.STEEL_LANCE,Ae.SILVER_LANCE,Ae.PIKE,Ae.LANCE_OF_RUIN],jL=[Ae.TRAINING_AXE,Ae.IRON_AXE,Ae.STEEL_AXE,Ae.SILVER_AXE,Ae.HAMMER,Ae.HAND_AXE],Y4=[Ae.TRAINING_BOW,Ae.IRON_BOW,Ae.STEEL_BOW,Ae.SILVER_BOW,Ae.SHORT_BOW],HL=[Ae.TRAINING_GAUNTLETS,Ae.IRON_GAUNTLETS,Ae.STEEL_GAUNTLETS,Ae.SILVER_GAUNTLETS,Ae.CLOTH_GAUNTLETS],qL={[Ae.TRAINING_SWORD]:ne.SWORD,[Ae.IRON_SWORD]:ne.SWORD,[Ae.STEEL_SWORD]:ne.SWORD,[Ae.SILVER_SWORD]:ne.SWORD,[Ae.SWORD_OF_THE_CREATOR]:ne.SWORD,[Ae.TRAINING_LANCE]:ne.LANCE,[Ae.IRON_LANCE]:ne.LANCE,[Ae.STEEL_LANCE]:ne.LANCE,[Ae.SILVER_LANCE]:ne.LANCE,[Ae.LANCE_OF_RUIN]:ne.LANCE,[Ae.PIKE]:ne.LANCE,[Ae.TRAINING_AXE]:ne.AXE,[Ae.IRON_AXE]:ne.AXE,[Ae.STEEL_AXE]:ne.AXE,[Ae.SILVER_AXE]:ne.AXE,[Ae.HAMMER]:ne.AXE,[Ae.HAND_AXE]:ne.AXE,[Ae.TRAINING_BOW]:ne.BOW,[Ae.IRON_BOW]:ne.BOW,[Ae.STEEL_BOW]:ne.BOW,[Ae.SILVER_BOW]:ne.BOW,[Ae.SHORT_BOW]:ne.BOW,[Ae.TRAINING_GAUNTLETS]:ne.FISTS,[Ae.IRON_GAUNTLETS]:ne.FISTS,[Ae.STEEL_GAUNTLETS]:ne.FISTS,[Ae.SILVER_GAUNTLETS]:ne.FISTS,[Ae.CLOTH_GAUNTLETS]:ne.FISTS,[Ae.FIRE]:ne.REASON,[Ae.THUNDER]:ne.REASON,[Ae.WIND]:ne.REASON,[Ae.BLIZZARD]:ne.REASON,[Ae.BOLGANONE]:ne.REASON,[Ae.THORON]:ne.REASON,[Ae.CUTTING_GALE]:ne.REASON,[Ae.SAGITTAE]:ne.REASON,[Ae.HAILSTORM]:ne.REASON,[Ae.MIRE_B]:ne.REASON,[Ae.BANSHEE]:ne.REASON,[Ae.DARK_SPIKES]:ne.REASON,[Ae.RAGNAROK]:ne.REASON,[Ae.METEOR]:ne.REASON,[Ae.EXCALIBUR]:ne.REASON,[Ae.BOLTING]:ne.REASON,[Ae.FIMBULVETR]:ne.REASON,[Ae.AGNEAS_ARROW]:ne.REASON,[Ae.HEAL]:ne.FAITH,[Ae.NOSFERATU]:ne.FAITH,[Ae.SERAPHIM]:ne.FAITH,[Ae.AURA]:ne.FAITH,[Ae.ABRAXAS]:ne.FAITH,[Ae.RECOVER]:ne.FAITH,[Ae.PHYSIC]:ne.FAITH,[Ae.RESTORE]:ne.FAITH,[Ae.WARD]:ne.FAITH,[Ae.WARP]:ne.FAITH,[Ae.FORTIFY]:ne.FAITH,[Ae.RESCUE]:ne.FAITH,[Ae.SILENCE]:ne.FAITH},nr={[Ae.TRAINING_SWORD]:{label:"Training Sword",description:"",type:ne.SWORD,acBonus:1,damage:[1],attackBonus:3,range:[1]},[Ae.IRON_SWORD]:{label:"Iron Sword",description:"",type:ne.SWORD,damage:[st.d2,1],attackBonus:1,range:[1]},[Ae.STEEL_SWORD]:{label:"Steel Sword",description:"",type:ne.SWORD,acBonus:-2,followUpBonus:-2,damage:[st.d3,1],attackBonus:-1,range:[1]},[Ae.SILVER_SWORD]:{label:"Silver Sword",description:"",type:ne.SWORD,acBonus:-1,followUpBonus:-1,damage:[st.d3,2],attackBonus:1,range:[1]},[Ae.LEVIN_SWORD]:{label:"Levin Sword",description:"Uses Int instead of Str for damage",type:ne.SWORD,acBonus:-1,followUpBonus:-1,damage:[st.d3,1],damageType:[Ke.INT],attackBonus:-4,range:[1,2]},[Ae.SWORD_OF_THE_CREATOR]:{label:"Sword of the Creator",description:"",type:ne.SWORD,acBonus:-1,followUpBonus:-1,damage:[st.d3,3],attackBonus:1,range:[1,2]},[Ae.TRAINING_LANCE]:{label:"Training Lance",description:"",type:ne.LANCE,acBonus:1,damage:[st.d2],attackBonus:1,range:[1]},[Ae.IRON_LANCE]:{label:"Iron Lance",description:"",type:ne.LANCE,damage:[st.d2,1],attackBonus:-1,range:[1]},[Ae.STEEL_LANCE]:{label:"Steel Lance",description:"",type:ne.LANCE,acBonus:-2,followUpBonus:-3,damage:[st.d3,2],attackBonus:-2,range:[1]},[Ae.SILVER_LANCE]:{label:"Silver Lance",description:"",type:ne.LANCE,acBonus:-1,followUpBonus:-2,damage:[st.d3,3],attackBonus:-1,range:[1]},[Ae.PIKE]:{label:"Pike",description:"+1 range",type:ne.LANCE,acBonus:-2,followUpBonus:-3,damage:[st.d3,1],attackBonus:-2,range:[1,2]},[Ae.LANCE_OF_RUIN]:{label:"Lance of Ruin",description:"",type:ne.LANCE,acBonus:-1,followUpBonus:-2,damage:[st.d2,4],attackBonus:-4,range:[1]},[Ae.TRAINING_AXE]:{label:"Training Axe",description:"",type:ne.AXE,acBonus:1,damage:[st.d2,1],attackBonus:-1,range:[1]},[Ae.IRON_AXE]:{label:"Iron Axe",description:"",type:ne.AXE,damage:[st.d3,1],attackBonus:-3,range:[1]},[Ae.STEEL_AXE]:{label:"Steel Axe",description:"",type:ne.AXE,acBonus:-3,damage:[st.d4,1],followUpBonus:-3,attackBonus:-4,range:[1]},[Ae.SILVER_AXE]:{label:"Silver Axe",description:"",type:ne.AXE,acBonus:-2,damage:[st.d5,2],followUpBonus:-2,attackBonus:-3,range:[1]},[Ae.HAMMER]:{label:"Warhammer",description:"",type:ne.AXE,damage:[st.d4,1],acBonus:-3,followUpBonus:-4,attackBonus:-5,range:[1]},[Ae.HAND_AXE]:{label:"Hand Axe",description:"",type:ne.AXE,followUpBonus:-1,damage:[st.d2],attackBonus:-3,range:[1]},[Ae.TRAINING_BOW]:{label:"Training Bow",description:"",type:ne.BOW,acBonus:1,damage:[1],attackBonus:1,range:[2]},[Ae.IRON_BOW]:{label:"Iron Bow",description:"",type:ne.BOW,damage:[st.d2,1],range:[2]},[Ae.STEEL_BOW]:{label:"Steel Bow",description:"",type:ne.BOW,acBonus:-2,followUpBonus:-2,attackBonus:-1,damage:[st.d3,1],range:[2]},[Ae.SILVER_BOW]:{label:"Silver Bow",description:"",type:ne.BOW,acBonus:-1,followUpBonus:-1,damage:[st.d3,3],range:[2]},[Ae.SHORT_BOW]:{label:"Short Bow",description:"",acBonus:1,followUpBonus:1,type:ne.BOW,damage:[st.d2],attackBonus:1,range:[1,2]},[Ae.TRAINING_GAUNTLETS]:{label:"Training Fists",description:"",type:ne.FISTS,acBonus:1,attackBonus:1,damage:[st.d2,-1],range:[1]},[Ae.IRON_GAUNTLETS]:{label:"Iron Fists",description:"",type:ne.FISTS,damage:[1],attackBonus:0,range:[1]},[Ae.STEEL_GAUNTLETS]:{label:"Steel Fists",description:"",type:ne.FISTS,attackBonus:-1,damage:[st.d2,1],range:[1]},[Ae.SILVER_GAUNTLETS]:{label:"Silver Fists",description:"",type:ne.FISTS,damage:[st.d2,2],range:[1]},[Ae.CLOTH_GAUNTLETS]:{label:"Hand Wraps",description:"Doesn't consume superiority dies when using combat arts",type:ne.FISTS,acBonus:1,followUpBonus:1,attackBonus:1,damage:[0],range:[1],dieCost:{roll:1,target:0,mult:0}},[Ae.MIASMA]:{label:"Miasma",description:"",type:ne.REASON,damage:[st.d2,1],damageType:[Ke.INT],attackBonus:-1,followUpBonus:-1,range:[1,2],uses:10},[Ae.FIRE]:{label:"Fire",description:"",type:ne.REASON,damage:[st.d2],damageType:[Ke.INT],attackBonus:1,range:[1,2],uses:10},[Ae.THUNDER]:{label:"Thunder",description:"",type:ne.REASON,damage:[st.d2,1],damageType:[Ke.INT],critBonus:1,attackBonus:-1,range:[1,2],uses:8},[Ae.WIND]:{label:"Wind",description:"",type:ne.REASON,followUpBonus:1,acBonus:1,attackBonus:3,damage:[1],damageType:[Ke.INT],critBonus:2,range:[1,2],uses:12},[Ae.BLIZZARD]:{label:"Blizzard",description:"",type:ne.REASON,damage:[st.d2,1],damageType:[Ke.INT],attackBonus:-3,critBonus:3,range:[1,2],uses:10},[Ae.BOLGANONE]:{label:"Bolganone",description:"",type:ne.REASON,damage:[st.d3,1],damageType:[Ke.INT],range:[1,2],uses:5},[Ae.THORON]:{label:"Thoron",description:"",type:ne.REASON,damage:[st.d3,1],damageType:[Ke.INT],attackBonus:-2,critBonus:2,range:[1,3],uses:4},[Ae.CUTTING_GALE]:{label:"Cutting Gale",description:"",type:ne.REASON,damage:[st.d2,1],damageType:[Ke.INT],attackBonus:2,critBonus:2,range:[1,2],uses:6},[Ae.SAGITTAE]:{label:"Sagittae",description:"",type:ne.REASON,damage:[st.d2,1],damageType:[Ke.INT],attackBonus:4,critBonus:1,range:[1,2],uses:10},[Ae.HAILSTORM]:{label:"Hailstorm",description:"",type:ne.REASON,damage:[st.d5],damageType:[Ke.INT],attackBonus:-3,critBonus:3,range:[1,2],uses:6},[Ae.MIRE_B]:{label:"Mire B",description:"target takes +1 from physical attacks until end of their turn",type:ne.REASON,damage:[st.d2],damageType:[Ke.INT],attackBonus:-1,range:[1,3],uses:8},[Ae.BANSHEE]:{label:"Banshee",description:"Reduce foes movement by 5 until the end of their turn",type:ne.REASON,damage:[st.d2,2],damageType:[Ke.INT],critBonus:1,range:[1,2],uses:5},[Ae.DARK_SPIKES]:{label:"Dark Spikes",description:"Effective against cavalry",type:ne.REASON,damage:[st.d2,3],damageType:[Ke.INT],range:[1,2],uses:3},[Ae.RAGNAROK]:{label:"Ragnarok",description:"",type:ne.REASON,damage:[st.d3,3],attackBonus:1,critBonus:1,damageType:[Ke.INT],range:[1,2],uses:3},[Ae.METEOR]:{label:"Meteor",description:"",type:ne.REASON,damage:[st.d2,2],attackBonus:1,damageType:[Ke.INT],range:[3,10],uses:1},[Ae.BOLTING]:{label:"Bolting",description:"",type:ne.REASON,damage:[st.d3,2],attackBonus:-2,critBonus:3,damageType:[Ke.INT],range:[3,10],uses:2},[Ae.EXCALIBUR]:{label:"Excalibur",description:"Effective against flyers",type:ne.REASON,damage:[st.d3,2],attackBonus:5,critBonus:3,damageType:[Ke.INT],range:[1,2],uses:4},[Ae.FIMBULVETR]:{label:"Fimbulvetr",description:"",type:ne.REASON,damage:[st.d3,2],attackBonus:-2,critBonus:5,damageType:[Ke.INT],range:[1,2],uses:3},[Ae.AGNEAS_ARROW]:{label:"Agnea's Arrow",description:"",type:ne.REASON,damage:[st.d4,3],attackBonus:-1,critBonus:1,damageType:[Ke.INT],range:[1,2],uses:2},[Ae.HEAL]:{label:"Heal",description:"",isHealing:!0,type:ne.FAITH,damage:[2],damageType:[Ke.INT],range:[1],uses:8},[Ae.NOSFERATU]:{label:"Nosferatu",description:"Heals user for damage dealt / 2 (rounded down)",type:ne.FAITH,damage:[1],damageType:[Ke.INT],attackBonus:-1,range:[1,2],uses:8},[Ae.SERAPHIM]:{label:"Seraphim",description:"",type:ne.FAITH,damage:[st.d2,1],damageType:[Ke.INT],attackBonus:-2,critBonus:1,range:[1,2],uses:8},[Ae.AURA]:{label:"Aura",description:"",type:ne.REASON,damage:[st.d2,3],attackBonus:-1,critBonus:4,damageType:[Ke.INT],range:[1,2],uses:3},[Ae.ABRAXAS]:{label:"Abraxas",description:"",type:ne.REASON,damage:[st.d3,3],attackBonus:3,critBonus:1,damageType:[Ke.INT],range:[1,2],uses:2},[Ae.RECOVER]:{label:"Recover",description:"",type:ne.FAITH,isHealing:!0,damage:[8],damageType:[Ke.INT],range:[1],uses:5},[Ae.PHYSIC]:{label:"Physic",description:"",type:ne.FAITH,isHealing:!0,damage:[2],damageType:[Ke.INT],range:["1","2 + 5 * INT"],uses:5},[Ae.FORTIFY]:{label:"Fortify",description:"Heals all units in range",type:ne.FAITH,isHealing:!0,damage:[2],damageType:[Ke.INT],range:["1","2 + 3 * INT"],uses:2},[Ae.RESCUE]:{label:"Rescue",description:"Returns an ally to the closest adjacent square",type:ne.FAITH,isHealing:!0,damage:[0],damageType:[Ke.INT],range:["1","2 + 3 * INT"],uses:3},[Ae.WARP]:{label:"Warp",description:"Sends an adjacent ally to the target square",type:ne.FAITH,isHealing:!0,damage:[0],damageType:[Ke.INT],range:["1","2 + 3 * INT"],uses:1},[Ae.SILENCE]:{label:"Silence",description:"Targeted enemy cannot cast spells",type:ne.FAITH,isHealing:!0,damage:[0],damageType:[Ke.INT],range:["3","10"],uses:1},[Ae.RESTORE]:{label:"Restore",description:"Removes all status effects from targeted player",type:ne.FAITH,damage:[0],damageType:[Ke.INT],range:["1","2 + INT"],uses:10},[Ae.WARD]:{label:"Ward",description:"Give targeted player +3 resistance. Reduces by 1 each round (cannot be stacked)",type:ne.FAITH,damageType:[Ke.INT],damage:[0],range:[1],uses:5}},_h=new Set(Object.keys(nr).filter(n=>nr[n].isHealing)),[J4,zL]=Object.keys(nr).reduce((n,e)=>(Im.includes(nr[e].type)?n[0].push(e):n[1].push(e),n),[[],[]]),wu=n=>{const{damage:e,attackBonus:t,range:i,critBonus:s,description:r,followUpBonus:o,isHealing:l}=n;return[t?`Attack: ${os(t)}`:"",`${l?"HP Restored":"Damage"}: ${e.reduce((a,c,u)=>a+(u===0?c:os(c)),"")}`,`Range: ${Array.isArray(i)?i==null?void 0:i.join("-"):i}`,s?`Crit Bonus: ${s}`:"",o?`AS Bonus: ${os(o)}`:"",r].filter(a=>a).join(", ")},We={MYRMIDON_MASTER:"MYRMIDON_MASTER",SOLDIER_MASTER:"SOLDIER_MASTER",FIGHTER_MASTER:"FIGHTER_MASTER",RANGER_MASTER:"RANGER_MASTER",MONK_MASTER:"MONK_MASTER",MERCENARY_THIEF_SKILL:"MERCENARY_THIEF_SKILL",VANTAGE:"VANTAGE",ANIMAL_WHISPERER:"ANIMAL_WHISPERER",BULLSEYE:"BULLSEYE",DEATH_BLOW:"DEATH_BLOW",ARMORED_COMBAT:"ARMORED_COMBAT",GRAPPLER:"GRAPPLER",FIENDISH_BLOW:"FIENDISH_BLOW",HEAL_PLUS:"HEAL_PLUS",SWORD_PROWESS_1:"SWORD_PROWESS_1",SWORD_PROWESS_2:"SWORD_PROWESS_2",SWORD_PROWESS_3:"SWORD_PROWESS_3",SWORD_PROWESS_4:"SWORD_PROWESS_4",SWORD_PROWESS_5:"SWORD_PROWESS_5",AXE_PROWESS_1:"AXE_PROWESS_1",AXE_PROWESS_2:"AXE_PROWESS_2",AXE_PROWESS_3:"AXE_PROWESS_3",AXE_PROWESS_4:"AXE_PROWESS_4",AXE_PROWESS_5:"AXE_PROWESS_5",LANCE_PROWESS_1:"LANCE_PROWESS_1",LANCE_PROWESS_2:"LANCE_PROWESS_2",LANCE_PROWESS_3:"LANCE_PROWESS_3",LANCE_PROWESS_4:"LANCE_PROWESS_4",LANCE_PROWESS_5:"LANCE_PROWESS_5",BOW_PROWESS_1:"BOW_PROWESS_1",CLOSE_COUNTER:"CLOSE_COUNTER",BOW_PROWESS_2:"BOW_PROWESS_2",BOW_PROWESS_3:"BOW_PROWESS_3",BOW_PROWESS_4:"BOW_PROWESS_4",BOW_PROWESS_5:"BOW_PROWESS_5",FISTS_PROWESS_1:"FISTS_PROWESS_1",FISTS_PROWESS_2:"FISTS_PROWESS_2",FISTS_PROWESS_3:"FISTS_PROWESS_3",FISTS_PROWESS_4:"FISTS_PROWESS_4",FISTS_PROWESS_5:"FISTS_PROWESS_5",REASON_PROWESS_1:"REASON_PROWESS_1",REASON_PROWESS_2:"REASON_PROWESS_2",REASON_PROWESS_3:"REASON_PROWESS_3",REASON_PROWESS_4:"REASON_PROWESS_4",REASON_PROWESS_5:"REASON_PROWESS_5",FAITH_PROWESS_1:"FAITH_PROWESS_1",FAITH_PROWESS_2:"FAITH_PROWESS_2",FAITH_PROWESS_3:"FAITH_PROWESS_3",FAITH_PROWESS_4:"FAITH_PROWESS_4",FAITH_PROWESS_5:"FAITH_PROWESS_5",LEADERSHIP_PROWESS_1:"LEADERSHIP_PROWESS_1",LEADERSHIP_PROWESS_2:"LEADERSHIP_PROWESS_2",LEADERSHIP_PROWESS_3:"LEADERSHIP_PROWESS_3",LEADERSHIP_PROWESS_4:"LEADERSHIP_PROWESS_4",LEADERSHIP_PROWESS_5:"LEADERSHIP_PROWESS_5",WEIGHT_MINUS_3:"WEIGHT_MINUS_3",AGILE_RIDER:"AGILE_RIDER",OFFICERS_DUTY:"OFFICERS_DUTY",SONGSTRESS:"SONGSTRESS",CONFIDENCE:"CONFIDENCE",PERSECUTION_COMPLEX:"PERSECUTION_COMPLEX",BORN_FIGHTER:"BORN_FIGHTER",CATNAP:"CATNAP",HUNTERS_BOON:"HUNTERS_BOON",LIVE_TO_SERVE:"LIVE_TO_SERVE",STAUNCH_SHIELD:"STAUNCH_SHIELD",LONE_WOLF:"LONE_WOLF",PERSEVERANCE:"PERSEVERANCE",PHILANDER:"PHILANDER",LADY_KNIGHT:"LADY_KNIGHT",DISTINGUISHED_HOUSE:"DISTINGUISHED_HOUSE",ADVOCATE:"ADVOCATE",GOODY_BASKET:"GOODY_BASKET",WATCHFUL_EYE:"WATCHFUL_EYE",ANIMAL_FRIEND:"ANIMAL_FRIEND",RIVALRY:"RIVALRY",INFIRMARY_MASTER:"INFIRMARY_MASTER",CREST_SCHOLAR:"CREST_SCHOLAR",FIGHTING_SPIRIT:"FIGHTING_SPIRIT",COMPASSION:"COMPASSION",GUARDIAN:"GUARDIAN",LILYS_POISE:"LILYS_POISE",VETERAN_KNIGHT:"VETERAN_KNIGHT",SURVIVAL_INSTINCT:"SURVIVAL_INSTINCT"},ys={MYRMIDON_MASTER:{label:"Myrmidon Master",description:"+1 AC",acBonus:1},SOLDIER_MASTER:{label:"Soldier Master",description:"+1 protection",protectionBonus:1},FIGHTER_MASTER:{label:"Fighter Master",description:"+1 crit range if the weapon does not have an innate crit chance"},RANGER_MASTER:{label:"Ranger Master",description:"+1 to attack when shooting from cover",queries:[{prompt:"ranged attack from cover?",compatibleWeapons:X4,options:[{label:"No"},{label:"Yes",attackBonus:[1],description:"+1 attack"}]}]},MONK_MASTER:{label:"Monk Master",description:"+1 resilience",resilienceBonus:1},MERCENARY_THIEF_SKILL:{label:"Swift",description:"+1 AC",acBonus:1},VANTAGE:{label:"Vantage",description:"If foe initiates combat, and if HP is  50%, unit still attacks first"},ANIMAL_WHISPERER:{label:"Animal Whisperer",description:"You and adjacent allies may roll saves from being dismounted with advantage"},BULLSEYE:{label:"Bullseye",description:"+4 to hit",attackBonus:{ANY:[4]}},DEATH_BLOW:{label:"Death Blow",description:"+2 damage when initiating an attack on already damaged targets",queries:[{prompt:"is target damaged?",compatibleWeapons:[ne.SWORD,ne.AXE,ne.LANCE,ne.FISTS,ne.BOW],options:[{label:"No"},{label:"Yes",damageBonus:[2],description:"+2 damage"}]}]},ARMORED_COMBAT:{label:"Armored Combat",description:"+1 protection when initiating combat",queries:[{prompt:"are you initiating combat?",compatibleWeapons:[ne.SWORD,ne.AXE,ne.LANCE,ne.FISTS,ne.BOW],options:[{label:"No"},{label:"Yes",protectionBonus:1,description:"+1 protection"}]}]},GRAPPLER:{label:"Grappler",description:"Gain the Reposition, Pull back, and Shove combat arts. These do not take up combat art slots"},FIENDISH_BLOW:{label:"Fiendish Blow",description:"+2 damage when attacking an undamaged unit",queries:[{prompt:"is target at full hp?",compatibleWeapons:[ne.REASON,ne.FAITH],options:[{label:"No"},{label:"Yes",damageBonus:[2],description:"+2 damage"}]}]},HEAL_PLUS:{label:"Heal Plus",description:"Doubles number of usages of Heal and increases the HP healed by 1d2. Does not stack with Priest class",bonusCharges:{[Ae.HEAL]:8},attackBonus:{[Ae.HEAL]:[st.d2]}},[We.SWORD_PROWESS_1]:{label:"Sword Prowess 1",description:"+1 attack, +1 AC when wielding a sword",attackBonus:{[ne.SWORD]:[1]},acBonus:1,acBonusCompatibility:[ne.SWORD]},[We.SWORD_PROWESS_2]:{label:"Sword Prowess 2",description:"+1 attack, +2 AC when wielding a sword",attackBonus:{[ne.SWORD]:[1]},acBonus:2,acBonusCompatibility:[ne.SWORD]},[We.SWORD_PROWESS_3]:{label:"Sword Prowess 3",description:"+2 attack, +2 AC when wielding a sword",attackBonus:{[ne.SWORD]:[2]},acBonus:2,acBonusCompatibility:[ne.SWORD]},[We.SWORD_PROWESS_4]:{label:"Sword Prowess 4",description:"+2 attack, +3 AC when wielding a sword",attackBonus:{[ne.SWORD]:[2]},acBonus:3,acBonusCompatibility:[ne.SWORD]},[We.SWORD_PROWESS_5]:{label:"Sword Prowess 5",description:"+2 attack, +4 AC when wielding a sword",attackBonus:{[ne.SWORD]:[2]},acBonus:4,acBonusCompatibility:[ne.SWORD]},[We.AXE_PROWESS_1]:{label:"Axe Prowess 1",description:"+1 attack, +1 AC when wielding an axe",attackBonus:{[ne.AXE]:[1]},acBonus:1,acBonusCompatibility:[ne.AXE]},[We.AXE_PROWESS_2]:{label:"Axe Prowess 2",description:"+1 attack, +2 AC when wielding an axe",attackBonus:{[ne.AXE]:[1]},acBonus:2,acBonusCompatibility:[ne.AXE]},[We.AXE_PROWESS_3]:{label:"Axe Prowess 3",description:"+2 attack, +2 AC when wielding an axe",attackBonus:{[ne.AXE]:[2]},acBonus:2,acBonusCompatibility:[ne.AXE]},[We.AXE_PROWESS_4]:{label:"Axe Prowess 4",description:"+2 attack, +3 AC when wielding an axe",attackBonus:{[ne.AXE]:[2]},acBonus:3,acBonusCompatibility:[ne.AXE]},[We.AXE_PROWESS_5]:{label:"Axe Prowess 5",description:"+2 attack, +4 AC when wielding an axe",attackBonus:{[ne.AXE]:[2]},acBonus:4,acBonusCompatibility:[ne.AXE]},[We.LANCE_PROWESS_1]:{label:"Lance Prowess 1",description:"+1 attack, +1 AC when wielding a lance",attackBonus:{[ne.LANCE]:[1]},acBonus:1,acBonusCompatibility:[ne.LANCE]},[We.LANCE_PROWESS_2]:{label:"Lance Prowess 2",description:"+1 attack, +2 AC when wielding a lance",attackBonus:{[ne.LANCE]:[1]},acBonus:2,acBonusCompatibility:[ne.LANCE]},[We.LANCE_PROWESS_3]:{label:"Lance Prowess 3",description:"+2 attack, +2 AC when wielding a lance",attackBonus:{[ne.LANCE]:[2]},acBonus:2,acBonusCompatibility:[ne.LANCE]},[We.LANCE_PROWESS_4]:{label:"Lance Prowess 4",description:"+2 attack, +3 AC when wielding a lance",attackBonus:{[ne.LANCE]:[2]},acBonus:3,acBonusCompatibility:[ne.LANCE]},[We.LANCE_PROWESS_5]:{label:"Lance Prowess 5",description:"+2 attack, +4 AC when wielding a lance",attackBonus:{[ne.LANCE]:[2]},acBonus:4,acBonusCompatibility:[ne.LANCE]},[We.BOW_PROWESS_1]:{label:"Bow Prowess 1",description:"+1 attack, +1 AC when wielding a bow",attackBonus:{[ne.BOW]:[1]},acBonus:1,acBonusCompatibility:[ne.BOW]},[We.CLOSE_COUNTER]:{label:"Close Counter",description:"Enables unit to retaliate against adjacent attackers"},[We.BOW_PROWESS_2]:{label:"Bow Prowess 2",description:"+1 attack, +2 AC when wielding a bow",attackBonus:{[ne.BOW]:[1]},acBonus:2,acBonusCompatibility:[ne.BOW]},[We.BOW_PROWESS_3]:{label:"Bow Prowess 3",description:"+2 attack, +2 AC when wielding a bow",attackBonus:{[ne.BOW]:[2]},acBonus:2,acBonusCompatibility:[ne.BOW]},[We.BOW_PROWESS_4]:{label:"Bow Prowess 4",description:"+2 attack, +3 AC when wielding a bow",attackBonus:{[ne.BOW]:[2]},acBonus:3,acBonusCompatibility:[ne.BOW]},[We.BOW_PROWESS_5]:{label:"Bow Prowess 5",description:"+2 attack, +4 AC when wielding a bow",attackBonus:{[ne.BOW]:[2]},acBonus:4,acBonusCompatibility:[ne.BOW]},[We.FISTS_PROWESS_1]:{label:"Fists Prowess 1",description:"+1 attack, +1 AC when wielding fist weapons",attackBonus:{[ne.FISTS]:[1]},acBonus:1,acBonusCompatibility:[ne.FISTS]},[We.FISTS_PROWESS_2]:{label:"Fists Prowess 2",description:"+1 attack, +2 AC when wielding fist weapons",attackBonus:{[ne.FISTS]:[1]},acBonus:2,acBonusCompatibility:[ne.FISTS]},[We.FISTS_PROWESS_3]:{label:"Fists Prowess 3",description:"+2 attack, +2 AC when wielding fist weapons",attackBonus:{[ne.FISTS]:[2]},acBonus:2,acBonusCompatibility:[ne.FISTS]},[We.FISTS_PROWESS_4]:{label:"Fists Prowess 4",description:"+2 attack, +3 AC when wielding fist weapons",attackBonus:{[ne.FISTS]:[2]},acBonus:3,acBonusCompatibility:[ne.FISTS]},[We.FISTS_PROWESS_5]:{label:"Fists Prowess 5",description:"+2 attack, +4 AC when wielding fist weapons",attackBonus:{[ne.FISTS]:[2]},acBonus:4,acBonusCompatibility:[ne.FISTS]},[We.REASON_PROWESS_1]:{label:"Reason Prowess 1",description:"+1 attack, +1 AC when attacking with reason magic",attackBonus:{[ne.REASON]:[1]},acBonus:1,acBonusCompatibility:[ne.REASON]},[We.REASON_PROWESS_2]:{label:"Reason Prowess 2",description:"+1 attack, +2 AC when attacking with reason magic",attackBonus:{[ne.REASON]:[1]},acBonus:2,acBonusCompatibility:[ne.REASON]},[We.REASON_PROWESS_3]:{label:"Reason Prowess 3",description:"+2 attack, +2 AC when attacking with reason magic",attackBonus:{[ne.REASON]:[2]},acBonus:2,acBonusCompatibility:[ne.REASON]},[We.REASON_PROWESS_4]:{label:"Reason Prowess 4",description:"+2 attack, +3 AC when attacking with reason magic",attackBonus:{[ne.REASON]:[2]},acBonus:3,acBonusCompatibility:[ne.REASON]},[We.REASON_PROWESS_5]:{label:"Reason Prowess 5",description:"+2 attack, +4 AC when attacking with reason magic",attackBonus:{[ne.REASON]:[2]},acBonus:4,acBonusCompatibility:[ne.REASON]},[We.FAITH_PROWESS_1]:{label:"Faith Prowess 1",description:"+1 attack, +1 AC when attacking with faith magic",attackBonus:{[ne.FAITH]:[1]},acBonus:1,acBonusCompatibility:[ne.REASON]},[We.FAITH_PROWESS_2]:{label:"Faith Prowess 2",description:"+1 attack, +2 AC when attacking with faith magic",attackBonus:{[ne.FAITH]:[1]},acBonus:2,acBonusCompatibility:[ne.REASON]},[We.FAITH_PROWESS_3]:{label:"Faith Prowess 3",description:"+2 attack, +2 AC when attacking with faith magic",attackBonus:{[ne.FAITH]:[2]},acBonus:2,acBonusCompatibility:[ne.REASON]},[We.FAITH_PROWESS_4]:{label:"Faith Prowess 4",description:"+2 attack, +3 AC when attacking with faith magic",attackBonus:{[ne.FAITH]:[2]},acBonus:3,acBonusCompatibility:[ne.REASON]},[We.FAITH_PROWESS_5]:{label:"Faith Prowess 5",description:"+2 attack, +4 AC when attacking with faith magic",attackBonus:{[ne.FAITH]:[2]},acBonus:4,acBonusCompatibility:[ne.REASON]},[We.LEADERSHIP_PROWESS_1]:{label:"Leadership Prowess 1",description:"+1 damage on gambits",damageBonus:{[ne.LEADERSHIP]:[1]}},[We.LEADERSHIP_PROWESS_2]:{label:"Leadership Prowess 2",description:"+1 attack, +1 damage on gambits",attackBonus:{[ne.LEADERSHIP]:[1]},damageBonus:{[ne.LEADERSHIP]:[1]}},[We.LEADERSHIP_PROWESS_3]:{label:"Leadership Prowess 3",description:"+2 attack, +1 damage on gambits",attackBonus:{[ne.LEADERSHIP]:[2]},damageBonus:{[ne.LEADERSHIP]:[1]}},[We.LEADERSHIP_PROWESS_4]:{label:"Leadership Prowess 4",description:"+2 attack, +2 damage on gambits",attackBonus:{[ne.LEADERSHIP]:[2]},damageBonus:{[ne.LEADERSHIP]:[2]}},[We.LEADERSHIP_PROWESS_5]:{label:"Leadership Prowess 5",description:"+3 attack, +2 damage on gambits",attackBonus:{[ne.LEADERSHIP]:[3]},damageBonus:{[ne.LEADERSHIP]:[2]}},[We.WEIGHT_MINUS_3]:{label:"Heavy Lifter",description:"+2 attack speed",followUpBonus:2},[We.AGILE_RIDER]:{label:"Agile Rider",description:"+1 to attack, +1 AC while mounted",acBonus:1,attackBonus:{ANY:[1]}},[We.OFFICERS_DUTY]:{label:"Officer's Duty",description:"+1d2 damage on Gambits"},[We.SONGSTRESS]:{label:"Songstress",description:"Adjacent allies recover up to 10% of max HP at the start of each turn."},[We.CONFIDENCE]:{label:"Confidence",description:"Grants +3 to Hit and +3 AC when unit is at full HP."},[We.PERSECUTION_COMPLEX]:{label:"Persecution Complex",description:"Grants +1d2 damage when unit is not at full HP."},[We.BORN_FIGHTER]:{label:"Born Fighter",description:"Adjacent foes suffer -2 AC during combat."},[We.CATNAP]:{label:"Catnap",description:"If unit takes no action except Wait, recovers up to 10% of max HP."},[We.HUNTERS_BOON]:{label:"Hunter's Boon",description:"Grants Crit +4 when foe's HP is  50%."},[We.LIVE_TO_SERVE]:{label:"Live to Serve",description:"When healing an ally with white magic, unit recovers the same amount of HP."},[We.STAUNCH_SHIELD]:{label:"Staunch Shield",description:"If unit takes no action except Wait, grants Protection +1 until your next turn."},[We.LONE_WOLF]:{label:"Lone Wolf",description:"Unit deals 1d2 extra damage when no battalion is assigned or when battalion endurance is 0."},[We.PERSEVERANCE]:{label:"Perseverance",description:"Use Rally to grant +1 damage to an ally until your next turn."},[We.PHILANDER]:{label:"Philander",description:"If a female ally is adjacent, unit deals 1 extra damage"},[We.LADY_KNIGHT]:{label:"Lady Knight",description:"Grants +1 damage and Hit +5 with gambits."},[We.DISTINGUISHED_HOUSE]:{label:"Distinguished House",description:"Unit deals 1 extra damage while in formation with a battalion."},[We.ADVOCATE]:{label:"Advocate",description:"Adjacent male allies deal 1 extra damage during combat."},[We.GOODY_BASKET]:{label:"Goody Basket",description:"Chance to recover up to 10% of max HP at the start of each turn. DC 18"},[We.WATCHFUL_EYE]:{label:"Watchful Eye",description:"Grants Hit +20."},[We.ANIMAL_FRIEND]:{label:"Animal Friend",description:"	Unit recovers up to 20% of max HP at the start of each turn when adjacent to a cavalry or flying ally."},[We.RIVALRY]:{label:"Rivalry",description:"If a male ally is adjacent, unit deals 1 extra damage"},[We.INFIRMARY_MASTER]:{label:"Infirmary Master",description:"Adjacent allies gain Crit Avo +10 during combat."},[We.CREST_SCHOLAR]:{label:"Crest Scholar",description:"Use Rally to grant 1d2 damage to an ally until your next turn (only applies to magic attacks)"},[We.FIGHTING_SPIRIT]:{label:"Fighting Spirit",description:"Unit gains +1 Protection when no battalion is assigned or when battalion endurance is 0."},[We.COMPASSION]:{label:"Compassion",description:"Use Rally to grant +1 Crit Range to an ally."},[We.GUARDIAN]:{label:"Guardian",description:"Adjacent female allies deal 1d2 extra damage during combat"},[We.LILYS_POISE]:{label:"Lily's Poise",description:"Adjacent allies gain +1 Protection during combat."},[We.VETERAN_KNIGHT]:{label:"Veteran Knight",description:"Unit gains +1 Protection while in formation with a battalion."},[We.SURVIVAL_INSTINCT]:{label:"Survival Instinct",description:"If unit initiates combat and defeats foe, grants +1 damage, +1 AC, +1 AS, +5 to hit"}};var mn=(n=>(n.Weapon="Weapon",n.CombatSkill="Combat Skill",n.CombatArt="Combat Art",n.PlayerStat="Player Stat",n))(mn||{}),is=(n=>(n.LEFT_END="LEFT_END",n.CENTER="CENTER",n.RIGHT_START="RIGHT_START",n.BOTTOM_CENTER="BOTTOM_CENTER",n))(is||{});const Wt={MYRMIDON:"MYRMIDON",SOLDIER:"SOLDIER",FIGHTER:"FIGHTER",RANGER:"RANGER",MONK:"MONK",MERCENARY:"MERCENARY",THIEF:"THIEF",CAVALIER:"CAVALIER",ARCHER:"ARCHER",BRIGAND:"BRIGAND",ARMORED_KNIGHT:"ARMORED_KNIGHT",BRAWLER:"BRAWLER",MAGE:"MAGE",PRIEST:"PRIEST",SWORDMASTER:"SWORDMASTER",ASSASSIN:"ASSASSIN",PALADIN:"PALADIN",WARRIOR:"WARRIOR",FORTRESS_KNIGHT:"FORTRESS_KNIGHT",WYVERN_RIDER:"WYVERN_RIDER",PEGASUS_KNIGHT:"PEGASUS_KNIGHT",SNIPER:"SNIPER",GRAPPLER:"GRAPPLER",WARLOCK:"WARLOCK",BISHOP:"BISHOP"},Qg=new Set([Wt.MYRMIDON,Wt.SOLDIER,Wt.FIGHTER,Wt.RANGER,Wt.MONK]),Ia=new Set([Wt.MERCENARY,Wt.THIEF,Wt.CAVALIER,Wt.ARCHER,Wt.BRIGAND,Wt.ARMORED_KNIGHT,Wt.BRAWLER,Wt.MAGE,Wt.PRIEST]),ry=new Set([Wt.SWORDMASTER,Wt.ASSASSIN,Wt.PALADIN,Wt.WARRIOR,Wt.FORTRESS_KNIGHT,Wt.WYVERN_RIDER,Wt.PEGASUS_KNIGHT,Wt.SNIPER,Wt.GRAPPLER,Wt.WARLOCK,Wt.BISHOP]),Xt={[Wt.MYRMIDON]:{label:"Myrmidon",unlocks:{playerStats:{[Ke.DEX]:12},combatArts:{[ft.SWAP]:1},weapons:{[Ae.IRON_SWORD]:1}},whenEquipped:{xpMods:{[ne.SWORD]:1.3}},whenMastered:{combatSkills:{[We.MYRMIDON_MASTER]:1}}},[Wt.SOLDIER]:{label:"Soldier",unlocks:{pickOne:[{type:mn.PlayerStat,options:[{stat:Ke.DEX,value:12},{stat:Ke.STR,value:12}]}],combatArts:{[ft.REPOSITION]:1},weapons:{[Ae.IRON_LANCE]:1}},whenEquipped:{xpMods:{[ne.LANCE]:1.3}},whenMastered:{combatSkills:{[We.SOLDIER_MASTER]:1}}},[Wt.FIGHTER]:{label:"Fighter",unlocks:{pickOne:[{type:mn.PlayerStat,options:[{stat:Ke.DEX,value:12},{stat:Ke.STR,value:12}]}],combatArts:{[ft.SHOVE]:1},weapons:{[Ae.IRON_AXE]:1,[Ae.IRON_GAUNTLETS]:1}},whenEquipped:{xpMods:{[ne.FISTS]:1.3,[ne.AXE]:1.3}},whenMastered:{combatSkills:{[We.FIGHTER_MASTER]:1}}},[Wt.RANGER]:{label:"Ranger",unlocks:{playerStats:{[Ke.DEX]:12},combatArts:{[ft.PULL_BACK]:1},weapons:{[Ae.IRON_BOW]:1}},whenEquipped:{xpMods:{[ne.BOW]:1.3}},whenMastered:{combatSkills:{[We.RANGER_MASTER]:1}}},[Wt.MONK]:{label:"Monk",canUseMagic:!0,unlocks:{playerStats:{[Ke.INT]:12},combatArts:{[ft.PULL_BACK]:1}},whenEquipped:{xpMods:{[ne.REASON]:1.3,[ne.FAITH]:1.3}},whenMastered:{combatSkills:{[We.MONK_MASTER]:1}}},[Wt.MERCENARY]:{label:"Mercenary",unlocks:{playerStats:{[Ke.DEX]:14},combatSkills:{[We.MERCENARY_THIEF_SKILL]:1},weapons:{[Ae.STEEL_SWORD]:1,[Ae.IRON_AXE]:1}},whenEquipped:{xpMods:{[ne.SWORD]:1.6,[ne.AXE]:1.3},msBonus:1},whenMastered:{combatSkills:{[We.VANTAGE]:1}}},[Wt.THIEF]:{label:"Thief",unlocks:{playerStats:{[Ke.DEX]:14},combatSkills:{[We.MERCENARY_THIEF_SKILL]:1},weapons:{[Ae.STEEL_SWORD]:1,[Ae.IRON_BOW]:1}},whenEquipped:{xpMods:{[ne.SWORD]:1.6,[ne.BOW]:1.3},playerSkills:{[on.LOCKPICKING]:zn.PROFICIENT},msBonus:1},whenMastered:{playerSkills:{[on.LOCKPICKING]:zn.PROFICIENT,[on.SLEIGHT_OF_HAND]:zn.PROFICIENT}}},[Wt.CAVALIER]:{label:"Cavalier",unlocks:{playerStats:{[Ke.DEX]:12,[Ke.WIS]:12},playerSkills:{[on.ANIMAL_HANDLING]:zn.PROFICIENT},weapons:{[Ae.STEEL_LANCE]:1,[Ae.PIKE]:1},pickOne:[{type:mn.Weapon,options:[Ae.IRON_SWORD,Ae.IRON_AXE,Ae.IRON_BOW]}]},whenEquipped:{xpMods:{[ne.LANCE]:1.6},xpMooch:{[ne.RIDING]:1},playerSkills:{[on.LOCKPICKING]:zn.PROFICIENT},msBonus:3},whenMastered:{playerSkills:{[on.LOCKPICKING]:zn.PROFICIENT},combatSkills:{[We.ANIMAL_WHISPERER]:1}}},[Wt.ARCHER]:{label:"Archer",unlocks:{playerStats:{[Ke.DEX]:14},weapons:{[Ae.STEEL_BOW]:1,[Ae.SHORT_BOW]:1,[Ae.IRON_LANCE]:1}},whenEquipped:{bonusRange:{[ne.BOW]:1},msBonus:1,xpMods:{[ne.BOW]:1.6,[ne.SWORD]:1.3}},whenMastered:{combatSkills:{[We.BULLSEYE]:1}}},[Wt.BRIGAND]:{label:"Brigand",unlocks:{hpBonus:1,playerStats:{[Ke.STR]:14},combatSkills:{[We.MERCENARY_THIEF_SKILL]:1},weapons:{[Ae.STEEL_AXE]:1,[Ae.HAND_AXE]:1,[Ae.STEEL_GAUNTLETS]:1}},whenEquipped:{msBonus:1,xpMods:{[ne.AXE]:1.6,[ne.FISTS]:1.3}},whenMastered:{combatSkills:{[We.DEATH_BLOW]:1}}},[Wt.ARMORED_KNIGHT]:{label:"Armored Knight",unlocks:{hpBonus:1,playerStats:{[Ke.STR]:12,[Ke.CON]:14},weapons:{[Ae.STEEL_AXE]:1,[Ae.STEEL_LANCE]:1,[Ae.HAMMER]:1,[Ae.IRON_LANCE]:1,[Ae.IRON_AXE]:1}},whenEquipped:{followUpBonus:-2,protectionBonus:2,xpMods:{[ne.AXE]:1.6,[ne.LANCE]:1.6},xpMooch:{[ne.HEAVY_ARMOR]:1}},whenMastered:{combatSkills:{[We.ARMORED_COMBAT]:1}}},[Wt.BRAWLER]:{label:"Brawler",unlocks:{pickOne:[{type:mn.PlayerStat,description:"Pick different stats per dropdown (e.g. if you pick 14 DEX in this dropdown, pick 12 STR in the other)",disableRandom:!0,options:[{stat:Ke.DEX,value:14},{stat:Ke.STR,value:14}]},{type:mn.PlayerStat,options:[{stat:Ke.DEX,value:12},{stat:Ke.STR,value:12}]}],hpBonus:1,combatSkills:{[We.MERCENARY_THIEF_SKILL]:1},weapons:{[Ae.STEEL_GAUNTLETS]:1,[Ae.CLOTH_GAUNTLETS]:1}},whenEquipped:{msBonus:1,xpMods:{[ne.FISTS]:1.6,[ne.AXE]:1.3}},whenMastered:{combatSkills:{[We.GRAPPLER]:1}}},[Wt.MAGE]:{label:"Mage",canUseMagic:!0,unlocks:{playerStats:{[Ke.INT]:14},pickOne:[{type:mn.Weapon,options:["DOUBLE_BASE_USES",Ae.FIRE,Ae.WIND,Ae.THUNDER,Ae.BLIZZARD]}]},whenEquipped:{xpMods:{[ne.REASON]:1.6,[ne.FAITH]:1.3}},whenMastered:{combatSkills:{[We.FIENDISH_BLOW]:1}}},[Wt.PRIEST]:{label:"Priest",canUseMagic:!0,unlocks:{playerStats:{[Ke.INT]:14},playerSkills:{[on.RELIGION]:zn.PROFICIENT}},whenEquipped:{xpMods:{[ne.FAITH]:1.6,[ne.REASON]:1.3}},whenMastered:{combatSkills:{[We.HEAL_PLUS]:1}}},[Wt.SWORDMASTER]:{label:"Swordmaster",unlocks:{hpBonus:2,playerStats:{[Ke.STR]:16,[Ke.DEX]:16},combatSkills:{},weapons:{[Ae.SILVER_SWORD]:1}},whenEquipped:{msBonus:1,bonusCrit:{[ne.SWORD]:2},bonusDamage:{[ne.SWORD]:[st.d2]},xpMods:{[ne.SWORD]:1.9,[ne.LANCE]:1.3,[ne.REASON]:1.3}},whenMastered:{combatSkills:{}}},[Wt.ASSASSIN]:{label:"Assassin",unlocks:{hpBonus:2,playerStats:{[Ke.STR]:14,[Ke.DEX]:18},combatSkills:{},weapons:{[Ae.SILVER_SWORD]:1,[Ae.STEEL_BOW]:1,[Ae.SHORT_BOW]:1}},whenEquipped:{msBonus:2,bonusDamage:{[ne.SWORD]:[st.d2]},xpMods:{[ne.SWORD]:1.9,[ne.BOW]:1.6}},whenMastered:{combatSkills:{}}},[Wt.PALADIN]:{label:"Paladin",unlocks:{hpBonus:3,playerStats:{[Ke.STR]:14,[Ke.CON]:12,[Ke.WIS]:14},combatSkills:{},weapons:{[Ae.SILVER_LANCE]:1}},whenEquipped:{msBonus:4,bonusDamage:{[ne.LANCE]:[st.d2]},xpMods:{[ne.LANCE]:1.9,[ne.RIDING]:1.6}},whenMastered:{combatSkills:{}}},[Wt.WARRIOR]:{label:"Warrior",unlocks:{hpBonus:3,playerStats:{[Ke.STR]:16,[Ke.CON]:12},combatSkills:{},weapons:{[Ae.SILVER_AXE]:1}},whenEquipped:{msBonus:1,bonusDamage:{[ne.AXE]:[st.d2]},bonusCrit:{[ne.AXE]:2},xpMods:{[ne.AXE]:1.9,[ne.RIDING]:1.3,[ne.HEAVY_ARMOR]:1.3}},whenMastered:{combatSkills:{}}},[Wt.FORTRESS_KNIGHT]:{label:"Fortress Knight",unlocks:{hpBonus:3,playerStats:{[Ke.STR]:16,[Ke.CON]:14},combatSkills:{},weapons:{[Ae.SILVER_AXE]:1}},whenEquipped:{protectionBonus:4,bonusDamage:{[ne.AXE]:[st.d2]},xpMods:{[ne.AXE]:1.9,[ne.RIDING]:1.3,[ne.HEAVY_ARMOR]:1.3}},whenMastered:{combatSkills:{}}},[Wt.WYVERN_RIDER]:{label:"Fortress Knight",unlocks:{hpBonus:2,playerStats:{[Ke.STR]:16,[Ke.WIS]:14},combatSkills:{},weapons:{[Ae.SILVER_AXE]:1,[Ae.IRON_LANCE]:1,[Ae.STEEL_LANCE]:1}},whenEquipped:{msBonus:3,bonusDamage:{[ne.AXE]:[st.d2]},xpMods:{[ne.AXE]:1.9,[ne.RIDING]:1.6,[ne.LANCE]:1.3}},whenMastered:{combatSkills:{}}},[Wt.PEGASUS_KNIGHT]:{label:"Pegasus Knight",unlocks:{hpBonus:2,playerStats:{[Ke.STR]:12,[Ke.DEX]:18,[Ke.WIS]:14},combatSkills:{},weapons:{[Ae.SILVER_LANCE]:1,[Ae.STEEL_SWORD]:1,[Ae.STEEL_LANCE]:1,[Ae.IRON_SWORD]:1,[Ae.IRON_LANCE]:1}},whenEquipped:{msBonus:3,bonusDamage:{[ne.LANCE]:[st.d2]},xpMods:{[ne.LANCE]:1.9,[ne.RIDING]:1.6,[ne.SWORD]:1.6}},whenMastered:{combatSkills:{}}},[Wt.SNIPER]:{label:"Sniper",unlocks:{hpBonus:2,playerStats:{[Ke.STR]:14,[Ke.DEX]:18},combatSkills:{},weapons:{[Ae.SILVER_BOW]:1,[Ae.IRON_LANCE]:1}},whenEquipped:{msBonus:1,bonusRange:{[ne.BOW]:1},bonusDamage:{[ne.BOW]:[st.d2]},xpMods:{[ne.BOW]:1.9,[ne.RIDING]:1.3,[ne.LANCE]:1.3}},whenMastered:{combatSkills:{}}},[Wt.GRAPPLER]:{label:"Grappler",unlocks:{hpBonus:3,playerStats:{[Ke.STR]:16,[Ke.DEX]:16,[Ke.CON]:12},combatSkills:{},weapons:{[Ae.SILVER_GAUNTLETS]:1,[Ae.IRON_AXE]:1,[Ae.STEEL_AXE]:1}},whenEquipped:{msBonus:2,bonusDamage:{[ne.FISTS]:[st.d2]},xpMods:{[ne.FISTS]:1.9,[ne.AXE]:1.6}},whenMastered:{combatSkills:{}}},[Wt.WARLOCK]:{label:"Warlock",canUseMagic:!0,unlocks:{hpBonus:1,playerStats:{[Ke.INT]:18},combatSkills:{}},whenEquipped:{bonusDamage:{[ne.REASON]:[st.d2]},xpMods:{[ne.REASON]:1.9,[ne.FAITH]:1.6}},whenMastered:{combatSkills:{}}},[Wt.BISHOP]:{label:"Bishop",canUseMagic:!0,unlocks:{hpBonus:1,playerStats:{[Ke.INT]:16,[Ke.CON]:12},combatSkills:{}},whenEquipped:{bonusDamage:{[ne.FAITH]:[st.d2]},xpMods:{[ne.FAITH]:1.9,[ne.REASON]:1.6}},whenMastered:{combatSkills:{}}}},Ul=Object.keys(Xt).reduce((n,e)=>(n[e]=Xt[e].label,n),{}),oy={2:new Set(Object.values(Wt)),4:new Set(Qg),6:new Set(Ia)},GL=n=>Object.keys(oy).reduce((e,t)=>n.some(i=>oy[t].has(i))?Math.max(parseInt(t),e):e,2),KL="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAWRSURBVHja7FtdiFVVFD5TglpRIIgyYcZ0LjqV2BRh2K8h6rlohMiED4KO+YPjHRsaCiKyghDyobyawpiDSg85Ug8q90bQy2Q+GOmMlQn3+JNlIEbRUCYWTWvXt2GxWGffmYtzzsycs+Bj333PPuvs/Z31t/edqRsYGPDSLDd5KZeMgIyAjICMgFTLOPthbUtznM+dRphH2I/+B4QthG/jmkBnV3eiFrCAsJj1HyesTpMLTCVMYf3JaYsBs0FCaoPgFNG/kpQVjEuIgHrRv0i4O00W4BMqrN9LeCCJ+SRBQIC2zL47SbgNJIx5Any0obAALy0EaBZwgWWHMU3AeBAQiu9/IfxEuHcsEHALoRWtlHloK8q104T5hOlD1DkiLWAboUeZ8CrF/zkBRjYoi++BzlFhAVcJ7YSHCH0s6Jm2WfF/K2fQviTu6YOudugeEQQEbJKabMcifbQltugwgoC9hOvMRUporY7tVTJLECcBRUyu4NDRhsX6grBixPg/QYLMFiF0aTIRc6g49A6bBYR46OeERmVM1MRdb/IFJT60RcSMFYSvMYcwbgswD3yacJwwF5Xc+4RJYpwx3TWsf63KM69FuBKXWYRTOEy5h/AZ4akIkoY1CP5AmEPYg/y+Grl8hRjXxRY2gbDcoXO5qBSlBb1JOAESjHQjdV5KMgs8T9jECp1nxPV/YCFW3op4bh2ueY5aYQHbwb5OeG4kpEHzlt7G5y8JrynPaGImPl0slBPDt8Q5ZcxS+L2RVwmbCXcmRUAripdtyNXLEA++U8ZNgC8b0+1HsdPAxjRgXD8WblNoQegyLvYIYQfhd1jBjwiE/nATYI6wOgiHka/fIZwl3I9Y8BHhbyVbFEU0t9awno2zn5uE75t7t4qK8iqIMW9+HcYXWO1QGAoZLgJMRH8Si+4F+1sRed/DxmWJpx9l+5h8SUll57DQBnFPE67JANgBq1qpVJydsJg8MkbAahRbGzgJqbM/j69taTY3v8F2ZLeKsX0oUz8dRI1QEikzV6OblUR+XyWKJU0KIM+PSN/Gejs6u7r/S6/8TNAEsCNoZxBmigAzG4XKzRGlLI/e4SDMMGB6AkWnL4gzOo869JmqsEUp0/thwfbQ5TLhG3uRE/Az8iyXuwj3QSmHreeLSgFi3zg3v6LI6SWxKSoAeZFdfFYQRZXDc7HwFqRSq9fCxKmBWoPgRShpw6JyrJTlgSeISI95FqQCYdZlUTFy1wlwTwgdbQ5XO4oizNQaG0GCjQmha/EyBtSyHygomxbNlK1bVJgF5RTXsTu/HD7nFX3yuXtQbR4byuRvxG+DZUywEXnZxxt5QnGJstiyvqjo2yK22mVl8c8KC8qhEj1W6yJuRCUoA97uKuPN5uWQ8n3XIDJM60g7EWpAjl7EyFhT5bDiZYe+TVUOXVYqmWNWUgTMR8q0k2yHO/QohyfcWr5y6Dwjsoo85LgEt8szy/sCZXisBGwE+7cTdnr//7D5rlIKF8Tb91E6R0m9eOuBsh+w8cek51dQJn+IOcVGgPHFT/DGW1FDeI59AJddDr0fRxy/aWn2OgLnTAThRXES0Ih9QOg4pCyyt8XT42MRVlCPTRXPMGVGgu8IwqZCXZxUFog6NPVRjORZGzIStMMOjxU/ZXavX+uhZxIEPEpYyDYlXDaj1X4CexDtIaWiLEKnPxoI6EVw3KFcO8jig+Y2Rg5EpMcZtR58xk3AH4Amf7GqUAuaZoHHHb4+KlxgMCW0J0jwxbXYJAkCTrFCyhMuUUkDAaeVQJhLkwVcwfmiFgDDNBBgraBRWECYxESSIuBXwsOsP5m5RioIMAeTd4jvvk8TAUZ+E/0LabOAy+LtJ2IBSf2tsPk98Tzr7/P0Y7Jhl7rsHydTLhkBGQEZARkBqZZ/BRgA5NNf3keNKAUAAAAASUVORK5CYII=",XL="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAZkSURBVHja7FtraFxFFN6tiRQtFCLi+0WzKK2SaEF/+IDUYLsrVmmsRatgfL+ytdJisb5Q7D9fuY3aSLVgoDWxpVLZFTGtgu0Pob6wVNz4o4KtgkTFttTGsn6nPUOPx7n37tzdu9ewO3CYu3fmzpzzzZnzmEnS5XI51chlSqrBSxOAJgBNAJoANHRp0S/S6XTdJr+3d+HJqFrffHvk93rNqd1+S8IL8AboT9BDjboFFoPuaNqABgdgGtuCyQsABGgHZR2/OZdsLv/MOH7bR3P+LwAgZlCVQP2On3aL5wtcwOa5Sq6g1xQATD4F9IIQ3BWA+8VzV6UfwWWOofL4ZwE8PANK1xUAEh7VEOgJflUEY56j+l8uXs1xmR9z5QUIz4LWRgUhqgZ8ALqVn7eCbnL8vkf9nhVhTy8RIPQSLnUBAIySqpu9R+qYxYocdhym1/Iu66gFZQZhLb+6G7w9EisAmOBKVH3VCI8xOlFdYmnKuzLPINB3Xxg75KpJrhqwWjLMBilVxepvIfvBz+1RrDp4OMgglNmtvhgLAMxcJ//cgImLEY2nXOnHxD5OCe1yBWE7qg/553wXLXDRAMMcIf1UROO5SDx7pEEMpAEzC+Yvizi2F2U7uQBgorVvteqD6TOJKlj958Srfh+GV1WgSWcTKS0oRjGoLgAYtdplaStUEAgtEmN4EkQV3MyFcDeEjPUyaMTyvqh4rQ0Aak8dtHTpYAoqZvV/BS2ztL8K2s/PLwXwcgKqeaCLLc1p0S9daw0I1RA/48Oxg2l73OY68e4HPiAxY/kZRDLE0+qaDao932npMua399h7yNhhKGCe5WIsP59+J9dfWdou4np/HDbAMNYBxqb77L082lqF8GdpY1dB4CT7F+VceG7xAwBtp6M637RxkFRTAIyQtAevV23vC+NzDzN0Ir83qzhWYexAwdb3Yrz1ou1BVn8S7j313UIVYKXiAoDKAqW6o6jW8M8BCE+MDoBmu/pmXrmnpUvDeAW2CUY71qHfpz65xN8UqNUcAF49sw0WgKFLVRdKS8fZEg8YTRDpskvkOCy0wAhnhP8StNTipbIiSv0xrlygX7iblQqgnxmEf7kjS5QWRQtkWYr2PwLsxso4k6EBoQU9luTlQp/vNqHvbMe8w0+NZ6m+3WL117ms/tGV0jclYTdDzFxBeIaZIjp7WHkN6cYOga4Cgzsdxvcb63WhIXtB5HkmQOdg/F+CxtfyOgdCvJc9YaW3gX5TwlOom+H8YZjfTQV9BgHnBQh/uxKe5snwWJ7yBt8xGbe7Ikz4ijTgvrtuoWzsGnIlHJ35MVuyxNwHyB1pg4e+t/HJDYFwBPQo+qxWfZ7kcDnNK563jEPa8Q7oFDVv4OrjuzP4DHLX4FvDY2EA0DHTK+xOaLJNIAPEDNB1vOe08DT5TDAx7sPEeahGeQwTFHkiVDbR4m4+adoTkJeULE37eFtsF+/mCn6p5ABAMQyANhYmysWpx1b6SAAIH8usUJ010Op0BwhPwdVm1/NDEYhlQm0Ar+BppKagnQFBUZ73OG2XrUKQjZyx2ezHHhUQ9alToGyI8AV1IEvzT+dMcl9ACJ9nO+LuBTi2bxdC7LYw18b5+RwRGvcEaEK/5fjL4/P+IOGvFYFVzqdvqwq/J4K8QEsFVn+C92VQn3FMTPnBR6CrQTdyPJ4LCKj6AoIZXTYL4ckm3VwNv1XFASE+fCozmBVbhbzCgRAvYl1R9DkV1Q5lM5ZUmunFEgeEaMIhFsQTMfyoz/V3yZJqa+E/EcLTPs5XI3zcJ0ISiLwwdlf4gDDmk2lK4U2UmXO5e0wcAAaBGJ4vQBgJSK9LQviTUsfuHo3wD0S5g0gcAAZhi9CEo3m9Jb0uqiO3banjN8eDaFsTJ481NYIBxlH677yfOiv3+Dmoi6++alb+I289ALBY/ZxPnG805DALv6PWfMTqBULKihCfL9+tikP4utsAZQ82onrXpNHy3F/dG3ydquB6bFLZACEo3R/+JF5lLDFBB8D6Ji4ektwCpAV7VTKUV7+9OIVPdAuIMigyN4rpF/MzZaHL6s1M3QHACv+VOv7XZXRS08bPyyP8rdGk1AAq61X+Tqs/lAQjiQDAWiCvvIaSWP0kNYDKa6ljf2tAqfLziXFBbkFSPQvc4gxQV5Lyppv/OdrgpQlAE4AmAI1d/hFgAC84sVsG8gvjAAAAAElFTkSuQmCC",QL="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAATqSURBVHja7FtZSFRRGL6mRfsKZhJRNCItZuZDCO0LMUEQRUWLSRZBD05Ji0HZkxARUWm99BAU2QatRBYttr5E0WKl4bRQKWQSZYtlqf2H+S/9HM6999x1bO788DHnXs6dc853/vNvdyahvb1d8bN0UnwucQLiBMQJ8LckiW6uzl/oFtlDAP0AqYBBgF6A/oCuiGpAJX46LgcOnpQjwCXZB1gj2XcXYEOsHYHtgIcGfb4BigGlsWgD3gHGASp0+hQCSgBvY9kIhnR2/9D/7gU6A7YAagCTNPqEEbw8AvzWeIZZ5WbAJkBCRyUgC3AFVfgy4JZO36uCe3r24QLgGWAHjtG7oxGQhe5rMhqwdQb9Twnu6dmGH6hRDwDTAS8AOR2FAHXxfQB7AWsBRinmc8G9WoNnVBKuAVIAp50gwS4BI7nFF0o+Vw9oFNgGRYKEeRwJqdEk4BwuPoxqb6a48Mbk4lVpAuQBniAJ5wFdokEAO+sBA9emJx9J22zoWwcoQsKzMcr0lIAgoIAYrwqbBLy38PwlQDm2VwLGe0lAqURgYyTfHTDAmwFtuI79XhGQS1T/isnzy59lu1KHNkDBozDHbQISuCztsY3Jf3UoBqEB1Ba3CZgIGEOuPzhEQJNDZDA7kOYmAUu5a6YNoy1O9hdpt1r8DhYDzObuLXaLANZ3LndvIKAKcJF4BSsaYOY4DEdVf4Leg7f+S9wigKl+so5bLEW/zFLaGZJRnSq/JV1vLRpdlnBlaGSG6Wa00kxJLJe7/gI4gaocwLPHPpcjDgM2Aho0vu8PaTfrjBtAcoN4zUh+imMzGYHhcTfyzEzs4ygB1PjdxUEbBJMtRrIYCZl4JqsNNOCHxpijAGeJ2y3DnOOlICe5T0hgBOx2+ghQtT6gsbNhjNPn465mop8OCPq2aLQpmeriWzANDgkWr2aXq7jj4qgNCHLBx1GD/meIxwgo4iJnK1cO08o1WnD86wZjHge84gh0hYCj3PnVI6GcPM/vyjcdDaD9iyQWr2BIfNysFsgSQNk8ZuLYlJC2npvkNYD2PWJivBNuENCLnP/7inFtn0oN2b0gxg2iZIgehyFk8jcEhRM9YbHBTWznyKxPhgBmyDpj20rZ+jVpT9Nwg5SMKaRdaWE8dY59ce62CcgjwYoVAq6R9jCNPjQQmqpRNTJDwGdsj7VLQDIh4JDFDI5qwHQukBJpwFCbBLSRjcqzS8BWov7lFhOWRu58i4RGgoNJu97imGqJbLKRO+xkYPlVa3wPDZIVCWMEpyctAo8TslFsYc9VCKpXpgigpS6ru0+/K0SKKnphcRj7ltkcs4x4nwKzBNDd/2nSF+tNKE3CCKY5sHgFNSDMRZXSBNAgYhvgk+KcePnDxD0a7tUwG2QqP0GJvKff6cFEkyTDa7PCkrZsQZRoSADb8UUuL7onaffg3KJTwo5WvlPpsNPSn7T7RWsS0SSAvtRM8SMBVAPS/UgAdYkD/EhAwO8aQH/dke03AgKcBrC8vbefCAgK4pFMPxMglbvHCgHM/U0V3F/ARYcxS8AykmUyNCn/Xo8v83oySVEgoFTx8NfgHY2AFUqkzM4kAz/ValAVfrKk6FgsEjALcFCyL3vvfzvWCGA1/vVKpNLcHZCoRKrMiRgDtKItYC8/73g1qYT4P0d9LnEC4gTECfC3/BVgAJ2IChDHaGv1AAAAAElFTkSuQmCC",YL="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAT4SURBVHja7FtbbIxBFP63qmhd2tKympDyb0LcNjQeiHgQDyseCCkS94fyQBOJ4EVEJB6El60QJEREXOKaiCXhScKLUEWCLnEPmrqre2smzqTHZG7/7r/bWf+e5GRm/7n8c745c+bMmX9DHR0dTpCpwAk45QHIAxBwKjStWLe81s/39iX8kXtWTLjNrxfs3X/cag04TXgSJ/wrSAOxBEYDMxpLuA+kgQCgkvAz9LsHpBOCAICr0YxA7gJ3/gcAhhDublAvInjWSvi9h3dF/Bp7gY9q/YTw2TSWwAtDI7id8APCK2xcAjGDrSwied4K/kFfTfvpNi6BpAdDxjSgWeAImbQfbrsRHJKiBjAvcJTGgyyB/EPbAGACVGnqhQl/4bSG0msDDQijfMhWDeilKBsJM/hcUPbGwE+oQPn+NgEQMvTjR0B6TVB22wCAYkk+ZxyhKWkCYK0GhAV+vQqAG4KyJsLtMCZXYQQZldkEQE+U/yWp05twFIxlo6D8M3oeM3jnAJsAKEX535I6UQjANCpA8gJAL1sBkNESTkgR3dQA8NVWDdCtR7pLzIf8OUW9S5xbzdMPW41ghaY8CjaAd4GpkKcIF8HvR6hstaCfbyg/1iYASjTly5Chwx7gecKzCU9DM5xUaMA7W+MBFYo+QwgA2fofhvLNCi3AMYPuftgBvwDoh/KfuLJVSP1vStrjmU0o7ADf91BbAIgqBl0vEY7SB0FfPACuou+0Q2iFPghfJACgGTjCCcDHAL5w2sNiC0nULoHaxTwa36wAEOU8QebPu5rACVP9wQJBEmj9uwrX2AoNWMgN/AIENWo5B0l07dUuWQrtkqXBlkcc0slgZDu6CoDeaKbo7M5AZZsIn4BBOhrPrkXjWM0Q2I84aMYs5+9VW5cYwQUSY0eJ3vXNRTNfjHYD3rNTAVAvEL4BLacN6USHCtKc/a0C9eRBOIR+j5P01SYB4CUIKyIG+ETQgqwDsB8ckTaJ28roruQ8L3NwKA2C9KSiXwr4GchvyzYA80C9Ke121BHaBLc7iOin5HmzZhzrUL/xbAEwhvARWHd0dtdq6icNjtElgm1U15YB1IDcZjfTAJQh4SltMWzHBIlIDlGlKWoAb3zjXmXyCsAup/Pi4grhY2nuIgMhLU+zn3rkKa7MFADjUVCDCj/HQ1tXM6OVaQKAt8UdjofrMy+O0A000JYUhOeph9MZ25fFEyIGdgCfQagm3HM8XJt59QRbUpidiIFBrBTYDBeESniwM/VddRw2AYBGi6+i51hNyyXGz8304LIBAIsG3+IOPTiY0UfiO8Qc/fcCVgMQRu7vQUUUqUrhPM3MZQCWEu4G6n9QEc6qkgRFKK3JZQCWI3eZP/MPFjhEmDZDWuOY3RRZBwA7r9Ooz3pBebVmqzxK+DEXAMkZAFx0QlwviQaVavwFen+4UdCf9QC4yIjRdXxYUq/aoK+jyBbEM7Et+g0AXa+X0UC3O/JP4PlA6FRBHaoFi53OG2d6ECuyFQAqPL3qYl+JXSS8x4d+r0Hwhb3jup8g+AVAEQjPZvUp4UWaNve5302a0951FI/wDQS/APgBxq4FZr7G4NyA3eK3GgDorTD9vGaf8/dbolPOv1flKVOhj0vgALAp7URnd2oov2vqUxDqcvEsICMaTjuX6X0+mxqQCtWCG5zsqgGE8n+dDTjlAcgDEHD6I8AAvLPstVX1hNMAAAAASUVORK5CYII=",JL="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAV9SURBVHja7FtriFVVFN73GlpholJkM1JZo2WIo1JE9aNIKo5ilJY46Y8wDMLGH6bQUNhjpAii4E5aRBhET6PSUq+PH4n4R+mlCaEzhgiJ0WhlakxN3dZivk2r3d77nHPnnDnneu+Cj7PvnP1a31lr77X2OVOoVCqqnqWo6lwaBDQIqHM5L0qlhxfPT2Psiwg7CX2EOwhnkh7g9XXrkyEgJZlEmIHyRMI356oLFPM8v7QHGEbYRChZ7n0pyranX0LbYuZrwCDkakKAchmwSQuhR/zmNu0oTyAcrlULOCSUDoSygWEVZSjcYtQtp6n8UC2CywjdULDdYwElR9uaXwTZtFdV0a7DcIuasIClILVsTP4FwuUo7yV8RfgZKBDGALwtTkW9ly1Wsgxu9UoeCRhFeJFwvtjbNQl/EJZ42p7E9QuPi3SL3zsIB/PmAqcIK4yFrSWhvuXusZHwfV7XgDWElYQKlF+TQJ9b0Rf3+RjhXsKfeV4E2Q3mYcJ3EtoG0deDhLvQFyv+Esq53wU+gZ+yzHTUuYHQSXiK0OqoMw3XV2H6NRUHvAYLcCm/mzBcbHk3EvYZ9cbhur0W44BfcG2y3HtGKM8ygrDaUq8Z1zO1SIAS22G1idS0cyESbLFsh7akaLvF/0ei/F0tErCf0O+I6bsMEjjtXWvZAVh+IvxQi8nQCSh2j8jupMwh8FnbX4SPcJVW86ggJ/cuMBow5Q1PtscKv0dYbyivjLrrHG6VKQGs7K2YHJ/s9CJIMWWzMPV2hyWYEhjnAbsdaTIHRFuQND0ikq1UXeBm+G8rVmkprSHnAQoTDhDe2oRd4oMI5wGBhSyFcdrUf4/bErWA+5GyDkOmJxezGQ7T5HqzhZlvhunPJVyjBk6HZ2MX0MqfJcxynAcEYpweo87EuKF3XAt4H5OWistUNcA9U/jJ3034FOQtAGzCyt+n3OeH0j1miTloa3grzTVgDwYtG0/YPPdTDhKuAoku4fxhskf5kerfYzVzDl2Y2/4sdoEeQYDvNdJRmKjtiGwtMr+jnvYr87oNFg03mR5Sv9P43YessBKyO6zKKwG3i3IBq/ADEa1GR429IcpvcawFmRMwHX6r/bwCEt4OsQR5xvdtyBglSx4RJBEQJUHAaqE8b2eLhCXMTaB/+cKky1iES1kTMAVPooKjMJZ3CV+jPNzT9rDDGkyZhCufHD8hiNBWMCUrAvgJf4gr772fi3v6eHuMp/0xUT7pqXdAEPubcANtBR9jDkNKgFb+Wjz95cZ9fWw91tPHaVH+PcKYBywhto7+qiahWgKeVgMnvywzQ57gYC3At4toEjjlfnaoCCiJ/bjLMH2z3+OefqTSv4ZYm3I8YR7/HZSfBFIjgOs+Z4SirmytKUJ/vTEt4ErH3xeLNYcDrOfjuEMxRj1musOSiNik2WLmPgJOe+odCSGA3zveIkh4HNFoIUkCHhLZW5jyLNdHIOBsTGu9zXPPJIHzkSVJEnAQ+zb7/pyQuhy0jEf5R0+9UxHJ0E/y0pDIj0m4CYshJ1SHkiRgFwbvVP8/v1OeGN0X4FRE8tPvqVeOEf/3I6m6Qg18gzhkyZCNgB4V/QuPvhjpdi6zQS2XiUl2x2gXFgjJE6emPBPQ4TBd19hRtyv5ZnhFXgm4gLDQke/bZHSMvuWHlG0YK3cETDVi/zALGBGTAO0m49TgPrpIfRGMorxpAWEHG30qpY+pkyRgr/DVz2IScGGE+ttw5dT7zaQmneTLUf0dzwLEDWEySpQviVB/A6xgY14tQJPAb32ivM5uFuXrItTfp1L4TijLf5kZH5MAlfc1oJpdQ8uEeiRArvwXZzWJLP9naCvihr9VSt8ARpFC419n61waBDQIqHP5R4ABABvFKYOY4K8BAAAAAElFTkSuQmCC",ZL="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAY3SURBVHja7FtviBVVFJ+3WCkRSB+CiMJoX70NK1eiTHSJymgfZlQYlMniZiXSTn3pUxRBn6J/NA+M3HL7a8FK1IL7DBGMLSUtlLBQ3pRBhtWXIon+mL1+R8+ts5c7796ZN/PmseOFw5mZd+fOOb97zrnn3LtbajabXpFbj1fwdhqAogMwy9ahVCpl9vH716zsAzs+OjYeZvUNW4yblRfyUJ6Q3QT6GVTtWgvIsFVAi4ocAy4T1jBYRACk0vOKCMCCiOuZDwBMframdH/RLICUP1MCAFDOKhIAVxlWoxsKAQBm+hKwBw0/jeC33k7LU7JlSmlkglDsQrC7mWwBbzPoGWSH+zuRCSYGAEpdALYX9DiEfTWiD83oE6x43KRrioAAbcX4/0SMPwS2HL+vTApAOy5wjPkrECTQFednDdBqoXwd5INqhvEeIDBBqi5YCpoAHTIlSng2CfYaaG5uLgAh1oKN8i0JTkqXyZ9FN/W8LosevEvgKJ8/hN8qWmYYiN/lOKH222K8u7vjLqDNRFQq60O4WsR7gQBqHP3uMvQxASFbDe/57cSANFYBk4I0S+Uo5bk1xPWPpg54n6ymzG5jakE3LIMN7Z4souJQ43+pARbZGEhaST7WnofdAEBZXFOQWwHBTji89524PmDrjDGPgJbyN+Qqk/t+gPL/EALG2dj4M8IabM1nEHr52s/NAjADl4tAlrSm/xXA/eDamc3eF9nj3DxdYERE46T+eCTuCxQcwd7n29W5AADkzxYfD2K+exHYer7tw/0WUNyS+GnhEp1PhCDwYrBPOMGpOihNA60APRlRD5Ag74FexHhTjkB+DraQl9wwSR7QThC8skUeoAta4YxxCT+iQudD0NcgsoY+pjtBt6M/pbiPQKljlqHfUQDYltIsACCBqUjZbVH+ai5sZnPfp9iH9X7kjreCngUNgwYoE7TElh3MEy+H7QDQ4KXvlxbKny+U38Cp8YmIwEZgfkAk0uu6lmfo7YDXZutx9LXeiHTXZnYvi5mfpjzNLoiWsdv4hEiCUeWxqap8ocVqcDxKDtckqcdR+QZ4Uw6Kj29rBQD6LmKT/kMqz6XyJKfMAS9nX+HZlAaEiu4PWZSpS5diYJuGFD2VZbCszcDDLfrew/xd9PuMhZsPth10C+h19nWV2VGAnFDKslJ1dtOhFlbgR2SmTlaQ5dGYEuQ58Wyjd+oQZBiCj8mKUpTHxKuitqBxbuTNEpcmrTTcuKlNC2gjw/tvs0PM/nWgnZryciZDLaVWpj0/q1lydYEwYb4fcqCidinzj1r5szRdAf45CXQL0wRgL/MlMQT4W7v/gvm5Fquh5fB7BmKOtv8YJ06lGgQPMq8IoWztW08cevJshl7E/j8/Iwvbh76/8+P+OLOJMS4WrldPEwBVec2J4QaHKchqO7oqYtfVc14WR4TAMqqviaMM2jJD/GgfAMwIme8+rQS2tTE9bvDSVuNZmhTrtdr4pHxhlzD/YX51m+M314ncINUYQO0x5tdDuGsc+o+DvtFNnqP9MrYqii2fgrZ4p7a3ZWG1luWbcqkO2aL6uap8PpNyWOToJPQABPvLItQqsLc8h+1rw7vq3KDf5ZhMyPYG+g+5lsNxM0Gf9/KupbrdwXXeZpOPdfDJMUG5xH7H/oMcLB/NbEeI/WqAQViHD7/k8I5KdePsGg2y1dRsmyysvBqbAPsp0y0xfGAPbVqooMOmZ2vLQffF+My9Npdhi9oqlK+a9hmy3BLr9f7fnj55XmebsTQaf9cXq9HJ9DnpllgaZ4PSBEOO/qMQ6HCKSp8BtorpJvEtK+iZA6AB4YtMbA/vA9L5/tGEis/jMUnx8+Io3nEAWGAqr2/mWSK6QmRlvmtywmYeiCSKCir6yxFaVXZE/cFE7gAYFKHd4PXe9AMUW3ALNP+mlWZznNOjrgEgImAazxEMQdVPEtW7EgBDtjbNEjTlY2eN7QDQ6T+Tu4MVHeGgqVqQhfKZ5gEpuUOZaZJ3j8ppK9htFqDS6UCsDoFhH2DmWoCh2vM8xwPWGWEBom0Q19vzEiJPACaY04nRm3kJkZsLsBtQinwU5r8wq2907X+NCSs4mKcAeQNABc1veQpQOv3P0wVvhQfgXwEGAIsGzKGtEheoAAAAAElFTkSuQmCC",xL="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAZ7SURBVHja7FtrbBRVFL7bpZSHyiuN1OKLrkajJaAx6g8RE0ndGgNqTOOjoYJGCOkqhMT4Q2I0/jBqRIqiiUKM+sdIolG6BFGj8UFM0FIURZYUokUEwa5o7VK29Rz73fT0emc7s7udnWk9zZeZznPPd88595wzM5H+/n41lmVcrp0rlt6usipKf9li3a8MYDk9Ukpt3LTF0w/yS/heEwhRQgUQbAvIUyIEJ7+ajP36vmnCX6OFAG1N5YSMZX8fYSq51ASxbQa511Fa/hp2Alj5SVifhJG1kXAm4Vxj21xCO2F32C1gIpQvh5LfOpBwIZbTsDxJWAi87rc1FIsANu+/ofgUgNeTBgkHCU1CeVNmEt4gtIXRAv4ksD9fRrgA22oJ6zDKLCfI53+g5RJx3nQs93NMIDxBWEVI+TU1FVN+JnxKOB+YT3gavq/lRcK9hNdgEVouAmoIK/2cm91KFFPYcHIIo6hJaCRsN0jYCyIaCAlsiwnUYRkYAlj58QhwyiUJ92HJMsdCgpYkRj4ptmkSAkFAGc3d/YTxhInZfxPjochBwq2ETzA7XEP4OsfI1hM+BsmMi4NAQJmYv88iVP9X/exwgZEVaxEjm8xBArtLtzFdlpSAiFCel9UIUl4lYfi6EwmdhFewPjsIBPQJC6gGGnLM47mkBdYwHAkfBskCuKhJk5lXEGYRquj/SsLaPO+nA14KyvPcHzeO2StS6tIHQfj4L8jSqkSEfi/Pe6agtI76rYRmsT/uZyrsdho8gvR0pthWh9GqyZOEekHCehARE7EicJlgEqgx5us9hGfzvH+9UDgOl4gJUgKXCm/GD+4WtT9XgasJXajm5mPW8BIcl1mC74ag1gI7MHJvGtu5ArwHic/vhF2EV12mtJtwnu+SbzF0FAXNQpSvtuteQVgKs3ZjzluN8ze6rD1KWg3uQPY2D0SkHY5rNvzbJjcL82c8QLg/LOVwG4g4W6S+ZhRn5b9wyPE5AF6P9YcIL2D9ZWOKDHw/IIOZIiHq++cIx7C/ErFhkUFMqwiILThfTpHxsBBgm+9XI4FqAhFnwF0WwRqS4tiEUT+kBAmxMBKgJYsOUB0qRCbhHcI+oVjcQt6QAipH6R14ArR8Q0o0WHoJyxwyv7g4NoYuUmgJ4Abp88Z0x7INeYAtMJoBcIXhJoEnYBbhQaTL7Uaer0f8JsLVlhlDB8ZTyAm0PGbUJAVJIW1x/hFPIbKXG00UlkvQP5DCD0seFoHvRyj7FuFyNdA+j6mh/cGVyCi1BUwDCctLTQD/kLuVchWZviM8TnhbNFnYs3nOf59wHuFJWIiM+AndIaJj19BiAeFSJEnvGkT57gLfozvUleOYnThmDka5z5L+JkW22CpmA50TaOlGsqWKWS0WGgO2qMEHGZ+BjN8wz7NfX+uguGymtliaIUmHYLdLDW2wNgchCJ7A9HQd3KISI/WVhz5DytIscRKZICWCQIAncWilHxfre1wcnxRWMDtUBFiEm59zHchwEun/N4adAC6W5PtC+1zWGKOCAJ7SlohK0i0BajQQEEGGVwGf/gjbD7o4t8rIRxaEkYAm0QSR0dwNAbXG/41hI2AefF+J7pF+YnTSxfl3WgiYHiYC2O+5i5w2av79Ls3/Lsv2xrAQEEeFyPKokQEO+zSIsoI78K6C7if0FhIM/SYgKubwlEhrm40EJ9fvdUp/a1QebTO/CWg0Kj09+nGXBFxpKLnBsBzPr9WM83n0n9GKkvkmkequtxRFTnKLkQyxK52G4geC7gIc9WfAdx9RA43R7RhRLqhWubjGDXR2L7AOVSaTehjXqPY6qH5ZgCxdX8KyTQ0+aV6jlKuPEmrF6OuHJ52i8uT1ycr5CVXJCDDLVvkqLI/kZpcdKK38AaOnwC32q2AJ0aC5gNm4kL28DzD6XmWb8X8nlOflqUC5APn7cnSKphqj9iVhsUvTV4gZKVzrsLGPs0d+L/GY8vgpzkgTwN2h29TA+wJa+I3T3Uhcuj1e7yfCHxhpKRko3+OBUF8IYOU74L/aCo7kqbwmwKlc1h9pBMYCKlHvd6jBzjGvry1A+c/h452W/Rll/0CjZAScw9GafJ4DLX8HsJPiQWuB1+yAiZvBuzffC44kAVMQmNgkuU1+vAjXPIQYYo50v3L+Uq1kBLRj2VXEa6bRQeqxEBA4C+gagWv2QNlMsS4YGevfDpepMS7/EzDWCfhHgAEAox6bP0M8yXUAAAAASUVORK5CYII=",$L="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAZESURBVHja7FtpiBxFFJ4xGlciiOKFIKLuqAjGqDHqiv6JRmdEWeOBMYaYBDcmYVYMkSiLAf2hMboqO4o6IZvEBEWDRNRsu4oHgkc8ULOCx673j3hh4m7YxCMZv6dfQdFUd1XvdG/P0lvwqJruV13vffXq1XvVPflarZbLctkvl/GyvytjPp+PffCb5l0zCdXe1Ws37Yn72a6WnbYFdILuyfISmA66fEwsgYRK87gTzCoAcIDNpnaWLGCi1p6QRQCO0NqHZxGASQHtcQvICgD62IdlEYDTtPbBWY8DjsoUANj3D0R1vXbp6LQAyLtmTZINMmD5GtlbzRLgFMDjBdw/iEnQIt8t4W9Hv4E6gJUJPUGe4ayXK2Pb/GuLqHpA74FagkCAEF2oyqIQeEo+YORe0TJUFdSBvr9pfeV57QTIC1FeZDsbVKp2P+vFnQypcPVc0DsYMAgEjwAUCUYXhS87jtMGmoW+Haj7QDO1vv0OykdKsqIugR5tBteB5ptA4Ix1GR4j5v0qqFeWEpfTbvYpUvBZoPMMfWX2KwHKiyxz1ASI5bnqFTUdvgq0GXQJ6EbQMGiJgW+TD4CBMPOVou5BoUdRzQatBB2jsbwf0LWiKf8K6OrEdgHOVitnUMpiCHyHgXW2LiD6FcKU942xD7QBzWO1caQsMMz+XSKDpvwV6Duc2C6gDdyE6nlaQo0Dv8R7M+gsJcNbhuuddXr1x6UJ2gs6H8/bynvXoXpKRNOU/1P1jX0X8B+KmkAAfUZzF+WfhEBzLQpORTUIvq9CeCRtfhs0lSCcCTo1TPkoAIw4EOJJbiu9vgjyIuhbKj9gU55FrGaLZZy/UC0E/cFnfwp6mmN6JuUTXwKGWerx7e9Gj+3rI5bzMn+WbD4C/PNQdevbrR5n+MuoHotTEE/7bVP+OFTrtUtdDsdi62kFVuVTyQV0EGgRYTO/1ZcAifIeY4EgZ/gQ6JA4lU8iGbqTtUSBKw2KrKLZi/IfMuytsi0gbGEQ5S/3MZrMaXVDAjA3ZOYvkG2RO4Y4tWmYyYVC0uY1tRz8lnCi7l/iFDiWFyMQeAJNVGZPPPISKLbGx7aMnruKe1Xf8hFQqnjOWcwFyrpPYQT6HOhKuQc+6dPeEBZA5V+n0IOgGQblpZyk9A1zJawLBoAEhAd4qRzmZ0YNAAhxDtfvhTTtVgj7VgC7OgT9PuSRO4OyOQEBdJu2BMTP9IOmpAIAlRdlp1D56RDwjZAufaxPD+EpaMlT0G5T0UAQoN6tB4R6LEBCX/V2Z6lF+Ryjt5yWuZnKpcoRWrZcHYQmRqSjDsCXKuiSuN+BX2L3NwUAzNjSgDOEMsPoikPcofN8kcYu8IGKkiHM7w4C74KSC5jidqK9SPP0RW3dzxyBLJ+PugVAIRn0B+00x6XPN1TWo8Jq1pu57uXcoM/RB6kxfwZtSysOkK3oZk0pFxBE0ZJ4cG3WxewLEcdWAGwLO6VOOg7woh5CGvrmXMELAGBDmoFQr7YnRwWhRWtPjrgFN2ugb04NAB5EVHwz4qLAkT6lJ/OFSdTZl8xwV9rJkBcVAGZ3B2i/D+W1qABU6hU+rhMh5dAKtldb4L0V1YMBt9vQf7WD+ffbHOdofyipFLrYIvwpqFaFsDwGnmmWsS5j/UgjnQdsBA2JGTM7DCo/gY7P/X/m/7F2XVJdOfWV/OITy1hy0LKHkWVjnAfAFIeguIAg0Z28mXkmgG+nyvjAL7nBGcqT495HDs7zBsb+3eD/tdFOhJbTClZYrMBUXGP5Ds7+7Q13JCZWQE8uLy0WO3TRQ959DrMvb4fEhzwc1+zHbQFSOhnTuxxzb9fa/1iUl9Pgu+lD7o1T4FgB4Nuidpec3geALZgR5eUzmhUYY7BhASAIHoMj9YFEUBlysQCavoD6mi1GaAgACEKJS6HMV1omHnnVvps/d4SkvE/w0GVOErIm+ZWYClfXBIFgmfky0+3/ngXAto8pAFTer4HQYmDboU6LDMqr5bMc93uTkjPR7wTpD9SXHScHsP0d8gj5uuT+JGVM/ENJKLCWy2FdAMuwoY9keReBbklavliywZEWmPqPqCZC4dg/lR0rf5trYmibWkkbADH/X9IUIO2/zX0HeiHLABQtu0DiJT/+7/GMl38FGADqf3loyC6VxAAAAABJRU5ErkJggg==",e7="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAXVSURBVHja7FtriFVVFN5jD6Gw+RFlltljJiwUnYSBgaQs7DFqDJlMMan5SiyaCVPLMCvogUVU3onCR0OaPTQmEO3esKTUYigkJ3vjZSgsJwijiF7i3NtanO8wa/acM+e57zmXOws+zt1nztlnr2+vvfZea++pKhaLqpJlhKpwGSZgmIAKl1O9Hli6qNnUt6tx/cPUBzZ27IhOQIxyHmEGYSphMqGO0E2oJxRSawERZRzhbig+CfcKUHw5YUuSypskoJHQiqsteUKGsNWk2SdNwFWENZriOUI7ruXnBH3KmYT1hIViZuEeb/NQnP3Bx+U+DXKv7ycsFvVxj1/moTzPAu8STi9nArjH9xKmoPwf4Wr0vJdMJJyF2aAsCXic0EEYifJnhLMJB3y+XycsqOwIYOUfFmVW/jrCXwHqGBOAgAYgFQTcF4Py0gLGeTzXROgCOgmjkpwFeHp7QZvbZ4VQnmU8rlM8nmsRv2djyN1MKCZhARmtzM7u15DfrvXRDiZ8jnZvJmEXoarUBGS0RuciLG5axe9TCEtcvpdFG3m5/ChhhyChpZRDoFZrtPI51Uk5F/6jWSOSZQNI+Bw+Qa4kvyLcRvgG5R7CasJThDeiDgW/BDyglZ/F+A/S4xmPZ+oBKd0IpHrFvYcIE+AHGuAcjQ4BdjqLtHuHA3wjqynPvX074QTKfYRVCJL6xHPcszdoytsyP2AHRCLgSoxTKU8T5vl4/4gw53Y4rmWE7YQfcP91WNSdhAtBhMKz81zq/R3W0lUKAg4RNmm9MwYN/Ylwh0s9WTHW2xx8xoe4finu9YKIFWKoXTsECSWxAF7fLyXUoEG/aURsI3yvOS6ZC3gSva/LesQR7zj87TnCTljBI2lZCv+IsTqWcBfhI22WyMLkpcPjcfqYS33fEqbDqzvJbLw/jXBFmmKBfwibYZoN2lqgVnN4bPYnQ7atIHp/ZlrD4U8xTTnF/vkYskDsLI+lmQCpLBMxGUkO9hsrY6i3gABoWtpTYnJ9MCvmOo+I4ZVPqwWYFKPJ1HIgwE6u5iuVAOWyjkgtAdWI+spCTFnA84RrKpkAXsLGme4+rZwIsPf9amKqbzFC5y0OiZTUWkBOC46itG+tyAHwmuAVwjlpJyCP3opKwq2Ei7R7nJw5GhcRpgjIiOsZEdom9x+WICJlGSmI4ITK1DRawHewgnUuz1yqrCSom6/g/Qf7UMVy9PglysoG5wURXD6A8PoJZe1NpmIhxD1UVO4JUc4Oc7ptmcPfWlV/Fvp9JE8U6ntTWZsqLdrq8HJlnU3Yp6zdqupSEDDCYYza0oWsjq1QVvPiExxmixo1MInKCt6oBqe+C4KIewh/an+vR2RqnACe6z8YgoSd4ncjvPhrysrr28fPOPPL54g4NfaFcJw55BmKHuHyyw4WdgJ1GQ+HC+jVZ5S1eaG07NAah3fmamU+XfKSKHOy80HCxgDtuFgrb1A+zyFFJYDj/x705s+E+4XyOTV4K42FU98THepixbdhGd0ToA1j1eBtsozfl+OwgLWYithTX6CsMz9tamBKXI/m2FreEuUX0et/h2jDOjVwo7Q9SOgcR0aI9+eaYAXNYmyzzHBJaHRq5bDK36T1/mEVcM8yrmlwoRq8S/P2ENkczhT/i99HQyo/CmsDu/f7MCMkshBiBaYjYLFls8c7x3A9FFJ5XmidL+7x5s0nQSuKMynKJCzAkOAV216P5w9iNdgbQvlOTXneq+wI02gTR2X3+HzuIPxFEAsYjXXE9Zryq9MWC/gR20K+9vl8I2YYW3nee7g3ivKmLCDIGuK4sk6A+Iku5QkVXuuvUDEcs03SAk5iGTzUNneT6t9wtWUTHG4sZ4yTtACFcNipU/j4y0otzs8pA/sDSRMgpRqzyALVn1AtwFfweYH3THw0aQL4RNgtyjoVUicWNd1YXnNs8IvJBiRNwG4ERqzwqwhht5tWOk0ETILpJ/YvNFXD/ztc4TJMQKUT8L8AAwD3fjcM6Pez0QAAAABJRU5ErkJggg==",t7="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAYDSURBVHja7FtriBxFEJ41EsW3JuILo8Y9fJzJqWAiGhX0fmQ2voOHRtlIIh6S3BgEUSOiiGhEDcmuFzAHJ4qeQUV/GG+DRkV/JD+Mj6g/lF1OIopeYiBqvFw0yVoNX2PRds90994+4k7Bx8zO9ExXfV1dXV1zl6lWq0E7yyFBm0tKQEpASkBKQEpASkAby6G6i3cv6mlE37cSegl7CP2Ed+vd4drB1+0IaJDxr7HfcwnXNYKEVpkCvcrvDGFJO8WA/Zpre9uJAJ2rv9EyQbABsopQJswjHEbYSBhqZQKOIewjjNXQ15GEP3Eu9uDrAVWOIkwi/FZDX6cQziRsnogpMBku2+mpzHGEFwi7Ce8TsjFtLyVsJewiPEA43rPPCwkvT1QMWEnogmKuEhI+E6kFfnfD9QuMiMkwfICwiTAd11cQtuAdrlLC+/tqJeAIQh5s/uWohOh8mBmk3itjKozDVe/CcshFPPuOjSEaKRIiEOxNgEhOjia85Nh5ARAyAne+BcdAkwMELDY8SOjBcQTxoOBBgvSC62sJggsJ2wmfOo58H1NCZH2/s/tvMeW4VODuFXZtEOSHIKGCZ21kA2EHYRHhTV8PEB1/4GD8DDbywgVzivHS0A7c5+7aoRgfwIAcayvefaKlLlXErdB3CsgHv3cgYCUb+SihbQT3z1i2lV7zjIM+Xym2eBHwocPod2MUc3XIWSK8+w4HL9g6EQTYJiRLcXzaou10y2vq1HkeQXGhpU7f1UKADFI/WHZ2M+HXhARkFZIcXVBah+dXxzw/gIz0GkudflFssSaAP7DdoqMzCFMR4U35wrfwEpEVXqy5PwsG9sXUBcbQptuSgFGDTYkEdHjO07cN19dDgWsNuYCUh7BBCmNI2Oigz3iSTSYCpjnO/0lw3w2GvEAYtcZwX5fADCGQztPcF172iQcJp7oQcJrjyIuMbXZM9A4sljouDxMOEJ403M+3YkFkRHOtE65fcnzXNsI3hJmEszT3f/LQb1q9CdAtYxewJcxVvsbxfIOHzrJ8z+E+HjDKihM2cqdhs3ICjrs8CJBL2LGG5XC2xTumsvOffTxABLcpFh3lAfV9f9TgUTNw3G1I0kJHApw84At2frnFO7ow2l3KPbmL7NHs9ZOIn4nzzw0Zqs1SfR47/9KFANFYlq4vS+iki7l6XpOKCpwDEmzldsLJhPcIPxqStGxCeU3IHBz3uhIwxh6Yn9DJMnY+V3O/H8cnLBSWhj3CEihVbjL0rbNtPtsVjrvGgFeZQqb5djZhAft9LuF0TWmqxJbDOBI6lbZF5b6oTl/Fft8DT9HJbUjRuS1OBAyxvN5UjlqtqSr1xGxlpWF9GsOFklvQpmJInEJFZ3H+bAwB0v1f8SFgNPj3Y4Uu6i5XUtV9MQTIKpAc3QIqNqIwugdJzwKs2SVNaSxQBuKAEi+WamKI1E0Yv9M3E3yMnRfY+Y2Y0zx/v4/t6kxuLvL7q9nymGWJiiyk5AzGh2xFWqa0KSoDxPVeUUsqvI3NwyxGbA02JBmmeIR2FQ1ZqnyE2LFZIbAjIWUusP6KGi8ZRpsyG4BiUhZqkwpH7CVZBB5pfFW5H7HRiitji2LnDcwTkkpo/ENKpBCvTpFszH3vvYDpRfcro8YjdyEhW9uBKlDSRomX2Yua/iJHnb0IEB0Napa35wwdlxS3jCuA5BNGvsBKZvdq2hQ1y+WA7Q7UZTe4BCRI14pjOMcUkJ/BdN6wE4UUXcArs5Ffh1WiGjPacioOBA5/beJCgMikFgf//agRRwIPoMPAlITNi2wn5/JTCcZzTxC6iQ+xfzejIGIaGb6shdjczNG0vRL5QKgsi8stjG+JilBc/BBV4BdZZUYshZcoLv8x4SRkbr3YyZXqrVyj/kZILHfiI+Xj+C3S503Y9srpIUf9CsJallnWVRr9N0KPYpR70Xe/UquLArcv0QcdAXI1uQgp82KmQ7ERLt+sKcBlPzYr6gAUmqBL0/5OUE1To8CvcnzQEsA3KhXLvOJ/EwPUPKHcTAUy6f8NtrmkBKQEpASkBKQEtLP8I8AAIFxVerjXDEMAAAAASUVORK5CYII=",n7="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAWWSURBVHja7Ft9qBRVFJ/Np6kvi0iEsi9pNhNKK1NTMCwt3ScYaoTiK1BTkNxVqESU/soSg6jeyyIpizAC8atCV+llWH6BmpbGq3YptVTwozTrqc90O6f3u3i8zOzMzs7uHZl34MfenZm9O+d3zzn3nDO7iUKhYMVZrrJiLu0ExJ2AGq8Lpk95spLf35NwqFKTL1m6PNIW0ED4nfB2XF3gcbzOIDwQ9xjQO+4EJOJIwCkxPhdHAs7GnQBpAcfiSMAfYvxzwDk6EaYR+keZgBT2fFs7/meZ87LyazjfIWwNqktNFQhQyjMRSXH8F7z+TTgRYN7XMCfLbpMWMF3ciJPk8Gpr1ykC9gb4ztmEmRi3Ep4lXDRFwAuEdYCTrBHjWwi3ER4k3Idjg/HZOp/5AJP4unj/KGGXSQvIab6uyzdi/C5hP2EbYZ6m1FoEw7RDvJDXSaIzhK9N7wJ8E3mM08I0lcwrYS4bJOagaMrhnJJGwPg2mAcJSt4gjAJ+JNRr1jATZn87Ijnfw52E0VAor612DsRmhWVkte+sXD/Ap6gb4hXqQPiM0BHnODh9QphPOFDEjdSq8+cnEF4i9HJY+T2IF5FLhKRJKuU5OI2BFRzwOc8FwsfYMj/Xzv0myuhIZoI5Md4FN1gbcK4LIO9FcezGKKfC0lSV8sdDmHeBIIFddk4UCODPzQUGwuSX4dx5+PDxEO9zAeKMhaTHDmvioEGQTXOheN+KiM6yWETyMCUjXCwT1i4Qlgt0EkQs9pnNqS1uCwoaL//OiyCbNu0CvM19iIyuVRxf6rH614q0OQVTHoKStpkwwkdhZYVJQlACeG+fjJt/XiPGTXh/b4LivJ1xN3gY9nRe2esIX3gUVkzuDxg/ZiIG2OJGlCS1hMhNniEMgPLcBj+qfS6HFW7Q5tSFE6rhhC+rSUDaodDJFyHFSabi9RVNeZlIZUTZ7Ebmp4C0rB7YiU4S/grbBdIuVZ6tbUdZD/O/H+NVHim15eEGLH1xT/sI/xIOI9PkPmMLegwzwrIALlEXER5Gbn6D1dbFPQW2D+PGGzzmSQgyvFwsV+SauwjfFTnfhXA38oV3wiBgA1COcFr7LXx/POEtl+uSPtzJ1tyQ2+vdgKsJnVGFTqlWNXiP8NuMdXm/X8p7IIDT2pWEIw5bnA2lirnTSDHuAxcwmgil4NfTPHyXCdiJgLUHfYHhIilKiyyvmIzyGXSrRsAHYhXGeLjBI8gFeiDqN2mdnzqP1WcLuUOMW9ESG2mSgGOiEKpHp8dNTlttTcxxaJI0QeFG+H/WRz2Q0ALrUPH9xjpCc6B8DTo5T3lcvxooNQlTblLQdpZm08WQbgVPVKAabBDKD8F2NxgxoT4KDZGXxZgLpXtDmjcB5VWc4CdC25GLbMcWfTAKBMhytZawOSQS3hSmn9daZJFqiemiSJhQRottnVb22sjyIklA2qFGr0W0/4rwUAmKq4cjKZcA2tl0S8wpGZJBapYgJYm6fxNMeBWKle9xTQuuUdnkMAQ4ljNW23NAriA/wvZ5M+aoiwoBylSVzBKxoBEkZET16LerewaEbML7p5H69hGEZ0y7QFcteXF6XqeSHNX58fvL0GVCeZZ/QIJ8DmmbJICV32j5f16nzvMj8n6EV0VkrwNJCay8yieu1+bYqcWFpEkCVhAGYcxBbqLPzxXg/1vx/iLIUSu7XtT1k1y22+4gbb8pAtJiJTgLHGtd/qsvP+K2nW0U414u15wAac2mgqA0vSDKs9zqcvx9KP4rxhWVoARkrEud3HLrctsh+j9nVUnK2QazZX73NcINuT9w1DIgJn8o2VGMbzJ1EyYJqBXjbnEnIJYW0OLiDlc2AR3+732WJNzY/OmKJ4AVL1F59ftCfma4wxQBifa/zsZc2gloJyDm8p8AAwBaPUILlIWqsQAAAABJRU5ErkJggg==",i7="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAWwSURBVHja7FttiFRVGL7TbqWhIZX0x4psJoq1TDLNH4mIYVNYEaVIXyhikO6q5FZIRBHYZlvWbBkZRWSaFYTo6rS7laIR/tJcJAIn8+NHpWuuWy6mq9v74nPo7XDO/b4zU3deeDiXveece9/nvOf9OHc2Mzg46KRZLnBSLjUCagTUCEi31NtuzJ87sxzPv5PQlfRDVn/wWVVawJOEDsLtadwCQwgvEzKENWkk4FHCpbjOEhrTRMBEQqv2twKI+N8T0EDoFKsvpVgJEuIiIE/Yh9YmrNwGKM8FyCbCa2jV/T2wEJtMIGwlTEo8DAaULYKIoqWPWmFWfiphm7g3g7CecAnhU8JNhD8Mc0wnTCFsJIy29Cm7BeQ1JU3SKMxbV96BFSzD9TWEBy3zlNBeQZhdLVsg64OAvLi/zdLnTcJeXD9k6dMhrsdUCwE5bXVMMh5tr8dch9EetNz/ndCP6wv/S1HgK7TTsM+9ttNeH3PuqRYC9hm2gi7voR1JWO7hSPsI6yx9RgoCq4aAksUhSuHQ9QmuFxGaDYmQGsvO8LhlnjvQ9leKAA5XIwzhreRBgCp+VL8VhC8JKwn7RSq8mbDKZY55aD8XvkA643ySBMxA/G0x3CuIcHedZTw7wNsIh0RMX0y4Vig/E3mCLdqwggOEZw33m7CNpidFQAPahw1W0CZW93mXOZiEWwUJjqZ8v8tYRfJawq8GcpQVjU6KAD5V+IswDCTYPPhjhBcJdZZ5ejQSfvapvJrftvryPRMhgPfq27hebHGGU4UV/AiTLBj2Zo9YsQWa8mo1C8BB0bfFsPqOuM9EHEuyFniJcK94yTYLEVkB9YIlvKDKFtsJ92nZY8HjbOBbF+VLlveJNQr0ir0oze4ywoeEr7V8oCR8QxYWwSHxBsI5OFWZT3gdjLSL5+vm31SuPKBNrHIe24FN+nEccamVzmlQq8PV3D0uxVIb+meAm2H6h0RfVXqrcUWXOsRVMrZvgx6nwrcQdqk5NHKeQzZnkmmoC1ZpfS4mjIMv6LaMHY4scoF4Jr/8WcKNbrVIlFPhyRZv/j3hC035u7HyfR41QYuhD0eXnS7KO6j9ecUfEbkCP/8ti/J1ICb0FpiM0nWXS0iTyocywRCyDiS4SR3I/gFOO7QFqD24ViOBt8ADwvmUS3lJwvu4Xqg5XqX8FFFchSJgu/PP6e0sLQVeDnKKHqGHDzmeDuObnPNH560ufZYi5nMof0X8/VWh/EqXAxhfeUCzeNhSeN/DIrHxCj0LBckrAhDASjxF+A3PtYVkdrjvwMwnoV2C+9+4jA0UBpmEJ1CEvCvq9qLHKZCDis/BCn1EuMrH8VonlGf52KP/erwXL+R3SJPZKuY45787nosrE1yN1e8UY/xkXRzvd8NnsEnPRrLEZnkUuBpxn5W/SyxKl+HcwGQFraI+GIDiu5NIhbci25uH2LvT57hxIsWtR7nqVrKehFk3+5x/uyCgK4jyYTLBy8Vx1PEA41Rm2OSybdga3iCMDaC8o0WgUkB9AhOQi3AeVxJprr59WPFRcGA/hZi76ONcMhYCro8pjjdpK/8M4XQM8+aSJIBj80W4juNllQ/pjmG+XLksQMnYGAjoQXsihrlCf1WOQsCwmLbDqYjj8+VyglyBHcD1UJz9RZG+mCwgH2VwUAuQ3n+JVg4HlYGYLGiOuO5KmoDN2r6Lwn6/1oaRRm0rdidNQLuh2gv7lfZ0REvIOv8+H/zTCfGLs6AE/KIlMfwSYypkAbr1rUEanXgUeF17+f0RCQibA2wRDpSPy14oVxjkSNCAg46GCF78jCh+wginzPyFiT+93084EmaSsD+SOoBDizjkTISxTML8cobBOGV4RAuIRSpJwBC0Z9NKwAinCqSSBFyZdgJOpZ2AHWh7K0lAfQWfzR9I+TSoo5IEZGr/OZpyqRFQI6BGQLrlbwEGAEXKTqK6WAQRAAAAAElFTkSuQmCC",s7="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAVLSURBVHja7FtdaBRXFJ71JyBVFIVqwUSKu/60IvjTRsRiLVSc9RcFFaWoEaO27BKtL77YB4UWTLXdVdCIsRX1IaKixqxVFCu2qG2RovEnmbZJpS1YCz7oi0rXc/C79HCZmR23bmbc64WPm7m7M3PPN+d899wzm1g+n7dMbt0sw1sPvw9ra+Z3xQMYSuggPCrljRoamyLpAcMIbYQRpoaAMnywqQSMQh83nYCEqQS8aroHVKLvbyoBcS0UjCJAuv0rhEGmZ4KjTCNgnHY80jQC3kfvhLkUhk3A7zCcSbBNIuAtQhVhJ45zEMW4KQR8gL5JEMAtbQIB/JRTMNoRBDgYf73cCcigz3qMbykHAnhNbyScImwjDMH4LIhdTri9JQhhL5hDWIQx9oZzhE5cb+KLQAC78VXCMhjwEYoeLHgHtaettzXotxJqCBcJkwkPcb3vCMujToASsiSWuAZCBaEW/XHCSY9zmwkHsEvcjT6L6yTxnU0vQgg4wsXX4Amq9gsh5nPuHQ9CpWhGmgC1pmfQb8WTV62OcNSFhNcwXucijvJ6Z6NOQEYsae1w/V8JYwmf4TszoQsq8XmbcAQiaeF7Y3Geuo7qP36ek+1RIvdPYMLcX0bCw2FwhXCe0ALj2aBLhDHwkocQuX1ig7SQ8AbhOuEw4X6UCKiEF3W6fJb1CZGECJVqjLPx74AwS4ztDVhXcMIIgfUQtX1irQ/qJe3a2BUgaOMCynZCK+HDMDTgPcR3d8Ji6+nbnUyADY1yfZUQJdFXw83tAOfzff6C4RVYaeyuJGAlsrzuWlanhMot0emNFaEdRmSF8Ukcx6EPbkQqw5UgWtq9W4ohodsz6gVnY8cIO2D855h8UsS1IiKPfgKErQ1LnIPvp13W+6S2gqR8DE+Ie2cFCc9ERMzv9Xhtzfy+1M0ljMYWdoD4mI1f5+OibpM4Dbd1Ari47SGgaY/zU5rnqWTse8KZhsamv4vxgH5w3eGa8ZaH8lsFFLlPQIF0a49dssRCWhHHPXsWGwKdIlZjGvsZQGV04xAa0lX53KkQqfsIh5yPi9pCIB3cj8//Gp8vERoT15KvjCAwjXnxvHcR/iw2BPx2fOqGqqy1QhCaFRmhTHU3it1cWssV5DXTLnnEIGSIS7RcIy4ITXvlH16/DyiWAPW0WsTxv2C7vkCM2+IJ5jDhlHjqdpEakXSpMRQk4P/kATkUKfLY57NQrgqQkclM0BaqrVJoJ4BGsLHjCScwtt/P+FKmwptQwmotoi6Y8BgPmtL+RJhBmOQX46Um4DeP8QqUtvgXILcIh6DibqHjCMVWAnhSC5m4z/7iQtR2gxUoZY0RY62o880jbNDUOqfpQrNImL7AEiyTJV5J/olyPaAexqsUl1PmNwk/C+N/wFY3J3ThXcK3yDCzGBuu7ReYoM1RrwfYQqgsGPVACjIKpY+18/4ACV9pS11SkNRuPedXaKWqCcq1ebVHVueXfeoVJl0LIl8SkxuTehyrfcNylMDcGm+JZxPuEb4UCVKLEM5Po04Ax+80FDinoOQ1EZunBYjx/R7nfoJ+LYRwJK4zEP0ky/udQmQ0gNs3gN44HVsKd05py5otiiR7MHYTy2nJWhjvBtNaL/cC6ul3WQuDAMdlE6P+zuKplzUBFoqZ3GaJEhu3vV09kbAI4PT4NmE6oReBt538c5kfTSHAwk6uEi5fZf33axFjCFDvBarQXzONgBva8R1TPcDruOwJcAoclz0B0mgnrAmETcC1MN0/CgRcN90D7r70AMM9wAkzB4gCAR3W0xccV8OaQOzlf48b3p4IMAAoV1q9G/s2xwAAAABJRU5ErkJggg==",r7="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAYWSURBVHja7Ft7iFRVGD+7RtFmD3pQFOWWO7BQrUrlWmlEETSTZRZZka5WqL12ov4oo1iid9mDZrOoVEqjyDKpzClLyoI2LUvN7DG3h0RPJLQUEWmn72N/B7493Dv3zJ37mNnbBz/O3bn3zp3vd77zvc7dpnK5rNIszSrlknoC9rK9cNZVU8J+9mg8/7O4lX5m4ZK6sICxhFfSvAQmE1oJR6eVgHaMh6aRgMMw+yyHpJGAy8TxBQ0RBWqUkYSLYPZnENrEuW78XSQ4hE8JW4cCAQcSriBMJZzqct7ByMpnAZZ+wgbCYmBroxHAij8A5ffHZ9sIrxGWEZa73MMkZEDCeMIY4FHCh4RHCG8SyvVOAJtzwZjlOVB6d4X7HKAolsxswjVYMoxvOB8jfFSPTpBnsOSiPM/qUg/lW0UkMOV7wi2wgrmYefYfq41n1AUBWSivHVkvPi/53HcJUEk0EbPwdxOsrGQ40sQIYAe3ArOdA/IYsz4/chxgI/OxBEyLyyZJwLmE57C+28X6VTjeRXihwpLpAGrxVytqJaG5hjXPir9NuJDwr3H+AIydWL8mtAm3oSawWWbamnphZUVBQuDlEDQKLIfZT3Q5x8qvJOwLK/hAJDnaL2RE7GcnyfVpD+E7D7K148sJxXuFBRTxnbEQcAN+VLvHTC0V13Ei87dH2CuKqvAurHEm4kHCFzjH4W+BIM0xvicnrKlbOOBIl8CdhGtdfszJhLcIrxKOJMzzUN4UTo5OhAKcLn+OxKkPYe9nwgkuz9OSx1gIshSqJeA+wg+EZ13OzQQxXVCgWmHCzidsRzY5Dk4265NEFYU15aMmgJW8zeMcK/90jVHpHcIpIEFbx26L+/IiEz0oKgJmYvZXeZzvDyk5KwkSFsH8/UT6lOlREXA74daYqlQm4XJElGWWsV47wJ6oCDgTIS0u0Wl1G8Jd2cfJaQs4GA45dAJ+SqBh02scOxaksUyr95aYrci1XbC0Gl2j7D0UCFDC6R5rce1msQwuHioEbMTYUeV9c5CODxkCHiKc43ENt9lvJjwsPmPCPiEcF2dLLEppRvX5NcLkLsxwK5R1m8wOFFibCC8TvkIh199IBOw0SDiesE8Vef8wwijCr4Qd+Lu/ES1gD+Em1AyyVGbzPw/VIo/7ifP/EC41mjUNtwRGY3zeUF6HSQeVIwvvP3wslD9J+fQmG8EJjhIEVCP3Kv/GbEMQMAbjBotr5Vb762HnAVMSUP5wwgwcz7C4XofJTWpwFzkUAvjL22Mm4H54bZbHCBMsCbB+86QaAt5Fjh2XcHfoSjXQcV6ACLC+wvVcAY5A1bjE9iHVRIG1mJE7YlCew9sbOJ4gvHwl6cK40tb8g5TDjKtjUF72+Pos7+nG8dyoGiIs3L6+2+Pc+BCUz0B5neVlhQ+oJHlRDq+KkgBuU//oQcIxhC/VQOco6JrvM1LcLJad7exH3hVm4f0+7g92Gp+/RHiR8L6qbs+OFXgccfsvwj1waK1wupOFgm5SqKJjFEoqPB9+YB5Szz34vIzZWo8fpXeNmRRud/8OlNHcOJtwFmGSUOBG41lbCGuQ0WVcZrgAop0gsx+UAFb4epgrkzBbDX51pagGvzPQoyp3assoYrwKFgfkmC9TZYVlBN4hDpoKrwEJvFfwpBp4ccGtSGG5Tg288jISlVoLkBczX/R5XkEoqq1LK58LYvphVINPEY6CPxgBhfQPOQ2zdbqozkxZh3GhxbMcJDdmOp6zIC8yAhSSoj8wKyXM5mbE4h0VlNdKrUPk8BPeJ5xo3JuvVfmw+gHa+xYMb80EDMfoJn8quw2MLlhbi/Ax+VrMPopyWDs+OSPD4f2PCPB9w5AXvIc+QAuiy/Ra13yU/QD9olQncgHtC34TeUGbTz7A13Bn9xfUAhwqv4UVcF9gUdh5dxQtsbWI72OxJKaqwa/COi6dmoxBDvsVfjt0sWUjpK4IkERMA7LCAtwsQW+BMfjV2I0qgtdi4ybA9BFFI653i3O5pPptSfUE5UbnEypBSYoAx+gzpI4AJZbEljQTwJawM0kCktwZWo1kKVFp+v+fp1MuqSfgPwEGAN7OaG+tHYBMAAAAAElFTkSuQmCC",o7="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAWCSURBVHja7FtviBVVFJ9n6bZlbZQQKVngvKCUVlqhoojND+JuFn0psNLNsL7YvrCCwKLoSxCC5ntYUKSyRUl+qA+6zyhw7UO2VNQKEbTPT0VBkf+IJM3dfqf9XTtc7puZ994M897OXDjcmTfn3rnnd88595wzu4Xp6Wkvy22Ol/GWeQAujspYKBRif/kTGx7sQ7f87d373ol77qimnbYGrALdn2UTuKoRLZyNAFwKujzXgAwD0AOan3UNmJ91H9CVa0AnBEIJtStBl2VSAxAFzjXC4/rqrOcCC7IIwHJ1vTiLAOgI8IaOBQD2OyDUxNBr1fUtTby3BzTcDhrgg0abWIwGoLdB4e9G93uj4xIBALl8BV0NVMbChKIGNoNaAzDukojCC9CfgSZAz7aLDzAmIIv7CIv0AwToBj2Dy3usnOBj/H5ziPBlARokR+hagH+q1YUXolZOwipC9AOjvBWNKGGBVfVcwt4h7tqSgKlGQC9g7M9qrE/BDdCDem5XiyxXXAAo9Sxban4YtJ3CG/M45gChRn8i7RzoAwECJKZRVc8qEL4UtpZUACAIo2qnpP2tBJfrLaA3ReW9mZKYEX4paBPoNaq4AWKumqsK4QejrCPNmuB9oEPq3ggvu7gMAmwDncH1fkuws6DtjApf5+9a+FpU4VMNhLDI8+ieAx23VRzPatbp4SlwzO+n0X3vmLqUwGYlFglOOH4bdpwOVQKjneUV6F5xjJ/sJAB6mesb+zatbPFV9O6zifALef2L46jtCABWsz8pdg/aAPpVhMAOr1J8n4JeVLt/DVV9CvQUPX81SQCSKojcyX4v1Fs8/x4IJ8faqyyCGHv/B91pa+wuxhBnCEqFwicCQOzHIBd9goKuhyDvtphs+cr+i9qRtusx6OldjrkVO8UHnGDfF7PQk50CwEQzaW5IouVFVf92AGCEfT9seE0L9n8dM0xzZLbXMYgFXg+6ow4AY8arg6fYpPD7AmII4VkKWpbKKcDcfLied8bzm9B97c18/Tkr2gCeIw14fp0BPoKx71s8XYwzTLZY0mtI7BRgDXBSCe/0zljMD+jWUfh5ohEYN9SE8C/bwtfxE5PN1Agja8CTjz90EbqtoM1WDl8KKk7QRMYIgoBxF/i/qsMrH0i+VMKXrKTJ5r8N3XuK3+QXpbd2fViLWwOetoSXwkQxrDJDte9XmvBGAPtWJcxgkPCce1zWwPC5prShlIQT/MORyQWp8jzQ7QqEB8Q0QSvoH2x+yQIf4+2QAZYm54eszV7Lb0kAMMI4/YJXrrcwER7dF6AjuN5BEKrqKHPVBOVLkXjaw+Ad4TzrvZk6YzUEhLLSnHHQttgBwKJk9zYqtH0ubGEd4fu44wfVHGJGPwaF8KCX1P0h612+9a5uqwQnZrAS7/krkThAQGBZqqIWNo5FrFRsO1UIvMnhI6QqfMwx/XeSNYL/c/W+n7z/vx/41LpuCt9L56qFH2hE+FbjgIdpEl2WHQ4oJxnqjGRXw0Jc8GxWai1h9lHQozQZY54C9p+NxgEtpcP8S8+91jH0HxhRCpgYfwDdjfTkYbx7vJnSum0yclocTCUdxou/4eIrdQKasCY8fhgvni/gzk8pwaXOsMglfCoFEcfXG2MWO6kRU44x57kJzi89eH4rz/R1arMEiOfB/0kcBZEkPozci24taY5yUGUCUXNUei5EfDSrXgrdr6Yeox/YzxPJa0sAFBCLCcJGh4+oKRPQ957Fe5xxgHxM+baR96cOgMM8TGGz6ADEs3Z6gjZ+FIKfa+adbQVAACBlVeyohuUVswYAgtDDfF7aGgh/IM75O+UfJlJvOQA5AOk1nbRM5RqQA5BOS+0Y5FEoicySKNlg6nFAbgI5ADkAs7L9K8AAT+NFTGBSaUgAAAAASUVORK5CYII=",l7="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAd9SURBVHja7FtpbFRVFJ6RylIXcEMoRAmpBIuE0hA1aKXiQl9RgyCigKYFCv6gpZBo1ETFJegPgzKNf1haohEFJVGinRIB2TQguxib2MGoiBiJWzQoSFu/A98lp5c37Zvhzbwp5SYnt3Pf3c73zj3bfQ23tLSEOnO5INTJy3kAOjsAWV47hsNh3xcvL5uYK/WS2vdifs/tVbeFPXf0EQAyHgE5bIqCKv0EImMBAPMVZN6tVIOeARB/nnMAgPF+qN4GjWJTjG8+REnI5d+HQQ8AhM/PGQDA/GxUr1HnCINPChhgskn1KUe1AHSlkQY8r+zwAICxJahmgE6AloMe04xbfQeiqgJVKCm5A/1/6HAAUNFFKdo7QXPByFaPYx3qCRn7Oyg/URACBcBifimZ/zsJ6amjfhAQJmOOer8B8N0RIvONZF60+sxkmGcZC3oB1AtUh7mH+r1fXyUAG7yRmj6Xdr3aJ1AnoXoH9DVonBd/Ie0SgE32pLj7yjw9xZWoHgYNUaYz42IBYX4ozVe136JKEOQ45ALsSEYdAWptUVgxbPS6VAYvSjGWYK1ophyBiPLoUl0qrTWDlQDl27fy3NAuDsz6NiRGdIWRlkZKTzRO/9vwbLPLmnF1TVr8AGxEXNsGw4zRzmgXffALfj+t+oq0lYKeUn6/XWJ0mRdj7Ak1dhGqI2h7SbU18s8haD8e1BG4i8xEFPO3oJoG+lhttguqDaBlyrvbRD9BmPsU9CufvSHPCJgpYlrn08yaspr9ZwVpBYzPXmPpgz0A5DPF/HpGgX8wLuiL50VyZEBVoNFoywFNB/0DGgnaYkDA8y9kToITstZ0ggRAFt+PDe4js+NQFYBqVZ9HFfOiF5aBjrmYueMgYapQgTBNdRHpGYE1BrH/N6h2BAYAFVmI4mtKmRw/83bQJxvVQj6bh03v9mDvd2lNjzkuVAA0WaBssPaSVgm4nrUOUPJAe8HEUf4eQz9eNHxtAk7PUirEHqC72fafzA2aoLpuYn1nEADcDGq2TJcoJf2WC87CZpsx96q2nZYFaVTApx0ASXH9aEWBJqVlSl/WyfjvZkyOajus16LlEX1xVRAA9NcAtCPSCWd7ExhzJCgALgH9pX4bMHqqtqN8YxcloWQH8M/vVPMVLl1/Bl0aBACXEQTzxv5Vzox9RvOTmH+ANYfRMb5epJwNACdckP/SsstRZR4TLc+56A/HRZ9kUw+kFgAmPHQ5BBqM9u6Wy3raLvNNiV0vpYvsdS2JGYpAG5WL7cRRqIMoeWZsD9A1qZCAWuOFsUgQlGWJ/HbLRZbyEB2YxcpStMV8MZMrMqbcdrt19Mf5uoIOqn6T6DSl5Ahoh2M/64lKD3zFAMexpOA+AvUh2q9tR/F9xJ/3WG/f4dy2K673ImVKqnTAOtBM9XsF6wexwbCLAxNR9nqtAiHqBgKZ36yYr7fmjLncFBXrvTB4uhX0fSoA+BY0DIvkK9RP6gEBwbLfJYZZ1b6WSc0tDHjscjvjisGaeabAclV8oMXfofk1EjAZJDppq1emEkqIYFGx+yuxwRncxGyKZT1zdC1qgwuY/BBAnERNF8b35rzDmW+YEyc3+CKePcu2XXS/8xbXrGpIhQ74RKIxRnkmJv+JojjF8uQkG/Qy316jZHI9KsHeoHmcdzjFv8olEjXn/3W23UTmt2HthlRJgGSARJRrlBRMRfUWN9xfS4GVvwup8HkH6RDD536k8TzDXWgFnsB8C11E31y7nc4Jqrd/P9o+SFlOkPk+ickLVdYnSimopwJramPTXsoeMr/OmifMVNtJhwjPS9j+CKo3GYmOkJeQypzgK6ADoVNX3UbcHZ71YiY1zwhseF8giuxYG3PLHeLj6FtgM89imI8ZpQjmL+YRaQbNsSXQdwCozGRx+4bGbKyCCsptrIjrQHqHdhEnKg99XnXRC7nMAjsuSnURRX+51+t3X9LiZL7COoda1ONqf/TLoVntpt68MH8wTurNANpqTqVfRPRH6VvodN0LmGvw09dULl+Azcez513GSoqs1FgT9JluPb8alUjDVBMDmDNvAdNM5lu9/XTdCxg3uE67vtxoCd+Y5PPfdRm7Wv39vsvzNWQ+RoBL4kjF3GRE3xcAsPBe5aHVUSTNsygVX6GVOTZFu6sHXLS9KNvxMofOO3INw7xcx53VHaFft8MRFQF6+ugRY/qo/GGv9r4NdPu4UkuFXdJ6O8wgpVpZg0YtDXFKdgJucYSZIUe9+RI/9u73JzLGIQkprR3h24pZfS9XiYwzJEAFO+JS91H5v1nou6a9vQT2lRg3XmklRczRECnZDgZ+Qz+J/jZoAJh1GsmxjpX4lMBqhdtNcEYB4AKEY7nA4ibvI5WpoErC7GGMAzRoqxJhPGMAiBO9OR7igbjHpsMCYJm3IfTdRYmZm6PdPA41iYSyHQ4AC4wbVCYnzy/GAzGDSRb9NdnooDYRJABjrXxg5wEA4t/NSqFN6IwS0D2UASUQAPiN0DbL3gdSsgIEvwi0MXTqX2Qqg9pEYGZQ5fO6imvs99y++wHnajn/v8OdHYD/BRgACUm/qct2//kAAAAASUVORK5CYII=",a7="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAV9SURBVHja7FtrbBVFFN5SpUFIxJBgmqgQuYA8tK2gISIvA4Rb4A8/CJCIAWklMbdW+0MSEuKDKIQfyAWCvN8BIYEQwr0iP0BSUcFoTVuI9pZHBaNi6yMFLVDLOeFMcjKZ3Tu7M71r2HuSL7t3Z3bnzDdnzpw5u7egq6vLibL0cCIueQLyBERcHnArqFw4OxftF5AOt7u7oU3bDvgjIEeynqxwcRSnAI7+IsBCwINRJCBOHUe8EkUC5rLzmVEj4AnAHImAcVEhADt/RHLA6A82hUFCrggoBIwELANcAZQq6jwFOA3YARgeehzQDbIHUKJRDx3iUMCLgM77xQKwI6MAGF01e9TLAGblqvO5IGAMmb4g4SBgBOC4ou5xKjvMOj+8u6eDTQJigCTgMmA5YCrgS8B2qV4HxQBt7Np1WhVuSXW3AhoBjwG2AS5RG7H/EwGoTArQBEgABpCnH0/lvyvuwSzMLvb7E8Cfinri3gWAgYQEtZWyQYQJAX0AK0iZuFTWQiSIc5XslAhQibh3ksKS4tT2h4DeuSbgOcC3gLddyndrPON7mgZo/rUa9U+6XF9CuozOFQHlgLOAwR6e/Adm0o+71MNpUEdz3E1EG38BrtKIq2QI4BxgRncTUAU45lJ2E3CGTYcmZqpucsGDAIwOn6HzBjouy6Lf0SztGREwAbBKMdoVNCUeBoylayhpab76JQA7/6jkI/YTMYMJVaw9ISk/JOgS8AjgM0BP1vHpFLFtAXwDuKMgRyiXcHkuzv/fXMpeZpbU6PLstYBhgDel8qRtAt5lnf8CUEZM/5flvnXMAlRLFvqKH12W1ho6X0P+wk2Q+I9o+T0vxSRWCIizEUTWpwHaNYn7mFlB0mUlqFdcT7L2tmq21UK6cquL2yAgIZHR7sNvdNA8FffGNQmPM6f7r4/2WqQ2EqYElLIHrlU4HB1JM4eY9EF4WnKkupKRSH/ahIA3gjgWhbzP5uazWcJqQfg7Bu1tAPxE5xUmBJSw0cgYKISbop/pfHKWIMuhLfNZg/bQMe7TiEM8CejLMjdpx1wu0tHLJIvpeMlCew3MqgIRUEpBhy0CmjXq2CSgXppavgnowzx5xoJC/en4q0cdsf0ts9DeL+z8ySAE9HbsipiL5zzqfMcIMH1bxBMuvYIQcMOH6eokTXSmgjD9QgtWcEtyir4J+IOOgyxbwlSPspfo2MmswUauoy0IAWKuFgEeMlQmQ5splPcA8xRb30oqc2iDZfrKvFiRWfJFQEbHifiQeRScoHnvBZyga5W05m8kIlpZ4GQiA+j4N+Ba0EAorRG86EordbiTPXMvdXw0yxLN9VLYh4jXbI0mkaBNAlBqs2R1NpNl2BCRlT5oQoBIRE636AQ/cAms8NprFtsRYfVhEwIaNLI6QUROZfEdnM2YA0m9bJoPSDKlTXaDmLoe49JhTgguu4ccs++GEmwLb5wQEXmAmOMz48oEM8lDaFeYZKMjkptpNnKYKp9i4AtiLDOUtkEAH/0kLWN+5SvyIzdpdL6m8JQnTvHZKVr/XzCIQJfSsdJvtKST1UF2FwVU7HNyTBiiPg84xWL0FDPbCY46T6gj+Nz5zr2PLE7aJIBbwfqAViBImMhIwGwuf7dYbtB5/NgDs9CYaK0JEi/rhLPljAST7FA1M9MY8zUmeYdXnXvpthqv2N+EADEVqqmxaQbK7pJ2aKbLIFrVasBbuqYflACHzAw/a3vdQOEb5O0dCxmnfoCVZJ2+E7dBX49/6ph/3MgJaLIQ9Z0K6jjCkjqXnWeQTZaVpEGu5SI7vx6WEmESwM2+PooEZNjod4SlRNh/mEDvXxSmAmETgF98/BNlAjAl1hmmAgX5f45GXPIE5AnIExBtuSvAAE3qNdCP7ekxAAAAAElFTkSuQmCC",hn={BLAIDDYD:"BLAIDDYD",CETHLEANN:"CETHLEANN",CICHOL:"CICHOL",CHARON:"CHARON",DAPHNEL:"DAPHNEL",DOMINIC:"DOMINIC",FLAMES:"FLAMES",FRALDARIUS:"FRALDARIUS",GAUTIER:"GAUTIER",GLOUCESTER:"GLOUCESTER",GONERIL:"GONERIL",INDECH:"INDECH",LAMINE:"LAMINE",MACUIL:"MACUIL",RIEGAN:"RIEGAN",SEIROS:"SEIROS",THE_BEAST:"THE_BEAST"},Yg={[hn.BLAIDDYD]:"Blaiddyd",[hn.CETHLEANN]:"Cethleann",[hn.CICHOL]:"Cichol",[hn.CHARON]:"Charon",[hn.DAPHNEL]:"Daphnel",[hn.DOMINIC]:"Dominic",[hn.FLAMES]:"Mystery Crest A",[hn.FRALDARIUS]:"Fraldarius",[hn.GAUTIER]:"Gautier",[hn.GLOUCESTER]:"Gloucester",[hn.GONERIL]:"Goneril",[hn.INDECH]:"Indech",[hn.LAMINE]:"Lamine",[hn.MACUIL]:"Macuil",[hn.RIEGAN]:"Riegan",[hn.SEIROS]:"Seiros",[hn.THE_BEAST]:"Mystery Crest B"};var mo=(n=>(n.MAJOR="MAJOR",n.MINOR="MINOR",n))(mo||{});const qi={omega:{MAJOR:17,MINOR:19},gamma:{MAJOR:13,MINOR:17},beta:{MAJOR:11,MINOR:15},alpha:{MAJOR:7,MINOR:13}};var pa=(n=>(n[n.MAGIC_ATTACK=0]="MAGIC_ATTACK",n[n.COMBAT_ART=1]="COMBAT_ART",n[n.ATTACK=2]="ATTACK",n[n.HEAL=3]="HEAL",n))(pa||{});const Ns={[hn.BLAIDDYD]:{label:"Blaiddyd",description:"When using a combat art, conserves superiority die and adds another instance of combat art damage (if the combat art adds damage)",image:KL,activationDC:qi.omega,triggersOn:[1],conservesResource:!0,combatArtDamageMultiplier:2},[hn.CETHLEANN]:{label:"Cethleann",description:"When using recovery magic, heal the target for +2 HP .",image:XL,activationDC:qi.beta,triggersOn:[3],damageBonus:[2]},[hn.CICHOL]:{label:"Cichol",description:"When using a combat art, prevent counterattack",image:QL,activationDC:qi.beta,triggersOn:[1]},[hn.CHARON]:{label:"Charon",description:"When using a combat art, doubles any extra damage done by the combat art ",image:YL,activationDC:qi.alpha,triggersOn:[1],combatArtDamageMultiplier:2},[hn.DAPHNEL]:{label:"Daphnel",description:"When using a combat art, adds +2 damage if the combat art does damage ",image:JL,activationDC:qi.alpha,triggersOn:[1],damageBonus:[2]},[hn.DOMINIC]:{label:"Dominic",description:"When attacking with a spell, conserves spell slot ",image:ZL,activationDC:qi.omega,triggersOn:[0],conservesResource:!0},[hn.FLAMES]:{label:"Mystery Crest A",description:"Restores HP equal to 30% of damage dealt when using weapons, combat arts or attack magic. Also has a roughly 1 in 4 chance to raise Might by 5 and prevent counterattacks.",image:xL,activationDC:qi.omega,triggersOn:[2,1,0],hpRecoveryPercent:.3},[hn.FRALDARIUS]:{label:"Fraldarius",description:"When attacking with a weapon, adds +2 damage to the attack ",image:$L,activationDC:qi.gamma,triggersOn:[2],damageBonus:[2]},[hn.GAUTIER]:{label:"Gautier",description:"When using a combat art, adds +2 damage if the combat art deals damage ",image:e7,activationDC:qi.alpha,triggersOn:[1],damageBonus:[2]},[hn.GLOUCESTER]:{label:"Gloucester",description:"When attacking with a spell, adds +2 damage to the attack ",image:t7,activationDC:qi.omega,triggersOn:[0],damageBonus:[2]},[hn.GONERIL]:{label:"Goneril",description:"When using a combat art, prevents counterattack",image:n7,activationDC:qi.beta,triggersOn:[1]},[hn.INDECH]:{label:"Indech",description:"When attacking with a weapon, you may attack the target again . (this follow up attack can also trigger the effect)",image:i7,activationDC:qi.omega,triggersOn:[2]},[hn.LAMINE]:{label:"Lamine",description:"When using recovery magic, conserve the spell slot ",image:s7,activationDC:qi.omega,triggersOn:[3],conservesResource:!0},[hn.MACUIL]:{label:"Macuil",description:"When attacking with a spell, add +2 damage to the attack .",image:o7,activationDC:qi.omega,triggersOn:[0],damageBonus:[2]},[hn.RIEGAN]:{label:"Riegan",description:"When using a combat art, heal for 30% of the damage dealt if the combat art deals damage ",image:r7,activationDC:qi.beta,triggersOn:[1],hpRecoveryPercent:.3},[hn.SEIROS]:{label:"Seiros",description:"When using a combat art, heal for 30% of the damage dealt if the combat art deals damage ",image:l7,activationDC:qi.alpha,triggersOn:[1],hpRecoveryPercent:.3},[hn.THE_BEAST]:{label:"Mystery Crest B",description:"When attacking with a weapon, add +2 damage",activationDC:qi.gamma,image:a7,triggersOn:[1],damageBonus:[2]}},Ge={E:"E",E_PLUS:"E_PLUS",D:"D",D_PLUS:"D_PLUS",C:"C",C_PLUS:"C_PLUS",B:"B",B_PLUS:"B_PLUS",A:"A",A_PLUS:"A_PLUS",S:"S"},Jg={[Ge.E]:40,[Ge.E_PLUS]:100,[Ge.D]:180,[Ge.D_PLUS]:300,[Ge.C]:460,[Ge.C_PLUS]:580,[Ge.B]:860,[Ge.B_PLUS]:1220,[Ge.A]:1660,[Ge.A_PLUS]:2420,[Ge.S]:3500},oo=[Ge.E,Ge.E_PLUS,Ge.D,Ge.D_PLUS,Ge.C,Ge.C_PLUS,Ge.B,Ge.B_PLUS,Ge.A,Ge.A_PLUS,Ge.S],yh={[Ge.E]:"E",[Ge.E_PLUS]:"E+",[Ge.D]:"D",[Ge.D_PLUS]:"D+",[Ge.C]:"C",[Ge.C_PLUS]:"C+",[Ge.B]:"B",[Ge.B_PLUS]:"B+",[Ge.A]:"A",[Ge.A_PLUS]:"A+",[Ge.S]:"S"},Xo={[ne.SWORD]:{[Ge.E]:{unlocks:{}},[Ge.E_PLUS]:{unlocks:{combatSkills:{[We.SWORD_PROWESS_1]:1}}},[Ge.D]:{unlocks:{combatArts:{[ft.WRATH_STRIKE]:1}}},[Ge.D_PLUS]:{unlocks:{combatSkills:{[We.SWORD_PROWESS_2]:1}},removes:{combatSkills:{[We.SWORD_PROWESS_1]:1}}},[Ge.C]:{unlocks:{combatArts:{[ft.GROUNDER]:1}}},[Ge.C_PLUS]:{unlocks:{combatSkills:{[We.SWORD_PROWESS_3]:1},pickOne:[{type:mn.CombatArt,options:[ft.SUNDER,ft.HAZE_SLICE]}]},removes:{combatSkills:{[We.SWORD_PROWESS_2]:1}}},[Ge.B]:{unlocks:{}},[Ge.B_PLUS]:{unlocks:{combatSkills:{[We.SWORD_PROWESS_4]:1}},removes:{combatSkills:{[We.SWORD_PROWESS_3]:1}}},[Ge.A]:{unlocks:{combatArts:{[ft.WINDSWEEP]:1}}},[Ge.A_PLUS]:{unlocks:{combatSkills:{[We.SWORD_PROWESS_5]:1}},removes:{combatSkills:{[We.SWORD_PROWESS_4]:1}}},[Ge.S]:{unlocks:{}}},[ne.LANCE]:{[Ge.E]:{unlocks:{}},[Ge.E_PLUS]:{unlocks:{combatSkills:{[We.LANCE_PROWESS_1]:1}}},[Ge.D]:{unlocks:{combatArts:{[ft.TEMPEST_LANCE]:1}}},[Ge.D_PLUS]:{unlocks:{combatSkills:{[We.LANCE_PROWESS_2]:1}},removes:{combatSkills:{[We.LANCE_PROWESS_1]:1}}},[Ge.C]:{unlocks:{combatArts:{[ft.KNIGHT_KNEELER]:1}}},[Ge.C_PLUS]:{unlocks:{combatSkills:{[We.LANCE_PROWESS_3]:1},pickOne:[{type:mn.CombatArt,options:[ft.SHATTER_SLASH,ft.HIT_AND_RUN]}]},removes:{combatSkills:{[We.LANCE_PROWESS_2]:1}}},[Ge.B]:{unlocks:{}},[Ge.B_PLUS]:{unlocks:{combatSkills:{[We.LANCE_PROWESS_4]:1}},removes:{combatSkills:{[We.LANCE_PROWESS_3]:1}}},[Ge.A]:{unlocks:{combatArts:{[ft.SWIFT_STRIKES]:1}}},[Ge.A_PLUS]:{unlocks:{combatSkills:{[We.LANCE_PROWESS_5]:1}},removes:{combatSkills:{[We.LANCE_PROWESS_4]:1}}},[Ge.S]:{unlocks:{}}},[ne.AXE]:{[Ge.E]:{unlocks:{}},[Ge.E_PLUS]:{unlocks:{combatSkills:{[We.AXE_PROWESS_1]:1}}},[Ge.D]:{unlocks:{combatArts:{[ft.SMASH]:1}}},[Ge.D_PLUS]:{unlocks:{combatSkills:{[We.AXE_PROWESS_2]:1}},removes:{combatSkills:{[We.AXE_PROWESS_1]:1}}},[Ge.C]:{unlocks:{combatArts:{[ft.HELM_SPLITTER]:1}}},[Ge.C_PLUS]:{unlocks:{combatSkills:{[We.AXE_PROWESS_3]:1},pickOne:[{type:mn.CombatArt,options:[ft.FOCUSED_STRIKE,ft.SPIKE,ft.WILD_ABANDON,ft.DIAMOND_AXE]}]},removes:{combatSkills:{[We.AXE_PROWESS_2]:1}}},[Ge.B]:{unlocks:{}},[Ge.B_PLUS]:{unlocks:{combatSkills:{[We.AXE_PROWESS_4]:1}},removes:{combatSkills:{[We.AXE_PROWESS_3]:1}}},[Ge.A]:{unlocks:{combatArts:{[ft.DIAMOND_AXE]:1}}},[Ge.A_PLUS]:{unlocks:{combatSkills:{[We.AXE_PROWESS_5]:1}},removes:{combatSkills:{[We.AXE_PROWESS_4]:1}}},[Ge.S]:{unlocks:{}}},[ne.BOW]:{[Ge.E]:{unlocks:{}},[Ge.E_PLUS]:{unlocks:{combatSkills:{[We.BOW_PROWESS_1]:1}}},[Ge.D]:{unlocks:{combatArts:{[ft.CURVED_SHOT]:1}}},[Ge.D_PLUS]:{unlocks:{combatSkills:{[We.BOW_PROWESS_2]:1}},removes:{combatSkills:{[We.BOW_PROWESS_1]:1}}},[Ge.C]:{unlocks:{combatSkills:{[We.CLOSE_COUNTER]:1}}},[Ge.C_PLUS]:{unlocks:{combatSkills:{[We.BOW_PROWESS_3]:1},pickOne:[{type:mn.CombatArt,options:[ft.DEADEYE,ft.HEAVY_DRAW,ft.WANING_SHOT,ft.BREAK_SHOT]}]},removes:{combatSkills:{[We.BOW_PROWESS_2]:1}}},[Ge.B]:{unlocks:{}},[Ge.B_PLUS]:{unlocks:{combatSkills:{[We.BOW_PROWESS_4]:1}},removes:{combatSkills:{[We.BOW_PROWESS_3]:1}}},[Ge.A]:{unlocks:{pickOne:[{type:mn.CombatArt,options:[ft.WANING_SHOT,ft.MONSTER_BLAST,ft.SCHISM_SHOT,ft.POINT_BLANK_VOLLEY,ft.ENCLOSER,ft.WARD_ARROW]}]}},[Ge.A_PLUS]:{unlocks:{combatSkills:{[We.BOW_PROWESS_5]:1}},removes:{combatSkills:{[We.BOW_PROWESS_4]:1}}},[Ge.S]:{unlocks:{}}},[ne.FISTS]:{[Ge.E]:{unlocks:{}},[Ge.E_PLUS]:{unlocks:{combatSkills:{[We.FISTS_PROWESS_1]:1}}},[Ge.D]:{unlocks:{combatArts:{[ft.FADING_BLOW]:1}}},[Ge.D_PLUS]:{unlocks:{combatSkills:{[We.FISTS_PROWESS_2]:1}},removes:{combatSkills:{[We.FISTS_PROWESS_1]:1}}},[Ge.C]:{unlocks:{combatArts:{[ft.RUSHING_BLOW]:1}}},[Ge.C_PLUS]:{unlocks:{combatSkills:{[We.FISTS_PROWESS_3]:1},pickOne:[{type:mn.CombatArt,options:[ft.DRAINING_BLOW,ft.NIMBLE_COMBO,ft.BOMBARD,ft.ONE_TWO_PUNCH]}]},removes:{combatSkills:{[We.FISTS_PROWESS_2]:1}}},[Ge.B]:{unlocks:{}},[Ge.B_PLUS]:{unlocks:{combatSkills:{[We.FISTS_PROWESS_4]:1}},removes:{combatSkills:{[We.FISTS_PROWESS_3]:1}}},[Ge.A]:{unlocks:{pickOne:[{type:mn.CombatArt,options:[ft.DRAINING_BLOW,ft.BOMBARD,ft.MIGHTY_BLOW]}]}},[Ge.A_PLUS]:{unlocks:{combatSkills:{[We.FISTS_PROWESS_5]:1}},removes:{combatSkills:{[We.FISTS_PROWESS_4]:1}}},[Ge.S]:{unlocks:{}}},[ne.HEAVY_ARMOR]:{[Ge.E]:{unlocks:{}},[Ge.E_PLUS]:{unlocks:{}},[Ge.D]:{unlocks:{}},[Ge.D_PLUS]:{unlocks:{},removes:{}},[Ge.C]:{unlocks:{combatSkills:{[We.WEIGHT_MINUS_3]:1}}},[Ge.C_PLUS]:{unlocks:{},removes:{}},[Ge.B]:{unlocks:{}},[Ge.B_PLUS]:{unlocks:{},removes:{}},[Ge.A]:{unlocks:{}},[Ge.A_PLUS]:{unlocks:{},removes:{}},[Ge.S]:{unlocks:{}}},[ne.RIDING]:{[Ge.E]:{unlocks:{}},[Ge.E_PLUS]:{unlocks:{}},[Ge.D]:{unlocks:{}},[Ge.D_PLUS]:{unlocks:{combatSkills:{}},removes:{combatSkills:{}}},[Ge.C]:{unlocks:{combatSkills:{[We.AGILE_RIDER]:1}}},[Ge.C_PLUS]:{unlocks:{combatSkills:{}},removes:{combatSkills:{}}},[Ge.B]:{unlocks:{}},[Ge.B_PLUS]:{unlocks:{combatSkills:{}},removes:{combatSkills:{}}},[Ge.A]:{unlocks:{}},[Ge.A_PLUS]:{unlocks:{combatSkills:{}},removes:{combatSkills:{}}},[Ge.S]:{unlocks:{}}},[ne.REASON]:{[Ge.E]:{unlocks:{}},[Ge.E_PLUS]:{unlocks:{combatSkills:{[We.REASON_PROWESS_1]:1}}},[Ge.D]:{unlocks:{pickOne:[{type:mn.Weapon,options:[Ae.FIRE,Ae.WIND,Ae.THUNDER,Ae.BLIZZARD]}]}},[Ge.D_PLUS]:{unlocks:{combatSkills:{[We.REASON_PROWESS_2]:1}},removes:{combatSkills:{[We.REASON_PROWESS_1]:1}}},[Ge.C]:{unlocks:{pickOne:[{type:mn.Weapon,options:[Ae.CUTTING_GALE,Ae.THORON,Ae.SAGITTAE,Ae.BOLGANONE,Ae.HAILSTORM]}]}},[Ge.C_PLUS]:{unlocks:{combatSkills:{[We.REASON_PROWESS_3]:1}},removes:{combatSkills:{[We.REASON_PROWESS_2]:1}}},[Ge.B]:{unlocks:{pickOne:[{type:mn.Weapon,options:[Ae.SAGITTAE,Ae.BOLGANONE,Ae.BANSHEE]}]}},[Ge.B_PLUS]:{unlocks:{combatSkills:{[We.REASON_PROWESS_4]:1}},removes:{combatSkills:{[We.REASON_PROWESS_3]:1}}},[Ge.A]:{unlocks:{pickOne:[{type:mn.Weapon,options:[Ae.RAGNAROK,Ae.METEOR,Ae.BOLTING,Ae.EXCALIBUR,Ae.FIMBULVETR,Ae.AGNEAS_ARROW,Ae.DARK_SPIKES]}]}},[Ge.A_PLUS]:{unlocks:{combatSkills:{[We.REASON_PROWESS_5]:1}},removes:{combatSkills:{[We.REASON_PROWESS_4]:1}}},[Ge.S]:{unlocks:{}}},[ne.FAITH]:{[Ge.E]:{unlocks:{}},[Ge.E_PLUS]:{unlocks:{combatSkills:{[We.FAITH_PROWESS_1]:1}}},[Ge.D]:{unlocks:{weapons:{[Ae.HEAL]:1}}},[Ge.D_PLUS]:{unlocks:{combatSkills:{[We.FAITH_PROWESS_2]:1},weapons:{[Ae.NOSFERATU]:1}},removes:{combatSkills:{[We.FAITH_PROWESS_1]:1}}},[Ge.C]:{unlocks:{pickOne:[{type:mn.Weapon,options:[Ae.PHYSIC,Ae.RECOVER,Ae.RESTORE,Ae.WARD]}]}},[Ge.C_PLUS]:{unlocks:{combatSkills:{[We.FAITH_PROWESS_3]:1}},removes:{combatSkills:{[We.FAITH_PROWESS_2]:1}}},[Ge.B]:{unlocks:{pickOne:[{type:mn.Weapon,options:[Ae.SERAPHIM,Ae.SILENCE]}]}},[Ge.B_PLUS]:{unlocks:{combatSkills:{[We.FAITH_PROWESS_4]:1}},removes:{combatSkills:{[We.FAITH_PROWESS_3]:1}}},[Ge.A]:{unlocks:{pickOne:[{type:mn.Weapon,options:[Ae.ABRAXAS,Ae.AURA]}]}},[Ge.A_PLUS]:{unlocks:{combatSkills:{[We.FAITH_PROWESS_5]:1}},removes:{combatSkills:{[We.FAITH_PROWESS_4]:1}}},[Ge.S]:{unlocks:{}}},[ne.LEADERSHIP]:{[Ge.E]:{unlocks:{}},[Ge.E_PLUS]:{unlocks:{combatSkills:{[We.LEADERSHIP_PROWESS_1]:1}}},[Ge.D]:{unlocks:{}},[Ge.D_PLUS]:{unlocks:{combatSkills:{[We.LEADERSHIP_PROWESS_2]:1}},removes:{combatSkills:{[We.LEADERSHIP_PROWESS_1]:1}}},[Ge.C]:{unlocks:{}},[Ge.C_PLUS]:{unlocks:{combatSkills:{[We.LEADERSHIP_PROWESS_3]:1}},removes:{combatSkills:{[We.LEADERSHIP_PROWESS_2]:1}}},[Ge.B]:{unlocks:{}},[Ge.B_PLUS]:{unlocks:{combatSkills:{[We.LEADERSHIP_PROWESS_4]:1}},removes:{combatSkills:{[We.LEADERSHIP_PROWESS_3]:1}}},[Ge.A]:{unlocks:{}},[Ge.A_PLUS]:{unlocks:{combatSkills:{[We.LEADERSHIP_PROWESS_5]:1}},removes:{combatSkills:{[We.LEADERSHIP_PROWESS_4]:1}}},[Ge.S]:{unlocks:{}}}},po=3,go=5,Vl=3,Z4=2,c7=2,u7=1,f7=1,h7=1,kv={[Ke.STR]:10,[Ke.DEX]:10,[Ke.CON]:10,[Ke.INT]:10,[Ke.WIS]:10,[Ke.CHA]:10},x4={},$4={},Zg=5,xg=4,$g=8,e1=0,t1=0,xi={MODAL:"simple-modal",DB:"db"},jc={assetPath:`${mI}/assets/dice-box/`,id:"dice-canvas",theme:"default",themeColor:"#FF0000",friction:.9,scale:10,gravity:5,mass:8,linearDamping:.6,angularDamping:.6,spinForce:1,throwForce:15,shadowTransparency:.6,startingHeight:5};function d7(n){let e,t;return{c(){e=C("div"),t=z("Attack"),this.h()},l(i){e=k(i,"DIV",{class:!0});var s=T(e);t=G(s,"Attack"),s.forEach(b),this.h()},h(){S(e,"class","attack svelte-kcenq0")},m(i,s){X(i,e,s),p(e,t)},d(i){i&&b(e)}}}function m7(n){let e,t;return{c(){e=C("div"),t=z("Crit"),this.h()},l(i){e=k(i,"DIV",{class:!0});var s=T(e);t=G(s,"Crit"),s.forEach(b),this.h()},h(){S(e,"class","Crit svelte-kcenq0")},m(i,s){X(i,e,s),p(e,t)},d(i){i&&b(e)}}}function p7(n){let e,t,i=(n[9]||"")+"",s;return{c(){e=C("div"),t=z("Crest of "),s=z(i),this.h()},l(r){e=k(r,"DIV",{class:!0});var o=T(e);t=G(o,"Crest of "),s=G(o,i),o.forEach(b),this.h()},h(){S(e,"class","Crest svelte-kcenq0")},m(r,o){X(r,e,o),p(e,t),p(e,s)},p:Xe,d(r){r&&b(e)}}}function g7(n){let e,t=n[10]?"HP Restored":n[11]?"":"Damage",i;return{c(){e=C("div"),i=z(t),this.h()},l(s){e=k(s,"DIV",{class:!0});var r=T(e);i=G(r,t),r.forEach(b),this.h()},h(){S(e,"class","Damage svelte-kcenq0")},m(s,r){X(s,e,r),p(e,i)},p:Xe,d(s){s&&b(e)}}}function v7(n){let e,t;return{c(){e=C("div"),t=z(n[5]),this.h()},l(i){e=k(i,"DIV",{class:!0});var s=T(e);t=G(s,n[5]),s.forEach(b),this.h()},h(){S(e,"class","attack svelte-kcenq0")},m(i,s){X(i,e,s),p(e,t)},p:Xe,d(i){i&&b(e)}}}function ly(n){let e,t,i,s,r,o,l,a=n[6]&&b7(),c=n[7]&&_7(),u=n[8]!==void 0&&y7();return{c(){a&&a.c(),e=F(),c&&c.c(),t=F(),u&&u.c(),i=F(),s=C("div"),r=z("Click to reveal"),this.h()},l(f){a&&a.l(f),e=j(f),c&&c.l(f),t=j(f),u&&u.l(f),i=j(f),s=k(f,"DIV",{class:!0});var h=T(s);r=G(h,"Click to reveal"),h.forEach(b),this.h()},h(){S(s,"class","spoiler svelte-kcenq0"),ct(s,"left",n[3])},m(f,h){a&&a.m(f,h),X(f,e,h),c&&c.m(f,h),X(f,t,h),u&&u.m(f,h),X(f,i,h),X(f,s,h),p(s,r),o||(l=Se(s,"click",n[16]),o=!0)},p(f,h){h&8&&ct(s,"left",f[3])},d(f){a&&a.d(f),f&&b(e),c&&c.d(f),f&&b(t),u&&u.d(f),f&&b(i),f&&b(s),o=!1,l()}}}function b7(n){let e;return{c(){e=C("div"),this.h()},l(t){e=k(t,"DIV",{class:!0}),T(e).forEach(b),this.h()},h(){S(e,"class","svelte-kcenq0")},m(t,i){X(t,e,i)},d(t){t&&b(e)}}}function _7(n){let e;return{c(){e=C("div"),this.h()},l(t){e=k(t,"DIV",{class:!0}),T(e).forEach(b),this.h()},h(){S(e,"class","svelte-kcenq0")},m(t,i){X(t,e,i)},d(t){t&&b(e)}}}function y7(n){let e;return{c(){e=C("div"),this.h()},l(t){e=k(t,"DIV",{class:!0}),T(e).forEach(b),this.h()},h(){S(e,"class","svelte-kcenq0")},m(t,i){X(t,e,i)},d(t){t&&b(e)}}}function ay(n){let e,t,i,s=n[6]&&S7(n),r=n[7]&&E7(n),o=n[8]!==void 0&&A7(n);return{c(){s&&s.c(),e=F(),r&&r.c(),t=F(),o&&o.c(),i=tt()},l(l){s&&s.l(l),e=j(l),r&&r.l(l),t=j(l),o&&o.l(l),i=tt()},m(l,a){s&&s.m(l,a),X(l,e,a),r&&r.m(l,a),X(l,t,a),o&&o.m(l,a),X(l,i,a)},p(l,a){l[6]&&s.p(l,a),l[7]&&r.p(l,a),l[8]!==void 0&&o.p(l,a)},d(l){s&&s.d(l),l&&b(e),r&&r.d(l),l&&b(t),o&&o.d(l),l&&b(i)}}}function S7(n){let e,t;return{c(){e=C("div"),t=z(n[6]),this.h()},l(i){e=k(i,"DIV",{class:!0});var s=T(e);t=G(s,n[6]),s.forEach(b),this.h()},h(){S(e,"class","Crit svelte-kcenq0")},m(i,s){X(i,e,s),p(e,t)},p:Xe,d(i){i&&b(e)}}}function E7(n){let e,t;return{c(){e=C("div"),t=z(n[7]),this.h()},l(i){e=k(i,"DIV",{class:!0});var s=T(e);t=G(s,n[7]),s.forEach(b),this.h()},h(){S(e,"class","Crest svelte-kcenq0")},m(i,s){X(i,e,s),p(e,t)},p:Xe,d(i){i&&b(e)}}}function A7(n){let e,t;return{c(){e=C("div"),t=z(n[8]),this.h()},l(i){e=k(i,"DIV",{class:!0});var s=T(e);t=G(s,n[8]),s.forEach(b),this.h()},h(){S(e,"class","Damage svelte-kcenq0")},m(i,s){X(i,e,s),p(e,t)},p:Xe,d(i){i&&b(e)}}}function w7(n){let e,t,i,s,r,o,l,a,c,u,f,h,d,m,g=n[5]!==void 0&&d7(),_=n[6]&&m7(),v=n[7]&&p7(n),y=n[8]!==void 0&&g7(n),E=n[5]!==void 0&&v7(n),w=n[2]&&ly(n),A=!n[2]&&ay(n);return{c(){e=C("div"),t=C("b"),i=z(n[4]),s=z(" - "),r=z(n[12]),o=F(),l=C("div"),g&&g.c(),a=F(),_&&_.c(),c=F(),v&&v.c(),u=F(),y&&y.c(),f=F(),h=C("div"),E&&E.c(),d=F(),w&&w.c(),m=F(),A&&A.c(),this.h()},l(I){e=k(I,"DIV",{class:!0});var R=T(e);t=k(R,"B",{class:!0});var D=T(t);i=G(D,n[4]),s=G(D," - "),r=G(D,n[12]),D.forEach(b),o=j(R),l=k(R,"DIV",{class:!0});var N=T(l);g&&g.l(N),a=j(N),_&&_.l(N),c=j(N),v&&v.l(N),u=j(N),y&&y.l(N),N.forEach(b),f=j(R),h=k(R,"DIV",{class:!0});var W=T(h);E&&E.l(W),d=j(W),w&&w.l(W),m=j(W),A&&A.l(W),W.forEach(b),R.forEach(b),this.h()},h(){S(t,"class","player svelte-kcenq0"),S(l,"class","rolls svelte-kcenq0"),S(h,"class","result svelte-kcenq0"),S(e,"class","container svelte-kcenq0")},m(I,R){X(I,e,R),p(e,t),p(t,i),p(t,s),p(t,r),p(e,o),p(e,l),g&&g.m(l,null),p(l,a),_&&_.m(l,null),p(l,c),v&&v.m(l,null),p(l,u),y&&y.m(l,null),p(e,f),p(e,h),E&&E.m(h,null),p(h,d),w&&w.m(h,null),p(h,m),A&&A.m(h,null)},p(I,[R]){I[7]&&v.p(I,R),I[8]!==void 0&&y.p(I,R),I[5]!==void 0&&E.p(I,R),I[2]?w?w.p(I,R):(w=ly(I),w.c(),w.m(h,m)):w&&(w.d(1),w=null),I[2]?A&&(A.d(1),A=null):A?A.p(I,R):(A=ay(I),A.c(),A.m(h,null))},i:Xe,o:Xe,d(I){I&&b(e),g&&g.d(),_&&_.d(),v&&v.d(),y&&y.d(),E&&E.d(),w&&w.d(),A&&A.d()}}}function C7(n,e,t){let i,s,{entry:r}=e,{spoilersOn:o}=e,{setAlreadyRevealed:l}=e,{index:a}=e;const{playerName:c="No Name",attackRoll:u,critRoll:f,crestRoll:h,damageRoll:d,crestName:m,isHealWeapon:g,isChat:_,attackName:v}=r;let y;Mi(()=>{t(2,y=o)});const E=()=>{t(2,y=!1),l(a)};return n.$$set=w=>{"entry"in w&&t(13,r=w.entry),"spoilersOn"in w&&t(14,o=w.spoilersOn),"setAlreadyRevealed"in w&&t(0,l=w.setAlreadyRevealed),"index"in w&&t(1,a=w.index)},n.$$.update=()=>{n.$$.dirty&49152&&t(3,s=o?i():0)},t(15,i=()=>{const w=u===void 0,A=(f?1:0)+(h?1:0)+(d!==void 0?1:0);return w?"0":A===1?"50%":A===2?"33%":"25%"}),[l,a,y,s,c,u,f,h,d,m,g,_,v,r,o,i,E]}class k7 extends rt{constructor(e){super(),ot(this,e,C7,w7,It,{entry:13,spoilersOn:14,setAlreadyRevealed:0,index:1})}}const I7=n=>({}),cy=n=>({}),T7=n=>({}),uy=n=>({});function fy(n){let e,t,i,s,r,o;const l=n[16].t,a=cs(l,n,n[15],uy),c=a||O7();return{c(){e=C("div"),t=C("div"),i=C("div"),c&&c.c(),this.h()},l(u){e=k(u,"DIV",{class:!0});var f=T(e);t=k(f,"DIV",{class:!0,style:!0});var h=T(t);i=k(h,"DIV",{class:!0});var d=T(i);c&&c.l(d),d.forEach(b),h.forEach(b),f.forEach(b),this.h()},h(){S(i,"class",s=xe(`${n[1]} ${n[5]} TOOLTIP_tooltip_container ${n[0]}`)+" svelte-16reexv"),S(t,"class",r=xe(`TOOLTIP_tooltip-positioner ${n[0]}`)+" svelte-16reexv"),S(t,"style",n[3]),S(e,"class","hidden svelte-16reexv")},m(u,f){X(u,e,f),p(e,t),p(t,i),c&&c.m(i,null),n[17](e),o=!0},p(u,f){a&&a.p&&(!o||f&32768)&&us(a,l,u,u[15],o?hs(l,u[15],f,T7):fs(u[15]),uy),(!o||f&35&&s!==(s=xe(`${u[1]} ${u[5]} TOOLTIP_tooltip_container ${u[0]}`)+" svelte-16reexv"))&&S(i,"class",s),(!o||f&1&&r!==(r=xe(`TOOLTIP_tooltip-positioner ${u[0]}`)+" svelte-16reexv"))&&S(t,"class",r),(!o||f&8)&&S(t,"style",u[3])},i(u){o||(B(c,u),o=!0)},o(u){Q(c,u),o=!1},d(u){u&&b(e),c&&c.d(u),n[17](null)}}}function O7(n){let e;return{c(){e=z("tooltip")},l(t){e=G(t,"tooltip")},m(t,i){X(t,e,i)},d(t){t&&b(e)}}}function hy(n){let e,t,i,s,r,o;const l=n[16].t,a=cs(l,n,n[15],cy),c=a||R7();return{c(){e=C("div"),t=C("div"),i=C("div"),c&&c.c(),this.h()},l(u){e=k(u,"DIV",{class:!0});var f=T(e);t=k(f,"DIV",{class:!0,style:!0});var h=T(t);i=k(h,"DIV",{class:!0});var d=T(i);c&&c.l(d),d.forEach(b),h.forEach(b),f.forEach(b),this.h()},h(){S(i,"class",s=xe(`${n[1]} ${n[5]} TOOLTIP_tooltip_container ${n[0]}`)+" svelte-16reexv"),S(t,"class",r=xe(`TOOLTIP_tooltip-positioner ${n[0]}`)+" svelte-16reexv"),S(t,"style",n[3]),S(e,"class","hidden svelte-16reexv")},m(u,f){X(u,e,f),p(e,t),p(t,i),c&&c.m(i,null),n[18](e),o=!0},p(u,f){a&&a.p&&(!o||f&32768)&&us(a,l,u,u[15],o?hs(l,u[15],f,I7):fs(u[15]),cy),(!o||f&35&&s!==(s=xe(`${u[1]} ${u[5]} TOOLTIP_tooltip_container ${u[0]}`)+" svelte-16reexv"))&&S(i,"class",s),(!o||f&1&&r!==(r=xe(`TOOLTIP_tooltip-positioner ${u[0]}`)+" svelte-16reexv"))&&S(t,"class",r),(!o||f&8)&&S(t,"style",u[3])},i(u){o||(B(c,u),o=!0)},o(u){Q(c,u),o=!1},d(u){u&&b(e),c&&c.d(u),n[18](null)}}}function R7(n){let e;return{c(){e=z("tooltip")},l(t){e=G(t,"tooltip")},m(t,i){X(t,e,i)},d(t){t&&b(e)}}}function D7(n){let e,t,i,s,r=n[2]&&fy(n);const o=n[16].default,l=cs(o,n,n[15],null);let a=!n[2]&&hy(n);return{c(){r&&r.c(),e=F(),l&&l.c(),t=F(),a&&a.c(),i=tt()},l(c){r&&r.l(c),e=j(c),l&&l.l(c),t=j(c),a&&a.l(c),i=tt()},m(c,u){r&&r.m(c,u),X(c,e,u),l&&l.m(c,u),X(c,t,u),a&&a.m(c,u),X(c,i,u),s=!0},p(c,[u]){c[2]?r?(r.p(c,u),u&4&&B(r,1)):(r=fy(c),r.c(),B(r,1),r.m(e.parentNode,e)):r&&(He(),Q(r,1,1,()=>{r=null}),qe()),l&&l.p&&(!s||u&32768)&&us(l,o,c,c[15],s?hs(o,c[15],u,null):fs(c[15]),null),c[2]?a&&(He(),Q(a,1,1,()=>{a=null}),qe()):a?(a.p(c,u),u&4&&B(a,1)):(a=hy(c),a.c(),B(a,1),a.m(i.parentNode,i))},i(c){s||(B(r),B(l,c),B(a),s=!0)},o(c){Q(r),Q(l,c),Q(a),s=!1},d(c){r&&r.d(c),c&&b(e),l&&l.d(c),c&&b(t),a&&a.d(c),c&&b(i)}}}function N7(n,e,t){let i,s,r,{$$slots:o={},$$scope:l}=e,{timeout:a=500}=e,{tooltipStyle:c=is.RIGHT_START}=e,{tooltipClass:u=""}=e,{showing:f=!1}=e,{disabled:h=!1}=e,{hiddenFirst:d=!1}=e,{tooltipPositionerStyle:m=""}=e;const g={current:h};let _=!1;const v={current:null};let y;const E={current:null,mouseEnterListener:null,mouseLeaveListener:null};_r(()=>{if(E.current){const I=E.current;I.removeEventListener("mouseover",E.mouseEnterListener),I.removeEventListener("mouseleave",E.mouseLeaveListener)}});function w(I){Vt[I?"unshift":"push"](()=>{y=I,t(4,y)})}function A(I){Vt[I?"unshift":"push"](()=>{y=I,t(4,y)})}return n.$$set=I=>{"timeout"in I&&t(6,a=I.timeout),"tooltipStyle"in I&&t(0,c=I.tooltipStyle),"tooltipClass"in I&&t(1,u=I.tooltipClass),"showing"in I&&t(7,f=I.showing),"disabled"in I&&t(8,h=I.disabled),"hiddenFirst"in I&&t(2,d=I.hiddenFirst),"tooltipPositionerStyle"in I&&t(3,m=I.tooltipPositionerStyle),"$$scope"in I&&t(15,l=I.$$scope)},n.$$.update=()=>{var I;if(n.$$.dirty&20&&t(14,i=d?y==null?void 0:y.nextElementSibling:y==null?void 0:y.previousElementSibling),n.$$.dirty&16&&t(13,r=y==null?void 0:y.childNodes[0]),n.$$.dirty&31552){if(i&&(E.current!==i||g.current!==h)){const R=()=>{t(11,v.current=setTimeout(()=>{t(10,_=!0),i!=null&&i.style&&t(14,i.style.zIndex=1,i),t(11,v.current=null,v)},a),v)},D=()=>{v.current&&clearTimeout(v.current),t(10,_=!1),i!=null&&i.style&&t(14,i.style.zIndex=0,i)},N=E.current;N&&(N.removeEventListener("mouseenter",E.mouseEnterListener),N.removeEventListener("mouseleave",E.mouseLeaveListener)),h?t(14,i.id="",i):(t(14,i.id+="TOOLTIP_container",i),t(12,E.current=i,E),t(12,E.mouseEnterListener=R,E),t(12,E.mouseLeaveListener=D,E),i==null||i.addEventListener("mouseenter",R),i==null||i.addEventListener("mouseleave",D))}t(9,g.current=h,g)}if(n.$$.dirty&16384&&t(5,s=(I=i==null?void 0:i.className.split(" "))==null?void 0:I.find(R=>R.indexOf("s-")===0)),n.$$.dirty&25760&&i)if(f||_)i==null||i.appendChild(r);else try{i==null||i.removeChild(r)}catch{}},[c,u,d,m,y,s,a,f,h,g,_,v,E,r,i,l,o,w,A]}class fi extends rt{constructor(e){super(),ot(this,e,N7,D7,It,{timeout:6,tooltipStyle:0,tooltipClass:1,showing:7,disabled:8,hiddenFirst:2,tooltipPositionerStyle:3})}}function P7(n){let e,t;return{c(){e=C("span"),t=z(n[3])},l(i){e=k(i,"SPAN",{});var s=T(e);t=G(s,n[3]),s.forEach(b)},m(i,s){X(i,e,s),p(e,t)},p(i,s){s&8&&Be(t,i[3])},d(i){i&&b(e)}}}function M7(n){let e,t;return{c(){e=C("div"),t=z(n[4]),this.h()},l(i){e=k(i,"DIV",{slot:!0});var s=T(e);t=G(s,n[4]),s.forEach(b),this.h()},h(){S(e,"slot","t")},m(i,s){X(i,e,s),p(e,t)},p(i,s){s&16&&Be(t,i[4])},d(i){i&&b(e)}}}function B7(n){let e,t,i,s,r,o,l=os(n[2])+"",a,c,u,f,h,d,m,g,_,v,y,E;return y=new fi({props:{tooltipStyle:is.CENTER,$$slots:{t:[M7],default:[P7]},$$scope:{ctx:n}}}),{c(){e=C("div"),t=C("b"),i=z(n[0]),s=z(" - "),r=z(n[1]),o=z(" ("),a=z(l),c=z(")"),u=F(),f=C("div"),h=C("div"),d=z("Result"),g=F(),_=C("div"),v=C("div"),Te(y.$$.fragment),this.h()},l(w){e=k(w,"DIV",{class:!0});var A=T(e);t=k(A,"B",{class:!0});var I=T(t);i=G(I,n[0]),s=G(I," - "),r=G(I,n[1]),o=G(I," ("),a=G(I,l),c=G(I,")"),I.forEach(b),u=j(A),f=k(A,"DIV",{class:!0,id:!0});var R=T(f);h=k(R,"DIV",{class:!0});var D=T(h);d=G(D,"Result"),D.forEach(b),R.forEach(b),g=j(A),_=k(A,"DIV",{class:!0});var N=T(_);v=k(N,"DIV",{class:!0});var W=T(v);De(y.$$.fragment,W),W.forEach(b),N.forEach(b),A.forEach(b),this.h()},h(){S(t,"class","player svelte-128nkkc"),S(h,"class","attack svelte-128nkkc"),S(f,"class","rolls svelte-128nkkc"),S(f,"id",m=`chat-entry-${n[5]}`),S(v,"class","attack svelte-128nkkc"),S(_,"class","result svelte-128nkkc"),S(e,"class","container svelte-128nkkc")},m(w,A){X(w,e,A),p(e,t),p(t,i),p(t,s),p(t,r),p(t,o),p(t,a),p(t,c),p(e,u),p(e,f),p(f,h),p(h,d),p(e,g),p(e,_),p(_,v),Oe(y,v,null),E=!0},p(w,[A]){(!E||A&1)&&Be(i,w[0]),(!E||A&2)&&Be(r,w[1]),(!E||A&4)&&l!==(l=os(w[2])+"")&&Be(a,l),(!E||A&32&&m!==(m=`chat-entry-${w[5]}`))&&S(f,"id",m);const I={};A&88&&(I.$$scope={dirty:A,ctx:w}),y.$set(I)},i(w){E||(B(y.$$.fragment,w),E=!0)},o(w){Q(y.$$.fragment,w),E=!1},d(w){w&&b(e),Re(y)}}}function L7(n,e,t){let{playerName:i="No Name"}=e,{rollName:s="Basic Roll"}=e,{rollBonus:r=0}=e,{roll:o="-"}=e,{rollTooltip:l="n/a"}=e,{date:a}=e;return n.$$set=c=>{"playerName"in c&&t(0,i=c.playerName),"rollName"in c&&t(1,s=c.rollName),"rollBonus"in c&&t(2,r=c.rollBonus),"roll"in c&&t(3,o=c.roll),"rollTooltip"in c&&t(4,l=c.rollTooltip),"date"in c&&t(5,a=c.date)},[i,s,r,o,l,a]}class W7 extends rt{constructor(e){super(),ot(this,e,L7,B7,It,{playerName:0,rollName:1,rollBonus:2,roll:3,rollTooltip:4,date:5})}}function dy(n,e,t){var r;const i=n.slice();i[16]=e[t],i[19]=t;const s=((r=i[16])==null?void 0:r.type)||"BASIC_ROLL";return i[17]=s,i}function my(n){let e,t;return{c(){e=C("div"),t=z("Loading")},l(i){e=k(i,"DIV",{});var s=T(e);t=G(s,"Loading"),s.forEach(b)},m(i,s){X(i,e,s),p(e,t)},d(i){i&&b(e)}}}function py(n){let e,t,i=n[0],s=[];for(let o=0;o<i.length;o+=1)s[o]=by(dy(n,i,o));const r=o=>Q(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();e=tt()},l(o){for(let l=0;l<s.length;l+=1)s[l].l(o);e=tt()},m(o,l){for(let a=0;a<s.length;a+=1)s[a].m(o,l);X(o,e,l),t=!0},p(o,l){if(l&27){i=o[0];let a;for(a=0;a<i.length;a+=1){const c=dy(o,i,a);s[a]?(s[a].p(c,l),B(s[a],1)):(s[a]=by(c),s[a].c(),B(s[a],1),s[a].m(e.parentNode,e))}for(He(),a=i.length;a<s.length;a+=1)r(a);qe()}},i(o){if(!t){for(let l=0;l<i.length;l+=1)B(s[l]);t=!0}},o(o){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)Q(s[l]);t=!1},d(o){Ht(s,o),o&&b(e)}}}function gy(n){let e,t;const i=[n[16]];let s={};for(let r=0;r<i.length;r+=1)s=Qr(s,i[r]);return e=new W7({props:s}),{c(){Te(e.$$.fragment)},l(r){De(e.$$.fragment,r)},m(r,o){Oe(e,r,o),t=!0},p(r,o){const l=o&1?Yr(i,[Zl(r[16])]):{};e.$set(l)},i(r){t||(B(e.$$.fragment,r),t=!0)},o(r){Q(e.$$.fragment,r),t=!1},d(r){Re(e,r)}}}function vy(n){let e,t;return e=new k7({props:{entry:n[16],spoilersOn:n[1]!==1/0&&n[19]>=n[1]&&n[3][n[19]]!==!0,index:n[19],setAlreadyRevealed:n[4]}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,s){const r={};s&1&&(r.entry=i[16]),s&10&&(r.spoilersOn=i[1]!==1/0&&i[19]>=i[1]&&i[3][i[19]]!==!0),s&16&&(r.setAlreadyRevealed=i[4]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function by(n){let e,t,i,s=n[17]==="BASIC_ROLL"&&gy(n),r=n[17]!=="BASIC_ROLL"&&vy(n);return{c(){s&&s.c(),e=F(),r&&r.c(),t=tt()},l(o){s&&s.l(o),e=j(o),r&&r.l(o),t=tt()},m(o,l){s&&s.m(o,l),X(o,e,l),r&&r.m(o,l),X(o,t,l),i=!0},p(o,l){o[17]==="BASIC_ROLL"?s?(s.p(o,l),l&1&&B(s,1)):(s=gy(o),s.c(),B(s,1),s.m(e.parentNode,e)):s&&(He(),Q(s,1,1,()=>{s=null}),qe()),o[17]!=="BASIC_ROLL"?r?(r.p(o,l),l&1&&B(r,1)):(r=vy(o),r.c(),B(r,1),r.m(t.parentNode,t)):r&&(He(),Q(r,1,1,()=>{r=null}),qe())},i(o){i||(B(s),B(r),i=!0)},o(o){Q(s),Q(r),i=!1},d(o){s&&s.d(o),o&&b(e),r&&r.d(o),o&&b(t)}}}function U7(n){var Y;let e,t,i,s,r=(((Y=n[0])==null?void 0:Y.length)||"-")+"",o,l,a,c,u,f,h,d,m,g,_,v,y,E,w,A,I,R,D,N,W,H=!n[0]&&my(),P=n[0]&&py(n);return{c(){e=C("div"),t=C("div"),i=C("h3"),s=z("Roll Chat (total entries: "),o=z(r),l=z(")"),a=F(),c=C("div"),u=C("span"),f=z("Chat here:"),h=F(),d=C("input"),m=F(),g=C("div"),_=C("span"),v=z("Hide Damage Initially?"),y=F(),E=C("input"),A=F(),I=C("div"),H&&H.c(),R=F(),P&&P.c(),this.h()},l(O){e=k(O,"DIV",{class:!0});var L=T(e);t=k(L,"DIV",{});var U=T(t);i=k(U,"H3",{});var K=T(i);s=G(K,"Roll Chat (total entries: "),o=G(K,r),l=G(K,")"),K.forEach(b),a=j(U),c=k(U,"DIV",{});var te=T(c);u=k(te,"SPAN",{});var q=T(u);f=G(q,"Chat here:"),q.forEach(b),h=j(te),d=k(te,"INPUT",{}),te.forEach(b),U.forEach(b),m=j(L),g=k(L,"DIV",{});var x=T(g);_=k(x,"SPAN",{});var Z=T(_);v=G(Z,"Hide Damage Initially?"),Z.forEach(b),y=j(x),E=k(x,"INPUT",{type:!0}),x.forEach(b),A=j(L),I=k(L,"DIV",{class:!0,id:!0});var V=T(I);H&&H.l(V),R=j(V),P&&P.l(V),V.forEach(b),L.forEach(b),this.h()},h(){ct(t,"width","100%"),S(E,"type","checkbox"),E.checked=w=n[1]!==1/0,S(I,"class","scroll-container svelte-ph62s6"),S(I,"id","test"),S(e,"class","container svelte-ph62s6")},m(O,L){X(O,e,L),p(e,t),p(t,i),p(i,s),p(i,o),p(i,l),p(t,a),p(t,c),p(c,u),p(u,f),p(c,h),p(c,d),ds(d,n[6]),p(e,m),p(e,g),p(g,_),p(_,v),p(g,y),p(g,E),p(e,A),p(e,I),H&&H.m(I,null),p(I,R),P&&P.m(I,null),n[13](I),D=!0,N||(W=[Se(d,"input",n[12]),Se(d,"keyup",n[7]),Se(E,"click",function(){Bn(n[2])&&n[2].apply(this,arguments)})],N=!0)},p(O,[L]){var U;n=O,(!D||L&1)&&r!==(r=(((U=n[0])==null?void 0:U.length)||"-")+"")&&Be(o,r),L&64&&d.value!==n[6]&&ds(d,n[6]),(!D||L&2&&w!==(w=n[1]!==1/0))&&(E.checked=w),n[0]?H&&(H.d(1),H=null):H||(H=my(),H.c(),H.m(I,R)),n[0]?P?(P.p(n,L),L&1&&B(P,1)):(P=py(n),P.c(),B(P,1),P.m(I,null)):P&&(He(),Q(P,1,1,()=>{P=null}),qe())},i(O){D||(B(P),D=!0)},o(O){Q(P),D=!1},d(O){O&&b(e),H&&H.d(),P&&P.d(),n[13](null),N=!1,an(W)}}}function V7(n,e,t){const i=Nn(xi.DB);let{playerName:s}=e,{chatEntries:r}=e,{spoilersOn:o}=e,{toggleSpoilersOn:l}=e,{alreadyRevealed:a}=e,{setAlreadyRevealed:c}=e,u,f="",h=-1,d=!1,m,g=new Audio("beep.ogg");Mi(()=>{t(10,d=!0),t(11,m=r.length)});let _=E=>{if(E.key!="Enter")return;km(i,{playerName:s,type:"ATTACK_ROLL",attackName:"says",damageRoll:f,isChat:!0})};function v(){f=this.value,t(6,f)}function y(E){Vt[E?"unshift":"push"](()=>{u=E,t(5,u),t(0,r),t(9,h)})}return n.$$set=E=>{"playerName"in E&&t(8,s=E.playerName),"chatEntries"in E&&t(0,r=E.chatEntries),"spoilersOn"in E&&t(1,o=E.spoilersOn),"toggleSpoilersOn"in E&&t(2,l=E.toggleSpoilersOn),"alreadyRevealed"in E&&t(3,a=E.alreadyRevealed),"setAlreadyRevealed"in E&&t(4,c=E.setAlreadyRevealed)},n.$$.update=()=>{n.$$.dirty&545&&u&&h!==(r==null?void 0:r.length)&&(Math.abs((u==null?void 0:u.scrollHeight)-(u==null?void 0:u.scrollTop)-(u==null?void 0:u.clientHeight))<1||h===-1?window.requestAnimationFrame(()=>{t(5,u.scrollTop=u.scrollHeight,u),t(9,h=r.length)}):t(9,h=r.length)),n.$$.dirty&3073&&d&&m!==r.length&&g.play()},[r,o,l,a,c,u,f,_,s,h,d,m,v,y]}class eO extends rt{constructor(e){super(),ot(this,e,V7,U7,It,{playerName:8,chatEntries:0,spoilersOn:1,toggleSpoilersOn:2,alreadyRevealed:3,setAlreadyRevealed:4})}}function _y(n,e,t){const i=n.slice();return i[20]=e[t],i}function yy(n,e,t){const i=n.slice();return i[23]=e[t],i}function Sy(n){var l;let e,t=((l=n[3][n[23]])==null?void 0:l.label)+"",i,s,r,o;return{c(){e=C("option"),i=z(t),s=F(),this.h()},l(a){e=k(a,"OPTION",{});var c=T(e);i=G(c,t),s=j(c),c.forEach(b),this.h()},h(){e.__value=r=n[23],e.value=e.__value,e.selected=o=n[1]===n[23]},m(a,c){X(a,e,c),p(e,i),p(e,s)},p(a,c){var u;c&1032&&t!==(t=((u=a[3][a[23]])==null?void 0:u.label)+"")&&Be(i,t),c&1024&&r!==(r=a[23])&&(e.__value=r,e.value=e.__value),c&1026&&o!==(o=a[1]===a[23])&&(e.selected=o)},d(a){a&&b(e)}}}function Ey(n){let e,t,i,s,r,o=n[10],l=[];for(let a=0;a<o.length;a+=1)l[a]=Sy(yy(n,o,a));return{c(){e=C("select"),t=C("option"),i=z("- ");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){e=k(a,"SELECT",{class:!0});var c=T(e);t=k(c,"OPTION",{});var u=T(t);i=G(u,"- "),u.forEach(b);for(let f=0;f<l.length;f+=1)l[f].l(c);c.forEach(b),this.h()},h(){t.__value="",t.value=t.__value,S(e,"class","svelte-xlcqi6")},m(a,c){X(a,e,c),p(e,t),p(t,i);for(let u=0;u<l.length;u+=1)l[u].m(e,null);s||(r=Se(e,"change",n[17]),s=!0)},p(a,c){if(c&1034){o=a[10];let u;for(u=0;u<o.length;u+=1){const f=yy(a,o,u);l[u]?l[u].p(f,c):(l[u]=Sy(f),l[u].c(),l[u].m(e,null))}for(;u<l.length;u+=1)l[u].d(1);l.length=o.length}},d(a){a&&b(e),Ht(l,a),s=!1,r()}}}function Ay(n){let e,t,i="Combat Art: ",s,r,o=n[8],l=Cy(n);return{c(){e=C("div"),t=C("span"),s=z(i),r=F(),l.c(),this.h()},l(a){e=k(a,"DIV",{class:!0});var c=T(e);t=k(c,"SPAN",{class:!0});var u=T(t);s=G(u,i),u.forEach(b),r=j(c),l.l(c),c.forEach(b),this.h()},h(){S(t,"class","label"),S(e,"class","selection svelte-xlcqi6")},m(a,c){X(a,e,c),p(e,t),p(t,s),p(e,r),l.m(e,null)},p(a,c){c&256&&It(o,o=a[8])?(l.d(1),l=Cy(a),l.c(),l.m(e,null)):l.p(a,c)},d(a){a&&b(e),l.d(a)}}}function wy(n){let e,t=n[9][n[20]].label+"",i,s,r,o;return{c(){e=C("option"),i=z(t),s=F(),this.h()},l(l){e=k(l,"OPTION",{});var a=T(e);i=G(a,t),s=j(a),a.forEach(b),this.h()},h(){e.__value=r=n[20],e.value=e.__value,e.selected=o=n[6]===n[20]},m(l,a){X(l,e,a),p(e,i),p(e,s)},p(l,a){a&768&&t!==(t=l[9][l[20]].label+"")&&Be(i,t),a&256&&r!==(r=l[20])&&(e.__value=r,e.value=e.__value),a&320&&o!==(o=l[6]===l[20])&&(e.selected=o)},d(l){l&&b(e)}}}function Cy(n){let e,t,i,s,r,o=n[8],l=[];for(let a=0;a<o.length;a+=1)l[a]=wy(_y(n,o,a));return{c(){e=C("select"),t=C("option"),i=z("- ");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){e=k(a,"SELECT",{class:!0});var c=T(e);t=k(c,"OPTION",{});var u=T(t);i=G(u,"- "),u.forEach(b);for(let f=0;f<l.length;f+=1)l[f].l(c);c.forEach(b),this.h()},h(){t.__value="",t.value=t.__value,S(e,"class","svelte-xlcqi6")},m(a,c){X(a,e,c),p(e,t),p(t,i);for(let u=0;u<l.length;u+=1)l[u].m(e,null);s||(r=Se(e,"change",n[18]),s=!0)},p(a,c){if(c&832){o=a[8];let u;for(u=0;u<o.length;u+=1){const f=_y(a,o,u);l[u]?l[u].p(f,c):(l[u]=wy(f),l[u].c(),l[u].m(e,null))}for(;u<l.length;u+=1)l[u].d(1);l.length=o.length}},d(a){a&&b(e),Ht(l,a),s=!1,r()}}}function F7(n){let e,t,i,s,r="Weapon: ",o,l,a=n[10],c,u,f,h,d,m,g,_,v,y,E=Ey(n),w=n[8].length>0&&Ay(n);return{c(){e=C("div"),t=C("div"),i=C("div"),s=C("span"),o=z(r),l=F(),E.c(),c=F(),u=C("div"),w&&w.c(),f=F(),h=C("div"),d=C("span"),m=z("Range"),g=F(),_=C("input"),this.h()},l(A){e=k(A,"DIV",{class:!0});var I=T(e);t=k(I,"DIV",{class:!0});var R=T(t);i=k(R,"DIV",{class:!0});var D=T(i);s=k(D,"SPAN",{class:!0});var N=T(s);o=G(N,r),N.forEach(b),l=j(D),E.l(D),D.forEach(b),R.forEach(b),c=j(I),u=k(I,"DIV",{class:!0});var W=T(u);w&&w.l(W),W.forEach(b),f=j(I),h=k(I,"DIV",{class:!0});var H=T(h);d=k(H,"SPAN",{});var P=T(d);m=G(P,"Range"),P.forEach(b),g=j(H),_=k(H,"INPUT",{type:!0,min:!0,class:!0}),H.forEach(b),I.forEach(b),this.h()},h(){S(s,"class","label"),S(i,"class","selection svelte-xlcqi6"),S(t,"class","entry svelte-xlcqi6"),S(u,"class","entry svelte-xlcqi6"),S(_,"type","number"),_.value=n[4],S(_,"min","0"),S(_,"class","svelte-xlcqi6"),S(h,"class","range-finder svelte-xlcqi6"),S(e,"class","container svelte-xlcqi6")},m(A,I){X(A,e,I),p(e,t),p(t,i),p(i,s),p(s,o),p(i,l),E.m(i,null),p(e,c),p(e,u),w&&w.m(u,null),p(e,f),p(e,h),p(h,d),p(d,m),p(h,g),p(h,_),v||(y=Se(_,"change",n[19]),v=!0)},p(A,[I]){I&1024&&It(a,a=A[10])?(E.d(1),E=Ey(A),E.c(),E.m(i,null)):E.p(A,I),A[8].length>0?w?w.p(A,I):(w=Ay(A),w.c(),w.m(u,null)):w&&(w.d(1),w=null),I&16&&_.value!==A[4]&&(_.value=A[4])},i:Xe,o:Xe,d(A){A&&b(e),E.d(A),w&&w.d(),v=!1,y()}}}function j7(n,e,t){let i,s,r,o,{equippedClass:l}=e,{allWeapons:a}=e,{equippedWeapons:c}=e,{selectedWeapon:u}=e,{setSelectedWeapon:f}=e,{damageTypeSelection:h}=e,{weaponsToFeatures:d}=e,{distanceToTarget:m}=e,{setDistanceToTarget:g}=e,{selectedCombatArt:_}=e,{setSelectedCombatArt:v}=e,{equippedCombatArts:y}=e,{allCombatArts:E}=e;const w=R=>{f(R.currentTarget.value),t(0,h="")},A=R=>{v(R.currentTarget.value)},I=R=>g(parseInt(R.currentTarget.value));return n.$$set=R=>{"equippedClass"in R&&t(11,l=R.equippedClass),"allWeapons"in R&&t(12,a=R.allWeapons),"equippedWeapons"in R&&t(13,c=R.equippedWeapons),"selectedWeapon"in R&&t(1,u=R.selectedWeapon),"setSelectedWeapon"in R&&t(2,f=R.setSelectedWeapon),"damageTypeSelection"in R&&t(0,h=R.damageTypeSelection),"weaponsToFeatures"in R&&t(3,d=R.weaponsToFeatures),"distanceToTarget"in R&&t(4,m=R.distanceToTarget),"setDistanceToTarget"in R&&t(5,g=R.setDistanceToTarget),"selectedCombatArt"in R&&t(6,_=R.selectedCombatArt),"setSelectedCombatArt"in R&&t(7,v=R.setSelectedCombatArt),"equippedCombatArts"in R&&t(14,y=R.equippedCombatArts),"allCombatArts"in R&&t(15,E=R.allCombatArts)},n.$$.update=()=>{var R;n.$$.dirty&10&&t(16,i=(R=d[u])==null?void 0:R.type),n.$$.dirty&14344&&t(10,s=[...c,...!l||Xt[l].canUseMagic===!0?a.fullArray.filter(D=>Im.includes(d[D].type)):[]]),n.$$.dirty&1030&&u&&!s.includes(u)&&f(""),n.$$.dirty&32768&&t(9,r=E.fullFeatures),n.$$.dirty&82432&&t(8,o=y.filter(D=>(r[D].compatibleWeapons||[]).indexOf(i)!==-1)),n.$$.dirty&448&&_&&!o.includes(_)&&v("")},[h,u,f,d,m,g,_,v,o,r,s,l,a,c,y,E,i,w,A,I]}class H7 extends rt{constructor(e){super(),ot(this,e,j7,F7,It,{equippedClass:11,allWeapons:12,equippedWeapons:13,selectedWeapon:1,setSelectedWeapon:2,damageTypeSelection:0,weaponsToFeatures:3,distanceToTarget:4,setDistanceToTarget:5,selectedCombatArt:6,setSelectedCombatArt:7,equippedCombatArts:14,allCombatArts:15})}}function ky(n){let e,t,i,s,r,o,l,a,c=n[11]&&Iy(n);return{c(){e=C("div"),t=C("h3"),i=z("Attack"),s=F(),r=C("div"),o=z(n[25]),l=F(),c&&c.c(),this.h()},l(u){e=k(u,"DIV",{class:!0});var f=T(e);t=k(f,"H3",{class:!0});var h=T(t);i=G(h,"Attack"),h.forEach(b),s=j(f),r=k(f,"DIV",{class:!0});var d=T(r);o=G(d,n[25]),d.forEach(b),l=j(f),c&&c.l(f),f.forEach(b),this.h()},h(){S(t,"class","svelte-inr05g"),S(r,"class","content svelte-inr05g"),S(e,"class","attack svelte-inr05g")},m(u,f){X(u,e,f),p(e,t),p(t,i),p(e,s),p(e,r),p(r,o),p(e,l),c&&c.m(e,null),a=!0},p(u,f){(!a||f[0]&33554432)&&Be(o,u[25]),u[11]?c?(c.p(u,f),f[0]&2048&&B(c,1)):(c=Iy(u),c.c(),B(c,1),c.m(e,null)):c&&(He(),Q(c,1,1,()=>{c=null}),qe())},i(u){a||(B(c),a=!0)},o(u){Q(c),a=!1},d(u){u&&b(e),c&&c.d()}}}function Iy(n){let e,t;return e=new fi({props:{$$slots:{t:[z7],default:[q7]},$$scope:{ctx:n}}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,s){const r={};s[0]&262144|s[2]&2&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function q7(n){let e,t,i,s;return{c(){e=C("button"),t=z("Re-roll"),this.h()},l(r){e=k(r,"BUTTON",{class:!0});var o=T(e);t=G(o,"Re-roll"),o.forEach(b),this.h()},h(){S(e,"class","re-roller svelte-inr05g")},m(r,o){X(r,e,o),p(e,t),i||(s=Se(e,"click",function(){Bn(n[18])&&n[18].apply(this,arguments)}),i=!0)},p(r,o){n=r},d(r){r&&b(e),i=!1,s()}}}function z7(n){let e,t;return{c(){e=C("div"),t=z(`Only meant to be used for advantage/disadvantage. Will not automatically decrement
									your superiority die or weapon uses`),this.h()},l(i){e=k(i,"DIV",{slot:!0,class:!0});var s=T(e);t=G(s,`Only meant to be used for advantage/disadvantage. Will not automatically decrement
									your superiority die or weapon uses`),s.forEach(b),this.h()},h(){S(e,"slot","t"),S(e,"class","svelte-inr05g")},m(i,s){X(i,e,s),p(e,t)},p:Xe,d(i){i&&b(e)}}}function Ty(n){let e,t,i,s,r,o,l;return{c(){e=C("div"),t=C("h3"),i=z("Crit Range"),s=F(),r=C("div"),o=C("span"),l=z(n[21]),this.h()},l(a){e=k(a,"DIV",{class:!0});var c=T(e);t=k(c,"H3",{class:!0});var u=T(t);i=G(u,"Crit Range"),u.forEach(b),s=j(c),r=k(c,"DIV",{class:!0});var f=T(r);o=k(f,"SPAN",{});var h=T(o);l=G(h,n[21]),h.forEach(b),f.forEach(b),c.forEach(b),this.h()},h(){S(t,"class","svelte-inr05g"),S(r,"class","content svelte-inr05g"),S(e,"class","crit svelte-inr05g")},m(a,c){X(a,e,c),p(e,t),p(t,i),p(e,s),p(e,r),p(r,o),p(o,l)},p(a,c){c[0]&2097152&&Be(l,a[21])},d(a){a&&b(e)}}}function Oy(n){let e,t;return e=new fi({props:{tooltipStyle:is.CENTER,$$slots:{t:[K7],default:[G7]},$$scope:{ctx:n}}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,s){const r={};s[0]&48|s[2]&2&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function Ry(n){let e,t,i;return{c(){e=C("span"),t=z("DC "),i=z(n[5])},l(s){e=k(s,"SPAN",{});var r=T(e);t=G(r,"DC "),i=G(r,n[5]),r.forEach(b)},m(s,r){X(s,e,r),p(e,t),p(e,i)},p(s,r){r[0]&32&&Be(i,s[5])},d(s){s&&b(e)}}}function G7(n){let e,t,i,s=Yg[n[4]]+"",r,o,l,a=n[5]&&n[5]<=20&&Ry(n);return{c(){e=C("div"),t=C("h3"),i=z("Crest of "),r=z(s),o=F(),l=C("div"),a&&a.c(),this.h()},l(c){e=k(c,"DIV",{class:!0});var u=T(e);t=k(u,"H3",{class:!0});var f=T(t);i=G(f,"Crest of "),r=G(f,s),f.forEach(b),o=j(u),l=k(u,"DIV",{class:!0});var h=T(l);a&&a.l(h),h.forEach(b),u.forEach(b),this.h()},h(){S(t,"class","svelte-inr05g"),S(l,"class","content svelte-inr05g"),S(e,"class","crest svelte-inr05g")},m(c,u){X(c,e,u),p(e,t),p(t,i),p(t,r),p(e,o),p(e,l),a&&a.m(l,null)},p(c,u){u[0]&16&&s!==(s=Yg[c[4]]+"")&&Be(r,s),c[5]&&c[5]<=20?a?a.p(c,u):(a=Ry(c),a.c(),a.m(l,null)):a&&(a.d(1),a=null)},d(c){c&&b(e),a&&a.d()}}}function K7(n){let e,t=Ns[n[4]].description+"",i;return{c(){e=C("div"),i=z(t),this.h()},l(s){e=k(s,"DIV",{slot:!0,class:!0});var r=T(e);i=G(r,t),r.forEach(b),this.h()},h(){S(e,"slot","t"),S(e,"class","svelte-inr05g")},m(s,r){X(s,e,r),p(e,i)},p(s,r){r[0]&16&&t!==(t=Ns[s[4]].description+"")&&Be(i,t)},d(s){s&&b(e)}}}function Dy(n){var f;let e,t,i=n[11]!==""&&n[12]!==""?`${n[11]} + ${n[12]} = ${n[11]+n[12]}`:"...",s,r,o,l,a=n[11]!==""&&((f=n[1].fullFeatures[n[8]])==null?void 0:f.description)&&Ny(n),c=n[16]>1&&Py(n),u=n[16]<1&&My();return{c(){e=C("div"),t=C("div"),s=z(i),r=F(),a&&a.c(),o=F(),c&&c.c(),l=F(),u&&u.c(),this.h()},l(h){e=k(h,"DIV",{class:!0});var d=T(e);t=k(d,"DIV",{});var m=T(t);s=G(m,i),m.forEach(b),r=j(d),a&&a.l(d),o=j(d),c&&c.l(d),l=j(d),u&&u.l(d),d.forEach(b),this.h()},h(){S(e,"class","attack svelte-inr05g")},m(h,d){X(h,e,d),p(e,t),p(t,s),p(e,r),a&&a.m(e,null),p(e,o),c&&c.m(e,null),p(e,l),u&&u.m(e,null)},p(h,d){var m;d[0]&6144&&i!==(i=h[11]!==""&&h[12]!==""?`${h[11]} + ${h[12]} = ${h[11]+h[12]}`:"...")&&Be(s,i),h[11]!==""&&((m=h[1].fullFeatures[h[8]])!=null&&m.description)?a?a.p(h,d):(a=Ny(h),a.c(),a.m(e,o)):a&&(a.d(1),a=null),h[16]>1?c?c.p(h,d):(c=Py(h),c.c(),c.m(e,l)):c&&(c.d(1),c=null),h[16]<1?u||(u=My(),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},d(h){h&&b(e),a&&a.d(),c&&c.d(),u&&u.d()}}}function Ny(n){var s;let e,t=((s=n[1].fullFeatures[n[8]])==null?void 0:s.description)+"",i;return{c(){e=C("div"),i=z(t),this.h()},l(r){e=k(r,"DIV",{class:!0});var o=T(e);i=G(o,t),o.forEach(b),this.h()},h(){S(e,"class","combat-art-note svelte-inr05g")},m(r,o){X(r,e,o),p(e,i)},p(r,o){var l;o[0]&258&&t!==(t=((l=r[1].fullFeatures[r[8]])==null?void 0:l.description)+"")&&Be(i,t)},d(r){r&&b(e)}}}function Py(n){let e,t,i=n[16]-1+"",s,r;return{c(){e=C("div"),t=z("Cost "),s=z(i),r=z(" extra superiority die"),this.h()},l(o){e=k(o,"DIV",{class:!0});var l=T(e);t=G(l,"Cost "),s=G(l,i),r=G(l," extra superiority die"),l.forEach(b),this.h()},h(){S(e,"class","cf svelte-inr05g")},m(o,l){X(o,e,l),p(e,t),p(e,s),p(e,r)},p(o,l){l[0]&65536&&i!==(i=o[16]-1+"")&&Be(s,i)},d(o){o&&b(e)}}}function My(n){let e,t;return{c(){e=C("div"),t=z("Cost 0 superiority die"),this.h()},l(i){e=k(i,"DIV",{class:!0});var s=T(e);t=G(s,"Cost 0 superiority die"),s.forEach(b),this.h()},h(){S(e,"class","cs svelte-inr05g")},m(i,s){X(i,e,s),p(e,t)},d(i){i&&b(e)}}}function By(n){let e,t,i=n[14]!==""&&Ly(n),s=n[14]===""&&Uy();return{c(){e=C("div"),i&&i.c(),t=F(),s&&s.c(),this.h()},l(r){e=k(r,"DIV",{class:!0});var o=T(e);i&&i.l(o),t=j(o),s&&s.l(o),o.forEach(b),this.h()},h(){S(e,"class","crit svelte-inr05g")},m(r,o){X(r,e,o),i&&i.m(e,null),p(e,t),s&&s.m(e,null)},p(r,o){r[14]!==""?i?i.p(r,o):(i=Ly(r),i.c(),i.m(e,t)):i&&(i.d(1),i=null),r[14]===""?s||(s=Uy(),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},d(r){r&&b(e),i&&i.d(),s&&s.d()}}}function Ly(n){let e,t,i=n[14]>=20-n[3]?"CRIT":"Normal",s,r,o,l,a,c,u,f,h,d,m=n[14]>=20-n[3]&&Wy(n);return{c(){e=C("div"),t=C("span"),s=z(i),o=F(),l=C("span"),a=z("("),c=z(n[14]),u=z(")"),h=F(),m&&m.c(),d=tt(),this.h()},l(g){e=k(g,"DIV",{class:!0});var _=T(e);t=k(_,"SPAN",{class:!0});var v=T(t);s=G(v,i),v.forEach(b),o=j(_),l=k(_,"SPAN",{class:!0});var y=T(l);a=G(y,"("),c=G(y,n[14]),u=G(y,")"),y.forEach(b),_.forEach(b),h=j(g),m&&m.l(g),d=tt(),this.h()},h(){S(t,"class",r=xe(n[14]>=20-n[3]?"cs":"")+" svelte-inr05g"),S(l,"class",f=xe(n[14]===20?"cs":"")+" svelte-inr05g"),S(e,"class","")},m(g,_){X(g,e,_),p(e,t),p(t,s),p(e,o),p(e,l),p(l,a),p(l,c),p(l,u),X(g,h,_),m&&m.m(g,_),X(g,d,_)},p(g,_){_[0]&16392&&i!==(i=g[14]>=20-g[3]?"CRIT":"Normal")&&Be(s,i),_[0]&16392&&r!==(r=xe(g[14]>=20-g[3]?"cs":"")+" svelte-inr05g")&&S(t,"class",r),_[0]&16384&&Be(c,g[14]),_[0]&16384&&f!==(f=xe(g[14]===20?"cs":"")+" svelte-inr05g")&&S(l,"class",f),g[14]>=20-g[3]?m?m.p(g,_):(m=Wy(g),m.c(),m.m(d.parentNode,d)):m&&(m.d(1),m=null)},d(g){g&&b(e),g&&b(h),m&&m.d(g),g&&b(d)}}}function Wy(n){let e,t=n[14]===20?"3":"2",i,s;return{c(){e=C("div"),i=z(t),s=z("x Damage")},l(r){e=k(r,"DIV",{});var o=T(e);i=G(o,t),s=G(o,"x Damage"),o.forEach(b)},m(r,o){X(r,e,o),p(e,i),p(e,s)},p(r,o){o[0]&16384&&t!==(t=r[14]===20?"3":"2")&&Be(i,t)},d(r){r&&b(e)}}}function Uy(n){let e;return{c(){e=z("...")},l(t){e=G(t,"...")},m(t,i){X(t,e,i)},d(t){t&&b(e)}}}function Vy(n){let e,t,i=n[15]!==""&&Fy(n),s=n[15]===""&&zy();return{c(){e=C("div"),i&&i.c(),t=F(),s&&s.c(),this.h()},l(r){e=k(r,"DIV",{class:!0});var o=T(e);i&&i.l(o),t=j(o),s&&s.l(o),o.forEach(b),this.h()},h(){S(e,"class","crest svelte-inr05g")},m(r,o){X(r,e,o),i&&i.m(e,null),p(e,t),s&&s.m(e,null)},p(r,o){r[15]!==""?i?i.p(r,o):(i=Fy(r),i.c(),i.m(e,t)):i&&(i.d(1),i=null),r[15]===""?s||(s=zy(),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},d(r){r&&b(e),i&&i.d(),s&&s.d()}}}function Fy(n){let e,t,i=n[20]&&jy(n),s=!n[20]&&qy(n);return{c(){i&&i.c(),e=F(),s&&s.c(),t=tt()},l(r){i&&i.l(r),e=j(r),s&&s.l(r),t=tt()},m(r,o){i&&i.m(r,o),X(r,e,o),s&&s.m(r,o),X(r,t,o)},p(r,o){r[20]?i?i.p(r,o):(i=jy(r),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),r[20]?s&&(s.d(1),s=null):s?s.p(r,o):(s=qy(r),s.c(),s.m(t.parentNode,t))},d(r){i&&i.d(r),r&&b(e),s&&s.d(r),r&&b(t)}}}function jy(n){let e,t,i,s,r,o,l,a,c,u=n[4]&&Hy(n);return{c(){e=C("div"),t=C("span"),i=z("ACTIVATED"),s=C("span"),r=z("("),o=z(n[15]),l=z(")"),a=F(),u&&u.c(),c=tt(),this.h()},l(f){e=k(f,"DIV",{});var h=T(e);t=k(h,"SPAN",{class:!0});var d=T(t);i=G(d,"ACTIVATED"),d.forEach(b),s=k(h,"SPAN",{});var m=T(s);r=G(m,"("),o=G(m,n[15]),l=G(m,")"),m.forEach(b),h.forEach(b),a=j(f),u&&u.l(f),c=tt(),this.h()},h(){S(t,"class","cs svelte-inr05g")},m(f,h){X(f,e,h),p(e,t),p(t,i),p(e,s),p(s,r),p(s,o),p(s,l),X(f,a,h),u&&u.m(f,h),X(f,c,h)},p(f,h){h[0]&32768&&Be(o,f[15]),f[4]?u?u.p(f,h):(u=Hy(f),u.c(),u.m(c.parentNode,c)):u&&(u.d(1),u=null)},d(f){f&&b(e),f&&b(a),u&&u.d(f),f&&b(c)}}}function Hy(n){var s;let e,t=((s=Ns[n[4]])==null?void 0:s.description)+"",i;return{c(){e=C("div"),i=z(t),this.h()},l(r){e=k(r,"DIV",{class:!0});var o=T(e);i=G(o,t),o.forEach(b),this.h()},h(){S(e,"class","description svelte-inr05g")},m(r,o){X(r,e,o),p(e,i)},p(r,o){var l;o[0]&16&&t!==(t=((l=Ns[r[4]])==null?void 0:l.description)+"")&&Be(i,t)},d(r){r&&b(e)}}}function qy(n){let e,t,i,s,r,o;return{c(){e=C("span"),t=z("Normal"),i=C("span"),s=z("("),r=z(n[15]),o=z(")")},l(l){e=k(l,"SPAN",{});var a=T(e);t=G(a,"Normal"),a.forEach(b),i=k(l,"SPAN",{});var c=T(i);s=G(c,"("),r=G(c,n[15]),o=G(c,")"),c.forEach(b)},m(l,a){X(l,e,a),p(e,t),X(l,i,a),p(i,s),p(i,r),p(i,o)},p(l,a){a[0]&32768&&Be(r,l[15])},d(l){l&&b(e),l&&b(i)}}}function zy(n){let e;return{c(){e=z("...")},l(t){e=G(t,"...")},m(t,i){X(t,e,i)},d(t){t&&b(e)}}}function Gy(n){let e,t,i,s,r,o=parseInt(n[23])!==n[13],l=o&&Ky(n);return{c(){e=C("div"),t=C("span"),i=z(n[23]),r=F(),l&&l.c(),this.h()},l(a){e=k(a,"DIV",{class:!0});var c=T(e);t=k(c,"SPAN",{class:!0});var u=T(t);i=G(u,n[23]),u.forEach(b),r=j(c),l&&l.l(c),c.forEach(b),this.h()},h(){S(t,"class",s=xe(Zi({mini:parseInt(n[23])!==n[13]}))+" svelte-inr05g"),S(e,"class","damage-text svelte-inr05g")},m(a,c){X(a,e,c),p(e,t),p(t,i),p(e,r),l&&l.m(e,null)},p(a,c){c[0]&8388608&&Be(i,a[23]),c[0]&8396800&&s!==(s=xe(Zi({mini:parseInt(a[23])!==a[13]}))+" svelte-inr05g")&&S(t,"class",s),c[0]&8396800&&(o=parseInt(a[23])!==a[13]),o?l?l.p(a,c):(l=Ky(a),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},d(a){a&&b(e),l&&l.d()}}}function Ky(n){let e,t,i;return{c(){e=C("span"),t=z("= "),i=z(n[24]),this.h()},l(s){e=k(s,"SPAN",{class:!0});var r=T(e);t=G(r,"= "),i=G(r,n[24]),r.forEach(b),this.h()},h(){S(e,"class","final-damage svelte-inr05g")},m(s,r){X(s,e,r),p(e,t),p(e,i)},p(s,r){r[0]&16777216&&Be(i,s[24])},d(s){s&&b(e)}}}function Xy(n){let e;return{c(){e=z("...")},l(t){e=G(t,"...")},m(t,i){X(t,e,i)},d(t){t&&b(e)}}}function X7(n){let e,t,i,s,r,o,l,a,c,u,f,h,d,m,g,_,v,y,E,w,A,I,R,D,N,W,H,P,Y=n[17]?"HP Restored":"Damage",O,L,U,K=Ln(n[2])+"",te,q,x,Z,V,ce,pe,oe,ve,Ne,J,Ie,Ue=n[30]?n[26]<=0?"Out of weapon uses":"Out of Superiority Dies":n[7]?"Roll Attack":"Select a weapon",re,Le,fe,M,ae,de,$,ee,ie,me,ue,se,_e=!n[17]&&ky(n),ke=!n[17]&&n[3]>=0&&Ty(n),Ce=n[4]&&Oy(n),ge=!n[17]&&Dy(n),Me=!n[17]&&n[3]>=0&&By(n),Ee=n[4]&&Vy(n),Pe=n[13]&&Gy(n),be=!n[13]&&Xy();return{c(){e=C("div"),t=C("div"),i=C("button"),s=z("Copy Results"),o=F(),l=C("button"),a=z("Copy Attack Result Only"),u=F(),f=C("button"),h=z("Copy Damage Result Only"),m=F(),g=C("button"),_=z("Copy Attack Command"),v=F(),y=C("button"),E=z("Back to Breakdown"),w=F(),A=C("div"),I=C("div"),R=C("div"),_e&&_e.c(),D=F(),ke&&ke.c(),N=F(),Ce&&Ce.c(),W=F(),H=C("div"),P=C("h3"),O=z(Y),L=F(),U=C("div"),te=z(K),q=F(),x=F(),Z=C("div"),ge&&ge.c(),V=F(),Me&&Me.c(),ce=F(),Ee&&Ee.c(),pe=F(),oe=C("div"),Pe&&Pe.c(),ve=F(),be&&be.c(),Ne=F(),J=C("div"),Ie=C("button"),re=z(Ue),M=F(),ae=C("span"),de=C("span"),$=z("Roll visual dice?"),ee=F(),ie=C("input"),this.h()},l(nt){e=k(nt,"DIV",{class:!0});var Fe=T(e);t=k(Fe,"DIV",{class:!0});var we=T(t);i=k(we,"BUTTON",{class:!0});var lt=T(i);s=G(lt,"Copy Results"),lt.forEach(b),o=j(we),l=k(we,"BUTTON",{class:!0});var je=T(l);a=G(je,"Copy Attack Result Only"),je.forEach(b),u=j(we),f=k(we,"BUTTON",{class:!0});var Qe=T(f);h=G(Qe,"Copy Damage Result Only"),Qe.forEach(b),m=j(we),g=k(we,"BUTTON",{class:!0});var ye=T(g);_=G(ye,"Copy Attack Command"),ye.forEach(b),v=j(we),y=k(we,"BUTTON",{class:!0});var Ze=T(y);E=G(Ze,"Back to Breakdown"),Ze.forEach(b),we.forEach(b),w=j(Fe),A=k(Fe,"DIV",{class:!0});var Lt=T(A);I=k(Lt,"DIV",{class:!0});var vt=T(I);R=k(vt,"DIV",{class:!0});var Ct=T(R);_e&&_e.l(Ct),D=j(Ct),ke&&ke.l(Ct),N=j(Ct),Ce&&Ce.l(Ct),W=j(Ct),H=k(Ct,"DIV",{class:!0});var Ot=T(H);P=k(Ot,"H3",{class:!0});var en=T(P);O=G(en,Y),en.forEach(b),L=j(Ot),U=k(Ot,"DIV",{class:!0});var tn=T(U);te=G(tn,K),q=j(tn),tn.forEach(b),Ot.forEach(b),Ct.forEach(b),x=j(vt),Z=k(vt,"DIV",{class:!0});var rn=T(Z);ge&&ge.l(rn),V=j(rn),Me&&Me.l(rn),ce=j(rn),Ee&&Ee.l(rn),pe=j(rn),oe=k(rn,"DIV",{class:!0});var cn=T(oe);Pe&&Pe.l(cn),ve=j(cn),be&&be.l(cn),cn.forEach(b),rn.forEach(b),vt.forEach(b),Ne=j(Lt),J=k(Lt,"DIV",{class:!0});var dt=T(J);Ie=k(dt,"BUTTON",{class:!0});var Un=T(Ie);re=G(Un,Ue),Un.forEach(b),M=j(dt),ae=k(dt,"SPAN",{});var kn=T(ae);de=k(kn,"SPAN",{});var Wn=T(de);$=G(Wn,"Roll visual dice?"),Wn.forEach(b),ee=j(kn),ie=k(kn,"INPUT",{type:!0}),kn.forEach(b),dt.forEach(b),Lt.forEach(b),Fe.forEach(b),this.h()},h(){i.disabled=r=n[11]==="",S(i,"class","svelte-inr05g"),l.disabled=c=n[11]==="",S(l,"class","svelte-inr05g"),f.disabled=d=n[11]==="",S(f,"class","svelte-inr05g"),S(g,"class","svelte-inr05g"),S(y,"class","svelte-inr05g"),ct(y,"flex","1"),S(t,"class","actions svelte-inr05g"),S(P,"class","svelte-inr05g"),S(U,"class","content svelte-inr05g"),S(H,"class","damage svelte-inr05g"),S(R,"class","rolls svelte-inr05g"),S(oe,"class","damage svelte-inr05g"),ct(oe,"flex-direction","column"),S(Z,"class","result svelte-inr05g"),S(I,"class","rolls-container svelte-inr05g"),Ie.disabled=Le=n[30]||!n[7],S(Ie,"class",fe=xe(Zi("attack-button",{disabled:n[30]||!n[7]}))+" svelte-inr05g"),S(ie,"type","checkbox"),ie.checked=n[9],S(J,"class","attack-button-container svelte-inr05g"),S(A,"class","content svelte-inr05g"),S(e,"class","container svelte-inr05g")},m(nt,Fe){X(nt,e,Fe),p(e,t),p(t,i),p(i,s),p(t,o),p(t,l),p(l,a),p(t,u),p(t,f),p(f,h),p(t,m),p(t,g),p(g,_),p(t,v),p(t,y),p(y,E),p(e,w),p(e,A),p(A,I),p(I,R),_e&&_e.m(R,null),p(R,D),ke&&ke.m(R,null),p(R,N),Ce&&Ce.m(R,null),p(R,W),p(R,H),p(H,P),p(P,O),p(H,L),p(H,U),p(U,te),p(U,q),p(I,x),p(I,Z),ge&&ge.m(Z,null),p(Z,V),Me&&Me.m(Z,null),p(Z,ce),Ee&&Ee.m(Z,null),p(Z,pe),p(Z,oe),Pe&&Pe.m(oe,null),p(oe,ve),be&&be.m(oe,null),p(A,Ne),p(A,J),p(J,Ie),p(Ie,re),p(J,M),p(J,ae),p(ae,de),p(de,$),p(ae,ee),p(ae,ie),me=!0,ue||(se=[Se(i,"click",n[54]),Se(l,"click",n[55]),Se(f,"click",n[56]),Se(g,"click",n[57]),Se(y,"click",function(){Bn(n[0])&&n[0].apply(this,arguments)}),Se(Ie,"click",n[58]),Se(ie,"click",n[59])],ue=!0)},p(nt,Fe){n=nt,(!me||Fe[0]&2048&&r!==(r=n[11]===""))&&(i.disabled=r),(!me||Fe[0]&2048&&c!==(c=n[11]===""))&&(l.disabled=c),(!me||Fe[0]&2048&&d!==(d=n[11]===""))&&(f.disabled=d),n[17]?_e&&(He(),Q(_e,1,1,()=>{_e=null}),qe()):_e?(_e.p(n,Fe),Fe[0]&131072&&B(_e,1)):(_e=ky(n),_e.c(),B(_e,1),_e.m(R,D)),!n[17]&&n[3]>=0?ke?ke.p(n,Fe):(ke=Ty(n),ke.c(),ke.m(R,N)):ke&&(ke.d(1),ke=null),n[4]?Ce?(Ce.p(n,Fe),Fe[0]&16&&B(Ce,1)):(Ce=Oy(n),Ce.c(),B(Ce,1),Ce.m(R,W)):Ce&&(He(),Q(Ce,1,1,()=>{Ce=null}),qe()),(!me||Fe[0]&131072)&&Y!==(Y=n[17]?"HP Restored":"Damage")&&Be(O,Y),(!me||Fe[0]&4)&&K!==(K=Ln(n[2])+"")&&Be(te,K),n[17]?ge&&(ge.d(1),ge=null):ge?ge.p(n,Fe):(ge=Dy(n),ge.c(),ge.m(Z,V)),!n[17]&&n[3]>=0?Me?Me.p(n,Fe):(Me=By(n),Me.c(),Me.m(Z,ce)):Me&&(Me.d(1),Me=null),n[4]?Ee?Ee.p(n,Fe):(Ee=Vy(n),Ee.c(),Ee.m(Z,pe)):Ee&&(Ee.d(1),Ee=null),n[13]?Pe?Pe.p(n,Fe):(Pe=Gy(n),Pe.c(),Pe.m(oe,ve)):Pe&&(Pe.d(1),Pe=null),n[13]?be&&(be.d(1),be=null):be||(be=Xy(),be.c(),be.m(oe,null)),(!me||Fe[0]&1140850816)&&Ue!==(Ue=n[30]?n[26]<=0?"Out of weapon uses":"Out of Superiority Dies":n[7]?"Roll Attack":"Select a weapon")&&Be(re,Ue),(!me||Fe[0]&1073741952&&Le!==(Le=n[30]||!n[7]))&&(Ie.disabled=Le),(!me||Fe[0]&1073741952&&fe!==(fe=xe(Zi("attack-button",{disabled:n[30]||!n[7]}))+" svelte-inr05g"))&&S(Ie,"class",fe),(!me||Fe[0]&512)&&(ie.checked=n[9])},i(nt){me||(B(_e),B(Ce),me=!0)},o(nt){Q(_e),Q(Ce),me=!1},d(nt){nt&&b(e),_e&&_e.d(),ke&&ke.d(),Ce&&Ce.d(),ge&&ge.d(),Me&&Me.d(),Ee&&Ee.d(),Pe&&Pe.d(),be&&be.d(),ue=!1,an(se)}}}function Q7(n,e,t){let i,s,r,o,l,a,c,u,f,h,d,m,g,_,v,y,E,w,A,I,R,D;const N=Nn(xi.DB);let{playerName:W}=e,{onCloseModal:H}=e,{allWeapons:P}=e,{allCombatArts:Y}=e,{weaponUses:O}=e,{onUpdateWeaponUses:L}=e,{crestConservesResource:U}=e,{attackCalc:K}=e,{damageCalc:te}=e,{critModifier:q}=e,{combatArtDamageBonus:x}=e,{crestType:Z}=e,{crestDC:V}=e,{crestDamage:ce}=e,{crestCombatArtDamageModifier:pe}=e,{selectedWeapon:oe}=e,{selectedCombatArt:ve}=e,{curSuperiorityDies:Ne}=e,{setCurSuperiorityDie:J}=e,{shouldDoVisualRolls:Ie}=e,{toggleVisualRolls:Ue}=e,re="",Le="",fe="",M="",ae="",de="",$=1,ee="",ie=1,me=1,ue=1;const se=async()=>{if(t(13,fe=""),t(41,M=""),OL(te)){const be=te.filter(Fe=>!Kg(Fe)),nt=te.filter(Kg);if(Ie){const Fe=await so(nt,{modifier:be});t(13,fe=Fe.value),t(41,M=Fe.resultText)}else{const{value:Fe,resultText:we}=Ys(te,{returnAsString:!0});t(13,fe=Fe),t(41,M=we)}}else t(13,fe=Ys(te)),t(41,M=fe+"")},_e=async()=>{t(14,de=""),Ie?t(14,de=await so([st.d20],{clearTimeout:250,disableResultBox:!0}).then(be=>be.value)):t(14,de=Fc(20)),t(43,$=de>=20-q?de===20?3:2:1)},ke=()=>{Oc(R())},Ce=()=>Oc(A(!0)),ge=()=>Oc(I(!0)),Me=()=>Oc(w()),Ee=()=>D().then(()=>Oc(R())),Pe=()=>Ue();return n.$$set=be=>{"playerName"in be&&t(31,W=be.playerName),"onCloseModal"in be&&t(0,H=be.onCloseModal),"allWeapons"in be&&t(32,P=be.allWeapons),"allCombatArts"in be&&t(1,Y=be.allCombatArts),"weaponUses"in be&&t(33,O=be.weaponUses),"onUpdateWeaponUses"in be&&t(34,L=be.onUpdateWeaponUses),"crestConservesResource"in be&&t(35,U=be.crestConservesResource),"attackCalc"in be&&t(36,K=be.attackCalc),"damageCalc"in be&&t(2,te=be.damageCalc),"critModifier"in be&&t(3,q=be.critModifier),"combatArtDamageBonus"in be&&t(37,x=be.combatArtDamageBonus),"crestType"in be&&t(4,Z=be.crestType),"crestDC"in be&&t(5,V=be.crestDC),"crestDamage"in be&&t(6,ce=be.crestDamage),"crestCombatArtDamageModifier"in be&&t(38,pe=be.crestCombatArtDamageModifier),"selectedWeapon"in be&&t(7,oe=be.selectedWeapon),"selectedCombatArt"in be&&t(8,ve=be.selectedCombatArt),"curSuperiorityDies"in be&&t(39,Ne=be.curSuperiorityDies),"setCurSuperiorityDie"in be&&t(40,J=be.setCurSuperiorityDie),"shouldDoVisualRolls"in be&&t(9,Ie=be.shouldDoVisualRolls),"toggleVisualRolls"in be&&t(10,Ue=be.toggleVisualRolls)},n.$$.update=()=>{var be,nt;n.$$.dirty[0]&128&&(t(11,re=""),t(12,Le=""),t(13,fe=""),t(41,M=""),t(42,ae=""),t(42,ae=""),t(14,de=""),t(43,$=1),t(15,ee="")),n.$$.dirty[0]&128&&t(17,i=_h.has(oe)),n.$$.dirty[0]&256&&t(48,s=()=>{var je;const Fe=(je=Fr[ve])==null?void 0:je.dieCost;if(!ve||!Fe)return 1;const we=Ys([Fe.roll])>=Fe.target,lt=(Fe==null?void 0:Fe.mod)||0;return we?Math.max(1+lt,0):1}),n.$$.dirty[0]&128|n.$$.dirty[1]&4&&t(26,r=O[oe]===void 0?1/0:O[oe]),n.$$.dirty[0]&33376|n.$$.dirty[1]&2240&&t(47,u=async()=>(t(15,ee=""),Ie?t(15,ee=await so([st.d20],{clearTimeout:250,disableResultBox:!0}).then(Fe=>Fe.value)):t(15,ee=Fc(20)),ee>=V?ce.length?t(42,ae=Ys(ce)):pe>1&&t(42,ae=Math.round(Ys(x)*pe)):t(42,ae=""),ae)),n.$$.dirty[0]&512|n.$$.dirty[1]&32&&t(18,a=async()=>{t(11,re=""),Ie?t(11,re=await so([st.d20],{clearTimeout:250,disableResultBox:!0}).then(Fe=>Fe.value)):t(11,re=Fc(20)),t(12,Le=Ys(K))}),n.$$.dirty[0]&128|n.$$.dirty[1]&2&&t(50,h=(be=P.fullFeatures[oe])==null?void 0:be.label),n.$$.dirty[0]&258&&t(53,f=ve?` (${(nt=Y.fullFeatures[ve])==null?void 0:nt.label})`:""),n.$$.dirty[1]&4718592&&t(46,d=`${h}`+f),n.$$.dirty[0]&522680|n.$$.dirty[1]&260891&&t(27,D=async()=>{var we;t(16,ie=1),t(45,ue=1),t(44,me=1),t(11,re=""),t(13,fe=""),t(41,M=""),t(14,de=""),t(15,ee="");try{i||await a();const{roll:lt=0,target:je=1,mult:Qe=1}=((we=P.fullFeatures[oe])==null?void 0:we.dieCost)||{};t(16,ie=s()*(Ys([lt])>=je?Qe:1)),!i&&q>=0&&await _e(),Z&&(await u(),ee>=V&&U&&(ve?t(44,me=0):J4.includes(oe)&&t(45,ue=0))),await se()}catch(lt){console.error(lt),alert("wait until all rolls have finished")}const Fe={playerName:W,type:"ATTACK_ROLL",attackName:d};re!==""&&(Fe.attackRoll=re+Le),de!==""&&(Fe.critRoll=de>=20-q?`CRIT${de===20?"(20)":""}`:"--"),ee!==""&&(Fe.crestName=Yg[Z]||"",Fe.crestRoll=ee>=V?"ACTIVATED":"--"),fe!==""&&(Fe.damageRoll=(parseInt(fe)+parseInt(ae||0))*$,i&&(Fe.isHealWeapon=!0)),km(N,Fe),ue!==0&&L(oe,-1*ue),ve&&J(Ne-ie*me)}),n.$$.dirty[0]&32800&&t(20,o=ee>=V),n.$$.dirty[1]&32&&t(25,l=Ln(K,!0)),n.$$.dirty[0]&64|n.$$.dirty[1]&192&&t(51,c=()=>ce.length?Ln(ce):pe>1?`${pe}*${Ln(x)}`:"0"),n.$$.dirty[0]&16392&&t(49,m=de>=20-q),n.$$.dirty[0]&8192|n.$$.dirty[1]&2048&&t(52,g=parseInt(fe)+parseInt(ae||0)),n.$$.dirty[1]&269312&&t(23,_=`${m?"(":""}${M}${ae?` + ${ae}(crest)`:""}${m?`) * ${$} (crit)`:""}`),n.$$.dirty[1]&2101248&&t(24,v=$*g),n.$$.dirty[0]&8&&t(21,y=q===0?20:`${20-q} - 20`),n.$$.dirty[0]&67109120|n.$$.dirty[1]&256&&t(30,E=ve&&Ne<=0||r<=0),n.$$.dirty[0]&33554734|n.$$.dirty[1]&1572865&&t(29,w=()=>{var Lt;const we=Fc(20),lt=20>20-q,je=20>20-q,Qe=`${Ln(te)}${je&&we>=V?`+${c()}`:""}`,ye=`/roll ${Qe}${lt?"+"+(Qe+"+"+Qe):""}${je?` [Crest Activated [${we}]]`:""}${lt?` [CRIT[${20}]]`:""} [ID${Math.floor(Math.random()*1e6)}]`;return`&{template:atk} {{rname=[${h}](\`${ye})}} {{mod=${ve?(Lt=Y.fullFeatures[ve])==null?void 0:Lt.label:"+0"}}} {{r1=[[1d20${l}]]}} {{normal=1}} {{charname=${W}}}`}),n.$$.dirty[0]&6402|n.$$.dirty[1]&524289&&t(22,A=(Fe=!1)=>{var lt;const we=`&{template:simple} {{rname=Attack Roll}} {{normal=1}} {{r1=${re+Le}}} {{charname=${re} + ${Le}}}`;return Fe?[`&{template:desc} {{desc=${h}${ve?` (${(lt=Y.fullFeatures[ve])==null?void 0:lt.label})`:""} attack roll from ${W}}}`,we].join(`
`):we}),n.$$.dirty[0]&25166082|n.$$.dirty[1]&524289&&t(19,I=(Fe=!1)=>{var lt;const we=`&{template:simple} {{rname=Damage}} {{normal=1}} {{r1=${v}}} {{charname=${_}}}`;return Fe?[`&{template:desc} {{desc=${h}${ve?` (${(lt=Y.fullFeatures[ve])==null?void 0:lt.label})`:""} damage roll from ${W}}}`,we].join(`
`):we}),n.$$.dirty[0]&7913778|n.$$.dirty[1]&790529&&t(28,R=()=>{var ye;const Fe=`&{template:desc} {{desc=${h}${ve?` (${(ye=Y.fullFeatures[ve])==null?void 0:ye.label})`:""} attack from ${W}}}`,we=A(),lt=de!==""?`&{template:simple} {{rname=Crit Roll}} {{mod=${y}}} {{r1=${m?"CRIT":"normal"} (${de})}} {{normal=1}} ${m?`{{charname=${$}x damage}}`:""}`:"",je=Z&&ee!==""?`&{template:simple} {{rname=Crest Roll}} {{mod=DC ${V}}} {{r1=${o?"ACTIVATED":"normal"} (${ee})}}$ {{normal=1}} ${o?`{{charname=${Ns[Z].description}}}`:""}`:"",Qe=I();return[Fe,we,lt,je,Qe].join(`
`)})},[H,Y,te,q,Z,V,ce,oe,ve,Ie,Ue,re,Le,fe,de,ee,ie,i,a,I,o,y,A,_,v,l,r,D,R,w,E,W,P,O,L,U,K,x,pe,Ne,J,M,ae,$,me,ue,d,u,s,m,h,c,g,f,ke,Ce,ge,Me,Ee,Pe]}class Y7 extends rt{constructor(e){super(),ot(this,e,Q7,X7,It,{playerName:31,onCloseModal:0,allWeapons:32,allCombatArts:1,weaponUses:33,onUpdateWeaponUses:34,crestConservesResource:35,attackCalc:36,damageCalc:2,critModifier:3,combatArtDamageBonus:37,crestType:4,crestDC:5,crestDamage:6,crestCombatArtDamageModifier:38,selectedWeapon:7,selectedCombatArt:8,curSuperiorityDies:39,setCurSuperiorityDie:40,shouldDoVisualRolls:9,toggleVisualRolls:10},null,[-1,-1,-1])}}function Qy(n,e,t){var r;const i=n.slice();i[4]=e[t];const s=(r=i[1])==null?void 0:r[i[4].key||""];return i[5]=s,i}function Yy(n,e,t){const i=n.slice();return i[8]=e[t],i[10]=t,i}function Jy(n){let e,t=n[8].label+"",i,s;return{c(){e=C("option"),i=z(t),this.h()},l(r){e=k(r,"OPTION",{});var o=T(e);i=G(o,t),o.forEach(b),this.h()},h(){e.__value=n[10],e.value=e.__value,e.selected=s=n[5]===n[8]},m(r,o){X(r,e,o),p(e,i)},p(r,o){o&1&&t!==(t=r[8].label+"")&&Be(i,t),o&3&&s!==(s=r[5]===r[8])&&(e.selected=s)},d(r){r&&b(e)}}}function Zy(n){var w;let e,t,i=n[4].prompt+"",s,r,o,l,a,c,u,f,h=(((w=n[5])==null?void 0:w.description)||"")+"",d,m,g,_,v=n[4].options,y=[];for(let A=0;A<v.length;A+=1)y[A]=Jy(Yy(n,v,A));function E(...A){return n[3](n[4],...A)}return{c(){e=C("div"),t=C("div"),s=z(i),r=F(),o=C("div"),l=C("select");for(let A=0;A<y.length;A+=1)y[A].c();u=F(),f=C("div"),d=z(h),m=F(),this.h()},l(A){e=k(A,"DIV",{class:!0});var I=T(e);t=k(I,"DIV",{class:!0});var R=T(t);s=G(R,i),R.forEach(b),r=j(I),o=k(I,"DIV",{class:!0});var D=T(o);l=k(D,"SELECT",{class:!0,name:!0});var N=T(l);for(let H=0;H<y.length;H+=1)y[H].l(N);N.forEach(b),u=j(D),f=k(D,"DIV",{class:!0});var W=T(f);d=G(W,h),W.forEach(b),D.forEach(b),m=j(I),I.forEach(b),this.h()},h(){S(t,"class","prompt svelte-1sp4qn5"),S(l,"class",a=xe(n[1]&&n[5]!==n[4].options[0]?"selected":"")+" svelte-1sp4qn5"),S(l,"name",c=n[4].prompt),S(f,"class","description"),S(o,"class","selection svelte-1sp4qn5"),S(e,"class","query svelte-1sp4qn5")},m(A,I){X(A,e,I),p(e,t),p(t,s),p(e,r),p(e,o),p(o,l);for(let R=0;R<y.length;R+=1)y[R].m(l,null);p(o,u),p(o,f),p(f,d),p(e,m),g||(_=Se(l,"change",E),g=!0)},p(A,I){var R;if(n=A,I&1&&i!==(i=n[4].prompt+"")&&Be(s,i),I&3){v=n[4].options;let D;for(D=0;D<v.length;D+=1){const N=Yy(n,v,D);y[D]?y[D].p(N,I):(y[D]=Jy(N),y[D].c(),y[D].m(l,null))}for(;D<y.length;D+=1)y[D].d(1);y.length=v.length}I&3&&a!==(a=xe(n[1]&&n[5]!==n[4].options[0]?"selected":"")+" svelte-1sp4qn5")&&S(l,"class",a),I&1&&c!==(c=n[4].prompt)&&S(l,"name",c),I&3&&h!==(h=(((R=n[5])==null?void 0:R.description)||"")+"")&&Be(d,h)},d(A){A&&b(e),Ht(y,A),g=!1,_()}}}function J7(n){let e,t=n[0],i=[];for(let s=0;s<t.length;s+=1)i[s]=Zy(Qy(n,t,s));return{c(){e=C("div");for(let s=0;s<i.length;s+=1)i[s].c();this.h()},l(s){e=k(s,"DIV",{class:!0});var r=T(e);for(let o=0;o<i.length;o+=1)i[o].l(r);r.forEach(b),this.h()},h(){S(e,"class","container svelte-1sp4qn5")},m(s,r){X(s,e,r);for(let o=0;o<i.length;o+=1)i[o].m(e,null)},p(s,[r]){if(r&7){t=s[0];let o;for(o=0;o<t.length;o+=1){const l=Qy(s,t,o);i[o]?i[o].p(l,r):(i[o]=Zy(l),i[o].c(),i[o].m(e,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=t.length}},i:Xe,o:Xe,d(s){s&&b(e),Ht(i,s)}}}function Z7(n,e,t){let{queries:i}=e,{selections:s}=e,{onUpdateQuerySelection:r}=e;const o=(l,a)=>{var c;r(l.key,l.options[parseInt((c=a==null?void 0:a.currentTarget)==null?void 0:c.value)])};return n.$$set=l=>{"queries"in l&&t(0,i=l.queries),"selections"in l&&t(1,s=l.selections),"onUpdateQuerySelection"in l&&t(2,r=l.onUpdateQuerySelection)},[i,s,r,o]}class x7 extends rt{constructor(e){super(),ot(this,e,Z7,J7,It,{queries:0,selections:1,onUpdateQuerySelection:2})}}function xy(n,e,t){const i=n.slice();return i[82]=e[t],i}function $y(n){let e,t,i,s,r,o,l,a,c,u,f,h,d,m,g,_,v,y=Ln(n[50])+"",E,w,A,I,R=n[43]?"HP Restored":"Damage",D,N,W,H,P,Y,O=Ln(n[48])+"",L,U,K,te,q,x=n[25]+n[24]+"",Z,V,ce,pe=(n[24]>0?"+"+n[24]:n[24])+"",oe,ve,Ne,J,Ie,Ue,re,Le,fe,M,ae,de,$,ee,ie,me,ue,se=n[33]&&e2(n),_e=n[35]&&t2(n),ke=n[36].length&&n2(n),Ce=n[34]&&i2(n),ge=n[37].length&&s2(n),Me=n[32].length>0&&r2(n),Ee=n[8]&&o2(n),Pe=n[23]&&p2(n),be=n[22].length&&g2(n),nt=n[21].length&&v2(n),Fe=n[20]&&b2(n),we=n[47]>=0&&_2(n),lt=n[47]<0&&y2(),je=n[8]&&S2(n),Qe=n[39]&&A2(n);return{c(){e=C("div"),t=C("div"),i=C("h2"),s=C("span"),r=z("Attack: 1d20"),o=F(),l=C("span"),se&&se.c(),a=F(),_e&&_e.c(),c=F(),ke&&ke.c(),u=F(),Ce&&Ce.c(),f=F(),ge&&ge.c(),h=F(),Me&&Me.c(),d=F(),m=C("h2"),g=z("= 1d20 "),_=C("span"),v=z("+ "),E=z(y),w=F(),A=C("div"),I=C("h2"),D=z(R),N=z(": "),Ee&&Ee.c(),W=F(),H=C("h2"),P=z("= "),Y=C("span"),L=z(O),U=F(),K=C("div"),te=C("h2"),q=z("Crit Modifier: "),Z=z(x),V=C("span"),ce=z("(Dex"),oe=z(pe),ve=z(")"),Ne=F(),J=C("span"),Pe&&Pe.c(),Ie=F(),be&&be.c(),Ue=F(),nt&&nt.c(),re=F(),Fe&&Fe.c(),Le=F(),fe=C("h2"),we&&we.c(),M=F(),lt&&lt.c(),ae=F(),de=C("div"),$=C("h2"),ee=z("Range: "),je&&je.c(),ie=F(),me=C("div"),ue=F(),Qe&&Qe.c(),this.h()},l(ye){e=k(ye,"DIV",{class:!0});var Ze=T(e);t=k(Ze,"DIV",{class:!0});var Lt=T(t);i=k(Lt,"H2",{class:!0});var vt=T(i);s=k(vt,"SPAN",{class:!0});var Ct=T(s);r=G(Ct,"Attack: 1d20"),Ct.forEach(b),o=j(vt),l=k(vt,"SPAN",{class:!0});var Ot=T(l);se&&se.l(Ot),a=j(Ot),_e&&_e.l(Ot),c=j(Ot),ke&&ke.l(Ot),u=j(Ot),Ce&&Ce.l(Ot),f=j(Ot),ge&&ge.l(Ot),h=j(Ot),Me&&Me.l(Ot),Ot.forEach(b),vt.forEach(b),Lt.forEach(b),d=j(Ze),m=k(Ze,"H2",{class:!0});var en=T(m);g=G(en,"= 1d20 "),_=k(en,"SPAN",{class:!0});var tn=T(_);v=G(tn,"+ "),E=G(tn,y),tn.forEach(b),en.forEach(b),w=j(Ze),A=k(Ze,"DIV",{class:!0});var rn=T(A);I=k(rn,"H2",{class:!0});var cn=T(I);D=G(cn,R),N=G(cn,": "),Ee&&Ee.l(cn),cn.forEach(b),rn.forEach(b),W=j(Ze),H=k(Ze,"H2",{class:!0});var dt=T(H);P=G(dt,"= "),Y=k(dt,"SPAN",{});var Un=T(Y);L=G(Un,O),Un.forEach(b),dt.forEach(b),U=j(Ze),K=k(Ze,"DIV",{class:!0});var kn=T(K);te=k(kn,"H2",{class:!0});var Wn=T(te);q=G(Wn,"Crit Modifier: "),Z=G(Wn,x),V=k(Wn,"SPAN",{class:!0});var In=T(V);ce=G(In,"(Dex"),oe=G(In,pe),ve=G(In,")"),In.forEach(b),Ne=j(Wn),J=k(Wn,"SPAN",{class:!0});var En=T(J);Pe&&Pe.l(En),Ie=j(En),be&&be.l(En),Ue=j(En),nt&&nt.l(En),re=j(En),Fe&&Fe.l(En),En.forEach(b),Wn.forEach(b),kn.forEach(b),Le=j(Ze),fe=k(Ze,"H2",{class:!0});var li=T(fe);we&&we.l(li),M=j(li),lt&&lt.l(li),li.forEach(b),ae=j(Ze),de=k(Ze,"DIV",{class:!0});var ze=T(de);$=k(ze,"H2",{class:!0});var St=T($);ee=G(St,"Range: "),je&&je.l(St),St.forEach(b),ze.forEach(b),ie=j(Ze),me=k(Ze,"DIV",{class:!0}),T(me).forEach(b),ue=j(Ze),Qe&&Qe.l(Ze),Ze.forEach(b),this.h()},h(){S(s,"class","calc-label"),S(l,"class","modifiers svelte-bl52el"),S(i,"class","content svelte-bl52el"),S(t,"class","calc attack-container svelte-bl52el"),S(_,"class","modifiers svelte-bl52el"),S(m,"class","result attack-condensed svelte-bl52el"),S(I,"class","content svelte-bl52el"),S(A,"class","calc damage-container svelte-bl52el"),S(H,"class","result damage-condensed svelte-bl52el"),S(V,"class","source svelte-bl52el"),S(J,"class","modifiers svelte-bl52el"),S(te,"class","content svelte-bl52el"),S(K,"class","calc crit-container svelte-bl52el"),S(fe,"class","result crit-condensed svelte-bl52el"),S($,"class","content svelte-bl52el"),S(de,"class","calc range-container svelte-bl52el"),S(me,"class","empty range-condensed"),S(e,"class","calcs svelte-bl52el")},m(ye,Ze){X(ye,e,Ze),p(e,t),p(t,i),p(i,s),p(s,r),p(i,o),p(i,l),se&&se.m(l,null),p(l,a),_e&&_e.m(l,null),p(l,c),ke&&ke.m(l,null),p(l,u),Ce&&Ce.m(l,null),p(l,f),ge&&ge.m(l,null),p(l,h),Me&&Me.m(l,null),p(e,d),p(e,m),p(m,g),p(m,_),p(_,v),p(_,E),p(e,w),p(e,A),p(A,I),p(I,D),p(I,N),Ee&&Ee.m(I,null),p(e,W),p(e,H),p(H,P),p(H,Y),p(Y,L),p(e,U),p(e,K),p(K,te),p(te,q),p(te,Z),p(te,V),p(V,ce),p(V,oe),p(V,ve),p(te,Ne),p(te,J),Pe&&Pe.m(J,null),p(J,Ie),be&&be.m(J,null),p(J,Ue),nt&&nt.m(J,null),p(J,re),Fe&&Fe.m(J,null),p(e,Le),p(e,fe),we&&we.m(fe,null),p(fe,M),lt&&lt.m(fe,null),p(e,ae),p(e,de),p(de,$),p($,ee),je&&je.m($,null),p(e,ie),p(e,me),p(e,ue),Qe&&Qe.m(e,null)},p(ye,Ze){ye[33]?se?se.p(ye,Ze):(se=e2(ye),se.c(),se.m(l,a)):se&&(se.d(1),se=null),ye[35]?_e?_e.p(ye,Ze):(_e=t2(ye),_e.c(),_e.m(l,c)):_e&&(_e.d(1),_e=null),ye[36].length?ke?ke.p(ye,Ze):(ke=n2(ye),ke.c(),ke.m(l,u)):ke&&(ke.d(1),ke=null),ye[34]?Ce?Ce.p(ye,Ze):(Ce=i2(ye),Ce.c(),Ce.m(l,f)):Ce&&(Ce.d(1),Ce=null),ye[37].length?ge?ge.p(ye,Ze):(ge=s2(ye),ge.c(),ge.m(l,h)):ge&&(ge.d(1),ge=null),ye[32].length>0?Me?Me.p(ye,Ze):(Me=r2(ye),Me.c(),Me.m(l,null)):Me&&(Me.d(1),Me=null),Ze[1]&524288&&y!==(y=Ln(ye[50])+"")&&Be(E,y),Ze[1]&4096&&R!==(R=ye[43]?"HP Restored":"Damage")&&Be(D,R),ye[8]?Ee?Ee.p(ye,Ze):(Ee=o2(ye),Ee.c(),Ee.m(I,null)):Ee&&(Ee.d(1),Ee=null),Ze[1]&131072&&O!==(O=Ln(ye[48])+"")&&Be(L,O),Ze[0]&50331648&&x!==(x=ye[25]+ye[24]+"")&&Be(Z,x),Ze[0]&16777216&&pe!==(pe=(ye[24]>0?"+"+ye[24]:ye[24])+"")&&Be(oe,pe),ye[23]?Pe?Pe.p(ye,Ze):(Pe=p2(ye),Pe.c(),Pe.m(J,Ie)):Pe&&(Pe.d(1),Pe=null),ye[22].length?be?be.p(ye,Ze):(be=g2(ye),be.c(),be.m(J,Ue)):be&&(be.d(1),be=null),ye[21].length?nt?nt.p(ye,Ze):(nt=v2(ye),nt.c(),nt.m(J,re)):nt&&(nt.d(1),nt=null),ye[20]?Fe?Fe.p(ye,Ze):(Fe=b2(ye),Fe.c(),Fe.m(J,null)):Fe&&(Fe.d(1),Fe=null),ye[47]>=0?we?we.p(ye,Ze):(we=_2(ye),we.c(),we.m(fe,M)):we&&(we.d(1),we=null),ye[47]<0?lt||(lt=y2(),lt.c(),lt.m(fe,null)):lt&&(lt.d(1),lt=null),ye[8]?je?je.p(ye,Ze):(je=S2(ye),je.c(),je.m($,null)):je&&(je.d(1),je=null),ye[39]?Qe?Qe.p(ye,Ze):(Qe=A2(ye),Qe.c(),Qe.m(e,null)):Qe&&(Qe.d(1),Qe=null)},d(ye){ye&&b(e),se&&se.d(),_e&&_e.d(),ke&&ke.d(),Ce&&Ce.d(),ge&&ge.d(),Me&&Me.d(),Ee&&Ee.d(),Pe&&Pe.d(),be&&be.d(),nt&&nt.d(),Fe&&Fe.d(),we&&we.d(),lt&&lt.d(),je&&je.d(),Qe&&Qe.d()}}}function e2(n){let e,t,i,s,r;return{c(){e=C("span"),t=z("+ "),i=z(n[33]),s=C("span"),r=z("(dex)"),this.h()},l(o){e=k(o,"SPAN",{});var l=T(e);t=G(l,"+ "),i=G(l,n[33]),s=k(l,"SPAN",{class:!0});var a=T(s);r=G(a,"(dex)"),a.forEach(b),l.forEach(b),this.h()},h(){S(s,"class","source svelte-bl52el")},m(o,l){X(o,e,l),p(e,t),p(e,i),p(e,s),p(s,r)},p(o,l){l[1]&4&&Be(i,o[33])},d(o){o&&b(e)}}}function t2(n){let e,t=os(n[35],!0)+"",i,s,r;return{c(){e=C("span"),i=z(t),s=C("span"),r=z("(weapon)"),this.h()},l(o){e=k(o,"SPAN",{});var l=T(e);i=G(l,t),s=k(l,"SPAN",{class:!0});var a=T(s);r=G(a,"(weapon)"),a.forEach(b),l.forEach(b),this.h()},h(){S(s,"class","source svelte-bl52el")},m(o,l){X(o,e,l),p(e,i),p(e,s),p(s,r)},p(o,l){l[1]&16&&t!==(t=os(o[35],!0)+"")&&Be(i,t)},d(o){o&&b(e)}}}function n2(n){let e,t,i=Ln(n[36])+"",s,r,o;return{c(){e=C("span"),t=z("+ "),s=z(i),r=C("span"),o=z("(combat art)"),this.h()},l(l){e=k(l,"SPAN",{});var a=T(e);t=G(a,"+ "),s=G(a,i),r=k(a,"SPAN",{class:!0});var c=T(r);o=G(c,"(combat art)"),c.forEach(b),a.forEach(b),this.h()},h(){S(r,"class","source svelte-bl52el")},m(l,a){X(l,e,a),p(e,t),p(e,s),p(e,r),p(r,o)},p(l,a){a[1]&32&&i!==(i=Ln(l[36])+"")&&Be(s,i)},d(l){l&&b(e)}}}function i2(n){let e,t=os(n[34],!0)+"",i,s,r;return{c(){e=C("span"),i=z(t),s=C("span"),r=z("(distance)"),this.h()},l(o){e=k(o,"SPAN",{});var l=T(e);i=G(l,t),s=k(l,"SPAN",{class:!0});var a=T(s);r=G(a,"(distance)"),a.forEach(b),l.forEach(b),this.h()},h(){S(s,"class","source svelte-bl52el")},m(o,l){X(o,e,l),p(e,i),p(e,s),p(s,r)},p(o,l){l[1]&8&&t!==(t=os(o[34],!0)+"")&&Be(i,t)},d(o){o&&b(e)}}}function s2(n){let e,t,i=Ln(n[37])+"",s,r,o;return{c(){e=C("span"),t=z("+ "),s=z(i),r=C("span"),o=z("(combat skills)"),this.h()},l(l){e=k(l,"SPAN",{});var a=T(e);t=G(a,"+ "),s=G(a,i),r=k(a,"SPAN",{class:!0});var c=T(r);o=G(c,"(combat skills)"),c.forEach(b),a.forEach(b),this.h()},h(){S(r,"class","source svelte-bl52el")},m(l,a){X(l,e,a),p(e,t),p(e,s),p(e,r),p(r,o)},p(l,a){a[1]&64&&i!==(i=Ln(l[37])+"")&&Be(s,i)},d(l){l&&b(e)}}}function r2(n){let e,t,i=Ln(Ko(n[32]))+"",s,r,o;return{c(){e=C("span"),t=z("+ "),s=z(i),r=C("span"),o=z("(optionals)"),this.h()},l(l){e=k(l,"SPAN",{});var a=T(e);t=G(a,"+ "),s=G(a,i),r=k(a,"SPAN",{class:!0});var c=T(r);o=G(c,"(optionals)"),c.forEach(b),a.forEach(b),this.h()},h(){S(r,"class","source svelte-bl52el")},m(l,a){X(l,e,a),p(e,t),p(e,s),p(e,r),p(r,o)},p(l,a){a[1]&2&&i!==(i=Ln(Ko(l[32]))+"")&&Be(s,i)},d(l){l&&b(e)}}}function o2(n){let e,t,i,s,r,o,l,a,c=n[16]&&(n[31]||[]).length<=1&&l2(n),u=n[31]&&n[31].length>1&&a2(n),f=n[29].length&&u2(n),h=n[27]&&f2(n),d=n[28].length&&h2(n),m=n[26].length&&d2(n),g=n[19].length&&m2(n);return{c(){e=z(n[30]),c&&c.c(),t=tt(),u&&u.c(),i=F(),s=C("span"),f&&f.c(),r=F(),h&&h.c(),o=F(),d&&d.c(),l=F(),m&&m.c(),a=F(),g&&g.c(),this.h()},l(_){e=G(_,n[30]),c&&c.l(_),t=tt(),u&&u.l(_),i=j(_),s=k(_,"SPAN",{class:!0});var v=T(s);f&&f.l(v),r=j(v),h&&h.l(v),o=j(v),d&&d.l(v),l=j(v),m&&m.l(v),a=j(v),g&&g.l(v),v.forEach(b),this.h()},h(){S(s,"class","modifiers svelte-bl52el")},m(_,v){X(_,e,v),c&&c.m(_,v),X(_,t,v),u&&u.m(_,v),X(_,i,v),X(_,s,v),f&&f.m(s,null),p(s,r),h&&h.m(s,null),p(s,o),d&&d.m(s,null),p(s,l),m&&m.m(s,null),p(s,a),g&&g.m(s,null)},p(_,v){v[0]&1073741824&&Be(e,_[30]),_[16]&&(_[31]||[]).length<=1?c?c.p(_,v):(c=l2(_),c.c(),c.m(t.parentNode,t)):c&&(c.d(1),c=null),_[31]&&_[31].length>1?u?u.p(_,v):(u=a2(_),u.c(),u.m(i.parentNode,i)):u&&(u.d(1),u=null),_[29].length?f?f.p(_,v):(f=u2(_),f.c(),f.m(s,r)):f&&(f.d(1),f=null),_[27]?h?h.p(_,v):(h=f2(_),h.c(),h.m(s,o)):h&&(h.d(1),h=null),_[28].length?d?d.p(_,v):(d=h2(_),d.c(),d.m(s,l)):d&&(d.d(1),d=null),_[26].length?m?m.p(_,v):(m=d2(_),m.c(),m.m(s,a)):m&&(m.d(1),m=null),_[19].length?g?g.p(_,v):(g=m2(_),g.c(),g.m(s,null)):g&&(g.d(1),g=null)},d(_){_&&b(e),c&&c.d(_),_&&b(t),u&&u.d(_),_&&b(i),_&&b(s),f&&f.d(),h&&h.d(),d&&d.d(),m&&m.d(),g&&g.d()}}}function l2(n){let e,t,i,s,r;return{c(){e=C("span"),t=z("("),i=z(n[49]),s=z(")"),r=F()},l(o){e=k(o,"SPAN",{});var l=T(e);t=G(l,"("),i=G(l,n[49]),s=G(l,")"),l.forEach(b),r=j(o)},m(o,l){X(o,e,l),p(e,t),p(e,i),p(e,s),X(o,r,l)},p(o,l){l[1]&262144&&Be(i,o[49])},d(o){o&&b(e),o&&b(r)}}}function a2(n){let e,t,i,s,r,o=n[31],l=[];for(let a=0;a<o.length;a+=1)l[a]=c2(xy(n,o,a));return{c(){e=C("select"),t=C("option"),i=z("-");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){e=k(a,"SELECT",{});var c=T(e);t=k(c,"OPTION",{});var u=T(t);i=G(u,"-"),u.forEach(b);for(let f=0;f<l.length;f+=1)l[f].l(c);c.forEach(b),this.h()},h(){t.__value="",t.value=t.__value},m(a,c){X(a,e,c),p(e,t),p(t,i);for(let u=0;u<l.length;u+=1)l[u].m(e,null);s||(r=Se(e,"change",n[77]),s=!0)},p(a,c){if(c[0]&65536|c[1]&1){o=a[31];let u;for(u=0;u<o.length;u+=1){const f=xy(a,o,u);l[u]?l[u].p(f,c):(l[u]=c2(f),l[u].c(),l[u].m(e,null))}for(;u<l.length;u+=1)l[u].d(1);l.length=o.length}},d(a){a&&b(e),Ht(l,a),s=!1,r()}}}function c2(n){let e,t=Gs[n[82]]+"",i,s,r;return{c(){e=C("option"),i=z(t),this.h()},l(o){e=k(o,"OPTION",{});var l=T(e);i=G(l,t),l.forEach(b),this.h()},h(){e.__value=s=n[82],e.value=e.__value,e.selected=r=n[82]===n[16]},m(o,l){X(o,e,l),p(e,i)},p(o,l){l[1]&1&&t!==(t=Gs[o[82]]+"")&&Be(i,t),l[1]&1&&s!==(s=o[82])&&(e.__value=s,e.value=e.__value),l[0]&65536|l[1]&1&&r!==(r=o[82]===o[16])&&(e.selected=r)},d(o){o&&b(e)}}}function u2(n){let e,t,i=Ln(n[29])+"",s,r,o;return{c(){e=C("span"),t=z("+ "),s=z(i),r=C("span"),o=z("(weapon)"),this.h()},l(l){e=k(l,"SPAN",{});var a=T(e);t=G(a,"+ "),s=G(a,i),r=k(a,"SPAN",{class:!0});var c=T(r);o=G(c,"(weapon)"),c.forEach(b),a.forEach(b),this.h()},h(){S(r,"class","source svelte-bl52el")},m(l,a){X(l,e,a),p(e,t),p(e,s),p(e,r),p(r,o)},p(l,a){a[0]&536870912&&i!==(i=Ln(l[29])+"")&&Be(s,i)},d(l){l&&b(e)}}}function f2(n){let e,t,i,s,r;return{c(){e=C("span"),t=z("+ "),i=z(n[27]),s=C("span"),r=z("(Heal Plus)"),this.h()},l(o){e=k(o,"SPAN",{});var l=T(e);t=G(l,"+ "),i=G(l,n[27]),s=k(l,"SPAN",{class:!0});var a=T(s);r=G(a,"(Heal Plus)"),a.forEach(b),l.forEach(b),this.h()},h(){S(s,"class","source svelte-bl52el")},m(o,l){X(o,e,l),p(e,t),p(e,i),p(e,s),p(s,r)},p(o,l){l[0]&134217728&&Be(i,o[27])},d(o){o&&b(e)}}}function h2(n){let e,t,i,s,r;return{c(){e=C("span"),t=z("+ "),i=z(n[28]),s=C("span"),r=z("(combat art)"),this.h()},l(o){e=k(o,"SPAN",{});var l=T(e);t=G(l,"+ "),i=G(l,n[28]),s=k(l,"SPAN",{class:!0});var a=T(s);r=G(a,"(combat art)"),a.forEach(b),l.forEach(b),this.h()},h(){S(s,"class","source svelte-bl52el")},m(o,l){X(o,e,l),p(e,t),p(e,i),p(e,s),p(s,r)},p(o,l){l[0]&268435456&&Be(i,o[28])},d(o){o&&b(e)}}}function d2(n){let e,t,i=Ln(Ko(n[26]))+"",s,r,o;return{c(){e=C("span"),t=z("+ "),s=z(i),r=C("span"),o=z("(options)"),this.h()},l(l){e=k(l,"SPAN",{});var a=T(e);t=G(a,"+ "),s=G(a,i),r=k(a,"SPAN",{class:!0});var c=T(r);o=G(c,"(options)"),c.forEach(b),a.forEach(b),this.h()},h(){S(r,"class","source svelte-bl52el")},m(l,a){X(l,e,a),p(e,t),p(e,s),p(e,r),p(r,o)},p(l,a){a[0]&67108864&&i!==(i=Ln(Ko(l[26]))+"")&&Be(s,i)},d(l){l&&b(e)}}}function m2(n){let e,t,i=Ln(n[19])+"",s,r,o;return{c(){e=C("span"),t=z("+ "),s=z(i),r=C("span"),o=z("(class)"),this.h()},l(l){e=k(l,"SPAN",{});var a=T(e);t=G(a,"+ "),s=G(a,i),r=k(a,"SPAN",{class:!0});var c=T(r);o=G(c,"(class)"),c.forEach(b),a.forEach(b),this.h()},h(){S(r,"class","source svelte-bl52el")},m(l,a){X(l,e,a),p(e,t),p(e,s),p(e,r),p(r,o)},p(l,a){a[0]&524288&&i!==(i=Ln(l[19])+"")&&Be(s,i)},d(l){l&&b(e)}}}function p2(n){let e,t=(n[23]>0?"+ "+n[23]:n[23])+"",i,s,r;return{c(){e=C("span"),i=z(t),s=C("span"),r=z("(weapon)"),this.h()},l(o){e=k(o,"SPAN",{});var l=T(e);i=G(l,t),s=k(l,"SPAN",{class:!0});var a=T(s);r=G(a,"(weapon)"),a.forEach(b),l.forEach(b),this.h()},h(){S(s,"class","source svelte-bl52el")},m(o,l){X(o,e,l),p(e,i),p(e,s),p(s,r)},p(o,l){l[0]&8388608&&t!==(t=(o[23]>0?"+ "+o[23]:o[23])+"")&&Be(i,t)},d(o){o&&b(e)}}}function g2(n){let e,t,i=Ln(n[22])+"",s,r,o;return{c(){e=C("span"),t=z("+ "),s=z(i),r=C("span"),o=z("(combat art)"),this.h()},l(l){e=k(l,"SPAN",{});var a=T(e);t=G(a,"+ "),s=G(a,i),r=k(a,"SPAN",{class:!0});var c=T(r);o=G(c,"(combat art)"),c.forEach(b),a.forEach(b),this.h()},h(){S(r,"class","source svelte-bl52el")},m(l,a){X(l,e,a),p(e,t),p(e,s),p(e,r),p(r,o)},p(l,a){a[0]&4194304&&i!==(i=Ln(l[22])+"")&&Be(s,i)},d(l){l&&b(e)}}}function v2(n){let e,t,i,s,r;return{c(){e=C("span"),t=z("+ "),i=z(n[21]),s=C("span"),r=z("(options)"),this.h()},l(o){e=k(o,"SPAN",{});var l=T(e);t=G(l,"+ "),i=G(l,n[21]),s=k(l,"SPAN",{class:!0});var a=T(s);r=G(a,"(options)"),a.forEach(b),l.forEach(b),this.h()},h(){S(s,"class","source svelte-bl52el")},m(o,l){X(o,e,l),p(e,t),p(e,i),p(e,s),p(s,r)},p(o,l){l[0]&2097152&&Be(i,o[21])},d(o){o&&b(e)}}}function b2(n){let e,t,i=Ln(Ko([n[20]]))+"",s,r,o;return{c(){e=C("span"),t=z("+ "),s=z(i),r=C("span"),o=z("(class)"),this.h()},l(l){e=k(l,"SPAN",{});var a=T(e);t=G(a,"+ "),s=G(a,i),r=k(a,"SPAN",{class:!0});var c=T(r);o=G(c,"(class)"),c.forEach(b),a.forEach(b),this.h()},h(){S(r,"class","source svelte-bl52el")},m(l,a){X(l,e,a),p(e,t),p(e,s),p(e,r),p(r,o)},p(l,a){a[0]&1048576&&i!==(i=Ln(Ko([l[20]]))+"")&&Be(s,i)},d(l){l&&b(e)}}}function _2(n){let e,t=xb(n[47])+"",i;return{c(){e=z("= "),i=z(t)},l(s){e=G(s,"= "),i=G(s,t)},m(s,r){X(s,e,r),X(s,i,r)},p(s,r){r[1]&65536&&t!==(t=xb(s[47])+"")&&Be(i,t)},d(s){s&&b(e),s&&b(i)}}}function y2(n){let e;return{c(){e=z("= Can't Crit")},l(t){e=G(t,"= Can't Crit")},m(t,i){X(t,e,i)},d(t){t&&b(e)}}}function S2(n){let e,t,i,s=n[45]!==n[46]&&E2(n);return{c(){e=z(n[46]),t=F(),s&&s.c(),i=tt()},l(r){e=G(r,n[46]),t=j(r),s&&s.l(r),i=tt()},m(r,o){X(r,e,o),X(r,t,o),s&&s.m(r,o),X(r,i,o)},p(r,o){o[1]&32768&&Be(e,r[46]),r[45]!==r[46]?s?s.p(r,o):(s=E2(r),s.c(),s.m(i.parentNode,i)):s&&(s.d(1),s=null)},d(r){r&&b(e),r&&b(t),s&&s.d(r),r&&b(i)}}}function E2(n){let e,t;return{c(){e=z("to "),t=z(n[45])},l(i){e=G(i,"to "),t=G(i,n[45])},m(i,s){X(i,e,s),X(i,t,s)},p(i,s){s[1]&16384&&Be(t,i[45])},d(i){i&&b(e),i&&b(t)}}}function A2(n){let e,t,i,s,r,o,l,a,c;return{c(){e=C("div"),t=C("h2"),i=z("Crest of "),s=z(n[55]),r=z(" (DC "),o=z(n[51]),l=z(`):
							`),a=C("span"),c=z("Hover your crest to see its effect"),this.h()},l(u){e=k(u,"DIV",{class:!0});var f=T(e);t=k(f,"H2",{class:!0});var h=T(t);i=G(h,"Crest of "),s=G(h,n[55]),r=G(h," (DC "),o=G(h,n[51]),l=G(h,`):
							`),a=k(h,"SPAN",{class:!0});var d=T(a);c=G(d,"Hover your crest to see its effect"),d.forEach(b),h.forEach(b),f.forEach(b),this.h()},h(){S(a,"class","crest-description svelte-bl52el"),S(t,"class","content svelte-bl52el"),S(e,"class","crest-container svelte-bl52el")},m(u,f){X(u,e,f),p(e,t),p(t,i),p(t,s),p(t,r),p(t,o),p(t,l),p(t,a),p(a,c)},p(u,f){f[1]&16777216&&Be(s,u[55]),f[1]&1048576&&Be(o,u[51])},d(u){u&&b(e)}}}function w2(n){let e,t,i;return t=new Y7({props:{playerName:n[0],critModifier:n[47],crestCombatArtDamageModifier:n[53],selectedWeapon:n[8],weaponUses:n[6],onUpdateWeaponUses:n[7],crestConservesResource:n[52],selectedCombatArt:n[10],allWeapons:n[4],allCombatArts:n[5],curSuperiorityDies:n[12],setCurSuperiorityDie:n[13],onCloseModal:n[78],attackCalc:n[50],damageCalc:n[48],crestDC:n[39]?n[51]:1/0,crestDamage:n[54],crestType:n[39]?n[38]:"",combatArtDamageBonus:n[28],shouldDoVisualRolls:n[17],toggleVisualRolls:n[42]}}),{c(){e=C("div"),Te(t.$$.fragment),this.h()},l(s){e=k(s,"DIV",{class:!0});var r=T(e);De(t.$$.fragment,r),r.forEach(b),this.h()},h(){S(e,"class","attack-roll-container")},m(s,r){X(s,e,r),Oe(t,e,null),i=!0},p(s,r){const o={};r[0]&1&&(o.playerName=s[0]),r[1]&65536&&(o.critModifier=s[47]),r[1]&4194304&&(o.crestCombatArtDamageModifier=s[53]),r[0]&256&&(o.selectedWeapon=s[8]),r[0]&64&&(o.weaponUses=s[6]),r[0]&128&&(o.onUpdateWeaponUses=s[7]),r[1]&2097152&&(o.crestConservesResource=s[52]),r[0]&1024&&(o.selectedCombatArt=s[10]),r[0]&16&&(o.allWeapons=s[4]),r[0]&32&&(o.allCombatArts=s[5]),r[0]&4096&&(o.curSuperiorityDies=s[12]),r[0]&8192&&(o.setCurSuperiorityDie=s[13]),r[1]&1024&&(o.onCloseModal=s[78]),r[1]&524288&&(o.attackCalc=s[50]),r[1]&131072&&(o.damageCalc=s[48]),r[1]&1048832&&(o.crestDC=s[39]?s[51]:1/0),r[1]&8388608&&(o.crestDamage=s[54]),r[1]&384&&(o.crestType=s[39]?s[38]:""),r[0]&268435456&&(o.combatArtDamageBonus=s[28]),r[0]&131072&&(o.shouldDoVisualRolls=s[17]),r[1]&2048&&(o.toggleVisualRolls=s[42]),t.$set(o)},i(s){i||(B(t.$$.fragment,s),i=!0)},o(s){Q(t.$$.fragment,s),i=!1},d(s){s&&b(e),Re(t)}}}function C2(n){let e,t,i,s,r,o;return{c(){e=C("div"),t=C("button"),i=z("ATTACK"),this.h()},l(l){e=k(l,"DIV",{class:!0});var a=T(e);t=k(a,"BUTTON",{class:!0});var c=T(t);i=G(c,"ATTACK"),c.forEach(b),a.forEach(b),this.h()},h(){t.disabled=s=!n[8],S(t,"class","svelte-bl52el"),ct(t,"height","100%"),S(e,"class","rolls svelte-bl52el")},m(l,a){X(l,e,a),p(e,t),p(t,i),r||(o=Se(t,"click",function(){Bn(n[44])&&n[44].apply(this,arguments)}),r=!0)},p(l,a){n=l,a[0]&256&&s!==(s=!n[8])&&(t.disabled=s)},d(l){l&&b(e),r=!1,o()}}}function k2(n){let e,t,i,s,r,o,l,a;return t=new x7({props:{queries:n[40],selections:n[15],onUpdateQuerySelection:n[56]}}),{c(){e=C("div"),Te(t.$$.fragment),i=F(),s=C("button"),r=z("Reset Queries"),this.h()},l(c){e=k(c,"DIV",{class:!0});var u=T(e);De(t.$$.fragment,u),i=j(u),s=k(u,"BUTTON",{class:!0});var f=T(s);r=G(f,"Reset Queries"),f.forEach(b),u.forEach(b),this.h()},h(){S(s,"class","reset svelte-bl52el"),S(e,"class","options svelte-bl52el")},m(c,u){X(c,e,u),Oe(t,e,null),p(e,i),p(e,s),p(s,r),o=!0,l||(a=Se(s,"click",n[79]),l=!0)},p(c,u){const f={};u[1]&512&&(f.queries=c[40]),u[0]&32768&&(f.selections=c[15]),u[1]&33554432&&(f.onUpdateQuerySelection=c[56]),t.$set(f)},i(c){o||(B(t.$$.fragment,c),o=!0)},o(c){Q(t.$$.fragment,c),o=!1},d(c){c&&b(e),Re(t),l=!1,a()}}}function $7(n){let e,t,i,s,r,o,l,a;i=new H7({props:{damageTypeSelection:n[16],weaponsToFeatures:n[18],allCombatArts:n[5],allWeapons:n[4],equippedCombatArts:n[2],equippedWeapons:n[3],selectedWeapon:n[8],setSelectedWeapon:n[9],selectedCombatArt:n[10],setSelectedCombatArt:n[11],distanceToTarget:n[14],setDistanceToTarget:n[57],equippedClass:n[1]}});let c=!n[41]&&$y(n),u=n[41]&&w2(n),f=!n[41]&&C2(n),h=n[40].length>0&&k2(n);return{c(){e=C("div"),t=C("div"),Te(i.$$.fragment),s=F(),c&&c.c(),r=F(),u&&u.c(),o=F(),f&&f.c(),l=F(),h&&h.c(),this.h()},l(d){e=k(d,"DIV",{class:!0});var m=T(e);t=k(m,"DIV",{class:!0});var g=T(t);De(i.$$.fragment,g),s=j(g),c&&c.l(g),r=j(g),u&&u.l(g),o=j(g),f&&f.l(g),l=j(g),h&&h.l(g),g.forEach(b),m.forEach(b),this.h()},h(){S(t,"class",xe(Zi("container"))+" svelte-bl52el"),S(e,"class","outer svelte-bl52el")},m(d,m){X(d,e,m),p(e,t),Oe(i,t,null),p(t,s),c&&c.m(t,null),p(t,r),u&&u.m(t,null),p(t,o),f&&f.m(t,null),p(t,l),h&&h.m(t,null),a=!0},p(d,m){const g={};m[0]&65536&&(g.damageTypeSelection=d[16]),m[0]&262144&&(g.weaponsToFeatures=d[18]),m[0]&32&&(g.allCombatArts=d[5]),m[0]&16&&(g.allWeapons=d[4]),m[0]&4&&(g.equippedCombatArts=d[2]),m[0]&8&&(g.equippedWeapons=d[3]),m[0]&256&&(g.selectedWeapon=d[8]),m[0]&512&&(g.setSelectedWeapon=d[9]),m[0]&1024&&(g.selectedCombatArt=d[10]),m[0]&2048&&(g.setSelectedCombatArt=d[11]),m[0]&16384&&(g.distanceToTarget=d[14]),m[0]&2&&(g.equippedClass=d[1]),i.$set(g),d[41]?c&&(c.d(1),c=null):c?c.p(d,m):(c=$y(d),c.c(),c.m(t,r)),d[41]?u?(u.p(d,m),m[1]&1024&&B(u,1)):(u=w2(d),u.c(),B(u,1),u.m(t,o)):u&&(He(),Q(u,1,1,()=>{u=null}),qe()),d[41]?f&&(f.d(1),f=null):f?f.p(d,m):(f=C2(d),f.c(),f.m(t,l)),d[40].length>0?h?(h.p(d,m),m[1]&512&&B(h,1)):(h=k2(d),h.c(),B(h,1),h.m(t,null)):h&&(He(),Q(h,1,1,()=>{h=null}),qe())},i(d){a||(B(i.$$.fragment,d),B(u),B(h),a=!0)},o(d){Q(i.$$.fragment,d),Q(u),Q(h),a=!1},d(d){d&&b(e),Re(i),c&&c.d(),u&&u.d(),f&&f.d(),h&&h.d()}}}function eW(n,e,t){let i,s,r,o,l,a,c,u,f,h,d,m,g,_,v,y,E,w,A,I,R,D,N,W,H,P,Y,O,L,U,K,te,q,x,Z,V,ce,pe,oe,ve,Ne,J,Ie,Ue,re,Le,fe,M,ae,de,$,ee;Nn(xi.MODAL);let{playerName:ie}=e,{equippedClass:me}=e,{equippedCombatArts:ue}=e,{equippedCombatSkills:se}=e,{equippedWeapons:_e}=e,{playerCrest:ke}=e,{playerStats:Ce}=e,{allWeapons:ge}=e,{allCombatArts:Me}=e,{weaponUses:Ee}=e,{onUpdateWeaponUses:Pe}=e,{selectedWeapon:be}=e,{setSelectedWeapon:nt}=e,{selectedCombatArt:Fe}=e,{setSelectedCombatArt:we}=e,{curSuperiorityDies:lt}=e,{setCurSuperiorityDie:je}=e,Qe=1;const ye=dt=>t(14,Qe=dt);let Ze,Lt={current:null},vt,Ct={current:Y},Ot="",en=!0;const tn=dt=>{t(16,Ot=dt.currentTarget.value)},rn=()=>t(41,Ze=!1),cn=()=>{t(15,vt=void 0)};return n.$$set=dt=>{"playerName"in dt&&t(0,ie=dt.playerName),"equippedClass"in dt&&t(1,me=dt.equippedClass),"equippedCombatArts"in dt&&t(2,ue=dt.equippedCombatArts),"equippedCombatSkills"in dt&&t(58,se=dt.equippedCombatSkills),"equippedWeapons"in dt&&t(3,_e=dt.equippedWeapons),"playerCrest"in dt&&t(59,ke=dt.playerCrest),"playerStats"in dt&&t(60,Ce=dt.playerStats),"allWeapons"in dt&&t(4,ge=dt.allWeapons),"allCombatArts"in dt&&t(5,Me=dt.allCombatArts),"weaponUses"in dt&&t(6,Ee=dt.weaponUses),"onUpdateWeaponUses"in dt&&t(7,Pe=dt.onUpdateWeaponUses),"selectedWeapon"in dt&&t(8,be=dt.selectedWeapon),"setSelectedWeapon"in dt&&t(9,nt=dt.setSelectedWeapon),"selectedCombatArt"in dt&&t(10,Fe=dt.selectedCombatArt),"setSelectedCombatArt"in dt&&t(11,we=dt.setSelectedCombatArt),"curSuperiorityDies"in dt&&t(12,lt=dt.curSuperiorityDies),"setCurSuperiorityDie"in dt&&t(13,je=dt.setCurSuperiorityDie)},n.$$.update=()=>{var dt,Un,kn,Wn,In,En,li,ze,St,Gt,pn,gn,Jt,it,Pt,gi,Ii,Ls,sn,Os,Xs,An,bt,he,_t,Zt;n.$$.dirty[0]&16&&t(18,i=ge.fullFeatures),n.$$.dirty[1]&536870912&&t(25,s=er(Ce[Ke.DEX])),n.$$.dirty[0]&2|n.$$.dirty[1]&134217728&&t(69,r=G4(me,se)),n.$$.dirty[0]&256&&t(71,o=qL[be]),n.$$.dirty[0]&262400|n.$$.dirty[1]&134217728&&t(76,l=()=>se.reduce((jt,Pn)=>((ys[Pn].queries||[]).forEach((ai,Rs)=>{var Hi;if(ai.compatibleWeapons.includes((Hi=i[be])==null?void 0:Hi.type)){const Fn=Pn+"__"+Rs;jt[Fn]={...ai,key:Pn+"__"+Rs}}}),jt),{})),n.$$.dirty[2]&16384&&t(75,a=l()),n.$$.dirty[2]&8192&&t(40,c=Object.values(a)),n.$$.dirty[1]&512&&t(74,u=c.map(Et=>Et.key)),n.$$.dirty[0]&32768|n.$$.dirty[1]&1073742336|n.$$.dirty[2]&4096&&(vt?RL(new Set(Lt.current),new Set(u))||(t(61,Lt.current=u,Lt),t(15,vt=c.reduce((Et,jt)=>(Et[jt.key||""]=jt.options[0],Et),{}))):t(15,vt=c.reduce((Et,jt)=>(Et[jt.key||""]=jt.options[0],Et),{}))),n.$$.dirty[0]&32768&&t(56,f=(Et,jt)=>{t(15,vt={...vt,[Et]:jt})}),n.$$.dirty[1]&268435456&&t(73,h=new Set((dt=Ns[ke.type])==null?void 0:dt.triggersOn)),n.$$.dirty[0]&263424|n.$$.dirty[2]&2560&&t(72,d=()=>{var Et,jt;return Fe?h.has(pa.COMBAT_ART)||h.has(pa.ATTACK):o===ne.REASON||o===ne.FAITH?h.has(pa.MAGIC_ATTACK)&&((jt=(Et=i[be])==null?void 0:Et.damage)==null?void 0:jt[0])!==0&&!_h.has(be)||h.has(pa.HEAL)&&_h.has(be):h.has(pa.ATTACK)}),n.$$.dirty[1]&268435456&&t(38,m=ke.type),n.$$.dirty[1]&128&&t(55,g=(Un=Ns[m])==null?void 0:Un.label),n.$$.dirty[1]&128&&((kn=Ns[m])==null||kn.description),n.$$.dirty[1]&128&&t(54,_=((Wn=Ns[m])==null?void 0:Wn.damageBonus)||[]),n.$$.dirty[1]&128&&t(53,v=((In=Ns[m])==null?void 0:In.combatArtDamageMultiplier)||1),n.$$.dirty[1]&128&&t(52,y=((En=Ns[m])==null?void 0:En.conservesResource)||!1),n.$$.dirty[2]&1024&&t(39,E=d()),n.$$.dirty[1]&268435840&&t(51,w=E?Ns[m].activationDC[ke.isMajor?mo.MAJOR:mo.MINOR]:1/0),n.$$.dirty[0]&33554432&&t(33,A=s),n.$$.dirty[0]&262400&&t(35,I=((li=i[be])==null?void 0:li.attackBonus)||0),n.$$.dirty[0]&1024&&t(36,R=((ze=Fr[Fe])==null?void 0:ze.attackBonus)||[]),n.$$.dirty[1]&134217728|n.$$.dirty[2]&512&&t(37,D=se.reduce((Et,jt)=>{var Pn,Vn;return[...Et,...((Pn=ys[jt].attackBonus)==null?void 0:Pn[o])||((Vn=ys[jt].attackBonus)==null?void 0:Vn.ANY)||[]]},[])),n.$$.dirty[0]&32768&&t(32,N=Object.keys(vt||{}).reduce((Et,jt)=>(vt!=null&&vt[jt].attackBonus&&(Et=[...Et,...vt[jt].attackBonus||[]]),Et),[])),n.$$.dirty[0]&16640&&t(34,W=Y4.includes(be)?Math.max(Qe-2,0)*-2:0),n.$$.dirty[1]&126&&t(70,H=[...D,...R,I,W,A,...N].filter(Et=>Et!==0)),n.$$.dirty[2]&256&&t(50,P=Ko(H)),n.$$.dirty[0]&262400&&t(31,Y=(St=i[be])==null?void 0:St.damageType),n.$$.dirty[0]&65536|n.$$.dirty[1]&1|n.$$.dirty[2]&1&&(!Ot||Ct.current!==Y)&&(t(62,Ct.current=Y,Ct),Y?t(16,Ot=Y[0]):t(16,Ot=Ke.STR)),n.$$.dirty[0]&65536|n.$$.dirty[1]&536870912&&t(30,O=er(Ce[Ot]||10)),n.$$.dirty[0]&65536&&t(49,L=Gs[Ot]),n.$$.dirty[0]&262400&&t(29,U=[...((Gt=i[be])==null?void 0:Gt.damage)||[]]),n.$$.dirty[0]&256|n.$$.dirty[2]&128&&t(27,K=be===Ae.HEAL&&r?2:0),n.$$.dirty[0]&1024&&t(28,te=((pn=Fr[Fe])==null?void 0:pn.damageBonus)||[]),n.$$.dirty[0]&32768&&t(26,q=Object.keys(vt||{}).reduce((Et,jt)=>(vt!=null&&vt[jt].damageBonus&&(Et=[...Et,...vt[jt].damageBonus||[]]),Et),[])),n.$$.dirty[0]&262402&&t(19,Ie=((Pt=(Jt=(gn=Xt[me])==null?void 0:gn.whenEquipped)==null?void 0:Jt.bonusDamage)==null?void 0:Pt[(it=i[be])==null?void 0:it.type])||[]),n.$$.dirty[0]&2080899072&&t(68,x=[O,...U,...te,...Ie,K,...q].filter(Et=>Et!==0)),n.$$.dirty[2]&64&&t(48,Z=Ko(x)),n.$$.dirty[0]&262400&&t(23,ce=((gi=i[be])==null?void 0:gi.critBonus)||0),n.$$.dirty[0]&1024&&t(22,pe=((Ii=Fr[Fe])==null?void 0:Ii.critBonus)||[]),n.$$.dirty[0]&262402&&t(20,J=((Xs=(sn=(Ls=Xt[me])==null?void 0:Ls.whenEquipped)==null?void 0:sn.bonusCrit)==null?void 0:Xs[(Os=i[be])==null?void 0:Os.type])||0),n.$$.dirty[0]&66060288&&t(47,ve=Ys([s,V,ce,J,...pe,...oe])),n.$$.dirty[0]&262402&&t(66,Ne=((_t=(bt=(An=Xt[me])==null?void 0:An.whenEquipped)==null?void 0:bt.bonusRange)==null?void 0:_t[(he=i[be])==null?void 0:he.type])||0),n.$$.dirty[0]&1056&&t(67,Ue=(Zt=Me.fullFeatures[Fe])==null?void 0:Zt.range),n.$$.dirty[0]&262400|n.$$.dirty[1]&134217728&&t(65,re=se.reduce((Et,jt)=>{var Pn,Vn,ai;return Et+(((ai=(Pn=ys[jt])==null?void 0:Pn.bonusRange)==null?void 0:ai[(Vn=i[be])==null?void 0:Vn.type])||0)},0)),n.$$.dirty[0]&262400|n.$$.dirty[1]&536870912|n.$$.dirty[2]&60&&t(63,fe=()=>{var jt;let Et=Ue?[...Ue]:[...((jt=i[be])==null?void 0:jt.range)||[1]];return be===Ae.RESTORE?Et=[1,2+er(Ce[Ke.INT])]:be===Ae.PHYSIC&&(Et=[1,2+2*er(Ce[Ke.INT])]),Et[1]===void 0&&(Et[1]=Et[0]),Et[1]=parseInt(Et[1]+"")+Ne+re+Le,Et}),n.$$.dirty[2]&2&&t(46,[M,ae]=fe(),M,(t(45,ae),t(63,fe),t(67,Ue),t(18,i),t(8,be),t(60,Ce),t(66,Ne),t(65,re),t(64,Le),t(5,Me),t(10,Fe),t(4,ge),t(1,me),t(58,se))),n.$$.dirty[0]&256&&t(43,$=_h.has(be)),n.$$.dirty[0]&131072&&t(42,ee=()=>{t(17,en=!en)})},t(24,V=-1),t(21,oe=[]),t(64,Le=0),t(44,de=()=>t(41,Ze=!0)),[ie,me,ue,_e,ge,Me,Ee,Pe,be,nt,Fe,we,lt,je,Qe,vt,Ot,en,i,Ie,J,oe,pe,ce,V,s,q,K,te,U,O,Y,N,A,W,I,R,D,m,E,c,Ze,ee,$,de,ae,M,ve,Z,L,P,w,y,v,_,g,f,ye,se,ke,Ce,Lt,Ct,fe,Le,re,Ne,Ue,x,r,H,o,d,h,u,a,l,tn,rn,cn]}class tW extends rt{constructor(e){super(),ot(this,e,eW,$7,It,{playerName:0,equippedClass:1,equippedCombatArts:2,equippedCombatSkills:58,equippedWeapons:3,playerCrest:59,playerStats:60,allWeapons:4,allCombatArts:5,weaponUses:6,onUpdateWeaponUses:7,selectedWeapon:8,setSelectedWeapon:9,selectedCombatArt:10,setSelectedCombatArt:11,curSuperiorityDies:12,setCurSuperiorityDie:13},null,[-1,-1,-1])}}const nW=n=>({}),I2=n=>({});function iW(n){let e,t,i,s,r,o,l,a,c;const u=n[2].content,f=cs(u,n,n[1],I2);return{c(){e=C("div"),t=C("div"),i=z(n[0]),s=F(),f&&f.c(),r=F(),o=C("div"),l=F(),a=C("div"),this.h()},l(h){e=k(h,"DIV",{class:!0});var d=T(e);t=k(d,"DIV",{class:!0});var m=T(t);i=G(m,n[0]),s=j(m),f&&f.l(m),m.forEach(b),r=j(d),o=k(d,"DIV",{class:!0}),T(o).forEach(b),l=j(d),a=k(d,"DIV",{class:!0}),T(a).forEach(b),d.forEach(b),this.h()},h(){S(t,"class","label svelte-nu0fyj"),S(o,"class","divider svelte-nu0fyj"),S(a,"class","divider svelte-nu0fyj"),S(e,"class","container svelte-nu0fyj")},m(h,d){X(h,e,d),p(e,t),p(t,i),p(t,s),f&&f.m(t,null),p(e,r),p(e,o),p(e,l),p(e,a),c=!0},p(h,[d]){(!c||d&1)&&Be(i,h[0]),f&&f.p&&(!c||d&2)&&us(f,u,h,h[1],c?hs(u,h[1],d,nW):fs(h[1]),I2)},i(h){c||(B(f,h),c=!0)},o(h){Q(f,h),c=!1},d(h){h&&b(e),f&&f.d(h)}}}function sW(n,e,t){let{$$slots:i={},$$scope:s}=e,{label:r=""}=e;return n.$$set=o=>{"label"in o&&t(0,r=o.label),"$$scope"in o&&t(1,s=o.$$scope)},[r,s,i]}class vc extends rt{constructor(e){super(),ot(this,e,sW,iW,It,{label:0})}}function T2(n,e,t){const i=n.slice();return i[21]=e[t],i[23]=t,i}function O2(n,e,t){const i=n.slice();return i[24]=e[t],i}function R2(n){let e,t,i;const s=[n[1]];var r=n[0];function o(l){let a={};for(let c=0;c<s.length;c+=1)a=Qr(a,s[c]);return{props:a}}return r&&(e=Cn(r,o())),{c(){e&&Te(e.$$.fragment),t=tt()},l(l){e&&De(e.$$.fragment,l),t=tt()},m(l,a){e&&Oe(e,l,a),X(l,t,a),i=!0},p(l,a){const c=a&2?Yr(s,[Zl(l[1])]):{};if(r!==(r=l[0])){if(e){He();const u=e;Q(u.$$.fragment,1,0,()=>{Re(u,1)}),qe()}r?(e=Cn(r,o()),Te(e.$$.fragment),B(e.$$.fragment,1),Oe(e,t.parentNode,t)):e=null}else r&&e.$set(c)},i(l){i||(e&&B(e.$$.fragment,l),i=!0)},o(l){e&&Q(e.$$.fragment,l),i=!1},d(l){l&&b(t),e&&Re(e,l)}}}function D2(n){let e,t,i,s;return{c(){e=C("button"),t=z("Randomize Choices"),this.h()},l(r){e=k(r,"BUTTON",{});var o=T(e);t=G(o,"Randomize Choices"),o.forEach(b),this.h()},h(){ct(e,"align-self","center")},m(r,o){X(r,e,o),p(e,t),i||(s=Se(e,"click",n[18]),i=!0)},p:Xe,d(r){r&&b(e),i=!1,s()}}}function N2(n){let e,t=n[21].description+"",i;return{c(){e=C("span"),i=z(t),this.h()},l(s){e=k(s,"SPAN",{class:!0});var r=T(e);i=G(r,t),r.forEach(b),this.h()},h(){S(e,"class","description svelte-2mzsr9")},m(s,r){X(s,e,r),p(e,i)},p(s,r){r&4&&t!==(t=s[21].description+"")&&Be(i,t)},d(s){s&&b(e)}}}function P2(n){let e,t=n[7](n[21].type,n[24])+"",i,s,r;return{c(){e=C("option"),i=z(t),this.h()},l(o){e=k(o,"OPTION",{});var l=T(e);i=G(l,t),l.forEach(b),this.h()},h(){e.__value=s=JSON.stringify(n[24]),e.value=e.__value,e.selected=r=n[4][n[23]]===n[24]},m(o,l){X(o,e,l),p(e,i)},p(o,l){l&4&&t!==(t=o[7](o[21].type,o[24])+"")&&Be(i,t),l&4&&s!==(s=JSON.stringify(o[24]))&&(e.__value=s,e.value=e.__value),l&20&&r!==(r=o[4][o[23]]===o[24])&&(e.selected=r)},d(o){o&&b(e)}}}function M2(n){let e,t,i=n[21].type+"",s,r,o,l,a,c,u,f,h,d,m=n[21].description&&N2(n),g=n[21].options,_=[];for(let y=0;y<g.length;y+=1)_[y]=P2(O2(n,g,y));function v(...y){return n[19](n[23],...y)}return{c(){e=C("h2"),t=z("Pick a "),s=z(i),r=F(),m&&m.c(),o=F(),l=C("select"),a=C("option"),c=z("-");for(let y=0;y<_.length;y+=1)_[y].c();f=F(),this.h()},l(y){e=k(y,"H2",{class:!0});var E=T(e);t=G(E,"Pick a "),s=G(E,i),E.forEach(b),r=j(y),m&&m.l(y),o=j(y),l=k(y,"SELECT",{name:!0});var w=T(l);a=k(w,"OPTION",{});var A=T(a);c=G(A,"-"),A.forEach(b);for(let I=0;I<_.length;I+=1)_[I].l(w);w.forEach(b),f=j(y),this.h()},h(){S(e,"class","svelte-2mzsr9"),a.__value=null,a.value=a.__value,S(l,"name",u=n[21].type+n[23])},m(y,E){X(y,e,E),p(e,t),p(e,s),X(y,r,E),m&&m.m(y,E),X(y,o,E),X(y,l,E),p(l,a),p(a,c);for(let w=0;w<_.length;w+=1)_[w].m(l,null);X(y,f,E),h||(d=Se(l,"change",v),h=!0)},p(y,E){if(n=y,E&4&&i!==(i=n[21].type+"")&&Be(s,i),n[21].description?m?m.p(n,E):(m=N2(n),m.c(),m.m(o.parentNode,o)):m&&(m.d(1),m=null),E&148){g=n[21].options;let w;for(w=0;w<g.length;w+=1){const A=O2(n,g,w);_[w]?_[w].p(A,E):(_[w]=P2(A),_[w].c(),_[w].m(l,null))}for(;w<_.length;w+=1)_[w].d(1);_.length=g.length}E&4&&u!==(u=n[21].type+n[23])&&S(l,"name",u)},d(y){y&&b(e),y&&b(r),m&&m.d(y),y&&b(o),y&&b(l),Ht(_,y),y&&b(f),h=!1,d()}}}function rW(n){let e,t,i,s,r,o,l,a,c,u,f,h,d,m,g,_,v=n[0]&&R2(n),y=!n[5]&&D2(n),E=n[2],w=[];for(let A=0;A<E.length;A+=1)w[A]=M2(T2(n,E,A));return{c(){e=C("div"),t=C("h1"),i=z("Making choice(s) because: "),s=C("span"),r=z(n[3]),o=F(),v&&v.c(),l=F(),a=C("div"),y&&y.c(),c=F();for(let A=0;A<w.length;A+=1)w[A].c();u=F(),f=C("button"),h=z("Submit Choices"),this.h()},l(A){e=k(A,"DIV",{class:!0});var I=T(e);t=k(I,"H1",{});var R=T(t);i=G(R,"Making choice(s) because: "),s=k(R,"SPAN",{class:!0});var D=T(s);r=G(D,n[3]),D.forEach(b),R.forEach(b),o=j(I),v&&v.l(I),l=j(I),a=k(I,"DIV",{class:!0});var N=T(a);y&&y.l(N),c=j(N);for(let H=0;H<w.length;H+=1)w[H].l(N);N.forEach(b),u=j(I),f=k(I,"BUTTON",{class:!0});var W=T(f);h=G(W,"Submit Choices"),W.forEach(b),I.forEach(b),this.h()},h(){S(s,"class","reason svelte-2mzsr9"),S(a,"class","content svelte-2mzsr9"),S(f,"class","submit"),f.disabled=d=!n[4].every(B2),S(e,"class","container svelte-2mzsr9")},m(A,I){X(A,e,I),p(e,t),p(t,i),p(t,s),p(s,r),p(e,o),v&&v.m(e,null),p(e,l),p(e,a),y&&y.m(a,null),p(a,c);for(let R=0;R<w.length;R+=1)w[R].m(a,null);p(e,u),p(e,f),p(f,h),m=!0,g||(_=Se(f,"click",function(){Bn(n[6])&&n[6].apply(this,arguments)}),g=!0)},p(A,[I]){if(n=A,(!m||I&8)&&Be(r,n[3]),n[0]?v?(v.p(n,I),I&1&&B(v,1)):(v=R2(n),v.c(),B(v,1),v.m(e,l)):v&&(He(),Q(v,1,1,()=>{v=null}),qe()),n[5]?y&&(y.d(1),y=null):y?y.p(n,I):(y=D2(n),y.c(),y.m(a,c)),I&148){E=n[2];let R;for(R=0;R<E.length;R+=1){const D=T2(n,E,R);w[R]?w[R].p(D,I):(w[R]=M2(D),w[R].c(),w[R].m(a,null))}for(;R<w.length;R+=1)w[R].d(1);w.length=E.length}(!m||I&16&&d!==(d=!n[4].every(B2)))&&(f.disabled=d)},i(A){m||(B(v),m=!0)},o(A){Q(v),m=!1},d(A){A&&b(e),v&&v.d(),y&&y.d(),Ht(w,A),g=!1,_()}}}const B2=n=>n!==null;function oW(n,e,t){let i,s,r;const{close:o}=Nn(xi.MODAL);let{descriptionElement:l}=e,{descriptionElementProps:a}=e,{pickOne:c=[]}=e,{onSubmit:u=()=>{}}=e,{reason:f}=e,{customCombatArts:h={}}=e,{customCombatSkills:d={}}=e,{customWeapons:m={}}=e,{playerStats:g={}}=e,{onUpdatePlayerStats:_=()=>{}}=e,{onUpdateCustomCombatArts:v=()=>{}}=e,{onUpdateCustomCombatSkills:y=()=>{}}=e,{onUpdateCustomWeapons:E=()=>{}}=e,w=c.map(()=>null);const A=(D,N)=>{switch(D){case mn.Weapon:return N.toString()==="DOUBLE_BASE_USES"?"Double the uses of the spell you chose at Reason Level D":nr[N.toString()].label+": "+wu(nr[N.toString()]);case mn.CombatArt:return Fr[N.toString()].label+": "+Q4(Fr[N.toString()]);case mn.CombatSkill:return ys[N.toString()].label+": "+ys[N.toString()].description;case mn.PlayerStat:const W=typeof N=="string"?N:N.stat,H=typeof N=="string"?N:N.value;return`Increase ${Gs[W]} to at least ${H}`}},I=()=>{t(4,w=c.map(D=>{const N=Math.floor(Math.random()*D.options.length);return D.options[N]}))},R=(D,N)=>{t(4,w=[...w]),t(4,w[D]=JSON.parse(N.currentTarget.value),w)};return n.$$set=D=>{"descriptionElement"in D&&t(0,l=D.descriptionElement),"descriptionElementProps"in D&&t(1,a=D.descriptionElementProps),"pickOne"in D&&t(2,c=D.pickOne),"onSubmit"in D&&t(8,u=D.onSubmit),"reason"in D&&t(3,f=D.reason),"customCombatArts"in D&&t(9,h=D.customCombatArts),"customCombatSkills"in D&&t(10,d=D.customCombatSkills),"customWeapons"in D&&t(11,m=D.customWeapons),"playerStats"in D&&t(12,g=D.playerStats),"onUpdatePlayerStats"in D&&t(13,_=D.onUpdatePlayerStats),"onUpdateCustomCombatArts"in D&&t(14,v=D.onUpdateCustomCombatArts),"onUpdateCustomCombatSkills"in D&&t(15,y=D.onUpdateCustomCombatSkills),"onUpdateCustomWeapons"in D&&t(16,E=D.onUpdateCustomWeapons)},n.$$.update=()=>{n.$$.dirty&130568&&t(17,i=(D,N)=>{switch(D){case mn.Weapon:const W=N.reduce((O,L)=>{var U,K;if(L==="DOUBLE_BASE_USES"){const te=Object.keys(m).find(q=>{var x;return((x=m[q])==null?void 0:x.reason)==="Unlocked Reason level D"});if(te){const q=((U=O[te])==null?void 0:U.uses)||((K=nr[te])==null?void 0:K.uses);O[te]={...O[te],uses:q*2}}}else O[L]={...O[L],reason:f};return O},{...m});E(W);return;case mn.CombatArt:const H=N.reduce((O,L)=>(O[L]={...O[L],reason:f},O),{...h});v(H);return;case mn.CombatSkill:const P=N.reduce((O,L)=>(O[L]={...O[L],reason:f},O),{...d});y(P);return;case mn.PlayerStat:const Y=N.reduce((O,L)=>{const{stat:U,value:K}=L;return Math.max(K,O[U])===K&&(O[U]=K),O},{...g});_(Y);return}}),n.$$.dirty&131348&&t(6,s=()=>{const D=w.reduce((N,W,H)=>{const P=c[H].type,Y=N[P]||new Set;return Y.add(W),N[P]=Y,N},{});Object.keys(D).forEach(N=>i(N,Array.from(D[N]))),u(),o()}),n.$$.dirty&4&&t(5,r=c.some(D=>D.disableRandom))},[l,a,c,f,w,r,s,A,u,h,d,m,g,_,v,y,E,i,I,R]}class Cu extends rt{constructor(e){super(),ot(this,e,oW,rW,It,{descriptionElement:0,descriptionElementProps:1,pickOne:2,onSubmit:8,reason:3,customCombatArts:9,customCombatSkills:10,customWeapons:11,playerStats:12,onUpdatePlayerStats:13,onUpdateCustomCombatArts:14,onUpdateCustomCombatSkills:15,onUpdateCustomWeapons:16})}}function lW(n){let e,t,i,s,r,o,l;return{c(){e=C("button"),t=C("img"),this.h()},l(a){e=k(a,"BUTTON",{class:!0});var c=T(e);t=k(c,"IMG",{src:!0,width:!0,height:!0,class:!0,alt:!0}),c.forEach(b),this.h()},h(){Pl(t.src,i="equipped.png")||S(t,"src",i),S(t,"width",n[0]),S(t,"height",n[0]),S(t,"class",s=xe(Zi("img",{"not-equipped":!n[1]}))+" svelte-1ifhtbn"),S(t,"alt","equipped"),S(e,"class","container svelte-1ifhtbn"),e.disabled=r=n[4]||!n[3],ct(e,"opacity",n[3]?"1":"0"),ct(e,"width",n[0]),ct(e,"height",n[0])},m(a,c){X(a,e,c),p(e,t),o||(l=Se(t,"click",function(){Bn(n[2])&&n[2].apply(this,arguments)}),o=!0)},p(a,[c]){n=a,c&1&&S(t,"width",n[0]),c&1&&S(t,"height",n[0]),c&2&&s!==(s=xe(Zi("img",{"not-equipped":!n[1]}))+" svelte-1ifhtbn")&&S(t,"class",s),c&24&&r!==(r=n[4]||!n[3])&&(e.disabled=r),c&8&&ct(e,"opacity",n[3]?"1":"0"),c&1&&ct(e,"width",n[0]),c&1&&ct(e,"height",n[0])},i:Xe,o:Xe,d(a){a&&b(e),o=!1,l()}}}function aW(n,e,t){let{size:i="20px"}=e,{isEquipped:s}=e,{onClick:r}=e,{isVisible:o=!0}=e,{disabled:l=!1}=e;return n.$$set=a=>{"size"in a&&t(0,i=a.size),"isEquipped"in a&&t(1,s=a.isEquipped),"onClick"in a&&t(2,r=a.onClick),"isVisible"in a&&t(3,o=a.isVisible),"disabled"in a&&t(4,l=a.disabled)},[i,s,r,o,l]}class Tm extends rt{constructor(e){super(),ot(this,e,aW,lW,It,{size:0,isEquipped:1,onClick:2,isVisible:3,disabled:4})}}function cW(n){let e,t,i,s,r,o,l;return{c(){e=C("button"),t=C("img"),this.h()},l(a){e=k(a,"BUTTON",{class:!0});var c=T(e);t=k(c,"IMG",{src:!0,width:!0,height:!0,class:!0,alt:!0}),c.forEach(b),this.h()},h(){Pl(t.src,i=n[2]?"mastered.png":"unequipped.png")||S(t,"src",i),S(t,"width",n[0]),S(t,"height",n[0]),S(t,"class",s=xe(`${!n[2]&&n[1]?"equipped":""} `)+" svelte-1wznjqo"),S(t,"alt","unlocked"),ct(t,"filter",!n[2]&&n[1]?n[5]:""),S(e,"class",r=xe(`container ${n[3]?"custom":""}`)+" svelte-1wznjqo"),ct(e,"width",n[0]),ct(e,"height",n[0]),ct(e,"border",n[6])},m(a,c){X(a,e,c),p(e,t),o||(l=Se(t,"click",function(){Bn(n[4])&&n[4].apply(this,arguments)}),o=!0)},p(a,[c]){n=a,c&4&&!Pl(t.src,i=n[2]?"mastered.png":"unequipped.png")&&S(t,"src",i),c&1&&S(t,"width",n[0]),c&1&&S(t,"height",n[0]),c&6&&s!==(s=xe(`${!n[2]&&n[1]?"equipped":""} `)+" svelte-1wznjqo")&&S(t,"class",s),c&38&&ct(t,"filter",!n[2]&&n[1]?n[5]:""),c&8&&r!==(r=xe(`container ${n[3]?"custom":""}`)+" svelte-1wznjqo")&&S(e,"class",r),c&1&&ct(e,"width",n[0]),c&1&&ct(e,"height",n[0]),c&64&&ct(e,"border",n[6])},i:Xe,o:Xe,d(a){a&&b(e),o=!1,l()}}}function uW(n,e,t){let{size:i="16px"}=e,{isUnlocked:s=!1}=e,{isMastered:r=!1}=e,{isCustom:o=!1}=e,{onClick:l}=e,{unlockedFilter:a="sepia(100%) saturate(1000%) brightness(45%) hue-rotate(174deg)"}=e,{buttonBorder:c=""}=e;return n.$$set=u=>{"size"in u&&t(0,i=u.size),"isUnlocked"in u&&t(1,s=u.isUnlocked),"isMastered"in u&&t(2,r=u.isMastered),"isCustom"in u&&t(3,o=u.isCustom),"onClick"in u&&t(4,l=u.onClick),"unlockedFilter"in u&&t(5,a=u.unlockedFilter),"buttonBorder"in u&&t(6,c=u.buttonBorder)},[i,s,r,o,l,a,c]}class tO extends rt{constructor(e){super(),ot(this,e,uW,cW,It,{size:0,isUnlocked:1,isMastered:2,isCustom:3,onClick:4,unlockedFilter:5,buttonBorder:6})}}const n1=(n,e={})=>{const{prefix:t="Extra XP from Combat:"}=e;return t+" ("+Object.keys(n).map(i=>(pr[i]||i)+": +"+Math.round(n[i]*100)+"% of combat XP").join(", ")+")"},Fl=(n={},{disablePickOne:e}={})=>{const{playerStats:t,combatSkills:i,playerSkills:s,combatArts:r,weapons:o,hpBonus:l,xpMods:a,bonusDamage:c,bonusCrit:u,xpMooch:f,protectionBonus:h,msBonus:d,bonusRange:m,followUpBonus:g,pickOne:_,resilienceBonus:v}=n,y=[];if(t&&y.push("Min Stats ("+Object.entries(t).map(([E,w])=>`${Gs[E]} ${w}`).join(", ")+")"),s&&y.push("Skills ("+Object.keys(s).map(E=>td[E]).join(", ")+")"),i&&y.push("Combat Skills ("+Object.keys(i).map(E=>ys[E].label).join(", ")+")"),r&&y.push("Combat Arts ("+Object.keys(r).map(E=>Fr[E].label).join(", ")+")"),o&&y.push("Weapons ("+Object.keys(o).map(E=>nr[E].label).join(", ")+")"),l&&y.push("HP Bonus ("+l+")"),m&&y.push("Bonus Range by Weapon Type: ("+Object.keys(m).map(E=>(pr[E]||E)+": "+m[E]).join(", ")+")"),g&&y.push("AS Modifier ("+g+")"),h&&y.push("Prt Bonus ("+h+")"),v&&y.push("Re Bonus ("+v+")"),d&&y.push("MS Bonus ("+d+")"),c){let E="Bonus damage by weapon type: (";const w=Object.keys(c).map(A=>`${pr[A]}: ${c[A]}`);y.push(E+w.join(", ")+")")}if(u){let E="Bonus crit by weapon type: (";const w=Object.keys(u).map(A=>`${pr[A]}: ${os(u[A])}`);y.push(E+w.join(", ")+")")}return a&&y.push("XP from Combat: ("+Object.keys(a).map(E=>(pr[E]||E)+": x"+a[E]).join(", ")+")"),f&&y.push(n1(f)),!e&&_&&y.push("Choose one per category: "+_.map(({type:E,options:w})=>{const A=E,I=w.map(R=>E===mn.PlayerStat?"Min "+Gs[R.stat]+" "+R.value:E===mn.CombatArt?Fr[R].label:E===mn.Weapon?nr[R].label:E===mn.CombatSkill?ys[R].label:"unmapped").join(", ");return"(["+A+"]: "+I+")"}).join(", ")+")"),y.join(", ")},id=(n={},e=!1)=>{const{unlocks:t}=n;return Fl(t,{disablePickOne:e})};function fW(n){let e,t;return{c(){e=C("div"),t=z("Mastered"),this.h()},l(i){e=k(i,"DIV",{slot:!0,class:!0});var s=T(e);t=G(s,"Mastered"),s.forEach(b),this.h()},h(){S(e,"slot","t"),S(e,"class","svelte-5jm01p")},m(i,s){X(i,e,s),p(e,t)},p:Xe,d(i){i&&b(e)}}}function L2(n){var u,f,h;let e,t=Object.keys((u=n[7])==null?void 0:u.unlocks).length,i,s=Object.keys((f=n[7])==null?void 0:f.whenEquipped).length,r,o=n[0]&&Object.keys((h=n[7])==null?void 0:h.whenMastered).length,l=t&&W2(n),a=s&&U2(n),c=o&&V2(n);return{c(){e=C("div"),l&&l.c(),i=F(),a&&a.c(),r=F(),c&&c.c(),this.h()},l(d){e=k(d,"DIV",{class:!0});var m=T(e);l&&l.l(m),i=j(m),a&&a.l(m),r=j(m),c&&c.l(m),m.forEach(b),this.h()},h(){S(e,"class","description svelte-5jm01p")},m(d,m){X(d,e,m),l&&l.m(e,null),p(e,i),a&&a.m(e,null),p(e,r),c&&c.m(e,null)},p(d,m){var g,_,v;m&128&&(t=Object.keys((g=d[7])==null?void 0:g.unlocks).length),t?l?l.p(d,m):(l=W2(d),l.c(),l.m(e,i)):l&&(l.d(1),l=null),m&128&&(s=Object.keys((_=d[7])==null?void 0:_.whenEquipped).length),s?a?a.p(d,m):(a=U2(d),a.c(),a.m(e,r)):a&&(a.d(1),a=null),m&129&&(o=d[0]&&Object.keys((v=d[7])==null?void 0:v.whenMastered).length),o?c?c.p(d,m):(c=V2(d),c.c(),c.m(e,null)):c&&(c.d(1),c=null)},d(d){d&&b(e),l&&l.d(),a&&a.d(),c&&c.d()}}}function W2(n){let e,t,i,s,r,o=Fl(n[7].unlocks)+"",l;return{c(){e=C("div"),t=C("div"),i=C("u"),s=z("Unlocks"),r=F(),l=z(o)},l(a){e=k(a,"DIV",{});var c=T(e);t=k(c,"DIV",{});var u=T(t);i=k(u,"U",{});var f=T(i);s=G(f,"Unlocks"),f.forEach(b),u.forEach(b),r=j(c),l=G(c,o),c.forEach(b)},m(a,c){X(a,e,c),p(e,t),p(t,i),p(i,s),p(e,r),p(e,l)},p(a,c){c&128&&o!==(o=Fl(a[7].unlocks)+"")&&Be(l,o)},d(a){a&&b(e)}}}function U2(n){let e,t,i,s,r,o=Fl(n[7].whenEquipped)+"",l;return{c(){e=C("div"),t=C("div"),i=C("u"),s=z("When Equipped"),r=F(),l=z(o)},l(a){e=k(a,"DIV",{});var c=T(e);t=k(c,"DIV",{});var u=T(t);i=k(u,"U",{});var f=T(i);s=G(f,"When Equipped"),f.forEach(b),u.forEach(b),r=j(c),l=G(c,o),c.forEach(b)},m(a,c){X(a,e,c),p(e,t),p(t,i),p(i,s),p(e,r),p(e,l)},p(a,c){c&128&&o!==(o=Fl(a[7].whenEquipped)+"")&&Be(l,o)},d(a){a&&b(e)}}}function V2(n){let e,t,i,s,r,o=Fl(n[7].whenMastered)+"",l;return{c(){e=C("div"),t=C("div"),i=C("u"),s=z("When Mastered"),r=F(),l=z(o)},l(a){e=k(a,"DIV",{});var c=T(e);t=k(c,"DIV",{});var u=T(t);i=k(u,"U",{});var f=T(i);s=G(f,"When Mastered"),f.forEach(b),u.forEach(b),r=j(c),l=G(c,o),c.forEach(b)},m(a,c){X(a,e,c),p(e,t),p(t,i),p(i,s),p(e,r),p(e,l)},p(a,c){c&128&&o!==(o=Fl(a[7].whenMastered)+"")&&Be(l,o)},d(a){a&&b(e)}}}function hW(n){let e,t,i,s,r,o,l,a=Ul[n[4]]+"",c,u,f,h,d,m,g,_,v,y,E;i=new fi({props:{disabled:!n[0],$$slots:{t:[fW]},$$scope:{ctx:n}}}),r=new tO({props:{isUnlocked:n[1],isMastered:n[0],onClick:n[8]}}),g=new Tm({props:{isEquipped:n[5]===n[4],onClick:n[11],isVisible:n[1]}});let w=n[6]&&L2(n);return{c(){e=C("div"),t=C("div"),Te(i.$$.fragment),s=F(),Te(r.$$.fragment),o=F(),l=C("div"),c=z(a),u=F(),f=C("div"),h=z("v"),m=F(),Te(g.$$.fragment),_=F(),w&&w.c(),this.h()},l(A){e=k(A,"DIV",{class:!0});var I=T(e);t=k(I,"DIV",{class:!0});var R=T(t);De(i.$$.fragment,R),s=j(R),De(r.$$.fragment,R),o=j(R),l=k(R,"DIV",{class:!0});var D=T(l);c=G(D,a),D.forEach(b),u=j(R),f=k(R,"DIV",{class:!0});var N=T(f);h=G(N,"v"),N.forEach(b),m=j(R),De(g.$$.fragment,R),R.forEach(b),_=j(I),w&&w.l(I),I.forEach(b),this.h()},h(){S(l,"class",xe("class-label")+" svelte-5jm01p"),S(f,"class",d=xe(`caret ${n[6]?"":"flip"}`)+" svelte-5jm01p"),S(t,"class","content svelte-5jm01p"),S(e,"class","container svelte-5jm01p")},m(A,I){X(A,e,I),p(e,t),Oe(i,t,null),p(t,s),Oe(r,t,null),p(t,o),p(t,l),p(l,c),p(t,u),p(t,f),p(f,h),p(t,m),Oe(g,t,null),p(e,_),w&&w.m(e,null),v=!0,y||(E=[Se(l,"click",n[9]),Se(f,"click",n[10])],y=!0)},p(A,[I]){const R={};I&1&&(R.disabled=!A[0]),I&4096&&(R.$$scope={dirty:I,ctx:A}),i.$set(R);const D={};I&2&&(D.isUnlocked=A[1]),I&1&&(D.isMastered=A[0]),I&20&&(D.onClick=A[8]),r.$set(D),(!v||I&16)&&a!==(a=Ul[A[4]]+"")&&Be(c,a),(!v||I&64&&d!==(d=xe(`caret ${A[6]?"":"flip"}`)+" svelte-5jm01p"))&&S(f,"class",d);const N={};I&48&&(N.isEquipped=A[5]===A[4]),I&24&&(N.onClick=A[11]),I&2&&(N.isVisible=A[1]),g.$set(N),A[6]?w?w.p(A,I):(w=L2(A),w.c(),w.m(e,null)):w&&(w.d(1),w=null)},i(A){v||(B(i.$$.fragment,A),B(r.$$.fragment,A),B(g.$$.fragment,A),v=!0)},o(A){Q(i.$$.fragment,A),Q(r.$$.fragment,A),Q(g.$$.fragment,A),v=!1},d(A){A&&b(e),Re(i),Re(r),Re(g),w&&w.d(),y=!1,an(E)}}}function dW(n,e,t){let i,{isMastered:s}=e,{isUnlocked:r}=e,{onToggleClassActive:o}=e,{onToggleEquipClass:l}=e,{targetClass:a}=e,{equippedClass:c}=e,u=!1;const f=()=>o(a),h=()=>t(6,u=!u),d=()=>t(6,u=!u),m=()=>l(a);return n.$$set=g=>{"isMastered"in g&&t(0,s=g.isMastered),"isUnlocked"in g&&t(1,r=g.isUnlocked),"onToggleClassActive"in g&&t(2,o=g.onToggleClassActive),"onToggleEquipClass"in g&&t(3,l=g.onToggleEquipClass),"targetClass"in g&&t(4,a=g.targetClass),"equippedClass"in g&&t(5,c=g.equippedClass)},n.$$.update=()=>{n.$$.dirty&16&&t(7,i=Xt[a])},[s,r,o,l,a,c,u,i,f,h,d,m]}class Iv extends rt{constructor(e){super(),ot(this,e,dW,hW,It,{isMastered:0,isUnlocked:1,onToggleClassActive:2,onToggleEquipClass:3,targetClass:4,equippedClass:5})}}function F2(n,e,t){var o;const i=n.slice();i[19]=e[t];const s=i[0].includes(i[19]);i[20]=s;const r=(o=i[2])==null?void 0:o.has(i[19]);return i[21]=r,i}function j2(n,e,t){var o;const i=n.slice();i[19]=e[t];const s=i[0].includes(i[19]);i[20]=s;const r=(o=i[2])==null?void 0:o.has(i[19]);return i[21]=r,i}function H2(n,e,t){var o;const i=n.slice();i[19]=e[t];const s=i[0].includes(i[19]);i[20]=s;const r=(o=i[2])==null?void 0:o.has(i[19]);return i[21]=r,i}function q2(n){let e,t;return e=new Iv({props:{isMastered:n[20],isUnlocked:n[21],onToggleClassActive:n[4],onToggleEquipClass:n[3],targetClass:n[19],equippedClass:n[1]}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,s){const r={};s&1&&(r.isMastered=i[20]),s&4&&(r.isUnlocked=i[21]),s&2&&(r.equippedClass=i[1]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function z2(n){let e,t;return e=new Iv({props:{isMastered:n[20],isUnlocked:n[21],onToggleClassActive:n[4],onToggleEquipClass:n[3],targetClass:n[19],equippedClass:n[1]}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,s){const r={};s&1&&(r.isMastered=i[20]),s&4&&(r.isUnlocked=i[21]),s&2&&(r.equippedClass=i[1]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function G2(n){let e,t;return e=new Iv({props:{isMastered:n[20],isUnlocked:n[21],onToggleClassActive:n[4],onToggleEquipClass:n[3],targetClass:n[19],equippedClass:n[1]}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,s){const r={};s&1&&(r.isMastered=i[20]),s&4&&(r.isUnlocked=i[21]),s&2&&(r.equippedClass=i[1]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function mW(n){let e,t,i,s,r,o,l,a,c,u,f,h,d,m,g,_,v,y,E,w,A;t=new vc({props:{label:"Classes"}});let I=Array.from(Qg),R=[];for(let L=0;L<I.length;L+=1)R[L]=q2(H2(n,I,L));const D=L=>Q(R[L],1,1,()=>{R[L]=null});let N=Array.from(Ia),W=[];for(let L=0;L<N.length;L+=1)W[L]=z2(j2(n,N,L));const H=L=>Q(W[L],1,1,()=>{W[L]=null});let P=Array.from(ry),Y=[];for(let L=0;L<P.length;L+=1)Y[L]=G2(F2(n,P,L));const O=L=>Q(Y[L],1,1,()=>{Y[L]=null});return{c(){e=C("div"),Te(t.$$.fragment),i=F(),s=C("div"),r=C("div"),o=z("Beginner"),l=F(),a=C("div");for(let L=0;L<R.length;L+=1)R[L].c();c=F(),u=C("div"),f=C("div"),h=z("Intermediate"),d=F(),m=C("div");for(let L=0;L<W.length;L+=1)W[L].c();g=F(),_=C("div"),v=C("div"),y=z("Advanced"),E=F(),w=C("div");for(let L=0;L<Y.length;L+=1)Y[L].c();this.h()},l(L){e=k(L,"DIV",{class:!0});var U=T(e);De(t.$$.fragment,U),i=j(U),s=k(U,"DIV",{class:!0});var K=T(s);r=k(K,"DIV",{class:!0});var te=T(r);o=G(te,"Beginner"),te.forEach(b),l=j(K),a=k(K,"DIV",{class:!0});var q=T(a);for(let ve=0;ve<R.length;ve+=1)R[ve].l(q);q.forEach(b),K.forEach(b),c=j(U),u=k(U,"DIV",{class:!0});var x=T(u);f=k(x,"DIV",{class:!0});var Z=T(f);h=G(Z,"Intermediate"),Z.forEach(b),d=j(x),m=k(x,"DIV",{class:!0});var V=T(m);for(let ve=0;ve<W.length;ve+=1)W[ve].l(V);V.forEach(b),x.forEach(b),g=j(U),_=k(U,"DIV",{class:!0});var ce=T(_);v=k(ce,"DIV",{class:!0});var pe=T(v);y=G(pe,"Advanced"),pe.forEach(b),E=j(ce),w=k(ce,"DIV",{class:!0});var oe=T(w);for(let ve=0;ve<Y.length;ve+=1)Y[ve].l(oe);oe.forEach(b),ce.forEach(b),U.forEach(b),this.h()},h(){S(r,"class","label"),S(a,"class","classes-container svelte-1viguxz"),S(s,"class","category"),S(f,"class","label"),S(m,"class","classes-container svelte-1viguxz"),S(u,"class","category"),S(v,"class","label"),S(w,"class","classes-container svelte-1viguxz"),S(_,"class","category"),S(e,"class","container svelte-1viguxz")},m(L,U){X(L,e,U),Oe(t,e,null),p(e,i),p(e,s),p(s,r),p(r,o),p(s,l),p(s,a);for(let K=0;K<R.length;K+=1)R[K].m(a,null);p(e,c),p(e,u),p(u,f),p(f,h),p(u,d),p(u,m);for(let K=0;K<W.length;K+=1)W[K].m(m,null);p(e,g),p(e,_),p(_,v),p(v,y),p(_,E),p(_,w);for(let K=0;K<Y.length;K+=1)Y[K].m(w,null);A=!0},p(L,[U]){if(U&31){I=Array.from(Qg);let K;for(K=0;K<I.length;K+=1){const te=H2(L,I,K);R[K]?(R[K].p(te,U),B(R[K],1)):(R[K]=q2(te),R[K].c(),B(R[K],1),R[K].m(a,null))}for(He(),K=I.length;K<R.length;K+=1)D(K);qe()}if(U&31){N=Array.from(Ia);let K;for(K=0;K<N.length;K+=1){const te=j2(L,N,K);W[K]?(W[K].p(te,U),B(W[K],1)):(W[K]=z2(te),W[K].c(),B(W[K],1),W[K].m(m,null))}for(He(),K=N.length;K<W.length;K+=1)H(K);qe()}if(U&31){P=Array.from(ry);let K;for(K=0;K<P.length;K+=1){const te=F2(L,P,K);Y[K]?(Y[K].p(te,U),B(Y[K],1)):(Y[K]=G2(te),Y[K].c(),B(Y[K],1),Y[K].m(w,null))}for(He(),K=P.length;K<Y.length;K+=1)O(K);qe()}},i(L){if(!A){B(t.$$.fragment,L);for(let U=0;U<I.length;U+=1)B(R[U]);for(let U=0;U<N.length;U+=1)B(W[U]);for(let U=0;U<P.length;U+=1)B(Y[U]);A=!0}},o(L){Q(t.$$.fragment,L),R=R.filter(Boolean);for(let U=0;U<R.length;U+=1)Q(R[U]);W=W.filter(Boolean);for(let U=0;U<W.length;U+=1)Q(W[U]);Y=Y.filter(Boolean);for(let U=0;U<Y.length;U+=1)Q(Y[U]);A=!1},d(L){L&&b(e),Re(t),Ht(R,L),Ht(W,L),Ht(Y,L)}}}function pW(n,e,t){let i;const{open:s}=Nn(xi.MODAL);let{masteredClasses:r}=e,{equippedClass:o}=e,{setEquippedClass:l}=e,{unlockedClasses:a}=e,{onUpdateUnlockedClasses:c}=e,{customCombatSkills:u}=e,{onUpdateCustomCombatSkills:f}=e,{customCombatArts:h}=e,{onUpdateCustomCombatArts:d}=e,{customWeapons:m}=e,{onUpdateCustomWeapons:g}=e,{playerStats:_}=e,{onUpdatePlayerStats:v}=e,y=new Audio("class-change.webm");const E=I=>{o===I?l(""):i.has(I)&&l(I)},w=(I,R)=>{s(Cu,{pickOne:Xt[I].unlocks.pickOne,reason:`Unlocked by obtaining ${Ul[I]} class`,customWeapons:m,customCombatArts:h,customCombatSkills:u,onUpdateCustomCombatArts:d,onUpdateCustomCombatSkills:f,onUpdateCustomWeapons:g,playerStats:_,onUpdatePlayerStats:v,onSubmit:R})},A=I=>{if(i.has(I))o===I&&l(""),c(Array.from(i).filter(R=>R!==I));else{y.currentTime=0,y.play();const R=()=>{var N,W;const D=(W=(N=Xt[I])==null?void 0:N.unlocks)==null?void 0:W.playerStats;if(D){const H=Object.keys(D).reduce((P,Y)=>(D!=null&&D[Y]&&P[Y]<((D==null?void 0:D[Y])||0)&&(P[Y]=D[Y]),P),{..._});v(H)}c([...Array.from(i),I])};Xt[I].unlocks.pickOne?w(I,R):R()}};return n.$$set=I=>{"masteredClasses"in I&&t(0,r=I.masteredClasses),"equippedClass"in I&&t(1,o=I.equippedClass),"setEquippedClass"in I&&t(5,l=I.setEquippedClass),"unlockedClasses"in I&&t(6,a=I.unlockedClasses),"onUpdateUnlockedClasses"in I&&t(7,c=I.onUpdateUnlockedClasses),"customCombatSkills"in I&&t(8,u=I.customCombatSkills),"onUpdateCustomCombatSkills"in I&&t(9,f=I.onUpdateCustomCombatSkills),"customCombatArts"in I&&t(10,h=I.customCombatArts),"onUpdateCustomCombatArts"in I&&t(11,d=I.onUpdateCustomCombatArts),"customWeapons"in I&&t(12,m=I.customWeapons),"onUpdateCustomWeapons"in I&&t(13,g=I.onUpdateCustomWeapons),"playerStats"in I&&t(14,_=I.playerStats),"onUpdatePlayerStats"in I&&t(15,v=I.onUpdatePlayerStats)},n.$$.update=()=>{n.$$.dirty&64&&t(2,i=new Set(a))},y.volume=.05,[r,o,i,E,A,l,a,c,u,f,h,d,m,g,_,v]}class gW extends rt{constructor(e){super(),ot(this,e,pW,mW,It,{masteredClasses:0,equippedClass:1,setEquippedClass:5,unlockedClasses:6,onUpdateUnlockedClasses:7,customCombatSkills:8,onUpdateCustomCombatSkills:9,customCombatArts:10,onUpdateCustomCombatArts:11,customWeapons:12,onUpdateCustomWeapons:13,playerStats:14,onUpdatePlayerStats:15})}}function Ts(n,e=!!bW("debug")){if(e){const t=_W(n);return function(...s){console.log(`%c${n}`,`color:${t}`,...s)}}else return vW}function vW(){}function bW(n){try{if(typeof window<"u"&&typeof window.localStorage<"u")return window.localStorage[n]}catch{}}function _W(n){let e=0;for(let t=0;t<n.length;t++)e=(e<<5)-e+n.charCodeAt(t),e|=0;return K2[Math.abs(e)%K2.length]}const K2=["#0000CC","#0099FF","#009400","#8dd200","#CCCC00","#CC9933","#ae04e7","#ff35d7","#FF3333","#FF6600","#FF9933","#FFCC33"];function nO(n,{delay:e=0,duration:t=400,easing:i=jN}={}){const s=+getComputedStyle(n).opacity;return{delay:e,duration:t,easing:i,css:r=>`opacity: ${r*s}`}}const{window:yW}=Ju;function X2(n){let e,t,i,s,r,o,l,a,c,u,f,h,d,m,g,_,v,y,E=n[1].closeButton&&Q2(n);var w=n[2];function A(I){return{}}return w&&(o=Cn(w,A())),{c(){e=C("div"),t=C("div"),i=C("div"),E&&E.c(),s=F(),r=C("div"),o&&Te(o.$$.fragment),this.h()},l(I){e=k(I,"DIV",{id:!0,class:!0,style:!0});var R=T(e);t=k(R,"DIV",{class:!0,style:!0});var D=T(t);i=k(D,"DIV",{class:!0,role:!0,"aria-modal":!0,"aria-label":!0,"aria-labelledby":!0,style:!0});var N=T(i);E&&E.l(N),s=j(N),r=k(N,"DIV",{class:!0,style:!0});var W=T(r);o&&De(o.$$.fragment,W),W.forEach(b),N.forEach(b),D.forEach(b),R.forEach(b),this.h()},h(){S(r,"class",l=xe(n[1].classContent)+" svelte-n7cvum"),S(r,"style",n[9]),$e(r,"content",!n[0]),S(i,"class",a=xe(n[1].classWindow)+" svelte-n7cvum"),S(i,"role","dialog"),S(i,"aria-modal","true"),S(i,"aria-label",c=n[1].ariaLabelledBy?null:n[1].ariaLabel||null),S(i,"aria-labelledby",u=n[1].ariaLabelledBy||null),S(i,"style",n[8]),$e(i,"window",!n[0]),S(t,"class",h=xe(n[1].classWindowWrap)+" svelte-n7cvum"),S(t,"style",n[7]),$e(t,"wrap",!n[0]),S(e,"id",d=n[1].id),S(e,"class",m=xe(n[1].classBg)+" svelte-n7cvum"),S(e,"style",n[6]),$e(e,"bg",!n[0])},m(I,R){X(I,e,R),p(e,t),p(t,i),E&&E.m(i,null),p(i,s),p(i,r),o&&Oe(o,r,null),n[50](i),n[51](t),n[52](e),_=!0,v||(y=[Se(i,"introstart",function(){Bn(n[13])&&n[13].apply(this,arguments)}),Se(i,"outrostart",function(){Bn(n[14])&&n[14].apply(this,arguments)}),Se(i,"introend",function(){Bn(n[15])&&n[15].apply(this,arguments)}),Se(i,"outroend",function(){Bn(n[16])&&n[16].apply(this,arguments)}),Se(e,"mousedown",n[20]),Se(e,"mouseup",n[21])],v=!0)},p(I,R){if(n=I,n[1].closeButton?E?(E.p(n,R),R[0]&2&&B(E,1)):(E=Q2(n),E.c(),B(E,1),E.m(i,s)):E&&(He(),Q(E,1,1,()=>{E=null}),qe()),w!==(w=n[2])){if(o){He();const D=o;Q(D.$$.fragment,1,0,()=>{Re(D,1)}),qe()}w?(o=Cn(w,A()),Te(o.$$.fragment),B(o.$$.fragment,1),Oe(o,r,null)):o=null}(!_||R[0]&2&&l!==(l=xe(n[1].classContent)+" svelte-n7cvum"))&&S(r,"class",l),(!_||R[0]&512)&&S(r,"style",n[9]),(!_||R[0]&3)&&$e(r,"content",!n[0]),(!_||R[0]&2&&a!==(a=xe(n[1].classWindow)+" svelte-n7cvum"))&&S(i,"class",a),(!_||R[0]&2&&c!==(c=n[1].ariaLabelledBy?null:n[1].ariaLabel||null))&&S(i,"aria-label",c),(!_||R[0]&2&&u!==(u=n[1].ariaLabelledBy||null))&&S(i,"aria-labelledby",u),(!_||R[0]&256)&&S(i,"style",n[8]),(!_||R[0]&3)&&$e(i,"window",!n[0]),(!_||R[0]&2&&h!==(h=xe(n[1].classWindowWrap)+" svelte-n7cvum"))&&S(t,"class",h),(!_||R[0]&128)&&S(t,"style",n[7]),(!_||R[0]&3)&&$e(t,"wrap",!n[0]),(!_||R[0]&2&&d!==(d=n[1].id))&&S(e,"id",d),(!_||R[0]&2&&m!==(m=xe(n[1].classBg)+" svelte-n7cvum"))&&S(e,"class",m),(!_||R[0]&64)&&S(e,"style",n[6]),(!_||R[0]&3)&&$e(e,"bg",!n[0])},i(I){_||(B(E),o&&B(o.$$.fragment,I),uu(()=>{f||(f=Ro(i,n[12],n[1].transitionWindowProps,!0)),f.run(1)}),uu(()=>{g||(g=Ro(e,n[11],n[1].transitionBgProps,!0)),g.run(1)}),_=!0)},o(I){Q(E),o&&Q(o.$$.fragment,I),f||(f=Ro(i,n[12],n[1].transitionWindowProps,!1)),f.run(0),g||(g=Ro(e,n[11],n[1].transitionBgProps,!1)),g.run(0),_=!1},d(I){I&&b(e),E&&E.d(),o&&Re(o),n[50](null),I&&f&&f.end(),n[51](null),n[52](null),I&&g&&g.end(),v=!1,an(y)}}}function Q2(n){let e,t,i,s,r;const o=[EW,SW],l=[];function a(c,u){return u[0]&2&&(e=null),e==null&&(e=!!c[17](c[1].closeButton)),e?0:1}return t=a(n,[-1,-1,-1]),i=l[t]=o[t](n),{c(){i.c(),s=tt()},l(c){i.l(c),s=tt()},m(c,u){l[t].m(c,u),X(c,s,u),r=!0},p(c,u){let f=t;t=a(c,u),t===f?l[t].p(c,u):(He(),Q(l[f],1,1,()=>{l[f]=null}),qe(),i=l[t],i?i.p(c,u):(i=l[t]=o[t](c),i.c()),B(i,1),i.m(s.parentNode,s))},i(c){r||(B(i),r=!0)},o(c){Q(i),r=!1},d(c){l[t].d(c),c&&b(s)}}}function SW(n){let e,t,i,s;return{c(){e=C("button"),this.h()},l(r){e=k(r,"BUTTON",{class:!0,"aria-label":!0,style:!0,type:!0}),T(e).forEach(b),this.h()},h(){S(e,"class",t=xe(n[1].classCloseButton)+" svelte-n7cvum"),S(e,"aria-label","Close modal"),S(e,"style",n[10]),S(e,"type","button"),$e(e,"close",!n[0])},m(r,o){X(r,e,o),i||(s=Se(e,"click",n[18]),i=!0)},p(r,o){o[0]&2&&t!==(t=xe(r[1].classCloseButton)+" svelte-n7cvum")&&S(e,"class",t),o[0]&1024&&S(e,"style",r[10]),o[0]&3&&$e(e,"close",!r[0])},i:Xe,o:Xe,d(r){r&&b(e),i=!1,s()}}}function EW(n){let e,t,i;var s=n[1].closeButton;function r(o){return{props:{onClose:o[18]}}}return s&&(e=Cn(s,r(n))),{c(){e&&Te(e.$$.fragment),t=tt()},l(o){e&&De(e.$$.fragment,o),t=tt()},m(o,l){e&&Oe(e,o,l),X(o,t,l),i=!0},p(o,l){if(s!==(s=o[1].closeButton)){if(e){He();const a=e;Q(a.$$.fragment,1,0,()=>{Re(a,1)}),qe()}s?(e=Cn(s,r(o)),Te(e.$$.fragment),B(e.$$.fragment,1),Oe(e,t.parentNode,t)):e=null}},i(o){i||(e&&B(e.$$.fragment,o),i=!0)},o(o){e&&Q(e.$$.fragment,o),i=!1},d(o){o&&b(t),e&&Re(e,o)}}}function AW(n){let e,t,i,s,r=n[2]&&X2(n);const o=n[49].default,l=cs(o,n,n[48],null);return{c(){r&&r.c(),e=F(),l&&l.c()},l(a){r&&r.l(a),e=j(a),l&&l.l(a)},m(a,c){r&&r.m(a,c),X(a,e,c),l&&l.m(a,c),t=!0,i||(s=Se(yW,"keydown",n[19]),i=!0)},p(a,c){a[2]?r?(r.p(a,c),c[0]&4&&B(r,1)):(r=X2(a),r.c(),B(r,1),r.m(e.parentNode,e)):r&&(He(),Q(r,1,1,()=>{r=null}),qe()),l&&l.p&&(!t||c[1]&131072)&&us(l,o,a,a[48],t?hs(o,a[48],c,null):fs(a[48]),null)},i(a){t||(B(r),B(l,a),t=!0)},o(a){Q(r),Q(l,a),t=!1},d(a){r&&r.d(a),a&&b(e),l&&l.d(a),i=!1,s()}}}function wW(n,e={}){return function(i){return new n({...i,props:{...e,...i.props}})}}function CW(n,e,t){let{$$slots:i={},$$scope:s}=e;const r=Yu(),o=Zd,l=ye=>ye.tabIndex>=0&&!ye.hidden&&!ye.disabled&&ye.style.display!=="none"&&ye.type!=="hidden"&&Boolean(ye.offsetWidth||ye.offsetHeight||ye.getClientRects().length);let{isTabbable:a=l}=e,{show:c=null}=e,{id:u=null}=e,{key:f="simple-modal"}=e,{ariaLabel:h=null}=e,{ariaLabelledBy:d=null}=e,{closeButton:m=!0}=e,{closeOnEsc:g=!0}=e,{closeOnOuterClick:_=!0}=e,{styleBg:v={}}=e,{styleWindowWrap:y={}}=e,{styleWindow:E={}}=e,{styleContent:w={}}=e,{styleCloseButton:A={}}=e,{classBg:I=null}=e,{classWindowWrap:R=null}=e,{classWindow:D=null}=e,{classContent:N=null}=e,{classCloseButton:W=null}=e,{unstyled:H=!1}=e,{setContext:P=o}=e,{transitionBg:Y=nO}=e,{transitionBgProps:O={duration:250}}=e,{transitionWindow:L=Y}=e,{transitionWindowProps:U=O}=e,{disableFocusTrap:K=!1}=e;const te={id:u,ariaLabel:h,ariaLabelledBy:d,closeButton:m,closeOnEsc:g,closeOnOuterClick:_,styleBg:v,styleWindowWrap:y,styleWindow:E,styleContent:w,styleCloseButton:A,classBg:I,classWindowWrap:R,classWindow:D,classContent:N,classCloseButton:W,transitionBg:Y,transitionBgProps:O,transitionWindow:L,transitionWindowProps:U,disableFocusTrap:K,isTabbable:a,unstyled:H};let q={...te},x=null,Z,V,ce,pe,oe,ve,Ne,J,Ie,Ue,re,Le,fe,M,ae;const de=ye=>ye.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase(),$=ye=>ye?Object.keys(ye).reduce((Ze,Lt)=>`${Ze}; ${de(Lt)}: ${ye[Lt]}`,""):"",ee=ye=>!!(ye&&ye.constructor&&ye.call&&ye.apply),ie=()=>{t(6,oe=$(Object.assign({},{width:window.innerWidth,height:window.innerHeight},q.styleBg))),t(7,ve=$(q.styleWindowWrap)),t(8,Ne=$(q.styleWindow)),t(9,J=$(q.styleContent)),t(10,Ie=$(q.styleCloseButton)),t(11,Ue=q.transitionBg),t(12,re=q.transitionWindow)},me=()=>{};let ue=me,se=me,_e=me,ke=me;const Ce=(ye,Ze={},Lt={},vt={})=>{t(2,x=wW(ye,Ze)),t(1,q={...te,...Lt}),ie(),be(),t(13,ue=Ct=>{vt.onOpen&&vt.onOpen(Ct),r("open"),r("opening")}),t(14,se=Ct=>{vt.onClose&&vt.onClose(Ct),r("close"),r("closing")}),t(15,_e=Ct=>{vt.onOpened&&vt.onOpened(Ct),r("opened")}),t(16,ke=Ct=>{vt.onClosed&&vt.onClosed(Ct),r("closed")})},ge=(ye={})=>{x&&(t(14,se=ye.onClose||se),t(16,ke=ye.onClosed||ke),t(2,x=null),nt())},Me=ye=>{if(q.closeOnEsc&&x&&ye.key==="Escape"&&(ye.preventDefault(),ge()),x&&ye.key==="Tab"&&!q.disableFocusTrap){const Ze=ce.querySelectorAll("*"),Lt=Array.from(Ze).filter(q.isTabbable).sort((Ct,Ot)=>Ct.tabIndex-Ot.tabIndex);let vt=Lt.indexOf(document.activeElement);vt===-1&&ye.shiftKey&&(vt=0),vt+=Lt.length+(ye.shiftKey?-1:1),vt%=Lt.length,Lt[vt].focus(),ye.preventDefault()}},Ee=ye=>{q.closeOnOuterClick&&(ye.target===Z||ye.target===V)&&(ae=ye.target)},Pe=ye=>{q.closeOnOuterClick&&ye.target===ae&&(ye.preventDefault(),ge())},be=()=>{pe=window.scrollY,Le=document.body.style.position,fe=document.body.style.overflow,M=document.body.style.width,document.body.style.position="fixed",document.body.style.top=`-${pe}px`,document.body.style.overflow="hidden",document.body.style.width="100%"},nt=()=>{document.body.style.position=Le||"",document.body.style.top="",document.body.style.overflow=fe||"",document.body.style.width=M||"",window.scrollTo({top:pe,left:0,behavior:"instant"})};P(f,{open:Ce,close:ge});let we=!1;_r(()=>{we&&ge()}),Mi(()=>{t(47,we=!0)});function lt(ye){Vt[ye?"unshift":"push"](()=>{ce=ye,t(5,ce)})}function je(ye){Vt[ye?"unshift":"push"](()=>{V=ye,t(4,V)})}function Qe(ye){Vt[ye?"unshift":"push"](()=>{Z=ye,t(3,Z)})}return n.$$set=ye=>{"isTabbable"in ye&&t(22,a=ye.isTabbable),"show"in ye&&t(23,c=ye.show),"id"in ye&&t(24,u=ye.id),"key"in ye&&t(25,f=ye.key),"ariaLabel"in ye&&t(26,h=ye.ariaLabel),"ariaLabelledBy"in ye&&t(27,d=ye.ariaLabelledBy),"closeButton"in ye&&t(28,m=ye.closeButton),"closeOnEsc"in ye&&t(29,g=ye.closeOnEsc),"closeOnOuterClick"in ye&&t(30,_=ye.closeOnOuterClick),"styleBg"in ye&&t(31,v=ye.styleBg),"styleWindowWrap"in ye&&t(32,y=ye.styleWindowWrap),"styleWindow"in ye&&t(33,E=ye.styleWindow),"styleContent"in ye&&t(34,w=ye.styleContent),"styleCloseButton"in ye&&t(35,A=ye.styleCloseButton),"classBg"in ye&&t(36,I=ye.classBg),"classWindowWrap"in ye&&t(37,R=ye.classWindowWrap),"classWindow"in ye&&t(38,D=ye.classWindow),"classContent"in ye&&t(39,N=ye.classContent),"classCloseButton"in ye&&t(40,W=ye.classCloseButton),"unstyled"in ye&&t(0,H=ye.unstyled),"setContext"in ye&&t(41,P=ye.setContext),"transitionBg"in ye&&t(42,Y=ye.transitionBg),"transitionBgProps"in ye&&t(43,O=ye.transitionBgProps),"transitionWindow"in ye&&t(44,L=ye.transitionWindow),"transitionWindowProps"in ye&&t(45,U=ye.transitionWindowProps),"disableFocusTrap"in ye&&t(46,K=ye.disableFocusTrap),"$$scope"in ye&&t(48,s=ye.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&8388608|n.$$.dirty[1]&65536&&we&&(ee(c)?Ce(c):ge())},[H,q,x,Z,V,ce,oe,ve,Ne,J,Ie,Ue,re,ue,se,_e,ke,ee,ge,Me,Ee,Pe,a,c,u,f,h,d,m,g,_,v,y,E,w,A,I,R,D,N,W,P,Y,O,L,U,K,we,s,i,lt,je,Qe]}let kW=class extends rt{constructor(e){super(),ot(this,e,CW,AW,It,{isTabbable:22,show:23,id:24,key:25,ariaLabel:26,ariaLabelledBy:27,closeButton:28,closeOnEsc:29,closeOnOuterClick:30,styleBg:31,styleWindowWrap:32,styleWindow:33,styleContent:34,styleCloseButton:35,classBg:36,classWindowWrap:37,classWindow:38,classContent:39,classCloseButton:40,unstyled:0,setContext:41,transitionBg:42,transitionBgProps:43,transitionWindow:44,transitionWindowProps:45,disableFocusTrap:46},null,[-1,-1,-1])}};const IW=300,iO=300,Y2=300,TW=300,J2=50,OW=200,RW=400,DW=1200,i1=1e3,ku=100,Z2=2e4,jl=[{start:0,end:ku}],NW=100*1024*1024,PW=1024*1024,s1=10*1024*1024,x2=10*1024,sd={closeButton:!1,classBg:"jse-modal-bg",classWindow:"jse-modal-window",classWindowWrap:"jse-modal-window-wrap",classContent:"jse-modal-content"},MW={...sd,classWindow:"jse-modal-window jse-modal-window-sort"},BW={...sd,classWindow:"jse-modal-window jse-modal-window-transform"},Tv="Insert or paste contents, enter [ insert a new array, enter { to insert a new object, or start typing to insert a new value",sO="Open context menu (Click here, right click on the selection, or use the context menu button or Ctrl+Q)",vo="hover-insert-inside",Iu="hover-insert-after",r1="hover-collection",wp="valid",$2="repairable",LW="invalid",Hc=(40+2)*8,qc=260,Ol={NO:"NO",SELF:"SELF",NEXT_INSIDE:"NEXT_INSIDE"};let eS=0;function nu(){return eS++,eS}function Qo(n){return Qo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qo(n)}function pi(n){return Array.isArray(n)}function Li(n){return n!==null&&Qo(n)==="object"&&n.constructor===Object}function rO(n){return n&&Qo(n)==="object"?n.op==="add":!1}function oO(n){return n&&Qo(n)==="object"?n.op==="remove":!1}function lO(n){return n&&Qo(n)==="object"?n.op==="replace":!1}function o1(n){return n&&Qo(n)==="object"?n.op==="copy":!1}function Ga(n){return n&&Qo(n)==="object"?n.op==="move":!1}function l1(n){return l1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l1(n)}function WW(n,e){return JSON.stringify(n)===JSON.stringify(e)}function UW(n,e){return n===e}function aO(n){return n.slice(0,n.length-1)}function VW(n){return n[n.length-1]}function FW(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:UW;if(n.length<e.length)return!1;for(var i=0;i<e.length;i++)if(!t(n[i],e[i]))return!1;return!0}function cO(n){return l1(n)==="object"&&n!==null}function Tu(n){return Tu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tu(n)}function tS(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,i)}return t}function jW(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?tS(Object(t),!0).forEach(function(i){HW(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):tS(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function HW(n,e,t){return e=qW(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function qW(n){var e=zW(n,"string");return Tu(e)==="symbol"?e:String(e)}function zW(n,e){if(Tu(n)!=="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(Tu(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Ov(n){if(pi(n)){var e=n.slice();return Object.getOwnPropertySymbols(n).forEach(function(i){e[i]=n[i]}),e}else if(Li(n)){var t=jW({},n);return Object.getOwnPropertySymbols(n).forEach(function(i){t[i]=n[i]}),t}else return n}function Rv(n,e,t){if(n[e]===t)return n;var i=Ov(n);return i[e]=t,i}function wt(n,e){for(var t=n,i=0;i<e.length;)Li(t)?t=t[e[i]]:pi(t)?t=t[parseInt(e[i])]:t=void 0,i++;return t}function hr(n,e,t){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e.length===0)return t;var s=e[0],r=hr(n?n[s]:void 0,e.slice(1),t,i);if(Li(n)||pi(n))return Rv(n,s,r);if(i){var o=GW.test(s)?[]:{};return o[s]=r,o}else throw new Error("Path does not exist")}var GW=/^\d+$/;function uO(n,e,t){if(e.length===0)return t(n);if(!cO(n))throw new Error("Path doesn't exist");var i=e[0],s=uO(n[i],e.slice(1),t);return Rv(n,i,s)}function Dv(n,e){if(e.length===0)return n;if(!cO(n))throw new Error("Path does not exist");if(e.length===1){var t=e[0];if(t in n){var i=Ov(n);return pi(i)&&i.splice(parseInt(t),1),Li(i)&&delete i[t],i}else return n}var s=e[0],r=Dv(n[s],e.slice(1));return Rv(n,s,r)}function Nv(n,e,t){var i=e.slice(0,e.length-1),s=e[e.length-1];return uO(n,i,function(r){if(!Array.isArray(r))throw new TypeError("Array expected at path "+JSON.stringify(i));var o=Ov(r);return o.splice(parseInt(s),0,t),o})}function Yo(n,e){return n===void 0?!1:e.length===0?!0:n===null?!1:Yo(n[e[0]],e.slice(1))}function Jo(n){var e=n.split("/");return e.shift(),e.map(function(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")})}function mt(n){return n.map(fO).join("")}function fO(n){return"/"+String(n).replace(/~/g,"~0").replace(/\//g,"~1")}function a1(n,e){return n+fO(e)}function Ka(n,e){return n.startsWith(e)&&(n.length===e.length||n[e.length]==="/")}function Rl(n,e,t){for(var i=n,s=0;s<e.length;s++){$W(e[s]);var r=e[s];if(t&&t.before){var o=t.before(i,r);if(o!==void 0){if(o.document!==void 0&&(i=o.document),o.json!==void 0)throw new Error('Deprecation warning: returned object property ".json" has been renamed to ".document"');o.operation!==void 0&&(r=o.operation)}}var l=i,a=jr(i,r.path);if(r.op==="add")i=QW(i,a,r.value);else if(r.op==="remove")i=XW(i,a);else if(r.op==="replace")i=KW(i,a,r.value);else if(r.op==="copy")i=YW(i,a,c1(r.from));else if(r.op==="move")i=JW(i,a,c1(r.from));else if(r.op==="test")ZW(i,a,r.value);else throw new Error("Unknown JSONPatch operation "+JSON.stringify(r));if(t&&t.after){var c=t.after(i,r,l);c!==void 0&&(i=c)}}return i}function KW(n,e,t){return hr(n,e,t)}function XW(n,e){return Dv(n,e)}function QW(n,e,t){return pf(n,e)?Nv(n,e,t):hr(n,e,t)}function YW(n,e,t){var i=wt(n,t);if(pf(n,e))return Nv(n,e,i);var s=wt(n,t);return hr(n,e,s)}function JW(n,e,t){var i=wt(n,t),s=Dv(n,t);return pf(s,e)?Nv(s,e,i):hr(s,e,i)}function ZW(n,e,t){if(t===void 0)throw new Error('Test failed: no value provided (path: "'.concat(mt(e),'")'));if(!Yo(n,e))throw new Error('Test failed: path not found (path: "'.concat(mt(e),'")'));var i=wt(n,e);if(!WW(i,t))throw new Error('Test failed, value differs (path: "'.concat(mt(e),'")'))}function pf(n,e){if(e.length===0)return!1;var t=wt(n,aO(e));return Array.isArray(t)}function xW(n,e){if(VW(e)!=="-")return e;var t=aO(e),i=wt(n,t);return t.concat(i.length)}function $W(n){var e=["add","remove","replace","copy","move","test"];if(!e.includes(n.op))throw new Error("Unknown JSONPatch op "+JSON.stringify(n.op));if(typeof n.path!="string")throw new Error('Required property "path" missing or not a string in operation '+JSON.stringify(n));if((n.op==="copy"||n.op==="move")&&typeof n.from!="string")throw new Error('Required property "from" missing or not a string in operation '+JSON.stringify(n))}function jr(n,e){return xW(n,Jo(e))}function c1(n){return Jo(n)}function eU(n){return sU(n)||iU(n)||nU(n)||tU()}function tU(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nU(n,e){if(n){if(typeof n=="string")return u1(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return u1(n,e)}}function iU(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function sU(n){if(Array.isArray(n))return u1(n)}function u1(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function hO(n,e,t){var i=[];return Rl(n,e,{before:function(r,o){var l,a=jr(r,o.path);if(o.op==="add")l=pO(r,a);else if(o.op==="remove")l=mO(r,a);else if(o.op==="replace")l=dO(r,a);else if(o.op==="copy")l=rU(r,a);else if(o.op==="move")l=oU(r,a,c1(o.from));else if(o.op==="test")l=[];else throw new Error("Unknown JSONPatch operation "+JSON.stringify(o));var c;if(t&&t.before){var u=t.before(r,o,l);if(u&&u.revertOperations&&(l=u.revertOperations),u&&u.document&&(c=u.document),u&&u.json)throw new Error('Deprecation warning: returned object property ".json" has been renamed to ".document"')}if(i=l.concat(i),c!==void 0)return{document:c}}}),i}function dO(n,e){return[{op:"replace",path:mt(e),value:wt(n,e)}]}function mO(n,e){return[{op:"add",path:mt(e),value:wt(n,e)}]}function pO(n,e){return pf(n,e)||!Yo(n,e)?[{op:"remove",path:mt(e)}]:dO(n,e)}function rU(n,e){return pO(n,e)}function oU(n,e,t){if(e.length<t.length&&FW(t,e))return[{op:"replace",path:mt(e),value:n}];var i={op:"move",from:mt(e),path:mt(t)};return!pf(n,e)&&Yo(n,e)?[i].concat(eU(mO(n,e))):[i]}var eo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Om={},nS={b:"\b",f:"\f",n:`
`,r:"\r",t:"	",'"':'"',"/":"/","\\":"\\"},lU="a".charCodeAt();Om.parse=function(n,e,t){var i={},s=0,r=0,o=0,l=t&&t.bigint&&typeof BigInt<"u";return{data:a("",!0),pointers:i};function a(N,W){c();var H;E(N,"value");var P=g();switch(P){case"t":m("rue"),H=!0;break;case"f":m("alse"),H=!1;break;case"n":m("ull"),H=null;break;case'"':H=u();break;case"[":H=h(N);break;case"{":H=d(N);break;default:_(),"-0123456789".indexOf(P)>=0?H=f():I()}return E(N,"valueEnd"),c(),W&&o<n.length&&I(),H}function c(){e:for(;o<n.length;){switch(n[o]){case" ":r++;break;case"	":r+=4;break;case"\r":r=0;break;case`
`:r=0,s++;break;default:break e}o++}}function u(){for(var N="",W;W=g(),W!='"';)W=="\\"?(W=g(),W in nS?N+=nS[W]:W=="u"?N+=v():R()):N+=W;return N}function f(){var N="",W=!0;n[o]=="-"&&(N+=g()),N+=n[o]=="0"?g():y(),n[o]=="."&&(N+=g()+y(),W=!1),(n[o]=="e"||n[o]=="E")&&(N+=g(),(n[o]=="+"||n[o]=="-")&&(N+=g()),N+=y(),W=!1);var H=+N;return l&&W&&(H>Number.MAX_SAFE_INTEGER||H<Number.MIN_SAFE_INTEGER)?BigInt(N):H}function h(N){c();var W=[],H=0;if(g()=="]")return W;for(_();;){var P=N+"/"+H;W.push(a(P)),c();var Y=g();if(Y=="]")break;Y!=","&&R(),c(),H++}return W}function d(N){c();var W={};if(g()=="}")return W;for(_();;){var H=A();g()!='"'&&R();var P=u(),Y=N+"/"+f1(P);w(Y,"key",H),E(Y,"keyEnd"),c(),g()!=":"&&R(),c(),W[P]=a(Y),c();var O=g();if(O=="}")break;O!=","&&R(),c()}return W}function m(N){for(var W=0;W<N.length;W++)g()!==N[W]&&R()}function g(){D();var N=n[o];return o++,r++,N}function _(){o--,r--}function v(){for(var N=4,W=0;N--;){W<<=4;var H=g().toLowerCase();H>="a"&&H<="f"?W+=H.charCodeAt()-lU+10:H>="0"&&H<="9"?W+=+H:R()}return String.fromCharCode(W)}function y(){for(var N="";n[o]>="0"&&n[o]<="9";)N+=g();if(N.length)return N;D(),I()}function E(N,W){w(N,W,A())}function w(N,W,H){i[N]=i[N]||{},i[N][W]=H}function A(){return{line:s,column:r,pos:o}}function I(){throw new SyntaxError("Unexpected token "+n[o]+" in JSON at position "+o)}function R(){_(),I()}function D(){if(o>=n.length)throw new SyntaxError("Unexpected end of JSON input")}};Om.stringify=function(n,e,t){if(!Wf(n))return;var i=0,s,r,o=typeof t=="object"?t.space:t;switch(typeof o){case"number":var l=o>10?10:o<0?0:Math.floor(o);o=l&&w(l," "),s=l,r=l;break;case"string":o=o.slice(0,10),s=0,r=0;for(var a=0;a<o.length;a++){var c=o[a];switch(c){case" ":r++;break;case"	":r+=4;break;case"\r":r=0;break;case`
`:r=0,i++;break;default:throw new Error("whitespace characters not allowed in JSON")}s++}break;default:o=void 0}var u="",f={},h=0,d=0,m=0,g=t&&t.es6&&typeof Map=="function";return _(n,0,""),{json:u,pointers:f};function _(A,I,R){switch(E(R,"value"),typeof A){case"number":case"bigint":case"boolean":v(""+A);break;case"string":v(Uf(A));break;case"object":A===null?v("null"):typeof A.toJSON=="function"?v(Uf(A.toJSON())):Array.isArray(A)?D():g?A.constructor.BYTES_PER_ELEMENT?D():A instanceof Map?W():A instanceof Set?W(!0):N():N()}E(R,"valueEnd");function D(){if(A.length){v("[");for(var H=I+1,P=0;P<A.length;P++){P&&v(","),y(H);var Y=Wf(A[P])?A[P]:null,O=R+"/"+P;_(Y,H,O)}y(I),v("]")}else v("[]")}function N(){var H=Object.keys(A);if(H.length){v("{");for(var P=I+1,Y=0;Y<H.length;Y++){var O=H[Y],L=A[O];if(Wf(L)){Y&&v(",");var U=R+"/"+f1(O);y(P),E(U,"key"),v(Uf(O)),E(U,"keyEnd"),v(":"),o&&v(" "),_(L,P,U)}}y(I),v("}")}else v("{}")}function W(H){if(A.size){v("{");for(var P=I+1,Y=!0,O=A.entries(),L=O.next();!L.done;){var U=L.value,K=U[0],te=H?!0:U[1];if(Wf(te)){Y||v(","),Y=!1;var q=R+"/"+f1(K);y(P),E(q,"key"),v(Uf(K)),E(q,"keyEnd"),v(":"),o&&v(" "),_(te,P,q)}L=O.next()}y(I),v("}")}else v("{}")}}function v(A){d+=A.length,m+=A.length,u+=A}function y(A){if(o){for(u+=`
`+w(A,o),h++,d=0;A--;)i?(h+=i,d=r):d+=r,m+=s;m+=1}}function E(A,I){f[A]=f[A]||{},f[A][I]={line:h,column:d,pos:m}}function w(A,I){return Array(A+1).join(I)}};var aU=["number","bigint","boolean","string","object"];function Wf(n){return aU.indexOf(typeof n)>=0}var cU=/"|\\/g,uU=/[\b]/g,fU=/\f/g,hU=/\n/g,dU=/\r/g,mU=/\t/g;function Uf(n){return n=n.replace(cU,"\\$&").replace(fU,"\\f").replace(uU,"\\b").replace(hU,"\\n").replace(dU,"\\r").replace(mU,"\\t"),'"'+n+'"'}var pU=/~/g,gU=/\//g;function f1(n){return n.replace(pU,"~0").replace(gU,"~1")}function Cs(n,e){if(!(this instanceof Cs))throw new SyntaxError("Constructor must be called with the new operator");this.message=n+" (char "+e+")",this.char=e,this.stack=new Error().stack}Cs.prototype=new Error;Cs.prototype.constructor=Error;var Pv={"'":!0,"":!0,"":!0,"`":!0,"":!0},Mv={'"':!0,"":!0,"":!0};function iS(n){return vU.test(n)}var vU=/^[a-zA-Z_]$/;function bU(n){return _U.test(n)}var _U=/^[0-9a-fA-F]$/;function ko(n){return yU.test(n)}var yU=/^[0-9]$/;function rd(n){return n===" "||n==="	"||n===`
`||n==="\r"}function h1(n){return n===""||n>=""&&n<=""||n===""||n===""||n===""}function SU(n){for(var e="",t=0;t<n.length;t++){var i=n[t];e+=h1(i)?" ":i}return e}function EU(n){return Pv[n]===!0||Mv[n]===!0}function sS(n){return Pv[n]===!0}function AU(n){return Mv[n]===!0}function rS(n){return Pv[n]===!0?"'":Mv[n]===!0?'"':n}function od(n,e){var t=n.lastIndexOf(e);return t!==-1?n.substring(0,t)+n.substring(t+1):n}function Ta(n,e){var t=n.length;if(!rd(n[t-1]))return n+e;for(;rd(n[t-1]);)t--;return n.substring(0,t)+e+n.substring(t)}function wU(n,e,t){return n.substring(0,t)+e+n.substring(t)}var Ki=0,bc=1,Hl=2,Xa=3,gO=4,d1=5,Qa=6,CU={"":!0,"{":!0,"}":!0,"[":!0,"]":!0,":":!0,",":!0,"(":!0,")":!0,";":!0,"+":!0},kU={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},oS={"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},IU={null:"null",true:"true",false:"false"},lS={None:"null",True:"true",False:"false"},Do="",_n="",Ei=0,yt="",gt="",Ft=Qa;function Fo(n){Do=n,_n="",Ei=0,yt=Do.charAt(0),gt="",Ft=Qa,xn();var e=Ft;if(Ou(),aS(),gt==="")return _n;if(e===Ft&&ld()){for(var t="";e===Ft&&ld();)_n=Ta(_n,","),t+=_n,_n="",Ou(),aS();return`[
`.concat(t).concat(_n,`
]`)}throw new Cs("Unexpected characters",Ei-gt.length)}function yi(){Ei++,yt=Do.charAt(Ei)}function TU(){yi(),yt==="\\"&&yi()}function ld(){return Ft===Ki&&(gt==="["||gt==="{")||Ft===Hl||Ft===bc||Ft===Xa}function OU(){return Ft===Hl||Ft===bc||Ft===Xa}function xn(){_n+=gt,Ft=Qa,gt="",RU(),Ft===gO&&(gt=SU(gt),xn()),Ft===d1&&(Ft=Qa,gt="",xn())}function aS(){gt===","&&(gt="",Ft=Qa,xn())}function RU(){if(CU[yt]){Ft=Ki,gt=yt,yi();return}DU()}function DU(){if(ko(yt)||yt==="-"){if(Ft=bc,yt==="-"){if(gt+=yt,yi(),!ko(yt))throw new Cs("Invalid number, digit expected",Ei)}else yt==="0"&&(gt+=yt,yi());for(;ko(yt);)gt+=yt,yi();if(yt==="."){if(gt+=yt,yi(),!ko(yt))throw new Cs("Invalid number, digit expected",Ei);for(;ko(yt);)gt+=yt,yi()}if(yt==="e"||yt==="E"){if(gt+=yt,yi(),(yt==="+"||yt==="-")&&(gt+=yt,yi()),!ko(yt))throw new Cs("Invalid number, digit expected",Ei);for(;ko(yt);)gt+=yt,yi()}return}NU()}function NU(){yt==="\\"&&Do.charAt(Ei+1)==='"'?(yi(),cS(TU)):cS(yi)}function cS(n){if(EU(yt)){var e=rS(yt),t=sS(yt)?sS:AU;for(gt+='"',Ft=Hl,n();yt!==""&&!t(yt);)if(yt==="\\"){n();var i=kU[yt];if(i!==void 0)gt+="\\"+yt,n();else if(yt==="u"){gt+="\\u",n();for(var s=0;s<4;s++){if(!bU(yt))throw new Cs("Invalid unicode character",Ei-gt.length);gt+=yt,n()}}else if(yt==="'")gt+="'",n();else throw new Cs('Invalid escape character "\\'+yt+'"',Ei)}else oS[yt]?(gt+=oS[yt],n()):yt==='"'?(gt+='\\"',n()):(gt+=yt,n());if(rS(yt)!==e)throw new Cs("End of string expected",Ei-gt.length);gt+='"',n();return}PU()}function PU(){if(iS(yt)){for(Ft=Xa;iS(yt)||ko(yt)||yt==="$";)gt+=yt,yi();return}MU()}function MU(){if(rd(yt)||h1(yt)){for(Ft=gO;rd(yt)||h1(yt);)gt+=yt,yi();return}BU()}function BU(){if(yt==="/"&&Do[Ei+1]==="*"){for(Ft=d1;yt!==""&&(yt!=="*"||yt==="*"&&Do[Ei+1]!=="/");)gt+=yt,yi();yt==="*"&&Do[Ei+1]==="/"&&(gt+=yt,yi(),gt+=yt,yi());return}if(yt==="/"&&Do[Ei+1]==="/"){for(Ft=d1;yt!==""&&yt!==`
`;)gt+=yt,yi();return}LU()}function LU(){for(Ft=Qa;yt!=="";)gt+=yt,yi();throw new Cs('Syntax error in part "'+gt+'"',Ei-gt.length)}function Ou(){if(Ft===Ki&&gt==="{"){if(xn(),Ft===Ki&&gt==="}"){xn();return}for(;;){if((Ft===Xa||Ft===bc)&&(Ft=Hl,gt='"'.concat(gt,'"')),Ft!==Hl)throw new Cs("Object key expected",Ei-gt.length);if(xn(),Ft===Ki&&gt===":")xn();else if(ld())_n=Ta(_n,":");else throw new Cs("Colon expected",Ei-gt.length);if(Ou(),Ft===Ki&&gt===","){if(xn(),Ft===Ki&&gt==="}"){_n=od(_n,",");break}if(gt===""){_n=od(_n,",");break}}else if(OU())_n=Ta(_n,",");else break}Ft===Ki&&gt==="}"?xn():_n=Ta(_n,"}");return}WU()}function WU(){if(Ft===Ki&&gt==="["){if(xn(),Ft===Ki&&gt==="]"){xn();return}for(;;)if(Ou(),Ft===Ki&&gt===","){if(xn(),Ft===Ki&&gt==="]"){_n=od(_n,",");break}if(gt===""){_n=od(_n,",");break}}else if(ld())_n=Ta(_n,",");else break;Ft===Ki&&gt==="]"?xn():_n=Ta(_n,"]");return}UU()}function UU(){if(Ft===Hl){for(xn();Ft===Ki&&gt==="+";)if(gt="",xn(),Ft===Hl){var n=_n.lastIndexOf('"');_n=_n.substring(0,n)+gt.substring(1),gt="",xn()}return}VU()}function VU(){if(Ft===bc){xn();return}FU()}function FU(){if(Ft===Xa){if(IU[gt]){xn();return}if(lS[gt]){gt=lS[gt],xn();return}var n=gt,e=_n.length;if(gt="",xn(),Ft===Ki&&gt==="("){gt="",xn(),Ou(),Ft===Ki&&gt===")"&&(gt="",xn(),Ft===Ki&&gt===";"&&(gt="",xn()));return}for(_n=wU(_n,'"'.concat(n),e);Ft===Xa||Ft===bc;)xn();_n+='"';return}jU()}function jU(){throw gt===""?new Cs("Unexpected end of json string",Ei-gt.length):new Cs("Value expected",Ei-gt.length)}function Ai(n){return parseInt(n,10)}function HU(n){return qU.test(n)}const qU=/^[0-9]$/;function zU(n){return GU.test(n)}const GU=/^-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?$/;function Fi(n){return typeof n=="object"&&n!==null&&n.constructor===Object}function Ri(n){return typeof n=="object"&&n!==null&&(n.constructor===Object||n.constructor===Array)}function KU(n){return n===!0||n===!1}function m1(n){if(typeof n=="number")return n>9466848e5&&isFinite(n)&&Math.floor(n)===n&&!isNaN(new Date(n).valueOf());if(typeof n=="bigint")return m1(Number(n));try{const t=n.valueOf();if(t!==n)return m1(t)}catch{return!1}}function vO(n){const e=window.document.createElement("div");return e.style.color=n,e.style.color.split(/\s+/).join("").toLowerCase()||null}function XU(n){return typeof n=="string"&&!!vO(n)}function bO(n,e){if(typeof n=="number"||typeof n=="string"||typeof n=="boolean"||typeof n>"u")return typeof n;if(typeof n=="bigint")return"number";if(n===null)return"null";if(Array.isArray(n))return"array";if(Fi(n))return"object";const t=e.stringify(n);return t&&HU(t[0])?"number":t==="true"||t==="false"?"boolean":t==="null"?"null":"unknown"}const QU=/^https?:\/\/\S+$/;function Bv(n){return typeof n=="string"&&QU.test(n)}function gf(n,e){if(n==="")return"";const t=n.trim();return t==="null"?null:t==="true"?!0:t==="false"?!1:zU(t)?e.parse(t):n}function YU(n,e){return typeof n=="string"&&typeof gf(n,e)!="string"}function JU(n){return ZU.test(n)}const ZU=/^-?[0-9]+$/;var xU=typeof global=="object"&&global&&global.Object===Object&&global;const _O=xU;var $U=typeof self=="object"&&self&&self.Object===Object&&self,eV=_O||$U||Function("return this")();const Er=eV;var tV=Er.Symbol;const rr=tV;var yO=Object.prototype,nV=yO.hasOwnProperty,iV=yO.toString,Rc=rr?rr.toStringTag:void 0;function sV(n){var e=nV.call(n,Rc),t=n[Rc];try{n[Rc]=void 0;var i=!0}catch{}var s=iV.call(n);return i&&(e?n[Rc]=t:delete n[Rc]),s}var rV=Object.prototype,oV=rV.toString;function lV(n){return oV.call(n)}var aV="[object Null]",cV="[object Undefined]",uS=rr?rr.toStringTag:void 0;function _c(n){return n==null?n===void 0?cV:aV:uS&&uS in Object(n)?sV(n):lV(n)}function Zo(n){return n!=null&&typeof n=="object"}var uV="[object Symbol]";function ql(n){return typeof n=="symbol"||Zo(n)&&_c(n)==uV}function iu(n,e){for(var t=-1,i=n==null?0:n.length,s=Array(i);++t<i;)s[t]=e(n[t],t,n);return s}var fV=Array.isArray;const ps=fV;var hV=1/0,fS=rr?rr.prototype:void 0,hS=fS?fS.toString:void 0;function SO(n){if(typeof n=="string")return n;if(ps(n))return iu(n,SO)+"";if(ql(n))return hS?hS.call(n):"";var e=n+"";return e=="0"&&1/n==-hV?"-0":e}var dV=/\s/;function mV(n){for(var e=n.length;e--&&dV.test(n.charAt(e)););return e}var pV=/^\s+/;function gV(n){return n&&n.slice(0,mV(n)+1).replace(pV,"")}function Sr(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var dS=0/0,vV=/^[-+]0x[0-9a-f]+$/i,bV=/^0b[01]+$/i,_V=/^0o[0-7]+$/i,yV=parseInt;function p1(n){if(typeof n=="number")return n;if(ql(n))return dS;if(Sr(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=Sr(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=gV(n);var t=bV.test(n);return t||_V.test(n)?yV(n.slice(2),t?2:8):vV.test(n)?dS:+n}var mS=1/0,SV=17976931348623157e292;function Sh(n){if(!n)return n===0?n:0;if(n=p1(n),n===mS||n===-mS){var e=n<0?-1:1;return e*SV}return n===n?n:0}function EV(n){var e=Sh(n),t=e%1;return e===e?t?e-t:e:0}function vf(n){return n}var AV="[object AsyncFunction]",wV="[object Function]",CV="[object GeneratorFunction]",kV="[object Proxy]";function EO(n){if(!Sr(n))return!1;var e=_c(n);return e==wV||e==CV||e==AV||e==kV}var IV=Er["__core-js_shared__"];const Cp=IV;var pS=function(){var n=/[^.]+$/.exec(Cp&&Cp.keys&&Cp.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function TV(n){return!!pS&&pS in n}var OV=Function.prototype,RV=OV.toString;function ta(n){if(n!=null){try{return RV.call(n)}catch{}try{return n+""}catch{}}return""}var DV=/[\\^$.*+?()[\]{}|]/g,NV=/^\[object .+?Constructor\]$/,PV=Function.prototype,MV=Object.prototype,BV=PV.toString,LV=MV.hasOwnProperty,WV=RegExp("^"+BV.call(LV).replace(DV,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function UV(n){if(!Sr(n)||TV(n))return!1;var e=EO(n)?WV:NV;return e.test(ta(n))}function VV(n,e){return n==null?void 0:n[e]}function na(n,e){var t=VV(n,e);return UV(t)?t:void 0}var FV=na(Er,"WeakMap");const g1=FV;var gS=Object.create,jV=function(){function n(){}return function(e){if(!Sr(e))return{};if(gS)return gS(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();const HV=jV;function qV(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}function Gn(){}function zV(n,e){var t=-1,i=n.length;for(e||(e=Array(i));++t<i;)e[t]=n[t];return e}var GV=800,KV=16,XV=Date.now;function QV(n){var e=0,t=0;return function(){var i=XV(),s=KV-(i-t);if(t=i,s>0){if(++e>=GV)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}function YV(n){return function(){return n}}var JV=function(){try{var n=na(Object,"defineProperty");return n({},"",{}),n}catch{}}();const ad=JV;var ZV=ad?function(n,e){return ad(n,"toString",{configurable:!0,enumerable:!1,value:YV(e),writable:!0})}:vf;const xV=ZV;var $V=QV(xV);const eF=$V;function tF(n,e){for(var t=-1,i=n==null?0:n.length;++t<i&&e(n[t],t,n)!==!1;);return n}var nF=9007199254740991,iF=/^(?:0|[1-9]\d*)$/;function Lv(n,e){var t=typeof n;return e=e??nF,!!e&&(t=="number"||t!="symbol"&&iF.test(n))&&n>-1&&n%1==0&&n<e}function Wv(n,e,t){e=="__proto__"&&ad?ad(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}function Rm(n,e){return n===e||n!==n&&e!==e}var sF=Object.prototype,rF=sF.hasOwnProperty;function AO(n,e,t){var i=n[e];(!(rF.call(n,e)&&Rm(i,t))||t===void 0&&!(e in n))&&Wv(n,e,t)}function Dm(n,e,t,i){var s=!t;t||(t={});for(var r=-1,o=e.length;++r<o;){var l=e[r],a=i?i(t[l],n[l],l,t,n):void 0;a===void 0&&(a=n[l]),s?Wv(t,l,a):AO(t,l,a)}return t}var vS=Math.max;function oF(n,e,t){return e=vS(e===void 0?n.length-1:e,0),function(){for(var i=arguments,s=-1,r=vS(i.length-e,0),o=Array(r);++s<r;)o[s]=i[e+s];s=-1;for(var l=Array(e+1);++s<e;)l[s]=i[s];return l[e]=t(o),qV(n,this,l)}}function lF(n,e){return eF(oF(n,e,vf),n+"")}var aF=9007199254740991;function Uv(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=aF}function yc(n){return n!=null&&Uv(n.length)&&!EO(n)}function v1(n,e,t){if(!Sr(t))return!1;var i=typeof e;return(i=="number"?yc(t)&&Lv(e,t.length):i=="string"&&e in t)?Rm(t[e],n):!1}var cF=Object.prototype;function Nm(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||cF;return n===t}function wO(n,e){for(var t=-1,i=Array(n);++t<n;)i[t]=e(t);return i}var uF="[object Arguments]";function bS(n){return Zo(n)&&_c(n)==uF}var CO=Object.prototype,fF=CO.hasOwnProperty,hF=CO.propertyIsEnumerable,dF=bS(function(){return arguments}())?bS:function(n){return Zo(n)&&fF.call(n,"callee")&&!hF.call(n,"callee")};const Pm=dF;function mF(){return!1}var kO=typeof exports=="object"&&exports&&!exports.nodeType&&exports,_S=kO&&typeof module=="object"&&module&&!module.nodeType&&module,pF=_S&&_S.exports===kO,yS=pF?Er.Buffer:void 0,gF=yS?yS.isBuffer:void 0,vF=gF||mF;const Ru=vF;var bF="[object Arguments]",_F="[object Array]",yF="[object Boolean]",SF="[object Date]",EF="[object Error]",AF="[object Function]",wF="[object Map]",CF="[object Number]",kF="[object Object]",IF="[object RegExp]",TF="[object Set]",OF="[object String]",RF="[object WeakMap]",DF="[object ArrayBuffer]",NF="[object DataView]",PF="[object Float32Array]",MF="[object Float64Array]",BF="[object Int8Array]",LF="[object Int16Array]",WF="[object Int32Array]",UF="[object Uint8Array]",VF="[object Uint8ClampedArray]",FF="[object Uint16Array]",jF="[object Uint32Array]",Yn={};Yn[PF]=Yn[MF]=Yn[BF]=Yn[LF]=Yn[WF]=Yn[UF]=Yn[VF]=Yn[FF]=Yn[jF]=!0;Yn[bF]=Yn[_F]=Yn[DF]=Yn[yF]=Yn[NF]=Yn[SF]=Yn[EF]=Yn[AF]=Yn[wF]=Yn[CF]=Yn[kF]=Yn[IF]=Yn[TF]=Yn[OF]=Yn[RF]=!1;function HF(n){return Zo(n)&&Uv(n.length)&&!!Yn[_c(n)]}function Mm(n){return function(e){return n(e)}}var IO=typeof exports=="object"&&exports&&!exports.nodeType&&exports,su=IO&&typeof module=="object"&&module&&!module.nodeType&&module,qF=su&&su.exports===IO,kp=qF&&_O.process,zF=function(){try{var n=su&&su.require&&su.require("util").types;return n||kp&&kp.binding&&kp.binding("util")}catch{}}();const Ya=zF;var SS=Ya&&Ya.isTypedArray,GF=SS?Mm(SS):HF;const Vv=GF;var KF=Object.prototype,XF=KF.hasOwnProperty;function TO(n,e){var t=ps(n),i=!t&&Pm(n),s=!t&&!i&&Ru(n),r=!t&&!i&&!s&&Vv(n),o=t||i||s||r,l=o?wO(n.length,String):[],a=l.length;for(var c in n)(e||XF.call(n,c))&&!(o&&(c=="length"||s&&(c=="offset"||c=="parent")||r&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Lv(c,a)))&&l.push(c);return l}function OO(n,e){return function(t){return n(e(t))}}var QF=OO(Object.keys,Object);const YF=QF;var JF=Object.prototype,ZF=JF.hasOwnProperty;function RO(n){if(!Nm(n))return YF(n);var e=[];for(var t in Object(n))ZF.call(n,t)&&t!="constructor"&&e.push(t);return e}function Sc(n){return yc(n)?TO(n):RO(n)}function xF(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var $F=Object.prototype,e9=$F.hasOwnProperty;function t9(n){if(!Sr(n))return xF(n);var e=Nm(n),t=[];for(var i in n)i=="constructor"&&(e||!e9.call(n,i))||t.push(i);return t}function Fv(n){return yc(n)?TO(n,!0):t9(n)}var n9=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i9=/^\w*$/;function jv(n,e){if(ps(n))return!1;var t=typeof n;return t=="number"||t=="symbol"||t=="boolean"||n==null||ql(n)?!0:i9.test(n)||!n9.test(n)||e!=null&&n in Object(e)}var s9=na(Object,"create");const Du=s9;function r9(){this.__data__=Du?Du(null):{},this.size=0}function o9(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var l9="__lodash_hash_undefined__",a9=Object.prototype,c9=a9.hasOwnProperty;function u9(n){var e=this.__data__;if(Du){var t=e[n];return t===l9?void 0:t}return c9.call(e,n)?e[n]:void 0}var f9=Object.prototype,h9=f9.hasOwnProperty;function d9(n){var e=this.__data__;return Du?e[n]!==void 0:h9.call(e,n)}var m9="__lodash_hash_undefined__";function p9(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=Du&&e===void 0?m9:e,this}function zl(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}zl.prototype.clear=r9;zl.prototype.delete=o9;zl.prototype.get=u9;zl.prototype.has=d9;zl.prototype.set=p9;function g9(){this.__data__=[],this.size=0}function Bm(n,e){for(var t=n.length;t--;)if(Rm(n[t][0],e))return t;return-1}var v9=Array.prototype,b9=v9.splice;function _9(n){var e=this.__data__,t=Bm(e,n);if(t<0)return!1;var i=e.length-1;return t==i?e.pop():b9.call(e,t,1),--this.size,!0}function y9(n){var e=this.__data__,t=Bm(e,n);return t<0?void 0:e[t][1]}function S9(n){return Bm(this.__data__,n)>-1}function E9(n,e){var t=this.__data__,i=Bm(t,n);return i<0?(++this.size,t.push([n,e])):t[i][1]=e,this}function yo(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}yo.prototype.clear=g9;yo.prototype.delete=_9;yo.prototype.get=y9;yo.prototype.has=S9;yo.prototype.set=E9;var A9=na(Er,"Map");const Nu=A9;function w9(){this.size=0,this.__data__={hash:new zl,map:new(Nu||yo),string:new zl}}function C9(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}function Lm(n,e){var t=n.__data__;return C9(e)?t[typeof e=="string"?"string":"hash"]:t.map}function k9(n){var e=Lm(this,n).delete(n);return this.size-=e?1:0,e}function I9(n){return Lm(this,n).get(n)}function T9(n){return Lm(this,n).has(n)}function O9(n,e){var t=Lm(this,n),i=t.size;return t.set(n,e),this.size+=t.size==i?0:1,this}function So(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}So.prototype.clear=w9;So.prototype.delete=k9;So.prototype.get=I9;So.prototype.has=T9;So.prototype.set=O9;var R9="Expected a function";function Wm(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError(R9);var t=function(){var i=arguments,s=e?e.apply(this,i):i[0],r=t.cache;if(r.has(s))return r.get(s);var o=n.apply(this,i);return t.cache=r.set(s,o)||r,o};return t.cache=new(Wm.Cache||So),t}Wm.Cache=So;var D9=500;function N9(n){var e=Wm(n,function(i){return t.size===D9&&t.clear(),i}),t=e.cache;return e}var P9=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,M9=/\\(\\)?/g,B9=N9(function(n){var e=[];return n.charCodeAt(0)===46&&e.push(""),n.replace(P9,function(t,i,s,r){e.push(s?r.replace(M9,"$1"):i||t)}),e});const L9=B9;function DO(n){return n==null?"":SO(n)}function NO(n,e){return ps(n)?n:jv(n,e)?[n]:L9(DO(n))}var W9=1/0;function Um(n){if(typeof n=="string"||ql(n))return n;var e=n+"";return e=="0"&&1/n==-W9?"-0":e}function Hv(n,e){e=NO(e,n);for(var t=0,i=e.length;n!=null&&t<i;)n=n[Um(e[t++])];return t&&t==i?n:void 0}function U9(n,e,t){var i=n==null?void 0:Hv(n,e);return i===void 0?t:i}function qv(n,e){for(var t=-1,i=e.length,s=n.length;++t<i;)n[s+t]=e[t];return n}var ES=rr?rr.isConcatSpreadable:void 0;function V9(n){return ps(n)||Pm(n)||!!(ES&&n&&n[ES])}function PO(n,e,t,i,s){var r=-1,o=n.length;for(t||(t=V9),s||(s=[]);++r<o;){var l=n[r];e>0&&t(l)?e>1?PO(l,e-1,t,i,s):qv(s,l):i||(s[s.length]=l)}return s}var F9=OO(Object.getPrototypeOf,Object);const MO=F9;function j9(n,e,t){var i=-1,s=n.length;e<0&&(e=-e>s?0:s+e),t=t>s?s:t,t<0&&(t+=s),s=e>t?0:t-e>>>0,e>>>=0;for(var r=Array(s);++i<s;)r[i]=n[i+e];return r}function H9(){this.__data__=new yo,this.size=0}function q9(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}function z9(n){return this.__data__.get(n)}function G9(n){return this.__data__.has(n)}var K9=200;function X9(n,e){var t=this.__data__;if(t instanceof yo){var i=t.__data__;if(!Nu||i.length<K9-1)return i.push([n,e]),this.size=++t.size,this;t=this.__data__=new So(i)}return t.set(n,e),this.size=t.size,this}function Hr(n){var e=this.__data__=new yo(n);this.size=e.size}Hr.prototype.clear=H9;Hr.prototype.delete=q9;Hr.prototype.get=z9;Hr.prototype.has=G9;Hr.prototype.set=X9;function Q9(n,e){return n&&Dm(e,Sc(e),n)}function Y9(n,e){return n&&Dm(e,Fv(e),n)}var BO=typeof exports=="object"&&exports&&!exports.nodeType&&exports,AS=BO&&typeof module=="object"&&module&&!module.nodeType&&module,J9=AS&&AS.exports===BO,wS=J9?Er.Buffer:void 0,CS=wS?wS.allocUnsafe:void 0;function Z9(n,e){if(e)return n.slice();var t=n.length,i=CS?CS(t):new n.constructor(t);return n.copy(i),i}function x9(n,e){for(var t=-1,i=n==null?0:n.length,s=0,r=[];++t<i;){var o=n[t];e(o,t,n)&&(r[s++]=o)}return r}function LO(){return[]}var $9=Object.prototype,ej=$9.propertyIsEnumerable,kS=Object.getOwnPropertySymbols,tj=kS?function(n){return n==null?[]:(n=Object(n),x9(kS(n),function(e){return ej.call(n,e)}))}:LO;const zv=tj;function nj(n,e){return Dm(n,zv(n),e)}var ij=Object.getOwnPropertySymbols,sj=ij?function(n){for(var e=[];n;)qv(e,zv(n)),n=MO(n);return e}:LO;const WO=sj;function rj(n,e){return Dm(n,WO(n),e)}function UO(n,e,t){var i=e(n);return ps(n)?i:qv(i,t(n))}function b1(n){return UO(n,Sc,zv)}function oj(n){return UO(n,Fv,WO)}var lj=na(Er,"DataView");const _1=lj;var aj=na(Er,"Promise");const y1=aj;var cj=na(Er,"Set");const S1=cj;var IS="[object Map]",uj="[object Object]",TS="[object Promise]",OS="[object Set]",RS="[object WeakMap]",DS="[object DataView]",fj=ta(_1),hj=ta(Nu),dj=ta(y1),mj=ta(S1),pj=ta(g1),pl=_c;(_1&&pl(new _1(new ArrayBuffer(1)))!=DS||Nu&&pl(new Nu)!=IS||y1&&pl(y1.resolve())!=TS||S1&&pl(new S1)!=OS||g1&&pl(new g1)!=RS)&&(pl=function(n){var e=_c(n),t=e==uj?n.constructor:void 0,i=t?ta(t):"";if(i)switch(i){case fj:return DS;case hj:return IS;case dj:return TS;case mj:return OS;case pj:return RS}return e});const Ja=pl;var gj=Object.prototype,vj=gj.hasOwnProperty;function bj(n){var e=n.length,t=new n.constructor(e);return e&&typeof n[0]=="string"&&vj.call(n,"index")&&(t.index=n.index,t.input=n.input),t}var _j=Er.Uint8Array;const cd=_j;function Gv(n){var e=new n.constructor(n.byteLength);return new cd(e).set(new cd(n)),e}function yj(n,e){var t=e?Gv(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.byteLength)}var Sj=/\w*$/;function Ej(n){var e=new n.constructor(n.source,Sj.exec(n));return e.lastIndex=n.lastIndex,e}var NS=rr?rr.prototype:void 0,PS=NS?NS.valueOf:void 0;function Aj(n){return PS?Object(PS.call(n)):{}}function wj(n,e){var t=e?Gv(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}var Cj="[object Boolean]",kj="[object Date]",Ij="[object Map]",Tj="[object Number]",Oj="[object RegExp]",Rj="[object Set]",Dj="[object String]",Nj="[object Symbol]",Pj="[object ArrayBuffer]",Mj="[object DataView]",Bj="[object Float32Array]",Lj="[object Float64Array]",Wj="[object Int8Array]",Uj="[object Int16Array]",Vj="[object Int32Array]",Fj="[object Uint8Array]",jj="[object Uint8ClampedArray]",Hj="[object Uint16Array]",qj="[object Uint32Array]";function zj(n,e,t){var i=n.constructor;switch(e){case Pj:return Gv(n);case Cj:case kj:return new i(+n);case Mj:return yj(n,t);case Bj:case Lj:case Wj:case Uj:case Vj:case Fj:case jj:case Hj:case qj:return wj(n,t);case Ij:return new i;case Tj:case Dj:return new i(n);case Oj:return Ej(n);case Rj:return new i;case Nj:return Aj(n)}}function Gj(n){return typeof n.constructor=="function"&&!Nm(n)?HV(MO(n)):{}}var Kj="[object Map]";function Xj(n){return Zo(n)&&Ja(n)==Kj}var MS=Ya&&Ya.isMap,Qj=MS?Mm(MS):Xj;const Yj=Qj;var Jj="[object Set]";function Zj(n){return Zo(n)&&Ja(n)==Jj}var BS=Ya&&Ya.isSet,xj=BS?Mm(BS):Zj;const $j=xj;var eH=1,tH=2,nH=4,VO="[object Arguments]",iH="[object Array]",sH="[object Boolean]",rH="[object Date]",oH="[object Error]",FO="[object Function]",lH="[object GeneratorFunction]",aH="[object Map]",cH="[object Number]",jO="[object Object]",uH="[object RegExp]",fH="[object Set]",hH="[object String]",dH="[object Symbol]",mH="[object WeakMap]",pH="[object ArrayBuffer]",gH="[object DataView]",vH="[object Float32Array]",bH="[object Float64Array]",_H="[object Int8Array]",yH="[object Int16Array]",SH="[object Int32Array]",EH="[object Uint8Array]",AH="[object Uint8ClampedArray]",wH="[object Uint16Array]",CH="[object Uint32Array]",Hn={};Hn[VO]=Hn[iH]=Hn[pH]=Hn[gH]=Hn[sH]=Hn[rH]=Hn[vH]=Hn[bH]=Hn[_H]=Hn[yH]=Hn[SH]=Hn[aH]=Hn[cH]=Hn[jO]=Hn[uH]=Hn[fH]=Hn[hH]=Hn[dH]=Hn[EH]=Hn[AH]=Hn[wH]=Hn[CH]=!0;Hn[oH]=Hn[FO]=Hn[mH]=!1;function Eh(n,e,t,i,s,r){var o,l=e&eH,a=e&tH,c=e&nH;if(t&&(o=s?t(n,i,s,r):t(n)),o!==void 0)return o;if(!Sr(n))return n;var u=ps(n);if(u){if(o=bj(n),!l)return zV(n,o)}else{var f=Ja(n),h=f==FO||f==lH;if(Ru(n))return Z9(n,l);if(f==jO||f==VO||h&&!s){if(o=a||h?{}:Gj(n),!l)return a?rj(n,Y9(o,n)):nj(n,Q9(o,n))}else{if(!Hn[f])return s?n:{};o=zj(n,f,l)}}r||(r=new Hr);var d=r.get(n);if(d)return d;r.set(n,o),$j(n)?n.forEach(function(_){o.add(Eh(_,e,t,_,n,r))}):Yj(n)&&n.forEach(function(_,v){o.set(v,Eh(_,e,t,v,n,r))});var m=c?a?oj:b1:a?Fv:Sc,g=u?void 0:m(n);return tF(g||n,function(_,v){g&&(v=_,_=n[v]),AO(o,v,Eh(_,e,t,v,n,r))}),o}var kH=1,IH=4;function TH(n,e){return e=typeof e=="function"?e:void 0,Eh(n,kH|IH,e)}var OH="__lodash_hash_undefined__";function RH(n){return this.__data__.set(n,OH),this}function DH(n){return this.__data__.has(n)}function ud(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new So;++e<t;)this.add(n[e])}ud.prototype.add=ud.prototype.push=RH;ud.prototype.has=DH;function NH(n,e){for(var t=-1,i=n==null?0:n.length;++t<i;)if(e(n[t],t,n))return!0;return!1}function PH(n,e){return n.has(e)}var MH=1,BH=2;function HO(n,e,t,i,s,r){var o=t&MH,l=n.length,a=e.length;if(l!=a&&!(o&&a>l))return!1;var c=r.get(n),u=r.get(e);if(c&&u)return c==e&&u==n;var f=-1,h=!0,d=t&BH?new ud:void 0;for(r.set(n,e),r.set(e,n);++f<l;){var m=n[f],g=e[f];if(i)var _=o?i(g,m,f,e,n,r):i(m,g,f,n,e,r);if(_!==void 0){if(_)continue;h=!1;break}if(d){if(!NH(e,function(v,y){if(!PH(d,y)&&(m===v||s(m,v,t,i,r)))return d.push(y)})){h=!1;break}}else if(!(m===g||s(m,g,t,i,r))){h=!1;break}}return r.delete(n),r.delete(e),h}function LH(n){var e=-1,t=Array(n.size);return n.forEach(function(i,s){t[++e]=[s,i]}),t}function WH(n){var e=-1,t=Array(n.size);return n.forEach(function(i){t[++e]=i}),t}var UH=1,VH=2,FH="[object Boolean]",jH="[object Date]",HH="[object Error]",qH="[object Map]",zH="[object Number]",GH="[object RegExp]",KH="[object Set]",XH="[object String]",QH="[object Symbol]",YH="[object ArrayBuffer]",JH="[object DataView]",LS=rr?rr.prototype:void 0,Ip=LS?LS.valueOf:void 0;function ZH(n,e,t,i,s,r,o){switch(t){case JH:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case YH:return!(n.byteLength!=e.byteLength||!r(new cd(n),new cd(e)));case FH:case jH:case zH:return Rm(+n,+e);case HH:return n.name==e.name&&n.message==e.message;case GH:case XH:return n==e+"";case qH:var l=LH;case KH:var a=i&UH;if(l||(l=WH),n.size!=e.size&&!a)return!1;var c=o.get(n);if(c)return c==e;i|=VH,o.set(n,e);var u=HO(l(n),l(e),i,s,r,o);return o.delete(n),u;case QH:if(Ip)return Ip.call(n)==Ip.call(e)}return!1}var xH=1,$H=Object.prototype,eq=$H.hasOwnProperty;function tq(n,e,t,i,s,r){var o=t&xH,l=b1(n),a=l.length,c=b1(e),u=c.length;if(a!=u&&!o)return!1;for(var f=a;f--;){var h=l[f];if(!(o?h in e:eq.call(e,h)))return!1}var d=r.get(n),m=r.get(e);if(d&&m)return d==e&&m==n;var g=!0;r.set(n,e),r.set(e,n);for(var _=o;++f<a;){h=l[f];var v=n[h],y=e[h];if(i)var E=o?i(y,v,h,e,n,r):i(v,y,h,n,e,r);if(!(E===void 0?v===y||s(v,y,t,i,r):E)){g=!1;break}_||(_=h=="constructor")}if(g&&!_){var w=n.constructor,A=e.constructor;w!=A&&"constructor"in n&&"constructor"in e&&!(typeof w=="function"&&w instanceof w&&typeof A=="function"&&A instanceof A)&&(g=!1)}return r.delete(n),r.delete(e),g}var nq=1,WS="[object Arguments]",US="[object Array]",Vf="[object Object]",iq=Object.prototype,VS=iq.hasOwnProperty;function sq(n,e,t,i,s,r){var o=ps(n),l=ps(e),a=o?US:Ja(n),c=l?US:Ja(e);a=a==WS?Vf:a,c=c==WS?Vf:c;var u=a==Vf,f=c==Vf,h=a==c;if(h&&Ru(n)){if(!Ru(e))return!1;o=!0,u=!1}if(h&&!u)return r||(r=new Hr),o||Vv(n)?HO(n,e,t,i,s,r):ZH(n,e,a,t,i,s,r);if(!(t&nq)){var d=u&&VS.call(n,"__wrapped__"),m=f&&VS.call(e,"__wrapped__");if(d||m){var g=d?n.value():n,_=m?e.value():e;return r||(r=new Hr),s(g,_,t,i,r)}}return h?(r||(r=new Hr),tq(n,e,t,i,s,r)):!1}function Vm(n,e,t,i,s){return n===e?!0:n==null||e==null||!Zo(n)&&!Zo(e)?n!==n&&e!==e:sq(n,e,t,i,Vm,s)}var rq=1,oq=2;function lq(n,e,t,i){var s=t.length,r=s,o=!i;if(n==null)return!r;for(n=Object(n);s--;){var l=t[s];if(o&&l[2]?l[1]!==n[l[0]]:!(l[0]in n))return!1}for(;++s<r;){l=t[s];var a=l[0],c=n[a],u=l[1];if(o&&l[2]){if(c===void 0&&!(a in n))return!1}else{var f=new Hr;if(i)var h=i(c,u,a,n,e,f);if(!(h===void 0?Vm(u,c,rq|oq,i,f):h))return!1}}return!0}function qO(n){return n===n&&!Sr(n)}function aq(n){for(var e=Sc(n),t=e.length;t--;){var i=e[t],s=n[i];e[t]=[i,s,qO(s)]}return e}function zO(n,e){return function(t){return t==null?!1:t[n]===e&&(e!==void 0||n in Object(t))}}function cq(n){var e=aq(n);return e.length==1&&e[0][2]?zO(e[0][0],e[0][1]):function(t){return t===n||lq(t,n,e)}}function uq(n,e){return n!=null&&e in Object(n)}function fq(n,e,t){e=NO(e,n);for(var i=-1,s=e.length,r=!1;++i<s;){var o=Um(e[i]);if(!(r=n!=null&&t(n,o)))break;n=n[o]}return r||++i!=s?r:(s=n==null?0:n.length,!!s&&Uv(s)&&Lv(o,s)&&(ps(n)||Pm(n)))}function hq(n,e){return n!=null&&fq(n,e,uq)}var dq=1,mq=2;function pq(n,e){return jv(n)&&qO(e)?zO(Um(n),e):function(t){var i=U9(t,n);return i===void 0&&i===e?hq(t,n):Vm(e,i,dq|mq)}}function gq(n){return function(e){return e==null?void 0:e[n]}}function vq(n){return function(e){return Hv(e,n)}}function bq(n){return jv(n)?gq(Um(n)):vq(n)}function Fm(n){return typeof n=="function"?n:n==null?vf:typeof n=="object"?ps(n)?pq(n[0],n[1]):cq(n):bq(n)}function _q(n,e,t,i){for(var s=-1,r=n==null?0:n.length;++s<r;){var o=n[s];e(i,o,t(o),n)}return i}function GO(n){return function(e,t,i){for(var s=-1,r=Object(e),o=i(e),l=o.length;l--;){var a=o[n?l:++s];if(t(r[a],a,r)===!1)break}return e}}var yq=GO();const Sq=yq;function Eq(n,e){return n&&Sq(n,e,Sc)}function KO(n,e){return function(t,i){if(t==null)return t;if(!yc(t))return n(t,i);for(var s=t.length,r=e?s:-1,o=Object(t);(e?r--:++r<s)&&i(o[r],r,o)!==!1;);return t}}var Aq=KO(Eq);const XO=Aq;function wq(n,e,t,i){return XO(n,function(s,r,o){e(i,s,t(s),o)}),i}function Cq(n,e){return function(t,i){var s=ps(t)?_q:wq,r=e?e():{};return s(t,n,Fm(i),r)}}var kq=function(){return Er.Date.now()};const Tp=kq;var Iq="Expected a function",Tq=Math.max,Oq=Math.min;function jm(n,e,t){var i,s,r,o,l,a,c=0,u=!1,f=!1,h=!0;if(typeof n!="function")throw new TypeError(Iq);e=p1(e)||0,Sr(t)&&(u=!!t.leading,f="maxWait"in t,r=f?Tq(p1(t.maxWait)||0,e):r,h="trailing"in t?!!t.trailing:h);function d(I){var R=i,D=s;return i=s=void 0,c=I,o=n.apply(D,R),o}function m(I){return c=I,l=setTimeout(v,e),u?d(I):o}function g(I){var R=I-a,D=I-c,N=e-R;return f?Oq(N,r-D):N}function _(I){var R=I-a,D=I-c;return a===void 0||R>=e||R<0||f&&D>=r}function v(){var I=Tp();if(_(I))return y(I);l=setTimeout(v,g(I))}function y(I){return l=void 0,h&&i?d(I):(i=s=void 0,o)}function E(){l!==void 0&&clearTimeout(l),c=0,i=a=s=l=void 0}function w(){return l===void 0?o:y(Tp())}function A(){var I=Tp(),R=_(I);if(i=arguments,s=this,a=I,R){if(l===void 0)return m(a);if(f)return clearTimeout(l),l=setTimeout(v,e),d(a)}return l===void 0&&(l=setTimeout(v,e)),o}return A.cancel=E,A.flush=w,A}function Yt(n){var e=n==null?0:n.length;return e?n[e-1]:void 0}function QO(n){return typeof n=="function"?n:vf}function Rq(n,e){for(var t=n==null?0:n.length;t--&&e(n[t],t,n)!==!1;);return n}var Dq=GO(!0);const Nq=Dq;function Pq(n,e){return n&&Nq(n,e,Sc)}var Mq=KO(Pq,!0);const Bq=Mq;function Lq(n,e){var t=ps(n)?Rq:Bq;return t(n,QO(e))}function ks(n){return n&&n.length?n[0]:void 0}function YO(n,e){var t=-1,i=yc(n)?Array(n.length):[];return XO(n,function(s,r,o){i[++t]=e(s,r,o)}),i}function Wq(n,e){var t=ps(n)?iu:YO;return t(n,Fm(e))}var Uq=Object.prototype,Vq=Uq.hasOwnProperty,Fq=Cq(function(n,e,t){Vq.call(n,t)?n[t].push(e):Wv(n,t,[e])});const Kv=Fq;function bn(n){var e=n==null?0:n.length;return e?j9(n,0,-1):[]}var jq="[object Map]",Hq="[object Set]",qq=Object.prototype,zq=qq.hasOwnProperty;function si(n){if(n==null)return!0;if(yc(n)&&(ps(n)||typeof n=="string"||typeof n.splice=="function"||Ru(n)||Vv(n)||Pm(n)))return!n.length;var e=Ja(n);if(e==jq||e==Hq)return!n.size;if(Nm(n))return!RO(n).length;for(var t in n)if(zq.call(n,t))return!1;return!0}function wn(n,e){return Vm(n,e)}function Gq(n,e){return n<e}function Kq(n,e,t){for(var i=-1,s=n.length;++i<s;){var r=n[i],o=e(r);if(o!=null&&(l===void 0?o===o&&!ql(o):t(o,l)))var l=o,a=r}return a}function Ff(n,e){return n&&n.length?Kq(n,Fm(e),Gq):void 0}function Xq(n,e){var t=n.length;for(n.sort(e);t--;)n[t]=n[t].value;return n}function Qq(n,e){if(n!==e){var t=n!==void 0,i=n===null,s=n===n,r=ql(n),o=e!==void 0,l=e===null,a=e===e,c=ql(e);if(!l&&!c&&!r&&n>e||r&&o&&a&&!l&&!c||i&&o&&a||!t&&a||!s)return 1;if(!i&&!r&&!c&&n<e||c&&t&&s&&!i&&!r||l&&t&&s||!o&&s||!a)return-1}return 0}function Yq(n,e,t){for(var i=-1,s=n.criteria,r=e.criteria,o=s.length,l=t.length;++i<o;){var a=Qq(s[i],r[i]);if(a){if(i>=l)return a;var c=t[i];return a*(c=="desc"?-1:1)}}return n.index-e.index}function Jq(n,e,t){e.length?e=iu(e,function(r){return ps(r)?function(o){return Hv(o,r.length===1?r[0]:r)}:r}):e=[vf];var i=-1;e=iu(e,Mm(Fm));var s=YO(n,function(r,o,l){var a=iu(e,function(c){return c(r)});return{criteria:a,index:++i,value:r}});return Xq(s,function(r,o){return Yq(r,o,t)})}var Zq=Math.ceil,xq=Math.max;function $q(n,e,t,i){for(var s=-1,r=xq(Zq((e-n)/(t||1)),0),o=Array(r);r--;)o[i?r:++s]=n,n+=t;return o}function ez(n){return function(e,t,i){return i&&typeof i!="number"&&v1(e,t,i)&&(t=i=void 0),e=Sh(e),t===void 0?(t=e,e=0):t=Sh(t),i=i===void 0?e<t?1:-1:Sh(i),$q(e,t,i,n)}}var tz=ez();const nz=tz;var iz=lF(function(n,e){if(n==null)return[];var t=e.length;return t>1&&v1(n,e[0],e[1])?e=[]:t>2&&v1(e[0],e[1],e[2])&&(e=[e[0]]),Jq(n,PO(e,1),[])});const sz=iz;var rz="Expected a function";function oz(n,e,t){var i=!0,s=!0;if(typeof n!="function")throw new TypeError(rz);return Sr(t)&&(i="leading"in t?!!t.leading:i,s="trailing"in t?!!t.trailing:s),jm(n,e,{leading:i,maxWait:e,trailing:s})}var lz=9007199254740991,Op=4294967295,az=Math.min;function FS(n,e){if(n=EV(n),n<1||n>lz)return[];var t=Op,i=az(n,Op);e=QO(e),n-=Op;for(var s=wO(i,e);++t<n;)e(t);return s}var cz=0;function fd(n){var e=++cz;return DO(n)+e}const uz=1e4,fz=[];function E1(n,e=!1){const t={};if(!Array.isArray(n))throw new TypeError("Array expected");function i(o,l){(!Array.isArray(o)&&!Fi(o)||e&&l.length>0)&&(t[mt(l)]=!0),Fi(o)&&Object.keys(o).forEach(c=>{i(o[c],l.concat(c))})}const s=Math.min(n.length,uz);for(let o=0;o<s;o++){const l=n[o];i(l,fz)}return Object.keys(t).sort().map(Jo)}function JO(n,e,t){if(!(e<=n))for(let i=n;i<e;i++)t(i)}function jS(n,e){return n.length>e?n.slice(0,e):n}function HS(n){return{...n}}function qS(n){return Object.values(n)}function zS(n,e,t,i){const s=n.slice(0),r=s.splice(e,t);return s.splice.apply(s,[e+i,0,...r]),s}function Xv(n,e){try{return e.parse(n)}catch{return e.parse(Fo(n))}}function ZO(n,e){try{return Xv(n,e)}catch{return}}function Qv(n,e){n=n.replace(xO,"");try{return e(n)}catch{}try{return e("["+n+"]")}catch{}try{return e("{"+n+"}")}catch{}throw new Error("Failed to parse partial JSON")}function hz(n){n=n.replace(xO,"");try{return Fo(n)}catch{}try{const e=Fo("["+n+"]");return e.substring(1,e.length-1)}catch{}try{const e=Fo("{"+n+"}");return e.substring(1,e.length-1)}catch{}throw new Error("Failed to repair partial JSON")}const xO=/,\s*$/;function Yv(n,e){const t=XS.exec(e);if(t){const i=Ai(t[2]),s=mz(n,`
`,0,i),r=n.lastIndexOf(`
`,i),o=i-r-1;return{position:i,line:s,column:o,message:e.replace(XS,()=>`line ${s+1} column ${o+1}`)}}else{const i=bz.exec(e),s=i?Ai(i[1]):null,r=s!==null?s-1:null,o=_z.exec(e),l=o?Ai(o[1]):null,a=l!==null?l-1:null;return{position:r!==null&&a!==null?dz(n,r,a):null,line:r,column:a,message:e.replace(/^JSON.parse: /,"").replace(/ of the JSON data$/,"")}}}function dz(n,e,t){let i=n.indexOf(`
`),s=1;for(;s<e&&i!==-1;)i=n.indexOf(`
`,i+1),s++;return i!==-1?i+t+1:null}function mz(n,e,t=0,i=n.length){let s=0;for(let r=t;r<i;r++)n.charAt(r)===e&&s++;return s}function pz(n,e){try{const t=Om.parse(n),i=mt(e),s=t.pointers[i];if(s)return{path:e,line:s.key?s.key.line:s.value?s.value.line:0,column:s.key?s.key.column:s.value?s.value.column:0,from:s.key?s.key.pos:s.value?s.value.pos:0,to:s.keyEnd?s.keyEnd.pos:s.valueEnd?s.valueEnd.pos:0}}catch(t){console.error(t)}return null}function gz(n,e,t){if(e==="array"){if(Array.isArray(n))return n;if(Fi(n))return qS(n);if(typeof n=="string")try{const i=t.parse(n);if(Array.isArray(i))return i;if(Fi(i))return qS(i)}catch{return[n]}return[n]}if(e==="object"){if(Array.isArray(n))return HS(n);if(Fi(n))return n;if(typeof n=="string")try{const i=t.parse(n);if(Fi(i))return i;if(Array.isArray(i))return HS(i)}catch{return{value:n}}return{value:n}}if(e==="value")return Ri(n)?t.stringify(n):n;throw new Error(`Cannot convert ${bO(n,t)} to ${e}`)}function Rp(n){return Fi(n)?n.json!==void 0?n.text!==void 0?'Content must contain either a property "json" or a property "text" but not both':null:n.text===void 0?'Content must contain either a property "json" or a property "text"':typeof n.text!="string"?'Content "text" property must be a string containing a JSON document. Did you mean to use the "json" property instead?':null:"Content must be an object"}function Jv(n){return typeof n.text=="string"}function GS(n,e,t){return Jv(n)?n.text:t.stringify(n.json,null,e)}function KS(n,e){return vz(n,e)>e}function vz(n,e=1/0){if(Jv(n))return n.text.length;const t=n.json;let i=0;function s(r){if(Array.isArray(r)){if(i+=2+(r.length-1),i>e)return i;for(let o=0;o<r.length;o++){const l=r[o];if(s(l),i>e)return i}}else if(Fi(r)){const o=Object.keys(r);i+=2+o.length+(o.length-1);for(let l=0;l<o.length;l++){const a=o[l],c=r[a];i+=a.length+2,s(c)}}else typeof r=="string"?i+=r.length+2:i+=String(r).length}return s(t),i}const XS=/(position|char) (\d+)/,bz=/line (\d+)/,_z=/column (\d+)/;function yz(n,e){return n.parse===e.parse&&n.stringify===e.stringify}var Qs;(function(n){n.text="text",n.tree="tree"})(Qs||(Qs={}));var Mn;(function(n){n.after="after",n.inside="inside",n.key="key",n.value="value",n.multi="multi"})(Mn||(Mn={}));var dr;(function(n){n.after="after",n.key="key",n.value="value",n.inside="inside"})(dr||(dr={}));var Za;(function(n){n.info="info",n.warning="warning",n.error="error"})(Za||(Za={}));var br;(function(n){n.key="key",n.value="value"})(br||(br={}));function $O({escapeControlCharacters:n,escapeUnicodeCharacters:e}){return n?e?Sz:Ez:e?Az:wz}const Sz={escapeValue:n=>eR(iR(String(n))),unescapeValue:n=>sR(tR(n))},Ez={escapeValue:n=>iR(String(n)),unescapeValue:n=>sR(n)},Az={escapeValue:n=>eR(String(n)),unescapeValue:n=>tR(n)},wz={escapeValue:n=>String(n),unescapeValue:n=>n};function eR(n){return n.replace(/[^\x20-\x7F]/g,e=>e==="\b"||e==="\f"||e===`
`||e==="\r"||e==="	"?e:"\\u"+("000"+e.codePointAt(0).toString(16)).slice(-4))}function tR(n){return n.replace(/\\u[a-fA-F0-9]{4}/g,e=>{try{const t=JSON.parse('"'+e+'"');return nR[t]||t}catch{return e}})}const nR={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},Cz={'\\"':'"',"\\\\":"\\","\\/":"/","\\b":"\b","\\f":"\f","\\n":`
`,"\\r":"\r","\\t":"	"};function iR(n){return n.replace(/["\b\f\n\r\t\\]/g,e=>nR[e]||e)}function sR(n){return n.replace(/\\["bfnrt\\]/g,e=>Cz[e]||e)}function Gl(n){return typeof n!="string"?String(n):n.endsWith(`
`)?n+`
`:n}function kz(n){return n.replace(/\n$/,"")}function rR(n,e){return bf(n,t=>t.nodeName.toUpperCase()===e.toUpperCase())}function El(n,e,t){return bf(n,i=>Tz(i,e,t))}function Iz(n){return n.nodeName==="DIV"&&n.contentEditable==="true"}function Tz(n,e,t){return typeof n.getAttribute=="function"&&n.getAttribute(e)===t}function bf(n,e){return!!Zv(n,e)}function Zv(n,e){let t=n;for(;t&&!e(t);)t=t.parentNode;return t||void 0}function oR(n){if(n.firstChild==null){n.focus();return}const e=document.createRange(),t=window.getSelection();e.setStart(n,1),e.collapse(!0),t.removeAllRanges(),t.addRange(e)}function Pu(n){return n&&n.ownerDocument&&n.ownerDocument.defaultView}function A1(n){const e=Pu(n);return bf(e.document.activeElement,t=>t===n)}function Oz(n,e){return Zv(n,t=>t.nodeName===e)}function Dp(n){return El(n,"data-type","selectable-key")?Mn.key:El(n,"data-type","selectable-value")?Mn.value:El(n,"data-type","insert-selection-area-inside")?Mn.inside:El(n,"data-type","insert-selection-area-after")?Mn.after:Mn.multi}function w1(n){return encodeURIComponent(mt(n))}function Rz(n){return Jo(decodeURIComponent(n))}function Dz(n){const e=Zv(n,t=>t.hasAttribute("data-path"));return e?Rz(e.getAttribute("data-path")):null}function Nz({allElements:n,currentElement:e,direction:t,hasPrio:i=()=>!0,margin:s=10}){const r=Wq(n.filter(l),a),o=a(e);function l(v){const y=v.getBoundingClientRect();return y.width>0&&y.height>0}function a(v){const y=v.getBoundingClientRect();return{x:y.left+y.width/2,y:y.top+y.height/2,rect:y,element:v}}const c=(v,y)=>Math.abs(v.y-y.y)<s,u=(v,y)=>v.rect.left+s<y.rect.left,f=(v,y)=>v.rect.right>y.rect.right+s,h=(v,y)=>v.y+s<y.y,d=(v,y)=>v.y>y.y+s;function m(v,y,E=1){const w=v.x-y.x,A=(v.y-y.y)*E;return Math.sqrt(w*w+A*A)}const g=v=>m(v,o),_=v=>m(v,o,10);if(t==="Left"||t==="Right"){const v=t==="Left"?r.filter(w=>u(w,o)):r.filter(w=>f(w,o)),y=v.filter(w=>c(w,o)),E=Ff(y,g)||Ff(v,_);return E==null?void 0:E.element}if(t==="Up"||t==="Down"){const v=t==="Up"?r.filter(w=>h(w,o)):r.filter(w=>d(w,o)),y=v.filter(w=>i(w.element)),E=Ff(y,g)||Ff(v,g);return E==null?void 0:E.element}}const lR=typeof navigator<"u"?navigator.platform.toUpperCase().indexOf("MAC")>=0:!1;function Pz(n){return Bz[n]||""}function ia(n){const e=[];n.ctrlKey&&e.push("Ctrl"),n.metaKey&&e.push("Command"),n.altKey&&e.push(lR?"Option":"Alt"),n.shiftKey&&e.push("Shift");const t=Pz(n.which);return Mz[t]||e.push(t),e.join("+")}const Mz={Ctrl:!0,Command:!0,Alt:!0,Option:!0,Shift:!0},Bz={8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause_Break",20:"Caps_Lock",27:"Escape",33:"Page_Up",34:"Page_Down",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Left_Window_Key",92:"Right_Window_Key",93:"Select_Key",96:"Numpad_0",97:"Numpad_1",98:"Numpad_2",99:"Numpad_3",100:"Numpad_4",101:"Numpad_5",102:"Numpad_6",103:"Numpad_7",104:"Numpad_8",105:"Numpad_9",106:"Numpad_*",107:"Numpad_+",109:"Numpad_-",110:"Numpad_.",111:"Numpad_/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Num_Lock",145:"Scroll_Lock",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"};const{window:Np}=Ju;function QS(n){let e,t,i,s,r,o;const l=[n[0].props];var a=n[0].component;function c(u){let f={};for(let h=0;h<l.length;h+=1)f=Qr(f,l[h]);return{props:f}}return a&&(s=Cn(a,c())),{c(){e=C("div"),t=C("input"),i=F(),s&&Te(s.$$.fragment),this.h()},l(u){e=k(u,"DIV",{class:!0,style:!0});var f=T(e);t=k(f,"INPUT",{type:!0,tabindex:!0,class:!0}),i=j(f),s&&De(s.$$.fragment,f),f.forEach(b),this.h()},h(){S(t,"type","text"),t.readOnly="readonly",S(t,"tabindex","-1"),S(t,"class","jse-hidden-input svelte-15awhio"),S(e,"class","jse-absolute-popup-content svelte-15awhio"),S(e,"style",r=YS(n[1],n[0].options))},m(u,f){X(u,e,f),p(e,t),n[7](t),p(e,i),s&&Oe(s,e,null),o=!0},p(u,f){const h=f&1?Yr(l,[Zl(u[0].props)]):{};if(a!==(a=u[0].component)){if(s){He();const d=s;Q(d.$$.fragment,1,0,()=>{Re(d,1)}),qe()}a?(s=Cn(a,c()),Te(s.$$.fragment),B(s.$$.fragment,1),Oe(s,e,null)):s=null}else a&&s.$set(h);(!o||f&3&&r!==(r=YS(u[1],u[0].options)))&&S(e,"style",r)},i(u){o||(s&&B(s.$$.fragment,u),o=!0)},o(u){s&&Q(s.$$.fragment,u),o=!1},d(u){u&&b(e),n[7](null),s&&Re(s)}}}function Lz(n){let e,t,i,s,r=n[1]&&QS(n);return{c(){e=C("div"),r&&r.c(),this.h()},l(o){e=k(o,"DIV",{class:!0});var l=T(e);r&&r.l(l),l.forEach(b),this.h()},h(){S(e,"class","jse-absolute-popup svelte-15awhio")},m(o,l){X(o,e,l),r&&r.m(e,null),n[8](e),t=!0,i||(s=[Se(Np,"mousedown",n[3],!0),Se(Np,"keydown",n[4],!0),Se(Np,"wheel",n[5],!0),Se(e,"mousedown",Wz),Se(e,"keydown",n[4])],i=!0)},p(o,[l]){o[1]?r?(r.p(o,l),l&2&&B(r,1)):(r=QS(o),r.c(),B(r,1),r.m(e,null)):r&&(He(),Q(r,1,1,()=>{r=null}),qe())},i(o){t||(B(r),t=!0)},o(o){Q(r),t=!1},d(o){o&&b(e),r&&r.d(),n[8](null),i=!1,an(s)}}}function Wz(n){n.stopPropagation()}function YS(n,e){function t(){if(e.anchor){const{anchor:u,width:f=0,height:h=0,offsetTop:d=0,offsetLeft:m=0,position:g}=e,{left:_,top:v,bottom:y,right:E}=u.getBoundingClientRect(),w=g==="top"||v+h>window.innerHeight&&v>h,A=g==="left"||_+f>window.innerWidth&&_>f;return{left:A?E-m:_+m,top:w?v-d:y+d,positionAbove:w,positionLeft:A}}else if(typeof e.left=="number"&&typeof e.top=="number"){const{left:u,top:f,width:h=0,height:d=0}=e,m=f+d>window.innerHeight&&f>d,g=u+h>window.innerWidth&&u>h;return{left:u,top:f,positionAbove:m,positionLeft:g}}else throw new Error('Invalid config: pass either "left" and "top", or pass "anchor"')}const i=n.getBoundingClientRect(),{left:s,top:r,positionAbove:o,positionLeft:l}=t(),a=o?`bottom: ${i.top-r}px;`:`top: ${r-i.top}px;`,c=l?`right: ${i.left-s}px;`:`left: ${s-i.left}px;`;return a+c}function Uz(n,e,t){let{popup:i}=e,{closeAbsolutePopup:s}=e,r,o;Mi(f);function l(m){i.options&&i.options.closeOnOuterClick&&!bf(m.target,g=>g===r)&&s(i.id)}function a(m){l(m)}function c(m){ia(m)==="Escape"&&s(i.id)}function u(m){l(m)}function f(){o&&o.focus()}function h(m){Vt[m?"unshift":"push"](()=>{o=m,t(2,o)})}function d(m){Vt[m?"unshift":"push"](()=>{r=m,t(1,r)})}return n.$$set=m=>{"popup"in m&&t(0,i=m.popup),"closeAbsolutePopup"in m&&t(6,s=m.closeAbsolutePopup)},[i,r,o,a,c,u,s,h,d]}class Vz extends rt{constructor(e){super(),ot(this,e,Uz,Lz,It,{popup:0,closeAbsolutePopup:6})}}const Fz=Vz;function JS(n,e,t){const i=n.slice();return i[6]=e[t],i}function ZS(n){let e,t;return e=new Fz({props:{popup:n[6],closeAbsolutePopup:n[1]}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,s){const r={};s&1&&(r.popup=i[6]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function jz(n){let e,t,i=n[0],s=[];for(let a=0;a<i.length;a+=1)s[a]=ZS(JS(n,i,a));const r=a=>Q(s[a],1,1,()=>{s[a]=null}),o=n[3].default,l=cs(o,n,n[2],null);return{c(){for(let a=0;a<s.length;a+=1)s[a].c();e=F(),l&&l.c()},l(a){for(let c=0;c<s.length;c+=1)s[c].l(a);e=j(a),l&&l.l(a)},m(a,c){for(let u=0;u<s.length;u+=1)s[u].m(a,c);X(a,e,c),l&&l.m(a,c),t=!0},p(a,[c]){if(c&3){i=a[0];let u;for(u=0;u<i.length;u+=1){const f=JS(a,i,u);s[u]?(s[u].p(f,c),B(s[u],1)):(s[u]=ZS(f),s[u].c(),B(s[u],1),s[u].m(e.parentNode,e))}for(He(),u=i.length;u<s.length;u+=1)r(u);qe()}l&&l.p&&(!t||c&4)&&us(l,o,a,a[2],t?hs(o,a[2],c,null):fs(a[2]),null)},i(a){if(!t){for(let c=0;c<i.length;c+=1)B(s[c]);B(l,a),t=!0}},o(a){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)Q(s[c]);Q(l,a),t=!1},d(a){Ht(s,a),a&&b(e),l&&l.d(a)}}}function Hz(n,e,t){let{$$slots:i={},$$scope:s}=e;const r=Ts("jsoneditor:AbsolutePopup");let o=[];function l(c,u,f){r("open...",u,f);const h={id:nu(),component:c,props:u||{},options:f||{}};return t(0,o=[...o,h]),h.id}function a(c){const u=o.findIndex(f=>f.id===c);if(u!==-1){const f=o[u];f.options.onClose&&f.options.onClose(),t(0,o=o.filter(h=>h.id!==c))}}return Zd("absolute-popup",{openAbsolutePopup:l,closeAbsolutePopup:a}),n.$$set=c=>{"$$scope"in c&&t(2,s=c.$$scope)},n.$$.update=()=>{n.$$.dirty&1&&r("popups",o)},[o,a,s,i]}class qz extends rt{constructor(e){super(),ot(this,e,Hz,jz,fn,{})}}const aR=qz;var No={prefix:"fas",iconName:"caret-right",icon:[256,512,[],"f0da","M246.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-9.2-9.2-22.9-11.9-34.9-6.9s-19.8 16.6-19.8 29.6l0 256c0 12.9 7.8 24.6 19.8 29.6s25.7 2.2 34.9-6.9l128-128z"]},zz={prefix:"fas",iconName:"paste",icon:[512,512,["file-clipboard"],"f0ea","M160 0c-23.7 0-44.4 12.9-55.4 32H48C21.5 32 0 53.5 0 80V400c0 26.5 21.5 48 48 48H192V176c0-44.2 35.8-80 80-80h48V80c0-26.5-21.5-48-48-48H215.4C204.4 12.9 183.7 0 160 0zM272 128c-26.5 0-48 21.5-48 48V448v16c0 26.5 21.5 48 48 48H464c26.5 0 48-21.5 48-48V256H416c-17.7 0-32-14.3-32-32V128H320 272zM160 40a24 24 0 1 1 0 48 24 24 0 1 1 0-48zm256 88v96h96l-96-96z"]},Gz={prefix:"fas",iconName:"circle-notch",icon:[512,512,[],"f1ce","M222.7 32.1c5 16.9-4.6 34.8-21.5 39.8C121.8 95.6 64 169.1 64 256c0 106 86 192 192 192s192-86 192-192c0-86.9-57.8-160.4-137.1-184.1c-16.9-5-26.6-22.9-21.5-39.8s22.9-26.6 39.8-21.5C434.9 42.1 512 140 512 256c0 141.4-114.6 256-256 256S0 397.4 0 256C0 140 77.1 42.1 182.9 10.6c16.9-5 34.8 4.6 39.8 21.5z"]},Kz={prefix:"fas",iconName:"scissors",icon:[512,512,[9984,9986,9988,"cut"],"f0c4","M256 192l-39.5-39.5c4.9-12.6 7.5-26.2 7.5-40.5C224 50.1 173.9 0 112 0S0 50.1 0 112s50.1 112 112 112c14.3 0 27.9-2.7 40.5-7.5L192 256l-39.5 39.5c-12.6-4.9-26.2-7.5-40.5-7.5C50.1 288 0 338.1 0 400s50.1 112 112 112s112-50.1 112-112c0-14.3-2.7-27.9-7.5-40.5L499.2 76.8c7.1-7.1 7.1-18.5 0-25.6c-28.3-28.3-74.1-28.3-102.4 0L256 192zm22.6 150.6L396.8 460.8c28.3 28.3 74.1 28.3 102.4 0c7.1-7.1 7.1-18.5 0-25.6L342.6 278.6l-64 64zM64 112a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zm48 240a48 48 0 1 1 0 96 48 48 0 1 1 0-96z"]},C1=Kz,Xz={prefix:"fas",iconName:"square-caret-down",icon:[448,512,["caret-square-down"],"f150","M384 480c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l320 0zM224 352c-6.7 0-13-2.8-17.6-7.7l-104-112c-6.5-7-8.2-17.2-4.4-25.9s12.5-14.4 22-14.4l208 0c9.5 0 18.2 5.7 22 14.4s2.1 18.9-4.4 25.9l-104 112c-4.5 4.9-10.9 7.7-17.6 7.7z"]},Qz=Xz,Yz={prefix:"fas",iconName:"pen-to-square",icon:[512,512,["edit"],"f044","M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.8 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160V416c0 53 43 96 96 96H352c53 0 96-43 96-96V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96z"]},xS=Yz,Jz={prefix:"fas",iconName:"chevron-up",icon:[448,512,[],"f077","M201.4 105.4c12.5-12.5 32.8-12.5 45.3 0l192 192c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L224 173.3 54.6 342.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l192-192z"]},cR={prefix:"fas",iconName:"angle-right",icon:[256,512,[8250],"f105","M246.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L178.7 256 41.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"]},Zz={prefix:"fas",iconName:"square-caret-up",icon:[448,512,["caret-square-up"],"f151","M64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zM224 160c6.7 0 13 2.8 17.6 7.7l104 112c6.5 7 8.2 17.2 4.4 25.9s-12.5 14.4-22 14.4H120c-9.5 0-18.2-5.7-22-14.4s-2.1-18.9 4.4-25.9l104-112c4.5-4.9 10.9-7.7 17.6-7.7z"]},xz=Zz,xv={prefix:"fas",iconName:"filter",icon:[512,512,[],"f0b0","M3.9 54.9C10.5 40.9 24.5 32 40 32H472c15.5 0 29.5 8.9 36.1 22.9s4.6 30.5-5.2 42.5L320 320.9V448c0 12.1-6.8 23.2-17.7 28.6s-23.8 4.3-33.5-3l-64-48c-8.1-6-12.8-15.5-12.8-25.6V320.9L9 97.3C-.7 85.4-2.8 68.8 3.9 54.9z"]},hd={prefix:"fas",iconName:"code",icon:[640,512,[],"f121","M392.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6zm80.6 120.1c-12.5 12.5-12.5 32.8 0 45.3L562.7 256l-89.4 89.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l112-112c12.5-12.5 12.5-32.8 0-45.3l-112-112c-12.5-12.5-32.8-12.5-45.3 0zm-306.7 0c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3l112 112c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l89.4-89.4c12.5-12.5 12.5-32.8 0-45.3z"]},$v={prefix:"fas",iconName:"wrench",icon:[512,512,[128295],"f0ad","M352 320c88.4 0 160-71.6 160-160c0-15.3-2.2-30.1-6.2-44.2c-3.1-10.8-16.4-13.2-24.3-5.3l-76.8 76.8c-3 3-7.1 4.7-11.3 4.7H336c-8.8 0-16-7.2-16-16V118.6c0-4.2 1.7-8.3 4.7-11.3l76.8-76.8c7.9-7.9 5.4-21.2-5.3-24.3C382.1 2.2 367.3 0 352 0C263.6 0 192 71.6 192 160c0 19.1 3.4 37.5 9.5 54.5L19.9 396.1C7.2 408.8 0 426.1 0 444.1C0 481.6 30.4 512 67.9 512c18 0 35.3-7.2 48-19.9L297.5 310.5c17 6.2 35.4 9.5 54.5 9.5zM80 408a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"]},eb={prefix:"fas",iconName:"pen",icon:[512,512,[128394],"f304","M362.7 19.3L314.3 67.7 444.3 197.7l48.4-48.4c25-25 25-65.5 0-90.5L453.3 19.3c-25-25-65.5-25-90.5 0zm-71 71L58.6 323.5c-10.4 10.4-18 23.3-22.2 37.4L1 481.2C-1.5 489.7 .8 498.8 7 505s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L421.7 220.3 291.7 90.3z"]},$z={prefix:"fas",iconName:"arrow-rotate-right",icon:[512,512,[8635,"arrow-right-rotate","arrow-rotate-forward","redo"],"f01e","M370.3 160H320c-17.7 0-32 14.3-32 32s14.3 32 32 32H448c17.7 0 32-14.3 32-32V64c0-17.7-14.3-32-32-32s-32 14.3-32 32v51.2L398.4 97.6c-87.5-87.5-229.3-87.5-316.8 0s-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3s163.8-62.5 226.3 0L370.3 160z"]},uR=$z,eG={prefix:"fas",iconName:"arrow-rotate-left",icon:[512,512,[8634,"arrow-left-rotate","arrow-rotate-back","arrow-rotate-backward","undo"],"f0e2","M109.7 160H160c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32V64C0 46.3 14.3 32 32 32s32 14.3 32 32v51.2L81.6 97.6c87.5-87.5 229.3-87.5 316.8 0s87.5 229.3 0 316.8s-229.3 87.5-316.8 0c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0c62.5 62.5 163.8 62.5 226.3 0s62.5-163.8 0-226.3s-163.8-62.5-226.3 0L109.7 160z"]},fR=eG,tG={prefix:"fas",iconName:"crop-simple",icon:[512,512,["crop-alt"],"f565","M128 32c0-17.7-14.3-32-32-32S64 14.3 64 32V64H32C14.3 64 0 78.3 0 96s14.3 32 32 32H64V384c0 35.3 28.7 64 64 64H352V384H128V32zM384 480c0 17.7 14.3 32 32 32s32-14.3 32-32V448h32c17.7 0 32-14.3 32-32s-14.3-32-32-32H448l0-256c0-35.3-28.7-64-64-64L160 64v64l224 0 0 352z"]},nG=tG,iG={prefix:"fas",iconName:"gear",icon:[512,512,[9881,"cog"],"f013","M481.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-30.9 28.1c-7.7 7.1-11.4 17.5-10.9 27.9c.1 2.9 .2 5.8 .2 8.8s-.1 5.9-.2 8.8c-.5 10.5 3.1 20.9 10.9 27.9l30.9 28.1c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-39.7-12.6c-10-3.2-20.8-1.1-29.7 4.6c-4.9 3.1-9.9 6.1-15.1 8.7c-9.3 4.8-16.5 13.2-18.8 23.4l-8.9 40.7c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-8.9-40.7c-2.2-10.2-9.5-18.6-18.8-23.4c-5.2-2.7-10.2-5.6-15.1-8.7c-8.8-5.7-19.7-7.8-29.7-4.6L69.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l30.9-28.1c7.7-7.1 11.4-17.5 10.9-27.9c-.1-2.9-.2-5.8-.2-8.8s.1-5.9 .2-8.8c.5-10.5-3.1-20.9-10.9-27.9L8.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l39.7 12.6c10 3.2 20.8 1.1 29.7-4.6c4.9-3.1 9.9-6.1 15.1-8.7c9.3-4.8 16.5-13.2 18.8-23.4l8.9-40.7c2-9.1 9-16.3 18.2-17.8C213.3 1.2 227.5 0 242 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l8.9 40.7c2.2 10.2 9.4 18.6 18.8 23.4c5.2 2.7 10.2 5.6 15.1 8.7c8.8 5.7 19.7 7.7 29.7 4.6l39.7-12.6c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM242 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z"]},sG=iG,Br={prefix:"fas",iconName:"caret-down",icon:[320,512,[],"f0d7","M137.4 374.6c12.5 12.5 32.8 12.5 45.3 0l128-128c9.2-9.2 11.9-22.9 6.9-34.9s-16.6-19.8-29.6-19.8L32 192c-12.9 0-24.6 7.8-29.6 19.8s-2.2 25.7 6.9 34.9l128 128z"]},rG={prefix:"fas",iconName:"ellipsis-vertical",icon:[128,512,["ellipsis-v"],"f142","M56 472a56 56 0 1 1 0-112 56 56 0 1 1 0 112zm0-160a56 56 0 1 1 0-112 56 56 0 1 1 0 112zM0 96a56 56 0 1 1 112 0A56 56 0 1 1 0 96z"]},oG=rG,lG={prefix:"fas",iconName:"arrow-down-short-wide",icon:[576,512,["sort-amount-desc","sort-amount-down-alt"],"f884","M151.6 469.6C145.5 476.2 137 480 128 480s-17.5-3.8-23.6-10.4l-88-96c-11.9-13-11.1-33.3 2-45.2s33.3-11.1 45.2 2L96 365.7V64c0-17.7 14.3-32 32-32s32 14.3 32 32V365.7l32.4-35.4c11.9-13 32.2-13.9 45.2-2s13.9 32.2 2 45.2l-88 96zM320 32h32c17.7 0 32 14.3 32 32s-14.3 32-32 32H320c-17.7 0-32-14.3-32-32s14.3-32 32-32zm0 128h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H320c-17.7 0-32-14.3-32-32s14.3-32 32-32zm0 128H480c17.7 0 32 14.3 32 32s-14.3 32-32 32H320c-17.7 0-32-14.3-32-32s14.3-32 32-32zm0 128H544c17.7 0 32 14.3 32 32s-14.3 32-32 32H320c-17.7 0-32-14.3-32-32s14.3-32 32-32z"]},tb=lG,aG={prefix:"fas",iconName:"angle-down",icon:[384,512,[8964],"f107","M169.4 342.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 274.7 54.6 137.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"]},cG={prefix:"fas",iconName:"arrow-down",icon:[384,512,[8595],"f063","M169.4 470.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 370.8 224 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 306.7L54.6 265.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"]},uG={prefix:"fas",iconName:"magnifying-glass",icon:[512,512,[128269,"search"],"f002","M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"]},nb=uG,fG={prefix:"fas",iconName:"chevron-down",icon:[448,512,[],"f078","M201.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 338.7 54.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z"]},Mu={prefix:"fas",iconName:"copy",icon:[512,512,[],"f0c5","M224 0c-35.3 0-64 28.7-64 64V288c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64H224zM64 160c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H288c35.3 0 64-28.7 64-64V384H288v64H64V224h64V160H64z"]},hR={prefix:"fas",iconName:"xmark",icon:[320,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M310.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L160 210.7 54.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L114.7 256 9.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 301.3 265.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L205.3 256 310.6 150.6z"]},$S=hR,_f=hR,hG={prefix:"fas",iconName:"clone",icon:[512,512,[],"f24d","M0 448c0 35.3 28.7 64 64 64H288c35.3 0 64-28.7 64-64V384H224c-53 0-96-43-96-96V160H64c-35.3 0-64 28.7-64 64V448zm224-96H448c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64H224c-35.3 0-64 28.7-64 64V288c0 35.3 28.7 64 64 64z"]},k1={prefix:"fas",iconName:"check",icon:[512,512,[10003,10004],"f00c","M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"]},dG={prefix:"fas",iconName:"triangle-exclamation",icon:[512,512,[9888,"exclamation-triangle","warning"],"f071","M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"]},sa=dG;function jf(n,e=1e3){if(n<.9*e)return n.toFixed()+" B";const t=n/e;if(t<.9*e)return t.toFixed(1)+" KB";const i=t/e;if(i<.9*e)return i.toFixed(1)+" MB";const s=i/e;return s<.9*e?s.toFixed(1)+" GB":(s/e).toFixed(1)+" TB"}const Hf=Ts("jsoneditor:FocusTracker");function dR({onMount:n,onDestroy:e,getWindow:t,hasFocus:i,onFocus:s,onBlur:r}){let o,l=!1;function a(){const u=i();u&&(clearTimeout(o),l||(Hf("focus"),s(),l=u))}function c(){l&&(clearTimeout(o),o=setTimeout(()=>{Hf("blur"),l=!1,r()}))}n(()=>{Hf("mount FocusTracker");const u=t();u&&(u.addEventListener("focusin",a,!0),u.addEventListener("focusout",c,!0))}),e(()=>{Hf("destroy FocusTracker");const u=t();u&&(u.removeEventListener("focusin",a,!0),u.removeEventListener("focusout",c,!0))})}function mG(n){let e,t=[n[0]],i={};for(let s=0;s<t.length;s+=1)i=Qr(i,t[s]);return{c(){e=ir("path"),this.h()},l(s){e=sr(s,"path",{}),T(e).forEach(b),this.h()},h(){Mh(e,i)},m(s,r){X(s,e,r)},p(s,[r]){Mh(e,i=Yr(t,[r&1&&s[0]]))},i:Xe,o:Xe,d(s){s&&b(e)}}}function pG(n,e,t){let{data:i={}}=e;return n.$$set=s=>{"data"in s&&t(0,i=s.data)},[i]}class gG extends rt{constructor(e){super(),ot(this,e,pG,mG,It,{data:0})}}function vG(n){let e,t=[n[0]],i={};for(let s=0;s<t.length;s+=1)i=Qr(i,t[s]);return{c(){e=ir("polygon"),this.h()},l(s){e=sr(s,"polygon",{}),T(e).forEach(b),this.h()},h(){Mh(e,i)},m(s,r){X(s,e,r)},p(s,[r]){Mh(e,i=Yr(t,[r&1&&s[0]]))},i:Xe,o:Xe,d(s){s&&b(e)}}}function bG(n,e,t){let{data:i={}}=e;return n.$$set=s=>{"data"in s&&t(0,i=s.data)},[i]}class _G extends rt{constructor(e){super(),ot(this,e,bG,vG,It,{data:0})}}function yG(n){let e;return{c(){e=ir("g")},l(t){e=sr(t,"g",{});var i=T(e);i.forEach(b)},m(t,i){X(t,e,i),e.innerHTML=n[0]},p(t,[i]){i&1&&(e.innerHTML=t[0])},i:Xe,o:Xe,d(t){t&&b(e)}}}function SG(n,e,t){let i=870711;function s(){return i+=1,`fa-${i.toString(16)}`}let r,{data:o}=e;function l(a){if(!a||!a.raw)return null;let c=a.raw;const u={};return c=c.replace(/\s(?:xml:)?id=["']?([^"')\s]+)/g,(f,h)=>{const d=s();return u[h]=d,` id="${d}"`}),c=c.replace(/#(?:([^'")\s]+)|xpointer\(id\((['"]?)([^')]+)\2\)\))/g,(f,h,d,m)=>{const g=h||m;return!g||!u[g]?f:`#${u[g]}`}),c}return n.$$set=a=>{"data"in a&&t(1,o=a.data)},n.$$.update=()=>{n.$$.dirty&2&&t(0,r=l(o))},[r,o]}class EG extends rt{constructor(e){super(),ot(this,e,SG,yG,It,{data:1})}}function AG(n){let e,t,i,s;const r=n[13].default,o=cs(r,n,n[12],null);return{c(){e=ir("svg"),o&&o.c(),this.h()},l(l){e=sr(l,"svg",{version:!0,class:!0,x:!0,y:!0,width:!0,height:!0,"aria-label":!0,role:!0,viewBox:!0,style:!0});var a=T(e);o&&o.l(a),a.forEach(b),this.h()},h(){S(e,"version","1.1"),S(e,"class",t="fa-icon "+n[0]+" svelte-1dof0an"),S(e,"x",n[8]),S(e,"y",n[9]),S(e,"width",n[1]),S(e,"height",n[2]),S(e,"aria-label",n[11]),S(e,"role",i=n[11]?"img":"presentation"),S(e,"viewBox",n[3]),S(e,"style",n[10]),$e(e,"fa-spin",n[4]),$e(e,"fa-pulse",n[6]),$e(e,"fa-inverse",n[5]),$e(e,"fa-flip-horizontal",n[7]==="horizontal"),$e(e,"fa-flip-vertical",n[7]==="vertical")},m(l,a){X(l,e,a),o&&o.m(e,null),s=!0},p(l,[a]){o&&o.p&&(!s||a&4096)&&us(o,r,l,l[12],s?hs(r,l[12],a,null):fs(l[12]),null),(!s||a&1&&t!==(t="fa-icon "+l[0]+" svelte-1dof0an"))&&S(e,"class",t),(!s||a&256)&&S(e,"x",l[8]),(!s||a&512)&&S(e,"y",l[9]),(!s||a&2)&&S(e,"width",l[1]),(!s||a&4)&&S(e,"height",l[2]),(!s||a&2048)&&S(e,"aria-label",l[11]),(!s||a&2048&&i!==(i=l[11]?"img":"presentation"))&&S(e,"role",i),(!s||a&8)&&S(e,"viewBox",l[3]),(!s||a&1024)&&S(e,"style",l[10]),(!s||a&17)&&$e(e,"fa-spin",l[4]),(!s||a&65)&&$e(e,"fa-pulse",l[6]),(!s||a&33)&&$e(e,"fa-inverse",l[5]),(!s||a&129)&&$e(e,"fa-flip-horizontal",l[7]==="horizontal"),(!s||a&129)&&$e(e,"fa-flip-vertical",l[7]==="vertical")},i(l){s||(B(o,l),s=!0)},o(l){Q(o,l),s=!1},d(l){l&&b(e),o&&o.d(l)}}}function wG(n,e,t){let{$$slots:i={},$$scope:s}=e,{class:r}=e,{width:o}=e,{height:l}=e,{box:a}=e,{spin:c=!1}=e,{inverse:u=!1}=e,{pulse:f=!1}=e,{flip:h=null}=e,{x:d=void 0}=e,{y:m=void 0}=e,{style:g=void 0}=e,{label:_=void 0}=e;return n.$$set=v=>{"class"in v&&t(0,r=v.class),"width"in v&&t(1,o=v.width),"height"in v&&t(2,l=v.height),"box"in v&&t(3,a=v.box),"spin"in v&&t(4,c=v.spin),"inverse"in v&&t(5,u=v.inverse),"pulse"in v&&t(6,f=v.pulse),"flip"in v&&t(7,h=v.flip),"x"in v&&t(8,d=v.x),"y"in v&&t(9,m=v.y),"style"in v&&t(10,g=v.style),"label"in v&&t(11,_=v.label),"$$scope"in v&&t(12,s=v.$$scope)},[r,o,l,a,c,u,f,h,d,m,g,_,s,i]}class CG extends rt{constructor(e){super(),ot(this,e,wG,AG,It,{class:0,width:1,height:2,box:3,spin:4,inverse:5,pulse:6,flip:7,x:8,y:9,style:10,label:11})}}function eE(n,e,t){const i=n.slice();return i[24]=e[t],i}function tE(n,e,t){const i=n.slice();return i[27]=e[t],i}function nE(n){let e,t,i,s,r=n[6].paths&&iE(n),o=n[6].polygons&&rE(n),l=n[6].raw&&lE(n);return{c(){r&&r.c(),e=F(),o&&o.c(),t=F(),l&&l.c(),i=tt()},l(a){r&&r.l(a),e=j(a),o&&o.l(a),t=j(a),l&&l.l(a),i=tt()},m(a,c){r&&r.m(a,c),X(a,e,c),o&&o.m(a,c),X(a,t,c),l&&l.m(a,c),X(a,i,c),s=!0},p(a,c){a[6].paths?r?(r.p(a,c),c&64&&B(r,1)):(r=iE(a),r.c(),B(r,1),r.m(e.parentNode,e)):r&&(He(),Q(r,1,1,()=>{r=null}),qe()),a[6].polygons?o?(o.p(a,c),c&64&&B(o,1)):(o=rE(a),o.c(),B(o,1),o.m(t.parentNode,t)):o&&(He(),Q(o,1,1,()=>{o=null}),qe()),a[6].raw?l?(l.p(a,c),c&64&&B(l,1)):(l=lE(a),l.c(),B(l,1),l.m(i.parentNode,i)):l&&(He(),Q(l,1,1,()=>{l=null}),qe())},i(a){s||(B(r),B(o),B(l),s=!0)},o(a){Q(r),Q(o),Q(l),s=!1},d(a){r&&r.d(a),a&&b(e),o&&o.d(a),a&&b(t),l&&l.d(a),a&&b(i)}}}function iE(n){let e,t,i=n[6].paths,s=[];for(let o=0;o<i.length;o+=1)s[o]=sE(tE(n,i,o));const r=o=>Q(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();e=tt()},l(o){for(let l=0;l<s.length;l+=1)s[l].l(o);e=tt()},m(o,l){for(let a=0;a<s.length;a+=1)s[a].m(o,l);X(o,e,l),t=!0},p(o,l){if(l&64){i=o[6].paths;let a;for(a=0;a<i.length;a+=1){const c=tE(o,i,a);s[a]?(s[a].p(c,l),B(s[a],1)):(s[a]=sE(c),s[a].c(),B(s[a],1),s[a].m(e.parentNode,e))}for(He(),a=i.length;a<s.length;a+=1)r(a);qe()}},i(o){if(!t){for(let l=0;l<i.length;l+=1)B(s[l]);t=!0}},o(o){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)Q(s[l]);t=!1},d(o){Ht(s,o),o&&b(e)}}}function sE(n){let e,t;return e=new gG({props:{data:n[27]}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,s){const r={};s&64&&(r.data=i[27]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function rE(n){let e,t,i=n[6].polygons,s=[];for(let o=0;o<i.length;o+=1)s[o]=oE(eE(n,i,o));const r=o=>Q(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();e=tt()},l(o){for(let l=0;l<s.length;l+=1)s[l].l(o);e=tt()},m(o,l){for(let a=0;a<s.length;a+=1)s[a].m(o,l);X(o,e,l),t=!0},p(o,l){if(l&64){i=o[6].polygons;let a;for(a=0;a<i.length;a+=1){const c=eE(o,i,a);s[a]?(s[a].p(c,l),B(s[a],1)):(s[a]=oE(c),s[a].c(),B(s[a],1),s[a].m(e.parentNode,e))}for(He(),a=i.length;a<s.length;a+=1)r(a);qe()}},i(o){if(!t){for(let l=0;l<i.length;l+=1)B(s[l]);t=!0}},o(o){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)Q(s[l]);t=!1},d(o){Ht(s,o),o&&b(e)}}}function oE(n){let e,t;return e=new _G({props:{data:n[24]}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,s){const r={};s&64&&(r.data=i[24]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function lE(n){let e,t,i;function s(o){n[15](o)}let r={};return n[6]!==void 0&&(r.data=n[6]),e=new EG({props:r}),Vt.push(()=>Vs(e,"data",s)),{c(){Te(e.$$.fragment)},l(o){De(e.$$.fragment,o)},m(o,l){Oe(e,o,l),i=!0},p(o,l){const a={};!t&&l&64&&(t=!0,a.data=o[6],Zs(()=>t=!1)),e.$set(a)},i(o){i||(B(e.$$.fragment,o),i=!0)},o(o){Q(e.$$.fragment,o),i=!1},d(o){Re(e,o)}}}function kG(n){let e,t,i=n[6]&&nE(n);return{c(){i&&i.c(),e=tt()},l(s){i&&i.l(s),e=tt()},m(s,r){i&&i.m(s,r),X(s,e,r),t=!0},p(s,r){s[6]?i?(i.p(s,r),r&64&&B(i,1)):(i=nE(s),i.c(),B(i,1),i.m(e.parentNode,e)):i&&(He(),Q(i,1,1,()=>{i=null}),qe())},i(s){t||(B(i),t=!0)},o(s){Q(i),t=!1},d(s){i&&i.d(s),s&&b(e)}}}function IG(n){let e;const t=n[14].default,i=cs(t,n,n[16],null),s=i||kG(n);return{c(){s&&s.c()},l(r){s&&s.l(r)},m(r,o){s&&s.m(r,o),e=!0},p(r,o){i?i.p&&(!e||o&65536)&&us(i,t,r,r[16],e?hs(t,r[16],o,null):fs(r[16]),null):s&&s.p&&(!e||o&64)&&s.p(r,e?o:-1)},i(r){e||(B(s,r),e=!0)},o(r){Q(s,r),e=!1},d(r){s&&s.d(r)}}}function TG(n){let e,t;return e=new CG({props:{label:n[5],width:n[7],height:n[8],box:n[10],style:n[9],spin:n[1],flip:n[4],inverse:n[2],pulse:n[3],class:n[0],$$slots:{default:[IG]},$$scope:{ctx:n}}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,[s]){const r={};s&32&&(r.label=i[5]),s&128&&(r.width=i[7]),s&256&&(r.height=i[8]),s&1024&&(r.box=i[10]),s&512&&(r.style=i[9]),s&2&&(r.spin=i[1]),s&16&&(r.flip=i[4]),s&4&&(r.inverse=i[2]),s&8&&(r.pulse=i[3]),s&1&&(r.class=i[0]),s&65600&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}let aE=1;function OG(n){if("iconName"in n&&"icon"in n){let e={},t=n.icon,i=n.iconName,s=t[0],r=t[1],o=t[4],l={width:s,height:r,paths:[{d:o}]};return e[i]=l,e}return n}function RG(n,e,t){let{$$slots:i={},$$scope:s}=e,{class:r=""}=e,{data:o}=e,{scale:l=1}=e,{spin:a=!1}=e,{inverse:c=!1}=e,{pulse:u=!1}=e,{flip:f=null}=e,{label:h=null}=e,d=null,{style:m=null}=e,g,_,v,y;function E(){if(typeof o>"u")return;const H=OG(o),[P]=Object.keys(H),Y=H[P];Y.paths||(Y.paths=[]),Y.d&&Y.paths.push({d:Y.d}),Y.polygons||(Y.polygons=[]),Y.points&&Y.polygons.push({points:Y.points}),t(6,d=Y)}function w(){let H=1;return typeof l<"u"&&(H=Number(l)),isNaN(H)||H<=0?(console.warn('Invalid prop: prop "scale" should be a number over 0.'),aE):H*aE}function A(){return d?`0 0 ${d.width} ${d.height}`:`0 0 ${g} ${_}`}function I(){return d?Math.max(d.width,d.height)/16:1}function R(){return d?d.width/I()*w():0}function D(){return d?d.height/I()*w():0}function N(){let H="";m!==null&&(H+=m);let P=w();return P===1?H.length===0?void 0:H:(H!==""&&!H.endsWith(";")&&(H+="; "),`${H}font-size: ${P}em`)}function W(H){d=H,t(6,d)}return n.$$set=H=>{"class"in H&&t(0,r=H.class),"data"in H&&t(11,o=H.data),"scale"in H&&t(12,l=H.scale),"spin"in H&&t(1,a=H.spin),"inverse"in H&&t(2,c=H.inverse),"pulse"in H&&t(3,u=H.pulse),"flip"in H&&t(4,f=H.flip),"label"in H&&t(5,h=H.label),"style"in H&&t(13,m=H.style),"$$scope"in H&&t(16,s=H.$$scope)},n.$$.update=()=>{n.$$.dirty&14336&&(E(),t(7,g=R()),t(8,_=D()),t(9,v=N()),t(10,y=A()))},[r,a,c,u,f,h,d,g,_,v,y,o,l,m,i,W,s]}class qt extends rt{constructor(e){super(),ot(this,e,RG,TG,It,{class:0,data:11,scale:12,spin:1,inverse:2,pulse:3,flip:4,label:5,style:13})}}function cE(n,e,t){const i=n.slice();return i[8]=e[t],i}function uE(n){let e,t;return e=new qt({props:{data:n[1]}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,s){const r={};s&2&&(r.data=i[1]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function fE(n){let e,t;return e=new qt({props:{data:n[8].icon}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,s){const r={};s&8&&(r.data=i[8].icon),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function hE(n){let e,t,i=n[8].text+"",s,r,o,l,a,c,u,f=n[8].icon&&fE(n);function h(){return n[6](n[8])}function d(){return n[7](n[8])}return{c(){e=C("button"),f&&f.c(),t=F(),s=z(i),r=F(),this.h()},l(m){e=k(m,"BUTTON",{type:!0,class:!0,title:!0});var g=T(e);f&&f.l(g),t=j(g),s=G(g,i),r=j(g),g.forEach(b),this.h()},h(){S(e,"type","button"),S(e,"class","jse-button jse-action jse-primary svelte-c24vac"),S(e,"title",o=n[8].title),e.disabled=l=n[8].disabled},m(m,g){X(m,e,g),f&&f.m(e,null),p(e,t),p(e,s),p(e,r),a=!0,c||(u=[Se(e,"click",h),Se(e,"mousedown",d)],c=!0)},p(m,g){n=m,n[8].icon?f?(f.p(n,g),g&8&&B(f,1)):(f=fE(n),f.c(),B(f,1),f.m(e,t)):f&&(He(),Q(f,1,1,()=>{f=null}),qe()),(!a||g&8)&&i!==(i=n[8].text+"")&&Be(s,i),(!a||g&8&&o!==(o=n[8].title))&&S(e,"title",o),(!a||g&8&&l!==(l=n[8].disabled))&&(e.disabled=l)},i(m){a||(B(f),a=!0)},o(m){Q(f),a=!1},d(m){m&&b(e),f&&f.d(),c=!1,an(u)}}}function DG(n){let e,t,i,s,r,o,l,a,c,u,f=n[1]&&uE(n),h=n[3],d=[];for(let g=0;g<h.length;g+=1)d[g]=hE(cE(n,h,g));const m=g=>Q(d[g],1,1,()=>{d[g]=null});return{c(){e=C("div"),t=C("div"),f&&f.c(),i=F(),s=z(n[2]),r=F(),o=C("div");for(let g=0;g<d.length;g+=1)d[g].c();this.h()},l(g){e=k(g,"DIV",{class:!0});var _=T(e);t=k(_,"DIV",{class:!0});var v=T(t);f&&f.l(v),i=j(v),s=G(v,n[2]),v.forEach(b),r=j(_),o=k(_,"DIV",{class:!0});var y=T(o);for(let E=0;E<d.length;E+=1)d[E].l(y);y.forEach(b),_.forEach(b),this.h()},h(){S(t,"class","jse-text svelte-c24vac"),$e(t,"jse-clickable",n[4]!==null),S(o,"class","jse-actions svelte-c24vac"),S(e,"class",l="jse-message jse-"+n[0]+" svelte-c24vac")},m(g,_){X(g,e,_),p(e,t),f&&f.m(t,null),p(t,i),p(t,s),p(e,r),p(e,o);for(let v=0;v<d.length;v+=1)d[v].m(o,null);a=!0,c||(u=Se(t,"click",n[5]),c=!0)},p(g,[_]){if(g[1]?f?(f.p(g,_),_&2&&B(f,1)):(f=uE(g),f.c(),B(f,1),f.m(t,i)):f&&(He(),Q(f,1,1,()=>{f=null}),qe()),(!a||_&4)&&Be(s,g[2]),(!a||_&16)&&$e(t,"jse-clickable",g[4]!==null),_&8){h=g[3];let v;for(v=0;v<h.length;v+=1){const y=cE(g,h,v);d[v]?(d[v].p(y,_),B(d[v],1)):(d[v]=hE(y),d[v].c(),B(d[v],1),d[v].m(o,null))}for(He(),v=h.length;v<d.length;v+=1)m(v);qe()}(!a||_&1&&l!==(l="jse-message jse-"+g[0]+" svelte-c24vac"))&&S(e,"class",l)},i(g){if(!a){B(f);for(let _=0;_<h.length;_+=1)B(d[_]);a=!0}},o(g){Q(f),d=d.filter(Boolean);for(let _=0;_<d.length;_+=1)Q(d[_]);a=!1},d(g){g&&b(e),f&&f.d(),Ht(d,g),c=!1,u()}}}function NG(n,e,t){let{type:i="success"}=e,{icon:s=void 0}=e,{message:r=void 0}=e,{actions:o=[]}=e,{onClick:l=void 0}=e;function a(){l&&l()}const c=f=>{f.onClick&&f.onClick()},u=f=>{f.onMouseDown&&f.onMouseDown()};return n.$$set=f=>{"type"in f&&t(0,i=f.type),"icon"in f&&t(1,s=f.icon),"message"in f&&t(2,r=f.message),"actions"in f&&t(3,o=f.actions),"onClick"in f&&t(4,l=f.onClick)},[i,s,r,o,l,a,c,u]}class PG extends rt{constructor(e){super(),ot(this,e,NG,DG,fn,{type:0,icon:1,message:2,actions:3,onClick:4})}}const ra=PG;function bo(n){return"$"+n.map(MG).join("")}function MG(n){if(pR.test(n))return"["+n+"]";if(mR.test(n))return"."+n;{const e=JSON.stringify(n);return"['"+e.substring(1,e.length-1).replace(/\\"/g,'"')+"']"}}function I1(n){return n.replace(/^\$/,"").replace(/^\./,"")}function BG(n){return n.startsWith("$")?n:!n.startsWith("[")&&!n.startsWith(".")?"$."+n:"$"+n}function LG(n){let e=BG(n.trim()).substring(1);const t=[];for(;e.length>0;){const i=e.match(FG);if(!i)throw new SyntaxError(`Cannot parse path: unexpected part "${e}" at position ${n.length-e.length}`);t.push(i[1]||i[2]||i[3]),e=e.substring(i[0].length)}return t}const WG="^\\.([A-zA-Z$_][a-zA-Z$_0-9]*)",UG="^\\[([0-9]+)]",VG="^\\['(.*)']",FG=new RegExp([WG,UG,VG].join("|"));function ga(n){return{value:n,label:si(n)?"(whole item)":I1(bo(n))}}function fl(n){return n.map(e=>pR.test(e)?`?.[${e}]`:mR.test(e)?`?.${e}`:`?.[${JSON.stringify(e)}]`).join("")}const mR=/^[a-zA-Z$_][a-zA-Z$_\d]*$/,pR=/^\d+$/;function jG(){return Wm(n=>n,bo)}function dE(n,e,t){const i=n.slice();return i[6]=e[t],i[8]=t,i}function mE(n){let e,t,i,s;const r=[qG,HG],o=[];function l(a,c){return a[2]||a[0].length===1?0:1}return t=l(n),i=o[t]=r[t](n),{c(){e=C("div"),i.c(),this.h()},l(a){e=k(a,"DIV",{class:!0});var c=T(e);i.l(c),c.forEach(b),this.h()},h(){S(e,"class","jse-validation-errors-overview svelte-1hu2cx3")},m(a,c){X(a,e,c),o[t].m(e,null),s=!0},p(a,c){let u=t;t=l(a),t===u?o[t].p(a,c):(He(),Q(o[u],1,1,()=>{o[u]=null}),qe(),i=o[t],i?i.p(a,c):(i=o[t]=r[t](a),i.c()),B(i,1),i.m(e,null))},i(a){s||(B(i),s=!0)},o(a){Q(i),s=!1},d(a){a&&b(e),o[t].d()}}}function HG(n){let e,t,i,s,r,o,l,a=n[0].length+"",c,u,f,h,d,m,g;return r=new qt({props:{data:sa}}),h=new qt({props:{data:cR}}),{c(){e=C("table"),t=C("tbody"),i=C("tr"),s=C("td"),Te(r.$$.fragment),o=F(),l=C("td"),c=z(a),u=z(` validation errors
              `),f=C("div"),Te(h.$$.fragment),this.h()},l(_){e=k(_,"TABLE",{class:!0});var v=T(e);t=k(v,"TBODY",{});var y=T(t);i=k(y,"TR",{class:!0});var E=T(i);s=k(E,"TD",{class:!0});var w=T(s);De(r.$$.fragment,w),w.forEach(b),o=j(E),l=k(E,"TD",{class:!0});var A=T(l);c=G(A,a),u=G(A,` validation errors
              `),f=k(A,"DIV",{class:!0});var I=T(f);De(h.$$.fragment,I),I.forEach(b),A.forEach(b),E.forEach(b),y.forEach(b),v.forEach(b),this.h()},h(){S(s,"class","jse-validation-error-icon svelte-1hu2cx3"),S(f,"class","jse-validation-errors-expand svelte-1hu2cx3"),S(l,"class","svelte-1hu2cx3"),S(i,"class","jse-validation-error svelte-1hu2cx3"),S(e,"class","svelte-1hu2cx3")},m(_,v){X(_,e,v),p(e,t),p(t,i),p(i,s),Oe(r,s,null),p(i,o),p(i,l),p(l,c),p(l,u),p(l,f),Oe(h,f,null),d=!0,m||(g=Se(i,"click",n[4]),m=!0)},p(_,v){(!d||v&1)&&a!==(a=_[0].length+"")&&Be(c,a)},i(_){d||(B(r.$$.fragment,_),B(h.$$.fragment,_),d=!0)},o(_){Q(r.$$.fragment,_),Q(h.$$.fragment,_),d=!1},d(_){_&&b(e),Re(r),Re(h),m=!1,g()}}}function qG(n){let e,t,i,s=n[0],r=[];for(let l=0;l<s.length;l+=1)r[l]=gE(dE(n,s,l));const o=l=>Q(r[l],1,1,()=>{r[l]=null});return{c(){e=C("table"),t=C("tbody");for(let l=0;l<r.length;l+=1)r[l].c();this.h()},l(l){e=k(l,"TABLE",{class:!0});var a=T(e);t=k(a,"TBODY",{});var c=T(t);for(let u=0;u<r.length;u+=1)r[u].l(c);c.forEach(b),a.forEach(b),this.h()},h(){S(e,"class","svelte-1hu2cx3")},m(l,a){X(l,e,a),p(e,t);for(let c=0;c<r.length;c+=1)r[c].m(t,null);i=!0},p(l,a){if(a&11){s=l[0];let c;for(c=0;c<s.length;c+=1){const u=dE(l,s,c);r[c]?(r[c].p(u,a),B(r[c],1)):(r[c]=gE(u),r[c].c(),B(r[c],1),r[c].m(t,null))}for(He(),c=s.length;c<r.length;c+=1)o(c);qe()}},i(l){if(!i){for(let a=0;a<s.length;a+=1)B(r[a]);i=!0}},o(l){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)Q(r[a]);i=!1},d(l){l&&b(e),Ht(r,l)}}}function pE(n){let e,t,i,s,r;return t=new qt({props:{data:aG}}),{c(){e=C("button"),Te(t.$$.fragment),this.h()},l(o){e=k(o,"BUTTON",{type:!0,class:!0,title:!0});var l=T(e);De(t.$$.fragment,l),l.forEach(b),this.h()},h(){S(e,"type","button"),S(e,"class","jse-validation-errors-collapse svelte-1hu2cx3"),S(e,"title","Collapse validation errors")},m(o,l){X(o,e,l),Oe(t,e,null),i=!0,s||(r=Se(e,"click",D0(n[3])),s=!0)},p:Xe,i(o){i||(B(t.$$.fragment,o),i=!0)},o(o){Q(t.$$.fragment,o),i=!1},d(o){o&&b(e),Re(t),s=!1,r()}}}function gE(n){let e,t,i,s,r,o=I1(bo(n[6].path))+"",l,a,c,u=n[6].message+"",f,h,d,m,g,_,v;i=new qt({props:{data:sa}});let y=n[8]===0&&n[0].length>1&&pE(n);function E(){return n[5](n[6])}return{c(){e=C("tr"),t=C("td"),Te(i.$$.fragment),s=F(),r=C("td"),l=z(o),a=F(),c=C("td"),f=z(u),h=F(),d=C("td"),y&&y.c(),m=F(),this.h()},l(w){e=k(w,"TR",{class:!0});var A=T(e);t=k(A,"TD",{class:!0});var I=T(t);De(i.$$.fragment,I),I.forEach(b),s=j(A),r=k(A,"TD",{class:!0});var R=T(r);l=G(R,o),R.forEach(b),a=j(A),c=k(A,"TD",{class:!0});var D=T(c);f=G(D,u),D.forEach(b),h=j(A),d=k(A,"TD",{class:!0});var N=T(d);y&&y.l(N),N.forEach(b),m=j(A),A.forEach(b),this.h()},h(){S(t,"class","jse-validation-error-icon svelte-1hu2cx3"),S(r,"class","svelte-1hu2cx3"),S(c,"class","svelte-1hu2cx3"),S(d,"class","jse-validation-error-action svelte-1hu2cx3"),S(e,"class","jse-validation-error svelte-1hu2cx3")},m(w,A){X(w,e,A),p(e,t),Oe(i,t,null),p(e,s),p(e,r),p(r,l),p(e,a),p(e,c),p(c,f),p(e,h),p(e,d),y&&y.m(d,null),p(e,m),g=!0,_||(v=Se(e,"click",E),_=!0)},p(w,A){n=w,(!g||A&1)&&o!==(o=I1(bo(n[6].path))+"")&&Be(l,o),(!g||A&1)&&u!==(u=n[6].message+"")&&Be(f,u),n[8]===0&&n[0].length>1?y?(y.p(n,A),A&1&&B(y,1)):(y=pE(n),y.c(),B(y,1),y.m(d,null)):y&&(He(),Q(y,1,1,()=>{y=null}),qe())},i(w){g||(B(i.$$.fragment,w),B(y),g=!0)},o(w){Q(i.$$.fragment,w),Q(y),g=!1},d(w){w&&b(e),Re(i),y&&y.d(),_=!1,v()}}}function zG(n){let e=!si(n[0]),t,i,s=e&&mE(n);return{c(){s&&s.c(),t=tt()},l(r){s&&s.l(r),t=tt()},m(r,o){s&&s.m(r,o),X(r,t,o),i=!0},p(r,[o]){o&1&&(e=!si(r[0])),e?s?(s.p(r,o),o&1&&B(s,1)):(s=mE(r),s.c(),B(s,1),s.m(t.parentNode,t)):s&&(He(),Q(s,1,1,()=>{s=null}),qe())},i(r){i||(B(s),i=!0)},o(r){Q(s),i=!1},d(r){s&&s.d(r),r&&b(t)}}}function GG(n,e,t){let{validationErrors:i}=e,{selectError:s}=e,r=!0;function o(){t(2,r=!1)}function l(){t(2,r=!0)}const a=c=>{setTimeout(()=>s(c))};return n.$$set=c=>{"validationErrors"in c&&t(0,i=c.validationErrors),"selectError"in c&&t(1,s=c.selectError)},[i,s,r,o,l,a]}class KG extends rt{constructor(e){super(),ot(this,e,GG,zG,fn,{validationErrors:0,selectError:1})}}const gR=KG,XG={prefix:"fas",iconName:"jsoneditor-expand",icon:[512,512,[],null,"M 0,448 V 512 h 512 v -64 z M 0,0 V 64 H 512 V 0 Z M 256,96 128,224 h 256 z M 256,416 384,288 H 128 Z"]},QG={prefix:"fas",iconName:"jsoneditor-collapse",icon:[512,512,[],null,"m 0,224 v 64 h 512 v -64 z M 256,192 384,64 H 128 Z M 256,320 128,448 h 256 z"]},YG={prefix:"fas",iconName:"jsoneditor-format",icon:[512,512,[],null,"M 0,32 v 64 h 416 v -64 z M 160,160 v 64 h 352 v -64 z M 160,288 v 64 h 288 v -64 z M 0,416 v 64 h 320 v -64 z"]},JG={prefix:"fas",iconName:"jsoneditor-compact",icon:[512,512,[],null,"M 0,32 v 64 h 512 v -64 z M 0,160 v 64 h 512 v -64 z M 0,288 v 64 h 352 v -64 z"]};const ZG=n=>({}),vE=n=>({});function bE(n,e,t){const i=n.slice();return i[3]=e[t],i}const xG=n=>({}),_E=n=>({});function $G(n){let e,t,i,s,r,o,l,a,c=n[3].icon&&yE(n),u=n[3].text&&SE(n);return{c(){e=C("button"),c&&c.c(),t=F(),u&&u.c(),this.h()},l(f){e=k(f,"BUTTON",{type:!0,class:!0,title:!0});var h=T(e);c&&c.l(h),t=j(h),u&&u.l(h),h.forEach(b),this.h()},h(){S(e,"type","button"),S(e,"class",i="jse-button "+n[3].className+" svelte-31blda"),S(e,"title",s=n[3].title),e.disabled=r=n[3].disabled||!1},m(f,h){X(f,e,h),c&&c.m(e,null),p(e,t),u&&u.m(e,null),o=!0,l||(a=Se(e,"click",function(){Bn(n[3].onClick)&&n[3].onClick.apply(this,arguments)}),l=!0)},p(f,h){n=f,n[3].icon?c?(c.p(n,h),h&1&&B(c,1)):(c=yE(n),c.c(),B(c,1),c.m(e,t)):c&&(He(),Q(c,1,1,()=>{c=null}),qe()),n[3].text?u?u.p(n,h):(u=SE(n),u.c(),u.m(e,null)):u&&(u.d(1),u=null),(!o||h&1&&i!==(i="jse-button "+n[3].className+" svelte-31blda"))&&S(e,"class",i),(!o||h&1&&s!==(s=n[3].title))&&S(e,"title",s),(!o||h&1&&r!==(r=n[3].disabled||!1))&&(e.disabled=r)},i(f){o||(B(c),o=!0)},o(f){Q(c),o=!1},d(f){f&&b(e),c&&c.d(),u&&u.d(),l=!1,a()}}}function eK(n){let e;return{c(){e=C("div"),this.h()},l(t){e=k(t,"DIV",{class:!0}),T(e).forEach(b),this.h()},h(){S(e,"class","jse-space svelte-31blda")},m(t,i){X(t,e,i)},p:Xe,i:Xe,o:Xe,d(t){t&&b(e)}}}function tK(n){let e;return{c(){e=C("div"),this.h()},l(t){e=k(t,"DIV",{class:!0}),T(e).forEach(b),this.h()},h(){S(e,"class","jse-separator svelte-31blda")},m(t,i){X(t,e,i)},p:Xe,i:Xe,o:Xe,d(t){t&&b(e)}}}function yE(n){let e,t;return e=new qt({props:{data:n[3].icon}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,s){const r={};s&1&&(r.data=i[3].icon),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function SE(n){let e=n[3].text+"",t;return{c(){t=z(e)},l(i){t=G(i,e)},m(i,s){X(i,t,s)},p(i,s){s&1&&e!==(e=i[3].text+"")&&Be(t,e)},d(i){i&&b(t)}}}function EE(n){let e,t,i,s;const r=[tK,eK,$G],o=[];function l(a,c){return a[3].separator===!0?0:a[3].space===!0?1:2}return e=l(n),t=o[e]=r[e](n),{c(){t.c(),i=tt()},l(a){t.l(a),i=tt()},m(a,c){o[e].m(a,c),X(a,i,c),s=!0},p(a,c){let u=e;e=l(a),e===u?o[e].p(a,c):(He(),Q(o[u],1,1,()=>{o[u]=null}),qe(),t=o[e],t?t.p(a,c):(t=o[e]=r[e](a),t.c()),B(t,1),t.m(i.parentNode,i))},i(a){s||(B(t),s=!0)},o(a){Q(t),s=!1},d(a){o[e].d(a),a&&b(i)}}}function nK(n){let e,t,i,s;const r=n[2].left,o=cs(r,n,n[1],_E);let l=n[0],a=[];for(let h=0;h<l.length;h+=1)a[h]=EE(bE(n,l,h));const c=h=>Q(a[h],1,1,()=>{a[h]=null}),u=n[2].right,f=cs(u,n,n[1],vE);return{c(){e=C("div"),o&&o.c(),t=F();for(let h=0;h<a.length;h+=1)a[h].c();i=F(),f&&f.c(),this.h()},l(h){e=k(h,"DIV",{class:!0});var d=T(e);o&&o.l(d),t=j(d);for(let m=0;m<a.length;m+=1)a[m].l(d);i=j(d),f&&f.l(d),d.forEach(b),this.h()},h(){S(e,"class","jse-menu svelte-31blda")},m(h,d){X(h,e,d),o&&o.m(e,null),p(e,t);for(let m=0;m<a.length;m+=1)a[m].m(e,null);p(e,i),f&&f.m(e,null),s=!0},p(h,[d]){if(o&&o.p&&(!s||d&2)&&us(o,r,h,h[1],s?hs(r,h[1],d,xG):fs(h[1]),_E),d&1){l=h[0];let m;for(m=0;m<l.length;m+=1){const g=bE(h,l,m);a[m]?(a[m].p(g,d),B(a[m],1)):(a[m]=EE(g),a[m].c(),B(a[m],1),a[m].m(e,i))}for(He(),m=l.length;m<a.length;m+=1)c(m);qe()}f&&f.p&&(!s||d&2)&&us(f,u,h,h[1],s?hs(u,h[1],d,ZG):fs(h[1]),vE)},i(h){if(!s){B(o,h);for(let d=0;d<l.length;d+=1)B(a[d]);B(f,h),s=!0}},o(h){Q(o,h),a=a.filter(Boolean);for(let d=0;d<a.length;d+=1)Q(a[d]);Q(f,h),s=!1},d(h){h&&b(e),o&&o.d(h),Ht(a,h),f&&f.d(h)}}}function iK(n,e,t){let{$$slots:i={},$$scope:s}=e,{items:r=[]}=e;return n.$$set=o=>{"items"in o&&t(0,r=o.items),"$$scope"in o&&t(1,s=o.$$scope)},[r,s,i]}class sK extends rt{constructor(e){super(),ot(this,e,iK,nK,fn,{items:0})}}const ib=sK;function rK(n){let e,t;return e=new ib({props:{items:n[0]}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,[s]){const r={};s&1&&(r.items=i[0]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function oK(n,e,t){let i,s,{readOnly:r=!1}=e,{onFormat:o}=e,{onCompact:l}=e,{onSort:a}=e,{onTransform:c}=e,{onToggleSearch:u}=e,{onUndo:f}=e,{onRedo:h}=e,{canUndo:d}=e,{canRedo:m}=e,{canFormat:g}=e,{canCompact:_}=e,{canSort:v}=e,{canTransform:y}=e,{onRenderMenu:E=Gn}=e;return n.$$set=w=>{"readOnly"in w&&t(1,r=w.readOnly),"onFormat"in w&&t(2,o=w.onFormat),"onCompact"in w&&t(3,l=w.onCompact),"onSort"in w&&t(4,a=w.onSort),"onTransform"in w&&t(5,c=w.onTransform),"onToggleSearch"in w&&t(6,u=w.onToggleSearch),"onUndo"in w&&t(7,f=w.onUndo),"onRedo"in w&&t(8,h=w.onRedo),"canUndo"in w&&t(9,d=w.canUndo),"canRedo"in w&&t(10,m=w.canRedo),"canFormat"in w&&t(11,g=w.canFormat),"canCompact"in w&&t(12,_=w.canCompact),"canSort"in w&&t(13,v=w.canSort),"canTransform"in w&&t(14,y=w.canTransform),"onRenderMenu"in w&&t(15,E=w.onRenderMenu)},n.$$.update=()=>{n.$$.dirty&32766&&t(16,i=r?[{space:!0}]:[{icon:YG,title:"Format JSON: add proper indentation and new lines (Ctrl+I)",className:"jse-format",onClick:o,disabled:r||!g},{icon:JG,title:"Compact JSON: remove all white spacing and new lines (Ctrl+Shift+I)",className:"jse-compact",onClick:l,disabled:r||!_},{separator:!0},{icon:tb,title:"Sort",className:"jse-sort",onClick:a,disabled:r||!v},{icon:xv,title:"Transform contents (filter, sort, project)",className:"jse-transform",onClick:c,disabled:r||!y},{icon:nb,title:"Search (Ctrl+F)",className:"jse-search",onClick:u},{separator:!0},{icon:fR,title:"Undo (Ctrl+Z)",className:"jse-undo",onClick:f,disabled:!d},{icon:uR,title:"Redo (Ctrl+Shift+Z)",className:"jse-redo",onClick:h,disabled:!m},{space:!0}]),n.$$.dirty&98304&&t(0,s=E("text",i)||i)},[s,r,o,l,a,c,u,f,h,d,m,g,_,v,y,E,i]}class lK extends rt{constructor(e){super(),ot(this,e,oK,rK,fn,{readOnly:1,onFormat:2,onCompact:3,onSort:4,onTransform:5,onToggleSearch:6,onUndo:7,onRedo:8,canUndo:9,canRedo:10,canFormat:11,canCompact:12,canSort:13,canTransform:14,onRenderMenu:15})}}const aK=lK;class Tn{constructor(){}lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,i){let s=[];return this.decompose(0,e,s,2),i.length&&i.decompose(0,i.length,s,3),this.decompose(t,this.length,s,1),Mr.from(s,this.length-(t-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){let i=[];return this.decompose(e,t,i,0),Mr.from(i,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),s=new ru(this),r=new ru(e);for(let o=t,l=t;;){if(s.next(o),r.next(o),o=0,s.lineBreak!=r.lineBreak||s.done!=r.done||s.value!=r.value)return!1;if(l+=s.value.length,s.done||l>=i)return!0}}iter(e=1){return new ru(this,e)}iterRange(e,t=this.length){return new vR(this,e,t)}iterLines(e,t){let i;if(e==null)i=this.iter();else{t==null&&(t=this.lines+1);let s=this.line(e).from;i=this.iterRange(s,Math.max(s,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new bR(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Tn.empty:e.length<=32?new ui(e):Mr.from(ui.split(e,[]))}}class ui extends Tn{constructor(e,t=cK(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,s){for(let r=0;;r++){let o=this.text[r],l=s+o.length;if((t?i:l)>=e)return new uK(s,l,i,o);s=l+1,i++}}decompose(e,t,i,s){let r=e<=0&&t>=this.length?this:new ui(AE(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(s&1){let o=i.pop(),l=Ah(r.text,o.text.slice(),0,r.length);if(l.length<=32)i.push(new ui(l,o.length+r.length));else{let a=l.length>>1;i.push(new ui(l.slice(0,a)),new ui(l.slice(a)))}}else i.push(r)}replace(e,t,i){if(!(i instanceof ui))return super.replace(e,t,i);let s=Ah(this.text,Ah(i.text,AE(this.text,0,e)),t),r=this.length+i.length-(t-e);return s.length<=32?new ui(s,r):Mr.from(ui.split(s,[]),r)}sliceString(e,t=this.length,i=`
`){let s="";for(let r=0,o=0;r<=t&&o<this.text.length;o++){let l=this.text[o],a=r+l.length;r>e&&o&&(s+=i),e<a&&t>r&&(s+=l.slice(Math.max(0,e-r),t-r)),r=a+1}return s}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let i=[],s=-1;for(let r of e)i.push(r),s+=r.length+1,i.length==32&&(t.push(new ui(i,s)),i=[],s=-1);return s>-1&&t.push(new ui(i,s)),t}}class Mr extends Tn{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,t,i,s){for(let r=0;;r++){let o=this.children[r],l=s+o.length,a=i+o.lines-1;if((t?a:l)>=e)return o.lineInner(e,t,i,s);s=l+1,i=a+1}}decompose(e,t,i,s){for(let r=0,o=0;o<=t&&r<this.children.length;r++){let l=this.children[r],a=o+l.length;if(e<=a&&t>=o){let c=s&((o<=e?1:0)|(a>=t?2:0));o>=e&&a<=t&&!c?i.push(l):l.decompose(e-o,t-o,i,c)}o=a+1}}replace(e,t,i){if(i.lines<this.lines)for(let s=0,r=0;s<this.children.length;s++){let o=this.children[s],l=r+o.length;if(e>=r&&t<=l){let a=o.replace(e-r,t-r,i),c=this.lines-o.lines+a.lines;if(a.lines<c>>5-1&&a.lines>c>>5+1){let u=this.children.slice();return u[s]=a,new Mr(u,this.length-(t-e)+i.length)}return super.replace(r,l,a)}r=l+1}return super.replace(e,t,i)}sliceString(e,t=this.length,i=`
`){let s="";for(let r=0,o=0;r<this.children.length&&o<=t;r++){let l=this.children[r],a=o+l.length;o>e&&r&&(s+=i),e<a&&t>o&&(s+=l.sliceString(e-o,t-o,i)),o=a+1}return s}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof Mr))return 0;let i=0,[s,r,o,l]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;s+=t,r+=t){if(s==o||r==l)return i;let a=this.children[s],c=e.children[r];if(a!=c)return i+a.scanIdentical(c,t);i+=a.length+1}}static from(e,t=e.reduce((i,s)=>i+s.length+1,-1)){let i=0;for(let d of e)i+=d.lines;if(i<32){let d=[];for(let m of e)m.flatten(d);return new ui(d,t)}let s=Math.max(32,i>>5),r=s<<1,o=s>>1,l=[],a=0,c=-1,u=[];function f(d){let m;if(d.lines>r&&d instanceof Mr)for(let g of d.children)f(g);else d.lines>o&&(a>o||!a)?(h(),l.push(d)):d instanceof ui&&a&&(m=u[u.length-1])instanceof ui&&d.lines+m.lines<=32?(a+=d.lines,c+=d.length+1,u[u.length-1]=new ui(m.text.concat(d.text),m.length+1+d.length)):(a+d.lines>s&&h(),a+=d.lines,c+=d.length+1,u.push(d))}function h(){a!=0&&(l.push(u.length==1?u[0]:Mr.from(u,c)),c=-1,a=u.length=0)}for(let d of e)f(d);return h(),l.length==1?l[0]:new Mr(l,t)}}Tn.empty=new ui([""],0);function cK(n){let e=-1;for(let t of n)e+=t.length+1;return e}function Ah(n,e,t=0,i=1e9){for(let s=0,r=0,o=!0;r<n.length&&s<=i;r++){let l=n[r],a=s+l.length;a>=t&&(a>i&&(l=l.slice(0,i-s)),s<t&&(l=l.slice(t-s)),o?(e[e.length-1]+=l,o=!1):e.push(l)),s=a+1}return e}function AE(n,e,t){return Ah(n,[""],e,t)}class ru{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof ui?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,s=this.nodes[i],r=this.offsets[i],o=r>>1,l=s instanceof ui?s.text.length:s.children.length;if(o==(t>0?l:0)){if(i==0)return this.done=!0,this.value="",this;t>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((r&1)==(t>0?0:1)){if(this.offsets[i]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(s instanceof ui){let a=s.text[o+(t<0?-1:0)];if(this.offsets[i]+=t,a.length>Math.max(0,e))return this.value=e==0?a:t>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=s.children[o+(t<0?-1:0)];e>a.length?(e-=a.length,this.offsets[i]+=t):(t<0&&this.offsets[i]--,this.nodes.push(a),this.offsets.push(t>0?1:(a instanceof ui?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class vR{constructor(e,t,i){this.value="",this.done=!1,this.cursor=new ru(e,t>i?-1:1),this.pos=t>i?e.length:0,this.from=Math.min(t,i),this.to=Math.max(t,i)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let i=t<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:s}=this.cursor.next(e);return this.pos+=(s.length+e)*t,this.value=s.length<=i?s:t<0?s.slice(s.length-i):s.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class bR{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:i,value:s}=this.inner.next(e);return t?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=s,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Tn.prototype[Symbol.iterator]=function(){return this.iter()},ru.prototype[Symbol.iterator]=vR.prototype[Symbol.iterator]=bR.prototype[Symbol.iterator]=function(){return this});class uK{constructor(e,t,i,s){this.from=e,this.to=t,this.number=i,this.text=s}get length(){return this.to-this.from}}let Oa="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(n=>n?parseInt(n,36):1);for(let n=1;n<Oa.length;n++)Oa[n]+=Oa[n-1];function fK(n){for(let e=1;e<Oa.length;e+=2)if(Oa[e]>n)return Oa[e-1]<=n;return!1}function wE(n){return n>=127462&&n<=127487}const CE=8205;function As(n,e,t=!0,i=!0){return(t?_R:hK)(n,e,i)}function _R(n,e,t){if(e==n.length)return e;e&&yR(n.charCodeAt(e))&&SR(n.charCodeAt(e-1))&&e--;let i=Xi(n,e);for(e+=$s(i);e<n.length;){let s=Xi(n,e);if(i==CE||s==CE||t&&fK(s))e+=$s(s),i=s;else if(wE(s)){let r=0,o=e-2;for(;o>=0&&wE(Xi(n,o));)r++,o-=2;if(r%2==0)break;e+=2}else break}return e}function hK(n,e,t){for(;e>0;){let i=_R(n,e-2,t);if(i<e)return i;e--}return 0}function yR(n){return n>=56320&&n<57344}function SR(n){return n>=55296&&n<56320}function Xi(n,e){let t=n.charCodeAt(e);if(!SR(t)||e+1==n.length)return t;let i=n.charCodeAt(e+1);return yR(i)?(t-55296<<10)+(i-56320)+65536:t}function sb(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode((n>>10)+55296,(n&1023)+56320))}function $s(n){return n<65536?1:2}const T1=/\r\n?|\n/;var Ss=function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n}(Ss||(Ss={}));class qr{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,s=0;t<this.sections.length;){let r=this.sections[t++],o=this.sections[t++];o<0?(e(i,s,r),s+=r):s+=o,i+=r}}iterChangedRanges(e,t=!1){O1(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],s=this.sections[t++];s<0?e.push(i,s):e.push(s,i)}return new qr(e)}composeDesc(e){return this.empty?e:e.empty?this:ER(this,e)}mapDesc(e,t=!1){return e.empty?this:R1(this,e,t)}mapPos(e,t=-1,i=Ss.Simple){let s=0,r=0;for(let o=0;o<this.sections.length;){let l=this.sections[o++],a=this.sections[o++],c=s+l;if(a<0){if(c>e)return r+(e-s);r+=l}else{if(i!=Ss.Simple&&c>=e&&(i==Ss.TrackDel&&s<e&&c>e||i==Ss.TrackBefore&&s<e||i==Ss.TrackAfter&&c>e))return null;if(c>e||c==e&&t<0&&!l)return e==s||t<0?r:r+a;r+=a}s=c}if(e>s)throw new RangeError(`Position ${e} is out of range for changeset of length ${s}`);return r}touchesRange(e,t=e){for(let i=0,s=0;i<this.sections.length&&s<=t;){let r=this.sections[i++],o=this.sections[i++],l=s+r;if(o>=0&&s<=t&&l>=e)return s<e&&l>t?"cover":!0;s=l}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],s=this.sections[t++];e+=(e?" ":"")+i+(s>=0?":"+s:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new qr(e)}static create(e){return new qr(e)}}class Oi extends qr{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return O1(this,(t,i,s,r,o)=>e=e.replace(s,s+(i-t),o),!1),e}mapDesc(e,t=!1){return R1(this,e,t,!0)}invert(e){let t=this.sections.slice(),i=[];for(let s=0,r=0;s<t.length;s+=2){let o=t[s],l=t[s+1];if(l>=0){t[s]=l,t[s+1]=o;let a=s>>1;for(;i.length<a;)i.push(Tn.empty);i.push(o?e.slice(r,r+o):Tn.empty)}r+=o}return new Oi(t,i)}compose(e){return this.empty?e:e.empty?this:ER(this,e,!0)}map(e,t=!1){return e.empty?this:R1(this,e,t,!0)}iterChanges(e,t=!1){O1(this,e,t)}get desc(){return qr.create(this.sections)}filter(e){let t=[],i=[],s=[],r=new Bu(this);e:for(let o=0,l=0;;){let a=o==e.length?1e9:e[o++];for(;l<a||l==a&&r.len==0;){if(r.done)break e;let u=Math.min(r.len,a-l);ts(s,u,-1);let f=r.ins==-1?-1:r.off==0?r.ins:0;ts(t,u,f),f>0&&Po(i,t,r.text),r.forward(u),l+=u}let c=e[o++];for(;l<c;){if(r.done)break e;let u=Math.min(r.len,c-l);ts(t,u,-1),ts(s,u,r.ins==-1?-1:r.off==0?r.ins:0),r.forward(u),l+=u}}return{changes:new Oi(t,i),filtered:qr.create(s)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],s=this.sections[t+1];s<0?e.push(i):s==0?e.push([i]):e.push([i].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,i){let s=[],r=[],o=0,l=null;function a(u=!1){if(!u&&!s.length)return;o<t&&ts(s,t-o,-1);let f=new Oi(s,r);l=l?l.compose(f.map(l)):f,s=[],r=[],o=0}function c(u){if(Array.isArray(u))for(let f of u)c(f);else if(u instanceof Oi){if(u.length!=t)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${t})`);a(),l=l?l.compose(u.map(l)):u}else{let{from:f,to:h=f,insert:d}=u;if(f>h||f<0||h>t)throw new RangeError(`Invalid change range ${f} to ${h} (in doc of length ${t})`);let m=d?typeof d=="string"?Tn.of(d.split(i||T1)):d:Tn.empty,g=m.length;if(f==h&&g==0)return;f<o&&a(),f>o&&ts(s,f-o,-1),ts(s,h-f,g),Po(r,s,m),o=h}}return c(e),a(!l),l}static empty(e){return new Oi(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],i=[];for(let s=0;s<e.length;s++){let r=e[s];if(typeof r=="number")t.push(r,-1);else{if(!Array.isArray(r)||typeof r[0]!="number"||r.some((o,l)=>l&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(r.length==1)t.push(r[0],0);else{for(;i.length<s;)i.push(Tn.empty);i[s]=Tn.of(r.slice(1)),t.push(r[0],i[s].length)}}}return new Oi(t,i)}static createSet(e,t){return new Oi(e,t)}}function ts(n,e,t,i=!1){if(e==0&&t<=0)return;let s=n.length-2;s>=0&&t<=0&&t==n[s+1]?n[s]+=e:e==0&&n[s]==0?n[s+1]+=t:i?(n[s]+=e,n[s+1]+=t):n.push(e,t)}function Po(n,e,t){if(t.length==0)return;let i=e.length-2>>1;if(i<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<i;)n.push(Tn.empty);n.push(t)}}function O1(n,e,t){let i=n.inserted;for(let s=0,r=0,o=0;o<n.sections.length;){let l=n.sections[o++],a=n.sections[o++];if(a<0)s+=l,r+=l;else{let c=s,u=r,f=Tn.empty;for(;c+=l,u+=a,a&&i&&(f=f.append(i[o-2>>1])),!(t||o==n.sections.length||n.sections[o+1]<0);)l=n.sections[o++],a=n.sections[o++];e(s,c,r,u,f),s=c,r=u}}}function R1(n,e,t,i=!1){let s=[],r=i?[]:null,o=new Bu(n),l=new Bu(e);for(let a=-1;;)if(o.ins==-1&&l.ins==-1){let c=Math.min(o.len,l.len);ts(s,c,-1),o.forward(c),l.forward(c)}else if(l.ins>=0&&(o.ins<0||a==o.i||o.off==0&&(l.len<o.len||l.len==o.len&&!t))){let c=l.len;for(ts(s,l.ins,-1);c;){let u=Math.min(o.len,c);o.ins>=0&&a<o.i&&o.len<=u&&(ts(s,0,o.ins),r&&Po(r,s,o.text),a=o.i),o.forward(u),c-=u}l.next()}else if(o.ins>=0){let c=0,u=o.len;for(;u;)if(l.ins==-1){let f=Math.min(u,l.len);c+=f,u-=f,l.forward(f)}else if(l.ins==0&&l.len<u)u-=l.len,l.next();else break;ts(s,c,a<o.i?o.ins:0),r&&a<o.i&&Po(r,s,o.text),a=o.i,o.forward(o.len-u)}else{if(o.done&&l.done)return r?Oi.createSet(s,r):qr.create(s);throw new Error("Mismatched change set lengths")}}function ER(n,e,t=!1){let i=[],s=t?[]:null,r=new Bu(n),o=new Bu(e);for(let l=!1;;){if(r.done&&o.done)return s?Oi.createSet(i,s):qr.create(i);if(r.ins==0)ts(i,r.len,0,l),r.next();else if(o.len==0&&!o.done)ts(i,0,o.ins,l),s&&Po(s,i,o.text),o.next();else{if(r.done||o.done)throw new Error("Mismatched change set lengths");{let a=Math.min(r.len2,o.len),c=i.length;if(r.ins==-1){let u=o.ins==-1?-1:o.off?0:o.ins;ts(i,a,u,l),s&&u&&Po(s,i,o.text)}else o.ins==-1?(ts(i,r.off?0:r.len,a,l),s&&Po(s,i,r.textBit(a))):(ts(i,r.off?0:r.len,o.off?0:o.ins,l),s&&!o.off&&Po(s,i,o.text));l=(r.ins>a||o.ins>=0&&o.len>a)&&(l||i.length>c),r.forward2(a),o.forward(a)}}}}class Bu{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?Tn.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?Tn.empty:t[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Al{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let e=this.flags&3;return e==3?null:e}get goalColumn(){let e=this.flags>>5;return e==33554431?void 0:e}map(e,t=-1){let i,s;return this.empty?i=s=e.mapPos(this.from,t):(i=e.mapPos(this.from,1),s=e.mapPos(this.to,-1)),i==this.from&&s==this.to?this:new Al(i,s,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return Je.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return Je.range(this.anchor,i)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return Je.range(e.anchor,e.head)}static create(e,t,i){return new Al(e,t,i)}}class Je{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:Je.create(this.ranges.map(i=>i.map(e,t)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let t=0;t<this.ranges.length;t++)if(!this.ranges[t].eq(e.ranges[t]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new Je([this.main],0)}addRange(e,t=!0){return Je.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let i=this.ranges.slice();return i[t]=e,Je.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new Je(e.ranges.map(t=>Al.fromJSON(t)),e.main)}static single(e,t=e){return new Je([Je.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,s=0;s<e.length;s++){let r=e[s];if(r.empty?r.from<=i:r.from<i)return Je.normalized(e.slice(),t);i=r.to}return new Je(e,t)}static cursor(e,t=0,i,s){return Al.create(e,e,(t==0?0:t<0?4:8)|(i==null?3:Math.min(2,i))|(s??33554431)<<5)}static range(e,t,i,s){let r=(i??33554431)<<5|(s==null?3:Math.min(2,s));return t<e?Al.create(t,e,24|r):Al.create(e,t,(t>e?4:0)|r)}static normalized(e,t=0){let i=e[t];e.sort((s,r)=>s.from-r.from),t=e.indexOf(i);for(let s=1;s<e.length;s++){let r=e[s],o=e[s-1];if(r.empty?r.from<=o.to:r.from<o.to){let l=o.from,a=Math.max(r.to,o.to);s<=t&&t--,e.splice(--s,2,r.anchor>r.head?Je.range(a,l):Je.range(l,a))}}return new Je(e,t)}}function AR(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let rb=0;class Tt{constructor(e,t,i,s,r){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=s,this.id=rb++,this.default=e([]),this.extensions=typeof r=="function"?r(this):r}static define(e={}){return new Tt(e.combine||(t=>t),e.compareInput||((t,i)=>t===i),e.compare||(e.combine?(t,i)=>t===i:ob),!!e.static,e.enables)}of(e){return new wh([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new wh(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new wh(e,this,2,t)}from(e,t){return t||(t=i=>i),this.compute([e],i=>t(i.field(e)))}}function ob(n,e){return n==e||n.length==e.length&&n.every((t,i)=>t===e[i])}class wh{constructor(e,t,i,s){this.dependencies=e,this.facet=t,this.type=i,this.value=s,this.id=rb++}dynamicSlot(e){var t;let i=this.value,s=this.facet.compareInput,r=this.id,o=e[r]>>1,l=this.type==2,a=!1,c=!1,u=[];for(let f of this.dependencies)f=="doc"?a=!0:f=="selection"?c=!0:((t=e[f.id])!==null&&t!==void 0?t:1)&1||u.push(e[f.id]);return{create(f){return f.values[o]=i(f),1},update(f,h){if(a&&h.docChanged||c&&(h.docChanged||h.selection)||D1(f,u)){let d=i(f);if(l?!kE(d,f.values[o],s):!s(d,f.values[o]))return f.values[o]=d,1}return 0},reconfigure:(f,h)=>{let d,m=h.config.address[r];if(m!=null){let g=md(h,m);if(this.dependencies.every(_=>_ instanceof Tt?h.facet(_)===f.facet(_):_ instanceof Wi?h.field(_,!1)==f.field(_,!1):!0)||(l?kE(d=i(f),g,s):s(d=i(f),g)))return f.values[o]=g,0}else d=i(f);return f.values[o]=d,1}}}}function kE(n,e,t){if(n.length!=e.length)return!1;for(let i=0;i<n.length;i++)if(!t(n[i],e[i]))return!1;return!0}function D1(n,e){let t=!1;for(let i of e)ou(n,i)&1&&(t=!0);return t}function dK(n,e,t){let i=t.map(a=>n[a.id]),s=t.map(a=>a.type),r=i.filter(a=>!(a&1)),o=n[e.id]>>1;function l(a){let c=[];for(let u=0;u<i.length;u++){let f=md(a,i[u]);if(s[u]==2)for(let h of f)c.push(h);else c.push(f)}return e.combine(c)}return{create(a){for(let c of i)ou(a,c);return a.values[o]=l(a),1},update(a,c){if(!D1(a,r))return 0;let u=l(a);return e.compare(u,a.values[o])?0:(a.values[o]=u,1)},reconfigure(a,c){let u=D1(a,i),f=c.config.facets[e.id],h=c.facet(e);if(f&&!u&&ob(t,f))return a.values[o]=h,0;let d=l(a);return e.compare(d,h)?(a.values[o]=h,0):(a.values[o]=d,1)}}}const IE=Tt.define({static:!0});class Wi{constructor(e,t,i,s,r){this.id=e,this.createF=t,this.updateF=i,this.compareF=s,this.spec=r,this.provides=void 0}static define(e){let t=new Wi(rb++,e.create,e.update,e.compare||((i,s)=>i===s),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(IE).find(i=>i.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:i=>(i.values[t]=this.create(i),1),update:(i,s)=>{let r=i.values[t],o=this.updateF(r,s);return this.compareF(r,o)?0:(i.values[t]=o,1)},reconfigure:(i,s)=>s.config.address[this.id]!=null?(i.values[t]=s.field(this),0):(i.values[t]=this.create(i),1)}}init(e){return[this,IE.of({field:this,create:e})]}get extension(){return this}}const gl={lowest:4,low:3,default:2,high:1,highest:0};function Dc(n){return e=>new wR(e,n)}const Ec={highest:Dc(gl.highest),high:Dc(gl.high),default:Dc(gl.default),low:Dc(gl.low),lowest:Dc(gl.lowest)};class wR{constructor(e,t){this.inner=e,this.prec=t}}class to{of(e){return new N1(this,e)}reconfigure(e){return to.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class N1{constructor(e,t){this.compartment=e,this.inner=t}}class dd{constructor(e,t,i,s,r,o){for(this.base=e,this.compartments=t,this.dynamicSlots=i,this.address=s,this.staticValues=r,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,i){let s=[],r=Object.create(null),o=new Map;for(let h of mK(e,t,o))h instanceof Wi?s.push(h):(r[h.facet.id]||(r[h.facet.id]=[])).push(h);let l=Object.create(null),a=[],c=[];for(let h of s)l[h.id]=c.length<<1,c.push(d=>h.slot(d));let u=i==null?void 0:i.config.facets;for(let h in r){let d=r[h],m=d[0].facet,g=u&&u[h]||[];if(d.every(_=>_.type==0))if(l[m.id]=a.length<<1|1,ob(g,d))a.push(i.facet(m));else{let _=m.combine(d.map(v=>v.value));a.push(i&&m.compare(_,i.facet(m))?i.facet(m):_)}else{for(let _ of d)_.type==0?(l[_.id]=a.length<<1|1,a.push(_.value)):(l[_.id]=c.length<<1,c.push(v=>_.dynamicSlot(v)));l[m.id]=c.length<<1,c.push(_=>dK(_,m,d))}}let f=c.map(h=>h(l));return new dd(e,o,f,l,a,r)}}function mK(n,e,t){let i=[[],[],[],[],[]],s=new Map;function r(o,l){let a=s.get(o);if(a!=null){if(a<=l)return;let c=i[a].indexOf(o);c>-1&&i[a].splice(c,1),o instanceof N1&&t.delete(o.compartment)}if(s.set(o,l),Array.isArray(o))for(let c of o)r(c,l);else if(o instanceof N1){if(t.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=e.get(o.compartment)||o.inner;t.set(o.compartment,c),r(c,l)}else if(o instanceof wR)r(o.inner,o.prec);else if(o instanceof Wi)i[l].push(o),o.provides&&r(o.provides,l);else if(o instanceof wh)i[l].push(o),o.facet.extensions&&r(o.facet.extensions,gl.default);else{let c=o.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);r(c,l)}}return r(n,gl.default),i.reduce((o,l)=>o.concat(l))}function ou(n,e){if(e&1)return 2;let t=e>>1,i=n.status[t];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;n.status[t]=4;let s=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|s}function md(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const CR=Tt.define(),kR=Tt.define({combine:n=>n.some(e=>e),static:!0}),IR=Tt.define({combine:n=>n.length?n[0]:void 0,static:!0}),TR=Tt.define(),OR=Tt.define(),RR=Tt.define(),DR=Tt.define({combine:n=>n.length?n[0]:!1});class Eo{constructor(e,t){this.type=e,this.value=t}static define(){return new pK}}class pK{of(e){return new Eo(this,e)}}class gK{constructor(e){this.map=e}of(e){return new nn(this,e)}}class nn{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new nn(this.type,t)}is(e){return this.type==e}static define(e={}){return new gK(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let i=[];for(let s of e){let r=s.map(t);r&&i.push(r)}return i}}nn.reconfigure=nn.define();nn.appendConfig=nn.define();class Di{constructor(e,t,i,s,r,o){this.startState=e,this.changes=t,this.selection=i,this.effects=s,this.annotations=r,this.scrollIntoView=o,this._doc=null,this._state=null,i&&AR(i,t.newLength),r.some(l=>l.type==Di.time)||(this.annotations=r.concat(Di.time.of(Date.now())))}static create(e,t,i,s,r,o){return new Di(e,t,i,s,r,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Di.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}Di.time=Eo.define();Di.userEvent=Eo.define();Di.addToHistory=Eo.define();Di.remote=Eo.define();function vK(n,e){let t=[];for(let i=0,s=0;;){let r,o;if(i<n.length&&(s==e.length||e[s]>=n[i]))r=n[i++],o=n[i++];else if(s<e.length)r=e[s++],o=e[s++];else return t;!t.length||t[t.length-1]<r?t.push(r,o):t[t.length-1]<o&&(t[t.length-1]=o)}}function NR(n,e,t){var i;let s,r,o;return t?(s=e.changes,r=Oi.empty(e.changes.length),o=n.changes.compose(e.changes)):(s=e.changes.map(n.changes),r=n.changes.mapDesc(e.changes,!0),o=n.changes.compose(s)),{changes:o,selection:e.selection?e.selection.map(r):(i=n.selection)===null||i===void 0?void 0:i.map(s),effects:nn.mapEffects(n.effects,s).concat(nn.mapEffects(e.effects,r)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function P1(n,e,t){let i=e.selection,s=Ra(e.annotations);return e.userEvent&&(s=s.concat(Di.userEvent.of(e.userEvent))),{changes:e.changes instanceof Oi?e.changes:Oi.of(e.changes||[],t,n.facet(IR)),selection:i&&(i instanceof Je?i:Je.single(i.anchor,i.head)),effects:Ra(e.effects),annotations:s,scrollIntoView:!!e.scrollIntoView}}function PR(n,e,t){let i=P1(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let r=1;r<e.length;r++){e[r].filter===!1&&(t=!1);let o=!!e[r].sequential;i=NR(i,P1(n,e[r],o?i.changes.newLength:n.doc.length),o)}let s=Di.create(n,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return _K(t?bK(s):s)}function bK(n){let e=n.startState,t=!0;for(let s of e.facet(TR)){let r=s(n);if(r===!1){t=!1;break}Array.isArray(r)&&(t=t===!0?r:vK(t,r))}if(t!==!0){let s,r;if(t===!1)r=n.changes.invertedDesc,s=Oi.empty(e.doc.length);else{let o=n.changes.filter(t);s=o.changes,r=o.filtered.mapDesc(o.changes).invertedDesc}n=Di.create(e,s,n.selection&&n.selection.map(r),nn.mapEffects(n.effects,r),n.annotations,n.scrollIntoView)}let i=e.facet(OR);for(let s=i.length-1;s>=0;s--){let r=i[s](n);r instanceof Di?n=r:Array.isArray(r)&&r.length==1&&r[0]instanceof Di?n=r[0]:n=PR(e,Ra(r),!1)}return n}function _K(n){let e=n.startState,t=e.facet(RR),i=n;for(let s=t.length-1;s>=0;s--){let r=t[s](n);r&&Object.keys(r).length&&(i=NR(i,P1(e,r,n.changes.newLength),!0))}return i==n?n:Di.create(e,n.changes,n.selection,i.effects,i.annotations,i.scrollIntoView)}const yK=[];function Ra(n){return n==null?yK:Array.isArray(n)?n:[n]}var ni=function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n}(ni||(ni={}));const SK=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let M1;try{M1=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function EK(n){if(M1)return M1.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||SK.test(t)))return!0}return!1}function AK(n){return e=>{if(!/\S/.test(e))return ni.Space;if(EK(e))return ni.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return ni.Word;return ni.Other}}class un{constructor(e,t,i,s,r,o){this.config=e,this.doc=t,this.selection=i,this.values=s,this.status=e.statusTemplate.slice(),this.computeSlot=r,o&&(o._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)ou(this,l<<1);this.computeSlot=null}field(e,t=!0){let i=this.config.address[e.id];if(i==null){if(t)throw new RangeError("Field is not present in this state");return}return ou(this,i),md(this,i)}update(...e){return PR(this,e,!0)}applyTransaction(e){let t=this.config,{base:i,compartments:s}=t;for(let o of e.effects)o.is(to.reconfigure)?(t&&(s=new Map,t.compartments.forEach((l,a)=>s.set(a,l)),t=null),s.set(o.value.compartment,o.value.extension)):o.is(nn.reconfigure)?(t=null,i=o.value):o.is(nn.appendConfig)&&(t=null,i=Ra(i).concat(o.value));let r;t?r=e.startState.values.slice():(t=dd.resolve(i,s,this),r=new un(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(l,a)=>a.reconfigure(l,this),null).values),new un(t,e.newDoc,e.newSelection,r,(o,l)=>l.update(o,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:Je.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,i=e(t.ranges[0]),s=this.changes(i.changes),r=[i.range],o=Ra(i.effects);for(let l=1;l<t.ranges.length;l++){let a=e(t.ranges[l]),c=this.changes(a.changes),u=c.map(s);for(let h=0;h<l;h++)r[h]=r[h].map(u);let f=s.mapDesc(c,!0);r.push(a.range.map(f)),s=s.compose(u),o=nn.mapEffects(o,u).concat(nn.mapEffects(Ra(a.effects),f))}return{changes:s,selection:Je.create(r,t.mainIndex),effects:o}}changes(e=[]){return e instanceof Oi?e:Oi.of(e,this.doc.length,this.facet(un.lineSeparator))}toText(e){return Tn.of(e.split(this.facet(un.lineSeparator)||T1))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(ou(this,t),md(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let s=e[i];s instanceof Wi&&this.config.address[s.id]!=null&&(t[i]=s.spec.toJSON(this.field(e[i]),this))}return t}static fromJSON(e,t={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let s=[];if(i){for(let r in i)if(Object.prototype.hasOwnProperty.call(e,r)){let o=i[r],l=e[r];s.push(o.init(a=>o.spec.fromJSON(l,a)))}}return un.create({doc:e.doc,selection:Je.fromJSON(e.selection),extensions:t.extensions?s.concat([t.extensions]):s})}static create(e={}){let t=dd.resolve(e.extensions||[],new Map),i=e.doc instanceof Tn?e.doc:Tn.of((e.doc||"").split(t.staticFacet(un.lineSeparator)||T1)),s=e.selection?e.selection instanceof Je?e.selection:Je.single(e.selection.anchor,e.selection.head):Je.single(0);return AR(s,i.length),t.staticFacet(kR)||(s=s.asSingle()),new un(t,i,s,t.dynamicSlots.map(()=>null),(r,o)=>o.create(r),null)}get tabSize(){return this.facet(un.tabSize)}get lineBreak(){return this.facet(un.lineSeparator)||`
`}get readOnly(){return this.facet(DR)}phrase(e,...t){for(let i of this.facet(un.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(i,s)=>{if(s=="$")return"$";let r=+(s||1);return!r||r>t.length?i:t[r-1]})),e}languageDataAt(e,t,i=-1){let s=[];for(let r of this.facet(CR))for(let o of r(this,t,i))Object.prototype.hasOwnProperty.call(o,e)&&s.push(o[e]);return s}charCategorizer(e){return AK(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:i,length:s}=this.doc.lineAt(e),r=this.charCategorizer(e),o=e-i,l=e-i;for(;o>0;){let a=As(t,o,!1);if(r(t.slice(a,o))!=ni.Word)break;o=a}for(;l<s;){let a=As(t,l);if(r(t.slice(l,a))!=ni.Word)break;l=a}return o==l?null:Je.range(o+i,l+i)}}un.allowMultipleSelections=kR;un.tabSize=Tt.define({combine:n=>n.length?n[0]:4});un.lineSeparator=IR;un.readOnly=DR;un.phrases=Tt.define({compare(n,e){let t=Object.keys(n),i=Object.keys(e);return t.length==i.length&&t.every(s=>n[s]==e[s])}});un.languageData=CR;un.changeFilter=TR;un.transactionFilter=OR;un.transactionExtender=RR;to.reconfigure=nn.define();function Ar(n,e,t={}){let i={};for(let s of n)for(let r of Object.keys(s)){let o=s[r],l=i[r];if(l===void 0)i[r]=o;else if(!(l===o||o===void 0))if(Object.hasOwnProperty.call(t,r))i[r]=t[r](l,o);else throw new Error("Config merge conflict for field "+r)}for(let s in e)i[s]===void 0&&(i[s]=e[s]);return i}class Kl{eq(e){return this==e}range(e,t=e){return B1.create(e,t,this)}}Kl.prototype.startSide=Kl.prototype.endSide=0;Kl.prototype.point=!1;Kl.prototype.mapMode=Ss.TrackDel;let B1=class MR{constructor(e,t,i){this.from=e,this.to=t,this.value=i}static create(e,t,i){return new MR(e,t,i)}};function L1(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class lb{constructor(e,t,i,s){this.from=e,this.to=t,this.value=i,this.maxPoint=s}get length(){return this.to[this.to.length-1]}findIndex(e,t,i,s=0){let r=i?this.to:this.from;for(let o=s,l=r.length;;){if(o==l)return o;let a=o+l>>1,c=r[a]-e||(i?this.value[a].endSide:this.value[a].startSide)-t;if(a==o)return c>=0?o:l;c>=0?l=a:o=a+1}}between(e,t,i,s){for(let r=this.findIndex(t,-1e9,!0),o=this.findIndex(i,1e9,!1,r);r<o;r++)if(s(this.from[r]+e,this.to[r]+e,this.value[r])===!1)return!1}map(e,t){let i=[],s=[],r=[],o=-1,l=-1;for(let a=0;a<this.value.length;a++){let c=this.value[a],u=this.from[a]+e,f=this.to[a]+e,h,d;if(u==f){let m=t.mapPos(u,c.startSide,c.mapMode);if(m==null||(h=d=m,c.startSide!=c.endSide&&(d=t.mapPos(u,c.endSide),d<h)))continue}else if(h=t.mapPos(u,c.startSide),d=t.mapPos(f,c.endSide),h>d||h==d&&c.startSide>0&&c.endSide<=0)continue;(d-h||c.endSide-c.startSide)<0||(o<0&&(o=h),c.point&&(l=Math.max(l,d-h)),i.push(c),s.push(h-o),r.push(d-o))}return{mapped:i.length?new lb(s,r,i,l):null,pos:o}}}class On{constructor(e,t,i,s){this.chunkPos=e,this.chunk=t,this.nextLayer=i,this.maxPoint=s}static create(e,t,i,s){return new On(e,t,i,s)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:i=!1,filterFrom:s=0,filterTo:r=this.length}=e,o=e.filter;if(t.length==0&&!o)return this;if(i&&(t=t.slice().sort(L1)),this.isEmpty)return t.length?On.of(t):this;let l=new BR(this,null,-1).goto(0),a=0,c=[],u=new xo;for(;l.value||a<t.length;)if(a<t.length&&(l.from-t[a].from||l.startSide-t[a].value.startSide)>=0){let f=t[a++];u.addInner(f.from,f.to,f.value)||c.push(f)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(a==t.length||this.chunkEnd(l.chunkIndex)<t[a].from)&&(!o||s>this.chunkEnd(l.chunkIndex)||r<this.chunkPos[l.chunkIndex])&&u.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!o||s>l.to||r<l.from||o(l.from,l.to,l.value))&&(u.addInner(l.from,l.to,l.value)||c.push(B1.create(l.from,l.to,l.value))),l.next());return u.finishInner(this.nextLayer.isEmpty&&!c.length?On.empty:this.nextLayer.update({add:c,filter:o,filterFrom:s,filterTo:r}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],i=[],s=-1;for(let o=0;o<this.chunk.length;o++){let l=this.chunkPos[o],a=this.chunk[o],c=e.touchesRange(l,l+a.length);if(c===!1)s=Math.max(s,a.maxPoint),t.push(a),i.push(e.mapPos(l));else if(c===!0){let{mapped:u,pos:f}=a.map(l,e);u&&(s=Math.max(s,u.maxPoint),t.push(u),i.push(f))}}let r=this.nextLayer.map(e);return t.length==0?r:new On(i,t,r||On.empty,s)}between(e,t,i){if(!this.isEmpty){for(let s=0;s<this.chunk.length;s++){let r=this.chunkPos[s],o=this.chunk[s];if(t>=r&&e<=r+o.length&&o.between(r,e-r,t-r,i)===!1)return}this.nextLayer.between(e,t,i)}}iter(e=0){return Lu.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return Lu.from(e).goto(t)}static compare(e,t,i,s,r=-1){let o=e.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=r),l=t.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=r),a=TE(o,l,i),c=new Nc(o,a,r),u=new Nc(l,a,r);i.iterGaps((f,h,d)=>OE(c,f,u,h,d,s)),i.empty&&i.length==0&&OE(c,0,u,0,0,s)}static eq(e,t,i=0,s){s==null&&(s=1e9-1);let r=e.filter(u=>!u.isEmpty&&t.indexOf(u)<0),o=t.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(r.length!=o.length)return!1;if(!r.length)return!0;let l=TE(r,o),a=new Nc(r,l,0).goto(i),c=new Nc(o,l,0).goto(i);for(;;){if(a.to!=c.to||!W1(a.active,c.active)||a.point&&(!c.point||!a.point.eq(c.point)))return!1;if(a.to>s)return!0;a.next(),c.next()}}static spans(e,t,i,s,r=-1){let o=new Nc(e,null,r).goto(t),l=t,a=o.openStart;for(;;){let c=Math.min(o.to,i);if(o.point){let u=o.activeForPoint(o.to),f=o.pointFrom<t?u.length+1:Math.min(u.length,a);s.point(l,c,o.point,u,f,o.pointRank),a=Math.min(o.openEnd(c),u.length)}else c>l&&(s.span(l,c,o.active,a),a=o.openEnd(c));if(o.to>i)return a+(o.point&&o.to>i?1:0);l=o.to,o.next()}}static of(e,t=!1){let i=new xo;for(let s of e instanceof B1?[e]:t?wK(e):e)i.add(s.from,s.to,s.value);return i.finish()}}On.empty=new On([],[],null,-1);function wK(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let i=n[t];if(L1(e,i)>0)return n.slice().sort(L1);e=i}return n}On.empty.nextLayer=On.empty;class xo{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(e){this.chunks.push(new lb(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new xo)).add(e,t,i)}addInner(e,t,i){let s=e-this.lastTo||i.startSide-this.last.endSide;if(s<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return s<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(On.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=On.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function TE(n,e,t){let i=new Map;for(let r of n)for(let o=0;o<r.chunk.length;o++)r.chunk[o].maxPoint<=0&&i.set(r.chunk[o],r.chunkPos[o]);let s=new Set;for(let r of e)for(let o=0;o<r.chunk.length;o++){let l=i.get(r.chunk[o]);l!=null&&(t?t.mapPos(l):l)==r.chunkPos[o]&&!(t!=null&&t.touchesRange(l,l+r.chunk[o].length))&&s.add(r.chunk[o])}return s}class BR{constructor(e,t,i,s=0){this.layer=e,this.skip=t,this.minPoint=i,this.rank=s}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let s=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(s)||this.layer.chunkEnd(this.chunkIndex)<e||s.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let s=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!i||this.rangeIndex<s)&&this.setRangeIndex(s)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],i=e+t.from[this.rangeIndex];if(this.from=i,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Lu{constructor(e){this.heap=e}static from(e,t=null,i=-1){let s=[];for(let r=0;r<e.length;r++)for(let o=e[r];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&s.push(new BR(o,t,i,r));return s.length==1?s[0]:new Lu(s)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let i of this.heap)i.goto(e,t);for(let i=this.heap.length>>1;i>=0;i--)Pp(this.heap,i);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let i=this.heap.length>>1;i>=0;i--)Pp(this.heap,i);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Pp(this.heap,0)}}}function Pp(n,e){for(let t=n[e];;){let i=(e<<1)+1;if(i>=n.length)break;let s=n[i];if(i+1<n.length&&s.compare(n[i+1])>=0&&(s=n[i+1],i++),t.compare(s)<0)break;n[i]=t,n[e]=s,e=i}}class Nc{constructor(e,t,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Lu.from(e,t,i)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){qf(this.active,e),qf(this.activeTo,e),qf(this.activeRank,e),this.minActive=RE(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:s,rank:r}=this.cursor;for(;t<this.activeRank.length&&this.activeRank[t]<=r;)t++;zf(this.active,t,i),zf(this.activeTo,t,s),zf(this.activeRank,t,r),e&&zf(e,t,this.cursor.from),this.minActive=RE(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let s=this.minActive;if(s>-1&&(this.activeTo[s]-this.cursor.from||this.active[s].endSide-this.cursor.startSide)<0){if(this.activeTo[s]>e){this.to=this.activeTo[s],this.endSide=this.active[s].endSide;break}this.removeActive(s),i&&qf(i,s)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let r=this.cursor.value;if(!r.point)this.addActive(i),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=r,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=r.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let s=i.length-1;s>=0&&i[s]<e;s--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&t.push(this.active[i]);return t.reverse()}openEnd(e){let t=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)t++;return t}}function OE(n,e,t,i,s,r){n.goto(e),t.goto(i);let o=i+s,l=i,a=i-e;for(;;){let c=n.to+a-t.to||n.endSide-t.endSide,u=c<0?n.to+a:t.to,f=Math.min(u,o);if(n.point||t.point?n.point&&t.point&&(n.point==t.point||n.point.eq(t.point))&&W1(n.activeForPoint(n.to+a),t.activeForPoint(t.to))||r.comparePoint(l,f,n.point,t.point):f>l&&!W1(n.active,t.active)&&r.compareRange(l,f,n.active,t.active),u>o)break;l=u,c<=0&&n.next(),c>=0&&t.next()}}function W1(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!n[t].eq(e[t]))return!1;return!0}function qf(n,e){for(let t=e,i=n.length-1;t<i;t++)n[t]=n[t+1];n.pop()}function zf(n,e,t){for(let i=n.length-1;i>=e;i--)n[i+1]=n[i];n[e]=t}function RE(n,e){let t=-1,i=1e9;for(let s=0;s<e.length;s++)(e[s]-i||n[s].endSide-n[t].endSide)<0&&(t=s,i=e[s]);return t}function yf(n,e,t=n.length){let i=0;for(let s=0;s<t;)n.charCodeAt(s)==9?(i+=e-i%e,s++):(i++,s=As(n,s));return i}function U1(n,e,t,i){for(let s=0,r=0;;){if(r>=e)return s;if(s==n.length)break;r+=n.charCodeAt(s)==9?t-r%t:1,s=As(n,s)}return i===!0?-1:n.length}const V1="",DE=typeof Symbol>"u"?"__"+V1:Symbol.for(V1),F1=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),NE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class $o{constructor(e,t){this.rules=[];let{finish:i}=t||{};function s(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function r(o,l,a,c){let u=[],f=/^@(\w+)\b/.exec(o[0]),h=f&&f[1]=="keyframes";if(f&&l==null)return a.push(o[0]+";");for(let d in l){let m=l[d];if(/&/.test(d))r(d.split(/,\s*/).map(g=>o.map(_=>g.replace(/&/,_))).reduce((g,_)=>g.concat(_)),m,a);else if(m&&typeof m=="object"){if(!f)throw new RangeError("The value of a property ("+d+") should be a primitive value.");r(s(d),m,u,h)}else m!=null&&u.push(d.replace(/_.*/,"").replace(/[A-Z]/g,g=>"-"+g.toLowerCase())+": "+m+";")}(u.length||h)&&a.push((i&&!f&&!c?o.map(i):o).join(", ")+" {"+u.join(" ")+"}")}for(let o in e)r(s(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=NE[DE]||1;return NE[DE]=e+1,V1+e.toString(36)}static mount(e,t){(e[F1]||new CK(e)).mount(Array.isArray(t)?t:[t])}}let Gf=null;class CK{constructor(e){if(!e.head&&e.adoptedStyleSheets&&typeof CSSStyleSheet<"u"){if(Gf)return e.adoptedStyleSheets=[Gf.sheet].concat(e.adoptedStyleSheets),e[F1]=Gf;this.sheet=new CSSStyleSheet,e.adoptedStyleSheets=[this.sheet].concat(e.adoptedStyleSheets),Gf=this}else{this.styleTag=(e.ownerDocument||e).createElement("style");let t=e.head||e;t.insertBefore(this.styleTag,t.firstChild)}this.modules=[],e[F1]=this}mount(e){let t=this.sheet,i=0,s=0;for(let r=0;r<e.length;r++){let o=e[r],l=this.modules.indexOf(o);if(l<s&&l>-1&&(this.modules.splice(l,1),s--,l=-1),l==-1){if(this.modules.splice(s++,0,o),t)for(let a=0;a<o.rules.length;a++)t.insertRule(o.rules[a],i++)}else{for(;s<l;)i+=this.modules[s++].rules.length;i+=o.rules.length,s++}}if(!t){let r="";for(let o=0;o<this.modules.length;o++)r+=this.modules[o].getRules()+`
`;this.styleTag.textContent=r}}}var el={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Wu={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},PE=typeof navigator<"u"&&/Chrome\/(\d+)/.exec(navigator.userAgent),kK=typeof navigator<"u"&&/Mac/.test(navigator.platform),IK=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),TK=kK||PE&&+PE[1]<57;for(var Qi=0;Qi<10;Qi++)el[48+Qi]=el[96+Qi]=String(Qi);for(var Qi=1;Qi<=24;Qi++)el[Qi+111]="F"+Qi;for(var Qi=65;Qi<=90;Qi++)el[Qi]=String.fromCharCode(Qi+32),Wu[Qi]=String.fromCharCode(Qi);for(var Mp in el)Wu.hasOwnProperty(Mp)||(Wu[Mp]=el[Mp]);function OK(n){var e=TK&&(n.ctrlKey||n.altKey||n.metaKey)||IK&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Wu:el)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function pd(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function xa(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function RK(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Ch(n,e){if(!e.anchorNode)return!1;try{return xa(n,e.anchorNode)}catch{return!1}}function Uu(n){return n.nodeType==3?$a(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function gd(n,e,t,i){return t?ME(n,e,t,i,-1)||ME(n,e,t,i,1):!1}function vd(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function ME(n,e,t,i,s){for(;;){if(n==t&&e==i)return!0;if(e==(s<0?0:Vu(n))){if(n.nodeName=="DIV")return!1;let r=n.parentNode;if(!r||r.nodeType!=1)return!1;e=vd(n)+(s<0?0:1),n=r}else if(n.nodeType==1){if(n=n.childNodes[e+(s<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=s<0?Vu(n):0}else return!1}}function Vu(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}const LR={left:0,right:0,top:0,bottom:0};function ab(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function DK(n){return{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function NK(n,e,t,i,s,r,o,l){let a=n.ownerDocument,c=a.defaultView||window;for(let u=n;u;)if(u.nodeType==1){let f,h=u==a.body;if(h)f=DK(c);else{if(u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let g=u.getBoundingClientRect();f={left:g.left,right:g.left+u.clientWidth,top:g.top,bottom:g.top+u.clientHeight}}let d=0,m=0;if(s=="nearest")e.top<f.top?(m=-(f.top-e.top+o),t>0&&e.bottom>f.bottom+m&&(m=e.bottom-f.bottom+m+o)):e.bottom>f.bottom&&(m=e.bottom-f.bottom+o,t<0&&e.top-m<f.top&&(m=-(f.top+m-e.top+o)));else{let g=e.bottom-e.top,_=f.bottom-f.top;m=(s=="center"&&g<=_?e.top+g/2-_/2:s=="start"||s=="center"&&t<0?e.top-o:e.bottom-_+o)-f.top}if(i=="nearest"?e.left<f.left?(d=-(f.left-e.left+r),t>0&&e.right>f.right+d&&(d=e.right-f.right+d+r)):e.right>f.right&&(d=e.right-f.right+r,t<0&&e.left<f.left+d&&(d=-(f.left+d-e.left+r))):d=(i=="center"?e.left+(e.right-e.left)/2-(f.right-f.left)/2:i=="start"==l?e.left-r:e.right-(f.right-f.left)+r)-f.left,d||m)if(h)c.scrollBy(d,m);else{let g=0,_=0;if(m){let v=u.scrollTop;u.scrollTop+=m,_=u.scrollTop-v}if(d){let v=u.scrollLeft;u.scrollLeft+=d,g=u.scrollLeft-v}e={left:e.left-g,top:e.top-_,right:e.right-g,bottom:e.bottom-_},g&&Math.abs(g-d)<1&&(i="nearest"),_&&Math.abs(_-m)<1&&(s="nearest")}if(h)break;u=u.assignedSlot||u.parentNode}else if(u.nodeType==11)u=u.host;else break}function PK(n){let e=n.ownerDocument;for(let t=n.parentNode;t&&t!=e.body;)if(t.nodeType==1){if(t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth)return t;t=t.assignedSlot||t.parentNode}else if(t.nodeType==11)t=t.host;else break;return null}class MK{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){this.set(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)}set(e,t,i,s){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=s}}let fa=null;function WR(n){if(n.setActive)return n.setActive();if(fa)return n.focus(fa);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(fa==null?{get preventScroll(){return fa={preventScroll:!0},!0}}:void 0),!fa){fa=!1;for(let t=0;t<e.length;){let i=e[t++],s=e[t++],r=e[t++];i.scrollTop!=s&&(i.scrollTop=s),i.scrollLeft!=r&&(i.scrollLeft=r)}}}let BE;function $a(n,e,t=e){let i=BE||(BE=document.createRange());return i.setEnd(n,t),i.setStart(n,e),i}function Da(n,e,t){let i={key:e,code:e,keyCode:t,which:t,cancelable:!0},s=new KeyboardEvent("keydown",i);s.synthetic=!0,n.dispatchEvent(s);let r=new KeyboardEvent("keyup",i);return r.synthetic=!0,n.dispatchEvent(r),s.defaultPrevented||r.defaultPrevented}function BK(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function UR(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}function LK(n,e){let t=e.focusNode,i=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=i)return!1;for(;;)if(i){if(t.nodeType!=1)return!1;let s=t.childNodes[i-1];s.contentEditable=="false"?i--:(t=s,i=Vu(t))}else{if(t==n)return!0;i=vd(t),t=t.parentNode}}class rs{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new rs(e.parentNode,vd(e),t)}static after(e,t){return new rs(e.parentNode,vd(e)+1,t)}}const cb=[];class ei{constructor(){this.parent=null,this.dom=null,this.dirty=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let i of this.children){if(i==e)return t;t+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}coordsAt(e,t){return null}sync(e,t){if(this.dirty&2){let i=this.dom,s=null,r;for(let o of this.children){if(o.dirty){if(!o.dom&&(r=s?s.nextSibling:i.firstChild)){let l=ei.get(r);(!l||!l.parent&&l.canReuseDOM(o))&&o.reuseDOM(r)}o.sync(e,t),o.dirty=0}if(r=s?s.nextSibling:i.firstChild,t&&!t.written&&t.node==i&&r!=o.dom&&(t.written=!0),o.dom.parentNode==i)for(;r&&r!=o.dom;)r=LE(r);else i.insertBefore(o.dom,r);s=o.dom}for(r=s?s.nextSibling:i.firstChild,r&&t&&t.node==i&&(t.written=!0);r;)r=LE(r)}else if(this.dirty&1)for(let i of this.children)i.dirty&&(i.sync(e,t),i.dirty=0)}reuseDOM(e){}localPosFromDOM(e,t){let i;if(e==this.dom)i=this.dom.childNodes[t];else{let s=Vu(e)==0?0:t==0?-1:1;for(;;){let r=e.parentNode;if(r==this.dom)break;s==0&&r.firstChild!=r.lastChild&&(e==r.firstChild?s=-1:s=1),e=r}s<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!ei.get(i);)i=i.nextSibling;if(!i)return this.length;for(let s=0,r=0;;s++){let o=this.children[s];if(o.dom==i)return r;r+=o.length+o.breakAfter}}domBoundsAround(e,t,i=0){let s=-1,r=-1,o=-1,l=-1;for(let a=0,c=i,u=i;a<this.children.length;a++){let f=this.children[a],h=c+f.length;if(c<e&&h>t)return f.domBoundsAround(e,t,c);if(h>=e&&s==-1&&(s=a,r=c),c>t&&f.dom.parentNode==this.dom){o=a,l=u;break}u=h,c=h+f.breakAfter}return{from:r,to:l<0?i+this.length:l,startDOM:(s?this.children[s-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.dirty|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.dirty|=2),t.dirty&1)return;t.dirty|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.dirty&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,i=cb){this.markDirty();for(let s=e;s<t;s++){let r=this.children[s];r.parent==this&&r.destroy()}this.children.splice(e,t-e,...i);for(let s=0;s<i.length;s++)i[s].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new VR(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}merge(e,t,i,s,r,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor}getSide(){return 0}destroy(){this.parent=null}}ei.prototype.breakAfter=0;function LE(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class VR{constructor(e,t,i){this.children=e,this.pos=t,this.i=i,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function FR(n,e,t,i,s,r,o,l,a){let{children:c}=n,u=c.length?c[e]:null,f=r.length?r[r.length-1]:null,h=f?f.breakAfter:o;if(!(e==i&&u&&!o&&!h&&r.length<2&&u.merge(t,s,r.length?f:null,t==0,l,a))){if(i<c.length){let d=c[i];d&&s<d.length?(e==i&&(d=d.split(s),s=0),!h&&f&&d.merge(0,s,f,!0,0,a)?r[r.length-1]=d:(s&&d.merge(0,s,null,!1,0,a),r.push(d))):d!=null&&d.breakAfter&&(f?f.breakAfter=1:o=1),i++}for(u&&(u.breakAfter=o,t>0&&(!o&&r.length&&u.merge(t,u.length,r[0],!1,l,0)?u.breakAfter=r.shift().breakAfter:(t<u.length||u.children.length&&u.children[u.children.length-1].length==0)&&u.merge(t,u.length,null,!1,l,0),e++));e<i&&r.length;)if(c[i-1].become(r[r.length-1]))i--,r.pop(),a=r.length?0:l;else if(c[e].become(r[0]))e++,r.shift(),l=r.length?0:a;else break;!r.length&&e&&i<c.length&&!c[e-1].breakAfter&&c[i].merge(0,0,c[e-1],!1,l,a)&&e--,(e<i||r.length)&&n.replaceChildren(e,i,r)}}function jR(n,e,t,i,s,r){let o=n.childCursor(),{i:l,off:a}=o.findPos(t,1),{i:c,off:u}=o.findPos(e,-1),f=e-t;for(let h of i)f+=h.length;n.length+=f,FR(n,c,u,l,a,i,0,s,r)}let Fs=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},j1=typeof document<"u"?document:{documentElement:{style:{}}};const H1=/Edge\/(\d+)/.exec(Fs.userAgent),HR=/MSIE \d/.test(Fs.userAgent),q1=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Fs.userAgent),Hm=!!(HR||q1||H1),WE=!Hm&&/gecko\/(\d+)/i.test(Fs.userAgent),Bp=!Hm&&/Chrome\/(\d+)/.exec(Fs.userAgent),UE="webkitFontSmoothing"in j1.documentElement.style,qR=!Hm&&/Apple Computer/.test(Fs.vendor),VE=qR&&(/Mobile\/\w+/.test(Fs.userAgent)||Fs.maxTouchPoints>2);var Rt={mac:VE||/Mac/.test(Fs.platform),windows:/Win/.test(Fs.platform),linux:/Linux|X11/.test(Fs.platform),ie:Hm,ie_version:HR?j1.documentMode||6:q1?+q1[1]:H1?+H1[1]:0,gecko:WE,gecko_version:WE?+(/Firefox\/(\d+)/.exec(Fs.userAgent)||[0,0])[1]:0,chrome:!!Bp,chrome_version:Bp?+Bp[1]:0,ios:VE,android:/Android\b/.test(Fs.userAgent),webkit:UE,safari:qR,webkit_version:UE?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:j1.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const WK=256;class tl extends ei{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,i){return i&&(!(i instanceof tl)||this.length-(t-e)+i.length>WK)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new tl(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new rs(this.dom,e)}domBoundsAround(e,t,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return z1(this.dom,e,t)}}class Kr extends ei{constructor(e,t=[],i=0){super(),this.mark=e,this.children=t,this.length=i;for(let s of t)s.setParent(this)}setAttrs(e){if(UR(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.dirty|=6)}sync(e,t){this.dom?this.dirty&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,i,s,r,o){return i&&(!(i instanceof Kr&&i.mark.eq(this.mark))||e&&r<=0||t<this.length&&o<=0)?!1:(jR(this,e,t,i?i.children:[],r-1,o-1),this.markDirty(),!0)}split(e){let t=[],i=0,s=-1,r=0;for(let l of this.children){let a=i+l.length;a>e&&t.push(i<e?l.split(e-i):l),s<0&&i>=e&&(s=r),i=a,r++}let o=this.length-e;return this.length=e,s>-1&&(this.children.length=s,this.markDirty()),new Kr(this.mark,t,o)}domAtPos(e){return KR(this,e)}coordsAt(e,t){return QR(this,e,t)}}function z1(n,e,t){let i=n.nodeValue.length;e>i&&(e=i);let s=e,r=e,o=0;e==0&&t<0||e==i&&t>=0?Rt.chrome||Rt.gecko||(e?(s--,o=1):r<i&&(r++,o=-1)):t<0?s--:r<i&&r++;let l=$a(n,s,r).getClientRects();if(!l.length)return LR;let a=l[(o?o<0:t>=0)?0:l.length-1];return Rt.safari&&!o&&a.width==0&&(a=Array.prototype.find.call(l,c=>c.width)||a),o?ab(a,o<0):a||null}class Mo extends ei{constructor(e,t,i){super(),this.widget=e,this.length=t,this.side=i,this.prevWidget=null}static create(e,t,i){return new(e.customView||Mo)(e,t,i)}split(e){let t=Mo.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,t,i,s,r,o){return i&&(!(i instanceof Mo)||!this.widget.compare(i.widget)||e>0&&r<=0||t<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}become(e){return e.length==this.length&&e instanceof Mo&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.eq(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Tn.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,i=t&&t.state.doc,s=this.posAtStart;return i?i.slice(s,s+this.length):Tn.empty}domAtPos(e){return e==0?rs.before(this.dom):rs.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let i=this.dom.getClientRects(),s=null;if(!i.length)return LR;for(let r=e>0?i.length-1:0;s=i[r],!(e>0?r==0:r==i.length-1||s.top<s.bottom);r+=e>0?-1:1);return this.length?s:ab(s,this.side>0)}get isEditable(){return!1}get isWidget(){return!0}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class zR extends Mo{domAtPos(e){let{topView:t,text:i}=this.widget;return t?G1(e,0,t,i,(s,r)=>s.domAtPos(r),s=>new rs(i,Math.min(s,i.nodeValue.length))):new rs(i,Math.min(e,i.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(e,t){let{topView:i,text:s}=this.widget;return i?GR(e,t,i,s):Math.min(t,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(e,t){let{topView:i,text:s}=this.widget;return i?G1(e,t,i,s,(r,o,l)=>r.coordsAt(o,l),(r,o)=>z1(s,r,o)):z1(s,e,t)}destroy(){var e;super.destroy(),(e=this.widget.topView)===null||e===void 0||e.destroy()}get isEditable(){return!0}canReuseDOM(){return!0}}function G1(n,e,t,i,s,r){if(t instanceof Kr){for(let o=t.dom.firstChild;o;o=o.nextSibling){let l=ei.get(o);if(!l)return r(n,e);let a=xa(o,i),c=l.length+(a?i.nodeValue.length:0);if(n<c||n==c&&l.getSide()<=0)return a?G1(n,e,l,i,s,r):s(l,n,e);n-=c}return s(t,t.length,-1)}else return t.dom==i?r(n,e):s(t,n,e)}function GR(n,e,t,i){if(t instanceof Kr)for(let s of t.children){let r=0,o=xa(s.dom,i);if(xa(s.dom,n))return r+(o?GR(n,e,s,i):s.localPosFromDOM(n,e));r+=o?i.nodeValue.length:s.length}else if(t.dom==i)return Math.min(e,i.nodeValue.length);return t.localPosFromDOM(n,e)}class ec extends ei{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof ec&&e.side==this.side}split(){return new ec(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return rs.before(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){let t=this.dom.getBoundingClientRect(),i=UK(this,this.side>0?-1:1);return i&&i.top<t.bottom&&i.bottom>t.top?{left:t.left,right:t.right,top:i.top,bottom:i.bottom}:t}get overrideDOMText(){return Tn.empty}}tl.prototype.children=Mo.prototype.children=ec.prototype.children=cb;function UK(n,e){let t=n.parent,i=t?t.children.indexOf(n):-1;for(;t&&i>=0;)if(e<0?i>0:i<t.children.length){let s=t.children[i+e];if(s instanceof tl){let r=s.coordsAt(e<0?s.length:0,e);if(r)return r}i+=e}else if(t instanceof Kr&&t.parent)i=t.parent.children.indexOf(t)+(e<0?0:1),t=t.parent;else{let s=t.dom.lastChild;if(s&&s.nodeName=="BR")return s.getClientRects()[0];break}}function KR(n,e){let t=n.dom,{children:i}=n,s=0;for(let r=0;s<i.length;s++){let o=i[s],l=r+o.length;if(!(l==r&&o.getSide()<=0)){if(e>r&&e<l&&o.dom.parentNode==t)return o.domAtPos(e-r);if(e<=r)break;r=l}}for(let r=s;r>0;r--){let o=i[r-1];if(o.dom.parentNode==t)return o.domAtPos(o.length)}for(let r=s;r<i.length;r++){let o=i[r];if(o.dom.parentNode==t)return o.domAtPos(0)}return new rs(t,0)}function XR(n,e,t){let i,{children:s}=n;t>0&&e instanceof Kr&&s.length&&(i=s[s.length-1])instanceof Kr&&i.mark.eq(e.mark)?XR(i,e.children[0],t-1):(s.push(e),e.setParent(n)),n.length+=e.length}function QR(n,e,t){let i=null,s=-1,r=null,o=-1;function l(c,u){for(let f=0,h=0;f<c.children.length&&h<=u;f++){let d=c.children[f],m=h+d.length;m>=u&&(d.children.length?l(d,u-h):!r&&(m>u||h==m&&d.getSide()>0)?(r=d,o=u-h):(h<u||h==m&&d.getSide()<0)&&(i=d,s=u-h)),h=m}}l(n,e);let a=(t<0?i:r)||i||r;return a?a.coordsAt(Math.max(0,a==i?s:o),t):VK(n)}function VK(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=Uu(e);return t[t.length-1]||null}function K1(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}function ub(n,e){if(n==e)return!0;if(!n||!e)return!1;let t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let s of t)if(i.indexOf(s)==-1||n[s]!==e[s])return!1;return!0}function X1(n,e,t){let i=null;if(e)for(let s in e)t&&s in t||n.removeAttribute(i=s);if(t)for(let s in t)e&&e[s]==t[s]||n.setAttribute(i=s,t[s]);return!!i}class rl{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}ignoreEvent(e){return!0}get customView(){return null}destroy(e){}}var jn=function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n}(jn||(jn={}));class Ut extends Kl{constructor(e,t,i,s){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=s}get heightRelevant(){return!1}static mark(e){return new qm(e)}static widget(e){let t=e.side||0,i=!!e.block;return t+=i?t>0?3e8:-4e8:t>0?1e8:-1e8,new Xl(e,t,t,i,e.widget||null,!1)}static replace(e){let t=!!e.block,i,s;if(e.isBlockGap)i=-5e8,s=4e8;else{let{start:r,end:o}=YR(e,t);i=(r?t?-3e8:-1:5e8)-1,s=(o?t?2e8:1:-6e8)+1}return new Xl(e,i,s,t,e.widget||null,!0)}static line(e){return new Sf(e)}static set(e,t=!1){return On.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Ut.none=On.empty;class qm extends Ut{constructor(e){let{start:t,end:i}=YR(e);super(t?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){return this==e||e instanceof qm&&this.tagName==e.tagName&&this.class==e.class&&ub(this.attrs,e.attrs)}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}qm.prototype.point=!1;class Sf extends Ut{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Sf&&this.spec.class==e.spec.class&&ub(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}Sf.prototype.mapMode=Ss.TrackBefore;Sf.prototype.point=!0;class Xl extends Ut{constructor(e,t,i,s,r,o){super(t,i,r,e),this.block=s,this.isReplace=o,this.mapMode=s?t<=0?Ss.TrackBefore:Ss.TrackAfter:Ss.TrackDel}get type(){return this.startSide<this.endSide?jn.WidgetRange:this.startSide<=0?jn.WidgetBefore:jn.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(e){return e instanceof Xl&&FK(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}Xl.prototype.point=!0;function YR(n,e=!1){let{inclusiveStart:t,inclusiveEnd:i}=n;return t==null&&(t=n.inclusive),i==null&&(i=n.inclusive),{start:t??e,end:i??e}}function FK(n,e){return n==e||!!(n&&e&&n.compare(e))}function Q1(n,e,t,i=0){let s=t.length-1;s>=0&&t[s]+i>=n?t[s]=Math.max(t[s],e):t.push(n,e)}class ws extends ei{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,i,s,r,o){if(i){if(!(i instanceof ws))return!1;this.dom||i.transferDOM(this)}return s&&this.setDeco(i?i.attrs:null),jR(this,e,t,i?i.children:[],r,o),!0}split(e){let t=new ws;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i,off:s}=this.childPos(e);s&&(t.append(this.children[i].split(s),0),this.children[i].merge(s,this.children[i].length,null,!1,0,0),i++);for(let r=i;r<this.children.length;r++)t.append(this.children[r],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){ub(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){XR(this,e,t)}addLineDeco(e){let t=e.spec.attributes,i=e.spec.class;t&&(this.attrs=K1(t,this.attrs||{})),i&&(this.attrs=K1({class:i},this.attrs||{}))}domAtPos(e){return KR(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.dirty|=6)}sync(e,t){var i;this.dom?this.dirty&4&&(UR(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(X1(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let s=this.dom.lastChild;for(;s&&ei.get(s)instanceof Kr;)s=s.lastChild;if(!s||!this.length||s.nodeName!="BR"&&((i=ei.get(s))===null||i===void 0?void 0:i.isEditable)==!1&&(!Rt.ios||!this.children.some(r=>r instanceof tl))){let r=document.createElement("BR");r.cmIgnore=!0,this.dom.appendChild(r)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0;for(let t of this.children){if(!(t instanceof tl)||/[^ -~]/.test(t.text))return null;let i=Uu(t.dom);if(i.length!=1)return null;e+=i[0].width}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length}:null}coordsAt(e,t){return QR(this,e,t)}become(e){return!1}get type(){return jn.Text}static find(e,t){for(let i=0,s=0;i<e.children.length;i++){let r=e.children[i],o=s+r.length;if(o>=t){if(r instanceof ws)return r;if(o>t)break}s=o+r.breakAfter}return null}}class Dl extends ei{constructor(e,t,i){super(),this.widget=e,this.length=t,this.type=i,this.breakAfter=0,this.prevWidget=null}merge(e,t,i,s,r,o){return i&&(!(i instanceof Dl)||!this.widget.compare(i.widget)||e>0&&r<=0||t<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?rs.before(this.dom):rs.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let i=new Dl(this.widget,t,this.type);return i.breakAfter=this.breakAfter,i}get children(){return cb}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Tn.empty}domBoundsAround(){return null}become(e){return e instanceof Dl&&e.type==this.type&&e.widget.constructor==this.widget.constructor?(e.widget.eq(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class fb{constructor(e,t,i,s){this.doc=e,this.pos=t,this.end=i,this.disallowBlockEffectsFor=s,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!e.breakAfter&&!(e instanceof Dl&&e.type==jn.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new ws),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Kf(new ec(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||this.getLine()}buildText(e,t,i){for(;e>0;){if(this.textOff==this.text.length){let{value:r,lineBreak:o,done:l}=this.cursor.next(this.skip);if(this.skip=0,l)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=r,this.textOff=0}let s=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-i)),this.getLine().append(Kf(new tl(this.text.slice(this.textOff,this.textOff+s)),t),i),this.atCursorPos=!0,this.textOff+=s,e-=s,i=0}}span(e,t,i,s){this.buildText(t-e,i,s),this.pos=t,this.openStart<0&&(this.openStart=s)}point(e,t,i,s,r,o){if(this.disallowBlockEffectsFor[o]&&i instanceof Xl){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=t-e;if(i instanceof Xl)if(i.block){let{type:a}=i;a==jn.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Dl(i.widget||new FE("div"),l,a))}else{let a=Mo.create(i.widget||new FE("span"),l,l?0:i.startSide),c=this.atCursorPos&&!a.isEditable&&r<=s.length&&(e<t||i.startSide>0),u=!a.isEditable&&(e<t||r>s.length||i.startSide<=0),f=this.getLine();this.pendingBuffer==2&&!c&&(this.pendingBuffer=0),this.flushBuffer(s),c&&(f.append(Kf(new ec(1),s),r),r=s.length+Math.max(0,r-s.length)),f.append(Kf(a,s),r),this.atCursorPos=u,this.pendingBuffer=u?e<t||r>s.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=s.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=r)}static build(e,t,i,s,r){let o=new fb(e,t,i,r);return o.openEnd=On.spans(s,t,i,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function Kf(n,e){for(let t of e)n=new Kr(t,[n],n.length);return n}class FE extends rl{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}}const JR=Tt.define(),ZR=Tt.define(),xR=Tt.define(),$R=Tt.define(),Y1=Tt.define(),e5=Tt.define(),t5=Tt.define(),n5=Tt.define({combine:n=>n.some(e=>e)}),i5=Tt.define({combine:n=>n.some(e=>e)});class bd{constructor(e,t="nearest",i="nearest",s=5,r=5){this.range=e,this.y=t,this.x=i,this.yMargin=s,this.xMargin=r}map(e){return e.empty?this:new bd(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const jE=nn.define({map:(n,e)=>n.map(e)});function qs(n,e,t){let i=n.facet($R);i.length?i[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const zm=Tt.define({combine:n=>n.length?n[0]:!0});let jK=0;const zc=Tt.define();class ki{constructor(e,t,i,s){this.id=e,this.create=t,this.domEventHandlers=i,this.extension=s(this)}static define(e,t){const{eventHandlers:i,provide:s,decorations:r}=t||{};return new ki(jK++,e,i,o=>{let l=[zc.of(o)];return r&&l.push(Fu.of(a=>{let c=a.plugin(o);return c?r(c):Ut.none})),s&&l.push(s(o)),l})}static fromClass(e,t){return ki.define(i=>new e(i),t)}}class Lp{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(i){if(qs(t.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){qs(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(i){qs(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const s5=Tt.define(),hb=Tt.define(),Fu=Tt.define(),r5=Tt.define(),o5=Tt.define(),Gc=Tt.define();class zr{constructor(e,t,i,s){this.fromA=e,this.toA=t,this.fromB=i,this.toB=s}join(e){return new zr(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let s=e[t-1];if(!(s.fromA>i.toA)){if(s.toA<i.fromA)break;i=i.join(s),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(t.length==0)return e;let i=[];for(let s=0,r=0,o=0,l=0;;s++){let a=s==e.length?null:e[s],c=o-l,u=a?a.fromB:1e9;for(;r<t.length&&t[r]<u;){let f=t[r],h=t[r+1],d=Math.max(l,f),m=Math.min(u,h);if(d<=m&&new zr(d+c,m+c,d,m).addToSet(i),h>u)break;r+=2}if(!a)return i;new zr(a.fromA,a.toA,a.fromB,a.toB).addToSet(i),o=a.toA,l=a.toB}}}class _d{constructor(e,t,i){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=Oi.empty(this.startState.doc.length);for(let r of i)this.changes=this.changes.compose(r.changes);let s=[];this.changes.iterChangedRanges((r,o,l,a)=>s.push(new zr(r,o,l,a))),this.changedRanges=s}static create(e,t,i){return new _d(e,t,i)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var ri=function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n}(ri||(ri={}));const J1=ri.LTR,HK=ri.RTL;function l5(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const qK=l5("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),zK=l5("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Z1=Object.create(null),Ir=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);Z1[e]=t,Z1[t]=-e}function GK(n){return n<=247?qK[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?zK[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8203?256:64336<=n&&n<=65023?4:n==8204?256:1}const KK=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Na{constructor(e,t,i){this.from=e,this.to=t,this.level=i}get dir(){return this.level%2?HK:J1}side(e,t){return this.dir==t==e?this.to:this.from}static find(e,t,i,s){let r=-1;for(let o=0;o<e.length;o++){let l=e[o];if(l.from<=t&&l.to>=t){if(l.level==i)return o;(r<0||(s!=0?s<0?l.from<t:l.to>t:e[r].level>l.level))&&(r=o)}}if(r<0)throw new RangeError("Index out of range");return r}}const ii=[];function XK(n,e){let t=n.length,i=e==J1?1:2,s=e==J1?2:1;if(!n||i==1&&!KK.test(n))return a5(t);for(let o=0,l=i,a=i;o<t;o++){let c=GK(n.charCodeAt(o));c==512?c=l:c==8&&a==4&&(c=16),ii[o]=c==4?2:c,c&7&&(a=c),l=c}for(let o=0,l=i,a=i;o<t;o++){let c=ii[o];if(c==128)o<t-1&&l==ii[o+1]&&l&24?c=ii[o]=l:ii[o]=256;else if(c==64){let u=o+1;for(;u<t&&ii[u]==64;)u++;let f=o&&l==8||u<t&&ii[u]==8?a==1?1:8:256;for(let h=o;h<u;h++)ii[h]=f;o=u-1}else c==8&&a==1&&(ii[o]=1);l=c,c&7&&(a=c)}for(let o=0,l=0,a=0,c,u,f;o<t;o++)if(u=Z1[c=n.charCodeAt(o)])if(u<0){for(let h=l-3;h>=0;h-=3)if(Ir[h+1]==-u){let d=Ir[h+2],m=d&2?i:d&4?d&1?s:i:0;m&&(ii[o]=ii[Ir[h]]=m),l=h;break}}else{if(Ir.length==189)break;Ir[l++]=o,Ir[l++]=c,Ir[l++]=a}else if((f=ii[o])==2||f==1){let h=f==i;a=h?0:1;for(let d=l-3;d>=0;d-=3){let m=Ir[d+2];if(m&2)break;if(h)Ir[d+2]|=2;else{if(m&4)break;Ir[d+2]|=4}}}for(let o=0;o<t;o++)if(ii[o]==256){let l=o+1;for(;l<t&&ii[l]==256;)l++;let a=(o?ii[o-1]:i)==1,c=(l<t?ii[l]:i)==1,u=a==c?a?1:2:i;for(let f=o;f<l;f++)ii[f]=u;o=l-1}let r=[];if(i==1)for(let o=0;o<t;){let l=o,a=ii[o++]!=1;for(;o<t&&a==(ii[o]!=1);)o++;if(a)for(let c=o;c>l;){let u=c,f=ii[--c]!=2;for(;c>l&&f==(ii[c-1]!=2);)c--;r.push(new Na(c,u,f?2:1))}else r.push(new Na(l,o,0))}else for(let o=0;o<t;){let l=o,a=ii[o++]==2;for(;o<t&&a==(ii[o]==2);)o++;r.push(new Na(l,o,a?1:2))}return r}function a5(n){return[new Na(0,n,0)]}let c5="";function QK(n,e,t,i,s){var r;let o=i.head-n.from,l=-1;if(o==0){if(!s||!n.length)return null;e[0].level!=t&&(o=e[0].side(!1,t),l=0)}else if(o==n.length){if(s)return null;let h=e[e.length-1];h.level!=t&&(o=h.side(!0,t),l=e.length-1)}l<0&&(l=Na.find(e,o,(r=i.bidiLevel)!==null&&r!==void 0?r:-1,i.assoc));let a=e[l];o==a.side(s,t)&&(a=e[l+=s?1:-1],o=a.side(!s,t));let c=s==(a.dir==t),u=As(n.text,o,c);if(c5=n.text.slice(Math.min(o,u),Math.max(o,u)),u!=a.side(s,t))return Je.cursor(u+n.from,c?-1:1,a.level);let f=l==(s?e.length-1:0)?null:e[l+(s?1:-1)];return!f&&a.level!=t?Je.cursor(s?n.to:n.from,s?-1:1,t):f&&f.level<a.level?Je.cursor(f.side(!s,t)+n.from,s?1:-1,f.level):Je.cursor(u+n.from,s?-1:1,a.level)}const Bo="";class u5{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(un.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Bo}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let s=e;;){this.findPointBefore(i,s),this.readNode(s);let r=s.nextSibling;if(r==t)break;let o=ei.get(s),l=ei.get(r);(o&&l?o.breakAfter:(o?o.breakAfter:HE(s))||HE(r)&&(s.nodeName!="BR"||s.cmIgnore))&&this.lineBreak(),s=r}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,s=this.lineSeparator?null:/\r\n?|\n/g;;){let r=-1,o=1,l;if(this.lineSeparator?(r=t.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(l=s.exec(t))&&(r=l.index,o=l[0].length),this.append(t.slice(i,r<0?t.length:r)),r<0)break;if(this.lineBreak(),o>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=o-1);i=r+o}}readNode(e){if(e.cmIgnore)return;let t=ei.get(e),i=t&&t.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let s=i.iter();!s.next().done;)s.lineBreak?this.lineBreak():this.append(s.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+Math.min(t,i.offset))}}function HE(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}class qE{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class zE extends ei{constructor(e){super(),this.view=e,this.compositionDeco=Ut.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new ws],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new zr(0,0,0,e.state.doc.length)],0)}get length(){return this.view.state.doc.length}update(e){let t=e.changedRanges;this.minWidth>0&&t.length&&(t.every(({fromA:o,toA:l})=>l<this.minWidthFrom||o>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=Ut.none:(e.transactions.length||this.dirty)&&(this.compositionDeco=JK(this.view,e.changes)),(Rt.ie||Rt.chrome)&&!this.compositionDeco.size&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let i=this.decorations,s=this.updateDeco(),r=eX(i,s,e.changes);return t=zr.extendWithRanges(t,r),this.dirty==0&&t.length==0?!1:(this.updateInner(t,e.startState.doc.length),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let r=Rt.chrome||Rt.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,r),this.dirty=0,r&&(r.written||i.selectionRange.focusNode!=r.node)&&(this.forceSelection=!0),this.dom.style.height=""});let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let r of this.children)r instanceof Dl&&r.widget instanceof GE&&s.push(r.dom);i.updateGaps(s)}updateChildren(e,t){let i=this.childCursor(t);for(let s=e.length-1;;s--){let r=s>=0?e[s]:null;if(!r)break;let{fromA:o,toA:l,fromB:a,toB:c}=r,{content:u,breakAtStart:f,openStart:h,openEnd:d}=fb.build(this.view.state.doc,a,c,this.decorations,this.dynamicDecorationMap),{i:m,off:g}=i.findPos(l,1),{i:_,off:v}=i.findPos(o,-1);FR(this,_,v,m,g,u,f,h,d)}}updateSelection(e=!1,t=!1){if((e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange(),!(t||this.mayControlSelection()))return;let i=this.forceSelection;this.forceSelection=!1;let s=this.view.state.selection.main,r=this.domAtPos(s.anchor),o=s.empty?r:this.domAtPos(s.head);if(Rt.gecko&&s.empty&&YK(r)){let a=document.createTextNode("");this.view.observer.ignore(()=>r.node.insertBefore(a,r.node.childNodes[r.offset]||null)),r=o=new rs(a,0),i=!0}let l=this.view.observer.selectionRange;(i||!l.focusNode||!gd(r.node,r.offset,l.anchorNode,l.anchorOffset)||!gd(o.node,o.offset,l.focusNode,l.focusOffset))&&(this.view.observer.ignore(()=>{Rt.android&&Rt.chrome&&this.dom.contains(l.focusNode)&&tX(l.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let a=pd(this.view.root);if(a)if(s.empty){if(Rt.gecko){let c=xK(r.node,r.offset);if(c&&c!=3){let u=h5(r.node,r.offset,c==1?1:-1);u&&(r=new rs(u,c==1?0:u.nodeValue.length))}}a.collapse(r.node,r.offset),s.bidiLevel!=null&&l.cursorBidiLevel!=null&&(l.cursorBidiLevel=s.bidiLevel)}else if(a.extend){a.collapse(r.node,r.offset);try{a.extend(o.node,o.offset)}catch{}}else{let c=document.createRange();s.anchor>s.head&&([r,o]=[o,r]),c.setEnd(o.node,o.offset),c.setStart(r.node,r.offset),a.removeAllRanges(),a.addRange(c)}}),this.view.observer.setSelectionRange(r,o)),this.impreciseAnchor=r.precise?null:new rs(l.anchorNode,l.anchorOffset),this.impreciseHead=o.precise?null:new rs(l.focusNode,l.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let{view:e}=this,t=e.state.selection.main,i=pd(e.root),{anchorNode:s,anchorOffset:r}=e.observer.selectionRange;if(!i||!t.empty||!t.assoc||!i.modify)return;let o=ws.find(this,t.head);if(!o)return;let l=o.posAtStart;if(t.head==l||t.head==l+o.length)return;let a=this.coordsAt(t.head,-1),c=this.coordsAt(t.head,1);if(!a||!c||a.bottom>c.top)return;let u=this.domAtPos(t.head+t.assoc);i.collapse(u.node,u.offset),i.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let f=e.observer.selectionRange;e.docView.posFromDOM(f.anchorNode,f.anchorOffset)!=t.from&&i.collapse(s,r)}mayControlSelection(){let e=this.view.root.activeElement;return e==this.dom||Ch(this.dom,this.view.observer.selectionRange)&&!(e&&this.dom.contains(e))}nearest(e){for(let t=e;t;){let i=ei.get(t);if(i&&i.rootView==this)return i;t=t.parentNode}return null}posFromDOM(e,t){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,t)+i.posAtStart}domAtPos(e){let{i:t,off:i}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let s=this.children[t];if(i<s.length||s instanceof ws)break;t++,i=0}return this.children[t].domAtPos(i)}coordsAt(e,t){for(let i=this.length,s=this.children.length-1;;s--){let r=this.children[s],o=i-r.breakAfter-r.length;if(e>o||e==o&&r.type!=jn.WidgetBefore&&r.type!=jn.WidgetAfter&&(!s||t==2||this.children[s-1].breakAfter||this.children[s-1].type==jn.WidgetBefore&&t>-2))return r.coordsAt(e-o,t);i=o}}measureVisibleLineHeights(e){let t=[],{from:i,to:s}=e,r=this.view.contentDOM.clientWidth,o=r>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,a=this.view.textDirection==ri.LTR;for(let c=0,u=0;u<this.children.length;u++){let f=this.children[u],h=c+f.length;if(h>s)break;if(c>=i){let d=f.dom.getBoundingClientRect();if(t.push(d.height),o){let m=f.dom.lastChild,g=m?Uu(m):[];if(g.length){let _=g[g.length-1],v=a?_.right-d.left:d.right-_.left;v>l&&(l=v,this.minWidth=r,this.minWidthFrom=c,this.minWidthTo=h)}}}c=h+f.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?ri.RTL:ri.LTR}measureTextSize(){for(let s of this.children)if(s instanceof ws){let r=s.measureTextSize();if(r)return r}let e=document.createElement("div"),t,i;return e.className="cm-line",e.style.width="99999px",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=Uu(e.firstChild)[0];t=e.getBoundingClientRect().height,i=s?s.width/27:7,e.remove()}),{lineHeight:t,charWidth:i}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new VR(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,s=0;;s++){let r=s==t.viewports.length?null:t.viewports[s],o=r?r.from-1:this.length;if(o>i){let l=t.lineBlockAt(o).bottom-t.lineBlockAt(i).top;e.push(Ut.replace({widget:new GE(l),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!r)break;i=r.to+1}return Ut.set(e)}updateDeco(){let e=this.view.state.facet(Fu).map((t,i)=>(this.dynamicDecorationMap[i]=typeof t=="function")?t(this.view):t);for(let t=e.length;t<e.length+3;t++)this.dynamicDecorationMap[t]=!1;return this.decorations=[...e,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let{range:t}=e,i=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),s;if(!i)return;!t.empty&&(s=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(i={left:Math.min(i.left,s.left),top:Math.min(i.top,s.top),right:Math.max(i.right,s.right),bottom:Math.max(i.bottom,s.bottom)});let r=0,o=0,l=0,a=0;for(let u of this.view.state.facet(o5).map(f=>f(this.view)))if(u){let{left:f,right:h,top:d,bottom:m}=u;f!=null&&(r=Math.max(r,f)),h!=null&&(o=Math.max(o,h)),d!=null&&(l=Math.max(l,d)),m!=null&&(a=Math.max(a,m))}let c={left:i.left-r,top:i.top-l,right:i.right+o,bottom:i.bottom+a};NK(this.view.scrollDOM,c,t.head<t.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==ri.LTR)}}function YK(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}class GE extends rl{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function f5(n){let e=n.observer.selectionRange,t=e.focusNode&&h5(e.focusNode,e.focusOffset,0);if(!t)return null;let i=n.docView.nearest(t);if(!i)return null;if(i instanceof ws){let s=t;for(;s.parentNode!=i.dom;)s=s.parentNode;let r=s.previousSibling;for(;r&&!ei.get(r);)r=r.previousSibling;let o=r?ei.get(r).posAtEnd:i.posAtStart;return{from:o,to:o,node:s,text:t}}else{for(;;){let{parent:r}=i;if(!r)return null;if(r instanceof ws)break;i=r}let s=i.posAtStart;return{from:s,to:s+i.length,node:i.dom,text:t}}}function JK(n,e){let t=f5(n);if(!t)return Ut.none;let{from:i,to:s,node:r,text:o}=t,l=e.mapPos(i,1),a=Math.max(l,e.mapPos(s,-1)),{state:c}=n,u=r.nodeType==3?r.nodeValue:new u5([],c).readRange(r.firstChild,null).text;if(a-l<u.length)if(c.doc.sliceString(l,Math.min(c.doc.length,l+u.length),Bo)==u)a=l+u.length;else if(c.doc.sliceString(Math.max(0,a-u.length),a,Bo)==u)l=a-u.length;else return Ut.none;else if(c.doc.sliceString(l,a,Bo)!=u)return Ut.none;let f=ei.get(r);return f instanceof zR?f=f.widget.topView:f&&(f.parent=null),Ut.set(Ut.replace({widget:new ZK(r,o,f),inclusive:!0}).range(l,a))}class ZK extends rl{constructor(e,t,i){super(),this.top=e,this.text=t,this.topView=i}eq(e){return this.top==e.top&&this.text==e.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return zR}}function h5(n,e,t){for(;;){if(n.nodeType==3)return n;if(n.nodeType==1&&e>0&&t<=0)n=n.childNodes[e-1],e=Vu(n);else if(n.nodeType==1&&e<n.childNodes.length&&t>=0)n=n.childNodes[e],e=0;else return null}}function xK(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}class $K{constructor(){this.changes=[]}compareRange(e,t){Q1(e,t,this.changes)}comparePoint(e,t){Q1(e,t,this.changes)}}function eX(n,e,t){let i=new $K;return On.compare(n,e,t,i),i.changes}function tX(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function nX(n,e,t=1){let i=n.charCategorizer(e),s=n.doc.lineAt(e),r=e-s.from;if(s.length==0)return Je.cursor(e);r==0?t=1:r==s.length&&(t=-1);let o=r,l=r;t<0?o=As(s.text,r,!1):l=As(s.text,r);let a=i(s.text.slice(o,l));for(;o>0;){let c=As(s.text,o,!1);if(i(s.text.slice(c,o))!=a)break;o=c}for(;l<s.length;){let c=As(s.text,l);if(i(s.text.slice(l,c))!=a)break;l=c}return Je.range(o+s.from,l+s.from)}function iX(n,e){return e.left>n?e.left-n:Math.max(0,n-e.right)}function sX(n,e){return e.top>n?e.top-n:Math.max(0,n-e.bottom)}function Wp(n,e){return n.top<e.bottom-1&&n.bottom>e.top+1}function KE(n,e){return e<n.top?{top:e,left:n.left,right:n.right,bottom:n.bottom}:n}function XE(n,e){return e>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:e}:n}function x1(n,e,t){let i,s,r,o,l=!1,a,c,u,f;for(let m=n.firstChild;m;m=m.nextSibling){let g=Uu(m);for(let _=0;_<g.length;_++){let v=g[_];s&&Wp(s,v)&&(v=KE(XE(v,s.bottom),s.top));let y=iX(e,v),E=sX(t,v);if(y==0&&E==0)return m.nodeType==3?QE(m,e,t):x1(m,e,t);if(!i||o>E||o==E&&r>y){i=m,s=v,r=y,o=E;let w=E?t<v.top?-1:1:y?e<v.left?-1:1:0;l=!w||(w>0?_<g.length-1:_>0)}y==0?t>v.bottom&&(!u||u.bottom<v.bottom)?(a=m,u=v):t<v.top&&(!f||f.top>v.top)&&(c=m,f=v):u&&Wp(u,v)?u=XE(u,v.bottom):f&&Wp(f,v)&&(f=KE(f,v.top))}}if(u&&u.bottom>=t?(i=a,s=u):f&&f.top<=t&&(i=c,s=f),!i)return{node:n,offset:0};let h=Math.max(s.left,Math.min(s.right,e));if(i.nodeType==3)return QE(i,h,t);if(l&&i.contentEditable!="false")return x1(i,h,t);let d=Array.prototype.indexOf.call(n.childNodes,i)+(e>=(s.left+s.right)/2?1:0);return{node:n,offset:d}}function QE(n,e,t){let i=n.nodeValue.length,s=-1,r=1e9,o=0;for(let l=0;l<i;l++){let a=$a(n,l,l+1).getClientRects();for(let c=0;c<a.length;c++){let u=a[c];if(u.top==u.bottom)continue;o||(o=e-u.left);let f=(u.top>t?u.top-t:t-u.bottom)-1;if(u.left-1<=e&&u.right+1>=e&&f<r){let h=e>=(u.left+u.right)/2,d=h;if((Rt.chrome||Rt.gecko)&&$a(n,l).getBoundingClientRect().left==u.right&&(d=!h),f<=0)return{node:n,offset:l+(d?1:0)};s=l+(d?1:0),r=f}}}return{node:n,offset:s>-1?s:o>0?n.nodeValue.length:0}}function d5(n,e,t,i=-1){var s;let r=n.contentDOM.getBoundingClientRect(),o=r.top+n.viewState.paddingTop,l,{docHeight:a}=n.viewState,{x:c,y:u}=e,f=u-o;if(f<0)return 0;if(f>a)return n.state.doc.length;for(let E=n.defaultLineHeight/2,w=!1;l=n.elementAtHeight(f),l.type!=jn.Text;)for(;f=i>0?l.bottom+E:l.top-E,!(f>=0&&f<=a);){if(w)return t?null:0;w=!0,i=-i}u=o+f;let h=l.from;if(h<n.viewport.from)return n.viewport.from==0?0:t?null:YE(n,r,l,c,u);if(h>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:t?null:YE(n,r,l,c,u);let d=n.dom.ownerDocument,m=n.root.elementFromPoint?n.root:d,g=m.elementFromPoint(c,u);g&&!n.contentDOM.contains(g)&&(g=null),g||(c=Math.max(r.left+1,Math.min(r.right-1,c)),g=m.elementFromPoint(c,u),g&&!n.contentDOM.contains(g)&&(g=null));let _,v=-1;if(g&&((s=n.docView.nearest(g))===null||s===void 0?void 0:s.isEditable)!=!1){if(d.caretPositionFromPoint){let E=d.caretPositionFromPoint(c,u);E&&({offsetNode:_,offset:v}=E)}else if(d.caretRangeFromPoint){let E=d.caretRangeFromPoint(c,u);E&&({startContainer:_,startOffset:v}=E,(!n.contentDOM.contains(_)||Rt.safari&&rX(_,v,c)||Rt.chrome&&oX(_,v,c))&&(_=void 0))}}if(!_||!n.docView.dom.contains(_)){let E=ws.find(n.docView,h);if(!E)return f>l.top+l.height/2?l.to:l.from;({node:_,offset:v}=x1(E.dom,c,u))}let y=n.docView.nearest(_);if(!y)return null;if(y.isWidget){let E=y.dom.getBoundingClientRect();return e.y<E.top||e.y<=E.bottom&&e.x<=(E.left+E.right)/2?y.posAtStart:y.posAtEnd}else return y.localPosFromDOM(_,v)+y.posAtStart}function YE(n,e,t,i,s){let r=Math.round((i-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&t.height>n.defaultLineHeight*1.5){let l=Math.floor((s-t.top)/n.defaultLineHeight);r+=l*n.viewState.heightOracle.lineLength}let o=n.state.sliceDoc(t.from,t.to);return t.from+U1(o,r,n.state.tabSize)}function rX(n,e,t){let i;if(n.nodeType!=3||e!=(i=n.nodeValue.length))return!1;for(let s=n.nextSibling;s;s=s.nextSibling)if(s.nodeType!=1||s.nodeName!="BR")return!1;return $a(n,i-1,i).getBoundingClientRect().left>t}function oX(n,e,t){if(e!=0)return!1;for(let s=n;;){let r=s.parentNode;if(!r||r.nodeType!=1||r.firstChild!=s)return!1;if(r.classList.contains("cm-line"))break;s=r}let i=n.nodeType==1?n.getBoundingClientRect():$a(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect();return t-i.left>5}function lX(n,e,t,i){let s=n.state.doc.lineAt(e.head),r=!i||!n.lineWrapping?null:n.coordsAtPos(e.assoc<0&&e.head>s.from?e.head-1:e.head);if(r){let a=n.dom.getBoundingClientRect(),c=n.textDirectionAt(s.from),u=n.posAtCoords({x:t==(c==ri.LTR)?a.right-1:a.left+1,y:(r.top+r.bottom)/2});if(u!=null)return Je.cursor(u,t?-1:1)}let o=ws.find(n.docView,e.head),l=o?t?o.posAtEnd:o.posAtStart:t?s.to:s.from;return Je.cursor(l,t?-1:1)}function JE(n,e,t,i){let s=n.state.doc.lineAt(e.head),r=n.bidiSpans(s),o=n.textDirectionAt(s.from);for(let l=e,a=null;;){let c=QK(s,r,o,l,t),u=c5;if(!c){if(s.number==(t?n.state.doc.lines:1))return l;u=`
`,s=n.state.doc.line(s.number+(t?1:-1)),r=n.bidiSpans(s),c=Je.cursor(t?s.from:s.to)}if(a){if(!a(u))return l}else{if(!i)return c;a=i(u)}l=c}}function aX(n,e,t){let i=n.state.charCategorizer(e),s=i(t);return r=>{let o=i(r);return s==ni.Space&&(s=o),s==o}}function cX(n,e,t,i){let s=e.head,r=t?1:-1;if(s==(t?n.state.doc.length:0))return Je.cursor(s,e.assoc);let o=e.goalColumn,l,a=n.contentDOM.getBoundingClientRect(),c=n.coordsAtPos(s),u=n.documentTop;if(c)o==null&&(o=c.left-a.left),l=r<0?c.top:c.bottom;else{let d=n.viewState.lineBlockAt(s);o==null&&(o=Math.min(a.right-a.left,n.defaultCharacterWidth*(s-d.from))),l=(r<0?d.top:d.bottom)+u}let f=a.left+o,h=i??n.defaultLineHeight>>1;for(let d=0;;d+=10){let m=l+(h+d)*r,g=d5(n,{x:f,y:m},!1,r);if(m<a.top||m>a.bottom||(r<0?g<s:g>s))return Je.cursor(g,e.assoc,void 0,o)}}function Up(n,e,t){let i=n.state.facet(r5).map(s=>s(n));for(;;){let s=!1;for(let r of i)r.between(t.from-1,t.from+1,(o,l,a)=>{t.from>o&&t.from<l&&(t=e.head>t.from?Je.cursor(o,1):Je.cursor(l,-1),s=!0)});if(!s)return t}}class uX{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.mouseSelection=null;let t=(i,s)=>{this.ignoreDuringComposition(s)||s.type=="keydown"&&this.keydown(e,s)||(this.mustFlushObserver(s)&&e.observer.forceFlush(),this.runCustomHandlers(s.type,e,s)?s.preventDefault():i(e,s))};for(let i in Pi){let s=Pi[i];e.contentDOM.addEventListener(i,r=>{ZE(e,r)&&t(s,r)},$1[i]),this.registeredEvents.push(i)}e.scrollDOM.addEventListener("mousedown",i=>{i.target==e.scrollDOM&&i.clientY>e.contentDOM.getBoundingClientRect().bottom&&t(Pi.mousedown,i)}),Rt.chrome&&Rt.chrome_version==102&&e.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=e.hasFocus,Rt.safari&&e.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e,t){var i;let s;this.customHandlers=[];for(let r of t)if(s=(i=r.update(e).spec)===null||i===void 0?void 0:i.domEventHandlers){this.customHandlers.push({plugin:r.value,handlers:s});for(let o in s)this.registeredEvents.indexOf(o)<0&&o!="scroll"&&(this.registeredEvents.push(o),e.contentDOM.addEventListener(o,l=>{ZE(e,l)&&this.runCustomHandlers(o,e,l)&&l.preventDefault()}))}}runCustomHandlers(e,t,i){for(let s of this.customHandlers){let r=s.handlers[e];if(r)try{if(r.call(s.plugin,i,t)||i.defaultPrevented)return!0}catch(o){qs(t.state,o)}}return!1}runScrollHandlers(e,t){this.lastScrollTop=e.scrollDOM.scrollTop,this.lastScrollLeft=e.scrollDOM.scrollLeft;for(let i of this.customHandlers){let s=i.handlers.scroll;if(s)try{s.call(i.plugin,t,e)}catch(r){qs(e.state,r)}}}keydown(e,t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),t.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(Rt.android&&Rt.chrome&&!t.synthetic&&(t.keyCode==13||t.keyCode==8))return e.observer.delayAndroidKey(t.key,t.keyCode),!0;let i;return Rt.ios&&!t.synthetic&&!t.altKey&&!t.metaKey&&((i=m5.find(s=>s.keyCode==t.keyCode))&&!t.ctrlKey||fX.indexOf(t.key)>-1&&t.ctrlKey&&!t.shiftKey)?(this.pendingIOSKey=i||t,setTimeout(()=>this.flushIOSKey(e),250),!0):!1}flushIOSKey(e){let t=this.pendingIOSKey;return t?(this.pendingIOSKey=void 0,Da(e.contentDOM,t.key,t.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:Rt.safari&&!Rt.ios&&Date.now()-this.compositionEndedAt<100?(this.compositionEndedAt=0,!0):!1:!1}mustFlushObserver(e){return e.type=="keydown"&&e.keyCode!=229}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const m5=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],fX="dthko",p5=[16,17,18,20,91,92,224,225];function Xf(n){return n*.7+8}class hX{constructor(e,t,i,s){this.view=e,this.style=i,this.mustSelect=s,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParent=PK(e.contentDOM);let r=e.contentDOM.ownerDocument;r.addEventListener("mousemove",this.move=this.move.bind(this)),r.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(un.allowMultipleSelections)&&dX(e,t),this.dragMove=mX(e,t),this.dragging=pX(e,t)&&_5(t)==1?null:!1}start(e){this.dragging===!1&&(e.preventDefault(),this.select(e))}move(e){var t;if(e.buttons==0)return this.destroy();if(this.dragging!==!1)return;this.select(this.lastEvent=e);let i=0,s=0,r=((t=this.scrollParent)===null||t===void 0?void 0:t.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight};e.clientX<=r.left?i=-Xf(r.left-e.clientX):e.clientX>=r.right&&(i=Xf(e.clientX-r.right)),e.clientY<=r.top?s=-Xf(r.top-e.clientY):e.clientY>=r.bottom&&(s=Xf(e.clientY-r.bottom)),this.setScrollSpeed(i,s)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}select(e){let t=this.style.get(e,this.extend,this.multiple);(this.mustSelect||!t.eq(this.view.state.selection)||t.main.assoc!=this.view.state.selection.main.assoc)&&this.view.dispatch({selection:t,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function dX(n,e){let t=n.state.facet(JR);return t.length?t[0](e):Rt.mac?e.metaKey:e.ctrlKey}function mX(n,e){let t=n.state.facet(ZR);return t.length?t[0](e):Rt.mac?!e.altKey:!e.ctrlKey}function pX(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let i=pd(n.root);if(!i||i.rangeCount==0)return!0;let s=i.getRangeAt(0).getClientRects();for(let r=0;r<s.length;r++){let o=s[r];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function ZE(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,i;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(i=ei.get(t))&&i.ignoreEvent(e))return!1;return!0}const Pi=Object.create(null),$1=Object.create(null),g5=Rt.ie&&Rt.ie_version<15||Rt.ios&&Rt.webkit_version<604;function gX(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),v5(n,t.value)},50)}function v5(n,e){let{state:t}=n,i,s=1,r=t.toText(e),o=r.lines==t.selection.ranges.length;if(e0!=null&&t.selection.ranges.every(a=>a.empty)&&e0==r.toString()){let a=-1;i=t.changeByRange(c=>{let u=t.doc.lineAt(c.from);if(u.from==a)return{range:c};a=u.from;let f=t.toText((o?r.line(s++).text:e)+t.lineBreak);return{changes:{from:u.from,insert:f},range:Je.cursor(c.from+f.length)}})}else o?i=t.changeByRange(a=>{let c=r.line(s++);return{changes:{from:a.from,to:a.to,insert:c.text},range:Je.cursor(a.from+c.length)}}):i=t.replaceSelection(r);n.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}Pi.keydown=(n,e)=>{n.inputState.setSelectionOrigin("select"),e.keyCode==27?n.inputState.lastEscPress=Date.now():p5.indexOf(e.keyCode)<0&&(n.inputState.lastEscPress=0)};Pi.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};Pi.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};$1.touchstart=$1.touchmove={passive:!0};Pi.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return;let t=null;for(let i of n.state.facet(xR))if(t=i(n,e),t)break;if(!t&&e.button==0&&(t=_X(n,e)),t){let i=n.root.activeElement!=n.contentDOM;n.inputState.startMouseSelection(new hX(n,e,t,i)),i&&n.observer.ignore(()=>WR(n.contentDOM)),n.inputState.mouseSelection&&n.inputState.mouseSelection.start(e)}};function xE(n,e,t,i){if(i==1)return Je.cursor(e,t);if(i==2)return nX(n.state,e,t);{let s=ws.find(n.docView,e),r=n.state.doc.lineAt(s?s.posAtEnd:e),o=s?s.posAtStart:r.from,l=s?s.posAtEnd:r.to;return l<n.state.doc.length&&l==r.to&&l++,Je.range(o,l)}}let b5=(n,e)=>n>=e.top&&n<=e.bottom,$E=(n,e,t)=>b5(e,t)&&n>=t.left&&n<=t.right;function vX(n,e,t,i){let s=ws.find(n.docView,e);if(!s)return 1;let r=e-s.posAtStart;if(r==0)return 1;if(r==s.length)return-1;let o=s.coordsAt(r,-1);if(o&&$E(t,i,o))return-1;let l=s.coordsAt(r,1);return l&&$E(t,i,l)?1:o&&b5(i,o)?-1:1}function eA(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:vX(n,t,e.clientX,e.clientY)}}const bX=Rt.ie&&Rt.ie_version<=11;let tA=null,nA=0,iA=0;function _5(n){if(!bX)return n.detail;let e=tA,t=iA;return tA=n,iA=Date.now(),nA=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(nA+1)%3:1}function _X(n,e){let t=eA(n,e),i=_5(e),s=n.state.selection;return{update(r){r.docChanged&&(t.pos=r.changes.mapPos(t.pos),s=s.map(r.changes))},get(r,o,l){let a=eA(n,r),c=xE(n,a.pos,a.bias,i);if(t.pos!=a.pos&&!o){let u=xE(n,t.pos,t.bias,i),f=Math.min(u.from,c.from),h=Math.max(u.to,c.to);c=f<c.from?Je.range(f,h):Je.range(h,f)}return o?s.replaceRange(s.main.extend(c.from,c.to)):l&&s.ranges.length>1&&s.ranges.some(u=>u.eq(c))?yX(s,c):l?s.addRange(c):Je.create([c])}}}function yX(n,e){for(let t=0;;t++)if(n.ranges[t].eq(e))return Je.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}Pi.dragstart=(n,e)=>{let{selection:{main:t}}=n.state,{mouseSelection:i}=n.inputState;i&&(i.dragging=t),e.dataTransfer&&(e.dataTransfer.setData("Text",n.state.sliceDoc(t.from,t.to)),e.dataTransfer.effectAllowed="copyMove")};function sA(n,e,t,i){if(!t)return;let s=n.posAtCoords({x:e.clientX,y:e.clientY},!1);e.preventDefault();let{mouseSelection:r}=n.inputState,o=i&&r&&r.dragging&&r.dragMove?{from:r.dragging.from,to:r.dragging.to}:null,l={from:s,insert:t},a=n.state.changes(o?[o,l]:l);n.focus(),n.dispatch({changes:a,selection:{anchor:a.mapPos(s,-1),head:a.mapPos(s,1)},userEvent:o?"move.drop":"input.drop"})}Pi.drop=(n,e)=>{if(!e.dataTransfer)return;if(n.state.readOnly)return e.preventDefault();let t=e.dataTransfer.files;if(t&&t.length){e.preventDefault();let i=Array(t.length),s=0,r=()=>{++s==t.length&&sA(n,e,i.filter(o=>o!=null).join(n.state.lineBreak),!1)};for(let o=0;o<t.length;o++){let l=new FileReader;l.onerror=r,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(i[o]=l.result),r()},l.readAsText(t[o])}}else sA(n,e,e.dataTransfer.getData("Text"),!0)};Pi.paste=(n,e)=>{if(n.state.readOnly)return e.preventDefault();n.observer.flush();let t=g5?null:e.clipboardData;t?(v5(n,t.getData("text/plain")),e.preventDefault()):gX(n)};function SX(n,e){let t=n.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),n.focus()},50)}function EX(n){let e=[],t=[],i=!1;for(let s of n.selection.ranges)s.empty||(e.push(n.sliceDoc(s.from,s.to)),t.push(s));if(!e.length){let s=-1;for(let{from:r}of n.selection.ranges){let o=n.doc.lineAt(r);o.number>s&&(e.push(o.text),t.push({from:o.from,to:Math.min(n.doc.length,o.to+1)})),s=o.number}i=!0}return{text:e.join(n.lineBreak),ranges:t,linewise:i}}let e0=null;Pi.copy=Pi.cut=(n,e)=>{let{text:t,ranges:i,linewise:s}=EX(n.state);if(!t&&!s)return;e0=s?t:null;let r=g5?null:e.clipboardData;r?(e.preventDefault(),r.clearData(),r.setData("text/plain",t)):SX(n,t),e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"})};const y5=Eo.define();function S5(n,e){let t=[];for(let i of n.facet(t5)){let s=i(n,e);s&&t.push(s)}return t?n.update({effects:t,annotations:y5.of(!0)}):null}function E5(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let t=S5(n.state,e);t?n.dispatch(t):n.update([])}},10)}Pi.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),E5(n)};Pi.blur=n=>{n.observer.clearSelectionRange(),E5(n)};Pi.compositionstart=Pi.compositionupdate=n=>{n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0)};Pi.compositionend=n=>{n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionFirstChange=null,Rt.chrome&&Rt.android&&n.observer.flushSoon(),setTimeout(()=>{n.inputState.composing<0&&n.docView.compositionDeco.size&&n.update([])},50)};Pi.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};Pi.beforeinput=(n,e)=>{var t;let i;if(Rt.chrome&&Rt.android&&(i=m5.find(s=>s.inputType==e.inputType))&&(n.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let s=((t=window.visualViewport)===null||t===void 0?void 0:t.height)||0;setTimeout(()=>{var r;(((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0)>s+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}};const rA=["pre-wrap","normal","pre-line","break-spaces"];class AX{constructor(e){this.lineWrapping=e,this.doc=Tn.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return rA.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let s=e[i];s<0?i++:this.heightSamples[Math.floor(s*10)]||(t=!0,this.heightSamples[Math.floor(s*10)]=!0)}return t}refresh(e,t,i,s,r){let o=rA.indexOf(e)>-1,l=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=o;if(this.lineWrapping=o,this.lineHeight=t,this.charWidth=i,this.lineLength=s,l){this.heightSamples={};for(let a=0;a<r.length;a++){let c=r[a];c<0?a++:this.heightSamples[Math.floor(c*10)]=!0}}return l}}class wX{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class no{constructor(e,t,i,s,r){this.from=e,this.length=t,this.top=i,this.height=s,this.type=r}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(e){let t=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(e.type)?e.type:[e]);return new no(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var Jn=function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n}(Jn||(Jn={}));const kh=.001;class Is{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>kh&&(e.heightChanged=!0),this.height=t)}replace(e,t,i){return Is.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,s){let r=this,o=i.doc;for(let l=s.length-1;l>=0;l--){let{fromA:a,toA:c,fromB:u,toB:f}=s[l],h=r.lineAt(a,Jn.ByPosNoHeight,i.setDoc(t),0,0),d=h.to>=c?h:r.lineAt(c,Jn.ByPosNoHeight,i,0,0);for(f+=d.to-c,c=d.to;l>0&&h.from<=s[l-1].toA;)a=s[l-1].fromA,u=s[l-1].fromB,l--,a<h.from&&(h=r.lineAt(a,Jn.ByPosNoHeight,i,0,0));u+=h.from-a,a=h.from;let m=db.build(i.setDoc(o),e,u,f);r=r.replace(a,c,m)}return r.updateHeight(i,0)}static empty(){return new Us(0,0)}static of(e){if(e.length==1)return e[0];let t=0,i=e.length,s=0,r=0;for(;;)if(t==i)if(s>r*2){let l=e[t-1];l.break?e.splice(--t,1,l.left,null,l.right):e.splice(--t,1,l.left,l.right),i+=1+l.break,s-=l.size}else if(r>s*2){let l=e[i];l.break?e.splice(i,1,l.left,null,l.right):e.splice(i,1,l.left,l.right),i+=2+l.break,r-=l.size}else break;else if(s<r){let l=e[t++];l&&(s+=l.size)}else{let l=e[--i];l&&(r+=l.size)}let o=0;return e[t-1]==null?(o=1,t--):e[t]==null&&(o=1,i++),new CX(Is.of(e.slice(0,t)),o,Is.of(e.slice(i)))}}Is.prototype.size=1;class A5 extends Is{constructor(e,t,i){super(e,t),this.type=i}blockAt(e,t,i,s){return new no(s,this.length,i,this.height,this.type)}lineAt(e,t,i,s,r){return this.blockAt(0,i,s,r)}forEachLine(e,t,i,s,r,o){e<=r+this.length&&t>=r&&o(this.blockAt(0,i,s,r))}updateHeight(e,t=0,i=!1,s){return s&&s.from<=t&&s.more&&this.setHeight(e,s.heights[s.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Us extends A5{constructor(e,t){super(e,t,jn.Text),this.collapsed=0,this.widgetHeight=0}replace(e,t,i){let s=i[0];return i.length==1&&(s instanceof Us||s instanceof zi&&s.flags&4)&&Math.abs(this.length-s.length)<10?(s instanceof zi?s=new Us(s.length,this.height):s.height=this.height,this.outdated||(s.outdated=!1),s):Is.of(i)}updateHeight(e,t=0,i=!1,s){return s&&s.from<=t&&s.more?this.setHeight(e,s.heights[s.index++]):(i||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class zi extends Is{constructor(e){super(e,0)}heightMetrics(e,t){let i=e.doc.lineAt(t).number,s=e.doc.lineAt(t+this.length).number,r=s-i+1,o,l=0;if(e.lineWrapping){let a=Math.min(this.height,e.lineHeight*r);o=a/r,l=(this.height-a)/(this.length-r-1)}else o=this.height/r;return{firstLine:i,lastLine:s,perLine:o,perChar:l}}blockAt(e,t,i,s){let{firstLine:r,lastLine:o,perLine:l,perChar:a}=this.heightMetrics(t,s);if(t.lineWrapping){let c=s+Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length),u=t.doc.lineAt(c),f=l+u.length*a,h=Math.max(i,e-f/2);return new no(u.from,u.length,h,f,jn.Text)}else{let c=Math.max(0,Math.min(o-r,Math.floor((e-i)/l))),{from:u,length:f}=t.doc.line(r+c);return new no(u,f,i+l*c,l,jn.Text)}}lineAt(e,t,i,s,r){if(t==Jn.ByHeight)return this.blockAt(e,i,s,r);if(t==Jn.ByPosNoHeight){let{from:d,to:m}=i.doc.lineAt(e);return new no(d,m-d,0,0,jn.Text)}let{firstLine:o,perLine:l,perChar:a}=this.heightMetrics(i,r),c=i.doc.lineAt(e),u=l+c.length*a,f=c.number-o,h=s+l*f+a*(c.from-r-f);return new no(c.from,c.length,Math.max(s,Math.min(h,s+this.height-u)),u,jn.Text)}forEachLine(e,t,i,s,r,o){e=Math.max(e,r),t=Math.min(t,r+this.length);let{firstLine:l,perLine:a,perChar:c}=this.heightMetrics(i,r);for(let u=e,f=s;u<=t;){let h=i.doc.lineAt(u);if(u==e){let m=h.number-l;f+=a*m+c*(e-r-m)}let d=a+c*h.length;o(new no(h.from,h.length,f,d,jn.Text)),f+=d,u=h.to+1}}replace(e,t,i){let s=this.length-t;if(s>0){let r=i[i.length-1];r instanceof zi?i[i.length-1]=new zi(r.length+s):i.push(null,new zi(s-1))}if(e>0){let r=i[0];r instanceof zi?i[0]=new zi(e+r.length):i.unshift(new zi(e-1),null)}return Is.of(i)}decomposeLeft(e,t){t.push(new zi(e-1),null)}decomposeRight(e,t){t.push(null,new zi(this.length-e-1))}updateHeight(e,t=0,i=!1,s){let r=t+this.length;if(s&&s.from<=t+this.length&&s.more){let o=[],l=Math.max(t,s.from),a=-1;for(s.from>t&&o.push(new zi(s.from-t-1).updateHeight(e,t));l<=r&&s.more;){let u=e.doc.lineAt(l).length;o.length&&o.push(null);let f=s.heights[s.index++];a==-1?a=f:Math.abs(f-a)>=kh&&(a=-2);let h=new Us(u,f);h.outdated=!1,o.push(h),l+=u+1}l<=r&&o.push(null,new zi(r-l).updateHeight(e,l));let c=Is.of(o);return(a<0||Math.abs(c.height-this.height)>=kh||Math.abs(a-this.heightMetrics(e,t).perLine)>=kh)&&(e.heightChanged=!0),c}else(i||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class CX extends Is{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,t,i,s){let r=i+this.left.height;return e<r?this.left.blockAt(e,t,i,s):this.right.blockAt(e,t,r,s+this.left.length+this.break)}lineAt(e,t,i,s,r){let o=s+this.left.height,l=r+this.left.length+this.break,a=t==Jn.ByHeight?e<o:e<l,c=a?this.left.lineAt(e,t,i,s,r):this.right.lineAt(e,t,i,o,l);if(this.break||(a?c.to<l:c.from>l))return c;let u=t==Jn.ByPosNoHeight?Jn.ByPosNoHeight:Jn.ByPos;return a?c.join(this.right.lineAt(l,u,i,o,l)):this.left.lineAt(l,u,i,s,r).join(c)}forEachLine(e,t,i,s,r,o){let l=s+this.left.height,a=r+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,t,i,s,r,o),t>=a&&this.right.forEachLine(e,t,i,l,a,o);else{let c=this.lineAt(a,Jn.ByPos,i,s,r);e<c.from&&this.left.forEachLine(e,c.from-1,i,s,r,o),c.to>=e&&c.from<=t&&o(c),t>c.to&&this.right.forEachLine(c.to+1,t,i,l,a,o)}}replace(e,t,i){let s=this.left.length+this.break;if(t<s)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-s,t-s,i));let r=[];e>0&&this.decomposeLeft(e,r);let o=r.length;for(let l of i)r.push(l);if(e>0&&oA(r,o-1),t<this.length){let l=r.length;this.decomposeRight(t,r),oA(r,l)}return Is.of(r)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,s=i+this.break;if(e>=s)return this.right.decomposeRight(e-s,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<s&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Is.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,s){let{left:r,right:o}=this,l=t+r.length+this.break,a=null;return s&&s.from<=t+r.length&&s.more?a=r=r.updateHeight(e,t,i,s):r.updateHeight(e,t,i),s&&s.from<=l+o.length&&s.more?a=o=o.updateHeight(e,l,i,s):o.updateHeight(e,l,i),a?this.balanced(r,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function oA(n,e){let t,i;n[e]==null&&(t=n[e-1])instanceof zi&&(i=n[e+1])instanceof zi&&n.splice(e-1,3,new zi(t.length+1+i.length))}const kX=5;class db{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let i=Math.min(t,this.lineEnd),s=this.nodes[this.nodes.length-1];s instanceof Us?s.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new Us(i-this.pos,-1)),this.writtenTo=i,t>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let s=i.widget?i.widget.estimatedHeight:0;s<0&&(s=this.oracle.lineHeight);let r=t-e;i.block?this.addBlock(new A5(r,s,i.type)):(r||s>=kX)&&this.addLineDeco(s,r)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Us(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let i=new zi(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Us)return e;let t=new Us(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine(),e.type==jn.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,e.type!=jn.WidgetBefore&&(this.covering=e)}addLineDeco(e,t){let i=this.ensureLine();i.length+=t,i.collapsed+=t,i.widgetHeight=Math.max(i.widgetHeight,e),this.writtenTo=this.pos=this.pos+t}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof Us)&&!this.isCovered?this.nodes.push(new Us(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let s of this.nodes)s instanceof Us&&s.updateHeight(this.oracle,i),i+=s?s.length:1;return this.nodes}static build(e,t,i,s){let r=new db(i,e);return On.spans(t,i,s,r,0),r.finish(i)}}function IX(n,e,t){let i=new TX;return On.compare(n,e,t,i,0),i.changes}class TX{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,s){(e<t||i&&i.heightRelevant||s&&s.heightRelevant)&&Q1(e,t,this.changes,5)}}function OX(n,e){let t=n.getBoundingClientRect(),i=n.ownerDocument,s=i.defaultView||window,r=Math.max(0,t.left),o=Math.min(s.innerWidth,t.right),l=Math.max(0,t.top),a=Math.min(s.innerHeight,t.bottom);for(let c=n.parentNode;c&&c!=i.body;)if(c.nodeType==1){let u=c,f=window.getComputedStyle(u);if((u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth)&&f.overflow!="visible"){let h=u.getBoundingClientRect();r=Math.max(r,h.left),o=Math.min(o,h.right),l=Math.max(l,h.top),a=c==n.parentNode?h.bottom:Math.min(a,h.bottom)}c=f.position=="absolute"||f.position=="fixed"?u.offsetParent:u.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:r-t.left,right:Math.max(r,o)-t.left,top:l-(t.top+e),bottom:Math.max(l,a)-(t.top+e)}}function RX(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class Vp{constructor(e,t,i){this.from=e,this.to=t,this.size=i}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let s=e[i],r=t[i];if(s.from!=r.from||s.to!=r.to||s.size!=r.size)return!1}return!0}draw(e){return Ut.replace({widget:new DX(this.size,e)}).range(this.from,this.to)}}class DX extends rl{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class lA{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scaler=aA,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=ri.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(hb).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new AX(t),this.stateDeco=e.facet(Fu).filter(i=>typeof i!="function"),this.heightMap=Is.empty().applyChanges(this.stateDeco,Tn.empty,this.heightOracle.setDoc(e.doc),[new zr(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Ut.set(this.lineGaps.map(i=>i.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let s=i?t.head:t.anchor;if(!e.some(({from:r,to:o})=>s>=r&&s<=o)){let{from:r,to:o}=this.lineBlockAt(s);e.push(new Qf(r,o))}}this.viewports=e.sort((i,s)=>i.from-s.from),this.scaler=this.heightMap.height<=7e6?aA:new MX(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:Kc(e,this.scaler))})}update(e,t=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(Fu).filter(c=>typeof c!="function");let s=e.changedRanges,r=zr.extendWithRanges(s,IX(i,this.stateDeco,e?e.changes:Oi.empty(this.state.doc.length))),o=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),r),this.heightMap.height!=o&&(e.flags|=2);let l=r.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<l.from||t.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,t));let a=!e.changes.empty||e.flags&2||l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,this.updateForViewport(),a&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>2e3<<1)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(i5)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,i=window.getComputedStyle(t),s=this.heightOracle,r=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?ri.RTL:ri.LTR;let o=this.heightOracle.mustRefreshForWrapping(r),l=t.getBoundingClientRect(),a=o||this.mustMeasureContent||this.contentDOMHeight!=l.height;this.contentDOMHeight=l.height,this.mustMeasureContent=!1;let c=0,u=0,f=parseInt(i.paddingTop)||0,h=parseInt(i.paddingBottom)||0;(this.paddingTop!=f||this.paddingBottom!=h)&&(this.paddingTop=f,this.paddingBottom=h,c|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(s.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,c|=8);let d=(this.printing?RX:OX)(t,this.paddingTop),m=d.top-this.pixelViewport.top,g=d.bottom-this.pixelViewport.bottom;this.pixelViewport=d;let _=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(_!=this.inView&&(this.inView=_,_&&(a=!0)),!this.inView&&!this.scrollTarget)return 0;let v=l.width;if((this.contentDOMWidth!=v||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=l.width,this.editorHeight=e.scrollDOM.clientHeight,c|=8),a){let E=e.docView.measureVisibleLineHeights(this.viewport);if(s.mustRefreshForHeights(E)&&(o=!0),o||s.lineWrapping&&Math.abs(v-this.contentDOMWidth)>s.charWidth){let{lineHeight:w,charWidth:A}=e.docView.measureTextSize();o=w>0&&s.refresh(r,w,A,v/A,E),o&&(e.docView.minWidth=0,c|=8)}m>0&&g>0?u=Math.max(m,g):m<0&&g<0&&(u=Math.min(m,g)),s.heightChanged=!1;for(let w of this.viewports){let A=w.from==this.viewport.from?E:e.docView.measureVisibleLineHeights(w);this.heightMap=(o?Is.empty().applyChanges(this.stateDeco,Tn.empty,this.heightOracle,[new zr(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(s,0,o,new wX(w.from,A))}s.heightChanged&&(c|=2)}let y=!this.viewportIsAppropriate(this.viewport,u)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return y&&(this.viewport=this.getViewport(u,this.scrollTarget)),this.updateForViewport(),(c&2||y)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>2e3<<1)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),c|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),c}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),s=this.heightMap,r=this.heightOracle,{visibleTop:o,visibleBottom:l}=this,a=new Qf(s.lineAt(o-i*1e3,Jn.ByHeight,r,0,0).from,s.lineAt(l+(1-i)*1e3,Jn.ByHeight,r,0,0).to);if(t){let{head:c}=t.range;if(c<a.from||c>a.to){let u=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),f=s.lineAt(c,Jn.ByPos,r,0,0),h;t.y=="center"?h=(f.top+f.bottom)/2-u/2:t.y=="start"||t.y=="nearest"&&c<a.from?h=f.top:h=f.bottom-u,a=new Qf(s.lineAt(h-1e3/2,Jn.ByHeight,r,0,0).from,s.lineAt(h+u+1e3/2,Jn.ByHeight,r,0,0).to)}}return a}mapViewport(e,t){let i=t.mapPos(e.from,-1),s=t.mapPos(e.to,1);return new Qf(this.heightMap.lineAt(i,Jn.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(s,Jn.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){if(!this.inView)return!0;let{top:s}=this.heightMap.lineAt(e,Jn.ByPos,this.heightOracle,0,0),{bottom:r}=this.heightMap.lineAt(t,Jn.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:l}=this;return(e==0||s<=o-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||r>=l+Math.max(10,Math.min(i,250)))&&s>o-2*1e3&&r<l+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let s of e)t.touchesRange(s.from,s.to)||i.push(new Vp(t.mapPos(s.from),t.mapPos(s.to),s.size));return i}ensureLineGaps(e,t){let i=this.heightOracle.lineWrapping,s=i?1e4:2e3,r=s>>1,o=s<<1;if(this.defaultTextDirection!=ri.LTR&&!i)return[];let l=[],a=(c,u,f,h)=>{if(u-c<r)return;let d=this.state.selection.main,m=[d.from];d.empty||m.push(d.to);for(let _ of m)if(_>c&&_<u){a(c,_-10,f,h),a(_+10,u,f,h);return}let g=PX(e,_=>_.from>=f.from&&_.to<=f.to&&Math.abs(_.from-c)<r&&Math.abs(_.to-u)<r&&!m.some(v=>_.from<v&&_.to>v));if(!g){if(u<f.to&&t&&i&&t.visibleRanges.some(_=>_.from<=u&&_.to>=u)){let _=t.moveToLineBoundary(Je.cursor(u),!1,!0).head;_>c&&(u=_)}g=new Vp(c,u,this.gapSize(f,c,u,h))}l.push(g)};for(let c of this.viewportLines){if(c.length<o)continue;let u=NX(c.from,c.to,this.stateDeco);if(u.total<o)continue;let f=this.scrollTarget?this.scrollTarget.range.head:null,h,d;if(i){let m=s/this.heightOracle.lineLength*this.heightOracle.lineHeight,g,_;if(f!=null){let v=Jf(u,f),y=((this.visibleBottom-this.visibleTop)/2+m)/c.height;g=v-y,_=v+y}else g=(this.visibleTop-c.top-m)/c.height,_=(this.visibleBottom-c.top+m)/c.height;h=Yf(u,g),d=Yf(u,_)}else{let m=u.total*this.heightOracle.charWidth,g=s*this.heightOracle.charWidth,_,v;if(f!=null){let y=Jf(u,f),E=((this.pixelViewport.right-this.pixelViewport.left)/2+g)/m;_=y-E,v=y+E}else _=(this.pixelViewport.left-g)/m,v=(this.pixelViewport.right+g)/m;h=Yf(u,_),d=Yf(u,v)}h>c.from&&a(c.from,h,c,u),d<c.to&&a(d,c.to,c,u)}return l}gapSize(e,t,i,s){let r=Jf(s,i)-Jf(s,t);return this.heightOracle.lineWrapping?e.height*r:s.total*this.heightOracle.charWidth*r}updateLineGaps(e){Vp.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Ut.set(e.map(t=>t.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];On.spans(e,this.viewport.from,this.viewport.to,{span(s,r){t.push({from:s,to:r})},point(){}},20);let i=t.length!=this.visibleRanges.length||this.visibleRanges.some((s,r)=>s.from!=t[r].from||s.to!=t[r].to);return this.visibleRanges=t,i?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||Kc(this.heightMap.lineAt(e,Jn.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return Kc(this.heightMap.lineAt(this.scaler.fromDOM(e),Jn.ByHeight,this.heightOracle,0,0),this.scaler)}elementAtHeight(e){return Kc(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Qf{constructor(e,t){this.from=e,this.to=t}}function NX(n,e,t){let i=[],s=n,r=0;return On.spans(t,n,e,{span(){},point(o,l){o>s&&(i.push({from:s,to:o}),r+=o-s),s=l}},20),s<e&&(i.push({from:s,to:e}),r+=e-s),{total:r,ranges:i}}function Yf({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let i=Math.floor(n*t);for(let s=0;;s++){let{from:r,to:o}=e[s],l=o-r;if(i<=l)return r+i;i-=l}}function Jf(n,e){let t=0;for(let{from:i,to:s}of n.ranges){if(e<=s){t+=e-i;break}t+=s-i}return t/n.total}function PX(n,e){for(let t of n)if(e(t))return t}const aA={toDOM(n){return n},fromDOM(n){return n},scale:1};class MX{constructor(e,t,i){let s=0,r=0,o=0;this.viewports=i.map(({from:l,to:a})=>{let c=t.lineAt(l,Jn.ByPos,e,0,0).top,u=t.lineAt(a,Jn.ByPos,e,0,0).bottom;return s+=u-c,{from:l,to:a,top:c,bottom:u,domTop:0,domBottom:0}}),this.scale=(7e6-s)/(t.height-s);for(let l of this.viewports)l.domTop=o+(l.top-r)*this.scale,o=l.domBottom=l.domTop+(l.bottom-l.top),r=l.bottom}toDOM(e){for(let t=0,i=0,s=0;;t++){let r=t<this.viewports.length?this.viewports[t]:null;if(!r||e<r.top)return s+(e-i)*this.scale;if(e<=r.bottom)return r.domTop+(e-r.top);i=r.bottom,s=r.domBottom}}fromDOM(e){for(let t=0,i=0,s=0;;t++){let r=t<this.viewports.length?this.viewports[t]:null;if(!r||e<r.domTop)return i+(e-s)/this.scale;if(e<=r.domBottom)return r.top+(e-r.domTop);i=r.bottom,s=r.domBottom}}}function Kc(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),i=e.toDOM(n.bottom);return new no(n.from,n.length,t,i-t,Array.isArray(n.type)?n.type.map(s=>Kc(s,e)):n.type)}const Zf=Tt.define({combine:n=>n.join(" ")}),t0=Tt.define({combine:n=>n.indexOf(!0)>-1}),n0=$o.newName(),w5=$o.newName(),C5=$o.newName(),k5={"&light":"."+w5,"&dark":"."+C5};function i0(n,e,t){return new $o(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,s=>{if(s=="&")return n;if(!t||!t[s])throw new RangeError(`Unsupported selector: ${s}`);return t[s]}):n+" "+i}})}const BX=i0("."+n0,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},k5);class LX{constructor(e,t,i,s){this.typeOver=s,this.bounds=null,this.text="";let{impreciseHead:r,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,i,0))){let l=r||o?[]:UX(e),a=new u5(l,e.state);a.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=a.text,this.newSel=VX(l,this.bounds.from)}else{let l=e.observer.selectionRange,a=r&&r.node==l.focusNode&&r.offset==l.focusOffset||!xa(e.contentDOM,l.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(l.focusNode,l.focusOffset),c=o&&o.node==l.anchorNode&&o.offset==l.anchorOffset||!xa(e.contentDOM,l.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(l.anchorNode,l.anchorOffset);this.newSel=Je.single(c,a)}}}function I5(n,e){let t,{newSel:i}=e,s=n.state.selection.main;if(e.bounds){let{from:r,to:o}=e.bounds,l=s.from,a=null;(n.inputState.lastKeyCode===8&&n.inputState.lastKeyTime>Date.now()-100||Rt.android&&e.text.length<o-r)&&(l=s.to,a="end");let c=WX(n.state.doc.sliceString(r,o,Bo),e.text,l-r,a);c&&(Rt.chrome&&n.inputState.lastKeyCode==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==Bo+Bo&&c.toB--,t={from:r+c.from,to:r+c.toA,insert:Tn.of(e.text.slice(c.from,c.toB).split(Bo))})}else i&&(!n.hasFocus&&n.state.facet(zm)||i.main.eq(s))&&(i=null);if(!t&&!i)return!1;if(!t&&e.typeOver&&!s.empty&&i&&i.main.empty?t={from:s.from,to:s.to,insert:n.state.doc.slice(s.from,s.to)}:t&&t.from>=s.from&&t.to<=s.to&&(t.from!=s.from||t.to!=s.to)&&s.to-s.from-(t.to-t.from)<=4?t={from:s.from,to:s.to,insert:n.state.doc.slice(s.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,s.to))}:(Rt.mac||Rt.android)&&t&&t.from==t.to&&t.from==s.head-1&&/^\. ?$/.test(t.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(i&&t.insert.length==2&&(i=Je.single(i.main.anchor-1,i.main.head-1)),t={from:s.from,to:s.to,insert:Tn.of([" "])}):Rt.chrome&&t&&t.from==t.to&&t.from==s.head&&t.insert.toString()==`
 `&&n.lineWrapping&&(i&&(i=Je.single(i.main.anchor-1,i.main.head-1)),t={from:s.from,to:s.to,insert:Tn.of([" "])}),t){let r=n.state;if(Rt.ios&&n.inputState.flushIOSKey(n)||Rt.android&&(t.from==s.from&&t.to==s.to&&t.insert.length==1&&t.insert.lines==2&&Da(n.contentDOM,"Enter",13)||t.from==s.from-1&&t.to==s.to&&t.insert.length==0&&Da(n.contentDOM,"Backspace",8)||t.from==s.from&&t.to==s.to+1&&t.insert.length==0&&Da(n.contentDOM,"Delete",46)))return!0;let o=t.insert.toString();if(n.state.facet(e5).some(c=>c(n,t.from,t.to,o)))return!0;n.inputState.composing>=0&&n.inputState.composing++;let l;if(t.from>=s.from&&t.to<=s.to&&t.to-t.from>=(s.to-s.from)/3&&(!i||i.main.empty&&i.main.from==t.from+t.insert.length)&&n.inputState.composing<0){let c=s.from<t.from?r.sliceDoc(s.from,t.from):"",u=s.to>t.to?r.sliceDoc(t.to,s.to):"";l=r.replaceSelection(n.state.toText(c+t.insert.sliceString(0,void 0,n.state.lineBreak)+u))}else{let c=r.changes(t),u=i&&!r.selection.main.eq(i.main)&&i.main.to<=c.newLength?i.main:void 0;if(r.selection.ranges.length>1&&n.inputState.composing>=0&&t.to<=s.to&&t.to>=s.to-10){let f=n.state.sliceDoc(t.from,t.to),h=f5(n)||n.state.doc.lineAt(s.head),d=s.to-t.to,m=s.to-s.from;l=r.changeByRange(g=>{if(g.from==s.from&&g.to==s.to)return{changes:c,range:u||g.map(c)};let _=g.to-d,v=_-f.length;if(g.to-g.from!=m||n.state.sliceDoc(v,_)!=f||h&&g.to>=h.from&&g.from<=h.to)return{range:g};let y=r.changes({from:v,to:_,insert:t.insert}),E=g.to-s.to;return{changes:y,range:u?Je.range(Math.max(0,u.anchor+E),Math.max(0,u.head+E)):g.map(y)}})}else l={changes:c,selection:u&&r.selection.replaceRange(u)}}let a="input.type";return n.composing&&(a+=".compose",n.inputState.compositionFirstChange&&(a+=".start",n.inputState.compositionFirstChange=!1)),n.dispatch(l,{scrollIntoView:!0,userEvent:a}),!0}else if(i&&!i.main.eq(s)){let r=!1,o="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(r=!0),o=n.inputState.lastSelectionOrigin),n.dispatch({selection:i,scrollIntoView:r,userEvent:o}),!0}else return!1}function WX(n,e,t,i){let s=Math.min(n.length,e.length),r=0;for(;r<s&&n.charCodeAt(r)==e.charCodeAt(r);)r++;if(r==s&&n.length==e.length)return null;let o=n.length,l=e.length;for(;o>0&&l>0&&n.charCodeAt(o-1)==e.charCodeAt(l-1);)o--,l--;if(i=="end"){let a=Math.max(0,r-Math.min(o,l));t-=o+a-r}if(o<r&&n.length<e.length){let a=t<=r&&t>=o?r-t:0;r-=a,l=r+(l-o),o=r}else if(l<r){let a=t<=r&&t>=l?r-t:0;r-=a,o=r+(o-l),l=r}return{from:r,toA:o,toB:l}}function UX(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:i,focusNode:s,focusOffset:r}=n.observer.selectionRange;return t&&(e.push(new qE(t,i)),(s!=t||r!=i)&&e.push(new qE(s,r))),e}function VX(n,e){if(n.length==0)return null;let t=n[0].pos,i=n.length==2?n[1].pos:t;return t>-1&&i>-1?Je.single(t+e,i+e):null}const FX={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Fp=Rt.ie&&Rt.ie_version<=11;class jX{constructor(e){this.view=e,this.active=!1,this.selectionRange=new MK,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.resizeContent=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let i of t)this.queue.push(i);(Rt.ie&&Rt.ie_version<=11||Rt.ios&&e.composing)&&t.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),Fp&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM),this.resizeContent=new ResizeObserver(()=>this.view.requestMeasure()),this.resizeContent.observe(e.contentDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runScrollHandlers(this.view,e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,i)=>t!=e[i]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,s=this.selectionRange;if(i.state.facet(zm)?i.root.activeElement!=this.dom:!Ch(i.dom,s))return;let r=s.anchorNode&&i.docView.nearest(s.anchorNode);if(r&&r.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(Rt.ie&&Rt.ie_version<=11||Rt.android&&Rt.chrome)&&!i.state.selection.main.empty&&s.focusNode&&gd(s.focusNode,s.focusOffset,s.anchorNode,s.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=Rt.safari&&e.root.nodeType==11&&RK(this.dom.ownerDocument)==this.dom&&HX(this.view)||pd(e.root);if(!t||this.selectionRange.eq(t))return!1;let i=Ch(this.dom,t);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&LK(this.dom,t)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(t),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(i.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=t)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,FX),Fp&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Fp&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var i;if(!this.delayedAndroidKey){let s=()=>{let r=this.delayedAndroidKey;r&&(this.clearDelayedAndroidKey(),!this.flush()&&r.force&&Da(this.dom,r.key,r.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(s)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}processRecords(){let e=this.queue;for(let r of this.observer.takeRecords())e.push(r);e.length&&(this.queue=[]);let t=-1,i=-1,s=!1;for(let r of e){let o=this.readMutation(r);o&&(o.typeOver&&(s=!0),t==-1?{from:t,to:i}=o:(t=Math.min(o.from,t),i=Math.max(o.to,i)))}return{from:t,to:i,typeOver:s}}readChange(){let{from:e,to:t,typeOver:i}=this.processRecords(),s=this.selectionChanged&&Ch(this.dom,this.selectionRange);return e<0&&!s?null:(e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1,new LX(this.view,e,t,i))}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return!1;let i=this.view.state,s=I5(this.view,t);return this.view.state==i&&this.view.update([]),s}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.dirty|=4),e.type=="childList"){let i=cA(t,e.previousSibling||e.target.previousSibling,-1),s=cA(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:s?t.posBefore(s):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,t,i,s;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect(),(s=this.resizeContent)===null||s===void 0||s.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function cA(n,e,t){for(;e;){let i=ei.get(e);if(i&&i.parent==n)return i;let s=e.parentNode;e=s!=n.dom?s:t>0?e.nextSibling:e.previousSibling}return null}function HX(n){let e=null;function t(a){a.preventDefault(),a.stopImmediatePropagation(),e=a.getTargetRanges()[0]}if(n.contentDOM.addEventListener("beforeinput",t,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",t,!0),!e)return null;let i=e.startContainer,s=e.startOffset,r=e.endContainer,o=e.endOffset,l=n.docView.domAtPos(n.state.selection.main.anchor);return gd(l.node,l.offset,r,o)&&([i,s,r,o]=[r,o,i,s]),{anchorNode:i,anchorOffset:s,focusNode:r,focusOffset:o}}class kt{constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: fixed; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(t=>this.update([t])),this.dispatch=this.dispatch.bind(this),this._root=e.root||BK(e.parent)||document,this.viewState=new lA(e.state||un.create(e)),this.plugins=this.state.facet(zc).map(t=>new Lp(t));for(let t of this.plugins)t.update(this);this.observer=new jX(this),this.inputState=new uX(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new zE(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(...e){this._dispatch(e.length==1&&e[0]instanceof Di?e[0]:this.state.update(...e))}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,i=!1,s,r=this.state;for(let h of e){if(h.startState!=r)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");r=h.state}if(this.destroyed){this.viewState.state=r;return}let o=this.hasFocus,l=0,a=null;e.some(h=>h.annotation(y5))?(this.inputState.notifiedFocused=o,l=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,a=S5(r,o),a||(l=1));let c=this.observer.delayedAndroidKey,u=null;if(c?(this.observer.clearDelayedAndroidKey(),u=this.observer.readChange(),(u&&!this.state.doc.eq(r.doc)||!this.state.selection.eq(r.selection))&&(u=null)):this.observer.clear(),r.facet(un.phrases)!=this.state.facet(un.phrases))return this.setState(r);s=_d.create(this,r,e),s.flags|=l;let f=this.viewState.scrollTarget;try{this.updateState=2;for(let h of e){if(f&&(f=f.map(h.changes)),h.scrollIntoView){let{main:d}=h.state.selection;f=new bd(d.empty?d:Je.cursor(d.head,d.head>d.anchor?-1:1))}for(let d of h.effects)d.is(jE)&&(f=d.value)}this.viewState.update(s,f),this.bidiCache=yd.update(this.bidiCache,s.changes),s.empty||(this.updatePlugins(s),this.inputState.update(s)),t=this.docView.update(s),this.state.facet(Gc)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(h=>h.isUserEvent("select.pointer")))}finally{this.updateState=0}if(s.startState.facet(Zf)!=s.state.facet(Zf)&&(this.viewState.mustMeasureContent=!0),(t||i||f||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!s.empty)for(let h of this.state.facet(Y1))h(s);(a||u)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),u&&!I5(this,u)&&c.force&&Da(this.contentDOM,c.key,c.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new lA(e),this.plugins=e.facet(zc).map(i=>new Lp(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView=new zE(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(zc),i=e.state.facet(zc);if(t!=i){let s=[];for(let r of i){let o=t.indexOf(r);if(o<0)s.push(new Lp(r));else{let l=this.plugins[o];l.mustUpdate=e,s.push(l)}}for(let r of this.plugins)r.mustUpdate!=e&&r.destroy(this);this.plugins=s,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let s of this.plugins)s.mustUpdate=e;for(let s=0;s<this.plugins.length;s++)this.plugins[s].update(this)}measure(e=!0){if(this.destroyed)return;this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,{scrollHeight:i,scrollTop:s,clientHeight:r}=this.scrollDOM,o=s>i-r-4?i:s;try{for(let l=0;;l++){this.updateState=1;let a=this.viewport,c=this.viewState.lineBlockAtHeight(o),u=this.viewState.measure(this);if(!u&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let f=[];u&4||([this.measureRequests,f]=[f,this.measureRequests]);let h=f.map(_=>{try{return _.read(this)}catch(v){return qs(this.state,v),uA}}),d=_d.create(this,this.state,[]),m=!1,g=!1;d.flags|=u,t?t.flags|=u:t=d,this.updateState=2,d.empty||(this.updatePlugins(d),this.inputState.update(d),this.updateAttrs(),m=this.docView.update(d));for(let _=0;_<f.length;_++)if(h[_]!=uA)try{let v=f[_];v.write&&v.write(h[_],this)}catch(v){qs(this.state,v)}if(this.viewState.editorHeight)if(this.viewState.scrollTarget)this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,g=!0;else{let _=this.viewState.lineBlockAt(c.from).top-c.top;(_>1||_<-1)&&(this.scrollDOM.scrollTop+=_,g=!0)}if(m&&this.docView.updateSelection(!0),this.viewport.from==a.from&&this.viewport.to==a.to&&!g&&this.measureRequests.length==0)break}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let l of this.state.facet(Y1))l(t)}get themeClasses(){return n0+" "+(this.state.facet(t0)?C5:w5)+" "+this.state.facet(Zf)}updateAttrs(){let e=fA(this,s5,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(zm)?"true":"false",class:"cm-content",style:`${Rt.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),fA(this,hb,t);let i=this.observer.ignore(()=>{let s=X1(this.contentDOM,this.contentAttrs,t),r=X1(this.dom,this.editorAttrs,e);return s||r});return this.editorAttrs=e,this.contentAttrs=t,i}showAnnouncements(e){let t=!0;for(let i of e)for(let s of i.effects)if(s.is(kt.announce)){t&&(this.announceDOM.textContent=""),t=!1;let r=this.announceDOM.appendChild(document.createElement("div"));r.textContent=s.value}}mountStyles(){this.styleModules=this.state.facet(Gc),$o.mount(this.root,this.styleModules.concat(BX).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(i=>i.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return Up(this,e,JE(this,e,t,i))}moveByGroup(e,t){return Up(this,e,JE(this,e,t,i=>aX(this,e.head,i)))}moveToLineBoundary(e,t,i=!0){return lX(this,e,t,i)}moveVertically(e,t,i){return Up(this,e,cX(this,e,t,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),d5(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let s=this.state.doc.lineAt(e),r=this.bidiSpans(s),o=r[Na.find(r,e-s.from,-1,t)];return ab(i,o.dir==ri.LTR==t>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(n5)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>qX)return a5(e.length);let t=this.textDirectionAt(e.from);for(let s of this.bidiCache)if(s.from==e.from&&s.dir==t)return s.order;let i=XK(e.text,t);return this.bidiCache.push(new yd(e.from,e.to,t,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Rt.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{WR(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return jE.of(new bd(typeof e=="number"?Je.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}static domEventHandlers(e){return ki.define(()=>({}),{eventHandlers:e})}static theme(e,t){let i=$o.newName(),s=[Zf.of(i),Gc.of(i0(`.${i}`,e))];return t&&t.dark&&s.push(t0.of(!0)),s}static baseTheme(e){return Ec.lowest(Gc.of(i0("."+n0,e,k5)))}static findFromDOM(e){var t;let i=e.querySelector(".cm-content"),s=i&&ei.get(i)||ei.get(e);return((t=s==null?void 0:s.rootView)===null||t===void 0?void 0:t.view)||null}}kt.styleModule=Gc;kt.inputHandler=e5;kt.focusChangeEffect=t5;kt.perLineTextDirection=n5;kt.exceptionSink=$R;kt.updateListener=Y1;kt.editable=zm;kt.mouseSelectionStyle=xR;kt.dragMovesSelection=ZR;kt.clickAddsSelectionRange=JR;kt.decorations=Fu;kt.atomicRanges=r5;kt.scrollMargins=o5;kt.darkTheme=t0;kt.contentAttributes=hb;kt.editorAttributes=s5;kt.lineWrapping=kt.contentAttributes.of({class:"cm-lineWrapping"});kt.announce=nn.define();const qX=4096,uA={};class yd{constructor(e,t,i,s){this.from=e,this.to=t,this.dir=i,this.order=s}static update(e,t){if(t.empty)return e;let i=[],s=e.length?e[e.length-1].dir:ri.LTR;for(let r=Math.max(0,e.length-10);r<e.length;r++){let o=e[r];o.dir==s&&!t.touchesRange(o.from,o.to)&&i.push(new yd(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.order))}return i}}function fA(n,e,t){for(let i=n.state.facet(e),s=i.length-1;s>=0;s--){let r=i[s],o=typeof r=="function"?r(n):r;o&&K1(o,t)}return t}const zX=Rt.mac?"mac":Rt.windows?"win":Rt.linux?"linux":"key";function GX(n,e){const t=n.split(/-(?!$)/);let i=t[t.length-1];i=="Space"&&(i=" ");let s,r,o,l;for(let a=0;a<t.length-1;++a){const c=t[a];if(/^(cmd|meta|m)$/i.test(c))l=!0;else if(/^a(lt)?$/i.test(c))s=!0;else if(/^(c|ctrl|control)$/i.test(c))r=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))e=="mac"?l=!0:r=!0;else throw new Error("Unrecognized modifier name: "+c)}return s&&(i="Alt-"+i),r&&(i="Ctrl-"+i),l&&(i="Meta-"+i),o&&(i="Shift-"+i),i}function xf(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}const KX=Ec.default(kt.domEventHandlers({keydown(n,e){return O5(T5(e.state),n,e,"editor")}})),Gm=Tt.define({enables:KX}),hA=new WeakMap;function T5(n){let e=n.facet(Gm),t=hA.get(e);return t||hA.set(e,t=YX(e.reduce((i,s)=>i.concat(s),[]))),t}function XX(n,e,t){return O5(T5(n.state),e,n,t)}let Oo=null;const QX=4e3;function YX(n,e=zX){let t=Object.create(null),i=Object.create(null),s=(o,l)=>{let a=i[o];if(a==null)i[o]=l;else if(a!=l)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},r=(o,l,a,c)=>{var u,f;let h=t[o]||(t[o]=Object.create(null)),d=l.split(/ (?!$)/).map(_=>GX(_,e));for(let _=1;_<d.length;_++){let v=d.slice(0,_).join(" ");s(v,!0),h[v]||(h[v]={preventDefault:!0,run:[y=>{let E=Oo={view:y,prefix:v,scope:o};return setTimeout(()=>{Oo==E&&(Oo=null)},QX),!0}]})}let m=d.join(" ");s(m,!1);let g=h[m]||(h[m]={preventDefault:!1,run:((f=(u=h._any)===null||u===void 0?void 0:u.run)===null||f===void 0?void 0:f.slice())||[]});a&&g.run.push(a),c&&(g.preventDefault=!0)};for(let o of n){let l=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let c of l){let u=t[c]||(t[c]=Object.create(null));u._any||(u._any={preventDefault:!1,run:[]});for(let f in u)u[f].run.push(o.any)}let a=o[e]||o.key;if(a)for(let c of l)r(c,a,o.run,o.preventDefault),o.shift&&r(c,"Shift-"+a,o.shift,o.preventDefault)}return t}function O5(n,e,t,i){let s=OK(e),r=Xi(s,0),o=$s(r)==s.length&&s!=" ",l="",a=!1;Oo&&Oo.view==t&&Oo.scope==i&&(l=Oo.prefix+" ",(a=p5.indexOf(e.keyCode)<0)&&(Oo=null));let c=new Set,u=m=>{if(m){for(let g of m.run)if(!c.has(g)&&(c.add(g),g(t,e)))return!0;m.preventDefault&&(a=!0)}return!1},f=n[i],h,d;if(f){if(u(f[l+xf(s,e,!o)]))return!0;if(o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Rt.windows&&e.ctrlKey&&e.altKey)&&(h=el[e.keyCode])&&h!=s){if(u(f[l+xf(h,e,!0)]))return!0;if(e.shiftKey&&(d=Wu[e.keyCode])!=s&&d!=h&&u(f[l+xf(d,e,!1)]))return!0}else if(o&&e.shiftKey&&u(f[l+xf(s,e,!0)]))return!0;if(u(f._any))return!0}return a}class Ef{constructor(e,t,i,s,r){this.className=e,this.left=t,this.top=i,this.width=s,this.height=r}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,i){if(i.empty){let s=e.coordsAtPos(i.head,i.assoc||1);if(!s)return[];let r=R5(e);return[new Ef(t,s.left-r.left,s.top-r.top,null,s.bottom-s.top)]}else return JX(e,t,i)}}function R5(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==ri.LTR?e.left:e.right-n.scrollDOM.clientWidth)-n.scrollDOM.scrollLeft,top:e.top-n.scrollDOM.scrollTop}}function dA(n,e,t){let i=Je.cursor(e);return{from:Math.max(t.from,n.moveToLineBoundary(i,!1,!0).from),to:Math.min(t.to,n.moveToLineBoundary(i,!0,!0).from),type:jn.Text}}function mA(n,e){let t=n.lineBlockAt(e);if(Array.isArray(t.type)){for(let i of t.type)if(i.to>e||i.to==e&&(i.to==t.to||i.type==jn.Text))return i}return t}function JX(n,e,t){if(t.to<=n.viewport.from||t.from>=n.viewport.to)return[];let i=Math.max(t.from,n.viewport.from),s=Math.min(t.to,n.viewport.to),r=n.textDirection==ri.LTR,o=n.contentDOM,l=o.getBoundingClientRect(),a=R5(n),c=window.getComputedStyle(o.firstChild),u=l.left+parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)),f=l.right-parseInt(c.paddingRight),h=mA(n,i),d=mA(n,s),m=h.type==jn.Text?h:null,g=d.type==jn.Text?d:null;if(n.lineWrapping&&(m&&(m=dA(n,i,m)),g&&(g=dA(n,s,g))),m&&g&&m.from==g.from)return v(y(t.from,t.to,m));{let w=m?y(t.from,null,m):E(h,!1),A=g?y(null,t.to,g):E(d,!0),I=[];return(m||h).to<(g||d).from-1?I.push(_(u,w.bottom,f,A.top)):w.bottom<A.top&&n.elementAtHeight((w.bottom+A.top)/2).type==jn.Text&&(w.bottom=A.top=(w.bottom+A.top)/2),v(w).concat(I).concat(v(A))}function _(w,A,I,R){return new Ef(e,w-a.left,A-a.top-.01,I-w,R-A+.01)}function v({top:w,bottom:A,horizontal:I}){let R=[];for(let D=0;D<I.length;D+=2)R.push(_(I[D],w,I[D+1],A));return R}function y(w,A,I){let R=1e9,D=-1e9,N=[];function W(Y,O,L,U,K){let te=n.coordsAtPos(Y,Y==I.to?-2:2),q=n.coordsAtPos(L,L==I.from?2:-2);R=Math.min(te.top,q.top,R),D=Math.max(te.bottom,q.bottom,D),K==ri.LTR?N.push(r&&O?u:te.left,r&&U?f:q.right):N.push(!r&&U?u:q.left,!r&&O?f:te.right)}let H=w??I.from,P=A??I.to;for(let Y of n.visibleRanges)if(Y.to>H&&Y.from<P)for(let O=Math.max(Y.from,H),L=Math.min(Y.to,P);;){let U=n.state.doc.lineAt(O);for(let K of n.bidiSpans(U)){let te=K.from+U.from,q=K.to+U.from;if(te>=L)break;q>O&&W(Math.max(te,O),w==null&&te<=H,Math.min(q,L),A==null&&q>=P,K.dir)}if(O=U.to+1,O>=L)break}return N.length==0&&W(H,w==null,P,A==null,n.textDirection),{top:R,bottom:D,horizontal:N}}function E(w,A){let I=l.top+(A?w.top:w.bottom);return{top:I,bottom:I,horizontal:[]}}}function ZX(n,e){return n.constructor==e.constructor&&n.eq(e)}class xX{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(Ih)!=e.state.facet(Ih)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&e.view.requestMeasure(this.measureReq)}setOrder(e){let t=0,i=e.facet(Ih);for(;t<i.length&&i[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}draw(e){if(e.length!=this.drawn.length||e.some((t,i)=>!ZX(t,this.drawn[i]))){let t=this.dom.firstChild,i=0;for(let s of e)s.update&&t&&s.constructor&&this.drawn[i].constructor&&s.update(t,this.drawn[i])?(t=t.nextSibling,i++):this.dom.insertBefore(s.draw(),t);for(;t;){let s=t.nextSibling;t.remove(),t=s}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Ih=Tt.define();function D5(n){return[ki.define(e=>new xX(e,n)),Ih.of(n)]}const N5=!Rt.ios,ju=Tt.define({combine(n){return Ar(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function $X(n={}){return[ju.of(n),eQ,tQ,nQ,i5.of(!0)]}function P5(n){return n.startState.facet(ju)!=n.state.facet(ju)}const eQ=D5({above:!0,markers(n){let{state:e}=n,t=e.facet(ju),i=[];for(let s of e.selection.ranges){let r=s==e.selection.main;if(s.empty?!r||N5:t.drawRangeCursor){let o=r?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",l=s.empty?s:Je.cursor(s.head,s.head>s.anchor?-1:1);for(let a of Ef.forRange(n,o,l))i.push(a)}}return i},update(n,e){n.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=P5(n);return t&&pA(n.state,e),n.docChanged||n.selectionSet||t},mount(n,e){pA(e.state,n)},class:"cm-cursorLayer"});function pA(n,e){e.style.animationDuration=n.facet(ju).cursorBlinkRate+"ms"}const tQ=D5({above:!1,markers(n){return n.state.selection.ranges.map(e=>e.empty?[]:Ef.forRange(n,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(n,e){return n.docChanged||n.selectionSet||n.viewportChanged||P5(n)},class:"cm-selectionLayer"}),M5={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};N5&&(M5[".cm-line"].caretColor="transparent !important");const nQ=Ec.highest(kt.theme(M5)),B5=nn.define({map(n,e){return n==null?null:e.mapPos(n)}}),Xc=Wi.define({create(){return null},update(n,e){return n!=null&&(n=e.changes.mapPos(n)),e.effects.reduce((t,i)=>i.is(B5)?i.value:t,n)}}),iQ=ki.fromClass(class{constructor(n){this.view=n,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(n){var e;let t=n.state.field(Xc);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(n.startState.field(Xc)!=t||n.docChanged||n.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let n=this.view.state.field(Xc),e=n!=null&&this.view.coordsAtPos(n);if(!e)return null;let t=this.view.scrollDOM.getBoundingClientRect();return{left:e.left-t.left+this.view.scrollDOM.scrollLeft,top:e.top-t.top+this.view.scrollDOM.scrollTop,height:e.bottom-e.top}}drawCursor(n){this.cursor&&(n?(this.cursor.style.left=n.left+"px",this.cursor.style.top=n.top+"px",this.cursor.style.height=n.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(n){this.view.state.field(Xc)!=n&&this.view.dispatch({effects:B5.of(n)})}},{eventHandlers:{dragover(n){this.setDropPos(this.view.posAtCoords({x:n.clientX,y:n.clientY}))},dragleave(n){(n.target==this.view.contentDOM||!this.view.contentDOM.contains(n.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function sQ(){return[Xc,iQ]}function gA(n,e,t,i,s){e.lastIndex=0;for(let r=n.iterRange(t,i),o=t,l;!r.next().done;o+=r.value.length)if(!r.lineBreak)for(;l=e.exec(r.value);)s(o+l.index,l)}function rQ(n,e){let t=n.visibleRanges;if(t.length==1&&t[0].from==n.viewport.from&&t[0].to==n.viewport.to)return t;let i=[];for(let{from:s,to:r}of t)s=Math.max(n.state.doc.lineAt(s).from,s-e),r=Math.min(n.state.doc.lineAt(r).to,r+e),i.length&&i[i.length-1].to>=s?i[i.length-1].to=r:i.push({from:s,to:r});return i}class oQ{constructor(e){const{regexp:t,decoration:i,decorate:s,boundary:r,maxLength:o=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,s)this.addMatch=(l,a,c,u)=>s(u,c,c+l[0].length,l,a);else if(typeof i=="function")this.addMatch=(l,a,c,u)=>{let f=i(l,a,c);f&&u(c,c+l[0].length,f)};else if(i)this.addMatch=(l,a,c,u)=>u(c,c+l[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=r,this.maxLength=o}createDeco(e){let t=new xo,i=t.add.bind(t);for(let{from:s,to:r}of rQ(e,this.maxLength))gA(e.state.doc,this.regexp,s,r,(o,l)=>this.addMatch(l,e,o,i));return t.finish()}updateDeco(e,t){let i=1e9,s=-1;return e.docChanged&&e.changes.iterChanges((r,o,l,a)=>{a>e.view.viewport.from&&l<e.view.viewport.to&&(i=Math.min(l,i),s=Math.max(a,s))}),e.viewportChanged||s-i>1e3?this.createDeco(e.view):s>-1?this.updateRange(e.view,t.map(e.changes),i,s):t}updateRange(e,t,i,s){for(let r of e.visibleRanges){let o=Math.max(r.from,i),l=Math.min(r.to,s);if(l>o){let a=e.state.doc.lineAt(o),c=a.to<l?e.state.doc.lineAt(l):a,u=Math.max(r.from,a.from),f=Math.min(r.to,c.to);if(this.boundary){for(;o>a.from;o--)if(this.boundary.test(a.text[o-1-a.from])){u=o;break}for(;l<c.to;l++)if(this.boundary.test(c.text[l-c.from])){f=l;break}}let h=[],d,m=(g,_,v)=>h.push(v.range(g,_));if(a==c)for(this.regexp.lastIndex=u-a.from;(d=this.regexp.exec(a.text))&&d.index<f-a.from;)this.addMatch(d,e,d.index+a.from,m);else gA(e.state.doc,this.regexp,u,f,(g,_)=>this.addMatch(_,e,g,m));t=t.update({filterFrom:u,filterTo:f,filter:(g,_)=>g<u||_>f,add:h})}}return t}}const s0=/x/.unicode!=null?"gu":"g",lQ=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,s0),aQ={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let jp=null;function cQ(){var n;if(jp==null&&typeof document<"u"&&document.body){let e=document.body.style;jp=((n=e.tabSize)!==null&&n!==void 0?n:e.MozTabSize)!=null}return jp||!1}const Th=Tt.define({combine(n){let e=Ar(n,{render:null,specialChars:lQ,addSpecialChars:null});return(e.replaceTabs=!cQ())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,s0)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,s0)),e}});function uQ(n={}){return[Th.of(n),fQ()]}let vA=null;function fQ(){return vA||(vA=ki.fromClass(class{constructor(n){this.view=n,this.decorations=Ut.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(n.state.facet(Th)),this.decorations=this.decorator.createDeco(n)}makeDecorator(n){return new oQ({regexp:n.specialChars,decoration:(e,t,i)=>{let{doc:s}=t.state,r=Xi(e[0],0);if(r==9){let o=s.lineAt(i),l=t.state.tabSize,a=yf(o.text,l,i-o.from);return Ut.replace({widget:new pQ((l-a%l)*this.view.defaultCharacterWidth)})}return this.decorationCache[r]||(this.decorationCache[r]=Ut.replace({widget:new mQ(n,r)}))},boundary:n.replaceTabs?void 0:/[^]/})}update(n){let e=n.state.facet(Th);n.startState.facet(Th)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(n.view)):this.decorations=this.decorator.updateDeco(n,this.decorations)}},{decorations:n=>n.decorations}))}const hQ="";function dQ(n){return n>=32?hQ:n==10?"":String.fromCharCode(9216+n)}class mQ extends rl{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=dQ(this.code),i=e.state.phrase("Control character")+" "+(aQ[this.code]||"0x"+this.code.toString(16)),s=this.options.render&&this.options.render(this.code,i,t);if(s)return s;let r=document.createElement("span");return r.textContent=t,r.title=i,r.setAttribute("aria-label",i),r.className="cm-specialChar",r}ignoreEvent(){return!1}}class pQ extends rl{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function gQ(){return bQ}const vQ=Ut.line({class:"cm-activeLine"}),bQ=ki.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=-1,t=[];for(let i of n.state.selection.ranges){let s=n.lineBlockAt(i.head);s.from>e&&(t.push(vQ.range(s.from)),e=s.from)}return Ut.set(t)}},{decorations:n=>n.decorations}),r0=2e3;function _Q(n,e,t){let i=Math.min(e.line,t.line),s=Math.max(e.line,t.line),r=[];if(e.off>r0||t.off>r0||e.col<0||t.col<0){let o=Math.min(e.off,t.off),l=Math.max(e.off,t.off);for(let a=i;a<=s;a++){let c=n.doc.line(a);c.length<=l&&r.push(Je.range(c.from+o,c.to+l))}}else{let o=Math.min(e.col,t.col),l=Math.max(e.col,t.col);for(let a=i;a<=s;a++){let c=n.doc.line(a),u=U1(c.text,o,n.tabSize,!0);if(u<0)r.push(Je.cursor(c.to));else{let f=U1(c.text,l,n.tabSize);r.push(Je.range(c.from+u,c.from+f))}}}return r}function yQ(n,e){let t=n.coordsAtPos(n.viewport.from);return t?Math.round(Math.abs((t.left-e)/n.defaultCharacterWidth)):-1}function bA(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1),i=n.state.doc.lineAt(t),s=t-i.from,r=s>r0?-1:s==i.length?yQ(n,e.clientX):yf(i.text,n.state.tabSize,t-i.from);return{line:i.number,col:r,off:s}}function SQ(n,e){let t=bA(n,e),i=n.state.selection;return t?{update(s){if(s.docChanged){let r=s.changes.mapPos(s.startState.doc.line(t.line).from),o=s.state.doc.lineAt(r);t={line:o.number,col:t.col,off:Math.min(t.off,o.length)},i=i.map(s.changes)}},get(s,r,o){let l=bA(n,s);if(!l)return i;let a=_Q(n.state,t,l);return a.length?o?Je.create(a.concat(i.ranges)):Je.create(a):i}}:null}function EQ(n){let e=(n==null?void 0:n.eventFilter)||(t=>t.altKey&&t.button==0);return kt.mouseSelectionStyle.of((t,i)=>e(i)?SQ(t,i):null)}const AQ={Alt:[18,n=>n.altKey],Control:[17,n=>n.ctrlKey],Shift:[16,n=>n.shiftKey],Meta:[91,n=>n.metaKey]},wQ={style:"cursor: crosshair"};function CQ(n={}){let[e,t]=AQ[n.key||"Alt"],i=ki.fromClass(class{constructor(s){this.view=s,this.isDown=!1}set(s){this.isDown!=s&&(this.isDown=s,this.view.update([]))}},{eventHandlers:{keydown(s){this.set(s.keyCode==e||t(s))},keyup(s){(s.keyCode==e||!t(s))&&this.set(!1)},mousemove(s){this.set(t(s))}}});return[i,kt.contentAttributes.of(s=>{var r;return!((r=s.plugin(i))===null||r===void 0)&&r.isDown?wQ:null})]}const $f="-10000px";class L5{constructor(e,t,i){this.facet=t,this.createTooltipView=i,this.input=e.state.facet(t),this.tooltips=this.input.filter(s=>s),this.tooltipViews=this.tooltips.map(i)}update(e){var t;let i=e.state.facet(this.facet),s=i.filter(o=>o);if(i===this.input){for(let o of this.tooltipViews)o.update&&o.update(e);return!1}let r=[];for(let o=0;o<s.length;o++){let l=s[o],a=-1;if(l){for(let c=0;c<this.tooltips.length;c++){let u=this.tooltips[c];u&&u.create==l.create&&(a=c)}if(a<0)r[o]=this.createTooltipView(l);else{let c=r[o]=this.tooltipViews[a];c.update&&c.update(e)}}}for(let o of this.tooltipViews)r.indexOf(o)<0&&(o.dom.remove(),(t=o.destroy)===null||t===void 0||t.call(o));return this.input=i,this.tooltips=s,this.tooltipViews=r,!0}}function kQ(n){let{win:e}=n;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const Hp=Tt.define({combine:n=>{var e,t,i;return{position:Rt.ios?"absolute":((e=n.find(s=>s.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=n.find(s=>s.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((i=n.find(s=>s.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||kQ}}}),_A=new WeakMap,W5=ki.fromClass(class{constructor(n){this.view=n,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let e=n.state.facet(Hp);this.position=e.position,this.parent=e.parent,this.classes=n.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new L5(n,Km,t=>this.createTooltip(t)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),n.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let n of this.manager.tooltipViews)this.intersectionObserver.observe(n.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(n){n.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(n);e&&this.observeIntersection();let t=e||n.geometryChanged,i=n.state.facet(Hp);if(i.position!=this.position){this.position=i.position;for(let s of this.manager.tooltipViews)s.dom.style.position=this.position;t=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let s of this.manager.tooltipViews)this.container.appendChild(s.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(n){let e=n.create(this.view);if(e.dom.classList.add("cm-tooltip"),n.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let t=document.createElement("div");t.className="cm-tooltip-arrow",e.dom.appendChild(t)}return e.dom.style.position=this.position,e.dom.style.top=$f,this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var n,e;this.view.win.removeEventListener("resize",this.measureSoon);for(let t of this.manager.tooltipViews)t.dom.remove(),(n=t.destroy)===null||n===void 0||n.call(t);(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let n=this.view.dom.getBoundingClientRect();return{editor:n,parent:this.parent?this.container.getBoundingClientRect():n,pos:this.manager.tooltips.map((e,t)=>{let i=this.manager.tooltipViews[t];return i.getCoords?i.getCoords(e.pos):this.view.coordsAtPos(e.pos)}),size:this.manager.tooltipViews.map(({dom:e})=>e.getBoundingClientRect()),space:this.view.state.facet(Hp).tooltipSpace(this.view)}}writeMeasure(n){var e;let{editor:t,space:i}=n,s=[];for(let r=0;r<this.manager.tooltips.length;r++){let o=this.manager.tooltips[r],l=this.manager.tooltipViews[r],{dom:a}=l,c=n.pos[r],u=n.size[r];if(!c||c.bottom<=Math.max(t.top,i.top)||c.top>=Math.min(t.bottom,i.bottom)||c.right<Math.max(t.left,i.left)-.1||c.left>Math.min(t.right,i.right)+.1){a.style.top=$f;continue}let f=o.arrow?l.dom.querySelector(".cm-tooltip-arrow"):null,h=f?7:0,d=u.right-u.left,m=(e=_A.get(l))!==null&&e!==void 0?e:u.bottom-u.top,g=l.offset||TQ,_=this.view.textDirection==ri.LTR,v=u.width>i.right-i.left?_?i.left:i.right-u.width:_?Math.min(c.left-(f?14:0)+g.x,i.right-d):Math.max(i.left,c.left-d+(f?14:0)-g.x),y=!!o.above;!o.strictSide&&(y?c.top-(u.bottom-u.top)-g.y<i.top:c.bottom+(u.bottom-u.top)+g.y>i.bottom)&&y==i.bottom-c.bottom>c.top-i.top&&(y=!y);let E=(y?c.top-i.top:i.bottom-c.bottom)-h;if(E<m&&l.resize!==!1){if(E<this.view.defaultLineHeight){a.style.top=$f;continue}_A.set(l,m),a.style.height=(m=E)+"px"}else a.style.height&&(a.style.height="");let w=y?c.top-m-h-g.y:c.bottom+h+g.y,A=v+d;if(l.overlap!==!0)for(let I of s)I.left<A&&I.right>v&&I.top<w+m&&I.bottom>w&&(w=y?I.top-m-2-h:I.bottom+h+2);this.position=="absolute"?(a.style.top=w-n.parent.top+"px",a.style.left=v-n.parent.left+"px"):(a.style.top=w+"px",a.style.left=v+"px"),f&&(f.style.left=`${c.left+(_?g.x:-g.x)-(v+14-7)}px`),l.overlap!==!0&&s.push({left:v,top:w,right:A,bottom:w+m}),a.classList.toggle("cm-tooltip-above",y),a.classList.toggle("cm-tooltip-below",!y),l.positioned&&l.positioned(n.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let n of this.manager.tooltipViews)n.dom.style.top=$f}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),IQ=kt.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:`${7}px`,width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:`${7}px solid transparent`,borderRight:`${7}px solid transparent`},".cm-tooltip-above &":{bottom:`-${7}px`,"&:before":{borderTop:`${7}px solid #bbb`},"&:after":{borderTop:`${7}px solid #f5f5f5`,bottom:"1px"}},".cm-tooltip-below &":{top:`-${7}px`,"&:before":{borderBottom:`${7}px solid #bbb`},"&:after":{borderBottom:`${7}px solid #f5f5f5`,top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),TQ={x:0,y:0},Km=Tt.define({enables:[W5,IQ]}),Sd=Tt.define();class mb{constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new L5(e,Sd,t=>this.createHostedView(t))}static create(e){return new mb(e)}createHostedView(e){let t=e.create(this.view);return t.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(t.dom),this.mounted&&t.mount&&t.mount(this.view),t}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}}const OQ=Km.compute([Sd],n=>{let e=n.facet(Sd).filter(t=>t);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.filter(t=>t.end!=null).map(t=>t.end)),create:mb.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class RQ{constructor(e,t,i,s,r){this.view=e,this.source=t,this.field=i,this.setHover=s,this.hoverTime=r,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:e}=this,t=this.view.contentDOM.contains(e.target)?this.view.posAtCoords(e):null;if(t==null)return;let i=this.view.coordsAtPos(t);if(i==null||e.y<i.top||e.y>i.bottom||e.x<i.left-this.view.defaultCharacterWidth||e.x>i.right+this.view.defaultCharacterWidth)return;let s=this.view.bidiSpans(this.view.state.doc.lineAt(t)).find(l=>l.from<=t&&l.to>=t),r=s&&s.dir==ri.RTL?-1:1,o=this.source(this.view,t,e.x<i.left?-r:r);if(o!=null&&o.then){let l=this.pending={pos:t};o.then(a=>{this.pending==l&&(this.pending=null,a&&this.view.dispatch({effects:this.setHover.of(a)}))},a=>qs(this.view.state,a,"hover tooltip"))}else o&&this.view.dispatch({effects:this.setHover.of(o)})}mousemove(e){var t;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let i=this.active;if(i&&!yA(this.lastMove.target)||this.pending){let{pos:s}=i||this.pending,r=(t=i==null?void 0:i.end)!==null&&t!==void 0?t:s;(s==r?this.view.posAtCoords(this.lastMove)!=s:!DQ(this.view,s,r,e.clientX,e.clientY,6))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&!yA(e.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function yA(n){for(let e=n;e;e=e.parentNode)if(e.nodeType==1&&e.classList.contains("cm-tooltip"))return!0;return!1}function DQ(n,e,t,i,s,r){let o=document.createRange(),l=n.domAtPos(e),a=n.domAtPos(t);o.setEnd(a.node,a.offset),o.setStart(l.node,l.offset);let c=o.getClientRects();o.detach();for(let u=0;u<c.length;u++){let f=c[u];if(Math.max(f.top-s,s-f.bottom,f.left-i,i-f.right)<=r)return!0}return!1}function NQ(n,e={}){let t=nn.define(),i=Wi.define({create(){return null},update(s,r){if(s&&(e.hideOnChange&&(r.docChanged||r.selection)||e.hideOn&&e.hideOn(r,s)))return null;if(s&&r.docChanged){let o=r.changes.mapPos(s.pos,-1,Ss.TrackDel);if(o==null)return null;let l=Object.assign(Object.create(null),s);l.pos=o,s.end!=null&&(l.end=r.changes.mapPos(s.end)),s=l}for(let o of r.effects)o.is(t)&&(s=o.value),o.is(MQ)&&(s=null);return s},provide:s=>Sd.from(s)});return[i,ki.define(s=>new RQ(s,n,i,t,e.hoverTime||300)),OQ]}function PQ(n,e){let t=n.plugin(W5);if(!t)return null;let i=t.manager.tooltips.indexOf(e);return i<0?null:t.manager.tooltipViews[i]}const MQ=nn.define(),SA=Tt.define({combine(n){let e,t;for(let i of n)e=e||i.topContainer,t=t||i.bottomContainer;return{topContainer:e,bottomContainer:t}}});function Hu(n,e){let t=n.plugin(U5),i=t?t.specs.indexOf(e):-1;return i>-1?t.panels[i]:null}const U5=ki.fromClass(class{constructor(n){this.input=n.state.facet(qu),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(n));let e=n.state.facet(SA);this.top=new eh(n,!0,e.topContainer),this.bottom=new eh(n,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(n){let e=n.state.facet(SA);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new eh(n.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new eh(n.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=n.state.facet(qu);if(t!=this.input){let i=t.filter(a=>a),s=[],r=[],o=[],l=[];for(let a of i){let c=this.specs.indexOf(a),u;c<0?(u=a(n.view),l.push(u)):(u=this.panels[c],u.update&&u.update(n)),s.push(u),(u.top?r:o).push(u)}this.specs=i,this.panels=s,this.top.sync(r),this.bottom.sync(o);for(let a of l)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}else for(let i of this.panels)i.update&&i.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>kt.scrollMargins.of(e=>{let t=e.plugin(n);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class eh{constructor(e,t,i){this.view=e,this.top=t,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=EA(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=EA(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function EA(n){let e=n.nextSibling;return n.remove(),e}const qu=Tt.define({enables:U5});class Xr extends Kl{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Xr.prototype.elementClass="";Xr.prototype.toDOM=void 0;Xr.prototype.mapMode=Ss.TrackBefore;Xr.prototype.startSide=Xr.prototype.endSide=-1;Xr.prototype.point=!0;const Oh=Tt.define(),BQ={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>On.empty,lineMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},lu=Tt.define();function V5(n){return[F5(),lu.of(Object.assign(Object.assign({},BQ),n))]}const o0=Tt.define({combine:n=>n.some(e=>e)});function F5(n){let e=[LQ];return n&&n.fixed===!1&&e.push(o0.of(!0)),e}const LQ=ki.fromClass(class{constructor(n){this.view=n,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=n.state.facet(lu).map(e=>new wA(n,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!n.state.facet(o0),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}update(n){if(this.updateGutters(n)){let e=this.prevViewport,t=n.view.viewport,i=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(i<(t.to-t.from)*.8)}n.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(o0)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&this.dom.remove();let t=On.iter(this.view.state.facet(Oh),this.view.viewport.from),i=[],s=this.gutters.map(r=>new WQ(r,this.view.viewport,-this.view.documentPadding.top));for(let r of this.view.viewportLineBlocks){let o;if(Array.isArray(r.type)){for(let l of r.type)if(l.type==jn.Text){o=l;break}}else o=r.type==jn.Text?r:void 0;if(o){i.length&&(i=[]),j5(t,i,r.from);for(let l of s)l.line(this.view,o,i)}}for(let r of s)r.finish();n&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(n){let e=n.startState.facet(lu),t=n.state.facet(lu),i=n.docChanged||n.heightChanged||n.viewportChanged||!On.eq(n.startState.facet(Oh),n.state.facet(Oh),n.view.viewport.from,n.view.viewport.to);if(e==t)for(let s of this.gutters)s.update(n)&&(i=!0);else{i=!0;let s=[];for(let r of t){let o=e.indexOf(r);o<0?s.push(new wA(this.view,r)):(this.gutters[o].update(n),s.push(this.gutters[o]))}for(let r of this.gutters)r.dom.remove(),s.indexOf(r)<0&&r.destroy();for(let r of s)this.dom.appendChild(r.dom);this.gutters=s}return i}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove()}},{provide:n=>kt.scrollMargins.of(e=>{let t=e.plugin(n);return!t||t.gutters.length==0||!t.fixed?null:e.textDirection==ri.LTR?{left:t.dom.offsetWidth}:{right:t.dom.offsetWidth}})});function AA(n){return Array.isArray(n)?n:[n]}function j5(n,e,t){for(;n.value&&n.from<=t;)n.from==t&&e.push(n.value),n.next()}class WQ{constructor(e,t,i){this.gutter=e,this.height=i,this.i=0,this.cursor=On.iter(e.markers,t.from)}line(e,t,i){let s=[];j5(this.cursor,s,t.from),i.length&&(s=s.concat(i));let r=this.gutter.config.lineMarker(e,t,s);r&&s.unshift(r);let o=this.gutter;if(s.length==0&&!o.config.renderEmptyElements)return;let l=t.top-this.height;if(this.i==o.elements.length){let a=new H5(e,t.height,l,s);o.elements.push(a),o.dom.appendChild(a.dom)}else o.elements[this.i].update(e,t.height,l,s);this.height=t.bottom,this.i++}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class wA{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in t.domEventHandlers)this.dom.addEventListener(i,s=>{let r=s.target,o;if(r!=this.dom&&this.dom.contains(r)){for(;r.parentNode!=this.dom;)r=r.parentNode;let a=r.getBoundingClientRect();o=(a.top+a.bottom)/2}else o=s.clientY;let l=e.lineBlockAtHeight(o-e.documentTop);t.domEventHandlers[i](e,l,s)&&s.preventDefault()});this.markers=AA(t.markers(e)),t.initialSpacer&&(this.spacer=new H5(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=AA(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let s=this.config.updateSpacer(this.spacer.markers[0],e);s!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[s])}let i=e.view.viewport;return!On.eq(this.markers,t,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class H5{constructor(e,t,i,s){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,i,s)}update(e,t,i,s){this.height!=t&&(this.dom.style.height=(this.height=t)+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),UQ(this.markers,s)||this.setMarkers(e,s)}setMarkers(e,t){let i="cm-gutterElement",s=this.dom.firstChild;for(let r=0,o=0;;){let l=o,a=r<t.length?t[r++]:null,c=!1;if(a){let u=a.elementClass;u&&(i+=" "+u);for(let f=o;f<this.markers.length;f++)if(this.markers[f].compare(a)){l=f,c=!0;break}}else l=this.markers.length;for(;o<l;){let u=this.markers[o++];if(u.toDOM){u.destroy(s);let f=s.nextSibling;s.remove(),s=f}}if(!a)break;a.toDOM&&(c?s=s.nextSibling:this.dom.insertBefore(a.toDOM(e),s)),c&&o++}this.dom.className=i,this.markers=t}destroy(){this.setMarkers(null,[])}}function UQ(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].compare(e[t]))return!1;return!0}const VQ=Tt.define(),Sa=Tt.define({combine(n){return Ar(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let i=Object.assign({},e);for(let s in t){let r=i[s],o=t[s];i[s]=r?(l,a,c)=>r(l,a,c)||o(l,a,c):o}return i}})}});class qp extends Xr{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function zp(n,e){return n.state.facet(Sa).formatNumber(e,n.state)}const FQ=lu.compute([Sa],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(VQ)},lineMarker(e,t,i){return i.some(s=>s.toDOM)?null:new qp(zp(e,e.state.doc.lineAt(t.from).number))},lineMarkerChange:e=>e.startState.facet(Sa)!=e.state.facet(Sa),initialSpacer(e){return new qp(zp(e,CA(e.state.doc.lines)))},updateSpacer(e,t){let i=zp(t.view,CA(t.view.state.doc.lines));return i==e.number?e:new qp(i)},domEventHandlers:n.facet(Sa).domEventHandlers}));function jQ(n={}){return[Sa.of(n),F5(),FQ]}function CA(n){let e=9;for(;e<n;)e=e*10+9;return e}const HQ=new class extends Xr{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},qQ=Oh.compute(["selection"],n=>{let e=[],t=-1;for(let i of n.selection.ranges){let s=n.doc.lineAt(i.head).from;s>t&&(t=s,e.push(HQ.range(s)))}return On.of(e)});function zQ(){return qQ}const q5=1024;let GQ=0;class Gp{constructor(e,t){this.from=e,this.to=t}}class ln{constructor(e={}){this.id=GQ++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Bs.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}}ln.closedBy=new ln({deserialize:n=>n.split(" ")});ln.openedBy=new ln({deserialize:n=>n.split(" ")});ln.group=new ln({deserialize:n=>n.split(" ")});ln.contextHash=new ln({perNode:!0});ln.lookAhead=new ln({perNode:!0});ln.mounted=new ln({perNode:!0});const KQ=Object.create(null);class Bs{constructor(e,t,i,s=0){this.name=e,this.props=t,this.id=i,this.flags=s}static define(e){let t=e.props&&e.props.length?Object.create(null):KQ,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),s=new Bs(e.name||"",t,e.id,i);if(e.props){for(let r of e.props)if(Array.isArray(r)||(r=r(s)),r){if(r[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[r[0].id]=r[1]}}return s}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(ln.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let s of i.split(" "))t[s]=e[i];return i=>{for(let s=i.prop(ln.group),r=-1;r<(s?s.length:0);r++){let o=t[r<0?i.name:s[r]];if(o)return o}}}}Bs.none=new Bs("",Object.create(null),0,8);class pb{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let s=null;for(let r of e){let o=r(i);o&&(s||(s=Object.assign({},i.props)),s[o[0].id]=o[1])}t.push(s?new Bs(i.name,s,i.id,i.flags):i)}return new pb(t)}}const th=new WeakMap,kA=new WeakMap;var Yi;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(Yi||(Yi={}));class wi{constructor(e,t,i,s,r){if(this.type=e,this.children=t,this.positions=i,this.length=s,this.props=null,r&&r.length){this.props=Object.create(null);for(let[o,l]of r)this.props[typeof o=="number"?o:o.id]=l}}toString(){let e=this.prop(ln.mounted);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let s=i.toString();s&&(t&&(t+=","),t+=s)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new wd(this.topNode,e)}cursorAt(e,t=0,i=0){let s=th.get(this)||this.topNode,r=new wd(s);return r.moveTo(e,t),th.set(this,r._tree),r}get topNode(){return new ao(this,0,0,null)}resolve(e,t=0){let i=tc(th.get(this)||this.topNode,e,t,!1);return th.set(this,i),i}resolveInner(e,t=0){let i=tc(kA.get(this)||this.topNode,e,t,!0);return kA.set(this,i),i}iterate(e){let{enter:t,leave:i,from:s=0,to:r=this.length}=e;for(let o=this.cursor((e.mode||0)|Yi.IncludeAnonymous);;){let l=!1;if(o.from<=r&&o.to>=s&&(o.type.isAnonymous||t(o)!==!1)){if(o.firstChild())continue;l=!0}for(;l&&i&&!o.type.isAnonymous&&i(o),!o.nextSibling();){if(!o.parent())return;l=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:bb(Bs.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,s)=>new wi(this.type,t,i,s,this.propValues),e.makeTree||((t,i,s)=>new wi(Bs.none,t,i,s)))}static build(e){return QQ(e)}}wi.empty=new wi(Bs.none,[],[],0);class gb{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new gb(this.buffer,this.index)}}class oa{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return Bs.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],s=this.set.types[t],r=s.name;if(/\W/.test(r)&&!s.isError&&(r=JSON.stringify(r)),e+=4,i==e)return r;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return r+"("+o.join(",")+")"}findChild(e,t,i,s,r){let{buffer:o}=this,l=-1;for(let a=e;a!=t&&!(z5(r,s,o[a+1],o[a+2])&&(l=a,i>0));a=o[a+3]);return l}slice(e,t,i){let s=this.buffer,r=new Uint16Array(t-e),o=0;for(let l=e,a=0;l<t;){r[a++]=s[l++],r[a++]=s[l++]-i;let c=r[a++]=s[l++]-i;r[a++]=s[l++]-e,o=Math.max(o,c)}return new oa(r,o,this.set)}}function z5(n,e,t,i){switch(n){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function G5(n,e){let t=n.childBefore(e);for(;t;){let i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(n=t,t=i.prevSibling):t=i}return n}function tc(n,e,t,i){for(var s;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let o=!i&&n instanceof ao&&n.index<0?null:n.parent;if(!o)return n;n=o}let r=i?0:Yi.IgnoreOverlays;if(i)for(let o=n,l=o.parent;l;o=l,l=o.parent)o instanceof ao&&o.index<0&&((s=l.enter(e,t,r))===null||s===void 0?void 0:s.from)!=o.from&&(n=l);for(;;){let o=n.enter(e,t,r);if(!o)return n;n=o}}class ao{constructor(e,t,i,s){this._tree=e,this.from=t,this.index=i,this._parent=s}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,s,r=0){for(let o=this;;){for(let{children:l,positions:a}=o._tree,c=t>0?l.length:-1;e!=c;e+=t){let u=l[e],f=a[e]+o.from;if(z5(s,i,f,f+u.length)){if(u instanceof oa){if(r&Yi.ExcludeBuffers)continue;let h=u.findChild(0,u.buffer.length,t,i-f,s);if(h>-1)return new Lo(new XQ(o,u,e,f),null,h)}else if(r&Yi.IncludeAnonymous||!u.type.isAnonymous||vb(u)){let h;if(!(r&Yi.IgnoreMounts)&&u.props&&(h=u.prop(ln.mounted))&&!h.overlay)return new ao(h.tree,f,e,o);let d=new ao(u,f,e,o);return r&Yi.IncludeAnonymous||!d.type.isAnonymous?d:d.nextChild(t<0?u.children.length-1:0,t,i,s)}}}if(r&Yi.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let s;if(!(i&Yi.IgnoreOverlays)&&(s=this._tree.prop(ln.mounted))&&s.overlay){let r=e-this.from;for(let{from:o,to:l}of s.overlay)if((t>0?o<=r:o<r)&&(t<0?l>=r:l>r))return new ao(s.tree,s.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new wd(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,t=0){return tc(this,e,t,!1)}resolveInner(e,t=0){return tc(this,e,t,!0)}enterUnfinishedNodesBefore(e){return G5(this,e)}getChild(e,t=null,i=null){let s=Ed(this,e,t,i);return s.length?s[0]:null}getChildren(e,t=null,i=null){return Ed(this,e,t,i)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return Ad(this,e)}}function Ed(n,e,t,i){let s=n.cursor(),r=[];if(!s.firstChild())return r;if(t!=null){for(;!s.type.is(t);)if(!s.nextSibling())return r}for(;;){if(i!=null&&s.type.is(i))return r;if(s.type.is(e)&&r.push(s.node),!s.nextSibling())return i==null?r:[]}}function Ad(n,e,t=e.length-1){for(let i=n.parent;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}class XQ{constructor(e,t,i,s){this.parent=e,this.buffer=t,this.index=i,this.start=s}}class Lo{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,i){this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,t,i){let{buffer:s}=this.context,r=s.findChild(this.index+4,s.buffer[this.index+3],e,t-this.context.start,i);return r<0?null:new Lo(this.context,this,r)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&Yi.ExcludeBuffers)return null;let{buffer:s}=this.context,r=s.findChild(this.index+4,s.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return r<0?null:new Lo(this.context,this,r)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Lo(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Lo(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}cursor(e=0){return new wd(this,e)}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,s=this.index+4,r=i.buffer[this.index+3];if(r>s){let o=i.buffer[this.index+1];e.push(i.slice(s,r,o)),t.push(0)}return new wi(this.type,e,t,this.to-this.from)}resolve(e,t=0){return tc(this,e,t,!1)}resolveInner(e,t=0){return tc(this,e,t,!0)}enterUnfinishedNodesBefore(e){return G5(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,i=null){let s=Ed(this,e,t,i);return s.length?s[0]:null}getChildren(e,t=null,i=null){return Ed(this,e,t,i)}get node(){return this}matchContext(e){return Ad(this,e)}}class wd{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof ao)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:s}=this.buffer;return this.type=t||s.set.types[s.buffer[e]],this.from=i+s.buffer[e+1],this.to=i+s.buffer[e+2],!0}yield(e){return e?e instanceof ao?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:s}=this.buffer,r=s.findChild(this.index+4,s.buffer[this.index+3],e,t-this.buffer.start,i);return r<0?!1:(this.stack.push(this.index),this.yieldBuf(r))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?i&Yi.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Yi.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Yi.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let s=i<0?0:this.stack[i]+4;if(this.index!=s)return this.yieldBuf(t.findChild(s,this.index,-1,0,4))}else{let s=t.buffer[this.index+3];if(s<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(s)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:s}=this;if(s){if(e>0){if(this.index<s.buffer.buffer.length)return!1}else for(let r=0;r<this.index;r++)if(s.buffer.buffer[r+3]<this.index)return!1;({index:t,parent:i}=s)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let r=t+e,o=e<0?-1:i._tree.children.length;r!=o;r+=e){let l=i._tree.children[r];if(this.mode&Yi.IncludeAnonymous||l instanceof oa||!l.type.isAnonymous||vb(l))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer){e:for(let s=this.index,r=this.stack.length;r>=0;){for(let o=e;o;o=o._parent)if(o.index==s){if(s==this.index)return o;t=o,i=r+1;break e}s=this.stack[--r]}}for(let s=i;s<this.stack.length;s++)t=new Lo(this.buffer,t,this.stack[s]);return this.bufferNode=new Lo(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let s=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(s=!0)}for(;s&&t&&t(this),s=this.type.isAnonymous,!this.nextSibling();){if(!i)return;this.parent(),i--,s=!0}}}matchContext(e){if(!this.buffer)return Ad(this.node,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let s=e.length-1,r=this.stack.length-1;s>=0;r--){if(r<0)return Ad(this.node,e,s);let o=i[t.buffer[this.stack[r]]];if(!o.isAnonymous){if(e[s]&&e[s]!=o.name)return!1;s--}}return!0}}function vb(n){return n.children.some(e=>e instanceof oa||!e.type.isAnonymous||vb(e))}function QQ(n){var e;let{buffer:t,nodeSet:i,maxBufferLength:s=q5,reused:r=[],minRepeatType:o=i.types.length}=n,l=Array.isArray(t)?new gb(t,t.length):t,a=i.types,c=0,u=0;function f(w,A,I,R,D){let{id:N,start:W,end:H,size:P}=l,Y=u;for(;P<0;)if(l.next(),P==-1){let te=r[N];I.push(te),R.push(W-w);return}else if(P==-3){c=N;return}else if(P==-4){u=N;return}else throw new RangeError(`Unrecognized record size: ${P}`);let O=a[N],L,U,K=W-w;if(H-W<=s&&(U=g(l.pos-A,D))){let te=new Uint16Array(U.size-U.skip),q=l.pos-U.size,x=te.length;for(;l.pos>q;)x=_(U.start,te,x);L=new oa(te,H-U.start,i),K=U.start-w}else{let te=l.pos-P;l.next();let q=[],x=[],Z=N>=o?N:-1,V=0,ce=H;for(;l.pos>te;)Z>=0&&l.id==Z&&l.size>=0?(l.end<=ce-s&&(d(q,x,W,V,l.end,ce,Z,Y),V=q.length,ce=l.end),l.next()):f(W,te,q,x,Z);if(Z>=0&&V>0&&V<q.length&&d(q,x,W,V,W,ce,Z,Y),q.reverse(),x.reverse(),Z>-1&&V>0){let pe=h(O);L=bb(O,q,x,0,q.length,0,H-W,pe,pe)}else L=m(O,q,x,H-W,Y-H)}I.push(L),R.push(K)}function h(w){return(A,I,R)=>{let D=0,N=A.length-1,W,H;if(N>=0&&(W=A[N])instanceof wi){if(!N&&W.type==w&&W.length==R)return W;(H=W.prop(ln.lookAhead))&&(D=I[N]+W.length+H)}return m(w,A,I,R,D)}}function d(w,A,I,R,D,N,W,H){let P=[],Y=[];for(;w.length>R;)P.push(w.pop()),Y.push(A.pop()+I-D);w.push(m(i.types[W],P,Y,N-D,H-N)),A.push(D-I)}function m(w,A,I,R,D=0,N){if(c){let W=[ln.contextHash,c];N=N?[W].concat(N):[W]}if(D>25){let W=[ln.lookAhead,D];N=N?[W].concat(N):[W]}return new wi(w,A,I,R,N)}function g(w,A){let I=l.fork(),R=0,D=0,N=0,W=I.end-s,H={size:0,start:0,skip:0};e:for(let P=I.pos-w;I.pos>P;){let Y=I.size;if(I.id==A&&Y>=0){H.size=R,H.start=D,H.skip=N,N+=4,R+=4,I.next();continue}let O=I.pos-Y;if(Y<0||O<P||I.start<W)break;let L=I.id>=o?4:0,U=I.start;for(I.next();I.pos>O;){if(I.size<0)if(I.size==-3)L+=4;else break e;else I.id>=o&&(L+=4);I.next()}D=U,R+=Y,N+=L}return(A<0||R==w)&&(H.size=R,H.start=D,H.skip=N),H.size>4?H:void 0}function _(w,A,I){let{id:R,start:D,end:N,size:W}=l;if(l.next(),W>=0&&R<o){let H=I;if(W>4){let P=l.pos-(W-4);for(;l.pos>P;)I=_(w,A,I)}A[--I]=H,A[--I]=N-w,A[--I]=D-w,A[--I]=R}else W==-3?c=R:W==-4&&(u=R);return I}let v=[],y=[];for(;l.pos>0;)f(n.start||0,n.bufferStart||0,v,y,-1);let E=(e=n.length)!==null&&e!==void 0?e:v.length?y[0]+v[0].length:0;return new wi(a[n.topID],v.reverse(),y.reverse(),E)}const IA=new WeakMap;function Rh(n,e){if(!n.isAnonymous||e instanceof oa||e.type!=n)return 1;let t=IA.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=n||!(i instanceof wi)){t=1;break}t+=Rh(n,i)}IA.set(e,t)}return t}function bb(n,e,t,i,s,r,o,l,a){let c=0;for(let m=i;m<s;m++)c+=Rh(n,e[m]);let u=Math.ceil(c*1.5/8),f=[],h=[];function d(m,g,_,v,y){for(let E=_;E<v;){let w=E,A=g[E],I=Rh(n,m[E]);for(E++;E<v;E++){let R=Rh(n,m[E]);if(I+R>=u)break;I+=R}if(E==w+1){if(I>u){let R=m[w];d(R.children,R.positions,0,R.children.length,g[w]+y);continue}f.push(m[w])}else{let R=g[E-1]+m[E-1].length-A;f.push(bb(n,m,g,w,E,A,R,null,a))}h.push(A+y-r)}}return d(e,t,i,s,0),(l||a)(f,h,o)}class Nl{constructor(e,t,i,s,r=!1,o=!1){this.from=e,this.to=t,this.tree=i,this.offset=s,this.open=(r?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],i=!1){let s=[new Nl(0,e.length,e,0,!1,i)];for(let r of t)r.to>e.length&&s.push(r);return s}static applyChanges(e,t,i=128){if(!t.length)return e;let s=[],r=1,o=e.length?e[0]:null;for(let l=0,a=0,c=0;;l++){let u=l<t.length?t[l]:null,f=u?u.fromA:1e9;if(f-a>=i)for(;o&&o.from<f;){let h=o;if(a>=h.from||f<=h.to||c){let d=Math.max(h.from,a)-c,m=Math.min(h.to,f)-c;h=d>=m?null:new Nl(d,m,h.tree,h.offset+c,l>0,!!u)}if(h&&s.push(h),o.to>f)break;o=r<e.length?e[r++]:null}if(!u)break;a=u.toA,c=u.toA-u.toB}return s}}class K5{startParse(e,t,i){return typeof e=="string"&&(e=new YQ(e)),i=i?i.length?i.map(s=>new Gp(s.from,s.to)):[new Gp(0,0)]:[new Gp(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let s=this.startParse(e,t,i);for(;;){let r=s.advance();if(r)return r}}}class YQ{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new ln({perNode:!0});let JQ=0;class Nr{constructor(e,t,i){this.set=e,this.base=t,this.modified=i,this.id=JQ++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let t=new Nr([],null,[]);if(t.set.push(t),e)for(let i of e.set)t.set.push(i);return t}static defineModifier(){let e=new Cd;return t=>t.modified.indexOf(e)>-1?t:Cd.get(t.base||t,t.modified.concat(e).sort((i,s)=>i.id-s.id))}}let ZQ=0;class Cd{constructor(){this.instances=[],this.id=ZQ++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find(l=>l.base==e&&xQ(t,l.modified));if(i)return i;let s=[],r=new Nr(s,e,t);for(let l of t)l.instances.push(r);let o=$Q(t);for(let l of e.set)if(!l.modified.length)for(let a of o)s.push(Cd.get(l,a));return r}}function xQ(n,e){return n.length==e.length&&n.every((t,i)=>t==e[i])}function $Q(n){let e=[[]];for(let t=0;t<n.length;t++)for(let i=0,s=e.length;i<s;i++)e.push(e[i].concat(n[t]));return e.sort((t,i)=>i.length-t.length)}function X5(n){let e=Object.create(null);for(let t in n){let i=n[t];Array.isArray(i)||(i=[i]);for(let s of t.split(" "))if(s){let r=[],o=2,l=s;for(let f=0;;){if(l=="..."&&f>0&&f+3==s.length){o=1;break}let h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!h)throw new RangeError("Invalid path: "+s);if(r.push(h[0]=="*"?"":h[0][0]=='"'?JSON.parse(h[0]):h[0]),f+=h[0].length,f==s.length)break;let d=s[f++];if(f==s.length&&d=="!"){o=0;break}if(d!="/")throw new RangeError("Invalid path: "+s);l=s.slice(f)}let a=r.length-1,c=r[a];if(!c)throw new RangeError("Invalid path: "+s);let u=new kd(i,o,a>0?r.slice(0,a):null);e[c]=u.sort(e[c])}}return Q5.add(e)}const Q5=new ln;class kd{constructor(e,t,i,s){this.tags=e,this.mode=t,this.context=i,this.next=s}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}kd.empty=new kd([],2,null);function Y5(n,e){let t=Object.create(null);for(let r of n)if(!Array.isArray(r.tag))t[r.tag.id]=r.class;else for(let o of r.tag)t[o.id]=r.class;let{scope:i,all:s=null}=e||{};return{style:r=>{let o=s;for(let l of r)for(let a of l.set){let c=t[a.id];if(c){o=o?o+" "+c:c;break}}return o},scope:i}}function eY(n,e){let t=null;for(let i of n){let s=i.style(e);s&&(t=t?t+" "+s:s)}return t}function tY(n,e,t,i=0,s=n.length){let r=new nY(i,Array.isArray(e)?e:[e],t);r.highlightRange(n.cursor(),i,s,"",r.highlighters),r.flush(s)}class nY{constructor(e,t,i){this.at=e,this.highlighters=t,this.span=i,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,i,s,r){let{type:o,from:l,to:a}=e;if(l>=i||a<=t)return;o.isTop&&(r=this.highlighters.filter(d=>!d.scope||d.scope(o)));let c=s,u=iY(e)||kd.empty,f=eY(r,u.tags);if(f&&(c&&(c+=" "),c+=f,u.mode==1&&(s+=(s?" ":"")+f)),this.startSpan(e.from,c),u.opaque)return;let h=e.tree&&e.tree.prop(ln.mounted);if(h&&h.overlay){let d=e.node.enter(h.overlay[0].from+l,1),m=this.highlighters.filter(_=>!_.scope||_.scope(h.tree.type)),g=e.firstChild();for(let _=0,v=l;;_++){let y=_<h.overlay.length?h.overlay[_]:null,E=y?y.from+l:a,w=Math.max(t,v),A=Math.min(i,E);if(w<A&&g)for(;e.from<A&&(this.highlightRange(e,w,A,s,r),this.startSpan(Math.min(A,e.to),c),!(e.to>=E||!e.nextSibling())););if(!y||E>i)break;v=y.to+l,v>t&&(this.highlightRange(d.cursor(),Math.max(t,y.from+l),Math.min(i,v),s,m),this.startSpan(v,c))}g&&e.parent()}else if(e.firstChild()){do if(!(e.to<=t)){if(e.from>=i)break;this.highlightRange(e,t,i,s,r),this.startSpan(Math.min(i,e.to),c)}while(e.nextSibling());e.parent()}}}function iY(n){let e=n.type.prop(Q5);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}const pt=Nr.define,nh=pt(),Io=pt(),TA=pt(Io),OA=pt(Io),To=pt(),ih=pt(To),Kp=pt(To),Dr=pt(),hl=pt(Dr),Tr=pt(),Or=pt(),l0=pt(),Pc=pt(l0),sh=pt(),ht={comment:nh,lineComment:pt(nh),blockComment:pt(nh),docComment:pt(nh),name:Io,variableName:pt(Io),typeName:TA,tagName:pt(TA),propertyName:OA,attributeName:pt(OA),className:pt(Io),labelName:pt(Io),namespace:pt(Io),macroName:pt(Io),literal:To,string:ih,docString:pt(ih),character:pt(ih),attributeValue:pt(ih),number:Kp,integer:pt(Kp),float:pt(Kp),bool:pt(To),regexp:pt(To),escape:pt(To),color:pt(To),url:pt(To),keyword:Tr,self:pt(Tr),null:pt(Tr),atom:pt(Tr),unit:pt(Tr),modifier:pt(Tr),operatorKeyword:pt(Tr),controlKeyword:pt(Tr),definitionKeyword:pt(Tr),moduleKeyword:pt(Tr),operator:Or,derefOperator:pt(Or),arithmeticOperator:pt(Or),logicOperator:pt(Or),bitwiseOperator:pt(Or),compareOperator:pt(Or),updateOperator:pt(Or),definitionOperator:pt(Or),typeOperator:pt(Or),controlOperator:pt(Or),punctuation:l0,separator:pt(l0),bracket:Pc,angleBracket:pt(Pc),squareBracket:pt(Pc),paren:pt(Pc),brace:pt(Pc),content:Dr,heading:hl,heading1:pt(hl),heading2:pt(hl),heading3:pt(hl),heading4:pt(hl),heading5:pt(hl),heading6:pt(hl),contentSeparator:pt(Dr),list:pt(Dr),quote:pt(Dr),emphasis:pt(Dr),strong:pt(Dr),link:pt(Dr),monospace:pt(Dr),strikethrough:pt(Dr),inserted:pt(),deleted:pt(),changed:pt(),invalid:pt(),meta:sh,documentMeta:pt(sh),annotation:pt(sh),processingInstruction:pt(sh),definition:Nr.defineModifier(),constant:Nr.defineModifier(),function:Nr.defineModifier(),standard:Nr.defineModifier(),local:Nr.defineModifier(),special:Nr.defineModifier()};Y5([{tag:ht.link,class:"tok-link"},{tag:ht.heading,class:"tok-heading"},{tag:ht.emphasis,class:"tok-emphasis"},{tag:ht.strong,class:"tok-strong"},{tag:ht.keyword,class:"tok-keyword"},{tag:ht.atom,class:"tok-atom"},{tag:ht.bool,class:"tok-bool"},{tag:ht.url,class:"tok-url"},{tag:ht.labelName,class:"tok-labelName"},{tag:ht.inserted,class:"tok-inserted"},{tag:ht.deleted,class:"tok-deleted"},{tag:ht.literal,class:"tok-literal"},{tag:ht.string,class:"tok-string"},{tag:ht.number,class:"tok-number"},{tag:[ht.regexp,ht.escape,ht.special(ht.string)],class:"tok-string2"},{tag:ht.variableName,class:"tok-variableName"},{tag:ht.local(ht.variableName),class:"tok-variableName tok-local"},{tag:ht.definition(ht.variableName),class:"tok-variableName tok-definition"},{tag:ht.special(ht.variableName),class:"tok-variableName2"},{tag:ht.definition(ht.propertyName),class:"tok-propertyName tok-definition"},{tag:ht.typeName,class:"tok-typeName"},{tag:ht.namespace,class:"tok-namespace"},{tag:ht.className,class:"tok-className"},{tag:ht.macroName,class:"tok-macroName"},{tag:ht.propertyName,class:"tok-propertyName"},{tag:ht.operator,class:"tok-operator"},{tag:ht.comment,class:"tok-comment"},{tag:ht.meta,class:"tok-meta"},{tag:ht.invalid,class:"tok-invalid"},{tag:ht.punctuation,class:"tok-punctuation"}]);var Xp;const Ea=new ln;function sY(n){return Tt.define({combine:n?e=>e.concat(n):void 0})}const rY=new ln;class gr{constructor(e,t,i=[],s=""){this.data=e,this.name=s,un.prototype.hasOwnProperty("tree")||Object.defineProperty(un.prototype,"tree",{get(){return gs(this)}}),this.parser=t,this.extension=[nl.of(this),un.languageData.of((r,o,l)=>{let a=RA(r,o,l),c=a.type.prop(Ea);if(!c)return[];let u=r.facet(c),f=a.type.prop(rY);if(f){let h=a.resolve(o-a.from,l);for(let d of f)if(d.test(h,r)){let m=r.facet(d.facet);return d.type=="replace"?m:m.concat(u)}}return u})].concat(i)}isActiveAt(e,t,i=-1){return RA(e,t,i).type.prop(Ea)==this.data}findRegions(e){let t=e.facet(nl);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[],s=(r,o)=>{if(r.prop(Ea)==this.data){i.push({from:o,to:o+r.length});return}let l=r.prop(ln.mounted);if(l){if(l.tree.prop(Ea)==this.data){if(l.overlay)for(let a of l.overlay)i.push({from:a.from+o,to:a.to+o});else i.push({from:o,to:o+r.length});return}else if(l.overlay){let a=i.length;if(s(l.tree,l.overlay[0].from+o),i.length>a)return}}for(let a=0;a<r.children.length;a++){let c=r.children[a];c instanceof wi&&s(c,r.positions[a]+o)}};return s(gs(e),0),i}get allowsNesting(){return!0}}gr.setState=nn.define();function RA(n,e,t){let i=n.facet(nl),s=gs(n).topNode;if(!i||i.allowsNesting)for(let r=s;r;r=r.enter(e,t,Yi.ExcludeBuffers))r.type.isTop&&(s=r);return s}class Id extends gr{constructor(e,t,i){super(e,t,[],i),this.parser=t}static define(e){let t=sY(e.languageData);return new Id(t,e.parser.configure({props:[Ea.add(i=>i.isTop?t:void 0)]}),e.name)}configure(e,t){return new Id(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function gs(n){let e=n.field(gr.state,!1);return e?e.tree:wi.empty}class oY{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}}let Mc=null;class Td{constructor(e,t,i=[],s,r,o,l,a){this.parser=e,this.state=t,this.fragments=i,this.tree=s,this.treeLen=r,this.viewport=o,this.skipped=l,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,i){return new Td(e,t,[],wi.empty,0,i,[],null)}startParse(){return this.parser.startParse(new oY(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=wi.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let s=Date.now()+e;e=()=>Date.now()>s}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let s=this.parse.advance();if(s)if(this.fragments=this.withoutTempSkipped(Nl.addTree(s,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=s,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Nl.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=Mc;Mc=this;try{return e()}finally{Mc=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=DA(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:s,treeLen:r,viewport:o,skipped:l}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((c,u,f,h)=>a.push({fromA:c,toA:u,fromB:f,toB:h})),i=Nl.applyChanges(i,a),s=wi.empty,r=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){l=[];for(let c of this.skipped){let u=e.mapPos(c.from,1),f=e.mapPos(c.to,-1);u<f&&l.push({from:u,to:f})}}}return new Td(this.parser,t,i,s,r,o,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:s,to:r}=this.skipped[i];s<e.to&&r>e.from&&(this.fragments=DA(this.fragments,s,r),this.skipped.splice(i--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends K5{createParse(t,i,s){let r=s[0].from,o=s[s.length-1].to;return{parsedPos:r,advance(){let a=Mc;if(a){for(let c of s)a.tempSkipped.push(c);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=o,new wi(Bs.none,[],[],o-r)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return Mc}}function DA(n,e,t){return Nl.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class nc{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,i)||t.takeTree(),new nc(t)}static init(e){let t=Math.min(3e3,e.doc.length),i=Td.create(e.facet(nl).parser,e,{from:0,to:t});return i.work(20,t)||i.takeTree(),new nc(i)}}gr.state=Wi.define({create:nc.init,update(n,e){for(let t of e.effects)if(t.is(gr.setState))return t.value;return e.startState.facet(nl)!=e.state.facet(nl)?nc.init(e.state):n.apply(e)}});let J5=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(J5=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:500-100})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const Qp=typeof navigator<"u"&&(!((Xp=navigator.scheduling)===null||Xp===void 0)&&Xp.isInputPending)?()=>navigator.scheduling.isInputPending():null,lY=ki.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(gr.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(gr.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=J5(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:s}}=this.view,r=i.field(gr.state);if(r.tree==r.context.tree&&r.context.isDone(s+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!Qp?Math.max(25,e.timeRemaining()-5):1e9),l=r.context.treeLen<s&&i.doc.length>s+1e3,a=r.context.work(()=>Qp&&Qp()||Date.now()>o,s+(l?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(r.context.takeTree(),this.view.dispatch({effects:gr.setState.of(new nc(r.context))})),this.chunkBudget>0&&!(a&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(r.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>qs(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),nl=Tt.define({combine(n){return n.length?n[0]:null},enables:n=>[gr.state,lY,kt.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]});class aY{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const cY=Tt.define(),Xm=Tt.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function Od(n){let e=n.facet(Xm);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function zu(n,e){let t="",i=n.tabSize,s=n.facet(Xm)[0];if(s=="	"){for(;e>=i;)t+="	",e-=i;s=" "}for(let r=0;r<e;r++)t+=s;return t}function _b(n,e){n instanceof un&&(n=new Qm(n));for(let i of n.state.facet(cY)){let s=i(n,e);if(s!==void 0)return s}let t=gs(n.state);return t?uY(n,t,e):null}class Qm{constructor(e,t={}){this.state=e,this.options=t,this.unit=Od(e)}lineAt(e,t=1){let i=this.state.doc.lineAt(e),{simulateBreak:s,simulateDoubleBreak:r}=this.options;return s!=null&&s>=i.from&&s<=i.to?r&&s==e?{text:"",from:e}:(t<0?s<e:s<=e)?{text:i.text.slice(s-i.from),from:s}:{text:i.text.slice(0,s-i.from),from:i.from}:i}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:s}=this.lineAt(e,t);return i.slice(e-s,Math.min(i.length,e+100-s))}column(e,t=1){let{text:i,from:s}=this.lineAt(e,t),r=this.countColumn(i,e-s),o=this.options.overrideIndentation?this.options.overrideIndentation(s):-1;return o>-1&&(r+=o-this.countColumn(i,i.search(/\S|$/))),r}countColumn(e,t=e.length){return yf(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:i,from:s}=this.lineAt(e,t),r=this.options.overrideIndentation;if(r){let o=r(s);if(o>-1)return o}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Z5=new ln;function uY(n,e,t){return x5(e.resolveInner(t).enterUnfinishedNodesBefore(t),t,n)}function fY(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function hY(n){let e=n.type.prop(Z5);if(e)return e;let t=n.firstChild,i;if(t&&(i=t.type.prop(ln.closedBy))){let s=n.lastChild,r=s&&i.indexOf(s.name)>-1;return o=>gY(o,!0,1,void 0,r&&!fY(o)?s.from:void 0)}return n.parent==null?dY:null}function x5(n,e,t){for(;n;n=n.parent){let i=hY(n);if(i)return i(yb.create(t,e,n))}return null}function dY(){return 0}class yb extends Qm{constructor(e,t,i){super(e.state,e.options),this.base=e,this.pos=t,this.node=i}static create(e,t,i){return new yb(e,t,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let e=this.state.doc.lineAt(this.node.from);for(;;){let t=this.node.resolve(e.from);for(;t.parent&&t.parent.from==t.from;)t=t.parent;if(mY(t,this.node))break;e=this.state.doc.lineAt(t.from)}return this.lineIndent(e.from)}continue(){let e=this.node.parent;return e?x5(e,this.pos,this.base):0}}function mY(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function pY(n){let e=n.node,t=e.childAfter(e.from),i=e.lastChild;if(!t)return null;let s=n.options.simulateBreak,r=n.state.doc.lineAt(t.from),o=s==null||s<=r.from?r.to:Math.min(r.to,s);for(let l=t.to;;){let a=e.childAfter(l);if(!a||a==i)return null;if(!a.type.isSkipped)return a.from<o?t:null;l=a.to}}function gY(n,e,t,i,s){let r=n.textAfter,o=r.match(/^\s*/)[0].length,l=i&&r.slice(o,o+i.length)==i||s==n.pos+o,a=e?pY(n):null;return a?l?n.column(a.from):n.column(a.to):n.baseIndent+(l?0:n.unit*t)}function NA({except:n,units:e=1}={}){return t=>{let i=n&&n.test(t.textAfter);return t.baseIndent+(i?0:e*t.unit)}}const vY=200;function bY(){return un.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let e=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!e.length)return n;let t=n.newDoc,{head:i}=n.newSelection.main,s=t.lineAt(i);if(i>s.from+vY)return n;let r=t.sliceString(s.from,i);if(!e.some(c=>c.test(r)))return n;let{state:o}=n,l=-1,a=[];for(let{head:c}of o.selection.ranges){let u=o.doc.lineAt(c);if(u.from==l)continue;l=u.from;let f=_b(o,u.from);if(f==null)continue;let h=/^\s*/.exec(u.text)[0],d=zu(o,f);h!=d&&a.push({from:u.from,to:u.from+h.length,insert:d})}return a.length?[n,{changes:a,sequential:!0}]:n})}const _Y=Tt.define(),$5=new ln;function yY(n){let e=n.firstChild,t=n.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?n.to:t.from}:null}function SY(n,e,t){let i=gs(n);if(i.length<t)return null;let s=i.resolveInner(t,1),r=null;for(let o=s;o;o=o.parent){if(o.to<=t||o.from>t)continue;if(r&&o.from<e)break;let l=o.type.prop($5);if(l&&(o.to<i.length-50||i.length==n.doc.length||!EY(o))){let a=l(o,n);a&&a.from<=t&&a.from>=e&&a.to>t&&(r=a)}}return r}function EY(n){let e=n.lastChild;return e&&e.to==n.to&&e.type.isError}function Rd(n,e,t){for(let i of n.facet(_Y)){let s=i(n,e,t);if(s)return s}return SY(n,e,t)}function eD(n,e){let t=e.mapPos(n.from,1),i=e.mapPos(n.to,-1);return t>=i?void 0:{from:t,to:i}}const Ym=nn.define({map:eD}),Af=nn.define({map:eD});function tD(n){let e=[];for(let{head:t}of n.state.selection.ranges)e.some(i=>i.from<=t&&i.to>=t)||e.push(n.lineBlockAt(t));return e}const Ql=Wi.define({create(){return Ut.none},update(n,e){n=n.map(e.changes);for(let t of e.effects)t.is(Ym)&&!AY(n,t.value.from,t.value.to)?n=n.update({add:[PA.range(t.value.from,t.value.to)]}):t.is(Af)&&(n=n.update({filter:(i,s)=>t.value.from!=i||t.value.to!=s,filterFrom:t.value.from,filterTo:t.value.to}));if(e.selection){let t=!1,{head:i}=e.selection.main;n.between(i,i,(s,r)=>{s<i&&r>i&&(t=!0)}),t&&(n=n.update({filterFrom:i,filterTo:i,filter:(s,r)=>r<=i||s>=i}))}return n},provide:n=>kt.decorations.from(n),toJSON(n,e){let t=[];return n.between(0,e.doc.length,(i,s)=>{t.push(i,s)}),t},fromJSON(n){if(!Array.isArray(n)||n.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<n.length;){let i=n[t++],s=n[t++];if(typeof i!="number"||typeof s!="number")throw new RangeError("Invalid JSON for fold state");e.push(PA.range(i,s))}return Ut.set(e,!0)}});function Dd(n,e,t){var i;let s=null;return(i=n.field(Ql,!1))===null||i===void 0||i.between(e,t,(r,o)=>{(!s||s.from>r)&&(s={from:r,to:o})}),s}function AY(n,e,t){let i=!1;return n.between(e,e,(s,r)=>{s==e&&r==t&&(i=!0)}),i}function nD(n,e){return n.field(Ql,!1)?e:e.concat(nn.appendConfig.of(rD()))}const wY=n=>{for(let e of tD(n)){let t=Rd(n.state,e.from,e.to);if(t)return n.dispatch({effects:nD(n.state,[Ym.of(t),iD(n,t)])}),!0}return!1},CY=n=>{if(!n.state.field(Ql,!1))return!1;let e=[];for(let t of tD(n)){let i=Dd(n.state,t.from,t.to);i&&e.push(Af.of(i),iD(n,i,!1))}return e.length&&n.dispatch({effects:e}),e.length>0};function iD(n,e,t=!0){let i=n.state.doc.lineAt(e.from).number,s=n.state.doc.lineAt(e.to).number;return kt.announce.of(`${n.state.phrase(t?"Folded lines":"Unfolded lines")} ${i} ${n.state.phrase("to")} ${s}.`)}const kY=n=>{let{state:e}=n,t=[];for(let i=0;i<e.doc.length;){let s=n.lineBlockAt(i),r=Rd(e,s.from,s.to);r&&t.push(Ym.of(r)),i=(r?n.lineBlockAt(r.to):s).to+1}return t.length&&n.dispatch({effects:nD(n.state,t)}),!!t.length},IY=n=>{let e=n.state.field(Ql,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,n.state.doc.length,(i,s)=>{t.push(Af.of({from:i,to:s}))}),n.dispatch({effects:t}),!0},TY=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:wY},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:CY},{key:"Ctrl-Alt-[",run:kY},{key:"Ctrl-Alt-]",run:IY}],OY={placeholderDOM:null,placeholderText:""},sD=Tt.define({combine(n){return Ar(n,OY)}});function rD(n){let e=[Ql,NY];return n&&e.push(sD.of(n)),e}const PA=Ut.replace({widget:new class extends rl{toDOM(n){let{state:e}=n,t=e.facet(sD),i=r=>{let o=n.lineBlockAt(n.posAtDOM(r.target)),l=Dd(n.state,o.from,o.to);l&&n.dispatch({effects:Af.of(l)}),r.preventDefault()};if(t.placeholderDOM)return t.placeholderDOM(n,i);let s=document.createElement("span");return s.textContent=t.placeholderText,s.setAttribute("aria-label",e.phrase("folded code")),s.title=e.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=i,s}}}),RY={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class Yp extends Xr{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function DY(n={}){let e=Object.assign(Object.assign({},RY),n),t=new Yp(e,!0),i=new Yp(e,!1),s=ki.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(nl)!=o.state.facet(nl)||o.startState.field(Ql,!1)!=o.state.field(Ql,!1)||gs(o.startState)!=gs(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let l=new xo;for(let a of o.viewportLineBlocks){let c=Dd(o.state,a.from,a.to)?i:Rd(o.state,a.from,a.to)?t:null;c&&l.add(a.from,a.from,c)}return l.finish()}}),{domEventHandlers:r}=e;return[s,V5({class:"cm-foldGutter",markers(o){var l;return((l=o.plugin(s))===null||l===void 0?void 0:l.markers)||On.empty},initialSpacer(){return new Yp(e,!1)},domEventHandlers:Object.assign(Object.assign({},r),{click:(o,l,a)=>{if(r.click&&r.click(o,l,a))return!0;let c=Dd(o.state,l.from,l.to);if(c)return o.dispatch({effects:Af.of(c)}),!0;let u=Rd(o.state,l.from,l.to);return u?(o.dispatch({effects:Ym.of(u)}),!0):!1}})}),rD()]}const NY=kt.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class wf{constructor(e,t){this.specs=e;let i;function s(l){let a=$o.newName();return(i||(i=Object.create(null)))["."+a]=l,a}const r=typeof t.all=="string"?t.all:t.all?s(t.all):void 0,o=t.scope;this.scope=o instanceof gr?l=>l.prop(Ea)==o.data:o?l=>l==o:void 0,this.style=Y5(e.map(l=>({tag:l.tag,class:l.class||s(Object.assign({},l,{tag:null}))})),{all:r}).style,this.module=i?new $o(i):null,this.themeType=t.themeType}static define(e,t){return new wf(e,t||{})}}const a0=Tt.define(),oD=Tt.define({combine(n){return n.length?[n[0]]:null}});function Jp(n){let e=n.facet(a0);return e.length?e:n.facet(oD)}function lD(n,e){let t=[MY],i;return n instanceof wf&&(n.module&&t.push(kt.styleModule.of(n.module)),i=n.themeType),e!=null&&e.fallback?t.push(oD.of(n)):i?t.push(a0.computeN([kt.darkTheme],s=>s.facet(kt.darkTheme)==(i=="dark")?[n]:[])):t.push(a0.of(n)),t}class PY{constructor(e){this.markCache=Object.create(null),this.tree=gs(e.state),this.decorations=this.buildDeco(e,Jp(e.state))}update(e){let t=gs(e.state),i=Jp(e.state),s=i!=Jp(e.startState);t.length<e.view.viewport.to&&!s&&t.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(t!=this.tree||e.viewportChanged||s)&&(this.tree=t,this.decorations=this.buildDeco(e.view,i))}buildDeco(e,t){if(!t||!this.tree.length)return Ut.none;let i=new xo;for(let{from:s,to:r}of e.visibleRanges)tY(this.tree,t,(o,l,a)=>{i.add(o,l,this.markCache[a]||(this.markCache[a]=Ut.mark({class:a})))},s,r);return i.finish()}}const MY=Ec.high(ki.fromClass(PY,{decorations:n=>n.decorations})),BY=wf.define([{tag:ht.meta,color:"#404740"},{tag:ht.link,textDecoration:"underline"},{tag:ht.heading,textDecoration:"underline",fontWeight:"bold"},{tag:ht.emphasis,fontStyle:"italic"},{tag:ht.strong,fontWeight:"bold"},{tag:ht.strikethrough,textDecoration:"line-through"},{tag:ht.keyword,color:"#708"},{tag:[ht.atom,ht.bool,ht.url,ht.contentSeparator,ht.labelName],color:"#219"},{tag:[ht.literal,ht.inserted],color:"#164"},{tag:[ht.string,ht.deleted],color:"#a11"},{tag:[ht.regexp,ht.escape,ht.special(ht.string)],color:"#e40"},{tag:ht.definition(ht.variableName),color:"#00f"},{tag:ht.local(ht.variableName),color:"#30a"},{tag:[ht.typeName,ht.namespace],color:"#085"},{tag:ht.className,color:"#167"},{tag:[ht.special(ht.variableName),ht.macroName],color:"#256"},{tag:ht.definition(ht.propertyName),color:"#00c"},{tag:ht.comment,color:"#940"},{tag:ht.invalid,color:"#f00"}]),LY=kt.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),aD=1e4,cD="()[]{}",uD=Tt.define({combine(n){return Ar(n,{afterCursor:!0,brackets:cD,maxScanDistance:aD,renderMatch:VY})}}),WY=Ut.mark({class:"cm-matchingBracket"}),UY=Ut.mark({class:"cm-nonmatchingBracket"});function VY(n){let e=[],t=n.matched?WY:UY;return e.push(t.range(n.start.from,n.start.to)),n.end&&e.push(t.range(n.end.from,n.end.to)),e}const FY=Wi.define({create(){return Ut.none},update(n,e){if(!e.docChanged&&!e.selection)return n;let t=[],i=e.state.facet(uD);for(let s of e.state.selection.ranges){if(!s.empty)continue;let r=Lr(e.state,s.head,-1,i)||s.head>0&&Lr(e.state,s.head-1,1,i)||i.afterCursor&&(Lr(e.state,s.head,1,i)||s.head<e.state.doc.length&&Lr(e.state,s.head+1,-1,i));r&&(t=t.concat(i.renderMatch(r,e.state)))}return Ut.set(t,!0)},provide:n=>kt.decorations.from(n)}),jY=[FY,LY];function HY(n={}){return[uD.of(n),jY]}const qY=new ln;function c0(n,e,t){let i=n.prop(e<0?ln.openedBy:ln.closedBy);if(i)return i;if(n.name.length==1){let s=t.indexOf(n.name);if(s>-1&&s%2==(e<0?1:0))return[t[s+e]]}return null}function u0(n){let e=n.type.prop(qY);return e?e(n.node):n}function Lr(n,e,t,i={}){let s=i.maxScanDistance||aD,r=i.brackets||cD,o=gs(n),l=o.resolveInner(e,t);for(let a=l;a;a=a.parent){let c=c0(a.type,t,r);if(c&&a.from<a.to){let u=u0(a);if(u&&(t>0?e>=u.from&&e<u.to:e>u.from&&e<=u.to))return zY(n,e,t,a,u,c,r)}}return GY(n,e,t,o,l.type,s,r)}function zY(n,e,t,i,s,r,o){let l=i.parent,a={from:s.from,to:s.to},c=0,u=l==null?void 0:l.cursor();if(u&&(t<0?u.childBefore(i.from):u.childAfter(i.to)))do if(t<0?u.to<=i.from:u.from>=i.to){if(c==0&&r.indexOf(u.type.name)>-1&&u.from<u.to){let f=u0(u);return{start:a,end:f?{from:f.from,to:f.to}:void 0,matched:!0}}else if(c0(u.type,t,o))c++;else if(c0(u.type,-t,o)){if(c==0){let f=u0(u);return{start:a,end:f&&f.from<f.to?{from:f.from,to:f.to}:void 0,matched:!1}}c--}}while(t<0?u.prevSibling():u.nextSibling());return{start:a,matched:!1}}function GY(n,e,t,i,s,r,o){let l=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),a=o.indexOf(l);if(a<0||a%2==0!=t>0)return null;let c={from:t<0?e-1:e,to:t>0?e+1:e},u=n.doc.iterRange(e,t>0?n.doc.length:0),f=0;for(let h=0;!u.next().done&&h<=r;){let d=u.value;t<0&&(h+=d.length);let m=e+h*t;for(let g=t>0?0:d.length-1,_=t>0?d.length:-1;g!=_;g+=t){let v=o.indexOf(d[g]);if(!(v<0||i.resolveInner(m+g,1).type!=s))if(v%2==0==t>0)f++;else{if(f==1)return{start:c,end:{from:m+g,to:m+g+1},matched:v>>1==a>>1};f--}}t>0&&(h+=d.length)}return u.done?{start:c,matched:!1}:null}const KY=Object.create(null),MA=[Bs.none],BA=[],XY=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])XY[n]=QY(KY,e);function Zp(n,e){BA.indexOf(n)>-1||(BA.push(n),console.warn(e))}function QY(n,e){let t=null;for(let r of e.split(".")){let o=n[r]||ht[r];o?typeof o=="function"?t?t=o(t):Zp(r,`Modifier ${r} used at start of tag`):t?Zp(r,`Tag ${r} used as modifier`):t=o:Zp(r,`Unknown highlighting tag ${r}`)}if(!t)return 0;let i=e.replace(/ /g,"_"),s=Bs.define({id:MA.length,name:i,props:[X5({[i]:t})]});return MA.push(s),s.id}const YY=n=>{let{state:e}=n,t=e.doc.lineAt(e.selection.main.head),i=Eb(n.state,t.from);return i.line?JY(n):i.block?xY(n):!1};function Sb(n,e){return({state:t,dispatch:i})=>{if(t.readOnly)return!1;let s=n(e,t);return s?(i(t.update(s)),!0):!1}}const JY=Sb(tJ,0),ZY=Sb(fD,0),xY=Sb((n,e)=>fD(n,e,eJ(e)),0);function Eb(n,e){let t=n.languageDataAt("commentTokens",e);return t.length?t[0]:{}}const Bc=50;function $Y(n,{open:e,close:t},i,s){let r=n.sliceDoc(i-Bc,i),o=n.sliceDoc(s,s+Bc),l=/\s*$/.exec(r)[0].length,a=/^\s*/.exec(o)[0].length,c=r.length-l;if(r.slice(c-e.length,c)==e&&o.slice(a,a+t.length)==t)return{open:{pos:i-l,margin:l&&1},close:{pos:s+a,margin:a&&1}};let u,f;s-i<=2*Bc?u=f=n.sliceDoc(i,s):(u=n.sliceDoc(i,i+Bc),f=n.sliceDoc(s-Bc,s));let h=/^\s*/.exec(u)[0].length,d=/\s*$/.exec(f)[0].length,m=f.length-d-t.length;return u.slice(h,h+e.length)==e&&f.slice(m,m+t.length)==t?{open:{pos:i+h+e.length,margin:/\s/.test(u.charAt(h+e.length))?1:0},close:{pos:s-d-t.length,margin:/\s/.test(f.charAt(m-1))?1:0}}:null}function eJ(n){let e=[];for(let t of n.selection.ranges){let i=n.doc.lineAt(t.from),s=t.to<=i.to?i:n.doc.lineAt(t.to),r=e.length-1;r>=0&&e[r].to>i.from?e[r].to=s.to:e.push({from:i.from,to:s.to})}return e}function fD(n,e,t=e.selection.ranges){let i=t.map(r=>Eb(e,r.from).block);if(!i.every(r=>r))return null;let s=t.map((r,o)=>$Y(e,i[o],r.from,r.to));if(n!=2&&!s.every(r=>r))return{changes:e.changes(t.map((r,o)=>s[o]?[]:[{from:r.from,insert:i[o].open+" "},{from:r.to,insert:" "+i[o].close}]))};if(n!=1&&s.some(r=>r)){let r=[];for(let o=0,l;o<s.length;o++)if(l=s[o]){let a=i[o],{open:c,close:u}=l;r.push({from:c.pos-a.open.length,to:c.pos+c.margin},{from:u.pos-u.margin,to:u.pos+a.close.length})}return{changes:r}}return null}function tJ(n,e,t=e.selection.ranges){let i=[],s=-1;for(let{from:r,to:o}of t){let l=i.length,a=1e9;for(let c=r;c<=o;){let u=e.doc.lineAt(c);if(u.from>s&&(r==o||o>u.from)){s=u.from;let f=Eb(e,u.from).line;if(!f)continue;let h=/^\s*/.exec(u.text)[0].length,d=h==u.length,m=u.text.slice(h,h+f.length)==f?h:-1;h<u.text.length&&h<a&&(a=h),i.push({line:u,comment:m,token:f,indent:h,empty:d,single:!1})}c=u.to+1}if(a<1e9)for(let c=l;c<i.length;c++)i[c].indent<i[c].line.text.length&&(i[c].indent=a);i.length==l+1&&(i[l].single=!0)}if(n!=2&&i.some(r=>r.comment<0&&(!r.empty||r.single))){let r=[];for(let{line:l,token:a,indent:c,empty:u,single:f}of i)(f||!u)&&r.push({from:l.from+c,insert:a+" "});let o=e.changes(r);return{changes:o,selection:e.selection.map(o,1)}}else if(n!=1&&i.some(r=>r.comment>=0)){let r=[];for(let{line:o,comment:l,token:a}of i)if(l>=0){let c=o.from+l,u=c+a.length;o.text[u-o.from]==" "&&u++,r.push({from:c,to:u})}return{changes:r}}return null}const f0=Eo.define(),nJ=Eo.define(),iJ=Tt.define(),hD=Tt.define({combine(n){return Ar(n,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(i,s)=>e(i,s)||t(i,s)})}});function sJ(n){let e=0;return n.iterChangedRanges((t,i)=>e=i),e}const Ab=Wi.define({create(){return Wr.empty},update(n,e){let t=e.state.facet(hD),i=e.annotation(f0);if(i){let a=e.docChanged?Je.single(sJ(e.changes)):void 0,c=Ms.fromTransaction(e,a),u=i.side,f=u==0?n.undone:n.done;return c?f=Pd(f,f.length,t.minDepth,c):f=pD(f,e.startState.selection),new Wr(u==0?i.rest:f,u==0?f:i.rest)}let s=e.annotation(nJ);if((s=="full"||s=="before")&&(n=n.isolate()),e.annotation(Di.addToHistory)===!1)return e.changes.empty?n:n.addMapping(e.changes.desc);let r=Ms.fromTransaction(e),o=e.annotation(Di.time),l=e.annotation(Di.userEvent);return r?n=n.addChanges(r,o,l,t,e):e.selection&&(n=n.addSelection(e.startState.selection,o,l,t.newGroupDelay)),(s=="full"||s=="after")&&(n=n.isolate()),n},toJSON(n){return{done:n.done.map(e=>e.toJSON()),undone:n.undone.map(e=>e.toJSON())}},fromJSON(n){return new Wr(n.done.map(Ms.fromJSON),n.undone.map(Ms.fromJSON))}});function rJ(n={}){return[Ab,hD.of(n),kt.domEventHandlers({beforeinput(e,t){let i=e.inputType=="historyUndo"?wb:e.inputType=="historyRedo"?Nd:null;return i?(e.preventDefault(),i(t)):!1}})]}function Jm(n,e){return function({state:t,dispatch:i}){if(!e&&t.readOnly)return!1;let s=t.field(Ab,!1);if(!s)return!1;let r=s.pop(n,t,e);return r?(i(r),!0):!1}}const wb=Jm(0,!1),Nd=Jm(1,!1),oJ=Jm(0,!0),lJ=Jm(1,!0);function dD(n){return function(e){let t=e.field(Ab,!1);if(!t)return 0;let i=n==0?t.done:t.undone;return i.length-(i.length&&!i[0].changes?1:0)}}const aJ=dD(0),cJ=dD(1);class Ms{constructor(e,t,i,s,r){this.changes=e,this.effects=t,this.mapped=i,this.startSelection=s,this.selectionsAfter=r}setSelAfter(e){return new Ms(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(s=>s.toJSON())}}static fromJSON(e){return new Ms(e.changes&&Oi.fromJSON(e.changes),[],e.mapped&&qr.fromJSON(e.mapped),e.startSelection&&Je.fromJSON(e.startSelection),e.selectionsAfter.map(Je.fromJSON))}static fromTransaction(e,t){let i=tr;for(let s of e.startState.facet(iJ)){let r=s(e);r.length&&(i=i.concat(r))}return!i.length&&e.changes.empty?null:new Ms(e.changes.invert(e.startState.doc),i,void 0,t||e.startState.selection,tr)}static selection(e){return new Ms(void 0,tr,void 0,void 0,e)}}function Pd(n,e,t,i){let s=e+1>t+20?e-t-1:0,r=n.slice(s,e);return r.push(i),r}function uJ(n,e){let t=[],i=!1;return n.iterChangedRanges((s,r)=>t.push(s,r)),e.iterChangedRanges((s,r,o,l)=>{for(let a=0;a<t.length;){let c=t[a++],u=t[a++];l>=c&&o<=u&&(i=!0)}}),i}function fJ(n,e){return n.ranges.length==e.ranges.length&&n.ranges.filter((t,i)=>t.empty!=e.ranges[i].empty).length===0}function mD(n,e){return n.length?e.length?n.concat(e):n:e}const tr=[],hJ=200;function pD(n,e){if(n.length){let t=n[n.length-1],i=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-hJ));return i.length&&i[i.length-1].eq(e)?n:(i.push(e),Pd(n,n.length-1,1e9,t.setSelAfter(i)))}else return[Ms.selection([e])]}function dJ(n){let e=n[n.length-1],t=n.slice();return t[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function xp(n,e){if(!n.length)return n;let t=n.length,i=tr;for(;t;){let s=mJ(n[t-1],e,i);if(s.changes&&!s.changes.empty||s.effects.length){let r=n.slice(0,t);return r[t-1]=s,r}else e=s.mapped,t--,i=s.selectionsAfter}return i.length?[Ms.selection(i)]:tr}function mJ(n,e,t){let i=mD(n.selectionsAfter.length?n.selectionsAfter.map(l=>l.map(e)):tr,t);if(!n.changes)return Ms.selection(i);let s=n.changes.map(e),r=e.mapDesc(n.changes,!0),o=n.mapped?n.mapped.composeDesc(r):r;return new Ms(s,nn.mapEffects(n.effects,e),o,n.startSelection.map(r),i)}const pJ=/^(input\.type|delete)($|\.)/;class Wr{constructor(e,t,i=0,s=void 0){this.done=e,this.undone=t,this.prevTime=i,this.prevUserEvent=s}isolate(){return this.prevTime?new Wr(this.done,this.undone):this}addChanges(e,t,i,s,r){let o=this.done,l=o[o.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!i||pJ.test(i))&&(!l.selectionsAfter.length&&t-this.prevTime<s.newGroupDelay&&s.joinToEvent(r,uJ(l.changes,e.changes))||i=="input.type.compose")?o=Pd(o,o.length-1,s.minDepth,new Ms(e.changes.compose(l.changes),mD(e.effects,l.effects),l.mapped,l.startSelection,tr)):o=Pd(o,o.length,s.minDepth,e),new Wr(o,tr,t,i)}addSelection(e,t,i,s){let r=this.done.length?this.done[this.done.length-1].selectionsAfter:tr;return r.length>0&&t-this.prevTime<s&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&fJ(r[r.length-1],e)?this:new Wr(pD(this.done,e),this.undone,t,i)}addMapping(e){return new Wr(xp(this.done,e),xp(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,i){let s=e==0?this.done:this.undone;if(s.length==0)return null;let r=s[s.length-1];if(i&&r.selectionsAfter.length)return t.update({selection:r.selectionsAfter[r.selectionsAfter.length-1],annotations:f0.of({side:e,rest:dJ(s)}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(r.changes){let o=s.length==1?tr:s.slice(0,s.length-1);return r.mapped&&(o=xp(o,r.mapped)),t.update({changes:r.changes,selection:r.startSelection,effects:r.effects,annotations:f0.of({side:e,rest:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Wr.empty=new Wr(tr,tr);const gJ=[{key:"Mod-z",run:wb,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Nd,preventDefault:!0},{linux:"Ctrl-Shift-z",run:Nd,preventDefault:!0},{key:"Mod-u",run:oJ,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:lJ,preventDefault:!0}];function Ac(n,e){return Je.create(n.ranges.map(e),n.mainIndex)}function Jr(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function wr({state:n,dispatch:e},t){let i=Ac(n.selection,t);return i.eq(n.selection)?!1:(e(Jr(n,i)),!0)}function Zm(n,e){return Je.cursor(e?n.to:n.from)}function gD(n,e){return wr(n,t=>t.empty?n.moveByChar(t,e):Zm(t,e))}function vs(n){return n.textDirectionAt(n.state.selection.main.head)==ri.LTR}const vD=n=>gD(n,!vs(n)),bD=n=>gD(n,vs(n));function _D(n,e){return wr(n,t=>t.empty?n.moveByGroup(t,e):Zm(t,e))}const vJ=n=>_D(n,!vs(n)),bJ=n=>_D(n,vs(n));function _J(n,e,t){if(e.type.prop(t))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function xm(n,e,t){let i=gs(n).resolveInner(e.head),s=t?ln.closedBy:ln.openedBy;for(let a=e.head;;){let c=t?i.childAfter(a):i.childBefore(a);if(!c)break;_J(n,c,s)?i=c:a=t?c.to:c.from}let r=i.type.prop(s),o,l;return r&&(o=t?Lr(n,i.from,1):Lr(n,i.to,-1))&&o.matched?l=t?o.end.to:o.end.from:l=t?i.to:i.from,Je.cursor(l,t?-1:1)}const yJ=n=>wr(n,e=>xm(n.state,e,!vs(n))),SJ=n=>wr(n,e=>xm(n.state,e,vs(n)));function yD(n,e){return wr(n,t=>{if(!t.empty)return Zm(t,e);let i=n.moveVertically(t,e);return i.head!=t.head?i:n.moveToLineBoundary(t,e)})}const SD=n=>yD(n,!1),ED=n=>yD(n,!0);function AD(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,t=0,i=0,s;if(e){for(let r of n.state.facet(kt.scrollMargins)){let o=r(n);o!=null&&o.top&&(t=Math.max(o==null?void 0:o.top,t)),o!=null&&o.bottom&&(i=Math.max(o==null?void 0:o.bottom,i))}s=n.scrollDOM.clientHeight-t-i}else s=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:i,selfScroll:e,height:Math.max(n.defaultLineHeight,s-5)}}function wD(n,e){let t=AD(n),{state:i}=n,s=Ac(i.selection,o=>o.empty?n.moveVertically(o,e,t.height):Zm(o,e));if(s.eq(i.selection))return!1;let r;if(t.selfScroll){let o=n.coordsAtPos(i.selection.main.head),l=n.scrollDOM.getBoundingClientRect(),a=l.top+t.marginTop,c=l.bottom-t.marginBottom;o&&o.top>a&&o.bottom<c&&(r=kt.scrollIntoView(s.main.head,{y:"start",yMargin:o.top-a}))}return n.dispatch(Jr(i,s),{effects:r}),!0}const LA=n=>wD(n,!1),h0=n=>wD(n,!0);function ol(n,e,t){let i=n.lineBlockAt(e.head),s=n.moveToLineBoundary(e,t);if(s.head==e.head&&s.head!=(t?i.to:i.from)&&(s=n.moveToLineBoundary(e,t,!1)),!t&&s.head==i.from&&i.length){let r=/^\s*/.exec(n.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;r&&e.head!=i.from+r&&(s=Je.cursor(i.from+r))}return s}const EJ=n=>wr(n,e=>ol(n,e,!0)),AJ=n=>wr(n,e=>ol(n,e,!1)),wJ=n=>wr(n,e=>ol(n,e,!vs(n))),CJ=n=>wr(n,e=>ol(n,e,vs(n))),kJ=n=>wr(n,e=>Je.cursor(n.lineBlockAt(e.head).from,1)),IJ=n=>wr(n,e=>Je.cursor(n.lineBlockAt(e.head).to,-1));function TJ(n,e,t){let i=!1,s=Ac(n.selection,r=>{let o=Lr(n,r.head,-1)||Lr(n,r.head,1)||r.head>0&&Lr(n,r.head-1,1)||r.head<n.doc.length&&Lr(n,r.head+1,-1);if(!o||!o.end)return r;i=!0;let l=o.start.from==r.head?o.end.to:o.end.from;return t?Je.range(r.anchor,l):Je.cursor(l)});return i?(e(Jr(n,s)),!0):!1}const OJ=({state:n,dispatch:e})=>TJ(n,e,!1);function lr(n,e){let t=Ac(n.state.selection,i=>{let s=e(i);return Je.range(i.anchor,s.head,s.goalColumn,s.bidiLevel||void 0)});return t.eq(n.state.selection)?!1:(n.dispatch(Jr(n.state,t)),!0)}function CD(n,e){return lr(n,t=>n.moveByChar(t,e))}const kD=n=>CD(n,!vs(n)),ID=n=>CD(n,vs(n));function TD(n,e){return lr(n,t=>n.moveByGroup(t,e))}const RJ=n=>TD(n,!vs(n)),DJ=n=>TD(n,vs(n)),NJ=n=>lr(n,e=>xm(n.state,e,!vs(n))),PJ=n=>lr(n,e=>xm(n.state,e,vs(n)));function OD(n,e){return lr(n,t=>n.moveVertically(t,e))}const RD=n=>OD(n,!1),DD=n=>OD(n,!0);function ND(n,e){return lr(n,t=>n.moveVertically(t,e,AD(n).height))}const WA=n=>ND(n,!1),UA=n=>ND(n,!0),MJ=n=>lr(n,e=>ol(n,e,!0)),BJ=n=>lr(n,e=>ol(n,e,!1)),LJ=n=>lr(n,e=>ol(n,e,!vs(n))),WJ=n=>lr(n,e=>ol(n,e,vs(n))),UJ=n=>lr(n,e=>Je.cursor(n.lineBlockAt(e.head).from)),VJ=n=>lr(n,e=>Je.cursor(n.lineBlockAt(e.head).to)),VA=({state:n,dispatch:e})=>(e(Jr(n,{anchor:0})),!0),FA=({state:n,dispatch:e})=>(e(Jr(n,{anchor:n.doc.length})),!0),jA=({state:n,dispatch:e})=>(e(Jr(n,{anchor:n.selection.main.anchor,head:0})),!0),HA=({state:n,dispatch:e})=>(e(Jr(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),FJ=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),jJ=({state:n,dispatch:e})=>{let t=ep(n).map(({from:i,to:s})=>Je.range(i,Math.min(s+1,n.doc.length)));return e(n.update({selection:Je.create(t),userEvent:"select"})),!0},HJ=({state:n,dispatch:e})=>{let t=Ac(n.selection,i=>{var s;let r=gs(n).resolveInner(i.head,1);for(;!(r.from<i.from&&r.to>=i.to||r.to>i.to&&r.from<=i.from||!(!((s=r.parent)===null||s===void 0)&&s.parent));)r=r.parent;return Je.range(r.to,r.from)});return e(Jr(n,t)),!0},qJ=({state:n,dispatch:e})=>{let t=n.selection,i=null;return t.ranges.length>1?i=Je.create([t.main]):t.main.empty||(i=Je.create([Je.cursor(t.main.head)])),i?(e(Jr(n,i)),!0):!1};function $m(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:i}=n,s=i.changeByRange(r=>{let{from:o,to:l}=r;if(o==l){let a=e(o);a<o?(t="delete.backward",a=rh(n,a,!1)):a>o&&(t="delete.forward",a=rh(n,a,!0)),o=Math.min(o,a),l=Math.max(l,a)}else o=rh(n,o,!1),l=rh(n,l,!0);return o==l?{range:r}:{changes:{from:o,to:l},range:Je.cursor(o)}});return s.changes.empty?!1:(n.dispatch(i.update(s,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?kt.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function rh(n,e,t){if(n instanceof kt)for(let i of n.state.facet(kt.atomicRanges).map(s=>s(n)))i.between(e,e,(s,r)=>{s<e&&r>e&&(e=t?r:s)});return e}const PD=(n,e)=>$m(n,t=>{let{state:i}=n,s=i.doc.lineAt(t),r,o;if(!e&&t>s.from&&t<s.from+200&&!/[^ \t]/.test(r=s.text.slice(0,t-s.from))){if(r[r.length-1]=="	")return t-1;let l=yf(r,i.tabSize),a=l%Od(i)||Od(i);for(let c=0;c<a&&r[r.length-1-c]==" ";c++)t--;o=t}else o=As(s.text,t-s.from,e,e)+s.from,o==t&&s.number!=(e?i.doc.lines:1)&&(o+=e?1:-1);return o}),d0=n=>PD(n,!1),MD=n=>PD(n,!0),BD=(n,e)=>$m(n,t=>{let i=t,{state:s}=n,r=s.doc.lineAt(i),o=s.charCategorizer(i);for(let l=null;;){if(i==(e?r.to:r.from)){i==t&&r.number!=(e?s.doc.lines:1)&&(i+=e?1:-1);break}let a=As(r.text,i-r.from,e)+r.from,c=r.text.slice(Math.min(i,a)-r.from,Math.max(i,a)-r.from),u=o(c);if(l!=null&&u!=l)break;(c!=" "||i!=t)&&(l=u),i=a}return i}),LD=n=>BD(n,!1),zJ=n=>BD(n,!0),WD=n=>$m(n,e=>{let t=n.lineBlockAt(e).to;return e<t?t:Math.min(n.state.doc.length,e+1)}),GJ=n=>$m(n,e=>{let t=n.lineBlockAt(e).from;return e>t?t:Math.max(0,e-1)}),KJ=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:Tn.of(["",""])},range:Je.cursor(i.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},XJ=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(i=>{if(!i.empty||i.from==0||i.from==n.doc.length)return{range:i};let s=i.from,r=n.doc.lineAt(s),o=s==r.from?s-1:As(r.text,s-r.from,!1)+r.from,l=s==r.to?s+1:As(r.text,s-r.from,!0)+r.from;return{changes:{from:o,to:l,insert:n.doc.slice(s,l).append(n.doc.slice(o,s))},range:Je.cursor(l)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function ep(n){let e=[],t=-1;for(let i of n.selection.ranges){let s=n.doc.lineAt(i.from),r=n.doc.lineAt(i.to);if(!i.empty&&i.to==r.from&&(r=n.doc.lineAt(i.to-1)),t>=s.number){let o=e[e.length-1];o.to=r.to,o.ranges.push(i)}else e.push({from:s.from,to:r.to,ranges:[i]});t=r.number+1}return e}function UD(n,e,t){if(n.readOnly)return!1;let i=[],s=[];for(let r of ep(n)){if(t?r.to==n.doc.length:r.from==0)continue;let o=n.doc.lineAt(t?r.to+1:r.from-1),l=o.length+1;if(t){i.push({from:r.to,to:o.to},{from:r.from,insert:o.text+n.lineBreak});for(let a of r.ranges)s.push(Je.range(Math.min(n.doc.length,a.anchor+l),Math.min(n.doc.length,a.head+l)))}else{i.push({from:o.from,to:r.from},{from:r.to,insert:n.lineBreak+o.text});for(let a of r.ranges)s.push(Je.range(a.anchor-l,a.head-l))}}return i.length?(e(n.update({changes:i,scrollIntoView:!0,selection:Je.create(s,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const QJ=({state:n,dispatch:e})=>UD(n,e,!1),YJ=({state:n,dispatch:e})=>UD(n,e,!0);function VD(n,e,t){if(n.readOnly)return!1;let i=[];for(let s of ep(n))t?i.push({from:s.from,insert:n.doc.slice(s.from,s.to)+n.lineBreak}):i.push({from:s.to,insert:n.lineBreak+n.doc.slice(s.from,s.to)});return e(n.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const JJ=({state:n,dispatch:e})=>VD(n,e,!1),ZJ=({state:n,dispatch:e})=>VD(n,e,!0),xJ=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(ep(e).map(({from:s,to:r})=>(s>0?s--:r<e.doc.length&&r++,{from:s,to:r}))),i=Ac(e.selection,s=>n.moveVertically(s,!0)).map(t);return n.dispatch({changes:t,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function $J(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=gs(n).resolveInner(e),i=t.childBefore(e),s=t.childAfter(e),r;return i&&s&&i.to<=e&&s.from>=e&&(r=i.type.prop(ln.closedBy))&&r.indexOf(s.name)>-1&&n.doc.lineAt(i.to).from==n.doc.lineAt(s.from).from?{from:i.to,to:s.from}:null}const eZ=FD(!1),tZ=FD(!0);function FD(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange(s=>{let{from:r,to:o}=s,l=e.doc.lineAt(r),a=!n&&r==o&&$J(e,r);n&&(r=o=(o<=l.to?l:e.doc.lineAt(o)).to);let c=new Qm(e,{simulateBreak:r,simulateDoubleBreak:!!a}),u=_b(c,r);for(u==null&&(u=/^\s*/.exec(e.doc.lineAt(r).text)[0].length);o<l.to&&/\s/.test(l.text[o-l.from]);)o++;a?{from:r,to:o}=a:r>l.from&&r<l.from+100&&!/\S/.test(l.text.slice(0,r))&&(r=l.from);let f=["",zu(e,u)];return a&&f.push(zu(e,c.lineIndent(l.from,-1))),{changes:{from:r,to:o,insert:Tn.of(f)},range:Je.cursor(r+1+f[1].length)}});return t(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function Cb(n,e){let t=-1;return n.changeByRange(i=>{let s=[];for(let o=i.from;o<=i.to;){let l=n.doc.lineAt(o);l.number>t&&(i.empty||i.to>l.from)&&(e(l,s,i),t=l.number),o=l.to+1}let r=n.changes(s);return{changes:s,range:Je.range(r.mapPos(i.anchor,1),r.mapPos(i.head,1))}})}const nZ=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),i=new Qm(n,{overrideIndentation:r=>{let o=t[r];return o??-1}}),s=Cb(n,(r,o,l)=>{let a=_b(i,r.from);if(a==null)return;/\S/.test(r.text)||(a=0);let c=/^\s*/.exec(r.text)[0],u=zu(n,a);(c!=u||l.from<r.from+c.length)&&(t[r.from]=a,o.push({from:r.from,to:r.from+c.length,insert:u}))});return s.changes.empty||e(n.update(s,{userEvent:"indent"})),!0},jD=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(Cb(n,(t,i)=>{i.push({from:t.from,insert:n.facet(Xm)})}),{userEvent:"input.indent"})),!0),HD=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(Cb(n,(t,i)=>{let s=/^\s*/.exec(t.text)[0];if(!s)return;let r=yf(s,n.tabSize),o=0,l=zu(n,Math.max(0,r-Od(n)));for(;o<s.length&&o<l.length&&s.charCodeAt(o)==l.charCodeAt(o);)o++;i.push({from:t.from+o,to:t.from+s.length,insert:l.slice(o)})}),{userEvent:"delete.dedent"})),!0),iZ=[{key:"Ctrl-b",run:vD,shift:kD,preventDefault:!0},{key:"Ctrl-f",run:bD,shift:ID},{key:"Ctrl-p",run:SD,shift:RD},{key:"Ctrl-n",run:ED,shift:DD},{key:"Ctrl-a",run:kJ,shift:UJ},{key:"Ctrl-e",run:IJ,shift:VJ},{key:"Ctrl-d",run:MD},{key:"Ctrl-h",run:d0},{key:"Ctrl-k",run:WD},{key:"Ctrl-Alt-h",run:LD},{key:"Ctrl-o",run:KJ},{key:"Ctrl-t",run:XJ},{key:"Ctrl-v",run:h0}],sZ=[{key:"ArrowLeft",run:vD,shift:kD,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:vJ,shift:RJ,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:wJ,shift:LJ,preventDefault:!0},{key:"ArrowRight",run:bD,shift:ID,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:bJ,shift:DJ,preventDefault:!0},{mac:"Cmd-ArrowRight",run:CJ,shift:WJ,preventDefault:!0},{key:"ArrowUp",run:SD,shift:RD,preventDefault:!0},{mac:"Cmd-ArrowUp",run:VA,shift:jA},{mac:"Ctrl-ArrowUp",run:LA,shift:WA},{key:"ArrowDown",run:ED,shift:DD,preventDefault:!0},{mac:"Cmd-ArrowDown",run:FA,shift:HA},{mac:"Ctrl-ArrowDown",run:h0,shift:UA},{key:"PageUp",run:LA,shift:WA},{key:"PageDown",run:h0,shift:UA},{key:"Home",run:AJ,shift:BJ,preventDefault:!0},{key:"Mod-Home",run:VA,shift:jA},{key:"End",run:EJ,shift:MJ,preventDefault:!0},{key:"Mod-End",run:FA,shift:HA},{key:"Enter",run:eZ},{key:"Mod-a",run:FJ},{key:"Backspace",run:d0,shift:d0},{key:"Delete",run:MD},{key:"Mod-Backspace",mac:"Alt-Backspace",run:LD},{key:"Mod-Delete",mac:"Alt-Delete",run:zJ},{mac:"Mod-Backspace",run:GJ},{mac:"Mod-Delete",run:WD}].concat(iZ.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),rZ=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:yJ,shift:NJ},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:SJ,shift:PJ},{key:"Alt-ArrowUp",run:QJ},{key:"Shift-Alt-ArrowUp",run:JJ},{key:"Alt-ArrowDown",run:YJ},{key:"Shift-Alt-ArrowDown",run:ZJ},{key:"Escape",run:qJ},{key:"Mod-Enter",run:tZ},{key:"Alt-l",mac:"Ctrl-l",run:jJ},{key:"Mod-i",run:HJ,preventDefault:!0},{key:"Mod-[",run:HD},{key:"Mod-]",run:jD},{key:"Mod-Alt-\\",run:nZ},{key:"Shift-Mod-k",run:xJ},{key:"Shift-Mod-\\",run:OJ},{key:"Mod-/",run:YY},{key:"Alt-A",run:ZY}].concat(sZ),oZ={key:"Tab",run:jD,shift:HD};function qn(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var s=t[i];typeof s=="string"?n.setAttribute(i,s):s!=null&&(n[i]=s)}e++}for(;e<arguments.length;e++)qD(n,arguments[e]);return n}function qD(n,e){if(typeof e=="string")n.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)n.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)qD(n,e[t]);else throw new RangeError("Unsupported child node: "+e)}const qA=typeof String.prototype.normalize=="function"?n=>n.normalize("NFKD"):n=>n;class ic{constructor(e,t,i=0,s=e.length,r,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,s),this.bufferStart=i,this.normalize=r?l=>r(qA(l)):qA,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Xi(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=sb(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=$s(e);let s=this.normalize(t);for(let r=0,o=i;;r++){let l=s.charCodeAt(r),a=this.match(l,o);if(a)return this.value=a,this;if(r==s.length-1)break;o==i&&r<t.length&&t.charCodeAt(r)==l&&o++}}}match(e,t){let i=null;for(let s=0;s<this.matches.length;s+=2){let r=this.matches[s],o=!1;this.query.charCodeAt(r)==e&&(r==this.query.length-1?i={from:this.matches[s+1],to:t+1}:(this.matches[s]++,o=!0)),o||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:t,to:t+1}:this.matches.push(1,t)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferPos)&&(i=null),i}}typeof Symbol<"u"&&(ic.prototype[Symbol.iterator]=function(){return this});const zD={from:-1,to:-1,match:/.*/.exec("")},kb="gm"+(/x/.unicode==null?"":"u");class GD{constructor(e,t,i,s=0,r=e.length){if(this.text=e,this.to=r,this.curLine="",this.done=!1,this.value=zD,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new KD(e,t,i,s,r);this.re=new RegExp(t,kb+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.iter=e.iter();let o=e.lineAt(s);this.curLineStart=o.from,this.matchPos=Md(e,s),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let i=this.curLineStart+t.index,s=i+t[0].length;if(this.matchPos=Md(this.text,s+(i==s?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<s||i>this.value.to)&&(!this.test||this.test(i,s,t)))return this.value={from:i,to:s,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const $p=new WeakMap;class Pa{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,i){let s=$p.get(e);if(!s||s.from>=i||s.to<=t){let l=new Pa(t,e.sliceString(t,i));return $p.set(e,l),l}if(s.from==t&&s.to==i)return s;let{text:r,from:o}=s;return o>t&&(r=e.sliceString(t,o)+r,o=t),s.to<i&&(r+=e.sliceString(s.to,i)),$p.set(e,new Pa(o,r)),new Pa(t,r.slice(t-o,i-o))}}class KD{constructor(e,t,i,s,r){this.text=e,this.to=r,this.done=!1,this.value=zD,this.matchPos=Md(e,s),this.re=new RegExp(t,kb+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.flat=Pa.get(e,s,this.chunkEnd(s+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let i=this.flat.from+t.index,s=i+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,s,t)))return this.value={from:i,to:s,match:t},this.matchPos=Md(this.text,s+(i==s?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Pa.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(GD.prototype[Symbol.iterator]=KD.prototype[Symbol.iterator]=function(){return this});function lZ(n){try{return new RegExp(n,kb),!0}catch{return!1}}function Md(n,e){if(e>=n.length)return e;let t=n.lineAt(e),i;for(;e<t.to&&(i=t.text.charCodeAt(e-t.from))>=56320&&i<57344;)e++;return e}function m0(n){let e=qn("input",{class:"cm-textfield",name:"line"}),t=qn("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),n.dispatch({effects:Bd.of(!1)}),n.focus()):s.keyCode==13&&(s.preventDefault(),i())},onsubmit:s=>{s.preventDefault(),i()}},qn("label",n.state.phrase("Go to line"),": ",e)," ",qn("button",{class:"cm-button",type:"submit"},n.state.phrase("go")));function i(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);if(!s)return;let{state:r}=n,o=r.doc.lineAt(r.selection.main.head),[,l,a,c,u]=s,f=c?+c.slice(1):0,h=a?+a:o.number;if(a&&u){let m=h/100;l&&(m=m*(l=="-"?-1:1)+o.number/r.doc.lines),h=Math.round(r.doc.lines*m)}else a&&l&&(h=h*(l=="-"?-1:1)+o.number);let d=r.doc.line(Math.max(1,Math.min(r.doc.lines,h)));n.dispatch({effects:Bd.of(!1),selection:Je.cursor(d.from+Math.max(0,Math.min(f,d.length))),scrollIntoView:!0}),n.focus()}return{dom:t}}const Bd=nn.define(),zA=Wi.define({create(){return!0},update(n,e){for(let t of e.effects)t.is(Bd)&&(n=t.value);return n},provide:n=>qu.from(n,e=>e?m0:null)}),aZ=n=>{let e=Hu(n,m0);if(!e){let t=[Bd.of(!0)];n.state.field(zA,!1)==null&&t.push(nn.appendConfig.of([zA,cZ])),n.dispatch({effects:t}),e=Hu(n,m0)}return e&&e.dom.querySelector("input").focus(),!0},cZ=kt.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),uZ={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},XD=Tt.define({combine(n){return Ar(n,uZ,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function fZ(n){let e=[gZ,pZ];return n&&e.push(XD.of(n)),e}const hZ=Ut.mark({class:"cm-selectionMatch"}),dZ=Ut.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function GA(n,e,t,i){return(t==0||n(e.sliceDoc(t-1,t))!=ni.Word)&&(i==e.doc.length||n(e.sliceDoc(i,i+1))!=ni.Word)}function mZ(n,e,t,i){return n(e.sliceDoc(t,t+1))==ni.Word&&n(e.sliceDoc(i-1,i))==ni.Word}const pZ=ki.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.selectionSet||n.docChanged||n.viewportChanged)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=n.state.facet(XD),{state:t}=n,i=t.selection;if(i.ranges.length>1)return Ut.none;let s=i.main,r,o=null;if(s.empty){if(!e.highlightWordAroundCursor)return Ut.none;let a=t.wordAt(s.head);if(!a)return Ut.none;o=t.charCategorizer(s.head),r=t.sliceDoc(a.from,a.to)}else{let a=s.to-s.from;if(a<e.minSelectionLength||a>200)return Ut.none;if(e.wholeWords){if(r=t.sliceDoc(s.from,s.to),o=t.charCategorizer(s.head),!(GA(o,t,s.from,s.to)&&mZ(o,t,s.from,s.to)))return Ut.none}else if(r=t.sliceDoc(s.from,s.to).trim(),!r)return Ut.none}let l=[];for(let a of n.visibleRanges){let c=new ic(t.doc,r,a.from,a.to);for(;!c.next().done;){let{from:u,to:f}=c.value;if((!o||GA(o,t,u,f))&&(s.empty&&u<=s.from&&f>=s.to?l.push(dZ.range(u,f)):(u>=s.to||f<=s.from)&&l.push(hZ.range(u,f)),l.length>e.maxMatches))return Ut.none}}return Ut.set(l)}},{decorations:n=>n.decorations}),gZ=kt.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),vZ=({state:n,dispatch:e})=>{let{selection:t}=n,i=Je.create(t.ranges.map(s=>n.wordAt(s.head)||Je.cursor(s.head)),t.mainIndex);return i.eq(t)?!1:(e(n.update({selection:i})),!0)};function bZ(n,e){let{main:t,ranges:i}=n.selection,s=n.wordAt(t.head),r=s&&s.from==t.from&&s.to==t.to;for(let o=!1,l=new ic(n.doc,e,i[i.length-1].to);;)if(l.next(),l.done){if(o)return null;l=new ic(n.doc,e,0,Math.max(0,i[i.length-1].from-1)),o=!0}else{if(o&&i.some(a=>a.from==l.value.from))continue;if(r){let a=n.wordAt(l.value.from);if(!a||a.from!=l.value.from||a.to!=l.value.to)continue}return l.value}}const _Z=({state:n,dispatch:e})=>{let{ranges:t}=n.selection;if(t.some(r=>r.from===r.to))return vZ({state:n,dispatch:e});let i=n.sliceDoc(t[0].from,t[0].to);if(n.selection.ranges.some(r=>n.sliceDoc(r.from,r.to)!=i))return!1;let s=bZ(n,i);return s?(e(n.update({selection:n.selection.addRange(Je.range(s.from,s.to),!1),effects:kt.scrollIntoView(s.to)})),!0):!1},tp=Tt.define({combine(n){return Ar(n,{top:!1,caseSensitive:!1,literal:!1,wholeWord:!1,createPanel:e=>new NZ(e)})}});function yZ(n){return n?[tp.of(n),g0]:g0}class QD{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||lZ(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new wZ(this):new EZ(this)}getCursor(e,t=0,i){let s=e.doc?e:un.create({doc:e});return i==null&&(i=s.doc.length),this.regexp?ba(this,s,t,i):va(this,s,t,i)}}class YD{constructor(e){this.spec=e}}function va(n,e,t,i){return new ic(e.doc,n.unquoted,t,i,n.caseSensitive?void 0:s=>s.toLowerCase(),n.wholeWord?SZ(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function SZ(n,e){return(t,i,s,r)=>((r>t||r+s.length<i)&&(r=Math.max(0,t-2),s=n.sliceString(r,Math.min(n.length,i+2))),(e(Ld(s,t-r))!=ni.Word||e(Wd(s,t-r))!=ni.Word)&&(e(Wd(s,i-r))!=ni.Word||e(Ld(s,i-r))!=ni.Word))}class EZ extends YD{constructor(e){super(e)}nextMatch(e,t,i){let s=va(this.spec,e,i,e.doc.length).nextOverlapping();return s.done&&(s=va(this.spec,e,0,t).nextOverlapping()),s.done?null:s.value}prevMatchInRange(e,t,i){for(let s=i;;){let r=Math.max(t,s-1e4-this.spec.unquoted.length),o=va(this.spec,e,r,s),l=null;for(;!o.nextOverlapping().done;)l=o.value;if(l)return l;if(r==t)return null;s-=1e4}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let i=va(this.spec,e,0,e.doc.length),s=[];for(;!i.next().done;){if(s.length>=t)return null;s.push(i.value)}return s}highlight(e,t,i,s){let r=va(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!r.next().done;)s(r.value.from,r.value.to)}}function ba(n,e,t,i){return new GD(e.doc,n.search,{ignoreCase:!n.caseSensitive,test:n.wholeWord?AZ(e.charCategorizer(e.selection.main.head)):void 0},t,i)}function Ld(n,e){return n.slice(As(n,e,!1),e)}function Wd(n,e){return n.slice(e,As(n,e))}function AZ(n){return(e,t,i)=>!i[0].length||(n(Ld(i.input,i.index))!=ni.Word||n(Wd(i.input,i.index))!=ni.Word)&&(n(Wd(i.input,i.index+i[0].length))!=ni.Word||n(Ld(i.input,i.index+i[0].length))!=ni.Word)}class wZ extends YD{nextMatch(e,t,i){let s=ba(this.spec,e,i,e.doc.length).next();return s.done&&(s=ba(this.spec,e,0,t).next()),s.done?null:s.value}prevMatchInRange(e,t,i){for(let s=1;;s++){let r=Math.max(t,i-s*1e4),o=ba(this.spec,e,r,i),l=null;for(;!o.next().done;)l=o.value;if(l&&(r==t||l.from>r+10))return l;if(r==t)return null}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g,(t,i)=>i=="$"?"$":i=="&"?e.match[0]:i!="0"&&+i<e.match.length?e.match[i]:t))}matchAll(e,t){let i=ba(this.spec,e,0,e.doc.length),s=[];for(;!i.next().done;){if(s.length>=t)return null;s.push(i.value)}return s}highlight(e,t,i,s){let r=ba(this.spec,e,Math.max(0,t-250),Math.min(i+250,e.doc.length));for(;!r.next().done;)s(r.value.from,r.value.to)}}const Gu=nn.define(),Ib=nn.define(),jo=Wi.define({create(n){return new eg(p0(n).create(),null)},update(n,e){for(let t of e.effects)t.is(Gu)?n=new eg(t.value.create(),n.panel):t.is(Ib)&&(n=new eg(n.query,t.value?Tb:null));return n},provide:n=>qu.from(n,e=>e.panel)});class eg{constructor(e,t){this.query=e,this.panel=t}}const CZ=Ut.mark({class:"cm-searchMatch"}),kZ=Ut.mark({class:"cm-searchMatch cm-searchMatch-selected"}),IZ=ki.fromClass(class{constructor(n){this.view=n,this.decorations=this.highlight(n.state.field(jo))}update(n){let e=n.state.field(jo);(e!=n.startState.field(jo)||n.docChanged||n.selectionSet||n.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:n,panel:e}){if(!e||!n.spec.valid)return Ut.none;let{view:t}=this,i=new xo;for(let s=0,r=t.visibleRanges,o=r.length;s<o;s++){let{from:l,to:a}=r[s];for(;s<o-1&&a>r[s+1].from-2*250;)a=r[++s].to;n.highlight(t.state,l,a,(c,u)=>{let f=t.state.selection.ranges.some(h=>h.from==c&&h.to==u);i.add(c,u,f?kZ:CZ)})}return i.finish()}},{decorations:n=>n.decorations});function Cf(n){return e=>{let t=e.state.field(jo,!1);return t&&t.query.spec.valid?n(e,t):Ob(e)}}const Ud=Cf((n,{query:e})=>{let{to:t}=n.state.selection.main,i=e.nextMatch(n.state,t,t);return i?(n.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:Db(n,i),userEvent:"select.search"}),!0):!1}),Vd=Cf((n,{query:e})=>{let{state:t}=n,{from:i}=t.selection.main,s=e.prevMatch(t,i,i);return s?(n.dispatch({selection:{anchor:s.from,head:s.to},scrollIntoView:!0,effects:Db(n,s),userEvent:"select.search"}),!0):!1}),TZ=Cf((n,{query:e})=>{let t=e.matchAll(n.state,1e3);return!t||!t.length?!1:(n.dispatch({selection:Je.create(t.map(i=>Je.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),OZ=({state:n,dispatch:e})=>{let t=n.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:i,to:s}=t.main,r=[],o=0;for(let l=new ic(n.doc,n.sliceDoc(i,s));!l.next().done;){if(r.length>1e3)return!1;l.value.from==i&&(o=r.length),r.push(Je.range(l.value.from,l.value.to))}return e(n.update({selection:Je.create(r,o),userEvent:"select.search.matches"})),!0},KA=Cf((n,{query:e})=>{let{state:t}=n,{from:i,to:s}=t.selection.main;if(t.readOnly)return!1;let r=e.nextMatch(t,i,i);if(!r)return!1;let o=[],l,a,c=[];if(r.from==i&&r.to==s&&(a=t.toText(e.getReplacement(r)),o.push({from:r.from,to:r.to,insert:a}),r=e.nextMatch(t,r.from,r.to),c.push(kt.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(i).number)+"."))),r){let u=o.length==0||o[0].from>=r.to?0:r.to-r.from-a.length;l={anchor:r.from-u,head:r.to-u},c.push(Db(n,r))}return n.dispatch({changes:o,selection:l,scrollIntoView:!!l,effects:c,userEvent:"input.replace"}),!0}),RZ=Cf((n,{query:e})=>{if(n.state.readOnly)return!1;let t=e.matchAll(n.state,1e9).map(s=>{let{from:r,to:o}=s;return{from:r,to:o,insert:e.getReplacement(s)}});if(!t.length)return!1;let i=n.state.phrase("replaced $ matches",t.length)+".";return n.dispatch({changes:t,effects:kt.announce.of(i),userEvent:"input.replace.all"}),!0});function Tb(n){return n.state.facet(tp).createPanel(n)}function p0(n,e){var t,i,s,r;let o=n.selection.main,l=o.empty||o.to>o.from+100?"":n.sliceDoc(o.from,o.to);if(e&&!l)return e;let a=n.facet(tp);return new QD({search:((t=e==null?void 0:e.literal)!==null&&t!==void 0?t:a.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(i=e==null?void 0:e.caseSensitive)!==null&&i!==void 0?i:a.caseSensitive,literal:(s=e==null?void 0:e.literal)!==null&&s!==void 0?s:a.literal,wholeWord:(r=e==null?void 0:e.wholeWord)!==null&&r!==void 0?r:a.wholeWord})}const Ob=n=>{let e=n.state.field(jo,!1);if(e&&e.panel){let t=Hu(n,Tb);if(!t)return!1;let i=t.dom.querySelector("[main-field]");if(i&&i!=n.root.activeElement){let s=p0(n.state,e.query.spec);s.valid&&n.dispatch({effects:Gu.of(s)}),i.focus(),i.select()}}else n.dispatch({effects:[Ib.of(!0),e?Gu.of(p0(n.state,e.query.spec)):nn.appendConfig.of(g0)]});return!0},Rb=n=>{let e=n.state.field(jo,!1);if(!e||!e.panel)return!1;let t=Hu(n,Tb);return t&&t.dom.contains(n.root.activeElement)&&n.focus(),n.dispatch({effects:Ib.of(!1)}),!0},DZ=[{key:"Mod-f",run:Ob,scope:"editor search-panel"},{key:"F3",run:Ud,shift:Vd,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Ud,shift:Vd,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Rb,scope:"editor search-panel"},{key:"Mod-Shift-l",run:OZ},{key:"Alt-g",run:aZ},{key:"Mod-d",run:_Z,preventDefault:!0}];class NZ{constructor(e){this.view=e;let t=this.query=e.state.field(jo).query.spec;this.commit=this.commit.bind(this),this.searchField=qn("input",{value:t.search,placeholder:Ws(e,"Find"),"aria-label":Ws(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=qn("input",{value:t.replace,placeholder:Ws(e,"Replace"),"aria-label":Ws(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=qn("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=qn("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=qn("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function i(s,r,o){return qn("button",{class:"cm-button",name:s,onclick:r,type:"button"},o)}this.dom=qn("div",{onkeydown:s=>this.keydown(s),class:"cm-search"},[this.searchField,i("next",()=>Ud(e),[Ws(e,"next")]),i("prev",()=>Vd(e),[Ws(e,"previous")]),i("select",()=>TZ(e),[Ws(e,"all")]),qn("label",null,[this.caseField,Ws(e,"match case")]),qn("label",null,[this.reField,Ws(e,"regexp")]),qn("label",null,[this.wordField,Ws(e,"by word")]),...e.state.readOnly?[]:[qn("br"),this.replaceField,i("replace",()=>KA(e),[Ws(e,"replace")]),i("replaceAll",()=>RZ(e),[Ws(e,"replace all")])],qn("button",{name:"close",onclick:()=>Rb(e),"aria-label":Ws(e,"close"),type:"button"},[""])])}commit(){let e=new QD({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Gu.of(e)}))}keydown(e){XX(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Vd:Ud)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),KA(this.view))}update(e){for(let t of e.transactions)for(let i of t.effects)i.is(Gu)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(tp).top}}function Ws(n,e){return n.state.phrase(e)}const oh=30,lh=/[\s\.,:;?!]/;function Db(n,{from:e,to:t}){let i=n.state.doc.lineAt(e),s=n.state.doc.lineAt(t).to,r=Math.max(i.from,e-oh),o=Math.min(s,t+oh),l=n.state.sliceDoc(r,o);if(r!=i.from){for(let a=0;a<oh;a++)if(!lh.test(l[a+1])&&lh.test(l[a])){l=l.slice(a);break}}if(o!=s){for(let a=l.length-1;a>l.length-oh;a--)if(!lh.test(l[a-1])&&lh.test(l[a])){l=l.slice(0,a);break}}return kt.announce.of(`${n.state.phrase("current match")}. ${l} ${n.state.phrase("on line")} ${i.number}.`)}const PZ=kt.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),g0=[jo,Ec.lowest(IZ),PZ];class JD{constructor(e,t,i){this.state=e,this.pos=t,this.explicit=i,this.abortListeners=[]}tokenBefore(e){let t=gs(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),i=Math.max(t.from,this.pos-250),s=t.text.slice(i-t.from,this.pos-t.from),r=s.search(ZD(e,!1));return r<0?null:{from:i+r,to:this.pos,text:s.slice(r)}}get aborted(){return this.abortListeners==null}addEventListener(e,t){e=="abort"&&this.abortListeners&&this.abortListeners.push(t)}}function XA(n){let e=Object.keys(n).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function MZ(n){let e=Object.create(null),t=Object.create(null);for(let{label:s}of n){e[s[0]]=!0;for(let r=1;r<s.length;r++)t[s[r]]=!0}let i=XA(e)+XA(t)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function BZ(n){let e=n.map(s=>typeof s=="string"?{label:s}:s),[t,i]=e.every(s=>/^\w+$/.test(s.label))?[/\w*$/,/\w+$/]:MZ(e);return s=>{let r=s.matchBefore(i);return r||s.explicit?{from:r?r.from:s.pos,options:e,validFor:t}:null}}class QA{constructor(e,t,i){this.completion=e,this.source=t,this.match=i}}function Ho(n){return n.selection.main.head}function ZD(n,e){var t;let{source:i}=n,s=e&&i[0]!="^",r=i[i.length-1]!="$";return!s&&!r?n:new RegExp(`${s?"^":""}(?:${i})${r?"$":""}`,(t=n.flags)!==null&&t!==void 0?t:n.ignoreCase?"i":"")}const LZ=Eo.define();function WZ(n,e,t,i){return Object.assign(Object.assign({},n.changeByRange(s=>{if(s==n.selection.main)return{changes:{from:t,to:i,insert:e},range:Je.cursor(t+e.length)};let r=i-t;return!s.empty||r&&n.sliceDoc(s.from-r,s.from)!=n.sliceDoc(t,i)?{range:s}:{changes:{from:s.from-r,to:s.from,insert:e},range:Je.cursor(s.from-r+e.length)}})),{userEvent:"input.complete"})}function xD(n,e){const t=e.completion.apply||e.completion.label;let i=e.source;typeof t=="string"?n.dispatch(Object.assign(Object.assign({},WZ(n.state,t,i.from,i.to)),{annotations:LZ.of(e.completion)})):t(n,e.completion,i.from,i.to)}const YA=new WeakMap;function UZ(n){if(!Array.isArray(n))return n;let e=YA.get(n);return e||YA.set(n,e=BZ(n)),e}class VZ{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let t=0;t<e.length;){let i=Xi(e,t),s=$s(i);this.chars.push(i);let r=e.slice(t,t+s),o=r.toUpperCase();this.folded.push(Xi(o==r?r.toLowerCase():o,0)),t+=s}this.astral=e.length!=this.chars.length}match(e){if(this.pattern.length==0)return[0];if(e.length<this.pattern.length)return null;let{chars:t,folded:i,any:s,precise:r,byWord:o}=this;if(t.length==1){let y=Xi(e,0),E=$s(y),w=E==e.length?0:-100;if(y!=t[0])if(y==i[0])w+=-200;else return null;return[w,0,E]}let l=e.indexOf(this.pattern);if(l==0)return[e.length==this.pattern.length?0:-100,0,this.pattern.length];let a=t.length,c=0;if(l<0){for(let y=0,E=Math.min(e.length,200);y<E&&c<a;){let w=Xi(e,y);(w==t[c]||w==i[c])&&(s[c++]=y),y+=$s(w)}if(c<a)return null}let u=0,f=0,h=!1,d=0,m=-1,g=-1,_=/[a-z]/.test(e),v=!0;for(let y=0,E=Math.min(e.length,200),w=0;y<E&&f<a;){let A=Xi(e,y);l<0&&(u<a&&A==t[u]&&(r[u++]=y),d<a&&(A==t[d]||A==i[d]?(d==0&&(m=y),g=y+1,d++):d=0));let I,R=A<255?A>=48&&A<=57||A>=97&&A<=122?2:A>=65&&A<=90?1:0:(I=sb(A))!=I.toLowerCase()?1:I!=I.toUpperCase()?2:0;(!y||R==1&&_||w==0&&R!=0)&&(t[f]==A||i[f]==A&&(h=!0)?o[f++]=y:o.length&&(v=!1)),w=R,y+=$s(A)}return f==a&&o[0]==0&&v?this.result(-100+(h?-200:0),o,e):d==a&&m==0?[-200-e.length+(g==e.length?0:-100),0,g]:l>-1?[-700-e.length,l,l+this.pattern.length]:d==a?[-200+-700-e.length,m,g]:f==a?this.result(-100+(h?-200:0)+-700+(v?0:-1100),o,e):t.length==2?null:this.result((s[0]?-700:0)+-200+-1100,s,e)}result(e,t,i){let s=[e-i.length],r=1;for(let o of t){let l=o+(this.astral?$s(Xi(i,o)):1);r>1&&s[r-1]==o?s[r-1]=l:(s[r++]=o,s[r++]=l)}return s}}const or=Tt.define({combine(n){return Ar(n,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>i=>JA(e(i),t(i)),optionClass:(e,t)=>i=>JA(e(i),t(i)),addToOptions:(e,t)=>e.concat(t)})}});function JA(n,e){return n?e?n+" "+e:n:e}function FZ(n){let e=n.addToOptions.slice();return n.icons&&e.push({render(t){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),t.type&&i.classList.add(...t.type.split(/\s+/g).map(s=>"cm-completionIcon-"+s)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(t,i,s){let r=document.createElement("span");r.className="cm-completionLabel";let{label:o}=t,l=0;for(let a=1;a<s.length;){let c=s[a++],u=s[a++];c>l&&r.appendChild(document.createTextNode(o.slice(l,c)));let f=r.appendChild(document.createElement("span"));f.appendChild(document.createTextNode(o.slice(c,u))),f.className="cm-completionMatchedText",l=u}return l<o.length&&r.appendChild(document.createTextNode(o.slice(l))),r},position:50},{render(t){if(!t.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=t.detail,i},position:80}),e.sort((t,i)=>t.position-i.position).map(t=>t.render)}function ZA(n,e,t){if(n<=t)return{from:0,to:n};if(e<0&&(e=0),e<=n>>1){let s=Math.floor(e/t);return{from:s*t,to:(s+1)*t}}let i=Math.floor((n-e)/t);return{from:n-(i+1)*t,to:n-i*t}}class jZ{constructor(e,t){this.view=e,this.stateField=t,this.info=null,this.placeInfo={read:()=>this.measureInfo(),write:l=>this.positionInfo(l),key:this},this.space=null,this.currentClass="";let i=e.state.field(t),{options:s,selected:r}=i.open,o=e.state.facet(or);this.optionContent=FZ(o),this.optionClass=o.optionClass,this.tooltipClass=o.tooltipClass,this.range=ZA(s.length,r,o.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{for(let a=l.target,c;a&&a!=this.dom;a=a.parentNode)if(a.nodeName=="LI"&&(c=/-(\d+)$/.exec(a.id))&&+c[1]<s.length){xD(e,s[+c[1]]),l.preventDefault();return}}),this.list=this.dom.appendChild(this.createListBox(s,i.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})}mount(){this.updateSel()}update(e){var t,i,s;let r=e.state.field(this.stateField),o=e.startState.field(this.stateField);this.updateTooltipClass(e.state),r!=o&&(this.updateSel(),((t=r.open)===null||t===void 0?void 0:t.disabled)!=((i=o.open)===null||i===void 0?void 0:i.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!(!((s=r.open)===null||s===void 0)&&s.disabled)))}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of t.split(" "))i&&this.dom.classList.add(i);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfo)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=ZA(t.options.length,t.selected,this.view.state.facet(or).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(t.options,e.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})),this.updateSelectedOption(t.selected)){this.info&&(this.info.remove(),this.info=null);let{completion:i}=t.options[t.selected],{info:s}=i;if(!s)return;let r=typeof s=="string"?document.createTextNode(s):s(i);if(!r)return;"then"in r?r.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o)}).catch(o=>qs(this.view.state,o,"completion info")):this.addInfoPane(r)}}addInfoPane(e){let t=this.info=document.createElement("div");t.className="cm-tooltip cm-completionInfo",t.appendChild(e),this.dom.appendChild(t),this.view.requestMeasure(this.placeInfo)}updateSelectedOption(e){let t=null;for(let i=this.list.firstChild,s=this.range.from;i;i=i.nextSibling,s++)s==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),t=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return t&&qZ(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),s=e.getBoundingClientRect(),r=this.space;if(!r){let m=this.dom.ownerDocument.defaultView||window;r={left:0,top:0,right:m.innerWidth,bottom:m.innerHeight}}if(s.top>Math.min(r.bottom,t.bottom)-10||s.bottom<Math.max(r.top,t.top)+10)return null;let o=this.view.textDirection==ri.RTL,l=o,a=!1,c,u="",f="",h=t.left-r.left,d=r.right-t.right;if(l&&h<Math.min(i.width,d)?l=!1:!l&&d<Math.min(i.width,h)&&(l=!0),i.width<=(l?h:d))u=Math.max(r.top,Math.min(s.top,r.bottom-i.height))-t.top+"px",c=Math.min(400,l?h:d)+"px";else{a=!0,c=Math.min(400,(o?t.right:r.right-t.left)-30)+"px";let m=r.bottom-t.bottom;m>=i.height||m>t.top?u=s.bottom-t.top+"px":f=t.bottom-s.top+"px"}return{top:u,bottom:f,maxWidth:c,class:a?o?"left-narrow":"right-narrow":l?"left":"right"}}positionInfo(e){this.info&&(e?(this.info.style.top=e.top,this.info.style.bottom=e.bottom,this.info.style.maxWidth=e.maxWidth,this.info.className="cm-tooltip cm-completionInfo cm-completionInfo-"+e.class):this.info.style.top="-1e6px")}createListBox(e,t,i){const s=document.createElement("ul");s.id=t,s.setAttribute("role","listbox"),s.setAttribute("aria-expanded","true"),s.setAttribute("aria-label",this.view.state.phrase("Completions"));for(let r=i.from;r<i.to;r++){let{completion:o,match:l}=e[r];const a=s.appendChild(document.createElement("li"));a.id=t+"-"+r,a.setAttribute("role","option");let c=this.optionClass(o);c&&(a.className=c);for(let u of this.optionContent){let f=u(o,this.view.state,l);f&&a.appendChild(f)}}return i.from&&s.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&s.classList.add("cm-completionListIncompleteBottom"),s}}function HZ(n){return e=>new jZ(e,n)}function qZ(n,e){let t=n.getBoundingClientRect(),i=e.getBoundingClientRect();i.top<t.top?n.scrollTop-=t.top-i.top:i.bottom>t.bottom&&(n.scrollTop+=i.bottom-t.bottom)}function xA(n){return(n.boost||0)*100+(n.apply?10:0)+(n.info?5:0)+(n.type?1:0)}function zZ(n,e){let t=[],i=0;for(let l of n)if(l.hasResult())if(l.result.filter===!1){let a=l.result.getMatch;for(let c of l.result.options){let u=[1e9-i++];if(a)for(let f of a(c))u.push(f);t.push(new QA(c,l,u))}}else{let a=new VZ(e.sliceDoc(l.from,l.to)),c;for(let u of l.result.options)(c=a.match(u.label))&&(u.boost!=null&&(c[0]+=u.boost),t.push(new QA(u,l,c)))}let s=[],r=null,o=e.facet(or).compareCompletions;for(let l of t.sort((a,c)=>c.match[0]-a.match[0]||o(a.completion,c.completion)))!r||r.label!=l.completion.label||r.detail!=l.completion.detail||r.type!=null&&l.completion.type!=null&&r.type!=l.completion.type||r.apply!=l.completion.apply?s.push(l):xA(l.completion)>xA(r)&&(s[s.length-1]=l),r=l.completion;return s}class Aa{constructor(e,t,i,s,r,o){this.options=e,this.attrs=t,this.tooltip=i,this.timestamp=s,this.selected=r,this.disabled=o}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new Aa(this.options,$A(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,i,s,r){let o=zZ(e,t);if(!o.length)return s&&e.some(a=>a.state==1)?new Aa(s.options,s.attrs,s.tooltip,s.timestamp,s.selected,!0):null;let l=t.facet(or).selectOnOpen?0:-1;if(s&&s.selected!=l&&s.selected!=-1){let a=s.options[s.selected].completion;for(let c=0;c<o.length;c++)if(o[c].completion==a){l=c;break}}return new Aa(o,$A(i,l),{pos:e.reduce((a,c)=>c.hasResult()?Math.min(a,c.from):a,1e8),create:HZ(Js),above:r.aboveCursor},s?s.timestamp:Date.now(),l,!1)}map(e){return new Aa(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class Fd{constructor(e,t,i){this.active=e,this.id=t,this.open=i}static start(){return new Fd(XZ,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,i=t.facet(or),r=(i.override||t.languageDataAt("autocomplete",Ho(t)).map(UZ)).map(l=>(this.active.find(c=>c.source==l)||new Ps(l,this.active.some(c=>c.state!=0)?1:0)).update(e,i));r.length==this.active.length&&r.every((l,a)=>l==this.active[a])&&(r=this.active);let o=this.open;o&&e.docChanged&&(o=o.map(e.changes)),e.selection||r.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!GZ(r,this.active)?o=Aa.build(r,t,this.id,o,i):o&&o.disabled&&!r.some(l=>l.state==1)&&(o=null),!o&&r.every(l=>l.state!=1)&&r.some(l=>l.hasResult())&&(r=r.map(l=>l.hasResult()?new Ps(l.source,0):l));for(let l of e.effects)l.is(eN)&&(o=o&&o.setSelected(l.value,this.id));return r==this.active&&o==this.open?this:new Fd(r,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:KZ}}function GZ(n,e){if(n==e)return!0;for(let t=0,i=0;;){for(;t<n.length&&!n[t].hasResult;)t++;for(;i<e.length&&!e[i].hasResult;)i++;let s=t==n.length,r=i==e.length;if(s||r)return s==r;if(n[t++].result!=e[i++].result)return!1}}const KZ={"aria-autocomplete":"list"};function $A(n,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":n};return e>-1&&(t["aria-activedescendant"]=n+"-"+e),t}const XZ=[];function v0(n){return n.isUserEvent("input.type")?"input":n.isUserEvent("delete.backward")?"delete":null}class Ps{constructor(e,t,i=-1){this.source=e,this.state=t,this.explicitPos=i}hasResult(){return!1}update(e,t){let i=v0(e),s=this;i?s=s.handleUserEvent(e,i,t):e.docChanged?s=s.handleChange(e):e.selection&&s.state!=0&&(s=new Ps(s.source,0));for(let r of e.effects)if(r.is(Nb))s=new Ps(s.source,1,r.value?Ho(e.state):-1);else if(r.is(jd))s=new Ps(s.source,0);else if(r.is($D))for(let o of r.value)o.source==s.source&&(s=o);return s}handleUserEvent(e,t,i){return t=="delete"||!i.activateOnTyping?this.map(e.changes):new Ps(this.source,1)}handleChange(e){return e.changes.touchesRange(Ho(e.startState))?new Ps(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new Ps(this.source,this.state,e.mapPos(this.explicitPos))}}class au extends Ps{constructor(e,t,i,s,r){super(e,2,t),this.result=i,this.from=s,this.to=r}hasResult(){return!0}handleUserEvent(e,t,i){var s;let r=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),l=Ho(e.state);if((this.explicitPos<0?l<=r:l<this.from)||l>o||t=="delete"&&Ho(e.startState)==this.from)return new Ps(this.source,t=="input"&&i.activateOnTyping?1:0);let a=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos),c;return QZ(this.result.validFor,e.state,r,o)?new au(this.source,a,this.result,r,o):this.result.update&&(c=this.result.update(this.result,r,o,new JD(e.state,l,a>=0)))?new au(this.source,a,c,c.from,(s=c.to)!==null&&s!==void 0?s:Ho(e.state)):new Ps(this.source,1,a)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new Ps(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new au(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}function QZ(n,e,t,i){if(!n)return!1;let s=e.sliceDoc(t,i);return typeof n=="function"?n(s,t,i,e):ZD(n,!0).test(s)}const Nb=nn.define(),jd=nn.define(),$D=nn.define({map(n,e){return n.map(t=>t.map(e))}}),eN=nn.define(),Js=Wi.define({create(){return Fd.start()},update(n,e){return n.update(e)},provide:n=>[Km.from(n,e=>e.tooltip),kt.contentAttributes.from(n,e=>e.attrs)]});function ah(n,e="option"){return t=>{let i=t.state.field(Js,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<t.state.facet(or).interactionDelay)return!1;let s=1,r;e=="page"&&(r=PQ(t,i.open.tooltip))&&(s=Math.max(2,Math.floor(r.dom.offsetHeight/r.dom.querySelector("li").offsetHeight)-1));let{length:o}=i.open.options,l=i.open.selected>-1?i.open.selected+s*(n?1:-1):n?0:o-1;return l<0?l=e=="page"?0:o-1:l>=o&&(l=e=="page"?o-1:0),t.dispatch({effects:eN.of(l)}),!0}}const YZ=n=>{let e=n.state.field(Js,!1);return n.state.readOnly||!e||!e.open||e.open.selected<0||Date.now()-e.open.timestamp<n.state.facet(or).interactionDelay?!1:(e.open.disabled||xD(n,e.open.options[e.open.selected]),!0)},JZ=n=>n.state.field(Js,!1)?(n.dispatch({effects:Nb.of(!0)}),!0):!1,ZZ=n=>{let e=n.state.field(Js,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(n.dispatch({effects:jd.of(null)}),!0)};class xZ{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const ew=50,$Z=50,ex=1e3,tx=ki.fromClass(class{constructor(n){this.view=n,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let e of n.state.field(Js).active)e.state==1&&this.startQuery(e)}update(n){let e=n.state.field(Js);if(!n.selectionSet&&!n.docChanged&&n.startState.field(Js)==e)return;let t=n.transactions.some(i=>(i.selection||i.docChanged)&&!v0(i));for(let i=0;i<this.running.length;i++){let s=this.running[i];if(t||s.updates.length+n.transactions.length>$Z&&Date.now()-s.time>ex){for(let r of s.context.abortListeners)try{r()}catch(o){qs(this.view.state,o)}s.context.abortListeners=null,this.running.splice(i--,1)}else s.updates.push(...n.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=e.active.some(i=>i.state==1&&!this.running.some(s=>s.active.source==i.source))?setTimeout(()=>this.startUpdate(),ew):-1,this.composing!=0)for(let i of n.transactions)v0(i)=="input"?this.composing=2:this.composing==2&&i.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:n}=this.view,e=n.field(Js);for(let t of e.active)t.state==1&&!this.running.some(i=>i.active.source==t.source)&&this.startQuery(t)}startQuery(n){let{state:e}=this.view,t=Ho(e),i=new JD(e,t,n.explicitPos==t),s=new xZ(n,i);this.running.push(s),Promise.resolve(n.source(i)).then(r=>{s.context.aborted||(s.done=r||null,this.scheduleAccept())},r=>{this.view.dispatch({effects:jd.of(null)}),qs(this.view.state,r)})}scheduleAccept(){this.running.every(n=>n.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),ew))}accept(){var n;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(or);for(let i=0;i<this.running.length;i++){let s=this.running[i];if(s.done===void 0)continue;if(this.running.splice(i--,1),s.done){let o=new au(s.active.source,s.active.explicitPos,s.done,s.done.from,(n=s.done.to)!==null&&n!==void 0?n:Ho(s.updates.length?s.updates[0].startState:this.view.state));for(let l of s.updates)o=o.update(l,t);if(o.hasResult()){e.push(o);continue}}let r=this.view.state.field(Js).active.find(o=>o.source==s.active.source);if(r&&r.state==1)if(s.done==null){let o=new Ps(s.active.source,0);for(let l of s.updates)o=o.update(l,t);o.state!=1&&e.push(o)}else this.startQuery(r)}e.length&&this.view.dispatch({effects:$D.of(e)})}},{eventHandlers:{blur(){let n=this.view.state.field(Js,!1);n&&n.tooltip&&this.view.state.facet(or).closeOnBlur&&this.view.dispatch({effects:jd.of(null)})},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Nb.of(!1)}),20),this.composing=0}}}),nx=kt.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:`${400}px`,boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:`${30}px`},".cm-completionInfo.cm-completionInfo-right-narrow":{left:`${30}px`},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),Ku={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},wl=nn.define({map(n,e){let t=e.mapPos(n,-1,Ss.TrackAfter);return t??void 0}}),Pb=nn.define({map(n,e){return e.mapPos(n)}}),Mb=new class extends Kl{};Mb.startSide=1;Mb.endSide=-1;const tN=Wi.define({create(){return On.empty},update(n,e){if(e.selection){let t=e.state.doc.lineAt(e.selection.main.head).from,i=e.startState.doc.lineAt(e.startState.selection.main.head).from;t!=e.changes.mapPos(i,-1)&&(n=On.empty)}n=n.map(e.changes);for(let t of e.effects)t.is(wl)?n=n.update({add:[Mb.range(t.value,t.value+1)]}):t.is(Pb)&&(n=n.update({filter:i=>i!=t.value}));return n}});function ix(){return[rx,tN]}const tg="()[]{}<>";function nN(n){for(let e=0;e<tg.length;e+=2)if(tg.charCodeAt(e)==n)return tg.charAt(e+1);return sb(n<128?n:n+1)}function iN(n,e){return n.languageDataAt("closeBrackets",e)[0]||Ku}const sx=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),rx=kt.inputHandler.of((n,e,t,i)=>{if((sx?n.composing:n.compositionStarted)||n.state.readOnly)return!1;let s=n.state.selection.main;if(i.length>2||i.length==2&&$s(Xi(i,0))==1||e!=s.from||t!=s.to)return!1;let r=ax(n.state,i);return r?(n.dispatch(r),!0):!1}),ox=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let i=iN(n,n.selection.main.head).brackets||Ku.brackets,s=null,r=n.changeByRange(o=>{if(o.empty){let l=cx(n.doc,o.head);for(let a of i)if(a==l&&np(n.doc,o.head)==nN(Xi(a,0)))return{changes:{from:o.head-a.length,to:o.head+a.length},range:Je.cursor(o.head-a.length)}}return{range:s=o}});return s||e(n.update(r,{scrollIntoView:!0,userEvent:"delete.backward"})),!s},lx=[{key:"Backspace",run:ox}];function ax(n,e){let t=iN(n,n.selection.main.head),i=t.brackets||Ku.brackets;for(let s of i){let r=nN(Xi(s,0));if(e==s)return r==s?hx(n,s,i.indexOf(s+s+s)>-1,t):ux(n,s,r,t.before||Ku.before);if(e==r&&sN(n,n.selection.main.from))return fx(n,s,r)}return null}function sN(n,e){let t=!1;return n.field(tN).between(0,n.doc.length,i=>{i==e&&(t=!0)}),t}function np(n,e){let t=n.sliceString(e,e+2);return t.slice(0,$s(Xi(t,0)))}function cx(n,e){let t=n.sliceString(e-2,e);return $s(Xi(t,0))==t.length?t:t.slice(1)}function ux(n,e,t,i){let s=null,r=n.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:t,from:o.to}],effects:wl.of(o.to+e.length),range:Je.range(o.anchor+e.length,o.head+e.length)};let l=np(n.doc,o.head);return!l||/\s/.test(l)||i.indexOf(l)>-1?{changes:{insert:e+t,from:o.head},effects:wl.of(o.head+e.length),range:Je.cursor(o.head+e.length)}:{range:s=o}});return s?null:n.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function fx(n,e,t){let i=null,s=n.selection.ranges.map(r=>r.empty&&np(n.doc,r.head)==t?Je.cursor(r.head+t.length):i=r);return i?null:n.update({selection:Je.create(s,n.selection.mainIndex),scrollIntoView:!0,effects:n.selection.ranges.map(({from:r})=>Pb.of(r))})}function hx(n,e,t,i){let s=i.stringPrefixes||Ku.stringPrefixes,r=null,o=n.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:e,from:l.to}],effects:wl.of(l.to+e.length),range:Je.range(l.anchor+e.length,l.head+e.length)};let a=l.head,c=np(n.doc,a),u;if(c==e){if(tw(n,a))return{changes:{insert:e+e,from:a},effects:wl.of(a+e.length),range:Je.cursor(a+e.length)};if(sN(n,a)){let f=t&&n.sliceDoc(a,a+e.length*3)==e+e+e;return{range:Je.cursor(a+e.length*(f?3:1)),effects:Pb.of(a)}}}else{if(t&&n.sliceDoc(a-2*e.length,a)==e+e&&(u=nw(n,a-2*e.length,s))>-1&&tw(n,u))return{changes:{insert:e+e+e+e,from:a},effects:wl.of(a+e.length),range:Je.cursor(a+e.length)};if(n.charCategorizer(a)(c)!=ni.Word&&nw(n,a,s)>-1&&!dx(n,a,e,s))return{changes:{insert:e+e,from:a},effects:wl.of(a+e.length),range:Je.cursor(a+e.length)}}return{range:r=l}});return r?null:n.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function tw(n,e){let t=gs(n).resolveInner(e+1);return t.parent&&t.from==e}function dx(n,e,t,i){let s=gs(n).resolveInner(e,-1),r=i.reduce((o,l)=>Math.max(o,l.length),0);for(let o=0;o<5;o++){let l=n.sliceDoc(s.from,Math.min(s.to,s.from+t.length+r)),a=l.indexOf(t);if(!a||a>-1&&i.indexOf(l.slice(0,a))>-1){let u=s.firstChild;for(;u&&u.from==s.from&&u.to-u.from>t.length+a;){if(n.sliceDoc(u.to-t.length,u.to)==t)return!1;u=u.firstChild}return!0}let c=s.to==e&&s.parent;if(!c)break;s=c}return!1}function nw(n,e,t){let i=n.charCategorizer(e);if(i(n.sliceDoc(e-1,e))!=ni.Word)return e;for(let s of t){let r=e-s.length;if(n.sliceDoc(r,e)==s&&i(n.sliceDoc(r-1,r))!=ni.Word)return r}return-1}function mx(n={}){return[Js,or.of(n),tx,px,nx]}const rN=[{key:"Ctrl-Space",run:JZ},{key:"Escape",run:ZZ},{key:"ArrowDown",run:ah(!0)},{key:"ArrowUp",run:ah(!1)},{key:"PageDown",run:ah(!0,"page")},{key:"PageUp",run:ah(!1,"page")},{key:"Enter",run:YZ}],px=Ec.highest(Gm.computeN([or],n=>n.facet(or).defaultKeymap?[rN]:[]));class gx{constructor(e,t,i){this.from=e,this.to=t,this.diagnostic=i}}class vl{constructor(e,t,i){this.diagnostics=e,this.panel=t,this.selected=i}static init(e,t,i){let s=e,r=i.facet(Cl).markerFilter;r&&(s=r(s));let o=Ut.set(s.map(l=>l.from==l.to||l.from==l.to-1&&i.doc.lineAt(l.from).to==l.from?Ut.widget({widget:new Cx(l),diagnostic:l}).range(l.from):Ut.mark({attributes:{class:"cm-lintRange cm-lintRange-"+l.severity},diagnostic:l}).range(l.from,l.to)),!0);return new vl(o,t,sc(o))}}function sc(n,e=null,t=0){let i=null;return n.between(t,1e9,(s,r,{spec:o})=>{if(!(e&&o.diagnostic!=e))return i=new gx(s,r,o.diagnostic),!1}),i}function oN(n,e){return!!(n.effects.some(t=>t.is(ip))||n.changes.touchesRange(e.pos))}function lN(n,e){return n.field(js,!1)?e:e.concat(nn.appendConfig.of([js,kt.decorations.compute([js],t=>{let{selected:i,panel:s}=t.field(js);return!i||!s||i.from==i.to?Ut.none:Ut.set([bx.range(i.from,i.to)])}),NQ(_x,{hideOn:oN}),kx]))}function vx(n,e){return{effects:lN(n,[ip.of(e)])}}const ip=nn.define(),Bb=nn.define(),aN=nn.define(),js=Wi.define({create(){return new vl(Ut.none,null,null)},update(n,e){if(e.docChanged){let t=n.diagnostics.map(e.changes),i=null;if(n.selected){let s=e.changes.mapPos(n.selected.from,1);i=sc(t,n.selected.diagnostic,s)||sc(t,null,s)}n=new vl(t,n.panel,i)}for(let t of e.effects)t.is(ip)?n=vl.init(t.value,n.panel,e.state):t.is(Bb)?n=new vl(n.diagnostics,t.value?sp.open:null,n.selected):t.is(aN)&&(n=new vl(n.diagnostics,n.panel,t.value));return n},provide:n=>[qu.from(n,e=>e.panel),kt.decorations.from(n,e=>e.diagnostics)]}),bx=Ut.mark({class:"cm-lintRange cm-lintRange-active"});function _x(n,e,t){let{diagnostics:i}=n.state.field(js),s=[],r=2e8,o=0;i.between(e-(t<0?1:0),e+(t>0?1:0),(a,c,{spec:u})=>{e>=a&&e<=c&&(a==c||(e>a||t>0)&&(e<c||t<0))&&(s.push(u.diagnostic),r=Math.min(a,r),o=Math.max(c,o))});let l=n.state.facet(Cl).tooltipFilter;return l&&(s=l(s)),s.length?{pos:r,end:o,above:n.state.doc.lineAt(r).to<o,create(){return{dom:cN(n,s)}}}:null}function cN(n,e){return qn("ul",{class:"cm-tooltip-lint"},e.map(t=>fN(n,t,!1)))}const yx=n=>{let e=n.state.field(js,!1);(!e||!e.panel)&&n.dispatch({effects:lN(n.state,[Bb.of(!0)])});let t=Hu(n,sp.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},iw=n=>{let e=n.state.field(js,!1);return!e||!e.panel?!1:(n.dispatch({effects:Bb.of(!1)}),!0)},Sx=n=>{let e=n.state.field(js,!1);if(!e)return!1;let t=n.state.selection.main,i=e.diagnostics.iter(t.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==t.from&&i.to==t.to)?!1:(n.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},Ex=[{key:"Mod-Shift-m",run:yx,preventDefault:!0},{key:"F8",run:Sx}],Ax=ki.fromClass(class{constructor(n){this.view=n,this.timeout=-1,this.set=!0;let{delay:e}=n.state.facet(Cl);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){let n=Date.now();if(n<this.lintTime-10)setTimeout(this.run,this.lintTime-n);else{this.set=!1;let{state:e}=this.view,{sources:t}=e.facet(Cl);Promise.all(t.map(i=>Promise.resolve(i(this.view)))).then(i=>{let s=i.reduce((r,o)=>r.concat(o));this.view.state.doc==e.doc&&this.view.dispatch(vx(this.view.state,s))},i=>{qs(this.view.state,i)})}}update(n){let e=n.state.facet(Cl);(n.docChanged||e!=n.startState.facet(Cl))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),Cl=Tt.define({combine(n){return Object.assign({sources:n.map(e=>e.source)},Ar(n.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null}))},enables:Ax});function wx(n,e={}){return Cl.of({source:n,config:e})}function uN(n){let e=[];if(n)e:for(let{name:t}of n){for(let i=0;i<t.length;i++){let s=t[i];if(/[a-zA-Z]/.test(s)&&!e.some(r=>r.toLowerCase()==s.toLowerCase())){e.push(s);continue e}}e.push("")}return e}function fN(n,e,t){var i;let s=t?uN(e.actions):[];return qn("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},qn("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(i=e.actions)===null||i===void 0?void 0:i.map((r,o)=>{let l=!1,a=h=>{if(h.preventDefault(),l)return;l=!0;let d=sc(n.state.field(js).diagnostics,e);d&&r.apply(n,d.from,d.to)},{name:c}=r,u=s[o]?c.indexOf(s[o]):-1,f=u<0?c:[c.slice(0,u),qn("u",c.slice(u,u+1)),c.slice(u+1)];return qn("button",{type:"button",class:"cm-diagnosticAction",onclick:a,onmousedown:a,"aria-label":` Action: ${c}${u<0?"":` (access key "${s[o]})"`}.`},f)}),e.source&&qn("div",{class:"cm-diagnosticSource"},e.source))}class Cx extends rl{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return qn("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class sw{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=fN(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class sp{constructor(e){this.view=e,this.items=[];let t=s=>{if(s.keyCode==27)iw(this.view),this.view.focus();else if(s.keyCode==38||s.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(s.keyCode==40||s.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(s.keyCode==36)this.moveSelection(0);else if(s.keyCode==35)this.moveSelection(this.items.length-1);else if(s.keyCode==13)this.view.focus();else if(s.keyCode>=65&&s.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:r}=this.items[this.selectedIndex],o=uN(r.actions);for(let l=0;l<o.length;l++)if(o[l].toUpperCase().charCodeAt(0)==s.keyCode){let a=sc(this.view.state.field(js).diagnostics,r);a&&r.actions[l].apply(e,a.from,a.to)}}else return;s.preventDefault()},i=s=>{for(let r=0;r<this.items.length;r++)this.items[r].dom.contains(s.target)&&this.moveSelection(r)};this.list=qn("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:i}),this.dom=qn("div",{class:"cm-panel-lint"},this.list,qn("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>iw(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(js).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(js),i=0,s=!1,r=null;for(e.between(0,this.view.state.doc.length,(o,l,{spec:a})=>{let c=-1,u;for(let f=i;f<this.items.length;f++)if(this.items[f].diagnostic==a.diagnostic){c=f;break}c<0?(u=new sw(this.view,a.diagnostic),this.items.splice(i,0,u),s=!0):(u=this.items[c],c>i&&(this.items.splice(i,c-i),s=!0)),t&&u.diagnostic==t.diagnostic?u.dom.hasAttribute("aria-selected")||(u.dom.setAttribute("aria-selected","true"),r=u):u.dom.hasAttribute("aria-selected")&&u.dom.removeAttribute("aria-selected"),i++});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)s=!0,this.items.pop();this.items.length==0&&(this.items.push(new sw(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),s=!0),r?(this.list.setAttribute("aria-activedescendant",r.id),this.view.requestMeasure({key:this,read:()=>({sel:r.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:o,panel:l})=>{o.top<l.top?this.list.scrollTop-=l.top-o.top:o.bottom>l.bottom&&(this.list.scrollTop+=o.bottom-l.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),s&&this.sync()}sync(){let e=this.list.firstChild;function t(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)t();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(js),i=sc(t.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:aN.of(i)})}static open(e){return new sp(e)}}function Dh(n,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(n)}</svg>')`}function ng(n){return Dh(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${n}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const kx=kt.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:ng("#d11")},".cm-lintRange-warning":{backgroundImage:ng("orange")},".cm-lintRange-info":{backgroundImage:ng("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});class Ix extends Xr{constructor(e){super(),this.diagnostics=e,this.severity=e.reduce((t,i)=>{let s=i.severity;return s=="error"||s=="warning"&&t=="info"?s:t},"info")}toDOM(e){let t=document.createElement("div");t.className="cm-lint-marker cm-lint-marker-"+this.severity;let i=this.diagnostics,s=e.state.facet(rp).tooltipFilter;return s&&(i=s(i)),i.length&&(t.onmouseover=()=>Ox(e,t,i)),t}}function Tx(n,e){let t=i=>{let s=e.getBoundingClientRect();if(!(i.clientX>s.left-10&&i.clientX<s.right+10&&i.clientY>s.top-10&&i.clientY<s.bottom+10)){for(let r=i.target;r;r=r.parentNode)if(r.nodeType==1&&r.classList.contains("cm-tooltip-lint"))return;window.removeEventListener("mousemove",t),n.state.field(dN)&&n.dispatch({effects:Lb.of(null)})}};window.addEventListener("mousemove",t)}function Ox(n,e,t){function i(){let o=n.elementAtHeight(e.getBoundingClientRect().top+5-n.documentTop);n.coordsAtPos(o.from)&&n.dispatch({effects:Lb.of({pos:o.from,above:!1,create(){return{dom:cN(n,t),getCoords:()=>e.getBoundingClientRect()}}})}),e.onmouseout=e.onmousemove=null,Tx(n,e)}let{hoverTime:s}=n.state.facet(rp),r=setTimeout(i,s);e.onmouseout=()=>{clearTimeout(r),e.onmouseout=e.onmousemove=null},e.onmousemove=()=>{clearTimeout(r),r=setTimeout(i,s)}}function Rx(n,e){let t=Object.create(null);for(let s of e){let r=n.lineAt(s.from);(t[r.from]||(t[r.from]=[])).push(s)}let i=[];for(let s in t)i.push(new Ix(t[s]).range(+s));return On.of(i,!0)}const Dx=V5({class:"cm-gutter-lint",markers:n=>n.state.field(hN)}),hN=Wi.define({create(){return On.empty},update(n,e){n=n.map(e.changes);let t=e.state.facet(rp).markerFilter;for(let i of e.effects)if(i.is(ip)){let s=i.value;t&&(s=t(s||[])),n=Rx(e.state.doc,s.slice(0))}return n}}),Lb=nn.define(),dN=Wi.define({create(){return null},update(n,e){return n&&e.docChanged&&(n=oN(e,n)?null:Object.assign(Object.assign({},n),{pos:e.changes.mapPos(n.pos)})),e.effects.reduce((t,i)=>i.is(Lb)?i.value:t,n)},provide:n=>Km.from(n)}),Nx=kt.baseTheme({".cm-gutter-lint":{width:"1.4em","& .cm-gutterElement":{padding:".2em"}},".cm-lint-marker":{width:"1em",height:"1em"},".cm-lint-marker-info":{content:Dh('<path fill="#aaf" stroke="#77e" stroke-width="6" stroke-linejoin="round" d="M5 5L35 5L35 35L5 35Z"/>')},".cm-lint-marker-warning":{content:Dh('<path fill="#fe8" stroke="#fd7" stroke-width="6" stroke-linejoin="round" d="M20 6L37 35L3 35Z"/>')},".cm-lint-marker-error":{content:Dh('<circle cx="20" cy="20" r="15" fill="#f87" stroke="#f43" stroke-width="6"/>')}}),rp=Tt.define({combine(n){return Ar(n,{hoverTime:300,markerFilter:null,tooltipFilter:null})}});function Px(n={}){return[rp.of(n),hN,Dx,Nx,dN]}const Mx=(()=>[jQ(),zQ(),uQ(),rJ(),DY(),$X(),sQ(),un.allowMultipleSelections.of(!0),bY(),lD(BY,{fallback:!0}),HY(),ix(),mx(),EQ(),CQ(),gQ(),fZ(),Gm.of([...lx,...rZ,...DZ,...gJ,...TY,...rN,...Ex])])();class Hd{constructor(e,t,i,s,r,o,l,a,c,u=0,f){this.p=e,this.stack=t,this.state=i,this.reducePos=s,this.pos=r,this.score=o,this.buffer=l,this.bufferBase=a,this.curContext=c,this.lookAhead=u,this.parent=f}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,i=0){let s=e.parser.context;return new Hd(e,[],t,i,i,0,[],0,s?new rw(s,s.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let i=e>>19,s=e&65535,{parser:r}=this.p,o=r.dynamicPrecedence(s);if(o&&(this.score+=o),i==0){this.pushState(r.getGoto(this.state,s,!0),this.reducePos),s<r.minRepeatTerm&&this.storeNode(s,this.reducePos,this.reducePos,4,!0),this.reduceContext(s,this.reducePos);return}let l=this.stack.length-(i-1)*3-(e&262144?6:0),a=l?this.stack[l-2]:this.p.ranges[0].from,c=this.reducePos-a;c>=2e3&&!(!((t=this.p.parser.nodeSet.types[s])===null||t===void 0)&&t.isAnonymous)&&(a==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=c):this.p.lastBigReductionSize<c&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=a,this.p.lastBigReductionSize=c));let u=l?this.stack[l-1]:0,f=this.bufferBase+this.buffer.length-u;if(s<r.minRepeatTerm||e&131072){let h=r.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(s,a,h,f+4,!0)}if(e&262144)this.state=this.stack[l];else{let h=this.stack[l-3];this.state=r.getGoto(h,s,!0)}for(;this.stack.length>l;)this.stack.pop();this.reduceContext(s,a)}storeNode(e,t,i,s=4,r=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let o=this,l=this.buffer.length;if(l==0&&o.parent&&(l=o.bufferBase-o.parent.bufferBase,o=o.parent),l>0&&o.buffer[l-4]==0&&o.buffer[l-1]>-1){if(t==i)return;if(o.buffer[l-2]>=t){o.buffer[l-2]=i;return}}}if(!r||this.pos==i)this.buffer.push(e,t,i,s);else{let o=this.buffer.length;if(o>0&&this.buffer[o-4]!=0)for(;o>0&&this.buffer[o-2]>i;)this.buffer[o]=this.buffer[o-4],this.buffer[o+1]=this.buffer[o-3],this.buffer[o+2]=this.buffer[o-2],this.buffer[o+3]=this.buffer[o-1],o-=4,s>4&&(s-=4);this.buffer[o]=e,this.buffer[o+1]=t,this.buffer[o+2]=i,this.buffer[o+3]=s}}shift(e,t,i){let s=this.pos;if(e&131072)this.pushState(e&65535,this.pos);else if(e&262144)this.pos=i,this.shiftContext(t,s),t<=this.p.parser.maxNode&&this.buffer.push(t,s,i,4);else{let r=e,{parser:o}=this.p;(i>this.pos||t<=o.maxNode)&&(this.pos=i,o.stateFlag(r,1)||(this.reducePos=i)),this.pushState(r,s),this.shiftContext(t,s),t<=o.maxNode&&this.buffer.push(t,s,i,4)}}apply(e,t,i){e&65536?this.reduce(e):this.shift(e,t,i)}useNode(e,t){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let s=this.pos;this.reducePos=this.pos=s+e.length,this.pushState(t,s),this.buffer.push(i,s,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let i=e.buffer.slice(t),s=e.bufferBase+t;for(;e&&s==e.bufferBase;)e=e.parent;return new Hd(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,s,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,i?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new Bx(this);;){let i=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(i==0)return!1;if(!(i&65536))return!0;t.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>4<<1||this.stack.length>=120){let s=[];for(let r=0,o;r<t.length;r+=2)(o=t[r+1])!=this.state&&this.p.parser.hasAction(o,e)&&s.push(t[r],o);if(this.stack.length<120)for(let r=0;s.length<4<<1&&r<t.length;r+=2){let o=t[r+1];s.some((l,a)=>a&1&&l==o)||s.push(t[r],o)}t=s}let i=[];for(let s=0;s<t.length&&i.length<4;s+=2){let r=t[s+1];if(r==this.state)continue;let o=this.split();o.pushState(r,this.pos),o.storeNode(0,o.pos,o.pos,4,!0),o.shiftContext(t[s],this.pos),o.score-=200,i.push(o)}return i}forceReduce(){let e=this.p.parser.stateSlot(this.state,5);if(!(e&65536))return!1;let{parser:t}=this.p;if(!t.validAction(this.state,e)){let i=e>>19,s=e&65535,r=this.stack.length-i*3;if(r<0||t.getGoto(this.stack[r],s,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(e),!0}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new rw(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class rw{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}var ow;(function(n){n[n.Insert=200]="Insert",n[n.Delete=190]="Delete",n[n.Reduce=100]="Reduce",n[n.MaxNext=4]="MaxNext",n[n.MaxInsertStackDepth=300]="MaxInsertStackDepth",n[n.DampenInsertStackDepth=120]="DampenInsertStackDepth",n[n.MinBigReduction=2e3]="MinBigReduction"})(ow||(ow={}));class Bx{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,i=e>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let s=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=s}}class qd{constructor(e,t,i){this.stack=e,this.pos=t,this.index=i,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new qd(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new qd(this.stack,this.pos,this.index)}}function ch(n,e=Uint16Array){if(typeof n!="string")return n;let t=null;for(let i=0,s=0;i<n.length;){let r=0;for(;;){let o=n.charCodeAt(i++),l=!1;if(o==126){r=65535;break}o>=92&&o--,o>=34&&o--;let a=o-32;if(a>=46&&(a-=46,l=!0),r+=a,l)break;r*=46}t?t[s++]=r:t=new e(r)}return t}class Nh{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const lw=new Nh;class Lx{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=lw,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let i=this.range,s=this.rangeIndex,r=this.pos+e;for(;r<i.from;){if(!s)return null;let o=this.ranges[--s];r-=i.from-o.to,i=o}for(;t<0?r>i.to:r>=i.to;){if(s==this.ranges.length-1)return null;let o=this.ranges[++s];r+=o.from-i.to,i=o}return r}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,i,s;if(t>=0&&t<this.chunk.length)i=this.pos+e,s=this.chunk.charCodeAt(t);else{let r=this.resolveOffset(e,1);if(r==null)return-1;if(i=r,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)s=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let o=this.rangeIndex,l=this.range;for(;l.to<=i;)l=this.ranges[++o];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>l.to&&(this.chunk2=this.chunk2.slice(0,l.to-i)),s=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),s}acceptToken(e,t=0){let i=t?this.resolveOffset(t,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=lw,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let i="";for(let s of this.ranges){if(s.from>=t)break;s.to>e&&(i+=this.input.read(Math.max(s.from,e),Math.min(s.to,t)))}return i}}class Ma{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:i}=t.p;Wx(this.data,e,t,this.id,i.data,i.tokenPrecTable)}}Ma.prototype.contextual=Ma.prototype.fallback=Ma.prototype.extend=!1;Ma.prototype.fallback=Ma.prototype.extend=!1;function Wx(n,e,t,i,s,r){let o=0,l=1<<i,{dialect:a}=t.p.parser;e:for(;l&n[o];){let c=n[o+1];for(let d=o+3;d<c;d+=2)if((n[d+1]&l)>0){let m=n[d];if(a.allows(m)&&(e.token.value==-1||e.token.value==m||Ux(m,e.token.value,s,r))){e.acceptToken(m);break}}let u=e.next,f=0,h=n[o+2];if(e.next<0&&h>f&&n[c+h*3-3]==65535&&n[c+h*3-3]==65535){o=n[c+h*3-1];continue e}for(;f<h;){let d=f+h>>1,m=c+d+(d<<1),g=n[m],_=n[m+1]||65536;if(u<g)h=d;else if(u>=_)f=d+1;else{o=n[m+2],e.advance();continue e}}break}}function aw(n,e,t){for(let i=e,s;(s=n[i])!=65535;i++)if(s==t)return i-e;return-1}function Ux(n,e,t,i){let s=aw(t,i,e);return s<0||aw(t,i,n)<s}const ur=typeof process<"u"&&process.env&&/\bparse\b/.test({}.LOG);let ig=null;var cw;(function(n){n[n.Margin=25]="Margin"})(cw||(cw={}));function uw(n,e,t){let i=n.cursor(Yi.IncludeAnonymous);for(i.moveTo(e);;)if(!(t<0?i.childBefore(e):i.childAfter(e)))for(;;){if((t<0?i.to<e:i.from>e)&&!i.type.isError)return t<0?Math.max(0,Math.min(i.to-1,e-25)):Math.min(n.length,Math.max(i.from+1,e+25));if(t<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return t<0?0:n.length}}class Vx{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?uw(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?uw(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let i=this.trees[t],s=this.index[t];if(s==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let r=i.children[s],o=this.start[t]+i.positions[s];if(o>e)return this.nextStart=o,null;if(r instanceof wi){if(o==e){if(o<this.safeFrom)return null;let l=o+r.length;if(l<=this.safeTo){let a=r.prop(ln.lookAhead);if(!a||l+a<this.fragment.to)return r}}this.index[t]++,o+r.length>=Math.max(this.safeFrom,e)&&(this.trees.push(r),this.start.push(o),this.index.push(0))}else this.index[t]++,this.nextStart=o+r.length}}}class Fx{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(i=>new Nh)}getActions(e){let t=0,i=null,{parser:s}=e.p,{tokenizers:r}=s,o=s.stateSlot(e.state,3),l=e.curContext?e.curContext.hash:0,a=0;for(let c=0;c<r.length;c++){if(!(1<<c&o))continue;let u=r[c],f=this.tokens[c];if(!(i&&!u.fallback)&&((u.contextual||f.start!=e.pos||f.mask!=o||f.context!=l)&&(this.updateCachedToken(f,u,e),f.mask=o,f.context=l),f.lookAhead>f.end+25&&(a=Math.max(f.lookAhead,a)),f.value!=0)){let h=t;if(f.extended>-1&&(t=this.addActions(e,f.extended,f.end,t)),t=this.addActions(e,f.value,f.end,t),!u.extend&&(i=f,t>h))break}}for(;this.actions.length>t;)this.actions.pop();return a&&e.setLookAhead(a),!i&&e.pos==this.stream.end&&(i=new Nh,i.value=e.p.parser.eofTerm,i.start=i.end=e.pos,t=this.addActions(e,i.value,i.end,t)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new Nh,{pos:i,p:s}=e;return t.start=i,t.end=Math.min(i+1,s.stream.end),t.value=i==s.stream.end?s.parser.eofTerm:0,t}updateCachedToken(e,t,i){let s=this.stream.clipPos(i.pos);if(t.token(this.stream.reset(s,e),i),e.value>-1){let{parser:r}=i.p;for(let o=0;o<r.specialized.length;o++)if(r.specialized[o]==e.value){let l=r.specializers[o](this.stream.read(e.start,e.end),i);if(l>=0&&i.p.parser.dialect.allows(l>>1)){l&1?e.extended=l>>1:e.value=l>>1;break}}}else e.value=0,e.end=this.stream.clipPos(s+1)}putAction(e,t,i,s){for(let r=0;r<s;r+=3)if(this.actions[r]==e)return s;return this.actions[s++]=e,this.actions[s++]=t,this.actions[s++]=i,s}addActions(e,t,i,s){let{state:r}=e,{parser:o}=e.p,{data:l}=o;for(let a=0;a<2;a++)for(let c=o.stateSlot(r,a?2:1);;c+=3){if(l[c]==65535)if(l[c+1]==1)c=$r(l,c+2);else{s==0&&l[c+1]==2&&(s=this.putAction($r(l,c+2),t,i,s));break}l[c]==t&&(s=this.putAction($r(l,c+1),t,i,s))}return s}}var fw;(function(n){n[n.Distance=5]="Distance",n[n.MaxRemainingPerStep=3]="MaxRemainingPerStep",n[n.MinBufferLengthPrune=500]="MinBufferLengthPrune",n[n.ForceReduceLimit=10]="ForceReduceLimit",n[n.CutDepth=15e3]="CutDepth",n[n.CutTo=9e3]="CutTo",n[n.MaxLeftAssociativeReductionCount=300]="MaxLeftAssociativeReductionCount",n[n.MaxStackCount=12]="MaxStackCount"})(fw||(fw={}));class jx{constructor(e,t,i,s){this.parser=e,this.input=t,this.ranges=s,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new Lx(t,s),this.tokens=new Fx(e,this.stream),this.topTerm=e.top[1];let{from:r}=s[0];this.stacks=[Hd.start(this,e.top[0],r)],this.fragments=i.length&&this.stream.end-r>e.bufferLength*4?new Vx(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,i=this.stacks=[],s,r;if(this.bigReductionCount>300&&e.length==1){let[o]=e;for(;o.forceReduce()&&o.stack.length&&o.stack[o.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let o=0;o<e.length;o++){let l=e[o];for(;;){if(this.tokens.mainToken=null,l.pos>t)i.push(l);else{if(this.advanceStack(l,i,e))continue;{s||(s=[],r=[]),s.push(l);let a=this.tokens.getMainToken(l);r.push(a.value,a.end)}}break}}if(!i.length){let o=s&&qx(s);if(o)return this.stackToTree(o);if(this.parser.strict)throw ur&&s&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&s){let o=this.stoppedAt!=null&&s[0].pos>this.stoppedAt?s[0]:this.runRecovery(s,r,i);if(o)return this.stackToTree(o.forceAll())}if(this.recovering){let o=this.recovering==1?1:this.recovering*3;if(i.length>o)for(i.sort((l,a)=>a.score-l.score);i.length>o;)i.pop();i.some(l=>l.reducePos>t)&&this.recovering--}else if(i.length>1){e:for(let o=0;o<i.length-1;o++){let l=i[o];for(let a=o+1;a<i.length;a++){let c=i[a];if(l.sameState(c)||l.buffer.length>500&&c.buffer.length>500)if((l.score-c.score||l.buffer.length-c.buffer.length)>0)i.splice(a--,1);else{i.splice(o--,1);continue e}}}i.length>12&&i.splice(12,i.length-12)}this.minStackPos=i[0].pos;for(let o=1;o<i.length;o++)i[o].pos<this.minStackPos&&(this.minStackPos=i[o].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,i){let s=e.pos,{parser:r}=this,o=ur?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&s>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let c=e.curContext&&e.curContext.tracker.strict,u=c?e.curContext.hash:0;for(let f=this.fragments.nodeAt(s);f;){let h=this.parser.nodeSet.types[f.type.id]==f.type?r.getGoto(e.state,f.type.id):-1;if(h>-1&&f.length&&(!c||(f.prop(ln.contextHash)||0)==u))return e.useNode(f,h),ur&&console.log(o+this.stackID(e)+` (via reuse of ${r.getName(f.type.id)})`),!0;if(!(f instanceof wi)||f.children.length==0||f.positions[0]>0)break;let d=f.children[0];if(d instanceof wi&&f.positions[0]==0)f=d;else break}}let l=r.stateSlot(e.state,4);if(l>0)return e.reduce(l),ur&&console.log(o+this.stackID(e)+` (via always-reduce ${r.getName(l&65535)})`),!0;if(e.stack.length>=15e3)for(;e.stack.length>9e3&&e.forceReduce(););let a=this.tokens.getActions(e);for(let c=0;c<a.length;){let u=a[c++],f=a[c++],h=a[c++],d=c==a.length||!i,m=d?e:e.split();if(m.apply(u,f,h),ur&&console.log(o+this.stackID(m)+` (via ${u&65536?`reduce of ${r.getName(u&65535)}`:"shift"} for ${r.getName(f)} @ ${s}${m==e?"":", split"})`),d)return!0;m.pos>s?t.push(m):i.push(m)}return!1}advanceFully(e,t){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return hw(e,t),!0}}runRecovery(e,t,i){let s=null,r=!1;for(let o=0;o<e.length;o++){let l=e[o],a=t[o<<1],c=t[(o<<1)+1],u=ur?this.stackID(l)+" -> ":"";if(l.deadEnd&&(r||(r=!0,l.restart(),ur&&console.log(u+this.stackID(l)+" (restarted)"),this.advanceFully(l,i))))continue;let f=l.split(),h=u;for(let d=0;f.forceReduce()&&d<10&&(ur&&console.log(h+this.stackID(f)+" (via force-reduce)"),!this.advanceFully(f,i));d++)ur&&(h=this.stackID(f)+" -> ");for(let d of l.recoverByInsert(a))ur&&console.log(u+this.stackID(d)+" (via recover-insert)"),this.advanceFully(d,i);this.stream.end>l.pos?(c==l.pos&&(c++,a=0),l.recoverByDelete(a,c),ur&&console.log(u+this.stackID(l)+` (via recover-delete ${this.parser.getName(a)})`),hw(l,i)):(!s||s.score<l.score)&&(s=l)}return s}stackToTree(e){return e.close(),wi.build({buffer:qd.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(ig||(ig=new WeakMap)).get(e);return t||ig.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function hw(n,e){for(let t=0;t<e.length;t++){let i=e[t];if(i.pos==n.pos&&i.sameState(n)){e[t].score<n.score&&(e[t]=n);return}}e.push(n)}class Hx{constructor(e,t,i){this.source=e,this.flags=t,this.disabled=i}allows(e){return!this.disabled||this.disabled[e]==0}}class zd extends K5{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (${14})`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let l=0;l<e.repeatNodeCount;l++)t.push("");let i=Object.keys(e.topRules).map(l=>e.topRules[l][1]),s=[];for(let l=0;l<t.length;l++)s.push([]);function r(l,a,c){s[l].push([a,a.deserialize(String(c))])}if(e.nodeProps)for(let l of e.nodeProps){let a=l[0];typeof a=="string"&&(a=ln[a]);for(let c=1;c<l.length;){let u=l[c++];if(u>=0)r(u,a,l[c++]);else{let f=l[c+-u];for(let h=-u;h>0;h--)r(l[c++],a,f);c++}}}this.nodeSet=new pb(t.map((l,a)=>Bs.define({name:a>=this.minRepeatTerm?void 0:l,id:a,props:s[a],top:i.indexOf(a)>-1,error:a==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(a)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=q5;let o=ch(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let l=0;l<this.specializerSpecs.length;l++)this.specialized[l]=this.specializerSpecs[l].term;this.specializers=this.specializerSpecs.map(dw),this.states=ch(e.states,Uint32Array),this.data=ch(e.stateData),this.goto=ch(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(l=>typeof l=="number"?new Ma(o,l):l),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,i){let s=new jx(this,e,t,i);for(let r of this.wrappers)s=r(s,e,t,i);return s}getGoto(e,t,i=!1){let s=this.goto;if(t>=s[0])return-1;for(let r=s[t+1];;){let o=s[r++],l=o&1,a=s[r++];if(l&&i)return a;for(let c=r+(o>>1);r<c;r++)if(s[r]==e)return a;if(l)return-1}}hasAction(e,t){let i=this.data;for(let s=0;s<2;s++)for(let r=this.stateSlot(e,s?2:1),o;;r+=3){if((o=i[r])==65535)if(i[r+1]==1)o=i[r=$r(i,r+2)];else{if(i[r+1]==2)return $r(i,r+2);break}if(o==t||o==0)return $r(i,r+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){if(t==this.stateSlot(e,4))return!0;for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=$r(this.data,i+2);else return!1;if(t==$r(this.data,i+1))return!0}}nextStates(e){let t=[];for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=$r(this.data,i+2);else break;if(!(this.data[i+2]&1)){let s=this.data[i+1];t.some((r,o)=>o&1&&r==s)||t.push(this.data[i],s)}}return t}configure(e){let t=Object.assign(Object.create(zd.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=i}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(i=>{let s=e.tokenizers.find(r=>r.from==i);return s?s.to:i})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((i,s)=>{let r=e.specializers.find(l=>l.from==i.external);if(!r)return i;let o=Object.assign(Object.assign({},i),{external:r.to});return t.specializers[s]=dw(o),o})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),i=t.map(()=>!1);if(e)for(let r of e.split(" ")){let o=t.indexOf(r);o>=0&&(i[o]=!0)}let s=null;for(let r=0;r<t.length;r++)if(!i[r])for(let o=this.dialects[t[r]],l;(l=this.data[o++])!=65535;)(s||(s=new Uint8Array(this.maxTerm+1)))[l]=1;return new Hx(e,i,s)}static deserialize(e){return new zd(e)}}function $r(n,e){return n[e]|n[e+1]<<16}function qx(n){let e=null;for(let t of n){let i=t.p.stoppedAt;(t.pos==t.p.stream.end||i!=null&&t.pos>i)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function dw(n){if(n.external){let e=n.extend?1:0;return(t,i)=>n.external(t,i)<<1|e}return n.get}const zx=X5({String:ht.string,Number:ht.number,"True False":ht.bool,PropertyName:ht.propertyName,Null:ht.null,",":ht.separator,"[ ]":ht.squareBracket,"{ }":ht.brace}),Gx=zd.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#CjOOQO'#Cp'#CpQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CrOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59U,59UO!iQPO,59UOVQPO,59QOqQPO'#CkO!nQPO,59^OOQO1G.k1G.kOVQPO'#ClO!vQPO,59aOOQO1G.p1G.pOOQO1G.l1G.lOOQO,59V,59VOOQO-E6i-E6iOOQO,59W,59WOOQO-E6j-E6j",stateData:"#O~OcOS~OQSORSOSSOTSOWQO]ROePO~OVXOeUO~O[[O~PVOg^O~Oh_OVfX~OVaO~OhbO[iX~O[dO~Oh_OVfa~OhbO[ia~O",goto:"!kjPPPPPPkPPkqwPPk{!RPPP!XP!ePP!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:" JsonText True False Null Number String } { Object Property PropertyName ] [ Array",maxTerm:25,nodeProps:[["openedBy",7,"{",12,"["],["closedBy",8,"}",13,"]"]],propSources:[zx],skippedNodes:[0],repeatNodeCount:2,tokenData:"(p~RaXY!WYZ!W]^!Wpq!Wrs!]|}$i}!O$n!Q!R$w!R![&V![!]&h!}#O&m#P#Q&r#Y#Z&w#b#c'f#h#i'}#o#p(f#q#r(k~!]Oc~~!`Upq!]qr!]rs!rs#O!]#O#P!w#P~!]~!wOe~~!zXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#g~#jR!Q![#s!c!i#s#T#Z#s~#vR!Q![$P!c!i$P#T#Z$P~$SR!Q![$]!c!i$]#T#Z$]~$`R!Q![!]!c!i!]#T#Z!]~$nOh~~$qQ!Q!R$w!R![&V~$|RT~!O!P%V!g!h%k#X#Y%k~%YP!Q![%]~%bRT~!Q![%]!g!h%k#X#Y%k~%nR{|%w}!O%w!Q![%}~%zP!Q![%}~&SPT~!Q![%}~&[ST~!O!P%V!Q![&V!g!h%k#X#Y%k~&mOg~~&rO]~~&wO[~~&zP#T#U&}~'QP#`#a'T~'WP#g#h'Z~'^P#X#Y'a~'fOR~~'iP#i#j'l~'oP#`#a'r~'uP#`#a'x~'}OS~~(QP#f#g(T~(WP#i#j(Z~(^P#X#Y(a~(fOQ~~(kOW~~(pOV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0}),Kx=Id.define({name:"json",parser:Gx.configure({props:[Z5.add({Object:NA({except:/^\s*\}/}),Array:NA({except:/^\s*\]/})}),$5.add({"Object Array":yY})]}),languageData:{closeBrackets:{brackets:["[","{",'"']},indentOnInput:/^\s*[\}\]]$/}});function Xx(){return new aY(Kx)}function mw(n){let e,t,i;return{c(){e=C("div"),t=z("Line: "),i=z(n[0]),this.h()},l(s){e=k(s,"DIV",{class:!0});var r=T(e);t=G(r,"Line: "),i=G(r,n[0]),r.forEach(b),this.h()},h(){S(e,"class","jse-status-bar-info svelte-outk3w")},m(s,r){X(s,e,r),p(e,t),p(e,i)},p(s,r){r&1&&Be(i,s[0])},d(s){s&&b(e)}}}function pw(n){let e,t,i;return{c(){e=C("div"),t=z("Column: "),i=z(n[1]),this.h()},l(s){e=k(s,"DIV",{class:!0});var r=T(e);t=G(r,"Column: "),i=G(r,n[1]),r.forEach(b),this.h()},h(){S(e,"class","jse-status-bar-info svelte-outk3w")},m(s,r){X(s,e,r),p(e,t),p(e,i)},p(s,r){r&2&&Be(i,s[1])},d(s){s&&b(e)}}}function gw(n){let e,t,i,s;return{c(){e=C("div"),t=z("Selection: "),i=z(n[2]),s=z(" characters"),this.h()},l(r){e=k(r,"DIV",{class:!0});var o=T(e);t=G(o,"Selection: "),i=G(o,n[2]),s=G(o," characters"),o.forEach(b),this.h()},h(){S(e,"class","jse-status-bar-info svelte-outk3w")},m(r,o){X(r,e,o),p(e,t),p(e,i),p(e,s)},p(r,o){o&4&&Be(i,r[2])},d(r){r&&b(e)}}}function Qx(n){let e,t,i,s=n[0]!==void 0&&mw(n),r=n[1]!==void 0&&pw(n),o=n[2]!==void 0&&n[2]>0&&gw(n);return{c(){e=C("div"),s&&s.c(),t=F(),r&&r.c(),i=F(),o&&o.c(),this.h()},l(l){e=k(l,"DIV",{class:!0});var a=T(e);s&&s.l(a),t=j(a),r&&r.l(a),i=j(a),o&&o.l(a),a.forEach(b),this.h()},h(){S(e,"class","jse-status-bar svelte-outk3w")},m(l,a){X(l,e,a),s&&s.m(e,null),p(e,t),r&&r.m(e,null),p(e,i),o&&o.m(e,null)},p(l,[a]){l[0]!==void 0?s?s.p(l,a):(s=mw(l),s.c(),s.m(e,t)):s&&(s.d(1),s=null),l[1]!==void 0?r?r.p(l,a):(r=pw(l),r.c(),r.m(e,i)):r&&(r.d(1),r=null),l[2]!==void 0&&l[2]>0?o?o.p(l,a):(o=gw(l),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},i:Xe,o:Xe,d(l){l&&b(e),s&&s.d(),r&&r.d(),o&&o.d()}}}function Yx(n,e,t){let{editorState:i}=e,s,r,o,l,a;return n.$$set=c=>{"editorState"in c&&t(3,i=c.editorState)},n.$$.update=()=>{var c,u,f,h,d;n.$$.dirty&8&&t(4,s=(u=(c=i==null?void 0:i.selection)==null?void 0:c.main)==null?void 0:u.head),n.$$.dirty&24&&t(5,r=(f=i==null?void 0:i.doc)==null?void 0:f.lineAt(s)),n.$$.dirty&32&&t(0,o=r?r.number:void 0),n.$$.dirty&48&&t(1,l=r?s-r.from+1:void 0),n.$$.dirty&8&&t(2,a=(d=(h=i==null?void 0:i.selection)==null?void 0:h.ranges)==null?void 0:d.reduce((m,g)=>m+g.to-g.from,0))},[o,l,a,i,s,r]}class Jx extends rt{constructor(e){super(),ot(this,e,Yx,Qx,It,{editorState:3})}}const Zx=Jx,Wb=wf.define([{tag:ht.propertyName,color:"var(--jse-key-color)"},{tag:ht.number,color:"var(--jse-value-color-number)"},{tag:ht.bool,color:"var(--jse-value-color-boolean)"},{tag:ht.string,color:"var(--jse-value-color-string)"},{tag:ht.keyword,color:"var(--jse-value-color-null)"}]),xx=lD(Wb),$x=Wb.style;Wb.style=n=>$x(n||[]);function e$(n){return n&&n.space===!0&&Object.keys(n).length===1}function vw(n){return typeof n.parseError=="object"&&n.parseError!==null}function t$(n){return Array.isArray(n.validationErrors)}var bw=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function n$(n,e){return!!(n===e||bw(n)&&bw(e))}function i$(n,e){if(n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(!n$(n[t],e[t]))return!1;return!0}function Ub(n,e){e===void 0&&(e=i$);var t=null;function i(){for(var s=[],r=0;r<arguments.length;r++)s[r]=arguments[r];if(t&&t.lastThis===this&&e(s,t.lastArgs))return t.lastResult;var o=n.apply(this,s);return t={lastResult:o,lastArgs:s,lastThis:this},o}return i.clear=function(){t=null},i}function Qc(n,e){const t=Date.now(),i=n(),s=Date.now();return e(s-t),i}const _a=Ts("validation");function s$(n){const e={};return n.forEach(t=>{e[mt(t.path)]=t}),n.forEach(t=>{let i=t.path;for(;i.length>0;){i=bn(i);const s=mt(i);s in e||(e[s]={isChildError:!0,path:i,message:"Contains invalid data"})}}),e}function r$(n,e,t,i){if(_a("validateJSON"),!e)return[];if(t!==i){const s=i.parse(t.stringify(n));return e(s)}else return e(n)}function o$(n,e,t,i){if(_a("validateText"),n.length>NW)return{validationErrors:[{path:[],message:"Validation turned off: the document is too large",severity:Za.info}]};if(n.length===0)return{validationErrors:[]};try{const s=Qc(()=>t.parse(n),l=>_a(`validate: parsed json in ${l} ms`));if(!e)return{validationErrors:[]};const r=t===i?s:Qc(()=>i.parse(n),l=>_a(`validate: parsed json with the validationParser in ${l} ms`));return{validationErrors:Qc(()=>e(r),l=>_a(`validate: validated json in ${l} ms`))}}catch(s){const r=Qc(()=>l$(n,t),l=>_a(`validate: checked whether repairable in ${l} ms`));return{parseError:Yv(n,s.message||s.toString()),isRepairable:r}}}function l$(n,e){if(n.length>PW)return!1;try{return e.parse(Fo(n)),!0}catch{return!1}}function _w(n){let e,t;return e=new aK({props:{readOnly:n[0],onFormat:n[17],onCompact:n[18],onSort:n[19],onTransform:n[20],onToggleSearch:n[21],onUndo:n[22],onRedo:n[23],canFormat:!n[15],canCompact:!n[15],canSort:!n[15],canTransform:!n[15],canUndo:n[11],canRedo:n[12],onRenderMenu:n[4]}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,s){const r={};s[0]&1&&(r.readOnly=i[0]),s[0]&32768&&(r.canFormat=!i[15]),s[0]&32768&&(r.canCompact=!i[15]),s[0]&32768&&(r.canSort=!i[15]),s[0]&32768&&(r.canTransform=!i[15]),s[0]&2048&&(r.canUndo=i[11]),s[0]&4096&&(r.canRedo=i[12]),s[0]&16&&(r.onRenderMenu=i[4]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function a$(n){let e,t,i,s,r;return{c(){e=C("div"),t=C("div"),i=F(),s=C("div"),r=z("loading..."),this.h()},l(o){e=k(o,"DIV",{class:!0});var l=T(e);t=k(l,"DIV",{class:!0}),T(t).forEach(b),i=j(l),s=k(l,"DIV",{class:!0});var a=T(s);r=G(a,"loading..."),a.forEach(b),l.forEach(b),this.h()},h(){S(t,"class","jse-loading-space svelte-1pffwih"),S(s,"class","jse-loading svelte-1pffwih"),S(e,"class","jse-contents svelte-1pffwih")},m(o,l){X(o,e,l),p(e,t),p(e,i),p(e,s),p(s,r)},p:Xe,i:Xe,o:Xe,d(o){o&&b(e)}}}function c$(n){let e,t,i,s,r,o,l=n[10]&&yw(n),a=n[2]&&Sw(n),c=!n[10]&&Ew(n);return{c(){l&&l.c(),e=F(),t=C("div"),i=F(),a&&a.c(),s=F(),c&&c.c(),r=tt(),this.h()},l(u){l&&l.l(u),e=j(u),t=k(u,"DIV",{class:!0}),T(t).forEach(b),i=j(u),a&&a.l(u),s=j(u),c&&c.l(u),r=tt(),this.h()},h(){S(t,"class","jse-contents svelte-1pffwih"),$e(t,"jse-hidden",n[10])},m(u,f){l&&l.m(u,f),X(u,e,f),X(u,t,f),n[48](t),X(u,i,f),a&&a.m(u,f),X(u,s,f),c&&c.m(u,f),X(u,r,f),o=!0},p(u,f){u[10]?l?(l.p(u,f),f[0]&1024&&B(l,1)):(l=yw(u),l.c(),B(l,1),l.m(e.parentNode,e)):l&&(He(),Q(l,1,1,()=>{l=null}),qe()),(!o||f[0]&1024)&&$e(t,"jse-hidden",u[10]),u[2]?a?(a.p(u,f),f[0]&4&&B(a,1)):(a=Sw(u),a.c(),B(a,1),a.m(s.parentNode,s)):a&&(He(),Q(a,1,1,()=>{a=null}),qe()),u[10]?c&&(He(),Q(c,1,1,()=>{c=null}),qe()):c?(c.p(u,f),f[0]&1024&&B(c,1)):(c=Ew(u),c.c(),B(c,1),c.m(r.parentNode,r))},i(u){o||(B(l),B(a),B(c),o=!0)},o(u){Q(l),Q(a),Q(c),o=!1},d(u){l&&l.d(u),u&&b(e),u&&b(t),n[48](null),u&&b(i),a&&a.d(u),u&&b(s),c&&c.d(u),u&&b(r)}}}function yw(n){let e,t;return e=new ra({props:{icon:sa,type:"error",message:`The JSON document is larger than ${jf(s1,1024)}, and may crash your browser when loading it in text mode. Actual size: ${jf(n[5].length,1024)}.`,actions:[{text:"Open anyway",title:"Open the document in text mode. This may freeze or crash your browser.",onClick:n[24]},{text:"Open in tree mode",title:"Open the document in tree mode. Tree mode can handle large documents.",onClick:n[3]},{text:"Cancel",title:"Cancel opening this large document.",onClick:n[25]}]}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,s){const r={};s[0]&32&&(r.message=`The JSON document is larger than ${jf(s1,1024)}, and may crash your browser when loading it in text mode. Actual size: ${jf(i[5].length,1024)}.`),s[0]&8&&(r.actions=[{text:"Open anyway",title:"Open the document in text mode. This may freeze or crash your browser.",onClick:i[24]},{text:"Open in tree mode",title:"Open the document in tree mode. Tree mode can handle large documents.",onClick:i[3]},{text:"Cancel",title:"Cancel opening this large document.",onClick:i[25]}]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function Sw(n){let e,t;return e=new Zx({props:{editorState:n[8]}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,s){const r={};s[0]&256&&(r.editorState=i[8]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function Ew(n){let e,t,i,s=n[13]&&Aw(n);return t=new gR({props:{validationErrors:n[9],selectError:n[26]}}),{c(){s&&s.c(),e=F(),Te(t.$$.fragment)},l(r){s&&s.l(r),e=j(r),De(t.$$.fragment,r)},m(r,o){s&&s.m(r,o),X(r,e,o),Oe(t,r,o),i=!0},p(r,o){r[13]?s?(s.p(r,o),o[0]&8192&&B(s,1)):(s=Aw(r),s.c(),B(s,1),s.m(e.parentNode,e)):s&&(He(),Q(s,1,1,()=>{s=null}),qe());const l={};o[0]&512&&(l.validationErrors=r[9]),t.$set(l)},i(r){i||(B(s),B(t.$$.fragment,r),i=!0)},o(r){Q(s),Q(t.$$.fragment,r),i=!1},d(r){s&&s.d(r),r&&b(e),Re(t,r)}}}function Aw(n){let e,t;return e=new ra({props:{type:"error",icon:sa,message:n[13].message,actions:n[14],onClick:n[49]}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,s){const r={};s[0]&8192&&(r.message=i[13].message),s[0]&16384&&(r.actions=i[14]),s[0]&8192&&(r.onClick=i[49]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function u$(n){let e,t,i,s,r,o=n[1]&&_w(n);const l=[c$,a$],a=[];function c(u,f){return u[16]?1:0}return i=c(n),s=a[i]=l[i](n),{c(){e=C("div"),o&&o.c(),t=F(),s.c(),this.h()},l(u){e=k(u,"DIV",{class:!0});var f=T(e);o&&o.l(f),t=j(f),s.l(f),f.forEach(b),this.h()},h(){S(e,"class","jse-text-mode svelte-1pffwih"),$e(e,"no-main-menu",!n[1])},m(u,f){X(u,e,f),o&&o.m(e,null),p(e,t),a[i].m(e,null),n[50](e),r=!0},p(u,f){u[1]?o?(o.p(u,f),f[0]&2&&B(o,1)):(o=_w(u),o.c(),B(o,1),o.m(e,t)):o&&(He(),Q(o,1,1,()=>{o=null}),qe()),s.p(u,f),(!r||f[0]&2)&&$e(e,"no-main-menu",!u[1])},i(u){r||(B(o),B(s),r=!0)},o(u){Q(o),Q(s),r=!1},d(u){u&&b(e),o&&o.d(),a[i].d(),n[50](null)}}}function ww(n){return{from:n.from,to:n.to,message:n.message,actions:n.actions,severity:n.severity,source:void 0}}function f$(n,e,t){let i,s,r,{readOnly:o}=e,{mainMenuBar:l}=e,{statusBar:a}=e,{externalContent:c}=e,{indentation:u}=e,{tabSize:f}=e,{escapeUnicodeCharacters:h}=e,{parser:d}=e,{validator:m}=e,{validationParser:g}=e,{onChange:_}=e,{onSwitchToTreeMode:v}=e,{onError:y}=e,{onFocus:E}=e,{onBlur:w}=e,{onRenderMenu:A}=e,{onSortModal:I}=e,{onTransformModal:R}=e;const D=Ts("jsoneditor:TextMode"),N={key:"Mod-i",run:fe,shift:M,preventDefault:!0},W=typeof window>"u";D("isSSR:",W);let H,P,Y,O,L=!1,U=[];const K=new to,te=new to,q=new to,x=new to,Z=new to;let V=c,ce=GS(V,u,d),pe=rn(ce,L),oe=h;Mi(async()=>{if(!W)try{P=Pe({target:H,initialText:pe?"":s.escapeValue(ce),readOnly:o,indentation:u}),Ue()}catch(ze){console.error(ze)}}),_r(()=>{P&&(D("Destroy CodeMirror editor"),P.destroy())});let ve=!1,Ne=!1;const J=fd(),Ie=fd();function Ue(){P&&(D("focus"),P.focus())}let re=!1;dR({onMount:Mi,onDestroy:_r,getWindow:()=>Pu(Y),hasFocus:()=>re&&document.hasFocus()||A1(Y),onFocus:E,onBlur:w});function Le(ze){D("patch",ze);const St=d.parse(ce),Gt=Rl(St,ze),pn=hO(St,ze);return we({text:d.stringify(Gt,null,u)}),{json:Gt,previousJson:St,undo:pn,redo:ze}}function fe(){if(D("format"),!o)try{const ze=d.parse(ce);we({text:d.stringify(ze,null,u)})}catch(ze){y(ze)}}function M(){if(D("compact"),!o)try{const ze=d.parse(ce);we({text:d.stringify(ze)})}catch(ze){y(ze)}}function ae(){if(D("repair"),!o)try{we({text:Fo(ce)}),t(47,cn=wp),t(13,dt=void 0)}catch(ze){y(ze)}}function de(){if(!o)try{const ze=d.parse(ce);re=!0,I({id:J,json:ze,selectedPath:[],onSort:async St=>{D("onSort",St),Le(St)},onClose:()=>{re=!1,Ue()}})}catch(ze){y(ze)}}function $({id:ze,selectedPath:St,onTransform:Gt,onClose:pn}){try{const gn=d.parse(ce);re=!0,R({id:ze||Ie,json:gn,selectedPath:St,onTransform:Gt?Jt=>{Gt({operations:Jt,json:gn,transformedJson:Rl(gn,Jt)})}:Jt=>{D("onTransform",Jt),Le(Jt)},onClose:()=>{re=!1,Ue(),pn&&pn()}})}catch(gn){y(gn)}}function ee(){o||$({selectedPath:[]})}function ie(){P&&(H&&H.querySelector(".cm-search")?Rb(P):Ob(P))}function me(){o||P&&(wb(P),Ue())}function ue(){o||P&&(Nd(P),Ue())}function se(){L=!0,we(c,!0)}function _e(){Qe()}function ke(ze){D("select validation error",ze);const St=nt(ze);ge(St.from,St.to),Ue()}function Ce(ze){D("select parse error",ze);const St=Fe(ze,!1);ge(St.from,St.to),Ue()}function ge(ze,St){D("setSelection",{anchor:ze,head:St}),P&&P.dispatch(P.state.update({selection:{anchor:ze,head:St},scrollIntoView:!0}))}function Me(ze,St){if(St.state.selection.ranges.length===1){const Gt=St.state.selection.ranges[0],pn=ce.slice(Gt.from,Gt.to);if(pn==="{"||pn==="["){const gn=Om.parse(ce),Jt=Object.keys(gn.pointers).find(Pt=>{var Ii;return((Ii=gn.pointers[Pt].value)==null?void 0:Ii.pos)===Gt.from}),it=gn.pointers[Jt];if(Jt&&it&&it.value&&it.valueEnd){D("pointer found, selecting inner contents of path:",Jt,it);const Pt=it.value.pos+1,gi=it.valueEnd.pos-1;ge(Pt,gi)}}}}function Ee(){return wx(Un,{delay:Y2})}function Pe({target:ze,initialText:St,readOnly:Gt,indentation:pn}){D("Create CodeMirror editor",{readOnly:Gt,indentation:pn});const gn=un.create({doc:St,extensions:[Gm.of([oZ,N]),K.of(Ee()),Px(),Mx,xx,kt.domEventHandlers({dblclick:Me}),kt.updateListener.of(Jt=>{t(8,O=Jt.state),Jt.docChanged&&en()}),Xx(),yZ({top:!0}),q.of(un.readOnly.of(Gt)),te.of(kt.editable.of(!Gt)),Z.of(un.tabSize.of(f)),x.of(Ct(pn)),kt.lineWrapping]});return P=new kt({state:gn,parent:ze}),P}function be(){return P?s.unescapeValue(P.state.doc.toString()):""}function nt(ze){const{path:St,message:Gt}=ze,{line:pn,column:gn,from:Jt,to:it}=pz(s.escapeValue(ce),St);return{path:St,line:pn,column:gn,from:Jt,to:it,message:Gt,severity:Za.warning,actions:[]}}function Fe(ze,St){const{line:Gt,column:pn,position:gn,message:Jt}=ze;return{path:null,line:Gt,column:pn,from:gn||0,to:gn||0,severity:Za.error,message:Jt,actions:St&&!o?[{name:"Auto repair",apply:()=>ae()}]:null}}function we(ze,St=!1){const Gt=GS(ze,u,d);if(t(10,pe=rn(Gt,L)),pe){D("externalContent not applying text: editor is disabled");return}const pn=!wn(ze,V);if(D("setCodeMirrorContent",{isChanged:pn,forceUpdate:St}),!P||!pn&&!St)return;const gn=V;V=ze,t(5,ce=Gt),P.dispatch({changes:{from:0,to:P.state.doc.length,insert:s.escapeValue(ce)}}),Ot(),pn&&tn(V,gn)}function lt(){D("refresh");const ze=P.state.doc.length;P.dispatch({changes:{from:ze,to:ze,insert:" "}}),P.dispatch({changes:{from:ze,to:ze+1,insert:""}})}function je(){D("forceUpdateText",{escapeUnicodeCharacters:h}),P&&P.dispatch({changes:{from:0,to:P.state.doc.length,insert:s.escapeValue(ce)}})}function Qe(){if(!P)return;const ze=be(),St=ze!==ce;if(D("onChangeCodeMirrorValue",{isChanged:St}),!St)return;const Gt=V;t(5,ce=ze),V={text:ce},Ot(),tn(V,Gt)}function ye(ze){D("updateLinter",ze),P&&P.dispatch({effects:K.reconfigure(Ee())})}function Ze(ze){P&&(D("updateIndentation",ze),P.dispatch({effects:x.reconfigure(Ct(ze))}))}function Lt(ze){P&&(D("updateTabSize",ze),P.dispatch({effects:Z.reconfigure(un.tabSize.of(ze))}))}function vt(ze){P&&(D("updateReadOnly",ze),P.dispatch({effects:[q.reconfigure(un.readOnly.of(ze)),te.reconfigure(kt.editable.of(!ze))]}))}function Ct(ze){return Xm.of(typeof ze=="number"?" ".repeat(ze):ze)}function Ot(){t(11,ve=aJ(P.state)>0),t(12,Ne=cJ(P.state)>0),D({canUndo:ve,canRedo:Ne})}const en=jm(Qe,Y2);function tn(ze,St){_&&_(ze,St,{contentErrors:kn(),patchResult:null})}function rn(ze,St){return ze&&ze.length>s1&&!St}let cn=wp,dt=null;function Un(){if(pe)return[];const ze=kn();if(vw(ze)){const{parseError:St,isRepairable:Gt}=ze;return[ww(Fe(St,Gt))]}return t$(ze)?ze.validationErrors.map(nt).map(ww):[]}function kn(){D("validate:start"),en.flush();const ze=Wn(s.escapeValue(ce),m,d,g);return vw(ze)?(t(47,cn=ze.isRepairable?$2:LW),t(13,dt=ze.parseError),t(9,U=[])):(t(47,cn=wp),t(13,dt=null),t(9,U=ze.validationErrors)),D("validate:end"),ze}const Wn=Ub(o$);function In(ze){Vt[ze?"unshift":"push"](()=>{H=ze,t(6,H)})}const En=()=>Ce(dt);function li(ze){Vt[ze?"unshift":"push"](()=>{Y=ze,t(7,Y)})}return n.$$set=ze=>{"readOnly"in ze&&t(0,o=ze.readOnly),"mainMenuBar"in ze&&t(1,l=ze.mainMenuBar),"statusBar"in ze&&t(2,a=ze.statusBar),"externalContent"in ze&&t(28,c=ze.externalContent),"indentation"in ze&&t(29,u=ze.indentation),"tabSize"in ze&&t(30,f=ze.tabSize),"escapeUnicodeCharacters"in ze&&t(31,h=ze.escapeUnicodeCharacters),"parser"in ze&&t(32,d=ze.parser),"validator"in ze&&t(33,m=ze.validator),"validationParser"in ze&&t(34,g=ze.validationParser),"onChange"in ze&&t(35,_=ze.onChange),"onSwitchToTreeMode"in ze&&t(3,v=ze.onSwitchToTreeMode),"onError"in ze&&t(36,y=ze.onError),"onFocus"in ze&&t(37,E=ze.onFocus),"onBlur"in ze&&t(38,w=ze.onBlur),"onRenderMenu"in ze&&t(4,A=ze.onRenderMenu),"onSortModal"in ze&&t(39,I=ze.onSortModal),"onTransformModal"in ze&&t(40,R=ze.onTransformModal)},n.$$.update=()=>{n.$$.dirty[0]&32&&t(15,i=ce.length===0),n.$$.dirty[1]&1&&(s=$O({escapeControlCharacters:!1,escapeUnicodeCharacters:h})),n.$$.dirty[0]&268435456&&we(c),n.$$.dirty[1]&4&&ye(m),n.$$.dirty[0]&536870912&&Ze(u),n.$$.dirty[0]&1073741824&&Lt(f),n.$$.dirty[0]&1&&vt(o),n.$$.dirty[1]&32769&&oe!==h&&(t(46,oe=h),je()),n.$$.dirty[0]&1|n.$$.dirty[1]&65536&&t(14,r=cn===$2&&!o?[{icon:$v,text:"Auto repair",title:"Automatically repair JSON",onClick:ae}]:[])},[o,l,a,v,A,ce,H,Y,O,U,pe,ve,Ne,dt,r,i,W,fe,M,de,ee,ie,me,ue,se,_e,ke,Ce,c,u,f,h,d,m,g,_,y,E,w,I,R,Ue,Le,$,lt,kn,oe,cn,In,En,li]}class h$ extends rt{constructor(e){super(),ot(this,e,f$,u$,fn,{readOnly:0,mainMenuBar:1,statusBar:2,externalContent:28,indentation:29,tabSize:30,escapeUnicodeCharacters:31,parser:32,validator:33,validationParser:34,onChange:35,onSwitchToTreeMode:3,onError:36,onFocus:37,onBlur:38,onRenderMenu:4,onSortModal:39,onTransformModal:40,focus:41,patch:42,openTransformModal:43,refresh:44,validate:45},null,[-1,-1,-1])}get focus(){return this.$$.ctx[41]}get patch(){return this.$$.ctx[42]}get openTransformModal(){return this.$$.ctx[43]}get refresh(){return this.$$.ctx[44]}get validate(){return this.$$.ctx[45]}}const d$=h$,sg=Ts("jsoneditor:AutoScrollHandler");function m$(n){sg("createAutoScrollHandler",n);let e,t;function i(c){return c<20?OW:c<50?RW:DW}function s(){if(n){const c=e*(J2/1e3);n.scrollTop+=c}}function r(c){(!t||c!==e)&&(o(),sg("startAutoScroll",c),e=c,t=setInterval(s,J2))}function o(){t&&(sg("stopAutoScroll"),clearInterval(t),t=void 0,e=void 0)}function l(c){if(n){const u=c.clientY,{top:f,bottom:h}=n.getBoundingClientRect();if(u<f){const d=i(f-u);r(-d)}else if(u>h){const d=i(u-h);r(d)}else o()}}function a(){o()}return{onDrag:l,onDragEnd:a}}const p$=(n,e,t,i)=>(n/=i/2,n<1?t/2*n*n+e:(n--,-t/2*(n*(n-2)-1)+e)),g$=()=>{let n,e,t,i,s,r,o,l,a,c,u,f,h,d;function m(){return n.scrollY||n.pageYOffset||n.scrollTop}function g(w){const A=w.getBoundingClientRect().top,I=n.getBoundingClientRect?n.getBoundingClientRect().top:0;return A-I+t}function _(w){n.scrollTo?n.scrollTo(0,w):n.scrollTop=w}function v(w){c||(c=w),u=w-c,f=r(u,t,l,a),_(f),d=!0,u<a?requestAnimationFrame(v):y()}function y(){_(t+l),e&&o&&(e.setAttribute("tabindex","-1"),e.focus()),typeof h=="function"&&h(),c=!1,d=!1}function E(w,A={}){switch(a=A.duration||1e3,s=A.offset||0,h=A.callback,r=A.easing||p$,o=A.a11y||!1,typeof A.container){case"object":n=A.container;break;case"string":n=document.querySelector(A.container);break;default:n=window}switch(t=m(),typeof w){case"number":e=void 0,o=!1,i=t+w;break;case"object":e=w,i=g(e);break;case"string":e=document.querySelector(w),i=g(e);break}switch(l=i-t+s,typeof A.duration){case"number":a=A.duration;break;case"function":a=A.duration(l);break}d?c=!1:requestAnimationFrame(v)}return E};function v$(n,e){const t={start:n,end:Math.min(b0(n),e)},i=Math.max(Gd((n+e)/2),n),s={start:i,end:Math.min(b0(i),e)},r=Gd(e),o=r===e?r-ku:r,l={start:Math.max(o,n),end:e},a=[t],c=s.start>=t.end&&s.end<=l.start;return c&&a.push(s),l.start>=(c?s.end:t.end)&&a.push(l),a}function mN(n){const e=sz(n,i=>i.start),t=[e[0]];for(let i=0;i<e.length;i++){const s=t.length-1,r=t[s],o=e[i];o.start<=r.end?t[s]={start:Math.min(r.start,o.start),end:Math.max(r.end,o.end)}:t.push(o)}return t}function b$(n,e){return n.some(t=>e>=t.start&&e<t.end)}function b0(n){return Gd(n)+ku}function Gd(n){return Math.floor(n/ku)*ku}function Cw(n){let e={expandedMap:{},enforceStringMap:{},visibleSectionsMap:{},selection:void 0};return n!=null&&n.select&&(e={...e,selection:n.select(n.json,e)}),n!=null&&n.expand&&(e=xr(n.json,e,[],n.expand)),e}function op(n,e){return n.visibleSectionsMap[e]||jl}function Vb(n,e,t){e.forEach(({start:i,end:s})=>{JO(i,Math.min(n.length,s),t)})}function rg(n,e,t){const i={...e.expandedMap},s={...e.visibleSectionsMap};for(let r=0;r<=t.length;r++){const o=t.slice(0,r),l=mt(o),a=wt(n,o);if(Ri(a)&&(i[l]=!0),Array.isArray(a)&&r<t.length){const c=s[l]||jl,u=Ai(t[r]);if(!b$(c,u)){const f=Gd(u),h=b0(f),d={start:f,end:h};s[l]=mN(c.concat(d))}}}return{...e,expandedMap:i,visibleSectionsMap:s}}function xr(n,e,t,i){const s={...e.expandedMap};function r(l){const a=o.length;if(Array.isArray(l)){if(i(o)){const c=mt(o);if(s[c]=!0,l.length>0){const u=op(e,c);Vb(l,u,f=>{o[a]=String(f),r(l[f])}),o.pop()}}}else if(Fi(l)&&i(o)){s[mt(o)]=!0;const c=Object.keys(l);if(c.length>0){for(const u of c)o[a]=u,r(l[u]);o.pop()}}}const o=t.slice();return r(wt(n,t)),{...e,expandedMap:s}}function _$(n,e){return{...n,expandedMap:{...n.expandedMap,[mt(e)]:!0}}}function pN(n,e){const t=Ba(n.expandedMap,e),i=Ba(n.enforceStringMap,e),s=Ba(n.visibleSectionsMap,e);return{...n,expandedMap:t,enforceStringMap:i,visibleSectionsMap:s}}function y$(n,e,t){if(t){const i={...n.enforceStringMap};return i[e]=t,{...n,enforceStringMap:i}}else if(typeof n.enforceStringMap[e]=="boolean"){const i={...n.enforceStringMap};return delete i[e],{...n,enforceStringMap:i}}else return n}function S$(n,e,t,i){return{...e,visibleSectionsMap:{...e.visibleSectionsMap,[t]:mN(op(e,t).concat(i))}}}function E$(n,e,t){const i=Rl(n,t),s=t.reduce((r,o)=>rO(o)?gN(i,r,o):oO(o)?vN(i,r,o):lO(o)?A$(i,r,o):o1(o)||Ga(o)?w$(i,r,o):r,e);return{json:i,documentState:s}}function gN(n,e,t){const i=jr(n,t.path),s=bn(i),r=mt(s),o=wt(n,s);if(pi(o)){const l=Ai(Yt(i)),a=La(e.expandedMap,s,l,1),c=La(e.enforceStringMap,s,l,1);let u=La(e.visibleSectionsMap,s,l,1);return u=bN(u,r,f=>_N(f,l,1)),{...e,expandedMap:a,enforceStringMap:c,visibleSectionsMap:u}}return e}function vN(n,e,t){const i=jr(n,t.path),s=bn(i),r=mt(s),o=wt(n,s);let{expandedMap:l,enforceStringMap:a,visibleSectionsMap:c}=e;if(l=Ba(l,i),a=Ba(a,i),c=Ba(c,i),pi(o)){const u=Ai(Yt(i));l=La(l,s,u,-1),a=La(a,s,u,-1),c=La(c,s,u,-1),c=bN(c,r,f=>_N(f,u,-1))}return{...e,expandedMap:l,enforceStringMap:a,visibleSectionsMap:c}}function A$(n,e,t){const i=t.path,s=cg(n,e.expandedMap),r=cg(n,e.enforceStringMap),o=cg(n,e.visibleSectionsMap);return!Li(t.value)&&!pi(t.value)&&delete s[i],pi(t.value)||delete o[i],(Li(t.value)||pi(t.value))&&delete r[i],{...e,expandedMap:s,enforceStringMap:r,visibleSectionsMap:o}}function w$(n,e,t){if(Ga(t)&&t.from===t.path)return e;const i=f=>t.path+f.substring(t.from.length),s=ag(og(e.expandedMap,t.from),i),r=ag(og(e.enforceStringMap,t.from),i),o=ag(og(e.visibleSectionsMap,t.from),i);let l=e;Ga(t)&&(l=vN(n,l,{op:"remove",path:t.from})),l=gN(n,l,{op:"add",path:t.path,value:null});const a=lg(l.expandedMap,s),c=lg(l.enforceStringMap,r),u=lg(l.visibleSectionsMap,o);return{...e,expandedMap:a,enforceStringMap:c,visibleSectionsMap:u}}function Ba(n,e){const t={},i=mt(e);return Object.keys(n).forEach(s=>{Ka(s,i)||(t[s]=n[s])}),t}function og(n,e){const t={};return Object.keys(n).forEach(i=>{Ka(i,e)&&(t[i]=n[i])}),t}function lg(n,e){return{...n,...e}}function ag(n,e){const t={};return Object.keys(n).forEach(i=>{const s=e(i);t[s]=n[i]}),t}function La(n,e,t,i){const s=e.length,r=mt(e),o=[];for(const a of Object.keys(n))if(Ka(a,r)){const c=Jo(a),u=Ai(c[s]);u>=t&&(c[s]=String(u+i),o.push({oldPointer:a,newPointer:mt(c),value:n[a]}))}if(o.length===0)return n;const l={...n};return o.forEach(a=>{delete l[a.oldPointer]}),o.forEach(a=>{l[a.newPointer]=a.value}),l}function cg(n,e){const t={};return Object.keys(e).filter(i=>Yo(n,jr(n,i))).forEach(i=>{t[i]=e[i]}),t}function bN(n,e,t){const i=n[e];if(e in n){const s=t(i);if(!wn(i,s)){const r={...n};return s===void 0?delete r[e]:r[e]=s,r}}return n}function _N(n,e,t){return n.map(i=>({start:i.start>e?i.start+t:i.start,end:i.end>=e?i.end+t:i.end}))}function kf(n,e,t,i){const s=e?e[t]:void 0;return typeof s=="boolean"?s:YU(n,i)}function If(n,e,t=!1){const i=n.indexOf(e);return i!==-1?t?n.slice(i):n.slice(i+1):[]}function Fb(n,e){const t=[];function i(s,r){t.push(r);const o=mt(r);if(s&&e.expandedMap[o]===!0){if(pi(s)){const l=op(e,o);Vb(s,l,a=>{i(s[a],r.concat(String(a)))})}Li(s)&&Object.keys(s).forEach(l=>{i(s[l],r.concat(l))})}}return i(n,[]),t}function yN(n,e,t=!0){const i=[];function s(r,o){i.push({path:o,type:dr.value});const l=mt(o);if(r&&e.expandedMap[l]===!0){if(t&&i.push({path:o,type:dr.inside}),pi(r)){const a=op(e,l);Vb(r,a,c=>{const u=o.concat(String(c));s(r[c],u),t&&i.push({path:u,type:dr.after})})}Li(r)&&Object.keys(r).forEach(c=>{const u=o.concat(c);i.push({path:u,type:dr.key}),s(r[c],u),t&&i.push({path:u,type:dr.after})})}}return s(n,[]),i}function C$(n,e,t){const i=Fb(n,e),s=i.map(mt),r=mt(t),o=s.indexOf(r);return o!==-1&&o>0?i[o-1]:null}function _0(n,e,t){const i=Fb(n,e),r=i.map(mt).indexOf(mt(t));return r!==-1&&r<i.length-1?i[r+1]:null}const k$=1e3,uh=Ts("jsoneditor:History");function I$(n={}){const e=n.maxItems||k$;let t=[],i=0;function s(){return i<t.length}function r(){return i>0}function o(){return{canUndo:s(),canRedo:r(),length:t.length}}function l(){n.onChange&&n.onChange(o())}function a(h){uh("add",h),t=[h].concat(t.slice(i)).slice(0,e),i=0,l()}function c(){uh("clear"),t=[],i=0,l()}function u(){if(s()){const h=t[i];return i+=1,uh("undo",h),l(),h}}function f(){if(r())return i-=1,uh("redo",t[i]),l(),t[i]}return{add:a,clear:c,getState:o,undo:u,redo:f}}function Tf(n,e){const t=new Set(e),i=n.replace(/ \(copy( \d+)?\)$/,"");let s=n,r=1;for(;t.has(s);){const o="copy"+(r>1?" "+r:"");s=`${i} (${o})`,r++}return s}function Kd(n,e){const t="...",i=e-t.length;return n.length>e?n.substring(0,i)+t:n}function T$(n){if(n==="")return"";const e=n.toLowerCase();if(e==="null")return null;if(e==="true")return!0;if(e==="false")return!1;if(e==="undefined")return;const t=Number(n),i=parseFloat(n);return!isNaN(t)&&!isNaN(i)?t:n}function vr(n){return n&&n.type===Mn.after}function Ci(n){return n&&n.type===Mn.inside}function hi(n){return n&&n.type===Mn.key}function yn(n){return n&&n.type===Mn.value}function Sn(n){return n&&n.type===Mn.multi}function O$(n,e,t){if(wn(e,t))return[e];{const i=L$(e,t);if(e.length===i.length||t.length===i.length)return[i];const s=e[i.length],r=t[i.length],o=wt(n,i);if(Li(o)){const l=Object.keys(o),a=l.indexOf(s),c=l.indexOf(r);if(a!==-1&&c!==-1){const u=Math.min(a,c),f=Math.max(a,c),h=[];for(let d=u;d<=f;d++)h.push(i.concat(l[d]));return h}}if(pi(o)){const l=Math.min(Ai(s),Ai(r)),a=Math.max(Ai(s),Ai(r)),c=[];for(let u=l;u<=a;u++)c.push(i.concat(String(u)));return c}}throw new Error("Failed to create selection")}function SN(n){return Ci(n)?n.focusPath:bn(n.focusPath)}function rc(n){return Sn(n)?ks(n.paths):n.focusPath}function lp(n){return Sn(n)?Yt(n.paths):n.focusPath}function R$(n,e){return Xu(n.focusPath,e)&&(n.focusPath.length>e.length||Ci(n))}function D$(n,e,t){if(!n)return!1;const i=e.slice(0);if(Sn(n))for(;i.length>0;){if(n.pointersMap[mt(i)]===!0)return!0;i.pop()}return hi(n)?t===Mn.key&&wn(n.focusPath,e):!!(yn(n)&&(t===Mn.value&&wn(n.focusPath,e)||Xu(e,n.focusPath)&&e.length>n.focusPath.length&&(t===Mn.key||t===Mn.value||t===Mn.multi)))}function kw(n,e,t=!1,i=!1){const s=e.selection,r=!i&&Sn(s)?ks(s.paths):s.focusPath,o=C$(n,e,r);if(o===null)return null;const l=o,a=o;if(t)return vr(s)||Ci(s)?di(n,s.anchorPath,s.anchorPath):di(n,s.anchorPath,a);if(hi(s)){const c=bn(o),u=wt(n,c);return Array.isArray(u)||si(o)?Zn(o,!1):zs(o,!1)}return yn(s)?Zn(o,!1):vr(s)||Ci(s)?di(n,r,r):di(n,l,a)}function N$(n,e,t=!1,i=!1){const s=e.selection,r=!i&&Sn(s)?Yt(s.paths):s.focusPath,o=_0(n,e,r),l=o,a=o;if(o===null)return null;if(t){const c=Ri(wt(n,r))?pN(e,r):e,u=_0(n,c,r);return u===null?null:vr(s)?di(n,u,u):Ci(s)?di(n,l,a):di(n,s.anchorPath,u)}if(hi(s)){const c=bn(o),u=wt(n,c);return Array.isArray(u)?Zn(a,!1):zs(a,!1)}return yn(s)?Zn(a,!1):Ci(s)?di(n,l,a):di(n,o,o)}function P$(n,e,t){const i=bn(t),s=[Yt(t)],r=_0(wt(n,i),e,s);return r?Zn(i.concat(r),!1):_o(t)}function EN(n,e,t){const i=e.selection,s=yN(n,e,t),r=s.findIndex(o=>wn(o.path,i.focusPath)&&String(o.type)===String(i.type));return{caret:r!==-1?s[r]:null,previous:r!==-1&&r>0?s[r-1]:null,next:r!==-1&&r<s.length-1?s[r+1]:null}}function M$(n,e,t=!1,i=!0){const s=e.selection,{caret:r,previous:o}=EN(n,e,i);if(t)return Sn(s)?null:di(n,s.anchorPath,s.focusPath);if(r&&o)return jb(o);const l=bn(s.focusPath),a=wt(n,l);return yn(s)&&Array.isArray(a)?di(n,s.focusPath,s.focusPath):Sn(s)&&!Array.isArray(a)?zs(s.focusPath,!1):null}function B$(n,e,t=!1,i=!0){const s=e.selection,{caret:r,next:o}=EN(n,e,i);return t?Sn(s)?null:di(n,s.anchorPath,s.focusPath):r&&o?jb(o):Sn(s)?Zn(s.focusPath,!1):null}function fh(n,e){const t=Fb(n,e);let i=0;for(;i<t.length-1&&t[i+1].length>t[i].length;)i++;const s=t[i];return s.length===0||Array.isArray(wt(n,bn(s)))?Zn(s,!1):zs(s,!1)}function oc(n,e){if(e.length===1){const i=ks(e);if(i.op==="replace"||i.op==="move"){const s=jr(n,i.path);return Zn(s,!1)}}if(!si(e)&&e.every(i=>i.op==="move")){const i=ks(e),s=e.slice(1);if((o1(i)||Ga(i))&&i.from!==i.path&&s.every(r=>(o1(r)||Ga(r))&&r.from===r.path)){const r=jr(n,i.path);return zs(r,!1)}}const t=e.filter(i=>i.op!=="test"&&i.op!=="remove"&&(i.op!=="move"||i.from!==i.path)&&typeof i.path=="string").map(i=>jr(n,i.path));return si(t)?null:{type:Mn.multi,paths:t,anchorPath:ks(t),focusPath:Yt(t),pointersMap:AN(t)}}function AN(n){const e={};return n.forEach(t=>{e[mt(t)]=!0}),e}function ap(n){return{[mt(n)]:!0}}function L$(n,e){let t=0;for(;t<n.length&&t<e.length&&n[t]===e[t];)t++;return n.slice(0,t)}function y0(n){return n&&(hi(n)||yn(n)||Sn(n)&&n.paths.length===1)}function Iw(n,e){return y0(e)&&Ri(wt(n,e.focusPath))?e.focusPath:bn(e.focusPath)}function Xu(n,e){if(n.length<e.length)return!1;for(let t=0;t<e.length;t++)if(n[t]!==e[t])return!1;return!0}function wo(n){const e=n.selection;return(hi(e)||yn(e))&&e.edit?{...n,selection:{...e,edit:!1}}:n}function zs(n,e){return{type:Mn.key,anchorPath:n,focusPath:n,pointersMap:ap(n),edit:e}}function Zn(n,e){return{type:Mn.value,anchorPath:n,focusPath:n,pointersMap:ap(n),edit:e}}function Ur(n){return{type:Mn.inside,anchorPath:n,focusPath:n,pointersMap:ap(n)}}function _o(n){return{type:Mn.after,anchorPath:n,focusPath:n,pointersMap:ap(n)}}function di(n,e,t){const i=O$(n,e,t),s=Xu(t,Yt(i))||Xu(e,ks(i));return{type:Mn.multi,anchorPath:s?ks(i):Yt(i),focusPath:s?Yt(i):ks(i),paths:i,pointersMap:AN(i)}}function Tw(n,e,t,i){if(hi(e))return String(Yt(e.focusPath));if(yn(e)){const s=wt(n,e.focusPath);return typeof s=="string"?s:i.stringify(s,null,t)}if(Sn(e)){if(si(e.focusPath))return i.stringify(n,null,t);const s=SN(e),r=wt(n,s);if(Array.isArray(r))if(e.paths.length===1){const o=wt(n,ks(e.paths));return i.stringify(o,null,t)}else return e.paths.map(o=>{const l=wt(n,o);return`${i.stringify(l,null,t)},`}).join(`
`);else return e.paths.map(o=>{const l=Yt(o),a=wt(n,o);return`${i.stringify(l)}: ${i.stringify(a,null,t)},`}).join(`
`)}return null}function wN(n){return Sn(n)?n.paths:[n.focusPath]}function cu(n){return(hi(n)||yn(n))&&n.edit}function W$(n,e,t=!0){return e===void 0&&!t?n:{...n,selection:e}}function U$(){return Zn([],!1)}function Ph(n){if(!n)return!1;if(hi(n)||yn(n)||Sn(n)&&n.paths.length===1)return!0}function jb(n){switch(n.type){case dr.key:return zs(n.path,!1);case dr.value:return Zn(n.path,!1);case dr.after:return _o(n.path);case dr.inside:return Ur(n.path)}}function Ow(n,e,t){switch(e){case Mn.key:return zs(t,!1);case Mn.value:return Zn(t,!1);case Mn.after:return _o(t);case Mn.inside:return Ur(t);case Mn.multi:return di(n,t,t)}}function Rw(n,e){if(n)return Object.keys(n.pointersMap).some(t=>Ka(t,e)||Ka(e,t))?n:void 0}function hh(n,e,t){const i=bn(e),s=wt(n,i);if(pi(s)){const r=Ai(Yt(e));return t.map((o,l)=>({op:"add",path:mt(i.concat(String(r+l))),value:o.value}))}else if(Li(s)){const r=Yt(e),o=Object.keys(s),l=If(o,r,!0);return[...t.map(a=>{const c=Tf(a.key,o);return{op:"add",path:mt(i.concat(c)),value:a.value}}),...l.map(a=>Yl(i,a))]}else throw new Error("Cannot create insert operations: parent must be an Object or Array")}function Dw(n,e,t){const i=wt(n,e);if(Array.isArray(i)){const s=i.length;return t.map((r,o)=>({op:"add",path:mt(e.concat(String(s+o))),value:r.value}))}else return t.map(s=>{const r=Tf(s.key,Object.keys(i));return{op:"add",path:mt(e.concat(r)),value:s.value}})}function Of(n,e,t,i){const s=e.filter(l=>l!==t),r=Tf(i,s),o=If(e,t,!1);return[{op:"move",from:mt(n.concat(t)),path:mt(n.concat(r))},...o.map(l=>Yl(n,l))]}function V$(n,e,t){const i=ks(e),s=bn(i),r=wt(n,s);if(pi(r)){const o=ks(e),l=o?Ai(Yt(o)):0;return[...S0(e),...t.map((a,c)=>({op:"add",path:mt(s.concat(String(c+l))),value:a.value}))]}else if(Li(r)){const o=Yt(e),l=bn(o),a=Yt(o),c=Object.keys(r),u=If(c,a,!1),f=new Set(e.map(d=>Yt(d))),h=c.filter(d=>!f.has(d));return[...S0(e),...t.map(d=>{const m=Tf(d.key,h);return{op:"add",path:mt(l.concat(m)),value:d.value}}),...u.map(d=>Yl(l,d))]}else throw new Error("Cannot create replace operations: parent must be an Object or Array")}function F$(n,e){const t=Yt(e);if(si(t))throw new Error("Cannot duplicate root object");const i=bn(t),s=Yt(t),r=wt(n,i);if(pi(r)){const o=Yt(e),l=o?Ai(Yt(o))+1:0;return[...e.map((a,c)=>({op:"copy",from:mt(a),path:mt(i.concat(String(c+l)))}))]}else if(Li(r)){const o=Object.keys(r),l=If(o,s,!1);return[...e.map(a=>{const c=Yt(a),u=Tf(c,o);return{op:"copy",from:mt(a),path:mt(i.concat(u))}}),...l.map(a=>Yl(i,a))]}else throw new Error("Cannot create duplicate operations: parent must be an Object or Array")}function j$(n,e){if(yn(e))return[{op:"move",from:mt(e.focusPath),path:""}];if(Sn(e)){const t=bn(e.focusPath),i=wt(n,t);if(pi(i))return[{op:"replace",path:"",value:e.paths.map(r=>{const o=Ai(Yt(r));return i[o]})}];if(Li(i)){const s={};return e.paths.forEach(r=>{const o=String(Yt(r));s[o]=i[o]}),[{op:"replace",path:"",value:s}]}}else throw new Error("Cannot create extract operations: parent must be an Object or Array");throw new Error("Cannot extract: unsupported type of selection "+JSON.stringify(e))}function Nw(n,e,t,i){if(hi(e)){const s=ZO(t,i),r=bn(e.focusPath),o=wt(n,r),l=Object.keys(o),a=Yt(e.focusPath);return Of(r,l,a,typeof s=="string"?s:t)}if(yn(e)||Sn(e)&&si(e.focusPath))try{return[{op:"replace",path:mt(e.focusPath),value:Qv(t,s=>Xv(s,i))}]}catch{return[{op:"replace",path:mt(e.focusPath),value:t}]}if(Sn(e)){const s=ug(t,i);return V$(n,e.paths,s)}if(vr(e)){const s=ug(t,i),r=e.focusPath,o=bn(r),l=wt(n,o);if(pi(l)){const a=Ai(Yt(r)),c=o.concat(String(a+1));return hh(n,c,s)}else if(Li(l)){const a=String(Yt(r)),c=Object.keys(l);if(si(c)||Yt(c)===a)return Dw(n,o,s);{const u=c.indexOf(a),f=c[u+1],h=o.concat(f);return hh(n,h,s)}}else throw new Error("Cannot create insert operations: parent must be an Object or Array")}if(Ci(e)){const s=ug(t,i),r=e.focusPath,o=wt(n,r);if(pi(o)){const l=r.concat("0");return hh(n,l,s)}else if(Li(o)){const l=Object.keys(o);if(si(l))return Dw(n,r,s);{const a=ks(l),c=r.concat(a);return hh(n,c,s)}}else throw new Error("Cannot create insert operations: parent must be an Object or Array")}throw new Error("Cannot insert: unsupported type of selection "+JSON.stringify(e))}function H$(n,e,t){const i=t.beforePath,s=t.append,r=bn(e.focusPath),o=wt(n,r);if(!s&&!(i&&Xu(i,r)&&i.length>r.length))return[];const l=rc(e),a=lp(e),c=Yt(l),u=Yt(a),f=i?i[r.length]:void 0;if(Li(o)){const h=Object.keys(o),d=h.indexOf(c),m=h.indexOf(u),g=s?h.length:h.indexOf(f);if(d!==-1&&m!==-1&&g!==-1)return g>d?[...h.slice(d,m+1),...h.slice(g,h.length)].map(_=>Yl(r,_)):[...h.slice(g,d),...h.slice(m+1,h.length)].map(_=>Yl(r,_))}else if(pi(o)){const h=Ai(c),d=Ai(u),m=f!==void 0?Ai(f):o.length,g=d-h+1;return m<h?FS(g,_=>({op:"move",from:mt(r.concat(String(h+_))),path:mt(r.concat(String(m+_)))})):FS(g,()=>({op:"move",from:mt(r.concat(String(h))),path:mt(r.concat(String(m)))}))}else throw new Error("Cannot create move operations: parent must be an Object or Array")}function q$(n,e,t){if(t==="object")return{};if(t==="array")return[];if(t==="structure"){const i=SN(e),s=wt(n,i);if(Array.isArray(s)&&!si(s)){const r=ks(s);return Ri(r)?TH(r,o=>Array.isArray(o)?[]:Fi(o)?void 0:""):""}}return""}function S0(n){return n.map(e=>({op:"remove",path:mt(e)})).reverse()}function Yl(n,e){return{op:"move",from:mt(n.concat(e)),path:mt(n.concat(e))}}function ug(n,e){const t=/^\s*{/.test(n),i=/^\s*\[/.test(n),s=ZO(n,e),r=s!==void 0?s:Qv(n,o=>Xv(o,e));return t&&Fi(r)||i&&Array.isArray(r)?[{key:"New item",value:r}]:Array.isArray(r)?r.map((o,l)=>({key:"New item "+l,value:o})):Fi(r)?Object.keys(r).map(o=>({key:o,value:r[o]})):[{key:"New item",value:r}]}function Pw(n,e){if(hi(e)){const t=bn(e.focusPath),i=wt(n,t),s=Object.keys(i),r=Yt(e.focusPath),l=Of(t,s,r,""),a=oc(n,l);return{operations:l,newSelection:a}}if(yn(e))return{operations:[{op:"replace",path:mt(e.focusPath),value:""}],newSelection:e};if(Sn(e)){const t=S0(e.paths),i=Yt(e.paths);if(si(i)){const o=[{op:"replace",path:"",value:""}],l=Zn([],!1);return{operations:o,newSelection:l}}const s=bn(i),r=wt(n,s);if(pi(r)){const o=ks(e.paths),l=Ai(Yt(o)),a=l===0?Ur(s):_o(s.concat(String(l-1)));return{operations:t,newSelection:a}}else if(Li(r)){const o=Object.keys(r),l=ks(e.paths),a=Yt(l),c=o.indexOf(a),u=o[c-1],f=c===0?Ur(s):_o(s.concat(u));return{operations:t,newSelection:f}}else throw new Error("Cannot create remove operations: parent must be an Object or Array")}throw new Error("Cannot remove: unsupported type of selection "+JSON.stringify(e))}function z$(n,e){return hO(n,e,{before:(t,i,s)=>{if(oO(i)){const r=Jo(i.path);return{revertOperations:[...s,...Mw(t,r)]}}if(Ga(i)){const r=Jo(i.from);return{revertOperations:[...s,...Mw(t,r)]}}return{revertOperations:s}}})}function Mw(n,e){const t=bn(e),i=Yt(e),s=wt(n,t);if(Li(s)){const r=Object.keys(s);return If(r,i,!1).map(l=>Yl(t,l))}return[]}function G$(n,e,t){const i=t!=null&&t.activeItem?Ww(t.activeItem):void 0,s=e.findIndex(a=>wn(i,Ww(a))),r=s!==-1?s:(t==null?void 0:t.activeIndex)<e.length?t==null?void 0:t.activeIndex:e.length>0?0:-1,o=e.map((a,c)=>({...a,active:c===r})),l=o[r];return{items:o,itemsMap:Kv(o,a=>mt(a.path)),activeItem:l,activeIndex:r}}function K$(n){const e=n.activeIndex<n.items.length-1?n.activeIndex+1:n.items.length>0?0:-1,t=n.items[e],i=n.items.map((s,r)=>({...s,active:r===e}));return{...n,items:i,itemsMap:Kv(i,s=>mt(s.path)),activeItem:t,activeIndex:e}}function X$(n){const e=n.activeIndex>0?n.activeIndex-1:n.items.length-1,t=n.items[e],i=n.items.map((s,r)=>({...s,active:r===e}));return{...n,items:i,itemsMap:Kv(i,s=>mt(s.path)),activeItem:t,activeIndex:e}}function CN(n,e,t,i=1/0){const s=[],r=[];function o(a){s.length<i&&s.push(a)}function l(a,c){if(pi(c)){const u=r.length;r.push("0");for(let f=0;f<c.length;f++)if(r[u]=String(f),l(a,c[f]),s.length>=i)return;r.pop()}else if(Li(c)){const u=Object.keys(c),f=r.length;r.push("");for(const h of u)if(r[f]=h,Bw(h,a,r,br.key,o),l(a,c[h]),s.length>=i)return;r.pop()}else Bw(String(c),a,r,br.value,o)}if(typeof n=="string"&&n!==""){const a=n.toLowerCase();l(a,e)}return s}function Bw(n,e,t,i,s){const r=n.toLowerCase();let o=0,l=-1,a=-1;do a=r.indexOf(e,l),a!==-1&&(l=a+e.length,s({path:t.slice(0),field:i,fieldIndex:o,start:a,end:l}),o++);while(a!==-1)}function E0(n,e,t,i){return n.substring(0,t)+e+n.substring(i)}function Lw(n,e,t){let i=n;return Lq(t,s=>{i=E0(i,e,s.start,s.end)}),i}function Q$(n,e,t,i,s){const{field:r,path:o,start:l,end:a}=i;if(r===br.key){const c=bn(o),u=wt(n,c),f=Yt(o),h=Object.keys(u),d=E0(f,t,l,a),m=Of(c,h,f,d);return{newSelection:oc(n,m),operations:m}}else if(r===br.value){const c=wt(n,o);if(c===void 0)throw new Error(`Cannot replace: path not found ${mt(o)}`);const u=typeof c=="string"?c:String(c),f=mt(o),h=kf(c,e.enforceStringMap,f,s),d=E0(u,t,l,a),m=[{op:"replace",path:mt(o),value:h?d:gf(d,s)}];return{newSelection:oc(n,m),operations:m}}else throw new Error(`Cannot replace: unknown type of search result field ${r}`)}function Y$(n,e,t,i,s){const r=CN(t,n,e,1/0),o=[];for(let c=0;c<r.length;c++){const u=r[c-1],f=r[c];c===0||f.field!==u.field||!wn(f.path,u.path)?o.push({path:f.path,field:f.field,items:[f]}):Yt(o).items.push(f)}o.sort((c,u)=>c.field!==u.field?c.field===br.key?1:-1:u.path.length-c.path.length);let l=[],a;return o.forEach(c=>{const{field:u,path:f,items:h}=c;if(u===br.key){const d=bn(f),m=wt(n,d),g=Yt(f),_=Object.keys(m),v=Lw(g,i,h),y=Of(d,_,g,v);l=l.concat(y),a=oc(n,y)}else if(u===br.value){const d=wt(n,f);if(d===void 0)throw new Error(`Cannot replace: path not found ${mt(f)}`);const m=typeof d=="string"?d:String(d),g=mt(f),_=kf(d,e.enforceStringMap,g,s),v=Lw(m,i,h),y=[{op:"replace",path:mt(f),value:_?v:gf(v,s)}];l=l.concat(y),a=oc(n,y)}else throw new Error(`Cannot replace: unknown type of search result field ${u}`)}),{operations:l,newSelection:a}}function J$(n,e){const t=[];let i=0;for(const r of e){const o=n.slice(i,r.start);o!==""&&t.push({type:"normal",text:o,active:!1});const l=n.slice(r.start,r.end);t.push({type:"highlight",text:l,active:r.active}),i=r.end}const s=Yt(e);return s.end<n.length&&t.push({type:"normal",text:n.slice(s.end),active:!1}),t}function Ww(n){return n.path.concat(n.field,String(n.fieldIndex))}function Z$(n,e){var i;const t=(i=n==null?void 0:n[e])==null?void 0:i.filter(s=>s.field===br.key);if(!(!t||t.length===0))return t}function Uw(n,e){var i;const t=(i=n==null?void 0:n[e])==null?void 0:i.filter(s=>s.field===br.value);if(!(!t||t.length===0))return t}function A0(n){var e;if(navigator.clipboard)return navigator.clipboard.writeText(n);if((e=document.queryCommandSupported)!=null&&e.call(document,"copy")){const t=document.createElement("textarea");t.value=n,t.style.position="fixed",t.style.opacity="0",document.body.appendChild(t),t.select();try{document.execCommand("copy")}catch(i){console.error(i)}finally{document.body.removeChild(t)}}else console.error("Copy failed.")}function x$(n){let e,t,i,s,r,o,l,a,c;return o=new qt({props:{data:_f}}),{c(){e=C("div"),t=C("div"),i=z(n[0]),s=F(),r=C("button"),Te(o.$$.fragment),this.h()},l(u){e=k(u,"DIV",{class:!0});var f=T(e);t=k(f,"DIV",{class:!0});var h=T(t);i=G(h,n[0]),h.forEach(b),s=j(f),r=k(f,"BUTTON",{type:!0,class:!0});var d=T(r);De(o.$$.fragment,d),d.forEach(b),f.forEach(b),this.h()},h(){S(t,"class","jse-title svelte-1djqugc"),S(r,"type","button"),S(r,"class","jse-close svelte-1djqugc"),S(e,"class","jse-header svelte-1djqugc")},m(u,f){X(u,e,f),p(e,t),p(t,i),p(e,s),p(e,r),Oe(o,r,null),l=!0,a||(c=Se(r,"click",n[1]),a=!0)},p(u,[f]){(!l||f&1)&&Be(i,u[0])},i(u){l||(B(o.$$.fragment,u),l=!0)},o(u){Q(o.$$.fragment,u),l=!1},d(u){u&&b(e),Re(o),a=!1,c()}}}function $$(n,e,t){let{title:i="Modal"}=e;const{close:s}=Nn("simple-modal");return n.$$set=r=>{"title"in r&&t(0,i=r.title)},[i,s]}let eee=class extends rt{constructor(e){super(),ot(this,e,$$,x$,fn,{title:0})}};const kN=eee;function tee(n){let e,t,i,s,r,o,l,a,c,u,f,h,d,m,g,_,v,y,E,w,A,I,R,D,N,W,H,P,Y,O,L,U;return t=new kN({props:{title:"Copying and pasting"}}),{c(){e=C("div"),Te(t.$$.fragment),i=F(),s=C("div"),r=C("div"),o=z("These actions are unavailable via the menu. Please use:"),l=F(),a=C("div"),c=C("div"),u=C("div"),f=z(n[1]),h=z("+C"),d=z(`
        for copy`),m=F(),g=C("div"),_=C("div"),v=z(n[1]),y=z("+X"),E=z(`
        for cut`),w=F(),A=C("div"),I=C("div"),R=z(n[1]),D=z("+V"),N=z(`
        for paste`),W=F(),H=C("div"),P=C("button"),Y=z("Close"),this.h()},l(K){e=k(K,"DIV",{class:!0});var te=T(e);De(t.$$.fragment,te),i=j(te),s=k(te,"DIV",{class:!0});var q=T(s);r=k(q,"DIV",{});var x=T(r);o=G(x,"These actions are unavailable via the menu. Please use:"),x.forEach(b),l=j(q),a=k(q,"DIV",{class:!0});var Z=T(a);c=k(Z,"DIV",{class:!0});var V=T(c);u=k(V,"DIV",{class:!0});var ce=T(u);f=G(ce,n[1]),h=G(ce,"+C"),ce.forEach(b),d=G(V,`
        for copy`),V.forEach(b),m=j(Z),g=k(Z,"DIV",{class:!0});var pe=T(g);_=k(pe,"DIV",{class:!0});var oe=T(_);v=G(oe,n[1]),y=G(oe,"+X"),oe.forEach(b),E=G(pe,`
        for cut`),pe.forEach(b),w=j(Z),A=k(Z,"DIV",{class:!0});var ve=T(A);I=k(ve,"DIV",{class:!0});var Ne=T(I);R=G(Ne,n[1]),D=G(Ne,"+V"),Ne.forEach(b),N=G(ve,`
        for paste`),ve.forEach(b),Z.forEach(b),W=j(q),H=k(q,"DIV",{class:!0});var J=T(H);P=k(J,"BUTTON",{type:!0,class:!0});var Ie=T(P);Y=G(Ie,"Close"),Ie.forEach(b),J.forEach(b),q.forEach(b),te.forEach(b),this.h()},h(){S(u,"class","jse-key svelte-wp98us"),S(c,"class","jse-shortcut"),S(_,"class","jse-key svelte-wp98us"),S(g,"class","jse-shortcut"),S(I,"class","jse-key svelte-wp98us"),S(A,"class","jse-shortcut"),S(a,"class","jse-shortcuts svelte-wp98us"),S(P,"type","button"),S(P,"class","jse-primary svelte-wp98us"),S(H,"class","jse-actions svelte-wp98us"),S(s,"class","jse-contents svelte-wp98us"),S(e,"class","jse-modal jse-copy-paste svelte-wp98us")},m(K,te){X(K,e,te),Oe(t,e,null),p(e,i),p(e,s),p(s,r),p(r,o),p(s,l),p(s,a),p(a,c),p(c,u),p(u,f),p(u,h),p(c,d),p(a,m),p(a,g),p(g,_),p(_,v),p(_,y),p(g,E),p(a,w),p(a,A),p(A,I),p(I,R),p(I,D),p(A,N),p(s,W),p(s,H),p(H,P),p(P,Y),O=!0,L||(U=Se(P,"click",n[0]),L=!0)},p:Xe,i(K){O||(B(t.$$.fragment,K),O=!0)},o(K){Q(t.$$.fragment,K),O=!1},d(K){K&&b(e),Re(t),L=!1,U()}}}function nee(n){const{close:e}=Nn("simple-modal");return[e,lR?"":"Ctrl"]}class iee extends rt{constructor(e){super(),ot(this,e,nee,tee,fn,{})}}const see=iee;function ree(n){let e,t;return{c(){e=C("div"),t=z("Repair invalid JSON, then click apply"),this.h()},l(i){e=k(i,"DIV",{slot:!0,class:!0});var s=T(e);t=G(s,"Repair invalid JSON, then click apply"),s.forEach(b),this.h()},h(){S(e,"slot","left"),S(e,"class","jse-info svelte-1puchbn")},m(i,s){X(i,e,s),p(e,t)},p:Xe,d(i){i&&b(e)}}}function oee(n){let e,t;return e=new ra({props:{type:"success",message:"JSON is valid now and can be parsed.",actions:n[5]}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,s){const r={};s&32&&(r.actions=i[5]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function lee(n){let e,t;return e=new ra({props:{type:"error",icon:sa,message:`Cannot parse JSON: ${n[2].message}`,actions:n[6]}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,s){const r={};s&4&&(r.message=`Cannot parse JSON: ${i[2].message}`),s&64&&(r.actions=i[6]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function aee(n){let e,t,i,s,r,o,l,a,c,u;t=new ib({props:{items:n[7],$$slots:{left:[ree]},$$scope:{ctx:n}}});const f=[lee,oee],h=[];function d(m,g){return m[2]?0:1}return s=d(n),r=h[s]=f[s](n),{c(){e=C("div"),Te(t.$$.fragment),i=F(),r.c(),o=F(),l=C("textarea"),this.h()},l(m){e=k(m,"DIV",{class:!0});var g=T(e);De(t.$$.fragment,g),i=j(g),r.l(g),o=j(g),l=k(g,"TEXTAREA",{class:!0,autocomplete:!0,autocapitalize:!0,spellcheck:!0}),T(l).forEach(b),g.forEach(b),this.h()},h(){l.value=n[0],l.readOnly=n[1],S(l,"class","jse-json-text svelte-1puchbn"),S(l,"autocomplete","off"),S(l,"autocapitalize","off"),S(l,"spellcheck","false"),S(e,"class","jse-json-repair-component svelte-1puchbn")},m(m,g){X(m,e,g),Oe(t,e,null),p(e,i),h[s].m(e,null),p(e,o),p(e,l),n[19](l),n[20](e),a=!0,c||(u=Se(l,"input",n[8]),c=!0)},p(m,[g]){const _={};g&128&&(_.items=m[7]),g&134217728&&(_.$$scope={dirty:g,ctx:m}),t.$set(_);let v=s;s=d(m),s===v?h[s].p(m,g):(He(),Q(h[v],1,1,()=>{h[v]=null}),qe(),r=h[s],r?r.p(m,g):(r=h[s]=f[s](m),r.c()),B(r,1),r.m(e,o)),(!a||g&1)&&(l.value=m[0]),(!a||g&2)&&(l.readOnly=m[1])},i(m){a||(B(t.$$.fragment,m),B(r),a=!0)},o(m){Q(t.$$.fragment,m),Q(r),a=!1},d(m){m&&b(e),Re(t),h[s].d(),n[19](null),n[20](null),c=!1,u()}}}function cee(n,e,t){let i,s,r,o,l,a,c,u,{text:f=""}=e,{readOnly:h=!1}=e,{onParse:d}=e,{onRepair:m}=e,{onChange:g=null}=e,{onApply:_}=e,{onCancel:v}=e,{onRenderMenu:y=Gn}=e;const E=Ts("jsoneditor:JSONRepair");let w,A;function I(O){try{return d(O),null}catch(L){return Yv(O,L.message)}}function R(O){try{return m(O),!0}catch{return!1}}function D(){A&&i&&i.position!=null&&(A.setSelectionRange(i.position,i.position),setTimeout(()=>{A.focus()}))}function N(O){E("handleChange");const L=O.target.value;f!==L&&(t(0,f=L),g&&g(f))}function W(){_(f)}function H(){try{t(0,f=m(f)),g&&g(f)}catch{}}function P(O){Vt[O?"unshift":"push"](()=>{A=O,t(4,A)})}function Y(O){Vt[O?"unshift":"push"](()=>{w=O,t(3,w)})}return n.$$set=O=>{"text"in O&&t(0,f=O.text),"readOnly"in O&&t(1,h=O.readOnly),"onParse"in O&&t(9,d=O.onParse),"onRepair"in O&&t(10,m=O.onRepair),"onChange"in O&&t(11,g=O.onChange),"onApply"in O&&t(12,_=O.onApply),"onCancel"in O&&t(13,v=O.onCancel),"onRenderMenu"in O&&t(14,y=O.onRenderMenu)},n.$$.update=()=>{n.$$.dirty&1&&t(2,i=I(f)),n.$$.dirty&1&&t(17,s=R(f)),n.$$.dirty&4&&E("error",i),n.$$.dirty&8192&&t(18,r=[{space:!0},{icon:_f,title:"Cancel repair",className:"jse-cancel",onClick:v}]),n.$$.dirty&278528&&t(7,o=y("repair",r)||r),n.$$.dirty&229376&&t(6,c=s?[l,a]:[l]),n.$$.dirty&2&&t(5,u=[{icon:k1,text:"Apply",title:"Apply fixed JSON",disabled:h,onClick:W}])},t(15,l={icon:cG,text:"Show me",title:"Scroll to the error location",onClick:D}),t(16,a={icon:$v,text:"Auto repair",title:"Automatically repair JSON",onClick:H}),[f,h,i,w,A,u,c,o,N,d,m,g,_,v,y,l,a,s,r,P,Y]}class uee extends rt{constructor(e){super(),ot(this,e,cee,aee,fn,{text:0,readOnly:1,onParse:9,onRepair:10,onChange:11,onApply:12,onCancel:13,onRenderMenu:14})}}const fee=uee;function hee(n){let e,t,i,s;function r(l){n[7](l)}let o={onParse:n[1],onRepair:n[2],onApply:n[4],onCancel:n[5],onRenderMenu:n[3]};return n[0]!==void 0&&(o.text=n[0]),t=new fee({props:o}),Vt.push(()=>Vs(t,"text",r)),{c(){e=C("div"),Te(t.$$.fragment),this.h()},l(l){e=k(l,"DIV",{class:!0});var a=T(e);De(t.$$.fragment,a),a.forEach(b),this.h()},h(){S(e,"class","jse-modal jse-repair svelte-1ffm3pm")},m(l,a){X(l,e,a),Oe(t,e,null),s=!0},p(l,[a]){const c={};a&2&&(c.onParse=l[1]),a&4&&(c.onRepair=l[2]),a&8&&(c.onRenderMenu=l[3]),!i&&a&1&&(i=!0,c.text=l[0],Zs(()=>i=!1)),t.$set(c)},i(l){s||(B(t.$$.fragment,l),s=!0)},o(l){Q(t.$$.fragment,l),s=!1},d(l){l&&b(e),Re(t)}}}function dee(n,e,t){let{text:i}=e,{onParse:s}=e,{onRepair:r}=e,{onApply:o}=e,{onRenderMenu:l}=e;const{close:a}=Nn("simple-modal");function c(h){a(),o(h)}function u(){a()}function f(h){i=h,t(0,i)}return n.$$set=h=>{"text"in h&&t(0,i=h.text),"onParse"in h&&t(1,s=h.onParse),"onRepair"in h&&t(2,r=h.onRepair),"onApply"in h&&t(6,o=h.onApply),"onRenderMenu"in h&&t(3,l=h.onRenderMenu)},[i,s,r,l,c,u,o,f]}class mee extends rt{constructor(e){super(),ot(this,e,dee,hee,fn,{text:0,onParse:1,onRepair:2,onApply:6,onRenderMenu:3})}}const pee=mee;function Vw(n,e,t){const i=n.slice();return i[11]=e[t],i}const gee=n=>({}),Fw=n=>({});function jw(n){let e,t;return e=new qt({props:{data:n[11].icon}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,s){const r={};s&1&&(r.data=i[11].icon),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function Hw(n){let e,t,i,s=n[11].text+"",r,o,l,a,c,u,f,h=n[11].icon&&jw(n);function d(){return n[9](n[11])}return{c(){e=C("li"),t=C("button"),h&&h.c(),i=F(),r=z(s),a=F(),this.h()},l(m){e=k(m,"LI",{class:!0});var g=T(e);t=k(g,"BUTTON",{type:!0,title:!0,class:!0});var _=T(t);h&&h.l(_),i=j(_),r=G(_,s),_.forEach(b),a=j(g),g.forEach(b),this.h()},h(){S(t,"type","button"),S(t,"title",o=n[11].title),t.disabled=l=n[11].disabled,S(t,"class","svelte-kae4bx"),S(e,"class","svelte-kae4bx")},m(m,g){X(m,e,g),p(e,t),h&&h.m(t,null),p(t,i),p(t,r),p(e,a),c=!0,u||(f=Se(t,"click",d),u=!0)},p(m,g){n=m,n[11].icon?h?(h.p(n,g),g&1&&B(h,1)):(h=jw(n),h.c(),B(h,1),h.m(t,i)):h&&(He(),Q(h,1,1,()=>{h=null}),qe()),(!c||g&1)&&s!==(s=n[11].text+"")&&Be(r,s),(!c||g&1&&o!==(o=n[11].title))&&S(t,"title",o),(!c||g&1&&l!==(l=n[11].disabled))&&(t.disabled=l)},i(m){c||(B(h),c=!0)},o(m){Q(h),c=!1},d(m){m&&b(e),h&&h.d(),u=!1,f()}}}function vee(n){let e,t,i,s,r,o,l,a,c,u;const f=n[8].defaultItem,h=cs(f,n,n[7],Fw);s=new qt({props:{data:Br}});let d=n[0],m=[];for(let _=0;_<d.length;_+=1)m[_]=Hw(Vw(n,d,_));const g=_=>Q(m[_],1,1,()=>{m[_]=null});return{c(){e=C("div"),h&&h.c(),t=F(),i=C("button"),Te(s.$$.fragment),r=F(),o=C("div"),l=C("ul");for(let _=0;_<m.length;_+=1)m[_].c();this.h()},l(_){e=k(_,"DIV",{class:!0,title:!0});var v=T(e);h&&h.l(v),t=j(v),i=k(v,"BUTTON",{type:!0,class:!0,"data-type":!0});var y=T(i);De(s.$$.fragment,y),y.forEach(b),r=j(v),o=k(v,"DIV",{class:!0,style:!0});var E=T(o);l=k(E,"UL",{class:!0});var w=T(l);for(let A=0;A<m.length;A+=1)m[A].l(w);w.forEach(b),E.forEach(b),v.forEach(b),this.h()},h(){S(i,"type","button"),S(i,"class","jse-open-dropdown svelte-kae4bx"),S(i,"data-type","jse-open-dropdown"),i.disabled=n[4],$e(i,"jse-visible",n[3]),S(l,"class","svelte-kae4bx"),S(o,"class","jse-dropdown-items svelte-kae4bx"),ct(o,"width",n[2]),$e(o,"jse-visible",n[3]),S(e,"class","jse-dropdown-button svelte-kae4bx"),S(e,"title",n[1])},m(_,v){X(_,e,v),h&&h.m(e,null),p(e,t),p(e,i),Oe(s,i,null),p(e,r),p(e,o),p(o,l);for(let y=0;y<m.length;y+=1)m[y].m(l,null);a=!0,c||(u=[Se(i,"click",n[5]),Se(e,"click",n[6])],c=!0)},p(_,[v]){if(h&&h.p&&(!a||v&128)&&us(h,f,_,_[7],a?hs(f,_[7],v,gee):fs(_[7]),Fw),(!a||v&16)&&(i.disabled=_[4]),(!a||v&8)&&$e(i,"jse-visible",_[3]),v&1){d=_[0];let y;for(y=0;y<d.length;y+=1){const E=Vw(_,d,y);m[y]?(m[y].p(E,v),B(m[y],1)):(m[y]=Hw(E),m[y].c(),B(m[y],1),m[y].m(l,null))}for(He(),y=d.length;y<m.length;y+=1)g(y);qe()}(!a||v&4)&&ct(o,"width",_[2]),(!a||v&8)&&$e(o,"jse-visible",_[3]),(!a||v&2)&&S(e,"title",_[1])},i(_){if(!a){B(h,_),B(s.$$.fragment,_);for(let v=0;v<d.length;v+=1)B(m[v]);a=!0}},o(_){Q(h,_),Q(s.$$.fragment,_),m=m.filter(Boolean);for(let v=0;v<m.length;v+=1)Q(m[v]);a=!1},d(_){_&&b(e),h&&h.d(_),Re(s),Ht(m,_),c=!1,an(u)}}}function bee(n,e,t){let i,{$$slots:s={},$$scope:r}=e,{items:o=[]}=e,{title:l=void 0}=e,{width:a="120px"}=e,c=!1;function u(){const m=c;setTimeout(()=>t(3,c=!m))}function f(){t(3,c=!1)}function h(m){ia(m)==="Escape"&&(m.preventDefault(),t(3,c=!1))}Mi(()=>{document.addEventListener("click",f),document.addEventListener("keydown",h)}),_r(()=>{document.removeEventListener("click",f),document.removeEventListener("keydown",h)});const d=m=>m.onClick();return n.$$set=m=>{"items"in m&&t(0,o=m.items),"title"in m&&t(1,l=m.title),"width"in m&&t(2,a=m.width),"$$scope"in m&&t(7,r=m.$$scope)},n.$$.update=()=>{n.$$.dirty&1&&t(4,i=o.every(m=>m.disabled===!0))},[o,l,a,c,i,u,f,r,s,d]}class _ee extends rt{constructor(e){super(),ot(this,e,bee,vee,fn,{items:0,title:1,width:2})}}const fg=_ee;var yee={prefix:"far",iconName:"lightbulb",icon:[384,512,[128161],"f0eb","M281.2 248.9C295.6 228.3 304 203.2 304 176c0-70.7-57.3-128-128-128S48 105.3 48 176c0 27.2 8.4 52.3 22.8 72.9c3.7 5.3 8.1 11.3 12.8 17.7l0 0c12.9 17.7 28.3 38.9 39.8 59.8c10.4 19 15.7 38.8 18.3 57.5H93c-2.2-12-5.9-23.7-11.8-34.5c-9.9-18-22.2-34.9-34.5-51.8l0 0 0 0c-5.2-7.1-10.4-14.2-15.4-21.4C11.6 247.9 0 213.3 0 176C0 78.8 78.8 0 176 0s176 78.8 176 176c0 37.3-11.6 71.9-31.4 100.3c-5 7.2-10.2 14.3-15.4 21.4l0 0 0 0c-12.3 16.8-24.6 33.7-34.5 51.8c-5.9 10.8-9.6 22.5-11.8 34.5H210.4c2.6-18.7 7.9-38.6 18.3-57.5c11.5-20.9 26.9-42.1 39.8-59.8l0 0 0 0 0 0c4.7-6.4 9-12.4 12.7-17.7zM176 128c-26.5 0-48 21.5-48 48c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-44.2 35.8-80 80-80c8.8 0 16 7.2 16 16s-7.2 16-16 16zm0 384c-44.2 0-80-35.8-80-80V416H256v16c0 44.2-35.8 80-80 80z"]},See={prefix:"far",iconName:"square-check",icon:[448,512,[9745,9989,61510,"check-square"],"f14a","M211.8 339.8C200.9 350.7 183.1 350.7 172.2 339.8L108.2 275.8C97.27 264.9 97.27 247.1 108.2 236.2C119.1 225.3 136.9 225.3 147.8 236.2L192 280.4L300.2 172.2C311.1 161.3 328.9 161.3 339.8 172.2C350.7 183.1 350.7 200.9 339.8 211.8L211.8 339.8zM0 96C0 60.65 28.65 32 64 32H384C419.3 32 448 60.65 448 96V416C448 451.3 419.3 480 384 480H64C28.65 480 0 451.3 0 416V96zM48 96V416C48 424.8 55.16 432 64 432H384C392.8 432 400 424.8 400 416V96C400 87.16 392.8 80 384 80H64C55.16 80 48 87.16 48 96z"]},Xd=See,Qd={prefix:"far",iconName:"square",icon:[448,512,[9632,9723,9724,61590],"f0c8","M384 32C419.3 32 448 60.65 448 96V416C448 451.3 419.3 480 384 480H64C28.65 480 0 451.3 0 416V96C0 60.65 28.65 32 64 32H384zM384 80H64C55.16 80 48 87.16 48 96V416C48 424.8 55.16 432 64 432H384C392.8 432 400 424.8 400 416V96C400 87.16 392.8 80 384 80z"]},Eee={prefix:"far",iconName:"clock",icon:[512,512,[128339,"clock-four"],"f017","M464 256A208 208 0 1 1 48 256a208 208 0 1 1 416 0zM0 256a256 256 0 1 0 512 0A256 256 0 1 0 0 256zM232 120V256c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2V120c0-13.3-10.7-24-24-24s-24 10.7-24 24z"]};function Aee(n){let e,t,i,s,r,o,l;return t=new qt({props:{data:eb}}),{c(){e=C("button"),Te(t.$$.fragment),i=z(" Edit value"),this.h()},l(a){e=k(a,"BUTTON",{type:!0,slot:!0,title:!0,class:!0});var c=T(e);De(t.$$.fragment,c),i=G(c," Edit value"),c.forEach(b),this.h()},h(){S(e,"type","button"),S(e,"slot","defaultItem"),S(e,"title","Edit the value (Double-click on the value)"),e.disabled=s=!n[2],S(e,"class","svelte-1jwirqu")},m(a,c){X(a,e,c),Oe(t,e,null),p(e,i),r=!0,o||(l=Se(e,"click",n[18]),o=!0)},p(a,c){(!r||c[0]&4&&s!==(s=!a[2]))&&(e.disabled=s)},i(a){r||(B(t.$$.fragment,a),r=!0)},o(a){Q(t.$$.fragment,a),r=!1},d(a){a&&b(e),Re(t),o=!1,l()}}}function wee(n){let e,t,i,s,r,o,l;return t=new qt({props:{data:C1}}),{c(){e=C("button"),Te(t.$$.fragment),i=z(" Cut"),this.h()},l(a){e=k(a,"BUTTON",{type:!0,slot:!0,title:!0,class:!0});var c=T(e);De(t.$$.fragment,c),i=G(c," Cut"),c.forEach(b),this.h()},h(){S(e,"type","button"),S(e,"slot","defaultItem"),S(e,"title","Cut selected contents, formatted with indentation (Ctrl+X)"),e.disabled=s=!n[1],S(e,"class","svelte-1jwirqu")},m(a,c){X(a,e,c),Oe(t,e,null),p(e,i),r=!0,o||(l=Se(e,"click",n[19]),o=!0)},p(a,c){(!r||c[0]&2&&s!==(s=!a[1]))&&(e.disabled=s)},i(a){r||(B(t.$$.fragment,a),r=!0)},o(a){Q(t.$$.fragment,a),r=!1},d(a){a&&b(e),Re(t),o=!1,l()}}}function Cee(n){let e,t,i,s,r,o,l;return t=new qt({props:{data:Mu}}),{c(){e=C("button"),Te(t.$$.fragment),i=z(" Copy"),this.h()},l(a){e=k(a,"BUTTON",{type:!0,slot:!0,title:!0,class:!0});var c=T(e);De(t.$$.fragment,c),i=G(c," Copy"),c.forEach(b),this.h()},h(){S(e,"type","button"),S(e,"slot","defaultItem"),S(e,"title","Copy selected contents, formatted with indentation (Ctrl+C)"),e.disabled=s=!n[1],S(e,"class","svelte-1jwirqu")},m(a,c){X(a,e,c),Oe(t,e,null),p(e,i),r=!0,o||(l=Se(e,"click",n[20]),o=!0)},p(a,c){(!r||c[0]&2&&s!==(s=!a[1]))&&(e.disabled=s)},i(a){r||(B(t.$$.fragment,a),r=!0)},o(a){Q(t.$$.fragment,a),r=!1},d(a){a&&b(e),Re(t),o=!1,l()}}}function qw(n){let e,t,i,s,r,o,l,a;return s=new qt({props:{data:yee}}),{c(){e=C("div"),t=C("div"),i=C("div"),Te(s.$$.fragment),r=F(),o=C("div"),l=z("Tip: you can open this context menu via right-click or with Ctrl+Q"),this.h()},l(c){e=k(c,"DIV",{class:!0});var u=T(e);t=k(u,"DIV",{class:!0});var f=T(t);i=k(f,"DIV",{class:!0});var h=T(i);De(s.$$.fragment,h),h.forEach(b),r=j(f),o=k(f,"DIV",{class:!0});var d=T(o);l=G(d,"Tip: you can open this context menu via right-click or with Ctrl+Q"),d.forEach(b),f.forEach(b),u.forEach(b),this.h()},h(){S(i,"class","svelte-1jwirqu"),S(o,"class","svelte-1jwirqu"),S(t,"class","jse-tip svelte-1jwirqu"),S(e,"class","jse-row svelte-1jwirqu")},m(c,u){X(c,e,u),p(e,t),p(t,i),Oe(s,i,null),p(t,r),p(t,o),p(o,l),a=!0},p:Xe,i(c){a||(B(s.$$.fragment,c),a=!0)},o(c){Q(s.$$.fragment,c),a=!1},d(c){c&&b(e),Re(s)}}}function kee(n){let e,t,i,s,r,o,l,a,c,u,f,h,d,m,g,_,v,y,E,w,A,I,R,D,N,W,H,P,Y,O,L,U,K,te,q,x,Z,V,ce,pe,oe,ve,Ne,J,Ie,Ue,re,Le,fe,M,ae,de,$,ee,ie,me,ue,se,_e="+",ke,Ce,ge,Me,Ee,Pe,be,nt="{}",Fe,we,lt,je,Qe,ye,Ze,Lt,vt,Ct,Ot,en,tn,rn,cn,dt,Un,kn,Wn,In,En,li,ze,St,Gt,pn,gn,Jt,it,Pt,gi,Ii,Ls,sn,Os,Xs;s=new qt({props:{data:eb}}),a=new fg({props:{width:"11em",items:n[8],$$slots:{defaultItem:[Aee]},$$scope:{ctx:n}}}),d=new fg({props:{width:"10em",items:n[7],$$slots:{defaultItem:[wee]},$$scope:{ctx:n}}}),g=new fg({props:{width:"12em",items:n[6],$$slots:{defaultItem:[Cee]},$$scope:{ctx:n}}}),y=new qt({props:{data:zz}}),H=new qt({props:{data:_f}}),U=new qt({props:{data:hG}}),Z=new qt({props:{data:nG}}),ve=new qt({props:{data:tb}}),re=new qt({props:{data:xv}}),Gt=new qt({props:{data:xz}}),Pt=new qt({props:{data:Qz}});let An=n[0]&&qw();return{c(){e=C("div"),t=C("div"),i=C("button"),Te(s.$$.fragment),r=z(" Edit key"),l=F(),Te(a.$$.fragment),c=F(),u=C("div"),f=F(),h=C("div"),Te(d.$$.fragment),m=F(),Te(g.$$.fragment),_=F(),v=C("button"),Te(y.$$.fragment),E=z(" Paste"),A=F(),I=C("div"),R=F(),D=C("div"),N=C("div"),W=C("button"),Te(H.$$.fragment),P=z(" Remove"),O=F(),L=C("button"),Te(U.$$.fragment),K=z(" Duplicate"),q=F(),x=C("button"),Te(Z.$$.fragment),V=z(" Extract"),pe=F(),oe=C("button"),Te(ve.$$.fragment),Ne=z(" Sort"),Ie=F(),Ue=C("button"),Te(re.$$.fragment),Le=z(" Transform"),M=F(),ae=C("div"),de=C("div"),$=z(n[13]),ee=z(":"),ie=F(),me=C("button"),ue=C("span"),se=C("span"),ke=z(_e),Ce=z(" Structure"),Ee=F(),Pe=C("button"),be=C("span"),Fe=z(nt),we=z(" Object"),Qe=F(),ye=C("button"),Ze=C("span"),Lt=z("[]"),vt=z(" Array"),en=F(),tn=C("button"),rn=C("span"),cn=C("span"),dt=z('"'),Un=z(" Value"),In=F(),En=C("div"),li=F(),ze=C("div"),St=C("button"),Te(Gt.$$.fragment),pn=z(" Insert before"),Jt=F(),it=C("button"),Te(Pt.$$.fragment),gi=z(" Insert after"),Ls=F(),An&&An.c(),this.h()},l(bt){e=k(bt,"DIV",{class:!0});var he=T(e);t=k(he,"DIV",{class:!0});var _t=T(t);i=k(_t,"BUTTON",{type:!0,title:!0,class:!0});var Zt=T(i);De(s.$$.fragment,Zt),r=G(Zt," Edit key"),Zt.forEach(b),l=j(_t),De(a.$$.fragment,_t),_t.forEach(b),c=j(he),u=k(he,"DIV",{class:!0}),T(u).forEach(b),f=j(he),h=k(he,"DIV",{class:!0});var Et=T(h);De(d.$$.fragment,Et),m=j(Et),De(g.$$.fragment,Et),_=j(Et),v=k(Et,"BUTTON",{type:!0,title:!0,class:!0});var jt=T(v);De(y.$$.fragment,jt),E=G(jt," Paste"),jt.forEach(b),Et.forEach(b),A=j(he),I=k(he,"DIV",{class:!0}),T(I).forEach(b),R=j(he),D=k(he,"DIV",{class:!0});var Pn=T(D);N=k(Pn,"DIV",{class:!0});var Vn=T(N);W=k(Vn,"BUTTON",{type:!0,title:!0,class:!0});var ai=T(W);De(H.$$.fragment,ai),P=G(ai," Remove"),ai.forEach(b),O=j(Vn),L=k(Vn,"BUTTON",{type:!0,title:!0,class:!0});var Rs=T(L);De(U.$$.fragment,Rs),K=G(Rs," Duplicate"),Rs.forEach(b),q=j(Vn),x=k(Vn,"BUTTON",{type:!0,title:!0,class:!0});var Hi=T(x);De(Z.$$.fragment,Hi),V=G(Hi," Extract"),Hi.forEach(b),pe=j(Vn),oe=k(Vn,"BUTTON",{type:!0,title:!0,class:!0});var Fn=T(oe);De(ve.$$.fragment,Fn),Ne=G(Fn," Sort"),Fn.forEach(b),Ie=j(Vn),Ue=k(Vn,"BUTTON",{type:!0,title:!0,class:!0});var Zr=T(Ue);De(re.$$.fragment,Zr),Le=G(Zr," Transform"),Zr.forEach(b),Vn.forEach(b),M=j(Pn),ae=k(Pn,"DIV",{class:!0});var bs=T(ae);de=k(bs,"DIV",{class:!0});var Ti=T(de);$=G(Ti,n[13]),ee=G(Ti,":"),Ti.forEach(b),ie=j(bs),me=k(bs,"BUTTON",{type:!0,title:!0,class:!0});var ar=T(me);ue=k(ar,"SPAN",{class:!0});var ll=T(ue);se=k(ll,"SPAN",{class:!0});var cr=T(se);ke=G(cr,_e),cr.forEach(b),ll.forEach(b),Ce=G(ar," Structure"),ar.forEach(b),Ee=j(bs),Pe=k(bs,"BUTTON",{type:!0,title:!0,class:!0});var Cr=T(Pe);be=k(Cr,"SPAN",{class:!0});var al=T(be);Fe=G(al,nt),al.forEach(b),we=G(Cr," Object"),Cr.forEach(b),Qe=j(bs),ye=k(bs,"BUTTON",{type:!0,title:!0,class:!0});var wc=T(ye);Ze=k(wc,"SPAN",{class:!0});var Rf=T(Ze);Lt=G(Rf,"[]"),Rf.forEach(b),vt=G(wc," Array"),wc.forEach(b),en=j(bs),tn=k(bs,"BUTTON",{type:!0,title:!0,class:!0});var Cc=T(tn);rn=k(Cc,"SPAN",{class:!0});var Ao=T(rn);cn=k(Ao,"SPAN",{class:!0});var cl=T(cn);dt=G(cl,'"'),cl.forEach(b),Ao.forEach(b),Un=G(Cc," Value"),Cc.forEach(b),bs.forEach(b),Pn.forEach(b),In=j(he),En=k(he,"DIV",{class:!0}),T(En).forEach(b),li=j(he),ze=k(he,"DIV",{class:!0});var ca=T(ze);St=k(ca,"BUTTON",{type:!0,title:!0,class:!0});var kc=T(St);De(Gt.$$.fragment,kc),pn=G(kc," Insert before"),kc.forEach(b),Jt=j(ca),it=k(ca,"BUTTON",{type:!0,title:!0,class:!0});var Ic=T(it);De(Pt.$$.fragment,Ic),gi=G(Ic," Insert after"),Ic.forEach(b),ca.forEach(b),Ls=j(he),An&&An.l(he),he.forEach(b),this.h()},h(){S(i,"type","button"),S(i,"title","Edit the key (Double-click on the key)"),i.disabled=o=!n[14],S(i,"class","svelte-1jwirqu"),S(t,"class","jse-row svelte-1jwirqu"),S(u,"class","jse-separator svelte-1jwirqu"),S(v,"type","button"),S(v,"title","Paste clipboard contents (Ctrl+V)"),v.disabled=w=!n[3],S(v,"class","svelte-1jwirqu"),S(h,"class","jse-row svelte-1jwirqu"),S(I,"class","jse-separator svelte-1jwirqu"),S(W,"type","button"),S(W,"title","Remove selected contents (Delete)"),W.disabled=Y=!n[1],S(W,"class","svelte-1jwirqu"),S(L,"type","button"),S(L,"title","Duplicate selected contents (Ctrl+D)"),L.disabled=te=!n[16],S(L,"class","svelte-1jwirqu"),S(x,"type","button"),S(x,"title","Extract selected contents"),x.disabled=ce=!n[15],S(x,"class","svelte-1jwirqu"),S(oe,"type","button"),S(oe,"title","Sort array or object contents"),oe.disabled=J=!n[1],S(oe,"class","svelte-1jwirqu"),S(Ue,"type","button"),S(Ue,"title","Transform array or object contents (filter, sort, project)"),Ue.disabled=fe=!n[1],S(Ue,"class","svelte-1jwirqu"),S(N,"class","jse-column svelte-1jwirqu"),S(de,"class","jse-label svelte-1jwirqu"),S(se,"class","jse-plus svelte-1jwirqu"),S(ue,"class","jse-insert svelte-1jwirqu"),S(me,"type","button"),S(me,"title",ge=n[13]+" structure"),me.disabled=Me=!n[12],S(me,"class","svelte-1jwirqu"),S(be,"class","jse-insert svelte-1jwirqu"),S(Pe,"type","button"),S(Pe,"title",lt=n[13]+" object"),Pe.disabled=je=!n[11],S(Pe,"class","svelte-1jwirqu"),S(Ze,"class","jse-insert svelte-1jwirqu"),S(ye,"type","button"),S(ye,"title",Ct=n[13]+" array"),ye.disabled=Ot=!n[10],S(ye,"class","svelte-1jwirqu"),S(cn,"class","jse-quote svelte-1jwirqu"),S(rn,"class","jse-insert svelte-1jwirqu"),S(tn,"type","button"),S(tn,"title",kn=n[13]+" value"),tn.disabled=Wn=!n[9],S(tn,"class","svelte-1jwirqu"),S(ae,"class","jse-column svelte-1jwirqu"),S(D,"class","jse-row svelte-1jwirqu"),S(En,"class","jse-separator svelte-1jwirqu"),S(St,"type","button"),S(St,"title","Select area before current entry to insert or paste contents"),St.disabled=gn=!n[1]||n[4],S(St,"class","svelte-1jwirqu"),S(it,"type","button"),S(it,"title","Select area after current entry to insert or paste contents"),it.disabled=Ii=!n[1]||n[4],S(it,"class","svelte-1jwirqu"),S(ze,"class","jse-row svelte-1jwirqu"),S(e,"class","jse-contextmenu svelte-1jwirqu")},m(bt,he){X(bt,e,he),p(e,t),p(t,i),Oe(s,i,null),p(i,r),p(t,l),Oe(a,t,null),p(e,c),p(e,u),p(e,f),p(e,h),Oe(d,h,null),p(h,m),Oe(g,h,null),p(h,_),p(h,v),Oe(y,v,null),p(v,E),p(e,A),p(e,I),p(e,R),p(e,D),p(D,N),p(N,W),Oe(H,W,null),p(W,P),p(N,O),p(N,L),Oe(U,L,null),p(L,K),p(N,q),p(N,x),Oe(Z,x,null),p(x,V),p(N,pe),p(N,oe),Oe(ve,oe,null),p(oe,Ne),p(N,Ie),p(N,Ue),Oe(re,Ue,null),p(Ue,Le),p(D,M),p(D,ae),p(ae,de),p(de,$),p(de,ee),p(ae,ie),p(ae,me),p(me,ue),p(ue,se),p(se,ke),p(me,Ce),p(ae,Ee),p(ae,Pe),p(Pe,be),p(be,Fe),p(Pe,we),p(ae,Qe),p(ae,ye),p(ye,Ze),p(Ze,Lt),p(ye,vt),p(ae,en),p(ae,tn),p(tn,rn),p(rn,cn),p(cn,dt),p(tn,Un),p(e,In),p(e,En),p(e,li),p(e,ze),p(ze,St),Oe(Gt,St,null),p(St,pn),p(ze,Jt),p(ze,it),Oe(Pt,it,null),p(it,gi),p(e,Ls),An&&An.m(e,null),n[59](e),sn=!0,Os||(Xs=[Se(i,"click",n[17]),Se(v,"click",n[21]),Se(W,"click",n[22]),Se(L,"click",n[23]),Se(x,"click",n[24]),Se(oe,"click",n[26]),Se(Ue,"click",n[27]),Se(me,"click",n[55]),Se(Pe,"click",n[56]),Se(ye,"click",n[57]),Se(tn,"click",n[58]),Se(St,"click",n[28]),Se(it,"click",n[29]),Se(e,"keydown",n[30])],Os=!0)},p(bt,he){(!sn||he[0]&16384&&o!==(o=!bt[14]))&&(i.disabled=o);const _t={};he[0]&256&&(_t.items=bt[8]),he[0]&4|he[2]&2&&(_t.$$scope={dirty:he,ctx:bt}),a.$set(_t);const Zt={};he[0]&128&&(Zt.items=bt[7]),he[0]&2|he[2]&2&&(Zt.$$scope={dirty:he,ctx:bt}),d.$set(Zt);const Et={};he[0]&64&&(Et.items=bt[6]),he[0]&2|he[2]&2&&(Et.$$scope={dirty:he,ctx:bt}),g.$set(Et),(!sn||he[0]&8&&w!==(w=!bt[3]))&&(v.disabled=w),(!sn||he[0]&2&&Y!==(Y=!bt[1]))&&(W.disabled=Y),(!sn||he[0]&65536&&te!==(te=!bt[16]))&&(L.disabled=te),(!sn||he[0]&32768&&ce!==(ce=!bt[15]))&&(x.disabled=ce),(!sn||he[0]&2&&J!==(J=!bt[1]))&&(oe.disabled=J),(!sn||he[0]&2&&fe!==(fe=!bt[1]))&&(Ue.disabled=fe),(!sn||he[0]&8192)&&Be($,bt[13]),(!sn||he[0]&8192&&ge!==(ge=bt[13]+" structure"))&&S(me,"title",ge),(!sn||he[0]&4096&&Me!==(Me=!bt[12]))&&(me.disabled=Me),(!sn||he[0]&8192&&lt!==(lt=bt[13]+" object"))&&S(Pe,"title",lt),(!sn||he[0]&2048&&je!==(je=!bt[11]))&&(Pe.disabled=je),(!sn||he[0]&8192&&Ct!==(Ct=bt[13]+" array"))&&S(ye,"title",Ct),(!sn||he[0]&1024&&Ot!==(Ot=!bt[10]))&&(ye.disabled=Ot),(!sn||he[0]&8192&&kn!==(kn=bt[13]+" value"))&&S(tn,"title",kn),(!sn||he[0]&512&&Wn!==(Wn=!bt[9]))&&(tn.disabled=Wn),(!sn||he[0]&18&&gn!==(gn=!bt[1]||bt[4]))&&(St.disabled=gn),(!sn||he[0]&18&&Ii!==(Ii=!bt[1]||bt[4]))&&(it.disabled=Ii),bt[0]?An?(An.p(bt,he),he[0]&1&&B(An,1)):(An=qw(),An.c(),B(An,1),An.m(e,null)):An&&(He(),Q(An,1,1,()=>{An=null}),qe())},i(bt){sn||(B(s.$$.fragment,bt),B(a.$$.fragment,bt),B(d.$$.fragment,bt),B(g.$$.fragment,bt),B(y.$$.fragment,bt),B(H.$$.fragment,bt),B(U.$$.fragment,bt),B(Z.$$.fragment,bt),B(ve.$$.fragment,bt),B(re.$$.fragment,bt),B(Gt.$$.fragment,bt),B(Pt.$$.fragment,bt),B(An),sn=!0)},o(bt){Q(s.$$.fragment,bt),Q(a.$$.fragment,bt),Q(d.$$.fragment,bt),Q(g.$$.fragment,bt),Q(y.$$.fragment,bt),Q(H.$$.fragment,bt),Q(U.$$.fragment,bt),Q(Z.$$.fragment,bt),Q(ve.$$.fragment,bt),Q(re.$$.fragment,bt),Q(Gt.$$.fragment,bt),Q(Pt.$$.fragment,bt),Q(An),sn=!1},d(bt){bt&&b(e),Re(s),Re(a),Re(d),Re(g),Re(y),Re(H),Re(U),Re(Z),Re(ve),Re(re),Re(Gt),Re(Pt),An&&An.d(),n[59](null),Os=!1,an(Xs)}}}function Iee(n,e,t){let i,s,r,o,l,a,c,u,f,h,d,m,g,_,v,y,E,w,A,I,{json:R}=e,{documentState:D}=e,{parser:N}=e,{showTip:W}=e,{onCloseContextMenu:H}=e,{onEditKey:P}=e,{onEditValue:Y}=e,{onToggleEnforceString:O}=e,{onCut:L}=e,{onCopy:U}=e,{onPaste:K}=e,{onRemove:te}=e,{onDuplicate:q}=e,{onExtract:x}=e,{onInsertBefore:Z}=e,{onInsert:V}=e,{onConvert:ce}=e,{onInsertAfter:pe}=e,{onSort:oe}=e,{onTransform:ve}=e,Ne;Mi(()=>{setTimeout(()=>{const be=[...Ne.querySelectorAll("button")].find(nt=>!nt.disabled);be&&be.focus()})});function J(){H(),P()}function Ie(){H(),Y()}function Ue(){H(),O()}function re(){H(),L(!0)}function Le(){H(),L(!1)}function fe(){H(),U(!0)}function M(){H(),U(!1)}function ae(){H(),K()}function de(){H(),te()}function $(){H(),q()}function ee(){H(),x()}function ie(be){H(),a?ce(be):V(be)}function me(){H(),oe()}function ue(){H(),ve()}function se(){H(),Z()}function _e(){H(),pe()}function ke(be){const nt=ia(be).replace(/^Command\+/,"Ctrl+");if(nt==="Up"||nt==="Down"||nt==="Left"||nt==="Right"){be.preventDefault();const Fe=Array.from(Ne.querySelectorAll("button:not([disabled])")),we=Nz({allElements:Fe,currentElement:be.target,direction:nt,hasPrio:lt=>lt.getAttribute("data-type")!=="jse-open-dropdown"});we&&we.focus()}}const Ce=()=>ie("structure"),ge=()=>ie("object"),Me=()=>ie("array"),Ee=()=>ie("value");function Pe(be){Vt[be?"unshift":"push"](()=>{Ne=be,t(5,Ne)})}return n.$$set=be=>{"json"in be&&t(31,R=be.json),"documentState"in be&&t(32,D=be.documentState),"parser"in be&&t(33,N=be.parser),"showTip"in be&&t(0,W=be.showTip),"onCloseContextMenu"in be&&t(34,H=be.onCloseContextMenu),"onEditKey"in be&&t(35,P=be.onEditKey),"onEditValue"in be&&t(36,Y=be.onEditValue),"onToggleEnforceString"in be&&t(37,O=be.onToggleEnforceString),"onCut"in be&&t(38,L=be.onCut),"onCopy"in be&&t(39,U=be.onCopy),"onPaste"in be&&t(40,K=be.onPaste),"onRemove"in be&&t(41,te=be.onRemove),"onDuplicate"in be&&t(42,q=be.onDuplicate),"onExtract"in be&&t(43,x=be.onExtract),"onInsertBefore"in be&&t(44,Z=be.onInsertBefore),"onInsert"in be&&t(45,V=be.onInsert),"onConvert"in be&&t(46,ce=be.onConvert),"onInsertAfter"in be&&t(47,pe=be.onInsertAfter),"onSort"in be&&t(48,oe=be.onSort),"onTransform"in be&&t(49,ve=be.onTransform)},n.$$.update=()=>{n.$$.dirty[1]&2&&t(51,i=D.selection),n.$$.dirty[1]&1&&t(54,s=R!==void 0),n.$$.dirty[1]&1048576&&t(3,r=i!=null),n.$$.dirty[0]&8|n.$$.dirty[1]&1048576&&t(4,o=r&&si(i.focusPath)),n.$$.dirty[0]&8|n.$$.dirty[1]&1048577&&t(52,l=r?wt(R,i.focusPath):void 0),n.$$.dirty[1]&9437184&&t(1,a=s&&(Sn(i)||hi(i)||yn(i))),n.$$.dirty[0]&18|n.$$.dirty[1]&8388608&&t(16,c=s&&a&&!o),n.$$.dirty[0]&16|n.$$.dirty[1]&9437184&&t(15,u=s&&i!=null&&(Sn(i)||yn(i))&&!o),n.$$.dirty[0]&16|n.$$.dirty[1]&9437185&&t(14,f=s&&i!=null&&y0(i)&&!o&&!Array.isArray(wt(R,bn(i.focusPath)))),n.$$.dirty[1]&11534336&&t(2,h=s&&i!=null&&y0(i)&&!Ri(l)),n.$$.dirty[0]&2&&t(53,d=a),n.$$.dirty[1]&4194304&&t(13,m=d?"Convert to":"Insert"),n.$$.dirty[0]&8|n.$$.dirty[1]&4194304&&t(12,g=d?!1:r),n.$$.dirty[0]&8|n.$$.dirty[1]&7340032&&t(11,_=d?Ph(i)&&!Fi(l):r),n.$$.dirty[0]&8|n.$$.dirty[1]&7340032&&t(10,v=d?Ph(i)&&!Array.isArray(l):r),n.$$.dirty[0]&8|n.$$.dirty[1]&7340032&&t(9,y=d?Ph(i)&&Ri(l):r),n.$$.dirty[1]&3145734&&t(50,E=i!=null?kf(l,D.enforceStringMap,mt(i.focusPath),N):!1),n.$$.dirty[0]&4|n.$$.dirty[1]&524288&&t(8,w=[{icon:eb,text:"Edit value",title:"Edit the value (Double-click on the value)",onClick:Ie,disabled:!h},{icon:E?Xd:Qd,text:"Enforce string",title:"Enforce keeping the value as string when it contains a numeric value",onClick:Ue,disabled:!h}]),n.$$.dirty[0]&2&&t(7,A=[{icon:C1,text:"Cut formatted",title:"Cut selected contents, formatted with indentation (Ctrl+X)",onClick:re,disabled:!a},{icon:C1,text:"Cut compacted",title:"Cut selected contents, without indentation (Ctrl+Shift+X)",onClick:Le,disabled:!a}]),n.$$.dirty[0]&2&&t(6,I=[{icon:Mu,text:"Copy formatted",title:"Copy selected contents, formatted with indentation (Ctrl+C)",onClick:fe,disabled:!a},{icon:Mu,text:"Copy compacted",title:"Copy selected contents, without indentation (Ctrl+Shift+C)",onClick:M,disabled:!a}])},[W,a,h,r,o,Ne,I,A,w,y,v,_,g,m,f,u,c,J,Ie,re,fe,ae,de,$,ee,ie,me,ue,se,_e,ke,R,D,N,H,P,Y,O,L,U,K,te,q,x,Z,V,ce,pe,oe,ve,E,i,l,d,s,Ce,ge,Me,Ee,Pe]}class Tee extends rt{constructor(e){super(),ot(this,e,Iee,kee,fn,{json:31,documentState:32,parser:33,showTip:0,onCloseContextMenu:34,onEditKey:35,onEditValue:36,onToggleEnforceString:37,onCut:38,onCopy:39,onPaste:40,onRemove:41,onDuplicate:42,onExtract:43,onInsertBefore:44,onInsert:45,onConvert:46,onInsertAfter:47,onSort:48,onTransform:49},null,[-1,-1,-1])}}const Oee=Tee;var w0={},Ree={get exports(){return w0},set exports(n){w0=n}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(n){(function(){var e={}.hasOwnProperty;function t(){for(var i=[],s=0;s<arguments.length;s++){var r=arguments[s];if(r){var o=typeof r;if(o==="string"||o==="number")i.push(r);else if(Array.isArray(r)){if(r.length){var l=t.apply(null,r);l&&i.push(l)}}else if(o==="object"){if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]")){i.push(r.toString());continue}for(var a in r)e.call(r,a)&&r[a]&&i.push(a)}}}return i.join(" ")}n.exports?(t.default=t,n.exports=t):window.classNames=t})()})(Ree);const lc=w0;function zw(n,e,t){const i=n.slice();return i[13]=e[t],i}function Gw(n){let e,t,i=n[13].start+"",s,r,o=n[13].end+"",l,a,c,u;function f(){return n[12](n[13])}return{c(){e=C("button"),t=z("show "),s=z(i),r=z("-"),l=z(o),a=F(),this.h()},l(h){e=k(h,"BUTTON",{type:!0,class:!0});var d=T(e);t=G(d,"show "),s=G(d,i),r=G(d,"-"),l=G(d,o),a=j(d),d.forEach(b),this.h()},h(){S(e,"type","button"),S(e,"class","jse-expand-items svelte-a94vy2")},m(h,d){X(h,e,d),p(e,t),p(e,s),p(e,r),p(e,l),p(e,a),c||(u=Se(e,"click",f),c=!0)},p(h,d){n=h,d&16&&i!==(i=n[13].start+"")&&Be(s,i),d&16&&o!==(o=n[13].end+"")&&Be(l,o)},d(h){h&&b(e),c=!1,u()}}}function Dee(n){let e,t,i,s,r,o,l,a,c,u,f,h=n[4],d=[];for(let m=0;m<h.length;m+=1)d[m]=Gw(zw(n,h,m));return{c(){e=C("div"),t=C("div"),i=C("div"),s=z("Items "),r=z(n[3]),o=z("-"),l=z(n[2]),a=F();for(let m=0;m<d.length;m+=1)d[m].c();this.h()},l(m){e=k(m,"DIV",{class:!0,style:!0});var g=T(e);t=k(g,"DIV",{});var _=T(t);i=k(_,"DIV",{class:!0});var v=T(i);s=G(v,"Items "),r=G(v,n[3]),o=G(v,"-"),l=G(v,n[2]),v.forEach(b),a=j(_);for(let y=0;y<d.length;y+=1)d[y].l(_);_.forEach(b),g.forEach(b),this.h()},h(){S(i,"class","jse-text svelte-a94vy2"),S(e,"class","jse-collapsed-items svelte-a94vy2"),S(e,"style",c=Kw(n[0].length+2)),$e(e,"jse-selected",n[5])},m(m,g){X(m,e,g),p(e,t),p(t,i),p(i,s),p(i,r),p(i,o),p(i,l),p(t,a);for(let _=0;_<d.length;_+=1)d[_].m(t,null);u||(f=Se(e,"mousemove",Nee),u=!0)},p(m,[g]){if(g&8&&Be(r,m[3]),g&4&&Be(l,m[2]),g&19){h=m[4];let _;for(_=0;_<h.length;_+=1){const v=zw(m,h,_);d[_]?d[_].p(v,g):(d[_]=Gw(v),d[_].c(),d[_].m(t,null))}for(;_<d.length;_+=1)d[_].d(1);d.length=h.length}g&1&&c!==(c=Kw(m[0].length+2))&&S(e,"style",c),g&32&&$e(e,"jse-selected",m[5])},i:Xe,o:Xe,d(m){m&&b(e),Ht(d,m),u=!1,f()}}}function Kw(n){return`margin-left: calc(${n} * var(--jse-indent-size))`}function Nee(n){n.stopPropagation()}function Pee(n,e,t){let i,s,r,o,l,{visibleSections:a}=e,{sectionIndex:c}=e,{total:u}=e,{path:f}=e,{pointer:h}=e,{selection:d}=e,{onExpandSection:m}=e;const g=_=>m(f,_);return n.$$set=_=>{"visibleSections"in _&&t(6,a=_.visibleSections),"sectionIndex"in _&&t(7,c=_.sectionIndex),"total"in _&&t(8,u=_.total),"path"in _&&t(0,f=_.path),"pointer"in _&&t(9,h=_.pointer),"selection"in _&&t(10,d=_.selection),"onExpandSection"in _&&t(1,m=_.onExpandSection)},n.$$.update=()=>{n.$$.dirty&192&&t(11,i=a[c]),n.$$.dirty&2048&&t(3,s=i.end),n.$$.dirty&448&&t(2,r=a[c+1]?a[c+1].start:u),n.$$.dirty&1544&&t(5,o=Sn(d)?d.pointersMap[a1(h,s)]===!0:!1),n.$$.dirty&12&&t(4,l=v$(s,r))},[f,m,r,s,l,o,a,c,u,h,d,i,g]}class Mee extends rt{constructor(e){super(),ot(this,e,Pee,Dee,fn,{visibleSections:6,sectionIndex:7,total:8,path:0,pointer:9,selection:10,onExpandSection:1})}}const Bee=Mee;function Lee(n){let e,t,i,s,r;return t=new qt({props:{data:Br}}),{c(){e=C("button"),Te(t.$$.fragment),this.h()},l(o){e=k(o,"BUTTON",{type:!0,class:!0,title:!0});var l=T(e);De(t.$$.fragment,l),l.forEach(b),this.h()},h(){S(e,"type","button"),S(e,"class","jse-context-menu-button svelte-1lm9yxm"),S(e,"title",sO),$e(e,"jse-selected",n[0])},m(o,l){X(o,e,l),Oe(t,e,null),i=!0,s||(r=Se(e,"click",n[1]),s=!0)},p(o,[l]){(!i||l&1)&&$e(e,"jse-selected",o[0])},i(o){i||(B(t.$$.fragment,o),i=!0)},o(o){Q(t.$$.fragment,o),i=!1},d(o){o&&b(e),Re(t),s=!1,r()}}}function Wee(n,e,t){let{selected:i}=e,{onContextMenu:s}=e;function r(o){let l=o.target;for(;l&&l.nodeName!=="BUTTON";)l=l.parentNode;l&&s({anchor:l,left:0,top:0,width:qc,height:Hc,offsetTop:2,offsetLeft:0,showTip:!0})}return n.$$set=o=>{"selected"in o&&t(0,i=o.selected),"onContextMenu"in o&&t(2,s=o.onContextMenu)},[i,r,s]}class Uee extends rt{constructor(e){super(),ot(this,e,Wee,Lee,fn,{selected:0,onContextMenu:2})}}const la=Uee;function Xw(n,e,t){const i=n.slice();return i[3]=e[t],i}function Vee(n){let e,t=Gl(n[3].text)+"",i;return{c(){e=C("span"),i=z(t),this.h()},l(s){e=k(s,"SPAN",{class:!0});var r=T(e);i=G(r,t),r.forEach(b),this.h()},h(){S(e,"class","jse-highlight svelte-mtessu"),$e(e,"jse-active",n[3].active)},m(s,r){X(s,e,r),p(e,i)},p(s,r){r&1&&t!==(t=Gl(s[3].text)+"")&&Be(i,t),r&1&&$e(e,"jse-active",s[3].active)},d(s){s&&b(e)}}}function Fee(n){let e=n[3].text+"",t;return{c(){t=z(e)},l(i){t=G(i,e)},m(i,s){X(i,t,s)},p(i,s){s&1&&e!==(e=i[3].text+"")&&Be(t,e)},d(i){i&&b(t)}}}function Qw(n){let e;function t(r,o){return r[3].type==="normal"?Fee:Vee}let i=t(n),s=i(n);return{c(){s.c(),e=tt()},l(r){s.l(r),e=tt()},m(r,o){s.m(r,o),X(r,e,o)},p(r,o){i===(i=t(r))&&s?s.p(r,o):(s.d(1),s=i(r),s&&(s.c(),s.m(e.parentNode,e)))},d(r){s.d(r),r&&b(e)}}}function jee(n){let e,t=n[0],i=[];for(let s=0;s<t.length;s+=1)i[s]=Qw(Xw(n,t,s));return{c(){for(let s=0;s<i.length;s+=1)i[s].c();e=tt()},l(s){for(let r=0;r<i.length;r+=1)i[r].l(s);e=tt()},m(s,r){for(let o=0;o<i.length;o+=1)i[o].m(s,r);X(s,e,r)},p(s,[r]){if(r&1){t=s[0];let o;for(o=0;o<t.length;o+=1){const l=Xw(s,t,o);i[o]?i[o].p(l,r):(i[o]=Qw(l),i[o].c(),i[o].m(e.parentNode,e))}for(;o<i.length;o+=1)i[o].d(1);i.length=t.length}},i:Xe,o:Xe,d(s){Ht(i,s),s&&b(e)}}}function Hee(n,e,t){let i,{text:s}=e,{searchResultItems:r}=e;return n.$$set=o=>{"text"in o&&t(1,s=o.text),"searchResultItems"in o&&t(2,r=o.searchResultItems)},n.$$.update=()=>{n.$$.dirty&6&&t(0,i=J$(String(s),r))},[i,s,r]}class qee extends rt{constructor(e){super(),ot(this,e,Hee,jee,It,{text:1,searchResultItems:2})}}const IN=qee;function zee(n){let e,t,i,s;return{c(){e=C("div"),this.h()},l(r){e=k(r,"DIV",{class:!0,contenteditable:!0,spellcheck:!0}),T(e).forEach(b),this.h()},h(){S(e,"class",t=xe(lc("jse-editable-div",n[2],{"jse-short-text":n[0]}))+" svelte-1rwbo30"),S(e,"contenteditable","true"),S(e,"spellcheck","false")},m(r,o){X(r,e,o),n[13](e),i||(s=[Se(e,"input",n[3]),Se(e,"keydown",n[4]),Se(e,"paste",n[5]),Se(e,"blur",n[6])],i=!0)},p(r,[o]){o&5&&t!==(t=xe(lc("jse-editable-div",r[2],{"jse-short-text":r[0]}))+" svelte-1rwbo30")&&S(e,"class",t)},i:Xe,o:Xe,d(r){r&&b(e),n[13](null),i=!1,an(s)}}}function Gee(n,e,t){const i=Ts("jsoneditor:EditableDiv");let{value:s}=e,{shortText:r=!1}=e,{onChange:o}=e,{onCancel:l}=e,{onFind:a}=e,{onPaste:c=Gn}=e,{onValueClass:u=()=>""}=e,f,h=u(s),d=!1;Mi(()=>{i("onMount",{value:s}),g(s),setTimeout(()=>oR(f))}),_r(()=>{const A=m();i("onDestroy",{closed:d,value:s,newValue:A}),!d&&A!==s&&o(A,Ol.NO)});function m(){return kz(f.innerText)}function g(A){t(1,f.innerText=Gl(A),f)}function _(){const A=m();A===""&&g(""),t(2,h=u(A))}function v(A){A.stopPropagation();const I=ia(A).replace(/^Command\+/,"Ctrl+");if(I==="Escape"&&(d=!0,l()),I==="Enter"||I==="Tab"){d=!0;const R=m();o(R,Ol.NEXT_INSIDE)}I==="Ctrl+F"&&(A.preventDefault(),a(!1)),I==="Ctrl+H"&&(A.preventDefault(),a(!0))}function y(A){if(!c)return;const I=A.clipboardData.getData("text/plain");c(I)}function E(){const A=document.hasFocus(),I=m();i("handleBlur",{hasFocus:A,closed:d,value:s,newValue:I}),document.hasFocus()&&!d&&(d=!0,I!==s?o(I,Ol.SELF):l())}function w(A){Vt[A?"unshift":"push"](()=>{f=A,t(1,f)})}return n.$$set=A=>{"value"in A&&t(7,s=A.value),"shortText"in A&&t(0,r=A.shortText),"onChange"in A&&t(8,o=A.onChange),"onCancel"in A&&t(9,l=A.onCancel),"onFind"in A&&t(10,a=A.onFind),"onPaste"in A&&t(11,c=A.onPaste),"onValueClass"in A&&t(12,u=A.onValueClass)},[r,f,h,_,v,y,E,s,o,l,a,c,u,w]}class Kee extends rt{constructor(e){super(),ot(this,e,Gee,zee,fn,{value:7,shortText:0,onChange:8,onCancel:9,onFind:10,onPaste:11,onValueClass:12})}}const TN=Kee;function Xee(n){let e,t,i,s,r,o,l;const a=[Jee,Yee],c=[];function u(f,h){return f[1]?0:1}return t=u(n),i=c[t]=a[t](n),{c(){e=C("div"),i.c(),this.h()},l(f){e=k(f,"DIV",{"data-type":!0,class:!0});var h=T(e);i.l(h),h.forEach(b),this.h()},h(){S(e,"data-type","selectable-key"),S(e,"class",s=xe(n[6](n[0]))+" svelte-1cm0o9n")},m(f,h){X(f,e,h),c[t].m(e,null),r=!0,o||(l=Se(e,"dblclick",n[5]),o=!0)},p(f,h){let d=t;t=u(f),t===d?c[t].p(f,h):(He(),Q(c[d],1,1,()=>{c[d]=null}),qe(),i=c[t],i?i.p(f,h):(i=c[t]=a[t](f),i.c()),B(i,1),i.m(e,null)),(!r||h&1&&s!==(s=xe(f[6](f[0]))+" svelte-1cm0o9n"))&&S(e,"class",s)},i(f){r||(B(i),r=!0)},o(f){Q(i),r=!1},d(f){f&&b(e),c[t].d(),o=!1,l()}}}function Qee(n){let e,t;return e=new TN({props:{value:n[2].normalization.escapeValue(n[0]),shortText:!0,onChange:n[7],onCancel:n[8],onFind:n[2].onFind}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,s){const r={};s&5&&(r.value=i[2].normalization.escapeValue(i[0])),s&4&&(r.onFind=i[2].onFind),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function Yee(n){let e=Gl(n[2].normalization.escapeValue(n[0]))+"",t;return{c(){t=z(e)},l(i){t=G(i,e)},m(i,s){X(i,t,s)},p(i,s){s&5&&e!==(e=Gl(i[2].normalization.escapeValue(i[0]))+"")&&Be(t,e)},i:Xe,o:Xe,d(i){i&&b(t)}}}function Jee(n){let e,t;return e=new IN({props:{text:n[2].normalization.escapeValue(n[0]),searchResultItems:n[1]}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,s){const r={};s&5&&(r.text=i[2].normalization.escapeValue(i[0])),s&2&&(r.searchResultItems=i[1]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function Yw(n){let e,t;return e=new la({props:{selected:!0,onContextMenu:n[2].onContextMenu}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,s){const r={};s&4&&(r.onContextMenu=i[2].onContextMenu),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function Zee(n){let e,t,i,s,r;const o=[Qee,Xee],l=[];function a(u,f){return u[4]?0:1}e=a(n),t=l[e]=o[e](n);let c=!n[2].readOnly&&n[3]&&!n[4]&&Yw(n);return{c(){t.c(),i=F(),c&&c.c(),s=tt()},l(u){t.l(u),i=j(u),c&&c.l(u),s=tt()},m(u,f){l[e].m(u,f),X(u,i,f),c&&c.m(u,f),X(u,s,f),r=!0},p(u,[f]){let h=e;e=a(u),e===h?l[e].p(u,f):(He(),Q(l[h],1,1,()=>{l[h]=null}),qe(),t=l[e],t?t.p(u,f):(t=l[e]=o[e](u),t.c()),B(t,1),t.m(i.parentNode,i)),!u[2].readOnly&&u[3]&&!u[4]?c?(c.p(u,f),f&28&&B(c,1)):(c=Yw(u),c.c(),B(c,1),c.m(s.parentNode,s)):c&&(He(),Q(c,1,1,()=>{c=null}),qe())},i(u){r||(B(t),B(c),r=!0)},o(u){Q(t),Q(c),r=!1},d(u){l[e].d(u),u&&b(i),c&&c.d(u),u&&b(s)}}}function xee(n,e,t){let i,s,{path:r}=e,{pointer:o}=e,{key:l}=e,{selection:a}=e,{searchResultItems:c}=e,{onUpdateKey:u}=e,{context:f}=e;function h(_){!s&&!f.readOnly&&(_.preventDefault(),f.onSelect(zs(r,!0)))}function d(_){return lc("jse-key",{"jse-empty":_===""})}function m(_,v){const y=u(l,f.normalization.unescapeValue(_)),E=bn(r).concat(y);f.onSelect(v===Ol.NEXT_INSIDE?Zn(E,!1):zs(E,!1)),v!==Ol.SELF&&f.focus()}function g(){f.onSelect(zs(r,!1)),f.focus()}return n.$$set=_=>{"path"in _&&t(9,r=_.path),"pointer"in _&&t(10,o=_.pointer),"key"in _&&t(0,l=_.key),"selection"in _&&t(11,a=_.selection),"searchResultItems"in _&&t(1,c=_.searchResultItems),"onUpdateKey"in _&&t(12,u=_.onUpdateKey),"context"in _&&t(2,f=_.context)},n.$$.update=()=>{n.$$.dirty&3072&&t(3,i=a?a.pointersMap[o]===!0&&hi(a):void 0),n.$$.dirty&2056&&t(4,s=i&&cu(a))},[l,c,f,i,s,h,d,m,g,r,o,a,u]}class $ee extends rt{constructor(e){super(),ot(this,e,xee,Zee,fn,{path:9,pointer:10,key:0,selection:11,searchResultItems:1,onUpdateKey:12,context:2})}}const ete=$ee;function Jw(n,e,t){const i=n.slice();return i[9]=e[t],i}function Zw(n){let e,t,i;const s=[n[9].props];var r=n[9].component;function o(l){let a={};for(let c=0;c<s.length;c+=1)a=Qr(a,s[c]);return{props:a}}return r&&(e=Cn(r,o())),{c(){e&&Te(e.$$.fragment),t=tt()},l(l){e&&De(e.$$.fragment,l),t=tt()},m(l,a){e&&Oe(e,l,a),X(l,t,a),i=!0},p(l,a){const c=a&1?Yr(s,[Zl(l[9].props)]):{};if(r!==(r=l[9].component)){if(e){He();const u=e;Q(u.$$.fragment,1,0,()=>{Re(u,1)}),qe()}r?(e=Cn(r,o()),Te(e.$$.fragment),B(e.$$.fragment,1),Oe(e,t.parentNode,t)):e=null}else r&&e.$set(c)},i(l){i||(e&&B(e.$$.fragment,l),i=!0)},o(l){e&&Q(e.$$.fragment,l),i=!1},d(l){l&&b(t),e&&Re(e,l)}}}function tte(n){let e,t,i=n[0],s=[];for(let o=0;o<i.length;o+=1)s[o]=Zw(Jw(n,i,o));const r=o=>Q(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();e=tt()},l(o){for(let l=0;l<s.length;l+=1)s[l].l(o);e=tt()},m(o,l){for(let a=0;a<s.length;a+=1)s[a].m(o,l);X(o,e,l),t=!0},p(o,[l]){if(l&1){i=o[0];let a;for(a=0;a<i.length;a+=1){const c=Jw(o,i,a);s[a]?(s[a].p(c,l),B(s[a],1)):(s[a]=Zw(c),s[a].c(),B(s[a],1),s[a].m(e.parentNode,e))}for(He(),a=i.length;a<s.length;a+=1)r(a);qe()}},i(o){if(!t){for(let l=0;l<i.length;l+=1)B(s[l]);t=!0}},o(o){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)Q(s[l]);t=!1},d(o){Ht(s,o),o&&b(e)}}}function nte(n,e,t){let i,s,{path:r}=e,{value:o}=e,{context:l}=e,{isSelected:a}=e,{enforceString:c}=e,{selection:u}=e,{searchResultItems:f}=e;return n.$$set=h=>{"path"in h&&t(1,r=h.path),"value"in h&&t(2,o=h.value),"context"in h&&t(3,l=h.context),"isSelected"in h&&t(4,a=h.isSelected),"enforceString"in h&&t(5,c=h.enforceString),"selection"in h&&t(6,u=h.selection),"searchResultItems"in h&&t(7,f=h.searchResultItems)},n.$$.update=()=>{n.$$.dirty&72&&t(8,i=!l.readOnly&&yn(u)&&cu(u)),n.$$.dirty&510&&t(0,s=l.onRenderValue({path:r,value:o,readOnly:l.readOnly,enforceString:c,isSelected:a,isEditing:i,parser:l.parser,normalization:l.normalization,selection:u,searchResultItems:f,onPatch:l.onPatch,onPasteJson:l.onPasteJson,onSelect:l.onSelect,onFind:l.onFind,focus:l.focus}))},[s,r,o,l,a,c,u,f,i]}class ite extends rt{constructor(e){super(),ot(this,e,nte,tte,fn,{path:1,value:2,context:3,isSelected:4,enforceString:5,selection:6,searchResultItems:7})}}const ste=ite,Ui={selecting:!1,selectionAnchor:null,selectionAnchorType:null,selectionFocus:null,dragging:!1};function hg({json:n,documentState:e,deltaY:t,items:i}){const s=e.selection,r=t<0?rte({json:n,selection:s,deltaY:t,items:i}):ote({json:n,selection:s,deltaY:t,items:i});if(!r||r.offset===0)return{operations:void 0,updatedSelection:void 0,offset:0};const o=H$(n,e.selection,r),l=bn(rc(s)),a=wt(n,l);if(Array.isArray(a)){const c=lte({items:i,json:n,selection:s,offset:r.offset});return{operations:o,updatedSelection:c,offset:r.offset}}else return{operations:o,updatedSelection:void 0,offset:r.offset}}function rte({items:n,selection:e,deltaY:t}){const i=rc(e),s=n.findIndex(u=>wn(u.path,i)),r=()=>{var u;return(u=n[o-1])==null?void 0:u.height};let o=s,l=0;for(;r()!==void 0&&Math.abs(t)>l+r()/2;)l+=r(),o-=1;const a=n[o].path,c=o-s;return o!==s&&n[o]!==void 0?{beforePath:a,offset:c}:void 0}function ote({json:n,items:e,selection:t,deltaY:i}){var g;const s=lp(t),r=e.findIndex(_=>wn(_.path,s));let o=0,l=r;const a=()=>{var _;return(_=e[l+1])==null?void 0:_.height};for(;a()!==void 0&&Math.abs(i)>o+a()/2;)o+=a(),l+=1;const c=bn(s),u=wt(n,c),h=Array.isArray(u)?l:l+1,d=(g=e[h])==null?void 0:g.path,m=l-r;return d?{beforePath:d,offset:m}:{append:!0,offset:m}}function lte({items:n,json:e,selection:t,offset:i}){var u,f;const s=rc(t),r=lp(t),o=n.findIndex(h=>wn(h.path,s)),l=n.findIndex(h=>wn(h.path,r)),a=(u=n[o+i])==null?void 0:u.path,c=(f=n[l+i])==null?void 0:f.path;return di(e,a,c)}function ate(n,e){if(!n)return;const t={};for(const i of Object.keys(n))e(i,n[i])&&(t[i]=n[i]);return Object.keys(t).length>0?t:void 0}function Rr(n,e){return ate(n,t=>Ka(t,e))}function cte(n){let e,t;return{c(){e=C("div"),t=z(n[0]),this.h()},l(i){e=k(i,"DIV",{class:!0});var s=T(e);t=G(s,n[0]),s.forEach(b),this.h()},h(){S(e,"class","jse-tooltip svelte-r4omvg")},m(i,s){X(i,e,s),p(e,t)},p(i,[s]){s&1&&Be(t,i[0])},i:Xe,o:Xe,d(i){i&&b(e)}}}function ute(n,e,t){let{text:i}=e;return n.$$set=s=>{"text"in s&&t(0,i=s.text)},[i]}class fte extends rt{constructor(e){super(),ot(this,e,ute,cte,It,{text:0})}}const hte=fte;function Hb(n,{text:e,openAbsolutePopup:t,closeAbsolutePopup:i}){let s;function r(){s=t(hte,{text:e},{position:"top",width:10*e.length,offsetTop:3,anchor:n,closeOnOuterClick:!0})}function o(){i(s)}return n.addEventListener("mouseenter",r),n.addEventListener("mouseleave",o),{destroy(){n.removeEventListener("mouseenter",r),n.removeEventListener("mouseleave",o)}}}function dte(n){let e,t,i,s,r,o;return t=new qt({props:{data:sa}}),{c(){e=C("button"),Te(t.$$.fragment),this.h()},l(l){e=k(l,"BUTTON",{type:!0,class:!0});var a=T(e);De(t.$$.fragment,a),a.forEach(b),this.h()},h(){S(e,"type","button"),S(e,"class","jse-validation-error svelte-1q62mys")},m(l,a){X(l,e,a),Oe(t,e,null),s=!0,r||(o=[Se(e,"click",function(){Bn(n[0])&&n[0].apply(this,arguments)}),ac(i=Hb.call(null,e,{text:n[1],...n[2]}))],r=!0)},p(l,[a]){n=l,i&&Bn(i.update)&&a&2&&i.update.call(null,{text:n[1],...n[2]})},i(l){s||(B(t.$$.fragment,l),s=!0)},o(l){Q(t.$$.fragment,l),s=!1},d(l){l&&b(e),Re(t),r=!1,an(o)}}}function mte(n,e,t){let i;const s=Nn("absolute-popup");let{validationError:r}=e,{onExpand:o}=e;return n.$$set=l=>{"validationError"in l&&t(3,r=l.validationError),"onExpand"in l&&t(0,o=l.onExpand)},n.$$.update=()=>{n.$$.dirty&8&&t(1,i=r.isChildError?"Contains invalid data":r.message)},[o,i,s,r]}class pte extends rt{constructor(e){super(),ot(this,e,mte,dte,It,{validationError:3,onExpand:0})}}const qb=pte;const gte=n=>({}),xw=n=>({});function $w(n,e,t){const i=n.slice();return i[53]=e[t],i}const vte=n=>({}),eC=n=>({});function tC(n,e,t){const i=n.slice();return i[47]=e[t],i[49]=t,i}function nC(n,e,t){const i=n.slice();return i[50]=e[t],i}const bte=n=>({}),iC=n=>({});function _te(n){let e,t,i,s,r,o,l=!n[8].readOnly&&n[16]&&n[7]&&(yn(n[7])||Sn(n[7]))&&!n[7].edit&&wn(n[7].focusPath,n[1]),a,c,u;const f=n[34].identifier,h=cs(f,n,n[35],xw);let d=!n[17]&&sC();r=new ste({props:{path:n[1],value:n[0],enforceString:n[13],isSelected:n[16],selection:n[16]?n[7]:void 0,searchResultItems:Uw(n[6],n[9]),context:n[8]}});let m=l&&rC(n),g=n[15]&&oC(n),_=!n[17]&&lC(n);return{c(){e=C("div"),t=C("div"),h&&h.c(),i=F(),d&&d.c(),s=F(),Te(r.$$.fragment),o=F(),m&&m.c(),a=F(),g&&g.c(),c=F(),_&&_.c(),this.h()},l(v){e=k(v,"DIV",{class:!0,style:!0});var y=T(e);t=k(y,"DIV",{class:!0});var E=T(t);h&&h.l(E),i=j(E),d&&d.l(E),s=j(E),De(r.$$.fragment,E),o=j(E),m&&m.l(E),E.forEach(b),a=j(y),g&&g.l(y),c=j(y),_&&_.l(y),y.forEach(b),this.h()},h(){S(t,"class","jse-contents svelte-1dkd71f"),S(e,"class","jse-contents-outer svelte-1dkd71f"),S(e,"style",n[18])},m(v,y){X(v,e,y),p(e,t),h&&h.m(t,null),p(t,i),d&&d.m(t,null),p(t,s),Oe(r,t,null),p(t,o),m&&m.m(t,null),p(e,a),g&&g.m(e,null),p(e,c),_&&_.m(e,null),u=!0},p(v,y){h&&h.p&&(!u||y[1]&16)&&us(h,f,v,v[35],u?hs(f,v[35],y,gte):fs(v[35]),xw),v[17]?d&&(d.d(1),d=null):d||(d=sC(),d.c(),d.m(t,s));const E={};y[0]&2&&(E.path=v[1]),y[0]&1&&(E.value=v[0]),y[0]&8192&&(E.enforceString=v[13]),y[0]&65536&&(E.isSelected=v[16]),y[0]&65664&&(E.selection=v[16]?v[7]:void 0),y[0]&576&&(E.searchResultItems=Uw(v[6],v[9])),y[0]&256&&(E.context=v[8]),r.$set(E),y[0]&65922&&(l=!v[8].readOnly&&v[16]&&v[7]&&(yn(v[7])||Sn(v[7]))&&!v[7].edit&&wn(v[7].focusPath,v[1])),l?m?(m.p(v,y),y[0]&65922&&B(m,1)):(m=rC(v),m.c(),B(m,1),m.m(t,null)):m&&(He(),Q(m,1,1,()=>{m=null}),qe()),v[15]?g?(g.p(v,y),y[0]&32768&&B(g,1)):(g=oC(v),g.c(),B(g,1),g.m(e,c)):g&&(He(),Q(g,1,1,()=>{g=null}),qe()),v[17]?_&&(_.d(1),_=null):_?_.p(v,y):(_=lC(v),_.c(),_.m(e,null)),(!u||y[0]&262144)&&S(e,"style",v[18])},i(v){u||(B(h,v),B(r.$$.fragment,v),B(m),B(g),u=!0)},o(v){Q(h,v),Q(r.$$.fragment,v),Q(m),Q(g),u=!1},d(v){v&&b(e),h&&h.d(v),d&&d.d(),Re(r),m&&m.d(),g&&g.d(),_&&_.d()}}}function yte(n){let e,t,i,s,r,o,l,a,c,u,f,h=!n[8].readOnly&&n[16]&&n[7]&&(yn(n[7])||Sn(n[7]))&&!n[7].edit&&wn(n[7].focusPath,n[1]),d,m,g,_,v,y,E;const w=[Ate,Ete],A=[];function I(q,x){return q[12]?0:1}s=I(n),r=A[s]=w[s](n);const R=n[34].identifier,D=cs(R,n,n[35],eC);let N=!n[17]&&aC();function W(q,x){return q[12]?Cte:wte}let H=W(n),P=H(n),Y=h&&cC(n),O=n[15]&&(!n[12]||!n[15].isChildError)&&uC(n);function L(q,x){if(q[12])return Ite;if(!q[17])return kte}let U=L(n),K=U&&U(n),te=n[12]&&fC(n);return{c(){e=C("div"),t=C("div"),i=C("button"),r.c(),o=F(),D&&D.c(),l=F(),N&&N.c(),a=F(),c=C("div"),u=C("div"),P.c(),f=F(),Y&&Y.c(),d=F(),O&&O.c(),m=F(),K&&K.c(),g=F(),te&&te.c(),_=tt(),this.h()},l(q){e=k(q,"DIV",{class:!0,style:!0});var x=T(e);t=k(x,"DIV",{class:!0});var Z=T(t);i=k(Z,"BUTTON",{type:!0,class:!0,title:!0});var V=T(i);r.l(V),V.forEach(b),o=j(Z),D&&D.l(Z),l=j(Z),N&&N.l(Z),a=j(Z),c=k(Z,"DIV",{class:!0,"data-type":!0});var ce=T(c);u=k(ce,"DIV",{class:!0});var pe=T(u);P.l(pe),pe.forEach(b),ce.forEach(b),f=j(Z),Y&&Y.l(Z),Z.forEach(b),d=j(x),O&&O.l(x),m=j(x),K&&K.l(x),x.forEach(b),g=j(q),te&&te.l(q),_=tt(),this.h()},h(){S(i,"type","button"),S(i,"class","jse-expand svelte-1dkd71f"),S(i,"title","Expand or collapse this object (Ctrl+Click to expand/collapse recursively)"),S(u,"class","jse-meta-inner svelte-1dkd71f"),S(c,"class","jse-meta svelte-1dkd71f"),S(c,"data-type","selectable-value"),S(t,"class","jse-header svelte-1dkd71f"),S(e,"class","jse-header-outer svelte-1dkd71f"),S(e,"style",n[18])},m(q,x){X(q,e,x),p(e,t),p(t,i),A[s].m(i,null),p(t,o),D&&D.m(t,null),p(t,l),N&&N.m(t,null),p(t,a),p(t,c),p(c,u),P.m(u,null),p(t,f),Y&&Y.m(t,null),p(e,d),O&&O.m(e,null),p(e,m),K&&K.m(e,null),X(q,g,x),te&&te.m(q,x),X(q,_,x),v=!0,y||(E=Se(i,"click",n[21]),y=!0)},p(q,x){let Z=s;s=I(q),s===Z?A[s].p(q,x):(He(),Q(A[Z],1,1,()=>{A[Z]=null}),qe(),r=A[s],r?r.p(q,x):(r=A[s]=w[s](q),r.c()),B(r,1),r.m(i,null)),D&&D.p&&(!v||x[1]&16)&&us(D,R,q,q[35],v?hs(R,q[35],x,vte):fs(q[35]),eC),q[17]?N&&(N.d(1),N=null):N||(N=aC(),N.c(),N.m(t,a)),H===(H=W(q))&&P?P.p(q,x):(P.d(1),P=H(q),P&&(P.c(),P.m(u,null))),x[0]&65922&&(h=!q[8].readOnly&&q[16]&&q[7]&&(yn(q[7])||Sn(q[7]))&&!q[7].edit&&wn(q[7].focusPath,q[1])),h?Y?(Y.p(q,x),x[0]&65922&&B(Y,1)):(Y=cC(q),Y.c(),B(Y,1),Y.m(t,null)):Y&&(He(),Q(Y,1,1,()=>{Y=null}),qe()),q[15]&&(!q[12]||!q[15].isChildError)?O?(O.p(q,x),x[0]&36864&&B(O,1)):(O=uC(q),O.c(),B(O,1),O.m(e,m)):O&&(He(),Q(O,1,1,()=>{O=null}),qe()),U===(U=L(q))&&K?K.p(q,x):(K&&K.d(1),K=U&&U(q),K&&(K.c(),K.m(e,null))),(!v||x[0]&262144)&&S(e,"style",q[18]),q[12]?te?(te.p(q,x),x[0]&4096&&B(te,1)):(te=fC(q),te.c(),B(te,1),te.m(_.parentNode,_)):te&&(He(),Q(te,1,1,()=>{te=null}),qe())},i(q){v||(B(r),B(D,q),B(Y),B(O),B(te),v=!0)},o(q){Q(r),Q(D,q),Q(Y),Q(O),Q(te),v=!1},d(q){q&&b(e),A[s].d(),D&&D.d(q),N&&N.d(),P.d(),Y&&Y.d(),O&&O.d(),K&&K.d(),q&&b(g),te&&te.d(q),q&&b(_),y=!1,E()}}}function Ste(n){let e,t,i,s,r,o,l,a,c,u,f,h=!n[8].readOnly&&n[16]&&n[7]&&(yn(n[7])||Sn(n[7]))&&!n[7].edit&&wn(n[7].focusPath,n[1]),d,m,g,_,v,y,E;const w=[Rte,Ote],A=[];function I(q,x){return q[12]?0:1}s=I(n),r=A[s]=w[s](n);const R=n[34].identifier,D=cs(R,n,n[35],iC);let N=!n[17]&&pC();function W(q,x){return q[12]?Nte:Dte}let H=W(n),P=H(n),Y=h&&gC(n),O=n[15]&&(!n[12]||!n[15].isChildError)&&vC(n);function L(q,x){return q[12]?Mte:Pte}let U=L(n),K=U(n),te=n[12]&&bC(n);return{c(){e=C("div"),t=C("div"),i=C("button"),r.c(),o=F(),D&&D.c(),l=F(),N&&N.c(),a=F(),c=C("div"),u=C("div"),P.c(),f=F(),Y&&Y.c(),d=F(),O&&O.c(),m=F(),K.c(),g=F(),te&&te.c(),_=tt(),this.h()},l(q){e=k(q,"DIV",{class:!0,style:!0});var x=T(e);t=k(x,"DIV",{class:!0});var Z=T(t);i=k(Z,"BUTTON",{type:!0,class:!0,title:!0});var V=T(i);r.l(V),V.forEach(b),o=j(Z),D&&D.l(Z),l=j(Z),N&&N.l(Z),a=j(Z),c=k(Z,"DIV",{class:!0});var ce=T(c);u=k(ce,"DIV",{class:!0,"data-type":!0});var pe=T(u);P.l(pe),pe.forEach(b),ce.forEach(b),f=j(Z),Y&&Y.l(Z),Z.forEach(b),d=j(x),O&&O.l(x),m=j(x),K.l(x),x.forEach(b),g=j(q),te&&te.l(q),_=tt(),this.h()},h(){S(i,"type","button"),S(i,"class","jse-expand svelte-1dkd71f"),S(i,"title","Expand or collapse this array (Ctrl+Click to expand/collapse recursively)"),S(u,"class","jse-meta-inner svelte-1dkd71f"),S(u,"data-type","selectable-value"),S(c,"class","jse-meta svelte-1dkd71f"),S(t,"class","jse-header svelte-1dkd71f"),S(e,"class","jse-header-outer svelte-1dkd71f"),S(e,"style",n[18])},m(q,x){X(q,e,x),p(e,t),p(t,i),A[s].m(i,null),p(t,o),D&&D.m(t,null),p(t,l),N&&N.m(t,null),p(t,a),p(t,c),p(c,u),P.m(u,null),p(t,f),Y&&Y.m(t,null),p(e,d),O&&O.m(e,null),p(e,m),K.m(e,null),X(q,g,x),te&&te.m(q,x),X(q,_,x),v=!0,y||(E=Se(i,"click",n[21]),y=!0)},p(q,x){let Z=s;s=I(q),s===Z?A[s].p(q,x):(He(),Q(A[Z],1,1,()=>{A[Z]=null}),qe(),r=A[s],r?r.p(q,x):(r=A[s]=w[s](q),r.c()),B(r,1),r.m(i,null)),D&&D.p&&(!v||x[1]&16)&&us(D,R,q,q[35],v?hs(R,q[35],x,bte):fs(q[35]),iC),q[17]?N&&(N.d(1),N=null):N||(N=pC(),N.c(),N.m(t,a)),H===(H=W(q))&&P?P.p(q,x):(P.d(1),P=H(q),P&&(P.c(),P.m(u,null))),x[0]&65922&&(h=!q[8].readOnly&&q[16]&&q[7]&&(yn(q[7])||Sn(q[7]))&&!q[7].edit&&wn(q[7].focusPath,q[1])),h?Y?(Y.p(q,x),x[0]&65922&&B(Y,1)):(Y=gC(q),Y.c(),B(Y,1),Y.m(t,null)):Y&&(He(),Q(Y,1,1,()=>{Y=null}),qe()),q[15]&&(!q[12]||!q[15].isChildError)?O?(O.p(q,x),x[0]&36864&&B(O,1)):(O=vC(q),O.c(),B(O,1),O.m(e,m)):O&&(He(),Q(O,1,1,()=>{O=null}),qe()),U===(U=L(q))&&K?K.p(q,x):(K.d(1),K=U(q),K&&(K.c(),K.m(e,null))),(!v||x[0]&262144)&&S(e,"style",q[18]),q[12]?te?(te.p(q,x),x[0]&4096&&B(te,1)):(te=bC(q),te.c(),B(te,1),te.m(_.parentNode,_)):te&&(He(),Q(te,1,1,()=>{te=null}),qe())},i(q){v||(B(r),B(D,q),B(Y),B(O),B(te),v=!0)},o(q){Q(r),Q(D,q),Q(Y),Q(O),Q(te),v=!1},d(q){q&&b(e),A[s].d(),D&&D.d(q),N&&N.d(),P.d(),Y&&Y.d(),O&&O.d(),K.d(),q&&b(g),te&&te.d(q),q&&b(_),y=!1,E()}}}function sC(n){let e,t;return{c(){e=C("div"),t=z(":"),this.h()},l(i){e=k(i,"DIV",{class:!0});var s=T(e);t=G(s,":"),s.forEach(b),this.h()},h(){S(e,"class","jse-separator svelte-1dkd71f")},m(i,s){X(i,e,s),p(e,t)},d(i){i&&b(e)}}}function rC(n){let e,t,i;return t=new la({props:{selected:!0,onContextMenu:n[8].onContextMenu}}),{c(){e=C("div"),Te(t.$$.fragment),this.h()},l(s){e=k(s,"DIV",{class:!0});var r=T(e);De(t.$$.fragment,r),r.forEach(b),this.h()},h(){S(e,"class","jse-context-menu-button-anchor svelte-1dkd71f")},m(s,r){X(s,e,r),Oe(t,e,null),i=!0},p(s,r){const o={};r[0]&256&&(o.onContextMenu=s[8].onContextMenu),t.$set(o)},i(s){i||(B(t.$$.fragment,s),i=!0)},o(s){Q(t.$$.fragment,s),i=!1},d(s){s&&b(e),Re(t)}}}function oC(n){let e,t;return e=new qb({props:{validationError:n[15],onExpand:n[22]}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,s){const r={};s[0]&32768&&(r.validationError=i[15]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function lC(n){let e,t,i;return{c(){e=C("div"),this.h()},l(s){e=k(s,"DIV",{class:!0,"data-type":!0}),T(e).forEach(b),this.h()},h(){S(e,"class","jse-insert-selection-area jse-after svelte-1dkd71f"),S(e,"data-type","insert-selection-area-after")},m(s,r){X(s,e,r),t||(i=Se(e,"click",n[30]),t=!0)},p:Xe,d(s){s&&b(e),t=!1,i()}}}function Ete(n){let e,t;return e=new qt({props:{data:No}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p:Xe,i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function Ate(n){let e,t;return e=new qt({props:{data:Br}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p:Xe,i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function aC(n){let e,t;return{c(){e=C("div"),t=z(":"),this.h()},l(i){e=k(i,"DIV",{class:!0});var s=T(e);t=G(s,":"),s.forEach(b),this.h()},h(){S(e,"class","jse-separator svelte-1dkd71f")},m(i,s){X(i,e,s),p(e,t)},d(i){i&&b(e)}}}function wte(n){let e,t,i,s,r=Object.keys(n[0]).length+"",o,l,a=Object.keys(n[0]).length===1?"prop":"props",c,u,f,h,d,m;return{c(){e=C("div"),t=z("{"),i=F(),s=C("button"),o=z(r),l=F(),c=z(a),u=F(),f=C("div"),h=z("}"),this.h()},l(g){e=k(g,"DIV",{class:!0});var _=T(e);t=G(_,"{"),_.forEach(b),i=j(g),s=k(g,"BUTTON",{type:!0,class:!0});var v=T(s);o=G(v,r),l=j(v),c=G(v,a),v.forEach(b),u=j(g),f=k(g,"DIV",{class:!0});var y=T(f);h=G(y,"}"),y.forEach(b),this.h()},h(){S(e,"class","jse-bracket svelte-1dkd71f"),S(s,"type","button"),S(s,"class","jse-tag svelte-1dkd71f"),S(f,"class","jse-bracket svelte-1dkd71f")},m(g,_){X(g,e,_),p(e,t),X(g,i,_),X(g,s,_),p(s,o),p(s,l),p(s,c),X(g,u,_),X(g,f,_),p(f,h),d||(m=Se(s,"click",n[22]),d=!0)},p(g,_){_[0]&1&&r!==(r=Object.keys(g[0]).length+"")&&Be(o,r),_[0]&1&&a!==(a=Object.keys(g[0]).length===1?"prop":"props")&&Be(c,a)},d(g){g&&b(e),g&&b(i),g&&b(s),g&&b(u),g&&b(f),d=!1,m()}}}function Cte(n){let e,t;return{c(){e=C("div"),t=z("{"),this.h()},l(i){e=k(i,"DIV",{class:!0});var s=T(e);t=G(s,"{"),s.forEach(b),this.h()},h(){S(e,"class","jse-bracket jse-expanded svelte-1dkd71f")},m(i,s){X(i,e,s),p(e,t)},p:Xe,d(i){i&&b(e)}}}function cC(n){let e,t,i;return t=new la({props:{selected:!0,onContextMenu:n[8].onContextMenu}}),{c(){e=C("div"),Te(t.$$.fragment),this.h()},l(s){e=k(s,"DIV",{class:!0});var r=T(e);De(t.$$.fragment,r),r.forEach(b),this.h()},h(){S(e,"class","jse-context-menu-button-anchor svelte-1dkd71f")},m(s,r){X(s,e,r),Oe(t,e,null),i=!0},p(s,r){const o={};r[0]&256&&(o.onContextMenu=s[8].onContextMenu),t.$set(o)},i(s){i||(B(t.$$.fragment,s),i=!0)},o(s){Q(t.$$.fragment,s),i=!1},d(s){s&&b(e),Re(t)}}}function uC(n){let e,t;return e=new qb({props:{validationError:n[15],onExpand:n[22]}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,s){const r={};s[0]&32768&&(r.validationError=i[15]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function kte(n){let e,t,i;return{c(){e=C("div"),this.h()},l(s){e=k(s,"DIV",{class:!0,"data-type":!0}),T(e).forEach(b),this.h()},h(){S(e,"class","jse-insert-selection-area jse-after svelte-1dkd71f"),S(e,"data-type","insert-selection-area-after")},m(s,r){X(s,e,r),t||(i=Se(e,"click",n[30]),t=!0)},p:Xe,d(s){s&&b(e),t=!1,i()}}}function Ite(n){let e,t,i;return{c(){e=C("div"),this.h()},l(s){e=k(s,"DIV",{class:!0,"data-type":!0}),T(e).forEach(b),this.h()},h(){S(e,"class","jse-insert-selection-area jse-inside svelte-1dkd71f"),S(e,"data-type","insert-selection-area-inside")},m(s,r){X(s,e,r),t||(i=Se(e,"click",n[29]),t=!0)},p:Xe,d(s){s&&b(e),t=!1,i()}}}function fC(n){let e,t=!n[8].readOnly&&(n[10]===vo||n[16]&&Ci(n[7])),i,s,r,o,l,a,c,u,f=t&&hC(n),h=n[19](n[1],n[0],n[2],n[3],n[4],n[5],n[6],n[7],n[11]),d=[];for(let _=0;_<h.length;_+=1)d[_]=dC($w(n,h,_));const m=_=>Q(d[_],1,1,()=>{d[_]=null});let g=!n[17]&&mC(n);return{c(){e=C("div"),f&&f.c(),i=F();for(let _=0;_<d.length;_+=1)d[_].c();s=F(),r=C("div"),o=C("div"),l=C("div"),a=z("}"),c=F(),g&&g.c(),this.h()},l(_){e=k(_,"DIV",{class:!0});var v=T(e);f&&f.l(v),i=j(v);for(let A=0;A<d.length;A+=1)d[A].l(v);v.forEach(b),s=j(_),r=k(_,"DIV",{class:!0,style:!0});var y=T(r);o=k(y,"DIV",{"data-type":!0,class:!0});var E=T(o);l=k(E,"DIV",{class:!0});var w=T(l);a=G(w,"}"),w.forEach(b),E.forEach(b),c=j(y),g&&g.l(y),y.forEach(b),this.h()},h(){S(e,"class","jse-props svelte-1dkd71f"),S(l,"class","jse-bracket svelte-1dkd71f"),S(o,"data-type","selectable-value"),S(o,"class","jse-footer svelte-1dkd71f"),S(r,"class","jse-footer-outer svelte-1dkd71f"),S(r,"style",n[18])},m(_,v){X(_,e,v),f&&f.m(e,null),p(e,i);for(let y=0;y<d.length;y+=1)d[y].m(e,null);X(_,s,v),X(_,r,v),p(r,o),p(o,l),p(l,a),p(r,c),g&&g.m(r,null),u=!0},p(_,v){if(v[0]&66944&&(t=!_[8].readOnly&&(_[10]===vo||_[16]&&Ci(_[7]))),t?f?(f.p(_,v),v[0]&66944&&B(f,1)):(f=hC(_),f.c(),B(f,1),f.m(e,i)):f&&(He(),Q(f,1,1,()=>{f=null}),qe()),v[0]&76024319){h=_[19](_[1],_[0],_[2],_[3],_[4],_[5],_[6],_[7],_[11]);let y;for(y=0;y<h.length;y+=1){const E=$w(_,h,y);d[y]?(d[y].p(E,v),B(d[y],1)):(d[y]=dC(E),d[y].c(),B(d[y],1),d[y].m(e,null))}for(He(),y=h.length;y<d.length;y+=1)m(y);qe()}_[17]?g&&(g.d(1),g=null):g?g.p(_,v):(g=mC(_),g.c(),g.m(r,null)),(!u||v[0]&262144)&&S(r,"style",_[18])},i(_){if(!u){B(f);for(let v=0;v<h.length;v+=1)B(d[v]);u=!0}},o(_){Q(f),d=d.filter(Boolean);for(let v=0;v<d.length;v+=1)Q(d[v]);u=!1},d(_){_&&b(e),f&&f.d(),Ht(d,_),_&&b(s),_&&b(r),g&&g.d()}}}function hC(n){let e,t,i,s;return t=new la({props:{selected:n[16]&&Ci(n[7]),onContextMenu:n[31]}}),{c(){e=C("div"),Te(t.$$.fragment),this.h()},l(r){e=k(r,"DIV",{class:!0,"data-type":!0,style:!0,title:!0});var o=T(e);De(t.$$.fragment,o),o.forEach(b),this.h()},h(){S(e,"class","jse-insert-area jse-inside svelte-1dkd71f"),S(e,"data-type","insert-selection-area-inside"),S(e,"style",i=Qu(n[1].length+1)),S(e,"title",Tv),$e(e,"jse-hovered",n[10]===vo),$e(e,"jse-selected",n[16]&&Ci(n[7]))},m(r,o){X(r,e,o),Oe(t,e,null),s=!0},p(r,o){const l={};o[0]&65664&&(l.selected=r[16]&&Ci(r[7])),t.$set(l),(!s||o[0]&2&&i!==(i=Qu(r[1].length+1)))&&S(e,"style",i),(!s||o[0]&1024)&&$e(e,"jse-hovered",r[10]===vo),(!s||o[0]&65664)&&$e(e,"jse-selected",r[16]&&Ci(r[7]))},i(r){s||(B(t.$$.fragment,r),s=!0)},o(r){Q(t.$$.fragment,r),s=!1},d(r){r&&b(e),Re(t)}}}function Tte(n){let e,t,i,s;return t=new ete({props:{path:n[53].path,pointer:n[53].pointer,key:n[53].key,selection:n[53].selection,searchResultItems:n[53].keySearchResultItemsMap,context:n[8],onUpdateKey:n[23]}}),{c(){e=C("div"),Te(t.$$.fragment),i=F(),this.h()},l(r){e=k(r,"DIV",{slot:!0,class:!0});var o=T(e);De(t.$$.fragment,o),i=j(o),o.forEach(b),this.h()},h(){S(e,"slot","identifier"),S(e,"class","jse-identifier svelte-1dkd71f")},m(r,o){X(r,e,o),Oe(t,e,null),p(e,i),s=!0},p(r,o){const l={};o[0]&2303&&(l.path=r[53].path),o[0]&2303&&(l.pointer=r[53].pointer),o[0]&2303&&(l.key=r[53].key),o[0]&2303&&(l.selection=r[53].selection),o[0]&2303&&(l.searchResultItems=r[53].keySearchResultItemsMap),o[0]&256&&(l.context=r[8]),t.$set(l)},i(r){s||(B(t.$$.fragment,r),s=!0)},o(r){Q(t.$$.fragment,r),s=!1},d(r){r&&b(e),Re(t)}}}function dC(n){let e,t;return e=new zb({props:{value:n[53].value,path:n[53].path,expandedMap:n[53].expandedMap,enforceStringMap:n[53].enforceStringMap,visibleSectionsMap:n[53].visibleSectionsMap,validationErrorsMap:n[53].validationErrorsMap,searchResultItemsMap:n[53].valueSearchResultItemsMap,selection:n[53].selection,context:n[8],onDragSelectionStart:n[26],$$slots:{identifier:[Tte]},$$scope:{ctx:n}}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,s){const r={};s[0]&2303&&(r.value=i[53].value),s[0]&2303&&(r.path=i[53].path),s[0]&2303&&(r.expandedMap=i[53].expandedMap),s[0]&2303&&(r.enforceStringMap=i[53].enforceStringMap),s[0]&2303&&(r.visibleSectionsMap=i[53].visibleSectionsMap),s[0]&2303&&(r.validationErrorsMap=i[53].validationErrorsMap),s[0]&2303&&(r.searchResultItemsMap=i[53].valueSearchResultItemsMap),s[0]&2303&&(r.selection=i[53].selection),s[0]&256&&(r.context=i[8]),s[0]&2559|s[1]&16&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function mC(n){let e,t,i;return{c(){e=C("div"),this.h()},l(s){e=k(s,"DIV",{class:!0,"data-type":!0}),T(e).forEach(b),this.h()},h(){S(e,"class","jse-insert-selection-area jse-after svelte-1dkd71f"),S(e,"data-type","insert-selection-area-after")},m(s,r){X(s,e,r),t||(i=Se(e,"click",n[30]),t=!0)},p:Xe,d(s){s&&b(e),t=!1,i()}}}function Ote(n){let e,t;return e=new qt({props:{data:No}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p:Xe,i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function Rte(n){let e,t;return e=new qt({props:{data:Br}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p:Xe,i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function pC(n){let e,t;return{c(){e=C("div"),t=z(":"),this.h()},l(i){e=k(i,"DIV",{class:!0});var s=T(e);t=G(s,":"),s.forEach(b),this.h()},h(){S(e,"class","jse-separator svelte-1dkd71f")},m(i,s){X(i,e,s),p(e,t)},d(i){i&&b(e)}}}function Dte(n){let e,t,i,s,r=n[0].length+"",o,l,a=n[0].length===1?"item":"items",c,u,f,h,d,m;return{c(){e=C("div"),t=z("["),i=F(),s=C("button"),o=z(r),l=F(),c=z(a),u=F(),f=C("div"),h=z("]"),this.h()},l(g){e=k(g,"DIV",{class:!0});var _=T(e);t=G(_,"["),_.forEach(b),i=j(g),s=k(g,"BUTTON",{type:!0,class:!0});var v=T(s);o=G(v,r),l=j(v),c=G(v,a),v.forEach(b),u=j(g),f=k(g,"DIV",{class:!0});var y=T(f);h=G(y,"]"),y.forEach(b),this.h()},h(){S(e,"class","jse-bracket svelte-1dkd71f"),S(s,"type","button"),S(s,"class","jse-tag svelte-1dkd71f"),S(f,"class","jse-bracket svelte-1dkd71f")},m(g,_){X(g,e,_),p(e,t),X(g,i,_),X(g,s,_),p(s,o),p(s,l),p(s,c),X(g,u,_),X(g,f,_),p(f,h),d||(m=Se(s,"click",n[22]),d=!0)},p(g,_){_[0]&1&&r!==(r=g[0].length+"")&&Be(o,r),_[0]&1&&a!==(a=g[0].length===1?"item":"items")&&Be(c,a)},d(g){g&&b(e),g&&b(i),g&&b(s),g&&b(u),g&&b(f),d=!1,m()}}}function Nte(n){let e,t,i,s,r=n[0].length+"",o,l,a=n[0].length===1?"item":"items",c;return{c(){e=C("div"),t=z("["),i=F(),s=C("span"),o=z(r),l=F(),c=z(a),this.h()},l(u){e=k(u,"DIV",{class:!0});var f=T(e);t=G(f,"["),f.forEach(b),i=j(u),s=k(u,"SPAN",{class:!0});var h=T(s);o=G(h,r),l=j(h),c=G(h,a),h.forEach(b),this.h()},h(){S(e,"class","jse-bracket svelte-1dkd71f"),S(s,"class","jse-tag jse-expanded svelte-1dkd71f")},m(u,f){X(u,e,f),p(e,t),X(u,i,f),X(u,s,f),p(s,o),p(s,l),p(s,c)},p(u,f){f[0]&1&&r!==(r=u[0].length+"")&&Be(o,r),f[0]&1&&a!==(a=u[0].length===1?"item":"items")&&Be(c,a)},d(u){u&&b(e),u&&b(i),u&&b(s)}}}function gC(n){let e,t,i;return t=new la({props:{selected:!0,onContextMenu:n[8].onContextMenu}}),{c(){e=C("div"),Te(t.$$.fragment),this.h()},l(s){e=k(s,"DIV",{class:!0});var r=T(e);De(t.$$.fragment,r),r.forEach(b),this.h()},h(){S(e,"class","jse-context-menu-button-anchor svelte-1dkd71f")},m(s,r){X(s,e,r),Oe(t,e,null),i=!0},p(s,r){const o={};r[0]&256&&(o.onContextMenu=s[8].onContextMenu),t.$set(o)},i(s){i||(B(t.$$.fragment,s),i=!0)},o(s){Q(t.$$.fragment,s),i=!1},d(s){s&&b(e),Re(t)}}}function vC(n){let e,t;return e=new qb({props:{validationError:n[15],onExpand:n[22]}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,s){const r={};s[0]&32768&&(r.validationError=i[15]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function Pte(n){let e,t,i;return{c(){e=C("div"),this.h()},l(s){e=k(s,"DIV",{class:!0,"data-type":!0}),T(e).forEach(b),this.h()},h(){S(e,"class","jse-insert-selection-area jse-after svelte-1dkd71f"),S(e,"data-type","insert-selection-area-after")},m(s,r){X(s,e,r),t||(i=Se(e,"click",n[30]),t=!0)},p:Xe,d(s){s&&b(e),t=!1,i()}}}function Mte(n){let e,t,i;return{c(){e=C("div"),this.h()},l(s){e=k(s,"DIV",{class:!0,"data-type":!0}),T(e).forEach(b),this.h()},h(){S(e,"class","jse-insert-selection-area jse-inside svelte-1dkd71f"),S(e,"data-type","insert-selection-area-inside")},m(s,r){X(s,e,r),t||(i=Se(e,"click",n[29]),t=!0)},p:Xe,d(s){s&&b(e),t=!1,i()}}}function bC(n){let e,t=!n[8].readOnly&&(n[10]===vo||n[16]&&Ci(n[7])),i,s=[],r=new Map,o,l,a,c,u,f,h,d=t&&_C(n),m=n[14]||jl;const g=v=>v[49];for(let v=0;v<m.length;v+=1){let y=tC(n,m,v),E=g(y);r.set(E,s[v]=EC(E,y))}let _=!n[17]&&AC(n);return{c(){e=C("div"),d&&d.c(),i=F();for(let v=0;v<s.length;v+=1)s[v].c();o=F(),l=C("div"),a=C("div"),c=C("span"),u=z("]"),f=F(),_&&_.c(),this.h()},l(v){e=k(v,"DIV",{class:!0});var y=T(e);d&&d.l(y),i=j(y);for(let I=0;I<s.length;I+=1)s[I].l(y);y.forEach(b),o=j(v),l=k(v,"DIV",{class:!0,style:!0});var E=T(l);a=k(E,"DIV",{"data-type":!0,class:!0});var w=T(a);c=k(w,"SPAN",{class:!0});var A=T(c);u=G(A,"]"),A.forEach(b),w.forEach(b),f=j(E),_&&_.l(E),E.forEach(b),this.h()},h(){S(e,"class","jse-items svelte-1dkd71f"),S(c,"class","jse-bracket svelte-1dkd71f"),S(a,"data-type","selectable-value"),S(a,"class","jse-footer svelte-1dkd71f"),S(l,"class","jse-footer-outer svelte-1dkd71f"),S(l,"style",n[18])},m(v,y){X(v,e,y),d&&d.m(e,null),p(e,i);for(let E=0;E<s.length;E+=1)s[E].m(e,null);X(v,o,y),X(v,l,y),p(l,a),p(a,c),p(c,u),p(l,f),_&&_.m(l,null),h=!0},p(v,y){y[0]&66944&&(t=!v[8].readOnly&&(v[10]===vo||v[16]&&Ci(v[7]))),t?d?(d.p(v,y),y[0]&66944&&B(d,1)):(d=_C(v),d.c(),B(d,1),d.m(e,i)):d&&(He(),Q(d,1,1,()=>{d=null}),qe()),y[0]&68176895&&(m=v[14]||jl,He(),s=Zu(s,y,g,1,v,m,r,e,xd,EC,null,tC),qe()),v[17]?_&&(_.d(1),_=null):_?_.p(v,y):(_=AC(v),_.c(),_.m(l,null)),(!h||y[0]&262144)&&S(l,"style",v[18])},i(v){if(!h){B(d);for(let y=0;y<m.length;y+=1)B(s[y]);h=!0}},o(v){Q(d);for(let y=0;y<s.length;y+=1)Q(s[y]);h=!1},d(v){v&&b(e),d&&d.d();for(let y=0;y<s.length;y+=1)s[y].d();v&&b(o),v&&b(l),_&&_.d()}}}function _C(n){let e,t,i,s;return t=new la({props:{selected:n[16]&&Ci(n[7]),onContextMenu:n[31]}}),{c(){e=C("div"),Te(t.$$.fragment),this.h()},l(r){e=k(r,"DIV",{class:!0,"data-type":!0,style:!0,title:!0});var o=T(e);De(t.$$.fragment,o),o.forEach(b),this.h()},h(){S(e,"class","jse-insert-area jse-inside svelte-1dkd71f"),S(e,"data-type","insert-selection-area-inside"),S(e,"style",i=Qu(n[1].length+1)),S(e,"title",Tv),$e(e,"jse-hovered",n[10]===vo),$e(e,"jse-selected",n[16]&&Ci(n[7]))},m(r,o){X(r,e,o),Oe(t,e,null),s=!0},p(r,o){const l={};o[0]&65664&&(l.selected=r[16]&&Ci(r[7])),t.$set(l),(!s||o[0]&2&&i!==(i=Qu(r[1].length+1)))&&S(e,"style",i),(!s||o[0]&1024)&&$e(e,"jse-hovered",r[10]===vo),(!s||o[0]&65664)&&$e(e,"jse-selected",r[16]&&Ci(r[7]))},i(r){s||(B(t.$$.fragment,r),s=!0)},o(r){Q(t.$$.fragment,r),s=!1},d(r){r&&b(e),Re(t)}}}function Bte(n){let e,t,i=n[50].index+"",s;return{c(){e=C("div"),t=C("div"),s=z(i),this.h()},l(r){e=k(r,"DIV",{slot:!0,class:!0});var o=T(e);t=k(o,"DIV",{class:!0});var l=T(t);s=G(l,i),l.forEach(b),o.forEach(b),this.h()},h(){S(t,"class","jse-index svelte-1dkd71f"),S(e,"slot","identifier"),S(e,"class","jse-identifier svelte-1dkd71f")},m(r,o){X(r,e,o),p(e,t),p(t,s)},p(r,o){o[0]&18687&&i!==(i=r[50].index+"")&&Be(s,i)},d(r){r&&b(e)}}}function yC(n,e){let t,i,s;return i=new zb({props:{value:e[50].value,path:e[50].path,expandedMap:e[50].expandedMap,enforceStringMap:e[50].enforceStringMap,visibleSectionsMap:e[50].visibleSectionsMap,validationErrorsMap:e[50].validationErrorsMap,searchResultItemsMap:e[50].searchResultItemsMap,selection:e[50].selection,context:e[8],onDragSelectionStart:e[26],$$slots:{identifier:[Bte]},$$scope:{ctx:e}}}),{key:n,first:null,c(){t=tt(),Te(i.$$.fragment),this.h()},l(r){t=tt(),De(i.$$.fragment,r),this.h()},h(){this.first=t},m(r,o){X(r,t,o),Oe(i,r,o),s=!0},p(r,o){e=r;const l={};o[0]&18687&&(l.value=e[50].value),o[0]&18687&&(l.path=e[50].path),o[0]&18687&&(l.expandedMap=e[50].expandedMap),o[0]&18687&&(l.enforceStringMap=e[50].enforceStringMap),o[0]&18687&&(l.visibleSectionsMap=e[50].visibleSectionsMap),o[0]&18687&&(l.validationErrorsMap=e[50].validationErrorsMap),o[0]&18687&&(l.searchResultItemsMap=e[50].searchResultItemsMap),o[0]&18687&&(l.selection=e[50].selection),o[0]&256&&(l.context=e[8]),o[0]&18687|o[1]&16&&(l.$$scope={dirty:o,ctx:e}),i.$set(l)},i(r){s||(B(i.$$.fragment,r),s=!0)},o(r){Q(i.$$.fragment,r),s=!1},d(r){r&&b(t),Re(i,r)}}}function SC(n){let e,t;return e=new Bee({props:{visibleSections:n[14]||jl,sectionIndex:n[49],total:n[0].length,path:n[1],pointer:n[9],onExpandSection:n[8].onExpandSection,selection:n[7]}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,s){const r={};s[0]&16384&&(r.visibleSections=i[14]||jl),s[0]&16384&&(r.sectionIndex=i[49]),s[0]&1&&(r.total=i[0].length),s[0]&2&&(r.path=i[1]),s[0]&512&&(r.pointer=i[9]),s[0]&256&&(r.onExpandSection=i[8].onExpandSection),s[0]&128&&(r.selection=i[7]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function EC(n,e){let t,i=[],s=new Map,r,o,l,a=e[20](e[1],e[0],e[47],e[2],e[3],e[4],e[5],e[6],e[7],e[11]);const c=f=>f[50].index;for(let f=0;f<a.length;f+=1){let h=nC(e,a,f),d=c(h);s.set(d,i[f]=yC(d,h))}let u=e[47].end<e[0].length&&SC(e);return{key:n,first:null,c(){t=tt();for(let f=0;f<i.length;f+=1)i[f].c();r=F(),u&&u.c(),o=tt(),this.h()},l(f){t=tt();for(let h=0;h<i.length;h+=1)i[h].l(f);r=j(f),u&&u.l(f),o=tt(),this.h()},h(){this.first=t},m(f,h){X(f,t,h);for(let d=0;d<i.length;d+=1)i[d].m(f,h);X(f,r,h),u&&u.m(f,h),X(f,o,h),l=!0},p(f,h){e=f,h[0]&68176383&&(a=e[20](e[1],e[0],e[47],e[2],e[3],e[4],e[5],e[6],e[7],e[11]),He(),i=Zu(i,h,c,1,e,a,s,r.parentNode,xd,yC,r,nC),qe()),e[47].end<e[0].length?u?(u.p(e,h),h[0]&16385&&B(u,1)):(u=SC(e),u.c(),B(u,1),u.m(o.parentNode,o)):u&&(He(),Q(u,1,1,()=>{u=null}),qe())},i(f){if(!l){for(let h=0;h<a.length;h+=1)B(i[h]);B(u),l=!0}},o(f){for(let h=0;h<i.length;h+=1)Q(i[h]);Q(u),l=!1},d(f){f&&b(t);for(let h=0;h<i.length;h+=1)i[h].d(f);f&&b(r),u&&u.d(f),f&&b(o)}}}function AC(n){let e,t,i;return{c(){e=C("div"),this.h()},l(s){e=k(s,"DIV",{class:!0,"data-type":!0}),T(e).forEach(b),this.h()},h(){S(e,"class","jse-insert-selection-area jse-after svelte-1dkd71f"),S(e,"data-type","insert-selection-area-after")},m(s,r){X(s,e,r),t||(i=Se(e,"click",n[30]),t=!0)},p:Xe,d(s){s&&b(e),t=!1,i()}}}function wC(n){let e,t,i;return t=new la({props:{selected:n[16]&&vr(n[7]),onContextMenu:n[32]}}),{c(){e=C("div"),Te(t.$$.fragment),this.h()},l(s){e=k(s,"DIV",{class:!0,"data-type":!0,style:!0,title:!0});var r=T(e);De(t.$$.fragment,r),r.forEach(b),this.h()},h(){S(e,"class","jse-insert-area jse-after svelte-1dkd71f"),S(e,"data-type","insert-selection-area-after"),S(e,"style",n[18]),S(e,"title",Tv),$e(e,"jse-hovered",n[10]===Iu),$e(e,"jse-selected",n[16]&&vr(n[7]))},m(s,r){X(s,e,r),Oe(t,e,null),i=!0},p(s,r){const o={};r[0]&65664&&(o.selected=s[16]&&vr(s[7])),t.$set(o),(!i||r[0]&262144)&&S(e,"style",s[18]),(!i||r[0]&1024)&&$e(e,"jse-hovered",s[10]===Iu),(!i||r[0]&65664)&&$e(e,"jse-selected",s[16]&&vr(s[7]))},i(s){i||(B(t.$$.fragment,s),i=!0)},o(s){Q(t.$$.fragment,s),i=!1},d(s){s&&b(e),Re(t)}}}function Lte(n){let e,t,i,s,r,o,l=!n[8].readOnly&&(n[10]===Iu||n[16]&&vr(n[7])),a,c,u,f,h;const d=[Ste,yte,_te],m=[];function g(v,y){return y[0]&1&&(t=null),y[0]&1&&(i=null),t==null&&(t=!!Array.isArray(v[0])),t?0:(i==null&&(i=!!Fi(v[0])),i?1:2)}s=g(n,[-1,-1]),r=m[s]=d[s](n);let _=l&&wC(n);return{c(){e=C("div"),r.c(),o=F(),_&&_.c(),this.h()},l(v){e=k(v,"DIV",{class:!0,"data-path":!0});var y=T(e);r.l(y),o=j(y),_&&_.l(y),y.forEach(b),this.h()},h(){S(e,"class",a=xe(lc("jse-json-node",{"jse-expanded":n[12]},n[8].onClassName(n[1],n[0])))+" svelte-1dkd71f"),S(e,"data-path",c=w1(n[1])),$e(e,"jse-root",n[17]),$e(e,"jse-selected",n[16]&&Sn(n[7])),$e(e,"jse-selected-key",n[16]&&hi(n[7])),$e(e,"jse-selected-value",n[16]&&yn(n[7])),$e(e,"jse-hovered",n[10]===r1)},m(v,y){X(v,e,y),m[s].m(e,null),p(e,o),_&&_.m(e,null),u=!0,f||(h=[Se(e,"mousedown",n[24]),Se(e,"mousemove",n[25]),Se(e,"mouseover",n[27]),Se(e,"mouseout",n[28]),Se(e,"focus",void 0),Se(e,"blur",void 0)],f=!0)},p(v,y){let E=s;s=g(v,y),s===E?m[s].p(v,y):(He(),Q(m[E],1,1,()=>{m[E]=null}),qe(),r=m[s],r?r.p(v,y):(r=m[s]=d[s](v),r.c()),B(r,1),r.m(e,o)),y[0]&66944&&(l=!v[8].readOnly&&(v[10]===Iu||v[16]&&vr(v[7]))),l?_?(_.p(v,y),y[0]&66944&&B(_,1)):(_=wC(v),_.c(),B(_,1),_.m(e,null)):_&&(He(),Q(_,1,1,()=>{_=null}),qe()),(!u||y[0]&4355&&a!==(a=xe(lc("jse-json-node",{"jse-expanded":v[12]},v[8].onClassName(v[1],v[0])))+" svelte-1dkd71f"))&&S(e,"class",a),(!u||y[0]&2&&c!==(c=w1(v[1])))&&S(e,"data-path",c),(!u||y[0]&135427)&&$e(e,"jse-root",v[17]),(!u||y[0]&70019)&&$e(e,"jse-selected",v[16]&&Sn(v[7])),(!u||y[0]&70019)&&$e(e,"jse-selected-key",v[16]&&hi(v[7])),(!u||y[0]&70019)&&$e(e,"jse-selected-value",v[16]&&yn(v[7])),(!u||y[0]&5379)&&$e(e,"jse-hovered",v[10]===r1)},i(v){u||(B(r),B(_),u=!0)},o(v){Q(r),Q(_),u=!1},d(v){v&&b(e),m[s].d(),_&&_.d(),f=!1,an(h)}}}function Qu(n){return`margin-left: calc(${n} * var(--jse-indent-size))`}function Wte(n,e,t){let i,s,{$$slots:r={},$$scope:o}=e,{value:l}=e,{path:a}=e,{expandedMap:c}=e,{enforceStringMap:u}=e,{visibleSectionsMap:f}=e,{validationErrorsMap:h}=e,{searchResultItemsMap:d}=e,{selection:m}=e,{context:g}=e,{onDragSelectionStart:_}=e;const v=Ts("jsoneditor:JSONNode");let y,E,w;const A=jG();let I,R,D,N,W,H;function P(fe,M,ae,de,$,ee,ie,me,ue){let se=Object.keys(M).map(_e=>{const ke=a1(I,_e);return{key:_e,value:M[_e],path:A(fe.concat(_e)),pointer:ke,expandedMap:Rr(ae,ke),enforceStringMap:Rr(de,ke),visibleSectionsMap:Rr($,ke),validationErrorsMap:Rr(ee,ke),keySearchResultItemsMap:Z$(ie,ke),valueSearchResultItemsMap:Rr(ie,ke),selection:Rw(me,ke)}});return ue&&ue.offset!==0&&(se=zS(se,ue.selectionStartIndex,ue.selectionItemsCount,ue.offset)),se}function Y(fe,M,ae,de,$,ee,ie,me,ue,se){const _e=ae.start,ke=Math.min(ae.end,M.length);let Ce=[];for(let ge=_e;ge<ke;ge++){const Me=a1(I,ge);Ce.push({index:ge,value:M[ge],path:A(fe.concat(String(ge))),pointer:Me,expandedMap:Rr(de,Me),enforceStringMap:Rr($,Me),visibleSectionsMap:Rr(ee,Me),validationErrorsMap:Rr(ie,Me),searchResultItemsMap:Rr(me,Me),selection:Rw(ue,Me)})}if(se&&se.offset!==0){const ge=Ce.map(Me=>Me.index);Ce=zS(Ce,se.selectionStartIndex,se.selectionItemsCount,se.offset);for(let Me=0;Me<Ce.length;Me++)Ce[Me].index=ge[Me]}return Ce}function O(fe){fe.stopPropagation();const M=fe.ctrlKey;g.onExpand(a,!R,M)}function L(fe){fe.stopPropagation(),g.onExpand(a,!0)}function U(fe,M){const ae=Of(a,Object.keys(l),fe,M);return g.onPatch(ae),Yt(Jo(ae[0].path))}function K(fe){if(Iz(fe.target)||fe.which===1&&rR(fe.target,"BUTTON"))return;fe.stopPropagation(),fe.preventDefault(),document.addEventListener("mousemove",q,!0),document.addEventListener("mouseup",x);const M=Dp(fe.target),ae=g.getJson(),de=g.getDocumentState();if(D$(m,a,M)){fe.button===0&&_(fe);return}if(Ui.selecting=!0,Ui.selectionAnchor=a,Ui.selectionAnchorType=M,Ui.selectionFocus=a,fe.shiftKey)m&&g.onSelect(di(ae,m.anchorPath,a));else if(M===Mn.multi)if(i&&fe.target.hasAttribute("data-path")){const $=Yt(yN(l,de));g.onSelect(jb($))}else g.onSelect(di(ae,a,a));else g.onSelect(Ow(ae,M,a));g.focus()}function te(fe){if(Ui.selecting){fe.preventDefault(),fe.stopPropagation(),Ui.selectionFocus==null&&window.getSelection&&window.getSelection().empty();const M=Dp(fe.target);if(!wn(a,Ui.selectionFocus)||M!==Ui.selectionAnchorType){Ui.selectionFocus=a,Ui.selectionAnchorType=M;const ae=g.getJson();g.onSelect(di(ae,Ui.selectionAnchor,Ui.selectionFocus))}}}function q(fe){g.onDrag(fe)}function x(fe){Ui.selecting&&(Ui.selecting=!1,fe.stopPropagation()),g.onDragEnd(),document.removeEventListener("mousemove",q,!0),document.removeEventListener("mouseup",x)}function Z(){var fe,M;return((M=(fe=g.findElement([]))==null?void 0:fe.getBoundingClientRect())==null?void 0:M.top)||0}function V(fe,M){const de=Z()-fe.initialContentTop;return M.clientY-fe.initialClientY-de}function ce(fe){if(g.readOnly)return;const M=bn(m.focusPath);if(!wn(a,M)){_(fe);return}const ae=ve(m,N||jl);if(v("dragSelectionStart",{selection:m,items:ae}),!ae){v("Cannot drag the current selection (probably spread over multiple sections)");return}const de=rc(m),$=ae.findIndex(ue=>wn(ue.path,de)),ee=g.getJson(),ie=g.getDocumentState(),{offset:me}=hg({json:ee,documentState:ie,deltaY:0,items:ae});t(11,w={initialTarget:fe.target,initialClientY:fe.clientY,initialContentTop:Z(),selectionStartIndex:$,selectionItemsCount:wN(m).length,items:ae,offset:me,didMoveItems:!1}),Ui.dragging=!0,document.addEventListener("mousemove",pe,!0),document.addEventListener("mouseup",oe)}function pe(fe){if(w){const M=g.getJson(),ae=g.getDocumentState(),de=V(w,fe),{offset:$}=hg({json:M,documentState:ae,deltaY:de,items:w.items});$!==w.offset&&(v("drag selection",$,de),t(11,w={...w,offset:$,didMoveItems:!0}))}}function oe(fe){if(w){const M=g.getJson(),ae=g.getDocumentState(),de=V(w,fe),{operations:$,updatedSelection:ee}=hg({json:M,documentState:ae,deltaY:de,items:w.items});if($)g.onPatch($,(ie,me)=>({state:{...me,selection:ee||m}}));else if(fe.target===w.initialTarget&&!w.didMoveItems){const ie=Dp(fe.target),me=Dz(fe.target);me&&g.onSelect(Ow(M,ie,me))}t(11,w=void 0),Ui.dragging=!1,document.removeEventListener("mousemove",pe,!0),document.removeEventListener("mouseup",oe)}}function ve(fe,M){const ae=[];function de($){const ee=a.concat($),ie=g.findElement(ee);ie!=null&&ae.push({path:ee,height:ie.clientHeight})}if(Array.isArray(l)){const $=rc(fe),ee=lp(fe),ie=Yt($),me=Yt(ee),ue=M.find(ke=>ie>=ke.start&&me<=ke.end);if(!ue)return null;const{start:se,end:_e}=ue;JO(se,Math.min(l.length,_e),ke=>de(String(ke)))}else Object.keys(l).forEach(de);return ae}function Ne(fe){Ui.selecting||Ui.dragging||(fe.stopPropagation(),El(fe.target,"data-type","selectable-value")?t(10,y=r1):El(fe.target,"data-type","insert-selection-area-inside")?t(10,y=vo):El(fe.target,"data-type","insert-selection-area-after")&&t(10,y=Iu),clearTimeout(E))}function J(fe){fe.stopPropagation(),E=setTimeout(()=>t(10,y=void 0))}function Ie(fe){fe.shiftKey||(fe.stopPropagation(),fe.preventDefault(),g.onSelect(Ur(a)))}function Ue(fe){fe.shiftKey||(fe.stopPropagation(),fe.preventDefault(),g.onSelect(_o(a)))}function re(fe){g.onSelect(Ur(a)),g.onContextMenu(fe)}function Le(fe){g.onSelect(_o(a)),g.onContextMenu(fe)}return n.$$set=fe=>{"value"in fe&&t(0,l=fe.value),"path"in fe&&t(1,a=fe.path),"expandedMap"in fe&&t(2,c=fe.expandedMap),"enforceStringMap"in fe&&t(3,u=fe.enforceStringMap),"visibleSectionsMap"in fe&&t(4,f=fe.visibleSectionsMap),"validationErrorsMap"in fe&&t(5,h=fe.validationErrorsMap),"searchResultItemsMap"in fe&&t(6,d=fe.searchResultItemsMap),"selection"in fe&&t(7,m=fe.selection),"context"in fe&&t(8,g=fe.context),"onDragSelectionStart"in fe&&t(33,_=fe.onDragSelectionStart),"$$scope"in fe&&t(35,o=fe.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&2&&t(9,I=mt(a)),n.$$.dirty[0]&516&&t(12,R=c?c[I]===!0:!1),n.$$.dirty[0]&777&&t(13,D=kf(l,u,I,g.parser)),n.$$.dirty[0]&528&&t(14,N=f?f[I]:void 0),n.$$.dirty[0]&544&&t(15,W=h?h[I]:void 0),n.$$.dirty[0]&640&&t(16,H=m?m.pointersMap[I]===!0:!1),n.$$.dirty[0]&2&&t(17,i=a.length===0),n.$$.dirty[0]&2&&t(18,s=Qu(a.length))},[l,a,c,u,f,h,d,m,g,I,y,w,R,D,N,W,H,i,s,P,Y,O,L,U,K,te,ce,Ne,J,Ie,Ue,re,Le,_,r,o]}class zb extends rt{constructor(e){super(),ot(this,e,Wte,Lte,fn,{value:0,path:1,expandedMap:2,enforceStringMap:3,visibleSectionsMap:4,validationErrorsMap:5,searchResultItemsMap:6,selection:7,context:8,onDragSelectionStart:33},null,[-1,-1])}}const Ute=zb;function Vte(n){let e,t;return e=new ib({props:{items:n[0]}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,[s]){const r={};s&1&&(r.items=i[0]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function Fte(n,e,t){let i,s,r,o,l,a,c,{json:u}=e,{selection:f}=e,{readOnly:h}=e,{showSearch:d=!1}=e,{historyState:m}=e,{onExpandAll:g}=e,{onCollapseAll:_}=e,{onUndo:v}=e,{onRedo:y}=e,{onSort:E}=e,{onTransform:w}=e,{onContextMenu:A}=e,{onCopy:I}=e,{onRenderMenu:R=Gn}=e;function D(){t(1,d=!d)}return n.$$set=N=>{"json"in N&&t(2,u=N.json),"selection"in N&&t(3,f=N.selection),"readOnly"in N&&t(4,h=N.readOnly),"showSearch"in N&&t(1,d=N.showSearch),"historyState"in N&&t(5,m=N.historyState),"onExpandAll"in N&&t(6,g=N.onExpandAll),"onCollapseAll"in N&&t(7,_=N.onCollapseAll),"onUndo"in N&&t(8,v=N.onUndo),"onRedo"in N&&t(9,y=N.onRedo),"onSort"in N&&t(10,E=N.onSort),"onTransform"in N&&t(11,w=N.onTransform),"onContextMenu"in N&&t(12,A=N.onContextMenu),"onCopy"in N&&t(13,I=N.onCopy),"onRenderMenu"in N&&t(14,R=N.onRenderMenu)},n.$$.update=()=>{n.$$.dirty&4&&t(20,i=u!==void 0),n.$$.dirty&8,n.$$.dirty&1048584&&t(17,s=i&&(Sn(f)||hi(f)||yn(f))),n.$$.dirty&68&&t(19,r={icon:XG,title:"Expand all",className:"jse-expand-all",onClick:g,disabled:!Ri(u)}),n.$$.dirty&132&&t(18,o={icon:QG,title:"Collapse all",className:"jse-collapse-all",onClick:_,disabled:!Ri(u)}),n.$$.dirty&4&&t(16,l={icon:nb,title:"Search (Ctrl+F)",className:"jse-search",onClick:D,disabled:u===void 0}),n.$$.dirty&999220&&t(15,a=h?[r,o,{separator:!0},{icon:Mu,title:"Copy (Ctrl+C)",className:"jse-copy",onClick:I,disabled:!s},{separator:!0},l,{space:!0}]:[r,o,{separator:!0},{icon:tb,title:"Sort",className:"jse-sort",onClick:E,disabled:h||u===void 0},{icon:xv,title:"Transform contents (filter, sort, project)",className:"jse-transform",onClick:w,disabled:h||u===void 0},l,{icon:oG,title:sO,className:"jse-contextmenu",onClick:A},{separator:!0},{icon:fR,title:"Undo (Ctrl+Z)",className:"jse-undo",onClick:v,disabled:!m.canUndo},{icon:uR,title:"Redo (Ctrl+Shift+Z)",className:"jse-redo",onClick:y,disabled:!m.canRedo},{space:!0}]),n.$$.dirty&49152&&t(0,c=R("tree",a)||a)},[c,d,u,f,h,m,g,_,v,y,E,w,A,I,R,a,l,s,o,r,i]}class jte extends rt{constructor(e){super(),ot(this,e,Fte,Vte,fn,{json:2,selection:3,readOnly:4,showSearch:1,historyState:5,onExpandAll:6,onCollapseAll:7,onUndo:8,onRedo:9,onSort:10,onTransform:11,onContextMenu:12,onCopy:13,onRenderMenu:14})}}const Hte=jte;function CC(n){let e,t,i,s,r,o,l,a,c,u,f,h,d,m,g,_,v,y;return{c(){e=C("ul"),t=C("li"),i=z("Click inside the editor"),s=F(),r=C("li"),o=z("Paste clipboard data using "),l=C("span"),a=z("Ctrl+V"),c=F(),u=C("li"),f=z("Create a new object by typing "),h=C("span"),d=z("{"),m=F(),g=C("li"),_=z("Create a new array by typing "),v=C("span"),y=z("["),this.h()},l(E){e=k(E,"UL",{class:!0});var w=T(e);t=k(w,"LI",{class:!0});var A=T(t);i=G(A,"Click inside the editor"),A.forEach(b),s=j(w),r=k(w,"LI",{class:!0});var I=T(r);o=G(I,"Paste clipboard data using "),l=k(I,"SPAN",{class:!0});var R=T(l);a=G(R,"Ctrl+V"),R.forEach(b),I.forEach(b),c=j(w),u=k(w,"LI",{class:!0});var D=T(u);f=G(D,"Create a new object by typing "),h=k(D,"SPAN",{class:!0});var N=T(h);d=G(N,"{"),N.forEach(b),D.forEach(b),m=j(w),g=k(w,"LI",{class:!0});var W=T(g);_=G(W,"Create a new array by typing "),v=k(W,"SPAN",{class:!0});var H=T(v);y=G(H,"["),H.forEach(b),W.forEach(b),w.forEach(b),this.h()},h(){S(t,"class","svelte-17jij2m"),S(l,"class","jse-bold svelte-17jij2m"),S(r,"class","svelte-17jij2m"),S(h,"class","jse-bold svelte-17jij2m"),S(u,"class","svelte-17jij2m"),S(v,"class","jse-bold svelte-17jij2m"),S(g,"class","svelte-17jij2m"),S(e,"class","svelte-17jij2m")},m(E,w){X(E,e,w),p(e,t),p(t,i),p(e,s),p(e,r),p(r,o),p(r,l),p(l,a),p(e,c),p(e,u),p(u,f),p(u,h),p(h,d),p(e,m),p(e,g),p(g,_),p(g,v),p(v,y)},d(E){E&&b(e)}}}function qte(n){let e,t,i,s,r,o,l,a=!n[0]&&CC();return{c(){e=C("div"),t=C("div"),i=F(),s=C("div"),r=z(`Empty document
    `),a&&a.c(),o=F(),l=C("div"),this.h()},l(c){e=k(c,"DIV",{class:!0});var u=T(e);t=k(u,"DIV",{class:!0}),T(t).forEach(b),i=j(u),s=k(u,"DIV",{class:!0});var f=T(s);r=G(f,`Empty document
    `),a&&a.l(f),f.forEach(b),o=j(u),l=k(u,"DIV",{class:!0}),T(l).forEach(b),u.forEach(b),this.h()},h(){S(t,"class","jse-space jse-before svelte-17jij2m"),S(s,"class","jse-contents svelte-17jij2m"),S(l,"class","jse-space jse-after svelte-17jij2m"),S(e,"class","jse-welcome svelte-17jij2m")},m(c,u){X(c,e,u),p(e,t),p(e,i),p(e,s),p(s,r),a&&a.m(s,null),p(e,o),p(e,l)},p(c,[u]){c[0]?a&&(a.d(1),a=null):a||(a=CC(),a.c(),a.m(s,null))},i:Xe,o:Xe,d(c){c&&b(e),a&&a.d()}}}function zte(n,e,t){let{readOnly:i}=e;return n.$$set=s=>{"readOnly"in s&&t(0,i=s.readOnly)},[i]}class Gte extends rt{constructor(e){super(),ot(this,e,zte,qte,fn,{readOnly:0})}}const Kte=Gte;var C0={},Xte={get exports(){return C0},set exports(n){C0=n}};/*
 * @version    1.4.0
 * @date       2015-10-26
 * @stability  3 - Stable
 * @author     Lauri Rooden (https://github.com/litejs/natural-compare-lite)
 * @license    MIT License
 */var kC=function(n,e){var t,i,s=1,r=0,o=0,l=String.alphabet;function a(c,u,f){if(f){for(t=u;f=a(c,t),f<76&&f>65;)++t;return+c.slice(u-1,t)}return f=l&&l.indexOf(c.charAt(u)),f>-1?f+76:(f=c.charCodeAt(u)||0,f<45||f>127?f:f<46?65:f<48?f-1:f<58?f+18:f<65?f-11:f<91?f+11:f<97?f-37:f<123?f+5:f-63)}if((n+="")!=(e+="")){for(;s;)if(i=a(n,r++),s=a(e,o++),i<76&&s<76&&i>66&&s>66&&(i=a(n,r,r),s=a(e,o,r=t),o=t),i!=s)return i<s?-1:1}return 0};try{Xte.exports=kC}catch{String.naturalCompare=kC}function Gb(n,e){const t=typeof n=="string"?n.toLowerCase():n,i=typeof e=="string"?e.toLowerCase():e;return C0(t,i)}function Qte(n,e=[],t=1){const i=wt(n,e),r=Object.keys(i).slice();r.sort((l,a)=>t*Gb(l,a));const o=[];for(let l=0;l<r.length;l++){const a=r[l],c=mt(e.concat(a));o.push({op:"move",from:c,path:c})}return o}function Yte(n,e=[],t=[],i=1){const s=Jte(t,i),r=wt(n,e);return[{op:"replace",path:mt(e),value:r.slice(0).sort(s)}]}function Jte(n,e){return function(i,s){const r=wt(i,n),o=wt(s,n);return r===void 0?e:o===void 0?-e:typeof r!="string"&&typeof o!="string"?r>o?e:r<o?-e:0:e*Gb(r,o)}}function IC(n,e,t){const i=n.slice();return i[4]=e[t],i}function TC(n,e){let t,i=Kd(e[4],RC)+"",s,r,o,l;function a(){return e[3](e[4])}return{key:n,first:null,c(){t=C("button"),s=z(i),this.h()},l(c){t=k(c,"BUTTON",{type:!0,class:!0,title:!0});var u=T(t);s=G(u,i),u.forEach(b),this.h()},h(){S(t,"type","button"),S(t,"class","jse-navigation-bar-dropdown-item svelte-1rtf8mz"),S(t,"title",r=e[4]),$e(t,"jse-selected",e[4]===e[1]),this.first=t},m(c,u){X(c,t,u),p(t,s),o||(l=Se(t,"click",D0(a)),o=!0)},p(c,u){e=c,u&1&&i!==(i=Kd(e[4],RC)+"")&&Be(s,i),u&1&&r!==(r=e[4])&&S(t,"title",r),u&3&&$e(t,"jse-selected",e[4]===e[1])},d(c){c&&b(t),o=!1,l()}}}function OC(n){let e,t;return{c(){e=C("button"),t=z("..."),this.h()},l(i){e=k(i,"BUTTON",{type:!0,class:!0,title:!0});var s=T(e);t=G(s,"..."),s.forEach(b),this.h()},h(){S(e,"type","button"),S(e,"class","jse-navigation-bar-dropdown-item svelte-1rtf8mz"),S(e,"title","Limited to "+Yc+" items")},m(i,s){X(i,e,s),p(e,t)},p:Xe,d(i){i&&b(e)}}}function Zte(n){let e,t=[],i=new Map,s,r=jS(n[0],Yc);const o=a=>a[4];for(let a=0;a<r.length;a+=1){let c=IC(n,r,a),u=o(c);i.set(u,t[a]=TC(u,c))}let l=n[0].length>Yc&&OC();return{c(){e=C("div");for(let a=0;a<t.length;a+=1)t[a].c();s=F(),l&&l.c(),this.h()},l(a){e=k(a,"DIV",{class:!0});var c=T(e);for(let u=0;u<t.length;u+=1)t[u].l(c);s=j(c),l&&l.l(c),c.forEach(b),this.h()},h(){S(e,"class","jse-navigation-bar-dropdown svelte-1rtf8mz")},m(a,c){X(a,e,c);for(let u=0;u<t.length;u+=1)t[u].m(e,null);p(e,s),l&&l.m(e,null)},p(a,[c]){c&7&&(r=jS(a[0],Yc),t=Zu(t,c,o,1,a,r,i,e,HN,TC,s,IC)),a[0].length>Yc?l?l.p(a,c):(l=OC(),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},i:Xe,o:Xe,d(a){a&&b(e);for(let c=0;c<t.length;c+=1)t[c].d();l&&l.d()}}}const Yc=100,RC=30;function xte(n,e,t){let{items:i}=e,{selectedItem:s}=e,{onSelect:r}=e;const o=l=>r(l);return n.$$set=l=>{"items"in l&&t(0,i=l.items),"selectedItem"in l&&t(1,s=l.selectedItem),"onSelect"in l&&t(2,r=l.onSelect)},[i,s,r,o]}class $te extends rt{constructor(e){super(),ot(this,e,xte,Zte,fn,{items:0,selectedItem:1,onSelect:2})}}const ene=$te;function DC(n){let e,t,i,s;return{c(){e=C("button"),t=z(n[2]),this.h()},l(r){e=k(r,"BUTTON",{type:!0,class:!0});var o=T(e);t=G(o,n[2]),o.forEach(b),this.h()},h(){S(e,"type","button"),S(e,"class","jse-navigation-bar-button svelte-4ttwnh")},m(r,o){X(r,e,o),p(e,t),i||(s=Se(e,"click",n[9]),i=!0)},p(r,o){o&4&&Be(t,r[2])},d(r){r&&b(e),i=!1,s()}}}function tne(n){let e,t,i,s,r,o,l;i=new qt({props:{data:cR}});let a=n[2]!==void 0&&DC(n);return{c(){e=C("div"),t=C("button"),Te(i.$$.fragment),s=F(),a&&a.c(),this.h()},l(c){e=k(c,"DIV",{class:!0});var u=T(e);t=k(u,"BUTTON",{type:!0,class:!0});var f=T(t);De(i.$$.fragment,f),f.forEach(b),s=j(u),a&&a.l(u),u.forEach(b),this.h()},h(){S(t,"type","button"),S(t,"class","jse-navigation-bar-button jse-navigation-bar-arrow svelte-4ttwnh"),$e(t,"jse-open",n[1]),S(e,"class","jse-navigation-bar-item svelte-4ttwnh")},m(c,u){X(c,e,u),p(e,t),Oe(i,t,null),p(e,s),a&&a.m(e,null),n[10](e),r=!0,o||(l=Se(t,"click",n[4]),o=!0)},p(c,[u]){(!r||u&2)&&$e(t,"jse-open",c[1]),c[2]!==void 0?a?a.p(c,u):(a=DC(c),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},i(c){r||(B(i.$$.fragment,c),r=!0)},o(c){Q(i.$$.fragment,c),r=!1},d(c){c&&b(e),Re(i),a&&a.d(),n[10](null),o=!1,l()}}}function nne(n,e,t){let i,s;const{openAbsolutePopup:r,closeAbsolutePopup:o}=Nn("absolute-popup");let{path:l}=e,{index:a}=e,{onSelect:c}=e,{getItems:u}=e,f,h=!1,d;function m(y){o(d),c(i.concat(y))}function g(){if(f){t(1,h=!0);const y={items:u(i),selectedItem:s,onSelect:m};d=r(ene,y,{anchor:f,closeOnOuterClick:!0,onClose:()=>{t(1,h=!1)}})}}const _=()=>m(s);function v(y){Vt[y?"unshift":"push"](()=>{f=y,t(0,f)})}return n.$$set=y=>{"path"in y&&t(5,l=y.path),"index"in y&&t(6,a=y.index),"onSelect"in y&&t(7,c=y.onSelect),"getItems"in y&&t(8,u=y.getItems)},n.$$.update=()=>{n.$$.dirty&96&&(i=l.slice(0,a)),n.$$.dirty&96&&t(2,s=l[a])},[f,h,s,m,g,l,a,c,u,_,v]}class ine extends rt{constructor(e){super(),ot(this,e,nne,tne,fn,{path:5,index:6,onSelect:7,getItems:8})}}const ON=ine;function NC(n){let e,t,i,s,r,o;return t=new qt({props:{data:sa}}),{c(){e=C("button"),Te(t.$$.fragment),this.h()},l(l){e=k(l,"BUTTON",{type:!0,class:!0});var a=T(e);De(t.$$.fragment,a),a.forEach(b),this.h()},h(){S(e,"type","button"),S(e,"class","jse-navigation-bar-validation-error svelte-1etw4zg")},m(l,a){X(l,e,a),Oe(t,e,null),s=!0,r||(o=ac(i=Hb.call(null,e,{text:n[3],...n[4]})),r=!0)},p(l,a){i&&Bn(i.update)&&a&8&&i.update.call(null,{text:l[3],...l[4]})},i(l){s||(B(t.$$.fragment,l),s=!0)},o(l){Q(t.$$.fragment,l),s=!1},d(l){l&&b(e),Re(t),r=!1,o()}}}function PC(n){let e,t;return{c(){e=C("div"),t=z("Copied!"),this.h()},l(i){e=k(i,"DIV",{class:!0});var s=T(e);t=G(s,"Copied!"),s.forEach(b),this.h()},h(){S(e,"class","jse-copied-text svelte-1etw4zg")},m(i,s){X(i,e,s),p(e,t)},d(i){i&&b(e)}}}function sne(n){let e,t,i,s,r,o,l,a,c,u,f=n[3]&&NC(n),h=n[2]&&PC();return l=new qt({props:{data:Mu}}),{c(){e=C("div"),t=C("input"),i=F(),f&&f.c(),s=F(),h&&h.c(),r=F(),o=C("button"),Te(l.$$.fragment),this.h()},l(d){e=k(d,"DIV",{class:!0});var m=T(e);t=k(m,"INPUT",{type:!0,class:!0}),i=j(m),f&&f.l(m),s=j(m),h&&h.l(m),r=j(m),o=k(m,"BUTTON",{type:!0,class:!0,title:!0});var g=T(o);De(l.$$.fragment,g),g.forEach(b),m.forEach(b),this.h()},h(){S(t,"type","text"),S(t,"class","jse-navigation-bar-text svelte-1etw4zg"),t.value=n[0],S(o,"type","button"),S(o,"class","jse-navigation-bar-copy svelte-1etw4zg"),S(o,"title","Copy selected path to the clipboard"),$e(o,"copied",n[2]),S(e,"class","jse-navigation-bar-path-editor svelte-1etw4zg"),$e(e,"error",n[3])},m(d,m){X(d,e,m),p(e,t),n[15](t),p(e,i),f&&f.m(e,null),p(e,s),h&&h.m(e,null),p(e,r),p(e,o),Oe(l,o,null),a=!0,c||(u=[Se(t,"keydown",D0(n[6])),Se(t,"input",n[5]),Se(o,"click",n[7])],c=!0)},p(d,[m]){(!a||m&1&&t.value!==d[0])&&(t.value=d[0]),d[3]?f?(f.p(d,m),m&8&&B(f,1)):(f=NC(d),f.c(),B(f,1),f.m(e,s)):f&&(He(),Q(f,1,1,()=>{f=null}),qe()),d[2]?h||(h=PC(),h.c(),h.m(e,r)):h&&(h.d(1),h=null),(!a||m&4)&&$e(o,"copied",d[2]),(!a||m&8)&&$e(e,"error",d[3])},i(d){a||(B(f),B(l.$$.fragment,d),a=!0)},o(d){Q(f),Q(l.$$.fragment,d),a=!1},d(d){d&&b(e),n[15](null),f&&f.d(),h&&h.d(),Re(l),c=!1,an(u)}}}const rne=1e3;function one(n,e,t){let i;const s=Nn("absolute-popup");let{path:r}=e,{pathParser:o}=e,{onChange:l}=e,{onClose:a}=e,{onError:c}=e,{pathExists:u}=e,f,h,d=!1,m,g=!1;Mi(()=>{_()}),_r(()=>{clearTimeout(m)});function _(){f.focus()}function v(R){try{const D=o.parse(R);return y(D),{path:D,error:void 0}}catch(D){return{path:void 0,error:D}}}function y(R){if(!u(R))throw new Error("Path does not exist in current document")}function E(R){t(0,h=R.currentTarget.value)}function w(R){const D=ia(R);if(D==="Escape"&&a(),D==="Enter"){t(14,d=!0);const N=v(h);N.path!==void 0?l(N.path):c(N.error)}}function A(){A0(h),t(2,g=!0),m=setTimeout(()=>t(2,g=!1),rne),_()}function I(R){Vt[R?"unshift":"push"](()=>{f=R,t(1,f)})}return n.$$set=R=>{"path"in R&&t(8,r=R.path),"pathParser"in R&&t(9,o=R.pathParser),"onChange"in R&&t(10,l=R.onChange),"onClose"in R&&t(11,a=R.onClose),"onError"in R&&t(12,c=R.onError),"pathExists"in R&&t(13,u=R.pathExists)},n.$$.update=()=>{n.$$.dirty&768&&t(0,h=o.stringify(r)),n.$$.dirty&16385&&t(3,i=d?v(h).error:void 0)},[h,f,g,i,s,E,w,A,r,o,l,a,c,u,d,I]}class lne extends rt{constructor(e){super(),ot(this,e,one,sne,It,{path:8,pathParser:9,onChange:10,onClose:11,onError:12,pathExists:13})}}const ane=lne;function MC(n,e,t){const i=n.slice();return i[20]=e[t],i[22]=t,i}function cne(n){let e,t;return e=new ane({props:{path:n[3],onClose:n[12],onChange:n[13],onError:n[1],pathExists:n[9],pathParser:n[2]}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,s){const r={};s&8&&(r.path=i[3]),s&2&&(r.onError=i[1]),s&4&&(r.pathParser=i[2]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function une(n){let e=[],t=new Map,i,s,r,o=n[3];const l=c=>c[22];for(let c=0;c<o.length;c+=1){let u=MC(n,o,c),f=l(u);t.set(f,e[c]=BC(f,u))}let a=n[7]&&LC(n);return{c(){for(let c=0;c<e.length;c+=1)e[c].c();i=F(),a&&a.c(),s=tt()},l(c){for(let u=0;u<e.length;u+=1)e[u].l(c);i=j(c),a&&a.l(c),s=tt()},m(c,u){for(let f=0;f<e.length;f+=1)e[f].m(c,u);X(c,i,u),a&&a.m(c,u),X(c,s,u),r=!0},p(c,u){u&1288&&(o=c[3],He(),e=Zu(e,u,l,1,c,o,t,i.parentNode,xd,BC,i,MC),qe()),c[7]?a?(a.p(c,u),u&128&&B(a,1)):(a=LC(c),a.c(),B(a,1),a.m(s.parentNode,s)):a&&(He(),Q(a,1,1,()=>{a=null}),qe())},i(c){if(!r){for(let u=0;u<o.length;u+=1)B(e[u]);B(a),r=!0}},o(c){for(let u=0;u<e.length;u+=1)Q(e[u]);Q(a),r=!1},d(c){for(let u=0;u<e.length;u+=1)e[u].d(c);c&&b(i),a&&a.d(c),c&&b(s)}}}function BC(n,e){let t,i,s;return i=new ON({props:{getItems:e[8],path:e[3],index:e[22],onSelect:e[10]}}),{key:n,first:null,c(){t=tt(),Te(i.$$.fragment),this.h()},l(r){t=tt(),De(i.$$.fragment,r),this.h()},h(){this.first=t},m(r,o){X(r,t,o),Oe(i,r,o),s=!0},p(r,o){e=r;const l={};o&8&&(l.path=e[3]),o&8&&(l.index=e[22]),i.$set(l)},i(r){s||(B(i.$$.fragment,r),s=!0)},o(r){Q(i.$$.fragment,r),s=!1},d(r){r&&b(t),Re(i,r)}}}function LC(n){let e,t;return e=new ON({props:{getItems:n[8],path:n[3],index:void 0,onSelect:n[10]}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,s){const r={};s&8&&(r.path=i[3]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function fne(n){let e,t,i,s,r,o,l=!Ri(n[0])&&!n[6]?"Navigation bar":"",a,c,u,f,h,d,m;const g=[une,cne],_=[];function v(y,E){return y[6]?1:0}return t=v(n),i=_[t]=g[t](n),u=new qt({props:{data:n[6]?$S:xS}}),{c(){e=C("div"),i.c(),s=F(),r=C("button"),o=C("span"),a=z(l),c=F(),Te(u.$$.fragment),this.h()},l(y){e=k(y,"DIV",{class:!0});var E=T(e);i.l(E),s=j(E),r=k(E,"BUTTON",{type:!0,class:!0,title:!0});var w=T(r);o=k(w,"SPAN",{class:!0});var A=T(o);a=G(A,l),A.forEach(b),c=j(w),De(u.$$.fragment,w),w.forEach(b),E.forEach(b),this.h()},h(){S(o,"class","jse-navigation-bar-space svelte-12s2kay"),S(r,"type","button"),S(r,"class","jse-navigation-bar-edit svelte-12s2kay"),S(r,"title",f=n[6]?"Cancel editing the selected path":"Edit the selected path"),$e(r,"flex",!n[6]),$e(r,"editing",n[6]),S(e,"class","jse-navigation-bar svelte-12s2kay")},m(y,E){X(y,e,E),_[t].m(e,null),p(e,s),p(e,r),p(r,o),p(o,a),p(r,c),Oe(u,r,null),n[16](r),n[17](e),h=!0,d||(m=Se(r,"click",n[11]),d=!0)},p(y,[E]){let w=t;t=v(y),t===w?_[t].p(y,E):(He(),Q(_[w],1,1,()=>{_[w]=null}),qe(),i=_[t],i?i.p(y,E):(i=_[t]=g[t](y),i.c()),B(i,1),i.m(e,s)),(!h||E&65)&&l!==(l=!Ri(y[0])&&!y[6]?"Navigation bar":"")&&Be(a,l);const A={};E&64&&(A.data=y[6]?$S:xS),u.$set(A),(!h||E&64&&f!==(f=y[6]?"Cancel editing the selected path":"Edit the selected path"))&&S(r,"title",f),(!h||E&64)&&$e(r,"flex",!y[6]),(!h||E&64)&&$e(r,"editing",y[6])},i(y){h||(B(i),B(u.$$.fragment,y),h=!0)},o(y){Q(i),Q(u.$$.fragment,y),h=!1},d(y){y&&b(e),_[t].d(),Re(u),n[16](null),n[17](null),d=!1,m()}}}function hne(n,e,t){let i,s;const r=Ts("jsoneditor:NavigationBar");let{json:o}=e,{documentState:l}=e,{onSelect:a}=e,{onError:c}=e,{pathParser:u}=e,f,h,d=!1;function m(){setTimeout(()=>{if(f&&f.scrollTo){const R=f.scrollWidth-f.clientWidth;R>0&&(r("scrollTo ",R),f.scrollTo({left:R,behavior:"smooth"}))}})}function g(R){r("get items for path",R);const D=wt(o,R);if(Array.isArray(D))return nz(0,D.length).map(String);if(Fi(D)){const W=Object.keys(D).slice(0);return W.sort(Gb),W}else return[]}function _(R){return Yo(o,R)}function v(R){r("select path",JSON.stringify(R)),a(di(o,R,R))}function y(){t(6,d=!d)}function E(){t(6,d=!1)}function w(R){E(),v(R)}function A(R){Vt[R?"unshift":"push"](()=>{h=R,t(5,h)})}function I(R){Vt[R?"unshift":"push"](()=>{f=R,t(4,f)})}return n.$$set=R=>{"json"in R&&t(0,o=R.json),"documentState"in R&&t(14,l=R.documentState),"onSelect"in R&&t(15,a=R.onSelect),"onError"in R&&t(1,c=R.onError),"pathParser"in R&&t(2,u=R.pathParser)},n.$$.update=()=>{n.$$.dirty&16384&&t(3,i=l.selection?l.selection.focusPath:[]),n.$$.dirty&9&&t(7,s=Ri(wt(o,i))),n.$$.dirty&8&&m()},[o,c,u,i,f,h,d,s,g,_,v,y,E,w,l,a,A,I]}class dne extends rt{constructor(e){super(),ot(this,e,hne,fne,fn,{json:0,documentState:14,onSelect:15,onError:1,pathParser:2})}}const mne=dne;function WC(n){let e,t,i,s,r,o,l,a,c,u,f,h,d,m=n[3]!==-1?`${n[3]+1}/`:"",g,_,v,y,E,w,A,I,R,D,N,W,H,P,Y,O=!n[4]&&UC(n);const L=[gne,pne],U=[];function K(q,x){return q[2]?0:1}l=K(n),a=U[l]=L[l](n),E=new qt({props:{data:fG}}),I=new qt({props:{data:Jz}}),N=new qt({props:{data:_f}});let te=n[0]&&!n[4]&&VC(n);return{c(){e=C("div"),t=C("form"),O&&O.c(),i=F(),s=C("div"),r=C("div"),o=C("div"),a.c(),c=F(),u=C("label"),f=C("input"),h=F(),d=C("div"),g=z(m),_=z(n[10]),v=F(),y=C("button"),Te(E.$$.fragment),w=F(),A=C("button"),Te(I.$$.fragment),R=F(),D=C("button"),Te(N.$$.fragment),W=F(),te&&te.c(),this.h()},l(q){e=k(q,"DIV",{class:!0});var x=T(e);t=k(x,"FORM",{class:!0});var Z=T(t);O&&O.l(Z),i=j(Z),s=k(Z,"DIV",{class:!0});var V=T(s);r=k(V,"DIV",{class:!0});var ce=T(r);o=k(ce,"DIV",{class:!0});var pe=T(o);a.l(pe),pe.forEach(b),c=j(ce),u=k(ce,"LABEL",{class:!0,about:!0});var oe=T(u);f=k(oe,"INPUT",{class:!0,title:!0,type:!0,placeholder:!0}),oe.forEach(b),h=j(ce),d=k(ce,"DIV",{class:!0});var ve=T(d);g=G(ve,m),_=G(ve,n[10]),ve.forEach(b),v=j(ce),y=k(ce,"BUTTON",{type:!0,class:!0,title:!0});var Ne=T(y);De(E.$$.fragment,Ne),Ne.forEach(b),w=j(ce),A=k(ce,"BUTTON",{type:!0,class:!0,title:!0});var J=T(A);De(I.$$.fragment,J),J.forEach(b),R=j(ce),D=k(ce,"BUTTON",{type:!0,class:!0,title:!0});var Ie=T(D);De(N.$$.fragment,Ie),Ie.forEach(b),ce.forEach(b),W=j(V),te&&te.l(V),V.forEach(b),Z.forEach(b),x.forEach(b),this.h()},h(){S(o,"class","jse-search-icon svelte-10nesp9"),S(f,"class","jse-search-input svelte-10nesp9"),S(f,"title","Enter text to search"),S(f,"type","text"),S(f,"placeholder","Find"),S(u,"class","jse-search-input-label svelte-10nesp9"),S(u,"about","jse-search input"),S(d,"class","jse-search-count svelte-10nesp9"),$e(d,"jse-visible",n[8]!==""),S(y,"type","button"),S(y,"class","jse-search-next svelte-10nesp9"),S(y,"title","Go to next search result (Enter)"),S(A,"type","button"),S(A,"class","jse-search-previous svelte-10nesp9"),S(A,"title","Go to previous search result (Shift+Enter)"),S(D,"type","button"),S(D,"class","jse-search-clear svelte-10nesp9"),S(D,"title","Close search box (Esc)"),S(r,"class","jse-search-section svelte-10nesp9"),S(s,"class","jse-search-contents svelte-10nesp9"),S(t,"class","jse-search-form svelte-10nesp9"),S(e,"class","jse-search-box svelte-10nesp9")},m(q,x){X(q,e,x),p(e,t),O&&O.m(t,null),p(t,i),p(t,s),p(s,r),p(r,o),U[l].m(o,null),p(r,c),p(r,u),p(u,f),ds(f,n[8]),p(r,h),p(r,d),p(d,g),p(d,_),p(r,v),p(r,y),Oe(E,y,null),p(r,w),p(r,A),Oe(I,A,null),p(r,R),p(r,D),Oe(N,D,null),p(s,W),te&&te.m(s,null),H=!0,P||(Y=[Se(f,"input",n[21]),ac(bne.call(null,f)),Se(y,"click",n[22]),Se(A,"click",n[23]),Se(D,"click",n[24]),Se(t,"submit",n[12]),Se(t,"keydown",n[13])],P=!0)},p(q,x){q[4]?O&&(He(),Q(O,1,1,()=>{O=null}),qe()):O?(O.p(q,x),x&16&&B(O,1)):(O=UC(q),O.c(),B(O,1),O.m(t,i));let Z=l;l=K(q),l===Z?U[l].p(q,x):(He(),Q(U[Z],1,1,()=>{U[Z]=null}),qe(),a=U[l],a?a.p(q,x):(a=U[l]=L[l](q),a.c()),B(a,1),a.m(o,null)),x&256&&f.value!==q[8]&&ds(f,q[8]),(!H||x&8)&&m!==(m=q[3]!==-1?`${q[3]+1}/`:"")&&Be(g,m),(!H||x&1024)&&Be(_,q[10]),(!H||x&256)&&$e(d,"jse-visible",q[8]!==""),q[0]&&!q[4]?te?te.p(q,x):(te=VC(q),te.c(),te.m(s,null)):te&&(te.d(1),te=null)},i(q){H||(B(O),B(a),B(E.$$.fragment,q),B(I.$$.fragment,q),B(N.$$.fragment,q),H=!0)},o(q){Q(O),Q(a),Q(E.$$.fragment,q),Q(I.$$.fragment,q),Q(N.$$.fragment,q),H=!1},d(q){q&&b(e),O&&O.d(),U[l].d(),Re(E),Re(I),Re(N),te&&te.d(),P=!1,an(Y)}}}function UC(n){let e,t,i,s,r;return t=new qt({props:{data:n[0]?Br:No}}),{c(){e=C("button"),Te(t.$$.fragment),this.h()},l(o){e=k(o,"BUTTON",{type:!0,class:!0,title:!0});var l=T(e);De(t.$$.fragment,l),l.forEach(b),this.h()},h(){S(e,"type","button"),S(e,"class","jse-replace-toggle svelte-10nesp9"),S(e,"title","Toggle visibility of replace options (Ctrl+H)")},m(o,l){X(o,e,l),Oe(t,e,null),i=!0,s||(r=Se(e,"click",n[11]),s=!0)},p(o,l){const a={};l&1&&(a.data=o[0]?Br:No),t.$set(a)},i(o){i||(B(t.$$.fragment,o),i=!0)},o(o){Q(t.$$.fragment,o),i=!1},d(o){o&&b(e),Re(t),s=!1,r()}}}function pne(n){let e,t;return e=new qt({props:{data:nb}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p:Xe,i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function gne(n){let e,t;return e=new qt({props:{data:Gz,spin:!0}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p:Xe,i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function VC(n){let e,t,i,s,r,o,l,a,c,u;return{c(){e=C("div"),t=C("input"),i=F(),s=C("button"),r=z("Replace"),o=F(),l=C("button"),a=z("All"),this.h()},l(f){e=k(f,"DIV",{class:!0});var h=T(e);t=k(h,"INPUT",{class:!0,title:!0,type:!0,placeholder:!0}),i=j(h),s=k(h,"BUTTON",{type:!0,title:!0,class:!0});var d=T(s);r=G(d,"Replace"),d.forEach(b),o=j(h),l=k(h,"BUTTON",{type:!0,title:!0,class:!0});var m=T(l);a=G(m,"All"),m.forEach(b),h.forEach(b),this.h()},h(){S(t,"class","jse-replace-input svelte-10nesp9"),S(t,"title","Enter replacement text"),S(t,"type","text"),S(t,"placeholder","Replace"),S(s,"type","button"),S(s,"title","Replace current occurrence (Ctrl+Enter)"),S(s,"class","svelte-10nesp9"),S(l,"type","button"),S(l,"title","Replace all occurrences"),S(l,"class","svelte-10nesp9"),S(e,"class","jse-replace-section svelte-10nesp9")},m(f,h){X(f,e,h),p(e,t),ds(t,n[9]),p(e,i),p(e,s),p(s,r),p(e,o),p(e,l),p(l,a),c||(u=[Se(t,"input",n[25]),Se(s,"click",n[14]),Se(l,"click",n[15])],c=!0)},p(f,h){h&512&&t.value!==f[9]&&ds(t,f[9])},d(f){f&&b(e),c=!1,an(u)}}}function vne(n){let e,t,i=n[1]&&WC(n);return{c(){i&&i.c(),e=tt()},l(s){i&&i.l(s),e=tt()},m(s,r){i&&i.m(s,r),X(s,e,r),t=!0},p(s,[r]){s[1]?i?(i.p(s,r),r&2&&B(i,1)):(i=WC(s),i.c(),B(i,1),i.m(e.parentNode,e)):i&&(He(),Q(i,1,1,()=>{i=null}),qe())},i(s){t||(B(i),t=!0)},o(s){Q(i),t=!1},d(s){i&&i.d(s),s&&b(e)}}}function bne(n){n.select()}function _ne(n,e,t){let i,s,{show:r=!1}=e,{searching:o}=e,{resultCount:l=0}=e,{activeIndex:a=0}=e,{showReplace:c=!1}=e,{readOnly:u=!1}=e,{onChange:f=Gn}=e,{onPrevious:h=Gn}=e,{onNext:d=Gn}=e,{onReplace:m=Gn}=e,{onReplaceAll:g=Gn}=e,{onClose:_=Gn}=e,v="",y="",E="";function w(){v!==""&&f(v)}function A(){t(0,c=!c&&!u)}function I(L){L.preventDefault(),v!==y?(y=v,s.cancel(),f(v)):d()}function R(L){L.stopPropagation();const U=ia(L);U==="Enter"&&(L.preventDefault(),d()),U==="Shift+Enter"&&(L.preventDefault(),h()),(U==="Ctrl+Enter"||U==="Command+Enter")&&(L.preventDefault(),c?D():d()),U==="Ctrl+H"&&(L.preventDefault(),A()),U==="Escape"&&(L.preventDefault(),_())}function D(){u||m(v,E)}function N(){u||g(v,E)}function W(){v=this.value,t(8,v)}const H=()=>d(),P=()=>h(),Y=()=>_();function O(){E=this.value,t(9,E)}return n.$$set=L=>{"show"in L&&t(1,r=L.show),"searching"in L&&t(2,o=L.searching),"resultCount"in L&&t(16,l=L.resultCount),"activeIndex"in L&&t(3,a=L.activeIndex),"showReplace"in L&&t(0,c=L.showReplace),"readOnly"in L&&t(4,u=L.readOnly),"onChange"in L&&t(17,f=L.onChange),"onPrevious"in L&&t(5,h=L.onPrevious),"onNext"in L&&t(6,d=L.onNext),"onReplace"in L&&t(18,m=L.onReplace),"onReplaceAll"in L&&t(19,g=L.onReplaceAll),"onClose"in L&&t(7,_=L.onClose)},n.$$.update=()=>{n.$$.dirty&65536&&t(10,i=l>=i1?`${i1-1}+`:String(l)),n.$$.dirty&131072&&t(20,s=jm(f,iO)),n.$$.dirty&1048832&&s(v),n.$$.dirty&2&&r&&w()},[c,r,o,a,u,h,d,_,v,E,i,A,I,R,D,N,l,f,m,g,s,W,H,P,Y,O]}class yne extends rt{constructor(e){super(),ot(this,e,_ne,vne,fn,{show:1,searching:2,resultCount:16,activeIndex:3,showReplace:0,readOnly:4,onChange:17,onPrevious:5,onNext:6,onReplace:18,onReplaceAll:19,onClose:7})}}const Sne=yne;const{window:Ene}=Ju;function FC(n){let e,t,i;function s(o){n[73](o)}let r={json:n[9],selection:n[15].selection,readOnly:n[0],historyState:n[21],onExpandAll:n[39],onCollapseAll:n[40],onUndo:n[35],onRedo:n[36],onSort:n[37],onTransform:n[38],onContextMenu:n[44],onCopy:n[33],onRenderMenu:n[6]};return n[18]!==void 0&&(r.showSearch=n[18]),e=new Hte({props:r}),Vt.push(()=>Vs(e,"showSearch",s)),{c(){Te(e.$$.fragment)},l(o){De(e.$$.fragment,o)},m(o,l){Oe(e,o,l),i=!0},p(o,l){const a={};l[0]&512&&(a.json=o[9]),l[0]&32768&&(a.selection=o[15].selection),l[0]&1&&(a.readOnly=o[0]),l[0]&2097152&&(a.historyState=o[21]),l[0]&64&&(a.onRenderMenu=o[6]),!t&&l[0]&262144&&(t=!0,a.showSearch=o[18],Zs(()=>t=!1)),e.$set(a)},i(o){i||(B(e.$$.fragment,o),i=!0)},o(o){Q(e.$$.fragment,o),i=!1},d(o){Re(e,o)}}}function jC(n){let e,t;return e=new mne({props:{json:n[9],documentState:n[15],onSelect:n[47],onError:n[4],pathParser:n[3]}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,s){const r={};s[0]&512&&(r.json=i[9]),s[0]&32768&&(r.documentState=i[15]),s[0]&16&&(r.onError=i[4]),s[0]&8&&(r.pathParser=i[3]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function Ane(n){let e,t,i,s,r;return{c(){e=C("div"),t=C("div"),i=F(),s=C("div"),r=z("loading..."),this.h()},l(o){e=k(o,"DIV",{class:!0});var l=T(e);t=k(l,"DIV",{class:!0}),T(t).forEach(b),i=j(l),s=k(l,"DIV",{class:!0});var a=T(s);r=G(a,"loading..."),a.forEach(b),l.forEach(b),this.h()},h(){S(t,"class","jse-loading-space svelte-15tyejh"),S(s,"class","jse-loading svelte-15tyejh"),S(e,"class","jse-contents svelte-15tyejh")},m(o,l){X(o,e,l),p(e,t),p(e,i),p(e,s),p(s,r)},p:Xe,i:Xe,o:Xe,d(o){o&&b(e)}}}function wne(n){let e,t,i,s,r,o,l,a,c;const u=[kne,Cne],f=[];function h(d,m){return d[9]===void 0?0:1}return s=h(n),r=f[s]=u[s](n),{c(){e=C("label"),t=C("input"),i=F(),r.c(),o=tt(),this.h()},l(d){e=k(d,"LABEL",{class:!0});var m=T(e);t=k(m,"INPUT",{type:!0,tabindex:!0,class:!0}),m.forEach(b),i=j(d),r.l(d),o=tt(),this.h()},h(){S(t,"type","text"),t.readOnly="readonly",S(t,"tabindex","-1"),S(t,"class","jse-hidden-input svelte-15tyejh"),S(e,"class","jse-hidden-input-label svelte-15tyejh")},m(d,m){X(d,e,m),p(e,t),n[74](t),X(d,i,m),f[s].m(d,m),X(d,o,m),l=!0,a||(c=Se(t,"paste",n[34]),a=!0)},p(d,m){let g=s;s=h(d),s===g?f[s].p(d,m):(He(),Q(f[g],1,1,()=>{f[g]=null}),qe(),r=f[s],r?r.p(d,m):(r=f[s]=u[s](d),r.c()),B(r,1),r.m(o.parentNode,o))},i(d){l||(B(r),l=!0)},o(d){Q(r),l=!1},d(d){d&&b(e),n[74](null),d&&b(i),f[s].d(d),d&&b(o),a=!1,c()}}}function Cne(n){var d,m,g,_;let e,t,i,s,r,o,l,a,c,u;t=new Sne({props:{show:n[18],resultCount:((m=(d=n[16])==null?void 0:d.items)==null?void 0:m.length)||0,activeIndex:((g=n[16])==null?void 0:g.activeIndex)||0,showReplace:n[19],searching:n[20],readOnly:n[0],onChange:n[26],onNext:n[27],onPrevious:n[28],onReplace:n[29],onReplaceAll:n[30],onClose:n[31]}}),r=new Ute({props:{value:n[9],path:n[25],expandedMap:n[15].expandedMap,enforceStringMap:n[15].enforceStringMap,visibleSectionsMap:n[15].visibleSectionsMap,validationErrorsMap:n[23],searchResultItemsMap:(_=n[16])==null?void 0:_.itemsMap,selection:n[15].selection,context:n[12],onDragSelectionStart:Gn}});let f=n[17]&&HC(n),h=n[22]&&qC(n);return c=new gR({props:{validationErrors:n[11],selectError:n[32]}}),{c(){e=C("div"),Te(t.$$.fragment),i=F(),s=C("div"),Te(r.$$.fragment),o=F(),f&&f.c(),l=F(),h&&h.c(),a=F(),Te(c.$$.fragment),this.h()},l(v){e=k(v,"DIV",{class:!0});var y=T(e);De(t.$$.fragment,y),y.forEach(b),i=j(v),s=k(v,"DIV",{class:!0,"data-jsoneditor-scrollable-contents":!0});var E=T(s);De(r.$$.fragment,E),E.forEach(b),o=j(v),f&&f.l(v),l=j(v),h&&h.l(v),a=j(v),De(c.$$.fragment,v),this.h()},h(){S(e,"class","jse-search-box-container svelte-15tyejh"),S(s,"class","jse-contents svelte-15tyejh"),S(s,"data-jsoneditor-scrollable-contents",!0)},m(v,y){X(v,e,y),Oe(t,e,null),X(v,i,y),X(v,s,y),Oe(r,s,null),n[75](s),X(v,o,y),f&&f.m(v,y),X(v,l,y),h&&h.m(v,y),X(v,a,y),Oe(c,v,y),u=!0},p(v,y){var I,R,D,N;const E={};y[0]&262144&&(E.show=v[18]),y[0]&65536&&(E.resultCount=((R=(I=v[16])==null?void 0:I.items)==null?void 0:R.length)||0),y[0]&65536&&(E.activeIndex=((D=v[16])==null?void 0:D.activeIndex)||0),y[0]&524288&&(E.showReplace=v[19]),y[0]&1048576&&(E.searching=v[20]),y[0]&1&&(E.readOnly=v[0]),t.$set(E);const w={};y[0]&512&&(w.value=v[9]),y[0]&32768&&(w.expandedMap=v[15].expandedMap),y[0]&32768&&(w.enforceStringMap=v[15].enforceStringMap),y[0]&32768&&(w.visibleSectionsMap=v[15].visibleSectionsMap),y[0]&8388608&&(w.validationErrorsMap=v[23]),y[0]&65536&&(w.searchResultItemsMap=(N=v[16])==null?void 0:N.itemsMap),y[0]&32768&&(w.selection=v[15].selection),y[0]&4096&&(w.context=v[12]),r.$set(w),v[17]?f?(f.p(v,y),y[0]&131072&&B(f,1)):(f=HC(v),f.c(),B(f,1),f.m(l.parentNode,l)):f&&(He(),Q(f,1,1,()=>{f=null}),qe()),v[22]?h?(h.p(v,y),y[0]&4194304&&B(h,1)):(h=qC(v),h.c(),B(h,1),h.m(a.parentNode,a)):h&&(He(),Q(h,1,1,()=>{h=null}),qe());const A={};y[0]&2048&&(A.validationErrors=v[11]),c.$set(A)},i(v){u||(B(t.$$.fragment,v),B(r.$$.fragment,v),B(f),B(h),B(c.$$.fragment,v),u=!0)},o(v){Q(t.$$.fragment,v),Q(r.$$.fragment,v),Q(f),Q(h),Q(c.$$.fragment,v),u=!1},d(v){v&&b(e),Re(t),v&&b(i),v&&b(s),Re(r),n[75](null),v&&b(o),f&&f.d(v),v&&b(l),h&&h.d(v),v&&b(a),Re(c,v)}}}function kne(n){let e,t,i,s;const r=[Tne,Ine],o=[];function l(a,c){return a[10]===""||a[10]===void 0?0:1}return e=l(n),t=o[e]=r[e](n),{c(){t.c(),i=tt()},l(a){t.l(a),i=tt()},m(a,c){o[e].m(a,c),X(a,i,c),s=!0},p(a,c){let u=e;e=l(a),e===u?o[e].p(a,c):(He(),Q(o[u],1,1,()=>{o[u]=null}),qe(),t=o[e],t?t.p(a,c):(t=o[e]=r[e](a),t.c()),B(t,1),t.m(i.parentNode,i))},i(a){s||(B(t),s=!0)},o(a){Q(t),s=!1},d(a){o[e].d(a),a&&b(i)}}}function HC(n){let e,t;return e=new ra({props:{type:"info",message:`You pasted a JSON ${Array.isArray(n[17].contents)?"array":"object"} as text`,actions:[{icon:$v,text:"Paste as JSON instead",onMouseDown:n[45]},{text:"Leave as is",onClick:n[46]}]}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,s){const r={};s[0]&131072&&(r.message=`You pasted a JSON ${Array.isArray(i[17].contents)?"array":"object"} as text`),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function qC(n){let e,t;return e=new ra({props:{type:"success",message:"The loaded JSON document was invalid but is successfully repaired.",actions:n[0]?[]:[{icon:k1,text:"Ok",onClick:n[7]},{icon:hd,text:"Repair manually instead",onClick:n[5]}]}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,s){const r={};s[0]&33&&(r.actions=i[0]?[]:[{icon:k1,text:"Ok",onClick:i[7]},{icon:hd,text:"Repair manually instead",onClick:i[5]}]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function Ine(n){let e,t,i,s=Kd(n[10],Z2)+"",r,o;return e=new ra({props:{type:"error",message:"The loaded JSON document is invalid and could not be repaired automatically.",actions:n[0]?[]:[{icon:hd,text:"Repair manually",onClick:n[5]}]}}),{c(){Te(e.$$.fragment),t=F(),i=C("div"),r=z(s),this.h()},l(l){De(e.$$.fragment,l),t=j(l),i=k(l,"DIV",{class:!0});var a=T(i);r=G(a,s),a.forEach(b),this.h()},h(){S(i,"class","jse-preview svelte-15tyejh")},m(l,a){Oe(e,l,a),X(l,t,a),X(l,i,a),p(i,r),o=!0},p(l,a){const c={};a[0]&33&&(c.actions=l[0]?[]:[{icon:hd,text:"Repair manually",onClick:l[5]}]),e.$set(c),(!o||a[0]&1024)&&s!==(s=Kd(l[10],Z2)+"")&&Be(r,s)},i(l){o||(B(e.$$.fragment,l),o=!0)},o(l){Q(e.$$.fragment,l),o=!1},d(l){Re(e,l),l&&b(t),l&&b(i)}}}function Tne(n){let e,t;return e=new Kte({props:{readOnly:n[0]}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,s){const r={};s[0]&1&&(r.readOnly=i[0]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function One(n){let e,t,i,s,r,o,l,a,c=n[1]&&FC(n),u=n[2]&&jC(n);const f=[wne,Ane],h=[];function d(m,g){return m[24]?1:0}return s=d(n),r=h[s]=f[s](n),{c(){e=C("div"),c&&c.c(),t=F(),u&&u.c(),i=F(),r.c(),this.h()},l(m){e=k(m,"DIV",{class:!0});var g=T(e);c&&c.l(g),t=j(g),u&&u.l(g),i=j(g),r.l(g),g.forEach(b),this.h()},h(){S(e,"class","jse-tree-mode svelte-15tyejh"),$e(e,"no-main-menu",!n[1])},m(m,g){X(m,e,g),c&&c.m(e,null),p(e,t),u&&u.m(e,null),p(e,i),h[s].m(e,null),n[76](e),o=!0,l||(a=[Se(Ene,"mousedown",n[48]),Se(e,"keydown",n[41]),Se(e,"mousedown",n[42]),Se(e,"contextmenu",n[43])],l=!0)},p(m,g){m[1]?c?(c.p(m,g),g[0]&2&&B(c,1)):(c=FC(m),c.c(),B(c,1),c.m(e,t)):c&&(He(),Q(c,1,1,()=>{c=null}),qe()),m[2]?u?(u.p(m,g),g[0]&4&&B(u,1)):(u=jC(m),u.c(),B(u,1),u.m(e,i)):u&&(He(),Q(u,1,1,()=>{u=null}),qe()),r.p(m,g),(!o||g[0]&2)&&$e(e,"no-main-menu",!m[1])},i(m){o||(B(c),B(u),B(r),o=!0)},o(m){Q(c),Q(u),Q(r),o=!1},d(m){m&&b(e),c&&c.d(),u&&u.d(),h[s].d(),n[76](null),l=!1,an(a)}}}function ha(n){return n.length===0?!0:n.length===1&&n[0]==="0"}function dh(){return!0}function Rne(n,e,t){let i;const s=Ts("jsoneditor:TreeMode"),r=typeof window>"u";s("isSSR:",r);const{open:o}=Nn("simple-modal"),l=fd(),a=fd(),{openAbsolutePopup:c,closeAbsolutePopup:u}=Nn("absolute-popup");let f,h,d,m=!1;const g=g$();let{readOnly:_}=e,{externalContent:v}=e,{mainMenuBar:y}=e,{navigationBar:E}=e,{escapeControlCharacters:w}=e,{escapeUnicodeCharacters:A}=e,{parser:I}=e,{validator:R}=e,{validationParser:D}=e,{pathParser:N}=e,{indentation:W}=e,{onError:H}=e,{onChange:P}=e,{onRenderValue:Y}=e,{onRequestRepair:O}=e,{onRenderMenu:L}=e,{onClassName:U}=e,{onFocus:K}=e,{onBlur:te}=e,{onSortModal:q}=e,{onTransformModal:x}=e,Z=!1;dR({onMount:Mi,onDestroy:_r,getWindow:()=>Pu(d),hasFocus:()=>Z&&document.hasFocus()||A1(d),onFocus:()=>{m=!0,K&&K()},onBlur:()=>{m=!1,te&&te()}});let V,ce;const pe=[];let oe;function ve(le){s("updateSelection",le);const Ve=typeof le=="function"?le(J.selection):le;wn(Ve,J.selection)||t(15,J={...J,selection:Ve})}let Ne=!1,J=Cw(),Ie,Ue,re;function Le(le){return KS({json:le},x2)?ha:dh}let fe=!1,M=!1,ae=!1,de="";async function $(le){s("search text updated",le),t(72,de=le),await ci(),await _e()}async function ee(){t(16,Ie=Ie?K$(Ie):void 0),await _e()}async function ie(){t(16,Ie=Ie?X$(Ie):void 0),await _e()}async function me(le,Ve){const Ye=Ie==null?void 0:Ie.activeItem;if(s("handleReplace",{replacementText:Ve,activeItem:Ye}),!Ye)return;const{operations:At,newSelection:at}=Q$(V,J,Ve,Ye,I);Fn(At,(Kt,Xn)=>({state:{...Xn,selection:at}})),await ci(),await _e()}async function ue(le,Ve){s("handleReplaceAll",{text:le,replacementText:Ve});const{operations:Ye,newSelection:At}=Y$(V,J,le,Ve,I);Fn(Ye,(at,Kt)=>({state:{...Kt,selection:At}})),await ci(),await _e()}function se(){t(18,fe=!1),t(19,M=!1),$(""),Ds()}async function _e(){const le=Ie==null?void 0:Ie.activeItem;if(s("focusActiveSearchResult",Ie),le){const Ve=le.path;t(15,J={...rg(V,J,Ve),selection:void 0}),await ci(),await Vn(Ve)}}function ke(){if(de===""){s("clearing search result"),Ie!==void 0&&t(16,Ie=void 0);return}t(20,ae=!0),setTimeout(()=>{s("searching...",de);const le=CN(de,V,J,i1);t(16,Ie=G$(V,le,Ie)),t(20,ae=!1)})}function Ce(le){s("select validation error",le),ve(Zn(le.path,!1)),Vn(le.path)}const ge=I$({onChange:le=>{t(21,Me=le)}});let Me=ge.getState();function Ee(le=()=>!0){s("expand");const Ve={...J,expandedMap:{},visibleSectionsMap:{}};t(15,J=xr(V,Ve,pe,le))}const Pe=oz(ke,TW);let be=!1,nt=[],Fe;const we=Ub(r$);function lt(le,Ve,Ye,At){Qc(()=>{let at;try{at=we(le,Ve,Ye,At)}catch(Kt){at=[{path:[],message:"Failed to validate: "+Kt.message,severity:Za.warning}]}wn(at,nt)||(s("validationErrors changed:",at),t(11,nt=at))},at=>s(`validationErrors updated in ${at} ms`))}function je(){return s("validate"),oe?{parseError:oe,isRepairable:!1}:(lt(V,R,I,D),{validationErrors:nt})}function Qe(){return V}function ye(){return J}function Ze(le){le.json!==void 0&&Lt(le.json),le.text!==void 0&&vt(le.text)}function Lt(le){if(le===void 0)return;const Ve=!wn(V,le);if(s("update external json",{isChanged:Ve,currentlyText:V===void 0}),!Ve)return;const Ye={json:V,text:ce},At=J,at=V,Kt=ce,Xn=be;t(9,V=le),Ct(V),t(10,ce=void 0),t(22,be=!1),Ot(V),en({previousJson:at,previousState:At,previousText:Kt,previousTextIsRepaired:Xn}),Hi(Ye,null)}function vt(le){if(le===void 0||v.json!==void 0)return;const Ve=le===ce;if(s("update external text",{isChanged:Ve}),Ve)return;const Ye={json:V,text:ce},At=V,at=J,Kt=ce,Xn=be;try{t(9,V=I.parse(le)),Ct(V),t(10,ce=le),t(22,be=!1),oe=void 0,Ot(V)}catch(Qn){try{t(9,V=I.parse(Fo(le))),Ct(V),t(10,ce=le),t(22,be=!0),oe=void 0,Ot(V)}catch{t(9,V=void 0),t(10,ce=v.text),t(22,be=!1),oe=Yv(ce,Qn.message||Qn.toString()),Ot(V)}}en({previousJson:At,previousState:at,previousText:Kt,previousTextIsRepaired:Xn}),Hi(Ye,null)}function Ct(le){Ne||(Ne=!0,t(15,J=xr(le,J,pe,Le(le))))}function Ot(le){J.selection!==void 0&&(J.selection&&Yo(le,J.selection.anchorPath)&&Yo(le,J.selection.focusPath)||(s("clearing selection: path does not exist anymore",J.selection),t(15,J={...J,selection:void 0})))}function en({previousJson:le,previousState:Ve,previousText:Ye,previousTextIsRepaired:At}){le===void 0&&Ye===void 0||(V!==void 0?le!==void 0?ge.add({undo:{patch:[{op:"replace",path:"",value:le}],state:wo(Ve),json:void 0,text:Ye,textIsRepaired:At},redo:{patch:[{op:"replace",path:"",value:V}],state:wo(J),json:void 0,text:ce,textIsRepaired:be}}):ge.add({undo:{patch:void 0,json:void 0,text:Ye,state:wo(Ve),textIsRepaired:At},redo:{patch:void 0,json:V,state:wo(J),text:ce,textIsRepaired:be}}):le!==void 0&&ge.add({undo:{patch:void 0,json:le,state:wo(Ve),text:Ye,textIsRepaired:At},redo:{patch:void 0,json:void 0,text:ce,textIsRepaired:be,state:wo(J)}}))}function tn(){s("createDefaultSelection"),t(15,J={...J,selection:di(V||{},[],[])})}function rn(le,Ve){if(s("patch",le,Ve),V===void 0)throw new Error("Cannot apply patch: no JSON");const Ye={json:V,text:ce},At=V,at=J,Kt=ce,Xn=be,vi=z$(V,le),Qn=E$(V,J,le),ul=oc(V,le),Xb=W$(Qn.documentState,ul,!1);s("patch updatedSelection",ul);const ua=typeof Ve=="function"?Ve(Qn.json,Xb):void 0;t(9,V=ua&&ua.json!==void 0?ua.json:Qn.json);const Qb=ua&&ua.state!==void 0?ua.state:Xb;t(15,J=Qb),t(10,ce=void 0),t(22,be=!1),Ot(V),ge.add({undo:{patch:vi,json:void 0,text:Kt,state:wo(at),textIsRepaired:Xn},redo:{patch:le,json:void 0,state:wo(Qb),text:ce,textIsRepaired:be}});const Yb={json:V,previousJson:At,undo:vi,redo:le};return Hi(Ye,Yb),Yb}function cn(le){return Sn(le)||hi(le)||yn(le)}function dt(){_||!J.selection||ve(zs(J.selection.focusPath,!0))}function Un(){_||!J.selection||ve(Zn(J.selection.focusPath,!0))}function kn(){if(_||!yn(J.selection))return;const le=J.selection.focusPath,Ve=mt(le),Ye=wt(V,le),At=!kf(Ye,J.enforceStringMap,Ve,I),at=At?String(Ye):gf(String(Ye),I);s("handleToggleEnforceString",{enforceString:At,value:Ye,updatedValue:at}),Fn([{op:"replace",path:mt(le),value:at}],(Kt,Xn)=>({state:y$(Xn,Ve,At)}))}function Wn(){return be&&V!==void 0&&Zr(V),{json:V,text:ce}}async function In(le=!0){if(_||!cn(J.selection))return;const Ve=le?W:null,Ye=Tw(V,J.selection,Ve,I);if(Ye==null)return;s("cut",{selection:J.selection,clipboard:Ye,indent:le}),await A0(Ye);const{operations:At,newSelection:at}=Pw(V,J.selection);Fn(At,(Kt,Xn)=>({state:{...Xn,selection:at}}))}async function En(le=!0){const Ve=le?W:null,Ye=Tw(V,J.selection,Ve,I);Ye!=null&&(s("copy",{clipboard:Ye,indent:le}),await A0(Ye))}function li(le){if(le.preventDefault(),_)return;const Ve=le.clipboardData.getData("text/plain");try{St(Ve)}catch{Gt(Ve,At=>{s("repaired pasted text: ",At),St(At)})}}function ze(){o(see,{},{...sd,styleWindow:{width:"450px"}},{onClose:()=>Ds()})}function St(le){if(V!==void 0){J.selection||tn();const Ve=Nw(V,J.selection,le,I);s("paste",{clipboardText:le,operations:Ve,selection:J.selection}),Fn(Ve,(Ye,At)=>{let at=At;return Ve.filter(Kt=>(rO(Kt)||lO(Kt))&&Ri(Kt.value)).forEach(Kt=>{const Xn=jr(V,Kt.path);at=Ti(Ye,at,Xn)}),{state:at}})}else s("paste text",{clipboardText:le}),bs(le,(Ve,Ye)=>{if(Ve)return{state:Ti(Ve,Ye,[])}})}function Gt(le,Ve){o(pee,{text:le,onParse:Qv,onRepair:hz,onApply:Ve,onRenderMenu:L},{...sd,styleWindow:{width:"600px",height:"500px"},styleContent:{padding:0,height:"100%"}},{onClose:()=>Ds()})}function pn(){if(_||!J.selection)return;const le=hi(J.selection)||yn(J.selection)?di(V,J.selection.anchorPath,J.selection.focusPath):J.selection;if(si(J.selection.focusPath))s("remove root",{selection:J.selection}),P({text:"",json:void 0},{text:ce,json:V},{contentErrors:je(),patchResult:null});else{const{operations:Ve,newSelection:Ye}=Pw(V,le);s("remove",{operations:Ve,selection:J.selection,newSelection:Ye}),Fn(Ve,(At,at)=>({state:{...at,selection:Ye}}))}}function gn(){if(_||!cn(J.selection)||si(J.selection.focusPath))return;s("duplicate",{selection:J.selection});const le=F$(V,wN(J.selection));Fn(le)}function Jt(){if(_||!J.selection||!Sn(J.selection)&&!yn(J.selection)||si(J.selection.focusPath))return;s("extract",{selection:J.selection});const le=j$(V,J.selection);Fn(le,(Ve,Ye)=>{if(Ri(Ve))return{state:Ti(Ve,Ye,[])}})}function it(le){if(_||!J.selection)return;const Ve=q$(V,J.selection,le);if(V!==void 0){const Ye=I.stringify(Ve),At=Nw(V,J.selection,Ye,I);s("handleInsert",{type:le,operations:At,newValue:Ve,data:Ye});const at=Yt(At.filter(Kt=>Kt.op==="add"||Kt.op==="replace"));Fn(At,(Kt,Xn)=>{if(at){const vi=jr(Kt,at.path);if(Ri(Ve))return{state:{...xr(Kt,Xn,vi,dh),selection:Ur(vi)}};if(Ve===""){const Qn=si(vi)?null:wt(Kt,bn(vi));return s("test A",vi,Ur(vi)),{state:rg(Kt,{...J,selection:Fi(Qn)?zs(vi,!0):Zn(vi,!0)},vi)}}return}}),s("after patch"),at&&Ve===""&&ci().then(()=>{setTimeout(()=>sn("",!0))})}else{s("handleInsert",{type:le,newValue:Ve});const Ye=[];Zr(Ve,(At,at)=>({state:{...Ti(At,at,Ye),selection:Ur(Ye)}}))}}function Pt(le){hi(J.selection)&&ve(Zn(J.selection.focusPath,!1)),it(le)}function gi(le){if(!(_||!J.selection)){if(!Ph(J.selection)){H(new Error(`Cannot convert current selection to ${le}`));return}try{const Ve=J.selection.anchorPath,Ye=wt(V,Ve),At=gz(Ye,le,I);if(At===Ye)return;const at=[{op:"replace",path:mt(Ve),value:At}];s("handleConvert",{selection:J.selection,path:Ve,type:le,operations:at}),Fn(at,(Kt,Xn)=>({state:Ti(Kt,Xn,J.selection.focusPath)}))}catch(Ve){H(Ve)}}}function Ii(){const le=kw(V,J,!1),Ve=bn(J.selection.focusPath);!si(le.focusPath)&&wn(Ve,bn(le.focusPath))?ve(_o(le.focusPath)):ve(Ur(Ve)),s("insert before",{selection:J.selection,selectionBefore:le,parentPath:Ve}),ci().then(cl)}function Ls(){const le=Sn(J.selection)?Yt(J.selection.paths):J.selection.focusPath;s("insert after",le),ve(_o(le)),ci().then(cl)}function sn(le,Ve){const Ye=Pu(d).document.activeElement;Ye.isContentEditable&&(Ye.textContent=Ve?le:Ye.textContent+le,oR(Ye))}async function Os(le){if(!(_||!J.selection)){if(hi(J.selection)){const Ve=!J.selection.edit;ve({...J.selection,edit:!0}),await ci(),setTimeout(()=>sn(le,Ve));return}if(le==="{")it("object");else if(le==="[")it("array");else if(yn(J.selection)){if(!Ri(wt(V,J.selection.focusPath))){const Ve=!J.selection.edit;ve({...J.selection,edit:!0}),await ci(),setTimeout(()=>sn(le,Ve))}}else await Xs(le)}}async function Xs(le){if(_||!J.selection)return;it("value");const Ve=!cu(J.selection),Ye=J.selection.focusPath,At=wt(V,bn(Ye));Array.isArray(At)||!At||yn(J.selection)?ve(Zn(Ye,!0)):ve(zs(Ye,!0)),await ci(),setTimeout(()=>sn(le,Ve))}function An(){if(_||!ge.getState().canUndo)return;const le=ge.undo();if(!le)return;const Ve={json:V,text:ce};t(9,V=le.undo.patch?Rl(V,le.undo.patch):le.undo.json),t(15,J=le.undo.state),t(10,ce=le.undo.text),t(22,be=le.undo.textIsRepaired),s("undo",{item:le,json:V,documentState:J});const Ye={json:V,previousJson:Ve.json,redo:le.undo.patch,undo:le.redo.patch};Hi(Ve,Ye),Ds(),J.selection&&Vn(J.selection.focusPath,!1)}function bt(){if(_||!ge.getState().canRedo)return;const le=ge.redo();if(!le)return;const Ve={json:V,text:ce};t(9,V=le.redo.patch?Rl(V,le.redo.patch):le.redo.json),t(15,J=le.redo.state),t(10,ce=le.redo.text),t(22,be=le.redo.textIsRepaired),s("redo",{item:le,json:V,documentState:J});const Ye={json:V,previousJson:Ve.json,redo:le.redo.patch,undo:le.undo.patch};Hi(Ve,Ye),Ds(),J.selection&&Vn(J.selection.focusPath,!1)}function he(le){_||(Z=!0,q({id:l,json:V,selectedPath:le,onSort:async Ve=>{s("onSort",le,Ve),Fn(Ve,(Ye,At)=>({state:{...Ti(Ye,At,le),selection:Zn(le,!1)}}))},onClose:()=>{Z=!1,Ds()}}))}function _t(){if(!J.selection)return;const le=Iw(V,J.selection);he(le)}function Zt(){he([])}function Et({id:le,selectedPath:Ve,onTransform:Ye,onClose:At}){Z=!0,x({id:le||a,json:V,selectedPath:Ve,onTransform:Ye?at=>{Ye({operations:at,json:V,transformedJson:Rl(V,at)})}:at=>{s("onTransform",Ve,at),Fn(at,(Kt,Xn)=>({state:{...Ti(Kt,Xn,Ve),selection:Zn(Ve,!1)}}))},onClose:()=>{Z=!1,Ds(),At&&At()}})}function jt(){if(!J.selection)return;const le=Iw(V,J.selection);Et({selectedPath:le})}function Pn(){Et({selectedPath:[]})}async function Vn(le,Ve=!0){t(15,J=rg(V,J,bn(le))),await ci();const Ye=ai(le);if(Ye){s("scrollTo",{path:le,elem:Ye,refContents:f});const At=f.getBoundingClientRect(),at=Ye.getBoundingClientRect();if(!Ve&&at.bottom>At.top&&at.top<At.bottom)return;const Kt=-(At.height/4);g(Ye,{container:f,offset:Kt,duration:IW})}}function ai(le){return f?f.querySelector(`div[data-path="${w1(le)}"]`):null}function Rs(le){const Ve=ai(le);if(!Ve||!f)return;const Ye=f.getBoundingClientRect(),At=Ve.getBoundingClientRect(),at=20,Kt=Ri(wt(V,le))?at:At.height;At.top<Ye.top+at?g(Ve,{container:f,offset:-at,duration:0}):At.top+Kt>Ye.bottom-at&&g(Ve,{container:f,offset:-(Ye.height-Kt-at),duration:0})}function Hi(le,Ve){le.json===void 0&&(le==null?void 0:le.text)===void 0||(ce!==void 0?P({text:ce,json:void 0},le,{contentErrors:je(),patchResult:Ve}):V!==void 0&&P({text:void 0,json:V},le,{contentErrors:je(),patchResult:Ve}))}function Fn(le,Ve){if(_)return;s("handlePatch",le,Ve);const Ye=rn(le,Ve);return t(17,re=void 0),Ye}function Zr(le,Ve){const Ye=J,At=V,at=ce,Kt={json:V,text:ce},Xn=be,vi=xr(V,J,pe,ha),Qn=typeof Ve=="function"?Ve(le,vi):void 0;t(9,V=Qn&&Qn.json!==void 0?Qn.json:le),t(15,J=Qn&&Qn.state!==void 0?Qn.state:vi),t(10,ce=void 0),t(22,be=!1),Ot(V),en({previousJson:At,previousState:Ye,previousText:at,previousTextIsRepaired:Xn}),Hi(Kt,null)}function bs(le,Ve){s("handleChangeText");const Ye=J,At=V,at=ce,Kt={json:V,text:ce},Xn=be;try{t(9,V=I.parse(le)),t(15,J=xr(V,J,pe,ha)),t(10,ce=void 0),t(22,be=!1)}catch{try{t(9,V=I.parse(Fo(le))),t(15,J=xr(V,J,pe,ha)),t(10,ce=le),t(22,be=!0)}catch{t(9,V=void 0),t(15,J=Cw({json:V,expand:ha})),t(10,ce=le),t(22,be=!1)}}if(typeof Ve=="function"){const Qn=Ve(V,J);t(9,V=Qn&&Qn.json?Qn.json:V),t(15,J=Qn&&Qn.state?Qn.state:J)}Ot(V),en({previousJson:At,previousState:Ye,previousText:at,previousTextIsRepaired:Xn}),Hi(Kt,null)}function Ti(le,Ve,Ye){const At=wt(le,Ye),Kt=!KS({json:At},x2)?dh:ha;return xr(le,Ve,Ye,Kt)}function ar(le,Ve,Ye=!1){s("expand",{path:le,expanded:Ve,recursive:Ye}),Ve?Ye?t(15,J=xr(V,J,le,dh)):t(15,J=_$(J,le)):t(15,J=pN(J,le)),J.selection&&!Ve&&R$(J.selection,le)&&ve(void 0),setTimeout(()=>{A1(d)||Ds()})}function ll(){ar([],!0,!0)}function cr(){ar([],!1,!0)}function Cr(le){s("openFind",{findAndReplace:le}),t(18,fe=!1),t(19,M=!1),ci().then(()=>{t(18,fe=!0),t(19,M=le)})}function al(le,Ve){s("handleExpandSection",le,Ve);const Ye=mt(le);t(15,J=S$(V,J,Ye,Ve))}function wc(le){s("pasted json as text",le),t(17,re=le)}function Rf(le){const Ve=ia(le).replace(/^Command\+/,"Ctrl+"),Ye=le.shiftKey;if(s("keydown",{combo:Ve,key:le.key}),Ve==="Ctrl+X"&&(le.preventDefault(),In(!0)),Ve==="Ctrl+Shift+X"&&(le.preventDefault(),In(!1)),Ve==="Ctrl+C"&&(le.preventDefault(),En(!0)),Ve==="Ctrl+Shift+C"&&(le.preventDefault(),En(!1)),Ve==="Ctrl+D"&&(le.preventDefault(),gn()),(Ve==="Delete"||Ve==="Backspace")&&(le.preventDefault(),pn()),Ve==="Insert"&&(le.preventDefault(),it("structure")),Ve==="Ctrl+A"&&(le.preventDefault(),ve(U$())),Ve==="Ctrl+Q"&&cl(le),Ve==="Up"||Ve==="Shift+Up"){le.preventDefault();const at=J.selection?kw(V,J,Ye,!0)||J.selection:fh(V,J);ve(at),Rs(at.focusPath)}if(Ve==="Down"||Ve==="Shift+Down"){le.preventDefault();const at=J.selection?N$(V,J,Ye,!0)||J.selection:fh(V,J);ve(at),Rs(at.focusPath)}if(Ve==="Left"||Ve==="Shift+Left"){le.preventDefault();const at=J.selection?M$(V,J,Ye,!_)||J.selection:fh(V,J);ve(at),Rs(at.focusPath)}if(Ve==="Right"||Ve==="Shift+Right"){le.preventDefault();const at=J.selection?B$(V,J,Ye,!_)||J.selection:fh(V,J);ve(at),Rs(at.focusPath)}if(Ve==="Enter"&&J.selection){if(!_&&Sn(J.selection)&&J.selection.paths.length===1){const at=J.selection.focusPath,Kt=wt(V,bn(at));Array.isArray(Kt)&&ve(Zn(at,!1))}if(!_&&hi(J.selection)&&(le.preventDefault(),ve({...J.selection,edit:!0})),yn(J.selection)){le.preventDefault();const at=wt(V,J.selection.focusPath);Ri(at)?ar(J.selection.focusPath,!0):_||ve({...J.selection,edit:!0})}}if(Ve.replace(/^Shift\+/,"").replace(/^Numpad_/,"").length===1&&J.selection){le.preventDefault(),Os(le.key);return}if(Ve==="Enter"&&(vr(J.selection)||Ci(J.selection))){le.preventDefault(),Os("");return}if(Ve==="Ctrl+Enter"&&yn(J.selection)){const at=wt(V,J.selection.focusPath);Bv(at)&&window.open(String(at),"_blank")}if(Ve==="Escape"&&J.selection&&(le.preventDefault(),ve(void 0)),Ve==="Ctrl+F"&&(le.preventDefault(),Cr(!1)),Ve==="Ctrl+H"&&(le.preventDefault(),Cr(!0)),Ve==="Ctrl+Z"){le.preventDefault();const at=document.activeElement;at&&at.blur&&at.focus?(at.blur(),setTimeout(()=>{An(),setTimeout(()=>at.select())})):An()}if(Ve==="Ctrl+Shift+Z"){le.preventDefault();const at=document.activeElement;at&&at.blur&&at.focus?(at.blur(),setTimeout(()=>{bt(),setTimeout(()=>at.select())})):bt()}}function Cc(le){s("handleMouseDown",le),setTimeout(()=>{setTimeout(()=>{!m&&!rR(le.target,"BUTTON")&&(Ds(),!J.selection&&V===void 0&&(ce===""||ce===void 0)&&tn())})})}function Ao({anchor:le,left:Ve,top:Ye,width:At,height:at,offsetTop:Kt,offsetLeft:Xn,showTip:vi}){const Qn={json:V,documentState:J,parser:I,showTip:vi,onEditKey:dt,onEditValue:Un,onToggleEnforceString:kn,onCut:In,onCopy:En,onPaste:ze,onRemove:pn,onDuplicate:gn,onExtract:Jt,onInsertBefore:Ii,onInsert:Pt,onConvert:gi,onInsertAfter:Ls,onSort:_t,onTransform:jt,onCloseContextMenu(){u(ul),Ds()}};Z=!0;const ul=c(Oee,Qn,{left:Ve,top:Ye,offsetTop:Kt,offsetLeft:Xn,width:At,height:at,anchor:le,closeOnOuterClick:!0,onClose:()=>{Z=!1,Ds()}})}function cl(le){if(!(_||cu(J.selection))){if(le&&(le.stopPropagation(),le.preventDefault()),le&&le.type==="contextmenu"&&le.target!==h)Ao({left:le.clientX,top:le.clientY,width:qc,height:Hc,showTip:!1});else{const Ve=f==null?void 0:f.querySelector(".jse-context-menu-button.jse-selected");if(Ve)Ao({anchor:Ve,offsetTop:2,width:qc,height:Hc,showTip:!1});else{const Ye=f==null?void 0:f.getBoundingClientRect();Ye&&Ao({top:Ye.top+2,left:Ye.left+2,width:qc,height:Hc,showTip:!1})}}return!1}}function ca(le){_||Ao({anchor:Oz(le.target,"BUTTON"),offsetTop:0,width:qc,height:Hc,showTip:!0})}async function kc(){s("apply pasted json",re);const{path:le,contents:Ve}=re;ve(Zn(le,!1)),await ci();const Ye=[{op:"replace",path:mt(le),value:Ve}];Fn(Ye,(At,at)=>({state:Ti(At,at,le)}))}function Ic(){s("clear pasted json"),t(17,re=void 0)}function PN(le){ve(le),Ds(),Vn(le.focusPath)}function Ds(){s("focus"),h&&(h.focus(),h.select())}function MN(le){!bf(le.target,Ye=>Ye===d)&&cu(J.selection)&&(s("click outside the editor, stop edit mode"),ve(Ye=>hi(Ye)?{...Ye,edit:!1}:yn(Ye)?{...Ye,edit:!1}:Ye),m&&h&&(h.focus(),h.blur()),ci().then(()=>{setTimeout(()=>{h&&h.blur()})}))}function BN(le){i&&i.onDrag(le)}function LN(){i&&i.onDragEnd()}let cp;function WN(le){fe=le,t(18,fe)}function UN(le){Vt[le?"unshift":"push"](()=>{h=le,t(13,h)})}function VN(le){Vt[le?"unshift":"push"](()=>{f=le,t(8,f)})}function FN(le){Vt[le?"unshift":"push"](()=>{d=le,t(14,d)})}return n.$$set=le=>{"readOnly"in le&&t(0,_=le.readOnly),"externalContent"in le&&t(49,v=le.externalContent),"mainMenuBar"in le&&t(1,y=le.mainMenuBar),"navigationBar"in le&&t(2,E=le.navigationBar),"escapeControlCharacters"in le&&t(50,w=le.escapeControlCharacters),"escapeUnicodeCharacters"in le&&t(51,A=le.escapeUnicodeCharacters),"parser"in le&&t(52,I=le.parser),"validator"in le&&t(53,R=le.validator),"validationParser"in le&&t(54,D=le.validationParser),"pathParser"in le&&t(3,N=le.pathParser),"indentation"in le&&t(55,W=le.indentation),"onError"in le&&t(4,H=le.onError),"onChange"in le&&t(56,P=le.onChange),"onRenderValue"in le&&t(57,Y=le.onRenderValue),"onRequestRepair"in le&&t(5,O=le.onRequestRepair),"onRenderMenu"in le&&t(6,L=le.onRenderMenu),"onClassName"in le&&t(58,U=le.onClassName),"onFocus"in le&&t(59,K=le.onFocus),"onBlur"in le&&t(60,te=le.onBlur),"onSortModal"in le&&t(61,q=le.onSortModal),"onTransformModal"in le&&t(62,x=le.onTransformModal)},n.$$.update=()=>{n.$$.dirty[1]&1572864&&t(71,Ue=$O({escapeControlCharacters:w,escapeUnicodeCharacters:A})),n.$$.dirty[1]&262144&&Ze(v),n.$$.dirty[0]&512|n.$$.dirty[2]&1024&&Pe(de,V),n.$$.dirty[0]&1536,n.$$.dirty[0]&512|n.$$.dirty[1]&14680064&&lt(V,R,I,D),n.$$.dirty[0]&2048&&t(23,Fe=s$(nt)),n.$$.dirty[0]&256&&(i=f?m$(f):void 0),n.$$.dirty[0]&1|n.$$.dirty[1]&203423744|n.$$.dirty[2]&512&&t(12,cp={readOnly:_,parser:I,normalization:Ue,getJson:Qe,getDocumentState:ye,findElement:ai,focus:Ds,onPatch:Fn,onInsert:it,onExpand:ar,onSelect:ve,onFind:Cr,onExpandSection:al,onPasteJson:wc,onRenderValue:Y,onContextMenu:Ao,onClassName:U||(()=>{}),onDrag:BN,onDragEnd:LN}),n.$$.dirty[0]&4096&&s("context changed",cp)},[_,y,E,N,H,O,L,Wn,f,V,ce,nt,cp,h,d,J,Ie,re,fe,M,ae,Me,be,Fe,r,pe,$,ee,ie,me,ue,se,Ce,En,li,An,bt,Zt,Pn,ll,cr,Rf,Cc,cl,ca,kc,Ic,PN,MN,v,w,A,I,R,D,W,P,Y,U,K,te,q,x,Ee,je,Qe,rn,Et,Vn,ai,Ds,Ue,de,WN,UN,VN,FN]}class Dne extends rt{constructor(e){super(),ot(this,e,Rne,One,fn,{readOnly:0,externalContent:49,mainMenuBar:1,navigationBar:2,escapeControlCharacters:50,escapeUnicodeCharacters:51,parser:52,validator:53,validationParser:54,pathParser:3,indentation:55,onError:4,onChange:56,onRenderValue:57,onRequestRepair:5,onRenderMenu:6,onClassName:58,onFocus:59,onBlur:60,onSortModal:61,onTransformModal:62,expand:63,validate:64,getJson:65,patch:66,acceptAutoRepair:7,openTransformModal:67,scrollTo:68,findElement:69,focus:70},null,[-1,-1,-1,-1,-1])}get expand(){return this.$$.ctx[63]}get validate(){return this.$$.ctx[64]}get getJson(){return this.$$.ctx[65]}get patch(){return this.$$.ctx[66]}get acceptAutoRepair(){return this.$$.ctx[7]}get openTransformModal(){return this.$$.ctx[67]}get scrollTo(){return this.$$.ctx[68]}get findElement(){return this.$$.ctx[69]}get focus(){return this.$$.ctx[70]}}const Kb=Dne,Nne=`
<p>
  Enter a JavaScript function to filter, sort, or transform the data.
</p>
`,Pne={id:"javascript",name:"JavaScript",description:Nne,createQuery:Mne,executeQuery:Bne};function Mne(n,e){const{filter:t,sort:i,projection:s}=e,r=[];if(t&&t.path&&t.relation&&t.value){const o=`item => item${fl(t.path)}`,l=T$(t.value),a=typeof l=="string"?`'${t.value}'`:JU(t.value)&&!Number.isSafeInteger(l)?`${t.value}n`:t.value;r.push(`  data = data.filter(${o} ${t.relation} ${a})
`)}if(i&&i.path&&i.direction&&(i.direction==="desc"?r.push(`  data = data.slice().sort((a, b) => {
    // sort descending
    const valueA = a${fl(i.path)}
    const valueB = b${fl(i.path)}
    return valueA > valueB ? -1 : valueA < valueB ? 1 : 0
  })
`):r.push(`  data = data.slice().sort((a, b) => {
    // sort ascending
    const valueA = a${fl(i.path)}
    const valueB = b${fl(i.path)}
    return valueA > valueB ? 1 : valueA < valueB ? -1 : 0
  })
`)),s&&s.paths)if(s.paths.length>1){const o=s.paths.map(l=>{const a=l[l.length-1]||"item",c=`item${fl(l)}`;return`    ${JSON.stringify(a)}: ${c}`});r.push(`  data = data.map(item => ({
${o.join(`,
`)}})
  )
`)}else{const o=`item${fl(s.paths[0])}`;r.push(`  data = data.map(item => ${o})
`)}return r.push(`  return data
`),`function query (data) {
${r.join("")}}`}function Bne(n,e){const i=new Function(`"use strict";

`+e+`

if (typeof query !== "function") {
  throw new Error("Cannot execute query: expecting a function named 'query' but is undefined")
}

return query;
`)()(n);return i!==void 0?i:null}function Lne(n){let e,t,i,s,r,o;return t=new qt({props:{data:n[0]===!0?Xd:Qd}}),{c(){e=C("div"),Te(t.$$.fragment),this.h()},l(l){e=k(l,"DIV",{class:!0,title:!0});var a=T(e);De(t.$$.fragment,a),a.forEach(b),this.h()},h(){S(e,"class","jse-boolean-toggle svelte-zs5o25"),S(e,"title",i=n[1]?`Boolean value ${n[0]}`:"Click to toggle this boolean value")},m(l,a){X(l,e,a),Oe(t,e,null),s=!0,r||(o=Se(e,"mousedown",n[2]),r=!0)},p(l,[a]){const c={};a&1&&(c.data=l[0]===!0?Xd:Qd),t.$set(c),(!s||a&3&&i!==(i=l[1]?`Boolean value ${l[0]}`:"Click to toggle this boolean value"))&&S(e,"title",i)},i(l){s||(B(t.$$.fragment,l),s=!0)},o(l){Q(t.$$.fragment,l),s=!1},d(l){l&&b(e),Re(t),r=!1,o()}}}function Wne(n,e,t){let{path:i}=e,{value:s}=e,{readOnly:r}=e,{onPatch:o}=e,{focus:l}=e;function a(c){c.stopPropagation(),!r&&(o([{op:"replace",path:mt(i),value:!s}]),setTimeout(l))}return n.$$set=c=>{"path"in c&&t(3,i=c.path),"value"in c&&t(0,s=c.value),"readOnly"in c&&t(1,r=c.readOnly),"onPatch"in c&&t(4,o=c.onPatch),"focus"in c&&t(5,l=c.focus)},[s,r,a,i,o,l]}class Une extends rt{constructor(e){super(),ot(this,e,Wne,Lne,fn,{path:3,value:0,readOnly:1,onPatch:4,focus:5})}}const Vne=Une;function Fne(n){let e;return{c(){e=C("div"),this.h()},l(t){e=k(t,"DIV",{class:!0}),T(e).forEach(b),this.h()},h(){S(e,"class","jse-color-picker-popup svelte-1las40j")},m(t,i){X(t,e,i),n[4](e)},p:Xe,i:Xe,o:Xe,d(t){t&&b(e),n[4](null)}}}function jne(n,e,t){let{color:i}=e,{onChange:s}=e,{showOnTop:r}=e,o,l;Mi(async()=>{const c=(await R0(()=>import("../../chunks/vanilla-picker-edfc159c.js"),[],import.meta.url)).default;l=new c({parent:o,color:i,popup:r?"top":"bottom",onDone(u){const h=u.rgba[3]===1?u.hex.substring(0,7):u.hex;s(h)}}),l.show()}),_r(()=>{l&&l.destroy()});function a(c){Vt[c?"unshift":"push"](()=>{o=c,t(0,o)})}return n.$$set=c=>{"color"in c&&t(1,i=c.color),"onChange"in c&&t(2,s=c.onChange),"showOnTop"in c&&t(3,r=c.showOnTop)},[o,i,s,r,a]}class Hne extends rt{constructor(e){super(),ot(this,e,jne,Fne,It,{color:1,onChange:2,showOnTop:3})}}const qne=Hne;function zne(n){let e,t,i,s;return{c(){e=C("button"),this.h()},l(r){e=k(r,"BUTTON",{type:!0,class:!0,style:!0,title:!0}),T(e).forEach(b),this.h()},h(){S(e,"type","button"),S(e,"class","jse-color-picker-button svelte-fk1u9y"),ct(e,"background",n[2]),S(e,"title",t=n[1]?`Color ${n[0]}`:"Click to open a color picker")},m(r,o){X(r,e,o),i||(s=Se(e,"click",n[3]),i=!0)},p(r,[o]){o&4&&ct(e,"background",r[2]),o&3&&t!==(t=r[1]?`Color ${r[0]}`:"Click to open a color picker")&&S(e,"title",t)},i:Xe,o:Xe,d(r){r&&b(e),i=!1,s()}}}function Gne(n,e,t){let i;const{openAbsolutePopup:s}=Nn("absolute-popup");let{path:r}=e,{value:o}=e,{readOnly:l}=e,{onPatch:a}=e,{focus:c}=e;function u(d){a([{op:"replace",path:mt(r),value:d}]),f()}function f(){c()}function h(d){if(l)return;const m=300,g=d.target.getBoundingClientRect().top,v=Pu(d.target).innerHeight-g<m&&g>m;s(qne,{color:o,onChange:u,showOnTop:v},{anchor:d.target,closeOnOuterClick:!0,onClose:f,offsetTop:18,offsetLeft:-8,height:m})}return n.$$set=d=>{"path"in d&&t(4,r=d.path),"value"in d&&t(0,o=d.value),"readOnly"in d&&t(1,l=d.readOnly),"onPatch"in d&&t(5,a=d.onPatch),"focus"in d&&t(6,c=d.focus)},n.$$.update=()=>{n.$$.dirty&1&&t(2,i=vO(o))},[o,l,i,h,r,a,c]}class Kne extends rt{constructor(e){super(),ot(this,e,Gne,zne,fn,{path:4,value:0,readOnly:1,onPatch:5,focus:6})}}const Xne=Kne;function k0(n,e){const t=bO(n,e);return lc("jse-value","jse-"+t,{"jse-url":Bv(n),"jse-empty":typeof n=="string"&&n.length===0})}function Qne(n){let e,t;return e=new TN({props:{value:n[1].escapeValue(n[0]),onChange:n[3],onCancel:n[4],onPaste:n[5],onFind:n[2],onValueClass:n[6]}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,[s]){const r={};s&3&&(r.value=i[1].escapeValue(i[0])),s&4&&(r.onFind=i[2]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function Yne(n,e,t){let{path:i}=e,{value:s}=e,{parser:r}=e,{normalization:o}=e,{enforceString:l}=e,{onPatch:a}=e,{onPasteJson:c}=e,{onSelect:u}=e,{onFind:f}=e,{focus:h}=e;function d(y){return l?y:gf(y,r)}function m(y,E){a([{op:"replace",path:mt(i),value:d(o.unescapeValue(y))}],(w,A)=>{const I=E===Ol.NEXT_INSIDE?P$(w,A,i)||A.selection:Zn(i,!1);return{state:{...A,selection:I}}}),E!==Ol.SELF&&h()}function g(){u(Zn(i,!1)),h()}function _(y){try{const E=r.parse(y);Ri(E)&&c({path:i,contents:E})}catch{}}function v(y){return k0(d(o.unescapeValue(y)),r)}return n.$$set=y=>{"path"in y&&t(7,i=y.path),"value"in y&&t(0,s=y.value),"parser"in y&&t(8,r=y.parser),"normalization"in y&&t(1,o=y.normalization),"enforceString"in y&&t(9,l=y.enforceString),"onPatch"in y&&t(10,a=y.onPatch),"onPasteJson"in y&&t(11,c=y.onPasteJson),"onSelect"in y&&t(12,u=y.onSelect),"onFind"in y&&t(2,f=y.onFind),"focus"in y&&t(13,h=y.focus)},[s,o,f,m,g,_,v,i,r,l,a,c,u,h]}class Jne extends rt{constructor(e){super(),ot(this,e,Yne,Qne,fn,{path:7,value:0,parser:8,normalization:1,enforceString:9,onPatch:10,onPasteJson:11,onSelect:12,onFind:2,focus:13})}}const Zne=Jne;function xne(n){let e=Gl(n[1].escapeValue(n[0]))+"",t;return{c(){t=z(e)},l(i){t=G(i,e)},m(i,s){X(i,t,s)},p(i,s){s&3&&e!==(e=Gl(i[1].escapeValue(i[0]))+"")&&Be(t,e)},i:Xe,o:Xe,d(i){i&&b(t)}}}function $ne(n){let e,t;return e=new IN({props:{text:n[1].escapeValue(n[0]),searchResultItems:n[3]}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,s){const r={};s&3&&(r.text=i[1].escapeValue(i[0])),s&8&&(r.searchResultItems=i[3]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function eie(n){let e,t,i,s,r,o,l,a;const c=[$ne,xne],u=[];function f(h,d){return h[3]?0:1}return t=f(n),i=u[t]=c[t](n),{c(){e=C("div"),i.c(),this.h()},l(h){e=k(h,"DIV",{"data-type":!0,class:!0,title:!0});var d=T(e);i.l(d),d.forEach(b),this.h()},h(){S(e,"data-type","selectable-value"),S(e,"class",s=xe(k0(n[0],n[2]))+" svelte-wuf5jd"),S(e,"title",r=n[4]?"Ctrl+Click or Ctrl+Enter to open url in new window":null)},m(h,d){X(h,e,d),u[t].m(e,null),o=!0,l||(a=[Se(e,"click",n[5]),Se(e,"dblclick",n[6])],l=!0)},p(h,[d]){let m=t;t=f(h),t===m?u[t].p(h,d):(He(),Q(u[m],1,1,()=>{u[m]=null}),qe(),i=u[t],i?i.p(h,d):(i=u[t]=c[t](h),i.c()),B(i,1),i.m(e,null)),(!o||d&5&&s!==(s=xe(k0(h[0],h[2]))+" svelte-wuf5jd"))&&S(e,"class",s),(!o||d&16&&r!==(r=h[4]?"Ctrl+Click or Ctrl+Enter to open url in new window":null))&&S(e,"title",r)},i(h){o||(B(i),o=!0)},o(h){Q(i),o=!1},d(h){h&&b(e),u[t].d(),l=!1,an(a)}}}function tie(n,e,t){let i,{path:s}=e,{value:r}=e,{readOnly:o}=e,{normalization:l}=e,{parser:a}=e,{onSelect:c}=e,{searchResultItems:u}=e;function f(d){typeof r=="string"&&i&&d.ctrlKey&&(d.preventDefault(),d.stopPropagation(),window.open(r,"_blank"))}function h(d){o||(d.preventDefault(),c(Zn(s,!0)))}return n.$$set=d=>{"path"in d&&t(7,s=d.path),"value"in d&&t(0,r=d.value),"readOnly"in d&&t(8,o=d.readOnly),"normalization"in d&&t(1,l=d.normalization),"parser"in d&&t(2,a=d.parser),"onSelect"in d&&t(9,c=d.onSelect),"searchResultItems"in d&&t(3,u=d.searchResultItems)},n.$$.update=()=>{n.$$.dirty&1&&t(4,i=Bv(r))},[r,l,a,u,i,f,h,s,o,c]}class nie extends rt{constructor(e){super(),ot(this,e,tie,eie,fn,{path:7,value:0,readOnly:8,normalization:1,parser:2,onSelect:9,searchResultItems:3})}}const iie=nie;function sie(n){let e,t,i,s,r,o;return t=new qt({props:{data:Eee}}),{c(){e=C("div"),Te(t.$$.fragment),this.h()},l(l){e=k(l,"DIV",{class:!0});var a=T(e);De(t.$$.fragment,a),a.forEach(b),this.h()},h(){S(e,"class","jse-timestamp svelte-1u00zub")},m(l,a){X(l,e,a),Oe(t,e,null),s=!0,r||(o=ac(i=Hb.call(null,e,{text:n[0],...n[1]})),r=!0)},p(l,[a]){i&&Bn(i.update)&&a&1&&i.update.call(null,{text:l[0],...l[1]})},i(l){s||(B(t.$$.fragment,l),s=!0)},o(l){Q(t.$$.fragment,l),s=!1},d(l){l&&b(e),Re(t),r=!1,o()}}}function rie(n,e,t){let i;const s=Nn("absolute-popup");let{value:r}=e;return n.$$set=o=>{"value"in o&&t(2,r=o.value)},n.$$.update=()=>{n.$$.dirty&4&&t(0,i=`Time: ${new Date(r).toString()}`)},[i,s,r]}class oie extends rt{constructor(e){super(),ot(this,e,rie,sie,fn,{value:2})}}const lie=oie;function aie({path:n,value:e,readOnly:t,enforceString:i,searchResultItems:s,isEditing:r,parser:o,normalization:l,onPatch:a,onPasteJson:c,onSelect:u,onFind:f,focus:h}){const d=[];return!r&&KU(e)&&d.push({component:Vne,props:{path:n,value:e,readOnly:t,onPatch:a,focus:h}}),!r&&XU(e)&&d.push({component:Xne,props:{path:n,value:e,readOnly:t,onPatch:a,focus:h}}),r&&d.push({component:Zne,props:{path:n,value:e,enforceString:i,parser:o,normalization:l,onPatch:a,onPasteJson:c,onSelect:u,onFind:f,focus:h}}),r||d.push({component:iie,props:{path:n,value:e,readOnly:t,parser:o,normalization:l,searchResultItems:s,onSelect:u}}),!r&&m1(e)&&d.push({component:lie,props:{value:e}}),d}const fr={};function cie(n,e){const t=n.getBoundingClientRect(),i=e.getBoundingClientRect(),s={};return s.top=t.top<0,s.left=t.left<0,s.bottom=t.bottom+i.height>(window.innerHeight||document.documentElement.clientHeight),s.right=t.right>(window.innerWidth||document.documentElement.clientWidth),s.any=s.top||s.left||s.bottom||s.right,s}function uie(n){let e,t=n[0](n[1],n[2])+"",i;return{c(){e=C("div"),this.h()},l(s){e=k(s,"DIV",{class:!0});var r=T(e);r.forEach(b),this.h()},h(){S(e,"class",i="item "+n[3]+" svelte-3e0qet")},m(s,r){X(s,e,r),e.innerHTML=t},p(s,[r]){r&7&&t!==(t=s[0](s[1],s[2])+"")&&(e.innerHTML=t),r&8&&i!==(i="item "+s[3]+" svelte-3e0qet")&&S(e,"class",i)},i:Xe,o:Xe,d(s){s&&b(e)}}}function fie(n,e,t){let{isActive:i=!1}=e,{isFirst:s=!1}=e,{isHover:r=!1}=e,{isSelectable:o=!1}=e,{getOptionLabel:l=void 0}=e,{item:a=void 0}=e,{filterText:c=""}=e,u="";return n.$$set=f=>{"isActive"in f&&t(4,i=f.isActive),"isFirst"in f&&t(5,s=f.isFirst),"isHover"in f&&t(6,r=f.isHover),"isSelectable"in f&&t(7,o=f.isSelectable),"getOptionLabel"in f&&t(0,l=f.getOptionLabel),"item"in f&&t(1,a=f.item),"filterText"in f&&t(2,c=f.filterText)},n.$$.update=()=>{if(n.$$.dirty&242){const f=[];i&&f.push("active"),s&&f.push("first"),r&&f.push("hover"),a.isGroupHeader&&f.push("groupHeader"),a.isGroupItem&&f.push("groupItem"),o||f.push("notSelectable"),t(3,u=f.join(" "))}},[l,a,c,u,i,s,r,o]}class RN extends rt{constructor(e){super(),ot(this,e,fie,uie,It,{isActive:4,isFirst:5,isHover:6,isSelectable:7,getOptionLabel:0,item:1,filterText:2})}}function zC(n,e,t){const i=n.slice();return i[41]=e[t],i[42]=t,i}function hie(n){let e,t,i=n[1],s=[];for(let l=0;l<i.length;l+=1)s[l]=XC(zC(n,i,l));const r=l=>Q(s[l],1,1,()=>{s[l]=null});let o=null;return i.length||(o=GC(n)),{c(){for(let l=0;l<s.length;l+=1)s[l].c();e=tt(),o&&o.c()},l(l){for(let a=0;a<s.length;a+=1)s[a].l(l);e=tt(),o&&o.l(l)},m(l,a){for(let c=0;c<s.length;c+=1)s[c].m(l,a);X(l,e,a),o&&o.m(l,a),t=!0},p(l,a){if(a[0]&114390){i=l[1];let c;for(c=0;c<i.length;c+=1){const u=zC(l,i,c);s[c]?(s[c].p(u,a),B(s[c],1)):(s[c]=XC(u),s[c].c(),B(s[c],1),s[c].m(e.parentNode,e))}for(He(),c=i.length;c<s.length;c+=1)r(c);qe(),!i.length&&o?o.p(l,a):i.length?o&&(o.d(1),o=null):(o=GC(l),o.c(),o.m(e.parentNode,e))}},i(l){if(!t){for(let a=0;a<i.length;a+=1)B(s[a]);t=!0}},o(l){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)Q(s[a]);t=!1},d(l){Ht(s,l),l&&b(e),o&&o.d(l)}}}function die(n){let e,t,i;var s=n[3];function r(o){return{props:{items:o[1],itemHeight:o[8],$$slots:{default:[gie,({item:l,i:a})=>({41:l,42:a}),({item:l,i:a})=>[0,(l?1024:0)|(a?2048:0)]]},$$scope:{ctx:o}}}}return s&&(e=Cn(s,r(n))),{c(){e&&Te(e.$$.fragment),t=tt()},l(o){e&&De(e.$$.fragment,o),t=tt()},m(o,l){e&&Oe(e,o,l),X(o,t,l),i=!0},p(o,l){const a={};if(l[0]&2&&(a.items=o[1]),l[0]&256&&(a.itemHeight=o[8]),l[0]&9814|l[1]&11264&&(a.$$scope={dirty:l,ctx:o}),s!==(s=o[3])){if(e){He();const c=e;Q(c.$$.fragment,1,0,()=>{Re(c,1)}),qe()}s?(e=Cn(s,r(o)),Te(e.$$.fragment),B(e.$$.fragment,1),Oe(e,t.parentNode,t)):e=null}else s&&e.$set(a)},i(o){i||(e&&B(e.$$.fragment,o),i=!0)},o(o){e&&Q(e.$$.fragment,o),i=!1},d(o){o&&b(t),e&&Re(e,o)}}}function GC(n){let e,t=!n[11]&&KC(n);return{c(){t&&t.c(),e=tt()},l(i){t&&t.l(i),e=tt()},m(i,s){t&&t.m(i,s),X(i,e,s)},p(i,s){i[11]?t&&(t.d(1),t=null):t?t.p(i,s):(t=KC(i),t.c(),t.m(e.parentNode,e))},d(i){t&&t.d(i),i&&b(e)}}}function KC(n){let e,t;return{c(){e=C("div"),t=z(n[12]),this.h()},l(i){e=k(i,"DIV",{class:!0});var s=T(e);t=G(s,n[12]),s.forEach(b),this.h()},h(){S(e,"class","empty svelte-1uyqfml")},m(i,s){X(i,e,s),p(e,t)},p(i,s){s[0]&4096&&Be(t,i[12])},d(i){i&&b(e)}}}function mie(n){let e,t,i,s,r,o;var l=n[4];function a(h){return{props:{item:h[41],filterText:h[13],getOptionLabel:h[6],isFirst:I0(h[42]),isActive:Yd(h[41],h[9],h[10]),isHover:Jd(h[2],h[41],h[42],h[1]),isSelectable:Jl(h[41])}}}l&&(t=Cn(l,a(n)));function c(){return n[29](n[42])}function u(){return n[30](n[42])}function f(...h){return n[31](n[41],n[42],...h)}return{c(){e=C("div"),t&&Te(t.$$.fragment),i=F(),this.h()},l(h){e=k(h,"DIV",{class:!0,tabindex:!0});var d=T(e);t&&De(t.$$.fragment,d),i=j(d),d.forEach(b),this.h()},h(){S(e,"class","listItem"),S(e,"tabindex","-1")},m(h,d){X(h,e,d),t&&Oe(t,e,null),p(e,i),s=!0,r||(o=[Se(e,"mouseover",c),Se(e,"focus",u),Se(e,"click",f)],r=!0)},p(h,d){n=h;const m={};if(d[0]&2&&(m.item=n[41]),d[0]&8192&&(m.filterText=n[13]),d[0]&64&&(m.getOptionLabel=n[6]),d[0]&1538&&(m.isActive=Yd(n[41],n[9],n[10])),d[0]&6&&(m.isHover=Jd(n[2],n[41],n[42],n[1])),d[0]&2&&(m.isSelectable=Jl(n[41])),l!==(l=n[4])){if(t){He();const g=t;Q(g.$$.fragment,1,0,()=>{Re(g,1)}),qe()}l?(t=Cn(l,a(n)),Te(t.$$.fragment),B(t.$$.fragment,1),Oe(t,e,i)):t=null}else l&&t.$set(m)},i(h){s||(t&&B(t.$$.fragment,h),s=!0)},o(h){t&&Q(t.$$.fragment,h),s=!1},d(h){h&&b(e),t&&Re(t),r=!1,an(o)}}}function pie(n){let e,t=n[7](n[41])+"",i;return{c(){e=C("div"),i=z(t),this.h()},l(s){e=k(s,"DIV",{class:!0});var r=T(e);i=G(r,t),r.forEach(b),this.h()},h(){S(e,"class","listGroupTitle svelte-1uyqfml")},m(s,r){X(s,e,r),p(e,i)},p(s,r){r[0]&130&&t!==(t=s[7](s[41])+"")&&Be(i,t)},i:Xe,o:Xe,d(s){s&&b(e)}}}function XC(n){let e,t,i,s;const r=[pie,mie],o=[];function l(a,c){return a[41].isGroupHeader&&!a[41].isSelectable?0:1}return e=l(n),t=o[e]=r[e](n),{c(){t.c(),i=tt()},l(a){t.l(a),i=tt()},m(a,c){o[e].m(a,c),X(a,i,c),s=!0},p(a,c){let u=e;e=l(a),e===u?o[e].p(a,c):(He(),Q(o[u],1,1,()=>{o[u]=null}),qe(),t=o[e],t?t.p(a,c):(t=o[e]=r[e](a),t.c()),B(t,1),t.m(i.parentNode,i))},i(a){s||(B(t),s=!0)},o(a){Q(t),s=!1},d(a){o[e].d(a),a&&b(i)}}}function gie(n){let e,t,i,s,r;var o=n[4];function l(f){return{props:{item:f[41],filterText:f[13],getOptionLabel:f[6],isFirst:I0(f[42]),isActive:Yd(f[41],f[9],f[10]),isHover:Jd(f[2],f[41],f[42],f[1]),isSelectable:Jl(f[41])}}}o&&(t=Cn(o,l(n)));function a(){return n[26](n[42])}function c(){return n[27](n[42])}function u(...f){return n[28](n[41],n[42],...f)}return{c(){e=C("div"),t&&Te(t.$$.fragment),this.h()},l(f){e=k(f,"DIV",{class:!0});var h=T(e);t&&De(t.$$.fragment,h),h.forEach(b),this.h()},h(){S(e,"class","listItem")},m(f,h){X(f,e,h),t&&Oe(t,e,null),i=!0,s||(r=[Se(e,"mouseover",a),Se(e,"focus",c),Se(e,"click",u)],s=!0)},p(f,h){n=f;const d={};if(h[1]&1024&&(d.item=n[41]),h[0]&8192&&(d.filterText=n[13]),h[0]&64&&(d.getOptionLabel=n[6]),h[1]&2048&&(d.isFirst=I0(n[42])),h[0]&1536|h[1]&1024&&(d.isActive=Yd(n[41],n[9],n[10])),h[0]&6|h[1]&3072&&(d.isHover=Jd(n[2],n[41],n[42],n[1])),h[1]&1024&&(d.isSelectable=Jl(n[41])),o!==(o=n[4])){if(t){He();const m=t;Q(m.$$.fragment,1,0,()=>{Re(m,1)}),qe()}o?(t=Cn(o,l(n)),Te(t.$$.fragment),B(t.$$.fragment,1),Oe(t,e,null)):t=null}else o&&t.$set(d)},i(f){i||(t&&B(t.$$.fragment,f),i=!0)},o(f){t&&Q(t.$$.fragment,f),i=!1},d(f){f&&b(e),t&&Re(t),s=!1,an(r)}}}function vie(n){let e,t,i,s,r,o;const l=[die,hie],a=[];function c(u,f){return u[5]?0:1}return t=c(n),i=a[t]=l[t](n),{c(){e=C("div"),i.c(),this.h()},l(u){e=k(u,"DIV",{class:!0,style:!0});var f=T(e);i.l(f),f.forEach(b),this.h()},h(){S(e,"class","listContainer svelte-1uyqfml"),S(e,"style",n[14]),$e(e,"virtualList",n[5])},m(u,f){X(u,e,f),a[t].m(e,null),n[32](e),s=!0,r||(o=[Se(window,"keydown",n[17]),Se(window,"resize",n[18])],r=!0)},p(u,f){let h=t;t=c(u),t===h?a[t].p(u,f):(He(),Q(a[h],1,1,()=>{a[h]=null}),qe(),i=a[t],i?i.p(u,f):(i=a[t]=l[t](u),i.c()),B(i,1),i.m(e,null)),(!s||f[0]&16384)&&S(e,"style",u[14]),(!s||f[0]&32)&&$e(e,"virtualList",u[5])},i(u){s||(B(i),s=!0)},o(u){Q(i),s=!1},d(u){u&&b(e),a[t].d(),n[32](null),r=!1,an(o)}}}function Yd(n,e,t){return e&&e[t]===n[t]}function I0(n){return n===0}function Jd(n,e,t,i){return Jl(e)&&(n===t||i.length===1)}function Jl(n){return n.isGroupHeader&&n.isSelectable||n.selectable||!n.hasOwnProperty("selectable")}function bie(n,e,t){const i=Yu();let{container:s=void 0}=e,{VirtualList:r=null}=e,{Item:o=RN}=e,{isVirtualList:l=!1}=e,{items:a=[]}=e,{labelIdentifier:c="label"}=e,{getOptionLabel:u=(J,Ie)=>{if(J)return J.isCreator?`Create "${Ie}"`:J[c]}}=e,{getGroupHeaderLabel:f=null}=e,{itemHeight:h=40}=e,{hoverItemIndex:d=0}=e,{value:m=void 0}=e,{optionIdentifier:g="value"}=e,{hideEmptyState:_=!1}=e,{noOptionsMessage:v="No options"}=e,{isMulti:y=!1}=e,{activeItemIndex:E=0}=e,{filterText:w=""}=e,{parent:A=null}=e,{listPlacement:I=null}=e,{listAutoWidth:R=null}=e,{listOffset:D=5}=e,N=0,W=!1,H;Mi(()=>{if(a.length>0&&!y&&m){const J=a.findIndex(Ie=>Ie[g]===m[g]);J&&t(2,d=J)}te("active"),s.addEventListener("scroll",()=>{clearTimeout(N),N=setTimeout(()=>{W=!1},100)},!1)}),hI(()=>{a||t(1,a=[]),a!==H&&a.length>0&&t(2,d=0),H=a});function P(J){J.isCreator||i("itemSelected",J)}function Y(J){W||t(2,d=J)}function O(J){const{item:Ie,i:Ue,event:re}=J;if(re.stopPropagation(),m&&!y&&m[g]===Ie[g])return L();Ie.isCreator?i("itemCreated",w):Jl(Ie)&&(t(19,E=Ue),t(2,d=Ue),P(Ie))}function L(){i("closeList")}async function U(J){if(l)return;let Ie=!0;for(;Ie;)J>0&&d===a.length-1?t(2,d=0):J<0&&d===0?t(2,d=a.length-1):t(2,d=d+J),Ie=!Jl(a[d]);await ci(),te("hover")}function K(J){switch(J.key){case"Escape":J.preventDefault(),L();break;case"ArrowDown":J.preventDefault(),a.length&&U(1);break;case"ArrowUp":J.preventDefault(),a.length&&U(-1);break;case"Enter":if(J.preventDefault(),a.length===0)break;const Ie=a[d];if(m&&!y&&m[g]===Ie[g]){L();break}Ie.isCreator?i("itemCreated",w):(t(19,E=d),P(a[d]));break;case"Tab":if(J.preventDefault(),a.length===0||m&&m[g]===a[d][g])return L();t(19,E=d),P(a[d]);break}}function te(J){if(l||!s)return;let Ie;const Ue=s.querySelector(`.listItem .${J}`);Ue&&(Ie=s.getBoundingClientRect().bottom-Ue.getBoundingClientRect().bottom),t(0,s.scrollTop-=Ie,s)}let q;function x(){const{height:J,width:Ie}=A.getBoundingClientRect();t(14,q=""),t(14,q+=`min-width:${Ie}px;width:${R?"auto":"100%"};`),I==="top"||I==="auto"&&cie(A,s).bottom?t(14,q+=`bottom:${J+D}px;`):t(14,q+=`top:${J+D}px;`)}const Z=J=>Y(J),V=J=>Y(J),ce=(J,Ie,Ue)=>O({item:J,i:Ie,event:Ue}),pe=J=>Y(J),oe=J=>Y(J),ve=(J,Ie,Ue)=>O({item:J,i:Ie,event:Ue});function Ne(J){Vt[J?"unshift":"push"](()=>{s=J,t(0,s)})}return n.$$set=J=>{"container"in J&&t(0,s=J.container),"VirtualList"in J&&t(3,r=J.VirtualList),"Item"in J&&t(4,o=J.Item),"isVirtualList"in J&&t(5,l=J.isVirtualList),"items"in J&&t(1,a=J.items),"labelIdentifier"in J&&t(20,c=J.labelIdentifier),"getOptionLabel"in J&&t(6,u=J.getOptionLabel),"getGroupHeaderLabel"in J&&t(7,f=J.getGroupHeaderLabel),"itemHeight"in J&&t(8,h=J.itemHeight),"hoverItemIndex"in J&&t(2,d=J.hoverItemIndex),"value"in J&&t(9,m=J.value),"optionIdentifier"in J&&t(10,g=J.optionIdentifier),"hideEmptyState"in J&&t(11,_=J.hideEmptyState),"noOptionsMessage"in J&&t(12,v=J.noOptionsMessage),"isMulti"in J&&t(21,y=J.isMulti),"activeItemIndex"in J&&t(19,E=J.activeItemIndex),"filterText"in J&&t(13,w=J.filterText),"parent"in J&&t(22,A=J.parent),"listPlacement"in J&&t(23,I=J.listPlacement),"listAutoWidth"in J&&t(24,R=J.listAutoWidth),"listOffset"in J&&t(25,D=J.listOffset)},n.$$.update=()=>{n.$$.dirty[0]&4194305&&A&&s&&x()},[s,a,d,r,o,l,u,f,h,m,g,_,v,w,q,Y,O,K,x,E,c,y,A,I,R,D,Z,V,ce,pe,oe,ve,Ne]}class _ie extends rt{constructor(e){super(),ot(this,e,bie,vie,It,{container:0,VirtualList:3,Item:4,isVirtualList:5,items:1,labelIdentifier:20,getOptionLabel:6,getGroupHeaderLabel:7,itemHeight:8,hoverItemIndex:2,value:9,optionIdentifier:10,hideEmptyState:11,noOptionsMessage:12,isMulti:21,activeItemIndex:19,filterText:13,parent:22,listPlacement:23,listAutoWidth:24,listOffset:25},null,[-1,-1])}}function yie(n){let e,t=n[0](n[1])+"";return{c(){e=C("div"),this.h()},l(i){e=k(i,"DIV",{class:!0});var s=T(e);s.forEach(b),this.h()},h(){S(e,"class","selection svelte-pu1q1n")},m(i,s){X(i,e,s),e.innerHTML=t},p(i,[s]){s&3&&t!==(t=i[0](i[1])+"")&&(e.innerHTML=t)},i:Xe,o:Xe,d(i){i&&b(e)}}}function Sie(n,e,t){let{getSelectionLabel:i=void 0}=e,{item:s=void 0}=e;return n.$$set=r=>{"getSelectionLabel"in r&&t(0,i=r.getSelectionLabel),"item"in r&&t(1,s=r.item)},[i,s]}class Eie extends rt{constructor(e){super(),ot(this,e,Sie,yie,It,{getSelectionLabel:0,item:1})}}function QC(n,e,t){const i=n.slice();return i[9]=e[t],i[11]=t,i}function YC(n){let e,t,i,s,r;function o(...l){return n[6](n[11],...l)}return{c(){e=C("div"),t=ir("svg"),i=ir("path"),this.h()},l(l){e=k(l,"DIV",{class:!0});var a=T(e);t=sr(a,"svg",{width:!0,height:!0,viewBox:!0,focusable:!0,"aria-hidden":!0,role:!0,class:!0});var c=T(t);i=sr(c,"path",{d:!0}),T(i).forEach(b),c.forEach(b),a.forEach(b),this.h()},h(){S(i,"d","M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124 l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z"),S(t,"width","100%"),S(t,"height","100%"),S(t,"viewBox","-2 -2 50 50"),S(t,"focusable","false"),S(t,"aria-hidden","true"),S(t,"role","presentation"),S(t,"class","svelte-liu9pa"),S(e,"class","multiSelectItem_clear svelte-liu9pa")},m(l,a){X(l,e,a),p(e,t),p(t,i),s||(r=Se(e,"click",o),s=!0)},p(l,a){n=l},d(l){l&&b(e),s=!1,r()}}}function JC(n){let e,t,i=n[4](n[9])+"",s,r,o,l,a,c=!n[2]&&!n[3]&&YC(n);function u(...f){return n[7](n[11],...f)}return{c(){e=C("div"),t=C("div"),s=F(),c&&c.c(),r=F(),this.h()},l(f){e=k(f,"DIV",{class:!0});var h=T(e);t=k(h,"DIV",{class:!0});var d=T(t);d.forEach(b),s=j(h),c&&c.l(h),r=j(h),h.forEach(b),this.h()},h(){S(t,"class","multiSelectItem_label svelte-liu9pa"),S(e,"class",o="multiSelectItem "+(n[1]===n[11]?"active":"")+" "+(n[2]?"disabled":"")+" svelte-liu9pa")},m(f,h){X(f,e,h),p(e,t),t.innerHTML=i,p(e,s),c&&c.m(e,null),p(e,r),l||(a=Se(e,"click",u),l=!0)},p(f,h){n=f,h&17&&i!==(i=n[4](n[9])+"")&&(t.innerHTML=i),!n[2]&&!n[3]?c?c.p(n,h):(c=YC(n),c.c(),c.m(e,r)):c&&(c.d(1),c=null),h&6&&o!==(o="multiSelectItem "+(n[1]===n[11]?"active":"")+" "+(n[2]?"disabled":"")+" svelte-liu9pa")&&S(e,"class",o)},d(f){f&&b(e),c&&c.d(),l=!1,a()}}}function Aie(n){let e,t=n[0],i=[];for(let s=0;s<t.length;s+=1)i[s]=JC(QC(n,t,s));return{c(){for(let s=0;s<i.length;s+=1)i[s].c();e=tt()},l(s){for(let r=0;r<i.length;r+=1)i[r].l(s);e=tt()},m(s,r){for(let o=0;o<i.length;o+=1)i[o].m(s,r);X(s,e,r)},p(s,[r]){if(r&63){t=s[0];let o;for(o=0;o<t.length;o+=1){const l=QC(s,t,o);i[o]?i[o].p(l,r):(i[o]=JC(l),i[o].c(),i[o].m(e.parentNode,e))}for(;o<i.length;o+=1)i[o].d(1);i.length=t.length}},i:Xe,o:Xe,d(s){Ht(i,s),s&&b(e)}}}function wie(n,e,t){const i=Yu();let{value:s=[]}=e,{activeValue:r=void 0}=e,{isDisabled:o=!1}=e,{multiFullItemClearable:l=!1}=e,{getSelectionLabel:a=void 0}=e;function c(h,d){d.stopPropagation(),i("multiItemClear",{i:h})}const u=(h,d)=>c(h,d),f=(h,d)=>l?c(h,d):{};return n.$$set=h=>{"value"in h&&t(0,s=h.value),"activeValue"in h&&t(1,r=h.activeValue),"isDisabled"in h&&t(2,o=h.isDisabled),"multiFullItemClearable"in h&&t(3,l=h.multiFullItemClearable),"getSelectionLabel"in h&&t(4,a=h.getSelectionLabel)},[s,r,o,l,a,c,u,f]}class Cie extends rt{constructor(e){super(),ot(this,e,wie,Aie,It,{value:0,activeValue:1,isDisabled:2,multiFullItemClearable:3,getSelectionLabel:4})}}function ZC(n,e,t){const i=n.slice();return i[23]=e[t],i}const kie=n=>({item:n&32,i:n&32,hoverItemIndex:n&2}),xC=n=>({item:n[23].data,i:n[23].index,hoverItemIndex:n[1]});function Iie(n){let e;return{c(){e=z("Missing template")},l(t){e=G(t,"Missing template")},m(t,i){X(t,e,i)},d(t){t&&b(e)}}}function $C(n,e){let t,i,s;const r=e[15].default,o=cs(r,e,e[14],xC),l=o||Iie();return{key:n,first:null,c(){t=C("svelte-virtual-list-row"),l&&l.c(),i=F(),this.h()},l(a){t=k(a,"SVELTE-VIRTUAL-LIST-ROW",{class:!0});var c=T(t);l&&l.l(c),i=j(c),c.forEach(b),this.h()},h(){mg(t,"class","svelte-g2cagw"),this.first=t},m(a,c){X(a,t,c),l&&l.m(t,null),p(t,i),s=!0},p(a,c){e=a,o&&o.p&&(!s||c&16418)&&us(o,r,e,e[14],s?hs(r,e[14],c,kie):fs(e[14]),xC)},i(a){s||(B(l,a),s=!0)},o(a){Q(l,a),s=!1},d(a){a&&b(t),l&&l.d(a)}}}function Tie(n){let e,t,i=[],s=new Map,r,o,l,a,c=n[5];const u=f=>f[23].index;for(let f=0;f<c.length;f+=1){let h=ZC(n,c,f),d=u(h);s.set(d,i[f]=$C(d,h))}return{c(){e=C("svelte-virtual-list-viewport"),t=C("svelte-virtual-list-contents");for(let f=0;f<i.length;f+=1)i[f].c();this.h()},l(f){e=k(f,"SVELTE-VIRTUAL-LIST-VIEWPORT",{style:!0,class:!0});var h=T(e);t=k(h,"SVELTE-VIRTUAL-LIST-CONTENTS",{style:!0,class:!0});var d=T(t);for(let m=0;m<i.length;m+=1)i[m].l(d);d.forEach(b),h.forEach(b),this.h()},h(){ct(t,"padding-top",n[6]+"px"),ct(t,"padding-bottom",n[7]+"px"),mg(t,"class","svelte-g2cagw"),ct(e,"height",n[0]),mg(e,"class","svelte-g2cagw"),uu(()=>n[18].call(e))},m(f,h){X(f,e,h),p(e,t);for(let d=0;d<i.length;d+=1)i[d].m(t,null);n[16](t),n[17](e),r=qN(e,n[18].bind(e)),o=!0,l||(a=Se(e,"scroll",n[8]),l=!0)},p(f,[h]){h&16418&&(c=f[5],He(),i=Zu(i,h,u,1,f,c,s,t,xd,$C,null,ZC),qe()),(!o||h&64)&&ct(t,"padding-top",f[6]+"px"),(!o||h&128)&&ct(t,"padding-bottom",f[7]+"px"),(!o||h&1)&&ct(e,"height",f[0])},i(f){if(!o){for(let h=0;h<c.length;h+=1)B(i[h]);o=!0}},o(f){for(let h=0;h<i.length;h+=1)Q(i[h]);o=!1},d(f){f&&b(e);for(let h=0;h<i.length;h+=1)i[h].d();n[16](null),n[17](null),r(),l=!1,a()}}}function Oie(n,e,t){let{$$slots:i={},$$scope:s}=e,{items:r=void 0}=e,{height:o="100%"}=e,{itemHeight:l=40}=e,{hoverItemIndex:a=0}=e,{start:c=0}=e,{end:u=0}=e,f=[],h,d,m,g=0,_,v,y=0,E=0,w;async function A(W,H,P){const{scrollTop:Y}=d;await ci();let O=y-Y,L=c;for(;O<H&&L<W.length;){let K=h[L-c];K||(t(10,u=L+1),await ci(),K=h[L-c]);const te=f[L]=P||K.offsetHeight;O+=te,L+=1}t(10,u=L);const U=W.length-u;w=(y+O)/u,t(7,E=U*w),f.length=W.length,d&&t(3,d.scrollTop=0,d)}async function I(){const{scrollTop:W}=d,H=c;for(let L=0;L<h.length;L+=1)f[c+L]=l||h[L].offsetHeight;let P=0,Y=0;for(;P<r.length;){const L=f[P]||w;if(Y+L>W){t(9,c=P),t(6,y=Y);break}Y+=L,P+=1}for(;P<r.length&&(Y+=f[P]||w,P+=1,!(Y>W+g)););t(10,u=P);const O=r.length-u;for(w=Y/u;P<r.length;)f[P++]=w;if(t(7,E=O*w),c<H){await ci();let L=0,U=0;for(let te=c;te<H;te+=1)h[te-c]&&(L+=f[te],U+=l||h[te-c].offsetHeight);const K=U-L;d.scrollTo(0,W+K)}}Mi(()=>{h=m.getElementsByTagName("svelte-virtual-list-row"),t(13,v=!0)});function R(W){Vt[W?"unshift":"push"](()=>{m=W,t(4,m)})}function D(W){Vt[W?"unshift":"push"](()=>{d=W,t(3,d)})}function N(){g=this.offsetHeight,t(2,g)}return n.$$set=W=>{"items"in W&&t(11,r=W.items),"height"in W&&t(0,o=W.height),"itemHeight"in W&&t(12,l=W.itemHeight),"hoverItemIndex"in W&&t(1,a=W.hoverItemIndex),"start"in W&&t(9,c=W.start),"end"in W&&t(10,u=W.end),"$$scope"in W&&t(14,s=W.$$scope)},n.$$.update=()=>{n.$$.dirty&3584&&t(5,_=r.slice(c,u).map((W,H)=>({index:H+c,data:W}))),n.$$.dirty&14340&&v&&A(r,g,l)},[o,a,g,d,m,_,y,E,I,c,u,r,l,v,s,i,R,D,N]}class Rie extends rt{constructor(e){super(),ot(this,e,Oie,Tie,It,{items:11,height:0,itemHeight:12,hoverItemIndex:1,start:9,end:10})}}function Die(n){let e,t;return{c(){e=ir("svg"),t=ir("path"),this.h()},l(i){e=sr(i,"svg",{width:!0,height:!0,viewBox:!0,focusable:!0,"aria-hidden":!0,role:!0});var s=T(e);t=sr(s,"path",{fill:!0,d:!0}),T(t).forEach(b),s.forEach(b),this.h()},h(){S(t,"fill","currentColor"),S(t,"d",`M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124
    l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z`),S(e,"width","100%"),S(e,"height","100%"),S(e,"viewBox","-2 -2 50 50"),S(e,"focusable","false"),S(e,"aria-hidden","true"),S(e,"role","presentation")},m(i,s){X(i,e,s),p(e,t)},p:Xe,i:Xe,o:Xe,d(i){i&&b(e)}}}class Nie extends rt{constructor(e){super(),ot(this,e,null,Die,It,{})}}function Pie(n,e,t){let i;return function(){let r=this,o=arguments,l=function(){i=null,t||n.apply(r,o)},a=t&&!i;clearTimeout(i),i=setTimeout(l,e),a&&n.apply(r,o)}}function ek(n,e,t){const i=n.slice();return i[103]=e[t],i}function tk(n){let e,t,i,s,r;return{c(){e=C("span"),t=z(n[33]),i=F(),s=C("span"),r=z(n[32]),this.h()},l(o){e=k(o,"SPAN",{id:!0});var l=T(e);t=G(l,n[33]),l.forEach(b),i=j(o),s=k(o,"SPAN",{id:!0});var a=T(s);r=G(a,n[32]),a.forEach(b),this.h()},h(){S(e,"id","aria-selection"),S(s,"id","aria-context")},m(o,l){X(o,e,l),p(e,t),X(o,i,l),X(o,s,l),p(s,r)},p(o,l){l[1]&4&&Be(t,o[33]),l[1]&2&&Be(r,o[32])},d(o){o&&b(e),o&&b(i),o&&b(s)}}}function nk(n){let e,t,i;const s=[n[18]];var r=n[17];function o(l){let a={};for(let c=0;c<s.length;c+=1)a=Qr(a,s[c]);return{props:a}}return r&&(e=Cn(r,o())),{c(){e&&Te(e.$$.fragment),t=tt()},l(l){e&&De(e.$$.fragment,l),t=tt()},m(l,a){e&&Oe(e,l,a),X(l,t,a),i=!0},p(l,a){const c=a[0]&262144?Yr(s,[Zl(l[18])]):{};if(r!==(r=l[17])){if(e){He();const u=e;Q(u.$$.fragment,1,0,()=>{Re(u,1)}),qe()}r?(e=Cn(r,o()),Te(e.$$.fragment),B(e.$$.fragment,1),Oe(e,t.parentNode,t)):e=null}else r&&e.$set(c)},i(l){i||(e&&B(e.$$.fragment,l),i=!0)},o(l){e&&Q(e.$$.fragment,l),i=!1},d(l){l&&b(t),e&&Re(e,l)}}}function ik(n){let e,t,i;var s=n[26];function r(o){return{props:{value:o[2],getSelectionLabel:o[12],activeValue:o[30],isDisabled:o[9],multiFullItemClearable:o[8]}}}return s&&(e=Cn(s,r(n)),e.$on("multiItemClear",n[38]),e.$on("focus",n[40])),{c(){e&&Te(e.$$.fragment),t=tt()},l(o){e&&De(e.$$.fragment,o),t=tt()},m(o,l){e&&Oe(e,o,l),X(o,t,l),i=!0},p(o,l){const a={};if(l[0]&4&&(a.value=o[2]),l[0]&4096&&(a.getSelectionLabel=o[12]),l[0]&1073741824&&(a.activeValue=o[30]),l[0]&512&&(a.isDisabled=o[9]),l[0]&256&&(a.multiFullItemClearable=o[8]),s!==(s=o[26])){if(e){He();const c=e;Q(c.$$.fragment,1,0,()=>{Re(c,1)}),qe()}s?(e=Cn(s,r(o)),e.$on("multiItemClear",o[38]),e.$on("focus",o[40]),Te(e.$$.fragment),B(e.$$.fragment,1),Oe(e,t.parentNode,t)):e=null}else s&&e.$set(a)},i(o){i||(e&&B(e.$$.fragment,o),i=!0)},o(o){e&&Q(e.$$.fragment,o),i=!1},d(o){o&&b(t),e&&Re(e,o)}}}function sk(n){let e,t,i,s,r;var o=n[25];function l(a){return{props:{item:a[2],getSelectionLabel:a[12]}}}return o&&(t=Cn(o,l(n))),{c(){e=C("div"),t&&Te(t.$$.fragment),this.h()},l(a){e=k(a,"DIV",{class:!0});var c=T(e);t&&De(t.$$.fragment,c),c.forEach(b),this.h()},h(){S(e,"class","selectedItem svelte-17l1npl")},m(a,c){X(a,e,c),t&&Oe(t,e,null),i=!0,s||(r=Se(e,"focus",n[40]),s=!0)},p(a,c){const u={};if(c[0]&4&&(u.item=a[2]),c[0]&4096&&(u.getSelectionLabel=a[12]),o!==(o=a[25])){if(t){He();const f=t;Q(f.$$.fragment,1,0,()=>{Re(f,1)}),qe()}o?(t=Cn(o,l(a)),Te(t.$$.fragment),B(t.$$.fragment,1),Oe(t,e,null)):t=null}else o&&t.$set(u)},i(a){i||(t&&B(t.$$.fragment,a),i=!0)},o(a){t&&Q(t.$$.fragment,a),i=!1},d(a){a&&b(e),t&&Re(t),s=!1,r()}}}function rk(n){let e,t,i,s,r;var o=n[23];function l(a){return{}}return o&&(t=Cn(o,l())),{c(){e=C("div"),t&&Te(t.$$.fragment),this.h()},l(a){e=k(a,"DIV",{class:!0,"aria-hidden":!0});var c=T(e);t&&De(t.$$.fragment,c),c.forEach(b),this.h()},h(){S(e,"class","clearSelect svelte-17l1npl"),S(e,"aria-hidden","true")},m(a,c){X(a,e,c),t&&Oe(t,e,null),i=!0,s||(r=Se(e,"click",zN(n[27])),s=!0)},p(a,c){if(o!==(o=a[23])){if(t){He();const u=t;Q(u.$$.fragment,1,0,()=>{Re(u,1)}),qe()}o?(t=Cn(o,l()),Te(t.$$.fragment),B(t.$$.fragment,1),Oe(t,e,null)):t=null}},i(a){i||(t&&B(t.$$.fragment,a),i=!0)},o(a){t&&Q(t.$$.fragment,a),i=!1},d(a){a&&b(e),t&&Re(t),s=!1,r()}}}function ok(n){let e;function t(r,o){return r[22]?Bie:Mie}let i=t(n),s=i(n);return{c(){e=C("div"),s.c(),this.h()},l(r){e=k(r,"DIV",{class:!0,"aria-hidden":!0});var o=T(e);s.l(o),o.forEach(b),this.h()},h(){S(e,"class","indicator svelte-17l1npl"),S(e,"aria-hidden","true")},m(r,o){X(r,e,o),s.m(e,null)},p(r,o){i===(i=t(r))&&s?s.p(r,o):(s.d(1),s=i(r),s&&(s.c(),s.m(e,null)))},d(r){r&&b(e),s.d()}}}function Mie(n){let e,t;return{c(){e=ir("svg"),t=ir("path"),this.h()},l(i){e=sr(i,"svg",{width:!0,height:!0,viewBox:!0,focusable:!0,"aria-hidden":!0,class:!0});var s=T(e);t=sr(s,"path",{d:!0}),T(t).forEach(b),s.forEach(b),this.h()},h(){S(t,"d",`M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747
          3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0
          1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502
          0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0
          0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z`),S(e,"width","100%"),S(e,"height","100%"),S(e,"viewBox","0 0 20 20"),S(e,"focusable","false"),S(e,"aria-hidden","true"),S(e,"class","svelte-17l1npl")},m(i,s){X(i,e,s),p(e,t)},p:Xe,d(i){i&&b(e)}}}function Bie(n){let e,t;return{c(){e=new GN(!1),t=tt(),this.h()},l(i){e=KN(i,!1),t=tt(),this.h()},h(){e.a=t},m(i,s){e.m(n[22],i,s),X(i,t,s)},p(i,s){s[0]&4194304&&e.p(i[22])},d(i){i&&b(t),i&&e.d()}}}function lk(n){let e,t,i;return{c(){e=C("div"),t=ir("svg"),i=ir("circle"),this.h()},l(s){e=k(s,"DIV",{class:!0});var r=T(e);t=sr(r,"svg",{class:!0,viewBox:!0});var o=T(t);i=sr(o,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-miterlimit":!0}),T(i).forEach(b),o.forEach(b),r.forEach(b),this.h()},h(){S(i,"class","spinner_path svelte-17l1npl"),S(i,"cx","50"),S(i,"cy","50"),S(i,"r","20"),S(i,"fill","none"),S(i,"stroke","currentColor"),S(i,"stroke-width","5"),S(i,"stroke-miterlimit","10"),S(t,"class","spinner_icon svelte-17l1npl"),S(t,"viewBox","25 25 50 50"),S(e,"class","spinner svelte-17l1npl")},m(s,r){X(s,e,r),p(e,t),p(t,i)},d(s){s&&b(e)}}}function ak(n){let e,t,i,s;const r=[n[34]];function o(c){n[84](c)}var l=n[24];function a(c){let u={};for(let f=0;f<r.length;f+=1)u=Qr(u,r[f]);return c[28]!==void 0&&(u.hoverItemIndex=c[28]),{props:u}}return l&&(e=Cn(l,a(n)),Vt.push(()=>Vs(e,"hoverItemIndex",o)),e.$on("itemSelected",n[43]),e.$on("itemCreated",n[44]),e.$on("closeList",n[45])),{c(){e&&Te(e.$$.fragment),i=tt()},l(c){e&&De(e.$$.fragment,c),i=tt()},m(c,u){e&&Oe(e,c,u),X(c,i,u),s=!0},p(c,u){const f=u[1]&8?Yr(r,[Zl(c[34])]):{};if(!t&&u[0]&268435456&&(t=!0,f.hoverItemIndex=c[28],Zs(()=>t=!1)),l!==(l=c[24])){if(e){He();const h=e;Q(h.$$.fragment,1,0,()=>{Re(h,1)}),qe()}l?(e=Cn(l,a(c)),Vt.push(()=>Vs(e,"hoverItemIndex",o)),e.$on("itemSelected",c[43]),e.$on("itemCreated",c[44]),e.$on("closeList",c[45]),Te(e.$$.fragment),B(e.$$.fragment,1),Oe(e,i.parentNode,i)):e=null}else l&&e.$set(f)},i(c){s||(e&&B(e.$$.fragment,c),s=!0)},o(c){e&&Q(e.$$.fragment,c),s=!1},d(c){c&&b(i),e&&Re(e,c)}}}function ck(n){let e,t,i;return{c(){e=C("input"),this.h()},l(s){e=k(s,"INPUT",{name:!0,type:!0,class:!0}),this.h()},h(){S(e,"name",t=n[16].name),S(e,"type","hidden"),e.value=i=n[2]?n[12](n[2]):null,S(e,"class","svelte-17l1npl")},m(s,r){X(s,e,r)},p(s,r){r[0]&65536&&t!==(t=s[16].name)&&S(e,"name",t),r[0]&4100&&i!==(i=s[2]?s[12](s[2]):null)&&(e.value=i)},d(s){s&&b(e)}}}function uk(n){let e,t=n[2],i=[];for(let s=0;s<t.length;s+=1)i[s]=fk(ek(n,t,s));return{c(){for(let s=0;s<i.length;s+=1)i[s].c();e=tt()},l(s){for(let r=0;r<i.length;r+=1)i[r].l(s);e=tt()},m(s,r){for(let o=0;o<i.length;o+=1)i[o].m(s,r);X(s,e,r)},p(s,r){if(r[0]&69636){t=s[2];let o;for(o=0;o<t.length;o+=1){const l=ek(s,t,o);i[o]?i[o].p(l,r):(i[o]=fk(l),i[o].c(),i[o].m(e.parentNode,e))}for(;o<i.length;o+=1)i[o].d(1);i.length=t.length}},d(s){Ht(i,s),s&&b(e)}}}function fk(n){let e,t,i;return{c(){e=C("input"),this.h()},l(s){e=k(s,"INPUT",{name:!0,type:!0,class:!0}),this.h()},h(){S(e,"name",t=n[16].name),S(e,"type","hidden"),e.value=i=n[103]?n[12](n[103]):null,S(e,"class","svelte-17l1npl")},m(s,r){X(s,e,r)},p(s,r){r[0]&65536&&t!==(t=s[16].name)&&S(e,"name",t),r[0]&4100&&i!==(i=s[103]?s[12](s[103]):null)&&(e.value=i)},d(s){s&&b(e)}}}function Lie(n){let e,t,i,s,r,o,l,a,c,u,f,h,d,m,g,_,v,y,E=n[1]&&tk(n),w=n[17]&&nk(n),A=n[35]&&ik(n),I=[{readOnly:l=!n[13]},n[31],{placeholder:n[36]},{style:n[14]},{disabled:n[9]}],R={};for(let L=0;L<I.length;L+=1)R=Qr(R,I[L]);let D=!n[7]&&n[29]&&sk(n),N=n[37]&&rk(n),W=!n[37]&&(n[20]||n[19]&&!n[2]||!n[13]&&!n[9]&&!n[4]&&(n[29]&&!n[15]||!n[29]))&&ok(n),H=n[4]&&lk(),P=n[5]&&ak(n),Y=(!n[7]||n[7]&&!n[35])&&ck(n),O=n[7]&&n[35]&&uk(n);return{c(){e=C("div"),t=C("span"),E&&E.c(),i=F(),w&&w.c(),s=F(),A&&A.c(),r=F(),o=C("input"),a=F(),D&&D.c(),c=F(),N&&N.c(),u=F(),W&&W.c(),f=F(),H&&H.c(),h=F(),P&&P.c(),d=F(),Y&&Y.c(),m=F(),O&&O.c(),this.h()},l(L){e=k(L,"DIV",{class:!0,style:!0});var U=T(e);t=k(U,"SPAN",{"aria-live":!0,"aria-atomic":!0,"aria-relevant":!0,class:!0});var K=T(t);E&&E.l(K),K.forEach(b),i=j(U),w&&w.l(U),s=j(U),A&&A.l(U),r=j(U),o=k(U,"INPUT",{placeholder:!0,style:!0}),a=j(U),D&&D.l(U),c=j(U),N&&N.l(U),u=j(U),W&&W.l(U),f=j(U),H&&H.l(U),h=j(U),P&&P.l(U),d=j(U),Y&&Y.l(U),m=j(U),O&&O.l(U),U.forEach(b),this.h()},h(){S(t,"aria-live","polite"),S(t,"aria-atomic","false"),S(t,"aria-relevant","additions text"),S(t,"class","a11yText svelte-17l1npl"),Jb(o,R),$e(o,"svelte-17l1npl",!0),S(e,"class",g="selectContainer "+n[21]+" svelte-17l1npl"),S(e,"style",n[11]),$e(e,"hasError",n[10]),$e(e,"multiSelect",n[7]),$e(e,"disabled",n[9]),$e(e,"focused",n[1])},m(L,U){X(L,e,U),p(e,t),E&&E.m(t,null),p(e,i),w&&w.m(e,null),p(e,s),A&&A.m(e,null),p(e,r),p(e,o),o.autofocus&&o.focus(),n[82](o),ds(o,n[3]),p(e,a),D&&D.m(e,null),p(e,c),N&&N.m(e,null),p(e,u),W&&W.m(e,null),p(e,f),H&&H.m(e,null),p(e,h),P&&P.m(e,null),p(e,d),Y&&Y.m(e,null),p(e,m),O&&O.m(e,null),n[85](e),_=!0,v||(y=[Se(window,"click",n[41]),Se(window,"focusin",n[41]),Se(window,"keydown",n[39]),Se(o,"focus",n[40]),Se(o,"input",n[83]),Se(e,"click",n[42])],v=!0)},p(L,U){L[1]?E?E.p(L,U):(E=tk(L),E.c(),E.m(t,null)):E&&(E.d(1),E=null),L[17]?w?(w.p(L,U),U[0]&131072&&B(w,1)):(w=nk(L),w.c(),B(w,1),w.m(e,s)):w&&(He(),Q(w,1,1,()=>{w=null}),qe()),L[35]?A?(A.p(L,U),U[1]&16&&B(A,1)):(A=ik(L),A.c(),B(A,1),A.m(e,r)):A&&(He(),Q(A,1,1,()=>{A=null}),qe()),Jb(o,R=Yr(I,[(!_||U[0]&8192&&l!==(l=!L[13]))&&{readOnly:l},U[1]&1&&L[31],(!_||U[1]&32)&&{placeholder:L[36]},(!_||U[0]&16384)&&{style:L[14]},(!_||U[0]&512)&&{disabled:L[9]}])),U[0]&8&&o.value!==L[3]&&ds(o,L[3]),$e(o,"svelte-17l1npl",!0),!L[7]&&L[29]?D?(D.p(L,U),U[0]&536871040&&B(D,1)):(D=sk(L),D.c(),B(D,1),D.m(e,c)):D&&(He(),Q(D,1,1,()=>{D=null}),qe()),L[37]?N?(N.p(L,U),U[1]&64&&B(N,1)):(N=rk(L),N.c(),B(N,1),N.m(e,u)):N&&(He(),Q(N,1,1,()=>{N=null}),qe()),!L[37]&&(L[20]||L[19]&&!L[2]||!L[13]&&!L[9]&&!L[4]&&(L[29]&&!L[15]||!L[29]))?W?W.p(L,U):(W=ok(L),W.c(),W.m(e,f)):W&&(W.d(1),W=null),L[4]?H||(H=lk(),H.c(),H.m(e,h)):H&&(H.d(1),H=null),L[5]?P?(P.p(L,U),U[0]&32&&B(P,1)):(P=ak(L),P.c(),B(P,1),P.m(e,d)):P&&(He(),Q(P,1,1,()=>{P=null}),qe()),!L[7]||L[7]&&!L[35]?Y?Y.p(L,U):(Y=ck(L),Y.c(),Y.m(e,m)):Y&&(Y.d(1),Y=null),L[7]&&L[35]?O?O.p(L,U):(O=uk(L),O.c(),O.m(e,null)):O&&(O.d(1),O=null),(!_||U[0]&2097152&&g!==(g="selectContainer "+L[21]+" svelte-17l1npl"))&&S(e,"class",g),(!_||U[0]&2048)&&S(e,"style",L[11]),(!_||U[0]&2098176)&&$e(e,"hasError",L[10]),(!_||U[0]&2097280)&&$e(e,"multiSelect",L[7]),(!_||U[0]&2097664)&&$e(e,"disabled",L[9]),(!_||U[0]&2097154)&&$e(e,"focused",L[1])},i(L){_||(B(w),B(A),B(D),B(N),B(P),_=!0)},o(L){Q(w),Q(A),Q(D),Q(N),Q(P),_=!1},d(L){L&&b(e),E&&E.d(),w&&w.d(),A&&A.d(),n[82](null),D&&D.d(),N&&N.d(),W&&W.d(),H&&H.d(),P&&P.d(),Y&&Y.d(),O&&O.d(),n[85](null),v=!1,an(y)}}}function hk(n){return n.map((e,t)=>({index:t,value:e,label:`${e}`}))}function Wie(n,e,t){let i,s,r,o,l,a,c,u;const f=Yu();let{id:h=null}=e,{container:d=void 0}=e,{input:m=void 0}=e,{isMulti:g=!1}=e,{multiFullItemClearable:_=!1}=e,{isDisabled:v=!1}=e,{isCreatable:y=!1}=e,{isFocused:E=!1}=e,{value:w=null}=e,{filterText:A=""}=e,{placeholder:I="Select..."}=e,{placeholderAlwaysShow:R=!1}=e,{items:D=null}=e,{itemFilter:N=(he,_t,Zt)=>`${he}`.toLowerCase().includes(_t.toLowerCase())}=e,{groupBy:W=void 0}=e,{groupFilter:H=he=>he}=e,{isGroupHeaderSelectable:P=!1}=e,{getGroupHeaderLabel:Y=he=>he[O]||he.id}=e,{labelIdentifier:O="label"}=e,{getOptionLabel:L=(he,_t)=>he.isCreator?`Create "${_t}"`:he[O]}=e,{optionIdentifier:U="value"}=e,{loadOptions:K=void 0}=e,{hasError:te=!1}=e,{containerStyles:q=""}=e,{getSelectionLabel:x=he=>he?he[O]:null}=e,{createGroupHeaderItem:Z=he=>({value:he,label:he})}=e,{createItem:V=he=>({value:he,label:he})}=e;const ce=()=>i;let{isSearchable:pe=!0}=e,{inputStyles:oe=""}=e,{isClearable:ve=!0}=e,{isWaiting:Ne=!1}=e,{listPlacement:J="auto"}=e,{listOpen:Ie=!1}=e,{isVirtualList:Ue=!1}=e,{loadOptionsInterval:re=300}=e,{noOptionsMessage:Le="No options"}=e,{hideEmptyState:fe=!1}=e,{inputAttributes:M={}}=e,{listAutoWidth:ae=!0}=e,{itemHeight:de=40}=e,{Icon:$=void 0}=e,{iconProps:ee={}}=e,{showChevron:ie=!1}=e,{showIndicator:me=!1}=e,{containerClasses:ue=""}=e,{indicatorSvg:se=void 0}=e,{listOffset:_e=5}=e,{ClearIcon:ke=Nie}=e,{Item:Ce=RN}=e,{List:ge=_ie}=e,{Selection:Me=Eie}=e,{MultiSelection:Ee=Cie}=e,{VirtualList:Pe=Rie}=e;function be(he){if(he.loadOptions&&he.filterText.length>0)return;if(!he.items)return[];he.items&&he.items.length>0&&typeof he.items[0]!="object"&&(he.items=hk(he.items));let _t=he.items.filter(Zt=>{let Et=N(L(Zt,he.filterText),he.filterText,Zt);return Et&&he.isMulti&&he.value&&Array.isArray(he.value)&&(Et=!he.value.some(jt=>jt[he.optionIdentifier]===Zt[he.optionIdentifier])),Et});return he.groupBy&&(_t=en(_t)),he.isCreatable&&(_t=nt(_t,he.filterText)),_t}function nt(he,_t){if(_t.length===0)return he;const Zt=V(_t);return he[0]&&_t===he[0][O]?he:(Zt.isCreator=!0,[...he,Zt])}let{selectedValue:Fe=null}=e,we,lt,je,Qe,ye,Ze;const Lt=Pie(async()=>{t(4,Ne=!0);let he=await K(A).catch(_t=>{console.warn("svelte-select loadOptions error :>> ",_t),f("error",{type:"loadOptions",details:_t})});he&&!he.cancelled&&(he?(he&&he.length>0&&typeof he[0]!="object"&&(he=hk(he)),t(81,i=[...he]),f("loaded",{items:i})):t(81,i=[]),y&&t(81,i=nt(i,A)),t(4,Ne=!1),t(1,E=!0),t(5,Ie=!0))},re);function vt(){typeof w=="string"?t(2,w={[U]:w,label:w}):g&&Array.isArray(w)&&w.length>0&&t(2,w=w.map(he=>typeof he=="string"?{value:he,label:he}:he))}let Ct;function Ot(){t(31,Ct=Object.assign({autocapitalize:"none",autocomplete:"off",autocorrect:"off",spellcheck:!1,tabindex:0,type:"text","aria-autocomplete":"list"},M)),h&&t(31,Ct.id=h,Ct),pe||t(31,Ct.readonly=!0,Ct)}function en(he){const _t=[],Zt={};he.forEach(jt=>{const Pn=W(jt);_t.includes(Pn)||(_t.push(Pn),Zt[Pn]=[],Pn&&Zt[Pn].push(Object.assign(Z(Pn,jt),{id:Pn,isGroupHeader:!0,isSelectable:P}))),Zt[Pn].push(Object.assign({isGroupItem:!!Pn},jt))});const Et=[];return H(_t).forEach(jt=>{Et.push(...Zt[jt])}),Et}function tn(){if(g){JSON.stringify(w)!==JSON.stringify(lt)&&kn()&&f("select",w);return}(!lt||JSON.stringify(w[U])!==JSON.stringify(lt[U]))&&f("select",w)}function rn(){E||Ie?ze():m&&m.blur()}function cn(){w&&(Array.isArray(w)?t(2,w=[...w]):t(2,w=[w]))}function dt(){w&&t(2,w=null)}function Un(){A.length!==0&&(t(1,E=!0),t(5,Ie=!0),K?Lt():(t(5,Ie=!0),g&&t(30,we=void 0)))}hI(async()=>{t(77,lt=w),t(78,je=A),t(79,Qe=E),t(80,ye=g)});function kn(){let he=!0;if(w){const _t=[],Zt=[];w.forEach(Et=>{_t.includes(Et[U])?he=!1:(_t.push(Et[U]),Zt.push(Et))}),he||t(2,w=Zt)}return he}function Wn(he){let _t=he?he[U]:w[U];return D.find(Zt=>Zt[U]===_t)}function In(he){!he||he.length===0||he.some(_t=>typeof _t!="object")||!w||(g?w.some(_t=>!_t||!_t[U]):!w[U])||(Array.isArray(w)?t(2,w=w.map(_t=>Wn(_t)||_t)):t(2,w=Wn()||w))}function En(he){const{detail:_t}=he,Zt=w[_t?_t.i:w.length-1];w.length===1?t(2,w=void 0):t(2,w=w.filter(Et=>Et!==Zt)),f("clear",Zt)}function li(he){if(E)switch(he.key){case"ArrowDown":he.preventDefault(),t(5,Ie=!0),t(30,we=void 0);break;case"ArrowUp":he.preventDefault(),t(5,Ie=!0),t(30,we=void 0);break;case"Tab":Ie||t(1,E=!1);break;case"Backspace":if(!g||A.length>0)return;if(g&&w&&w.length>0){if(En(we!==void 0?we:w.length-1),we===0||we===void 0)break;t(30,we=w.length>we?we-1:void 0)}break;case"ArrowLeft":if(!g||A.length>0)return;we===void 0?t(30,we=w.length-1):w.length>we&&we!==0&&t(30,we-=1);break;case"ArrowRight":if(!g||A.length>0||we===void 0)return;we===w.length-1?t(30,we=void 0):we<w.length-1&&t(30,we+=1);break}}function ze(){t(1,E=!0),m&&m.focus()}function St(he){if(!d)return;const _t=he.path&&he.path.length>0?he.path[0]:he.target;d.contains(_t)||d.contains(he.relatedTarget)||(t(1,E=!1),t(5,Ie=!1),t(30,we=void 0),m&&m.blur())}function Gt(){v||(t(1,E=!0),t(5,Ie=!Ie))}function pn(){t(2,w=void 0),t(5,Ie=!1),f("clear",w),ze()}Mi(()=>{E&&m&&m.focus()});function gn(he){const{detail:_t}=he;if(_t){t(3,A="");const Zt=Object.assign({},_t);(!Zt.isGroupHeader||Zt.isSelectable)&&(g?t(2,w=w?w.concat([Zt]):[Zt]):t(2,w=Zt),t(2,w),setTimeout(()=>{t(5,Ie=!1),t(30,we=void 0)}))}}function Jt(he){const{detail:_t}=he;g?(t(2,w=w||[]),t(2,w=[...w,V(_t)])):t(2,w=V(_t)),f("itemCreated",_t),t(3,A=""),t(5,Ie=!1),t(30,we=void 0)}function it(){t(3,A=""),t(5,Ie=!1)}let{ariaValues:Pt=he=>`Option ${he}, selected.`}=e,{ariaListOpen:gi=(he,_t)=>`You are currently focused on option ${he}. There are ${_t} results available.`}=e,{ariaFocused:Ii=()=>"Select is focused, type to refine list, press down to open the menu."}=e;function Ls(){let he;return g&&w.length>0?he=w.map(_t=>x(_t)).join(", "):he=x(w),Pt(he)}function sn(){if(!E||!i||i.length===0)return"";let he=i[Ze];if(Ie&&he){let _t=x(he),Zt=i?i.length:0;return gi(_t,Zt)}else return Ii()}function Os(he){Vt[he?"unshift":"push"](()=>{m=he,t(6,m)})}function Xs(){A=this.value,t(3,A)}function An(he){Ze=he,t(28,Ze)}function bt(he){Vt[he?"unshift":"push"](()=>{d=he,t(0,d)})}return n.$$set=he=>{"id"in he&&t(46,h=he.id),"container"in he&&t(0,d=he.container),"input"in he&&t(6,m=he.input),"isMulti"in he&&t(7,g=he.isMulti),"multiFullItemClearable"in he&&t(8,_=he.multiFullItemClearable),"isDisabled"in he&&t(9,v=he.isDisabled),"isCreatable"in he&&t(47,y=he.isCreatable),"isFocused"in he&&t(1,E=he.isFocused),"value"in he&&t(2,w=he.value),"filterText"in he&&t(3,A=he.filterText),"placeholder"in he&&t(48,I=he.placeholder),"placeholderAlwaysShow"in he&&t(49,R=he.placeholderAlwaysShow),"items"in he&&t(50,D=he.items),"itemFilter"in he&&t(51,N=he.itemFilter),"groupBy"in he&&t(52,W=he.groupBy),"groupFilter"in he&&t(53,H=he.groupFilter),"isGroupHeaderSelectable"in he&&t(54,P=he.isGroupHeaderSelectable),"getGroupHeaderLabel"in he&&t(55,Y=he.getGroupHeaderLabel),"labelIdentifier"in he&&t(56,O=he.labelIdentifier),"getOptionLabel"in he&&t(57,L=he.getOptionLabel),"optionIdentifier"in he&&t(58,U=he.optionIdentifier),"loadOptions"in he&&t(59,K=he.loadOptions),"hasError"in he&&t(10,te=he.hasError),"containerStyles"in he&&t(11,q=he.containerStyles),"getSelectionLabel"in he&&t(12,x=he.getSelectionLabel),"createGroupHeaderItem"in he&&t(60,Z=he.createGroupHeaderItem),"createItem"in he&&t(61,V=he.createItem),"isSearchable"in he&&t(13,pe=he.isSearchable),"inputStyles"in he&&t(14,oe=he.inputStyles),"isClearable"in he&&t(15,ve=he.isClearable),"isWaiting"in he&&t(4,Ne=he.isWaiting),"listPlacement"in he&&t(63,J=he.listPlacement),"listOpen"in he&&t(5,Ie=he.listOpen),"isVirtualList"in he&&t(64,Ue=he.isVirtualList),"loadOptionsInterval"in he&&t(65,re=he.loadOptionsInterval),"noOptionsMessage"in he&&t(66,Le=he.noOptionsMessage),"hideEmptyState"in he&&t(67,fe=he.hideEmptyState),"inputAttributes"in he&&t(16,M=he.inputAttributes),"listAutoWidth"in he&&t(68,ae=he.listAutoWidth),"itemHeight"in he&&t(69,de=he.itemHeight),"Icon"in he&&t(17,$=he.Icon),"iconProps"in he&&t(18,ee=he.iconProps),"showChevron"in he&&t(19,ie=he.showChevron),"showIndicator"in he&&t(20,me=he.showIndicator),"containerClasses"in he&&t(21,ue=he.containerClasses),"indicatorSvg"in he&&t(22,se=he.indicatorSvg),"listOffset"in he&&t(70,_e=he.listOffset),"ClearIcon"in he&&t(23,ke=he.ClearIcon),"Item"in he&&t(71,Ce=he.Item),"List"in he&&t(24,ge=he.List),"Selection"in he&&t(25,Me=he.Selection),"MultiSelection"in he&&t(26,Ee=he.MultiSelection),"VirtualList"in he&&t(72,Pe=he.VirtualList),"selectedValue"in he&&t(73,Fe=he.selectedValue),"ariaValues"in he&&t(74,Pt=he.ariaValues),"ariaListOpen"in he&&t(75,gi=he.ariaListOpen),"ariaFocused"in he&&t(76,Ii=he.ariaFocused)},n.$$.update=()=>{n.$$.dirty[0]&140|n.$$.dirty[1]&405340160&&t(81,i=be({loadOptions:K,filterText:A,items:D,value:w,isMulti:g,optionIdentifier:U,groupBy:W,isCreatable:y})),n.$$.dirty[2]&2048&&Fe&&console.warn("selectedValue is no longer used. Please use value instead."),n.$$.dirty[1]&524288&&In(D),n.$$.dirty[0]&4&&w&&vt(),n.$$.dirty[0]&73728&&(M||!pe)&&Ot(),n.$$.dirty[0]&128|n.$$.dirty[2]&262144&&(g&&cn(),ye&&!g&&dt()),n.$$.dirty[0]&132&&g&&w&&w.length>1&&kn(),n.$$.dirty[0]&4&&w&&tn(),n.$$.dirty[0]&132|n.$$.dirty[2]&32768&&!w&&g&&lt&&f("select",w),n.$$.dirty[0]&2|n.$$.dirty[2]&131072&&E!==Qe&&rn(),n.$$.dirty[0]&8|n.$$.dirty[2]&65536&&A!==je&&Un(),n.$$.dirty[0]&12&&t(29,s=w&&A.length===0),n.$$.dirty[0]&536904208&&t(37,r=s&&ve&&!v&&!Ne),n.$$.dirty[0]&132|n.$$.dirty[1]&393216&&t(36,o=R&&g?I:w?"":I),n.$$.dirty[0]&132&&t(35,l=g&&w&&w.length>0),n.$$.dirty[0]&141|n.$$.dirty[1]&218103808|n.$$.dirty[2]&526326&&t(34,a={Item:Ce,filterText:A,optionIdentifier:U,noOptionsMessage:Le,hideEmptyState:fe,isVirtualList:Ue,VirtualList:Pe,value:w,isMulti:g,getGroupHeaderLabel:Y,items:i,itemHeight:de,getOptionLabel:L,listPlacement:J,parent:d,listAutoWidth:ae,listOffset:_e}),n.$$.dirty[0]&132&&t(33,c=w?Ls():""),n.$$.dirty[0]&268435490|n.$$.dirty[2]&524288&&t(32,u=sn())},[d,E,w,A,Ne,Ie,m,g,_,v,te,q,x,pe,oe,ve,M,$,ee,ie,me,ue,se,ke,ge,Me,Ee,pn,Ze,s,we,Ct,u,c,a,l,o,r,En,li,ze,St,Gt,gn,Jt,it,h,y,I,R,D,N,W,H,P,Y,O,L,U,K,Z,V,ce,J,Ue,re,Le,fe,ae,de,_e,Ce,Pe,Fe,Pt,gi,Ii,lt,je,Qe,ye,i,Os,Xs,An,bt]}class bl extends rt{constructor(e){super(),ot(this,e,Wie,Lie,It,{id:46,container:0,input:6,isMulti:7,multiFullItemClearable:8,isDisabled:9,isCreatable:47,isFocused:1,value:2,filterText:3,placeholder:48,placeholderAlwaysShow:49,items:50,itemFilter:51,groupBy:52,groupFilter:53,isGroupHeaderSelectable:54,getGroupHeaderLabel:55,labelIdentifier:56,getOptionLabel:57,optionIdentifier:58,loadOptions:59,hasError:10,containerStyles:11,getSelectionLabel:12,createGroupHeaderItem:60,createItem:61,getFilteredItems:62,isSearchable:13,inputStyles:14,isClearable:15,isWaiting:4,listPlacement:63,listOpen:5,isVirtualList:64,loadOptionsInterval:65,noOptionsMessage:66,hideEmptyState:67,inputAttributes:16,listAutoWidth:68,itemHeight:69,Icon:17,iconProps:18,showChevron:19,showIndicator:20,containerClasses:21,indicatorSvg:22,listOffset:70,ClearIcon:23,Item:71,List:24,Selection:25,MultiSelection:26,VirtualList:72,selectedValue:73,handleClear:27,ariaValues:74,ariaListOpen:75,ariaFocused:76},null,[-1,-1,-1,-1])}get getFilteredItems(){return this.$$.ctx[62]}get handleClear(){return this.$$.ctx[27]}}function Uie(n){let e,t,i,s,r,o,l,a,c,u,f,h,d,m,g,_,v,y,E,w,A,I,R,D,N,W,H,P,Y,O,L,U,K,te,q,x,Z,V;function ce(fe){n[16](fe)}let pe={containerClasses:"jse-filter-path",showIndicator:!0,items:n[6]};n[0]!==void 0&&(pe.value=n[0]),a=new bl({props:pe}),Vt.push(()=>Vs(a,"value",ce));function oe(fe){n[17](fe)}let ve={containerClasses:"jse-filter-relation",showIndicator:!0,items:n[8]};n[1]!==void 0&&(ve.value=n[1]),f=new bl({props:ve}),Vt.push(()=>Vs(f,"value",oe));function Ne(fe){n[19](fe)}let J={containerClasses:"jse-sort-path",showIndicator:!0,items:n[6]};n[3]!==void 0&&(J.value=n[3]),I=new bl({props:J}),Vt.push(()=>Vs(I,"value",Ne));function Ie(fe){n[20](fe)}let Ue={containerClasses:"jse-sort-direction",showIndicator:!0,items:n[9]};n[4]!==void 0&&(Ue.value=n[4]),N=new bl({props:Ue}),Vt.push(()=>Vs(N,"value",Ie));function re(fe){n[21](fe)}let Le={containerClasses:"jse-projection-paths",isMulti:!0,showIndicator:!0,items:n[7]};return n[5]!==void 0&&(Le.value=n[5]),te=new bl({props:Le}),Vt.push(()=>Vs(te,"value",re)),{c(){e=C("table"),t=C("tr"),i=C("th"),s=z("Filter"),r=F(),o=C("td"),l=C("div"),Te(a.$$.fragment),u=F(),Te(f.$$.fragment),d=F(),m=C("input"),g=F(),_=C("tr"),v=C("th"),y=z("Sort"),E=F(),w=C("td"),A=C("div"),Te(I.$$.fragment),D=F(),Te(N.$$.fragment),H=F(),P=C("tr"),Y=C("th"),O=z("Pick"),L=F(),U=C("td"),K=C("div"),Te(te.$$.fragment),this.h()},l(fe){e=k(fe,"TABLE",{class:!0});var M=T(e);t=k(M,"TR",{});var ae=T(t);i=k(ae,"TH",{class:!0});var de=T(i);s=G(de,"Filter"),de.forEach(b),r=j(ae),o=k(ae,"TD",{});var $=T(o);l=k($,"DIV",{class:!0});var ee=T(l);De(a.$$.fragment,ee),u=j(ee),De(f.$$.fragment,ee),d=j(ee),m=k(ee,"INPUT",{class:!0}),ee.forEach(b),$.forEach(b),ae.forEach(b),g=j(M),_=k(M,"TR",{});var ie=T(_);v=k(ie,"TH",{class:!0});var me=T(v);y=G(me,"Sort"),me.forEach(b),E=j(ie),w=k(ie,"TD",{});var ue=T(w);A=k(ue,"DIV",{class:!0});var se=T(A);De(I.$$.fragment,se),D=j(se),De(N.$$.fragment,se),se.forEach(b),ue.forEach(b),ie.forEach(b),H=j(M),P=k(M,"TR",{});var _e=T(P);Y=k(_e,"TH",{class:!0});var ke=T(Y);O=G(ke,"Pick"),ke.forEach(b),L=j(_e),U=k(_e,"TD",{});var Ce=T(U);K=k(Ce,"DIV",{class:!0});var ge=T(K);De(te.$$.fragment,ge),ge.forEach(b),Ce.forEach(b),_e.forEach(b),M.forEach(b),this.h()},h(){S(i,"class","svelte-1pbg0mn"),S(m,"class","jse-filter-value svelte-1pbg0mn"),S(l,"class","jse-horizontal svelte-1pbg0mn"),S(v,"class","svelte-1pbg0mn"),S(A,"class","jse-horizontal svelte-1pbg0mn"),S(Y,"class","svelte-1pbg0mn"),S(K,"class","jse-horizontal svelte-1pbg0mn"),S(e,"class","jse-transform-wizard svelte-1pbg0mn")},m(fe,M){X(fe,e,M),p(e,t),p(t,i),p(i,s),p(t,r),p(t,o),p(o,l),Oe(a,l,null),p(l,u),Oe(f,l,null),p(l,d),p(l,m),ds(m,n[2]),p(e,g),p(e,_),p(_,v),p(v,y),p(_,E),p(_,w),p(w,A),Oe(I,A,null),p(A,D),Oe(N,A,null),p(e,H),p(e,P),p(P,Y),p(Y,O),p(P,L),p(P,U),p(U,K),Oe(te,K,null),x=!0,Z||(V=Se(m,"input",n[18]),Z=!0)},p(fe,[M]){const ae={};M&64&&(ae.items=fe[6]),!c&&M&1&&(c=!0,ae.value=fe[0],Zs(()=>c=!1)),a.$set(ae);const de={};!h&&M&2&&(h=!0,de.value=fe[1],Zs(()=>h=!1)),f.$set(de),M&4&&m.value!==fe[2]&&ds(m,fe[2]);const $={};M&64&&($.items=fe[6]),!R&&M&8&&(R=!0,$.value=fe[3],Zs(()=>R=!1)),I.$set($);const ee={};!W&&M&16&&(W=!0,ee.value=fe[4],Zs(()=>W=!1)),N.$set(ee);const ie={};M&128&&(ie.items=fe[7]),!q&&M&32&&(q=!0,ie.value=fe[5],Zs(()=>q=!1)),te.$set(ie)},i(fe){x||(B(a.$$.fragment,fe),B(f.$$.fragment,fe),B(I.$$.fragment,fe),B(N.$$.fragment,fe),B(te.$$.fragment,fe),x=!0)},o(fe){Q(a.$$.fragment,fe),Q(f.$$.fragment,fe),Q(I.$$.fragment,fe),Q(N.$$.fragment,fe),Q(te.$$.fragment,fe),x=!1},d(fe){fe&&b(e),Re(a),Re(f),Re(I),Re(N),Re(te),Z=!1,V()}}}function Vie(n,e,t){var U,K,te,q,x,Z;let i,s,r,o,l;const a=Ts("jsoneditor:TransformWizard");let{json:c}=e,{queryOptions:u={}}=e,{onChange:f}=e;const h=["==","!=","<","<=",">",">="].map(V=>({value:V,label:V})),d=[{value:"asc",label:"ascending"},{value:"desc",label:"descending"}];let m=(U=u==null?void 0:u.filter)!=null&&U.path?ga(u.filter.path):null,g=(K=u==null?void 0:u.filter)!=null&&K.relation?h.find(V=>V.value===u.filter.relation):null,_=((te=u==null?void 0:u.filter)==null?void 0:te.value)||"",v=(q=u==null?void 0:u.sort)!=null&&q.path?ga(u.sort.path):null,y=(x=u==null?void 0:u.sort)!=null&&x.direction?d.find(V=>V.value===u.sort.direction):null,E=(Z=u==null?void 0:u.projection)!=null&&Z.paths?u.projection.paths.map(ga):null;function w(V){var ce;wn((ce=u==null?void 0:u.filter)==null?void 0:ce.path,V)||(a("changeFilterPath",V),t(10,u=hr(u,["filter","path"],V,!0)),f(u))}function A(V){var ce;wn((ce=u==null?void 0:u.filter)==null?void 0:ce.relation,V)||(a("changeFilterRelation",V),t(10,u=hr(u,["filter","relation"],V,!0)),f(u))}function I(V){var ce;wn((ce=u==null?void 0:u.filter)==null?void 0:ce.value,V)||(a("changeFilterValue",V),t(10,u=hr(u,["filter","value"],V,!0)),f(u))}function R(V){var ce;wn((ce=u==null?void 0:u.sort)==null?void 0:ce.path,V)||(a("changeSortPath",V),t(10,u=hr(u,["sort","path"],V,!0)),f(u))}function D(V){var ce;wn((ce=u==null?void 0:u.sort)==null?void 0:ce.direction,V)||(a("changeSortDirection",V),t(10,u=hr(u,["sort","direction"],V,!0)),f(u))}function N(V){var ce;wn((ce=u==null?void 0:u.projection)==null?void 0:ce.paths,V)||(a("changeProjectionPaths",V),t(10,u=hr(u,["projection","paths"],V,!0)),f(u))}function W(V){m=V,t(0,m)}function H(V){g=V,t(1,g)}function P(){_=this.value,t(2,_)}function Y(V){v=V,t(3,v)}function O(V){y=V,t(4,y)}function L(V){E=V,t(5,E)}return n.$$set=V=>{"json"in V&&t(11,c=V.json),"queryOptions"in V&&t(10,u=V.queryOptions),"onChange"in V&&t(12,f=V.onChange)},n.$$.update=()=>{var V;n.$$.dirty&2048&&t(15,i=Array.isArray(c)),n.$$.dirty&34816&&t(14,s=i?E1(c):[]),n.$$.dirty&34816&&t(13,r=i?E1(c,!0):[]),n.$$.dirty&16384&&t(6,o=s.map(ga)),n.$$.dirty&8192&&t(7,l=r?r.map(ga):[]),n.$$.dirty&1088&&(V=u==null?void 0:u.filter)!=null&&V.path&&o.find(ce=>{var pe;return wn(ce.value,(pe=u==null?void 0:u.filter)==null?void 0:pe.path)}),n.$$.dirty&1&&w((m==null?void 0:m.value)||null),n.$$.dirty&2&&A((g==null?void 0:g.value)||null),n.$$.dirty&4&&I(_||null),n.$$.dirty&8&&R((v==null?void 0:v.value)||null),n.$$.dirty&16&&D((y==null?void 0:y.value)||null),n.$$.dirty&32&&N(E?E.map(ce=>ce.value):null)},[m,g,_,v,y,E,o,l,h,d,u,c,f,r,s,i,W,H,P,Y,O,L]}class Fie extends rt{constructor(e){super(),ot(this,e,Vie,Uie,fn,{json:11,queryOptions:10,onChange:12})}}const jie=Fie;function dk(n,e,t){const i=n.slice();return i[5]=e[t],i}function Hie(n){let e,t;return e=new qt({props:{data:Qd}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p:Xe,i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function qie(n){let e,t;return e=new qt({props:{data:Xd}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p:Xe,i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function mk(n){let e,t,i,s,r=n[5].name+"",o,l,a,c,u,f;const h=[qie,Hie],d=[];function m(_,v){return _[5].id===_[0]?0:1}t=m(n),i=d[t]=h[t](n);function g(){return n[4](n[5])}return{c(){e=C("button"),i.c(),s=F(),o=z(r),l=F(),this.h()},l(_){e=k(_,"BUTTON",{type:!0,class:!0,title:!0});var v=T(e);i.l(v),s=j(v),o=G(v,r),l=j(v),v.forEach(b),this.h()},h(){S(e,"type","button"),S(e,"class","jse-query-language svelte-ifjr8a"),S(e,"title",a=`Select ${n[5].name} as query language`),$e(e,"selected",n[5].id===n[0])},m(_,v){X(_,e,v),d[t].m(e,null),p(e,s),p(e,o),p(e,l),c=!0,u||(f=Se(e,"click",g),u=!0)},p(_,v){n=_;let y=t;t=m(n),t===y?d[t].p(n,v):(He(),Q(d[y],1,1,()=>{d[y]=null}),qe(),i=d[t],i?i.p(n,v):(i=d[t]=h[t](n),i.c()),B(i,1),i.m(e,s)),(!c||v&2)&&r!==(r=n[5].name+"")&&Be(o,r),(!c||v&2&&a!==(a=`Select ${n[5].name} as query language`))&&S(e,"title",a),(!c||v&3)&&$e(e,"selected",n[5].id===n[0])},i(_){c||(B(i),c=!0)},o(_){Q(i),c=!1},d(_){_&&b(e),d[t].d(),u=!1,f()}}}function zie(n){let e,t,i,s=n[1],r=[];for(let l=0;l<s.length;l+=1)r[l]=mk(dk(n,s,l));const o=l=>Q(r[l],1,1,()=>{r[l]=null});return{c(){e=C("div"),t=C("div");for(let l=0;l<r.length;l+=1)r[l].c();this.h()},l(l){e=k(l,"DIV",{class:!0});var a=T(e);t=k(a,"DIV",{class:!0});var c=T(t);for(let u=0;u<r.length;u+=1)r[u].l(c);c.forEach(b),a.forEach(b),this.h()},h(){S(t,"class","jse-select-query-language-container svelte-ifjr8a"),S(e,"class","jse-select-query-language svelte-ifjr8a")},m(l,a){X(l,e,a),p(e,t);for(let c=0;c<r.length;c+=1)r[c].m(t,null);i=!0},p(l,[a]){if(a&7){s=l[1];let c;for(c=0;c<s.length;c+=1){const u=dk(l,s,c);r[c]?(r[c].p(u,a),B(r[c],1)):(r[c]=mk(u),r[c].c(),B(r[c],1),r[c].m(t,null))}for(He(),c=s.length;c<r.length;c+=1)o(c);qe()}},i(l){if(!i){for(let a=0;a<s.length;a+=1)B(r[a]);i=!0}},o(l){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)Q(r[a]);i=!1},d(l){l&&b(e),Ht(r,l)}}}function Gie(n,e,t){let{queryLanguages:i}=e,{queryLanguageId:s}=e,{onChangeQueryLanguage:r}=e;function o(a){t(0,s=a),r(a)}const l=a=>o(a.id);return n.$$set=a=>{"queryLanguages"in a&&t(1,i=a.queryLanguages),"queryLanguageId"in a&&t(0,s=a.queryLanguageId),"onChangeQueryLanguage"in a&&t(3,r=a.onChangeQueryLanguage)},[s,i,o,r,l]}class Kie extends rt{constructor(e){super(),ot(this,e,Gie,zie,It,{queryLanguages:1,queryLanguageId:0,onChangeQueryLanguage:3})}}const Xie=Kie;function pk(n){let e,t,i,s,r;return t=new qt({props:{data:sG}}),{c(){e=C("button"),Te(t.$$.fragment),this.h()},l(o){e=k(o,"BUTTON",{type:!0,class:!0,title:!0});var l=T(e);De(t.$$.fragment,l),l.forEach(b),this.h()},h(){S(e,"type","button"),S(e,"class","jse-config svelte-1djqugc"),S(e,"title","Select a query language")},m(o,l){X(o,e,l),Oe(t,e,null),n[6](e),i=!0,s||(r=Se(e,"click",n[3]),s=!0)},p:Xe,i(o){i||(B(t.$$.fragment,o),i=!0)},o(o){Q(t.$$.fragment,o),i=!1},d(o){o&&b(e),Re(t),n[6](null),s=!1,r()}}}function Qie(n){let e,t,i,s,r,o,l,a,c,u,f=n[0].length>1&&pk(n);return l=new qt({props:{data:_f}}),{c(){e=C("div"),t=C("div"),i=z("Transform"),s=F(),f&&f.c(),r=F(),o=C("button"),Te(l.$$.fragment),this.h()},l(h){e=k(h,"DIV",{class:!0});var d=T(e);t=k(d,"DIV",{class:!0});var m=T(t);i=G(m,"Transform"),m.forEach(b),s=j(d),f&&f.l(d),r=j(d),o=k(d,"BUTTON",{type:!0,class:!0});var g=T(o);De(l.$$.fragment,g),g.forEach(b),d.forEach(b),this.h()},h(){S(t,"class","jse-title svelte-1djqugc"),S(o,"type","button"),S(o,"class","jse-close svelte-1djqugc"),S(e,"class","jse-header svelte-1djqugc")},m(h,d){X(h,e,d),p(e,t),p(t,i),p(e,s),f&&f.m(e,null),p(e,r),p(e,o),Oe(l,o,null),a=!0,c||(u=Se(o,"click",n[2]),c=!0)},p(h,[d]){h[0].length>1?f?(f.p(h,d),d&1&&B(f,1)):(f=pk(h),f.c(),B(f,1),f.m(e,r)):f&&(He(),Q(f,1,1,()=>{f=null}),qe())},i(h){a||(B(f),B(l.$$.fragment,h),a=!0)},o(h){Q(f),Q(l.$$.fragment,h),a=!1},d(h){h&&b(e),f&&f.d(),Re(l),c=!1,u()}}}function Yie(n,e,t){let{queryLanguages:i}=e,{queryLanguageId:s}=e,{onChangeQueryLanguage:r}=e,o,l;const{close:a}=Nn("simple-modal"),{openAbsolutePopup:c,closeAbsolutePopup:u}=Nn("absolute-popup");function f(){l=c(Xie,{queryLanguages:i,queryLanguageId:s,onChangeQueryLanguage:m=>{u(l),r(m)}},{position:"bottom",offsetTop:-2,offsetLeft:0,anchor:o,closeOnOuterClick:!0})}function h(d){Vt[d?"unshift":"push"](()=>{o=d,t(1,o)})}return n.$$set=d=>{"queryLanguages"in d&&t(0,i=d.queryLanguages),"queryLanguageId"in d&&t(4,s=d.queryLanguageId),"onChangeQueryLanguage"in d&&t(5,r=d.onChangeQueryLanguage)},[i,o,a,f,s,r,h]}class Jie extends rt{constructor(e){super(),ot(this,e,Yie,Qie,fn,{queryLanguages:0,queryLanguageId:4,onChangeQueryLanguage:5})}}const Zie=Jie;function gk(n){let e,t,i,s,r;const o=[$ie,xie],l=[];function a(c,u){return u[0]&1024&&(e=null),e==null&&(e=!!Array.isArray(c[10])),e?0:1}return t=a(n,[-1,-1]),i=l[t]=o[t](n),{c(){i.c(),s=tt()},l(c){i.l(c),s=tt()},m(c,u){l[t].m(c,u),X(c,s,u),r=!0},p(c,u){let f=t;t=a(c,u),t===f?l[t].p(c,u):(He(),Q(l[f],1,1,()=>{l[f]=null}),qe(),i=l[t],i?i.p(c,u):(i=l[t]=o[t](c),i.c()),B(i,1),i.m(s.parentNode,s))},i(c){r||(B(i),r=!0)},o(c){Q(i),r=!1},d(c){l[t].d(c),c&&b(s)}}}function xie(n){let e;return{c(){e=z("(Only available for arrays, not for objects)")},l(t){e=G(t,"(Only available for arrays, not for objects)")},m(t,i){X(t,e,i)},p:Xe,i:Xe,o:Xe,d(t){t&&b(e)}}}function $ie(n){let e,t;return e=new jie({props:{queryOptions:n[8],json:n[10],onChange:n[17]}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,s){const r={};s[0]&256&&(r.queryOptions=i[8]),s[0]&1024&&(r.json=i[10]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function vk(n){let e,t;return e=new Kb({props:{externalContent:n[15],readOnly:!0,mainMenuBar:!1,navigationBar:!1,escapeControlCharacters:n[2],escapeUnicodeCharacters:n[3],parser:n[4],onRenderValue:n[6],onError:console.error,onChange:Gn,onFocus:Gn,onBlur:Gn,onSortModal:Gn,onTransformModal:Gn,onClassName:n[7]}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,s){const r={};s[0]&32768&&(r.externalContent=i[15]),s[0]&4&&(r.escapeControlCharacters=i[2]),s[0]&8&&(r.escapeUnicodeCharacters=i[3]),s[0]&16&&(r.parser=i[4]),s[0]&64&&(r.onRenderValue=i[6]),s[0]&128&&(r.onClassName=i[7]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function ese(n){let e,t=n[13].toString()+"",i;return{c(){e=C("div"),i=z(t),this.h()},l(s){e=k(s,"DIV",{class:!0});var r=T(e);i=G(r,t),r.forEach(b),this.h()},h(){S(e,"class","jse-preview jse-error svelte-mr4kda")},m(s,r){X(s,e,r),p(e,i)},p(s,r){r[0]&8192&&t!==(t=s[13].toString()+"")&&Be(i,t)},i:Xe,o:Xe,d(s){s&&b(e)}}}function tse(n){let e,t;return e=new Kb({props:{externalContent:n[14],readOnly:!0,mainMenuBar:!1,navigationBar:!1,escapeControlCharacters:n[2],escapeUnicodeCharacters:n[3],parser:n[4],onRenderValue:n[6],onError:console.error,onChange:Gn,onFocus:Gn,onBlur:Gn,onSortModal:Gn,onTransformModal:Gn,onClassName:n[7]}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,s){const r={};s[0]&16384&&(r.externalContent=i[14]),s[0]&4&&(r.escapeControlCharacters=i[2]),s[0]&8&&(r.escapeUnicodeCharacters=i[3]),s[0]&16&&(r.parser=i[4]),s[0]&64&&(r.onRenderValue=i[6]),s[0]&128&&(r.onClassName=i[7]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function nse(n){let e,t,i,s,r,o,l,a,c,u,f=n[16](n[0]).description+"",h,d,m,g,_,v,y,E,w,A,I,R,D,N,W,H,P,Y,O,L,U,K,te,q,x,Z,V,ce,pe,oe,ve,Ne,J,Ie,Ue,re,Le,fe,M,ae,de,$,ee,ie,me;e=new Zie({props:{queryLanguages:n[5],queryLanguageId:n[0],onChangeQueryLanguage:n[22]}}),R=new qt({props:{data:n[11]?Br:No}});let ue=n[11]&&gk(n);V=new qt({props:{data:n[12]?Br:No}});let se=n[12]&&vk(n);const _e=[tse,ese],ke=[];function Ce(ge,Me){return ge[13]?1:0}return re=Ce(n),Le=ke[re]=_e[re](n),{c(){Te(e.$$.fragment),t=F(),i=C("div"),s=C("div"),r=C("div"),o=C("div"),l=C("div"),a=z("Language"),c=F(),u=C("div"),h=F(),d=C("div"),m=C("div"),g=z("Path"),_=F(),v=C("input"),E=F(),w=C("div"),A=C("div"),I=C("button"),Te(R.$$.fragment),D=z(`
                Wizard`),N=F(),ue&&ue.c(),W=F(),H=C("div"),P=C("div"),Y=z("Query"),O=F(),L=C("textarea"),U=F(),K=C("div"),te=C("div"),q=C("div"),x=C("div"),Z=C("button"),Te(V.$$.fragment),ce=z(`
                  Original`),pe=F(),se&&se.c(),oe=F(),ve=C("div"),Ne=C("div"),J=C("div"),Ie=z("Preview"),Ue=F(),Le.c(),fe=F(),M=C("div"),ae=C("button"),de=z("Transform"),this.h()},l(ge){De(e.$$.fragment,ge),t=j(ge),i=k(ge,"DIV",{class:!0});var Me=T(i);s=k(Me,"DIV",{class:!0});var Ee=T(s);r=k(Ee,"DIV",{class:!0});var Pe=T(r);o=k(Pe,"DIV",{class:!0});var be=T(o);l=k(be,"DIV",{class:!0});var nt=T(l);a=G(nt,"Language"),nt.forEach(b),be.forEach(b),c=j(Pe),u=k(Pe,"DIV",{class:!0});var Fe=T(u);Fe.forEach(b),h=j(Pe),d=k(Pe,"DIV",{class:!0});var we=T(d);m=k(we,"DIV",{class:!0});var lt=T(m);g=G(lt,"Path"),lt.forEach(b),we.forEach(b),_=j(Pe),v=k(Pe,"INPUT",{class:!0,type:!0,title:!0}),E=j(Pe),w=k(Pe,"DIV",{class:!0});var je=T(w);A=k(je,"DIV",{class:!0});var Qe=T(A);I=k(Qe,"BUTTON",{type:!0,class:!0});var ye=T(I);De(R.$$.fragment,ye),D=G(ye,`
                Wizard`),ye.forEach(b),Qe.forEach(b),je.forEach(b),N=j(Pe),ue&&ue.l(Pe),W=j(Pe),H=k(Pe,"DIV",{class:!0});var Ze=T(H);P=k(Ze,"DIV",{class:!0});var Lt=T(P);Y=G(Lt,"Query"),Lt.forEach(b),Ze.forEach(b),O=j(Pe),L=k(Pe,"TEXTAREA",{class:!0,spellcheck:!0}),T(L).forEach(b),Pe.forEach(b),U=j(Ee),K=k(Ee,"DIV",{class:!0});var vt=T(K);te=k(vt,"DIV",{class:!0});var Ct=T(te);q=k(Ct,"DIV",{class:!0});var Ot=T(q);x=k(Ot,"DIV",{class:!0});var en=T(x);Z=k(en,"BUTTON",{type:!0,class:!0});var tn=T(Z);De(V.$$.fragment,tn),ce=G(tn,`
                  Original`),tn.forEach(b),en.forEach(b),Ot.forEach(b),pe=j(Ct),se&&se.l(Ct),Ct.forEach(b),oe=j(vt),ve=k(vt,"DIV",{class:!0});var rn=T(ve);Ne=k(rn,"DIV",{class:!0});var cn=T(Ne);J=k(cn,"DIV",{class:!0});var dt=T(J);Ie=G(dt,"Preview"),dt.forEach(b),cn.forEach(b),Ue=j(rn),Le.l(rn),rn.forEach(b),vt.forEach(b),Ee.forEach(b),fe=j(Me),M=k(Me,"DIV",{class:!0});var Un=T(M);ae=k(Un,"BUTTON",{type:!0,class:!0});var kn=T(ae);de=G(kn,"Transform"),kn.forEach(b),Un.forEach(b),Me.forEach(b),this.h()},h(){S(l,"class","jse-label-inner svelte-mr4kda"),S(o,"class","jse-label svelte-mr4kda"),S(u,"class","jse-description svelte-mr4kda"),S(m,"class","jse-label-inner svelte-mr4kda"),S(d,"class","jse-label svelte-mr4kda"),S(v,"class","jse-path svelte-mr4kda"),S(v,"type","text"),v.readOnly=!0,S(v,"title","Selected path"),v.value=y=si(n[1])?"(whole document)":bo(n[1]),S(I,"type","button"),S(I,"class","svelte-mr4kda"),S(A,"class","jse-label-inner svelte-mr4kda"),S(w,"class","jse-label svelte-mr4kda"),S(P,"class","jse-label-inner svelte-mr4kda"),S(H,"class","jse-label svelte-mr4kda"),S(L,"class","jse-query svelte-mr4kda"),S(L,"spellcheck","false"),L.value=n[9],S(r,"class","jse-query-contents svelte-mr4kda"),S(Z,"type","button"),S(Z,"class","svelte-mr4kda"),S(x,"class","jse-label-inner svelte-mr4kda"),S(q,"class","jse-label svelte-mr4kda"),S(te,"class","jse-original-data svelte-mr4kda"),$e(te,"jse-hide",!n[12]),S(J,"class","jse-label-inner svelte-mr4kda"),S(Ne,"class","jse-label svelte-mr4kda"),S(ve,"class","jse-preview-data svelte-mr4kda"),S(K,"class","jse-data-contents svelte-mr4kda"),$e(K,"jse-hide-original-data",!n[12]),S(s,"class","jse-main-contents svelte-mr4kda"),S(ae,"type","button"),S(ae,"class","jse-primary svelte-mr4kda"),ae.disabled=$=!!n[13],S(M,"class","jse-actions svelte-mr4kda"),S(i,"class","jse-contents svelte-mr4kda")},m(ge,Me){Oe(e,ge,Me),X(ge,t,Me),X(ge,i,Me),p(i,s),p(s,r),p(r,o),p(o,l),p(l,a),p(r,c),p(r,u),u.innerHTML=f,p(r,h),p(r,d),p(d,m),p(m,g),p(r,_),p(r,v),p(r,E),p(r,w),p(w,A),p(A,I),Oe(R,I,null),p(I,D),p(r,N),ue&&ue.m(r,null),p(r,W),p(r,H),p(H,P),p(P,Y),p(r,O),p(r,L),p(s,U),p(s,K),p(K,te),p(te,q),p(q,x),p(x,Z),Oe(V,Z,null),p(Z,ce),p(te,pe),se&&se.m(te,null),p(K,oe),p(K,ve),p(ve,Ne),p(Ne,J),p(J,Ie),p(ve,Ue),ke[re].m(ve,null),p(i,fe),p(i,M),p(M,ae),p(ae,de),ee=!0,ie||(me=[Se(I,"click",n[20]),Se(L,"input",n[18]),Se(Z,"click",n[21]),Se(ae,"click",n[19]),ac(sse.call(null,ae))],ie=!0)},p(ge,Me){const Ee={};Me[0]&32&&(Ee.queryLanguages=ge[5]),Me[0]&1&&(Ee.queryLanguageId=ge[0]),e.$set(Ee),(!ee||Me[0]&1)&&f!==(f=ge[16](ge[0]).description+"")&&(u.innerHTML=f),(!ee||Me[0]&2&&y!==(y=si(ge[1])?"(whole document)":bo(ge[1]))&&v.value!==y)&&(v.value=y);const Pe={};Me[0]&2048&&(Pe.data=ge[11]?Br:No),R.$set(Pe),ge[11]?ue?(ue.p(ge,Me),Me[0]&2048&&B(ue,1)):(ue=gk(ge),ue.c(),B(ue,1),ue.m(r,W)):ue&&(He(),Q(ue,1,1,()=>{ue=null}),qe()),(!ee||Me[0]&512)&&(L.value=ge[9]);const be={};Me[0]&4096&&(be.data=ge[12]?Br:No),V.$set(be),ge[12]?se?(se.p(ge,Me),Me[0]&4096&&B(se,1)):(se=vk(ge),se.c(),B(se,1),se.m(te,null)):se&&(He(),Q(se,1,1,()=>{se=null}),qe()),(!ee||Me[0]&4096)&&$e(te,"jse-hide",!ge[12]);let nt=re;re=Ce(ge),re===nt?ke[re].p(ge,Me):(He(),Q(ke[nt],1,1,()=>{ke[nt]=null}),qe(),Le=ke[re],Le?Le.p(ge,Me):(Le=ke[re]=_e[re](ge),Le.c()),B(Le,1),Le.m(ve,null)),(!ee||Me[0]&4096)&&$e(K,"jse-hide-original-data",!ge[12]),(!ee||Me[0]&8192&&$!==($=!!ge[13]))&&(ae.disabled=$)},i(ge){ee||(B(e.$$.fragment,ge),B(R.$$.fragment,ge),B(ue),B(V.$$.fragment,ge),B(se),B(Le),ee=!0)},o(ge){Q(e.$$.fragment,ge),Q(R.$$.fragment,ge),Q(ue),Q(V.$$.fragment,ge),Q(se),Q(Le),ee=!1},d(ge){Re(e,ge),ge&&b(t),ge&&b(i),Re(R),ue&&ue.d(),Re(V),se&&se.d(),ke[re].d(),ie=!1,an(me)}}}function ise(n){let e,t,i;return t=new aR({props:{$$slots:{default:[nse]},$$scope:{ctx:n}}}),{c(){e=C("div"),Te(t.$$.fragment),this.h()},l(s){e=k(s,"DIV",{class:!0});var r=T(e);De(t.$$.fragment,r),r.forEach(b),this.h()},h(){S(e,"class","jse-modal jse-transform svelte-mr4kda")},m(s,r){X(s,e,r),Oe(t,e,null),i=!0},p(s,r){const o={};r[0]&65535|r[1]&16&&(o.$$scope={dirty:r,ctx:s}),t.$set(o)},i(s){i||(B(t.$$.fragment,s),i=!0)},o(s){Q(t.$$.fragment,s),i=!1},d(s){s&&b(e),Re(t)}}}function sse(n){n.focus()}function rse(n,e,t){let i,s;const r=Ts("jsoneditor:TransformModal");let{id:o="transform-modal-"+nu()}=e,{json:l}=e,{selectedPath:a=[]}=e,{escapeControlCharacters:c}=e,{escapeUnicodeCharacters:u}=e,{parser:f}=e,{queryLanguages:h}=e,{queryLanguageId:d}=e,{onChangeQueryLanguage:m}=e,{onRenderValue:g}=e,{onClassName:_}=e,{onTransform:v}=e;const{close:y}=Nn("simple-modal"),E=`${o}:${mt(a)}`,w=fr[E]||{};let A=fr.showWizard!==!1,I=fr.showOriginal!==!1,R=w.queryOptions||{},D=d===w.queryLanguageId&&w.query?w.query:P(d).createQuery(l,w.queryOptions||{}),N=w.isManual||!1,W,H={text:""};function P(Z){return h.find(V=>V.id===Z)||h[0]}function Y(Z){t(8,R=Z),t(9,D=P(d).createQuery(l,Z)),t(28,N=!1),r("updateQueryByWizard",{queryOptions:R,query:D,isManual:N})}function O(Z){t(9,D=Z.target.value),t(28,N=!0),r("handleChangeQuery",{query:D,isManual:N})}function L(Z,V){try{r("previewTransform",{query:V});const ce=P(d).executeQuery(Z,V);t(14,H={json:ce}),t(13,W=void 0)}catch(ce){t(14,H={text:""}),t(13,W=ce)}}const U=jm(L,iO);function K(){try{r("handleTransform",{query:D});const Z=P(d).executeQuery(i,D);v([{op:"replace",path:mt(a),value:Z}]),y()}catch(Z){console.error(Z),t(14,H={text:""}),t(13,W=Z.toString())}}function te(){t(11,A=!A),t(27,fr.showWizard=A,fr)}function q(){t(12,I=!I),t(27,fr.showOriginal=I,fr)}function x(Z){r("handleChangeQueryLanguage",Z),t(0,d=Z),m(Z);const V=P(d);t(9,D=V.createQuery(l,R)),t(28,N=!1)}return n.$$set=Z=>{"id"in Z&&t(23,o=Z.id),"json"in Z&&t(24,l=Z.json),"selectedPath"in Z&&t(1,a=Z.selectedPath),"escapeControlCharacters"in Z&&t(2,c=Z.escapeControlCharacters),"escapeUnicodeCharacters"in Z&&t(3,u=Z.escapeUnicodeCharacters),"parser"in Z&&t(4,f=Z.parser),"queryLanguages"in Z&&t(5,h=Z.queryLanguages),"queryLanguageId"in Z&&t(0,d=Z.queryLanguageId),"onChangeQueryLanguage"in Z&&t(25,m=Z.onChangeQueryLanguage),"onRenderValue"in Z&&t(6,g=Z.onRenderValue),"onClassName"in Z&&t(7,_=Z.onClassName),"onTransform"in Z&&t(26,v=Z.onTransform)},n.$$.update=()=>{n.$$.dirty[0]&16777218&&t(10,i=wt(l,a)),n.$$.dirty[0]&1024&&t(15,s={json:i}),n.$$.dirty[0]&1536&&U(i,D),n.$$.dirty[0]&402653953&&(t(27,fr[E]={queryOptions:R,query:D,queryLanguageId:d,isManual:N},fr),r("store state in memory",E,fr[E]))},[d,a,c,u,f,h,g,_,R,D,i,A,I,W,H,s,P,Y,O,K,te,q,x,o,l,m,v,fr,N]}class ose extends rt{constructor(e){super(),ot(this,e,rse,ise,fn,{id:23,json:24,selectedPath:1,escapeControlCharacters:2,escapeUnicodeCharacters:3,parser:4,queryLanguages:5,queryLanguageId:0,onChangeQueryLanguage:25,onRenderValue:6,onClassName:7,onTransform:26},null,[-1,-1])}}const lse=ose,Co={};function bk(n){let e,t,i,s,r,o,l,a;function c(f){n[13](f)}let u={showIndicator:!0,items:n[4]};return n[1]!==void 0&&(u.value=n[1]),o=new bl({props:u}),Vt.push(()=>Vs(o,"value",c)),{c(){e=C("tr"),t=C("th"),i=z("Property"),s=F(),r=C("td"),Te(o.$$.fragment),this.h()},l(f){e=k(f,"TR",{});var h=T(e);t=k(h,"TH",{class:!0});var d=T(t);i=G(d,"Property"),d.forEach(b),s=j(h),r=k(h,"TD",{class:!0});var m=T(r);De(o.$$.fragment,m),m.forEach(b),h.forEach(b),this.h()},h(){S(t,"class","svelte-j8vz8h"),S(r,"class","svelte-j8vz8h")},m(f,h){X(f,e,h),p(e,t),p(t,i),p(e,s),p(e,r),Oe(o,r,null),a=!0},p(f,h){const d={};h&16&&(d.items=f[4]),!l&&h&2&&(l=!0,d.value=f[1],Zs(()=>l=!1)),o.$set(d)},i(f){a||(B(o.$$.fragment,f),a=!0)},o(f){Q(o.$$.fragment,f),a=!1},d(f){f&&b(e),Re(o)}}}function _k(n){let e,t;return{c(){e=C("div"),t=z(n[5]),this.h()},l(i){e=k(i,"DIV",{class:!0});var s=T(e);t=G(s,n[5]),s.forEach(b),this.h()},h(){S(e,"class","jse-error svelte-j8vz8h")},m(i,s){X(i,e,s),p(e,t)},p(i,s){s&32&&Be(t,i[5])},d(i){i&&b(e)}}}function ase(n){let e,t,i,s,r,o,l,a,c,u,f,h,d,m,g,_,v,y,E,w,A,I,R,D,N,W,H,P,Y,O,L,U,K,te,q,x,Z;t=new kN({props:{title:n[3]?"Sort array items":"Sort object keys"}});let V=n[3]&&(n[4].length>1||n[1]===void 0)&&bk(n);function ce(ve){n[14](ve)}let pe={showIndicator:!0,items:n[6],isClearable:!1};n[2]!==void 0&&(pe.value=n[2]),W=new bl({props:pe}),Vt.push(()=>Vs(W,"value",ce));let oe=n[5]&&_k(n);return{c(){e=C("div"),Te(t.$$.fragment),i=F(),s=C("div"),r=C("table"),o=C("colgroup"),l=C("col"),a=F(),c=C("col"),u=F(),f=C("tbody"),h=C("tr"),d=C("th"),m=z("Path"),g=F(),_=C("td"),v=C("input"),E=F(),V&&V.c(),w=F(),A=C("tr"),I=C("th"),R=z("Direction"),D=F(),N=C("td"),Te(W.$$.fragment),P=F(),Y=C("div"),oe&&oe.c(),O=F(),L=C("div"),U=C("button"),K=z("Sort"),this.h()},l(ve){e=k(ve,"DIV",{class:!0});var Ne=T(e);De(t.$$.fragment,Ne),i=j(Ne),s=k(Ne,"DIV",{class:!0});var J=T(s);r=k(J,"TABLE",{class:!0});var Ie=T(r);o=k(Ie,"COLGROUP",{});var Ue=T(o);l=k(Ue,"COL",{width:!0}),a=j(Ue),c=k(Ue,"COL",{width:!0}),Ue.forEach(b),u=j(Ie),f=k(Ie,"TBODY",{});var re=T(f);h=k(re,"TR",{});var Le=T(h);d=k(Le,"TH",{class:!0});var fe=T(d);m=G(fe,"Path"),fe.forEach(b),g=j(Le),_=k(Le,"TD",{class:!0});var M=T(_);v=k(M,"INPUT",{class:!0,type:!0,title:!0}),M.forEach(b),Le.forEach(b),E=j(re),V&&V.l(re),w=j(re),A=k(re,"TR",{});var ae=T(A);I=k(ae,"TH",{class:!0});var de=T(I);R=G(de,"Direction"),de.forEach(b),D=j(ae),N=k(ae,"TD",{class:!0});var $=T(N);De(W.$$.fragment,$),$.forEach(b),ae.forEach(b),re.forEach(b),Ie.forEach(b),P=j(J),Y=k(J,"DIV",{class:!0});var ee=T(Y);oe&&oe.l(ee),ee.forEach(b),O=j(J),L=k(J,"DIV",{class:!0});var ie=T(L);U=k(ie,"BUTTON",{type:!0,class:!0});var me=T(U);K=G(me,"Sort"),me.forEach(b),ie.forEach(b),J.forEach(b),Ne.forEach(b),this.h()},h(){S(l,"width","25%"),S(c,"width","75%"),S(d,"class","svelte-j8vz8h"),S(v,"class","jse-path svelte-j8vz8h"),S(v,"type","text"),v.readOnly=!0,S(v,"title","Selected path"),v.value=y=si(n[0])?"(whole document)":bo(n[0]),S(_,"class","svelte-j8vz8h"),S(I,"class","svelte-j8vz8h"),S(N,"class","svelte-j8vz8h"),S(r,"class","svelte-j8vz8h"),S(Y,"class","jse-space svelte-j8vz8h"),S(U,"type","button"),S(U,"class","jse-primary svelte-j8vz8h"),U.disabled=te=n[3]?!n[1]:!1,S(L,"class","jse-actions svelte-j8vz8h"),S(s,"class","jse-contents svelte-j8vz8h"),S(e,"class","jse-modal jse-sort svelte-j8vz8h")},m(ve,Ne){X(ve,e,Ne),Oe(t,e,null),p(e,i),p(e,s),p(s,r),p(r,o),p(o,l),p(o,a),p(o,c),p(r,u),p(r,f),p(f,h),p(h,d),p(d,m),p(h,g),p(h,_),p(_,v),p(f,E),V&&V.m(f,null),p(f,w),p(f,A),p(A,I),p(I,R),p(A,D),p(A,N),Oe(W,N,null),p(s,P),p(s,Y),oe&&oe.m(Y,null),p(s,O),p(s,L),p(L,U),p(U,K),q=!0,x||(Z=[Se(U,"click",n[7]),ac(cse.call(null,U))],x=!0)},p(ve,[Ne]){const J={};Ne&8&&(J.title=ve[3]?"Sort array items":"Sort object keys"),t.$set(J),(!q||Ne&1&&y!==(y=si(ve[0])?"(whole document)":bo(ve[0]))&&v.value!==y)&&(v.value=y),ve[3]&&(ve[4].length>1||ve[1]===void 0)?V?(V.p(ve,Ne),Ne&26&&B(V,1)):(V=bk(ve),V.c(),B(V,1),V.m(f,w)):V&&(He(),Q(V,1,1,()=>{V=null}),qe());const Ie={};!H&&Ne&4&&(H=!0,Ie.value=ve[2],Zs(()=>H=!1)),W.$set(Ie),ve[5]?oe?oe.p(ve,Ne):(oe=_k(ve),oe.c(),oe.m(Y,null)):oe&&(oe.d(1),oe=null),(!q||Ne&10&&te!==(te=ve[3]?!ve[1]:!1))&&(U.disabled=te)},i(ve){q||(B(t.$$.fragment,ve),B(V),B(W.$$.fragment,ve),q=!0)},o(ve){Q(t.$$.fragment,ve),Q(V),Q(W.$$.fragment,ve),q=!1},d(ve){ve&&b(e),Re(t),V&&V.d(),Re(W),oe&&oe.d(),x=!1,an(Z)}}}function cse(n){n.focus()}function use(n,e,t){let i,s,r;const o=Ts("jsoneditor:SortModal");let{id:l}=e,{json:a}=e,{selectedPath:c}=e,{onSort:u}=e;const{close:f}=Nn("simple-modal"),h=`${l}:${mt(c)}`,d=wt(a,c),m={value:1,label:"ascending"},_=[m,{value:-1,label:"descending"}];let v=Co[h]&&Co[h].selectedProperty||void 0,y=Co[h]&&Co[h].selectedDirection||m,E;function w(){try{if(t(5,E=void 0),i){if(!v)return;const R=v.value,D=y.value,N=Yte(a,c,R,D);u(N)}else if(Fi(d)){const R=y.value,D=Qte(a,c,R);u(D)}else console.error("Cannot sort: no array or object");f()}catch(R){t(5,E=R.toString())}}function A(R){v=R,t(1,v),t(4,r),t(12,s),t(3,i)}function I(R){y=R,t(2,y)}return n.$$set=R=>{"id"in R&&t(8,l=R.id),"json"in R&&t(9,a=R.json),"selectedPath"in R&&t(0,c=R.selectedPath),"onSort"in R&&t(10,u=R.onSort)},n.$$.update=()=>{n.$$.dirty&8&&t(12,s=i?E1(d):void 0),n.$$.dirty&4096&&t(4,r=s?s.map(ga):void 0),n.$$.dirty&18&&v===void 0&&r&&r.length===1&&t(1,v=r[0]),n.$$.dirty&2054&&(t(11,Co[h]={selectedProperty:v,selectedDirection:y},Co),o("store state in memory",h,Co[h]))},t(3,i=Array.isArray(d)),[c,v,y,i,r,E,_,w,l,a,u,Co,s,A,I]}class fse extends rt{constructor(e){super(),ot(this,e,use,ase,fn,{id:8,json:9,selectedPath:0,onSort:10})}}const hse=fse;function dse(n,e,t){const i=Nn("simple-modal"),s=i.open,r=i.close;return[s,r]}class mse extends rt{constructor(e){super(),ot(this,e,dse,null,fn,{open:0,close:1})}get open(){return this.$$.ctx[0]}get close(){return this.$$.ctx[1]}}const pse=mse;function gse(n){let e,t,i={readOnly:n[2],indentation:n[3],externalContent:n[0],mainMenuBar:n[5],navigationBar:n[6],escapeControlCharacters:n[8],escapeUnicodeCharacters:n[9],parser:n[10],validator:n[11],validationParser:n[12],pathParser:n[13],onError:n[16],onChange:n[24],onRequestRepair:n[25],onRenderValue:n[14],onClassName:n[15],onFocus:n[27],onBlur:n[28],onRenderMenu:n[23],onSortModal:n[30],onTransformModal:n[29]};return e=new Kb({props:i}),n[57](e),{c(){Te(e.$$.fragment)},l(s){De(e.$$.fragment,s)},m(s,r){Oe(e,s,r),t=!0},p(s,r){const o={};r[0]&4&&(o.readOnly=s[2]),r[0]&8&&(o.indentation=s[3]),r[0]&1&&(o.externalContent=s[0]),r[0]&32&&(o.mainMenuBar=s[5]),r[0]&64&&(o.navigationBar=s[6]),r[0]&256&&(o.escapeControlCharacters=s[8]),r[0]&512&&(o.escapeUnicodeCharacters=s[9]),r[0]&1024&&(o.parser=s[10]),r[0]&2048&&(o.validator=s[11]),r[0]&4096&&(o.validationParser=s[12]),r[0]&8192&&(o.pathParser=s[13]),r[0]&65536&&(o.onError=s[16]),r[0]&16384&&(o.onRenderValue=s[14]),r[0]&32768&&(o.onClassName=s[15]),r[0]&8388608&&(o.onRenderMenu=s[23]),e.$set(o)},i(s){t||(B(e.$$.fragment,s),t=!0)},o(s){Q(e.$$.fragment,s),t=!1},d(s){n[57](null),Re(e,s)}}}function vse(n){let e,t,i={externalContent:n[0],readOnly:n[2],indentation:n[3],tabSize:n[4],mainMenuBar:n[5],statusBar:n[7],escapeUnicodeCharacters:n[9],parser:n[10],validator:n[11],validationParser:n[12],onChange:n[24],onSwitchToTreeMode:n[26],onError:n[16],onFocus:n[27],onBlur:n[28],onRenderMenu:n[23],onSortModal:n[30],onTransformModal:n[29]};return e=new d$({props:i}),n[56](e),{c(){Te(e.$$.fragment)},l(s){De(e.$$.fragment,s)},m(s,r){Oe(e,s,r),t=!0},p(s,r){const o={};r[0]&1&&(o.externalContent=s[0]),r[0]&4&&(o.readOnly=s[2]),r[0]&8&&(o.indentation=s[3]),r[0]&16&&(o.tabSize=s[4]),r[0]&32&&(o.mainMenuBar=s[5]),r[0]&128&&(o.statusBar=s[7]),r[0]&512&&(o.escapeUnicodeCharacters=s[9]),r[0]&1024&&(o.parser=s[10]),r[0]&2048&&(o.validator=s[11]),r[0]&4096&&(o.validationParser=s[12]),r[0]&65536&&(o.onError=s[16]),r[0]&8388608&&(o.onRenderMenu=s[23]),e.$set(o)},i(s){t||(B(e.$$.fragment,s),t=!0)},o(s){Q(e.$$.fragment,s),t=!1},d(s){n[56](null),Re(e,s)}}}function yk(n){let e,t,i,s;const r=[vse,gse],o=[];function l(a,c){return a[1]===Qs.text||a[1]==="code"?0:1}return e=l(n),t=o[e]=r[e](n),{c(){t.c(),i=tt()},l(a){t.l(a),i=tt()},m(a,c){o[e].m(a,c),X(a,i,c),s=!0},p(a,c){let u=e;e=l(a),e===u?o[e].p(a,c):(He(),Q(o[u],1,1,()=>{o[u]=null}),qe(),t=o[e],t?t.p(a,c):(t=o[e]=r[e](a),t.c()),B(t,1),t.m(i.parentNode,i))},i(a){s||(B(t),s=!0)},o(a){Q(t),s=!1},d(a){o[e].d(a),a&&b(i)}}}function bse(n){let e,t=n[17],i,s=yk(n);return{c(){e=C("div"),s.c(),this.h()},l(r){e=k(r,"DIV",{class:!0});var o=T(e);s.l(o),o.forEach(b),this.h()},h(){S(e,"class","jse-main svelte-qi4kho"),$e(e,"jse-focus",n[18])},m(r,o){X(r,e,o),s.m(e,null),n[58](e),i=!0},p(r,o){o[0]&131072&&fn(t,t=r[17])?(He(),Q(s,1,1,Xe),qe(),s=yk(r),s.c(),B(s,1),s.m(e,null)):s.p(r,o),(!i||o[0]&262144)&&$e(e,"jse-focus",r[18])},i(r){i||(B(s),i=!0)},o(r){Q(s),i=!1},d(r){r&&b(e),s.d(r),n[58](null)}}}function _se(n){let e,t,i,s,r;function o(a){n[55](a)}let l={};return n[22]!==void 0&&(l.open=n[22]),e=new pse({props:l}),Vt.push(()=>Vs(e,"open",o)),s=new aR({props:{$$slots:{default:[bse]},$$scope:{ctx:n}}}),{c(){Te(e.$$.fragment),i=F(),Te(s.$$.fragment)},l(a){De(e.$$.fragment,a),i=j(a),De(s.$$.fragment,a)},m(a,c){Oe(e,a,c),X(a,i,c),Oe(s,a,c),r=!0},p(a,c){const u={};!t&&c[0]&4194304&&(t=!0,u.open=a[22],Zs(()=>t=!1)),e.$set(u);const f={};c[0]&12582911|c[2]&2&&(f.$$scope={dirty:c,ctx:a}),s.$set(f)},i(a){r||(B(e.$$.fragment,a),B(s.$$.fragment,a),r=!0)},o(a){Q(e.$$.fragment,a),Q(s.$$.fragment,a),r=!1},d(a){Re(e,a),a&&b(i),Re(s,a)}}}function yse(n){let e,t;return e=new kW({props:{$$slots:{default:[_se]},$$scope:{ctx:n}}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,s){const r={};s[0]&16777215|s[2]&2&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function DN(n){this.$set(n)}function NN(){this.$destroy()}function Sse(n,e,t){let i;const s=Ts("jsoneditor:Main");let{content:r={text:""}}=e,{readOnly:o=!1}=e,{indentation:l=2}=e,{tabSize:a=4}=e,{mode:c=Qs.tree}=e,{mainMenuBar:u=!0}=e,{navigationBar:f=!0}=e,{statusBar:h=!0}=e,{escapeControlCharacters:d=!1}=e,{escapeUnicodeCharacters:m=!1}=e,{parser:g=JSON}=e,{validator:_=null}=e,{validationParser:v=JSON}=e,{pathParser:y={parse:LG,stringify:bo}}=e,{queryLanguages:E=[Pne]}=e,{queryLanguageId:w=E[0].id}=e,{onChangeQueryLanguage:A=Gn}=e,{onChange:I=null}=e,{onRenderValue:R=aie}=e,{onClassName:D=()=>{}}=e,{onRenderMenu:N=Gn}=e,{onChangeMode:W=Gn}=e,{onError:H=Ee=>{console.error(Ee),alert(Ee.toString())}}=e,{onFocus:P=Gn}=e,{onBlur:Y=Gn}=e,O=nu(),L=!1,U,K,te,q,x=g;function Z(){return r}function V(Ee){s("set");const Pe=Rp(Ee);if(Pe)throw new Error(Pe);t(17,O=nu()),t(0,r=Ee)}function ce(Ee){s("update");const Pe=Rp(Ee);if(Pe)throw new Error(Pe);t(0,r=Ee)}function pe(Ee){if(Jv(r))try{t(0,r={json:g.parse(r.text),text:void 0})}catch{throw new Error("Cannot apply patch: current document contains invalid JSON")}if(K)return K.patch(Ee);if(te)return te.patch(Ee)}function oe(Ee){if(K)return K.expand(Ee);throw new Error(`Method expand is not available in mode "${c}"`)}function ve(Ee){if(te)te.openTransformModal(Ee);else if(K)K.openTransformModal(Ee);else throw new Error(`Method transform is not available in mode "${c}"`)}function Ne(){if(te)return te.validate();if(K)return K.validate();throw new Error(`Method validate is not available in mode "${c}"`)}function J(){return K?K.acceptAutoRepair():r}function Ie(Ee){if(K)return K.scrollTo(Ee);throw new Error(`Method scrollTo is not available in mode "${c}"`)}function Ue(Ee){if(K)return K.findElement(Ee);throw new Error(`Method findElement is not available in mode "${c}"`)}function re(){te?te.focus():K&&K.focus()}function Le(){te&&te.refresh()}function fe(Ee,Pe,be){t(0,r=Ee),I&&I(Ee,Pe,be)}async function M(){t(1,c=Qs.text),await ci(),W(Qs.text)}async function ae(){t(1,c=Qs.tree),await ci(),W(Qs.tree)}function de(){t(18,L=!0),P&&P()}function $(){t(18,L=!1),Y&&Y()}async function ee(Ee){c!==Ee&&(t(1,c=Ee),await ci(),re(),W(Ee))}let ie;const me={separator:!0};function ue(Ee){s("handleChangeQueryLanguage",Ee),t(31,w=Ee),A(Ee)}function se({id:Ee,json:Pe,selectedPath:be,onTransform:nt,onClose:Fe}){o||q(lse,{id:Ee,json:Pe,selectedPath:be,escapeControlCharacters:d,escapeUnicodeCharacters:m,parser:g,queryLanguages:E,queryLanguageId:w,onChangeQueryLanguage:ue,onRenderValue:R,onClassName:D,onTransform:nt},BW,{onClose:Fe})}function _e({id:Ee,json:Pe,selectedPath:be,onSort:nt,onClose:Fe}){o||q(hse,{id:Ee,json:Pe,selectedPath:be,onSort:nt},MW,{onClose:Fe})}function ke(Ee){q=Ee,t(22,q)}function Ce(Ee){Vt[Ee?"unshift":"push"](()=>{te=Ee,t(21,te)})}function ge(Ee){Vt[Ee?"unshift":"push"](()=>{K=Ee,t(20,K)})}function Me(Ee){Vt[Ee?"unshift":"push"](()=>{U=Ee,t(19,U)})}return n.$$set=Ee=>{"content"in Ee&&t(0,r=Ee.content),"readOnly"in Ee&&t(2,o=Ee.readOnly),"indentation"in Ee&&t(3,l=Ee.indentation),"tabSize"in Ee&&t(4,a=Ee.tabSize),"mode"in Ee&&t(1,c=Ee.mode),"mainMenuBar"in Ee&&t(5,u=Ee.mainMenuBar),"navigationBar"in Ee&&t(6,f=Ee.navigationBar),"statusBar"in Ee&&t(7,h=Ee.statusBar),"escapeControlCharacters"in Ee&&t(8,d=Ee.escapeControlCharacters),"escapeUnicodeCharacters"in Ee&&t(9,m=Ee.escapeUnicodeCharacters),"parser"in Ee&&t(10,g=Ee.parser),"validator"in Ee&&t(11,_=Ee.validator),"validationParser"in Ee&&t(12,v=Ee.validationParser),"pathParser"in Ee&&t(13,y=Ee.pathParser),"queryLanguages"in Ee&&t(32,E=Ee.queryLanguages),"queryLanguageId"in Ee&&t(31,w=Ee.queryLanguageId),"onChangeQueryLanguage"in Ee&&t(33,A=Ee.onChangeQueryLanguage),"onChange"in Ee&&t(34,I=Ee.onChange),"onRenderValue"in Ee&&t(14,R=Ee.onRenderValue),"onClassName"in Ee&&t(15,D=Ee.onClassName),"onRenderMenu"in Ee&&t(35,N=Ee.onRenderMenu),"onChangeMode"in Ee&&t(36,W=Ee.onChangeMode),"onError"in Ee&&t(16,H=Ee.onError),"onFocus"in Ee&&t(37,P=Ee.onFocus),"onBlur"in Ee&&t(38,Y=Ee.onBlur)},n.$$.update=()=>{if(n.$$.dirty[0]&1){const Ee=Rp(r);Ee&&console.error("Error: "+Ee)}n.$$.dirty[0]&1024|n.$$.dirty[1]&4194304&&(yz(g,x)||(s("parser changed, recreate editor"),t(53,x=g),t(17,O=nu()))),n.$$.dirty[0]&2&&t(54,ie=[{text:"text",title:`Switch to text mode (current mode: ${c})`,className:"jse-group-button jse-first"+(c===Qs.text||c==="code"?" jse-selected":""),onClick:()=>ee(Qs.text)},{text:"tree",title:`Switch to tree mode (current mode: ${c})`,className:"jse-group-button jse-last"+(c===Qs.tree?" jse-selected":""),onClick:()=>ee(Qs.tree)}]),n.$$.dirty[1]&8388624&&t(23,i=(Ee,Pe)=>{const be=e$(Pe[0])?ie.concat(Pe):ie.concat(me,Pe);return N(Ee,be)||be}),n.$$.dirty[0]&2&&(s("mode changed to",c),c==="code"&&console.warn('Deprecation warning: "code" mode is renamed to "text". Please use mode="text" instead.'))},[r,c,o,l,a,u,f,h,d,m,g,_,v,y,R,D,H,O,L,U,K,te,q,i,fe,M,ae,de,$,se,_e,w,E,A,I,N,W,P,Y,Z,V,ce,pe,oe,ve,Ne,J,Ie,Ue,re,Le,DN,NN,x,ie,ke,Ce,ge,Me]}class Ese extends rt{constructor(e){super(),ot(this,e,Sse,yse,fn,{content:0,readOnly:2,indentation:3,tabSize:4,mode:1,mainMenuBar:5,navigationBar:6,statusBar:7,escapeControlCharacters:8,escapeUnicodeCharacters:9,parser:10,validator:11,validationParser:12,pathParser:13,queryLanguages:32,queryLanguageId:31,onChangeQueryLanguage:33,onChange:34,onRenderValue:14,onClassName:15,onRenderMenu:35,onChangeMode:36,onError:16,onFocus:37,onBlur:38,get:39,set:40,update:41,patch:42,expand:43,transform:44,validate:45,acceptAutoRepair:46,scrollTo:47,findElement:48,focus:49,refresh:50,updateProps:51,destroy:52},null,[-1,-1,-1])}get get(){return this.$$.ctx[39]}get set(){return this.$$.ctx[40]}get update(){return this.$$.ctx[41]}get patch(){return this.$$.ctx[42]}get expand(){return this.$$.ctx[43]}get transform(){return this.$$.ctx[44]}get validate(){return this.$$.ctx[45]}get acceptAutoRepair(){return this.$$.ctx[46]}get scrollTo(){return this.$$.ctx[47]}get findElement(){return this.$$.ctx[48]}get focus(){return this.$$.ctx[49]}get refresh(){return this.$$.ctx[50]}get updateProps(){return DN}get destroy(){return NN}}const Ase=Ese;function mh(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}function Sk(n){let e,t;return e=new Ase({props:{content:n[2],mode:"code",onChange:n[5]}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,s){const r={};s&4&&(r.content=i[2]),s&4&&(r.onChange=i[5]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function wse(n){let e,t,i,s,r,o,l,a,c=n[0],u,f,h,d=Sk(n);return{c(){e=C("div"),t=C("div"),i=C("h1"),s=z("Edit your character sheet manually"),r=F(),o=C("button"),l=z("Commit Changes"),a=F(),d.c(),this.h()},l(m){e=k(m,"DIV",{class:!0});var g=T(e);t=k(g,"DIV",{class:!0});var _=T(t);i=k(_,"H1",{});var v=T(i);s=G(v,"Edit your character sheet manually"),v.forEach(b),r=j(_),o=k(_,"BUTTON",{});var y=T(o);l=G(y,"Commit Changes"),y.forEach(b),_.forEach(b),a=j(g),d.l(g),g.forEach(b),this.h()},h(){S(t,"class","content"),S(e,"class","container svelte-1sggtte")},m(m,g){X(m,e,g),p(e,t),p(t,i),p(i,s),p(t,r),p(t,o),p(o,l),p(e,a),d.m(e,null),u=!0,f||(h=Se(o,"click",n[4]),f=!0)},p(m,[g]){g&1&&It(c,c=m[0])?(He(),Q(d,1,1,Xe),qe(),d=Sk(m),d.c(),B(d,1),d.m(e,null)):d.p(m,g)},i(m){u||(B(d),u=!0)},o(m){Q(d),u=!1},d(m){m&&b(e),d.d(m),f=!1,h()}}}function Cse(n,e,t){let{fullSheet:i}=e,{onChangeSheet:s}=e,r={current:null},o;const l=()=>{let c=o.json;if(o.text)try{c=JSON.parse(o.text)}catch{alert("failed to parse the editor text")}else o.json?c=o.json:alert("failed to parse the editor at all");if(c)if(confirm("Are you sure you want to update your sheet? Your sheet will be downloaded as a back up before the change is committed"))K4(i,"BACKUP-"),s(c);else return},a=c=>{t(2,o=c)};return n.$$set=c=>{"fullSheet"in c&&t(0,i=c.fullSheet),"onChangeSheet"in c&&t(1,s=c.onChangeSheet)},n.$$.update=()=>{n.$$.dirty&9&&r.current!==i&&(t(3,r.current=i,r),t(2,o={json:i}))},[i,s,o,r,l,a]}class kse extends rt{constructor(e){super(),ot(this,e,Cse,wse,It,{fullSheet:0,onChangeSheet:1})}}function Ek(n,e,t){const i=n.slice();return i[12]=e[t],i}function Ak(n){let e,t,i;return{c(){e=C("img"),this.h()},l(s){e=k(s,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){var s;S(e,"class",t=xe(`icon ${(s=n[3])!=null&&s.has(n[12])?"equipped":"not-equipped"}`)+" svelte-tg3npo"),Pl(e.src,i=nd[n[12]])||S(e,"src",i),S(e,"alt","icon")},m(s,r){X(s,e,r)},p(s,r){var o;r&136&&t!==(t=xe(`icon ${(o=s[3])!=null&&o.has(s[12])?"equipped":"not-equipped"}`)+" svelte-tg3npo")&&S(e,"class",t),r&128&&!Pl(e.src,i=nd[s[12]])&&S(e,"src",i)},d(s){s&&b(e)}}}function wk(n){let e,t=nd[n[12]]&&Ak(n);return{c(){t&&t.c(),e=tt()},l(i){t&&t.l(i),e=tt()},m(i,s){t&&t.m(i,s),X(i,e,s)},p(i,s){nd[i[12]]?t?t.p(i,s):(t=Ak(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(i){t&&t.d(i),i&&b(e)}}}function Ck(n){var l,a;let e,t,i,s=((l=n[4][n[0]])==null?void 0:l.reason)&&kk(n),r=n[6]&&Ik(n),o=((a=n[4][n[0]])==null?void 0:a.description)&&Tk(n);return{c(){e=C("div"),s&&s.c(),t=F(),r&&r.c(),i=F(),o&&o.c(),this.h()},l(c){e=k(c,"DIV",{class:!0});var u=T(e);s&&s.l(u),t=j(u),r&&r.l(u),i=j(u),o&&o.l(u),u.forEach(b),this.h()},h(){S(e,"class","description svelte-tg3npo")},m(c,u){X(c,e,u),s&&s.m(e,null),p(e,t),r&&r.m(e,null),p(e,i),o&&o.m(e,null)},p(c,u){var f,h;(f=c[4][c[0]])!=null&&f.reason?s?s.p(c,u):(s=kk(c),s.c(),s.m(e,t)):s&&(s.d(1),s=null),c[6]?r?r.p(c,u):(r=Ik(c),r.c(),r.m(e,i)):r&&(r.d(1),r=null),(h=c[4][c[0]])!=null&&h.description?o?o.p(c,u):(o=Tk(c),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},d(c){c&&b(e),s&&s.d(),r&&r.d(),o&&o.d()}}}function kk(n){let e,t=n[4][n[0]].reason+"",i,s,r;return{c(){e=C("div"),i=z(t),s=F(),r=C("br"),this.h()},l(o){e=k(o,"DIV",{class:!0});var l=T(e);i=G(l,t),l.forEach(b),s=j(o),r=k(o,"BR",{}),this.h()},h(){S(e,"class","reason svelte-tg3npo")},m(o,l){X(o,e,l),p(e,i),X(o,s,l),X(o,r,l)},p(o,l){l&17&&t!==(t=o[4][o[0]].reason+"")&&Be(i,t)},d(o){o&&b(e),o&&b(s),o&&b(r)}}}function Ik(n){let e,t;return{c(){e=C("span"),t=z(n[6])},l(i){e=k(i,"SPAN",{});var s=T(e);t=G(s,n[6]),s.forEach(b)},m(i,s){X(i,e,s),p(e,t)},p(i,s){s&64&&Be(t,i[6])},d(i){i&&b(e)}}}function Tk(n){let e,t,i=n[4][n[0]].description+"",s,r=n[6]&&Ok();return{c(){r&&r.c(),e=F(),t=C("div"),s=z(i),this.h()},l(o){r&&r.l(o),e=j(o),t=k(o,"DIV",{class:!0});var l=T(t);s=G(l,i),l.forEach(b),this.h()},h(){S(t,"class","description-extra svelte-tg3npo")},m(o,l){r&&r.m(o,l),X(o,e,l),X(o,t,l),p(t,s)},p(o,l){o[6]?r||(r=Ok(),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),l&17&&i!==(i=o[4][o[0]].description+"")&&Be(s,i)},d(o){r&&r.d(o),o&&b(e),o&&b(t)}}}function Ok(n){let e;return{c(){e=C("br")},l(t){e=k(t,"BR",{})},m(t,i){X(t,e,i)},d(t){t&&b(e)}}}function Ise(n){let e,t,i,s,r=n[4][n[0]].label+"",o,l,a,c,u,f,h,d,m,g,_,v,y=n[7],E=[];for(let A=0;A<y.length;A+=1)E[A]=wk(Ek(n,y,A));d=new Tm({props:{isEquipped:n[1].includes(n[0]),onClick:n[11],isVisible:n[1].length<po||n[1].includes(n[0])}});let w=n[5]&&Ck(n);return{c(){e=C("div"),t=C("div"),i=C("div"),s=C("span"),o=z(r),l=F();for(let A=0;A<E.length;A+=1)E[A].c();a=F(),c=C("div"),u=z("v"),h=F(),Te(d.$$.fragment),m=F(),w&&w.c(),this.h()},l(A){e=k(A,"DIV",{class:!0});var I=T(e);t=k(I,"DIV",{class:!0});var R=T(t);i=k(R,"DIV",{class:!0});var D=T(i);s=k(D,"SPAN",{});var N=T(s);o=G(N,r),N.forEach(b),l=j(D);for(let H=0;H<E.length;H+=1)E[H].l(D);D.forEach(b),a=j(R),c=k(R,"DIV",{class:!0});var W=T(c);u=G(W,"v"),W.forEach(b),h=j(R),De(d.$$.fragment,R),R.forEach(b),m=j(I),w&&w.l(I),I.forEach(b),this.h()},h(){S(i,"class","label svelte-tg3npo"),S(c,"class",f=xe(`caret ${n[5]?"":"flip"}`)+" svelte-tg3npo"),S(t,"class","content svelte-tg3npo"),S(e,"class","container svelte-tg3npo")},m(A,I){X(A,e,I),p(e,t),p(t,i),p(i,s),p(s,o),p(i,l);for(let R=0;R<E.length;R+=1)E[R].m(i,null);p(t,a),p(t,c),p(c,u),p(t,h),Oe(d,t,null),p(e,m),w&&w.m(e,null),g=!0,_||(v=[Se(i,"click",n[9]),Se(c,"click",n[10])],_=!0)},p(A,[I]){if((!g||I&17)&&r!==(r=A[4][A[0]].label+"")&&Be(o,r),I&136){y=A[7];let D;for(D=0;D<y.length;D+=1){const N=Ek(A,y,D);E[D]?E[D].p(N,I):(E[D]=wk(N),E[D].c(),E[D].m(i,null))}for(;D<E.length;D+=1)E[D].d(1);E.length=y.length}(!g||I&32&&f!==(f=xe(`caret ${A[5]?"":"flip"}`)+" svelte-tg3npo"))&&S(c,"class",f);const R={};I&3&&(R.isEquipped=A[1].includes(A[0])),I&5&&(R.onClick=A[11]),I&3&&(R.isVisible=A[1].length<po||A[1].includes(A[0])),d.$set(R),A[5]?w?w.p(A,I):(w=Ck(A),w.c(),w.m(e,null)):w&&(w.d(1),w=null)},i(A){g||(B(d.$$.fragment,A),g=!0)},o(A){Q(d.$$.fragment,A),g=!1},d(A){A&&b(e),Ht(E,A),Re(d),w&&w.d(),_=!1,an(v)}}}function Tse(n,e,t){let i,s,r,{art:o}=e,{equippedCombatArts:l}=e,{onToggleCombatArts:a}=e,{allCombatArts:c}=e,{equippedWeaponTypes:u}=e,f=!1;const h=()=>t(5,f=!f),d=()=>t(5,f=!f),m=()=>a(o);return n.$$set=g=>{"art"in g&&t(0,o=g.art),"equippedCombatArts"in g&&t(1,l=g.equippedCombatArts),"onToggleCombatArts"in g&&t(2,a=g.onToggleCombatArts),"allCombatArts"in g&&t(8,c=g.allCombatArts),"equippedWeaponTypes"in g&&t(3,u=g.equippedWeaponTypes)},n.$$.update=()=>{var g;n.$$.dirty&256&&t(4,i=c.fullFeatures),n.$$.dirty&17&&t(7,s=((g=i[o])==null?void 0:g.compatibleWeapons)||[]),n.$$.dirty&17&&t(6,r=Q4(i[o],{disableDescription:!0}))},[o,l,a,u,i,f,r,s,c,h,d,m]}class Ose extends rt{constructor(e){super(),ot(this,e,Tse,Ise,It,{art:0,equippedCombatArts:1,onToggleCombatArts:2,allCombatArts:8,equippedWeaponTypes:3})}}function Rk(n,e,t){const i=n.slice();return i[11]=e[t],i}function Rse(n){let e,t,i=n[1].length+"",s,r,o,l,a,c;return{c(){e=C("span"),t=z("("),s=z(i),r=z("/"),o=z(po),l=z(")")},l(u){e=k(u,"SPAN",{});var f=T(e);t=G(f,"("),s=G(f,i),r=G(f,"/"),o=G(f,po),l=G(f,")"),f.forEach(b)},m(u,f){X(u,e,f),p(e,t),p(e,s),p(e,r),p(e,o),p(e,l),a||(c=Se(e,"click",n[9]),a=!0)},p(u,f){f&2&&i!==(i=u[1].length+"")&&Be(s,i)},d(u){u&&b(e),a=!1,c()}}}function Dse(n){let e,t;return{c(){e=C("div"),t=z("Click to Clear All"),this.h()},l(i){e=k(i,"DIV",{slot:!0});var s=T(e);t=G(s,"Click to Clear All"),s.forEach(b),this.h()},h(){S(e,"slot","t")},m(i,s){X(i,e,s),p(e,t)},p:Xe,d(i){i&&b(e)}}}function Nse(n){let e,t,i,s,r,o,l,a,c,u,f,h;return o=new fi({props:{tooltipStyle:is.BOTTOM_CENTER,$$slots:{t:[Dse],default:[Rse]},$$scope:{ctx:n}}}),{c(){e=C("div"),t=C("div"),i=C("span"),s=z("Combat Arts"),r=F(),Te(o.$$.fragment),l=F(),a=C("button"),c=z("+"),this.h()},l(d){e=k(d,"DIV",{slot:!0,class:!0});var m=T(e);t=k(m,"DIV",{});var g=T(t);i=k(g,"SPAN",{});var _=T(i);s=G(_,"Combat Arts"),_.forEach(b),r=j(g),De(o.$$.fragment,g),g.forEach(b),l=j(m),a=k(m,"BUTTON",{class:!0});var v=T(a);c=G(v,"+"),v.forEach(b),m.forEach(b),this.h()},h(){S(a,"class","svelte-pbyt6h"),S(e,"slot","content"),S(e,"class","header svelte-pbyt6h")},m(d,m){X(d,e,m),p(e,t),p(t,i),p(i,s),p(t,r),Oe(o,t,null),p(e,l),p(e,a),p(a,c),u=!0,f||(h=Se(a,"click",function(){Bn(n[3])&&n[3].apply(this,arguments)}),f=!0)},p(d,m){n=d;const g={};m&16390&&(g.$$scope={dirty:m,ctx:n}),o.$set(g)},i(d){u||(B(o.$$.fragment,d),u=!0)},o(d){Q(o.$$.fragment,d),u=!1},d(d){d&&b(e),Re(o),f=!1,h()}}}function Dk(n){let e,t;return e=new Ose({props:{art:n[11],allCombatArts:n[0],equippedCombatArts:n[1],onToggleCombatArts:n[2],equippedWeaponTypes:n[4]}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,s){const r={};s&1&&(r.art=i[11]),s&1&&(r.allCombatArts=i[0]),s&2&&(r.equippedCombatArts=i[1]),s&4&&(r.onToggleCombatArts=i[2]),s&16&&(r.equippedWeaponTypes=i[4]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function Pse(n){let e,t,i,s,r,o,l;t=new vc({props:{$$slots:{content:[Nse]},$$scope:{ctx:n}}});let a=n[0].fullArray,c=[];for(let f=0;f<a.length;f+=1)c[f]=Dk(Rk(n,a,f));const u=f=>Q(c[f],1,1,()=>{c[f]=null});return{c(){e=C("div"),Te(t.$$.fragment),i=F(),s=C("div"),r=F(),o=C("div");for(let f=0;f<c.length;f+=1)c[f].c();this.h()},l(f){e=k(f,"DIV",{class:!0});var h=T(e);De(t.$$.fragment,h),i=j(h),s=k(h,"DIV",{}),T(s).forEach(b),r=j(h),o=k(h,"DIV",{class:!0});var d=T(o);for(let m=0;m<c.length;m+=1)c[m].l(d);d.forEach(b),h.forEach(b),this.h()},h(){ct(s,"height","11px"),S(o,"class","content svelte-pbyt6h"),S(e,"class","container svelte-pbyt6h")},m(f,h){X(f,e,h),Oe(t,e,null),p(e,i),p(e,s),p(e,r),p(e,o);for(let d=0;d<c.length;d+=1)c[d].m(o,null);l=!0},p(f,[h]){const d={};if(h&16398&&(d.$$scope={dirty:h,ctx:f}),t.$set(d),h&23){a=f[0].fullArray;let m;for(m=0;m<a.length;m+=1){const g=Rk(f,a,m);c[m]?(c[m].p(g,h),B(c[m],1)):(c[m]=Dk(g),c[m].c(),B(c[m],1),c[m].m(o,null))}for(He(),m=a.length;m<c.length;m+=1)u(m);qe()}},i(f){if(!l){B(t.$$.fragment,f);for(let h=0;h<a.length;h+=1)B(c[h]);l=!0}},o(f){Q(t.$$.fragment,f),c=c.filter(Boolean);for(let h=0;h<c.length;h+=1)Q(c[h]);l=!1},d(f){f&&b(e),Re(t),Ht(c,f)}}}function Mse(n,e,t){let i,s,r;const{open:o}=Nn(xi.MODAL);let{allCombatArts:l}=e,{customCombatArts:a}=e,{onUpdateCustomCombatArts:c}=e,{equippedCombatArts:u}=e,{onToggleCombatArts:f}=e,{equippedWeapons:h}=e;const d=()=>u.forEach(m=>{f(m)});return n.$$set=m=>{"allCombatArts"in m&&t(0,l=m.allCombatArts),"customCombatArts"in m&&t(5,a=m.customCombatArts),"onUpdateCustomCombatArts"in m&&t(6,c=m.onUpdateCustomCombatArts),"equippedCombatArts"in m&&t(1,u=m.equippedCombatArts),"onToggleCombatArts"in m&&t(2,f=m.onToggleCombatArts),"equippedWeapons"in m&&t(7,h=m.equippedWeapons)},n.$$.update=()=>{n.$$.dirty&128&&t(4,i=new Set(h.map(m=>{var g;return(g=nr[m])==null?void 0:g.type}))),n.$$.dirty&1&&t(8,s=Object.values(ft).filter(m=>!l.fullSet.has(m))),n.$$.dirty&352&&t(3,r=()=>{o(Cu,{pickOne:[{type:mn.CombatArt,options:s}],reason:"Manually adding in combat arts section",customCombatArts:a,onUpdateCustomCombatArts:m=>c({...a,...m})})})},[l,u,f,r,i,a,c,h,s,d]}class Bse extends rt{constructor(e){super(),ot(this,e,Mse,Pse,It,{allCombatArts:0,customCombatArts:5,onUpdateCustomCombatArts:6,equippedCombatArts:1,onToggleCombatArts:2,equippedWeapons:7})}}function Nk(n){var c,u;let e,t,i,s=((c=n[1])==null?void 0:c.description)+"",r,o,l,a=((u=n[1])==null?void 0:u.reason)&&Pk(n);return{c(){e=C("div"),a&&a.c(),t=F(),i=C("div"),r=z(s),this.h()},l(f){e=k(f,"DIV",{class:!0});var h=T(e);a&&a.l(h),t=j(h),i=k(h,"DIV",{});var d=T(i);r=G(d,s),d.forEach(b),h.forEach(b),this.h()},h(){S(e,"class","description svelte-1fase9x")},m(f,h){X(f,e,h),a&&a.m(e,null),p(e,t),p(e,i),p(i,r),o||(l=Se(e,"click",n[9]),o=!0)},p(f,h){var d,m;(d=f[1])!=null&&d.reason?a?a.p(f,h):(a=Pk(f),a.c(),a.m(e,t)):a&&(a.d(1),a=null),h&2&&s!==(s=((m=f[1])==null?void 0:m.description)+"")&&Be(r,s)},d(f){f&&b(e),a&&a.d(),o=!1,l()}}}function Pk(n){let e,t=n[1].reason+"",i,s,r;return{c(){e=C("div"),i=z(t),s=F(),r=C("br"),this.h()},l(o){e=k(o,"DIV",{class:!0});var l=T(e);i=G(l,t),l.forEach(b),s=j(o),r=k(o,"BR",{}),this.h()},h(){S(e,"class","reason svelte-1fase9x")},m(o,l){X(o,e,l),p(e,i),X(o,s,l),X(o,r,l)},p(o,l){l&2&&t!==(t=o[1].reason+"")&&Be(i,t)},d(o){o&&b(e),o&&b(s),o&&b(r)}}}function Lse(n){var v;let e,t,i,s=((v=n[1])==null?void 0:v.label)+"",r,o,l,a,c,u,f,h,d,m,g;f=new Tm({props:{isEquipped:n[2],onClick:n[8],isVisible:n[4]<go||n[2]}});let _=!n[5]&&Nk(n);return{c(){e=C("div"),t=C("div"),i=C("div"),r=z(s),o=F(),l=C("div"),a=z("v"),u=F(),Te(f.$$.fragment),h=F(),_&&_.c(),this.h()},l(y){e=k(y,"DIV",{class:!0});var E=T(e);t=k(E,"DIV",{class:!0});var w=T(t);i=k(w,"DIV",{class:!0});var A=T(i);r=G(A,s),A.forEach(b),o=j(w),l=k(w,"DIV",{class:!0});var I=T(l);a=G(I,"v"),I.forEach(b),u=j(w),De(f.$$.fragment,w),w.forEach(b),h=j(E),_&&_.l(E),E.forEach(b),this.h()},h(){S(i,"class","label svelte-1fase9x"),S(l,"class",c=xe(`caret ${n[5]?"flip":""}`)+" svelte-1fase9x"),S(t,"class","skill-container svelte-1fase9x"),S(e,"class","container svelte-1fase9x")},m(y,E){X(y,e,E),p(e,t),p(t,i),p(i,r),p(t,o),p(t,l),p(l,a),p(t,u),Oe(f,t,null),p(e,h),_&&_.m(e,null),d=!0,m||(g=[Se(i,"click",n[6]),Se(l,"click",n[7])],m=!0)},p(y,[E]){var A;(!d||E&2)&&s!==(s=((A=y[1])==null?void 0:A.label)+"")&&Be(r,s),(!d||E&32&&c!==(c=xe(`caret ${y[5]?"flip":""}`)+" svelte-1fase9x"))&&S(l,"class",c);const w={};E&4&&(w.isEquipped=y[2]),E&9&&(w.onClick=y[8]),E&20&&(w.isVisible=y[4]<go||y[2]),f.$set(w),y[5]?_&&(_.d(1),_=null):_?_.p(y,E):(_=Nk(y),_.c(),_.m(e,null))},i(y){d||(B(f.$$.fragment,y),d=!0)},o(y){Q(f.$$.fragment,y),d=!1},d(y){y&&b(e),Re(f),_&&_.d(),m=!1,an(g)}}}function Wse(n,e,t){let{skill:i}=e,{feature:s}=e,{isEquipped:r}=e,{onToggleCombatSkill:o}=e,{numEquipped:l}=e,a=!0;const c=()=>t(5,a=!a),u=()=>t(5,a=!a),f=()=>o(i),h=()=>t(5,a=!0);return n.$$set=d=>{"skill"in d&&t(0,i=d.skill),"feature"in d&&t(1,s=d.feature),"isEquipped"in d&&t(2,r=d.isEquipped),"onToggleCombatSkill"in d&&t(3,o=d.onToggleCombatSkill),"numEquipped"in d&&t(4,l=d.numEquipped)},[i,s,r,o,l,a,c,u,f,h]}class Use extends rt{constructor(e){super(),ot(this,e,Wse,Lse,It,{skill:0,feature:1,isEquipped:2,onToggleCombatSkill:3,numEquipped:4})}}function Mk(n,e,t){const i=n.slice();return i[11]=e[t],i}function Vse(n){let e,t,i=n[0].length+"",s,r,o,l,a,c;return{c(){e=C("span"),t=z("("),s=z(i),r=z("/"),o=z(go),l=z(")")},l(u){e=k(u,"SPAN",{});var f=T(e);t=G(f,"("),s=G(f,i),r=G(f,"/"),o=G(f,go),l=G(f,")"),f.forEach(b)},m(u,f){X(u,e,f),p(e,t),p(e,s),p(e,r),p(e,o),p(e,l),a||(c=Se(e,"click",n[9]),a=!0)},p(u,f){f&1&&i!==(i=u[0].length+"")&&Be(s,i)},d(u){u&&b(e),a=!1,c()}}}function Fse(n){let e,t;return{c(){e=C("div"),t=z("Click to Clear All"),this.h()},l(i){e=k(i,"DIV",{slot:!0});var s=T(e);t=G(s,"Click to Clear All"),s.forEach(b),this.h()},h(){S(e,"slot","t")},m(i,s){X(i,e,s),p(e,t)},p:Xe,d(i){i&&b(e)}}}function jse(n){let e,t,i,s,r,o,l,a,c,u,f,h;return o=new fi({props:{tooltipStyle:is.BOTTOM_CENTER,$$slots:{t:[Fse],default:[Vse]},$$scope:{ctx:n}}}),{c(){e=C("div"),t=C("div"),i=C("span"),s=z("Combat Skills"),r=F(),Te(o.$$.fragment),l=F(),a=C("button"),c=z("+"),this.h()},l(d){e=k(d,"DIV",{slot:!0,class:!0});var m=T(e);t=k(m,"DIV",{});var g=T(t);i=k(g,"SPAN",{});var _=T(i);s=G(_,"Combat Skills"),_.forEach(b),r=j(g),De(o.$$.fragment,g),g.forEach(b),l=j(m),a=k(m,"BUTTON",{class:!0});var v=T(a);c=G(v,"+"),v.forEach(b),m.forEach(b),this.h()},h(){S(a,"class","svelte-1sd84cd"),S(e,"slot","content"),S(e,"class","header svelte-1sd84cd")},m(d,m){X(d,e,m),p(e,t),p(t,i),p(i,s),p(t,r),Oe(o,t,null),p(e,l),p(e,a),p(a,c),u=!0,f||(h=Se(a,"click",function(){Bn(n[2])&&n[2].apply(this,arguments)}),f=!0)},p(d,m){n=d;const g={};m&16387&&(g.$$scope={dirty:m,ctx:n}),o.$set(g)},i(d){u||(B(o.$$.fragment,d),u=!0)},o(d){Q(o.$$.fragment,d),u=!1},d(d){d&&b(e),Re(o),f=!1,h()}}}function Bk(n){let e,t;return e=new Use({props:{skill:n[11],feature:n[3][n[11]],isEquipped:n[0].indexOf(n[11])!==-1,onToggleCombatSkill:n[1],numEquipped:n[0].length}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,s){const r={};s&16&&(r.skill=i[11]),s&24&&(r.feature=i[3][i[11]]),s&17&&(r.isEquipped=i[0].indexOf(i[11])!==-1),s&2&&(r.onToggleCombatSkill=i[1]),s&1&&(r.numEquipped=i[0].length),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function Hse(n){let e,t,i,s,r,o,l;t=new vc({props:{$$slots:{content:[jse]},$$scope:{ctx:n}}});let a=n[4],c=[];for(let f=0;f<a.length;f+=1)c[f]=Bk(Mk(n,a,f));const u=f=>Q(c[f],1,1,()=>{c[f]=null});return{c(){e=C("div"),Te(t.$$.fragment),i=F(),s=C("div"),r=F(),o=C("div");for(let f=0;f<c.length;f+=1)c[f].c();this.h()},l(f){e=k(f,"DIV",{class:!0});var h=T(e);De(t.$$.fragment,h),i=j(h),s=k(h,"DIV",{}),T(s).forEach(b),r=j(h),o=k(h,"DIV",{class:!0});var d=T(o);for(let m=0;m<c.length;m+=1)c[m].l(d);d.forEach(b),h.forEach(b),this.h()},h(){ct(s,"height","11px"),S(o,"class","content svelte-1sd84cd"),S(e,"class","container svelte-1sd84cd")},m(f,h){X(f,e,h),Oe(t,e,null),p(e,i),p(e,s),p(e,r),p(e,o);for(let d=0;d<c.length;d+=1)c[d].m(o,null);l=!0},p(f,[h]){const d={};if(h&16391&&(d.$$scope={dirty:h,ctx:f}),t.$set(d),h&27){a=f[4];let m;for(m=0;m<a.length;m+=1){const g=Mk(f,a,m);c[m]?(c[m].p(g,h),B(c[m],1)):(c[m]=Bk(g),c[m].c(),B(c[m],1),c[m].m(o,null))}for(He(),m=a.length;m<c.length;m+=1)u(m);qe()}},i(f){if(!l){B(t.$$.fragment,f);for(let h=0;h<a.length;h+=1)B(c[h]);l=!0}},o(f){Q(t.$$.fragment,f),c=c.filter(Boolean);for(let h=0;h<c.length;h+=1)Q(c[h]);l=!1},d(f){f&&b(e),Re(t),Ht(c,f)}}}function qse(n,e,t){let i,s,r,o;const{open:l}=Nn(xi.MODAL);let{allCombatSkills:a}=e,{equippedCombatSkills:c}=e,{onToggleCombatSkill:u}=e,{customCombatSkills:f}=e,{onUpdateCustomCombatSkills:h}=e;const d=()=>c.forEach(m=>{u(m)});return n.$$set=m=>{"allCombatSkills"in m&&t(5,a=m.allCombatSkills),"equippedCombatSkills"in m&&t(0,c=m.equippedCombatSkills),"onToggleCombatSkill"in m&&t(1,u=m.onToggleCombatSkill),"customCombatSkills"in m&&t(6,f=m.customCombatSkills),"onUpdateCustomCombatSkills"in m&&t(7,h=m.onUpdateCustomCombatSkills)},n.$$.update=()=>{n.$$.dirty&32&&t(4,i=a.fullArray),n.$$.dirty&32&&t(3,s=a.fullFeatures),n.$$.dirty&32&&t(8,r=Object.values(We).filter(m=>!a.fullSet.has(m))),n.$$.dirty&448&&t(2,o=()=>{l(Cu,{pickOne:[{type:mn.CombatSkill,options:r}],reason:"Manually adding in combat skills section",customCombatSkills:f,onUpdateCustomCombatSkills:m=>h({...f,...m})})})},[c,u,o,s,i,a,f,h,r,d]}class zse extends rt{constructor(e){super(),ot(this,e,qse,Hse,It,{allCombatSkills:5,equippedCombatSkills:0,onToggleCombatSkill:1,customCombatSkills:6,onUpdateCustomCombatSkills:7})}}function Lk(n){let e,t;return e=new fi({props:{tooltipStyle:is.CENTER,hiddenFirst:!0,$$slots:{t:[Kse],default:[Gse]},$$scope:{ctx:n}}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,s){const r={};s[0]&15|s[1]&1024&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function Gse(n){let e,t,i;return{c(){e=C("div"),t=C("span"),i=z("!"),this.h()},l(s){e=k(s,"DIV",{class:!0});var r=T(e);t=k(r,"SPAN",{class:!0});var o=T(t);i=G(o,"!"),o.forEach(b),r.forEach(b),this.h()},h(){S(t,"class","warning svelte-1yghy27"),S(e,"class","warning-container svelte-1yghy27")},m(s,r){X(s,e,r),p(e,t),p(t,i)},p:Xe,d(s){s&&b(e)}}}function Wk(n){let e,t;return{c(){e=C("u"),t=z("No Equipped Class")},l(i){e=k(i,"U",{});var s=T(e);t=G(s,"No Equipped Class"),s.forEach(b)},m(i,s){X(i,e,s),p(e,t)},d(i){i&&b(e)}}}function Uk(n){let e,t;return{c(){e=C("u"),t=z("Max Weapons not Equipped")},l(i){e=k(i,"U",{});var s=T(e);t=G(s,"Max Weapons not Equipped"),s.forEach(b)},m(i,s){X(i,e,s),p(e,t)},d(i){i&&b(e)}}}function Vk(n){let e,t;return{c(){e=C("u"),t=z("Max Combat Skills not Equipped")},l(i){e=k(i,"U",{});var s=T(e);t=G(s,"Max Combat Skills not Equipped"),s.forEach(b)},m(i,s){X(i,e,s),p(e,t)},d(i){i&&b(e)}}}function Fk(n){let e,t;return{c(){e=C("u"),t=z("Max Combat Arts not Equipped")},l(i){e=k(i,"U",{});var s=T(e);t=G(s,"Max Combat Arts not Equipped"),s.forEach(b)},m(i,s){X(i,e,s),p(e,t)},d(i){i&&b(e)}}}function Kse(n){var c,u,f;let e,t,i,s,r=!n[2]&&Wk(),o=((c=n[0])==null?void 0:c.length)!==Vl&&Uk(),l=((u=n[3])==null?void 0:u.length)!==go&&Vk(),a=((f=n[1])==null?void 0:f.length)!==po&&Fk();return{c(){e=C("div"),r&&r.c(),t=F(),o&&o.c(),i=F(),l&&l.c(),s=F(),a&&a.c(),this.h()},l(h){e=k(h,"DIV",{slot:!0,class:!0});var d=T(e);r&&r.l(d),t=j(d),o&&o.l(d),i=j(d),l&&l.l(d),s=j(d),a&&a.l(d),d.forEach(b),this.h()},h(){S(e,"slot","t"),S(e,"class","warning-tooltip svelte-1yghy27")},m(h,d){X(h,e,d),r&&r.m(e,null),p(e,t),o&&o.m(e,null),p(e,i),l&&l.m(e,null),p(e,s),a&&a.m(e,null)},p(h,d){var m,g,_;h[2]?r&&(r.d(1),r=null):r||(r=Wk(),r.c(),r.m(e,t)),((m=h[0])==null?void 0:m.length)!==Vl?o||(o=Uk(),o.c(),o.m(e,i)):o&&(o.d(1),o=null),((g=h[3])==null?void 0:g.length)!==go?l||(l=Vk(),l.c(),l.m(e,s)):l&&(l.d(1),l=null),((_=h[1])==null?void 0:_.length)!==po?a||(a=Fk(),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},d(h){h&&b(e),r&&r.d(),o&&o.d(),l&&l.d(),a&&a.d()}}}function Xse(n){let e,t,i,s,r,o,l,a,c,u,f,h;return{c(){e=C("div"),t=C("span"),i=z(n[32]),s=z(" +"),r=F(),o=C("div"),l=C("div"),a=z("Terrain"),c=F(),u=C("input"),this.h()},l(d){e=k(d,"DIV",{class:!0});var m=T(e);t=k(m,"SPAN",{class:!0});var g=T(t);i=G(g,n[32]),s=G(g," +"),g.forEach(b),r=j(m),o=k(m,"DIV",{class:!0});var _=T(o);l=k(_,"DIV",{});var v=T(l);a=G(v,"Terrain"),v.forEach(b),c=j(_),u=k(_,"INPUT",{type:!0,class:!0}),_.forEach(b),m.forEach(b),this.h()},h(){S(t,"class","big-text svelte-1yghy27"),S(u,"type","number"),u.value=n[4],S(u,"class","svelte-1yghy27"),S(o,"class","terrain-container svelte-1yghy27"),S(e,"class","ac-value svelte-1yghy27")},m(d,m){X(d,e,m),p(e,t),p(t,i),p(t,s),p(e,r),p(e,o),p(o,l),p(l,a),p(o,c),p(o,u),f||(h=Se(u,"input",n[33]),f=!0)},p(d,m){m[1]&2&&Be(i,d[32]),m[0]&16&&u.value!==d[4]&&(u.value=d[4])},d(d){d&&b(e),f=!1,h()}}}function Qse(n){let e,t=`AC = ${Zg} + ${n[8]} (dex modifier) + ${n[26]} (class bonus) + ${n[23]} (combat skill bonus) + ${n[24]} (selected weapon) + ${n[25]} (weapon bonus) + ${n[4]}(terrain mod)`,i;return{c(){e=C("div"),i=z(t),this.h()},l(s){e=k(s,"DIV",{slot:!0,class:!0});var r=T(e);i=G(r,t),r.forEach(b),this.h()},h(){S(e,"slot","t"),S(e,"class","tooltip svelte-1yghy27")},m(s,r){X(s,e,r),p(e,i)},p(s,r){r[0]&125829392&&t!==(t=`AC = ${Zg} + ${s[8]} (dex modifier) + ${s[26]} (class bonus) + ${s[23]} (combat skill bonus) + ${s[24]} (selected weapon) + ${s[25]} (weapon bonus) + ${s[4]}(terrain mod)`)&&Be(i,t)},d(s){s&&b(e)}}}function Yse(n){let e,t;return{c(){e=C("div"),t=z(n[31]),this.h()},l(i){e=k(i,"DIV",{class:!0});var s=T(e);t=G(s,n[31]),s.forEach(b),this.h()},h(){S(e,"class","big-text skinny svelte-1yghy27")},m(i,s){X(i,e,s),p(e,t)},p(i,s){s[1]&1&&Be(t,i[31])},d(i){i&&b(e)}}}function Jse(n){let e,t=`Move Speed = ${xg} + ${n[22]} (from class) + ${n[21]} (from combat skills)`,i;return{c(){e=C("div"),i=z(t),this.h()},l(s){e=k(s,"DIV",{slot:!0,class:!0});var r=T(e);i=G(r,t),r.forEach(b),this.h()},h(){S(e,"slot","t"),S(e,"class","skinny-tooltip svelte-1yghy27")},m(s,r){X(s,e,r),p(e,i)},p(s,r){r[0]&6291456&&t!==(t=`Move Speed = ${xg} + ${s[22]} (from class) + ${s[21]} (from combat skills)`)&&Be(i,t)},d(s){s&&b(e)}}}function Zse(n){let e,t;return{c(){e=C("div"),t=z(n[30]),this.h()},l(i){e=k(i,"DIV",{class:!0});var s=T(e);t=G(s,n[30]),s.forEach(b),this.h()},h(){S(e,"class","big-text skinny svelte-1yghy27"),ct(e,"flex","0")},m(i,s){X(i,e,s),p(e,t)},p(i,s){s[0]&1073741824&&Be(t,i[30])},d(i){i&&b(e)}}}function xse(n){let e,t=`HP Max = ${$g} + ${n[20]} (from unlocked classes) + ${n[19]} (from unlocking an intermediate class) + ${n[18]} (from combat skills) + ${n[17]} (CON modifier * 2)`,i;return{c(){e=C("div"),i=z(t),this.h()},l(s){e=k(s,"DIV",{slot:!0,class:!0});var r=T(e);i=G(r,t),r.forEach(b),this.h()},h(){S(e,"slot","t"),S(e,"class","skinny-tooltip svelte-1yghy27")},m(s,r){X(s,e,r),p(e,i)},p(s,r){r[0]&1966080&&t!==(t=`HP Max = ${$g} + ${s[20]} (from unlocked classes) + ${s[19]} (from unlocking an intermediate class) + ${s[18]} (from combat skills) + ${s[17]} (CON modifier * 2)`)&&Be(i,t)},d(s){s&&b(e)}}}function $se(n){let e,t;return{c(){e=C("div"),t=z(n[27]),this.h()},l(i){e=k(i,"DIV",{class:!0});var s=T(e);t=G(s,n[27]),s.forEach(b),this.h()},h(){S(e,"class","big-text svelte-1yghy27")},m(i,s){X(i,e,s),p(e,t)},p(i,s){s[0]&134217728&&Be(t,i[27])},d(i){i&&b(e)}}}function ere(n){let e,t=`Attack Speed = ${n[8]} (dex modifier) + ${n[7]} (selected weapon) + ${n[6]} (skills) + ${n[5]} (equipped class)`,i;return{c(){e=C("div"),i=z(t),this.h()},l(s){e=k(s,"DIV",{slot:!0,class:!0});var r=T(e);i=G(r,t),r.forEach(b),this.h()},h(){S(e,"slot","t"),S(e,"class","svelte-1yghy27")},m(s,r){X(s,e,r),p(e,i)},p(s,r){r[0]&480&&t!==(t=`Attack Speed = ${s[8]} (dex modifier) + ${s[7]} (selected weapon) + ${s[6]} (skills) + ${s[5]} (equipped class)`)&&Be(i,t)},d(s){s&&b(e)}}}function tre(n){let e,t;return{c(){e=C("div"),t=z(n[29]),this.h()},l(i){e=k(i,"DIV",{class:!0});var s=T(e);t=G(s,n[29]),s.forEach(b),this.h()},h(){S(e,"class","big-text svelte-1yghy27")},m(i,s){X(i,e,s),p(e,t)},p(i,s){s[0]&536870912&&Be(t,i[29])},d(i){i&&b(e)}}}function nre(n){let e,t=`Protection = ${e1} + ${n[16]} (from unlocked classes) + ${n[15]} (from unlocking an intermediate martial class) + ${n[14]} (from equipped class) + ${n[13]} (from skills)`,i;return{c(){e=C("div"),i=z(t),this.h()},l(s){e=k(s,"DIV",{slot:!0,class:!0});var r=T(e);i=G(r,t),r.forEach(b),this.h()},h(){S(e,"slot","t"),S(e,"class","svelte-1yghy27")},m(s,r){X(s,e,r),p(e,i)},p(s,r){r[0]&122880&&t!==(t=`Protection = ${e1} + ${s[16]} (from unlocked classes) + ${s[15]} (from unlocking an intermediate martial class) + ${s[14]} (from equipped class) + ${s[13]} (from skills)`)&&Be(i,t)},d(s){s&&b(e)}}}function ire(n){let e,t;return{c(){e=C("div"),t=z(n[28]),this.h()},l(i){e=k(i,"DIV",{class:!0});var s=T(e);t=G(s,n[28]),s.forEach(b),this.h()},h(){S(e,"class","big-text svelte-1yghy27")},m(i,s){X(i,e,s),p(e,t)},p(i,s){s[0]&268435456&&Be(t,i[28])},d(i){i&&b(e)}}}function sre(n){let e,t=`Resilience = ${t1} + ${n[12]} (from unlocked classes) + ${n[11]} (from unlocking an intermediate magic class) ${os(n[10])} (from equipped class) + ${n[9]} (from skills)`,i;return{c(){e=C("div"),i=z(t),this.h()},l(s){e=k(s,"DIV",{slot:!0,class:!0});var r=T(e);i=G(r,t),r.forEach(b),this.h()},h(){S(e,"slot","t"),S(e,"class","svelte-1yghy27")},m(s,r){X(s,e,r),p(e,i)},p(s,r){r[0]&7680&&t!==(t=`Resilience = ${t1} + ${s[12]} (from unlocked classes) + ${s[11]} (from unlocking an intermediate magic class) ${os(s[10])} (from equipped class) + ${s[9]} (from skills)`)&&Be(i,t)},d(s){s&&b(e)}}}function rre(n){var Z,V,ce;let e,t,i,s,r,o,l,a,c,u,f,h,d,m,g,_,v,y,E,w,A,I,R,D,N,W,H,P,Y,O,L,U,K,te,q,x=(!n[2]||((Z=n[0])==null?void 0:Z.length)!==Vl||((V=n[3])==null?void 0:V.length)!==go||((ce=n[1])==null?void 0:ce.length)!==po)&&Lk(n);return D=new fi({props:{tooltipStyle:is.CENTER,$$slots:{t:[Qse],default:[Xse]},$$scope:{ctx:n}}}),W=new fi({props:{tooltipStyle:is.CENTER,$$slots:{t:[Jse],default:[Yse]},$$scope:{ctx:n}}}),P=new fi({props:{tooltipStyle:is.LEFT_END,$$slots:{t:[xse],default:[Zse]},$$scope:{ctx:n}}}),O=new fi({props:{tooltipStyle:is.LEFT_END,$$slots:{t:[ere],default:[$se]},$$scope:{ctx:n}}}),U=new fi({props:{tooltipStyle:is.LEFT_END,$$slots:{t:[nre],default:[tre]},$$scope:{ctx:n}}}),te=new fi({props:{tooltipStyle:is.LEFT_END,hiddenFirst:!0,$$slots:{t:[sre],default:[ire]},$$scope:{ctx:n}}}),{c(){e=C("div"),t=C("span"),i=F(),s=C("span"),r=z("AC"),o=F(),l=C("span"),a=z("MS"),c=F(),u=C("span"),f=z("HP Max"),h=F(),d=C("span"),m=z("AS"),g=F(),_=C("span"),v=z("Prt"),y=F(),E=C("span"),w=z("Res"),A=F(),I=C("div"),x&&x.c(),R=F(),Te(D.$$.fragment),N=F(),Te(W.$$.fragment),H=F(),Te(P.$$.fragment),Y=F(),Te(O.$$.fragment),L=F(),Te(U.$$.fragment),K=F(),Te(te.$$.fragment),this.h()},l(pe){e=k(pe,"DIV",{class:!0});var oe=T(e);t=k(oe,"SPAN",{class:!0}),T(t).forEach(b),i=j(oe),s=k(oe,"SPAN",{class:!0});var ve=T(s);r=G(ve,"AC"),ve.forEach(b),o=j(oe),l=k(oe,"SPAN",{class:!0});var Ne=T(l);a=G(Ne,"MS"),Ne.forEach(b),c=j(oe),u=k(oe,"SPAN",{class:!0});var J=T(u);f=G(J,"HP Max"),J.forEach(b),h=j(oe),d=k(oe,"SPAN",{class:!0});var Ie=T(d);m=G(Ie,"AS"),Ie.forEach(b),g=j(oe),_=k(oe,"SPAN",{class:!0});var Ue=T(_);v=G(Ue,"Prt"),Ue.forEach(b),y=j(oe),E=k(oe,"SPAN",{class:!0});var re=T(E);w=G(re,"Res"),re.forEach(b),A=j(oe),I=k(oe,"DIV",{class:!0});var Le=T(I);x&&x.l(Le),Le.forEach(b),R=j(oe),De(D.$$.fragment,oe),N=j(oe),De(W.$$.fragment,oe),H=j(oe),De(P.$$.fragment,oe),Y=j(oe),De(O.$$.fragment,oe),L=j(oe),De(U.$$.fragment,oe),K=j(oe),De(te.$$.fragment,oe),oe.forEach(b),this.h()},h(){S(t,"class","label svelte-1yghy27"),ct(t,"border-left-width","0"),S(s,"class","label svelte-1yghy27"),S(l,"class","label svelte-1yghy27"),S(u,"class","label svelte-1yghy27"),S(d,"class","label svelte-1yghy27"),S(_,"class","label svelte-1yghy27"),S(E,"class","label svelte-1yghy27"),ct(E,"border-right-width","0"),S(I,"class","svelte-1yghy27"),ct(I,"border-left-width","0"),S(e,"class","container svelte-1yghy27")},m(pe,oe){X(pe,e,oe),p(e,t),p(e,i),p(e,s),p(s,r),p(e,o),p(e,l),p(l,a),p(e,c),p(e,u),p(u,f),p(e,h),p(e,d),p(d,m),p(e,g),p(e,_),p(_,v),p(e,y),p(e,E),p(E,w),p(e,A),p(e,I),x&&x.m(I,null),p(e,R),Oe(D,e,null),p(e,N),Oe(W,e,null),p(e,H),Oe(P,e,null),p(e,Y),Oe(O,e,null),p(e,L),Oe(U,e,null),p(e,K),Oe(te,e,null),q=!0},p(pe,oe){var Le,fe,M;!pe[2]||((Le=pe[0])==null?void 0:Le.length)!==Vl||((fe=pe[3])==null?void 0:fe.length)!==go||((M=pe[1])==null?void 0:M.length)!==po?x?(x.p(pe,oe),oe[0]&15&&B(x,1)):(x=Lk(pe),x.c(),B(x,1),x.m(I,null)):x&&(He(),Q(x,1,1,()=>{x=null}),qe());const ve={};oe[0]&125829392|oe[1]&1026&&(ve.$$scope={dirty:oe,ctx:pe}),D.$set(ve);const Ne={};oe[0]&6291456|oe[1]&1025&&(Ne.$$scope={dirty:oe,ctx:pe}),W.$set(Ne);const J={};oe[0]&1075707904|oe[1]&1024&&(J.$$scope={dirty:oe,ctx:pe}),P.$set(J);const Ie={};oe[0]&134218208|oe[1]&1024&&(Ie.$$scope={dirty:oe,ctx:pe}),O.$set(Ie);const Ue={};oe[0]&536993792|oe[1]&1024&&(Ue.$$scope={dirty:oe,ctx:pe}),U.$set(Ue);const re={};oe[0]&268443136|oe[1]&1024&&(re.$$scope={dirty:oe,ctx:pe}),te.$set(re)},i(pe){q||(B(x),B(D.$$.fragment,pe),B(W.$$.fragment,pe),B(P.$$.fragment,pe),B(O.$$.fragment,pe),B(U.$$.fragment,pe),B(te.$$.fragment,pe),q=!0)},o(pe){Q(x),Q(D.$$.fragment,pe),Q(W.$$.fragment,pe),Q(P.$$.fragment,pe),Q(O.$$.fragment,pe),Q(U.$$.fragment,pe),Q(te.$$.fragment,pe),q=!1},d(pe){pe&&b(e),x&&x.d(),Re(D),Re(W),Re(P),Re(O),Re(U),Re(te)}}}function ore(n,e,t){let i,s,r,o,l,a,c,u,f,h,d,m,g,_,v,y,E,w,A,I,R,D,N,W,H,P,Y,O,L,U,{stats:K}=e,{equippedWeapons:te}=e,{equippedCombatArts:q}=e,{unlockedClasses:x}=e,{equippedClass:Z}=e,{equippedCombatSkills:V}=e,{allWeapons:ce}=e,{allCombatSkills:pe}=e,{selectedWeapon:oe}=e,ve=0;const Ne=J=>{const Ie=parseInt(J.currentTarget.value);isNaN(Ie)?t(4,ve=0):t(4,ve=Ie)};return n.$$set=J=>{"stats"in J&&t(34,K=J.stats),"equippedWeapons"in J&&t(0,te=J.equippedWeapons),"equippedCombatArts"in J&&t(1,q=J.equippedCombatArts),"unlockedClasses"in J&&t(35,x=J.unlockedClasses),"equippedClass"in J&&t(2,Z=J.equippedClass),"equippedCombatSkills"in J&&t(3,V=J.equippedCombatSkills),"allWeapons"in J&&t(36,ce=J.allWeapons),"allCombatSkills"in J&&t(37,pe=J.allCombatSkills),"selectedWeapon"in J&&t(38,oe=J.selectedWeapon)},n.$$.update=()=>{var J,Ie,Ue,re,Le,fe,M,ae,de,$,ee;n.$$.dirty[1]&8&&t(8,i=er(K[Ke.DEX])),n.$$.dirty[1]&32&&t(40,o=ce.fullFeatures),n.$$.dirty[1]&640&&t(39,l=(J=o[oe])==null?void 0:J.type),n.$$.dirty[1]&640&&t(24,a=((Ie=o[oe])==null?void 0:Ie.acBonus)||0),n.$$.dirty[0]&8|n.$$.dirty[1]&256&&t(23,c=V.reduce((ie,me)=>{const ue=ys[me],{acBonusCompatibility:se,acBonus:_e}=ue||{};return _e&&(!se||se.includes(l))?ie+(ys[me].acBonus||0):ie},0)),n.$$.dirty[0]&125829392&&t(32,u=Zg+i+s+r+a+c+ve),n.$$.dirty[0]&4&&t(22,f=((re=(Ue=Xt[Z])==null?void 0:Ue.whenEquipped)==null?void 0:re.msBonus)||0),n.$$.dirty[0]&6291456&&t(31,d=xg+f+h),n.$$.dirty[1]&16&&t(20,m=x.reduce((ie,me)=>{var ue,se;return ie+(((se=(ue=Xt==null?void 0:Xt[me])==null?void 0:ue.unlocks)==null?void 0:se.hpBonus)||0)},0)),n.$$.dirty[1]&16&&t(19,g=x.reduce((ie,me)=>{var ue;return Ia.has(me)?((ue=Xt==null?void 0:Xt[me])==null?void 0:ue.canUseMagic)===!0?Math.max(ie,u7):Math.max(ie,c7):ie},0)),n.$$.dirty[0]&8&&t(18,_=V.reduce((ie,me)=>ie+(ys[me].hpBonus||0),0)),n.$$.dirty[1]&8&&t(17,v=er(K[Ke.CON])*2),n.$$.dirty[0]&1966080&&t(30,y=$g+m+g+_+v),n.$$.dirty[1]&16&&t(16,E=x.reduce((ie,me)=>{var ue,se;return ie+((se=(ue=Xt==null?void 0:Xt[me])==null?void 0:ue.unlocks)==null?void 0:se.protectionBonus)||0},0)),n.$$.dirty[1]&16&&t(15,w=x.reduce((ie,me)=>{var ue;return Ia.has(me)?(ue=Xt==null?void 0:Xt[me])!=null&&ue.canUseMagic?ie:f7:ie},0)),n.$$.dirty[0]&4&&t(14,A=((fe=(Le=Xt[Z])==null?void 0:Le.whenEquipped)==null?void 0:fe.protectionBonus)||0),n.$$.dirty[0]&8&&t(13,I=V.reduce((ie,me)=>ie+(ys[me].protectionBonus||0),0)),n.$$.dirty[0]&122880&&t(29,R=e1+E+w+A+I),n.$$.dirty[1]&16&&t(12,D=x.reduce((ie,me)=>{var ue,se;return ie+((se=(ue=Xt==null?void 0:Xt[me])==null?void 0:ue.unlocks)==null?void 0:se.protectionBonus)||0},0)),n.$$.dirty[1]&16&&t(11,N=x.reduce((ie,me)=>{var ue;return Ia.has(me)&&(ue=Xt==null?void 0:Xt[me])!=null&&ue.canUseMagic?h7:ie},0)),n.$$.dirty[0]&4&&t(10,W=((ae=(M=Xt[Z])==null?void 0:M.whenEquipped)==null?void 0:ae.resilienceBonus)||0),n.$$.dirty[0]&8&&t(9,H=V.reduce((ie,me)=>ie+(ys[me].resilienceBonus||0),0)),n.$$.dirty[0]&7680&&t(28,P=t1+D+N+W+H),n.$$.dirty[0]&4&&t(5,Y=(($=(de=Xt[Z])==null?void 0:de.whenEquipped)==null?void 0:$.followUpBonus)||0),n.$$.dirty[1]&160&&t(7,O=((ee=ce.fullFeatures[oe])==null?void 0:ee.followUpBonus)||0),n.$$.dirty[1]&64&&t(6,L=pe.fullArray.reduce((ie,me)=>ie+(pe.fullFeatures[me].followUpBonus||0),0)),n.$$.dirty[0]&480&&t(27,U=i+O+L+Y)},t(26,s=0),t(25,r=0),t(21,h=0),[te,q,Z,V,ve,Y,L,O,i,H,W,N,D,I,A,w,E,v,_,g,m,h,f,c,a,r,s,U,P,R,y,d,u,Ne,K,x,ce,pe,oe,l,o]}class lre extends rt{constructor(e){super(),ot(this,e,ore,rre,It,{stats:34,equippedWeapons:0,equippedCombatArts:1,unlockedClasses:35,equippedClass:2,equippedCombatSkills:3,allWeapons:36,allCombatSkills:37,selectedWeapon:38},null,[-1,-1])}}function jk(n,e,t){const i=n.slice();return i[16]=e[t],i}function are(n){let e,t;return e=new tO({props:{isUnlocked:n[0][n[3]]===zn.PROFICIENT||n[0][n[3]]===zn.AWFUL,isMastered:n[0][n[3]]===zn.EXPERT,onClick:n[13],unlockedFilter:n[0][n[3]]===zn.PROFICIENT?"sepia(100%) saturate(1000%) brightness(45%) hue-rotate(174deg)":"sepia(100%) saturate(1000%) brightness(45%) hue-rotate(287deg)"}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,s){const r={};s&9&&(r.isUnlocked=i[0][i[3]]===zn.PROFICIENT||i[0][i[3]]===zn.AWFUL),s&9&&(r.isMastered=i[0][i[3]]===zn.EXPERT),s&12&&(r.onClick=i[13]),s&9&&(r.unlockedFilter=i[0][i[3]]===zn.PROFICIENT?"sepia(100%) saturate(1000%) brightness(45%) hue-rotate(174deg)":"sepia(100%) saturate(1000%) brightness(45%) hue-rotate(287deg)"),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function cre(n){let e,t;return{c(){e=C("div"),t=z("From Master/Current Class"),this.h()},l(i){e=k(i,"DIV",{slot:!0});var s=T(e);t=G(s,"From Master/Current Class"),s.forEach(b),this.h()},h(){S(e,"slot","t")},m(i,s){X(i,e,s),p(e,t)},p:Xe,d(i){i&&b(e)}}}function Hk(n){let e,t,i,s=n[6],r=[];for(let o=0;o<s.length;o+=1)r[o]=qk(jk(n,s,o));return{c(){e=C("select");for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){e=k(o,"SELECT",{name:!0});var l=T(e);for(let a=0;a<r.length;a+=1)r[a].l(l);l.forEach(b),this.h()},h(){S(e,"name","stat-type")},m(o,l){X(o,e,l);for(let a=0;a<r.length;a+=1)r[a].m(e,null);t||(i=Se(e,"change",n[15]),t=!0)},p(o,l){if(l&96){s=o[6];let a;for(a=0;a<s.length;a+=1){const c=jk(o,s,a);r[a]?r[a].p(c,l):(r[a]=qk(c),r[a].c(),r[a].m(e,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=s.length}},d(o){o&&b(e),Ht(r,o),t=!1,i()}}}function qk(n){let e,t=Gs[n[16]]+"",i,s,r,o;return{c(){e=C("option"),i=z(t),s=F(),this.h()},l(l){e=k(l,"OPTION",{});var a=T(e);i=G(a,t),s=j(a),a.forEach(b),this.h()},h(){e.__value=r=n[16],e.value=e.__value,e.selected=o=n[5]===n[16]},m(l,a){X(l,e,a),p(e,i),p(e,s)},p(l,a){a&64&&t!==(t=Gs[l[16]]+"")&&Be(i,t),a&64&&r!==(r=l[16])&&(e.__value=r,e.value=e.__value),a&96&&o!==(o=l[5]===l[16])&&(e.selected=o)},d(l){l&&b(e)}}}function zk(n){let e,t=`(${Gs[n[5]]})`,i;return{c(){e=C("span"),i=z(t)},l(s){e=k(s,"SPAN",{});var r=T(e);i=G(r,t),r.forEach(b)},m(s,r){X(s,e,r),p(e,i)},p(s,r){r&32&&t!==(t=`(${Gs[s[5]]})`)&&Be(i,t)},d(s){s&&b(e)}}}function ure(n){let e,t,i,s,r,o,l=n[9]+n[8]+n[7]+"",a,c,u=`${td[n[3]]} `,f,h,d=Array.isArray(n[6]),m,g=!Array.isArray(n[6]),_,v,y;t=new fi({props:{disabled:n[1][n[3]]===void 0,$$slots:{t:[cre],default:[are]},$$scope:{ctx:n}}});let E=d&&Hk(n),w=g&&zk(n);return{c(){e=C("div"),Te(t.$$.fragment),i=F(),s=C("div"),r=C("span"),o=C("span"),a=z(l),c=F(),f=z(u),h=F(),E&&E.c(),m=F(),w&&w.c(),this.h()},l(A){e=k(A,"DIV",{class:!0});var I=T(e);De(t.$$.fragment,I),i=j(I),s=k(I,"DIV",{class:!0});var R=T(s);r=k(R,"SPAN",{class:!0});var D=T(r);o=k(D,"SPAN",{class:!0});var N=T(o);a=G(N,l),N.forEach(b),c=j(D),f=G(D,u),D.forEach(b),h=j(R),E&&E.l(R),m=j(R),w&&w.l(R),R.forEach(b),I.forEach(b),this.h()},h(){S(o,"class","total"),S(r,"class","label-text svelte-7dm9fu"),S(s,"class","label"),S(e,"class","container svelte-7dm9fu")},m(A,I){X(A,e,I),Oe(t,e,null),p(e,i),p(e,s),p(s,r),p(r,o),p(o,a),p(r,c),p(r,f),p(s,h),E&&E.m(s,null),p(s,m),w&&w.m(s,null),_=!0,v||(y=Se(r,"click",n[14]),v=!0)},p(A,[I]){const R={};I&10&&(R.disabled=A[1][A[3]]===void 0),I&524301&&(R.$$scope={dirty:I,ctx:A}),t.$set(R),(!_||I&896)&&l!==(l=A[9]+A[8]+A[7]+"")&&Be(a,l),(!_||I&8)&&u!==(u=`${td[A[3]]} `)&&Be(f,u),I&64&&(d=Array.isArray(A[6])),d?E?E.p(A,I):(E=Hk(A),E.c(),E.m(s,m)):E&&(E.d(1),E=null),I&64&&(g=!Array.isArray(A[6])),g?w?w.p(A,I):(w=zk(A),w.c(),w.m(s,null)):w&&(w.d(1),w=null)},i(A){_||(B(t.$$.fragment,A),_=!0)},o(A){Q(t.$$.fragment,A),_=!1},d(A){A&&b(e),Re(t),E&&E.d(),w&&w.d(),v=!1,y()}}}function fre(n,e,t){let i,s,r,o,l,{stats:a}=e,{skillProficiency:c}=e,{classProficiencies:u}=e,{skillBonus:f}=e,{onToggleSkillProficiency:h}=e,{skill:d}=e,{playerName:m}=e,g=Array.isArray(o)?o[0]:o;const _=()=>h(d),v=()=>so([st.d20],{modifier:[s+r+l],chatEntryOnRes:{playerName:m,rollName:td[d],rollBonus:Ys([s+r+l])},db:i}),y=E=>{t(5,g=E.currentTarget.value)};return n.$$set=E=>{"stats"in E&&t(11,a=E.stats),"skillProficiency"in E&&t(0,c=E.skillProficiency),"classProficiencies"in E&&t(1,u=E.classProficiencies),"skillBonus"in E&&t(12,f=E.skillBonus),"onToggleSkillProficiency"in E&&t(2,h=E.onToggleSkillProficiency),"skill"in E&&t(3,d=E.skill),"playerName"in E&&t(4,m=E.playerName)},n.$$.update=()=>{n.$$.dirty&4104&&t(9,s=f[d]||0),n.$$.dirty&9&&t(8,r=c[d]!==zn.NONE&&c[d]!==void 0?Z4*(c[d]||1):0),n.$$.dirty&8&&t(6,o=NL[d]),n.$$.dirty&64&&t(5,g=Array.isArray(o)?o[0]:o),n.$$.dirty&2080&&t(7,l=er(a[g]))},t(10,i=Nn(xi.DB)),[c,u,h,d,m,g,o,l,r,s,i,a,f,_,v,y]}class hre extends rt{constructor(e){super(),ot(this,e,fre,ure,It,{stats:11,skillProficiency:0,classProficiencies:1,skillBonus:12,onToggleSkillProficiency:2,skill:3,playerName:4})}}function Gk(n,e,t){const i=n.slice();return i[9]=e[t],i}function Kk(n){let e,t;return e=new hre({props:{playerName:n[3],skill:n[9],stats:n[0],skillBonus:n[1],classProficiencies:n[4],skillProficiency:n[5],onToggleSkillProficiency:n[2]}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,s){const r={};s&8&&(r.playerName=i[3]),s&1&&(r.stats=i[0]),s&2&&(r.skillBonus=i[1]),s&16&&(r.classProficiencies=i[4]),s&32&&(r.skillProficiency=i[5]),s&4&&(r.onToggleSkillProficiency=i[2]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function dre(n){let e,t,i,s,r,o,l;t=new vc({props:{label:"Skills"}});let a=Object.values(on),c=[];for(let f=0;f<a.length;f+=1)c[f]=Kk(Gk(n,a,f));const u=f=>Q(c[f],1,1,()=>{c[f]=null});return{c(){e=C("div"),Te(t.$$.fragment),i=F(),s=C("div"),r=F(),o=C("div");for(let f=0;f<c.length;f+=1)c[f].c();this.h()},l(f){e=k(f,"DIV",{class:!0});var h=T(e);De(t.$$.fragment,h),i=j(h),s=k(h,"DIV",{class:!0}),T(s).forEach(b),r=j(h),o=k(h,"DIV",{class:!0});var d=T(o);for(let m=0;m<c.length;m+=1)c[m].l(d);d.forEach(b),h.forEach(b),this.h()},h(){S(s,"class","divider svelte-1bsm0kx"),S(o,"class","skills svelte-1bsm0kx"),S(e,"class","container svelte-1bsm0kx")},m(f,h){X(f,e,h),Oe(t,e,null),p(e,i),p(e,s),p(e,r),p(e,o);for(let d=0;d<c.length;d+=1)c[d].m(o,null);l=!0},p(f,[h]){if(h&63){a=Object.values(on);let d;for(d=0;d<a.length;d+=1){const m=Gk(f,a,d);c[d]?(c[d].p(m,h),B(c[d],1)):(c[d]=Kk(m),c[d].c(),B(c[d],1),c[d].m(o,null))}for(He(),d=a.length;d<c.length;d+=1)u(d);qe()}},i(f){if(!l){B(t.$$.fragment,f);for(let h=0;h<a.length;h+=1)B(c[h]);l=!0}},o(f){Q(t.$$.fragment,f),c=c.filter(Boolean);for(let h=0;h<c.length;h+=1)Q(c[h]);l=!1},d(f){f&&b(e),Re(t),Ht(c,f)}}}function mre(n,e,t){let i,s,{stats:r=kv}=e,{skillProficiency:o=x4}=e,{skillBonus:l=$4}=e,{onToggleSkillProficiency:a}=e,{equippedClass:c}=e,{masteredClasses:u}=e,{playerName:f}=e;return n.$$set=h=>{"stats"in h&&t(0,r=h.stats),"skillProficiency"in h&&t(6,o=h.skillProficiency),"skillBonus"in h&&t(1,l=h.skillBonus),"onToggleSkillProficiency"in h&&t(2,a=h.onToggleSkillProficiency),"equippedClass"in h&&t(7,c=h.equippedClass),"masteredClasses"in h&&t(8,u=h.masteredClasses),"playerName"in h&&t(3,f=h.playerName)},n.$$.update=()=>{n.$$.dirty&384&&t(4,i={...c?Xt[c].whenEquipped.playerSkills:{},...u.reduce((h,d)=>{var m;return h={...h,...(m=Xt[d].whenMastered)==null?void 0:m.playerSkills},h},{})}),n.$$.dirty&80&&t(5,s=Object.keys(i).reduce((h,d)=>(h[d]===void 0?h[d]=i[d]:h[d]=Math.max(h[d],i[d]),h),{...o}))},[r,l,a,f,i,s,o,c,u]}class pre extends rt{constructor(e){super(),ot(this,e,mre,dre,It,{stats:0,skillProficiency:6,skillBonus:1,onToggleSkillProficiency:2,equippedClass:7,masteredClasses:8,playerName:3})}}function Xk(n,e,t){const i=n.slice();return i[17]=e[t],i}function Qk(n,e,t){const i=n.slice();return i[20]=e[t],i}function Yk(n){let e,t,i=pg[n[20]]+"",s,r,o,l=er(n[0][n[20]])+"",a,c,u,f,h,d;function m(){return n[9](n[20])}function g(..._){return n[10](n[20],..._)}return{c(){e=C("div"),t=C("button"),s=z(i),r=F(),o=C("div"),a=z(l),c=F(),u=C("input"),this.h()},l(_){e=k(_,"DIV",{class:!0});var v=T(e);t=k(v,"BUTTON",{class:!0});var y=T(t);s=G(y,i),y.forEach(b),r=j(v),o=k(v,"DIV",{class:!0});var E=T(o);a=G(E,l),E.forEach(b),c=j(v),u=k(v,"INPUT",{class:!0,type:!0}),v.forEach(b),this.h()},h(){S(t,"class","label svelte-qeu3p9"),S(o,"class","mod svelte-qeu3p9"),S(u,"class","value svelte-qeu3p9"),u.value=f=typeof n[0][n[20]]=="number"?n[0][n[20]]:0,S(u,"type","number"),S(e,"class","stat-container svelte-qeu3p9")},m(_,v){X(_,e,v),p(e,t),p(t,s),p(e,r),p(e,o),p(o,a),p(e,c),p(e,u),h||(d=[Se(t,"click",m),Se(u,"input",g)],h=!0)},p(_,v){n=_,v&1&&i!==(i=pg[n[20]]+"")&&Be(s,i),v&1&&l!==(l=er(n[0][n[20]])+"")&&Be(a,l),v&1&&f!==(f=typeof n[0][n[20]]=="number"?n[0][n[20]]:0)&&u.value!==f&&(u.value=f)},d(_){_&&b(e),h=!1,an(d)}}}function Jk(n){let e,t;return e=new fi({props:{$$slots:{t:[vre],default:[gre]},$$scope:{ctx:n}}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,s){const r={};s&8388626&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function gre(n){let e,t,i,s;return{c(){e=C("div"),t=C("img"),this.h()},l(r){e=k(r,"DIV",{class:!0});var o=T(e);t=k(o,"IMG",{class:!0,src:!0,alt:!0}),o.forEach(b),this.h()},h(){var r;S(t,"class","crest-image svelte-qeu3p9"),Pl(t.src,i=n[4].image)||S(t,"src",i),S(t,"alt",s=(r=n[1])==null?void 0:r.type),ct(t,"border-color",n[1].isMajor?"slateblue":"lightskyblue"),S(e,"class","image-container")},m(r,o){X(r,e,o),p(e,t)},p(r,o){var l;o&16&&!Pl(t.src,i=r[4].image)&&S(t,"src",i),o&2&&s!==(s=(l=r[1])==null?void 0:l.type)&&S(t,"alt",s),o&2&&ct(t,"border-color",r[1].isMajor?"slateblue":"lightskyblue")},d(r){r&&b(e)}}}function vre(n){var v,y,E,w;let e,t,i,s,r=((v=n[4])==null?void 0:v.label)+"",o,l,a=Zb((y=n[1])==null?void 0:y.isMajor)+"",c,u,f=n[4].activationDC[iy((E=n[1])==null?void 0:E.isMajor)]+"",h,d,m,g=`${(w=n[4])==null?void 0:w.description}`,_;return{c(){e=C("div"),t=C("div"),i=C("u"),s=z("Crest of "),o=z(r),l=z(" ("),c=z(a),u=z(`,
							DC `),h=z(f),d=z(")"),m=F(),_=z(g),this.h()},l(A){e=k(A,"DIV",{slot:!0});var I=T(e);t=k(I,"DIV",{});var R=T(t);i=k(R,"U",{});var D=T(i);s=G(D,"Crest of "),o=G(D,r),l=G(D," ("),c=G(D,a),u=G(D,`,
							DC `),h=G(D,f),d=G(D,")"),D.forEach(b),R.forEach(b),m=j(I),_=G(I,g),I.forEach(b),this.h()},h(){S(e,"slot","t")},m(A,I){X(A,e,I),p(e,t),p(t,i),p(i,s),p(i,o),p(i,l),p(i,c),p(i,u),p(i,h),p(i,d),p(e,m),p(e,_)},p(A,I){var R,D,N,W;I&16&&r!==(r=((R=A[4])==null?void 0:R.label)+"")&&Be(o,r),I&2&&a!==(a=Zb((D=A[1])==null?void 0:D.isMajor)+"")&&Be(c,a),I&18&&f!==(f=A[4].activationDC[iy((N=A[1])==null?void 0:N.isMajor)]+"")&&Be(h,f),I&16&&g!==(g=`${(W=A[4])==null?void 0:W.description}`)&&Be(_,g)},d(A){A&&b(e)}}}function Zk(n){var o;let e,t=((o=Ns[n[17]])==null?void 0:o.label)+"",i,s,r;return{c(){e=C("option"),i=z(t),s=F(),this.h()},l(l){e=k(l,"OPTION",{});var a=T(e);i=G(a,t),s=j(a),a.forEach(b),this.h()},h(){var l;e.__value=n[17],e.value=e.__value,e.selected=r=((l=n[1])==null?void 0:l.type)===n[17]},m(l,a){X(l,e,a),p(e,i),p(e,s)},p(l,a){var c;a&2&&r!==(r=((c=l[1])==null?void 0:c.type)===l[17])&&(e.selected=r)},d(l){l&&b(e)}}}function bre(n){var Y;let e,t,i,s,r,o,l,a,c,u,f,h,d,m,g,_="Major",v,y,E="Minor",w,A,I,R;t=new vc({props:{label:"Stats"}});let D=Object.keys(n[0]),N=[];for(let O=0;O<D.length;O+=1)N[O]=Yk(Qk(n,D,O));let W=((Y=n[4])==null?void 0:Y.image)&&Jk(n),H=Object.keys(hn),P=[];for(let O=0;O<H.length;O+=1)P[O]=Zk(Xk(n,H,O));return{c(){e=C("div"),Te(t.$$.fragment),i=F();for(let O=0;O<N.length;O+=1)N[O].c();s=F(),r=C("div"),W&&W.c(),o=F(),l=C("select"),a=C("option"),c=z("Crest?");for(let O=0;O<P.length;O+=1)P[O].c();f=F(),h=C("select"),d=C("option"),m=z("Major/Minor?"),g=C("option"),v=z(_),y=C("option"),w=z(E),this.h()},l(O){e=k(O,"DIV",{class:!0});var L=T(e);De(t.$$.fragment,L),i=j(L);for(let ce=0;ce<N.length;ce+=1)N[ce].l(L);s=j(L),r=k(L,"DIV",{class:!0});var U=T(r);W&&W.l(U),o=j(U),l=k(U,"SELECT",{name:!0});var K=T(l);a=k(K,"OPTION",{});var te=T(a);c=G(te,"Crest?"),te.forEach(b);for(let ce=0;ce<P.length;ce+=1)P[ce].l(K);K.forEach(b),f=j(U),h=k(U,"SELECT",{name:!0});var q=T(h);d=k(q,"OPTION",{});var x=T(d);m=G(x,"Major/Minor?"),x.forEach(b),g=k(q,"OPTION",{});var Z=T(g);v=G(Z,_),Z.forEach(b),y=k(q,"OPTION",{});var V=T(y);w=G(V,E),V.forEach(b),q.forEach(b),U.forEach(b),L.forEach(b),this.h()},h(){a.__value="",a.value=a.__value,a.selected=u=!n[1].type,S(l,"name","crest"),d.__value="none",d.value=d.__value,g.__value=mo.MAJOR,g.value=g.__value,y.__value=mo.MINOR,y.value=y.__value,S(h,"name","major-minor"),S(r,"class","crest svelte-qeu3p9"),S(e,"class","container svelte-qeu3p9")},m(O,L){X(O,e,L),Oe(t,e,null),p(e,i);for(let U=0;U<N.length;U+=1)N[U].m(e,null);p(e,s),p(e,r),W&&W.m(r,null),p(r,o),p(r,l),p(l,a),p(a,c);for(let U=0;U<P.length;U+=1)P[U].m(l,null);p(r,f),p(r,h),p(h,d),p(d,m),p(h,g),p(g,v),p(h,y),p(y,w),n[12](h),A=!0,I||(R=[Se(l,"change",n[11]),Se(h,"change",n[13])],I=!0)},p(O,[L]){var U;if(L&97){D=Object.keys(O[0]);let K;for(K=0;K<D.length;K+=1){const te=Qk(O,D,K);N[K]?N[K].p(te,L):(N[K]=Yk(te),N[K].c(),N[K].m(e,s))}for(;K<N.length;K+=1)N[K].d(1);N.length=D.length}if((U=O[4])!=null&&U.image?W?(W.p(O,L),L&16&&B(W,1)):(W=Jk(O),W.c(),B(W,1),W.m(r,o)):W&&(He(),Q(W,1,1,()=>{W=null}),qe()),(!A||L&2&&u!==(u=!O[1].type))&&(a.selected=u),L&2){H=Object.keys(hn);let K;for(K=0;K<H.length;K+=1){const te=Xk(O,H,K);P[K]?P[K].p(te,L):(P[K]=Zk(te),P[K].c(),P[K].m(l,null))}for(;K<P.length;K+=1)P[K].d(1);P.length=H.length}},i(O){A||(B(t.$$.fragment,O),B(W),A=!0)},o(O){Q(t.$$.fragment,O),Q(W),A=!1},d(O){O&&b(e),Re(t),Ht(N,O),W&&W.d(),Ht(P,O),n[12](null),I=!1,an(R)}}}function _re(n,e,t){let i,s;Nn(xi.MODAL);let{stats:r=kv}=e,{onUpdatePlayerStats:o}=e,{playerName:l}=e,{playerCrest:a}=e,{onUpdateCrest:c}=e,u={};const f=y=>{const E=er(r[y]);so([st.d20],{modifier:[E],chatEntryOnRes:{playerName:l,rollName:pg[y],rollBonus:E},db:i})},h=(y,E)=>{o({...r,[y]:isNaN(E)?0:E})},d=y=>f(y),m=(y,E)=>h(y,parseInt(E.currentTarget.value)),g=y=>{c({type:y.currentTarget.value,isMajor:!1})};function _(y){Vt[y?"unshift":"push"](()=>{u=y,t(3,u),t(1,a)})}const v=y=>c({...a,isMajor:y.currentTarget.value==="MAJOR"});return n.$$set=y=>{"stats"in y&&t(0,r=y.stats),"onUpdatePlayerStats"in y&&t(7,o=y.onUpdatePlayerStats),"playerName"in y&&t(8,l=y.playerName),"playerCrest"in y&&t(1,a=y.playerCrest),"onUpdateCrest"in y&&t(2,c=y.onUpdateCrest)},n.$$.update=()=>{n.$$.dirty&10&&u&&t(3,u.value=a.type?a!=null&&a.isMajor?mo.MAJOR:mo.MINOR:"none",u),n.$$.dirty&2&&t(4,s=Ns[a==null?void 0:a.type]||{})},i=Nn(xi.DB),[r,a,c,u,s,f,h,o,l,d,m,g,_,v]}class yre extends rt{constructor(e){super(),ot(this,e,_re,bre,It,{stats:0,onUpdatePlayerStats:7,playerName:8,playerCrest:1,onUpdateCrest:2})}}function xk(n,e,t){const i=n.slice();return i[14]=e[t],i}function $k(n){let e,t,i,s=n[0],r=[];for(let o=0;o<s.length;o+=1)r[o]=e3(xk(n,s,o));return{c(){e=C("select");for(let o=0;o<r.length;o+=1)r[o].c()},l(o){e=k(o,"SELECT",{});var l=T(e);for(let a=0;a<r.length;a+=1)r[a].l(l);l.forEach(b)},m(o,l){X(o,e,l);for(let a=0;a<r.length;a+=1)r[a].m(e,null);t||(i=Se(e,"change",n[10]),t=!0)},p(o,l){if(l&19){s=o[0];let a;for(a=0;a<s.length;a+=1){const c=xk(o,s,a);r[a]?r[a].p(c,l):(r[a]=e3(c),r[a].c(),r[a].m(e,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=s.length}},d(o){o&&b(e),Ht(r,o),t=!1,i()}}}function e3(n){let e,t=n[1][n[14]].label+"",i,s,r=wu(n[1][n[14]])+"",o,l,a,c;return{c(){e=C("option"),i=z(t),s=z(": "),o=z(r),l=F(),this.h()},l(u){e=k(u,"OPTION",{});var f=T(e);i=G(f,t),s=G(f,": "),o=G(f,r),l=j(f),f.forEach(b),this.h()},h(){e.__value=a=n[14],e.value=e.__value,e.selected=c=n[14]===n[4]},m(u,f){X(u,e,f),p(e,i),p(e,s),p(e,o),p(e,l)},p(u,f){f&3&&t!==(t=u[1][u[14]].label+"")&&Be(i,t),f&3&&r!==(r=wu(u[1][u[14]])+"")&&Be(o,r),f&1&&a!==(a=u[14])&&(e.__value=a,e.value=e.__value),f&17&&c!==(c=u[14]===u[4])&&(e.selected=c)},d(u){u&&b(e)}}}function t3(n){let e,t,i,s,r,o,l;return{c(){e=C("div"),t=C("div"),i=z("Reason:"),s=F(),r=C("textarea"),this.h()},l(a){e=k(a,"DIV",{class:!0});var c=T(e);t=k(c,"DIV",{});var u=T(t);i=G(u,"Reason:"),u.forEach(b),s=j(c),r=k(c,"TEXTAREA",{id:!0,type:!0,rows:!0,class:!0}),T(r).forEach(b),c.forEach(b),this.h()},h(){S(r,"id","custom-weapon-prompt-input"),S(r,"type","text"),S(r,"rows",3),S(r,"class","svelte-96eo25"),S(e,"class","content")},m(a,c){X(a,e,c),p(e,t),p(t,i),p(e,s),p(e,r),n[11](r),ds(r,n[3]),o||(l=Se(r,"input",n[12]),o=!0)},p(a,c){c&8&&ds(r,a[3])},d(a){a&&b(e),n[11](null),o=!1,l()}}}function n3(n){var l;let e,t,i,s,r=((l=n[2][n[0]])==null?void 0:l.reason)+"",o;return{c(){e=C("div"),t=C("b"),i=z("Current Reason:"),s=F(),o=z(r),this.h()},l(a){e=k(a,"DIV",{class:!0});var c=T(e);t=k(c,"B",{});var u=T(t);i=G(u,"Current Reason:"),u.forEach(b),s=j(c),o=G(c,r),c.forEach(b),this.h()},h(){S(e,"class","content")},m(a,c){X(a,e,c),p(e,t),p(t,i),p(e,s),p(e,o)},p(a,c){var u;c&5&&r!==(r=((u=a[2][a[0]])==null?void 0:u.reason)+"")&&Be(o,r)},d(a){a&&b(e)}}}function Sre(n){let e,t,i=n[5]?"Removing":"Adding",s,r,o,l=Array.isArray(n[0]),a,c,u,f,h,d=n[5]?"Remove":"Submit",m,g,_,v=l&&$k(n),y=!n[5]&&t3(n),E=n[5]&&n3(n);return{c(){e=C("div"),t=C("h1"),s=z(i),r=z(" custom weapon:"),o=F(),v&&v.c(),a=F(),y&&y.c(),c=F(),E&&E.c(),u=F(),f=C("button"),h=z("Click to "),m=z(d),this.h()},l(w){e=k(w,"DIV",{class:!0});var A=T(e);t=k(A,"H1",{});var I=T(t);s=G(I,i),r=G(I," custom weapon:"),I.forEach(b),o=j(A),v&&v.l(A),a=j(A),y&&y.l(A),c=j(A),E&&E.l(A),u=j(A),f=k(A,"BUTTON",{class:!0});var R=T(f);h=G(R,"Click to "),m=G(R,d),R.forEach(b),A.forEach(b),this.h()},h(){S(f,"class","action svelte-96eo25"),S(e,"class","container svelte-96eo25")},m(w,A){X(w,e,A),p(e,t),p(t,s),p(t,r),p(e,o),v&&v.m(e,null),p(e,a),y&&y.m(e,null),p(e,c),E&&E.m(e,null),p(e,u),p(e,f),p(f,h),p(f,m),g||(_=Se(f,"click",function(){Bn(n[7])&&n[7].apply(this,arguments)}),g=!0)},p(w,[A]){n=w,A&32&&i!==(i=n[5]?"Removing":"Adding")&&Be(s,i),A&1&&(l=Array.isArray(n[0])),l?v?v.p(n,A):(v=$k(n),v.c(),v.m(e,a)):v&&(v.d(1),v=null),n[5]?y&&(y.d(1),y=null):y?y.p(n,A):(y=t3(n),y.c(),y.m(e,c)),n[5]?E?E.p(n,A):(E=n3(n),E.c(),E.m(e,u)):E&&(E.d(1),E=null),A&32&&d!==(d=n[5]?"Remove":"Submit")&&Be(m,d)},i:Xe,o:Xe,d(w){w&&b(e),v&&v.d(),y&&y.d(),E&&E.d(),g=!1,_()}}}function Ere(n,e,t){let i,s;const{close:r}=Nn(xi.MODAL);let{defaultReason:o=""}=e,{weapon:l}=e,{weaponsToFeatures:a}=e,{customWeapons:c}=e,{onUpdateCustomWeapons:u}=e,f=o,h,d=Array.isArray(l)?l[0]:l;Mi(()=>{h==null||h.select()});const m=v=>t(4,d=v.currentTarget.value);function g(v){Vt[v?"unshift":"push"](()=>{h=v,t(6,h)})}function _(){f=this.value,t(3,f)}return n.$$set=v=>{"defaultReason"in v&&t(8,o=v.defaultReason),"weapon"in v&&t(0,l=v.weapon),"weaponsToFeatures"in v&&t(1,a=v.weaponsToFeatures),"customWeapons"in v&&t(2,c=v.customWeapons),"onUpdateCustomWeapons"in v&&t(9,u=v.onUpdateCustomWeapons)},n.$$.update=()=>{n.$$.dirty&5&&t(5,i=Array.isArray(l)?!1:c[l]),n.$$.dirty&572&&t(7,s=()=>{if(i){const{[d]:v,...y}=c;u(y)}else u({...c,[d]:{...c[d],reason:f}});r()})},[l,a,c,f,d,i,h,s,o,u,m,g,_]}class i3 extends rt{constructor(e){super(),ot(this,e,Ere,Sre,It,{defaultReason:8,weapon:0,weaponsToFeatures:1,customWeapons:2,onUpdateCustomWeapons:9})}}function Are(n){let e,t=n[3].weaponsToLabel[n[0]]+"",i,s;return{c(){e=C("div"),i=z(t),this.h()},l(r){e=k(r,"DIV",{class:!0});var o=T(e);i=G(o,t),o.forEach(b),this.h()},h(){S(e,"class",s=xe(Zi("label",{magic:n[4],custom:n[6]}))+" svelte-12aohl3")},m(r,o){X(r,e,o),p(e,i)},p(r,o){o&9&&t!==(t=r[3].weaponsToLabel[r[0]]+"")&&Be(i,t),o&80&&s!==(s=xe(Zi("label",{magic:r[4],custom:r[6]}))+" svelte-12aohl3")&&S(e,"class",s)},d(r){r&&b(e)}}}function wre(n){let e,t=wu(n[3].fullFeatures[n[0]])+"",i,s,r,o=n[5][n[0]].reason?`(${n[5][n[0]].reason})`:"",l;return{c(){e=C("div"),i=z(t),s=F(),r=C("span"),l=z(o),this.h()},l(a){e=k(a,"DIV",{slot:!0});var c=T(e);i=G(c,t),s=j(c),r=k(c,"SPAN",{});var u=T(r);l=G(u,o),u.forEach(b),c.forEach(b),this.h()},h(){ct(r,"color","#9c8e8e"),S(e,"slot","t")},m(a,c){X(a,e,c),p(e,i),p(e,s),p(e,r),p(r,l)},p(a,c){c&9&&t!==(t=wu(a[3].fullFeatures[a[0]])+"")&&Be(i,t),c&33&&o!==(o=a[5][a[0]].reason?`(${a[5][a[0]].reason})`:"")&&Be(l,o)},d(a){a&&b(e)}}}function s3(n){let e,t,i;return t=new Tm({props:{isEquipped:n[1].includes(n[0]),onClick:n[21],isVisible:n[1].length<Vl||n[1].includes(n[0])}}),{c(){e=C("div"),Te(t.$$.fragment),this.h()},l(s){e=k(s,"DIV",{class:!0});var r=T(e);De(t.$$.fragment,r),r.forEach(b),this.h()},h(){S(e,"class","equip-button svelte-12aohl3")},m(s,r){X(s,e,r),Oe(t,e,null),i=!0},p(s,r){const o={};r&3&&(o.isEquipped=s[1].includes(s[0])),r&1029&&(o.onClick=s[21]),r&3&&(o.isVisible=s[1].length<Vl||s[1].includes(s[0])),t.$set(o)},i(s){i||(B(t.$$.fragment,s),i=!0)},o(s){Q(t.$$.fragment,s),i=!1},d(s){s&&b(e),Re(t)}}}function r3(n){let e,t=n[7],i,s,r,o=o3(n);return{c(){e=C("div"),o.c(),i=z(`
			/`),s=C("span"),r=z(n[7]),this.h()},l(l){e=k(l,"DIV",{class:!0});var a=T(e);o.l(a),i=G(a,`
			/`),s=k(a,"SPAN",{});var c=T(s);r=G(c,n[7]),c.forEach(b),a.forEach(b),this.h()},h(){ct(s,"width","15px"),S(e,"class","equip-button svelte-12aohl3")},m(l,a){X(l,e,a),o.m(e,null),p(e,i),p(e,s),p(s,r)},p(l,a){a&128&&It(t,t=l[7])?(o.d(1),o=o3(l),o.c(),o.m(e,i)):o.p(l,a),a&128&&Be(r,l[7])},d(l){l&&b(e),o.d(l)}}}function o3(n){let e,t,i,s;return{c(){e=C("input"),this.h()},l(r){e=k(r,"INPUT",{class:!0,type:!0,min:!0}),this.h()},h(){S(e,"class",t=xe("count "+(n[9]===0?"bad":n[9]<=Math.ceil(n[7]/3)?"danger":""))+" svelte-12aohl3"),S(e,"type","number"),S(e,"min","0"),e.value=n[9]},m(r,o){X(r,e,o),i||(s=Se(e,"change",n[22]),i=!0)},p(r,o){o&640&&t!==(t=xe("count "+(r[9]===0?"bad":r[9]<=Math.ceil(r[7]/3)?"danger":""))+" svelte-12aohl3")&&S(e,"class",t),o&512&&e.value!==r[9]&&(e.value=r[9])},d(r){r&&b(e),i=!1,s()}}}function Cre(n){let e,t,i,s,r;t=new fi({props:{tooltipStyle:is.CENTER,timeout:300,$$slots:{t:[wre],default:[Are]},$$scope:{ctx:n}}});let o=!n[4]&&s3(n),l=n[4]&&r3(n);return{c(){e=C("div"),Te(t.$$.fragment),i=F(),o&&o.c(),s=F(),l&&l.c(),this.h()},l(a){e=k(a,"DIV",{class:!0});var c=T(e);De(t.$$.fragment,c),i=j(c),o&&o.l(c),s=j(c),l&&l.l(c),c.forEach(b),this.h()},h(){S(e,"class","container svelte-12aohl3")},m(a,c){X(a,e,c),Oe(t,e,null),p(e,i),o&&o.m(e,null),p(e,s),l&&l.m(e,null),r=!0},p(a,[c]){const u={};c&16777337&&(u.$$scope={dirty:c,ctx:a}),t.$set(u),a[4]?o&&(He(),Q(o,1,1,()=>{o=null}),qe()):o?(o.p(a,c),c&16&&B(o,1)):(o=s3(a),o.c(),B(o,1),o.m(e,s)),a[4]?l?l.p(a,c):(l=r3(a),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},i(a){r||(B(t.$$.fragment,a),B(o),r=!0)},o(a){Q(t.$$.fragment,a),Q(o),r=!1},d(a){a&&b(e),Re(t),o&&o.d(),l&&l.d()}}}function kre(n,e,t){let i,s,r,o,l,a,c,u,f,{weapon:h}=e,{equippedClass:d}=e,{equippedWeapons:m}=e,{equippedCombatSkills:g}=e,{onToggleEquip:_}=e,{allWeapons:v}=e,{spellUseFlag:y}=e,{isMagic:E}=e,{weaponUses:w}=e,{onUpdateWeaponUses:A}=e,I={current:y},R={current:null};const D=()=>_(h,u),N=W=>{const H=parseInt(W.currentTarget.value);H>=0&&H<=s?(o(H),W.currentTarget.value=H+""):W.currentTarget.value=s+""};return n.$$set=W=>{"weapon"in W&&t(0,h=W.weapon),"equippedClass"in W&&t(11,d=W.equippedClass),"equippedWeapons"in W&&t(1,m=W.equippedWeapons),"equippedCombatSkills"in W&&t(12,g=W.equippedCombatSkills),"onToggleEquip"in W&&t(2,_=W.onToggleEquip),"allWeapons"in W&&t(3,v=W.allWeapons),"spellUseFlag"in W&&t(13,y=W.spellUseFlag),"isMagic"in W&&t(4,E=W.isMagic),"weaponUses"in W&&t(14,w=W.weaponUses),"onUpdateWeaponUses"in W&&t(15,A=W.onUpdateWeaponUses)},n.$$.update=()=>{var W;n.$$.dirty&6144&&t(20,i=G4(d,g)),n.$$.dirty&1048585&&t(7,s=(((W=v.fullFeatures[h])==null?void 0:W.uses)||1/0)*(i&&h===Ae.HEAL?2:1)),n.$$.dirty&16385&&t(9,r=w[h]),n.$$.dirty&640&&r===void 0&&s!==void 0&&t(9,r=s),n.$$.dirty&32897&&t(8,o=H=>{H<=s&&H>=0&&A(h,H)}),n.$$.dirty&205184&&(I.current!=y||s!==R.current)&&(o(s),t(17,R.current=s,R),t(16,I.current=y,I)),n.$$.dirty&9&&t(6,l=v==null?void 0:v.customSet.has(h)),n.$$.dirty&9&&t(19,a=(v==null?void 0:v.classUnlockSet.has(h))||(v==null?void 0:v.equippedClassSet.has(h))),n.$$.dirty&1&&t(18,c=h.indexOf("TRAINING")>=0),n.$$.dirty&786496&&t(10,u=l||a||c),n.$$.dirty&8&&t(5,f=v.fullFeatures),n.$$.dirty&33&&f[h].reason},[h,m,_,v,E,f,l,s,o,r,u,d,g,y,w,A,I,R,c,a,i,D,N]}class aa extends rt{constructor(e){super(),ot(this,e,kre,Cre,It,{weapon:0,equippedClass:11,equippedWeapons:1,equippedCombatSkills:12,onToggleEquip:2,allWeapons:3,spellUseFlag:13,isMagic:4,weaponUses:14,onUpdateWeaponUses:15})}}function l3(n,e,t){const i=n.slice();return i[33]=e[t],i}function a3(n,e,t){const i=n.slice();return i[33]=e[t],i}function c3(n,e,t){const i=n.slice();return i[33]=e[t],i}function u3(n,e,t){const i=n.slice();return i[33]=e[t],i}function f3(n,e,t){const i=n.slice();return i[33]=e[t],i}function h3(n,e,t){const i=n.slice();return i[33]=e[t],i}function d3(n,e,t){const i=n.slice();return i[33]=e[t],i}function m3(n){let e,t,i,s,r,o,l=n[12],a=[];for(let u=0;u<l.length;u+=1)a[u]=p3(d3(n,l,u));const c=u=>Q(a[u],1,1,()=>{a[u]=null});return{c(){e=C("div"),t=C("div"),i=z("Swords"),s=F(),r=C("div");for(let u=0;u<a.length;u+=1)a[u].c();this.h()},l(u){e=k(u,"DIV",{class:!0});var f=T(e);t=k(f,"DIV",{class:!0});var h=T(t);i=G(h,"Swords"),h.forEach(b),s=j(f),r=k(f,"DIV",{class:!0});var d=T(r);for(let m=0;m<a.length;m+=1)a[m].l(d);d.forEach(b),f.forEach(b),this.h()},h(){S(t,"class","label svelte-1x5cszy"),S(r,"class","category-container svelte-1x5cszy"),S(e,"class","category svelte-1x5cszy")},m(u,f){X(u,e,f),p(e,t),p(t,i),p(e,s),p(e,r);for(let h=0;h<a.length;h+=1)a[h].m(r,null);o=!0},p(u,f){if(f[0]&1052735){l=u[12];let h;for(h=0;h<l.length;h+=1){const d=d3(u,l,h);a[h]?(a[h].p(d,f),B(a[h],1)):(a[h]=p3(d),a[h].c(),B(a[h],1),a[h].m(r,null))}for(He(),h=l.length;h<a.length;h+=1)c(h);qe()}},i(u){if(!o){for(let f=0;f<l.length;f+=1)B(a[f]);o=!0}},o(u){a=a.filter(Boolean);for(let f=0;f<a.length;f+=1)Q(a[f]);o=!1},d(u){u&&b(e),Ht(a,u)}}}function p3(n){let e,t;return e=new aa({props:{allWeapons:n[3],equippedWeapons:n[0],weapon:n[33],onToggleEquip:n[20],isMagic:!1,spellUseFlag:0,equippedCombatSkills:n[1],equippedClass:n[2],weaponUses:n[4],onUpdateWeaponUses:n[5]}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,s){const r={};s[0]&8&&(r.allWeapons=i[3]),s[0]&1&&(r.equippedWeapons=i[0]),s[0]&4096&&(r.weapon=i[33]),s[0]&1048576&&(r.onToggleEquip=i[20]),s[0]&2&&(r.equippedCombatSkills=i[1]),s[0]&4&&(r.equippedClass=i[2]),s[0]&16&&(r.weaponUses=i[4]),s[0]&32&&(r.onUpdateWeaponUses=i[5]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function g3(n){let e,t,i,s,r,o,l=n[9],a=[];for(let u=0;u<l.length;u+=1)a[u]=v3(h3(n,l,u));const c=u=>Q(a[u],1,1,()=>{a[u]=null});return{c(){e=C("div"),t=C("div"),i=z("Lances"),s=F(),r=C("div");for(let u=0;u<a.length;u+=1)a[u].c();this.h()},l(u){e=k(u,"DIV",{class:!0});var f=T(e);t=k(f,"DIV",{class:!0});var h=T(t);i=G(h,"Lances"),h.forEach(b),s=j(f),r=k(f,"DIV",{class:!0});var d=T(r);for(let m=0;m<a.length;m+=1)a[m].l(d);d.forEach(b),f.forEach(b),this.h()},h(){S(t,"class","label svelte-1x5cszy"),S(r,"class","category-container svelte-1x5cszy"),S(e,"class","category svelte-1x5cszy")},m(u,f){X(u,e,f),p(e,t),p(t,i),p(e,s),p(e,r);for(let h=0;h<a.length;h+=1)a[h].m(r,null);o=!0},p(u,f){if(f[0]&1049151){l=u[9];let h;for(h=0;h<l.length;h+=1){const d=h3(u,l,h);a[h]?(a[h].p(d,f),B(a[h],1)):(a[h]=v3(d),a[h].c(),B(a[h],1),a[h].m(r,null))}for(He(),h=l.length;h<a.length;h+=1)c(h);qe()}},i(u){if(!o){for(let f=0;f<l.length;f+=1)B(a[f]);o=!0}},o(u){a=a.filter(Boolean);for(let f=0;f<a.length;f+=1)Q(a[f]);o=!1},d(u){u&&b(e),Ht(a,u)}}}function v3(n){let e,t;return e=new aa({props:{equippedWeapons:n[0],weapon:n[33],onToggleEquip:n[20],allWeapons:n[3],isMagic:!1,spellUseFlag:0,equippedCombatSkills:n[1],equippedClass:n[2],weaponUses:n[4],onUpdateWeaponUses:n[5]}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,s){const r={};s[0]&1&&(r.equippedWeapons=i[0]),s[0]&512&&(r.weapon=i[33]),s[0]&1048576&&(r.onToggleEquip=i[20]),s[0]&8&&(r.allWeapons=i[3]),s[0]&2&&(r.equippedCombatSkills=i[1]),s[0]&4&&(r.equippedClass=i[2]),s[0]&16&&(r.weaponUses=i[4]),s[0]&32&&(r.onUpdateWeaponUses=i[5]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function b3(n){let e,t,i,s,r,o,l=n[13],a=[];for(let u=0;u<l.length;u+=1)a[u]=_3(f3(n,l,u));const c=u=>Q(a[u],1,1,()=>{a[u]=null});return{c(){e=C("div"),t=C("div"),i=z("Axes"),s=F(),r=C("div");for(let u=0;u<a.length;u+=1)a[u].c();this.h()},l(u){e=k(u,"DIV",{class:!0});var f=T(e);t=k(f,"DIV",{class:!0});var h=T(t);i=G(h,"Axes"),h.forEach(b),s=j(f),r=k(f,"DIV",{class:!0});var d=T(r);for(let m=0;m<a.length;m+=1)a[m].l(d);d.forEach(b),f.forEach(b),this.h()},h(){S(t,"class","label svelte-1x5cszy"),S(r,"class","category-container svelte-1x5cszy"),S(e,"class","category svelte-1x5cszy")},m(u,f){X(u,e,f),p(e,t),p(t,i),p(e,s),p(e,r);for(let h=0;h<a.length;h+=1)a[h].m(r,null);o=!0},p(u,f){if(f[0]&1056831){l=u[13];let h;for(h=0;h<l.length;h+=1){const d=f3(u,l,h);a[h]?(a[h].p(d,f),B(a[h],1)):(a[h]=_3(d),a[h].c(),B(a[h],1),a[h].m(r,null))}for(He(),h=l.length;h<a.length;h+=1)c(h);qe()}},i(u){if(!o){for(let f=0;f<l.length;f+=1)B(a[f]);o=!0}},o(u){a=a.filter(Boolean);for(let f=0;f<a.length;f+=1)Q(a[f]);o=!1},d(u){u&&b(e),Ht(a,u)}}}function _3(n){let e,t;return e=new aa({props:{equippedWeapons:n[0],weapon:n[33],onToggleEquip:n[20],allWeapons:n[3],isMagic:!1,spellUseFlag:0,equippedCombatSkills:n[1],equippedClass:n[2],weaponUses:n[4],onUpdateWeaponUses:n[5]}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,s){const r={};s[0]&1&&(r.equippedWeapons=i[0]),s[0]&8192&&(r.weapon=i[33]),s[0]&1048576&&(r.onToggleEquip=i[20]),s[0]&8&&(r.allWeapons=i[3]),s[0]&2&&(r.equippedCombatSkills=i[1]),s[0]&4&&(r.equippedClass=i[2]),s[0]&16&&(r.weaponUses=i[4]),s[0]&32&&(r.onUpdateWeaponUses=i[5]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function y3(n){let e,t,i,s,r,o,l=n[11],a=[];for(let u=0;u<l.length;u+=1)a[u]=S3(u3(n,l,u));const c=u=>Q(a[u],1,1,()=>{a[u]=null});return{c(){e=C("div"),t=C("div"),i=z("Bows"),s=F(),r=C("div");for(let u=0;u<a.length;u+=1)a[u].c();this.h()},l(u){e=k(u,"DIV",{class:!0});var f=T(e);t=k(f,"DIV",{class:!0});var h=T(t);i=G(h,"Bows"),h.forEach(b),s=j(f),r=k(f,"DIV",{class:!0});var d=T(r);for(let m=0;m<a.length;m+=1)a[m].l(d);d.forEach(b),f.forEach(b),this.h()},h(){S(t,"class","label svelte-1x5cszy"),S(r,"class","category-container svelte-1x5cszy"),S(e,"class","category svelte-1x5cszy")},m(u,f){X(u,e,f),p(e,t),p(t,i),p(e,s),p(e,r);for(let h=0;h<a.length;h+=1)a[h].m(r,null);o=!0},p(u,f){if(f[0]&1050687){l=u[11];let h;for(h=0;h<l.length;h+=1){const d=u3(u,l,h);a[h]?(a[h].p(d,f),B(a[h],1)):(a[h]=S3(d),a[h].c(),B(a[h],1),a[h].m(r,null))}for(He(),h=l.length;h<a.length;h+=1)c(h);qe()}},i(u){if(!o){for(let f=0;f<l.length;f+=1)B(a[f]);o=!0}},o(u){a=a.filter(Boolean);for(let f=0;f<a.length;f+=1)Q(a[f]);o=!1},d(u){u&&b(e),Ht(a,u)}}}function S3(n){let e,t;return e=new aa({props:{equippedWeapons:n[0],weapon:n[33],onToggleEquip:n[20],allWeapons:n[3],isMagic:!1,spellUseFlag:0,equippedCombatSkills:n[1],equippedClass:n[2],weaponUses:n[4],onUpdateWeaponUses:n[5]}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,s){const r={};s[0]&1&&(r.equippedWeapons=i[0]),s[0]&2048&&(r.weapon=i[33]),s[0]&1048576&&(r.onToggleEquip=i[20]),s[0]&8&&(r.allWeapons=i[3]),s[0]&2&&(r.equippedCombatSkills=i[1]),s[0]&4&&(r.equippedClass=i[2]),s[0]&16&&(r.weaponUses=i[4]),s[0]&32&&(r.onUpdateWeaponUses=i[5]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function E3(n){let e,t,i,s,r,o,l=n[10],a=[];for(let u=0;u<l.length;u+=1)a[u]=A3(c3(n,l,u));const c=u=>Q(a[u],1,1,()=>{a[u]=null});return{c(){e=C("div"),t=C("div"),i=z("Fists"),s=F(),r=C("div");for(let u=0;u<a.length;u+=1)a[u].c();this.h()},l(u){e=k(u,"DIV",{class:!0});var f=T(e);t=k(f,"DIV",{class:!0});var h=T(t);i=G(h,"Fists"),h.forEach(b),s=j(f),r=k(f,"DIV",{class:!0});var d=T(r);for(let m=0;m<a.length;m+=1)a[m].l(d);d.forEach(b),f.forEach(b),this.h()},h(){S(t,"class","label svelte-1x5cszy"),S(r,"class","category-container svelte-1x5cszy"),S(e,"class","category svelte-1x5cszy")},m(u,f){X(u,e,f),p(e,t),p(t,i),p(e,s),p(e,r);for(let h=0;h<a.length;h+=1)a[h].m(r,null);o=!0},p(u,f){if(f[0]&1049663){l=u[10];let h;for(h=0;h<l.length;h+=1){const d=c3(u,l,h);a[h]?(a[h].p(d,f),B(a[h],1)):(a[h]=A3(d),a[h].c(),B(a[h],1),a[h].m(r,null))}for(He(),h=l.length;h<a.length;h+=1)c(h);qe()}},i(u){if(!o){for(let f=0;f<l.length;f+=1)B(a[f]);o=!0}},o(u){a=a.filter(Boolean);for(let f=0;f<a.length;f+=1)Q(a[f]);o=!1},d(u){u&&b(e),Ht(a,u)}}}function A3(n){let e,t;return e=new aa({props:{equippedWeapons:n[0],weapon:n[33],onToggleEquip:n[20],allWeapons:n[3],spellUseFlag:0,isMagic:!1,equippedCombatSkills:n[1],equippedClass:n[2],weaponUses:n[4],onUpdateWeaponUses:n[5]}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,s){const r={};s[0]&1&&(r.equippedWeapons=i[0]),s[0]&1024&&(r.weapon=i[33]),s[0]&1048576&&(r.onToggleEquip=i[20]),s[0]&8&&(r.allWeapons=i[3]),s[0]&2&&(r.equippedCombatSkills=i[1]),s[0]&4&&(r.equippedClass=i[2]),s[0]&16&&(r.weaponUses=i[4]),s[0]&32&&(r.onUpdateWeaponUses=i[5]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function w3(n){let e,t,i,s,r,o,l,a=Array.from(n[14]),c=[];for(let f=0;f<a.length;f+=1)c[f]=C3(a3(n,a,f));const u=f=>Q(c[f],1,1,()=>{c[f]=null});return{c(){e=C("div"),t=C("div"),i=z("Training Weapons"),s=F(),r=C("div");for(let f=0;f<c.length;f+=1)c[f].c();this.h()},l(f){e=k(f,"DIV",{class:!0});var h=T(e);t=k(h,"DIV",{class:!0});var d=T(t);i=G(d,"Training Weapons"),d.forEach(b),s=j(h),r=k(h,"DIV",{class:!0});var m=T(r);for(let g=0;g<c.length;g+=1)c[g].l(m);m.forEach(b),h.forEach(b),this.h()},h(){S(t,"class","label svelte-1x5cszy"),S(r,"class","category-container svelte-1x5cszy"),S(e,"class",o=xe(Zi("category",{"min-width":n[16]}))+" svelte-1x5cszy")},m(f,h){X(f,e,h),p(e,t),p(t,i),p(e,s),p(e,r);for(let d=0;d<c.length;d+=1)c[d].m(r,null);l=!0},p(f,h){if(h[0]&1065023){a=Array.from(f[14]);let d;for(d=0;d<a.length;d+=1){const m=a3(f,a,d);c[d]?(c[d].p(m,h),B(c[d],1)):(c[d]=C3(m),c[d].c(),B(c[d],1),c[d].m(r,null))}for(He(),d=a.length;d<c.length;d+=1)u(d);qe()}(!l||h[0]&65536&&o!==(o=xe(Zi("category",{"min-width":f[16]}))+" svelte-1x5cszy"))&&S(e,"class",o)},i(f){if(!l){for(let h=0;h<a.length;h+=1)B(c[h]);l=!0}},o(f){c=c.filter(Boolean);for(let h=0;h<c.length;h+=1)Q(c[h]);l=!1},d(f){f&&b(e),Ht(c,f)}}}function C3(n){let e,t;return e=new aa({props:{equippedWeapons:n[0],weapon:n[33],onToggleEquip:n[20],allWeapons:n[3],spellUseFlag:0,isMagic:!1,equippedCombatSkills:n[1],equippedClass:n[2],weaponUses:n[4],onUpdateWeaponUses:n[5]}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,s){const r={};s[0]&1&&(r.equippedWeapons=i[0]),s[0]&16384&&(r.weapon=i[33]),s[0]&1048576&&(r.onToggleEquip=i[20]),s[0]&8&&(r.allWeapons=i[3]),s[0]&2&&(r.equippedCombatSkills=i[1]),s[0]&4&&(r.equippedClass=i[2]),s[0]&16&&(r.weaponUses=i[4]),s[0]&32&&(r.onUpdateWeaponUses=i[5]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function k3(n){let e,t,i,s=[...n[22],...n[21]],r=[];for(let l=0;l<s.length;l+=1)r[l]=I3(l3(n,s,l));const o=l=>Q(r[l],1,1,()=>{r[l]=null});return{c(){e=C("div"),t=C("div");for(let l=0;l<r.length;l+=1)r[l].c();this.h()},l(l){e=k(l,"DIV",{class:!0});var a=T(e);t=k(a,"DIV",{class:!0});var c=T(t);for(let u=0;u<r.length;u+=1)r[u].l(c);c.forEach(b),a.forEach(b),this.h()},h(){S(t,"class","category svelte-1x5cszy"),S(e,"class","magic-category svelte-1x5cszy")},m(l,a){X(l,e,a),p(e,t);for(let c=0;c<r.length;c+=1)r[c].m(t,null);i=!0},p(l,a){if(a[0]&7372863){s=[...l[22],...l[21]];let c;for(c=0;c<s.length;c+=1){const u=l3(l,s,c);r[c]?(r[c].p(u,a),B(r[c],1)):(r[c]=I3(u),r[c].c(),B(r[c],1),r[c].m(t,null))}for(He(),c=s.length;c<r.length;c+=1)o(c);qe()}},i(l){if(!i){for(let a=0;a<s.length;a+=1)B(r[a]);i=!0}},o(l){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)Q(r[a]);i=!1},d(l){l&&b(e),Ht(r,l)}}}function I3(n){let e,t;return e=new aa({props:{equippedWeapons:n[0],weapon:n[33],onToggleEquip:n[20],allWeapons:n[3],isMagic:!0,spellUseFlag:n[15],equippedCombatSkills:n[1],equippedClass:n[2],weaponUses:n[4],onUpdateWeaponUses:n[5]}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,s){const r={};s[0]&1&&(r.equippedWeapons=i[0]),s[0]&6291456&&(r.weapon=i[33]),s[0]&1048576&&(r.onToggleEquip=i[20]),s[0]&8&&(r.allWeapons=i[3]),s[0]&32768&&(r.spellUseFlag=i[15]),s[0]&2&&(r.equippedCombatSkills=i[1]),s[0]&4&&(r.equippedClass=i[2]),s[0]&16&&(r.weaponUses=i[4]),s[0]&32&&(r.onUpdateWeaponUses=i[5]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function Ire(n){let e,t,i,s,r,o,l,a,c,u,f,h,d,m,g,_,v,y,E,w,A,I,R,D,N,W,H,P,Y,O,L,U,K,te,q,x,Z,V,ce,pe,oe,ve,Ne,J,Ie,Ue,re,Le,fe,M,ae,de,$,ee,ie,me;t=new vc({props:{label:"Weapons"}});let ue=n[12].length&&m3(n),se=n[9].length&&g3(n),_e=n[13].length&&b3(n),ke=n[11].length&&y3(n),Ce=n[10].length&&E3(n),ge=n[14].size>0&&w3(n),Me=(n[22].length||n[21].length)&&k3(n);return{c(){e=C("div"),Te(t.$$.fragment),i=F(),s=C("div"),r=C("span"),o=z("Martial Weapons"),l=F(),a=C("div"),c=C("span"),u=z("Superiority Dies:"),f=F(),h=C("input"),m=F(),g=C("span"),_=z("/ "),v=z(n[7]),y=F(),E=C("button"),w=z("Reset Superiority Dice"),A=F(),I=C("button"),R=z("Reset Spell Uses"),D=F(),N=C("button"),W=z("Unequip all weapons"),H=F(),P=C("div"),Y=F(),O=C("div"),L=F(),U=C("div"),ue&&ue.c(),K=F(),se&&se.c(),te=F(),_e&&_e.c(),q=F(),ke&&ke.c(),x=F(),Ce&&Ce.c(),Z=F(),ge&&ge.c(),V=F(),ce=C("div"),pe=C("span"),oe=z("Magic Weapons"),ve=F(),Ne=C("button"),J=z("Add new martial weapon"),Ie=F(),Ue=C("button"),re=z("Add new magic weapon"),Le=F(),fe=C("div"),M=F(),ae=C("div"),de=F(),$=C("div"),Me&&Me.c(),this.h()},l(Ee){e=k(Ee,"DIV",{class:!0});var Pe=T(e);De(t.$$.fragment,Pe),i=j(Pe),s=k(Pe,"DIV",{class:!0});var be=T(s);r=k(be,"SPAN",{});var nt=T(r);o=G(nt,"Martial Weapons"),nt.forEach(b),l=j(be),a=k(be,"DIV",{class:!0});var Fe=T(a);c=k(Fe,"SPAN",{});var we=T(c);u=G(we,"Superiority Dies:"),we.forEach(b),f=j(Fe),h=k(Fe,"INPUT",{type:!0,class:!0,min:!0}),m=j(Fe),g=k(Fe,"SPAN",{});var lt=T(g);_=G(lt,"/ "),v=G(lt,n[7]),lt.forEach(b),Fe.forEach(b),y=j(be),E=k(be,"BUTTON",{class:!0});var je=T(E);w=G(je,"Reset Superiority Dice"),je.forEach(b),A=j(be),I=k(be,"BUTTON",{class:!0});var Qe=T(I);R=G(Qe,"Reset Spell Uses"),Qe.forEach(b),D=j(be),N=k(be,"BUTTON",{class:!0});var ye=T(N);W=G(ye,"Unequip all weapons"),ye.forEach(b),be.forEach(b),H=j(Pe),P=k(Pe,"DIV",{class:!0}),T(P).forEach(b),Y=j(Pe),O=k(Pe,"DIV",{class:!0}),T(O).forEach(b),L=j(Pe),U=k(Pe,"DIV",{class:!0});var Ze=T(U);ue&&ue.l(Ze),K=j(Ze),se&&se.l(Ze),te=j(Ze),_e&&_e.l(Ze),q=j(Ze),ke&&ke.l(Ze),x=j(Ze),Ce&&Ce.l(Ze),Z=j(Ze),ge&&ge.l(Ze),Ze.forEach(b),V=j(Pe),ce=k(Pe,"DIV",{class:!0});var Lt=T(ce);pe=k(Lt,"SPAN",{});var vt=T(pe);oe=G(vt,"Magic Weapons"),vt.forEach(b),ve=j(Lt),Ne=k(Lt,"BUTTON",{class:!0});var Ct=T(Ne);J=G(Ct,"Add new martial weapon"),Ct.forEach(b),Ie=j(Lt),Ue=k(Lt,"BUTTON",{class:!0});var Ot=T(Ue);re=G(Ot,"Add new magic weapon"),Ot.forEach(b),Lt.forEach(b),Le=j(Pe),fe=k(Pe,"DIV",{class:!0}),T(fe).forEach(b),M=j(Pe),ae=k(Pe,"DIV",{class:!0}),T(ae).forEach(b),de=j(Pe),$=k(Pe,"DIV",{class:!0});var en=T($);Me&&Me.l(en),en.forEach(b),Pe.forEach(b),this.h()},h(){S(h,"type","number"),S(h,"class",d=xe(`die-input ${n[6]<=0?"bad":n[6]<=Math.ceil(n[7]/3)?"danger":""}`)+" svelte-1x5cszy"),S(h,"min","0"),h.value=n[6],ct(h,"width","25px"),S(a,"class","superiority-die svelte-1x5cszy"),S(E,"class","svelte-1x5cszy"),S(I,"class","svelte-1x5cszy"),S(N,"class","svelte-1x5cszy"),S(s,"class","actions svelte-1x5cszy"),ct(s,"white-space","nowrap"),S(P,"class","divider svelte-1x5cszy"),ct(P,"height","2px"),S(O,"class","divider svelte-1x5cszy"),S(U,"class","martial-weapons svelte-1x5cszy"),ct(pe,"flex","1"),S(Ne,"class","svelte-1x5cszy"),ct(Ne,"margin-right","5px"),S(Ue,"class","svelte-1x5cszy"),S(ce,"class","actions svelte-1x5cszy"),ct(ce,"white-space","nowrap"),S(fe,"class","divider svelte-1x5cszy"),ct(fe,"height","2px"),S(ae,"class","divider svelte-1x5cszy"),S($,"class","magic-weapons svelte-1x5cszy"),S(e,"class","container svelte-1x5cszy")},m(Ee,Pe){X(Ee,e,Pe),Oe(t,e,null),p(e,i),p(e,s),p(s,r),p(r,o),p(s,l),p(s,a),p(a,c),p(c,u),p(a,f),p(a,h),p(a,m),p(a,g),p(g,_),p(g,v),p(s,y),p(s,E),p(E,w),p(s,A),p(s,I),p(I,R),p(s,D),p(s,N),p(N,W),p(e,H),p(e,P),p(e,Y),p(e,O),p(e,L),p(e,U),ue&&ue.m(U,null),p(U,K),se&&se.m(U,null),p(U,te),_e&&_e.m(U,null),p(U,q),ke&&ke.m(U,null),p(U,x),Ce&&Ce.m(U,null),p(U,Z),ge&&ge.m(U,null),p(e,V),p(e,ce),p(ce,pe),p(pe,oe),p(ce,ve),p(ce,Ne),p(Ne,J),p(ce,Ie),p(ce,Ue),p(Ue,re),p(e,Le),p(e,fe),p(e,M),p(e,ae),p(e,de),p(e,$),Me&&Me.m($,null),ee=!0,ie||(me=[Se(h,"change",n[29]),Se(E,"click",n[30]),Se(I,"click",n[31]),Se(N,"click",function(){Bn(n[19])&&n[19].apply(this,arguments)}),Se(Ne,"click",function(){Bn(n[18])&&n[18].apply(this,arguments)}),Se(Ue,"click",function(){Bn(n[17])&&n[17].apply(this,arguments)})],ie=!0)},p(Ee,Pe){n=Ee,(!ee||Pe[0]&192&&d!==(d=xe(`die-input ${n[6]<=0?"bad":n[6]<=Math.ceil(n[7]/3)?"danger":""}`)+" svelte-1x5cszy"))&&S(h,"class",d),(!ee||Pe[0]&64&&h.value!==n[6])&&(h.value=n[6]),(!ee||Pe[0]&128)&&Be(v,n[7]),n[12].length?ue?(ue.p(n,Pe),Pe[0]&4096&&B(ue,1)):(ue=m3(n),ue.c(),B(ue,1),ue.m(U,K)):ue&&(He(),Q(ue,1,1,()=>{ue=null}),qe()),n[9].length?se?(se.p(n,Pe),Pe[0]&512&&B(se,1)):(se=g3(n),se.c(),B(se,1),se.m(U,te)):se&&(He(),Q(se,1,1,()=>{se=null}),qe()),n[13].length?_e?(_e.p(n,Pe),Pe[0]&8192&&B(_e,1)):(_e=b3(n),_e.c(),B(_e,1),_e.m(U,q)):_e&&(He(),Q(_e,1,1,()=>{_e=null}),qe()),n[11].length?ke?(ke.p(n,Pe),Pe[0]&2048&&B(ke,1)):(ke=y3(n),ke.c(),B(ke,1),ke.m(U,x)):ke&&(He(),Q(ke,1,1,()=>{ke=null}),qe()),n[10].length?Ce?(Ce.p(n,Pe),Pe[0]&1024&&B(Ce,1)):(Ce=E3(n),Ce.c(),B(Ce,1),Ce.m(U,Z)):Ce&&(He(),Q(Ce,1,1,()=>{Ce=null}),qe()),n[14].size>0?ge?(ge.p(n,Pe),Pe[0]&16384&&B(ge,1)):(ge=w3(n),ge.c(),B(ge,1),ge.m(U,null)):ge&&(He(),Q(ge,1,1,()=>{ge=null}),qe()),n[22].length||n[21].length?Me?(Me.p(n,Pe),Pe[0]&6291456&&B(Me,1)):(Me=k3(n),Me.c(),B(Me,1),Me.m($,null)):Me&&(He(),Q(Me,1,1,()=>{Me=null}),qe())},i(Ee){ee||(B(t.$$.fragment,Ee),B(ue),B(se),B(_e),B(ke),B(Ce),B(ge),B(Me),ee=!0)},o(Ee){Q(t.$$.fragment,Ee),Q(ue),Q(se),Q(_e),Q(ke),Q(Ce),Q(ge),Q(Me),ee=!1},d(Ee){Ee&&b(e),Re(t),ue&&ue.d(),se&&se.d(),_e&&_e.d(),ke&&ke.d(),Ce&&Ce.d(),ge&&ge.d(),Me&&Me.d(),ie=!1,an(me)}}}function Tre(n,e,t){let i,s,r,o,l,a,c,u,f,h,d,m,g,_,v,y;const{open:E}=Nn(xi.MODAL);let{equippedWeapons:w}=e,{onToggleEquippedWeapons:A}=e,{equippedCombatSkills:I}=e,{equippedClass:R}=e,{allWeapons:D}=e,{weaponUses:N}=e,{onUpdateWeaponUses:W}=e,{customWeapons:H}=e,{onUpdateCustomWeapons:P}=e,{curSuperiorityDies:Y}=e,{maxSuperiorityDie:O}=e,{setCurSuperiorityDie:L}=e,U=0;const K=x=>{const Z=parseInt(x.currentTarget.value);Z>=0&&Z<=O?(L(Z),x.currentTarget.value=Z+""):x.currentTarget.value=Y+""},te=()=>L(O),q=()=>t(15,U+=1);return n.$$set=x=>{"equippedWeapons"in x&&t(0,w=x.equippedWeapons),"onToggleEquippedWeapons"in x&&t(23,A=x.onToggleEquippedWeapons),"equippedCombatSkills"in x&&t(1,I=x.equippedCombatSkills),"equippedClass"in x&&t(2,R=x.equippedClass),"allWeapons"in x&&t(3,D=x.allWeapons),"weaponUses"in x&&t(4,N=x.weaponUses),"onUpdateWeaponUses"in x&&t(5,W=x.onUpdateWeaponUses),"customWeapons"in x&&t(24,H=x.customWeapons),"onUpdateCustomWeapons"in x&&t(25,P=x.onUpdateCustomWeapons),"curSuperiorityDies"in x&&t(6,Y=x.curSuperiorityDies),"maxSuperiorityDie"in x&&t(7,O=x.maxSuperiorityDie),"setCurSuperiorityDie"in x&&t(8,L=x.setCurSuperiorityDie)},n.$$.update=()=>{n.$$.dirty[0]&8&&t(28,i=D.fullFeatures),n.$$.dirty[0]&268435464&&t(22,s=D.fullArray.filter(x=>i[x].type===ne.REASON)),n.$$.dirty[0]&268435464&&t(21,r=D.fullArray.filter(x=>i[x].type===ne.FAITH)),n.$$.dirty[0]&8388608&&t(20,o=x=>{A(x)}),n.$$.dirty[0]&8388609&&t(19,l=()=>w.forEach(x=>A(x))),n.$$.dirty[0]&318767112&&t(18,a=()=>{E(i3,{weapon:zL.filter(x=>!D.fullSet.has(x)),weaponsToFeatures:i,defaultReason:"Manually added in weapons section",customWeapons:H,onUpdateCustomWeapons:P})}),n.$$.dirty[0]&318767112&&t(17,c=()=>{E(i3,{weapon:J4.filter(x=>!D.fullSet.has(x)),weaponsToFeatures:i,defaultReason:"Manually added in weapons section",customWeapons:H,onUpdateCustomWeapons:P})}),n.$$.dirty[0]&8&&t(26,u=D.fullSet),n.$$.dirty[0]&268435464&&t(27,f=D.fullArray.reduce((x,Z)=>{const V=i[Z].type;return!Xg.has(Z)&&!Im.includes(V)&&x.add(V),x},new Set)),n.$$.dirty[0]&134217728&&t(14,h=new Set(f.size<4?Array.from(Xg):[])),n.$$.dirty[0]&67125248&&t(12,d=VL.filter(x=>u.has(x)&&!h.has(x))),n.$$.dirty[0]&67125248&&t(9,m=FL.filter(x=>u.has(x)&&!h.has(x))),n.$$.dirty[0]&67125248&&t(13,g=jL.filter(x=>u.has(x)&&!h.has(x))),n.$$.dirty[0]&67125248&&t(11,_=Y4.filter(x=>u.has(x)&&!h.has(x))),n.$$.dirty[0]&67125248&&t(10,v=HL.filter(x=>u.has(x)&&!h.has(x))),n.$$.dirty[0]&15872&&t(16,y=!(g!=null&&g.length)&&!(d!=null&&d.length)&&!(_!=null&&_.length)&&!(v!=null&&v.length)&&!(m!=null&&m.length))},[w,I,R,D,N,W,Y,O,L,m,v,_,d,g,h,U,y,c,a,l,o,r,s,A,H,P,u,f,i,K,te,q]}class Ore extends rt{constructor(e){super(),ot(this,e,Tre,Ire,It,{equippedWeapons:0,onToggleEquippedWeapons:23,equippedCombatSkills:1,equippedClass:2,allWeapons:3,weaponUses:4,onUpdateWeaponUses:5,customWeapons:24,onUpdateCustomWeapons:25,curSuperiorityDies:6,maxSuperiorityDie:7,setCurSuperiorityDie:8},null,[-1,-1])}}function T3(n){let e,t,i,s,r,o;return t=new yre({props:{stats:n[14],playerName:n[0],onUpdatePlayerStats:n[15],playerCrest:n[8],onUpdateCrest:n[9]}}),r=new pre({props:{stats:n[14],playerName:n[0],skillProficiency:n[23],skillBonus:n[22],onToggleSkillProficiency:n[24],equippedClass:n[31],masteredClasses:n[5]}}),{c(){e=C("div"),Te(t.$$.fragment),i=F(),s=C("div"),Te(r.$$.fragment),this.h()},l(l){e=k(l,"DIV",{class:!0});var a=T(e);De(t.$$.fragment,a),a.forEach(b),i=j(l),s=k(l,"DIV",{class:!0});var c=T(s);De(r.$$.fragment,c),c.forEach(b),this.h()},h(){S(e,"class","stats svelte-1qqh4vl"),S(s,"class","skills svelte-1qqh4vl")},m(l,a){X(l,e,a),Oe(t,e,null),X(l,i,a),X(l,s,a),Oe(r,s,null),o=!0},p(l,a){const c={};a[0]&16384&&(c.stats=l[14]),a[0]&1&&(c.playerName=l[0]),a[0]&32768&&(c.onUpdatePlayerStats=l[15]),a[0]&256&&(c.playerCrest=l[8]),a[0]&512&&(c.onUpdateCrest=l[9]),t.$set(c);const u={};a[0]&16384&&(u.stats=l[14]),a[0]&1&&(u.playerName=l[0]),a[0]&8388608&&(u.skillProficiency=l[23]),a[0]&4194304&&(u.skillBonus=l[22]),a[0]&16777216&&(u.onToggleSkillProficiency=l[24]),a[1]&1&&(u.equippedClass=l[31]),a[0]&32&&(u.masteredClasses=l[5]),r.$set(u)},i(l){o||(B(t.$$.fragment,l),B(r.$$.fragment,l),o=!0)},o(l){Q(t.$$.fragment,l),Q(r.$$.fragment,l),o=!1},d(l){l&&b(e),Re(t),l&&b(i),l&&b(s),Re(r)}}}function O3(n){let e,t,i,s,r,o,l,a;return t=new gW({props:{equippedClass:n[31],setEquippedClass:n[32],unlockedClasses:n[33],onUpdateUnlockedClasses:n[34],masteredClasses:n[5],customCombatSkills:n[16],onUpdateCustomCombatSkills:n[17],customWeapons:n[20],onUpdateCustomWeapons:n[21],customCombatArts:n[18],onUpdateCustomCombatArts:n[19],playerStats:n[14],onUpdatePlayerStats:n[15]}}),r=new Bse({props:{allCombatArts:n[4],equippedCombatArts:n[27],onToggleCombatArts:n[28],equippedWeapons:n[25],customCombatArts:n[18],onUpdateCustomCombatArts:n[19]}}),l=new zse({props:{allCombatSkills:n[3],equippedCombatSkills:n[29],onToggleCombatSkill:n[30],customCombatSkills:n[16],onUpdateCustomCombatSkills:n[17]}}),{c(){e=C("div"),Te(t.$$.fragment),i=F(),s=C("div"),Te(r.$$.fragment),o=F(),Te(l.$$.fragment),this.h()},l(c){e=k(c,"DIV",{class:!0});var u=T(e);De(t.$$.fragment,u),u.forEach(b),i=j(c),s=k(c,"DIV",{class:!0});var f=T(s);De(r.$$.fragment,f),o=j(f),De(l.$$.fragment,f),f.forEach(b),this.h()},h(){S(e,"class","classes svelte-1qqh4vl"),S(s,"class","arts svelte-1qqh4vl")},m(c,u){X(c,e,u),Oe(t,e,null),X(c,i,u),X(c,s,u),Oe(r,s,null),p(s,o),Oe(l,s,null),a=!0},p(c,u){const f={};u[1]&1&&(f.equippedClass=c[31]),u[1]&2&&(f.setEquippedClass=c[32]),u[1]&4&&(f.unlockedClasses=c[33]),u[1]&8&&(f.onUpdateUnlockedClasses=c[34]),u[0]&32&&(f.masteredClasses=c[5]),u[0]&65536&&(f.customCombatSkills=c[16]),u[0]&131072&&(f.onUpdateCustomCombatSkills=c[17]),u[0]&1048576&&(f.customWeapons=c[20]),u[0]&2097152&&(f.onUpdateCustomWeapons=c[21]),u[0]&262144&&(f.customCombatArts=c[18]),u[0]&524288&&(f.onUpdateCustomCombatArts=c[19]),u[0]&16384&&(f.playerStats=c[14]),u[0]&32768&&(f.onUpdatePlayerStats=c[15]),t.$set(f);const h={};u[0]&16&&(h.allCombatArts=c[4]),u[0]&134217728&&(h.equippedCombatArts=c[27]),u[0]&268435456&&(h.onToggleCombatArts=c[28]),u[0]&33554432&&(h.equippedWeapons=c[25]),u[0]&262144&&(h.customCombatArts=c[18]),u[0]&524288&&(h.onUpdateCustomCombatArts=c[19]),r.$set(h);const d={};u[0]&8&&(d.allCombatSkills=c[3]),u[0]&536870912&&(d.equippedCombatSkills=c[29]),u[0]&1073741824&&(d.onToggleCombatSkill=c[30]),u[0]&65536&&(d.customCombatSkills=c[16]),u[0]&131072&&(d.onUpdateCustomCombatSkills=c[17]),l.$set(d)},i(c){a||(B(t.$$.fragment,c),B(r.$$.fragment,c),B(l.$$.fragment,c),a=!0)},o(c){Q(t.$$.fragment,c),Q(r.$$.fragment,c),Q(l.$$.fragment,c),a=!1},d(c){c&&b(e),Re(t),c&&b(i),c&&b(s),Re(r),Re(l)}}}function R3(n){let e,t,i,s,r,o,l,a,c;return i=new Ore({props:{allWeapons:n[2],equippedWeapons:n[25],onToggleEquippedWeapons:n[26],equippedCombatSkills:n[29],equippedClass:n[31],weaponUses:n[6],onUpdateWeaponUses:n[7],curSuperiorityDies:n[41],maxSuperiorityDie:n[40],setCurSuperiorityDie:n[42],customWeapons:n[20],onUpdateCustomWeapons:n[21]}}),o=new lre({props:{stats:n[14],allWeapons:n[2],equippedClass:n[31],unlockedClasses:n[33],equippedCombatSkills:n[29],selectedWeapon:n[12],equippedWeapons:n[25],equippedCombatArts:n[27],allCombatSkills:n[3]}}),a=new tW({props:{playerName:n[0],equippedClass:n[31],equippedWeapons:n[25],equippedCombatArts:n[27],equippedCombatSkills:n[29],weaponUses:n[6],onUpdateWeaponUses:n[7],curSuperiorityDies:n[41],setCurSuperiorityDie:n[42],allWeapons:n[2],allCombatArts:n[4],playerCrest:n[8],playerStats:n[14],selectedWeapon:n[12],setSelectedWeapon:n[13],selectedCombatArt:n[10],setSelectedCombatArt:n[11]}}),{c(){e=C("div"),t=C("div"),Te(i.$$.fragment),s=F(),r=C("div"),Te(o.$$.fragment),l=F(),Te(a.$$.fragment),this.h()},l(u){e=k(u,"DIV",{class:!0});var f=T(e);t=k(f,"DIV",{class:!0});var h=T(t);De(i.$$.fragment,h),h.forEach(b),s=j(f),r=k(f,"DIV",{class:!0});var d=T(r);De(o.$$.fragment,d),l=j(d),De(a.$$.fragment,d),d.forEach(b),f.forEach(b),this.h()},h(){S(t,"class","weapons svelte-1qqh4vl"),S(r,"class","other svelte-1qqh4vl"),S(e,"class","rest svelte-1qqh4vl")},m(u,f){X(u,e,f),p(e,t),Oe(i,t,null),p(e,s),p(e,r),Oe(o,r,null),p(r,l),Oe(a,r,null),c=!0},p(u,f){const h={};f[0]&4&&(h.allWeapons=u[2]),f[0]&33554432&&(h.equippedWeapons=u[25]),f[0]&67108864&&(h.onToggleEquippedWeapons=u[26]),f[0]&536870912&&(h.equippedCombatSkills=u[29]),f[1]&1&&(h.equippedClass=u[31]),f[0]&64&&(h.weaponUses=u[6]),f[0]&128&&(h.onUpdateWeaponUses=u[7]),f[1]&1024&&(h.curSuperiorityDies=u[41]),f[1]&512&&(h.maxSuperiorityDie=u[40]),f[0]&1048576&&(h.customWeapons=u[20]),f[0]&2097152&&(h.onUpdateCustomWeapons=u[21]),i.$set(h);const d={};f[0]&16384&&(d.stats=u[14]),f[0]&4&&(d.allWeapons=u[2]),f[1]&1&&(d.equippedClass=u[31]),f[1]&4&&(d.unlockedClasses=u[33]),f[0]&536870912&&(d.equippedCombatSkills=u[29]),f[0]&4096&&(d.selectedWeapon=u[12]),f[0]&33554432&&(d.equippedWeapons=u[25]),f[0]&134217728&&(d.equippedCombatArts=u[27]),f[0]&8&&(d.allCombatSkills=u[3]),o.$set(d);const m={};f[0]&1&&(m.playerName=u[0]),f[1]&1&&(m.equippedClass=u[31]),f[0]&33554432&&(m.equippedWeapons=u[25]),f[0]&134217728&&(m.equippedCombatArts=u[27]),f[0]&536870912&&(m.equippedCombatSkills=u[29]),f[0]&64&&(m.weaponUses=u[6]),f[0]&128&&(m.onUpdateWeaponUses=u[7]),f[1]&1024&&(m.curSuperiorityDies=u[41]),f[0]&4&&(m.allWeapons=u[2]),f[0]&16&&(m.allCombatArts=u[4]),f[0]&256&&(m.playerCrest=u[8]),f[0]&16384&&(m.playerStats=u[14]),f[0]&4096&&(m.selectedWeapon=u[12]),f[0]&8192&&(m.setSelectedWeapon=u[13]),f[0]&1024&&(m.selectedCombatArt=u[10]),f[0]&2048&&(m.setSelectedCombatArt=u[11]),a.$set(m)},i(u){c||(B(i.$$.fragment,u),B(o.$$.fragment,u),B(a.$$.fragment,u),c=!0)},o(u){Q(i.$$.fragment,u),Q(o.$$.fragment,u),Q(a.$$.fragment,u),c=!1},d(u){u&&b(e),Re(i),Re(o),Re(a)}}}function D3(n){let e,t,i;return t=new eO({props:{chatEntries:n[35],spoilersOn:n[36],toggleSpoilersOn:n[37],alreadyRevealed:n[38],setAlreadyRevealed:n[39]}}),{c(){e=C("div"),Te(t.$$.fragment),this.h()},l(s){e=k(s,"DIV",{});var r=T(e);De(t.$$.fragment,r),r.forEach(b),this.h()},h(){ct(e,"grid-area",n[1]%3===1?"1 / classes/ 1 / rest":"1 / stats / 1 / arts")},m(s,r){X(s,e,r),Oe(t,e,null),i=!0},p(s,r){const o={};r[1]&16&&(o.chatEntries=s[35]),r[1]&32&&(o.spoilersOn=s[36]),r[1]&64&&(o.toggleSpoilersOn=s[37]),r[1]&128&&(o.alreadyRevealed=s[38]),r[1]&256&&(o.setAlreadyRevealed=s[39]),t.$set(o),r[0]&2&&ct(e,"grid-area",s[1]%3===1?"1 / classes/ 1 / rest":"1 / stats / 1 / arts")},i(s){i||(B(t.$$.fragment,s),i=!0)},o(s){Q(t.$$.fragment,s),i=!1},d(s){s&&b(e),Re(t)}}}function Rre(n){let e,t,i,s,r,o=n[1]%3!==2&&T3(n),l=n[1]%3===0&&O3(n),a=n[1]%3!==1&&R3(n),c=n[1]%3!==0&&D3(n);return{c(){e=C("div"),o&&o.c(),t=F(),l&&l.c(),i=F(),a&&a.c(),s=F(),c&&c.c(),this.h()},l(u){e=k(u,"DIV",{class:!0});var f=T(e);o&&o.l(f),t=j(f),l&&l.l(f),i=j(f),a&&a.l(f),s=j(f),c&&c.l(f),f.forEach(b),this.h()},h(){S(e,"class","container svelte-1qqh4vl")},m(u,f){X(u,e,f),o&&o.m(e,null),p(e,t),l&&l.m(e,null),p(e,i),a&&a.m(e,null),p(e,s),c&&c.m(e,null),r=!0},p(u,f){u[1]%3!==2?o?(o.p(u,f),f[0]&2&&B(o,1)):(o=T3(u),o.c(),B(o,1),o.m(e,t)):o&&(He(),Q(o,1,1,()=>{o=null}),qe()),u[1]%3===0?l?(l.p(u,f),f[0]&2&&B(l,1)):(l=O3(u),l.c(),B(l,1),l.m(e,i)):l&&(He(),Q(l,1,1,()=>{l=null}),qe()),u[1]%3!==1?a?(a.p(u,f),f[0]&2&&B(a,1)):(a=R3(u),a.c(),B(a,1),a.m(e,s)):a&&(He(),Q(a,1,1,()=>{a=null}),qe()),u[1]%3!==0?c?(c.p(u,f),f[0]&2&&B(c,1)):(c=D3(u),c.c(),B(c,1),c.m(e,null)):c&&(He(),Q(c,1,1,()=>{c=null}),qe())},i(u){r||(B(o),B(l),B(a),B(c),r=!0)},o(u){Q(o),Q(l),Q(a),Q(c),r=!1},d(u){u&&b(e),o&&o.d(),l&&l.d(),a&&a.d(),c&&c.d()}}}function Dre(n,e,t){let i,{playerName:s}=e,{homeMode:r}=e,{allWeapons:o}=e,{allCombatSkills:l}=e,{allCombatArts:a}=e,{masteredClasses:c}=e,{weaponUses:u}=e,{onUpdateWeaponUses:f}=e,{playerCrest:h}=e,{onUpdateCrest:d}=e,{selectedCombatArt:m}=e,{setSelectedCombatArt:g}=e,{selectedWeapon:_}=e,{setSelectedWeapon:v}=e,{playerStats:y}=e,{onUpdatePlayerStats:E}=e,{customCombatSkills:w}=e,{onUpdateCustomCombatSkills:A}=e,{customCombatArts:I}=e,{onUpdateCustomCombatArts:R}=e,{customWeapons:D}=e,{onUpdateCustomWeapons:N}=e,{playerSkillBonus:W}=e,{playerSkillProficiency:H}=e,{onToggleSkillProficiency:P}=e,{equippedWeapons:Y}=e,{onToggleEquippedWeapons:O}=e,{equippedCombatArts:L}=e,{onToggleCombatArts:U}=e,{equippedCombatSkills:K}=e,{onToggleCombatSkill:te}=e,{equippedClass:q}=e,{setEquippedClass:x}=e,{unlockedClasses:Z}=e,{onUpdateUnlockedClasses:V}=e,{chatEntries:ce}=e,{spoilersOn:pe}=e,{toggleSpoilersOn:oe}=e,{alreadyRevealed:ve}=e,{setAlreadyRevealed:Ne}=e,J={current:0},Ie=i;const Ue=re=>{t(41,Ie=re)};return n.$$set=re=>{"playerName"in re&&t(0,s=re.playerName),"homeMode"in re&&t(1,r=re.homeMode),"allWeapons"in re&&t(2,o=re.allWeapons),"allCombatSkills"in re&&t(3,l=re.allCombatSkills),"allCombatArts"in re&&t(4,a=re.allCombatArts),"masteredClasses"in re&&t(5,c=re.masteredClasses),"weaponUses"in re&&t(6,u=re.weaponUses),"onUpdateWeaponUses"in re&&t(7,f=re.onUpdateWeaponUses),"playerCrest"in re&&t(8,h=re.playerCrest),"onUpdateCrest"in re&&t(9,d=re.onUpdateCrest),"selectedCombatArt"in re&&t(10,m=re.selectedCombatArt),"setSelectedCombatArt"in re&&t(11,g=re.setSelectedCombatArt),"selectedWeapon"in re&&t(12,_=re.selectedWeapon),"setSelectedWeapon"in re&&t(13,v=re.setSelectedWeapon),"playerStats"in re&&t(14,y=re.playerStats),"onUpdatePlayerStats"in re&&t(15,E=re.onUpdatePlayerStats),"customCombatSkills"in re&&t(16,w=re.customCombatSkills),"onUpdateCustomCombatSkills"in re&&t(17,A=re.onUpdateCustomCombatSkills),"customCombatArts"in re&&t(18,I=re.customCombatArts),"onUpdateCustomCombatArts"in re&&t(19,R=re.onUpdateCustomCombatArts),"customWeapons"in re&&t(20,D=re.customWeapons),"onUpdateCustomWeapons"in re&&t(21,N=re.onUpdateCustomWeapons),"playerSkillBonus"in re&&t(22,W=re.playerSkillBonus),"playerSkillProficiency"in re&&t(23,H=re.playerSkillProficiency),"onToggleSkillProficiency"in re&&t(24,P=re.onToggleSkillProficiency),"equippedWeapons"in re&&t(25,Y=re.equippedWeapons),"onToggleEquippedWeapons"in re&&t(26,O=re.onToggleEquippedWeapons),"equippedCombatArts"in re&&t(27,L=re.equippedCombatArts),"onToggleCombatArts"in re&&t(28,U=re.onToggleCombatArts),"equippedCombatSkills"in re&&t(29,K=re.equippedCombatSkills),"onToggleCombatSkill"in re&&t(30,te=re.onToggleCombatSkill),"equippedClass"in re&&t(31,q=re.equippedClass),"setEquippedClass"in re&&t(32,x=re.setEquippedClass),"unlockedClasses"in re&&t(33,Z=re.unlockedClasses),"onUpdateUnlockedClasses"in re&&t(34,V=re.onUpdateUnlockedClasses),"chatEntries"in re&&t(35,ce=re.chatEntries),"spoilersOn"in re&&t(36,pe=re.spoilersOn),"toggleSpoilersOn"in re&&t(37,oe=re.toggleSpoilersOn),"alreadyRevealed"in re&&t(38,ve=re.alreadyRevealed),"setAlreadyRevealed"in re&&t(39,Ne=re.setAlreadyRevealed)},n.$$.update=()=>{n.$$.dirty[1]&4&&t(40,i=GL(Z)),n.$$.dirty[1]&4608&&J.current!==i&&(t(41,Ie=i),t(43,J.current=i,J))},[s,r,o,l,a,c,u,f,h,d,m,g,_,v,y,E,w,A,I,R,D,N,W,H,P,Y,O,L,U,K,te,q,x,Z,V,ce,pe,oe,ve,Ne,i,Ie,Ue,J]}class Nre extends rt{constructor(e){super(),ot(this,e,Dre,Rre,It,{playerName:0,homeMode:1,allWeapons:2,allCombatSkills:3,allCombatArts:4,masteredClasses:5,weaponUses:6,onUpdateWeaponUses:7,playerCrest:8,onUpdateCrest:9,selectedCombatArt:10,setSelectedCombatArt:11,selectedWeapon:12,setSelectedWeapon:13,playerStats:14,onUpdatePlayerStats:15,customCombatSkills:16,onUpdateCustomCombatSkills:17,customCombatArts:18,onUpdateCustomCombatArts:19,customWeapons:20,onUpdateCustomWeapons:21,playerSkillBonus:22,playerSkillProficiency:23,onToggleSkillProficiency:24,equippedWeapons:25,onToggleEquippedWeapons:26,equippedCombatArts:27,onToggleCombatArts:28,equippedCombatSkills:29,onToggleCombatSkill:30,equippedClass:31,setEquippedClass:32,unlockedClasses:33,onUpdateUnlockedClasses:34,chatEntries:35,spoilersOn:36,toggleSpoilersOn:37,alreadyRevealed:38,setAlreadyRevealed:39},null,[-1,-1])}}function N3(n,e,t){const i=n.slice();return i[21]=e[t],i}function P3(n){let e,t,i=n[5]%3===0?"All":n[5]%3===1?"RP":"COMBAT",s,r,o,l;return{c(){e=C("button"),t=z("MODE: "),s=z(i),this.h()},l(a){e=k(a,"BUTTON",{class:!0});var c=T(e);t=G(c,"MODE: "),s=G(c,i),c.forEach(b),this.h()},h(){S(e,"class",r=xe(n[0]==="HOME"?"active":"")+" svelte-fxg17h")},m(a,c){X(a,e,c),p(e,t),p(e,s),o||(l=Se(e,"click",n[13]),o=!0)},p(a,c){c&32&&i!==(i=a[5]%3===0?"All":a[5]%3===1?"RP":"COMBAT")&&Be(s,i),c&1&&r!==(r=xe(a[0]==="HOME"?"active":"")+" svelte-fxg17h")&&S(e,"class",r)},d(a){a&&b(e),o=!1,l()}}}function M3(n){let e,t=n[21]+"",i,s,r;return{c(){e=C("option"),i=z(t),this.h()},l(o){e=k(o,"OPTION",{});var l=T(e);i=G(l,t),l.forEach(b),this.h()},h(){e.__value=s=n[21],e.value=e.__value,e.selected=r=n[8]===n[21]},m(o,l){X(o,e,l),p(e,i)},p(o,l){l&512&&t!==(t=o[21]+"")&&Be(i,t),l&512&&s!==(s=o[21])&&(e.__value=s,e.value=e.__value),l&768&&r!==(r=o[8]===o[21])&&(e.selected=r)},d(o){o&&b(e)}}}function Pre(n){let e,t,i,s,r,o,l,a,c,u,f,h,d,m,g,_,v,y,E,w,A,I,R,D,N,W,H,P,Y,O,L,U,K,te,q,x,Z,V=n[0]==="HOME"&&P3(n),ce=n[9],pe=[];for(let oe=0;oe<ce.length;oe+=1)pe[oe]=M3(N3(n,ce,oe));return{c(){e=C("div"),t=C("textarea"),i=F(),s=C("button"),r=z("Home"),l=F(),V&&V.c(),a=F(),c=C("button"),u=z("Chat"),h=F(),d=C("button"),m=z("Weapon XP"),_=F(),v=C("select"),y=C("option"),E=z("Main Sheet");for(let oe=0;oe<pe.length;oe+=1)pe[oe].c();A=F(),I=C("button"),R=z("Sheet Editor"),N=F(),W=C("button"),H=z("Dice Editor"),Y=F(),O=C("button"),L=z("Other Sheets"),K=F(),te=C("button"),q=z("Export Sheet"),this.h()},l(oe){e=k(oe,"DIV",{class:!0});var ve=T(e);t=k(ve,"TEXTAREA",{type:!0,class:!0,rows:!0}),T(t).forEach(b),i=j(ve),s=k(ve,"BUTTON",{class:!0});var Ne=T(s);r=G(Ne,"Home"),Ne.forEach(b),l=j(ve),V&&V.l(ve),a=j(ve),c=k(ve,"BUTTON",{class:!0});var J=T(c);u=G(J,"Chat"),J.forEach(b),h=j(ve),d=k(ve,"BUTTON",{class:!0});var Ie=T(d);m=G(Ie,"Weapon XP"),Ie.forEach(b),_=j(ve),v=k(ve,"SELECT",{});var Ue=T(v);y=k(Ue,"OPTION",{});var re=T(y);E=G(re,"Main Sheet"),re.forEach(b);for(let de=0;de<pe.length;de+=1)pe[de].l(Ue);Ue.forEach(b),A=j(ve),I=k(ve,"BUTTON",{class:!0});var Le=T(I);R=G(Le,"Sheet Editor"),Le.forEach(b),N=j(ve),W=k(ve,"BUTTON",{class:!0});var fe=T(W);H=G(fe,"Dice Editor"),fe.forEach(b),Y=j(ve),O=k(ve,"BUTTON",{class:!0});var M=T(O);L=G(M,"Other Sheets"),M.forEach(b),K=j(ve),te=k(ve,"BUTTON",{class:!0});var ae=T(te);q=G(ae,"Export Sheet"),ae.forEach(b),ve.forEach(b),this.h()},h(){S(t,"type","text"),S(t,"class","name svelte-fxg17h"),t.value=n[2],S(t,"rows","3"),S(s,"class",o=xe(n[0]==="HOME"?"active":"")+" svelte-fxg17h"),S(c,"class",f=xe(n[0]==="ROLLS"?"active":"")+" svelte-fxg17h"),S(d,"class",g=xe(n[0]==="XP"?"active":"")+" svelte-fxg17h"),y.__value="sheet",y.value=y.__value,y.selected=w=n[8]==="sheet",S(I,"class",D=xe(n[0]==="EDITOR"?"active":"")+" svelte-fxg17h"),S(W,"class",P=xe(n[0]==="DICE_EDITOR"?"active":"")+" svelte-fxg17h"),S(O,"class",U=xe(n[0]==="OTHER_SHEETS"?"active":"")+" svelte-fxg17h"),S(te,"class","svelte-fxg17h"),S(e,"class","container svelte-fxg17h")},m(oe,ve){X(oe,e,ve),p(e,t),p(e,i),p(e,s),p(s,r),p(e,l),V&&V.m(e,null),p(e,a),p(e,c),p(c,u),p(e,h),p(e,d),p(d,m),p(e,_),p(e,v),p(v,y),p(y,E);for(let Ne=0;Ne<pe.length;Ne+=1)pe[Ne].m(v,null);p(e,A),p(e,I),p(I,R),p(e,N),p(e,W),p(W,H),p(e,Y),p(e,O),p(O,L),p(e,K),p(e,te),p(te,q),x||(Z=[Se(t,"input",n[11]),Se(s,"click",n[12]),Se(c,"click",n[14]),Se(d,"click",n[15]),Se(v,"change",n[16]),Se(I,"click",n[17]),Se(W,"click",n[18]),Se(O,"click",n[19]),Se(te,"click",n[20])],x=!0)},p(oe,[ve]){if(ve&4&&(t.value=oe[2]),ve&1&&o!==(o=xe(oe[0]==="HOME"?"active":"")+" svelte-fxg17h")&&S(s,"class",o),oe[0]==="HOME"?V?V.p(oe,ve):(V=P3(oe),V.c(),V.m(e,a)):V&&(V.d(1),V=null),ve&1&&f!==(f=xe(oe[0]==="ROLLS"?"active":"")+" svelte-fxg17h")&&S(c,"class",f),ve&1&&g!==(g=xe(oe[0]==="XP"?"active":"")+" svelte-fxg17h")&&S(d,"class",g),ve&256&&w!==(w=oe[8]==="sheet")&&(y.selected=w),ve&768){ce=oe[9];let Ne;for(Ne=0;Ne<ce.length;Ne+=1){const J=N3(oe,ce,Ne);pe[Ne]?pe[Ne].p(J,ve):(pe[Ne]=M3(J),pe[Ne].c(),pe[Ne].m(v,null))}for(;Ne<pe.length;Ne+=1)pe[Ne].d(1);pe.length=ce.length}ve&1&&D!==(D=xe(oe[0]==="EDITOR"?"active":"")+" svelte-fxg17h")&&S(I,"class",D),ve&1&&P!==(P=xe(oe[0]==="DICE_EDITOR"?"active":"")+" svelte-fxg17h")&&S(W,"class",P),ve&1&&U!==(U=xe(oe[0]==="OTHER_SHEETS"?"active":"")+" svelte-fxg17h")&&S(O,"class",U)},i:Xe,o:Xe,d(oe){oe&&b(e),V&&V.d(),Ht(pe,oe),x=!1,an(Z)}}}function Mre(n,e,t){let i,{currentPage:s}=e,{fullSheet:r}=e,{playerName:o}=e,{onUpdatePlayerName:l}=e,{onChangePage:a}=e,{homeMode:c}=e,{toggleHomeMode:u}=e,{onChangeCurSheet:f}=e,{curSheet:h}=e,{otherSheetNames:d}=e;const m=D=>l(D.currentTarget.value||""),g=()=>a("HOME"),_=()=>u(),v=()=>a("ROLLS"),y=()=>a("XP"),E=D=>f(D.currentTarget.value),w=()=>a("EDITOR"),A=()=>a("DICE_EDITOR"),I=()=>a("OTHER_SHEETS"),R=()=>K4(r);return n.$$set=D=>{"currentPage"in D&&t(0,s=D.currentPage),"fullSheet"in D&&t(1,r=D.fullSheet),"playerName"in D&&t(2,o=D.playerName),"onUpdatePlayerName"in D&&t(3,l=D.onUpdatePlayerName),"onChangePage"in D&&t(4,a=D.onChangePage),"homeMode"in D&&t(5,c=D.homeMode),"toggleHomeMode"in D&&t(6,u=D.toggleHomeMode),"onChangeCurSheet"in D&&t(7,f=D.onChangeCurSheet),"curSheet"in D&&t(8,h=D.curSheet),"otherSheetNames"in D&&t(10,d=D.otherSheetNames)},n.$$.update=()=>{n.$$.dirty&1024&&t(9,i=d.sort())},[s,r,o,l,a,c,u,f,h,i,d,m,g,_,v,y,E,w,A,I,R]}class Bre extends rt{constructor(e){super(),ot(this,e,Mre,Pre,It,{currentPage:0,fullSheet:1,playerName:2,onUpdatePlayerName:3,onChangePage:4,homeMode:5,toggleHomeMode:6,onChangeCurSheet:7,curSheet:8,otherSheetNames:10})}}const Lre=YN(null);const{window:Wre}=Ju;function B3(n){let e,t,i,s,r,o,l,a,c,u,f,h,d,m,g,_,v,y=n[1].closeButton&&L3(n);var E=n[2];function w(A){return{}}return E&&(o=Cn(E,w())),{c(){e=C("div"),t=C("div"),i=C("div"),y&&y.c(),s=F(),r=C("div"),o&&Te(o.$$.fragment),this.h()},l(A){e=k(A,"DIV",{class:!0,style:!0});var I=T(e);t=k(I,"DIV",{class:!0,style:!0});var R=T(t);i=k(R,"DIV",{class:!0,role:!0,"aria-modal":!0,"aria-label":!0,"aria-labelledby":!0,style:!0});var D=T(i);y&&y.l(D),s=j(D),r=k(D,"DIV",{id:!0,class:!0,style:!0});var N=T(r);o&&De(o.$$.fragment,N),N.forEach(b),D.forEach(b),R.forEach(b),I.forEach(b),this.h()},h(){S(r,"id","SPECIAL_modal-content"),S(r,"class",l=xe(n[1].classContent)+" svelte-1qgo808"),S(r,"style",n[9]),$e(r,"content",!n[0]),S(i,"class",a=xe(n[1].classWindow)+" svelte-1qgo808"),S(i,"role","dialog"),S(i,"aria-modal","true"),S(i,"aria-label",c=n[1].ariaLabelledBy?null:n[1].ariaLabel||null),S(i,"aria-labelledby",u=n[1].ariaLabelledBy||null),S(i,"style",n[8]),$e(i,"window",!n[0]),S(t,"class",h=xe(n[1].classWindowWrap)+" svelte-1qgo808"),S(t,"style",n[7]),$e(t,"wrap",!n[0]),S(e,"class",d=xe(n[1].classBg)+" svelte-1qgo808"),S(e,"style",n[6]),$e(e,"bg",!n[0])},m(A,I){X(A,e,I),p(e,t),p(t,i),y&&y.m(i,null),p(i,s),p(i,r),o&&Oe(o,r,null),n[48](i),n[49](t),n[50](e),g=!0,_||(v=[Se(i,"introstart",function(){Bn(n[13])&&n[13].apply(this,arguments)}),Se(i,"outrostart",function(){Bn(n[14])&&n[14].apply(this,arguments)}),Se(i,"introend",function(){Bn(n[15])&&n[15].apply(this,arguments)}),Se(i,"outroend",function(){Bn(n[16])&&n[16].apply(this,arguments)}),Se(e,"mousedown",n[20]),Se(e,"mouseup",n[21])],_=!0)},p(A,I){if(n=A,n[1].closeButton?y?(y.p(n,I),I[0]&2&&B(y,1)):(y=L3(n),y.c(),B(y,1),y.m(i,s)):y&&(He(),Q(y,1,1,()=>{y=null}),qe()),E!==(E=n[2])){if(o){He();const R=o;Q(R.$$.fragment,1,0,()=>{Re(R,1)}),qe()}E?(o=Cn(E,w()),Te(o.$$.fragment),B(o.$$.fragment,1),Oe(o,r,null)):o=null}(!g||I[0]&2&&l!==(l=xe(n[1].classContent)+" svelte-1qgo808"))&&S(r,"class",l),(!g||I[0]&512)&&S(r,"style",n[9]),(!g||I[0]&3)&&$e(r,"content",!n[0]),(!g||I[0]&2&&a!==(a=xe(n[1].classWindow)+" svelte-1qgo808"))&&S(i,"class",a),(!g||I[0]&2&&c!==(c=n[1].ariaLabelledBy?null:n[1].ariaLabel||null))&&S(i,"aria-label",c),(!g||I[0]&2&&u!==(u=n[1].ariaLabelledBy||null))&&S(i,"aria-labelledby",u),(!g||I[0]&256)&&S(i,"style",n[8]),(!g||I[0]&3)&&$e(i,"window",!n[0]),(!g||I[0]&2&&h!==(h=xe(n[1].classWindowWrap)+" svelte-1qgo808"))&&S(t,"class",h),(!g||I[0]&128)&&S(t,"style",n[7]),(!g||I[0]&3)&&$e(t,"wrap",!n[0]),(!g||I[0]&2&&d!==(d=xe(n[1].classBg)+" svelte-1qgo808"))&&S(e,"class",d),(!g||I[0]&64)&&S(e,"style",n[6]),(!g||I[0]&3)&&$e(e,"bg",!n[0])},i(A){g||(B(y),o&&B(o.$$.fragment,A),uu(()=>{f||(f=Ro(i,n[12],n[1].transitionWindowProps,!0)),f.run(1)}),uu(()=>{m||(m=Ro(e,n[11],n[1].transitionBgProps,!0)),m.run(1)}),g=!0)},o(A){Q(y),o&&Q(o.$$.fragment,A),f||(f=Ro(i,n[12],n[1].transitionWindowProps,!1)),f.run(0),m||(m=Ro(e,n[11],n[1].transitionBgProps,!1)),m.run(0),g=!1},d(A){A&&b(e),y&&y.d(),o&&Re(o),n[48](null),A&&f&&f.end(),n[49](null),n[50](null),A&&m&&m.end(),_=!1,an(v)}}}function L3(n){let e,t,i,s,r;const o=[Vre,Ure],l=[];function a(c,u){return u[0]&2&&(e=null),e==null&&(e=!!c[17](c[1].closeButton)),e?0:1}return t=a(n,[-1,-1,-1]),i=l[t]=o[t](n),{c(){i.c(),s=tt()},l(c){i.l(c),s=tt()},m(c,u){l[t].m(c,u),X(c,s,u),r=!0},p(c,u){let f=t;t=a(c,u),t===f?l[t].p(c,u):(He(),Q(l[f],1,1,()=>{l[f]=null}),qe(),i=l[t],i?i.p(c,u):(i=l[t]=o[t](c),i.c()),B(i,1),i.m(s.parentNode,s))},i(c){r||(B(i),r=!0)},o(c){Q(i),r=!1},d(c){l[t].d(c),c&&b(s)}}}function Ure(n){let e,t,i,s;return{c(){e=C("button"),this.h()},l(r){e=k(r,"BUTTON",{class:!0,"aria-label":!0,style:!0}),T(e).forEach(b),this.h()},h(){S(e,"class",t=xe(n[1].classCloseButton)+" svelte-1qgo808"),S(e,"aria-label","Close modal"),S(e,"style",n[10]),$e(e,"close",!n[0])},m(r,o){X(r,e,o),i||(s=Se(e,"click",n[18]),i=!0)},p(r,o){o[0]&2&&t!==(t=xe(r[1].classCloseButton)+" svelte-1qgo808")&&S(e,"class",t),o[0]&1024&&S(e,"style",r[10]),o[0]&3&&$e(e,"close",!r[0])},i:Xe,o:Xe,d(r){r&&b(e),i=!1,s()}}}function Vre(n){let e,t,i;var s=n[1].closeButton;function r(o){return{props:{onClose:o[18]}}}return s&&(e=Cn(s,r(n))),{c(){e&&Te(e.$$.fragment),t=tt()},l(o){e&&De(e.$$.fragment,o),t=tt()},m(o,l){e&&Oe(e,o,l),X(o,t,l),i=!0},p(o,l){if(s!==(s=o[1].closeButton)){if(e){He();const a=e;Q(a.$$.fragment,1,0,()=>{Re(a,1)}),qe()}s?(e=Cn(s,r(o)),Te(e.$$.fragment),B(e.$$.fragment,1),Oe(e,t.parentNode,t)):e=null}},i(o){i||(e&&B(e.$$.fragment,o),i=!0)},o(o){e&&Q(e.$$.fragment,o),i=!1},d(o){o&&b(t),e&&Re(e,o)}}}function Fre(n){let e,t,i,s,r=n[2]&&B3(n);const o=n[47].default,l=cs(o,n,n[46],null);return{c(){r&&r.c(),e=F(),l&&l.c()},l(a){r&&r.l(a),e=j(a),l&&l.l(a)},m(a,c){r&&r.m(a,c),X(a,e,c),l&&l.m(a,c),t=!0,i||(s=Se(Wre,"keydown",n[19]),i=!0)},p(a,c){a[2]?r?(r.p(a,c),c[0]&4&&B(r,1)):(r=B3(a),r.c(),B(r,1),r.m(e.parentNode,e)):r&&(He(),Q(r,1,1,()=>{r=null}),qe()),l&&l.p&&(!t||c[1]&32768)&&us(l,o,a,a[46],t?hs(o,a[46],c,null):fs(a[46]),null)},i(a){t||(B(r),B(l,a),t=!0)},o(a){Q(r),Q(l,a),t=!1},d(a){r&&r.d(a),a&&b(e),l&&l.d(a),i=!1,s()}}}function jre(n,e={}){return function(i){return new n({...i,props:{...e,...i.props}})}}function Hre(n,e,t){let{$$slots:i={},$$scope:s}=e;const r=Yu(),o=Zd;let{show:l=null}=e,{key:a=xi.MODAL}=e,{ariaLabel:c=null}=e,{ariaLabelledBy:u=null}=e,{closeButton:f=!0}=e,{closeOnEsc:h=!0}=e,{closeOnOuterClick:d=!0}=e,{styleBg:m={}}=e,{styleWindowWrap:g={}}=e,{styleWindow:_={}}=e,{styleContent:v={}}=e,{styleCloseButton:y={}}=e,{classBg:E=null}=e,{classWindowWrap:w=null}=e,{classWindow:A=null}=e,{classContent:I=null}=e,{classCloseButton:R=null}=e,{unstyled:D=!1}=e,{setContext:N=o}=e,{transitionBg:W=nO}=e,{transitionBgProps:H={duration:250}}=e,{transitionWindow:P=W}=e,{transitionWindowProps:Y=H}=e,{disableFocusTrap:O=!1}=e;const L={ariaLabel:c,ariaLabelledBy:u,closeButton:f,closeOnEsc:h,closeOnOuterClick:d,styleBg:m,styleWindowWrap:g,styleWindow:_,styleContent:v,styleCloseButton:y,classBg:E,classWindowWrap:w,classWindow:A,classContent:I,classCloseButton:R,transitionBg:W,transitionBgProps:H,transitionWindow:P,transitionWindowProps:Y,disableFocusTrap:O,unstyled:D};let U={...L},K=null,te,q,x,Z,V,ce,pe,oe,ve,Ne,J,Ie,Ue,re,Le;const fe=we=>we.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase(),M=we=>we?Object.keys(we).reduce((lt,je)=>`${lt}; ${fe(je)}: ${we[je]}`,""):"",ae=we=>!!(we&&we.constructor&&we.call&&we.apply),de=()=>{t(6,V=M(Object.assign({},{width:window.innerWidth,height:window.innerHeight},U.styleBg))),t(7,ce=M(U.styleWindowWrap)),t(8,pe=M(U.styleWindow)),t(9,oe=M(U.styleContent)),t(10,ve=M(U.styleCloseButton)),t(11,Ne=U.transitionBg),t(12,J=U.transitionWindow)},$=()=>{};let ee=$,ie=$,me=$,ue=$;const se=(we,lt={},je={},Qe={})=>{t(2,K=jre(we,lt)),t(1,U={...L,...je}),de();const ye=document.getElementById("SPECIAL_modal-content");if(ye)for(;ye.firstChild;)ye.removeChild(ye.firstChild);Me(),t(13,ee=Ze=>{Qe.onOpen&&Qe.onOpen(Ze),r("open"),r("opening")}),t(14,ie=Ze=>{Qe.onClose&&Qe.onClose(Ze),lt.SPECIAL_callOnClose&&lt.SPECIAL_callOnClose(),r("close"),r("closing")}),t(15,me=Ze=>{Qe.onOpened&&Qe.onOpened(Ze),r("opened")}),t(16,ue=Ze=>{Qe.onClosed&&Qe.onClosed(Ze),r("closed")})},_e=(we={})=>{K&&(t(14,ie=we.onClose||ie),t(16,ue=we.onClosed||ue),t(2,K=null),Ee())},ke=we=>{if(U.closeOnEsc&&K&&we.key==="Escape"&&(we.preventDefault(),_e()),K&&we.key==="Tab"&&!U.disableFocusTrap){const lt=x.querySelectorAll("*"),je=Array.from(lt).filter(ye=>ye.tabIndex>=0);let Qe=je.indexOf(document.activeElement);Qe===-1&&we.shiftKey&&(Qe=0),Qe+=je.length+(we.shiftKey?-1:1),Qe%=je.length,je[Qe].focus(),we.preventDefault()}},Ce=we=>{U.closeOnOuterClick&&(we.target===te||we.target===q)&&(Le=we.target)},ge=we=>{U.closeOnOuterClick&&we.target===Le&&(we.preventDefault(),_e())},Me=()=>{Z=window.scrollY,Ie=document.body.style.position,Ue=document.body.style.overflow,re=document.body.style.width,document.body.style.position="fixed",document.body.style.top=`-${Z}px`,document.body.style.overflow="hidden",document.body.style.width="100%"},Ee=()=>{document.body.style.position=Ie||"",document.body.style.top="",document.body.style.overflow=Ue||"",document.body.style.width=re||"",window.scrollTo(0,Z)};N(a,{open:se,close:_e});let Pe=!1;_r(()=>{Pe&&_e()}),Mi(()=>{t(45,Pe=!0)});function be(we){Vt[we?"unshift":"push"](()=>{x=we,t(5,x)})}function nt(we){Vt[we?"unshift":"push"](()=>{q=we,t(4,q)})}function Fe(we){Vt[we?"unshift":"push"](()=>{te=we,t(3,te)})}return n.$$set=we=>{"show"in we&&t(22,l=we.show),"key"in we&&t(23,a=we.key),"ariaLabel"in we&&t(24,c=we.ariaLabel),"ariaLabelledBy"in we&&t(25,u=we.ariaLabelledBy),"closeButton"in we&&t(26,f=we.closeButton),"closeOnEsc"in we&&t(27,h=we.closeOnEsc),"closeOnOuterClick"in we&&t(28,d=we.closeOnOuterClick),"styleBg"in we&&t(29,m=we.styleBg),"styleWindowWrap"in we&&t(30,g=we.styleWindowWrap),"styleWindow"in we&&t(31,_=we.styleWindow),"styleContent"in we&&t(32,v=we.styleContent),"styleCloseButton"in we&&t(33,y=we.styleCloseButton),"classBg"in we&&t(34,E=we.classBg),"classWindowWrap"in we&&t(35,w=we.classWindowWrap),"classWindow"in we&&t(36,A=we.classWindow),"classContent"in we&&t(37,I=we.classContent),"classCloseButton"in we&&t(38,R=we.classCloseButton),"unstyled"in we&&t(0,D=we.unstyled),"setContext"in we&&t(39,N=we.setContext),"transitionBg"in we&&t(40,W=we.transitionBg),"transitionBgProps"in we&&t(41,H=we.transitionBgProps),"transitionWindow"in we&&t(42,P=we.transitionWindow),"transitionWindowProps"in we&&t(43,Y=we.transitionWindowProps),"disableFocusTrap"in we&&t(44,O=we.disableFocusTrap),"$$scope"in we&&t(46,s=we.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&4194304|n.$$.dirty[1]&16384&&Pe&&(ae(l)?se(l):_e())},[D,U,K,te,q,x,V,ce,pe,oe,ve,Ne,J,ee,ie,me,ue,ae,_e,ke,Ce,ge,l,a,c,u,f,h,d,m,g,_,v,y,E,w,A,I,R,N,W,H,P,Y,O,Pe,s,i,be,nt,Fe]}class qre extends rt{constructor(e){super(),ot(this,e,Hre,Fre,It,{show:22,key:23,ariaLabel:24,ariaLabelledBy:25,closeButton:26,closeOnEsc:27,closeOnOuterClick:28,styleBg:29,styleWindowWrap:30,styleWindow:31,styleContent:32,styleCloseButton:33,classBg:34,classWindowWrap:35,classWindow:36,classContent:37,classCloseButton:38,unstyled:0,setContext:39,transitionBg:40,transitionBgProps:41,transitionWindow:42,transitionWindowProps:43,disableFocusTrap:44},null,[-1,-1,-1])}}function W3(n){let e,t;return{c(){e=C("div"),t=z(n[1])},l(i){e=k(i,"DIV",{});var s=T(e);t=G(s,n[1]),s.forEach(b)},m(i,s){X(i,e,s),p(e,t)},p(i,s){s&2&&Be(t,i[1])},d(i){i&&b(e)}}}function U3(n){let e,t,i;const s=[n[3]];var r=n[2];function o(l){let a={};for(let c=0;c<s.length;c+=1)a=Qr(a,s[c]);return{props:a}}return r&&(e=Cn(r,o())),{c(){e&&Te(e.$$.fragment),t=tt()},l(l){e&&De(e.$$.fragment,l),t=tt()},m(l,a){e&&Oe(e,l,a),X(l,t,a),i=!0},p(l,a){const c=a&8?Yr(s,[Zl(l[3])]):{};if(r!==(r=l[2])){if(e){He();const u=e;Q(u.$$.fragment,1,0,()=>{Re(u,1)}),qe()}r?(e=Cn(r,o()),Te(e.$$.fragment),B(e.$$.fragment,1),Oe(e,t.parentNode,t)):e=null}else r&&e.$set(c)},i(l){i||(e&&B(e.$$.fragment,l),i=!0)},o(l){e&&Q(e.$$.fragment,l),i=!1},d(l){l&&b(t),e&&Re(e,l)}}}function zre(n){let e,t,i,s,r,o,l,a,c,u,f,h=n[1]&&W3(n),d=n[2]&&U3(n);return{c(){e=C("div"),t=C("h2"),i=z(n[0]),s=F(),h&&h.c(),r=F(),d&&d.c(),o=F(),l=C("button"),a=z("Close"),this.h()},l(m){e=k(m,"DIV",{class:!0});var g=T(e);t=k(g,"H2",{});var _=T(t);i=G(_,n[0]),_.forEach(b),s=j(g),h&&h.l(g),r=j(g),d&&d.l(g),o=j(g),l=k(g,"BUTTON",{});var v=T(l);a=G(v,"Close"),v.forEach(b),g.forEach(b),this.h()},h(){ct(l,"width","100%"),S(e,"class","container svelte-1wlyb3r")},m(m,g){X(m,e,g),p(e,t),p(t,i),p(e,s),h&&h.m(e,null),p(e,r),d&&d.m(e,null),p(e,o),p(e,l),p(l,a),c=!0,u||(f=Se(l,"click",n[5]),u=!0)},p(m,[g]){(!c||g&1)&&Be(i,m[0]),m[1]?h?h.p(m,g):(h=W3(m),h.c(),h.m(e,r)):h&&(h.d(1),h=null),m[2]?d?(d.p(m,g),g&4&&B(d,1)):(d=U3(m),d.c(),B(d,1),d.m(e,o)):d&&(He(),Q(d,1,1,()=>{d=null}),qe())},i(m){c||(B(d),c=!0)},o(m){Q(d),c=!1},d(m){m&&b(e),h&&h.d(),d&&d.d(),u=!1,f()}}}function Gre(n,e,t){const{close:i}=Nn(xi.MODAL);let{header:s}=e,{content:r}=e,{childElement:o}=e,{childElementProps:l}=e;const a=()=>i();return n.$$set=c=>{"header"in c&&t(0,s=c.header),"content"in c&&t(1,r=c.content),"childElement"in c&&t(2,o=c.childElement),"childElementProps"in c&&t(3,l=c.childElementProps)},[s,r,o,l,i,a]}class Kre extends rt{constructor(e){super(),ot(this,e,Gre,zre,It,{header:0,content:1,childElement:2,childElementProps:3})}}function V3(n,e,t){const i=n.slice();return i[14]=e[t],i}function Xre(n){let e,t;return{c(){e=C("label"),t=z("Battalion Equipped?"),this.h()},l(i){e=k(i,"LABEL",{for:!0});var s=T(e);t=G(s,"Battalion Equipped?"),s.forEach(b),this.h()},h(){S(e,"for","battalion-equipped")},m(i,s){X(i,e,s),p(e,t)},p:Xe,d(i){i&&b(e)}}}function Qre(n){let e,t;return{c(){e=C("div"),t=z("If you have a battalion equipped, you will gain 50% of Max XP to the leadership skill"),this.h()},l(i){e=k(i,"DIV",{slot:!0});var s=T(e);t=G(s,"If you have a battalion equipped, you will gain 50% of Max XP to the leadership skill"),s.forEach(b),this.h()},h(){S(e,"slot","t"),ct(e,"white-space","break-spaces")},m(i,s){X(i,e,s),p(e,t)},p:Xe,d(i){i&&b(e)}}}function F3(n){let e,t,i=Math.round(n[1]/Object.keys(n[3]).length*(n[6][n[14]]||1))+"",s;return{c(){e=C("div"),t=z("+"),s=z(i)},l(r){e=k(r,"DIV",{});var o=T(e);t=G(o,"+"),s=G(o,i),o.forEach(b)},m(r,o){X(r,e,o),p(e,t),p(e,s)},p(r,o){o&74&&i!==(i=Math.round(r[1]/Object.keys(r[3]).length*(r[6][r[14]]||1))+"")&&Be(s,i)},d(r){r&&b(e)}}}function j3(n){let e,t,i,s,r,o,l=pr[n[14]]+"",a,c,u,f,h;function d(){return n[12](n[14])}let m=n[3][n[14]]&&F3(n);return{c(){e=C("div"),t=C("div"),i=C("input"),r=F(),o=C("label"),a=z(l),c=F(),m&&m.c(),u=F(),this.h()},l(g){e=k(g,"DIV",{});var _=T(e);t=k(_,"DIV",{});var v=T(t);i=k(v,"INPUT",{type:!0,name:!0,id:!0}),r=j(v),o=k(v,"LABEL",{for:!0});var y=T(o);a=G(y,l),y.forEach(b),v.forEach(b),c=j(_),m&&m.l(_),u=j(_),_.forEach(b),this.h()},h(){S(i,"type","checkbox"),S(i,"name","weapon"),S(i,"id",n[14]),i.checked=s=n[3][n[14]],S(o,"for",n[14]),ct(t,"display","flex"),ct(e,"display","flex"),ct(e,"flex-direction","column"),ct(e,"align-items","center")},m(g,_){X(g,e,_),p(e,t),p(t,i),p(t,r),p(t,o),p(o,a),p(e,c),m&&m.m(e,null),p(e,u),f||(h=Se(i,"click",d),f=!0)},p(g,_){n=g,_&8&&s!==(s=n[3][n[14]])&&(i.checked=s),n[3][n[14]]?m?m.p(n,_):(m=F3(n),m.c(),m.m(e,u)):m&&(m.d(1),m=null)},d(g){g&&b(e),m&&m.d(),f=!1,h()}}}function H3(n){let e,t=n1(n[4],{prefix:"Extra XP from equipped class:"})+"",i;return{c(){e=C("div"),i=z(t)},l(s){e=k(s,"DIV",{});var r=T(e);i=G(r,t),r.forEach(b)},m(s,r){X(s,e,r),p(e,i)},p(s,r){r&16&&t!==(t=n1(s[4],{prefix:"Extra XP from equipped class:"})+"")&&Be(i,t)},d(s){s&&b(e)}}}function Yre(n){let e,t,i,s,r,o,l,a,c,u,f,h=(Ul[n[0]]||"None")+"",d,m,g,_,v,y,E,w,A,I,R,D,N,W,H,P,Y,O,L,U,K,te,q,x,Z,V,ce,pe,oe,ve,Ne;I=new fi({props:{$$slots:{t:[Qre],default:[Xre]},$$scope:{ctx:n}}});let J=sy,Ie=[];for(let re=0;re<J.length;re+=1)Ie[re]=j3(V3(n,J,re));let Ue=n[5]&&H3(n);return{c(){e=C("div"),t=C("div"),i=C("span"),s=C("u"),r=z("Combat XP"),o=F(),l=C("span"),a=C("div"),c=z("Equipped Class:"),u=F(),f=C("b"),d=z(h),m=F(),g=C("span"),_=C("div"),v=z("Total XP for the Combat:"),y=F(),E=C("input"),w=F(),A=C("span"),Te(I.$$.fragment),R=F(),D=C("input"),N=F(),W=C("div"),H=C("fieldset"),P=C("legend"),Y=z("Select all weapons used in the combat"),O=F();for(let re=0;re<Ie.length;re+=1)Ie[re].c();L=F(),Ue&&Ue.c(),U=F(),K=C("div"),te=C("button"),q=z("Add combat XP"),Z=F(),V=C("button"),ce=z("Click to clear all"),this.h()},l(re){e=k(re,"DIV",{class:!0});var Le=T(e);t=k(Le,"DIV",{});var fe=T(t);i=k(fe,"SPAN",{});var M=T(i);s=k(M,"U",{});var ae=T(s);r=G(ae,"Combat XP"),ae.forEach(b),M.forEach(b),o=j(fe),l=k(fe,"SPAN",{});var de=T(l);a=k(de,"DIV",{});var $=T(a);c=G($,"Equipped Class:"),$.forEach(b),u=j(de),f=k(de,"B",{});var ee=T(f);d=G(ee,h),ee.forEach(b),de.forEach(b),m=j(fe),g=k(fe,"SPAN",{});var ie=T(g);_=k(ie,"DIV",{});var me=T(_);v=G(me,"Total XP for the Combat:"),me.forEach(b),y=j(ie),E=k(ie,"INPUT",{type:!0}),ie.forEach(b),w=j(fe),A=k(fe,"SPAN",{});var ue=T(A);De(I.$$.fragment,ue),R=j(ue),D=k(ue,"INPUT",{id:!0,type:!0}),ue.forEach(b),fe.forEach(b),N=j(Le),W=k(Le,"DIV",{});var se=T(W);H=k(se,"FIELDSET",{class:!0});var _e=T(H);P=k(_e,"LEGEND",{});var ke=T(P);Y=G(ke,"Select all weapons used in the combat"),ke.forEach(b),O=j(_e);for(let Ee=0;Ee<Ie.length;Ee+=1)Ie[Ee].l(_e);_e.forEach(b),L=j(se),Ue&&Ue.l(se),se.forEach(b),U=j(Le),K=k(Le,"DIV",{class:!0});var Ce=T(K);te=k(Ce,"BUTTON",{});var ge=T(te);q=G(ge,"Add combat XP"),ge.forEach(b),Z=j(Ce),V=k(Ce,"BUTTON",{});var Me=T(V);ce=G(Me,"Click to clear all"),Me.forEach(b),Ce.forEach(b),Le.forEach(b),this.h()},h(){ct(l,"display","flex"),ct(l,"column-gap","5px"),S(E,"type","number"),ct(E,"width","30px"),ct(g,"display","flex"),ct(g,"column-gap","5px"),S(D,"id","battalion-equipped"),S(D,"type","checkbox"),ct(A,"display","flex"),ct(A,"column-gap","5px"),ct(t,"display","flex"),ct(t,"flex-direction","column"),S(H,"class","svelte-we8b5v"),ct(W,"flex","1"),ct(W,"display","flex"),ct(W,"flex-direction","column"),te.disabled=x=!Object.keys(n[3]).length,V.disabled=pe=!Object.keys(n[3]).length,S(K,"class","button-container svelte-we8b5v"),S(e,"class","container svelte-we8b5v")},m(re,Le){X(re,e,Le),p(e,t),p(t,i),p(i,s),p(s,r),p(t,o),p(t,l),p(l,a),p(a,c),p(l,u),p(l,f),p(f,d),p(t,m),p(t,g),p(g,_),p(_,v),p(g,y),p(g,E),ds(E,n[1]),p(t,w),p(t,A),Oe(I,A,null),p(A,R),p(A,D),D.checked=n[2],p(e,N),p(e,W),p(W,H),p(H,P),p(P,Y),p(H,O);for(let fe=0;fe<Ie.length;fe+=1)Ie[fe].m(H,null);p(W,L),Ue&&Ue.m(W,null),p(e,U),p(e,K),p(K,te),p(te,q),p(K,Z),p(K,V),p(V,ce),oe=!0,ve||(Ne=[Se(E,"input",n[10]),Se(D,"change",n[11]),Se(te,"click",function(){Bn(n[7])&&n[7].apply(this,arguments)}),Se(V,"click",n[13])],ve=!0)},p(re,[Le]){n=re,(!oe||Le&1)&&h!==(h=(Ul[n[0]]||"None")+"")&&Be(d,h),Le&2&&dI(E.value)!==n[1]&&ds(E,n[1]);const fe={};if(Le&131072&&(fe.$$scope={dirty:Le,ctx:n}),I.$set(fe),Le&4&&(D.checked=n[2]),Le&74){J=sy;let M;for(M=0;M<J.length;M+=1){const ae=V3(n,J,M);Ie[M]?Ie[M].p(ae,Le):(Ie[M]=j3(ae),Ie[M].c(),Ie[M].m(H,null))}for(;M<Ie.length;M+=1)Ie[M].d(1);Ie.length=J.length}n[5]?Ue?Ue.p(n,Le):(Ue=H3(n),Ue.c(),Ue.m(W,null)):Ue&&(Ue.d(1),Ue=null),(!oe||Le&8&&x!==(x=!Object.keys(n[3]).length))&&(te.disabled=x),(!oe||Le&8&&pe!==(pe=!Object.keys(n[3]).length))&&(V.disabled=pe)},i(re){oe||(B(I.$$.fragment,re),oe=!0)},o(re){Q(I.$$.fragment,re),oe=!1},d(re){re&&b(e),Re(I),Ht(Ie,re),Ue&&Ue.d(),ve=!1,an(Ne)}}}function Jre(n,e,t){let i,s,r,o,{equippedClass:l}=e,{weaponXP:a}=e,{onWeaponXpChange:c}=e,u=24,f=!1,h={};function d(){u=dI(this.value),t(1,u)}function m(){f=this.checked,t(2,f)}const g=v=>{if(h[v]){const{[v]:y,...E}=h;t(3,h=E)}else t(3,h={...h,[v]:!0})},_=()=>t(3,h={});return n.$$set=v=>{"equippedClass"in v&&t(0,l=v.equippedClass),"weaponXP"in v&&t(8,a=v.weaponXP),"onWeaponXpChange"in v&&t(9,c=v.onWeaponXpChange)},n.$$.update=()=>{var v,y,E,w;n.$$.dirty&1&&t(4,i=((y=(v=Xt[l])==null?void 0:v.whenEquipped)==null?void 0:y.xpMooch)||{}),n.$$.dirty&1&&t(6,s=((w=(E=Xt[l])==null?void 0:E.whenEquipped)==null?void 0:w.xpMods)||{}),n.$$.dirty&16&&t(5,r=!!Object.keys(i).length),n.$$.dirty&894&&t(7,o=async()=>{const A=Object.keys(h),I=A.reduce((D,N)=>(D[N]=Math.round(u/A.length*(s[N]||1)),D),{});r&&Object.keys(i).forEach(D=>I[D]=Math.round(u*i[D]));const R=Object.keys(I);for(const D of R){const N=a[D]||{level:Ge.E,total:0,mastered:!1};await c(I[D],{type:D,curLevel:N.level,curXP:N.total,maxXP:Jg[N.level]})}if(f){const D=ne.LEADERSHIP,N=a[D]||{level:Ge.E,total:0,mastered:!1};c(Math.round(u/2),{type:D,curLevel:N.level,curXP:N.total,maxXP:Jg[N.level]})}})},[l,u,f,h,i,r,s,o,a,c,d,m,g,_]}class Zre extends rt{constructor(e){super(),ot(this,e,Jre,Yre,It,{equippedClass:0,weaponXP:8,onWeaponXpChange:9})}}function q3(n){let e,t;return{c(){e=C("div"),t=z(n[1])},l(i){e=k(i,"DIV",{});var s=T(e);t=G(s,n[1]),s.forEach(b)},m(i,s){X(i,e,s),p(e,t)},p(i,s){s&2&&Be(t,i[1])},d(i){i&&b(e)}}}function z3(n){let e,t;return{c(){e=C("div"),t=z("Nothing :)")},l(i){e=k(i,"DIV",{});var s=T(e);t=G(s,"Nothing :)"),s.forEach(b)},m(i,s){X(i,e,s),p(e,t)},d(i){i&&b(e)}}}function xre(n){let e,t,i,s=n[0]?"Always ":"",r,o,l,a,c=n[1]&&q3(n),u=!n[1]&&z3();return{c(){e=C("div"),t=C("div"),i=C("u"),r=z(s),o=z("Unlocks"),l=F(),c&&c.c(),a=F(),u&&u.c(),this.h()},l(f){e=k(f,"DIV",{class:!0});var h=T(e);t=k(h,"DIV",{});var d=T(t);i=k(d,"U",{});var m=T(i);r=G(m,s),o=G(m,"Unlocks"),m.forEach(b),d.forEach(b),l=j(h),c&&c.l(h),a=j(h),u&&u.l(h),h.forEach(b),this.h()},h(){S(e,"class","container")},m(f,h){X(f,e,h),p(e,t),p(t,i),p(i,r),p(i,o),p(e,l),c&&c.m(e,null),p(e,a),u&&u.m(e,null)},p(f,[h]){h&1&&s!==(s=f[0]?"Always ":"")&&Be(r,s),f[1]?c?c.p(f,h):(c=q3(f),c.c(),c.m(e,a)):c&&(c.d(1),c=null),f[1]?u&&(u.d(1),u=null):u||(u=z3(),u.c(),u.m(e,null))},i:Xe,o:Xe,d(f){f&&b(e),c&&c.d(),u&&u.d()}}}function $re(n,e,t){let i,{type:s}=e,{level:r}=e,{disablePickOne:o=!1}=e;return n.$$set=l=>{"type"in l&&t(2,s=l.type),"level"in l&&t(3,r=l.level),"disablePickOne"in l&&t(0,o=l.disablePickOne)},n.$$.update=()=>{var l;n.$$.dirty&13&&t(1,i=id((l=Xo[s])==null?void 0:l[r],o))},[o,i,s,r]}class dg extends rt{constructor(e){super(),ot(this,e,$re,xre,It,{type:2,level:3,disablePickOne:0})}}function G3(n,e,t){var l,a;const i=n.slice();i[44]=e[t],i[49]=t;const s=((l=i[2][i[44]])==null?void 0:l.total)||0;i[45]=s;const r=10;i[46]=r;const o=(a=i[2][i[44]])==null?void 0:a.mastered;return i[47]=o,i}function K3(n,e,t){var c,u,f;const i=n.slice();i[50]=e[t],i[49]=t;const s=((c=i[1][i[50]])==null?void 0:c.total)||0;i[45]=s;const r=((u=i[1][i[50]])==null?void 0:u.level)||Ge.E;i[51]=r;const o=oo[oo.findIndex(function(...d){return n[37](i[50],...d)})+1];i[52]=o;const l=id((f=Xo[i[50]])==null?void 0:f[i[52]]);i[53]=l;const a=Jg[i[51]];return i[46]=a,i}function X3(n,e,t){const i=n.slice();return i[55]=e[t],i}function Q3(n,e,t){const i=n.slice();return i[58]=e[t],i}function eoe(n){let e,t;return{c(){e=C("u"),t=z("Stat Modifier"),this.h()},l(i){e=k(i,"U",{class:!0});var s=T(e);t=G(s,"Stat Modifier"),s.forEach(b),this.h()},h(){S(e,"class","header svelte-3zpgt7"),ct(e,"text-align","center"),ct(e,"white-space","nowrap")},m(i,s){X(i,e,s),p(e,t)},p:Xe,d(i){i&&b(e)}}}function toe(n){let e,t;return{c(){e=C("div"),t=z("The stat that will be added when doing XP rolls."),this.h()},l(i){e=k(i,"DIV",{slot:!0});var s=T(e);t=G(s,"The stat that will be added when doing XP rolls."),s.forEach(b),this.h()},h(){S(e,"slot","t")},m(i,s){X(i,e,s),p(e,t)},p:Xe,d(i){i&&b(e)}}}function Y3(n){let e,t=yh[n[58]]+"",i,s;return{c(){e=C("option"),i=z(t),this.h()},l(r){e=k(r,"OPTION",{});var o=T(e);i=G(o,t),o.forEach(b),this.h()},h(){e.__value=Ge[n[58]],e.value=e.__value,e.selected=s=n[51]===n[58]},m(r,o){X(r,e,o),p(e,i)},p(r,o){o[0]&2&&s!==(s=r[51]===r[58])&&(e.selected=s)},d(r){r&&b(e)}}}function noe(n){let e,t,i,s,r=Object.keys(Ge),o=[];for(let a=0;a<r.length;a+=1)o[a]=Y3(Q3(n,r,a));function l(...a){return n[34](n[50],n[51],...a)}return{c(){e=C("div"),t=C("select");for(let a=0;a<o.length;a+=1)o[a].c();this.h()},l(a){e=k(a,"DIV",{class:!0});var c=T(e);t=k(c,"SELECT",{name:!0});var u=T(t);for(let f=0;f<o.length;f+=1)o[f].l(u);u.forEach(b),c.forEach(b),this.h()},h(){S(t,"name","weapon_level"),S(e,"class","content svelte-3zpgt7")},m(a,c){X(a,e,c),p(e,t);for(let u=0;u<o.length;u+=1)o[u].m(t,null);i||(s=[Se(t,"change",l),Se(t,"mouseover",n[15](n[49],!0)),Se(t,"mouseleave",n[15](-1,!0)),Se(t,"focus",n[15](n[49],!0))],i=!0)},p(a,c){if(n=a,c[0]&2){r=Object.keys(Ge);let u;for(u=0;u<r.length;u+=1){const f=Q3(n,r,u);o[u]?o[u].p(f,c):(o[u]=Y3(f),o[u].c(),o[u].m(t,null))}for(;u<o.length;u+=1)o[u].d(1);o.length=r.length}},d(a){a&&b(e),Ht(o,a),i=!1,an(s)}}}function ioe(n){var v;let e,t,i,s,r,o,l=(id((v=Xo[n[50]])==null?void 0:v[n[51]])||"Nothing")+"",a,c,u,f,h,d,m,g=(n[53]||"Nothing")+"",_;return{c(){e=C("div"),t=C("div"),i=C("u"),s=z("Current Level:"),r=F(),o=C("div"),a=z(l),c=F(),u=C("div"),f=C("u"),h=z("On Level Up:"),d=F(),m=C("div"),_=z(g),this.h()},l(y){e=k(y,"DIV",{slot:!0});var E=T(e);t=k(E,"DIV",{});var w=T(t);i=k(w,"U",{});var A=T(i);s=G(A,"Current Level:"),A.forEach(b),w.forEach(b),r=j(E),o=k(E,"DIV",{});var I=T(o);a=G(I,l),I.forEach(b),c=j(E),u=k(E,"DIV",{});var R=T(u);f=k(R,"U",{});var D=T(f);h=G(D,"On Level Up:"),D.forEach(b),R.forEach(b),d=j(E),m=k(E,"DIV",{});var N=T(m);_=G(N,g),N.forEach(b),E.forEach(b),this.h()},h(){S(e,"slot","t")},m(y,E){X(y,e,E),p(e,t),p(t,i),p(i,s),p(e,r),p(e,o),p(o,a),p(e,c),p(e,u),p(u,f),p(f,h),p(e,d),p(e,m),p(m,_)},p(y,E){var w;E[0]&2&&l!==(l=(id((w=Xo[y[50]])==null?void 0:w[y[51]])||"Nothing")+"")&&Be(a,l),E[0]&2&&g!==(g=(y[53]||"Nothing")+"")&&Be(_,g)},d(y){y&&b(e)}}}function J3(n){let e,t;return e=new fi({props:{tooltipStyle:is.BOTTOM_CENTER,$$slots:{t:[ioe],default:[noe]},$$scope:{ctx:n}}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,s){const r={};s[0]&8226|s[1]&1073741824&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function soe(n){let e,t,i,s=ro[n[50]],r=[];for(let l=0;l<s.length;l+=1)r[l]=Z3(X3(n,s,l));function o(...l){return n[35](n[50],...l)}return{c(){e=C("select");for(let l=0;l<r.length;l+=1)r[l].c();this.h()},l(l){e=k(l,"SELECT",{class:!0});var a=T(e);for(let c=0;c<r.length;c+=1)r[c].l(a);a.forEach(b),this.h()},h(){S(e,"class","content svelte-3zpgt7")},m(l,a){X(l,e,a);for(let c=0;c<r.length;c+=1)r[c].m(e,null);t||(i=[Se(e,"change",o),Se(e,"mouseover",n[15](n[49],!0)),Se(e,"mouseleave",n[15](-1,!0)),Se(e,"focus",n[15](n[49],!0))],t=!0)},p(l,a){if(n=l,a[0]&512){s=ro[n[50]];let c;for(c=0;c<s.length;c+=1){const u=X3(n,s,c);r[c]?r[c].p(u,a):(r[c]=Z3(u),r[c].c(),r[c].m(e,null))}for(;c<r.length;c+=1)r[c].d(1);r.length=s.length}},d(l){l&&b(e),Ht(r,l),t=!1,an(i)}}}function Z3(n){let e,t=Gs[n[55]]+"",i,s;return{c(){e=C("option"),i=z(t),this.h()},l(r){e=k(r,"OPTION",{});var o=T(e);i=G(o,t),o.forEach(b),this.h()},h(){e.__value=n[55],e.value=e.__value,e.selected=s=n[9][n[50]]===n[55]},m(r,o){X(r,e,o),p(e,i)},p(r,o){o[0]&512&&s!==(s=r[9][r[50]]===r[55])&&(e.selected=s)},d(r){r&&b(e)}}}function roe(n){let e,t=Gs[ro[n[50]][0]]+"",i;return{c(){e=C("span"),i=z(t),this.h()},l(s){e=k(s,"SPAN",{class:!0});var r=T(e);i=G(r,t),r.forEach(b),this.h()},h(){S(e,"class","content svelte-3zpgt7"),ct(e,"text-align","center"),ct(e,"cursor","default")},m(s,r){X(s,e,r),p(e,i)},p:Xe,d(s){s&&b(e)}}}function ooe(n){let e,t,i,s,r,o;function l(){return n[36](n[51],n[45],n[46],n[50])}return{c(){e=C("button"),t=z("Roll"),s=F(),this.h()},l(a){e=k(a,"BUTTON",{});var c=T(e);t=G(c,"Roll"),c.forEach(b),s=j(a),this.h()},h(){e.disabled=i=n[7]<=0},m(a,c){X(a,e,c),p(e,t),X(a,s,c),r||(o=[Se(e,"click",l),Se(e,"mouseover",n[15](n[49],!0)),Se(e,"mouseleave",n[15](-1,!0)),Se(e,"focus",n[15](n[49],!0))],r=!0)},p(a,c){n=a,c[0]&128&&i!==(i=n[7]<=0)&&(e.disabled=i)},d(a){a&&b(e),a&&b(s),r=!1,an(o)}}}function loe(n){let e,t,i,s,r,o,l="<= 1 Awful",a,c,u,f,h,d,m,g="2-5 Poor",_,v,y,E,w,A,I,R,D,N,W,H,P,Y,O=">= 16 Great",L,U,K,te,q,x,Z,V,ce,pe,oe,ve,Ne,J,Ie,Ue,re,Le,fe;return{c(){e=C("div"),t=C("div"),i=z("Roll for your lecture:"),s=F(),r=C("div"),o=C("span"),a=z(l),c=F(),u=C("span"),f=z("= 0 XP"),h=F(),d=C("div"),m=C("span"),_=z(g),v=F(),y=C("span"),E=z("= 6 XP"),w=F(),A=C("div"),I=C("span"),R=z("6-15 Good"),D=F(),N=C("span"),W=z("= 9 XP"),H=F(),P=C("div"),Y=C("span"),L=z(O),U=F(),K=C("span"),te=z("= 12 XP and +1 Roll (1 per session)"),q=F(),x=C("div"),Z=C("span"),V=z("Nat 1 Awful"),ce=F(),pe=C("span"),oe=z("= 0 XP"),ve=F(),Ne=C("div"),J=C("span"),Ie=z("Nat 20 Perfect"),Ue=F(),re=C("span"),Le=z("= 16 XP and +1 Roll"),fe=F(),this.h()},l(M){e=k(M,"DIV",{slot:!0});var ae=T(e);t=k(ae,"DIV",{});var de=T(t);i=G(de,"Roll for your lecture:"),de.forEach(b),s=j(ae),r=k(ae,"DIV",{class:!0});var $=T(r);o=k($,"SPAN",{class:!0});var ee=T(o);a=G(ee,l),ee.forEach(b),c=j($),u=k($,"SPAN",{class:!0});var ie=T(u);f=G(ie,"= 0 XP"),ie.forEach(b),$.forEach(b),h=j(ae),d=k(ae,"DIV",{class:!0});var me=T(d);m=k(me,"SPAN",{class:!0});var ue=T(m);_=G(ue,g),ue.forEach(b),v=j(me),y=k(me,"SPAN",{class:!0});var se=T(y);E=G(se,"= 6 XP"),se.forEach(b),me.forEach(b),w=j(ae),A=k(ae,"DIV",{class:!0});var _e=T(A);I=k(_e,"SPAN",{class:!0});var ke=T(I);R=G(ke,"6-15 Good"),ke.forEach(b),D=j(_e),N=k(_e,"SPAN",{class:!0});var Ce=T(N);W=G(Ce,"= 9 XP"),Ce.forEach(b),_e.forEach(b),H=j(ae),P=k(ae,"DIV",{class:!0});var ge=T(P);Y=k(ge,"SPAN",{class:!0});var Me=T(Y);L=G(Me,O),Me.forEach(b),U=j(ge),K=k(ge,"SPAN",{class:!0});var Ee=T(K);te=G(Ee,"= 12 XP and +1 Roll (1 per session)"),Ee.forEach(b),ge.forEach(b),q=j(ae),x=k(ae,"DIV",{class:!0});var Pe=T(x);Z=k(Pe,"SPAN",{class:!0});var be=T(Z);V=G(be,"Nat 1 Awful"),be.forEach(b),ce=j(Pe),pe=k(Pe,"SPAN",{class:!0});var nt=T(pe);oe=G(nt,"= 0 XP"),nt.forEach(b),Pe.forEach(b),ve=j(ae),Ne=k(ae,"DIV",{class:!0});var Fe=T(Ne);J=k(Fe,"SPAN",{class:!0});var we=T(J);Ie=G(we,"Nat 20 Perfect"),we.forEach(b),Ue=j(Fe),re=k(Fe,"SPAN",{class:!0});var lt=T(re);Le=G(lt,"= 16 XP and +1 Roll"),lt.forEach(b),Fe.forEach(b),fe=j(ae),ae.forEach(b),this.h()},h(){S(o,"class","svelte-3zpgt7"),S(u,"class","svelte-3zpgt7"),S(r,"class","test svelte-3zpgt7"),S(m,"class","svelte-3zpgt7"),S(y,"class","svelte-3zpgt7"),S(d,"class","test svelte-3zpgt7"),S(I,"class","svelte-3zpgt7"),S(N,"class","svelte-3zpgt7"),S(A,"class","test svelte-3zpgt7"),S(Y,"class","svelte-3zpgt7"),S(K,"class","svelte-3zpgt7"),S(P,"class","test svelte-3zpgt7"),S(Z,"class","svelte-3zpgt7"),S(pe,"class","svelte-3zpgt7"),S(x,"class","test svelte-3zpgt7"),S(J,"class","svelte-3zpgt7"),S(re,"class","svelte-3zpgt7"),S(Ne,"class","test svelte-3zpgt7"),S(e,"slot","t")},m(M,ae){X(M,e,ae),p(e,t),p(t,i),p(e,s),p(e,r),p(r,o),p(o,a),p(r,c),p(r,u),p(u,f),p(e,h),p(e,d),p(d,m),p(m,_),p(d,v),p(d,y),p(y,E),p(e,w),p(e,A),p(A,I),p(I,R),p(A,D),p(A,N),p(N,W),p(e,H),p(e,P),p(P,Y),p(Y,L),p(P,U),p(P,K),p(K,te),p(e,q),p(e,x),p(x,Z),p(Z,V),p(x,ce),p(x,pe),p(pe,oe),p(e,ve),p(e,Ne),p(Ne,J),p(J,Ie),p(Ne,Ue),p(Ne,re),p(re,Le),p(e,fe)},p:Xe,d(M){M&&b(e)}}}function x3(n){let e,t=pr[n[50]]+"",i,s,r,o,l,a,c=`${n[45]} / ${n[46]}`,u,f,h,d,m,g,_,v,y=n[5],E,w,A,I,R,D,N;function W(...O){return n[33](n[51],n[45],n[46],n[50],...O)}let H=J3(n),P=ro[n[50]].length>1&&soe(n),Y=ro[n[50]].length<=1&&roe(n);return I=new fi({props:{tooltipStyle:is.BOTTOM_CENTER,tooltipPositionerStyle:"z-index: 100",$$slots:{t:[loe],default:[ooe]},$$scope:{ctx:n}}}),{c(){e=C("div"),i=z(t),r=F(),o=C("div"),l=C("div"),a=C("span"),u=z(c),f=F(),h=C("div"),d=C("div"),m=z("XP to Add"),g=F(),_=C("input"),v=F(),H.c(),E=F(),P&&P.c(),w=F(),Y&&Y.c(),A=F(),Te(I.$$.fragment),this.h()},l(O){e=k(O,"DIV",{class:!0});var L=T(e);i=G(L,t),L.forEach(b),r=j(O),o=k(O,"DIV",{class:!0});var U=T(o);l=k(U,"DIV",{class:!0});var K=T(l);a=k(K,"SPAN",{class:!0});var te=T(a);u=G(te,c),te.forEach(b),K.forEach(b),U.forEach(b),f=j(O),h=k(O,"DIV",{class:!0});var q=T(h);d=k(q,"DIV",{class:!0});var x=T(d);m=G(x,"XP to Add"),x.forEach(b),g=j(q),_=k(q,"INPUT",{type:!0,class:!0}),q.forEach(b),v=j(O),H.l(O),E=j(O),P&&P.l(O),w=j(O),Y&&Y.l(O),A=j(O),De(I.$$.fragment,O),this.h()},h(){S(e,"class",s=xe(Zi("label content",{focused:n[11].i===n[49]&&n[11].weaponSide}))+" svelte-3zpgt7"),S(a,"class","svelte-3zpgt7"),S(l,"class","fill svelte-3zpgt7"),ct(l,"right",`${(n[46]-n[45])/n[46]*100}%`),S(o,"class","xp-bar content svelte-3zpgt7"),S(d,"class","prompt"),S(_,"type","number"),S(_,"class","svelte-3zpgt7"),S(h,"class","form content svelte-3zpgt7")},m(O,L){X(O,e,L),p(e,i),X(O,r,L),X(O,o,L),p(o,l),p(l,a),p(a,u),X(O,f,L),X(O,h,L),p(h,d),p(d,m),p(h,g),p(h,_),X(O,v,L),H.m(O,L),X(O,E,L),P&&P.m(O,L),X(O,w,L),Y&&Y.m(O,L),X(O,A,L),Oe(I,O,L),R=!0,D||(N=[Se(_,"mouseover",n[15](n[49],!0)),Se(_,"mouseleave",n[15](-1,!0)),Se(_,"focus",n[15](n[49],!0)),Se(_,"change",W)],D=!0)},p(O,L){n=O,(!R||L[0]&2048&&s!==(s=xe(Zi("label content",{focused:n[11].i===n[49]&&n[11].weaponSide}))+" svelte-3zpgt7"))&&S(e,"class",s),(!R||L[0]&2)&&c!==(c=`${n[45]} / ${n[46]}`)&&Be(u,c),L[0]&2&&ct(l,"right",`${(n[46]-n[45])/n[46]*100}%`),L[0]&32&&It(y,y=n[5])?(He(),Q(H,1,1,Xe),qe(),H=J3(n),H.c(),B(H,1),H.m(E.parentNode,E)):H.p(n,L),ro[n[50]].length>1&&P.p(n,L),ro[n[50]].length<=1&&Y.p(n,L);const U={};L[0]&4226|L[1]&1073741824&&(U.$$scope={dirty:L,ctx:n}),I.$set(U)},i(O){R||(B(H),B(I.$$.fragment,O),R=!0)},o(O){Q(H),Q(I.$$.fragment,O),R=!1},d(O){O&&b(e),O&&b(r),O&&b(o),O&&b(f),O&&b(h),O&&b(v),H.d(O),O&&b(E),P&&P.d(O),O&&b(w),Y&&Y.d(O),O&&b(A),Re(I,O),D=!1,an(N)}}}function aoe(n){let e,t,i;return{c(){e=C("span"),t=z("# of rolls remaining:"),this.h()},l(s){e=k(s,"SPAN",{class:!0});var r=T(e);t=G(r,"# of rolls remaining:"),r.forEach(b),this.h()},h(){S(e,"class",i=xe(Zi({"great-already":n[8]}))+" svelte-3zpgt7")},m(s,r){X(s,e,r),p(e,t)},p(s,r){r[0]&256&&i!==(i=xe(Zi({"great-already":s[8]}))+" svelte-3zpgt7")&&S(e,"class",i)},d(s){s&&b(e)}}}function coe(n){let e,t,i,s,r,o,l,a;return{c(){e=C("div"),t=C("span"),i=z(`This text turns orange when you have rolled a 16+ for this training session already.
						Meaning any more 16+ will not add 1 to your available training sessions.`),s=F(),r=C("br"),o=F(),l=C("span"),a=z("Will be reset when you click the Reset Rolls button"),this.h()},l(c){e=k(c,"DIV",{slot:!0});var u=T(e);t=k(u,"SPAN",{});var f=T(t);i=G(f,`This text turns orange when you have rolled a 16+ for this training session already.
						Meaning any more 16+ will not add 1 to your available training sessions.`),f.forEach(b),s=j(u),r=k(u,"BR",{}),o=j(u),l=k(u,"SPAN",{});var h=T(l);a=G(h,"Will be reset when you click the Reset Rolls button"),h.forEach(b),u.forEach(b),this.h()},h(){S(e,"slot","t")},m(c,u){X(c,e,u),p(e,t),p(t,i),p(e,s),p(e,r),p(e,o),p(e,l),p(l,a)},p:Xe,d(c){c&&b(e)}}}function $3(n){let e,t=Ul[n[44]]+"",i,s,r,o,l,a,c=`${n[45]} / ${n[46]}`,u,f,h,d,m,g,_,v,y,E,w,A,I,R,D,N;function W(...H){return n[40](n[45],n[46],n[44],...H)}return{c(){e=C("div"),i=z(t),r=F(),o=C("div"),l=C("div"),a=C("span"),u=z(c),h=F(),d=C("div"),m=C("div"),g=z("XP to Add"),_=F(),v=C("input"),y=F(),E=C("span"),w=F(),A=C("span"),I=F(),R=C("span"),this.h()},l(H){e=k(H,"DIV",{class:!0});var P=T(e);i=G(P,t),P.forEach(b),r=j(H),o=k(H,"DIV",{class:!0});var Y=T(o);l=k(Y,"DIV",{class:!0});var O=T(l);a=k(O,"SPAN",{class:!0});var L=T(a);u=G(L,c),L.forEach(b),O.forEach(b),Y.forEach(b),h=j(H),d=k(H,"DIV",{class:!0});var U=T(d);m=k(U,"DIV",{class:!0});var K=T(m);g=G(K,"XP to Add"),K.forEach(b),_=j(U),v=k(U,"INPUT",{type:!0,class:!0}),U.forEach(b),y=j(H),E=k(H,"SPAN",{}),T(E).forEach(b),w=j(H),A=k(H,"SPAN",{}),T(A).forEach(b),I=j(H),R=k(H,"SPAN",{}),T(R).forEach(b),this.h()},h(){S(e,"class",s=xe(Zi("label content",{focused:n[11].i===n[49]&&!n[11].weaponSide}))+" svelte-3zpgt7"),S(a,"class","svelte-3zpgt7"),S(l,"class",f=xe(`fill ${n[47]?"mastered":""}`)+" svelte-3zpgt7"),ct(l,"right",`${(n[46]-n[45])/n[46]*100}%`),S(o,"class","xp-bar content svelte-3zpgt7"),S(m,"class","prompt"),S(v,"type","number"),S(v,"class","svelte-3zpgt7"),S(d,"class","form svelte-3zpgt7")},m(H,P){X(H,e,P),p(e,i),X(H,r,P),X(H,o,P),p(o,l),p(l,a),p(a,u),X(H,h,P),X(H,d,P),p(d,m),p(m,g),p(d,_),p(d,v),X(H,y,P),X(H,E,P),X(H,w,P),X(H,A,P),X(H,I,P),X(H,R,P),D||(N=[Se(v,"mouseover",n[15](n[49],!1)),Se(v,"mouseleave",n[15](-1,!1)),Se(v,"focus",n[15](n[49],!1)),Se(v,"change",W)],D=!0)},p(H,P){n=H,P[0]&1&&t!==(t=Ul[n[44]]+"")&&Be(i,t),P[0]&2048&&s!==(s=xe(Zi("label content",{focused:n[11].i===n[49]&&!n[11].weaponSide}))+" svelte-3zpgt7")&&S(e,"class",s),P[0]&5&&c!==(c=`${n[45]} / ${n[46]}`)&&Be(u,c),P[0]&5&&f!==(f=xe(`fill ${n[47]?"mastered":""}`)+" svelte-3zpgt7")&&S(l,"class",f),P[0]&5&&ct(l,"right",`${(n[46]-n[45])/n[46]*100}%`)},d(H){H&&b(e),H&&b(r),H&&b(o),H&&b(h),H&&b(d),H&&b(y),H&&b(E),H&&b(w),H&&b(A),H&&b(I),H&&b(R),D=!1,an(N)}}}function uoe(n){let e,t,i,s,r,o,l,a,c,u,f,h,d,m,g,_,v,y,E,w,A,I,R,D,N,W,H,P,Y,O,L,U,K,te,q,x,Z,V,ce,pe,oe,ve,Ne,J,Ie,Ue,re,Le,fe,M,ae;g=new fi({props:{$$slots:{t:[toe],default:[eoe]},$$scope:{ctx:n}}});let de=Object.keys(ne),$=[];for(let ue=0;ue<de.length;ue+=1)$[ue]=x3(K3(n,de,ue));const ee=ue=>Q($[ue],1,1,()=>{$[ue]=null});w=new Zre({props:{equippedClass:n[4],weaponXP:n[1],onWeaponXpChange:n[10]}}),H=new fi({props:{$$slots:{t:[coe],default:[aoe]},$$scope:{ctx:n}}});let ie=n[0],me=[];for(let ue=0;ue<ie.length;ue+=1)me[ue]=$3(G3(n,ie,ue));return{c(){e=C("div"),t=C("div"),i=C("div"),s=C("u"),r=z("Type"),o=F(),l=C("u"),a=z("XP (Current XP / XP Required to Level Up)"),c=F(),u=C("span"),f=F(),h=C("u"),d=z("Lvl"),m=F(),Te(g.$$.fragment),_=F(),v=C("span"),y=F();for(let ue=0;ue<$.length;ue+=1)$[ue].c();E=F(),Te(w.$$.fragment),A=F(),I=C("div"),R=C("span"),D=C("u"),N=z("Automatic Training"),W=F(),Te(H.$$.fragment),P=F(),Y=C("input"),O=F(),L=C("button"),U=z("Reset Rolls"),K=F(),te=C("div"),q=C("u"),x=z("Class"),Z=F(),V=C("u"),ce=z("Class XP (Current Battles / Battles Required to Master)"),pe=F(),oe=C("span"),ve=F(),Ne=C("span"),J=F(),Ie=C("span"),Ue=F(),re=C("span"),Le=F();for(let ue=0;ue<me.length;ue+=1)me[ue].c();this.h()},l(ue){e=k(ue,"DIV",{class:!0});var se=T(e);t=k(se,"DIV",{class:!0});var _e=T(t);i=k(_e,"DIV",{class:!0});var ke=T(i);s=k(ke,"U",{class:!0});var Ce=T(s);r=G(Ce,"Type"),Ce.forEach(b),o=j(ke),l=k(ke,"U",{class:!0});var ge=T(l);a=G(ge,"XP (Current XP / XP Required to Level Up)"),ge.forEach(b),c=j(ke),u=k(ke,"SPAN",{class:!0}),T(u).forEach(b),f=j(ke),h=k(ke,"U",{class:!0});var Me=T(h);d=G(Me,"Lvl"),Me.forEach(b),m=j(ke),De(g.$$.fragment,ke),_=j(ke),v=k(ke,"SPAN",{class:!0}),T(v).forEach(b),y=j(ke);for(let je=0;je<$.length;je+=1)$[je].l(ke);ke.forEach(b),E=j(_e),De(w.$$.fragment,_e),A=j(_e),I=k(_e,"DIV",{class:!0});var Ee=T(I);R=k(Ee,"SPAN",{});var Pe=T(R);D=k(Pe,"U",{});var be=T(D);N=G(be,"Automatic Training"),be.forEach(b),Pe.forEach(b),W=j(Ee),De(H.$$.fragment,Ee),P=j(Ee),Y=k(Ee,"INPUT",{type:!0,class:!0}),O=j(Ee),L=k(Ee,"BUTTON",{});var nt=T(L);U=G(nt,"Reset Rolls"),nt.forEach(b),Ee.forEach(b),_e.forEach(b),K=j(se),te=k(se,"DIV",{class:!0});var Fe=T(te);q=k(Fe,"U",{class:!0});var we=T(q);x=G(we,"Class"),we.forEach(b),Z=j(Fe),V=k(Fe,"U",{class:!0});var lt=T(V);ce=G(lt,"Class XP (Current Battles / Battles Required to Master)"),lt.forEach(b),pe=j(Fe),oe=k(Fe,"SPAN",{class:!0}),T(oe).forEach(b),ve=j(Fe),Ne=k(Fe,"SPAN",{class:!0}),T(Ne).forEach(b),J=j(Fe),Ie=k(Fe,"SPAN",{class:!0}),T(Ie).forEach(b),Ue=j(Fe),re=k(Fe,"SPAN",{class:!0}),T(re).forEach(b),Le=j(Fe);for(let je=0;je<me.length;je+=1)me[je].l(Fe);Fe.forEach(b),se.forEach(b),this.h()},h(){S(s,"class","header svelte-3zpgt7"),ct(s,"justify-content","flex-start"),S(l,"class","header svelte-3zpgt7"),ct(l,"text-align","center"),ct(l,"white-space","nowrap"),S(u,"class","header svelte-3zpgt7"),S(h,"class","header svelte-3zpgt7"),ct(h,"text-align","center"),ct(h,"white-space","nowrap"),S(v,"class","header svelte-3zpgt7"),S(i,"class","category svelte-3zpgt7"),ct(R,"flex","1"),S(Y,"type","number"),Y.value=n[7],S(Y,"class","svelte-3zpgt7"),S(I,"class","auto-xp svelte-3zpgt7"),ct(I,"flex","1"),S(t,"class","weapon-xp-container svelte-3zpgt7"),S(q,"class","header svelte-3zpgt7"),ct(q,"justify-content","flex-start"),S(V,"class","header svelte-3zpgt7"),ct(V,"text-align","center"),ct(V,"white-space","nowrap"),ct(V,"justify-content","flex-start"),S(oe,"class","header svelte-3zpgt7"),S(Ne,"class","header svelte-3zpgt7"),ct(Ne,"padding","0"),S(Ie,"class","header svelte-3zpgt7"),ct(Ie,"padding","0"),S(re,"class","header svelte-3zpgt7"),ct(re,"padding","0"),S(te,"class","category class-xp-container svelte-3zpgt7"),S(e,"class","container svelte-3zpgt7")},m(ue,se){X(ue,e,se),p(e,t),p(t,i),p(i,s),p(s,r),p(i,o),p(i,l),p(l,a),p(i,c),p(i,u),p(i,f),p(i,h),p(h,d),p(i,m),Oe(g,i,null),p(i,_),p(i,v),p(i,y);for(let _e=0;_e<$.length;_e+=1)$[_e].m(i,null);p(t,E),Oe(w,t,null),p(t,A),p(t,I),p(I,R),p(R,D),p(D,N),p(I,W),Oe(H,I,null),p(I,P),p(I,Y),p(I,O),p(I,L),p(L,U),p(e,K),p(e,te),p(te,q),p(q,x),p(te,Z),p(te,V),p(V,ce),p(te,pe),p(te,oe),p(te,ve),p(te,Ne),p(te,J),p(te,Ie),p(te,Ue),p(te,re),p(te,Le);for(let _e=0;_e<me.length;_e+=1)me[_e].m(te,null);fe=!0,M||(ae=[Se(Y,"change",n[38]),Se(L,"click",n[39])],M=!0)},p(ue,se){const _e={};if(se[1]&1073741824&&(_e.$$scope={dirty:se,ctx:ue}),g.$set(_e),se[0]&64162){de=Object.keys(ne);let ge;for(ge=0;ge<de.length;ge+=1){const Me=K3(ue,de,ge);$[ge]?($[ge].p(Me,se),B($[ge],1)):($[ge]=x3(Me),$[ge].c(),B($[ge],1),$[ge].m(i,null))}for(He(),ge=de.length;ge<$.length;ge+=1)ee(ge);qe()}const ke={};se[0]&16&&(ke.equippedClass=ue[4]),se[0]&2&&(ke.weaponXP=ue[1]),se[0]&1024&&(ke.onWeaponXpChange=ue[10]),w.$set(ke);const Ce={};if(se[0]&256|se[1]&1073741824&&(Ce.$$scope={dirty:se,ctx:ue}),H.$set(Ce),(!fe||se[0]&128&&Y.value!==ue[7])&&(Y.value=ue[7]),se[0]&34893){ie=ue[0];let ge;for(ge=0;ge<ie.length;ge+=1){const Me=G3(ue,ie,ge);me[ge]?me[ge].p(Me,se):(me[ge]=$3(Me),me[ge].c(),me[ge].m(te,null))}for(;ge<me.length;ge+=1)me[ge].d(1);me.length=ie.length}},i(ue){if(!fe){B(g.$$.fragment,ue);for(let se=0;se<de.length;se+=1)B($[se]);B(w.$$.fragment,ue),B(H.$$.fragment,ue),fe=!0}},o(ue){Q(g.$$.fragment,ue),$=$.filter(Boolean);for(let se=0;se<$.length;se+=1)Q($[se]);Q(w.$$.fragment,ue),Q(H.$$.fragment,ue),fe=!1},d(ue){ue&&b(e),Re(g),Ht($,ue),Re(w),Re(H),Ht(me,ue),M=!1,an(ae)}}}const eI=4;function foe(n,e,t){let i,s,r,o,l,a;const{open:c}=Nn(xi.MODAL);let{unlockedClasses:u}=e,{weaponXP:f}=e,{classXP:h}=e,{playerSkillProficiency:d}=e,{playerSkillBonus:m}=e,{onUpdateClassXP:g}=e,{onUpdateWeaponXP:_}=e,{customCombatArts:v}=e,{customCombatSkills:y}=e,{customWeapons:E}=e,{playerStats:w}=e,{onUpdatePlayerStats:A}=e,{onUpdateCustomCombatArts:I}=e,{onUpdateCustomCombatSkills:R}=e,{onUpdateCustomWeapons:D}=e,{equippedClass:N}=e,{playerName:W}=e,H=!0,P=new Audio("success-sound.webm"),Y=new Audio("failure.webm"),O=new Audio("bell.webm"),L=new Audio("item-received.webm"),U=new Audio("success-sound.webm");const K=()=>{Y.pause(),O.pause(),L.pause(),U.pause()};let te=eI,q=!1,x=Object.keys(ro).reduce((re,Le)=>(re[Le]=ro[Le][0],re),{}),Z={i:-1,weaponSide:!0};const V=(re,Le)=>()=>{t(11,Z={i:re,weaponSide:Le})},ce=(re,Le,fe,M,ae)=>o(ae,{curLevel:re,curXP:Le,maxXP:fe,type:M}),pe=(re,Le,fe)=>{t(5,H=!H),l(fe,{type:re,curLevel:Le})},oe=(re,Le)=>{t(9,x={...x,[re]:Le.currentTarget.value})},ve=(re,Le,fe,M)=>a({curLevel:re,curXP:Le,maxXP:fe,type:M}),Ne=(re,Le)=>{var fe;return Le===((fe=f[re])==null?void 0:fe.level)},J=re=>t(7,te=parseInt(re.currentTarget.value)),Ie=()=>{t(7,te=eI),t(8,q=!1)},Ue=(re,Le,fe,M)=>{let ae=parseInt(M.currentTarget.value),de=re+ae;de>=Le&&(de=Le,t(6,P.currentTime=0,P),P.play()),g(fe,de,de===Le),M.currentTarget.value=""};return n.$$set=re=>{"unlockedClasses"in re&&t(0,u=re.unlockedClasses),"weaponXP"in re&&t(1,f=re.weaponXP),"classXP"in re&&t(2,h=re.classXP),"playerSkillProficiency"in re&&t(16,d=re.playerSkillProficiency),"playerSkillBonus"in re&&t(17,m=re.playerSkillBonus),"onUpdateClassXP"in re&&t(3,g=re.onUpdateClassXP),"onUpdateWeaponXP"in re&&t(18,_=re.onUpdateWeaponXP),"customCombatArts"in re&&t(19,v=re.customCombatArts),"customCombatSkills"in re&&t(20,y=re.customCombatSkills),"customWeapons"in re&&t(21,E=re.customWeapons),"playerStats"in re&&t(22,w=re.playerStats),"onUpdatePlayerStats"in re&&t(23,A=re.onUpdatePlayerStats),"onUpdateCustomCombatArts"in re&&t(24,I=re.onUpdateCustomCombatArts),"onUpdateCustomCombatSkills"in re&&t(25,R=re.onUpdateCustomCombatSkills),"onUpdateCustomWeapons"in re&&t(26,D=re.onUpdateCustomWeapons),"equippedClass"in re&&t(4,N=re.equippedClass),"playerName"in re&&t(27,W=re.playerName)},n.$$.update=()=>{n.$$.dirty[0]&133693512&&t(32,s=(re,Le,fe=()=>{},M=()=>{})=>{var de,$;K(),t(6,P.currentTime=0,P),P.play();const ae=($=(de=Xo[re][Le])==null?void 0:de.unlocks)==null?void 0:$.pickOne;ae?(c(Cu,{SPECIAL_callOnClose:()=>{M()},pickOne:ae,onSubmit:fe,reason:`Unlocked ${pr[re]} level ${yh[Le]}`,customCombatArts:v,customCombatSkills:y,customWeapons:E,playerStats:w,onUpdatePlayerStats:A,onUpdateClassXP:g,onUpdateCustomCombatArts:I,onUpdateCustomCombatSkills:R,onUpdateCustomWeapons:D,descriptionElement:dg,descriptionElementProps:{type:re,level:Le,disablePickOne:!0}}),c(Cu,{SPECIAL_callOnClose:()=>{M()},pickOne:ae,onSubmit:fe,reason:`Unlocked ${pr[re]} level ${yh[Le]}`,customCombatArts:v,customCombatSkills:y,customWeapons:E,playerStats:w,onUpdatePlayerStats:A,onUpdateClassXP:g,onUpdateCustomCombatArts:I,onUpdateCustomCombatSkills:R,onUpdateCustomWeapons:D,descriptionElement:dg,descriptionElementProps:{type:re,level:Le,disablePickOne:!0}})):c(Kre,{header:`Unlocked ${pr[re]} level ${yh[Le]}`,childElement:dg,childElementProps:{type:re,level:Le},SPECIAL_callOnClose:()=>{fe(),M()}})}),n.$$.dirty[0]&262240|n.$$.dirty[1]&2&&t(10,r=(re,{curLevel:Le,curXP:fe,maxXP:M,type:ae,onSuccess:de})=>new Promise($=>{let ee=Le,ie=fe+re;const me={current:!1},ue=()=>{_(ae,ie,ee),t(5,H=!H),de&&de(),$(!0),me.current=!0},se=()=>{me.current||(alert("Rolling back this Level Up b/c prompt was not completed"),$(!1))};ie>=M?(ee=oo[oo.indexOf(Le)+1]||Le,ie=ie-M,console.log("should play",P),s(ae,ee,ue,se)):ue()})),n.$$.dirty[0]&1024&&t(14,o=(re,Le)=>{const fe=re.currentTarget,M=parseInt(re.currentTarget.value);r(M,{...Le,onSuccess:()=>{fe.value=""}})}),n.$$.dirty[0]&262176|n.$$.dirty[1]&2&&t(13,l=(re,{type:Le,curLevel:fe})=>{const M=re.currentTarget.value,ae=()=>{_(Le,0,M)};!fe||oo.indexOf(fe)<oo.indexOf(M)?s(Le,M,ae):ae()}),n.$$.dirty[0]&2017658752|n.$$.dirty[1]&1&&t(12,a=async re=>{const{type:Le}=re,fe=x[Le],M=fe===on.ANIMAL_HANDLING,ae=(d[on.ANIMAL_HANDLING]*Z4||0)+(m[on.ANIMAL_HANDLING]||0),de=M?"Animal Handling":Gs[fe],$=M?er(w[Ke.WIS])+ae:er(w[fe]),ee=(se,_e)=>{let ke="",Ce=_e+$;return _e===20?ke="Perfect: 16 XP + 1 roll!":_e===1||Ce<=1?ke="Awful: 0 XP":Ce<=5?ke="Poor: 6 XP":Ce<=15?ke="Good: 9 XP":ke=`Great: 12 XP ${q?"":"+ 1 roll (once per session)"}`,`<div><span style=${_e===20?'"color: green"':_e===1?'"color: red"':""}>${_e}</span> ${os($,!0)}(${de}) = ${Ce}</div><div style='text-align:center'>${ke}</div>`},{value:ie}=await so([st.d20],{customResultBoxLabel:ee}),me=ie+$;km(i,{playerName:W,rollName:"XP Roll ("+pr[Le]+")",rollBonus:$,roll:me+"",rollTooltip:ie+os($)});let ue=te-1;K(),ie===20?(t(30,U.currentTime=0,U),U.play(),r(16,re),ue+=1):ie===1||me<=1?(t(28,Y.currentTime=0,Y),Y.play()):me<=5?(t(28,Y.currentTime=0,Y),Y.play(),r(6,re)):me<=15?(t(29,L.currentTime=0,L),L.play(),r(9,re)):(t(30,U.currentTime=0,U),U.play(),q||(ue+=1),r(12,re),t(8,q=!0)),t(7,te=ue)})},t(6,P.volume=.05,P),t(28,Y.volume=.05,Y),O.volume=.05,t(29,L.volume=.1,L),t(30,U.volume=.025,U),t(31,i=Nn(xi.DB)),[u,f,h,g,N,H,P,te,q,x,r,Z,a,l,o,V,d,m,_,v,y,E,w,A,I,R,D,W,Y,L,U,i,s,ce,pe,oe,ve,Ne,J,Ie,Ue]}class hoe extends rt{constructor(e){super(),ot(this,e,foe,uoe,It,{unlockedClasses:0,weaponXP:1,classXP:2,playerSkillProficiency:16,playerSkillBonus:17,onUpdateClassXP:3,onUpdateWeaponXP:18,customCombatArts:19,customCombatSkills:20,customWeapons:21,playerStats:22,onUpdatePlayerStats:23,onUpdateCustomCombatArts:24,onUpdateCustomCombatSkills:25,onUpdateCustomWeapons:26,equippedClass:4,playerName:27},null,[-1,-1])}}const doe=(n,e)=>moe(n.unlockedClasses,n.customWeapons,n.classXP,n.weaponXP,e),moe=Ub((n,e,t,i,s)=>{var g,_;const r=Array.from(Xg),o=new Set(Object.keys(e)),l=new Set(Object.keys(((_=(g=Xt[s])==null?void 0:g.whenEquipped)==null?void 0:_.weapons)||{})),a=new Set;n.forEach(v=>{var E,w,A,I,R;Object.keys(((w=(E=Xt[v])==null?void 0:E.unlocks)==null?void 0:w.weapons)||{}).forEach(D=>a.add(D));const y=(I=(A=Xt[v])==null?void 0:A.whenMastered)==null?void 0:I.weapons;y&&((R=t==null?void 0:t[v])!=null&&R.mastered)&&Object.keys(y).forEach(D=>a.add(D))}),o.delete("pickOne"),l.delete("pickOne"),a.delete("pickOne");const c=Object.keys(i).reduce((v,y)=>{const{level:E}=i[y]||{},w=Xo[y],A=E||Ge.E;if(!A)return v;let I=1/0;return oo.filter((D,N)=>(A===D&&(I=N),N<=I)).forEach(D=>{var W,H;const N=w[D];(W=N.removes)!=null&&W.weapons&&Object.keys(N.removes.weapons).forEach(P=>v.delete(P)),(H=N.unlocks)!=null&&H.weapons&&Object.keys(N.unlocks.weapons).forEach(P=>v.add(P))}),v},new Set),u=new Set([...r,...o,...l,...a,...c]),f=Object.keys(e).reduce((v,y)=>(v[y]={...nr[y],...v[y]},v),{...e}),h={...nr,...f},d=Object.keys(h).reduce((v,y)=>(v[y]=h[y].label,v),{}),m=Object.keys(h).reduce((v,y)=>(v[y]=h[y].type,v),{});return{customSet:o,equippedClassSet:l,classUnlockSet:a,fullSet:u,fullArray:Array.from(u),fullFeatures:h,weaponsToLabel:d,weaponsToType:m}}),poe=(n,e,t,i)=>goe(n.unlockedClasses,n.customCombatSkills,n.classXP,n.weaponXP,e,t,i),goe=(n,e,t,i,s,r,o)=>{var d,m;const l=new Set(Object.keys(e)),a=new Set(Object.keys(((m=(d=Xt[s])==null?void 0:d.whenEquipped)==null?void 0:m.combatSkills)||{})),c=new Set;n.forEach(g=>{var v,y,E,w,A;Object.keys(((y=(v=Xt[g])==null?void 0:v.unlocks)==null?void 0:y.combatSkills)||{}).forEach(I=>c.add(I));const _=(w=(E=Xt[g])==null?void 0:E.whenMastered)==null?void 0:w.combatSkills;_&&((A=t==null?void 0:t[g])!=null&&A.mastered)&&Object.keys(_).forEach(I=>c.add(I))});const u=Object.keys(i).reduce((g,_)=>{const{level:v}=i[_]||{},y=Xo[_],E=v||Ge.E;if(!E)return g;let w=1/0;return oo.filter((I,R)=>(E===I&&(w=R),R<=w)).forEach(I=>{var D,N;const R=y[I];(D=R.removes)!=null&&D.combatSkills&&Object.keys(R.removes.combatSkills).forEach(W=>g.delete(W)),(N=R.unlocks)!=null&&N.combatSkills&&Object.keys(R.unlocks.combatSkills).forEach(W=>g.add(W))}),g},new Set),f=new Set([...l,...a,...c,...u]);r.forEach(g=>{f.has(g)||o(g)});const h=Object.keys(e).reduce((g,_)=>(g[_]={...ys[_],...g[_]},g),{...e});return{customSet:l,equippedClassSet:a,classUnlockSet:c,weaponXPLevelSkillSet:u,fullSet:f,fullArray:Array.from(f).sort(),fullFeatures:{...ys,...h}}},voe=(n,e,t)=>boe(n.unlockedClasses,n.customCombatArts,n.classXP,n.weaponXP,e,t),boe=(n,e,t,i,s,r)=>{var _,v;const o=[],l=new Set(Object.keys(e)),a=new Set(Object.keys(((v=(_=Xt[s])==null?void 0:_.whenEquipped)==null?void 0:v.combatArts)||{})),c=new Set;n.forEach(y=>{var w,A,I,R,D;Object.keys(((A=(w=Xt[y])==null?void 0:w.unlocks)==null?void 0:A.combatArts)||{}).forEach(N=>c.add(N));const E=(R=(I=Xt[y])==null?void 0:I.whenMastered)==null?void 0:R.combatArts;E&&((D=t==null?void 0:t[y])!=null&&D.mastered)&&Object.keys(E).forEach(N=>c.add(N))});const u=Object.keys(i).reduce((y,E)=>{const{level:w}=i[E]||{},A=Xo[E],I=w||Ge.E;if(!I)return y;let R=1/0;return oo.filter((N,W)=>(I===N&&(R=W),W<=R)).forEach(N=>{var H;const W=A[N];(H=W.unlocks)!=null&&H.combatArts&&Object.keys(W.unlocks.combatArts).forEach(P=>y.add(P))}),y},new Set),f=new Set([...o,...l,...a,...c,...u,...r.has(We.GRAPPLER)?[ft.REPOSITION,ft.SWAP,ft.PULL_BACK,ft.SHOVE]:[]]),h=Object.keys(e).reduce((y,E)=>(y[E]={...Fr[E],...y[E]},y),{...e}),d={...Fr,...h},m=Object.keys(ft),g=Array.from(f).sort((y,E)=>{const w=m.indexOf(y),A=m.indexOf(E);return w<=A?-1:1});return{customSet:l,equippedClassSet:a,classUnlockSet:c,fullSet:f,fullArray:g,fullFeatures:d}};function tI(n){let e,t;return{c(){e=C("span"),t=z("EXAMPLE"),this.h()},l(i){e=k(i,"SPAN",{});var s=T(e);t=G(s,"EXAMPLE"),s.forEach(b),this.h()},h(){ct(e,"background-color",n[2]("themeColor"))},m(i,s){X(i,e,s),p(e,t)},p(i,s){s&4&&ct(e,"background-color",i[2]("themeColor"))},d(i){i&&b(e)}}}function nI(n){let e,t,i,s,r,o,l,a,c,u,f,h,d,m,g,_,v,y,E,w,A,I,R,D,N,W=n[2]("themeColor").length===7,H,P,Y,O,L,U,K,te,q,x=n[2]("gravity")+"",Z,V,ce,pe,oe,ve,Ne,J,Ie,Ue,re=n[2]("mass")+"",Le,fe,M,ae,de,$,ee,ie,me,ue,se=n[2]("scale")+"",_e,ke,Ce,ge,Me,Ee,Pe,be,nt,Fe,we=n[2]("friction")+"",lt,je,Qe,ye,Ze,Lt,vt,Ct,Ot,en,tn=n[2]("throwForce")+"",rn,cn,dt,Un,kn,Wn,In,En,li,ze,St=n[2]("startingHeight")+"",Gt,pn,gn,Jt=W&&tI(n);return{c(){e=C("div"),t=C("div"),i=C("button"),s=z("Test Settings"),r=F(),o=C("button"),l=z("Save Changes"),a=F(),c=C("div"),u=C("button"),f=z("Reset to Current Settings"),h=F(),d=C("button"),m=z("Reset Form to Current Settings"),g=F(),_=C("button"),v=z("Reset Form to Default Settings"),y=F(),E=C("div"),w=C("span"),A=z("Die Color (must be full RGB hex (e.g. #FF0000 for red))"),I=F(),R=C("input"),N=F(),Jt&&Jt.c(),H=F(),P=C("div"),Y=C("span"),O=z("Gravity"),L=F(),U=C("input"),te=F(),q=C("span"),Z=z(x),V=F(),ce=C("div"),pe=C("span"),oe=z("Mass"),ve=F(),Ne=C("input"),Ie=F(),Ue=C("span"),Le=z(re),fe=F(),M=C("div"),ae=C("span"),de=z("Scale"),$=F(),ee=C("input"),me=F(),ue=C("span"),_e=z(se),ke=F(),Ce=C("div"),ge=C("span"),Me=z("Friction"),Ee=F(),Pe=C("input"),nt=F(),Fe=C("span"),lt=z(we),je=F(),Qe=C("div"),ye=C("span"),Ze=z("Throw Force"),Lt=F(),vt=C("input"),Ot=F(),en=C("span"),rn=z(tn),cn=F(),dt=C("div"),Un=C("span"),kn=z("Starting Height"),Wn=F(),In=C("input"),li=F(),ze=C("span"),Gt=z(St),this.h()},l(it){e=k(it,"DIV",{class:!0});var Pt=T(e);t=k(Pt,"DIV",{class:!0});var gi=T(t);i=k(gi,"BUTTON",{});var Ii=T(i);s=G(Ii,"Test Settings"),Ii.forEach(b),r=j(gi),o=k(gi,"BUTTON",{});var Ls=T(o);l=G(Ls,"Save Changes"),Ls.forEach(b),gi.forEach(b),a=j(Pt),c=k(Pt,"DIV",{class:!0});var sn=T(c);u=k(sn,"BUTTON",{});var Os=T(u);f=G(Os,"Reset to Current Settings"),Os.forEach(b),h=j(sn),d=k(sn,"BUTTON",{});var Xs=T(d);m=G(Xs,"Reset Form to Current Settings"),Xs.forEach(b),g=j(sn),_=k(sn,"BUTTON",{});var An=T(_);v=G(An,"Reset Form to Default Settings"),An.forEach(b),sn.forEach(b),Pt.forEach(b),y=j(it),E=k(it,"DIV",{class:!0});var bt=T(E);w=k(bt,"SPAN",{});var he=T(w);A=G(he,"Die Color (must be full RGB hex (e.g. #FF0000 for red))"),he.forEach(b),I=j(bt),R=k(bt,"INPUT",{}),N=j(bt),Jt&&Jt.l(bt),bt.forEach(b),H=j(it),P=k(it,"DIV",{class:!0});var _t=T(P);Y=k(_t,"SPAN",{});var Zt=T(Y);O=G(Zt,"Gravity"),Zt.forEach(b),L=j(_t),U=k(_t,"INPUT",{type:!0,min:!0,max:!0,class:!0,id:!0}),te=j(_t),q=k(_t,"SPAN",{});var Et=T(q);Z=G(Et,x),Et.forEach(b),_t.forEach(b),V=j(it),ce=k(it,"DIV",{class:!0});var jt=T(ce);pe=k(jt,"SPAN",{});var Pn=T(pe);oe=G(Pn,"Mass"),Pn.forEach(b),ve=j(jt),Ne=k(jt,"INPUT",{type:!0,min:!0,max:!0,class:!0,id:!0}),Ie=j(jt),Ue=k(jt,"SPAN",{});var Vn=T(Ue);Le=G(Vn,re),Vn.forEach(b),jt.forEach(b),fe=j(it),M=k(it,"DIV",{class:!0});var ai=T(M);ae=k(ai,"SPAN",{});var Rs=T(ae);de=G(Rs,"Scale"),Rs.forEach(b),$=j(ai),ee=k(ai,"INPUT",{type:!0,min:!0,max:!0,class:!0,id:!0}),me=j(ai),ue=k(ai,"SPAN",{});var Hi=T(ue);_e=G(Hi,se),Hi.forEach(b),ai.forEach(b),ke=j(it),Ce=k(it,"DIV",{class:!0});var Fn=T(Ce);ge=k(Fn,"SPAN",{});var Zr=T(ge);Me=G(Zr,"Friction"),Zr.forEach(b),Ee=j(Fn),Pe=k(Fn,"INPUT",{type:!0,min:!0,max:!0,class:!0,id:!0}),nt=j(Fn),Fe=k(Fn,"SPAN",{});var bs=T(Fe);lt=G(bs,we),bs.forEach(b),Fn.forEach(b),je=j(it),Qe=k(it,"DIV",{class:!0});var Ti=T(Qe);ye=k(Ti,"SPAN",{});var ar=T(ye);Ze=G(ar,"Throw Force"),ar.forEach(b),Lt=j(Ti),vt=k(Ti,"INPUT",{type:!0,min:!0,max:!0,class:!0,id:!0}),Ot=j(Ti),en=k(Ti,"SPAN",{});var ll=T(en);rn=G(ll,tn),ll.forEach(b),Ti.forEach(b),cn=j(it),dt=k(it,"DIV",{class:!0});var cr=T(dt);Un=k(cr,"SPAN",{});var Cr=T(Un);kn=G(Cr,"Starting Height"),Cr.forEach(b),Wn=j(cr),In=k(cr,"INPUT",{type:!0,min:!0,max:!0,class:!0,id:!0}),li=j(cr),ze=k(cr,"SPAN",{});var al=T(ze);Gt=G(al,St),al.forEach(b),cr.forEach(b),this.h()},h(){S(t,"class",""),S(c,"class",""),S(e,"class","button-container svelte-nnvf4p"),R.value=D=n[2]("themeColor","#FF0000"),S(E,"class","field"),S(U,"type","range"),S(U,"min","1"),S(U,"max","10"),S(U,"class","slider"),U.value=K=n[2]("gravity"),S(U,"id","myRange"),S(P,"class","field"),S(Ne,"type","range"),S(Ne,"min","1"),S(Ne,"max","20"),S(Ne,"class","slider"),Ne.value=J=n[2]("mass"),S(Ne,"id","myRange"),S(ce,"class","field"),S(ee,"type","range"),S(ee,"min","1"),S(ee,"max","10"),S(ee,"class","slider"),ee.value=ie=n[2]("scale"),S(ee,"id","myRange"),S(M,"class","field"),S(Pe,"type","range"),S(Pe,"min","1"),S(Pe,"max","10"),S(Pe,"class","slider"),Pe.value=be=n[2]("friction")*10,S(Pe,"id","myRange"),S(Ce,"class","field"),S(vt,"type","range"),S(vt,"min","0"),S(vt,"max","15"),S(vt,"class","slider"),vt.value=Ct=n[2]("throwForce"),S(vt,"id","myRange"),S(Qe,"class","field"),S(In,"type","range"),S(In,"min","1"),S(In,"max","15"),S(In,"class","slider"),In.value=En=n[2]("startingHeight"),S(In,"id","myRange"),S(dt,"class","field")},m(it,Pt){X(it,e,Pt),p(e,t),p(t,i),p(i,s),p(t,r),p(t,o),p(o,l),p(e,a),p(e,c),p(c,u),p(u,f),p(c,h),p(c,d),p(d,m),p(c,g),p(c,_),p(_,v),X(it,y,Pt),X(it,E,Pt),p(E,w),p(w,A),p(E,I),p(E,R),p(E,N),Jt&&Jt.m(E,null),X(it,H,Pt),X(it,P,Pt),p(P,Y),p(Y,O),p(P,L),p(P,U),p(P,te),p(P,q),p(q,Z),X(it,V,Pt),X(it,ce,Pt),p(ce,pe),p(pe,oe),p(ce,ve),p(ce,Ne),p(ce,Ie),p(ce,Ue),p(Ue,Le),X(it,fe,Pt),X(it,M,Pt),p(M,ae),p(ae,de),p(M,$),p(M,ee),p(M,me),p(M,ue),p(ue,_e),X(it,ke,Pt),X(it,Ce,Pt),p(Ce,ge),p(ge,Me),p(Ce,Ee),p(Ce,Pe),p(Ce,nt),p(Ce,Fe),p(Fe,lt),X(it,je,Pt),X(it,Qe,Pt),p(Qe,ye),p(ye,Ze),p(Qe,Lt),p(Qe,vt),p(Qe,Ot),p(Qe,en),p(en,rn),X(it,cn,Pt),X(it,dt,Pt),p(dt,Un),p(Un,kn),p(dt,Wn),p(dt,In),p(dt,li),p(dt,ze),p(ze,Gt),pn||(gn=[Se(i,"click",n[6]),Se(o,"click",n[7]),Se(u,"click",n[8]),Se(d,"click",n[9]),Se(_,"click",n[10]),Se(R,"input",n[11]),Se(U,"input",n[12]),Se(Ne,"input",n[13]),Se(ee,"input",n[14]),Se(Pe,"input",n[15]),Se(vt,"input",n[16]),Se(In,"input",n[17])],pn=!0)},p(it,Pt){Pt&4&&D!==(D=it[2]("themeColor","#FF0000"))&&R.value!==D&&(R.value=D),Pt&4&&(W=it[2]("themeColor").length===7),W?Jt?Jt.p(it,Pt):(Jt=tI(it),Jt.c(),Jt.m(E,null)):Jt&&(Jt.d(1),Jt=null),Pt&4&&K!==(K=it[2]("gravity"))&&(U.value=K),Pt&4&&x!==(x=it[2]("gravity")+"")&&Be(Z,x),Pt&4&&J!==(J=it[2]("mass"))&&(Ne.value=J),Pt&4&&re!==(re=it[2]("mass")+"")&&Be(Le,re),Pt&4&&ie!==(ie=it[2]("scale"))&&(ee.value=ie),Pt&4&&se!==(se=it[2]("scale")+"")&&Be(_e,se),Pt&4&&be!==(be=it[2]("friction")*10)&&(Pe.value=be),Pt&4&&we!==(we=it[2]("friction")+"")&&Be(lt,we),Pt&4&&Ct!==(Ct=it[2]("throwForce"))&&(vt.value=Ct),Pt&4&&tn!==(tn=it[2]("throwForce")+"")&&Be(rn,tn),Pt&4&&En!==(En=it[2]("startingHeight"))&&(In.value=En),Pt&4&&St!==(St=it[2]("startingHeight")+"")&&Be(Gt,St)},d(it){it&&b(e),it&&b(y),it&&b(E),Jt&&Jt.d(),it&&b(H),it&&b(P),it&&b(V),it&&b(ce),it&&b(fe),it&&b(M),it&&b(ke),it&&b(Ce),it&&b(je),it&&b(Qe),it&&b(cn),it&&b(dt),pn=!1,an(gn)}}}function _oe(n){let e,t,i,s,r=n[1],o=nI(n);return{c(){e=C("div"),t=C("h1"),i=z("Update how your dice rolls look"),s=F(),o.c(),this.h()},l(l){e=k(l,"DIV",{class:!0});var a=T(e);t=k(a,"H1",{});var c=T(t);i=G(c,"Update how your dice rolls look"),c.forEach(b),s=j(a),o.l(a),a.forEach(b),this.h()},h(){S(e,"class","container")},m(l,a){X(l,e,a),p(e,t),p(t,i),p(e,s),o.m(e,null)},p(l,[a]){a&2&&It(r,r=l[1])?(o.d(1),o=nI(l),o.c(),o.m(e,null)):o.p(l,a)},i:Xe,o:Xe,d(l){l&&b(e),o.d(l)}}}function yoe(n,e,t){let i,s,r=null,o={},l={},a=0;Mi(()=>{R0(()=>import("../../chunks/dice-box.es-150bdd15.js"),["../../chunks/dice-box.es-150bdd15.js","../../chunks/preload-helper-41c905a7.js"],import.meta.url).then(I=>{t(4,r=I.default)}),c()});const c=()=>{try{t(5,l=JSON.parse(localStorage.getItem("diceBoxOptions")||"{}"))}catch(I){console.log(I)}return l},u=()=>{i().then(()=>{so([st.d20])})},f=()=>{i(!0)},h=()=>{i(!1,!0).then(()=>{so([st.d20])})},d=()=>{t(0,o={}),t(1,a+=1)},m=()=>{t(0,o={...jc}),t(1,a+=1)},g=I=>{t(0,o.themeColor=I.currentTarget.value,o)},_=I=>t(0,o.gravity=parseInt(I.currentTarget.value),o),v=I=>t(0,o.mass=parseInt(I.currentTarget.value),o),y=I=>t(0,o.scale=parseInt(I.currentTarget.value),o),E=I=>t(0,o.friction=parseInt(I.currentTarget.value)/10,o),w=I=>t(0,o.throwForce=parseInt(I.currentTarget.value),o),A=I=>t(0,o.startingHeight=parseInt(I.currentTarget.value),o);return n.$$.update=()=>{n.$$.dirty&17&&t(3,i=(I=!1,R=!1)=>{const D=R?{}:o;let N;try{N=c()}catch(H){console.log(H)}if(I)try{localStorage.setItem("diceBoxOptions",JSON.stringify({...N,...D})),t(5,l={...N,...D})}catch(H){console.log(H)}const W=new r("#dice-box",{...jc,...N,...D});return window.diceBoxContainer.removeChild(document.getElementById("dice-canvas")),W.init().then(()=>{window.diceBox=W})}),n.$$.dirty&33&&t(2,s=(I,R=1)=>{const D=o[I]!==void 0?o[I]:null;if(D!==null)return D;const N=l[I]!==void 0?l[I]:null;if(N!==null)return N;const W=jc[I]!==void 0?jc[I]:null;return W!==null?W:R})},[o,a,s,i,r,l,u,f,h,d,m,g,_,v,y,E,w,A]}class Soe extends rt{constructor(e){super(),ot(this,e,yoe,_oe,It,{})}}var T0={},Eoe={get exports(){return T0},set exports(n){T0=n}};(function(n,e){(function(t,i){i()})(eo,function(){function t(c,u){return typeof u>"u"?u={autoBom:!1}:typeof u!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),u={autoBom:!u}),u.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c}function i(c,u,f){var h=new XMLHttpRequest;h.open("GET",c),h.responseType="blob",h.onload=function(){a(h.response,u,f)},h.onerror=function(){console.error("could not download file")},h.send()}function s(c){var u=new XMLHttpRequest;u.open("HEAD",c,!1);try{u.send()}catch{}return 200<=u.status&&299>=u.status}function r(c){try{c.dispatchEvent(new MouseEvent("click"))}catch{var u=document.createEvent("MouseEvents");u.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),c.dispatchEvent(u)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof eo=="object"&&eo.global===eo?eo:void 0,l=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),a=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(c,u,f){var h=o.URL||o.webkitURL,d=document.createElement("a");u=u||c.name||"download",d.download=u,d.rel="noopener",typeof c=="string"?(d.href=c,d.origin===location.origin?r(d):s(d.href)?i(c,u,f):r(d,d.target="_blank")):(d.href=h.createObjectURL(c),setTimeout(function(){h.revokeObjectURL(d.href)},4e4),setTimeout(function(){r(d)},0))}:"msSaveOrOpenBlob"in navigator?function(c,u,f){if(u=u||c.name||"download",typeof c!="string")navigator.msSaveOrOpenBlob(t(c,f),u);else if(s(c))i(c,u,f);else{var h=document.createElement("a");h.href=c,h.target="_blank",setTimeout(function(){r(h)})}}:function(c,u,f,h){if(h=h||open("","_blank"),h&&(h.document.title=h.document.body.innerText="downloading..."),typeof c=="string")return i(c,u,f);var d=c.type==="application/octet-stream",m=/constructor/i.test(o.HTMLElement)||o.safari,g=/CriOS\/[\d]+/.test(navigator.userAgent);if((g||d&&m||l)&&typeof FileReader<"u"){var _=new FileReader;_.onloadend=function(){var E=_.result;E=g?E:E.replace(/^data:[^;]*;/,"data:attachment/file;"),h?h.location.href=E:location=E,h=null},_.readAsDataURL(c)}else{var v=o.URL||o.webkitURL,y=v.createObjectURL(c);h?h.location=y:location.href=y,h=null,setTimeout(function(){v.revokeObjectURL(y)},4e4)}});o.saveAs=a.saveAs=a,n.exports=a})})(Eoe);const Aoe=T0;var O0={},woe={get exports(){return O0},set exports(n){O0=n}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(n,e){(function(t){n.exports=t()})(function(){return function t(i,s,r){function o(c,u){if(!s[c]){if(!i[c]){var f=typeof mh=="function"&&mh;if(!u&&f)return f(c,!0);if(l)return l(c,!0);var h=new Error("Cannot find module '"+c+"'");throw h.code="MODULE_NOT_FOUND",h}var d=s[c]={exports:{}};i[c][0].call(d.exports,function(m){var g=i[c][1][m];return o(g||m)},d,d.exports,t,i,s,r)}return s[c].exports}for(var l=typeof mh=="function"&&mh,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(t,i,s){var r=t("./utils"),o=t("./support"),l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";s.encode=function(a){for(var c,u,f,h,d,m,g,_=[],v=0,y=a.length,E=y,w=r.getTypeOf(a)!=="string";v<a.length;)E=y-v,f=w?(c=a[v++],u=v<y?a[v++]:0,v<y?a[v++]:0):(c=a.charCodeAt(v++),u=v<y?a.charCodeAt(v++):0,v<y?a.charCodeAt(v++):0),h=c>>2,d=(3&c)<<4|u>>4,m=1<E?(15&u)<<2|f>>6:64,g=2<E?63&f:64,_.push(l.charAt(h)+l.charAt(d)+l.charAt(m)+l.charAt(g));return _.join("")},s.decode=function(a){var c,u,f,h,d,m,g=0,_=0,v="data:";if(a.substr(0,v.length)===v)throw new Error("Invalid base64 input, it looks like a data url.");var y,E=3*(a=a.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(a.charAt(a.length-1)===l.charAt(64)&&E--,a.charAt(a.length-2)===l.charAt(64)&&E--,E%1!=0)throw new Error("Invalid base64 input, bad content length.");for(y=o.uint8array?new Uint8Array(0|E):new Array(0|E);g<a.length;)c=l.indexOf(a.charAt(g++))<<2|(h=l.indexOf(a.charAt(g++)))>>4,u=(15&h)<<4|(d=l.indexOf(a.charAt(g++)))>>2,f=(3&d)<<6|(m=l.indexOf(a.charAt(g++))),y[_++]=c,d!==64&&(y[_++]=u),m!==64&&(y[_++]=f);return y}},{"./support":30,"./utils":32}],2:[function(t,i,s){var r=t("./external"),o=t("./stream/DataWorker"),l=t("./stream/Crc32Probe"),a=t("./stream/DataLengthProbe");function c(u,f,h,d,m){this.compressedSize=u,this.uncompressedSize=f,this.crc32=h,this.compression=d,this.compressedContent=m}c.prototype={getContentWorker:function(){var u=new o(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new a("data_length")),f=this;return u.on("end",function(){if(this.streamInfo.data_length!==f.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),u},getCompressedWorker:function(){return new o(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(u,f,h){return u.pipe(new l).pipe(new a("uncompressedSize")).pipe(f.compressWorker(h)).pipe(new a("compressedSize")).withStreamInfo("compression",f)},i.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,i,s){var r=t("./stream/GenericWorker");s.STORE={magic:"\0\0",compressWorker:function(){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},s.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,i,s){var r=t("./utils"),o=function(){for(var l,a=[],c=0;c<256;c++){l=c;for(var u=0;u<8;u++)l=1&l?3988292384^l>>>1:l>>>1;a[c]=l}return a}();i.exports=function(l,a){return l!==void 0&&l.length?r.getTypeOf(l)!=="string"?function(c,u,f,h){var d=o,m=h+f;c^=-1;for(var g=h;g<m;g++)c=c>>>8^d[255&(c^u[g])];return-1^c}(0|a,l,l.length,0):function(c,u,f,h){var d=o,m=h+f;c^=-1;for(var g=h;g<m;g++)c=c>>>8^d[255&(c^u.charCodeAt(g))];return-1^c}(0|a,l,l.length,0):0}},{"./utils":32}],5:[function(t,i,s){s.base64=!1,s.binary=!1,s.dir=!1,s.createFolders=!0,s.date=null,s.compression=null,s.compressionOptions=null,s.comment=null,s.unixPermissions=null,s.dosPermissions=null},{}],6:[function(t,i,s){var r=null;r=typeof Promise<"u"?Promise:t("lie"),i.exports={Promise:r}},{lie:37}],7:[function(t,i,s){var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=t("pako"),l=t("./utils"),a=t("./stream/GenericWorker"),c=r?"uint8array":"array";function u(f,h){a.call(this,"FlateWorker/"+f),this._pako=null,this._pakoAction=f,this._pakoOptions=h,this.meta={}}s.magic="\b\0",l.inherits(u,a),u.prototype.processChunk=function(f){this.meta=f.meta,this._pako===null&&this._createPako(),this._pako.push(l.transformTo(c,f.data),!1)},u.prototype.flush=function(){a.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},u.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this._pako=null},u.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var f=this;this._pako.onData=function(h){f.push({data:h,meta:f.meta})}},s.compressWorker=function(f){return new u("Deflate",f)},s.uncompressWorker=function(){return new u("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,i,s){function r(d,m){var g,_="";for(g=0;g<m;g++)_+=String.fromCharCode(255&d),d>>>=8;return _}function o(d,m,g,_,v,y){var E,w,A=d.file,I=d.compression,R=y!==c.utf8encode,D=l.transformTo("string",y(A.name)),N=l.transformTo("string",c.utf8encode(A.name)),W=A.comment,H=l.transformTo("string",y(W)),P=l.transformTo("string",c.utf8encode(W)),Y=N.length!==A.name.length,O=P.length!==W.length,L="",U="",K="",te=A.dir,q=A.date,x={crc32:0,compressedSize:0,uncompressedSize:0};m&&!g||(x.crc32=d.crc32,x.compressedSize=d.compressedSize,x.uncompressedSize=d.uncompressedSize);var Z=0;m&&(Z|=8),R||!Y&&!O||(Z|=2048);var V=0,ce=0;te&&(V|=16),v==="UNIX"?(ce=798,V|=function(oe,ve){var Ne=oe;return oe||(Ne=ve?16893:33204),(65535&Ne)<<16}(A.unixPermissions,te)):(ce=20,V|=function(oe){return 63&(oe||0)}(A.dosPermissions)),E=q.getUTCHours(),E<<=6,E|=q.getUTCMinutes(),E<<=5,E|=q.getUTCSeconds()/2,w=q.getUTCFullYear()-1980,w<<=4,w|=q.getUTCMonth()+1,w<<=5,w|=q.getUTCDate(),Y&&(U=r(1,1)+r(u(D),4)+N,L+="up"+r(U.length,2)+U),O&&(K=r(1,1)+r(u(H),4)+P,L+="uc"+r(K.length,2)+K);var pe="";return pe+=`
\0`,pe+=r(Z,2),pe+=I.magic,pe+=r(E,2),pe+=r(w,2),pe+=r(x.crc32,4),pe+=r(x.compressedSize,4),pe+=r(x.uncompressedSize,4),pe+=r(D.length,2),pe+=r(L.length,2),{fileRecord:f.LOCAL_FILE_HEADER+pe+D+L,dirRecord:f.CENTRAL_FILE_HEADER+r(ce,2)+pe+r(H.length,2)+"\0\0\0\0"+r(V,4)+r(_,4)+D+L+H}}var l=t("../utils"),a=t("../stream/GenericWorker"),c=t("../utf8"),u=t("../crc32"),f=t("../signature");function h(d,m,g,_){a.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=m,this.zipPlatform=g,this.encodeFileName=_,this.streamFiles=d,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}l.inherits(h,a),h.prototype.push=function(d){var m=d.meta.percent||0,g=this.entriesCount,_=this._sources.length;this.accumulate?this.contentBuffer.push(d):(this.bytesWritten+=d.data.length,a.prototype.push.call(this,{data:d.data,meta:{currentFile:this.currentFile,percent:g?(m+100*(g-_-1))/g:100}}))},h.prototype.openedSource=function(d){this.currentSourceOffset=this.bytesWritten,this.currentFile=d.file.name;var m=this.streamFiles&&!d.file.dir;if(m){var g=o(d,m,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:g.fileRecord,meta:{percent:0}})}else this.accumulate=!0},h.prototype.closedSource=function(d){this.accumulate=!1;var m=this.streamFiles&&!d.file.dir,g=o(d,m,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(g.dirRecord),m)this.push({data:function(_){return f.DATA_DESCRIPTOR+r(_.crc32,4)+r(_.compressedSize,4)+r(_.uncompressedSize,4)}(d),meta:{percent:100}});else for(this.push({data:g.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},h.prototype.flush=function(){for(var d=this.bytesWritten,m=0;m<this.dirRecords.length;m++)this.push({data:this.dirRecords[m],meta:{percent:100}});var g=this.bytesWritten-d,_=function(v,y,E,w,A){var I=l.transformTo("string",A(w));return f.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(v,2)+r(v,2)+r(y,4)+r(E,4)+r(I.length,2)+I}(this.dirRecords.length,g,d,this.zipComment,this.encodeFileName);this.push({data:_,meta:{percent:100}})},h.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},h.prototype.registerPrevious=function(d){this._sources.push(d);var m=this;return d.on("data",function(g){m.processChunk(g)}),d.on("end",function(){m.closedSource(m.previous.streamInfo),m._sources.length?m.prepareNextSource():m.end()}),d.on("error",function(g){m.error(g)}),this},h.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},h.prototype.error=function(d){var m=this._sources;if(!a.prototype.error.call(this,d))return!1;for(var g=0;g<m.length;g++)try{m[g].error(d)}catch{}return!0},h.prototype.lock=function(){a.prototype.lock.call(this);for(var d=this._sources,m=0;m<d.length;m++)d[m].lock()},i.exports=h},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,i,s){var r=t("../compressions"),o=t("./ZipFileWorker");s.generateWorker=function(l,a,c){var u=new o(a.streamFiles,c,a.platform,a.encodeFileName),f=0;try{l.forEach(function(h,d){f++;var m=function(y,E){var w=y||E,A=r[w];if(!A)throw new Error(w+" is not a valid compression method !");return A}(d.options.compression,a.compression),g=d.options.compressionOptions||a.compressionOptions||{},_=d.dir,v=d.date;d._compressWorker(m,g).withStreamInfo("file",{name:h,dir:_,date:v,comment:d.comment||"",unixPermissions:d.unixPermissions,dosPermissions:d.dosPermissions}).pipe(u)}),u.entriesCount=f}catch(h){u.error(h)}return u}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,i,s){function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new r;for(var l in this)typeof this[l]!="function"&&(o[l]=this[l]);return o}}(r.prototype=t("./object")).loadAsync=t("./load"),r.support=t("./support"),r.defaults=t("./defaults"),r.version="3.10.1",r.loadAsync=function(o,l){return new r().loadAsync(o,l)},r.external=t("./external"),i.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,i,s){var r=t("./utils"),o=t("./external"),l=t("./utf8"),a=t("./zipEntries"),c=t("./stream/Crc32Probe"),u=t("./nodejsUtils");function f(h){return new o.Promise(function(d,m){var g=h.decompressed.getContentWorker().pipe(new c);g.on("error",function(_){m(_)}).on("end",function(){g.streamInfo.crc32!==h.decompressed.crc32?m(new Error("Corrupted zip : CRC32 mismatch")):d()}).resume()})}i.exports=function(h,d){var m=this;return d=r.extend(d||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:l.utf8decode}),u.isNode&&u.isStream(h)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",h,!0,d.optimizedBinaryString,d.base64).then(function(g){var _=new a(d);return _.load(g),_}).then(function(g){var _=[o.Promise.resolve(g)],v=g.files;if(d.checkCRC32)for(var y=0;y<v.length;y++)_.push(f(v[y]));return o.Promise.all(_)}).then(function(g){for(var _=g.shift(),v=_.files,y=0;y<v.length;y++){var E=v[y],w=E.fileNameStr,A=r.resolve(E.fileNameStr);m.file(A,E.decompressed,{binary:!0,optimizedBinaryString:!0,date:E.date,dir:E.dir,comment:E.fileCommentStr.length?E.fileCommentStr:null,unixPermissions:E.unixPermissions,dosPermissions:E.dosPermissions,createFolders:d.createFolders}),E.dir||(m.file(A).unsafeOriginalName=w)}return _.zipComment.length&&(m.comment=_.zipComment),m})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,i,s){var r=t("../utils"),o=t("../stream/GenericWorker");function l(a,c){o.call(this,"Nodejs stream input adapter for "+a),this._upstreamEnded=!1,this._bindStream(c)}r.inherits(l,o),l.prototype._bindStream=function(a){var c=this;(this._stream=a).pause(),a.on("data",function(u){c.push({data:u,meta:{percent:0}})}).on("error",function(u){c.isPaused?this.generatedError=u:c.error(u)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},l.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},l.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},i.exports=l},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,i,s){var r=t("readable-stream").Readable;function o(l,a,c){r.call(this,a),this._helper=l;var u=this;l.on("data",function(f,h){u.push(f)||u._helper.pause(),c&&c(h)}).on("error",function(f){u.emit("error",f)}).on("end",function(){u.push(null)})}t("../utils").inherits(o,r),o.prototype._read=function(){this._helper.resume()},i.exports=o},{"../utils":32,"readable-stream":16}],14:[function(t,i,s){i.exports={isNode:typeof Buffer<"u",newBufferFrom:function(r,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(r,o);if(typeof r=="number")throw new Error('The "data" argument must not be a number');return new Buffer(r,o)},allocBuffer:function(r){if(Buffer.alloc)return Buffer.alloc(r);var o=new Buffer(r);return o.fill(0),o},isBuffer:function(r){return Buffer.isBuffer(r)},isStream:function(r){return r&&typeof r.on=="function"&&typeof r.pause=="function"&&typeof r.resume=="function"}}},{}],15:[function(t,i,s){function r(A,I,R){var D,N=l.getTypeOf(I),W=l.extend(R||{},u);W.date=W.date||new Date,W.compression!==null&&(W.compression=W.compression.toUpperCase()),typeof W.unixPermissions=="string"&&(W.unixPermissions=parseInt(W.unixPermissions,8)),W.unixPermissions&&16384&W.unixPermissions&&(W.dir=!0),W.dosPermissions&&16&W.dosPermissions&&(W.dir=!0),W.dir&&(A=v(A)),W.createFolders&&(D=_(A))&&y.call(this,D,!0);var H=N==="string"&&W.binary===!1&&W.base64===!1;R&&R.binary!==void 0||(W.binary=!H),(I instanceof f&&I.uncompressedSize===0||W.dir||!I||I.length===0)&&(W.base64=!1,W.binary=!0,I="",W.compression="STORE",N="string");var P=null;P=I instanceof f||I instanceof a?I:m.isNode&&m.isStream(I)?new g(A,I):l.prepareContent(A,I,W.binary,W.optimizedBinaryString,W.base64);var Y=new h(A,P,W);this.files[A]=Y}var o=t("./utf8"),l=t("./utils"),a=t("./stream/GenericWorker"),c=t("./stream/StreamHelper"),u=t("./defaults"),f=t("./compressedObject"),h=t("./zipObject"),d=t("./generate"),m=t("./nodejsUtils"),g=t("./nodejs/NodejsStreamInputAdapter"),_=function(A){A.slice(-1)==="/"&&(A=A.substring(0,A.length-1));var I=A.lastIndexOf("/");return 0<I?A.substring(0,I):""},v=function(A){return A.slice(-1)!=="/"&&(A+="/"),A},y=function(A,I){return I=I!==void 0?I:u.createFolders,A=v(A),this.files[A]||r.call(this,A,null,{dir:!0,createFolders:I}),this.files[A]};function E(A){return Object.prototype.toString.call(A)==="[object RegExp]"}var w={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(A){var I,R,D;for(I in this.files)D=this.files[I],(R=I.slice(this.root.length,I.length))&&I.slice(0,this.root.length)===this.root&&A(R,D)},filter:function(A){var I=[];return this.forEach(function(R,D){A(R,D)&&I.push(D)}),I},file:function(A,I,R){if(arguments.length!==1)return A=this.root+A,r.call(this,A,I,R),this;if(E(A)){var D=A;return this.filter(function(W,H){return!H.dir&&D.test(W)})}var N=this.files[this.root+A];return N&&!N.dir?N:null},folder:function(A){if(!A)return this;if(E(A))return this.filter(function(N,W){return W.dir&&A.test(N)});var I=this.root+A,R=y.call(this,I),D=this.clone();return D.root=R.name,D},remove:function(A){A=this.root+A;var I=this.files[A];if(I||(A.slice(-1)!=="/"&&(A+="/"),I=this.files[A]),I&&!I.dir)delete this.files[A];else for(var R=this.filter(function(N,W){return W.name.slice(0,A.length)===A}),D=0;D<R.length;D++)delete this.files[R[D].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(A){var I,R={};try{if((R=l.extend(A||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=R.type.toLowerCase(),R.compression=R.compression.toUpperCase(),R.type==="binarystring"&&(R.type="string"),!R.type)throw new Error("No output type specified.");l.checkSupport(R.type),R.platform!=="darwin"&&R.platform!=="freebsd"&&R.platform!=="linux"&&R.platform!=="sunos"||(R.platform="UNIX"),R.platform==="win32"&&(R.platform="DOS");var D=R.comment||this.comment||"";I=d.generateWorker(this,R,D)}catch(N){(I=new a("error")).error(N)}return new c(I,R.type||"string",R.mimeType)},generateAsync:function(A,I){return this.generateInternalStream(A).accumulate(I)},generateNodeStream:function(A,I){return(A=A||{}).type||(A.type="nodebuffer"),this.generateInternalStream(A).toNodejsStream(I)}};i.exports=w},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,i,s){i.exports=t("stream")},{stream:void 0}],17:[function(t,i,s){var r=t("./DataReader");function o(l){r.call(this,l);for(var a=0;a<this.data.length;a++)l[a]=255&l[a]}t("../utils").inherits(o,r),o.prototype.byteAt=function(l){return this.data[this.zero+l]},o.prototype.lastIndexOfSignature=function(l){for(var a=l.charCodeAt(0),c=l.charCodeAt(1),u=l.charCodeAt(2),f=l.charCodeAt(3),h=this.length-4;0<=h;--h)if(this.data[h]===a&&this.data[h+1]===c&&this.data[h+2]===u&&this.data[h+3]===f)return h-this.zero;return-1},o.prototype.readAndCheckSignature=function(l){var a=l.charCodeAt(0),c=l.charCodeAt(1),u=l.charCodeAt(2),f=l.charCodeAt(3),h=this.readData(4);return a===h[0]&&c===h[1]&&u===h[2]&&f===h[3]},o.prototype.readData=function(l){if(this.checkOffset(l),l===0)return[];var a=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,a},i.exports=o},{"../utils":32,"./DataReader":18}],18:[function(t,i,s){var r=t("../utils");function o(l){this.data=l,this.length=l.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(l){this.checkIndex(this.index+l)},checkIndex:function(l){if(this.length<this.zero+l||l<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+l+"). Corrupted zip ?")},setIndex:function(l){this.checkIndex(l),this.index=l},skip:function(l){this.setIndex(this.index+l)},byteAt:function(){},readInt:function(l){var a,c=0;for(this.checkOffset(l),a=this.index+l-1;a>=this.index;a--)c=(c<<8)+this.byteAt(a);return this.index+=l,c},readString:function(l){return r.transformTo("string",this.readData(l))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var l=this.readInt(4);return new Date(Date.UTC(1980+(l>>25&127),(l>>21&15)-1,l>>16&31,l>>11&31,l>>5&63,(31&l)<<1))}},i.exports=o},{"../utils":32}],19:[function(t,i,s){var r=t("./Uint8ArrayReader");function o(l){r.call(this,l)}t("../utils").inherits(o,r),o.prototype.readData=function(l){this.checkOffset(l);var a=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,a},i.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,i,s){var r=t("./DataReader");function o(l){r.call(this,l)}t("../utils").inherits(o,r),o.prototype.byteAt=function(l){return this.data.charCodeAt(this.zero+l)},o.prototype.lastIndexOfSignature=function(l){return this.data.lastIndexOf(l)-this.zero},o.prototype.readAndCheckSignature=function(l){return l===this.readData(4)},o.prototype.readData=function(l){this.checkOffset(l);var a=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,a},i.exports=o},{"../utils":32,"./DataReader":18}],21:[function(t,i,s){var r=t("./ArrayReader");function o(l){r.call(this,l)}t("../utils").inherits(o,r),o.prototype.readData=function(l){if(this.checkOffset(l),l===0)return new Uint8Array(0);var a=this.data.subarray(this.zero+this.index,this.zero+this.index+l);return this.index+=l,a},i.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(t,i,s){var r=t("../utils"),o=t("../support"),l=t("./ArrayReader"),a=t("./StringReader"),c=t("./NodeBufferReader"),u=t("./Uint8ArrayReader");i.exports=function(f){var h=r.getTypeOf(f);return r.checkSupport(h),h!=="string"||o.uint8array?h==="nodebuffer"?new c(f):o.uint8array?new u(r.transformTo("uint8array",f)):new l(r.transformTo("array",f)):new a(f)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,i,s){s.LOCAL_FILE_HEADER="PK",s.CENTRAL_FILE_HEADER="PK",s.CENTRAL_DIRECTORY_END="PK",s.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",s.ZIP64_CENTRAL_DIRECTORY_END="PK",s.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,i,s){var r=t("./GenericWorker"),o=t("../utils");function l(a){r.call(this,"ConvertWorker to "+a),this.destType=a}o.inherits(l,r),l.prototype.processChunk=function(a){this.push({data:o.transformTo(this.destType,a.data),meta:a.meta})},i.exports=l},{"../utils":32,"./GenericWorker":28}],25:[function(t,i,s){var r=t("./GenericWorker"),o=t("../crc32");function l(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(l,r),l.prototype.processChunk=function(a){this.streamInfo.crc32=o(a.data,this.streamInfo.crc32||0),this.push(a)},i.exports=l},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,i,s){var r=t("../utils"),o=t("./GenericWorker");function l(a){o.call(this,"DataLengthProbe for "+a),this.propName=a,this.withStreamInfo(a,0)}r.inherits(l,o),l.prototype.processChunk=function(a){if(a){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+a.data.length}o.prototype.processChunk.call(this,a)},i.exports=l},{"../utils":32,"./GenericWorker":28}],27:[function(t,i,s){var r=t("../utils"),o=t("./GenericWorker");function l(a){o.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,a.then(function(u){c.dataIsReady=!0,c.data=u,c.max=u&&u.length||0,c.type=r.getTypeOf(u),c.isPaused||c._tickAndRepeat()},function(u){c.error(u)})}r.inherits(l,o),l.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},l.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},l.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},l.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var a=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":a=this.data.substring(this.index,c);break;case"uint8array":a=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":a=this.data.slice(this.index,c)}return this.index=c,this.push({data:a,meta:{percent:this.max?this.index/this.max*100:0}})},i.exports=l},{"../utils":32,"./GenericWorker":28}],28:[function(t,i,s){function r(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,l){return this._listeners[o].push(l),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,l){if(this._listeners[o])for(var a=0;a<this._listeners[o].length;a++)this._listeners[o][a].call(this,l)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var l=this;return o.on("data",function(a){l.processChunk(a)}),o.on("end",function(){l.end()}),o.on("error",function(a){l.error(a)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,l){return this.extraStreamInfo[o]=l,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},i.exports=r},{}],29:[function(t,i,s){var r=t("../utils"),o=t("./ConvertWorker"),l=t("./GenericWorker"),a=t("../base64"),c=t("../support"),u=t("../external"),f=null;if(c.nodestream)try{f=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function h(m,g){return new u.Promise(function(_,v){var y=[],E=m._internalType,w=m._outputType,A=m._mimeType;m.on("data",function(I,R){y.push(I),g&&g(R)}).on("error",function(I){y=[],v(I)}).on("end",function(){try{var I=function(R,D,N){switch(R){case"blob":return r.newBlob(r.transformTo("arraybuffer",D),N);case"base64":return a.encode(D);default:return r.transformTo(R,D)}}(w,function(R,D){var N,W=0,H=null,P=0;for(N=0;N<D.length;N++)P+=D[N].length;switch(R){case"string":return D.join("");case"array":return Array.prototype.concat.apply([],D);case"uint8array":for(H=new Uint8Array(P),N=0;N<D.length;N++)H.set(D[N],W),W+=D[N].length;return H;case"nodebuffer":return Buffer.concat(D);default:throw new Error("concat : unsupported type '"+R+"'")}}(E,y),A);_(I)}catch(R){v(R)}y=[]}).resume()})}function d(m,g,_){var v=g;switch(g){case"blob":case"arraybuffer":v="uint8array";break;case"base64":v="string"}try{this._internalType=v,this._outputType=g,this._mimeType=_,r.checkSupport(v),this._worker=m.pipe(new o(v)),m.lock()}catch(y){this._worker=new l("error"),this._worker.error(y)}}d.prototype={accumulate:function(m){return h(this,m)},on:function(m,g){var _=this;return m==="data"?this._worker.on(m,function(v){g.call(_,v.data,v.meta)}):this._worker.on(m,function(){r.delay(g,arguments,_)}),this},resume:function(){return r.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(m){if(r.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new f(this,{objectMode:this._outputType!=="nodebuffer"},m)}},i.exports=d},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,i,s){if(s.base64=!0,s.array=!0,s.string=!0,s.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",s.nodebuffer=typeof Buffer<"u",s.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")s.blob=!1;else{var r=new ArrayBuffer(0);try{s.blob=new Blob([r],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(r),s.blob=o.getBlob("application/zip").size===0}catch{s.blob=!1}}}try{s.nodestream=!!t("readable-stream").Readable}catch{s.nodestream=!1}},{"readable-stream":16}],31:[function(t,i,s){for(var r=t("./utils"),o=t("./support"),l=t("./nodejsUtils"),a=t("./stream/GenericWorker"),c=new Array(256),u=0;u<256;u++)c[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;c[254]=c[254]=1;function f(){a.call(this,"utf-8 decode"),this.leftOver=null}function h(){a.call(this,"utf-8 encode")}s.utf8encode=function(d){return o.nodebuffer?l.newBufferFrom(d,"utf-8"):function(m){var g,_,v,y,E,w=m.length,A=0;for(y=0;y<w;y++)(64512&(_=m.charCodeAt(y)))==55296&&y+1<w&&(64512&(v=m.charCodeAt(y+1)))==56320&&(_=65536+(_-55296<<10)+(v-56320),y++),A+=_<128?1:_<2048?2:_<65536?3:4;for(g=o.uint8array?new Uint8Array(A):new Array(A),y=E=0;E<A;y++)(64512&(_=m.charCodeAt(y)))==55296&&y+1<w&&(64512&(v=m.charCodeAt(y+1)))==56320&&(_=65536+(_-55296<<10)+(v-56320),y++),_<128?g[E++]=_:(_<2048?g[E++]=192|_>>>6:(_<65536?g[E++]=224|_>>>12:(g[E++]=240|_>>>18,g[E++]=128|_>>>12&63),g[E++]=128|_>>>6&63),g[E++]=128|63&_);return g}(d)},s.utf8decode=function(d){return o.nodebuffer?r.transformTo("nodebuffer",d).toString("utf-8"):function(m){var g,_,v,y,E=m.length,w=new Array(2*E);for(g=_=0;g<E;)if((v=m[g++])<128)w[_++]=v;else if(4<(y=c[v]))w[_++]=65533,g+=y-1;else{for(v&=y===2?31:y===3?15:7;1<y&&g<E;)v=v<<6|63&m[g++],y--;1<y?w[_++]=65533:v<65536?w[_++]=v:(v-=65536,w[_++]=55296|v>>10&1023,w[_++]=56320|1023&v)}return w.length!==_&&(w.subarray?w=w.subarray(0,_):w.length=_),r.applyFromCharCode(w)}(d=r.transformTo(o.uint8array?"uint8array":"array",d))},r.inherits(f,a),f.prototype.processChunk=function(d){var m=r.transformTo(o.uint8array?"uint8array":"array",d.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var g=m;(m=new Uint8Array(g.length+this.leftOver.length)).set(this.leftOver,0),m.set(g,this.leftOver.length)}else m=this.leftOver.concat(m);this.leftOver=null}var _=function(y,E){var w;for((E=E||y.length)>y.length&&(E=y.length),w=E-1;0<=w&&(192&y[w])==128;)w--;return w<0||w===0?E:w+c[y[w]]>E?w:E}(m),v=m;_!==m.length&&(o.uint8array?(v=m.subarray(0,_),this.leftOver=m.subarray(_,m.length)):(v=m.slice(0,_),this.leftOver=m.slice(_,m.length))),this.push({data:s.utf8decode(v),meta:d.meta})},f.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=f,r.inherits(h,a),h.prototype.processChunk=function(d){this.push({data:s.utf8encode(d.data),meta:d.meta})},s.Utf8EncodeWorker=h},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,i,s){var r=t("./support"),o=t("./base64"),l=t("./nodejsUtils"),a=t("./external");function c(g){return g}function u(g,_){for(var v=0;v<g.length;++v)_[v]=255&g.charCodeAt(v);return _}t("setimmediate"),s.newBlob=function(g,_){s.checkSupport("blob");try{return new Blob([g],{type:_})}catch{try{var v=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return v.append(g),v.getBlob(_)}catch{throw new Error("Bug : can't construct the Blob.")}}};var f={stringifyByChunk:function(g,_,v){var y=[],E=0,w=g.length;if(w<=v)return String.fromCharCode.apply(null,g);for(;E<w;)_==="array"||_==="nodebuffer"?y.push(String.fromCharCode.apply(null,g.slice(E,Math.min(E+v,w)))):y.push(String.fromCharCode.apply(null,g.subarray(E,Math.min(E+v,w)))),E+=v;return y.join("")},stringifyByChar:function(g){for(var _="",v=0;v<g.length;v++)_+=String.fromCharCode(g[v]);return _},applyCanBeUsed:{uint8array:function(){try{return r.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return r.nodebuffer&&String.fromCharCode.apply(null,l.allocBuffer(1)).length===1}catch{return!1}}()}};function h(g){var _=65536,v=s.getTypeOf(g),y=!0;if(v==="uint8array"?y=f.applyCanBeUsed.uint8array:v==="nodebuffer"&&(y=f.applyCanBeUsed.nodebuffer),y)for(;1<_;)try{return f.stringifyByChunk(g,v,_)}catch{_=Math.floor(_/2)}return f.stringifyByChar(g)}function d(g,_){for(var v=0;v<g.length;v++)_[v]=g[v];return _}s.applyFromCharCode=h;var m={};m.string={string:c,array:function(g){return u(g,new Array(g.length))},arraybuffer:function(g){return m.string.uint8array(g).buffer},uint8array:function(g){return u(g,new Uint8Array(g.length))},nodebuffer:function(g){return u(g,l.allocBuffer(g.length))}},m.array={string:h,array:c,arraybuffer:function(g){return new Uint8Array(g).buffer},uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return l.newBufferFrom(g)}},m.arraybuffer={string:function(g){return h(new Uint8Array(g))},array:function(g){return d(new Uint8Array(g),new Array(g.byteLength))},arraybuffer:c,uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return l.newBufferFrom(new Uint8Array(g))}},m.uint8array={string:h,array:function(g){return d(g,new Array(g.length))},arraybuffer:function(g){return g.buffer},uint8array:c,nodebuffer:function(g){return l.newBufferFrom(g)}},m.nodebuffer={string:h,array:function(g){return d(g,new Array(g.length))},arraybuffer:function(g){return m.nodebuffer.uint8array(g).buffer},uint8array:function(g){return d(g,new Uint8Array(g.length))},nodebuffer:c},s.transformTo=function(g,_){if(_=_||"",!g)return _;s.checkSupport(g);var v=s.getTypeOf(_);return m[v][g](_)},s.resolve=function(g){for(var _=g.split("/"),v=[],y=0;y<_.length;y++){var E=_[y];E==="."||E===""&&y!==0&&y!==_.length-1||(E===".."?v.pop():v.push(E))}return v.join("/")},s.getTypeOf=function(g){return typeof g=="string"?"string":Object.prototype.toString.call(g)==="[object Array]"?"array":r.nodebuffer&&l.isBuffer(g)?"nodebuffer":r.uint8array&&g instanceof Uint8Array?"uint8array":r.arraybuffer&&g instanceof ArrayBuffer?"arraybuffer":void 0},s.checkSupport=function(g){if(!r[g.toLowerCase()])throw new Error(g+" is not supported by this platform")},s.MAX_VALUE_16BITS=65535,s.MAX_VALUE_32BITS=-1,s.pretty=function(g){var _,v,y="";for(v=0;v<(g||"").length;v++)y+="\\x"+((_=g.charCodeAt(v))<16?"0":"")+_.toString(16).toUpperCase();return y},s.delay=function(g,_,v){setImmediate(function(){g.apply(v||null,_||[])})},s.inherits=function(g,_){function v(){}v.prototype=_.prototype,g.prototype=new v},s.extend=function(){var g,_,v={};for(g=0;g<arguments.length;g++)for(_ in arguments[g])Object.prototype.hasOwnProperty.call(arguments[g],_)&&v[_]===void 0&&(v[_]=arguments[g][_]);return v},s.prepareContent=function(g,_,v,y,E){return a.Promise.resolve(_).then(function(w){return r.blob&&(w instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(w))!==-1)&&typeof FileReader<"u"?new a.Promise(function(A,I){var R=new FileReader;R.onload=function(D){A(D.target.result)},R.onerror=function(D){I(D.target.error)},R.readAsArrayBuffer(w)}):w}).then(function(w){var A=s.getTypeOf(w);return A?(A==="arraybuffer"?w=s.transformTo("uint8array",w):A==="string"&&(E?w=o.decode(w):v&&y!==!0&&(w=function(I){return u(I,r.uint8array?new Uint8Array(I.length):new Array(I.length))}(w))),w):a.Promise.reject(new Error("Can't read the data of '"+g+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,i,s){var r=t("./reader/readerFor"),o=t("./utils"),l=t("./signature"),a=t("./zipEntry"),c=t("./support");function u(f){this.files=[],this.loadOptions=f}u.prototype={checkSignature:function(f){if(!this.reader.readAndCheckSignature(f)){this.reader.index-=4;var h=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(h)+", expected "+o.pretty(f)+")")}},isSignature:function(f,h){var d=this.reader.index;this.reader.setIndex(f);var m=this.reader.readString(4)===h;return this.reader.setIndex(d),m},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var f=this.reader.readData(this.zipCommentLength),h=c.uint8array?"uint8array":"array",d=o.transformTo(h,f);this.zipComment=this.loadOptions.decodeFileName(d)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var f,h,d,m=this.zip64EndOfCentralSize-44;0<m;)f=this.reader.readInt(2),h=this.reader.readInt(4),d=this.reader.readData(h),this.zip64ExtensibleData[f]={id:f,length:h,value:d}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var f,h;for(f=0;f<this.files.length;f++)h=this.files[f],this.reader.setIndex(h.localHeaderOffset),this.checkSignature(l.LOCAL_FILE_HEADER),h.readLocalPart(this.reader),h.handleUTF8(),h.processAttributes()},readCentralDir:function(){var f;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(l.CENTRAL_FILE_HEADER);)(f=new a({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(f);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var f=this.reader.lastIndexOfSignature(l.CENTRAL_DIRECTORY_END);if(f<0)throw this.isSignature(0,l.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(f);var h=f;if(this.checkSignature(l.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(f=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(f),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,l.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var d=this.centralDirOffset+this.centralDirSize;this.zip64&&(d+=20,d+=12+this.zip64EndOfCentralSize);var m=h-d;if(0<m)this.isSignature(h,l.CENTRAL_FILE_HEADER)||(this.reader.zero=m);else if(m<0)throw new Error("Corrupted zip: missing "+Math.abs(m)+" bytes.")},prepareReader:function(f){this.reader=r(f)},load:function(f){this.prepareReader(f),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},i.exports=u},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,i,s){var r=t("./reader/readerFor"),o=t("./utils"),l=t("./compressedObject"),a=t("./crc32"),c=t("./utf8"),u=t("./compressions"),f=t("./support");function h(d,m){this.options=d,this.loadOptions=m}h.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(d){var m,g;if(d.skip(22),this.fileNameLength=d.readInt(2),g=d.readInt(2),this.fileName=d.readData(this.fileNameLength),d.skip(g),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((m=function(_){for(var v in u)if(Object.prototype.hasOwnProperty.call(u,v)&&u[v].magic===_)return u[v];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new l(this.compressedSize,this.uncompressedSize,this.crc32,m,d.readData(this.compressedSize))},readCentralPart:function(d){this.versionMadeBy=d.readInt(2),d.skip(2),this.bitFlag=d.readInt(2),this.compressionMethod=d.readString(2),this.date=d.readDate(),this.crc32=d.readInt(4),this.compressedSize=d.readInt(4),this.uncompressedSize=d.readInt(4);var m=d.readInt(2);if(this.extraFieldsLength=d.readInt(2),this.fileCommentLength=d.readInt(2),this.diskNumberStart=d.readInt(2),this.internalFileAttributes=d.readInt(2),this.externalFileAttributes=d.readInt(4),this.localHeaderOffset=d.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");d.skip(m),this.readExtraFields(d),this.parseZIP64ExtraField(d),this.fileComment=d.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var d=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),d==0&&(this.dosPermissions=63&this.externalFileAttributes),d==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var d=r(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=d.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=d.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=d.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=d.readInt(4))}},readExtraFields:function(d){var m,g,_,v=d.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});d.index+4<v;)m=d.readInt(2),g=d.readInt(2),_=d.readData(g),this.extraFields[m]={id:m,length:g,value:_};d.setIndex(v)},handleUTF8:function(){var d=f.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var m=this.findExtraFieldUnicodePath();if(m!==null)this.fileNameStr=m;else{var g=o.transformTo(d,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(g)}var _=this.findExtraFieldUnicodeComment();if(_!==null)this.fileCommentStr=_;else{var v=o.transformTo(d,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(v)}}},findExtraFieldUnicodePath:function(){var d=this.extraFields[28789];if(d){var m=r(d.value);return m.readInt(1)!==1||a(this.fileName)!==m.readInt(4)?null:c.utf8decode(m.readData(d.length-5))}return null},findExtraFieldUnicodeComment:function(){var d=this.extraFields[25461];if(d){var m=r(d.value);return m.readInt(1)!==1||a(this.fileComment)!==m.readInt(4)?null:c.utf8decode(m.readData(d.length-5))}return null}},i.exports=h},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,i,s){function r(m,g,_){this.name=m,this.dir=_.dir,this.date=_.date,this.comment=_.comment,this.unixPermissions=_.unixPermissions,this.dosPermissions=_.dosPermissions,this._data=g,this._dataBinary=_.binary,this.options={compression:_.compression,compressionOptions:_.compressionOptions}}var o=t("./stream/StreamHelper"),l=t("./stream/DataWorker"),a=t("./utf8"),c=t("./compressedObject"),u=t("./stream/GenericWorker");r.prototype={internalStream:function(m){var g=null,_="string";try{if(!m)throw new Error("No output type specified.");var v=(_=m.toLowerCase())==="string"||_==="text";_!=="binarystring"&&_!=="text"||(_="string"),g=this._decompressWorker();var y=!this._dataBinary;y&&!v&&(g=g.pipe(new a.Utf8EncodeWorker)),!y&&v&&(g=g.pipe(new a.Utf8DecodeWorker))}catch(E){(g=new u("error")).error(E)}return new o(g,_,"")},async:function(m,g){return this.internalStream(m).accumulate(g)},nodeStream:function(m,g){return this.internalStream(m||"nodebuffer").toNodejsStream(g)},_compressWorker:function(m,g){if(this._data instanceof c&&this._data.compression.magic===m.magic)return this._data.getCompressedWorker();var _=this._decompressWorker();return this._dataBinary||(_=_.pipe(new a.Utf8EncodeWorker)),c.createWorkerFrom(_,m,g)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof u?this._data:new l(this._data)}};for(var f=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],h=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<f.length;d++)r.prototype[f[d]]=h;i.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,i,s){(function(r){var o,l,a=r.MutationObserver||r.WebKitMutationObserver;if(a){var c=0,u=new a(m),f=r.document.createTextNode("");u.observe(f,{characterData:!0}),o=function(){f.data=c=++c%2}}else if(r.setImmediate||r.MessageChannel===void 0)o="document"in r&&"onreadystatechange"in r.document.createElement("script")?function(){var g=r.document.createElement("script");g.onreadystatechange=function(){m(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},r.document.documentElement.appendChild(g)}:function(){setTimeout(m,0)};else{var h=new r.MessageChannel;h.port1.onmessage=m,o=function(){h.port2.postMessage(0)}}var d=[];function m(){var g,_;l=!0;for(var v=d.length;v;){for(_=d,d=[],g=-1;++g<v;)_[g]();v=d.length}l=!1}i.exports=function(g){d.push(g)!==1||l||o()}}).call(this,typeof eo<"u"?eo:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,i,s){var r=t("immediate");function o(){}var l={},a=["REJECTED"],c=["FULFILLED"],u=["PENDING"];function f(v){if(typeof v!="function")throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,v!==o&&g(this,v)}function h(v,y,E){this.promise=v,typeof y=="function"&&(this.onFulfilled=y,this.callFulfilled=this.otherCallFulfilled),typeof E=="function"&&(this.onRejected=E,this.callRejected=this.otherCallRejected)}function d(v,y,E){r(function(){var w;try{w=y(E)}catch(A){return l.reject(v,A)}w===v?l.reject(v,new TypeError("Cannot resolve promise with itself")):l.resolve(v,w)})}function m(v){var y=v&&v.then;if(v&&(typeof v=="object"||typeof v=="function")&&typeof y=="function")return function(){y.apply(v,arguments)}}function g(v,y){var E=!1;function w(R){E||(E=!0,l.reject(v,R))}function A(R){E||(E=!0,l.resolve(v,R))}var I=_(function(){y(A,w)});I.status==="error"&&w(I.value)}function _(v,y){var E={};try{E.value=v(y),E.status="success"}catch(w){E.status="error",E.value=w}return E}(i.exports=f).prototype.finally=function(v){if(typeof v!="function")return this;var y=this.constructor;return this.then(function(E){return y.resolve(v()).then(function(){return E})},function(E){return y.resolve(v()).then(function(){throw E})})},f.prototype.catch=function(v){return this.then(null,v)},f.prototype.then=function(v,y){if(typeof v!="function"&&this.state===c||typeof y!="function"&&this.state===a)return this;var E=new this.constructor(o);return this.state!==u?d(E,this.state===c?v:y,this.outcome):this.queue.push(new h(E,v,y)),E},h.prototype.callFulfilled=function(v){l.resolve(this.promise,v)},h.prototype.otherCallFulfilled=function(v){d(this.promise,this.onFulfilled,v)},h.prototype.callRejected=function(v){l.reject(this.promise,v)},h.prototype.otherCallRejected=function(v){d(this.promise,this.onRejected,v)},l.resolve=function(v,y){var E=_(m,y);if(E.status==="error")return l.reject(v,E.value);var w=E.value;if(w)g(v,w);else{v.state=c,v.outcome=y;for(var A=-1,I=v.queue.length;++A<I;)v.queue[A].callFulfilled(y)}return v},l.reject=function(v,y){v.state=a,v.outcome=y;for(var E=-1,w=v.queue.length;++E<w;)v.queue[E].callRejected(y);return v},f.resolve=function(v){return v instanceof this?v:l.resolve(new this(o),v)},f.reject=function(v){var y=new this(o);return l.reject(y,v)},f.all=function(v){var y=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=v.length,w=!1;if(!E)return this.resolve([]);for(var A=new Array(E),I=0,R=-1,D=new this(o);++R<E;)N(v[R],R);return D;function N(W,H){y.resolve(W).then(function(P){A[H]=P,++I!==E||w||(w=!0,l.resolve(D,A))},function(P){w||(w=!0,l.reject(D,P))})}},f.race=function(v){var y=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=v.length,w=!1;if(!E)return this.resolve([]);for(var A=-1,I=new this(o);++A<E;)R=v[A],y.resolve(R).then(function(D){w||(w=!0,l.resolve(I,D))},function(D){w||(w=!0,l.reject(I,D))});var R;return I}},{immediate:36}],38:[function(t,i,s){var r={};(0,t("./lib/utils/common").assign)(r,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),i.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,i,s){var r=t("./zlib/deflate"),o=t("./utils/common"),l=t("./utils/strings"),a=t("./zlib/messages"),c=t("./zlib/zstream"),u=Object.prototype.toString,f=0,h=-1,d=0,m=8;function g(v){if(!(this instanceof g))return new g(v);this.options=o.assign({level:h,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},v||{});var y=this.options;y.raw&&0<y.windowBits?y.windowBits=-y.windowBits:y.gzip&&0<y.windowBits&&y.windowBits<16&&(y.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var E=r.deflateInit2(this.strm,y.level,y.method,y.windowBits,y.memLevel,y.strategy);if(E!==f)throw new Error(a[E]);if(y.header&&r.deflateSetHeader(this.strm,y.header),y.dictionary){var w;if(w=typeof y.dictionary=="string"?l.string2buf(y.dictionary):u.call(y.dictionary)==="[object ArrayBuffer]"?new Uint8Array(y.dictionary):y.dictionary,(E=r.deflateSetDictionary(this.strm,w))!==f)throw new Error(a[E]);this._dict_set=!0}}function _(v,y){var E=new g(y);if(E.push(v,!0),E.err)throw E.msg||a[E.err];return E.result}g.prototype.push=function(v,y){var E,w,A=this.strm,I=this.options.chunkSize;if(this.ended)return!1;w=y===~~y?y:y===!0?4:0,typeof v=="string"?A.input=l.string2buf(v):u.call(v)==="[object ArrayBuffer]"?A.input=new Uint8Array(v):A.input=v,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new o.Buf8(I),A.next_out=0,A.avail_out=I),(E=r.deflate(A,w))!==1&&E!==f)return this.onEnd(E),!(this.ended=!0);A.avail_out!==0&&(A.avail_in!==0||w!==4&&w!==2)||(this.options.to==="string"?this.onData(l.buf2binstring(o.shrinkBuf(A.output,A.next_out))):this.onData(o.shrinkBuf(A.output,A.next_out)))}while((0<A.avail_in||A.avail_out===0)&&E!==1);return w===4?(E=r.deflateEnd(this.strm),this.onEnd(E),this.ended=!0,E===f):w!==2||(this.onEnd(f),!(A.avail_out=0))},g.prototype.onData=function(v){this.chunks.push(v)},g.prototype.onEnd=function(v){v===f&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg},s.Deflate=g,s.deflate=_,s.deflateRaw=function(v,y){return(y=y||{}).raw=!0,_(v,y)},s.gzip=function(v,y){return(y=y||{}).gzip=!0,_(v,y)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,i,s){var r=t("./zlib/inflate"),o=t("./utils/common"),l=t("./utils/strings"),a=t("./zlib/constants"),c=t("./zlib/messages"),u=t("./zlib/zstream"),f=t("./zlib/gzheader"),h=Object.prototype.toString;function d(g){if(!(this instanceof d))return new d(g);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},g||{});var _=this.options;_.raw&&0<=_.windowBits&&_.windowBits<16&&(_.windowBits=-_.windowBits,_.windowBits===0&&(_.windowBits=-15)),!(0<=_.windowBits&&_.windowBits<16)||g&&g.windowBits||(_.windowBits+=32),15<_.windowBits&&_.windowBits<48&&!(15&_.windowBits)&&(_.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var v=r.inflateInit2(this.strm,_.windowBits);if(v!==a.Z_OK)throw new Error(c[v]);this.header=new f,r.inflateGetHeader(this.strm,this.header)}function m(g,_){var v=new d(_);if(v.push(g,!0),v.err)throw v.msg||c[v.err];return v.result}d.prototype.push=function(g,_){var v,y,E,w,A,I,R=this.strm,D=this.options.chunkSize,N=this.options.dictionary,W=!1;if(this.ended)return!1;y=_===~~_?_:_===!0?a.Z_FINISH:a.Z_NO_FLUSH,typeof g=="string"?R.input=l.binstring2buf(g):h.call(g)==="[object ArrayBuffer]"?R.input=new Uint8Array(g):R.input=g,R.next_in=0,R.avail_in=R.input.length;do{if(R.avail_out===0&&(R.output=new o.Buf8(D),R.next_out=0,R.avail_out=D),(v=r.inflate(R,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&N&&(I=typeof N=="string"?l.string2buf(N):h.call(N)==="[object ArrayBuffer]"?new Uint8Array(N):N,v=r.inflateSetDictionary(this.strm,I)),v===a.Z_BUF_ERROR&&W===!0&&(v=a.Z_OK,W=!1),v!==a.Z_STREAM_END&&v!==a.Z_OK)return this.onEnd(v),!(this.ended=!0);R.next_out&&(R.avail_out!==0&&v!==a.Z_STREAM_END&&(R.avail_in!==0||y!==a.Z_FINISH&&y!==a.Z_SYNC_FLUSH)||(this.options.to==="string"?(E=l.utf8border(R.output,R.next_out),w=R.next_out-E,A=l.buf2string(R.output,E),R.next_out=w,R.avail_out=D-w,w&&o.arraySet(R.output,R.output,E,w,0),this.onData(A)):this.onData(o.shrinkBuf(R.output,R.next_out)))),R.avail_in===0&&R.avail_out===0&&(W=!0)}while((0<R.avail_in||R.avail_out===0)&&v!==a.Z_STREAM_END);return v===a.Z_STREAM_END&&(y=a.Z_FINISH),y===a.Z_FINISH?(v=r.inflateEnd(this.strm),this.onEnd(v),this.ended=!0,v===a.Z_OK):y!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),!(R.avail_out=0))},d.prototype.onData=function(g){this.chunks.push(g)},d.prototype.onEnd=function(g){g===a.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},s.Inflate=d,s.inflate=m,s.inflateRaw=function(g,_){return(_=_||{}).raw=!0,m(g,_)},s.ungzip=m},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,i,s){var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";s.assign=function(a){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var u=c.shift();if(u){if(typeof u!="object")throw new TypeError(u+"must be non-object");for(var f in u)u.hasOwnProperty(f)&&(a[f]=u[f])}}return a},s.shrinkBuf=function(a,c){return a.length===c?a:a.subarray?a.subarray(0,c):(a.length=c,a)};var o={arraySet:function(a,c,u,f,h){if(c.subarray&&a.subarray)a.set(c.subarray(u,u+f),h);else for(var d=0;d<f;d++)a[h+d]=c[u+d]},flattenChunks:function(a){var c,u,f,h,d,m;for(c=f=0,u=a.length;c<u;c++)f+=a[c].length;for(m=new Uint8Array(f),c=h=0,u=a.length;c<u;c++)d=a[c],m.set(d,h),h+=d.length;return m}},l={arraySet:function(a,c,u,f,h){for(var d=0;d<f;d++)a[h+d]=c[u+d]},flattenChunks:function(a){return[].concat.apply([],a)}};s.setTyped=function(a){a?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,o)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,l))},s.setTyped(r)},{}],42:[function(t,i,s){var r=t("./common"),o=!0,l=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{l=!1}for(var a=new r.Buf8(256),c=0;c<256;c++)a[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function u(f,h){if(h<65537&&(f.subarray&&l||!f.subarray&&o))return String.fromCharCode.apply(null,r.shrinkBuf(f,h));for(var d="",m=0;m<h;m++)d+=String.fromCharCode(f[m]);return d}a[254]=a[254]=1,s.string2buf=function(f){var h,d,m,g,_,v=f.length,y=0;for(g=0;g<v;g++)(64512&(d=f.charCodeAt(g)))==55296&&g+1<v&&(64512&(m=f.charCodeAt(g+1)))==56320&&(d=65536+(d-55296<<10)+(m-56320),g++),y+=d<128?1:d<2048?2:d<65536?3:4;for(h=new r.Buf8(y),g=_=0;_<y;g++)(64512&(d=f.charCodeAt(g)))==55296&&g+1<v&&(64512&(m=f.charCodeAt(g+1)))==56320&&(d=65536+(d-55296<<10)+(m-56320),g++),d<128?h[_++]=d:(d<2048?h[_++]=192|d>>>6:(d<65536?h[_++]=224|d>>>12:(h[_++]=240|d>>>18,h[_++]=128|d>>>12&63),h[_++]=128|d>>>6&63),h[_++]=128|63&d);return h},s.buf2binstring=function(f){return u(f,f.length)},s.binstring2buf=function(f){for(var h=new r.Buf8(f.length),d=0,m=h.length;d<m;d++)h[d]=f.charCodeAt(d);return h},s.buf2string=function(f,h){var d,m,g,_,v=h||f.length,y=new Array(2*v);for(d=m=0;d<v;)if((g=f[d++])<128)y[m++]=g;else if(4<(_=a[g]))y[m++]=65533,d+=_-1;else{for(g&=_===2?31:_===3?15:7;1<_&&d<v;)g=g<<6|63&f[d++],_--;1<_?y[m++]=65533:g<65536?y[m++]=g:(g-=65536,y[m++]=55296|g>>10&1023,y[m++]=56320|1023&g)}return u(y,m)},s.utf8border=function(f,h){var d;for((h=h||f.length)>f.length&&(h=f.length),d=h-1;0<=d&&(192&f[d])==128;)d--;return d<0||d===0?h:d+a[f[d]]>h?d:h}},{"./common":41}],43:[function(t,i,s){i.exports=function(r,o,l,a){for(var c=65535&r|0,u=r>>>16&65535|0,f=0;l!==0;){for(l-=f=2e3<l?2e3:l;u=u+(c=c+o[a++]|0)|0,--f;);c%=65521,u%=65521}return c|u<<16|0}},{}],44:[function(t,i,s){i.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,i,s){var r=function(){for(var o,l=[],a=0;a<256;a++){o=a;for(var c=0;c<8;c++)o=1&o?3988292384^o>>>1:o>>>1;l[a]=o}return l}();i.exports=function(o,l,a,c){var u=r,f=c+a;o^=-1;for(var h=c;h<f;h++)o=o>>>8^u[255&(o^l[h])];return-1^o}},{}],46:[function(t,i,s){var r,o=t("../utils/common"),l=t("./trees"),a=t("./adler32"),c=t("./crc32"),u=t("./messages"),f=0,h=4,d=0,m=-2,g=-1,_=4,v=2,y=8,E=9,w=286,A=30,I=19,R=2*w+1,D=15,N=3,W=258,H=W+N+1,P=42,Y=113,O=1,L=2,U=3,K=4;function te(M,ae){return M.msg=u[ae],ae}function q(M){return(M<<1)-(4<M?9:0)}function x(M){for(var ae=M.length;0<=--ae;)M[ae]=0}function Z(M){var ae=M.state,de=ae.pending;de>M.avail_out&&(de=M.avail_out),de!==0&&(o.arraySet(M.output,ae.pending_buf,ae.pending_out,de,M.next_out),M.next_out+=de,ae.pending_out+=de,M.total_out+=de,M.avail_out-=de,ae.pending-=de,ae.pending===0&&(ae.pending_out=0))}function V(M,ae){l._tr_flush_block(M,0<=M.block_start?M.block_start:-1,M.strstart-M.block_start,ae),M.block_start=M.strstart,Z(M.strm)}function ce(M,ae){M.pending_buf[M.pending++]=ae}function pe(M,ae){M.pending_buf[M.pending++]=ae>>>8&255,M.pending_buf[M.pending++]=255&ae}function oe(M,ae){var de,$,ee=M.max_chain_length,ie=M.strstart,me=M.prev_length,ue=M.nice_match,se=M.strstart>M.w_size-H?M.strstart-(M.w_size-H):0,_e=M.window,ke=M.w_mask,Ce=M.prev,ge=M.strstart+W,Me=_e[ie+me-1],Ee=_e[ie+me];M.prev_length>=M.good_match&&(ee>>=2),ue>M.lookahead&&(ue=M.lookahead);do if(_e[(de=ae)+me]===Ee&&_e[de+me-1]===Me&&_e[de]===_e[ie]&&_e[++de]===_e[ie+1]){ie+=2,de++;do;while(_e[++ie]===_e[++de]&&_e[++ie]===_e[++de]&&_e[++ie]===_e[++de]&&_e[++ie]===_e[++de]&&_e[++ie]===_e[++de]&&_e[++ie]===_e[++de]&&_e[++ie]===_e[++de]&&_e[++ie]===_e[++de]&&ie<ge);if($=W-(ge-ie),ie=ge-W,me<$){if(M.match_start=ae,ue<=(me=$))break;Me=_e[ie+me-1],Ee=_e[ie+me]}}while((ae=Ce[ae&ke])>se&&--ee!=0);return me<=M.lookahead?me:M.lookahead}function ve(M){var ae,de,$,ee,ie,me,ue,se,_e,ke,Ce=M.w_size;do{if(ee=M.window_size-M.lookahead-M.strstart,M.strstart>=Ce+(Ce-H)){for(o.arraySet(M.window,M.window,Ce,Ce,0),M.match_start-=Ce,M.strstart-=Ce,M.block_start-=Ce,ae=de=M.hash_size;$=M.head[--ae],M.head[ae]=Ce<=$?$-Ce:0,--de;);for(ae=de=Ce;$=M.prev[--ae],M.prev[ae]=Ce<=$?$-Ce:0,--de;);ee+=Ce}if(M.strm.avail_in===0)break;if(me=M.strm,ue=M.window,se=M.strstart+M.lookahead,_e=ee,ke=void 0,ke=me.avail_in,_e<ke&&(ke=_e),de=ke===0?0:(me.avail_in-=ke,o.arraySet(ue,me.input,me.next_in,ke,se),me.state.wrap===1?me.adler=a(me.adler,ue,ke,se):me.state.wrap===2&&(me.adler=c(me.adler,ue,ke,se)),me.next_in+=ke,me.total_in+=ke,ke),M.lookahead+=de,M.lookahead+M.insert>=N)for(ie=M.strstart-M.insert,M.ins_h=M.window[ie],M.ins_h=(M.ins_h<<M.hash_shift^M.window[ie+1])&M.hash_mask;M.insert&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[ie+N-1])&M.hash_mask,M.prev[ie&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=ie,ie++,M.insert--,!(M.lookahead+M.insert<N)););}while(M.lookahead<H&&M.strm.avail_in!==0)}function Ne(M,ae){for(var de,$;;){if(M.lookahead<H){if(ve(M),M.lookahead<H&&ae===f)return O;if(M.lookahead===0)break}if(de=0,M.lookahead>=N&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+N-1])&M.hash_mask,de=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart),de!==0&&M.strstart-de<=M.w_size-H&&(M.match_length=oe(M,de)),M.match_length>=N)if($=l._tr_tally(M,M.strstart-M.match_start,M.match_length-N),M.lookahead-=M.match_length,M.match_length<=M.max_lazy_match&&M.lookahead>=N){for(M.match_length--;M.strstart++,M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+N-1])&M.hash_mask,de=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart,--M.match_length!=0;);M.strstart++}else M.strstart+=M.match_length,M.match_length=0,M.ins_h=M.window[M.strstart],M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+1])&M.hash_mask;else $=l._tr_tally(M,0,M.window[M.strstart]),M.lookahead--,M.strstart++;if($&&(V(M,!1),M.strm.avail_out===0))return O}return M.insert=M.strstart<N-1?M.strstart:N-1,ae===h?(V(M,!0),M.strm.avail_out===0?U:K):M.last_lit&&(V(M,!1),M.strm.avail_out===0)?O:L}function J(M,ae){for(var de,$,ee;;){if(M.lookahead<H){if(ve(M),M.lookahead<H&&ae===f)return O;if(M.lookahead===0)break}if(de=0,M.lookahead>=N&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+N-1])&M.hash_mask,de=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart),M.prev_length=M.match_length,M.prev_match=M.match_start,M.match_length=N-1,de!==0&&M.prev_length<M.max_lazy_match&&M.strstart-de<=M.w_size-H&&(M.match_length=oe(M,de),M.match_length<=5&&(M.strategy===1||M.match_length===N&&4096<M.strstart-M.match_start)&&(M.match_length=N-1)),M.prev_length>=N&&M.match_length<=M.prev_length){for(ee=M.strstart+M.lookahead-N,$=l._tr_tally(M,M.strstart-1-M.prev_match,M.prev_length-N),M.lookahead-=M.prev_length-1,M.prev_length-=2;++M.strstart<=ee&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+N-1])&M.hash_mask,de=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart),--M.prev_length!=0;);if(M.match_available=0,M.match_length=N-1,M.strstart++,$&&(V(M,!1),M.strm.avail_out===0))return O}else if(M.match_available){if(($=l._tr_tally(M,0,M.window[M.strstart-1]))&&V(M,!1),M.strstart++,M.lookahead--,M.strm.avail_out===0)return O}else M.match_available=1,M.strstart++,M.lookahead--}return M.match_available&&($=l._tr_tally(M,0,M.window[M.strstart-1]),M.match_available=0),M.insert=M.strstart<N-1?M.strstart:N-1,ae===h?(V(M,!0),M.strm.avail_out===0?U:K):M.last_lit&&(V(M,!1),M.strm.avail_out===0)?O:L}function Ie(M,ae,de,$,ee){this.good_length=M,this.max_lazy=ae,this.nice_length=de,this.max_chain=$,this.func=ee}function Ue(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*R),this.dyn_dtree=new o.Buf16(2*(2*A+1)),this.bl_tree=new o.Buf16(2*(2*I+1)),x(this.dyn_ltree),x(this.dyn_dtree),x(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(D+1),this.heap=new o.Buf16(2*w+1),x(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*w+1),x(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function re(M){var ae;return M&&M.state?(M.total_in=M.total_out=0,M.data_type=v,(ae=M.state).pending=0,ae.pending_out=0,ae.wrap<0&&(ae.wrap=-ae.wrap),ae.status=ae.wrap?P:Y,M.adler=ae.wrap===2?0:1,ae.last_flush=f,l._tr_init(ae),d):te(M,m)}function Le(M){var ae=re(M);return ae===d&&function(de){de.window_size=2*de.w_size,x(de.head),de.max_lazy_match=r[de.level].max_lazy,de.good_match=r[de.level].good_length,de.nice_match=r[de.level].nice_length,de.max_chain_length=r[de.level].max_chain,de.strstart=0,de.block_start=0,de.lookahead=0,de.insert=0,de.match_length=de.prev_length=N-1,de.match_available=0,de.ins_h=0}(M.state),ae}function fe(M,ae,de,$,ee,ie){if(!M)return m;var me=1;if(ae===g&&(ae=6),$<0?(me=0,$=-$):15<$&&(me=2,$-=16),ee<1||E<ee||de!==y||$<8||15<$||ae<0||9<ae||ie<0||_<ie)return te(M,m);$===8&&($=9);var ue=new Ue;return(M.state=ue).strm=M,ue.wrap=me,ue.gzhead=null,ue.w_bits=$,ue.w_size=1<<ue.w_bits,ue.w_mask=ue.w_size-1,ue.hash_bits=ee+7,ue.hash_size=1<<ue.hash_bits,ue.hash_mask=ue.hash_size-1,ue.hash_shift=~~((ue.hash_bits+N-1)/N),ue.window=new o.Buf8(2*ue.w_size),ue.head=new o.Buf16(ue.hash_size),ue.prev=new o.Buf16(ue.w_size),ue.lit_bufsize=1<<ee+6,ue.pending_buf_size=4*ue.lit_bufsize,ue.pending_buf=new o.Buf8(ue.pending_buf_size),ue.d_buf=1*ue.lit_bufsize,ue.l_buf=3*ue.lit_bufsize,ue.level=ae,ue.strategy=ie,ue.method=de,Le(M)}r=[new Ie(0,0,0,0,function(M,ae){var de=65535;for(de>M.pending_buf_size-5&&(de=M.pending_buf_size-5);;){if(M.lookahead<=1){if(ve(M),M.lookahead===0&&ae===f)return O;if(M.lookahead===0)break}M.strstart+=M.lookahead,M.lookahead=0;var $=M.block_start+de;if((M.strstart===0||M.strstart>=$)&&(M.lookahead=M.strstart-$,M.strstart=$,V(M,!1),M.strm.avail_out===0)||M.strstart-M.block_start>=M.w_size-H&&(V(M,!1),M.strm.avail_out===0))return O}return M.insert=0,ae===h?(V(M,!0),M.strm.avail_out===0?U:K):(M.strstart>M.block_start&&(V(M,!1),M.strm.avail_out),O)}),new Ie(4,4,8,4,Ne),new Ie(4,5,16,8,Ne),new Ie(4,6,32,32,Ne),new Ie(4,4,16,16,J),new Ie(8,16,32,32,J),new Ie(8,16,128,128,J),new Ie(8,32,128,256,J),new Ie(32,128,258,1024,J),new Ie(32,258,258,4096,J)],s.deflateInit=function(M,ae){return fe(M,ae,y,15,8,0)},s.deflateInit2=fe,s.deflateReset=Le,s.deflateResetKeep=re,s.deflateSetHeader=function(M,ae){return M&&M.state?M.state.wrap!==2?m:(M.state.gzhead=ae,d):m},s.deflate=function(M,ae){var de,$,ee,ie;if(!M||!M.state||5<ae||ae<0)return M?te(M,m):m;if($=M.state,!M.output||!M.input&&M.avail_in!==0||$.status===666&&ae!==h)return te(M,M.avail_out===0?-5:m);if($.strm=M,de=$.last_flush,$.last_flush=ae,$.status===P)if($.wrap===2)M.adler=0,ce($,31),ce($,139),ce($,8),$.gzhead?(ce($,($.gzhead.text?1:0)+($.gzhead.hcrc?2:0)+($.gzhead.extra?4:0)+($.gzhead.name?8:0)+($.gzhead.comment?16:0)),ce($,255&$.gzhead.time),ce($,$.gzhead.time>>8&255),ce($,$.gzhead.time>>16&255),ce($,$.gzhead.time>>24&255),ce($,$.level===9?2:2<=$.strategy||$.level<2?4:0),ce($,255&$.gzhead.os),$.gzhead.extra&&$.gzhead.extra.length&&(ce($,255&$.gzhead.extra.length),ce($,$.gzhead.extra.length>>8&255)),$.gzhead.hcrc&&(M.adler=c(M.adler,$.pending_buf,$.pending,0)),$.gzindex=0,$.status=69):(ce($,0),ce($,0),ce($,0),ce($,0),ce($,0),ce($,$.level===9?2:2<=$.strategy||$.level<2?4:0),ce($,3),$.status=Y);else{var me=y+($.w_bits-8<<4)<<8;me|=(2<=$.strategy||$.level<2?0:$.level<6?1:$.level===6?2:3)<<6,$.strstart!==0&&(me|=32),me+=31-me%31,$.status=Y,pe($,me),$.strstart!==0&&(pe($,M.adler>>>16),pe($,65535&M.adler)),M.adler=1}if($.status===69)if($.gzhead.extra){for(ee=$.pending;$.gzindex<(65535&$.gzhead.extra.length)&&($.pending!==$.pending_buf_size||($.gzhead.hcrc&&$.pending>ee&&(M.adler=c(M.adler,$.pending_buf,$.pending-ee,ee)),Z(M),ee=$.pending,$.pending!==$.pending_buf_size));)ce($,255&$.gzhead.extra[$.gzindex]),$.gzindex++;$.gzhead.hcrc&&$.pending>ee&&(M.adler=c(M.adler,$.pending_buf,$.pending-ee,ee)),$.gzindex===$.gzhead.extra.length&&($.gzindex=0,$.status=73)}else $.status=73;if($.status===73)if($.gzhead.name){ee=$.pending;do{if($.pending===$.pending_buf_size&&($.gzhead.hcrc&&$.pending>ee&&(M.adler=c(M.adler,$.pending_buf,$.pending-ee,ee)),Z(M),ee=$.pending,$.pending===$.pending_buf_size)){ie=1;break}ie=$.gzindex<$.gzhead.name.length?255&$.gzhead.name.charCodeAt($.gzindex++):0,ce($,ie)}while(ie!==0);$.gzhead.hcrc&&$.pending>ee&&(M.adler=c(M.adler,$.pending_buf,$.pending-ee,ee)),ie===0&&($.gzindex=0,$.status=91)}else $.status=91;if($.status===91)if($.gzhead.comment){ee=$.pending;do{if($.pending===$.pending_buf_size&&($.gzhead.hcrc&&$.pending>ee&&(M.adler=c(M.adler,$.pending_buf,$.pending-ee,ee)),Z(M),ee=$.pending,$.pending===$.pending_buf_size)){ie=1;break}ie=$.gzindex<$.gzhead.comment.length?255&$.gzhead.comment.charCodeAt($.gzindex++):0,ce($,ie)}while(ie!==0);$.gzhead.hcrc&&$.pending>ee&&(M.adler=c(M.adler,$.pending_buf,$.pending-ee,ee)),ie===0&&($.status=103)}else $.status=103;if($.status===103&&($.gzhead.hcrc?($.pending+2>$.pending_buf_size&&Z(M),$.pending+2<=$.pending_buf_size&&(ce($,255&M.adler),ce($,M.adler>>8&255),M.adler=0,$.status=Y)):$.status=Y),$.pending!==0){if(Z(M),M.avail_out===0)return $.last_flush=-1,d}else if(M.avail_in===0&&q(ae)<=q(de)&&ae!==h)return te(M,-5);if($.status===666&&M.avail_in!==0)return te(M,-5);if(M.avail_in!==0||$.lookahead!==0||ae!==f&&$.status!==666){var ue=$.strategy===2?function(se,_e){for(var ke;;){if(se.lookahead===0&&(ve(se),se.lookahead===0)){if(_e===f)return O;break}if(se.match_length=0,ke=l._tr_tally(se,0,se.window[se.strstart]),se.lookahead--,se.strstart++,ke&&(V(se,!1),se.strm.avail_out===0))return O}return se.insert=0,_e===h?(V(se,!0),se.strm.avail_out===0?U:K):se.last_lit&&(V(se,!1),se.strm.avail_out===0)?O:L}($,ae):$.strategy===3?function(se,_e){for(var ke,Ce,ge,Me,Ee=se.window;;){if(se.lookahead<=W){if(ve(se),se.lookahead<=W&&_e===f)return O;if(se.lookahead===0)break}if(se.match_length=0,se.lookahead>=N&&0<se.strstart&&(Ce=Ee[ge=se.strstart-1])===Ee[++ge]&&Ce===Ee[++ge]&&Ce===Ee[++ge]){Me=se.strstart+W;do;while(Ce===Ee[++ge]&&Ce===Ee[++ge]&&Ce===Ee[++ge]&&Ce===Ee[++ge]&&Ce===Ee[++ge]&&Ce===Ee[++ge]&&Ce===Ee[++ge]&&Ce===Ee[++ge]&&ge<Me);se.match_length=W-(Me-ge),se.match_length>se.lookahead&&(se.match_length=se.lookahead)}if(se.match_length>=N?(ke=l._tr_tally(se,1,se.match_length-N),se.lookahead-=se.match_length,se.strstart+=se.match_length,se.match_length=0):(ke=l._tr_tally(se,0,se.window[se.strstart]),se.lookahead--,se.strstart++),ke&&(V(se,!1),se.strm.avail_out===0))return O}return se.insert=0,_e===h?(V(se,!0),se.strm.avail_out===0?U:K):se.last_lit&&(V(se,!1),se.strm.avail_out===0)?O:L}($,ae):r[$.level].func($,ae);if(ue!==U&&ue!==K||($.status=666),ue===O||ue===U)return M.avail_out===0&&($.last_flush=-1),d;if(ue===L&&(ae===1?l._tr_align($):ae!==5&&(l._tr_stored_block($,0,0,!1),ae===3&&(x($.head),$.lookahead===0&&($.strstart=0,$.block_start=0,$.insert=0))),Z(M),M.avail_out===0))return $.last_flush=-1,d}return ae!==h?d:$.wrap<=0?1:($.wrap===2?(ce($,255&M.adler),ce($,M.adler>>8&255),ce($,M.adler>>16&255),ce($,M.adler>>24&255),ce($,255&M.total_in),ce($,M.total_in>>8&255),ce($,M.total_in>>16&255),ce($,M.total_in>>24&255)):(pe($,M.adler>>>16),pe($,65535&M.adler)),Z(M),0<$.wrap&&($.wrap=-$.wrap),$.pending!==0?d:1)},s.deflateEnd=function(M){var ae;return M&&M.state?(ae=M.state.status)!==P&&ae!==69&&ae!==73&&ae!==91&&ae!==103&&ae!==Y&&ae!==666?te(M,m):(M.state=null,ae===Y?te(M,-3):d):m},s.deflateSetDictionary=function(M,ae){var de,$,ee,ie,me,ue,se,_e,ke=ae.length;if(!M||!M.state||(ie=(de=M.state).wrap)===2||ie===1&&de.status!==P||de.lookahead)return m;for(ie===1&&(M.adler=a(M.adler,ae,ke,0)),de.wrap=0,ke>=de.w_size&&(ie===0&&(x(de.head),de.strstart=0,de.block_start=0,de.insert=0),_e=new o.Buf8(de.w_size),o.arraySet(_e,ae,ke-de.w_size,de.w_size,0),ae=_e,ke=de.w_size),me=M.avail_in,ue=M.next_in,se=M.input,M.avail_in=ke,M.next_in=0,M.input=ae,ve(de);de.lookahead>=N;){for($=de.strstart,ee=de.lookahead-(N-1);de.ins_h=(de.ins_h<<de.hash_shift^de.window[$+N-1])&de.hash_mask,de.prev[$&de.w_mask]=de.head[de.ins_h],de.head[de.ins_h]=$,$++,--ee;);de.strstart=$,de.lookahead=N-1,ve(de)}return de.strstart+=de.lookahead,de.block_start=de.strstart,de.insert=de.lookahead,de.lookahead=0,de.match_length=de.prev_length=N-1,de.match_available=0,M.next_in=ue,M.input=se,M.avail_in=me,de.wrap=ie,d},s.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,i,s){i.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,i,s){i.exports=function(r,o){var l,a,c,u,f,h,d,m,g,_,v,y,E,w,A,I,R,D,N,W,H,P,Y,O,L;l=r.state,a=r.next_in,O=r.input,c=a+(r.avail_in-5),u=r.next_out,L=r.output,f=u-(o-r.avail_out),h=u+(r.avail_out-257),d=l.dmax,m=l.wsize,g=l.whave,_=l.wnext,v=l.window,y=l.hold,E=l.bits,w=l.lencode,A=l.distcode,I=(1<<l.lenbits)-1,R=(1<<l.distbits)-1;e:do{E<15&&(y+=O[a++]<<E,E+=8,y+=O[a++]<<E,E+=8),D=w[y&I];t:for(;;){if(y>>>=N=D>>>24,E-=N,(N=D>>>16&255)===0)L[u++]=65535&D;else{if(!(16&N)){if(!(64&N)){D=w[(65535&D)+(y&(1<<N)-1)];continue t}if(32&N){l.mode=12;break e}r.msg="invalid literal/length code",l.mode=30;break e}W=65535&D,(N&=15)&&(E<N&&(y+=O[a++]<<E,E+=8),W+=y&(1<<N)-1,y>>>=N,E-=N),E<15&&(y+=O[a++]<<E,E+=8,y+=O[a++]<<E,E+=8),D=A[y&R];n:for(;;){if(y>>>=N=D>>>24,E-=N,!(16&(N=D>>>16&255))){if(!(64&N)){D=A[(65535&D)+(y&(1<<N)-1)];continue n}r.msg="invalid distance code",l.mode=30;break e}if(H=65535&D,E<(N&=15)&&(y+=O[a++]<<E,(E+=8)<N&&(y+=O[a++]<<E,E+=8)),d<(H+=y&(1<<N)-1)){r.msg="invalid distance too far back",l.mode=30;break e}if(y>>>=N,E-=N,(N=u-f)<H){if(g<(N=H-N)&&l.sane){r.msg="invalid distance too far back",l.mode=30;break e}if(Y=v,(P=0)===_){if(P+=m-N,N<W){for(W-=N;L[u++]=v[P++],--N;);P=u-H,Y=L}}else if(_<N){if(P+=m+_-N,(N-=_)<W){for(W-=N;L[u++]=v[P++],--N;);if(P=0,_<W){for(W-=N=_;L[u++]=v[P++],--N;);P=u-H,Y=L}}}else if(P+=_-N,N<W){for(W-=N;L[u++]=v[P++],--N;);P=u-H,Y=L}for(;2<W;)L[u++]=Y[P++],L[u++]=Y[P++],L[u++]=Y[P++],W-=3;W&&(L[u++]=Y[P++],1<W&&(L[u++]=Y[P++]))}else{for(P=u-H;L[u++]=L[P++],L[u++]=L[P++],L[u++]=L[P++],2<(W-=3););W&&(L[u++]=L[P++],1<W&&(L[u++]=L[P++]))}break}}break}}while(a<c&&u<h);a-=W=E>>3,y&=(1<<(E-=W<<3))-1,r.next_in=a,r.next_out=u,r.avail_in=a<c?c-a+5:5-(a-c),r.avail_out=u<h?h-u+257:257-(u-h),l.hold=y,l.bits=E}},{}],49:[function(t,i,s){var r=t("../utils/common"),o=t("./adler32"),l=t("./crc32"),a=t("./inffast"),c=t("./inftrees"),u=1,f=2,h=0,d=-2,m=1,g=852,_=592;function v(P){return(P>>>24&255)+(P>>>8&65280)+((65280&P)<<8)+((255&P)<<24)}function y(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function E(P){var Y;return P&&P.state?(Y=P.state,P.total_in=P.total_out=Y.total=0,P.msg="",Y.wrap&&(P.adler=1&Y.wrap),Y.mode=m,Y.last=0,Y.havedict=0,Y.dmax=32768,Y.head=null,Y.hold=0,Y.bits=0,Y.lencode=Y.lendyn=new r.Buf32(g),Y.distcode=Y.distdyn=new r.Buf32(_),Y.sane=1,Y.back=-1,h):d}function w(P){var Y;return P&&P.state?((Y=P.state).wsize=0,Y.whave=0,Y.wnext=0,E(P)):d}function A(P,Y){var O,L;return P&&P.state?(L=P.state,Y<0?(O=0,Y=-Y):(O=1+(Y>>4),Y<48&&(Y&=15)),Y&&(Y<8||15<Y)?d:(L.window!==null&&L.wbits!==Y&&(L.window=null),L.wrap=O,L.wbits=Y,w(P))):d}function I(P,Y){var O,L;return P?(L=new y,(P.state=L).window=null,(O=A(P,Y))!==h&&(P.state=null),O):d}var R,D,N=!0;function W(P){if(N){var Y;for(R=new r.Buf32(512),D=new r.Buf32(32),Y=0;Y<144;)P.lens[Y++]=8;for(;Y<256;)P.lens[Y++]=9;for(;Y<280;)P.lens[Y++]=7;for(;Y<288;)P.lens[Y++]=8;for(c(u,P.lens,0,288,R,0,P.work,{bits:9}),Y=0;Y<32;)P.lens[Y++]=5;c(f,P.lens,0,32,D,0,P.work,{bits:5}),N=!1}P.lencode=R,P.lenbits=9,P.distcode=D,P.distbits=5}function H(P,Y,O,L){var U,K=P.state;return K.window===null&&(K.wsize=1<<K.wbits,K.wnext=0,K.whave=0,K.window=new r.Buf8(K.wsize)),L>=K.wsize?(r.arraySet(K.window,Y,O-K.wsize,K.wsize,0),K.wnext=0,K.whave=K.wsize):(L<(U=K.wsize-K.wnext)&&(U=L),r.arraySet(K.window,Y,O-L,U,K.wnext),(L-=U)?(r.arraySet(K.window,Y,O-L,L,0),K.wnext=L,K.whave=K.wsize):(K.wnext+=U,K.wnext===K.wsize&&(K.wnext=0),K.whave<K.wsize&&(K.whave+=U))),0}s.inflateReset=w,s.inflateReset2=A,s.inflateResetKeep=E,s.inflateInit=function(P){return I(P,15)},s.inflateInit2=I,s.inflate=function(P,Y){var O,L,U,K,te,q,x,Z,V,ce,pe,oe,ve,Ne,J,Ie,Ue,re,Le,fe,M,ae,de,$,ee=0,ie=new r.Buf8(4),me=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!P||!P.state||!P.output||!P.input&&P.avail_in!==0)return d;(O=P.state).mode===12&&(O.mode=13),te=P.next_out,U=P.output,x=P.avail_out,K=P.next_in,L=P.input,q=P.avail_in,Z=O.hold,V=O.bits,ce=q,pe=x,ae=h;e:for(;;)switch(O.mode){case m:if(O.wrap===0){O.mode=13;break}for(;V<16;){if(q===0)break e;q--,Z+=L[K++]<<V,V+=8}if(2&O.wrap&&Z===35615){ie[O.check=0]=255&Z,ie[1]=Z>>>8&255,O.check=l(O.check,ie,2,0),V=Z=0,O.mode=2;break}if(O.flags=0,O.head&&(O.head.done=!1),!(1&O.wrap)||(((255&Z)<<8)+(Z>>8))%31){P.msg="incorrect header check",O.mode=30;break}if((15&Z)!=8){P.msg="unknown compression method",O.mode=30;break}if(V-=4,M=8+(15&(Z>>>=4)),O.wbits===0)O.wbits=M;else if(M>O.wbits){P.msg="invalid window size",O.mode=30;break}O.dmax=1<<M,P.adler=O.check=1,O.mode=512&Z?10:12,V=Z=0;break;case 2:for(;V<16;){if(q===0)break e;q--,Z+=L[K++]<<V,V+=8}if(O.flags=Z,(255&O.flags)!=8){P.msg="unknown compression method",O.mode=30;break}if(57344&O.flags){P.msg="unknown header flags set",O.mode=30;break}O.head&&(O.head.text=Z>>8&1),512&O.flags&&(ie[0]=255&Z,ie[1]=Z>>>8&255,O.check=l(O.check,ie,2,0)),V=Z=0,O.mode=3;case 3:for(;V<32;){if(q===0)break e;q--,Z+=L[K++]<<V,V+=8}O.head&&(O.head.time=Z),512&O.flags&&(ie[0]=255&Z,ie[1]=Z>>>8&255,ie[2]=Z>>>16&255,ie[3]=Z>>>24&255,O.check=l(O.check,ie,4,0)),V=Z=0,O.mode=4;case 4:for(;V<16;){if(q===0)break e;q--,Z+=L[K++]<<V,V+=8}O.head&&(O.head.xflags=255&Z,O.head.os=Z>>8),512&O.flags&&(ie[0]=255&Z,ie[1]=Z>>>8&255,O.check=l(O.check,ie,2,0)),V=Z=0,O.mode=5;case 5:if(1024&O.flags){for(;V<16;){if(q===0)break e;q--,Z+=L[K++]<<V,V+=8}O.length=Z,O.head&&(O.head.extra_len=Z),512&O.flags&&(ie[0]=255&Z,ie[1]=Z>>>8&255,O.check=l(O.check,ie,2,0)),V=Z=0}else O.head&&(O.head.extra=null);O.mode=6;case 6:if(1024&O.flags&&(q<(oe=O.length)&&(oe=q),oe&&(O.head&&(M=O.head.extra_len-O.length,O.head.extra||(O.head.extra=new Array(O.head.extra_len)),r.arraySet(O.head.extra,L,K,oe,M)),512&O.flags&&(O.check=l(O.check,L,oe,K)),q-=oe,K+=oe,O.length-=oe),O.length))break e;O.length=0,O.mode=7;case 7:if(2048&O.flags){if(q===0)break e;for(oe=0;M=L[K+oe++],O.head&&M&&O.length<65536&&(O.head.name+=String.fromCharCode(M)),M&&oe<q;);if(512&O.flags&&(O.check=l(O.check,L,oe,K)),q-=oe,K+=oe,M)break e}else O.head&&(O.head.name=null);O.length=0,O.mode=8;case 8:if(4096&O.flags){if(q===0)break e;for(oe=0;M=L[K+oe++],O.head&&M&&O.length<65536&&(O.head.comment+=String.fromCharCode(M)),M&&oe<q;);if(512&O.flags&&(O.check=l(O.check,L,oe,K)),q-=oe,K+=oe,M)break e}else O.head&&(O.head.comment=null);O.mode=9;case 9:if(512&O.flags){for(;V<16;){if(q===0)break e;q--,Z+=L[K++]<<V,V+=8}if(Z!==(65535&O.check)){P.msg="header crc mismatch",O.mode=30;break}V=Z=0}O.head&&(O.head.hcrc=O.flags>>9&1,O.head.done=!0),P.adler=O.check=0,O.mode=12;break;case 10:for(;V<32;){if(q===0)break e;q--,Z+=L[K++]<<V,V+=8}P.adler=O.check=v(Z),V=Z=0,O.mode=11;case 11:if(O.havedict===0)return P.next_out=te,P.avail_out=x,P.next_in=K,P.avail_in=q,O.hold=Z,O.bits=V,2;P.adler=O.check=1,O.mode=12;case 12:if(Y===5||Y===6)break e;case 13:if(O.last){Z>>>=7&V,V-=7&V,O.mode=27;break}for(;V<3;){if(q===0)break e;q--,Z+=L[K++]<<V,V+=8}switch(O.last=1&Z,V-=1,3&(Z>>>=1)){case 0:O.mode=14;break;case 1:if(W(O),O.mode=20,Y!==6)break;Z>>>=2,V-=2;break e;case 2:O.mode=17;break;case 3:P.msg="invalid block type",O.mode=30}Z>>>=2,V-=2;break;case 14:for(Z>>>=7&V,V-=7&V;V<32;){if(q===0)break e;q--,Z+=L[K++]<<V,V+=8}if((65535&Z)!=(Z>>>16^65535)){P.msg="invalid stored block lengths",O.mode=30;break}if(O.length=65535&Z,V=Z=0,O.mode=15,Y===6)break e;case 15:O.mode=16;case 16:if(oe=O.length){if(q<oe&&(oe=q),x<oe&&(oe=x),oe===0)break e;r.arraySet(U,L,K,oe,te),q-=oe,K+=oe,x-=oe,te+=oe,O.length-=oe;break}O.mode=12;break;case 17:for(;V<14;){if(q===0)break e;q--,Z+=L[K++]<<V,V+=8}if(O.nlen=257+(31&Z),Z>>>=5,V-=5,O.ndist=1+(31&Z),Z>>>=5,V-=5,O.ncode=4+(15&Z),Z>>>=4,V-=4,286<O.nlen||30<O.ndist){P.msg="too many length or distance symbols",O.mode=30;break}O.have=0,O.mode=18;case 18:for(;O.have<O.ncode;){for(;V<3;){if(q===0)break e;q--,Z+=L[K++]<<V,V+=8}O.lens[me[O.have++]]=7&Z,Z>>>=3,V-=3}for(;O.have<19;)O.lens[me[O.have++]]=0;if(O.lencode=O.lendyn,O.lenbits=7,de={bits:O.lenbits},ae=c(0,O.lens,0,19,O.lencode,0,O.work,de),O.lenbits=de.bits,ae){P.msg="invalid code lengths set",O.mode=30;break}O.have=0,O.mode=19;case 19:for(;O.have<O.nlen+O.ndist;){for(;Ie=(ee=O.lencode[Z&(1<<O.lenbits)-1])>>>16&255,Ue=65535&ee,!((J=ee>>>24)<=V);){if(q===0)break e;q--,Z+=L[K++]<<V,V+=8}if(Ue<16)Z>>>=J,V-=J,O.lens[O.have++]=Ue;else{if(Ue===16){for($=J+2;V<$;){if(q===0)break e;q--,Z+=L[K++]<<V,V+=8}if(Z>>>=J,V-=J,O.have===0){P.msg="invalid bit length repeat",O.mode=30;break}M=O.lens[O.have-1],oe=3+(3&Z),Z>>>=2,V-=2}else if(Ue===17){for($=J+3;V<$;){if(q===0)break e;q--,Z+=L[K++]<<V,V+=8}V-=J,M=0,oe=3+(7&(Z>>>=J)),Z>>>=3,V-=3}else{for($=J+7;V<$;){if(q===0)break e;q--,Z+=L[K++]<<V,V+=8}V-=J,M=0,oe=11+(127&(Z>>>=J)),Z>>>=7,V-=7}if(O.have+oe>O.nlen+O.ndist){P.msg="invalid bit length repeat",O.mode=30;break}for(;oe--;)O.lens[O.have++]=M}}if(O.mode===30)break;if(O.lens[256]===0){P.msg="invalid code -- missing end-of-block",O.mode=30;break}if(O.lenbits=9,de={bits:O.lenbits},ae=c(u,O.lens,0,O.nlen,O.lencode,0,O.work,de),O.lenbits=de.bits,ae){P.msg="invalid literal/lengths set",O.mode=30;break}if(O.distbits=6,O.distcode=O.distdyn,de={bits:O.distbits},ae=c(f,O.lens,O.nlen,O.ndist,O.distcode,0,O.work,de),O.distbits=de.bits,ae){P.msg="invalid distances set",O.mode=30;break}if(O.mode=20,Y===6)break e;case 20:O.mode=21;case 21:if(6<=q&&258<=x){P.next_out=te,P.avail_out=x,P.next_in=K,P.avail_in=q,O.hold=Z,O.bits=V,a(P,pe),te=P.next_out,U=P.output,x=P.avail_out,K=P.next_in,L=P.input,q=P.avail_in,Z=O.hold,V=O.bits,O.mode===12&&(O.back=-1);break}for(O.back=0;Ie=(ee=O.lencode[Z&(1<<O.lenbits)-1])>>>16&255,Ue=65535&ee,!((J=ee>>>24)<=V);){if(q===0)break e;q--,Z+=L[K++]<<V,V+=8}if(Ie&&!(240&Ie)){for(re=J,Le=Ie,fe=Ue;Ie=(ee=O.lencode[fe+((Z&(1<<re+Le)-1)>>re)])>>>16&255,Ue=65535&ee,!(re+(J=ee>>>24)<=V);){if(q===0)break e;q--,Z+=L[K++]<<V,V+=8}Z>>>=re,V-=re,O.back+=re}if(Z>>>=J,V-=J,O.back+=J,O.length=Ue,Ie===0){O.mode=26;break}if(32&Ie){O.back=-1,O.mode=12;break}if(64&Ie){P.msg="invalid literal/length code",O.mode=30;break}O.extra=15&Ie,O.mode=22;case 22:if(O.extra){for($=O.extra;V<$;){if(q===0)break e;q--,Z+=L[K++]<<V,V+=8}O.length+=Z&(1<<O.extra)-1,Z>>>=O.extra,V-=O.extra,O.back+=O.extra}O.was=O.length,O.mode=23;case 23:for(;Ie=(ee=O.distcode[Z&(1<<O.distbits)-1])>>>16&255,Ue=65535&ee,!((J=ee>>>24)<=V);){if(q===0)break e;q--,Z+=L[K++]<<V,V+=8}if(!(240&Ie)){for(re=J,Le=Ie,fe=Ue;Ie=(ee=O.distcode[fe+((Z&(1<<re+Le)-1)>>re)])>>>16&255,Ue=65535&ee,!(re+(J=ee>>>24)<=V);){if(q===0)break e;q--,Z+=L[K++]<<V,V+=8}Z>>>=re,V-=re,O.back+=re}if(Z>>>=J,V-=J,O.back+=J,64&Ie){P.msg="invalid distance code",O.mode=30;break}O.offset=Ue,O.extra=15&Ie,O.mode=24;case 24:if(O.extra){for($=O.extra;V<$;){if(q===0)break e;q--,Z+=L[K++]<<V,V+=8}O.offset+=Z&(1<<O.extra)-1,Z>>>=O.extra,V-=O.extra,O.back+=O.extra}if(O.offset>O.dmax){P.msg="invalid distance too far back",O.mode=30;break}O.mode=25;case 25:if(x===0)break e;if(oe=pe-x,O.offset>oe){if((oe=O.offset-oe)>O.whave&&O.sane){P.msg="invalid distance too far back",O.mode=30;break}ve=oe>O.wnext?(oe-=O.wnext,O.wsize-oe):O.wnext-oe,oe>O.length&&(oe=O.length),Ne=O.window}else Ne=U,ve=te-O.offset,oe=O.length;for(x<oe&&(oe=x),x-=oe,O.length-=oe;U[te++]=Ne[ve++],--oe;);O.length===0&&(O.mode=21);break;case 26:if(x===0)break e;U[te++]=O.length,x--,O.mode=21;break;case 27:if(O.wrap){for(;V<32;){if(q===0)break e;q--,Z|=L[K++]<<V,V+=8}if(pe-=x,P.total_out+=pe,O.total+=pe,pe&&(P.adler=O.check=O.flags?l(O.check,U,pe,te-pe):o(O.check,U,pe,te-pe)),pe=x,(O.flags?Z:v(Z))!==O.check){P.msg="incorrect data check",O.mode=30;break}V=Z=0}O.mode=28;case 28:if(O.wrap&&O.flags){for(;V<32;){if(q===0)break e;q--,Z+=L[K++]<<V,V+=8}if(Z!==(4294967295&O.total)){P.msg="incorrect length check",O.mode=30;break}V=Z=0}O.mode=29;case 29:ae=1;break e;case 30:ae=-3;break e;case 31:return-4;case 32:default:return d}return P.next_out=te,P.avail_out=x,P.next_in=K,P.avail_in=q,O.hold=Z,O.bits=V,(O.wsize||pe!==P.avail_out&&O.mode<30&&(O.mode<27||Y!==4))&&H(P,P.output,P.next_out,pe-P.avail_out)?(O.mode=31,-4):(ce-=P.avail_in,pe-=P.avail_out,P.total_in+=ce,P.total_out+=pe,O.total+=pe,O.wrap&&pe&&(P.adler=O.check=O.flags?l(O.check,U,pe,P.next_out-pe):o(O.check,U,pe,P.next_out-pe)),P.data_type=O.bits+(O.last?64:0)+(O.mode===12?128:0)+(O.mode===20||O.mode===15?256:0),(ce==0&&pe===0||Y===4)&&ae===h&&(ae=-5),ae)},s.inflateEnd=function(P){if(!P||!P.state)return d;var Y=P.state;return Y.window&&(Y.window=null),P.state=null,h},s.inflateGetHeader=function(P,Y){var O;return P&&P.state&&2&(O=P.state).wrap?((O.head=Y).done=!1,h):d},s.inflateSetDictionary=function(P,Y){var O,L=Y.length;return P&&P.state?(O=P.state).wrap!==0&&O.mode!==11?d:O.mode===11&&o(1,Y,L,0)!==O.check?-3:H(P,Y,L,L)?(O.mode=31,-4):(O.havedict=1,h):d},s.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,i,s){var r=t("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];i.exports=function(u,f,h,d,m,g,_,v){var y,E,w,A,I,R,D,N,W,H=v.bits,P=0,Y=0,O=0,L=0,U=0,K=0,te=0,q=0,x=0,Z=0,V=null,ce=0,pe=new r.Buf16(16),oe=new r.Buf16(16),ve=null,Ne=0;for(P=0;P<=15;P++)pe[P]=0;for(Y=0;Y<d;Y++)pe[f[h+Y]]++;for(U=H,L=15;1<=L&&pe[L]===0;L--);if(L<U&&(U=L),L===0)return m[g++]=20971520,m[g++]=20971520,v.bits=1,0;for(O=1;O<L&&pe[O]===0;O++);for(U<O&&(U=O),P=q=1;P<=15;P++)if(q<<=1,(q-=pe[P])<0)return-1;if(0<q&&(u===0||L!==1))return-1;for(oe[1]=0,P=1;P<15;P++)oe[P+1]=oe[P]+pe[P];for(Y=0;Y<d;Y++)f[h+Y]!==0&&(_[oe[f[h+Y]]++]=Y);if(R=u===0?(V=ve=_,19):u===1?(V=o,ce-=257,ve=l,Ne-=257,256):(V=a,ve=c,-1),P=O,I=g,te=Y=Z=0,w=-1,A=(x=1<<(K=U))-1,u===1&&852<x||u===2&&592<x)return 1;for(;;){for(D=P-te,W=_[Y]<R?(N=0,_[Y]):_[Y]>R?(N=ve[Ne+_[Y]],V[ce+_[Y]]):(N=96,0),y=1<<P-te,O=E=1<<K;m[I+(Z>>te)+(E-=y)]=D<<24|N<<16|W|0,E!==0;);for(y=1<<P-1;Z&y;)y>>=1;if(y!==0?(Z&=y-1,Z+=y):Z=0,Y++,--pe[P]==0){if(P===L)break;P=f[h+_[Y]]}if(U<P&&(Z&A)!==w){for(te===0&&(te=U),I+=O,q=1<<(K=P-te);K+te<L&&!((q-=pe[K+te])<=0);)K++,q<<=1;if(x+=1<<K,u===1&&852<x||u===2&&592<x)return 1;m[w=Z&A]=U<<24|K<<16|I-g|0}}return Z!==0&&(m[I+Z]=P-te<<24|64<<16|0),v.bits=U,0}},{"../utils/common":41}],51:[function(t,i,s){i.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,i,s){var r=t("../utils/common"),o=0,l=1;function a(ee){for(var ie=ee.length;0<=--ie;)ee[ie]=0}var c=0,u=29,f=256,h=f+1+u,d=30,m=19,g=2*h+1,_=15,v=16,y=7,E=256,w=16,A=17,I=18,R=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],D=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],N=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],W=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],H=new Array(2*(h+2));a(H);var P=new Array(2*d);a(P);var Y=new Array(512);a(Y);var O=new Array(256);a(O);var L=new Array(u);a(L);var U,K,te,q=new Array(d);function x(ee,ie,me,ue,se){this.static_tree=ee,this.extra_bits=ie,this.extra_base=me,this.elems=ue,this.max_length=se,this.has_stree=ee&&ee.length}function Z(ee,ie){this.dyn_tree=ee,this.max_code=0,this.stat_desc=ie}function V(ee){return ee<256?Y[ee]:Y[256+(ee>>>7)]}function ce(ee,ie){ee.pending_buf[ee.pending++]=255&ie,ee.pending_buf[ee.pending++]=ie>>>8&255}function pe(ee,ie,me){ee.bi_valid>v-me?(ee.bi_buf|=ie<<ee.bi_valid&65535,ce(ee,ee.bi_buf),ee.bi_buf=ie>>v-ee.bi_valid,ee.bi_valid+=me-v):(ee.bi_buf|=ie<<ee.bi_valid&65535,ee.bi_valid+=me)}function oe(ee,ie,me){pe(ee,me[2*ie],me[2*ie+1])}function ve(ee,ie){for(var me=0;me|=1&ee,ee>>>=1,me<<=1,0<--ie;);return me>>>1}function Ne(ee,ie,me){var ue,se,_e=new Array(_+1),ke=0;for(ue=1;ue<=_;ue++)_e[ue]=ke=ke+me[ue-1]<<1;for(se=0;se<=ie;se++){var Ce=ee[2*se+1];Ce!==0&&(ee[2*se]=ve(_e[Ce]++,Ce))}}function J(ee){var ie;for(ie=0;ie<h;ie++)ee.dyn_ltree[2*ie]=0;for(ie=0;ie<d;ie++)ee.dyn_dtree[2*ie]=0;for(ie=0;ie<m;ie++)ee.bl_tree[2*ie]=0;ee.dyn_ltree[2*E]=1,ee.opt_len=ee.static_len=0,ee.last_lit=ee.matches=0}function Ie(ee){8<ee.bi_valid?ce(ee,ee.bi_buf):0<ee.bi_valid&&(ee.pending_buf[ee.pending++]=ee.bi_buf),ee.bi_buf=0,ee.bi_valid=0}function Ue(ee,ie,me,ue){var se=2*ie,_e=2*me;return ee[se]<ee[_e]||ee[se]===ee[_e]&&ue[ie]<=ue[me]}function re(ee,ie,me){for(var ue=ee.heap[me],se=me<<1;se<=ee.heap_len&&(se<ee.heap_len&&Ue(ie,ee.heap[se+1],ee.heap[se],ee.depth)&&se++,!Ue(ie,ue,ee.heap[se],ee.depth));)ee.heap[me]=ee.heap[se],me=se,se<<=1;ee.heap[me]=ue}function Le(ee,ie,me){var ue,se,_e,ke,Ce=0;if(ee.last_lit!==0)for(;ue=ee.pending_buf[ee.d_buf+2*Ce]<<8|ee.pending_buf[ee.d_buf+2*Ce+1],se=ee.pending_buf[ee.l_buf+Ce],Ce++,ue===0?oe(ee,se,ie):(oe(ee,(_e=O[se])+f+1,ie),(ke=R[_e])!==0&&pe(ee,se-=L[_e],ke),oe(ee,_e=V(--ue),me),(ke=D[_e])!==0&&pe(ee,ue-=q[_e],ke)),Ce<ee.last_lit;);oe(ee,E,ie)}function fe(ee,ie){var me,ue,se,_e=ie.dyn_tree,ke=ie.stat_desc.static_tree,Ce=ie.stat_desc.has_stree,ge=ie.stat_desc.elems,Me=-1;for(ee.heap_len=0,ee.heap_max=g,me=0;me<ge;me++)_e[2*me]!==0?(ee.heap[++ee.heap_len]=Me=me,ee.depth[me]=0):_e[2*me+1]=0;for(;ee.heap_len<2;)_e[2*(se=ee.heap[++ee.heap_len]=Me<2?++Me:0)]=1,ee.depth[se]=0,ee.opt_len--,Ce&&(ee.static_len-=ke[2*se+1]);for(ie.max_code=Me,me=ee.heap_len>>1;1<=me;me--)re(ee,_e,me);for(se=ge;me=ee.heap[1],ee.heap[1]=ee.heap[ee.heap_len--],re(ee,_e,1),ue=ee.heap[1],ee.heap[--ee.heap_max]=me,ee.heap[--ee.heap_max]=ue,_e[2*se]=_e[2*me]+_e[2*ue],ee.depth[se]=(ee.depth[me]>=ee.depth[ue]?ee.depth[me]:ee.depth[ue])+1,_e[2*me+1]=_e[2*ue+1]=se,ee.heap[1]=se++,re(ee,_e,1),2<=ee.heap_len;);ee.heap[--ee.heap_max]=ee.heap[1],function(Ee,Pe){var be,nt,Fe,we,lt,je,Qe=Pe.dyn_tree,ye=Pe.max_code,Ze=Pe.stat_desc.static_tree,Lt=Pe.stat_desc.has_stree,vt=Pe.stat_desc.extra_bits,Ct=Pe.stat_desc.extra_base,Ot=Pe.stat_desc.max_length,en=0;for(we=0;we<=_;we++)Ee.bl_count[we]=0;for(Qe[2*Ee.heap[Ee.heap_max]+1]=0,be=Ee.heap_max+1;be<g;be++)Ot<(we=Qe[2*Qe[2*(nt=Ee.heap[be])+1]+1]+1)&&(we=Ot,en++),Qe[2*nt+1]=we,ye<nt||(Ee.bl_count[we]++,lt=0,Ct<=nt&&(lt=vt[nt-Ct]),je=Qe[2*nt],Ee.opt_len+=je*(we+lt),Lt&&(Ee.static_len+=je*(Ze[2*nt+1]+lt)));if(en!==0){do{for(we=Ot-1;Ee.bl_count[we]===0;)we--;Ee.bl_count[we]--,Ee.bl_count[we+1]+=2,Ee.bl_count[Ot]--,en-=2}while(0<en);for(we=Ot;we!==0;we--)for(nt=Ee.bl_count[we];nt!==0;)ye<(Fe=Ee.heap[--be])||(Qe[2*Fe+1]!==we&&(Ee.opt_len+=(we-Qe[2*Fe+1])*Qe[2*Fe],Qe[2*Fe+1]=we),nt--)}}(ee,ie),Ne(_e,Me,ee.bl_count)}function M(ee,ie,me){var ue,se,_e=-1,ke=ie[1],Ce=0,ge=7,Me=4;for(ke===0&&(ge=138,Me=3),ie[2*(me+1)+1]=65535,ue=0;ue<=me;ue++)se=ke,ke=ie[2*(ue+1)+1],++Ce<ge&&se===ke||(Ce<Me?ee.bl_tree[2*se]+=Ce:se!==0?(se!==_e&&ee.bl_tree[2*se]++,ee.bl_tree[2*w]++):Ce<=10?ee.bl_tree[2*A]++:ee.bl_tree[2*I]++,_e=se,Me=(Ce=0)===ke?(ge=138,3):se===ke?(ge=6,3):(ge=7,4))}function ae(ee,ie,me){var ue,se,_e=-1,ke=ie[1],Ce=0,ge=7,Me=4;for(ke===0&&(ge=138,Me=3),ue=0;ue<=me;ue++)if(se=ke,ke=ie[2*(ue+1)+1],!(++Ce<ge&&se===ke)){if(Ce<Me)for(;oe(ee,se,ee.bl_tree),--Ce!=0;);else se!==0?(se!==_e&&(oe(ee,se,ee.bl_tree),Ce--),oe(ee,w,ee.bl_tree),pe(ee,Ce-3,2)):Ce<=10?(oe(ee,A,ee.bl_tree),pe(ee,Ce-3,3)):(oe(ee,I,ee.bl_tree),pe(ee,Ce-11,7));_e=se,Me=(Ce=0)===ke?(ge=138,3):se===ke?(ge=6,3):(ge=7,4)}}a(q);var de=!1;function $(ee,ie,me,ue){pe(ee,(c<<1)+(ue?1:0),3),function(se,_e,ke,Ce){Ie(se),Ce&&(ce(se,ke),ce(se,~ke)),r.arraySet(se.pending_buf,se.window,_e,ke,se.pending),se.pending+=ke}(ee,ie,me,!0)}s._tr_init=function(ee){de||(function(){var ie,me,ue,se,_e,ke=new Array(_+1);for(se=ue=0;se<u-1;se++)for(L[se]=ue,ie=0;ie<1<<R[se];ie++)O[ue++]=se;for(O[ue-1]=se,se=_e=0;se<16;se++)for(q[se]=_e,ie=0;ie<1<<D[se];ie++)Y[_e++]=se;for(_e>>=7;se<d;se++)for(q[se]=_e<<7,ie=0;ie<1<<D[se]-7;ie++)Y[256+_e++]=se;for(me=0;me<=_;me++)ke[me]=0;for(ie=0;ie<=143;)H[2*ie+1]=8,ie++,ke[8]++;for(;ie<=255;)H[2*ie+1]=9,ie++,ke[9]++;for(;ie<=279;)H[2*ie+1]=7,ie++,ke[7]++;for(;ie<=287;)H[2*ie+1]=8,ie++,ke[8]++;for(Ne(H,h+1,ke),ie=0;ie<d;ie++)P[2*ie+1]=5,P[2*ie]=ve(ie,5);U=new x(H,R,f+1,h,_),K=new x(P,D,0,d,_),te=new x(new Array(0),N,0,m,y)}(),de=!0),ee.l_desc=new Z(ee.dyn_ltree,U),ee.d_desc=new Z(ee.dyn_dtree,K),ee.bl_desc=new Z(ee.bl_tree,te),ee.bi_buf=0,ee.bi_valid=0,J(ee)},s._tr_stored_block=$,s._tr_flush_block=function(ee,ie,me,ue){var se,_e,ke=0;0<ee.level?(ee.strm.data_type===2&&(ee.strm.data_type=function(Ce){var ge,Me=4093624447;for(ge=0;ge<=31;ge++,Me>>>=1)if(1&Me&&Ce.dyn_ltree[2*ge]!==0)return o;if(Ce.dyn_ltree[18]!==0||Ce.dyn_ltree[20]!==0||Ce.dyn_ltree[26]!==0)return l;for(ge=32;ge<f;ge++)if(Ce.dyn_ltree[2*ge]!==0)return l;return o}(ee)),fe(ee,ee.l_desc),fe(ee,ee.d_desc),ke=function(Ce){var ge;for(M(Ce,Ce.dyn_ltree,Ce.l_desc.max_code),M(Ce,Ce.dyn_dtree,Ce.d_desc.max_code),fe(Ce,Ce.bl_desc),ge=m-1;3<=ge&&Ce.bl_tree[2*W[ge]+1]===0;ge--);return Ce.opt_len+=3*(ge+1)+5+5+4,ge}(ee),se=ee.opt_len+3+7>>>3,(_e=ee.static_len+3+7>>>3)<=se&&(se=_e)):se=_e=me+5,me+4<=se&&ie!==-1?$(ee,ie,me,ue):ee.strategy===4||_e===se?(pe(ee,2+(ue?1:0),3),Le(ee,H,P)):(pe(ee,4+(ue?1:0),3),function(Ce,ge,Me,Ee){var Pe;for(pe(Ce,ge-257,5),pe(Ce,Me-1,5),pe(Ce,Ee-4,4),Pe=0;Pe<Ee;Pe++)pe(Ce,Ce.bl_tree[2*W[Pe]+1],3);ae(Ce,Ce.dyn_ltree,ge-1),ae(Ce,Ce.dyn_dtree,Me-1)}(ee,ee.l_desc.max_code+1,ee.d_desc.max_code+1,ke+1),Le(ee,ee.dyn_ltree,ee.dyn_dtree)),J(ee),ue&&Ie(ee)},s._tr_tally=function(ee,ie,me){return ee.pending_buf[ee.d_buf+2*ee.last_lit]=ie>>>8&255,ee.pending_buf[ee.d_buf+2*ee.last_lit+1]=255&ie,ee.pending_buf[ee.l_buf+ee.last_lit]=255&me,ee.last_lit++,ie===0?ee.dyn_ltree[2*me]++:(ee.matches++,ie--,ee.dyn_ltree[2*(O[me]+f+1)]++,ee.dyn_dtree[2*V(ie)]++),ee.last_lit===ee.lit_bufsize-1},s._tr_align=function(ee){pe(ee,2,3),oe(ee,E,H),function(ie){ie.bi_valid===16?(ce(ie,ie.bi_buf),ie.bi_buf=0,ie.bi_valid=0):8<=ie.bi_valid&&(ie.pending_buf[ie.pending++]=255&ie.bi_buf,ie.bi_buf>>=8,ie.bi_valid-=8)}(ee)}},{"../utils/common":41}],53:[function(t,i,s){i.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,i,s){(function(r){(function(o,l){if(!o.setImmediate){var a,c,u,f,h=1,d={},m=!1,g=o.document,_=Object.getPrototypeOf&&Object.getPrototypeOf(o);_=_&&_.setTimeout?_:o,a={}.toString.call(o.process)==="[object process]"?function(w){process.nextTick(function(){y(w)})}:function(){if(o.postMessage&&!o.importScripts){var w=!0,A=o.onmessage;return o.onmessage=function(){w=!1},o.postMessage("","*"),o.onmessage=A,w}}()?(f="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",E,!1):o.attachEvent("onmessage",E),function(w){o.postMessage(f+w,"*")}):o.MessageChannel?((u=new MessageChannel).port1.onmessage=function(w){y(w.data)},function(w){u.port2.postMessage(w)}):g&&"onreadystatechange"in g.createElement("script")?(c=g.documentElement,function(w){var A=g.createElement("script");A.onreadystatechange=function(){y(w),A.onreadystatechange=null,c.removeChild(A),A=null},c.appendChild(A)}):function(w){setTimeout(y,0,w)},_.setImmediate=function(w){typeof w!="function"&&(w=new Function(""+w));for(var A=new Array(arguments.length-1),I=0;I<A.length;I++)A[I]=arguments[I+1];var R={callback:w,args:A};return d[h]=R,a(h),h++},_.clearImmediate=v}function v(w){delete d[w]}function y(w){if(m)setTimeout(y,0,w);else{var A=d[w];if(A){m=!0;try{(function(I){var R=I.callback,D=I.args;switch(D.length){case 0:R();break;case 1:R(D[0]);break;case 2:R(D[0],D[1]);break;case 3:R(D[0],D[1],D[2]);break;default:R.apply(l,D)}})(A)}finally{v(w),m=!1}}}}function E(w){w.source===o&&typeof w.data=="string"&&w.data.indexOf(f)===0&&y(+w.data.slice(f.length))}})(typeof self>"u"?r===void 0?this:r:self)}).call(this,typeof eo<"u"?eo:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(woe);const Coe=O0;function iI(n,e,t){const i=n.slice();return i[15]=e[t],i}function sI(n){let e,t=n[15]+"",i,s,r;return{c(){e=C("option"),i=z(t),this.h()},l(o){e=k(o,"OPTION",{});var l=T(e);i=G(l,t),l.forEach(b),this.h()},h(){e.__value=s=n[15],e.value=e.__value,e.selected=r=n[0]===n[15]},m(o,l){X(o,e,l),p(e,i)},p(o,l){l&128&&t!==(t=o[15]+"")&&Be(i,t),l&128&&s!==(s=o[15])&&(e.__value=s,e.value=e.__value),l&129&&r!==(r=o[0]===o[15])&&(e.selected=r)},d(o){o&&b(e)}}}function koe(n){let e,t,i,s,r,o,l,a,c,u,f,h,d,m,g,_,v,y,E,w,A,I,R,D,N,W,H,P,Y,O,L,U,K=n[7],te=[];for(let q=0;q<K.length;q+=1)te[q]=sI(iI(n,K,q));return{c(){e=C("div"),t=C("h1"),i=z("Manage other sheets"),s=F(),r=C("select"),o=C("option"),l=z("Main Sheet");for(let q=0;q<te.length;q+=1)te[q].c();c=F(),u=C("input"),f=F(),h=C("button"),d=z("Add New Sheet"),g=F(),_=C("br"),v=F(),y=C("div"),E=C("button"),w=z("Export all sheets"),A=F(),I=C("br"),R=F(),D=C("br"),N=F(),W=C("div"),H=C("button"),P=z("Import all sheets"),Y=F(),O=C("input"),this.h()},l(q){e=k(q,"DIV",{class:!0});var x=T(e);t=k(x,"H1",{});var Z=T(t);i=G(Z,"Manage other sheets"),Z.forEach(b),s=j(x),r=k(x,"SELECT",{});var V=T(r);o=k(V,"OPTION",{});var ce=T(o);l=G(ce,"Main Sheet"),ce.forEach(b);for(let Ie=0;Ie<te.length;Ie+=1)te[Ie].l(V);V.forEach(b),c=j(x),u=k(x,"INPUT",{}),f=j(x),h=k(x,"BUTTON",{});var pe=T(h);d=G(pe,"Add New Sheet"),pe.forEach(b),g=j(x),_=k(x,"BR",{}),v=j(x),y=k(x,"DIV",{});var oe=T(y);E=k(oe,"BUTTON",{});var ve=T(E);w=G(ve,"Export all sheets"),ve.forEach(b),A=j(oe),I=k(oe,"BR",{}),R=j(oe),D=k(oe,"BR",{}),N=j(oe),W=k(oe,"DIV",{});var Ne=T(W);H=k(Ne,"BUTTON",{});var J=T(H);P=G(J,"Import all sheets"),J.forEach(b),Y=j(Ne),O=k(Ne,"INPUT",{type:!0}),Ne.forEach(b),oe.forEach(b),x.forEach(b),this.h()},h(){o.__value="sheet",o.value=o.__value,o.selected=a=n[0]==="sheet",h.disabled=m=!n[5]||n[3].includes(n[5]),S(O,"type","file"),O.multiple=!0,S(e,"class","container")},m(q,x){X(q,e,x),p(e,t),p(t,i),p(e,s),p(e,r),p(r,o),p(o,l);for(let Z=0;Z<te.length;Z+=1)te[Z].m(r,null);p(e,c),p(e,u),ds(u,n[5]),p(e,f),p(e,h),p(h,d),p(e,g),p(e,_),p(e,v),p(e,y),p(y,E),p(E,w),p(y,A),p(y,I),p(y,R),p(y,D),p(y,N),p(y,W),p(W,H),p(H,P),p(W,Y),p(W,O),n[13](O),L||(U=[Se(r,"change",n[10]),Se(u,"input",n[11]),Se(h,"click",n[12]),Se(E,"click",function(){Bn(n[9])&&n[9].apply(this,arguments)}),Se(H,"click",function(){Bn(n[8])&&n[8].apply(this,arguments)}),Se(O,"change",n[14])],L=!0)},p(q,[x]){if(n=q,x&1&&a!==(a=n[0]==="sheet")&&(o.selected=a),x&129){K=n[7];let Z;for(Z=0;Z<K.length;Z+=1){const V=iI(n,K,Z);te[Z]?te[Z].p(V,x):(te[Z]=sI(V),te[Z].c(),te[Z].m(r,null))}for(;Z<te.length;Z+=1)te[Z].d(1);te.length=K.length}x&32&&u.value!==n[5]&&ds(u,n[5]),x&40&&m!==(m=!n[5]||n[3].includes(n[5]))&&(h.disabled=m)},i:Xe,o:Xe,d(q){q&&b(e),Ht(te,q),n[13](null),L=!1,an(U)}}}function Ioe(n,e,t){let i,s,r,{curSheet:o}=e,{onChangeCurSheet:l}=e,{onAddSheet:a}=e,{otherSheetNames:c}=e,u,f,h=null;const d=y=>l(y.currentTarget.value);function m(){u=this.value,t(5,u)}const g=()=>{a(u),t(5,u="")};function _(y){Vt[y?"unshift":"push"](()=>{f=y,t(6,f)})}const v=y=>{var E;t(4,h=((E=y==null?void 0:y.currentTarget)==null?void 0:E.files)||null)};return n.$$set=y=>{"curSheet"in y&&t(0,o=y.curSheet),"onChangeCurSheet"in y&&t(1,l=y.onChangeCurSheet),"onAddSheet"in y&&t(2,a=y.onAddSheet),"otherSheetNames"in y&&t(3,c=y.otherSheetNames)},n.$$.update=()=>{n.$$.dirty&8&&t(9,i=async()=>{let y=new Coe;try{console.log(c),[...c,"sheet"].forEach(E=>{var A;console.log("downloading",E);const w=localStorage.getItem(E)||"";(A=y.folder("fe3h-sheets"))==null||A.file(E,w)}),await(y==null?void 0:y.generateAsync({type:"blob"}).then(E=>{Aoe.saveAs(E,"fe3h-sheets.zip")}))}catch(E){console.error(E)}}),n.$$.dirty&24&&t(8,s=()=>{if(!h||!(h!=null&&h.length)){alert("no sheets provided");return}let y=new Set(c);try{Array.from(h).forEach(w=>{const A=w.name.split(".")[0];y.add(A);const I=new FileReader;I.onload=R=>{var D,N,W;console.log(A,(D=R.target)==null?void 0:D.result),localStorage.setItem(A,((W=(N=R.target)==null?void 0:N.result)==null?void 0:W.toString())||"")},I.readAsText(w,"UTF-8")}),console.log(y)}catch(E){console.log(E)}localStorage.setItem("otherSheetNames",JSON.stringify(Array.from(y).filter(E=>E!="sheet"))),location.reload()}),n.$$.dirty&8&&t(7,r=c.sort())},[o,l,a,c,h,u,f,r,s,i,d,m,g,_,v]}class Toe extends rt{constructor(e){super(),ot(this,e,Ioe,koe,It,{curSheet:0,onChangeCurSheet:1,onAddSheet:2,otherSheetNames:3})}}var Ooe="firebase",Roe="9.17.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wa(Ooe,Roe,"app");const{document:dl}=Ju;function rI(n){let e,t;return e=new qre({props:{show:n[53],$$slots:{default:[Doe]},$$scope:{ctx:n}}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,s){const r={};s[1]&4194304&&(r.show=i[53]),s[0]&2147352575|s[1]&4194303|s[2]&512&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function oI(n){let e,t;return e=new hoe({props:{unlockedClasses:n[7],classXP:n[6],weaponXP:n[12],onUpdateClassXP:n[33],onUpdateWeaponXP:n[34],customCombatArts:n[47],customCombatSkills:n[48],customWeapons:n[49],playerSkillProficiency:n[15],playerSkillBonus:n[50],playerStats:n[51],playerName:n[16],onUpdatePlayerStats:n[44],onUpdateCustomCombatArts:n[29],onUpdateCustomCombatSkills:n[28],onUpdateCustomWeapons:n[30],equippedClass:n[9]}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,s){const r={};s[0]&128&&(r.unlockedClasses=i[7]),s[0]&64&&(r.classXP=i[6]),s[0]&4096&&(r.weaponXP=i[12]),s[1]&4&&(r.onUpdateClassXP=i[33]),s[1]&8&&(r.onUpdateWeaponXP=i[34]),s[1]&65536&&(r.customCombatArts=i[47]),s[1]&131072&&(r.customCombatSkills=i[48]),s[1]&262144&&(r.customWeapons=i[49]),s[0]&32768&&(r.playerSkillProficiency=i[15]),s[1]&524288&&(r.playerSkillBonus=i[50]),s[1]&1048576&&(r.playerStats=i[51]),s[0]&65536&&(r.playerName=i[16]),s[1]&8192&&(r.onUpdatePlayerStats=i[44]),s[0]&536870912&&(r.onUpdateCustomCombatArts=i[29]),s[0]&268435456&&(r.onUpdateCustomCombatSkills=i[28]),s[0]&1073741824&&(r.onUpdateCustomWeapons=i[30]),s[0]&512&&(r.equippedClass=i[9]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function lI(n){let e,t;return e=new kse({props:{fullSheet:n[0],onChangeSheet:n[45]}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,s){const r={};s[0]&1&&(r.fullSheet=i[0]),s[1]&16384&&(r.onChangeSheet=i[45]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function aI(n){let e,t;return e=new Soe({}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function cI(n){let e,t;return e=new Toe({props:{onAddSheet:n[27],otherSheetNames:n[3],curSheet:n[2],onChangeCurSheet:n[54]}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,s){const r={};s[0]&134217728&&(r.onAddSheet=i[27]),s[0]&8&&(r.otherSheetNames=i[3]),s[0]&4&&(r.curSheet=i[2]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function uI(n){let e,t;return e=new eO({props:{playerName:n[16],chatEntries:n[4],spoilersOn:n[5],toggleSpoilersOn:n[23],alreadyRevealed:n[22],setAlreadyRevealed:n[55]}}),{c(){Te(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Oe(e,i,s),t=!0},p(i,s){const r={};s[0]&65536&&(r.playerName=i[16]),s[0]&16&&(r.chatEntries=i[4]),s[0]&32&&(r.spoilersOn=i[5]),s[0]&8388608&&(r.toggleSpoilersOn=i[23]),s[0]&4194304&&(r.alreadyRevealed=i[22]),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Re(e,i)}}}function Doe(n){let e,t,i,s,r,o,l,a,c,u,f,h,d,m,g,_,v,y,E,w,A,I,R,D,N,W;r=new Bre({props:{playerName:n[16],onUpdatePlayerName:n[43],fullSheet:n[0],onChangePage:n[35],currentPage:n[20],homeMode:n[21],toggleHomeMode:n[52],otherSheetNames:n[3],curSheet:n[2],onChangeCurSheet:n[54]}}),c=new Nre({props:{playerName:n[16],homeMode:n[21],allWeapons:n[26],allCombatSkills:n[8],allCombatArts:n[25],playerStats:n[51],onUpdatePlayerStats:n[44],playerSkillBonus:n[50],playerSkillProficiency:n[15],onToggleSkillProficiency:n[42],equippedWeapons:n[13],onToggleEquippedWeapons:n[37],equippedCombatArts:n[14],onToggleCombatArts:n[38],equippedClass:n[9],setEquippedClass:n[41],equippedCombatSkills:n[11],onToggleCombatSkill:n[10],unlockedClasses:n[7],onUpdateUnlockedClasses:n[36],masteredClasses:n[24],playerCrest:n[46],onUpdateCrest:n[32],selectedCombatArt:n[18],setSelectedCombatArt:n[39],selectedWeapon:n[19],setSelectedWeapon:n[40],weaponUses:n[1],onUpdateWeaponUses:n[31],customCombatSkills:n[48],onUpdateCustomCombatSkills:n[28],customWeapons:n[49],onUpdateCustomWeapons:n[30],customCombatArts:n[47],onUpdateCustomCombatArts:n[29],chatEntries:n[4],spoilersOn:n[5],toggleSpoilersOn:n[23],alreadyRevealed:n[22],setAlreadyRevealed:n[55]}});let H=n[20]==="XP"&&oI(n),P=n[20]==="EDITOR"&&lI(n),Y=n[20]==="DICE_EDITOR"&&aI(),O=n[20]==="OTHER_SHEETS"&&cI(n),L=n[20]==="ROLLS"&&uI(n);return{c(){e=C("div"),t=C("span"),i=F(),s=C("div"),Te(r.$$.fragment),o=F(),l=C("div"),a=C("div"),Te(c.$$.fragment),f=F(),h=C("div"),H&&H.c(),m=F(),g=C("div"),P&&P.c(),v=F(),y=C("div"),Y&&Y.c(),w=F(),A=C("div"),O&&O.c(),R=F(),D=C("div"),L&&L.c(),this.h()},l(U){e=k(U,"DIV",{id:!0,class:!0});var K=T(e);t=k(K,"SPAN",{id:!0,class:!0}),T(t).forEach(b),K.forEach(b),i=j(U),s=k(U,"DIV",{class:!0});var te=T(s);De(r.$$.fragment,te),te.forEach(b),o=j(U),l=k(U,"DIV",{class:!0});var q=T(l);a=k(q,"DIV",{class:!0});var x=T(a);De(c.$$.fragment,x),x.forEach(b),f=j(q),h=k(q,"DIV",{class:!0});var Z=T(h);H&&H.l(Z),Z.forEach(b),m=j(q),g=k(q,"DIV",{class:!0});var V=T(g);P&&P.l(V),V.forEach(b),v=j(q),y=k(q,"DIV",{class:!0});var ce=T(y);Y&&Y.l(ce),ce.forEach(b),w=j(q),A=k(q,"DIV",{class:!0});var pe=T(A);O&&O.l(pe),pe.forEach(b),R=j(q),D=k(q,"DIV",{class:!0});var oe=T(D);L&&L.l(oe),oe.forEach(b),q.forEach(b),this.h()},h(){S(t,"id","dice-box-result"),S(t,"class","svelte-1l595ii"),S(e,"id","dice-box"),S(e,"class","svelte-1l595ii"),S(s,"class","header svelte-1l595ii"),S(a,"class",u=xe(n[20]==="HOME"?"":"invisible")+" svelte-1l595ii"),S(h,"class",d=xe(n[20]==="XP"?"":"invisible")+" svelte-1l595ii"),S(g,"class",_=xe(n[20]==="EDITOR"?"":"invisible")+" svelte-1l595ii"),S(y,"class",E=xe(n[20]==="DICE_EDITOR"?"":"invisible")+" svelte-1l595ii"),S(A,"class",I=xe(n[20]==="OTHER_SHEETS"?"":"invisible")+" svelte-1l595ii"),S(D,"class",N=xe(n[20]==="ROLLS"?"":"invisible")+" svelte-1l595ii"),S(l,"class","content svelte-1l595ii")},m(U,K){X(U,e,K),p(e,t),X(U,i,K),X(U,s,K),Oe(r,s,null),X(U,o,K),X(U,l,K),p(l,a),Oe(c,a,null),p(l,f),p(l,h),H&&H.m(h,null),p(l,m),p(l,g),P&&P.m(g,null),p(l,v),p(l,y),Y&&Y.m(y,null),p(l,w),p(l,A),O&&O.m(A,null),p(l,R),p(l,D),L&&L.m(D,null),W=!0},p(U,K){const te={};K[0]&65536&&(te.playerName=U[16]),K[1]&4096&&(te.onUpdatePlayerName=U[43]),K[0]&1&&(te.fullSheet=U[0]),K[1]&16&&(te.onChangePage=U[35]),K[0]&1048576&&(te.currentPage=U[20]),K[0]&2097152&&(te.homeMode=U[21]),K[1]&2097152&&(te.toggleHomeMode=U[52]),K[0]&8&&(te.otherSheetNames=U[3]),K[0]&4&&(te.curSheet=U[2]),r.$set(te);const q={};K[0]&65536&&(q.playerName=U[16]),K[0]&2097152&&(q.homeMode=U[21]),K[0]&67108864&&(q.allWeapons=U[26]),K[0]&256&&(q.allCombatSkills=U[8]),K[0]&33554432&&(q.allCombatArts=U[25]),K[1]&1048576&&(q.playerStats=U[51]),K[1]&8192&&(q.onUpdatePlayerStats=U[44]),K[1]&524288&&(q.playerSkillBonus=U[50]),K[0]&32768&&(q.playerSkillProficiency=U[15]),K[1]&2048&&(q.onToggleSkillProficiency=U[42]),K[0]&8192&&(q.equippedWeapons=U[13]),K[1]&64&&(q.onToggleEquippedWeapons=U[37]),K[0]&16384&&(q.equippedCombatArts=U[14]),K[1]&128&&(q.onToggleCombatArts=U[38]),K[0]&512&&(q.equippedClass=U[9]),K[1]&1024&&(q.setEquippedClass=U[41]),K[0]&2048&&(q.equippedCombatSkills=U[11]),K[0]&1024&&(q.onToggleCombatSkill=U[10]),K[0]&128&&(q.unlockedClasses=U[7]),K[1]&32&&(q.onUpdateUnlockedClasses=U[36]),K[0]&16777216&&(q.masteredClasses=U[24]),K[1]&32768&&(q.playerCrest=U[46]),K[1]&2&&(q.onUpdateCrest=U[32]),K[0]&262144&&(q.selectedCombatArt=U[18]),K[1]&256&&(q.setSelectedCombatArt=U[39]),K[0]&524288&&(q.selectedWeapon=U[19]),K[1]&512&&(q.setSelectedWeapon=U[40]),K[0]&2&&(q.weaponUses=U[1]),K[1]&1&&(q.onUpdateWeaponUses=U[31]),K[1]&131072&&(q.customCombatSkills=U[48]),K[0]&268435456&&(q.onUpdateCustomCombatSkills=U[28]),K[1]&262144&&(q.customWeapons=U[49]),K[0]&1073741824&&(q.onUpdateCustomWeapons=U[30]),K[1]&65536&&(q.customCombatArts=U[47]),K[0]&536870912&&(q.onUpdateCustomCombatArts=U[29]),K[0]&16&&(q.chatEntries=U[4]),K[0]&32&&(q.spoilersOn=U[5]),K[0]&8388608&&(q.toggleSpoilersOn=U[23]),K[0]&4194304&&(q.alreadyRevealed=U[22]),c.$set(q),(!W||K[0]&1048576&&u!==(u=xe(U[20]==="HOME"?"":"invisible")+" svelte-1l595ii"))&&S(a,"class",u),U[20]==="XP"?H?(H.p(U,K),K[0]&1048576&&B(H,1)):(H=oI(U),H.c(),B(H,1),H.m(h,null)):H&&(He(),Q(H,1,1,()=>{H=null}),qe()),(!W||K[0]&1048576&&d!==(d=xe(U[20]==="XP"?"":"invisible")+" svelte-1l595ii"))&&S(h,"class",d),U[20]==="EDITOR"?P?(P.p(U,K),K[0]&1048576&&B(P,1)):(P=lI(U),P.c(),B(P,1),P.m(g,null)):P&&(He(),Q(P,1,1,()=>{P=null}),qe()),(!W||K[0]&1048576&&_!==(_=xe(U[20]==="EDITOR"?"":"invisible")+" svelte-1l595ii"))&&S(g,"class",_),U[20]==="DICE_EDITOR"?Y?K[0]&1048576&&B(Y,1):(Y=aI(),Y.c(),B(Y,1),Y.m(y,null)):Y&&(He(),Q(Y,1,1,()=>{Y=null}),qe()),(!W||K[0]&1048576&&E!==(E=xe(U[20]==="DICE_EDITOR"?"":"invisible")+" svelte-1l595ii"))&&S(y,"class",E),U[20]==="OTHER_SHEETS"?O?(O.p(U,K),K[0]&1048576&&B(O,1)):(O=cI(U),O.c(),B(O,1),O.m(A,null)):O&&(He(),Q(O,1,1,()=>{O=null}),qe()),(!W||K[0]&1048576&&I!==(I=xe(U[20]==="OTHER_SHEETS"?"":"invisible")+" svelte-1l595ii"))&&S(A,"class",I),U[20]==="ROLLS"?L?(L.p(U,K),K[0]&1048576&&B(L,1)):(L=uI(U),L.c(),B(L,1),L.m(D,null)):L&&(He(),Q(L,1,1,()=>{L=null}),qe()),(!W||K[0]&1048576&&N!==(N=xe(U[20]==="ROLLS"?"":"invisible")+" svelte-1l595ii"))&&S(D,"class",N)},i(U){W||(B(r.$$.fragment,U),B(c.$$.fragment,U),B(H),B(P),B(Y),B(O),B(L),W=!0)},o(U){Q(r.$$.fragment,U),Q(c.$$.fragment,U),Q(H),Q(P),Q(Y),Q(O),Q(L),W=!1},d(U){U&&b(e),U&&b(i),U&&b(s),Re(r),U&&b(o),U&&b(l),Re(c),H&&H.d(),P&&P.d(),Y&&Y.d(),O&&O.d(),L&&L.d()}}}function fI(n){let e,t;return{c(){e=C("div"),t=z("Loading"),this.h()},l(i){e=k(i,"DIV",{class:!0});var s=T(e);t=G(s,"Loading"),s.forEach(b),this.h()},h(){S(e,"class","not-ready svelte-1l595ii")},m(i,s){X(i,e,s),p(e,t)},d(i){i&&b(e)}}}function Noe(n){let e,t,i,s,r,o,l,a,c,u;dl.title=r=n[16];let f=n[17]&&rI(n),h=!n[17]&&fI();return{c(){e=C("link"),t=C("link"),i=C("link"),s=C("link"),o=F(),l=C("div"),f&&f.c(),a=F(),h&&h.c(),this.h()},l(d){const m=XN("svelte-1welig4",dl.head);e=k(m,"LINK",{rel:!0,href:!0}),t=k(m,"LINK",{rel:!0,href:!0}),i=k(m,"LINK",{rel:!0,href:!0}),s=k(m,"LINK",{href:!0,rel:!0}),m.forEach(b),o=j(d),l=k(d,"DIV",{class:!0});var g=T(l);f&&f.l(g),a=j(g),h&&h.l(g),g.forEach(b),this.h()},h(){S(e,"rel","preconnect"),S(e,"href","https://fonts.googleapis.com"),S(t,"rel","preconnect"),S(t,"href","https://fonts.gstatic.com"),S(i,"rel","icon"),S(i,"href",mI+"/favicon.jpg"),S(s,"href","https://fonts.googleapis.com/css2?family=EB+Garamond:wght@400;500;600;700&family=Ibarra+Real+Nova:wght@400;500;700&display=swap&family=Great+Vibes&display=swap"),S(s,"rel","stylesheet"),S(l,"class",c=xe(`${n[17]?"":"no-clicks"} container`)+" svelte-1l595ii")},m(d,m){p(dl.head,e),p(dl.head,t),p(dl.head,i),p(dl.head,s),X(d,o,m),X(d,l,m),f&&f.m(l,null),p(l,a),h&&h.m(l,null),u=!0},p(d,m){(!u||m[0]&65536)&&r!==(r=d[16])&&(dl.title=r),d[17]?f?(f.p(d,m),m[0]&131072&&B(f,1)):(f=rI(d),f.c(),B(f,1),f.m(l,a)):f&&(He(),Q(f,1,1,()=>{f=null}),qe()),d[17]?h&&(h.d(1),h=null):h||(h=fI(),h.c(),h.m(l,null)),(!u||m[0]&131072&&c!==(c=xe(`${d[17]?"":"no-clicks"} container`)+" svelte-1l595ii"))&&S(l,"class",c)},i(d){u||(B(f),u=!0)},o(d){Q(f),u=!1},d(d){b(e),b(t),b(i),b(s),d&&b(o),d&&b(l),f&&f.d(),h&&h.d()}}}function Poe(n,e,t){let i,s,r,o,l,a,c,u,f,h,d,m,g,_,v,y,E,w,A,I,R,D,N,W,H,P,Y,O,L,U,K,te,q,x,Z,V,ce,pe,oe,ve,Ne,J,Ie,Ue;QN(n,Lre,je=>t(53,Ue=je));const Le=EI({apiKey:"AIzaSyBds7SmknRyVNwc5XTC6TvFzQoR_ACsLTo",authDomain:"fe3h-sheet.firebaseapp.com",projectId:"fe3h-sheet",storageBucket:"fe3h-sheet.appspot.com",messagingSenderId:"149307616871",appId:"1:149307616871:web:1038f39d161deeb9372ec2"}),M=1e3*60*60*24,ae=new Date(Date.now()-M),de=rL(Le);Zd(xi.DB,de);const $={playerStats:kv,playerName:"No Name",playerSkills:x4,skillBonuses:$4,unlockedClasses:[],customWeapons:{},customCombatSkills:{},customCombatArts:{},classXP:{},weaponXP:{},crest:{type:"",isMajor:!1},equippedClass:"",equippedWeapons:[],equippedCombatSkills:[],equippedCombatArts:[]};let ee=!1,ie=$,me,ue,se={},_e="HOME",ke="sheet",Ce=[],ge=[],Me=0;const Ee=vL(O4(de,"lobby","taboola",z4()),bL("date",">",mi.fromDate(ae))),Pe=CL(Ee,je=>{const Qe=[];je.forEach(ye=>{Qe.push(ye.data())}),t(4,ge=Qe)});_r(()=>{Pe()});const be=je=>{try{t(3,Ce=JSON.parse(localStorage.getItem("otherSheetNames")||"[]"))}catch(ye){console.log(ye)}const Qe=localStorage.getItem(je);if(Qe)try{t(0,ie={...$,...JSON.parse(Qe)})}catch(ye){console.error(ye)}else t(0,ie={...$,playerName:je})},nt=je=>{t(2,ke=je),E(),be(je),localStorage.setItem(ke,JSON.stringify(ie))};Mi(()=>{be(ke),t(17,ee=!0),R0(()=>import("../../chunks/dice-box.es-150bdd15.js"),["../../chunks/dice-box.es-150bdd15.js","../../chunks/preload-helper-41c905a7.js"],import.meta.url).then(je=>{let Qe;try{Qe=JSON.parse(localStorage.getItem("diceBoxOptions")||"{}")}catch(Ze){console.log(Ze)}const ye=new je.default("#dice-box",{...jc,...Qe});window.diceBoxContainer=document.getElementById("dice-box"),ye.init().then(()=>{window.diceBox=ye}).catch(Ze=>{console.error(Ze)})}).catch(je=>{console.error(je)})});let Fe=1/0,we={};const lt=je=>{t(22,we[je]=!0,we)};return n.$$.update=()=>{n.$$.dirty[0]&2097152&&t(52,i=()=>{t(21,Me+=1)}),n.$$.dirty[0]&4|n.$$.dirty[1]&67108864&&t(45,w=je=>{E(),t(0,ie=je),localStorage.setItem(ke,JSON.stringify(je))}),n.$$.dirty[0]&5&&t(56,A=(je,Qe)=>{t(0,ie={...ie,[je]:Qe}),localStorage.setItem(ke,JSON.stringify(ie))}),n.$$.dirty[0]&1&&t(51,s=ie.playerStats),n.$$.dirty[0]&1&&t(15,r=ie.playerSkills),n.$$.dirty[0]&1&&t(50,o=ie.skillBonuses),n.$$.dirty[0]&1&&t(7,l=ie.unlockedClasses),n.$$.dirty[0]&1&&t(16,a=ie.playerName),n.$$.dirty[0]&1&&t(49,c=ie.customWeapons),n.$$.dirty[0]&1&&t(48,u=ie.customCombatSkills),n.$$.dirty[0]&1&&t(47,f=ie.customCombatArts),n.$$.dirty[0]&1&&t(6,h=ie.classXP),n.$$.dirty[0]&1&&t(12,d=ie.weaponXP),n.$$.dirty[0]&1&&t(46,m=ie.crest),n.$$.dirty[0]&1&&t(9,g=ie.equippedClass),n.$$.dirty[0]&1&&t(13,_=ie.equippedWeapons),n.$$.dirty[0]&1&&t(11,v=ie.equippedCombatSkills),n.$$.dirty[0]&1&&t(14,y=ie.equippedCombatArts),n.$$.dirty[1]&33554432&&t(44,I=je=>{A("playerStats",je)}),n.$$.dirty[1]&33554432&&t(43,R=je=>{A("playerName",je)}),n.$$.dirty[0]&32768|n.$$.dirty[1]&33554432&&t(42,D=je=>{const Qe=r[je]||zn.NONE;let ye;Qe===zn.NONE?ye=zn.PROFICIENT:Qe===zn.PROFICIENT?ye=zn.EXPERT:Qe===zn.EXPERT?ye=zn.AWFUL:Qe===zn.AWFUL&&(ye=zn.NONE),A("playerSkills",{...r,[je]:ye})}),n.$$.dirty[0]&512|n.$$.dirty[1]&33554432&&t(41,N=je=>{t(9,g=je),A("equippedClass",g)}),n.$$.dirty[0]&16384|n.$$.dirty[1]&33554432&&t(38,P=je=>{y.indexOf(je)!==-1?t(14,y=y.filter(Qe=>Qe!==je)):y.length<po&&t(14,y=[...y,je]),A("equippedCombatArts",y)}),n.$$.dirty[0]&2048|n.$$.dirty[1]&33554432&&t(10,Y=je=>{v.indexOf(je)!==-1?t(11,v=v.filter(Qe=>Qe!==je)):v.length<go&&t(11,v=[...v,je]),A("equippedCombatSkills",v)}),n.$$.dirty[0]&8192|n.$$.dirty[1]&33554432&&t(37,O=je=>{_.includes(je)?t(13,_=_.filter(Qe=>Qe!==je)):_.length<Vl&&t(13,_=[..._,je]),A("equippedWeapons",_)}),n.$$.dirty[1]&33554432&&t(36,L=je=>{const Qe=Object.values(Wt),ye=[...je].sort((Ze,Lt)=>{const vt=Qe.indexOf(Ze),Ct=Qe.indexOf(Lt);return vt>Ct?1:-1});A("unlockedClasses",ye)}),n.$$.dirty[0]&4096|n.$$.dirty[1]&33554432&&t(34,K=(je,Qe,ye,Ze)=>{A("weaponXP",{...d,[je]:{total:Qe,level:ye,mastered:Ze}})}),n.$$.dirty[0]&64|n.$$.dirty[1]&33554432&&t(33,te=(je,Qe,ye)=>{A("classXP",{...h,[je]:{total:Qe,mastered:ye}})}),n.$$.dirty[1]&33554432&&t(32,q=je=>{A("crest",je)}),n.$$.dirty[0]&2&&t(31,x=(je,Qe)=>{let ye=Qe;Qe<0&&(ye=se[je]+Qe),ye=Math.max(ye,0),t(1,se={...se,[je]:ye})}),n.$$.dirty[1]&33554432&&t(30,Z=je=>{A("customWeapons",je)}),n.$$.dirty[1]&33554432&&t(29,V=je=>{A("customCombatArts",je)}),n.$$.dirty[1]&33554432&&t(28,ce=je=>{A("customCombatSkills",je)}),n.$$.dirty[0]&8&&t(27,pe=je=>{t(3,Ce=[...Ce,je]),localStorage.setItem("otherSheetNames",JSON.stringify(Ce)),nt(je)}),n.$$.dirty[0]&513&&t(26,oe=doe(ie,g)),n.$$.dirty[0]&3585&&t(8,ve=poe(ie,g,v,Y)),n.$$.dirty[0]&769&&t(25,Ne=voe(ie,g,ve.fullSet)),n.$$.dirty[0]&192&&t(24,J=l.filter(je=>{var Qe;return(Qe=h[je])==null?void 0:Qe.mastered})),n.$$.dirty[0]&48&&t(23,Ie=()=>{Fe===1/0?t(5,Fe=ge.length):t(5,Fe=1/0)})},t(57,E=()=>{t(9,g=""),t(13,_=[]),t(11,v=[]),t(14,y=[]),t(18,me=""),t(19,ue=""),t(1,se={})}),t(40,W=je=>{t(19,ue=je)}),t(39,H=je=>{t(18,me=je)}),t(35,U=je=>{t(20,_e=je)}),[ie,se,ke,Ce,ge,Fe,h,l,ve,g,Y,v,d,_,y,r,a,ee,me,ue,_e,Me,we,Ie,J,Ne,oe,pe,ce,V,Z,x,q,te,K,U,L,O,P,H,W,N,D,R,I,w,m,f,u,c,o,s,i,Ue,nt,lt,A,E]}class joe extends rt{constructor(e){super(),ot(this,e,Poe,Noe,It,{},null,[-1,-1,-1])}}export{joe as default};
