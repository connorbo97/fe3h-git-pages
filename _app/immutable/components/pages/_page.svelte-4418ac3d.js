import{_ as C0}from"../../chunks/preload-helper-41c905a7.js";import{S as nt,i as it,s as Ct,k as E,q as L,a as P,l as A,m as w,r as V,h as g,c as M,n as _,b as B,H as m,C as Ke,o as Mi,p as rt,J as se,e as et,D as os,f as D,g as Le,t as U,d as Ve,E as as,F as cs,G as us,K as br,L as Ze,v as Vt,x as ce,y as ge,z as ue,u as Ce,A as fe,M as Mn,N as Ft,O as Qr,P as Xr,Q as Jo,R as on,T as Bn,w as An,U as No,V as N5,W as Xu,X as Yu,Y as xe,Z as cu,_ as Il,$ as Jd,a0 as an,a1 as nr,a2 as ir,a3 as Nh,a4 as Us,a5 as Js,a6 as k0,a7 as oc,a8 as Ju,a9 as Zd,aa as P5,ab as Ms,B as li,ac as nI,ad as hg,ae as M5,af as Gb,ag as B5,ah as L5,ai as V5,aj as iI,ak as U5,I as W5}from"../../chunks/index-dd83a328.js";import{w as F5}from"../../chunks/index-afcdfccd.js";const Ye={STR:"pc_strength",DEX:"pc_dexterity",CON:"pc_constitution",INT:"pc_intelligence",WIS:"pc_wisdom",CHA:"pc_charisma"},dg={[Ye.STR]:"Strength",[Ye.DEX]:"Dexterity",[Ye.CON]:"Constitution",[Ye.INT]:"Intelligence",[Ye.WIS]:"Wisdom",[Ye.CHA]:"Charisma"},zs={[Ye.STR]:"Str",[Ye.DEX]:"Dex",[Ye.CON]:"Con",[Ye.INT]:"Int",[Ye.WIS]:"Wis",[Ye.CHA]:"Cha",ANIMAL_HANDLING:"AnHan"};var Et=(n=>(n.d2="1d2",n.d3="1d3",n.d4="1d4",n.d5="1d5",n.d6="1d6",n.d8="1d8",n.d10="1d10",n.d12="1d12",n.d20="1d20",n))(Et||{});const ws=(n,e=!1)=>`${n>=0?"+":"-"}${e?" ":""}${Math.abs(n)}`,Kb=n=>n?"Major":"Minor",Zi=(...n)=>n.map(t=>typeof t=="object"?Object.keys(t).filter(i=>t[i]).join(" "):t).join(" "),Qb=n=>n<0?"Cant' Crit":n===0?"20":`${20-n} to 20`;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},j5=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const s=n[t++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=n[t++];e[i++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=n[t++],l=n[t++],o=n[t++],a=((s&7)<<18|(r&63)<<12|(l&63)<<6|o&63)-65536;e[i++]=String.fromCharCode(55296+(a>>10)),e[i++]=String.fromCharCode(56320+(a&1023))}else{const r=n[t++],l=n[t++];e[i++]=String.fromCharCode((s&15)<<12|(r&63)<<6|l&63)}}return e.join("")},rI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const r=n[s],l=s+1<n.length,o=l?n[s+1]:0,a=s+2<n.length,c=a?n[s+2]:0,u=r>>2,f=(r&3)<<4|o>>4;let h=(o&15)<<2|c>>6,d=c&63;a||(d=64,l||(h=64)),i.push(t[u],t[f],t[h],t[d])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(sI(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):j5(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const r=t[n.charAt(s++)],o=s<n.length?t[n.charAt(s)]:0;++s;const c=s<n.length?t[n.charAt(s)]:64;++s;const f=s<n.length?t[n.charAt(s)]:64;if(++s,r==null||o==null||c==null||f==null)throw Error();const h=r<<2|o>>4;if(i.push(h),c!==64){const d=o<<4&240|c>>2;if(i.push(d),f!==64){const p=c<<6&192|f;i.push(p)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},H5=function(n){const e=sI(n);return rI.encodeByteArray(e,!0)},Ph=function(n){return H5(n).replace(/\./g,"")},q5=function(n){try{return rI.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z5(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G5=()=>z5().__FIREBASE_DEFAULTS__,K5=()=>{if(typeof process>"u"||typeof process.env>"u")return;const n={}.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Q5=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&q5(n[1]);return e&&JSON.parse(e)},lI=()=>{try{return G5()||K5()||Q5()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},X5=n=>{var e,t;return(t=(e=lI())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Y5=n=>{const e=X5(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},J5=()=>{var n;return(n=lI())===null||n===void 0?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z5{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x5(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",s=n.iat||0,r=n.sub||n.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},n),o="";return[Ph(JSON.stringify(t)),Ph(JSON.stringify(l)),o].join(".")}function $5(){try{return typeof indexedDB=="object"}catch{return!1}}function eP(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var r;e(((r=s.error)===null||r===void 0?void 0:r.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP="FirebaseError";class ac extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=tP,Object.setPrototypeOf(this,ac.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,oI.prototype.create)}}class oI{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},s=`${this.service}/${e}`,r=this.errors[e],l=r?nP(r,i):"Error",o=`${this.serviceName}: ${l} (${s}).`;return new ac(s,o,i)}}function nP(n,e){return n.replace(iP,(t,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const iP=/\{\$([^}]+)}/g;function mg(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const s of t){if(!i.includes(s))return!1;const r=n[s],l=e[s];if(Xb(r)&&Xb(l)){if(!mg(r,l))return!1}else if(r!==l)return!1}for(const s of i)if(!t.includes(s))return!1;return!0}function Xb(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Po(n){return n&&n._delegate?n._delegate:n}class uu{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new Z5;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(lP(e))try{this.getOrInitializeService({instanceIdentifier:fo})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const r=this.getOrInitializeService({instanceIdentifier:s});i.resolve(r)}catch{}}}}clearInstance(e=fo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=fo){return this.instances.has(e)}getOptions(e=fo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[r,l]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(r);i===o&&l.resolve(s)}return s}onInit(e,t){var i;const s=this.normalizeInstanceIdentifier(t),r=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;r.add(e),this.onInitCallbacks.set(s,r);const l=this.instances.get(s);return l&&e(l,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const s of i)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:rP(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=fo){return this.component?this.component.multipleInstances?e:fo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function rP(n){return n===fo?void 0:n}function lP(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new sP(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rn;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Rn||(Rn={}));const aP={debug:Rn.DEBUG,verbose:Rn.VERBOSE,info:Rn.INFO,warn:Rn.WARN,error:Rn.ERROR,silent:Rn.SILENT},cP=Rn.INFO,uP={[Rn.DEBUG]:"log",[Rn.VERBOSE]:"log",[Rn.INFO]:"info",[Rn.WARN]:"warn",[Rn.ERROR]:"error"},fP=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),s=uP[e];if(s)console[s](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class aI{constructor(e){this.name=e,this._logLevel=cP,this._logHandler=fP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Rn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?aP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Rn.DEBUG,...e),this._logHandler(this,Rn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Rn.VERBOSE,...e),this._logHandler(this,Rn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Rn.INFO,...e),this._logHandler(this,Rn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Rn.WARN,...e),this._logHandler(this,Rn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Rn.ERROR,...e),this._logHandler(this,Rn.ERROR,...e)}}const hP=(n,e)=>e.some(t=>n instanceof t);let Yb,Jb;function dP(){return Yb||(Yb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function mP(){return Jb||(Jb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cI=new WeakMap,pg=new WeakMap,uI=new WeakMap,ap=new WeakMap,T0=new WeakMap;function pP(n){const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("success",r),n.removeEventListener("error",l)},r=()=>{t(Bl(n.result)),s()},l=()=>{i(n.error),s()};n.addEventListener("success",r),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&cI.set(t,n)}).catch(()=>{}),T0.set(e,n),e}function gP(n){if(pg.has(n))return;const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("complete",r),n.removeEventListener("error",l),n.removeEventListener("abort",l)},r=()=>{t(),s()},l=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",r),n.addEventListener("error",l),n.addEventListener("abort",l)});pg.set(n,e)}let gg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return pg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||uI.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Bl(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function vP(n){gg=n(gg)}function bP(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(cp(this),e,...t);return uI.set(i,e.sort?e.sort():[e]),Bl(i)}:mP().includes(n)?function(...e){return n.apply(cp(this),e),Bl(cI.get(this))}:function(...e){return Bl(n.apply(cp(this),e))}}function _P(n){return typeof n=="function"?bP(n):(n instanceof IDBTransaction&&gP(n),hP(n,dP())?new Proxy(n,gg):n)}function Bl(n){if(n instanceof IDBRequest)return pP(n);if(ap.has(n))return ap.get(n);const e=_P(n);return e!==n&&(ap.set(n,e),T0.set(e,n)),e}const cp=n=>T0.get(n);function yP(n,e,{blocked:t,upgrade:i,blocking:s,terminated:r}={}){const l=indexedDB.open(n,e),o=Bl(l);return i&&l.addEventListener("upgradeneeded",a=>{i(Bl(l.result),a.oldVersion,a.newVersion,Bl(l.transaction))}),t&&l.addEventListener("blocked",()=>t()),o.then(a=>{r&&a.addEventListener("close",()=>r()),s&&a.addEventListener("versionchange",()=>s())}).catch(()=>{}),o}const SP=["get","getKey","getAll","getAllKeys","count"],EP=["put","add","delete","clear"],up=new Map;function Zb(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(up.get(e))return up.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,s=EP.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(s||SP.includes(t)))return;const r=async function(l,...o){const a=this.transaction(l,s?"readwrite":"readonly");let c=a.store;return i&&(c=c.index(o.shift())),(await Promise.all([c[t](...o),s&&a.done]))[0]};return up.set(e,r),r}vP(n=>({...n,get:(e,t,i)=>Zb(e,t)||n.get(e,t,i),has:(e,t)=>!!Zb(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(wP(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function wP(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const vg="@firebase/app",xb="0.9.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mo=new aI("@firebase/app"),CP="@firebase/app-compat",kP="@firebase/analytics-compat",TP="@firebase/analytics",IP="@firebase/app-check-compat",OP="@firebase/app-check",RP="@firebase/auth",DP="@firebase/auth-compat",NP="@firebase/database",PP="@firebase/database-compat",MP="@firebase/functions",BP="@firebase/functions-compat",LP="@firebase/installations",VP="@firebase/installations-compat",UP="@firebase/messaging",WP="@firebase/messaging-compat",FP="@firebase/performance",jP="@firebase/performance-compat",HP="@firebase/remote-config",qP="@firebase/remote-config-compat",zP="@firebase/storage",GP="@firebase/storage-compat",KP="@firebase/firestore",QP="@firebase/firestore-compat",XP="firebase",YP="9.17.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bg="[DEFAULT]",JP={[vg]:"fire-core",[CP]:"fire-core-compat",[TP]:"fire-analytics",[kP]:"fire-analytics-compat",[OP]:"fire-app-check",[IP]:"fire-app-check-compat",[RP]:"fire-auth",[DP]:"fire-auth-compat",[NP]:"fire-rtdb",[PP]:"fire-rtdb-compat",[MP]:"fire-fn",[BP]:"fire-fn-compat",[LP]:"fire-iid",[VP]:"fire-iid-compat",[UP]:"fire-fcm",[WP]:"fire-fcm-compat",[FP]:"fire-perf",[jP]:"fire-perf-compat",[HP]:"fire-rc",[qP]:"fire-rc-compat",[zP]:"fire-gcs",[GP]:"fire-gcs-compat",[KP]:"fire-fst",[QP]:"fire-fst-compat","fire-js":"fire-js",[XP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mh=new Map,_g=new Map;function ZP(n,e){try{n.container.addComponent(e)}catch(t){Mo.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Bh(n){const e=n.name;if(_g.has(e))return Mo.debug(`There were multiple attempts to register component ${e}.`),!1;_g.set(e,n);for(const t of Mh.values())ZP(t,n);return!0}function xP(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $P={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Ll=new oI("app","Firebase",$P);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new uu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ll.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tM=YP;function fI(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:bg,automaticDataCollectionEnabled:!1},e),s=i.name;if(typeof s!="string"||!s)throw Ll.create("bad-app-name",{appName:String(s)});if(t||(t=J5()),!t)throw Ll.create("no-options");const r=Mh.get(s);if(r){if(mg(t,r.options)&&mg(i,r.config))return r;throw Ll.create("duplicate-app",{appName:s})}const l=new oP(s);for(const a of _g.values())l.addComponent(a);const o=new eM(t,i,l);return Mh.set(s,o),o}function nM(n=bg){const e=Mh.get(n);if(!e&&n===bg)return fI();if(!e)throw Ll.create("no-app",{appName:n});return e}function Aa(n,e,t){var i;let s=(i=JP[n])!==null&&i!==void 0?i:n;t&&(s+=`-${t}`);const r=s.match(/\s|\//),l=e.match(/\s|\//);if(r||l){const o=[`Unable to register library "${s}" with version "${e}":`];r&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&l&&o.push("and"),l&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Mo.warn(o.join(" "));return}Bh(new uu(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iM="firebase-heartbeat-database",sM=1,fu="firebase-heartbeat-store";let fp=null;function hI(){return fp||(fp=yP(iM,sM,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(fu)}}}).catch(n=>{throw Ll.create("idb-open",{originalErrorMessage:n.message})})),fp}async function rM(n){try{return(await hI()).transaction(fu).objectStore(fu).get(dI(n))}catch(e){if(e instanceof ac)Mo.warn(e.message);else{const t=Ll.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Mo.warn(t.message)}}}async function $b(n,e){try{const i=(await hI()).transaction(fu,"readwrite");return await i.objectStore(fu).put(e,dI(n)),i.done}catch(t){if(t instanceof ac)Mo.warn(t.message);else{const i=Ll.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Mo.warn(i.message)}}}function dI(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lM=1024,oM=30*24*60*60*1e3;class aM{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new uM(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=e_();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(s=>s.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const r=new Date(s.date).valueOf();return Date.now()-r<=oM}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=e_(),{heartbeatsToSend:t,unsentEntries:i}=cM(this._heartbeatsCache.heartbeats),s=Ph(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function e_(){return new Date().toISOString().substring(0,10)}function cM(n,e=lM){const t=[];let i=n.slice();for(const s of n){const r=t.find(l=>l.agent===s.agent);if(r){if(r.dates.push(s.date),t_(t)>e){r.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),t_(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class uM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $5()?eP().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await rM(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return $b(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return $b(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function t_(n){return Ph(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fM(n){Bh(new uu("platform-logger",e=>new AP(e),"PRIVATE")),Bh(new uu("heartbeat",e=>new aM(e),"PRIVATE")),Aa(vg,xb,n),Aa(vg,xb,"esm2017"),Aa("fire-js","")}fM("");var hM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Rt,I0=I0||{},Gt=hM||self;function Lh(){}function xd(n){var e=typeof n;return e=e!="object"?e:n?Array.isArray(n)?"array":e:"null",e=="array"||e=="object"&&typeof n.length=="number"}function Zu(n){var e=typeof n;return e=="object"&&n!=null||e=="function"}function dM(n){return Object.prototype.hasOwnProperty.call(n,hp)&&n[hp]||(n[hp]=++mM)}var hp="closure_uid_"+(1e9*Math.random()>>>0),mM=0;function pM(n,e,t){return n.call.apply(n.bind,arguments)}function gM(n,e,t){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,i),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function rs(n,e,t){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?rs=pM:rs=gM,rs.apply(null,arguments)}function Rf(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var i=t.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function xi(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(i,s,r){for(var l=Array(arguments.length-2),o=2;o<arguments.length;o++)l[o-2]=arguments[o];return e.prototype[s].apply(i,l)}}function eo(){this.s=this.s,this.o=this.o}var vM=0;eo.prototype.s=!1;eo.prototype.na=function(){!this.s&&(this.s=!0,this.M(),vM!=0)&&dM(this)};eo.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const mI=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if(typeof n=="string")return typeof e!="string"||e.length!=1?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function O0(n){const e=n.length;if(0<e){const t=Array(e);for(let i=0;i<e;i++)t[i]=n[i];return t}return[]}function n_(n,e){for(let t=1;t<arguments.length;t++){const i=arguments[t];if(xd(i)){const s=n.length||0,r=i.length||0;n.length=s+r;for(let l=0;l<r;l++)n[s+l]=i[l]}else n.push(i)}}function ls(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}ls.prototype.h=function(){this.defaultPrevented=!0};var bM=function(){if(!Gt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Gt.addEventListener("test",Lh,e),Gt.removeEventListener("test",Lh,e)}catch{}return n}();function Vh(n){return/^[\s\xa0]*$/.test(n)}var i_=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function dp(n,e){return n<e?-1:n>e?1:0}function $d(){var n=Gt.navigator;return n&&(n=n.userAgent)?n:""}function Nr(n){return $d().indexOf(n)!=-1}function R0(n){return R0[" "](n),n}R0[" "]=Lh;function _M(n){var e=EM;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}var yM=Nr("Opera"),Ba=Nr("Trident")||Nr("MSIE"),pI=Nr("Edge"),yg=pI||Ba,gI=Nr("Gecko")&&!($d().toLowerCase().indexOf("webkit")!=-1&&!Nr("Edge"))&&!(Nr("Trident")||Nr("MSIE"))&&!Nr("Edge"),SM=$d().toLowerCase().indexOf("webkit")!=-1&&!Nr("Edge");function vI(){var n=Gt.document;return n?n.documentMode:void 0}var Uh;e:{var mp="",pp=function(){var n=$d();if(gI)return/rv:([^\);]+)(\)|;)/.exec(n);if(pI)return/Edge\/([\d\.]+)/.exec(n);if(Ba)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n);if(SM)return/WebKit\/(\S+)/.exec(n);if(yM)return/(?:Version)[ \/]?(\S+)/.exec(n)}();if(pp&&(mp=pp?pp[1]:""),Ba){var gp=vI();if(gp!=null&&gp>parseFloat(mp)){Uh=String(gp);break e}}Uh=mp}var EM={};function AM(){return _M(function(){let n=0;const e=i_(String(Uh)).split("."),t=i_("9").split("."),i=Math.max(e.length,t.length);for(let l=0;n==0&&l<i;l++){var s=e[l]||"",r=t[l]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],s[0].length==0&&r[0].length==0)break;n=dp(s[1].length==0?0:parseInt(s[1],10),r[1].length==0?0:parseInt(r[1],10))||dp(s[2].length==0,r[2].length==0)||dp(s[2],r[2]),s=s[3],r=r[3]}while(n==0)}return 0<=n})}var Sg;if(Gt.document&&Ba){var s_=vI();Sg=s_||parseInt(Uh,10)||void 0}else Sg=void 0;var wM=Sg;function hu(n,e){if(ls.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(gI){e:{try{R0(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else t=="mouseover"?e=n.fromElement:t=="mouseout"&&(e=n.toElement);this.relatedTarget=e,i?(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=n.clientX!==void 0?n.clientX:n.pageX,this.clientY=n.clientY!==void 0?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType=typeof n.pointerType=="string"?n.pointerType:CM[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&hu.X.h.call(this)}}xi(hu,ls);var CM={2:"touch",3:"pen",4:"mouse"};hu.prototype.h=function(){hu.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var xu="closure_listenable_"+(1e6*Math.random()|0),kM=0;function TM(n,e,t,i,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!i,this.ha=s,this.key=++kM,this.ba=this.ea=!1}function em(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function D0(n,e,t){for(const i in n)e.call(t,n[i],i,n)}function bI(n){const e={};for(const t in n)e[t]=n[t];return e}const r_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _I(n,e){let t,i;for(let s=1;s<arguments.length;s++){i=arguments[s];for(t in i)n[t]=i[t];for(let r=0;r<r_.length;r++)t=r_[r],Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}}function tm(n){this.src=n,this.g={},this.h=0}tm.prototype.add=function(n,e,t,i,s){var r=n.toString();n=this.g[r],n||(n=this.g[r]=[],this.h++);var l=Ag(n,e,i,s);return-1<l?(e=n[l],t||(e.ea=!1)):(e=new TM(e,this.src,r,!!i,s),e.ea=t,n.push(e)),e};function Eg(n,e){var t=e.type;if(t in n.g){var i=n.g[t],s=mI(i,e),r;(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(em(e),n.g[t].length==0&&(delete n.g[t],n.h--))}}function Ag(n,e,t,i){for(var s=0;s<n.length;++s){var r=n[s];if(!r.ba&&r.listener==e&&r.capture==!!t&&r.ha==i)return s}return-1}var N0="closure_lm_"+(1e6*Math.random()|0),vp={};function yI(n,e,t,i,s){if(i&&i.once)return EI(n,e,t,i,s);if(Array.isArray(e)){for(var r=0;r<e.length;r++)yI(n,e[r],t,i,s);return null}return t=B0(t),n&&n[xu]?n.N(e,t,Zu(i)?!!i.capture:!!i,s):SI(n,e,t,!1,i,s)}function SI(n,e,t,i,s,r){if(!e)throw Error("Invalid event type");var l=Zu(s)?!!s.capture:!!s,o=M0(n);if(o||(n[N0]=o=new tm(n)),t=o.add(e,t,i,l,r),t.proxy)return t;if(i=IM(),t.proxy=i,i.src=n,i.listener=t,n.addEventListener)bM||(s=l),s===void 0&&(s=!1),n.addEventListener(e.toString(),i,s);else if(n.attachEvent)n.attachEvent(wI(e.toString()),i);else if(n.addListener&&n.removeListener)n.addListener(i);else throw Error("addEventListener and attachEvent are unavailable.");return t}function IM(){function n(t){return e.call(n.src,n.listener,t)}const e=OM;return n}function EI(n,e,t,i,s){if(Array.isArray(e)){for(var r=0;r<e.length;r++)EI(n,e[r],t,i,s);return null}return t=B0(t),n&&n[xu]?n.O(e,t,Zu(i)?!!i.capture:!!i,s):SI(n,e,t,!0,i,s)}function AI(n,e,t,i,s){if(Array.isArray(e))for(var r=0;r<e.length;r++)AI(n,e[r],t,i,s);else i=Zu(i)?!!i.capture:!!i,t=B0(t),n&&n[xu]?(n=n.i,e=String(e).toString(),e in n.g&&(r=n.g[e],t=Ag(r,t,i,s),-1<t&&(em(r[t]),Array.prototype.splice.call(r,t,1),r.length==0&&(delete n.g[e],n.h--)))):n&&(n=M0(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Ag(e,t,i,s)),(t=-1<n?e[n]:null)&&P0(t))}function P0(n){if(typeof n!="number"&&n&&!n.ba){var e=n.src;if(e&&e[xu])Eg(e.i,n);else{var t=n.type,i=n.proxy;e.removeEventListener?e.removeEventListener(t,i,n.capture):e.detachEvent?e.detachEvent(wI(t),i):e.addListener&&e.removeListener&&e.removeListener(i),(t=M0(e))?(Eg(t,n),t.h==0&&(t.src=null,e[N0]=null)):em(n)}}}function wI(n){return n in vp?vp[n]:vp[n]="on"+n}function OM(n,e){if(n.ba)n=!0;else{e=new hu(e,this);var t=n.listener,i=n.ha||n.src;n.ea&&P0(n),n=t.call(i,e)}return n}function M0(n){return n=n[N0],n instanceof tm?n:null}var bp="__closure_events_fn_"+(1e9*Math.random()>>>0);function B0(n){return typeof n=="function"?n:(n[bp]||(n[bp]=function(e){return n.handleEvent(e)}),n[bp])}function Hi(){eo.call(this),this.i=new tm(this),this.P=this,this.I=null}xi(Hi,eo);Hi.prototype[xu]=!0;Hi.prototype.removeEventListener=function(n,e,t,i){AI(this,n,e,t,i)};function Ji(n,e){var t,i=n.I;if(i)for(t=[];i;i=i.I)t.push(i);if(n=n.P,i=e.type||e,typeof e=="string")e=new ls(e,n);else if(e instanceof ls)e.target=e.target||n;else{var s=e;e=new ls(i,n),_I(e,s)}if(s=!0,t)for(var r=t.length-1;0<=r;r--){var l=e.g=t[r];s=Df(l,i,!0,e)&&s}if(l=e.g=n,s=Df(l,i,!0,e)&&s,s=Df(l,i,!1,e)&&s,t)for(r=0;r<t.length;r++)l=e.g=t[r],s=Df(l,i,!1,e)&&s}Hi.prototype.M=function(){if(Hi.X.M.call(this),this.i){var n=this.i,e;for(e in n.g){for(var t=n.g[e],i=0;i<t.length;i++)em(t[i]);delete n.g[e],n.h--}}this.I=null};Hi.prototype.N=function(n,e,t,i){return this.i.add(String(n),e,!1,t,i)};Hi.prototype.O=function(n,e,t,i){return this.i.add(String(n),e,!0,t,i)};function Df(n,e,t,i){if(e=n.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,r=0;r<e.length;++r){var l=e[r];if(l&&!l.ba&&l.capture==t){var o=l.listener,a=l.ha||l.src;l.ea&&Eg(n.i,l),s=o.call(a,i)!==!1&&s}}return s&&!i.defaultPrevented}var L0=Gt.JSON.stringify;function RM(){var n=TI;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}class DM{constructor(){this.h=this.g=null}add(e,t){const i=CI.get();i.set(e,t),this.h?this.h.next=i:this.g=i,this.h=i}}var CI=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new NM,n=>n.reset());class NM{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function PM(n){Gt.setTimeout(()=>{throw n},0)}function kI(n,e){wg||MM(),Cg||(wg(),Cg=!0),TI.add(n,e)}var wg;function MM(){var n=Gt.Promise.resolve(void 0);wg=function(){n.then(BM)}}var Cg=!1,TI=new DM;function BM(){for(var n;n=RM();){try{n.h.call(n.g)}catch(t){PM(t)}var e=CI;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Cg=!1}function nm(n,e){Hi.call(this),this.h=n||1,this.g=e||Gt,this.j=rs(this.lb,this),this.l=Date.now()}xi(nm,Hi);Rt=nm.prototype;Rt.ca=!1;Rt.R=null;Rt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Ji(this,"tick"),this.ca&&(V0(this),this.start()))}};Rt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function V0(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}Rt.M=function(){nm.X.M.call(this),V0(this),delete this.g};function U0(n,e,t){if(typeof n=="function")t&&(n=rs(n,t));else if(n&&typeof n.handleEvent=="function")n=rs(n.handleEvent,n);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:Gt.setTimeout(n,e||0)}function II(n){n.g=U0(()=>{n.g=null,n.i&&(n.i=!1,II(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}class LM extends eo{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:II(this)}M(){super.M(),this.g&&(Gt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function du(n){eo.call(this),this.h=n,this.g={}}xi(du,eo);var l_=[];function OI(n,e,t,i){Array.isArray(t)||(t&&(l_[0]=t.toString()),t=l_);for(var s=0;s<t.length;s++){var r=yI(e,t[s],i||n.handleEvent,!1,n.h||n);if(!r)break;n.g[r.key]=r}}function RI(n){D0(n.g,function(e,t){this.g.hasOwnProperty(t)&&P0(e)},n),n.g={}}du.prototype.M=function(){du.X.M.call(this),RI(this)};du.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function im(){this.g=!0}im.prototype.Aa=function(){this.g=!1};function VM(n,e,t,i,s,r){n.info(function(){if(n.g)if(r)for(var l="",o=r.split("&"),a=0;a<o.length;a++){var c=o[a].split("=");if(1<c.length){var u=c[0];c=c[1];var f=u.split("_");l=2<=f.length&&f[1]=="type"?l+(u+"="+c+"&"):l+(u+"=redacted&")}}else l=null;else l=r;return"XMLHTTP REQ ("+i+") [attempt "+s+"]: "+e+`
`+t+`
`+l})}function UM(n,e,t,i,s,r,l){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+s+"]: "+e+`
`+t+`
`+r+" "+l})}function _a(n,e,t,i){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+FM(n,t)+(i?" "+i:"")})}function WM(n,e){n.info(function(){return"TIMEOUT: "+e})}im.prototype.info=function(){};function FM(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t){for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var i=t[n];if(!(2>i.length)){var s=i[1];if(Array.isArray(s)&&!(1>s.length)){var r=s[0];if(r!="noop"&&r!="stop"&&r!="close")for(var l=1;l<s.length;l++)s[l]=""}}}}return L0(t)}catch{return e}}var Zo={},o_=null;function sm(){return o_=o_||new Hi}Zo.Pa="serverreachability";function DI(n){ls.call(this,Zo.Pa,n)}xi(DI,ls);function mu(n){const e=sm();Ji(e,new DI(e))}Zo.STAT_EVENT="statevent";function NI(n,e){ls.call(this,Zo.STAT_EVENT,n),this.stat=e}xi(NI,ls);function Ss(n){const e=sm();Ji(e,new NI(e,n))}Zo.Qa="timingevent";function PI(n,e){ls.call(this,Zo.Qa,n),this.size=e}xi(PI,ls);function $u(n,e){if(typeof n!="function")throw Error("Fn must not be null and must be a function");return Gt.setTimeout(function(){n()},e)}var rm={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},MI={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function W0(){}W0.prototype.h=null;function a_(n){return n.h||(n.h=n.i())}function BI(){}var ef={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function F0(){ls.call(this,"d")}xi(F0,ls);function j0(){ls.call(this,"c")}xi(j0,ls);var kg;function lm(){}xi(lm,W0);lm.prototype.g=function(){return new XMLHttpRequest};lm.prototype.i=function(){return{}};kg=new lm;function tf(n,e,t,i){this.l=n,this.j=e,this.m=t,this.U=i||1,this.S=new du(this),this.O=jM,n=yg?125:void 0,this.T=new nm(n),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new LI}function LI(){this.i=null,this.g="",this.h=!1}var jM=45e3,Tg={},Wh={};Rt=tf.prototype;Rt.setTimeout=function(n){this.O=n};function Ig(n,e,t){n.K=1,n.v=am(al(e)),n.s=t,n.P=!0,VI(n,null)}function VI(n,e){n.F=Date.now(),nf(n),n.A=al(n.v);var t=n.A,i=n.U;Array.isArray(i)||(i=[String(i)]),GI(t.i,"t",i),n.C=0,t=n.l.H,n.h=new LI,n.g=h3(n.l,t?e:null,!n.s),0<n.N&&(n.L=new LM(rs(n.La,n,n.g),n.N)),OI(n.S,n.g,"readystatechange",n.ib),e=n.H?bI(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),mu(),VM(n.j,n.u,n.A,n.m,n.U,n.s)}Rt.ib=function(n){n=n.target;const e=this.L;e&&tl(n)==3?e.l():this.La(n)};Rt.La=function(n){try{if(n==this.g)e:{const u=tl(this.g);var e=this.g.Ea();const f=this.g.aa();if(!(3>u)&&(u!=3||yg||this.g&&(this.h.h||this.g.fa()||h_(this.g)))){this.I||u!=4||e==7||(e==8||0>=f?mu(3):mu(2)),om(this);var t=this.g.aa();this.Y=t;t:if(UI(this)){var i=h_(this.g);n="";var s=i.length,r=tl(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){vo(this),Yc(this);var l="";break t}this.h.i=new Gt.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(i[e],{stream:r&&e==s-1});i.splice(0,s),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=t==200,UM(this.j,this.u,this.A,this.m,this.U,u,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var o,a=this.g;if((o=a.g?a.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Vh(o)){var c=o;break t}}c=null}if(t=c)_a(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Og(this,t);else{this.i=!1,this.o=3,Ss(12),vo(this),Yc(this);break e}}this.P?(WI(this,u,l),yg&&this.i&&u==3&&(OI(this.S,this.T,"tick",this.hb),this.T.start())):(_a(this.j,this.m,l,null),Og(this,l)),u==4&&vo(this),this.i&&!this.I&&(u==4?a3(this.l,this):(this.i=!1,nf(this)))}else t==400&&0<l.indexOf("Unknown SID")?(this.o=3,Ss(12)):(this.o=0,Ss(13)),vo(this),Yc(this)}}}catch{}finally{}};function UI(n){return n.g?n.u=="GET"&&n.K!=2&&n.l.Da:!1}function WI(n,e,t){let i=!0,s;for(;!n.I&&n.C<t.length;)if(s=HM(n,t),s==Wh){e==4&&(n.o=4,Ss(14),i=!1),_a(n.j,n.m,null,"[Incomplete Response]");break}else if(s==Tg){n.o=4,Ss(15),_a(n.j,n.m,t,"[Invalid Chunk]"),i=!1;break}else _a(n.j,n.m,s,null),Og(n,s);UI(n)&&s!=Wh&&s!=Tg&&(n.h.g="",n.C=0),e!=4||t.length!=0||n.h.h||(n.o=1,Ss(16),i=!1),n.i=n.i&&i,i?0<t.length&&!n.$&&(n.$=!0,e=n.l,e.g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),X0(e),e.K=!0,Ss(11))):(_a(n.j,n.m,t,"[Invalid Chunked Response]"),vo(n),Yc(n))}Rt.hb=function(){if(this.g){var n=tl(this.g),e=this.g.fa();this.C<e.length&&(om(this),WI(this,n,e),this.i&&n!=4&&nf(this))}};function HM(n,e){var t=n.C,i=e.indexOf(`
`,t);return i==-1?Wh:(t=Number(e.substring(t,i)),isNaN(t)?Tg:(i+=1,i+t>e.length?Wh:(e=e.substr(i,t),n.C=i+t,e)))}Rt.cancel=function(){this.I=!0,vo(this)};function nf(n){n.V=Date.now()+n.O,FI(n,n.O)}function FI(n,e){if(n.B!=null)throw Error("WatchDog timer not null");n.B=$u(rs(n.gb,n),e)}function om(n){n.B&&(Gt.clearTimeout(n.B),n.B=null)}Rt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(WM(this.j,this.A),this.K!=2&&(mu(),Ss(17)),vo(this),this.o=2,Yc(this)):FI(this,this.V-n)};function Yc(n){n.l.G==0||n.I||a3(n.l,n)}function vo(n){om(n);var e=n.L;e&&typeof e.na=="function"&&e.na(),n.L=null,V0(n.T),RI(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Og(n,e){try{var t=n.l;if(t.G!=0&&(t.g==n||Rg(t.h,n))){if(!n.J&&Rg(t.h,n)&&t.G==3){try{var i=t.Fa.g.parse(e)}catch{i=null}if(Array.isArray(i)&&i.length==3){var s=i;if(s[0]==0){e:if(!t.u){if(t.g)if(t.g.F+3e3<n.F)Hh(t),fm(t);else break e;Q0(t),Ss(18)}}else t.Ba=s[1],0<t.Ba-t.T&&37500>s[2]&&t.L&&t.A==0&&!t.v&&(t.v=$u(rs(t.cb,t),6e3));if(1>=XI(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else bo(t,11)}else if((n.J||t.g==n)&&Hh(t),!Vh(e))for(s=t.Fa.g.parse(e),e=0;e<s.length;e++){let c=s[e];if(t.T=c[0],c=c[1],t.G==2)if(c[0]=="c"){t.I=c[1],t.ka=c[2];const u=c[3];u!=null&&(t.ma=u,t.j.info("VER="+t.ma));const f=c[4];f!=null&&(t.Ca=f,t.j.info("SVER="+t.Ca));const h=c[5];h!=null&&typeof h=="number"&&0<h&&(i=1.5*h,t.J=i,t.j.info("backChannelRequestTimeoutMs_="+i)),i=t;const d=n.g;if(d){const p=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var r=i.h;r.g||p.indexOf("spdy")==-1&&p.indexOf("quic")==-1&&p.indexOf("h2")==-1||(r.j=r.l,r.g=new Set,r.h&&(H0(r,r.h),r.h=null))}if(i.D){const v=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;v&&(i.za=v,ei(i.F,i.D,v))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms")),i=t;var l=n;if(i.sa=f3(i,i.H?i.ka:null,i.V),l.J){YI(i.h,l);var o=l,a=i.J;a&&o.setTimeout(a),o.B&&(om(o),nf(o)),i.g=l}else l3(i);0<t.i.length&&hm(t)}else c[0]!="stop"&&c[0]!="close"||bo(t,7);else t.G==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?bo(t,7):K0(t):c[0]!="noop"&&t.l&&t.l.wa(c),t.A=0)}}mu(4)}catch{}}function qM(n){if(n.W&&typeof n.W=="function")return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if(typeof n=="string")return n.split("");if(xd(n)){for(var e=[],t=n.length,i=0;i<t;i++)e.push(n[i]);return e}e=[],t=0;for(i in n)e[t++]=n[i];return e}function zM(n){if(n.oa&&typeof n.oa=="function")return n.oa();if(!n.W||typeof n.W!="function"){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(xd(n)||typeof n=="string"){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const i in n)e[t++]=i;return e}}}function jI(n,e){if(n.forEach&&typeof n.forEach=="function")n.forEach(e,void 0);else if(xd(n)||typeof n=="string")Array.prototype.forEach.call(n,e,void 0);else for(var t=zM(n),i=qM(n),s=i.length,r=0;r<s;r++)e.call(void 0,i[r],t&&t[r],n)}var HI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function GM(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var i=n[t].indexOf("="),s=null;if(0<=i){var r=n[t].substring(0,i);s=n[t].substring(i+1)}else r=n[t];e(r,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function wo(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof wo){this.h=e!==void 0?e:n.h,Fh(this,n.j),this.s=n.s,this.g=n.g,jh(this,n.m),this.l=n.l,e=n.i;var t=new pu;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),c_(this,t),this.o=n.o}else n&&(t=String(n).match(HI))?(this.h=!!e,Fh(this,t[1]||"",!0),this.s=Bc(t[2]||""),this.g=Bc(t[3]||"",!0),jh(this,t[4]),this.l=Bc(t[5]||"",!0),c_(this,t[6]||"",!0),this.o=Bc(t[7]||"")):(this.h=!!e,this.i=new pu(null,this.h))}wo.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Lc(e,u_,!0),":");var t=this.g;return(t||e=="file")&&(n.push("//"),(e=this.s)&&n.push(Lc(e,u_,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.m,t!=null&&n.push(":",String(t))),(t=this.l)&&(this.g&&t.charAt(0)!="/"&&n.push("/"),n.push(Lc(t,t.charAt(0)=="/"?XM:QM,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Lc(t,JM)),n.join("")};function al(n){return new wo(n)}function Fh(n,e,t){n.j=t?Bc(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function jh(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function c_(n,e,t){e instanceof pu?(n.i=e,ZM(n.i,n.h)):(t||(e=Lc(e,YM)),n.i=new pu(e,n.h))}function ei(n,e,t){n.i.set(e,t)}function am(n){return ei(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Bc(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Lc(n,e,t){return typeof n=="string"?(n=encodeURI(n).replace(e,KM),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function KM(n){return n=n.charCodeAt(0),"%"+(n>>4&15).toString(16)+(n&15).toString(16)}var u_=/[#\/\?@]/g,QM=/[#\?:]/g,XM=/[#\?]/g,YM=/[#\?@]/g,JM=/#/g;function pu(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function to(n){n.g||(n.g=new Map,n.h=0,n.i&&GM(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}Rt=pu.prototype;Rt.add=function(n,e){to(this),this.i=null,n=cc(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this};function qI(n,e){to(n),e=cc(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function zI(n,e){return to(n),e=cc(n,e),n.g.has(e)}Rt.forEach=function(n,e){to(this),this.g.forEach(function(t,i){t.forEach(function(s){n.call(e,s,i,this)},this)},this)};Rt.oa=function(){to(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let i=0;i<e.length;i++){const s=n[i];for(let r=0;r<s.length;r++)t.push(e[i])}return t};Rt.W=function(n){to(this);let e=[];if(typeof n=="string")zI(this,n)&&(e=e.concat(this.g.get(cc(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e};Rt.set=function(n,e){return to(this),this.i=null,n=cc(this,n),zI(this,n)&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this};Rt.get=function(n,e){return n?(n=this.W(n),0<n.length?String(n[0]):e):e};function GI(n,e,t){qI(n,e),0<t.length&&(n.i=null,n.g.set(cc(n,e),O0(t)),n.h+=t.length)}Rt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var i=e[t];const r=encodeURIComponent(String(i)),l=this.W(i);for(i=0;i<l.length;i++){var s=r;l[i]!==""&&(s+="="+encodeURIComponent(String(l[i]))),n.push(s)}}return this.i=n.join("&")};function cc(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function ZM(n,e){e&&!n.j&&(to(n),n.i=null,n.g.forEach(function(t,i){var s=i.toLowerCase();i!=s&&(qI(this,i),GI(this,s,t))},n)),n.j=e}var xM=class{constructor(e,t){this.h=e,this.g=t}};function KI(n){this.l=n||$M,Gt.PerformanceNavigationTiming?(n=Gt.performance.getEntriesByType("navigation"),n=0<n.length&&(n[0].nextHopProtocol=="hq"||n[0].nextHopProtocol=="h2")):n=!!(Gt.g&&Gt.g.Ga&&Gt.g.Ga()&&Gt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var $M=10;function QI(n){return n.h?!0:n.g?n.g.size>=n.j:!1}function XI(n){return n.h?1:n.g?n.g.size:0}function Rg(n,e){return n.h?n.h==e:n.g?n.g.has(e):!1}function H0(n,e){n.g?n.g.add(e):n.h=e}function YI(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}KI.prototype.cancel=function(){if(this.i=JI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const n of this.g.values())n.cancel();this.g.clear()}};function JI(n){if(n.h!=null)return n.i.concat(n.h.D);if(n.g!=null&&n.g.size!==0){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return O0(n.i)}function q0(){}q0.prototype.stringify=function(n){return Gt.JSON.stringify(n,void 0)};q0.prototype.parse=function(n){return Gt.JSON.parse(n,void 0)};function eB(){this.g=new q0}function tB(n,e,t){const i=t||"";try{jI(n,function(s,r){let l=s;Zu(s)&&(l=L0(s)),e.push(i+r+"="+encodeURIComponent(l))})}catch(s){throw e.push(i+"type="+encodeURIComponent("_badmap")),s}}function nB(n,e){const t=new im;if(Gt.Image){const i=new Image;i.onload=Rf(Nf,t,i,"TestLoadImage: loaded",!0,e),i.onerror=Rf(Nf,t,i,"TestLoadImage: error",!1,e),i.onabort=Rf(Nf,t,i,"TestLoadImage: abort",!1,e),i.ontimeout=Rf(Nf,t,i,"TestLoadImage: timeout",!1,e),Gt.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else e(!1)}function Nf(n,e,t,i,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(i)}catch{}}function sf(n){this.l=n.ac||null,this.j=n.jb||!1}xi(sf,W0);sf.prototype.g=function(){return new cm(this.l,this.j)};sf.prototype.i=function(n){return function(){return n}}({});function cm(n,e){Hi.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=z0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}xi(cm,Hi);var z0=0;Rt=cm.prototype;Rt.open=function(n,e){if(this.readyState!=z0)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,gu(this)};Rt.send=function(n){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Gt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))};Rt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,rf(this)),this.readyState=z0};Rt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,gu(this)),this.g&&(this.readyState=3,gu(this),this.g)))if(this.responseType==="arraybuffer")n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Gt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ZI(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))};function ZI(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}Rt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?rf(this):gu(this),this.readyState==3&&ZI(this)}};Rt.Va=function(n){this.g&&(this.response=this.responseText=n,rf(this))};Rt.Ua=function(n){this.g&&(this.response=n,rf(this))};Rt.ga=function(){this.g&&rf(this)};function rf(n){n.readyState=4,n.l=null,n.j=null,n.A=null,gu(n)}Rt.setRequestHeader=function(n,e){this.v.append(n,e)};Rt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""};Rt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)t=t.value,n.push(t[0]+": "+t[1]),t=e.next();return n.join(`\r
`)};function gu(n){n.onreadystatechange&&n.onreadystatechange.call(n)}Object.defineProperty(cm.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(n){this.m=n?"include":"same-origin"}});var iB=Gt.JSON.parse;function ri(n){Hi.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=xI,this.K=this.L=!1}xi(ri,Hi);var xI="",sB=/^https?$/i,rB=["POST","PUT"];Rt=ri.prototype;Rt.Ka=function(n){this.L=n};Rt.da=function(n,e,t,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():kg.g(),this.C=this.u?a_(this.u):a_(kg),this.g.onreadystatechange=rs(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(r){f_(this,r);return}if(n=t||"",t=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var s in i)t.set(s,i[s]);else if(typeof i.keys=="function"&&typeof i.get=="function")for(const r of i.keys())t.set(r,i.get(r));else throw Error("Unknown input type for opt_headers: "+String(i));i=Array.from(t.keys()).find(r=>r.toLowerCase()=="content-type"),s=Gt.FormData&&n instanceof Gt.FormData,!(0<=mI(rB,e))||i||s||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[r,l]of t)this.g.setRequestHeader(r,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{t3(this),0<this.B&&((this.K=lB(this.g))?(this.g.timeout=this.B,this.g.ontimeout=rs(this.qa,this)):this.A=U0(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(r){f_(this,r)}};function lB(n){return Ba&&AM()&&typeof n.timeout=="number"&&n.ontimeout!==void 0}Rt.qa=function(){typeof I0<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ji(this,"timeout"),this.abort(8))};function f_(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,$I(n),um(n)}function $I(n){n.D||(n.D=!0,Ji(n,"complete"),Ji(n,"error"))}Rt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ji(this,"complete"),Ji(this,"abort"),um(this))};Rt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),um(this,!0)),ri.X.M.call(this)};Rt.Ha=function(){this.s||(this.F||this.v||this.l?e3(this):this.fb())};Rt.fb=function(){e3(this)};function e3(n){if(n.h&&typeof I0<"u"&&(!n.C[1]||tl(n)!=4||n.aa()!=2)){if(n.v&&tl(n)==4)U0(n.Ha,0,n);else if(Ji(n,"readystatechange"),tl(n)==4){n.h=!1;try{const o=n.aa();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var i;if(i=o===0){var s=String(n.H).match(HI)[1]||null;if(!s&&Gt.self&&Gt.self.location){var r=Gt.self.location.protocol;s=r.substr(0,r.length-1)}i=!sB.test(s?s.toLowerCase():"")}t=i}if(t)Ji(n,"complete"),Ji(n,"success");else{n.m=6;try{var l=2<tl(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.aa()+"]",$I(n)}}finally{um(n)}}}}function um(n,e){if(n.g){t3(n);const t=n.g,i=n.C[0]?Lh:null;n.g=null,n.C=null,e||Ji(n,"ready");try{t.onreadystatechange=i}catch{}}}function t3(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Gt.clearTimeout(n.A),n.A=null)}function tl(n){return n.g?n.g.readyState:0}Rt.aa=function(){try{return 2<tl(this)?this.g.status:-1}catch{return-1}};Rt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}};Rt.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&e.indexOf(n)==0&&(e=e.substring(n.length)),iB(e)}};function h_(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case xI:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}Rt.Ea=function(){return this.m};Rt.Oa=function(){return typeof this.j=="string"?this.j:String(this.j)};function n3(n){let e="";return D0(n,function(t,i){e+=i,e+=":",e+=t,e+=`\r
`}),e}function G0(n,e,t){e:{for(i in t){var i=!1;break e}i=!0}i||(t=n3(t),typeof n=="string"?t!=null&&encodeURIComponent(String(t)):ei(n,e,t))}function Tc(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function i3(n){this.Ca=0,this.i=[],this.j=new im,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Tc("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Tc("baseRetryDelayMs",5e3,n),this.bb=Tc("retryDelaySeedMs",1e4,n),this.$a=Tc("forwardChannelMaxRetries",2,n),this.ta=Tc("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new KI(n&&n.concurrentRequestLimit),this.Fa=new eB,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}Rt=i3.prototype;Rt.ma=8;Rt.G=1;function K0(n){if(s3(n),n.G==3){var e=n.U++,t=al(n.F);ei(t,"SID",n.I),ei(t,"RID",e),ei(t,"TYPE","terminate"),lf(n,t),e=new tf(n,n.j,e,void 0),e.K=2,e.v=am(al(t)),t=!1,Gt.navigator&&Gt.navigator.sendBeacon&&(t=Gt.navigator.sendBeacon(e.v.toString(),"")),!t&&Gt.Image&&(new Image().src=e.v,t=!0),t||(e.g=h3(e.l,null),e.g.da(e.v)),e.F=Date.now(),nf(e)}u3(n)}function fm(n){n.g&&(X0(n),n.g.cancel(),n.g=null)}function s3(n){fm(n),n.u&&(Gt.clearTimeout(n.u),n.u=null),Hh(n),n.h.cancel(),n.m&&(typeof n.m=="number"&&Gt.clearTimeout(n.m),n.m=null)}function hm(n){QI(n.h)||n.m||(n.m=!0,kI(n.Ja,n),n.C=0)}function oB(n,e){return XI(n.h)>=n.h.j-(n.m?1:0)?!1:n.m?(n.i=e.D.concat(n.i),!0):n.G==1||n.G==2||n.C>=(n.Za?0:n.$a)?!1:(n.m=$u(rs(n.Ja,n,e),c3(n,n.C)),n.C++,!0)}Rt.Ja=function(n){if(this.m)if(this.m=null,this.G==1){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const s=new tf(this,this.j,n,void 0);let r=this.s;if(this.S&&(r?(r=bI(r),_I(r,this.S)):r=this.S),this.o!==null||this.N||(s.H=r,r=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){t:{var i=this.i[t];if("__data__"in i.g&&(i=i.g.__data__,typeof i=="string")){i=i.length;break t}i=void 0}if(i===void 0)break;if(e+=i,4096<e){e=t;break e}if(e===4096||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=r3(this,s,e),t=al(this.F),ei(t,"RID",n),ei(t,"CVER",22),this.D&&ei(t,"X-HTTP-Session-Id",this.D),lf(this,t),r&&(this.N?e="headers="+encodeURIComponent(String(n3(r)))+"&"+e:this.o&&G0(t,this.o,r)),H0(this.h,s),this.Ya&&ei(t,"TYPE","init"),this.O?(ei(t,"$req",e),ei(t,"SID","null"),s.Z=!0,Ig(s,t,null)):Ig(s,t,e),this.G=2}}else this.G==3&&(n?d_(this,n):this.i.length==0||QI(this.h)||d_(this))};function d_(n,e){var t;e?t=e.m:t=n.U++;const i=al(n.F);ei(i,"SID",n.I),ei(i,"RID",t),ei(i,"AID",n.T),lf(n,i),n.o&&n.s&&G0(i,n.o,n.s),t=new tf(n,n.j,t,n.C+1),n.o===null&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=r3(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),H0(n.h,t),Ig(t,i,e)}function lf(n,e){n.ia&&D0(n.ia,function(t,i){ei(e,i,t)}),n.l&&jI({},function(t,i){ei(e,i,t)})}function r3(n,e,t){t=Math.min(n.i.length,t);var i=n.l?rs(n.l.Ra,n.l,n):null;e:{var s=n.i;let r=-1;for(;;){const l=["count="+t];r==-1?0<t?(r=s[0].h,l.push("ofs="+r)):r=0:l.push("ofs="+r);let o=!0;for(let a=0;a<t;a++){let c=s[a].h;const u=s[a].g;if(c-=r,0>c)r=Math.max(0,s[a].h-100),o=!1;else try{tB(u,l,"req"+c+"_")}catch{i&&i(u)}}if(o){i=l.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,i}function l3(n){n.g||n.u||(n.Z=1,kI(n.Ia,n),n.A=0)}function Q0(n){return n.g||n.u||3<=n.A?!1:(n.Z++,n.u=$u(rs(n.Ia,n),c3(n,n.A)),n.A++,!0)}Rt.Ia=function(){if(this.u=null,o3(this),this.$&&!(this.K||this.g==null||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=$u(rs(this.eb,this),n)}};Rt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Ss(10),fm(this),o3(this))};function X0(n){n.B!=null&&(Gt.clearTimeout(n.B),n.B=null)}function o3(n){n.g=new tf(n,n.j,"rpc",n.Z),n.o===null&&(n.g.H=n.s),n.g.N=0;var e=al(n.sa);ei(e,"RID","rpc"),ei(e,"SID",n.I),ei(e,"CI",n.L?"0":"1"),ei(e,"AID",n.T),ei(e,"TYPE","xmlhttp"),lf(n,e),n.o&&n.s&&G0(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=am(al(e)),t.s=null,t.P=!0,VI(t,n)}Rt.cb=function(){this.v!=null&&(this.v=null,fm(this),Q0(this),Ss(19))};function Hh(n){n.v!=null&&(Gt.clearTimeout(n.v),n.v=null)}function a3(n,e){var t=null;if(n.g==e){Hh(n),X0(n),n.g=null;var i=2}else if(Rg(n.h,e))t=e.D,YI(n.h,e),i=1;else return;if(n.G!=0){if(n.pa=e.Y,e.i)if(i==1){t=e.s?e.s.length:0,e=Date.now()-e.F;var s=n.C;i=sm(),Ji(i,new PI(i,t)),hm(n)}else l3(n);else if(s=e.o,s==3||s==0&&0<n.pa||!(i==1&&oB(n,e)||i==2&&Q0(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),s){case 1:bo(n,5);break;case 4:bo(n,10);break;case 3:bo(n,6);break;default:bo(n,2)}}}function c3(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function bo(n,e){if(n.j.info("Error code "+e),e==2){var t=null;n.l&&(t=null);var i=rs(n.kb,n);t||(t=new wo("//www.google.com/images/cleardot.gif"),Gt.location&&Gt.location.protocol=="http"||Fh(t,"https"),am(t)),nB(t.toString(),i)}else Ss(2);n.G=0,n.l&&n.l.va(e),u3(n),s3(n)}Rt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Ss(2)):(this.j.info("Failed to ping google.com"),Ss(1))};function u3(n){if(n.G=0,n.la=[],n.l){const e=JI(n.h);(e.length!=0||n.i.length!=0)&&(n_(n.la,e),n_(n.la,n.i),n.h.i.length=0,O0(n.i),n.i.length=0),n.l.ua()}}function f3(n,e,t){var i=t instanceof wo?al(t):new wo(t,void 0);if(i.g!="")e&&(i.g=e+"."+i.g),jh(i,i.m);else{var s=Gt.location;i=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var r=new wo(null,void 0);i&&Fh(r,i),e&&(r.g=e),s&&jh(r,s),t&&(r.l=t),i=r}return t=n.D,e=n.za,t&&e&&ei(i,t,e),ei(i,"VER",n.ma),lf(n,i),i}function h3(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=t&&n.Da&&!n.ra?new ri(new sf({jb:!0})):new ri(n.ra),e.Ka(n.H),e}function d3(){}Rt=d3.prototype;Rt.xa=function(){};Rt.wa=function(){};Rt.va=function(){};Rt.ua=function(){};Rt.Ra=function(){};function qh(){if(Ba&&!(10<=Number(wM)))throw Error("Environmental error: no available transport.")}qh.prototype.g=function(n,e){return new Gs(n,e)};function Gs(n,e){Hi.call(this),this.g=new i3(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!Vh(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Vh(e)&&(this.g.D=e,n=this.h,n!==null&&e in n&&(n=this.h,e in n&&delete n[e])),this.j=new uc(this)}xi(Gs,Hi);Gs.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Ss(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=f3(n,null,n.V),hm(n)};Gs.prototype.close=function(){K0(this.g)};Gs.prototype.u=function(n){var e=this.g;if(typeof n=="string"){var t={};t.__data__=n,n=t}else this.v&&(t={},t.__data__=L0(n),n=t);e.i.push(new xM(e.ab++,n)),e.G==3&&hm(e)};Gs.prototype.M=function(){this.g.l=null,delete this.j,K0(this.g),delete this.g,Gs.X.M.call(this)};function m3(n){F0.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=e!==null&&n in e?e[n]:void 0),this.data=e}else this.data=n}xi(m3,F0);function p3(){j0.call(this),this.status=1}xi(p3,j0);function uc(n){this.g=n}xi(uc,d3);uc.prototype.xa=function(){Ji(this.g,"a")};uc.prototype.wa=function(n){Ji(this.g,new m3(n))};uc.prototype.va=function(n){Ji(this.g,new p3)};uc.prototype.ua=function(){Ji(this.g,"b")};qh.prototype.createWebChannel=qh.prototype.g;Gs.prototype.send=Gs.prototype.u;Gs.prototype.open=Gs.prototype.m;Gs.prototype.close=Gs.prototype.close;rm.NO_ERROR=0;rm.TIMEOUT=8;rm.HTTP_ERROR=6;MI.COMPLETE="complete";BI.EventType=ef;ef.OPEN="a";ef.CLOSE="b";ef.ERROR="c";ef.MESSAGE="d";Hi.prototype.listen=Hi.prototype.N;ri.prototype.listenOnce=ri.prototype.O;ri.prototype.getLastError=ri.prototype.Oa;ri.prototype.getLastErrorCode=ri.prototype.Ea;ri.prototype.getStatus=ri.prototype.aa;ri.prototype.getResponseJson=ri.prototype.Sa;ri.prototype.getResponseText=ri.prototype.fa;ri.prototype.send=ri.prototype.da;ri.prototype.setWithCredentials=ri.prototype.Ka;var aB=function(){return new qh},cB=function(){return sm()},_p=rm,uB=MI,fB=Zo,m_={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},hB=sf,Pf=BI,dB=ri;const p_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$i.UNAUTHENTICATED=new $i(null),$i.GOOGLE_CREDENTIALS=new $i("google-credentials-uid"),$i.FIRST_PARTY=new $i("first-party-uid"),$i.MOCK_USER=new $i("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fc="9.17.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bo=new aI("@firebase/firestore");function g_(){return Bo.logLevel}function Nt(n,...e){if(Bo.logLevel<=Rn.DEBUG){const t=e.map(Y0);Bo.debug(`Firestore (${fc}): ${n}`,...t)}}function cl(n,...e){if(Bo.logLevel<=Rn.ERROR){const t=e.map(Y0);Bo.error(`Firestore (${fc}): ${n}`,...t)}}function Dg(n,...e){if(Bo.logLevel<=Rn.WARN){const t=e.map(Y0);Bo.warn(`Firestore (${fc}): ${n}`,...t)}}function Y0(n){if(typeof n=="string")return n;try{return e=n,JSON.stringify(e)}catch{return n}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(n="Unexpected state"){const e=`FIRESTORE (${fc}) INTERNAL ASSERTION FAILED: `+n;throw cl(e),new Error(e)}function qn(n,e){n||Ht()}function Zt(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $e={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class It extends ac{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g3{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class mB{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t($i.UNAUTHENTICATED))}shutdown(){}}class pB{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class gB{constructor(e){this.t=e,this.currentUser=$i.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let i=this.i;const s=a=>this.i!==i?(i=this.i,t(a)):Promise.resolve();let r=new Co;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Co,e.enqueueRetryable(()=>s(this.currentUser))};const l=()=>{const a=r;e.enqueueRetryable(async()=>{await a.promise,await s(this.currentUser)})},o=a=>{Nt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=a,this.auth.addAuthTokenListener(this.o),l()};this.t.onInit(a=>o(a)),setTimeout(()=>{if(!this.auth){const a=this.t.getImmediate({optional:!0});a?o(a):(Nt("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Co)}},0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(Nt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(qn(typeof i.accessToken=="string"),new g3(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return qn(e===null||typeof e=="string"),new $i(e)}}class vB{constructor(e,t,i,s){this.h=e,this.l=t,this.m=i,this.g=s,this.type="FirstParty",this.user=$i.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(qn(!(typeof this.h!="object"||this.h===null||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class bB{constructor(e,t,i,s){this.h=e,this.l=t,this.m=i,this.g=s}getToken(){return Promise.resolve(new vB(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t($i.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class _B{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yB{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const i=r=>{r.error!=null&&Nt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const l=r.token!==this.A;return this.A=r.token,Nt("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(r.token):Promise.resolve()};this.o=r=>{e.enqueueRetryable(()=>i(r))};const s=r=>{Nt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.appCheck.addTokenListener(this.o)};this.T.onInit(r=>s(r)),setTimeout(()=>{if(!this.appCheck){const r=this.T.getImmediate({optional:!0});r?s(r):Nt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(qn(typeof t.token=="string"),this.A=t.token,new _B(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SB(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v3{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const s=SB(40);for(let r=0;r<s.length;++r)i.length<20&&s[r]<t&&(i+=e.charAt(s[r]%e.length))}return i}}function Dn(n,e){return n<e?-1:n>e?1:0}function La(n,e,t){return n.length===e.length&&n.every((i,s)=>t(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new It($e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new It($e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new It($e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new It($e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return fi.fromMillis(Date.now())}static fromDate(e){return fi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new fi(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Dn(this.nanoseconds,e.nanoseconds):Dn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Yt(e)}static min(){return new Yt(new fi(0,0))}static max(){return new Yt(new fi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ht(),i===void 0?i=e.length-t:i>e.length-t&&Ht(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return vu.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof vu?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let s=0;s<i;s++){const r=e.get(s),l=t.get(s);if(r<l)return-1;if(r>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Zn extends vu{construct(e,t,i){return new Zn(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new It($e.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(s=>s.length>0))}return new Zn(t)}static emptyPath(){return new Zn([])}}const EB=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class is extends vu{construct(e,t,i){return new is(e,t,i)}static isValidIdentifier(e){return EB.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),is.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new is(["__name__"])}static fromServerFormat(e){const t=[];let i="",s=0;const r=()=>{if(i.length===0)throw new It($e.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let l=!1;for(;s<e.length;){const o=e[s];if(o==="\\"){if(s+1===e.length)throw new It($e.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const a=e[s+1];if(a!=="\\"&&a!=="."&&a!=="`")throw new It($e.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=a,s+=2}else o==="`"?(l=!l,s++):o!=="."||l?(i+=o,s++):(r(),s++)}if(r(),l)throw new It($e.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new is(t)}static emptyPath(){return new is([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.path=e}static fromPath(e){return new Mt(Zn.fromString(e))}static fromName(e){return new Mt(Zn.fromString(e).popFirst(5))}static empty(){return new Mt(Zn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Zn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Zn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Mt(new Zn(e.slice()))}}function AB(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=Yt.fromTimestamp(i===1e9?new fi(t+1,0):new fi(t,i));return new jl(s,Mt.empty(),e)}function wB(n){return new jl(n.readTime,n.key,-1)}class jl{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new jl(Yt.min(),Mt.empty(),-1)}static max(){return new jl(Yt.max(),Mt.empty(),-1)}}function CB(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Mt.comparator(n.documentKey,e.documentKey),t!==0?t:Dn(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class TB{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function of(n){if(n.code!==$e.FAILED_PRECONDITION||n.message!==kB)throw n;Nt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ht(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new lt((i,s)=>{this.nextCallback=r=>{this.wrapSuccess(e,r).next(i,s)},this.catchCallback=r=>{this.wrapFailure(t,r).next(i,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof lt?t:lt.resolve(t)}catch(t){return lt.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):lt.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):lt.reject(t)}static resolve(e){return new lt((t,i)=>{t(e)})}static reject(e){return new lt((t,i)=>{i(e)})}static waitFor(e){return new lt((t,i)=>{let s=0,r=0,l=!1;e.forEach(o=>{++s,o.next(()=>{++r,l&&r===s&&t()},a=>i(a))}),l=!0,r===s&&t()})}static or(e){let t=lt.resolve(!1);for(const i of e)t=t.next(s=>s?lt.resolve(s):i());return t}static forEach(e,t){const i=[];return e.forEach((s,r)=>{i.push(t.call(this,s,r))}),this.waitFor(i)}static mapArray(e,t){return new lt((i,s)=>{const r=e.length,l=new Array(r);let o=0;for(let a=0;a<r;a++){const c=a;t(e[c]).next(u=>{l[c]=u,++o,o===r&&i(l)},u=>s(u))}})}static doWhile(e,t){return new lt((i,s)=>{const r=()=>{e()===!0?t().next(()=>{r()},s):i()};r()})}}function af(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ut(i),this.ct=i=>t.writeSequenceNumber(i))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}J0.at=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IB{constructor(e,t,i,s,r,l,o,a){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=s,this.ssl=r,this.forceLongPolling=l,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class bu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new bu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof bu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v_(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function hc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function b3(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dm(n){return n==null}function zh(n){return n===0&&1/n==-1/0}function OB(n){return typeof n=="number"&&Number.isInteger(n)&&!zh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new fs(t)}static fromUint8Array(e){const t=function(i){let s="";for(let r=0;r<i.length;++r)s+=String.fromCharCode(i[r]);return s}(e);return new fs(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Dn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}fs.EMPTY_BYTE_STRING=new fs("");const RB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hl(n){if(qn(!!n),typeof n=="string"){let e=0;const t=RB.exec(n);if(qn(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:_i(n.seconds),nanos:_i(n.nanos)}}function _i(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Va(n){return typeof n=="string"?fs.fromBase64String(n):fs.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _3(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function y3(n){const e=n.mapValue.fields.__previous_value__;return _3(e)?y3(e):e}function _u(n){const e=Hl(n.mapValue.fields.__local_write_time__.timestampValue);return new fi(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mf={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Lo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?_3(n)?4:DB(n)?9007199254740991:10:Ht()}function zr(n,e){if(n===e)return!0;const t=Lo(n);if(t!==Lo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return _u(n).isEqual(_u(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const r=Hl(i.timestampValue),l=Hl(s.timestampValue);return r.seconds===l.seconds&&r.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return Va(i.bytesValue).isEqual(Va(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return _i(i.geoPointValue.latitude)===_i(s.geoPointValue.latitude)&&_i(i.geoPointValue.longitude)===_i(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return _i(i.integerValue)===_i(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const r=_i(i.doubleValue),l=_i(s.doubleValue);return r===l?zh(r)===zh(l):isNaN(r)&&isNaN(l)}return!1}(n,e);case 9:return La(n.arrayValue.values||[],e.arrayValue.values||[],zr);case 10:return function(i,s){const r=i.mapValue.fields||{},l=s.mapValue.fields||{};if(v_(r)!==v_(l))return!1;for(const o in r)if(r.hasOwnProperty(o)&&(l[o]===void 0||!zr(r[o],l[o])))return!1;return!0}(n,e);default:return Ht()}}function yu(n,e){return(n.values||[]).find(t=>zr(t,e))!==void 0}function Ua(n,e){if(n===e)return 0;const t=Lo(n),i=Lo(e);if(t!==i)return Dn(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Dn(n.booleanValue,e.booleanValue);case 2:return function(s,r){const l=_i(s.integerValue||s.doubleValue),o=_i(r.integerValue||r.doubleValue);return l<o?-1:l>o?1:l===o?0:isNaN(l)?isNaN(o)?0:-1:1}(n,e);case 3:return b_(n.timestampValue,e.timestampValue);case 4:return b_(_u(n),_u(e));case 5:return Dn(n.stringValue,e.stringValue);case 6:return function(s,r){const l=Va(s),o=Va(r);return l.compareTo(o)}(n.bytesValue,e.bytesValue);case 7:return function(s,r){const l=s.split("/"),o=r.split("/");for(let a=0;a<l.length&&a<o.length;a++){const c=Dn(l[a],o[a]);if(c!==0)return c}return Dn(l.length,o.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,r){const l=Dn(_i(s.latitude),_i(r.latitude));return l!==0?l:Dn(_i(s.longitude),_i(r.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,r){const l=s.values||[],o=r.values||[];for(let a=0;a<l.length&&a<o.length;++a){const c=Ua(l[a],o[a]);if(c)return c}return Dn(l.length,o.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,r){if(s===Mf.mapValue&&r===Mf.mapValue)return 0;if(s===Mf.mapValue)return 1;if(r===Mf.mapValue)return-1;const l=s.fields||{},o=Object.keys(l),a=r.fields||{},c=Object.keys(a);o.sort(),c.sort();for(let u=0;u<o.length&&u<c.length;++u){const f=Dn(o[u],c[u]);if(f!==0)return f;const h=Ua(l[o[u]],a[c[u]]);if(h!==0)return h}return Dn(o.length,c.length)}(n.mapValue,e.mapValue);default:throw Ht()}}function b_(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Dn(n,e);const t=Hl(n),i=Hl(e),s=Dn(t.seconds,i.seconds);return s!==0?s:Dn(t.nanos,i.nanos)}function Wa(n){return Ng(n)}function Ng(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const s=Hl(i);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Va(n.bytesValue).toBase64():"referenceValue"in n?(t=n.referenceValue,Mt.fromName(t).toString()):"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(i){let s="[",r=!0;for(const l of i.values||[])r?r=!1:s+=",",s+=Ng(l);return s+"]"}(n.arrayValue):"mapValue"in n?function(i){const s=Object.keys(i.fields||{}).sort();let r="{",l=!0;for(const o of s)l?l=!1:r+=",",r+=`${o}:${Ng(i.fields[o])}`;return r+"}"}(n.mapValue):Ht();var e,t}function __(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Pg(n){return!!n&&"integerValue"in n}function Z0(n){return!!n&&"arrayValue"in n}function y_(n){return!!n&&"nullValue"in n}function S_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function dh(n){return!!n&&"mapValue"in n}function Jc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return hc(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Jc(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Jc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function DB(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e,t){this.position=e,this.inclusive=t}}function E_(n,e,t){let i=0;for(let s=0;s<n.position.length;s++){const r=e[s],l=n.position[s];if(r.field.isKeyField()?i=Mt.comparator(Mt.fromName(l.referenceValue),t.key):i=Ua(l,t.data.field(r.field)),r.dir==="desc"&&(i*=-1),i!==0)break}return i}function A_(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!zr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S3{}class Si extends S3{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new PB(e,t,i):t==="array-contains"?new LB(e,i):t==="in"?new VB(e,i):t==="not-in"?new UB(e,i):t==="array-contains-any"?new WB(e,i):new Si(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new MB(e,i):new BB(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Ua(t,this.value)):t!==null&&Lo(this.value)===Lo(t)&&this.matchesComparison(Ua(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ht()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class _r extends S3{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new _r(e,t)}matches(e){return E3(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ht!==null||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return e!==null?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function E3(n){return n.op==="and"}function A3(n){return NB(n)&&E3(n)}function NB(n){for(const e of n.filters)if(e instanceof _r)return!1;return!0}function Mg(n){if(n instanceof Si)return n.field.canonicalString()+n.op.toString()+Wa(n.value);if(A3(n))return n.filters.map(e=>Mg(e)).join(",");{const e=n.filters.map(t=>Mg(t)).join(",");return`${n.op}(${e})`}}function w3(n,e){return n instanceof Si?function(t,i){return i instanceof Si&&t.op===i.op&&t.field.isEqual(i.field)&&zr(t.value,i.value)}(n,e):n instanceof _r?function(t,i){return i instanceof _r&&t.op===i.op&&t.filters.length===i.filters.length?t.filters.reduce((s,r,l)=>s&&w3(r,i.filters[l]),!0):!1}(n,e):void Ht()}function C3(n){return n instanceof Si?function(e){return`${e.field.canonicalString()} ${e.op} ${Wa(e.value)}`}(n):n instanceof _r?function(e){return e.op.toString()+" {"+e.getFilters().map(C3).join(" ,")+"}"}(n):"Filter"}class PB extends Si{constructor(e,t,i){super(e,t,i),this.key=Mt.fromName(i.referenceValue)}matches(e){const t=Mt.comparator(e.key,this.key);return this.matchesComparison(t)}}class MB extends Si{constructor(e,t){super(e,"in",t),this.keys=k3("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class BB extends Si{constructor(e,t){super(e,"not-in",t),this.keys=k3("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function k3(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>Mt.fromName(i.referenceValue))}class LB extends Si{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Z0(t)&&yu(t.arrayValue,this.value)}}class VB extends Si{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&yu(this.value.arrayValue,t)}}class UB extends Si{constructor(e,t){super(e,"not-in",t)}matches(e){if(yu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!yu(this.value.arrayValue,t)}}class WB extends Si{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Z0(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>yu(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,t="asc"){this.field=e,this.dir=t}}function FB(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e,t){this.comparator=e,this.root=t||Gi.EMPTY}insert(e,t){return new Bi(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Gi.BLACK,null,null))}remove(e){return new Bi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return t+i.left.size;s<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bf(this.root,e,this.comparator,!0)}}class Bf{constructor(e,t,i,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=t?i(e.key,t):1,t&&s&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(r===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Gi{constructor(e,t,i,s,r){this.key=e,this.value=t,this.color=i??Gi.RED,this.left=s??Gi.EMPTY,this.right=r??Gi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,s,r){return new Gi(e??this.key,t??this.value,i??this.color,s??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let s=this;const r=i(e,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(e,t,i),null):r===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Gi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Gi.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Gi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Gi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ht();const e=this.left.check();if(e!==this.right.check())throw Ht();return e+(this.isRed()?0:1)}}Gi.EMPTY=null,Gi.RED=!0,Gi.BLACK=!1;Gi.EMPTY=new class{constructor(){this.size=0}get key(){throw Ht()}get value(){throw Ht()}get color(){throw Ht()}get left(){throw Ht()}get right(){throw Ht()}copy(n,e,t,i,s){return this}insert(n,e,t){return new Gi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e){this.comparator=e,this.data=new Bi(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new w_(this.data.getIterator())}getIteratorFrom(e){return new w_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof Ni)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,r=i.getNext().key;if(this.comparator(s,r)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ni(this.comparator);return t.data=e,t}}class w_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e){this.fields=e,e.sort(is.comparator)}static empty(){return new mr([])}unionWith(e){let t=new Ni(is.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new mr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return La(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e){this.value=e}static empty(){return new Zs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!dh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Jc(t)}setAll(e){let t=is.emptyPath(),i={},s=[];e.forEach((l,o)=>{if(!t.isImmediateParentOf(o)){const a=this.getFieldsMap(t);this.applyChanges(a,i,s),i={},s=[],t=o.popLast()}l?i[o.lastSegment()]=Jc(l):s.push(o.lastSegment())});const r=this.getFieldsMap(t);this.applyChanges(r,i,s)}delete(e){const t=this.field(e.popLast());dh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return zr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=t.mapValue.fields[e.get(i)];dh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,i){hc(t,(s,r)=>e[s]=r);for(const s of i)delete e[s]}clone(){return new Zs(Jc(this.value))}}function T3(n){const e=[];return hc(n.fields,(t,i)=>{const s=new is([t]);if(dh(i)){const r=T3(i.mapValue).fields;if(r.length===0)e.push(s);else for(const l of r)e.push(s.child(l))}else e.push(s)}),new mr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e,t,i,s,r,l,o){this.key=e,this.documentType=t,this.version=i,this.readTime=s,this.createTime=r,this.data=l,this.documentState=o}static newInvalidDocument(e){return new ts(e,0,Yt.min(),Yt.min(),Yt.min(),Zs.empty(),0)}static newFoundDocument(e,t,i,s){return new ts(e,1,t,Yt.min(),i,s,0)}static newNoDocument(e,t){return new ts(e,2,t,Yt.min(),Yt.min(),Zs.empty(),0)}static newUnknownDocument(e,t){return new ts(e,3,t,Yt.min(),Yt.min(),Zs.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Yt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Yt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ts&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ts(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jB{constructor(e,t=null,i=[],s=[],r=null,l=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=s,this.limit=r,this.startAt=l,this.endAt=o,this.ft=null}}function C_(n,e=null,t=[],i=[],s=null,r=null,l=null){return new jB(n,e,t,i,s,r,l)}function x0(n){const e=Zt(n);if(e.ft===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>Mg(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),dm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Wa(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Wa(i)).join(",")),e.ft=t}return e.ft}function $0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!FB(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!w3(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!A_(n.startAt,e.startAt)&&A_(n.endAt,e.endAt)}function Bg(n){return Mt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e,t=null,i=[],s=[],r=null,l="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=s,this.limit=r,this.limitType=l,this.startAt=o,this.endAt=a,this.dt=null,this._t=null,this.startAt,this.endAt}}function HB(n,e,t,i,s,r,l,o){return new cf(n,e,t,i,s,r,l,o)}function ev(n){return new cf(n)}function k_(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function I3(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function tv(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(t!==null)return t}return null}function O3(n){return n.collectionGroup!==null}function wa(n){const e=Zt(n);if(e.dt===null){e.dt=[];const t=tv(e),i=I3(e);if(t!==null&&i===null)t.isKeyField()||e.dt.push(new Zc(t)),e.dt.push(new Zc(is.keyField(),"asc"));else{let s=!1;for(const r of e.explicitOrderBy)e.dt.push(r),r.field.isKeyField()&&(s=!0);if(!s){const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new Zc(is.keyField(),r))}}}return e.dt}function ul(n){const e=Zt(n);if(!e._t)if(e.limitType==="F")e._t=C_(e.path,e.collectionGroup,wa(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const r of wa(e)){const l=r.dir==="desc"?"asc":"desc";t.push(new Zc(r.field,l))}const i=e.endAt?new Gh(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new Gh(e.startAt.position,e.startAt.inclusive):null;e._t=C_(e.path,e.collectionGroup,t,e.filters,e.limit,i,s)}return e._t}function Lg(n,e){e.getFirstInequalityField(),tv(n);const t=n.filters.concat([e]);return new cf(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Vg(n,e,t){return new cf(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function mm(n,e){return $0(ul(n),ul(e))&&n.limitType===e.limitType}function R3(n){return`${x0(ul(n))}|lt:${n.limitType}`}function Ug(n){return`Query(target=${function(e){let t=e.path.canonicalString();return e.collectionGroup!==null&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(i=>C3(i)).join(", ")}]`),dm(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Wa(i)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Wa(i)).join(",")),`Target(${t})`}(ul(n))}; limitType=${n.limitType})`}function pm(n,e){return e.isFoundDocument()&&function(t,i){const s=i.key.path;return t.collectionGroup!==null?i.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(s):Mt.isDocumentKey(t.path)?t.path.isEqual(s):t.path.isImmediateParentOf(s)}(n,e)&&function(t,i){for(const s of wa(t))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(t,i){for(const s of t.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(t,i){return!(t.startAt&&!function(s,r,l){const o=E_(s,r,l);return s.inclusive?o<=0:o<0}(t.startAt,wa(t),i)||t.endAt&&!function(s,r,l){const o=E_(s,r,l);return s.inclusive?o>=0:o>0}(t.endAt,wa(t),i))}(n,e)}function qB(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function D3(n){return(e,t)=>{let i=!1;for(const s of wa(n)){const r=zB(s,e,t);if(r!==0)return r;i=i||s.field.isKeyField()}return 0}}function zB(n,e,t){const i=n.field.isKeyField()?Mt.comparator(e.key,t.key):function(s,r,l){const o=r.data.field(s),a=l.data.field(s);return o!==null&&a!==null?Ua(o,a):Ht()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ht()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N3(n,e){if(n.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zh(e)?"-0":e}}function P3(n){return{integerValue:""+n}}function GB(n,e){return OB(e)?P3(e):N3(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(){this._=void 0}}function KB(n,e,t){return n instanceof Kh?function(i,s){const r={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&(r.fields.__previous_value__=s),{mapValue:r}}(t,e):n instanceof Su?B3(n,e):n instanceof Eu?L3(n,e):function(i,s){const r=M3(i,s),l=T_(r)+T_(i.gt);return Pg(r)&&Pg(i.gt)?P3(l):N3(i.yt,l)}(n,e)}function QB(n,e,t){return n instanceof Su?B3(n,e):n instanceof Eu?L3(n,e):t}function M3(n,e){return n instanceof Qh?Pg(t=e)||function(i){return!!i&&"doubleValue"in i}(t)?e:{integerValue:0}:null;var t}class Kh extends gm{}class Su extends gm{constructor(e){super(),this.elements=e}}function B3(n,e){const t=V3(e);for(const i of n.elements)t.some(s=>zr(s,i))||t.push(i);return{arrayValue:{values:t}}}class Eu extends gm{constructor(e){super(),this.elements=e}}function L3(n,e){let t=V3(e);for(const i of n.elements)t=t.filter(s=>!zr(s,i));return{arrayValue:{values:t}}}class Qh extends gm{constructor(e,t){super(),this.yt=e,this.gt=t}}function T_(n){return _i(n.integerValue||n.doubleValue)}function V3(n){return Z0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function XB(n,e){return n.field.isEqual(e.field)&&function(t,i){return t instanceof Su&&i instanceof Su||t instanceof Eu&&i instanceof Eu?La(t.elements,i.elements,zr):t instanceof Qh&&i instanceof Qh?zr(t.gt,i.gt):t instanceof Kh&&i instanceof Kh}(n.transform,e.transform)}class YB{constructor(e,t){this.version=e,this.transformResults=t}}class ll{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ll}static exists(e){return new ll(void 0,e)}static updateTime(e){return new ll(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function mh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class vm{}function U3(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new F3(n.key,ll.none()):new uf(n.key,n.data,ll.none());{const t=n.data,i=Zs.empty();let s=new Ni(is.comparator);for(let r of e.fields)if(!s.has(r)){let l=t.field(r);l===null&&r.length>1&&(r=r.popLast(),l=t.field(r)),l===null?i.delete(r):i.set(r,l),s=s.add(r)}return new xo(n.key,i,new mr(s.toArray()),ll.none())}}function JB(n,e,t){n instanceof uf?function(i,s,r){const l=i.value.clone(),o=O_(i.fieldTransforms,s,r.transformResults);l.setAll(o),s.convertToFoundDocument(r.version,l).setHasCommittedMutations()}(n,e,t):n instanceof xo?function(i,s,r){if(!mh(i.precondition,s))return void s.convertToUnknownDocument(r.version);const l=O_(i.fieldTransforms,s,r.transformResults),o=s.data;o.setAll(W3(i)),o.setAll(l),s.convertToFoundDocument(r.version,o).setHasCommittedMutations()}(n,e,t):function(i,s,r){s.convertToNoDocument(r.version).setHasCommittedMutations()}(0,e,t)}function xc(n,e,t,i){return n instanceof uf?function(s,r,l,o){if(!mh(s.precondition,r))return l;const a=s.value.clone(),c=R_(s.fieldTransforms,o,r);return a.setAll(c),r.convertToFoundDocument(r.version,a).setHasLocalMutations(),null}(n,e,t,i):n instanceof xo?function(s,r,l,o){if(!mh(s.precondition,r))return l;const a=R_(s.fieldTransforms,o,r),c=r.data;return c.setAll(W3(s)),c.setAll(a),r.convertToFoundDocument(r.version,c).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(u=>u.field))}(n,e,t,i):function(s,r,l){return mh(s.precondition,r)?(r.convertToNoDocument(r.version).setHasLocalMutations(),null):l}(n,e,t)}function ZB(n,e){let t=null;for(const i of n.fieldTransforms){const s=e.data.field(i.field),r=M3(i.transform,s||null);r!=null&&(t===null&&(t=Zs.empty()),t.set(i.field,r))}return t||null}function I_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(t,i){return t===void 0&&i===void 0||!(!t||!i)&&La(t,i,(s,r)=>XB(s,r))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class uf extends vm{constructor(e,t,i,s=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class xo extends vm{constructor(e,t,i,s,r=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function W3(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function O_(n,e,t){const i=new Map;qn(n.length===t.length);for(let s=0;s<t.length;s++){const r=n[s],l=r.transform,o=e.data.field(r.field);i.set(r.field,QB(l,o,t[s]))}return i}function R_(n,e,t){const i=new Map;for(const s of n){const r=s.transform,l=t.data.field(s.field);i.set(s.field,KB(r,l,e))}return i}class F3 extends vm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xB extends vm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $B{constructor(e){this.count=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bi,mn;function e6(n){switch(n){default:return Ht();case $e.CANCELLED:case $e.UNKNOWN:case $e.DEADLINE_EXCEEDED:case $e.RESOURCE_EXHAUSTED:case $e.INTERNAL:case $e.UNAVAILABLE:case $e.UNAUTHENTICATED:return!1;case $e.INVALID_ARGUMENT:case $e.NOT_FOUND:case $e.ALREADY_EXISTS:case $e.PERMISSION_DENIED:case $e.FAILED_PRECONDITION:case $e.ABORTED:case $e.OUT_OF_RANGE:case $e.UNIMPLEMENTED:case $e.DATA_LOSS:return!0}}function j3(n){if(n===void 0)return cl("GRPC error has no .code"),$e.UNKNOWN;switch(n){case bi.OK:return $e.OK;case bi.CANCELLED:return $e.CANCELLED;case bi.UNKNOWN:return $e.UNKNOWN;case bi.DEADLINE_EXCEEDED:return $e.DEADLINE_EXCEEDED;case bi.RESOURCE_EXHAUSTED:return $e.RESOURCE_EXHAUSTED;case bi.INTERNAL:return $e.INTERNAL;case bi.UNAVAILABLE:return $e.UNAVAILABLE;case bi.UNAUTHENTICATED:return $e.UNAUTHENTICATED;case bi.INVALID_ARGUMENT:return $e.INVALID_ARGUMENT;case bi.NOT_FOUND:return $e.NOT_FOUND;case bi.ALREADY_EXISTS:return $e.ALREADY_EXISTS;case bi.PERMISSION_DENIED:return $e.PERMISSION_DENIED;case bi.FAILED_PRECONDITION:return $e.FAILED_PRECONDITION;case bi.ABORTED:return $e.ABORTED;case bi.OUT_OF_RANGE:return $e.OUT_OF_RANGE;case bi.UNIMPLEMENTED:return $e.UNIMPLEMENTED;case bi.DATA_LOSS:return $e.DATA_LOSS;default:return Ht()}}(mn=bi||(bi={}))[mn.OK=0]="OK",mn[mn.CANCELLED=1]="CANCELLED",mn[mn.UNKNOWN=2]="UNKNOWN",mn[mn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",mn[mn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",mn[mn.NOT_FOUND=5]="NOT_FOUND",mn[mn.ALREADY_EXISTS=6]="ALREADY_EXISTS",mn[mn.PERMISSION_DENIED=7]="PERMISSION_DENIED",mn[mn.UNAUTHENTICATED=16]="UNAUTHENTICATED",mn[mn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",mn[mn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",mn[mn.ABORTED=10]="ABORTED",mn[mn.OUT_OF_RANGE=11]="OUT_OF_RANGE",mn[mn.UNIMPLEMENTED=12]="UNIMPLEMENTED",mn[mn.INTERNAL=13]="INTERNAL",mn[mn.UNAVAILABLE=14]="UNAVAILABLE",mn[mn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[s,r]of i)if(this.equalsFn(s,e))return r}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return void(s[r]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[t]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){hc(this.inner,(t,i)=>{for(const[s,r]of i)e(s,r)})}isEmpty(){return b3(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t6=new Bi(Mt.comparator);function fl(){return t6}const H3=new Bi(Mt.comparator);function Vc(...n){let e=H3;for(const t of n)e=e.insert(t.key,t);return e}function q3(n){let e=H3;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function _o(){return $c()}function z3(){return $c()}function $c(){return new dc(n=>n.toString(),(n,e)=>n.isEqual(e))}const n6=new Bi(Mt.comparator),i6=new Ni(Mt.comparator);function fn(...n){let e=i6;for(const t of n)e=e.add(t);return e}const s6=new Ni(Dn);function G3(){return s6}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(e,t,i,s,r){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const s=new Map;return s.set(e,ff.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new bm(Yt.min(),s,G3(),fl(),fn())}}class ff{constructor(e,t,i,s,r){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new ff(i,t,fn(),fn(),fn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e,t,i,s){this.It=e,this.removedTargetIds=t,this.key=i,this.Tt=s}}class K3{constructor(e,t){this.targetId=e,this.Et=t}}class Q3{constructor(e,t,i=fs.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=s}}class D_{constructor(){this.At=0,this.Rt=P_(),this.bt=fs.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return this.At!==0}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=fn(),t=fn(),i=fn();return this.Rt.forEach((s,r)=>{switch(r){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:i=i.add(s);break;default:Ht()}}),new ff(this.bt,this.Pt,e,t,i)}xt(){this.vt=!1,this.Rt=P_()}Nt(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class r6{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=fl(),this.qt=N_(),this.Ut=new Ni(Dn)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}jt(e){this.forEachTarget(e,t=>{const i=this.Wt(t);switch(e.state){case 0:this.zt(t)&&i.Dt(e.resumeToken);break;case 1:i.Mt(),i.Vt||i.xt(),i.Dt(e.resumeToken);break;case 2:i.Mt(),i.Vt||this.removeTarget(t);break;case 3:this.zt(t)&&(i.Ft(),i.Dt(e.resumeToken));break;case 4:this.zt(t)&&(this.Ht(t),i.Dt(e.resumeToken));break;default:Ht()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((i,s)=>{this.zt(s)&&t(s)})}Jt(e){const t=e.targetId,i=e.Et.count,s=this.Yt(t);if(s){const r=s.target;if(Bg(r))if(i===0){const l=new Mt(r.path);this.Qt(t,l,ts.newNoDocument(l,Yt.min()))}else qn(i===1);else this.Xt(t)!==i&&(this.Ht(t),this.Ut=this.Ut.add(t))}}Zt(e){const t=new Map;this.Bt.forEach((r,l)=>{const o=this.Yt(l);if(o){if(r.current&&Bg(o.target)){const a=new Mt(o.target.path);this.Lt.get(a)!==null||this.te(l,a)||this.Qt(l,a,ts.newNoDocument(a,e))}r.St&&(t.set(l,r.Ct()),r.xt())}});let i=fn();this.qt.forEach((r,l)=>{let o=!0;l.forEachWhile(a=>{const c=this.Yt(a);return!c||c.purpose===2||(o=!1,!1)}),o&&(i=i.add(r))}),this.Lt.forEach((r,l)=>l.setReadTime(e));const s=new bm(e,t,this.Ut,this.Lt,i);return this.Lt=fl(),this.qt=N_(),this.Ut=new Ni(Dn),s}Gt(e,t){if(!this.zt(e))return;const i=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,i),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,i){if(!this.zt(e))return;const s=this.Wt(e);this.te(e,t)?s.Nt(t,1):s.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),i&&(this.Lt=this.Lt.insert(t,i))}removeTarget(e){this.Bt.delete(e)}Xt(e){const t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let t=this.Bt.get(e);return t||(t=new D_,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new Ni(Dn),this.qt=this.qt.insert(e,t)),t}zt(e){const t=this.Yt(e)!==null;return t||Nt("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new D_),this.$t.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}function N_(){return new Bi(Mt.comparator)}function P_(){return new Bi(Mt.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l6=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),o6=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),a6=(()=>({and:"AND",or:"OR"}))();class c6{constructor(e,t){this.databaseId=e,this.wt=t}}function Xh(n,e){return n.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function X3(n,e){return n.wt?e.toBase64():e.toUint8Array()}function u6(n,e){return Xh(n,e.toTimestamp())}function Ur(n){return qn(!!n),Yt.fromTimestamp(function(e){const t=Hl(e);return new fi(t.seconds,t.nanos)}(n))}function nv(n,e){return function(t){return new Zn(["projects",t.projectId,"databases",t.database])}(n).child("documents").child(e).canonicalString()}function Y3(n){const e=Zn.fromString(n);return qn($3(e)),e}function Wg(n,e){return nv(n.databaseId,e.path)}function yp(n,e){const t=Y3(e);if(t.get(1)!==n.databaseId.projectId)throw new It($e.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new It($e.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Mt(J3(t))}function Fg(n,e){return nv(n.databaseId,e)}function f6(n){const e=Y3(n);return e.length===4?Zn.emptyPath():J3(e)}function jg(n){return new Zn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function J3(n){return qn(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function M_(n,e,t){return{name:Wg(n,e),fields:t.value.mapValue.fields}}function h6(n,e){let t;if("targetChange"in e){e.targetChange;const i=function(a){return a==="NO_CHANGE"?0:a==="ADD"?1:a==="REMOVE"?2:a==="CURRENT"?3:a==="RESET"?4:Ht()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],r=function(a,c){return a.wt?(qn(c===void 0||typeof c=="string"),fs.fromBase64String(c||"")):(qn(c===void 0||c instanceof Uint8Array),fs.fromUint8Array(c||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,o=l&&function(a){const c=a.code===void 0?$e.UNKNOWN:j3(a.code);return new It(c,a.message||"")}(l);t=new Q3(i,s,r,o||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=yp(n,i.document.name),r=Ur(i.document.updateTime),l=i.document.createTime?Ur(i.document.createTime):Yt.min(),o=new Zs({mapValue:{fields:i.document.fields}}),a=ts.newFoundDocument(s,r,l,o),c=i.targetIds||[],u=i.removedTargetIds||[];t=new ph(c,u,a.key,a)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=yp(n,i.document),r=i.readTime?Ur(i.readTime):Yt.min(),l=ts.newNoDocument(s,r),o=i.removedTargetIds||[];t=new ph([],o,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=yp(n,i.document),r=i.removedTargetIds||[];t=new ph([],r,s,null)}else{if(!("filter"in e))return Ht();{e.filter;const i=e.filter;i.targetId;const s=i.count||0,r=new $B(s),l=i.targetId;t=new K3(l,r)}}return t}function d6(n,e){let t;if(e instanceof uf)t={update:M_(n,e.key,e.value)};else if(e instanceof F3)t={delete:Wg(n,e.key)};else if(e instanceof xo)t={update:M_(n,e.key,e.data),updateMask:E6(e.fieldMask)};else{if(!(e instanceof xB))return Ht();t={verify:Wg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(s,r){const l=r.transform;if(l instanceof Kh)return{fieldPath:r.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Su)return{fieldPath:r.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Eu)return{fieldPath:r.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Qh)return{fieldPath:r.field.canonicalString(),increment:l.gt};throw Ht()}(0,i))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:u6(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Ht()}(n,e.precondition)),t}function m6(n,e){return n&&n.length>0?(qn(e!==void 0),n.map(t=>function(i,s){let r=i.updateTime?Ur(i.updateTime):Ur(s);return r.isEqual(Yt.min())&&(r=Ur(s)),new YB(r,i.transformResults||[])}(t,e))):[]}function p6(n,e){return{documents:[Fg(n,e.path)]}}function g6(n,e){const t={structuredQuery:{}},i=e.path;e.collectionGroup!==null?(t.parent=Fg(n,i),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Fg(n,i.popLast()),t.structuredQuery.from=[{collectionId:i.lastSegment()}]);const s=function(a){if(a.length!==0)return x3(_r.create(a,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const r=function(a){if(a.length!==0)return a.map(c=>function(u){return{field:ha(u.field),direction:_6(u.dir)}}(c))}(e.orderBy);r&&(t.structuredQuery.orderBy=r);const l=function(a,c){return a.wt||dm(c)?c:{value:c}}(n,e.limit);var o;return l!==null&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(o=e.startAt).inclusive,values:o.position}),e.endAt&&(t.structuredQuery.endAt=function(a){return{before:!a.inclusive,values:a.position}}(e.endAt)),t}function v6(n){let e=f6(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let s=null;if(i>0){qn(i===1);const u=t.from[0];u.allDescendants?s=u.collectionId:e=e.child(u.collectionId)}let r=[];t.where&&(r=function(u){const f=Z3(u);return f instanceof _r&&A3(f)?f.getFilters():[f]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(u=>function(f){return new Zc(da(f.field),function(h){switch(h){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(f.direction))}(u)));let o=null;t.limit&&(o=function(u){let f;return f=typeof u=="object"?u.value:u,dm(f)?null:f}(t.limit));let a=null;t.startAt&&(a=function(u){const f=!!u.before,h=u.values||[];return new Gh(h,f)}(t.startAt));let c=null;return t.endAt&&(c=function(u){const f=!u.before,h=u.values||[];return new Gh(h,f)}(t.endAt)),HB(e,s,l,r,o,"F",a,c)}function b6(n,e){const t=function(i,s){switch(s){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ht()}}(0,e.purpose);return t==null?null:{"goog-listen-tags":t}}function Z3(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=da(e.unaryFilter.field);return Si.create(t,"==",{doubleValue:NaN});case"IS_NULL":const i=da(e.unaryFilter.field);return Si.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=da(e.unaryFilter.field);return Si.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=da(e.unaryFilter.field);return Si.create(r,"!=",{nullValue:"NULL_VALUE"});default:return Ht()}}(n):n.fieldFilter!==void 0?function(e){return Si.create(da(e.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ht()}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return _r.create(e.compositeFilter.filters.map(t=>Z3(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Ht()}}(e.compositeFilter.op))}(n):Ht()}function _6(n){return l6[n]}function y6(n){return o6[n]}function S6(n){return a6[n]}function ha(n){return{fieldPath:n.canonicalString()}}function da(n){return is.fromServerFormat(n.fieldPath)}function x3(n){return n instanceof Si?function(e){if(e.op==="=="){if(S_(e.value))return{unaryFilter:{field:ha(e.field),op:"IS_NAN"}};if(y_(e.value))return{unaryFilter:{field:ha(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(S_(e.value))return{unaryFilter:{field:ha(e.field),op:"IS_NOT_NAN"}};if(y_(e.value))return{unaryFilter:{field:ha(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ha(e.field),op:y6(e.op),value:e.value}}}(n):n instanceof _r?function(e){const t=e.getFilters().map(i=>x3(i));return t.length===1?t[0]:{compositeFilter:{op:S6(e.op),filters:t}}}(n):Ht()}function E6(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function $3(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A6{constructor(e,t,i,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const r=this.mutations[s];r.key.isEqual(e.key)&&JB(r,e,i[s])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=xc(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=xc(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=z3();return this.mutations.forEach(s=>{const r=e.get(s.key),l=r.overlayedDocument;let o=this.applyToLocalView(l,r.mutatedFields);o=t.has(s.key)?null:o;const a=U3(l,o);a!==null&&i.set(s.key,a),l.isValidDocument()||l.convertToNoDocument(Yt.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),fn())}isEqual(e){return this.batchId===e.batchId&&La(this.mutations,e.mutations,(t,i)=>I_(t,i))&&La(this.baseMutations,e.baseMutations,(t,i)=>I_(t,i))}}class iv{constructor(e,t,i,s){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=s}static from(e,t,i){qn(e.mutations.length===i.length);let s=n6;const r=e.mutations;for(let l=0;l<r.length;l++)s=s.insert(r[l].key,i[l].version);return new iv(e,t,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e,t,i,s,r=Yt.min(),l=Yt.min(),o=fs.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=o}withSequenceNumber(e){return new ko(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new ko(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new ko(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C6{constructor(e){this.ie=e}}function k6(n){const e=v6({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Vg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T6{constructor(){this.Je=new I6}addToCollectionParentIndex(e,t){return this.Je.add(t),lt.resolve()}getCollectionParents(e,t){return lt.resolve(this.Je.getEntries(t))}addFieldIndex(e,t){return lt.resolve()}deleteFieldIndex(e,t){return lt.resolve()}getDocumentsMatchingTarget(e,t){return lt.resolve(null)}getIndexType(e,t){return lt.resolve(0)}getFieldIndexes(e,t){return lt.resolve([])}getNextCollectionGroupToUpdate(e){return lt.resolve(null)}getMinOffset(e,t){return lt.resolve(jl.min())}getMinOffsetFromCollectionGroup(e,t){return lt.resolve(jl.min())}updateCollectionGroup(e,t,i){return lt.resolve()}updateIndexEntries(e,t){return lt.resolve()}}class I6{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t]||new Ni(Zn.comparator),r=!s.has(i);return this.index[t]=s.add(i),r}has(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t];return s&&s.has(i)}getEntries(e){return(this.index[e]||new Ni(Zn.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Fa(0)}static vn(){return new Fa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6{constructor(){this.changes=new dc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ts.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?lt.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D6{constructor(e,t,i,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(i!==null&&xc(i.mutation,s,mr.empty(),fi.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,fn()).next(()=>i))}getLocalViewOfDocuments(e,t,i=fn()){const s=_o();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,i).next(r=>{let l=Vc();return r.forEach((o,a)=>{l=l.insert(o,a.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const i=_o();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,fn()))}populateOverlays(e,t,i){const s=[];return i.forEach(r=>{t.has(r)||s.push(r)}),this.documentOverlayCache.getOverlays(e,s).next(r=>{r.forEach((l,o)=>{t.set(l,o)})})}computeViews(e,t,i,s){let r=fl();const l=$c(),o=$c();return t.forEach((a,c)=>{const u=i.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof xo)?r=r.insert(c.key,c):u!==void 0?(l.set(c.key,u.mutation.getFieldMask()),xc(u.mutation,c,u.mutation.getFieldMask(),fi.now())):l.set(c.key,mr.empty())}),this.recalculateAndSaveOverlays(e,r).next(a=>(a.forEach((c,u)=>l.set(c,u)),t.forEach((c,u)=>{var f;return o.set(c,new R6(u,(f=l.get(c))!==null&&f!==void 0?f:null))}),o))}recalculateAndSaveOverlays(e,t){const i=$c();let s=new Bi((l,o)=>l-o),r=fn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const o of l)o.keys().forEach(a=>{const c=t.get(a);if(c===null)return;let u=i.get(a)||mr.empty();u=o.applyToLocalView(c,u),i.set(a,u);const f=(s.get(o.batchId)||fn()).add(a);s=s.insert(o.batchId,f)})}).next(()=>{const l=[],o=s.getReverseIterator();for(;o.hasNext();){const a=o.getNext(),c=a.key,u=a.value,f=z3();u.forEach(h=>{if(!r.has(h)){const d=U3(t.get(h),i.get(h));d!==null&&f.set(h,d),r=r.add(h)}}),l.push(this.documentOverlayCache.saveOverlays(e,c,f))}return lt.waitFor(l)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i){return function(s){return Mt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):O3(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i):this.getDocumentsMatchingCollectionQuery(e,t,i)}getNextDocuments(e,t,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,s).next(r=>{const l=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,s-r.size):lt.resolve(_o());let o=-1,a=r;return l.next(c=>lt.forEach(c,(u,f)=>(o<f.largestBatchId&&(o=f.largestBatchId),r.get(u)?lt.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{a=a.insert(u,h)}))).next(()=>this.populateOverlays(e,c,r)).next(()=>this.computeViews(e,a,c,fn())).next(u=>({batchId:o,changes:q3(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Mt(t)).next(i=>{let s=Vc();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,i){const s=t.collectionGroup;let r=Vc();return this.indexManager.getCollectionParents(e,s).next(l=>lt.forEach(l,o=>{const a=function(c,u){return new cf(u,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt)}(t,o.child(s));return this.getDocumentsMatchingCollectionQuery(e,a,i).next(c=>{c.forEach((u,f)=>{r=r.insert(u,f)})})}).next(()=>r))}getDocumentsMatchingCollectionQuery(e,t,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(r=>(s=r,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,s))).next(r=>{s.forEach((o,a)=>{const c=a.getKey();r.get(c)===null&&(r=r.insert(c,ts.newInvalidDocument(c)))});let l=Vc();return r.forEach((o,a)=>{const c=s.get(o);c!==void 0&&xc(c.mutation,a,mr.empty(),fi.now()),pm(t,a)&&(l=l.insert(o,a))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N6{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return lt.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var i;return this.Zn.set(t.id,{id:(i=t).id,version:i.version,createTime:Ur(i.createTime)}),lt.resolve()}getNamedQuery(e,t){return lt.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,function(i){return{name:i.name,query:k6(i.bundledQuery),readTime:Ur(i.readTime)}}(t)),lt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P6{constructor(){this.overlays=new Bi(Mt.comparator),this.es=new Map}getOverlay(e,t){return lt.resolve(this.overlays.get(t))}getOverlays(e,t){const i=_o();return lt.forEach(t,s=>this.getOverlay(e,s).next(r=>{r!==null&&i.set(s,r)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((s,r)=>{this.oe(e,t,r)}),lt.resolve()}removeOverlaysForBatchId(e,t,i){const s=this.es.get(i);return s!==void 0&&(s.forEach(r=>this.overlays=this.overlays.remove(r)),this.es.delete(i)),lt.resolve()}getOverlaysForCollection(e,t,i){const s=_o(),r=t.length+1,l=new Mt(t.child("")),o=this.overlays.getIteratorFrom(l);for(;o.hasNext();){const a=o.getNext().value,c=a.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===r&&a.largestBatchId>i&&s.set(a.getKey(),a)}return lt.resolve(s)}getOverlaysForCollectionGroup(e,t,i,s){let r=new Bi((c,u)=>c-u);const l=this.overlays.getIterator();for(;l.hasNext();){const c=l.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>i){let u=r.get(c.largestBatchId);u===null&&(u=_o(),r=r.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const o=_o(),a=r.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((c,u)=>o.set(c,u)),!(o.size()>=s)););return lt.resolve(o)}oe(e,t,i){const s=this.overlays.get(i.key);if(s!==null){const l=this.es.get(s.largestBatchId).delete(i.key);this.es.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new w6(t,i));let r=this.es.get(t);r===void 0&&(r=fn(),this.es.set(t,r)),this.es.set(t,r.add(i.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(){this.ns=new Ni(Fi.ss),this.rs=new Ni(Fi.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const i=new Fi(e,t);this.ns=this.ns.add(i),this.rs=this.rs.add(i)}us(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.cs(new Fi(e,t))}hs(e,t){e.forEach(i=>this.removeReference(i,t))}ls(e){const t=new Mt(new Zn([])),i=new Fi(t,e),s=new Fi(t,e+1),r=[];return this.rs.forEachInRange([i,s],l=>{this.cs(l),r.push(l.key)}),r}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Mt(new Zn([])),i=new Fi(t,e),s=new Fi(t,e+1);let r=fn();return this.rs.forEachInRange([i,s],l=>{r=r.add(l.key)}),r}containsKey(e){const t=new Fi(e,0),i=this.ns.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Fi{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Mt.comparator(e.key,t.key)||Dn(e._s,t._s)}static os(e,t){return Dn(e._s,t._s)||Mt.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M6{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new Ni(Fi.ss)}checkEmpty(e){return lt.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,s){const r=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new A6(r,t,i,s);this.mutationQueue.push(l);for(const o of s)this.gs=this.gs.add(new Fi(o.key,r)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return lt.resolve(l)}lookupMutationBatch(e,t){return lt.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,s=this.ps(i),r=s<0?0:s;return lt.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return lt.resolve(this.mutationQueue.length===0?-1:this.ws-1)}getAllMutationBatches(e){return lt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Fi(t,0),s=new Fi(t,Number.POSITIVE_INFINITY),r=[];return this.gs.forEachInRange([i,s],l=>{const o=this.ys(l._s);r.push(o)}),lt.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Ni(Dn);return t.forEach(s=>{const r=new Fi(s,0),l=new Fi(s,Number.POSITIVE_INFINITY);this.gs.forEachInRange([r,l],o=>{i=i.add(o._s)})}),lt.resolve(this.Is(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,s=i.length+1;let r=i;Mt.isDocumentKey(r)||(r=r.child(""));const l=new Fi(new Mt(r),0);let o=new Ni(Dn);return this.gs.forEachWhile(a=>{const c=a.key.path;return!!i.isPrefixOf(c)&&(c.length===s&&(o=o.add(a._s)),!0)},l),lt.resolve(this.Is(o))}Is(e){const t=[];return e.forEach(i=>{const s=this.ys(i);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){qn(this.Ts(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.gs;return lt.forEach(t.mutations,s=>{const r=new Fi(s.key,t.batchId);return i=i.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.gs=i})}An(e){}containsKey(e,t){const i=new Fi(t,0),s=this.gs.firstAfterOrEqual(i);return lt.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,lt.resolve()}Ts(e,t){return this.ps(e)}ps(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B6{constructor(e){this.Es=e,this.docs=new Bi(Mt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,s=this.docs.get(i),r=s?s.size:0,l=this.Es(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:l}),this.size+=l-r,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return lt.resolve(i?i.document.mutableCopy():ts.newInvalidDocument(t))}getEntries(e,t){let i=fl();return t.forEach(s=>{const r=this.docs.get(s);i=i.insert(s,r?r.document.mutableCopy():ts.newInvalidDocument(s))}),lt.resolve(i)}getDocumentsMatchingQuery(e,t,i,s){let r=fl();const l=t.path,o=new Mt(l.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:c,value:{document:u}}=a.getNext();if(!l.isPrefixOf(c.path))break;c.path.length>l.length+1||CB(wB(u),i)<=0||(s.has(u.key)||pm(t,u))&&(r=r.insert(u.key,u.mutableCopy()))}return lt.resolve(r)}getAllFromCollectionGroup(e,t,i,s){Ht()}As(e,t){return lt.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new L6(this)}getSize(e){return lt.resolve(this.size)}}class L6 extends O6{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?t.push(this.Yn.addEntry(e,s)):this.Yn.removeEntry(i)}),lt.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V6{constructor(e){this.persistence=e,this.Rs=new dc(t=>x0(t),$0),this.lastRemoteSnapshotVersion=Yt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new sv,this.targetCount=0,this.vs=Fa.Pn()}forEachTarget(e,t){return this.Rs.forEach((i,s)=>t(s)),lt.resolve()}getLastRemoteSnapshotVersion(e){return lt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return lt.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),lt.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.bs&&(this.bs=t),lt.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Fa(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,lt.resolve()}updateTargetData(e,t){return this.Dn(t),lt.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,lt.resolve()}removeTargets(e,t,i){let s=0;const r=[];return this.Rs.forEach((l,o)=>{o.sequenceNumber<=t&&i.get(o.targetId)===null&&(this.Rs.delete(l),r.push(this.removeMatchingKeysForTargetId(e,o.targetId)),s++)}),lt.waitFor(r).next(()=>s)}getTargetCount(e){return lt.resolve(this.targetCount)}getTargetData(e,t){const i=this.Rs.get(t)||null;return lt.resolve(i)}addMatchingKeys(e,t,i){return this.Ps.us(t,i),lt.resolve()}removeMatchingKeys(e,t,i){this.Ps.hs(t,i);const s=this.persistence.referenceDelegate,r=[];return s&&t.forEach(l=>{r.push(s.markPotentiallyOrphaned(e,l))}),lt.waitFor(r)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),lt.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Ps.ds(t);return lt.resolve(i)}containsKey(e,t){return lt.resolve(this.Ps.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U6{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new J0(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new V6(this),this.indexManager=new T6,this.remoteDocumentCache=function(i){return new B6(i)}(i=>this.referenceDelegate.xs(i)),this.yt=new C6(t),this.Ns=new N6(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new P6,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Vs[e.toKey()];return i||(i=new M6(t,this.referenceDelegate),this.Vs[e.toKey()]=i),i}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,i){Nt("MemoryPersistence","Starting transaction:",e);const s=new W6(this.Ss.next());return this.referenceDelegate.ks(),i(s).next(r=>this.referenceDelegate.Os(s).next(()=>r)).toPromise().then(r=>(s.raiseOnCommittedEvent(),r))}Ms(e,t){return lt.or(Object.values(this.Vs).map(i=>()=>i.containsKey(e,t)))}}class W6 extends TB{constructor(e){super(),this.currentSequenceNumber=e}}class rv{constructor(e){this.persistence=e,this.Fs=new sv,this.$s=null}static Bs(e){return new rv(e)}get Ls(){if(this.$s)return this.$s;throw Ht()}addReference(e,t,i){return this.Fs.addReference(i,t),this.Ls.delete(i.toString()),lt.resolve()}removeReference(e,t,i){return this.Fs.removeReference(i,t),this.Ls.add(i.toString()),lt.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),lt.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(s=>this.Ls.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(r=>this.Ls.add(r.toString()))}).next(()=>i.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return lt.forEach(this.Ls,i=>{const s=Mt.fromPath(i);return this.qs(e,s).next(r=>{r||t.removeEntry(s,Yt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.qs(e,t).next(i=>{i?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}qs(e,t){return lt.or([()=>lt.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(e,t,i,s){this.targetId=e,this.fromCache=t,this.Si=i,this.Di=s}static Ci(e,t){let i=fn(),s=fn();for(const r of t.docChanges)switch(r.type){case 0:i=i.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new lv(e,t.fromCache,i,s)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F6{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,i,s){return this.ki(e,t).next(r=>r||this.Oi(e,t,s,i)).next(r=>r||this.Mi(e,t))}ki(e,t){if(k_(t))return lt.resolve(null);let i=ul(t);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=Vg(t,null,"F"),i=ul(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(r=>{const l=fn(...r);return this.Ni.getDocuments(e,l).next(o=>this.indexManager.getMinOffset(e,i).next(a=>{const c=this.Fi(t,o);return this.$i(t,c,l,a.readTime)?this.ki(e,Vg(t,null,"F")):this.Bi(e,c,t,a)}))})))}Oi(e,t,i,s){return k_(t)||s.isEqual(Yt.min())?this.Mi(e,t):this.Ni.getDocuments(e,i).next(r=>{const l=this.Fi(t,r);return this.$i(t,l,i,s)?this.Mi(e,t):(g_()<=Rn.DEBUG&&Nt("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ug(t)),this.Bi(e,l,t,AB(s,-1)))})}Fi(e,t){let i=new Ni(D3(e));return t.forEach((s,r)=>{pm(e,r)&&(i=i.add(r))}),i}$i(e,t,i,s){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const r=e.limitType==="F"?t.last():t.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}Mi(e,t){return g_()<=Rn.DEBUG&&Nt("QueryEngine","Using full collection scan to execute query:",Ug(t)),this.Ni.getDocumentsMatchingQuery(e,t,jl.min())}Bi(e,t,i,s){return this.Ni.getDocumentsMatchingQuery(e,i,s).next(r=>(t.forEach(l=>{r=r.insert(l.key,l)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j6{constructor(e,t,i,s){this.persistence=e,this.Li=t,this.yt=s,this.qi=new Bi(Dn),this.Ui=new dc(r=>x0(r),$0),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(i)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new D6(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qi))}}function H6(n,e,t,i){return new j6(n,e,t,i)}async function e4(n,e){const t=Zt(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let s;return t.mutationQueue.getAllMutationBatches(i).next(r=>(s=r,t.Qi(e),t.mutationQueue.getAllMutationBatches(i))).next(r=>{const l=[],o=[];let a=fn();for(const c of s){l.push(c.batchId);for(const u of c.mutations)a=a.add(u.key)}for(const c of r){o.push(c.batchId);for(const u of c.mutations)a=a.add(u.key)}return t.localDocuments.getDocuments(i,a).next(c=>({ji:c,removedBatchIds:l,addedBatchIds:o}))})})}function q6(n,e){const t=Zt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),r=t.Gi.newChangeBuffer({trackRemovals:!0});return function(l,o,a,c){const u=a.batch,f=u.keys();let h=lt.resolve();return f.forEach(d=>{h=h.next(()=>c.getEntry(o,d)).next(p=>{const v=a.docVersions.get(d);qn(v!==null),p.version.compareTo(v)<0&&(u.applyToRemoteDocument(p,a),p.isValidDocument()&&(p.setReadTime(a.commitVersion),c.addEntry(p)))})}),h.next(()=>l.mutationQueue.removeMutationBatch(o,u))}(t,i,e,r).next(()=>r.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let o=fn();for(let a=0;a<l.mutationResults.length;++a)l.mutationResults[a].transformResults.length>0&&(o=o.add(l.batch.mutations[a].key));return o}(e))).next(()=>t.localDocuments.getDocuments(i,s))})}function t4(n){const e=Zt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function z6(n,e){const t=Zt(n),i=e.snapshotVersion;let s=t.qi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const l=t.Gi.newChangeBuffer({trackRemovals:!0});s=t.qi;const o=[];e.targetChanges.forEach((u,f)=>{const h=s.get(f);if(!h)return;o.push(t.Cs.removeMatchingKeys(r,u.removedDocuments,f).next(()=>t.Cs.addMatchingKeys(r,u.addedDocuments,f)));let d=h.withSequenceNumber(r.currentSequenceNumber);e.targetMismatches.has(f)?d=d.withResumeToken(fs.EMPTY_BYTE_STRING,Yt.min()).withLastLimboFreeSnapshotVersion(Yt.min()):u.resumeToken.approximateByteSize()>0&&(d=d.withResumeToken(u.resumeToken,i)),s=s.insert(f,d),function(p,v,y){return p.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(h,d,u)&&o.push(t.Cs.updateTargetData(r,d))});let a=fl(),c=fn();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&o.push(t.persistence.referenceDelegate.updateLimboDocument(r,u))}),o.push(G6(r,l,e.documentUpdates).next(u=>{a=u.Wi,c=u.zi})),!i.isEqual(Yt.min())){const u=t.Cs.getLastRemoteSnapshotVersion(r).next(f=>t.Cs.setTargetsMetadata(r,r.currentSequenceNumber,i));o.push(u)}return lt.waitFor(o).next(()=>l.apply(r)).next(()=>t.localDocuments.getLocalViewOfDocuments(r,a,c)).next(()=>a)}).then(r=>(t.qi=s,r))}function G6(n,e,t){let i=fn(),s=fn();return t.forEach(r=>i=i.add(r)),e.getEntries(n,i).next(r=>{let l=fl();return t.forEach((o,a)=>{const c=r.get(o);a.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(o)),a.isNoDocument()&&a.version.isEqual(Yt.min())?(e.removeEntry(o,a.readTime),l=l.insert(o,a)):!c.isValidDocument()||a.version.compareTo(c.version)>0||a.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(a),l=l.insert(o,a)):Nt("LocalStore","Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",a.version)}),{Wi:l,zi:s}})}function K6(n,e){const t=Zt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Q6(n,e){const t=Zt(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return t.Cs.getTargetData(i,e).next(r=>r?(s=r,lt.resolve(s)):t.Cs.allocateTargetId(i).next(l=>(s=new ko(e,l,0,i.currentSequenceNumber),t.Cs.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=t.qi.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.qi=t.qi.insert(i.targetId,i),t.Ui.set(e,i.targetId)),i})}async function Hg(n,e,t){const i=Zt(n),s=i.qi.get(e),r=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",r,l=>i.persistence.referenceDelegate.removeTarget(l,s))}catch(l){if(!af(l))throw l;Nt("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}i.qi=i.qi.remove(e),i.Ui.delete(s.target)}function B_(n,e,t){const i=Zt(n);let s=Yt.min(),r=fn();return i.persistence.runTransaction("Execute query","readonly",l=>function(o,a,c){const u=Zt(o),f=u.Ui.get(c);return f!==void 0?lt.resolve(u.qi.get(f)):u.Cs.getTargetData(a,c)}(i,l,ul(e)).next(o=>{if(o)return s=o.lastLimboFreeSnapshotVersion,i.Cs.getMatchingKeysForTargetId(l,o.targetId).next(a=>{r=a})}).next(()=>i.Li.getDocumentsMatchingQuery(l,e,t?s:Yt.min(),t?r:fn())).next(o=>(X6(i,qB(e),o),{documents:o,Hi:r})))}function X6(n,e,t){let i=n.Ki.get(e)||Yt.min();t.forEach((s,r)=>{r.readTime.compareTo(i)>0&&(i=r.readTime)}),n.Ki.set(e,i)}class L_{constructor(){this.activeTargetIds=G3()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Y6{constructor(){this.Lr=new L_,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,t,i){this.qr[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new L_,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J6{Ur(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Nt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Nt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x6{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $6 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.oo=t+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,i,s,r){const l=this.ho(e,t);Nt("RestConnection","Sending: ",l,i);const o={};return this.lo(o,s,r),this.fo(e,l,o,i).then(a=>(Nt("RestConnection","Received: ",a),a),a=>{throw Dg("RestConnection",`${e} failed with error: `,a,"url: ",l,"request:",i),a})}_o(e,t,i,s,r,l){return this.ao(e,t,i,s,r)}lo(e,t,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+fc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,r)=>e[r]=s),i&&i.headers.forEach((s,r)=>e[r]=s)}ho(e,t){const i=Z6[e];return`${this.oo}/v1/${t}:${i}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,i,s){return new Promise((r,l)=>{const o=new dB;o.setWithCredentials(!0),o.listenOnce(uB.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case _p.NO_ERROR:const c=o.getResponseJson();Nt("Connection","XHR received:",JSON.stringify(c)),r(c);break;case _p.TIMEOUT:Nt("Connection",'RPC "'+e+'" timed out'),l(new It($e.DEADLINE_EXCEEDED,"Request time out"));break;case _p.HTTP_ERROR:const u=o.getStatus();if(Nt("Connection",'RPC "'+e+'" failed with status:',u,"response text:",o.getResponseText()),u>0){let f=o.getResponseJson();Array.isArray(f)&&(f=f[0]);const h=f==null?void 0:f.error;if(h&&h.status&&h.message){const d=function(p){const v=p.toLowerCase().replace(/_/g,"-");return Object.values($e).indexOf(v)>=0?v:$e.UNKNOWN}(h.status);l(new It(d,h.message))}else l(new It($e.UNKNOWN,"Server responded with status "+o.getStatus()))}else l(new It($e.UNAVAILABLE,"Connection failed."));break;default:Ht()}}finally{Nt("Connection",'RPC "'+e+'" completed.')}});const a=JSON.stringify(s);o.send(t,"POST",a,i,15)})}wo(e,t,i){const s=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=aB(),l=cB(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new hB({})),this.lo(o.initMessageHeaders,t,i),o.encodeInitMessageHeaders=!0;const a=s.join("");Nt("Connection","Creating WebChannel: "+a,o);const c=r.createWebChannel(a,o);let u=!1,f=!1;const h=new x6({Hr:p=>{f?Nt("Connection","Not sending because WebChannel is closed:",p):(u||(Nt("Connection","Opening WebChannel transport."),c.open(),u=!0),Nt("Connection","WebChannel sending:",p),c.send(p))},Jr:()=>c.close()}),d=(p,v,y)=>{p.listen(v,b=>{try{y(b)}catch(S){setTimeout(()=>{throw S},0)}})};return d(c,Pf.EventType.OPEN,()=>{f||Nt("Connection","WebChannel transport opened.")}),d(c,Pf.EventType.CLOSE,()=>{f||(f=!0,Nt("Connection","WebChannel transport closed"),h.io())}),d(c,Pf.EventType.ERROR,p=>{f||(f=!0,Dg("Connection","WebChannel transport errored:",p),h.io(new It($e.UNAVAILABLE,"The operation could not be completed")))}),d(c,Pf.EventType.MESSAGE,p=>{var v;if(!f){const y=p.data[0];qn(!!y);const b=y,S=b.error||((v=b[0])===null||v===void 0?void 0:v.error);if(S){Nt("Connection","WebChannel received error:",S);const I=S.status;let T=function(k){const R=bi[k];if(R!==void 0)return j3(R)}(I),C=S.message;T===void 0&&(T=$e.INTERNAL,C="Unknown error status: "+I+" with message "+S.message),f=!0,h.io(new It(T,C)),c.close()}else Nt("Connection","WebChannel received:",y),h.ro(y)}}),d(l,fB.STAT_EVENT,p=>{p.stat===m_.PROXY?Nt("Connection","Detected buffering proxy"):p.stat===m_.NOPROXY&&Nt("Connection","Detected no buffering proxy")}),setTimeout(()=>{h.so()},0),h}}function Sp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _m(n){return new c6(n,!0)}class n4{constructor(e,t,i=1e3,s=1.5,r=6e4){this.Hs=e,this.timerId=t,this.mo=i,this.yo=s,this.po=r,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),i=Math.max(0,Date.now()-this.Eo),s=Math.max(0,t-i);s>0&&Nt("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,s,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){this.To!==null&&(this.To.skipDelay(),this.To=null)}cancel(){this.To!==null&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(e,t,i,s,r,l,o,a){this.Hs=e,this.vo=i,this.Vo=s,this.connection=r,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new n4(e,t)}No(){return this.state===1||this.state===5||this.ko()}ko(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Oo()}async stop(){this.No()&&await this.close(0)}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&this.Do===null&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}async $o(){if(this.ko())return this.close(0)}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}async close(e,t){this.Lo(),this.qo(),this.xo.cancel(),this.So++,e!==4?this.xo.reset():t&&t.code===$e.RESOURCE_EXHAUSTED?(cl(t.toString()),cl("Using maximum backoff delay to prevent overloading the backend."),this.xo.Ao()):t&&t.code===$e.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Uo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zr(t)}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.So===t&&this.Go(i,s)},i=>{e(()=>{const s=new It($e.UNKNOWN,"Fetching auth token failed: "+i.message);return this.Qo(s)})})}Go(e,t){const i=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{i(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(s=>{i(()=>this.Qo(s))}),this.stream.onMessage(s=>{i(()=>this.onMessage(s))})}Oo(){this.state=5,this.xo.Ro(async()=>{this.state=0,this.start()})}Qo(e){return Nt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Nt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class eL extends i4{constructor(e,t,i,s,r,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,s,l),this.yt=r}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=h6(this.yt,e),i=function(s){if(!("targetChange"in s))return Yt.min();const r=s.targetChange;return r.targetIds&&r.targetIds.length?Yt.min():r.readTime?Ur(r.readTime):Yt.min()}(e);return this.listener.Wo(t,i)}zo(e){const t={};t.database=jg(this.yt),t.addTarget=function(s,r){let l;const o=r.target;return l=Bg(o)?{documents:p6(s,o)}:{query:g6(s,o)},l.targetId=r.targetId,r.resumeToken.approximateByteSize()>0?l.resumeToken=X3(s,r.resumeToken):r.snapshotVersion.compareTo(Yt.min())>0&&(l.readTime=Xh(s,r.snapshotVersion.toTimestamp())),l}(this.yt,e);const i=b6(this.yt,e);i&&(t.labels=i),this.Bo(t)}Ho(e){const t={};t.database=jg(this.yt),t.removeTarget=e,this.Bo(t)}}class tL extends i4{constructor(e,t,i,s,r,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,s,l),this.yt=r,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(qn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=m6(e.writeResults,e.commitTime),i=Ur(e.commitTime);return this.listener.Zo(i,t)}return qn(!e.writeResults||e.writeResults.length===0),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=jg(this.yt),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>d6(this.yt,i))};this.Bo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nL extends class{}{constructor(e,t,i,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.yt=s,this.nu=!1}su(){if(this.nu)throw new It($e.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,r])=>this.connection.ao(e,t,i,s,r)).catch(s=>{throw s.name==="FirebaseError"?(s.code===$e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new It($e.UNKNOWN,s.toString())})}_o(e,t,i,s){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,l])=>this.connection._o(e,t,i,r,l,s)).catch(r=>{throw r.name==="FirebaseError"?(r.code===$e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new It($e.UNKNOWN,r.toString())})}terminate(){this.nu=!0}}class iL{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){this.iu===0&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){this.state==="Online"?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,e==="Online"&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(cl(t),this.ou=!1):Nt("OnlineStateTracker",t)}lu(){this.ru!==null&&(this.ru.cancel(),this.ru=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{constructor(e,t,i,s,r){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=r,this.mu.Ur(l=>{i.enqueueAndForget(async()=>{$o(this)&&(Nt("RemoteStore","Restarting streams for network reachability change."),await async function(o){const a=Zt(o);a._u.add(4),await hf(a),a.gu.set("Unknown"),a._u.delete(4),await ym(a)}(this))})}),this.gu=new iL(i,s)}}async function ym(n){if($o(n))for(const e of n.wu)await e(!0)}async function hf(n){for(const e of n.wu)await e(!1)}function s4(n,e){const t=Zt(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),cv(t)?av(t):mc(t).ko()&&ov(t,e))}function r4(n,e){const t=Zt(n),i=mc(t);t.du.delete(e),i.ko()&&l4(t,e),t.du.size===0&&(i.ko()?i.Fo():$o(t)&&t.gu.set("Unknown"))}function ov(n,e){n.yu.Ot(e.targetId),mc(n).zo(e)}function l4(n,e){n.yu.Ot(e),mc(n).Ho(e)}function av(n){n.yu=new r6({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>n.du.get(e)||null}),mc(n).start(),n.gu.uu()}function cv(n){return $o(n)&&!mc(n).No()&&n.du.size>0}function $o(n){return Zt(n)._u.size===0}function o4(n){n.yu=void 0}async function rL(n){n.du.forEach((e,t)=>{ov(n,e)})}async function lL(n,e){o4(n),cv(n)?(n.gu.hu(e),av(n)):n.gu.set("Unknown")}async function oL(n,e,t){if(n.gu.set("Online"),e instanceof Q3&&e.state===2&&e.cause)try{await async function(i,s){const r=s.cause;for(const l of s.targetIds)i.du.has(l)&&(await i.remoteSyncer.rejectListen(l,r),i.du.delete(l),i.yu.removeTarget(l))}(n,e)}catch(i){Nt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Yh(n,i)}else if(e instanceof ph?n.yu.Kt(e):e instanceof K3?n.yu.Jt(e):n.yu.jt(e),!t.isEqual(Yt.min()))try{const i=await t4(n.localStore);t.compareTo(i)>=0&&await function(s,r){const l=s.yu.Zt(r);return l.targetChanges.forEach((o,a)=>{if(o.resumeToken.approximateByteSize()>0){const c=s.du.get(a);c&&s.du.set(a,c.withResumeToken(o.resumeToken,r))}}),l.targetMismatches.forEach(o=>{const a=s.du.get(o);if(!a)return;s.du.set(o,a.withResumeToken(fs.EMPTY_BYTE_STRING,a.snapshotVersion)),l4(s,o);const c=new ko(a.target,o,1,a.sequenceNumber);ov(s,c)}),s.remoteSyncer.applyRemoteEvent(l)}(n,t)}catch(i){Nt("RemoteStore","Failed to raise snapshot:",i),await Yh(n,i)}}async function Yh(n,e,t){if(!af(e))throw e;n._u.add(1),await hf(n),n.gu.set("Offline"),t||(t=()=>t4(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Nt("RemoteStore","Retrying IndexedDB access"),await t(),n._u.delete(1),await ym(n)})}function a4(n,e){return e().catch(t=>Yh(n,t,e))}async function Sm(n){const e=Zt(n),t=ql(e);let i=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;aL(e);)try{const s=await K6(e.localStore,i);if(s===null){e.fu.length===0&&t.Fo();break}i=s.batchId,cL(e,s)}catch(s){await Yh(e,s)}c4(e)&&u4(e)}function aL(n){return $o(n)&&n.fu.length<10}function cL(n,e){n.fu.push(e);const t=ql(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function c4(n){return $o(n)&&!ql(n).No()&&n.fu.length>0}function u4(n){ql(n).start()}async function uL(n){ql(n).eu()}async function fL(n){const e=ql(n);for(const t of n.fu)e.Xo(t.mutations)}async function hL(n,e,t){const i=n.fu.shift(),s=iv.from(i,e,t);await a4(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await Sm(n)}async function dL(n,e){e&&ql(n).Yo&&await async function(t,i){if(s=i.code,e6(s)&&s!==$e.ABORTED){const r=t.fu.shift();ql(t).Mo(),await a4(t,()=>t.remoteSyncer.rejectFailedWrite(r.batchId,i)),await Sm(t)}var s}(n,e),c4(n)&&u4(n)}async function U_(n,e){const t=Zt(n);t.asyncQueue.verifyOperationInProgress(),Nt("RemoteStore","RemoteStore received new credentials");const i=$o(t);t._u.add(3),await hf(t),i&&t.gu.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),await ym(t)}async function mL(n,e){const t=Zt(n);e?(t._u.delete(2),await ym(t)):e||(t._u.add(2),await hf(t),t.gu.set("Unknown"))}function mc(n){return n.pu||(n.pu=function(e,t,i){const s=Zt(e);return s.su(),new eL(t,s.connection,s.authCredentials,s.appCheckCredentials,s.yt,i)}(n.datastore,n.asyncQueue,{Yr:rL.bind(null,n),Zr:lL.bind(null,n),Wo:oL.bind(null,n)}),n.wu.push(async e=>{e?(n.pu.Mo(),cv(n)?av(n):n.gu.set("Unknown")):(await n.pu.stop(),o4(n))})),n.pu}function ql(n){return n.Iu||(n.Iu=function(e,t,i){const s=Zt(e);return s.su(),new tL(t,s.connection,s.authCredentials,s.appCheckCredentials,s.yt,i)}(n.datastore,n.asyncQueue,{Yr:uL.bind(null,n),Zr:dL.bind(null,n),tu:fL.bind(null,n),Zo:hL.bind(null,n)}),n.wu.push(async e=>{e?(n.Iu.Mo(),await Sm(n)):(await n.Iu.stop(),n.fu.length>0&&(Nt("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))})),n.Iu}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(e,t,i,s,r){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=s,this.removalCallback=r,this.deferred=new Co,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,i,s,r){const l=Date.now()+i,o=new uv(e,t,l,s,r);return o.start(i),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new It($e.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fv(n,e){if(cl("AsyncQueue",`${e}: ${n}`),af(n))return new It($e.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e){this.comparator=e?(t,i)=>e(t,i)||Mt.comparator(t.key,i.key):(t,i)=>Mt.comparator(t.key,i.key),this.keyedMap=Vc(),this.sortedSet=new Bi(this.comparator)}static emptySet(e){return new Ca(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ca)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,r=i.getNext().key;if(!s.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Ca;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(){this.Tu=new Bi(Mt.comparator)}track(e){const t=e.doc.key,i=this.Tu.get(t);i?e.type!==0&&i.type===3?this.Tu=this.Tu.insert(t,e):e.type===3&&i.type!==1?this.Tu=this.Tu.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.Tu=this.Tu.remove(t):e.type===1&&i.type===2?this.Tu=this.Tu.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):Ht():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,i)=>{e.push(i)}),e}}class ja{constructor(e,t,i,s,r,l,o,a,c){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=r,this.fromCache=l,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(e,t,i,s,r){const l=[];return t.forEach(o=>{l.push({type:0,doc:o})}),new ja(e,t,Ca.emptySet(t),l,i,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&mm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==i[s].type||!t[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL{constructor(){this.Au=void 0,this.listeners=[]}}class gL{constructor(){this.queries=new dc(e=>R3(e),mm),this.onlineState="Unknown",this.Ru=new Set}}async function vL(n,e){const t=Zt(n),i=e.query;let s=!1,r=t.queries.get(i);if(r||(s=!0,r=new pL),s)try{r.Au=await t.onListen(i)}catch(l){const o=fv(l,`Initialization of query '${Ug(e.query)}' failed`);return void e.onError(o)}t.queries.set(i,r),r.listeners.push(e),e.bu(t.onlineState),r.Au&&e.Pu(r.Au)&&hv(t)}async function bL(n,e){const t=Zt(n),i=e.query;let s=!1;const r=t.queries.get(i);if(r){const l=r.listeners.indexOf(e);l>=0&&(r.listeners.splice(l,1),s=r.listeners.length===0)}if(s)return t.queries.delete(i),t.onUnlisten(i)}function _L(n,e){const t=Zt(n);let i=!1;for(const s of e){const r=s.query,l=t.queries.get(r);if(l){for(const o of l.listeners)o.Pu(s)&&(i=!0);l.Au=s}}i&&hv(t)}function yL(n,e,t){const i=Zt(n),s=i.queries.get(e);if(s)for(const r of s.listeners)r.onError(t);i.queries.delete(e)}function hv(n){n.Ru.forEach(e=>{e.next()})}class SL{constructor(e,t,i){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=i||{}}Pu(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new ja(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){if(!e.fromCache)return!0;const i=t!=="Offline";return(!this.options.Nu||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Du(e){if(e.docChanges.length>0)return!0;const t=this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}xu(e){e=ja.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{constructor(e){this.key=e}}class h4{constructor(e){this.key=e}}class EL{constructor(e,t){this.query=e,this.qu=t,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=fn(),this.mutatedKeys=fn(),this.Gu=D3(e),this.Qu=new Ca(this.Gu)}get ju(){return this.qu}Wu(e,t){const i=t?t.zu:new W_,s=t?t.Qu:this.Qu;let r=t?t.mutatedKeys:this.mutatedKeys,l=s,o=!1;const a=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((u,f)=>{const h=s.get(u),d=pm(this.query,f)?f:null,p=!!h&&this.mutatedKeys.has(h.key),v=!!d&&(d.hasLocalMutations||this.mutatedKeys.has(d.key)&&d.hasCommittedMutations);let y=!1;h&&d?h.data.isEqual(d.data)?p!==v&&(i.track({type:3,doc:d}),y=!0):this.Hu(h,d)||(i.track({type:2,doc:d}),y=!0,(a&&this.Gu(d,a)>0||c&&this.Gu(d,c)<0)&&(o=!0)):!h&&d?(i.track({type:0,doc:d}),y=!0):h&&!d&&(i.track({type:1,doc:h}),y=!0,(a||c)&&(o=!0)),y&&(d?(l=l.add(d),r=v?r.add(u):r.delete(u)):(l=l.delete(u),r=r.delete(u)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const u=this.query.limitType==="F"?l.last():l.first();l=l.delete(u.key),r=r.delete(u.key),i.track({type:1,doc:u})}return{Qu:l,zu:i,$i:o,mutatedKeys:r}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i){const s=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const r=e.zu.Eu();r.sort((c,u)=>function(f,h){const d=p=>{switch(p){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ht()}};return d(f)-d(h)}(c.type,u.type)||this.Gu(c.doc,u.doc)),this.Ju(i);const l=t?this.Yu():[],o=this.Ku.size===0&&this.current?1:0,a=o!==this.Uu;return this.Uu=o,r.length!==0||a?{snapshot:new ja(this.query,e.Qu,s,r,e.mutatedKeys,o===0,a,!1,!!i&&i.resumeToken.approximateByteSize()>0),Xu:l}:{Xu:l}}bu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new W_,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.qu=this.qu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qu=this.qu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=fn(),this.Qu.forEach(i=>{this.Zu(i.key)&&(this.Ku=this.Ku.add(i.key))});const t=[];return e.forEach(i=>{this.Ku.has(i)||t.push(new h4(i))}),this.Ku.forEach(i=>{e.has(i)||t.push(new f4(i))}),t}tc(e){this.qu=e.Hi,this.Ku=fn();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return ja.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,this.Uu===0,this.hasCachedResults)}}class AL{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class wL{constructor(e){this.key=e,this.nc=!1}}class CL{constructor(e,t,i,s,r,l){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=l,this.sc={},this.ic=new dc(o=>R3(o),mm),this.rc=new Map,this.oc=new Set,this.uc=new Bi(Mt.comparator),this.cc=new Map,this.ac=new sv,this.hc={},this.lc=new Map,this.fc=Fa.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return this.dc===!0}}async function kL(n,e){const t=LL(n);let i,s;const r=t.ic.get(e);if(r)i=r.targetId,t.sharedClientState.addLocalQueryTarget(i),s=r.view.ec();else{const l=await Q6(t.localStore,ul(e));t.isPrimaryClient&&s4(t.remoteStore,l);const o=t.sharedClientState.addLocalQueryTarget(l.targetId);i=l.targetId,s=await TL(t,e,i,o==="current",l.resumeToken)}return s}async function TL(n,e,t,i,s){n._c=(f,h,d)=>async function(p,v,y,b){let S=v.view.Wu(y);S.$i&&(S=await B_(p.localStore,v.query,!1).then(({documents:C})=>v.view.Wu(C,S)));const I=b&&b.targetChanges.get(v.targetId),T=v.view.applyChanges(S,p.isPrimaryClient,I);return j_(p,v.targetId,T.Xu),T.snapshot}(n,f,h,d);const r=await B_(n.localStore,e,!0),l=new EL(e,r.Hi),o=l.Wu(r.documents),a=ff.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",s),c=l.applyChanges(o,n.isPrimaryClient,a);j_(n,t,c.Xu);const u=new AL(e,t,l);return n.ic.set(e,u),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),c.snapshot}async function IL(n,e){const t=Zt(n),i=t.ic.get(e),s=t.rc.get(i.targetId);if(s.length>1)return t.rc.set(i.targetId,s.filter(r=>!mm(r,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(i.targetId),t.sharedClientState.isActiveQueryTarget(i.targetId)||await Hg(t.localStore,i.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(i.targetId),r4(t.remoteStore,i.targetId),qg(t,i.targetId)}).catch(of)):(qg(t,i.targetId),await Hg(t.localStore,i.targetId,!0))}async function OL(n,e,t){const i=VL(n);try{const s=await function(r,l){const o=Zt(r),a=fi.now(),c=l.reduce((h,d)=>h.add(d.key),fn());let u,f;return o.persistence.runTransaction("Locally write mutations","readwrite",h=>{let d=fl(),p=fn();return o.Gi.getEntries(h,c).next(v=>{d=v,d.forEach((y,b)=>{b.isValidDocument()||(p=p.add(y))})}).next(()=>o.localDocuments.getOverlayedDocuments(h,d)).next(v=>{u=v;const y=[];for(const b of l){const S=ZB(b,u.get(b.key).overlayedDocument);S!=null&&y.push(new xo(b.key,S,T3(S.value.mapValue),ll.exists(!0)))}return o.mutationQueue.addMutationBatch(h,a,y,l)}).next(v=>{f=v;const y=v.applyToLocalDocumentSet(u,p);return o.documentOverlayCache.saveOverlays(h,v.batchId,y)})}).then(()=>({batchId:f.batchId,changes:q3(u)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(r,l,o){let a=r.hc[r.currentUser.toKey()];a||(a=new Bi(Dn)),a=a.insert(l,o),r.hc[r.currentUser.toKey()]=a}(i,s.batchId,t),await df(i,s.changes),await Sm(i.remoteStore)}catch(s){const r=fv(s,"Failed to persist write");t.reject(r)}}async function d4(n,e){const t=Zt(n);try{const i=await z6(t.localStore,e);e.targetChanges.forEach((s,r)=>{const l=t.cc.get(r);l&&(qn(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.nc=!0:s.modifiedDocuments.size>0?qn(l.nc):s.removedDocuments.size>0&&(qn(l.nc),l.nc=!1))}),await df(t,i,e)}catch(i){await of(i)}}function F_(n,e,t){const i=Zt(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const s=[];i.ic.forEach((r,l)=>{const o=l.view.bu(e);o.snapshot&&s.push(o.snapshot)}),function(r,l){const o=Zt(r);o.onlineState=l;let a=!1;o.queries.forEach((c,u)=>{for(const f of u.listeners)f.bu(l)&&(a=!0)}),a&&hv(o)}(i.eventManager,e),s.length&&i.sc.Wo(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function RL(n,e,t){const i=Zt(n);i.sharedClientState.updateQueryState(e,"rejected",t);const s=i.cc.get(e),r=s&&s.key;if(r){let l=new Bi(Mt.comparator);l=l.insert(r,ts.newNoDocument(r,Yt.min()));const o=fn().add(r),a=new bm(Yt.min(),new Map,new Ni(Dn),l,o);await d4(i,a),i.uc=i.uc.remove(r),i.cc.delete(e),dv(i)}else await Hg(i.localStore,e,!1).then(()=>qg(i,e,t)).catch(of)}async function DL(n,e){const t=Zt(n),i=e.batch.batchId;try{const s=await q6(t.localStore,e);p4(t,i,null),m4(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await df(t,s)}catch(s){await of(s)}}async function NL(n,e,t){const i=Zt(n);try{const s=await function(r,l){const o=Zt(r);return o.persistence.runTransaction("Reject batch","readwrite-primary",a=>{let c;return o.mutationQueue.lookupMutationBatch(a,l).next(u=>(qn(u!==null),c=u.keys(),o.mutationQueue.removeMutationBatch(a,u))).next(()=>o.mutationQueue.performConsistencyCheck(a)).next(()=>o.documentOverlayCache.removeOverlaysForBatchId(a,c,l)).next(()=>o.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,c)).next(()=>o.localDocuments.getDocuments(a,c))})}(i.localStore,e);p4(i,e,t),m4(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await df(i,s)}catch(s){await of(s)}}function m4(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function p4(n,e,t){const i=Zt(n);let s=i.hc[i.currentUser.toKey()];if(s){const r=s.get(e);r&&(t?r.reject(t):r.resolve(),s=s.remove(e)),i.hc[i.currentUser.toKey()]=s}}function qg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.rc.get(e))n.ic.delete(i),t&&n.sc.wc(i,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(i=>{n.ac.containsKey(i)||g4(n,i)})}function g4(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);t!==null&&(r4(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),dv(n))}function j_(n,e,t){for(const i of t)i instanceof f4?(n.ac.addReference(i.key,e),PL(n,i)):i instanceof h4?(Nt("SyncEngine","Document no longer in limbo: "+i.key),n.ac.removeReference(i.key,e),n.ac.containsKey(i.key)||g4(n,i.key)):Ht()}function PL(n,e){const t=e.key,i=t.path.canonicalString();n.uc.get(t)||n.oc.has(i)||(Nt("SyncEngine","New document in limbo: "+t),n.oc.add(i),dv(n))}function dv(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new Mt(Zn.fromString(e)),i=n.fc.next();n.cc.set(i,new wL(t)),n.uc=n.uc.insert(t,i),s4(n.remoteStore,new ko(ul(ev(t.path)),i,2,J0.at))}}async function df(n,e,t){const i=Zt(n),s=[],r=[],l=[];i.ic.isEmpty()||(i.ic.forEach((o,a)=>{l.push(i._c(a,e,t).then(c=>{if((c||t)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(a.targetId,c!=null&&c.fromCache?"not-current":"current"),c){s.push(c);const u=lv.Ci(a.targetId,c);r.push(u)}}))}),await Promise.all(l),i.sc.Wo(s),await async function(o,a){const c=Zt(o);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",u=>lt.forEach(a,f=>lt.forEach(f.Si,h=>c.persistence.referenceDelegate.addReference(u,f.targetId,h)).next(()=>lt.forEach(f.Di,h=>c.persistence.referenceDelegate.removeReference(u,f.targetId,h)))))}catch(u){if(!af(u))throw u;Nt("LocalStore","Failed to update sequence numbers: "+u)}for(const u of a){const f=u.targetId;if(!u.fromCache){const h=c.qi.get(f),d=h.snapshotVersion,p=h.withLastLimboFreeSnapshotVersion(d);c.qi=c.qi.insert(f,p)}}}(i.localStore,r))}async function ML(n,e){const t=Zt(n);if(!t.currentUser.isEqual(e)){Nt("SyncEngine","User change. New user:",e.toKey());const i=await e4(t.localStore,e);t.currentUser=e,function(s,r){s.lc.forEach(l=>{l.forEach(o=>{o.reject(new It($e.CANCELLED,r))})}),s.lc.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await df(t,i.ji)}}function BL(n,e){const t=Zt(n),i=t.cc.get(e);if(i&&i.nc)return fn().add(i.key);{let s=fn();const r=t.rc.get(e);if(!r)return s;for(const l of r){const o=t.ic.get(l);s=s.unionWith(o.view.ju)}return s}}function LL(n){const e=Zt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=d4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=BL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=RL.bind(null,e),e.sc.Wo=_L.bind(null,e.eventManager),e.sc.wc=yL.bind(null,e.eventManager),e}function VL(n){const e=Zt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=DL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=NL.bind(null,e),e}class UL{constructor(){this.synchronizeTabs=!1}async initialize(e){this.yt=_m(e.databaseInfo.databaseId),this.sharedClientState=this.gc(e),this.persistence=this.yc(e),await this.persistence.start(),this.localStore=this.Ic(e),this.gcScheduler=this.Tc(e,this.localStore),this.indexBackfillerScheduler=this.Ec(e,this.localStore)}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return H6(this.persistence,new F6,e.initialUser,this.yt)}yc(e){return new U6(rv.Bs,this.yt)}gc(e){return new Y6}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class WL{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>F_(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=ML.bind(null,this.syncEngine),await mL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new gL}createDatastore(e){const t=_m(e.databaseInfo.databaseId),i=(s=e.databaseInfo,new $6(s));var s;return function(r,l,o,a){return new nL(r,l,o,a)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return t=this.localStore,i=this.datastore,s=e.asyncQueue,r=o=>F_(this.syncEngine,o,0),l=V_.C()?new V_:new J6,new sL(t,i,s,r,l);var t,i,s,r,l}createSyncEngine(e,t){return function(i,s,r,l,o,a,c){const u=new CL(i,s,r,l,o,a);return c&&(u.dc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=Zt(e);Nt("RemoteStore","RemoteStore shutting down."),t._u.add(5),await hf(t),t.mu.shutdown(),t.gu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v4(n,e,t){if(!t)throw new It($e.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function FL(n,e,t,i){if(e===!0&&i===!0)throw new It($e.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function H_(n){if(!Mt.isDocumentKey(n))throw new It($e.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function q_(n){if(Mt.isDocumentKey(n))throw new It($e.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Em(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ht()}function eu(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new It($e.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Em(n);throw new It($e.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z_=new Map;class G_{constructor(e){var t;if(e.host===void 0){if(e.ssl!==void 0)throw new It($e.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new It($e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,FL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(e,t,i,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new G_({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new It($e.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new It($e.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new G_(e),e.credentials!==void 0&&(this._authCredentials=function(t){if(!t)return new mB;switch(t.type){case"gapi":const i=t.client;return new bB(i,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new It($e.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=z_.get(e);t&&(Nt("ComponentProvider","Removing Datastore"),z_.delete(e),t.terminate())}(this),Promise.resolve()}}function jL(n,e,t,i={}){var s;const r=(n=eu(n,Am))._getSettings();if(r.host!=="firestore.googleapis.com"&&r.host!==e&&Dg("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},r),{host:`${e}:${t}`,ssl:!1})),i.mockUserToken){let l,o;if(typeof i.mockUserToken=="string")l=i.mockUserToken,o=$i.MOCK_USER;else{l=x5(i.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const a=i.mockUserToken.sub||i.mockUserToken.user_id;if(!a)throw new It($e.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");o=new $i(a)}n._authCredentials=new pB(new g3(l,o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new js(this.firestore,e,this._key)}}class pc{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new pc(this.firestore,e,this._query)}}class Vl extends pc{constructor(e,t,i){super(e,t,ev(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new js(this.firestore,null,new Mt(e))}withConverter(e){return new Vl(this.firestore,e,this._path)}}function b4(n,e,...t){if(n=Po(n),v4("collection","path",e),n instanceof Am){const i=Zn.fromString(e,...t);return q_(i),new Vl(n,null,i)}{if(!(n instanceof js||n instanceof Vl))throw new It($e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Zn.fromString(e,...t));return q_(i),new Vl(n.firestore,null,i)}}function HL(n,e,...t){if(n=Po(n),arguments.length===1&&(e=v3.R()),v4("doc","path",e),n instanceof Am){const i=Zn.fromString(e,...t);return H_(i),new js(n,null,new Mt(i))}{if(!(n instanceof js||n instanceof Vl))throw new It($e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Zn.fromString(e,...t));return H_(i),new js(n.firestore,n instanceof Vl?n.converter:null,new Mt(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qL{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):cl("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zL{constructor(e,t,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=s,this.user=$i.UNAUTHENTICATED,this.clientId=v3.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,async r=>{Nt("FirestoreClient","Received user=",r.uid),await this.authCredentialListener(r),this.user=r}),this.appCheckCredentials.start(i,r=>(Nt("FirestoreClient","Received new app check token=",r),this.appCheckCredentialListener(r,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new It($e.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Co;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=fv(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function GL(n,e){n.asyncQueue.verifyOperationInProgress(),Nt("FirestoreClient","Initializing OfflineComponentProvider");const t=await n.getConfiguration();await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async s=>{i.isEqual(s)||(await e4(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}async function KL(n,e){n.asyncQueue.verifyOperationInProgress();const t=await QL(n);Nt("FirestoreClient","Initializing OnlineComponentProvider");const i=await n.getConfiguration();await e.initialize(t,i),n.setCredentialChangeListener(s=>U_(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,r)=>U_(e.remoteStore,r)),n.onlineComponents=e}async function QL(n){return n.offlineComponents||(Nt("FirestoreClient","Using default OfflineComponentProvider"),await GL(n,new UL)),n.offlineComponents}async function _4(n){return n.onlineComponents||(Nt("FirestoreClient","Using default OnlineComponentProvider"),await KL(n,new WL)),n.onlineComponents}function XL(n){return _4(n).then(e=>e.syncEngine)}async function K_(n){const e=await _4(n),t=e.eventManager;return t.onListen=kL.bind(null,e.syncEngine),t.onUnlisten=IL.bind(null,e.syncEngine),t}class YL{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new n4(this,"async_queue_retry"),this.Wc=()=>{const t=Sp();t&&Nt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=Sp();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const t=Sp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const t=new Co;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}async Jc(){if(this.Lc.length!==0){try{await this.Lc[0](),this.Lc.shift(),this.xo.reset()}catch(e){if(!af(e))throw e;Nt("AsyncQueue","Operation failed with retryable error: "+e)}this.Lc.length>0&&this.xo.Ro(()=>this.Jc())}}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(i=>{this.Kc=i,this.Gc=!1;const s=function(r){let l=r.message||"";return r.stack&&(l=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),l}(i);throw cl("INTERNAL UNHANDLED ERROR: ",s),i}).then(i=>(this.Gc=!1,i))));return this.Bc=t,t}enqueueAfterDelay(e,t,i){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const s=uv.createAndSchedule(this,e,t,i,r=>this.Yc(r));return this.Uc.push(s),s}zc(){this.Kc&&Ht()}verifyOperationInProgress(){}async Xc(){let e;do e=this.Bc,await e;while(e!==this.Bc)}Zc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function Q_(n){return function(e,t){if(typeof e!="object"||e===null)return!1;const i=e;for(const s of t)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}class Jh extends Am{constructor(e,t,i,s){super(e,t,i,s),this.type="firestore",this._queue=new YL,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||S4(this),this._firestoreClient.terminate()}}function JL(n,e){const t=typeof n=="object"?n:nM(),i=typeof n=="string"?n:e||"(default)",s=xP(t,"firestore").getImmediate({identifier:i});if(!s._initialized){const r=Y5("firestore");r&&jL(s,...r)}return s}function y4(n){return n._firestoreClient||S4(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function S4(n){var e;const t=n._freezeSettings(),i=function(s,r,l,o){return new IB(s,r,l,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,o.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,t);n._firestoreClient=new zL(n._authCredentials,n._appCheckCredentials,n._queue,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ha(fs.fromBase64String(e))}catch(t){throw new It($e.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ha(fs.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new It($e.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new is(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new It($e.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new It($e.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Dn(this._lat,e._lat)||Dn(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZL=/^__.*__$/;class xL{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new xo(e,this.data,this.fieldMask,t,this.fieldTransforms):new uf(e,this.data,t,this.fieldTransforms)}}function A4(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ht()}}class gv{constructor(e,t,i,s,r,l){this.settings=e,this.databaseId=t,this.yt=i,this.ignoreUndefinedProperties=s,r===void 0&&this.na(),this.fieldTransforms=r||[],this.fieldMask=l||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new gv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.ia({path:i,oa:!1});return s.ua(e),s}ca(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.ia({path:i,oa:!1});return s.na(),s}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return Zh(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(e.length===0)throw this.ha("Document fields must not be empty");if(A4(this.sa)&&ZL.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class $L{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.yt=i||_m(e)}da(e,t,i,s=!1){return new gv({sa:e,methodName:t,fa:i,path:is.emptyPath(),oa:!1,la:s},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function w4(n){const e=n._freezeSettings(),t=_m(n._databaseId);return new $L(n._databaseId,!!e.ignoreUndefinedProperties,t)}function e8(n,e,t,i,s,r={}){const l=n.da(r.merge||r.mergeFields?2:0,e,t,s);T4("Data must be an object, but it was:",l,i);const o=C4(i,l);let a,c;if(r.merge)a=new mr(l.fieldMask),c=l.fieldTransforms;else if(r.mergeFields){const u=[];for(const f of r.mergeFields){const h=n8(e,f,t);if(!l.contains(h))throw new It($e.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);s8(u,h)||u.push(h)}a=new mr(u),c=l.fieldTransforms.filter(f=>a.covers(f.field))}else a=null,c=l.fieldTransforms;return new xL(new Zs(o),a,c)}function t8(n,e,t,i=!1){return vv(t,n.da(i?4:3,e))}function vv(n,e){if(k4(n=Po(n)))return T4("Unsupported field value:",e,n),C4(n,e);if(n instanceof E4)return function(t,i){if(!A4(i.sa))throw i.ha(`${t._methodName}() can only be used with update() and set()`);if(!i.path)throw i.ha(`${t._methodName}() is not currently supported inside arrays`);const s=t._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&e.sa!==4)throw e.ha("Nested arrays are not supported");return function(t,i){const s=[];let r=0;for(const l of t){let o=vv(l,i.aa(r));o==null&&(o={nullValue:"NULL_VALUE"}),s.push(o),r++}return{arrayValue:{values:s}}}(n,e)}return function(t,i){if((t=Po(t))===null)return{nullValue:"NULL_VALUE"};if(typeof t=="number")return GB(i.yt,t);if(typeof t=="boolean")return{booleanValue:t};if(typeof t=="string")return{stringValue:t};if(t instanceof Date){const s=fi.fromDate(t);return{timestampValue:Xh(i.yt,s)}}if(t instanceof fi){const s=new fi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Xh(i.yt,s)}}if(t instanceof pv)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ha)return{bytesValue:X3(i.yt,t._byteString)};if(t instanceof js){const s=i.databaseId,r=t.firestore._databaseId;if(!r.isEqual(s))throw i.ha(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:nv(t.firestore._databaseId||i.databaseId,t._key.path)}}throw i.ha(`Unsupported field value: ${Em(t)}`)}(n,e)}function C4(n,e){const t={};return b3(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):hc(n,(i,s)=>{const r=vv(s,e.ra(i));r!=null&&(t[i]=r)}),{mapValue:{fields:t}}}function k4(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof fi||n instanceof pv||n instanceof Ha||n instanceof js||n instanceof E4)}function T4(n,e,t){if(!k4(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const i=Em(t);throw i==="an object"?e.ha(n+" a custom object"):e.ha(n+" "+i)}}function n8(n,e,t){if((e=Po(e))instanceof mv)return e._internalPath;if(typeof e=="string")return I4(n,e);throw Zh("Field path arguments must be of type string or ",n,!1,void 0,t)}const i8=new RegExp("[~\\*/\\[\\]]");function I4(n,e,t){if(e.search(i8)>=0)throw Zh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new mv(...e.split("."))._internalPath}catch{throw Zh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Zh(n,e,t,i,s){const r=i&&!i.isEmpty(),l=s!==void 0;let o=`Function ${e}() called with invalid data`;t&&(o+=" (via `toFirestore()`)"),o+=". ";let a="";return(r||l)&&(a+=" (found",r&&(a+=` in field ${i}`),l&&(a+=` in document ${s}`),a+=")"),new It($e.INVALID_ARGUMENT,o+n+a)}function s8(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{constructor(e,t,i,s,r){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new js(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new r8(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(bv("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class r8 extends O4{data(){return super.data()}}function bv(n,e){return typeof e=="string"?I4(n,e):e instanceof mv?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l8(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new It($e.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _v{}class o8 extends _v{}function a8(n,e,...t){let i=[];e instanceof _v&&i.push(e),i=i.concat(t),function(s){const r=s.filter(o=>o instanceof yv).length,l=s.filter(o=>o instanceof wm).length;if(r>1||r>0&&l>0)throw new It($e.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)n=s._apply(n);return n}class wm extends o8{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new wm(e,t,i)}_apply(e){const t=this._parse(e);return R4(e._query,t),new pc(e.firestore,e.converter,Lg(e._query,t))}_parse(e){const t=w4(e.firestore);return function(s,r,l,o,a,c,u){let f;if(a.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new It($e.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){Y_(u,c);const h=[];for(const d of u)h.push(X_(o,s,d));f={arrayValue:{values:h}}}else f=X_(o,s,u)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||Y_(u,c),f=t8(l,r,u,c==="in"||c==="not-in");return Si.create(a,c,f)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function c8(n,e,t){const i=e,s=bv("where",n);return wm._create(s,i,t)}class yv extends _v{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new yv(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:_r.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let r=i;const l=s.getFlattenedFilters();for(const o of l)R4(r,o),r=Lg(r,o)}(e._query,t),new pc(e.firestore,e.converter,Lg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function X_(n,e,t){if(typeof(t=Po(t))=="string"){if(t==="")throw new It($e.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!O3(e)&&t.indexOf("/")!==-1)throw new It($e.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Zn.fromString(t));if(!Mt.isDocumentKey(i))throw new It($e.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return __(n,new Mt(i))}if(t instanceof js)return __(n,t._key);throw new It($e.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Em(t)}.`)}function Y_(n,e){if(!Array.isArray(n)||n.length===0)throw new It($e.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new It($e.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function R4(n,e){if(e.isInequality()){const i=tv(n),s=e.field;if(i!==null&&!i.isEqual(s))throw new It($e.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${i.toString()}' and '${s.toString()}'`);const r=I3(n);r!==null&&u8(n,s,r)}const t=function(i,s){for(const r of i)for(const l of r.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new It($e.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new It($e.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function u8(n,e,t){if(!t.isEqual(e))throw new It($e.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class f8{convertValue(e,t="none"){switch(Lo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _i(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Va(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ht()}}convertObject(e,t){const i={};return hc(e.fields,(s,r)=>{i[s]=this.convertValue(r,t)}),i}convertGeoPoint(e){return new pv(_i(e.latitude),_i(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=y3(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(_u(e));default:return null}}convertTimestamp(e){const t=Hl(e);return new fi(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Zn.fromString(e);qn($3(i));const s=new bu(i.get(1),i.get(3)),r=new Mt(i.popFirst(5));return s.isEqual(t)||cl(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h8(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class D4 extends O4{constructor(e,t,i,s,r,l){super(e,t,i,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new gh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(bv("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class gh extends D4{data(e={}){return super.data(e)}}class d8{constructor(e,t,i,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Uc(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new gh(this._firestore,this._userDataWriter,i.key,i,new Uc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new It($e.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let r=0;return i._snapshot.docChanges.map(l=>{const o=new gh(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Uc(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:o,oldIndex:-1,newIndex:r++}})}{let r=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const o=new gh(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Uc(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let a=-1,c=-1;return l.type!==0&&(a=r.indexOf(l.doc.key),r=r.delete(l.doc.key)),l.type!==1&&(r=r.add(l.doc),c=r.indexOf(l.doc.key)),{type:m8(l.type),doc:o,oldIndex:a,newIndex:c}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function m8(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ht()}}class N4 extends f8{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ha(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new js(this.firestore,null,t)}}function p8(n,e){const t=eu(n.firestore,Jh),i=HL(n),s=h8(n.converter,e);return v8(t,[e8(w4(n.firestore),"addDoc",i._key,s,n.converter!==null,{}).toMutation(i._key,ll.exists(!1))]).then(()=>i)}function g8(n,...e){var t,i,s;n=Po(n);let r={includeMetadataChanges:!1},l=0;typeof e[l]!="object"||Q_(e[l])||(r=e[l],l++);const o={includeMetadataChanges:r.includeMetadataChanges};if(Q_(e[l])){const f=e[l];e[l]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[l+1]=(i=f.error)===null||i===void 0?void 0:i.bind(f),e[l+2]=(s=f.complete)===null||s===void 0?void 0:s.bind(f)}let a,c,u;if(n instanceof js)c=eu(n.firestore,Jh),u=ev(n._key.path),a={next:f=>{e[l]&&e[l](b8(c,n,f))},error:e[l+1],complete:e[l+2]};else{const f=eu(n,pc);c=eu(f.firestore,Jh),u=f._query;const h=new N4(c);a={next:d=>{e[l]&&e[l](new d8(c,h,f,d))},error:e[l+1],complete:e[l+2]},l8(n._query)}return function(f,h,d,p){const v=new qL(p),y=new SL(h,v,d);return f.asyncQueue.enqueueAndForget(async()=>vL(await K_(f),y)),()=>{v.bc(),f.asyncQueue.enqueueAndForget(async()=>bL(await K_(f),y))}}(y4(c),u,o,a)}function v8(n,e){return function(t,i){const s=new Co;return t.asyncQueue.enqueueAndForget(async()=>OL(await XL(t),i,s)),s.promise}(y4(n),e)}function b8(n,e,t){const i=t.docs.get(e._key),s=new N4(n);return new D4(n,s,e._key,i,new Uc(t.hasPendingWrites,t.fromCache),e.converter)}(function(n,e=!0){(function(t){fc=t})(tM),Bh(new uu("firestore",(t,{instanceIdentifier:i,options:s})=>{const r=t.getProvider("app").getImmediate(),l=new Jh(new gB(t.getProvider("auth-internal")),new yB(t.getProvider("app-check-internal")),function(o,a){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new It($e.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bu(o.options.projectId,a)}(r,i),r);return s=Object.assign({useFetchStreams:e},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Aa(p_,"3.8.3",n),Aa(p_,"3.8.3","esm2017")})();const zg=n=>Object.values(Et).includes(n),_8=n=>parseInt(n.split("d")[1]),Wc=n=>Math.floor(Math.random()*n+1),J_=n=>{if(typeof n=="number")return n;const[e,t]=n.split("d");return parseInt(e)*Wc(parseInt(t))},xn=(n,e)=>{const t=n.reduce((i,s,r)=>((s==="-"||parseInt(s+"")<0)&&(i=i.substr(0,i.length-1)),i+(s+"")+(r===n.length-1?"":"+")),"");return t.toString()[0]!=="-"&&e?"+"+t:t},y8=n=>n.some(e=>Object.values(Et).includes(e)),Xs=(n,{returnAsString:e=!1}={})=>{if(!Array.isArray(n))return J_(n);const t=n.map(r=>r==="-"?r:J_(r));let i=1;const s=t.reduce((r,l,o)=>{let a=i;if(l==="-")return i=-1,r;i=1;const c=parseInt(l+"");return r+c*a},0);return e?{value:s,resultText:t.reduce((r,l,o)=>{let a=i;if(l==="-")return i=-1,r;i=1;const c=parseInt(l+"")*a,u=zg(n[o])?`(${n[o]})`:"";return r+""+(o>0?" "+ws(c,!0):c)+u},"")}:s},qa=n=>{let e=!1;const t="-",i={numSum:0,remainingDice:[]},s=new Set(Object.values(Et)),{remainingDice:r,numSum:l}=n.reduce((o,a)=>(a===t?e=!0:s.has(a)?e?(e=!1,o.remainingDice=[...o.remainingDice,t,a]):o.remainingDice=[...o.remainingDice,a]:e?(e=!1,i.numSum-=a):i.numSum+=a,o),i);return[...r,l]},Z_=()=>document.getElementById("dice-box-result"),nl=(n=[Et.d20],e={})=>{const t=[new Audio("roll.mp3"),new Audio("roll-2.mp3"),new Audio("roll-3.mp3"),new Audio("roll-4.mp3")],i=()=>{t.forEach(s=>{s.pause(),s.currentTime=0})};return new Promise(s=>{let r=!0,l=null,o=null,a=!1,c=s;e!=null&&e.chatEntryOnRes&&(c=async(p,...v)=>{const y=e==null?void 0:e.db,b=p==null?void 0:p.value,S=p==null?void 0:p.resultText;console.log(y,b,S),Sv(y,{...e==null?void 0:e.chatEntryOnRes,roll:b,rollTooltip:S}),s(p,...v)});const u=n.map(p=>{switch(p){case Et.d2:return Et.d4;case Et.d3:return Et.d6;case Et.d5:return Et.d10;default:return p}}),f=()=>{var p;if(r=!1,window.diceBox.clear(),window.diceBoxContainer.style.pointerEvents="none",(((p=Z_())==null?void 0:p.style)||{opacity:0}).opacity=0,l&&clearTimeout(l),o)o();else if(!a&&!(e!=null&&e.disableRollOnCancel)){const v=n.map(S=>Xs([S])),y=[...v,...(e==null?void 0:e.modifier)||[]],b=Xs([...v,...(e==null?void 0:e.modifier)||[]]);c({value:b,resultText:h(y,b,{hideResult:!0}),resultArray:v})}},h=(p,v,{hideResult:y=!1}={})=>{let b;return b=p.reduce((S,I,T)=>{const C=T===0?"":" ",k=T===0?I:ws(I,!0);return S+C+`${k}${T>=n.length?"":`(${n[T]})`}`},""),y?b:`${b} = ${v}`};i();const d=[0,1,2,3];n.forEach(()=>{if(!d.length)return;const p=Math.floor(Math.random()*d.length),[v]=d.splice(p,1);t[v].play()}),window.diceBox.roll(u).then(p=>{if(a=!0,!r)return;let v=!1;p.map(({value:C})=>C);const b=[...p.map(({value:C},k)=>u[k]!==n[k]?(v=!0,_8(n[k]),Math.ceil(C/2)):C),...e.modifier||[]],S=Xs(b),I=Z_();I&&!e.disableResultBox&&(I.style.opacity="1",I.innerHTML=e!=null&&e.customResultBoxLabel?e==null?void 0:e.customResultBoxLabel(b,S,{sanitizedDice:u,hasUnrealDice:v}):h(b,S));const T={resultArray:b,resultText:h(b,S,{hideResult:!0}),value:S};e.clearTimeout?(o=()=>c(T),l=setTimeout(f,e.clearTimeout)):c(T)}),window.diceBoxContainer.style.pointerEvents="auto",window.diceBoxContainer.addEventListener("click",f,{once:!0})})},P4=()=>new Date().toISOString().slice(0,8).replace(/-/g,""),Sv=(n,e)=>p8(b4(n,"lobby","taboola",P4()),{...e,date:fi.now()}),S8=(n,e)=>{if(n.size!==e.size)return!1;for(var t of n)if(!e.has(t))return!1;return!0},$s=n=>n===void 0?0:Math.floor((n-10)/2),x_=n=>n?hl.MAJOR:hl.MINOR,M4=(n,e)=>e.includes(Te.HEAL_PLUS)||n===kn.PRIEST,B4=(n,e,t)=>{var i=document.createElement("a"),s=new Blob([n],{type:t});i.href=URL.createObjectURL(s),i.download=e,i.click()},L4=(n,e="")=>{try{B4(JSON.stringify(n),`${e}${n.playerName}-fe3h.json`,"text/plain")}catch(t){alert("Failed to export sheet, see console"),console.error(t)}},Ic=n=>{navigator.clipboard.writeText(n)},sn={ACROBATICS:"ACROBATICS",ANIMAL_HANDLING:"ANIMAL_HANDLING",ARCANA:"ARCANA",ATHLETICS:"ATHLETICS",BARTERING:"BARTERING",CLEANING:"CLEANING",COOKING:"COOKING",DECEPTION:"DECEPTION",GARDENING:"GARDENING",GUARD_DUTY:"GUARD_DUTY",HISTORY:"HISTORY",HUNTING:"HUNTING",INSIGHT:"INSIGHT",INTIMIDATION:"INTIMIDATION",INVESTIGATION:"INVESTIGATION",LOCKPICKING:"LOCKPICKING",MEDICINE:"MEDICINE",NATURE:"NATURE",PERCEPTION:"PERCEPTION",PERFORMANCE:"PERFORMANCE",PERSUASION:"PERSUASION",RELIGION:"RELIGION",SLEIGHT_OF_HAND:"SLEIGHT_OF_HAND",STEALTH:"STEALTH",SURVIVAL:"SURVIVAL"},xh={[sn.ACROBATICS]:{label:"Acrobatics",stat:Ye.DEX},[sn.ANIMAL_HANDLING]:{label:"Animal Handling",stat:Ye.WIS},[sn.ARCANA]:{label:"Arcana",stat:Ye.INT},[sn.ATHLETICS]:{label:"Athletics",stat:Ye.STR},[sn.BARTERING]:{label:"Bartering",stat:[Ye.WIS,Ye.CHA]},[sn.CLEANING]:{label:"Cleaning",stat:[Ye.CON,Ye.WIS]},[sn.COOKING]:{label:"Cooking",stat:[Ye.INT,Ye.WIS]},[sn.DECEPTION]:{label:"Deception",stat:Ye.CHA},[sn.GARDENING]:{label:"Gardening",stat:[Ye.STR,Ye.CON,Ye.WIS]},[sn.GUARD_DUTY]:{label:"Guard Duty",stat:[Ye.CON,Ye.WIS]},[sn.HISTORY]:{label:"History",stat:Ye.INT},[sn.HUNTING]:{label:"Hunting",stat:[Ye.WIS,Ye.DEX]},[sn.INSIGHT]:{label:"Insight",stat:Ye.WIS},[sn.INTIMIDATION]:{label:"Intimidation",stat:Ye.CHA},[sn.INVESTIGATION]:{label:"Investigation",stat:Ye.INT},[sn.LOCKPICKING]:{label:"Lockpicking",stat:Ye.DEX},[sn.MEDICINE]:{label:"Medicine",stat:Ye.WIS},[sn.NATURE]:{label:"Nature",stat:Ye.INT},[sn.PERCEPTION]:{label:"Perception",stat:Ye.WIS},[sn.PERFORMANCE]:{label:"Performance",stat:Ye.CHA},[sn.PERSUASION]:{label:"Persuasion",stat:Ye.CHA},[sn.RELIGION]:{label:"Religion",stat:Ye.INT},[sn.SLEIGHT_OF_HAND]:{label:"Sleight of Hand",stat:Ye.DEX},[sn.STEALTH]:{label:"Stealth",stat:Ye.DEX},[sn.SURVIVAL]:{label:"Survival",stat:Ye.WIS}},E8=Object.keys(xh).reduce((n,e)=>(n[e]=xh[e].stat,n),{}),$h=Object.keys(xh).reduce((n,e)=>(n[e]=xh[e].label,n),{});var jn=(n=>(n[n.NONE=0]="NONE",n[n.PROFICIENT=1]="PROFICIENT",n[n.EXPERT=2]="EXPERT",n[n.AWFUL=-2]="AWFUL",n))(jn||{});const A8=""+new URL("../../assets/sword-removebg-preview-6a200c6b.png",import.meta.url).href,w8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAADqRJREFUaEPVWntQVPe9/573LrDs8g7GCEgUlawsvhA0Qe/M7WOSNnXmtvYxLdDcNvGRakzGTFJbJTZ6L9MGjdG26b1xldsYTbRE01gyqW7R+ggk4m7tjVpEiVSJwi6wwO7Z8+h8v2fPshAfDcof/c3swJ49+zvfz/f7+T5/y8C/+GJQ/kutZ7dvfXlD5fXr1wkOo5uotGHw1Nj1ocsMwwC+cGmacb/5fqRucF9dNzZhWTb2HbyG781rOmPcZ97LAEd7CjzA4OAgJCUlwapn17vzCx6ooifv/N8t3jdedzszMjJiAIwvGwKxUcFVMATFhZ+bgo4EMBKE+TkPOkQiEdB0HQRBAI4TQFEUkJWoolhDGQzH0zNQYfjeBMdpIRBFEfr7++Hf/v1h3/efeHo6SbS5ptrr8zU7ZVkeZgFdV4cBYAUxJny8dm9nAfNzgQHAZyAAFIRleQKg6gxwHAeyEqG/JgBFM6xgWjnVJsHAwAApYU7Jg74lT60xANRsXOM9e6bFqSlDAsdbwDQlaIYF4s0br+3YfSO5E33PCyw9HBcKikBUlQFBkiApyQ7WpESw2WyB1IyM0xmZGYG01KyW1PT0i47UtBYHCBdDWnfttl9uq2xvvwyzSub7nnz6JwaAX79S4/3T4QanJIgkHFLGBBAvlMAZn5sgbiLnMJrF38PxzDCNhtEaGgs2uz2Qlp5VvWrZf7pT8ooDN9u3zdtYvqHmvz26zkDxrDLfsqeeNwBs+cV674cf/NnJaCO9NOqUMeIbjnezpaoqUQMXUUXTolRhiSr4slqtEFE14HkeQrICAi8E7skev3DDpm0tt1PI4Xder9i+w+1GJc6dt/DuA0BnMyMKCoN0wReCSkxMJFDI4YyseyAQCAD6brIt2b3VvbsqXni/v82RkpL3GUv836s/3/7uwXcrcb/Zcx+KA1DzgvdU8zFnLGyZhmCGh1HQb20BdDYUGPexWCwkOFoFowaGP8Fqo+uffvop5OXlAcOJ9auWrqzKK745bUxg3d2t9s0bfx44e/YsKcM1q9T35NMmhe4SAFNw/NvX10dgkDIoNC5bSgZcu3aNQmhfT6979+//OEzzt6LQpbbzazeufXZdb28vAZheNMv35OqoE2+5DYBYHmBubYH4iDQyOqE/dPWGIC01CxISEuq3vbZj0e04H//58cZDh1/d+osFuA8qwOma6Vuxem3Uie8SAPQB5Dj+tdls9HykD66kpKSAPX3cabs9zTO3aOamhYsW3TTa3AjYm6/v1P9w4M1YFCyaMce3YvVPhwOAEVGIjWZic8NINP3fSnPIe/QF5DxGnayszE1FLtfmqiXPXfw8Go+/95Pz58vr6tyeC3/z0Z64ZqIPxFOo5cPjTl0d7rSfF4AZRinySKJ7/vz51TcTvL/Hv5YB/VyCPXXXrYB1t7baz33S5nn55S0uq6RRJEMFzS59KM6JX1rvbT5x1GluZHJ+5MYaGD5gAmMgmrmjlkLnlcQE6OkPQuns+bnL17x46VbC6WfOiExhoVG/3GBh5Pno2AnPa9v/x2WzJIAimyXHIMwufdC3zMzEW+4SAExOoHOQkpEO3/l2hVtKTHBn3ZOdy0liLlqeZUXggA0kpKRtvh2dSPgTJz1v7d7jGgwPAI8lqoYFINZMowUQLUZNC8UsEKtWjSKtp78fOFaC5FQH9PUOgGiVIDk5BRxJqfDII49cHDdxUuG4ceMGbgai62rbiuaTx1cebHgn9/KldpAkASSsUHWRMviYAQCOpfjvSE+HwYEIAM+CHFYhMzsLrl3rhmmTC1sefviR3cWl82sYZihLorZTU/N7ENDVq22P/tXrrd+35w24+mkHpNodEAz2EgAGpJgF5pQ9NAoKjbCA2S+YXYIcMcph7Bsc9nTo6LxCiQyrzdzcfHf1iy/dMHF1dl4uysoafxoBHHrv7badO7fnKqEwWBME6O3yg91ug3A4DCxIMQuMCQAsjzFLBvqCIIc1SLTbKOlMmlLgXv3chmHCf/zxx7YpU6b0xdMoGOws+tm6F1rOnPHCvVn3wMBgL+gyFoCSEX10kRQUUUNwVwBE24OYDIkJNmhtbYWCqVMoofGiBBPz8+tX/3gjZV2kSorF4blwsd3z1t43Fzz7kw3F8QBOnzq24oV16zZlpDlACcnQ1d0J+RNy4Wrn36kcUSJszAIl88rvnEIjAWCxh4lGtEiUjcdPyIHHf7Akd9zEaZf8f7+QI4qiR5bDuQcb3oP6+nrY83bDUI+Kre1r2w43NPxhgRoJgcjyAIwCFk6A3r4AZfaIzMRRqNy3/BmzFvonwyjSgbiI3TUAhAZlijqCZCGNC5JInO/p6YGZM2fCY489ti4lK78a7w33dmyXB+XKuro68P3lDN2/Y8+BGIDrHecfXbNmTT1SJSKHgVE0YDkNBKq/NOotVF0gAKOmEGZAEwBVmDob3dhoYDBU4z2zZs2CiqpKd1rW/cT7wb4r5eHBQU/9W/vg+PHjMBgKE/ApU6fmPhNNdhf++tHhjf+1YQE1PhEZWFWPAcDefCSAufPKfUtWRXviV2p/Rpk4NvK4wfgEBVEUQ+NIHU1lAVgGdI0FhdEN08oylJSUwNe/sbhyfM7UHfidYOeFogjonr179zo+ONoIwWAQBMlKFpxVMnflk8+s3dz2/6cqDv3xffexY8eof9BUGTgdE5+hEEZXogCMPIAWGBWASCRMM5lQRIZwSCWuM8BDWFNAkiSYOnVq4IePP1GVkj6hnoT3Xy7SVc2zs26HAzUvMdEpAyeQoEXFM2Dx4sUtTR80u/bu3UvCkhJ1BTDqm7UjAsDrimZQSNHCUFL20Oe3gDlmkVXsZa0gJlggHFJAsCbAhAkTAt+rqlyYl1dIve2Vy3+ryMxI3fSbbb9ynGg6AawGIHAqWUAULWC320GyJkJmZia0tl2kFpNnuWhQMrjPsCpwGoAOmgEgmonRAqMCgBpBjqITi0IC9A4EQVUA5pTNC3x10aMLJ08uJuGD/qsrOIHb9JtXfwVnWrwgEyUYUCP91KXhQAvzRf9gmDTa0xcEh8MBcihMABhGJwrFA8Dr6p1mYo415jmMwENE1kHnOCiYPC3whS89vLB4zjwS3u+/sj0UGqg8eOAdeP/99yDU1w/5k/Oh9ex5sCeJ5EOhsNE340ALBe8N9hMQNaJEp30aAdAhQhbAWSfS644BsFFnDasKqAoD02fMgG996zuu8RMfoDKgq6tjO8/zlb/9bR0cazwCosgDRFToCfZAarIDGC1Egg8MhrGtpJEiCoYAkFLmYA3DJgLQdJkAYCTF+zTGQgoMRwaoH4jLA9XepuONTnTEUCgEHMfTg0IhmZwTX9hhRTgbmV6RQzBt2jT4+n8sWpdfUExxvu9ae62uqyv37NkDTSdPGDNQRaaEJgoctZa8IN2uir7157pAn+NwpGRemW/JiuhU4pXaFwgAPoziPMuR0Ni6mGNEFEjhk0kTBZPyoaKioj7v/kIqEfxX2so5nvXs2/sWNDU1wbXOq5TQdNUo7iySQIoBxnTSUeKIAtAYHeaWzfMtMSdzW2vXe5tONDqpDBBxfAhEkVhYAwBRtIJ/IATl5eXwla981eNIsy7C4ROWCIPhwRaPx+M47DkE/mtdIAkcWSoUGjBmRJIxhb5zAEYFoDEazMUw+tRzRlOPFmg+ccSJWsY4L8sRqucx25LzqCpIUgLcO/F+WLp0mTszO4cyLParrEP0HPjd71wNDQ3A8SxoWD1KRueEdTwCQArhHixnUGC0S9eMc4LPANjyUjUBMDIxR9rCOI80woYEgeTk5MB3H6twj88rNITvbrUnCUmeXbt2uT76sBk6OzvBIgokMIcPwdolSiGeM5RwpxZAAGQBVoHSsgVDFDIBoA9EIsbgFeM8Jh2M86WlpbDoa19z5xQWk/BIG6stqX7PG7tcR48ehYC/G9LT06Gvxxj16KpqnKgIHDmxrikEgMEK8w5WPICSsgVDs9FX0AdONjrRANjLUr0hYwBmYUrBA/DlL31xZVHZg9SIy8HOomAw6Dn47kHHkcY/QXt7O9x3331UXTK6ZhwTacbsBqtXFBwtipS682UEFRVUwH5guXnAsXUzOvERp6KowHMW49REAXC5ZsA3F3+vMmeqUZjJ/stFA3LEs2/fPgcWXhqWFIIQOzUROKPhMAEgGHPMjk5tHm6MHogBQNEVKCkrHzrgqK35qfcv3mYnhjp7chr09gbh/vyCwNInli7MzJtMGbb/+vVHNT3o3r9/v6OxsZGEFnnDOamC1Azq4Ro5EBu9wMO/qSjGXJThGZjuwtFidDaKAE6fOulEAfqDYRg3bnzLs888X2UKL/v9FcH+oPvtA7vB6/VCR0cHbYQA4g/7zFPKsQKAh6BUyvAMFLnm+H40BGAdAUC8ebmTWn70w6qF5lGP/3J7rSMjY+Wuujo4fPj3gONtjDJYChiRRgWeZ2Ph9m5p+0b7mIcnDM8NB4CnlF5vE1GodMGC3OXL11zCMClq0iZGFyqxPMBooyhGXLfQCSNL2dWgjsHNsV6xxMqxUDxjbrwFqr2+lmYnmmf5suUrp0/Oc2uSzdPb0+c6dOgQ7NtH/QlYRTxVVI3QqBtnvkg7sxszD6rHCgjHMRRgsCOcOXu+b8XqdUYmrq2p9p7+6AMCsH79ekhKSoZTp07B5U86YP/+/ZCdfS90d3eDwEYoqpgHz+ZhA2oGrWE68VgBQEtTkTgSwJbaDd4PT/6ZaqGCggI4d+4cJaYrVzpJ4wnWRKJKgqhTsYdAKVdEz3wxw5rWGCvhKbrFNVRzSsuHqtFfb6nxnjx+xImRpaurC9LS0gB/N2G3p1C06breTXMZTg+RoHiNjklDIcOJBWMOZEahsQKBLS3VVlYLzJlX7vvBktUGhS5d+PiNF198fjHSA1+mhrVoh8RzRn2k6UM/7DB/PhB/8D3ytxMmEPMebOqp1Ij7IUf8/yOz9WcCg2gh+bKzs+Hxpat2T5xU+M1hk7Gx0txY7vsP+HBmqXYwJbIAAAAASUVORK5CYII=",C8=""+new URL("../../assets/axe-removebg-preview-6ec4ca46.png",import.meta.url).href,k8=""+new URL("../../assets/bow-removebg-preview-75a7b4cd.png",import.meta.url).href,T8=""+new URL("../../assets/fists-removebg-preview-1b211e37.png",import.meta.url).href,te={SWORD:"SWORD",LANCE:"LANCE",AXE:"AXE",BOW:"BOW",FISTS:"FISTS",HEAVY_ARMOR:"HEAVY_ARMOR",RIDING:"RIDING",REASON:"REASON",FAITH:"FAITH",LEADERSHIP:"LEADERSHIP"},il={[te.SWORD]:"Sword",[te.LANCE]:"Lance",[te.AXE]:"Axe",[te.BOW]:"Bow",[te.FISTS]:"Fists",[te.HEAVY_ARMOR]:"Heavy Armor",[te.RIDING]:"Riding",[te.REASON]:"Reason",[te.FAITH]:"Faith",[te.LEADERSHIP]:"Leadership"},sl={[te.SWORD]:[Ye.STR,Ye.DEX],[te.LANCE]:[Ye.STR,Ye.DEX],[te.AXE]:[Ye.STR],[te.BOW]:[Ye.DEX],[te.FISTS]:[Ye.STR,Ye.DEX],[te.HEAVY_ARMOR]:[Ye.CON],[te.RIDING]:[sn.ANIMAL_HANDLING],[te.REASON]:[Ye.INT],[te.FAITH]:[Ye.INT],[te.LEADERSHIP]:[Ye.WIS,Ye.CHA]},V4=[te.SWORD,te.LANCE,te.AXE,te.BOW,te.FISTS],Cm=[te.REASON,te.FAITH],$_=[...V4,...Cm],ed={[te.SWORD]:A8,[te.LANCE]:w8,[te.AXE]:C8,[te.BOW]:k8,[te.FISTS]:T8,[te.HEAVY_ARMOR]:null,[te.RIDING]:null,[te.REASON]:null,[te.FAITH]:null,[te.LEADERSHIP]:null},vt={WRATH_STRIKE:"WRATH_STRIKE",GROUNDER:"GROUNDER",HAZE_SLICE:"HAZE_SLICE",SUNDER:"SUNDER",BANE_OF_MONSTERS:"BANE_OF_MONSTERS",TEMPEST_LANCE:"TEMPEST_LANCE",KNIGHT_KNEELER:"KNIGHT_KNEELER",SHATTER_SLASH:"SHATTER_SLASH",HIT_AND_RUN:"HIT_AND_RUN",MONSTER_PIERCER:"MONSTER_PIERCER",SMASH:"SMASH",HELM_SPLITTER:"HELM_SPLITTER",FOCUSED_STRIKE:"FOCUSED_STRIKE",SPIKE:"SPIKE",WILD_ABANDON:"WILD_ABANDON",DIAMOND_AXE:"DIAMOND_AXE",MONSTER_BREAKER:"MONSTER_BREAKER",CURVED_SHOT:"CURVED_SHOT",DEADEYE:"DEADEYE",HEAVY_DRAW:"HEAVY_DRAW",WANING_SHOT:"WANING_SHOT",BREAK_SHOT:"BREAK_SHOT",SCHISM_SHOT:"SCHISM_SHOT",MONSTER_BLAST:"MONSTER_BLAST",FADING_BLOW:"FADING_BLOW",RUSHING_BLOW:"RUSHING_BLOW",DRAINING_BLOW:"DRAINING_BLOW",NIMBLE_COMBO:"NIMBLE_COMBO",BOMBARD:"BOMBARD",ONE_TWO_PUNCH:"ONE_TWO_PUNCH",MONSTER_CRUSHER:"MONSTER_CRUSHER",SWAP:"SWAP",SHOVE:"SHOVE",REPOSITION:"REPOSITION",PULL_BACK:"PULL_BACK"},Cr={roll:Et.d20,target:10,mod:1},Ks={roll:Et.d20,target:10,mod:-1},I8={roll:1,target:1,mod:1},Wr={[vt.SWAP]:{label:"Swap",description:"As action, switch places with an adjacent ally. Does not consume a superiority die when used."},[vt.REPOSITION]:{label:"Reposition",description:"As an action, move an adjacent ally directly across you. Does not consume a superiority die"},[vt.SHOVE]:{label:"Shove",description:"As an action, push an adjacent ally 1 space away from you. Does not consume a superiority die"},[vt.PULL_BACK]:{label:"Pull Back",description:"As an action, pull you and an adjacent ally 1 square back. Does not consume a superiority die."},[vt.WRATH_STRIKE]:{label:"Wrath Strike",description:"",compatibleWeapons:[te.SWORD],damageBonus:[Et.d2],attackBonus:[2],dieCost:Ks},[vt.GROUNDER]:{label:"Grounder",description:"2x damage against flying units",compatibleWeapons:[te.SWORD],damageBonus:[1],attackBonus:[4]},[vt.BANE_OF_MONSTERS]:{label:"Bane of Monsters",description:"2x damage against monsters",compatibleWeapons:[te.SWORD],damageBonus:[Et.d2],critBonus:[2]},[vt.HAZE_SLICE]:{label:"Haze Slice",description:"Add +6 to AC against retaliatory attack.",compatibleWeapons:[te.SWORD],damageBonus:[Et.d2,-1],dieCost:Cr},[vt.SUNDER]:{label:"Sunder",description:"",compatibleWeapons:[te.SWORD],damageBonus:[1],critBonus:[3],dieCost:Ks},[vt.TEMPEST_LANCE]:{label:"Tempest Lance",description:"",compatibleWeapons:[te.LANCE],damageBonus:[2],attackBonus:[2],dieCost:Cr},[vt.TEMPEST_LANCE]:{label:"Tempest Lance",description:"",compatibleWeapons:[te.LANCE],damageBonus:[2],attackBonus:[2],dieCost:Cr},[vt.KNIGHT_KNEELER]:{label:"Knightkneeler",description:"2x damage against cavalry units",compatibleWeapons:[te.LANCE],damageBonus:[Et.d2],attackBonus:[3]},[vt.SHATTER_SLASH]:{label:"Shatter Slash",description:"Damaged unit takes +1 more damage from martial attacks for 1 round",compatibleWeapons:[te.LANCE],damageBonus:[1],attackBonus:[2],dieCost:Ks},[vt.HIT_AND_RUN]:{label:"Hit and Run",description:"Add +4 to AC against retaliatory attack. After combat, move 1 space backwards if possible",compatibleWeapons:[te.LANCE],damageBonus:[1],attackBonus:[2]},[vt.MONSTER_PIERCER]:{label:"Monster Piercer",description:"2x damage against monsters",compatibleWeapons:[te.LANCE],damageBonus:[2]},[vt.SMASH]:{label:"Smash",description:"",compatibleWeapons:[te.AXE],damageBonus:[1],attackBonus:[4],critBonus:[4],dieCost:Cr},[vt.HELM_SPLITTER]:{label:"Helm Splitter",description:"2x damage against armored units",compatibleWeapons:[te.AXE],damageBonus:[2],critBonus:[1],dieCost:Cr},[vt.MONSTER_BREAKER]:{label:"Monster Breaker",description:"2x damage against monsters",compatibleWeapons:[te.AXE],attackBonus:[Et.d2,1],dieCost:Cr},[vt.FOCUSED_STRIKE]:{label:"Focused Strike",description:"",compatibleWeapons:[te.AXE],attackBonus:[6]},[vt.SPIKE]:{label:"Spike",description:"",compatibleWeapons:[te.AXE],damageBonus:[Et.d2],attackBonus:[3],critBonus:[2],dieCost:Cr},[vt.WILD_ABANDON]:{label:"Wild Abandon",description:"",compatibleWeapons:[te.AXE],damageBonus:[Et.d3,1],attackBonus:[-6],critBonus:[2],dieCost:Cr},[vt.DIAMOND_AXE]:{label:"Diamond Axe",description:"",compatibleWeapons:[te.AXE],damageBonus:[Et.d2,3],attackBonus:[-4],dieCost:I8},[vt.CURVED_SHOT]:{label:"Curved Shot",description:"",compatibleWeapons:[te.BOW],attackBonus:[4],range:[2,3],dieCost:Ks},[vt.DEADEYE]:{label:"Deadeye",description:"",compatibleWeapons:[te.BOW],damageBonus:[Et.d2],range:[3,5],dieCost:Cr},[vt.HEAVY_DRAW]:{label:"Heavy Draw",description:"",compatibleWeapons:[te.BOW],attackBonus:[Et.d2],damageBonus:[2],range:[2],dieCost:Cr},[vt.WANING_SHOT]:{label:"Waning Shot",description:"Damaged units deal -1 damage on attacks for 1 round",compatibleWeapons:[te.BOW],damageBonus:[1],attackBonus:[2],range:[2,3],dieCost:Ks},[vt.MONSTER_BLAST]:{label:"Monster Blast",description:"2x damage against monsters",compatibleWeapons:[te.BOW],damageBonus:[Et.d2],range:[2]},[vt.BREAK_SHOT]:{label:"Break Shot",description:"Damaged unit takes +1 more damage from martial attacks for 1 round",compatibleWeapons:[te.BOW],damageBonus:[1],attackBonus:[1],range:[2,3],dieCost:Ks},[vt.SCHISM_SHOT]:{label:"Schism Shot",description:"Damaged unit takes +1 more damage from magic attacks for 1 round",compatibleWeapons:[te.BOW],attackBonus:[3],damageBonus:[1],range:[2,3],dieCost:Ks},[vt.FADING_BLOW]:{label:"Fading Blow",description:"Add +6 to AC against retaliatory attack. After combat, move 1 space backwards if possible",compatibleWeapons:[te.FISTS],attackBonus:[2],damageBonus:[2],dieCost:Ks},[vt.RUSHING_BLOW]:{label:"Rushing Blow",description:"Add +2 to AC against retaliatory attack. After combat, user moves 1 space in front of the enemy.",compatibleWeapons:[te.FISTS],attackBonus:[4],damageBonus:[2],dieCost:Ks},[vt.DRAINING_BLOW]:{label:"Draining Blow",description:"Restores HP equal to 50% of the damage inflicted to the enemy.",compatibleWeapons:[te.FISTS],attackBonus:[4],damageBonus:[Et.d2],dieCost:Ks},[vt.NIMBLE_COMBO]:{label:"Nimble Combo",description:"Attack twice before retaliation attack. Add +4 to AC against retaliatory attack",compatibleWeapons:[te.FISTS],damageBonus:[1],dieCost:Ks},[vt.BOMBARD]:{label:"Bombard",description:"Attack twice before retaliation attack. Add +4 to AC against retaliatory attack",compatibleWeapons:[te.FISTS],damageBonus:[1],critBonus:[2],dieCost:Ks},[vt.ONE_TWO_PUNCH]:{label:"One-Two Punch",description:"Guaranteed follow up attack.",compatibleWeapons:[te.FISTS],damageBonus:[2],attackBonus:[4]},[vt.MONSTER_CRUSHER]:{label:"Monster Crusher",description:"2x damage against monsters",compatibleWeapons:[te.FISTS],attackBonus:[2],critBonus:[2],damageBonus:[Et.d2,2]}},U4=(n,e={})=>{const{disableDescription:t}=e,{damageBonus:i,attackBonus:s,critBonus:r,rangeBonus:l,range:o,dieCost:a,compatibleWeapons:c,description:u}=n,{roll:f,target:h,mod:d=0}=a||{};let p="1";f==Et.d20?p=`1 (${(h||0)/20*100}% of the time cost ${Math.abs(d)} ${d>0?"more":"less"})`:h===1&&(p=1+d+"");let v=xn(s||[]);return v[0]!=="-"&&(v="+"+v),[s?`Attack: ${v}`:"",i?`Damage: ${xn(i)}`:"",r?`Crit Bonus: ${xn(r)}`:"",l?`Extra Range: ${l}`:"",o?`Range: ${o[0]}${o[1]?"-"+o[1]:""}`:"",c?`Cost: ${p}`:""].filter(b=>b).join(", ")+(u&&!t?`. ${u}`:"")},Pe={TRAINING_SWORD:"TRAINING_SWORD",IRON_SWORD:"IRON_SWORD",STEEL_SWORD:"STEEL_SWORD",LEVIN_SWORD:"LEVIN_SWORD",SWORD_OF_THE_CREATOR:"SWORD_OF_THE_CREATOR",TRAINING_LANCE:"TRAINING_LANCE",IRON_LANCE:"IRON_LANCE",STEEL_LANCE:"STEEL_LANCE",PIKE:"PIKE",LANCE_OF_RUIN:"LANCE_OF_RUIN",TRAINING_AXE:"TRAINING_AXE",IRON_AXE:"IRON_AXE",STEEL_AXE:"STEEL_AXE",HAND_AXE:"HAND_AXE",HAMMER:"HAMMER",TRAINING_BOW:"TRAINING_BOW",IRON_BOW:"IRON_BOW",STEEL_BOW:"STEEL_BOW",SHORT_BOW:"SHORT_BOW",TRAINING_GAUNTLETS:"TRAINING_GAUNTLETS",IRON_GAUNTLETS:"IRON_GAUNTLETS",STEEL_GAUNTLETS:"STEEL_GAUNTLETS",CLOTH_GAUNTLETS:"CLOTH_GAUNTLETS",MIASMA:"MIASMA",FIRE:"FIRE",THUNDER:"THUNDER",WIND:"WIND",BLIZZARD:"BLIZZARD",BOLGANONE:"BOLGANONE",THORON:"THORON",CUTTING_GALE:"CUTTING_GALE",SAGITTAE:"SAGITTAE",HAILSTORM:"HAILSTORM",HEAL:"HEAL",NOSFERATU:"NOSFERATU",SERAPHIM:"SERAPHIM",RECOVER:"RECOVER",PHYSIC:"PHYSIC",RESTORE:"RESTORE",WARD:"WARD"},Gg=new Set([Pe.TRAINING_SWORD,Pe.TRAINING_LANCE,Pe.TRAINING_AXE,Pe.TRAINING_BOW,Pe.TRAINING_GAUNTLETS]),O8=[Pe.TRAINING_SWORD,Pe.IRON_SWORD,Pe.STEEL_SWORD,Pe.LEVIN_SWORD,Pe.SWORD_OF_THE_CREATOR],R8=[Pe.TRAINING_LANCE,Pe.IRON_LANCE,Pe.STEEL_LANCE,Pe.PIKE,Pe.LANCE_OF_RUIN],D8=[Pe.TRAINING_AXE,Pe.IRON_AXE,Pe.STEEL_AXE,Pe.HAMMER,Pe.HAND_AXE],W4=[Pe.TRAINING_BOW,Pe.IRON_BOW,Pe.STEEL_BOW,Pe.SHORT_BOW],N8=[Pe.TRAINING_GAUNTLETS,Pe.IRON_GAUNTLETS,Pe.STEEL_GAUNTLETS,Pe.CLOTH_GAUNTLETS],P8={[Pe.TRAINING_SWORD]:te.SWORD,[Pe.IRON_SWORD]:te.SWORD,[Pe.STEEL_SWORD]:te.SWORD,[Pe.TRAINING_LANCE]:te.LANCE,[Pe.IRON_LANCE]:te.LANCE,[Pe.STEEL_LANCE]:te.LANCE,[Pe.PIKE]:te.LANCE,[Pe.TRAINING_AXE]:te.AXE,[Pe.IRON_AXE]:te.AXE,[Pe.STEEL_AXE]:te.AXE,[Pe.HAMMER]:te.AXE,[Pe.HAND_AXE]:te.AXE,[Pe.TRAINING_BOW]:te.BOW,[Pe.IRON_BOW]:te.BOW,[Pe.STEEL_BOW]:te.BOW,[Pe.SHORT_BOW]:te.BOW,[Pe.TRAINING_GAUNTLETS]:te.FISTS,[Pe.IRON_GAUNTLETS]:te.FISTS,[Pe.STEEL_GAUNTLETS]:te.FISTS,[Pe.CLOTH_GAUNTLETS]:te.FISTS,[Pe.FIRE]:te.REASON,[Pe.THUNDER]:te.REASON,[Pe.WIND]:te.REASON,[Pe.BLIZZARD]:te.REASON,[Pe.BOLGANONE]:te.REASON,[Pe.THORON]:te.REASON,[Pe.CUTTING_GALE]:te.REASON,[Pe.SAGITTAE]:te.REASON,[Pe.HAILSTORM]:te.REASON,[Pe.HEAL]:te.FAITH,[Pe.NOSFERATU]:te.FAITH,[Pe.SERAPHIM]:te.FAITH,[Pe.RECOVER]:te.FAITH,[Pe.PHYSIC]:te.FAITH,[Pe.RESTORE]:te.FAITH,[Pe.WARD]:te.FAITH},tr={[Pe.TRAINING_SWORD]:{label:"Training Sword",description:"",type:te.SWORD,acBonus:1,damage:[1],attackBonus:3,range:[1]},[Pe.IRON_SWORD]:{label:"Iron Sword",description:"",type:te.SWORD,damage:[Et.d2,1],attackBonus:1,range:[1]},[Pe.STEEL_SWORD]:{label:"Steel Sword",description:"",type:te.SWORD,acBonus:-1,followUpBonus:-2,damage:[Et.d3,1],attackBonus:-1,range:[1]},[Pe.LEVIN_SWORD]:{label:"Levin Sword",description:"Uses Int instead of Str for damage",type:te.SWORD,acBonus:-1,followUpBonus:-1,damage:[Et.d3,1],damageType:[Ye.INT],attackBonus:-4,range:[1,2]},[Pe.SWORD_OF_THE_CREATOR]:{label:"Sword of the Creator",description:"",type:te.SWORD,acBonus:-1,followUpBonus:-1,damage:[Et.d2,1],attackBonus:1,range:[1,2]},[Pe.TRAINING_LANCE]:{label:"Training Lance",description:"",type:te.LANCE,acBonus:1,damage:[Et.d2],attackBonus:1,range:[1]},[Pe.IRON_LANCE]:{label:"Iron Lance",description:"",type:te.LANCE,damage:[Et.d2,1],attackBonus:-1,range:[1]},[Pe.STEEL_LANCE]:{label:"Steel Lance",description:"",type:te.LANCE,acBonus:-1,followUpBonus:-2,damage:[Et.d3,2],attackBonus:-2,range:[1]},[Pe.PIKE]:{label:"Pike",description:"+1 range",type:te.LANCE,acBonus:-2,followUpBonus:-3,damage:[Et.d3,1],attackBonus:-2,range:[1,2]},[Pe.LANCE_OF_RUIN]:{label:"Lance of Ruin",description:"",type:te.LANCE,acBonus:-1,followUpBonus:-2,damage:[Et.d2,4],attackBonus:-4,range:[1]},[Pe.TRAINING_AXE]:{label:"Training Axe",description:"",type:te.AXE,acBonus:1,damage:[Et.d2,1],attackBonus:-1,range:[1]},[Pe.IRON_AXE]:{label:"Iron Axe",description:"",type:te.AXE,damage:[Et.d3,1],attackBonus:-3,range:[1]},[Pe.STEEL_AXE]:{label:"Steel Axe",description:"",type:te.AXE,acBonus:-2,damage:[Et.d4,1],followUpBonus:-3,attackBonus:-4,range:[1]},[Pe.HAMMER]:{label:"Warhammer",description:"",type:te.AXE,damage:[Et.d4,1],acBonus:-3,followUpBonus:-4,attackBonus:-5,range:[1]},[Pe.HAND_AXE]:{label:"Hand Axe",description:"",type:te.AXE,followUpBonus:-1,damage:[Et.d2],attackBonus:-3,range:[1]},[Pe.TRAINING_BOW]:{label:"Training Bow",description:"",type:te.BOW,acBonus:1,damage:[1],attackBonus:1,range:[2]},[Pe.IRON_BOW]:{label:"Iron Bow",description:"",type:te.BOW,damage:[Et.d2,1],range:[2]},[Pe.STEEL_BOW]:{label:"Steel Bow",description:"",type:te.BOW,acBonus:-1,followUpBonus:-2,attackBonus:-1,damage:[Et.d3,1],range:[2]},[Pe.SHORT_BOW]:{label:"Short Bow",description:"",acBonus:1,followUpBonus:1,type:te.BOW,damage:[Et.d2],attackBonus:1,range:[1,2]},[Pe.TRAINING_GAUNTLETS]:{label:"Training Fists",description:"",type:te.FISTS,acBonus:1,attackBonus:1,damage:[Et.d2,-1],range:[1]},[Pe.IRON_GAUNTLETS]:{label:"Iron Fists",description:"",type:te.FISTS,damage:[1],attackBonus:0,range:[1]},[Pe.STEEL_GAUNTLETS]:{label:"Steel Fists",description:"",type:te.FISTS,attackBonus:-1,damage:[Et.d2,1],range:[1]},[Pe.CLOTH_GAUNTLETS]:{label:"Hand Wraps",description:"Doesn't consume superiority dies when using combat arts",type:te.FISTS,acBonus:1,followUpBonus:1,attackBonus:1,damage:[0],range:[1],dieCost:{roll:1,target:0,mult:0}},[Pe.MIASMA]:{label:"Miasma",description:"",type:te.REASON,damage:[Et.d2,1],damageType:[Ye.INT],attackBonus:-1,followUpBonus:-1,range:[1,2],uses:10},[Pe.FIRE]:{label:"Fire",description:"",type:te.REASON,damage:[Et.d2],damageType:[Ye.INT],attackBonus:1,range:[1,2],uses:10},[Pe.THUNDER]:{label:"Thunder",description:"",type:te.REASON,damage:[Et.d2,1],damageType:[Ye.INT],critBonus:1,attackBonus:-1,range:[1,2],uses:8},[Pe.WIND]:{label:"Wind",description:"",type:te.REASON,followUpBonus:1,acBonus:1,attackBonus:3,damage:[1],damageType:[Ye.INT],critBonus:2,range:[1,2],uses:12},[Pe.BLIZZARD]:{label:"Blizzard",description:"",type:te.REASON,damage:[Et.d2,1],damageType:[Ye.INT],attackBonus:-3,critBonus:3,range:[1,2],uses:10},[Pe.BOLGANONE]:{label:"Bolganone",description:"",type:te.REASON,damage:[Et.d3,1],damageType:[Ye.INT],range:[1,2],uses:5},[Pe.THORON]:{label:"Thoron",description:"",type:te.REASON,damage:[Et.d3,1],damageType:[Ye.INT],attackBonus:-2,critBonus:2,range:[1,3],uses:4},[Pe.CUTTING_GALE]:{label:"Cutting Gale",description:"",type:te.REASON,damage:[Et.d2,1],damageType:[Ye.INT],attackBonus:2,critBonus:2,range:[1,2],uses:6},[Pe.SAGITTAE]:{label:"Sagittae",description:"",type:te.REASON,damage:[Et.d2,1],damageType:[Ye.INT],attackBonus:1,critBonus:1,range:[1,2],uses:10},[Pe.HAILSTORM]:{label:"Hailstorm",description:"",type:te.REASON,damage:[Et.d5],damageType:[Ye.INT],attackBonus:-3,critBonus:3,range:[1,2],uses:6},[Pe.HEAL]:{label:"Heal",description:"",isHealing:!0,type:te.FAITH,damage:[2],damageType:[Ye.INT],range:[1],uses:8},[Pe.NOSFERATU]:{label:"Nosferatu",description:"Heals user for damage dealt / 2 (rounded down)",type:te.FAITH,damage:[1],damageType:[Ye.INT],attackBonus:-1,range:[1,2],uses:8},[Pe.SERAPHIM]:{label:"Seraphim",description:"",type:te.FAITH,damage:[Et.d2,1],damageType:[Ye.INT],attackBonus:-2,critBonus:1,range:[1,2],uses:8},[Pe.RECOVER]:{label:"Recover",description:"",type:te.FAITH,isHealing:!0,damage:[8],damageType:[Ye.INT],range:[1],uses:5},[Pe.PHYSIC]:{label:"Physic",description:"",type:te.FAITH,isHealing:!0,damage:[2],damageType:[Ye.INT],range:["1","2 + 2 * INT"],uses:5},[Pe.RESTORE]:{label:"Restore",description:"Removes all status effects from targeted player",type:te.FAITH,damage:[0],damageType:[Ye.INT],range:["1","2 + INT"],uses:10},[Pe.WARD]:{label:"Ward",description:"Give targeted player +3 resistance. Reduces by 1 each round (cannot be stacked)",type:te.FAITH,damageType:[Ye.INT],damage:[0],range:[1],uses:5}},vh=new Set(Object.keys(tr).filter(n=>tr[n].isHealing)),[F4,M8]=Object.keys(tr).reduce((n,e)=>(Cm.includes(tr[e].type)?n[0].push(e):n[1].push(e),n),[[],[]]),Au=n=>{const{damage:e,attackBonus:t,range:i,critBonus:s,description:r,followUpBonus:l,isHealing:o}=n;return[t?`Attack: ${ws(t)}`:"",`${o?"HP Restored":"Damage"}: ${e.reduce((a,c,u)=>a+(u===0?c:ws(c)),"")}`,`Range: ${Array.isArray(i)?i==null?void 0:i.join("-"):i}`,s?`Crit Bonus: ${s}`:"",l?`AS Bonus: ${ws(l)}`:"",r].filter(a=>a).join(", ")},Te={MYRMIDON_MASTER:"MYRMIDON_MASTER",SOLDIER_MASTER:"SOLDIER_MASTER",FIGHTER_MASTER:"FIGHTER_MASTER",RANGER_MASTER:"RANGER_MASTER",MONK_MASTER:"MONK_MASTER",MERCENARY_THIEF_SKILL:"MERCENARY_THIEF_SKILL",VANTAGE:"VANTAGE",ANIMAL_WHISPERER:"ANIMAL_WHISPERER",BULLSEYE:"BULLSEYE",DEATH_BLOW:"DEATH_BLOW",ARMORED_COMBAT:"ARMORED_COMBAT",GRAPPLER:"GRAPPLER",FIENDISH_BLOW:"FIENDISH_BLOW",HEAL_PLUS:"HEAL_PLUS",SWORD_PROWESS_1:"SWORD_PROWESS_1",SWORD_PROWESS_2:"SWORD_PROWESS_2",SWORD_PROWESS_3:"SWORD_PROWESS_3",SWORD_PROWESS_4:"SWORD_PROWESS_4",SWORD_PROWESS_5:"SWORD_PROWESS_5",AXE_PROWESS_1:"AXE_PROWESS_1",AXE_PROWESS_2:"AXE_PROWESS_2",AXE_PROWESS_3:"AXE_PROWESS_3",AXE_PROWESS_4:"AXE_PROWESS_4",AXE_PROWESS_5:"AXE_PROWESS_5",LANCE_PROWESS_1:"LANCE_PROWESS_1",LANCE_PROWESS_2:"LANCE_PROWESS_2",LANCE_PROWESS_3:"LANCE_PROWESS_3",LANCE_PROWESS_4:"LANCE_PROWESS_4",LANCE_PROWESS_5:"LANCE_PROWESS_5",BOW_PROWESS_1:"BOW_PROWESS_1",CLOSE_COUNTER:"CLOSE_COUNTER",BOW_PROWESS_2:"BOW_PROWESS_2",BOW_PROWESS_3:"BOW_PROWESS_3",BOW_PROWESS_4:"BOW_PROWESS_4",BOW_PROWESS_5:"BOW_PROWESS_5",FISTS_PROWESS_1:"FISTS_PROWESS_1",FISTS_PROWESS_2:"FISTS_PROWESS_2",FISTS_PROWESS_3:"FISTS_PROWESS_3",FISTS_PROWESS_4:"FISTS_PROWESS_4",FISTS_PROWESS_5:"FISTS_PROWESS_5",REASON_PROWESS_1:"REASON_PROWESS_1",REASON_PROWESS_2:"REASON_PROWESS_2",REASON_PROWESS_3:"REASON_PROWESS_3",REASON_PROWESS_4:"REASON_PROWESS_4",REASON_PROWESS_5:"REASON_PROWESS_5",FAITH_PROWESS_1:"FAITH_PROWESS_1",FAITH_PROWESS_2:"FAITH_PROWESS_2",FAITH_PROWESS_3:"FAITH_PROWESS_3",FAITH_PROWESS_4:"FAITH_PROWESS_4",FAITH_PROWESS_5:"FAITH_PROWESS_5",LEADERSHIP_PROWESS_1:"LEADERSHIP_PROWESS_1",LEADERSHIP_PROWESS_2:"LEADERSHIP_PROWESS_2",LEADERSHIP_PROWESS_3:"LEADERSHIP_PROWESS_3",LEADERSHIP_PROWESS_4:"LEADERSHIP_PROWESS_4",LEADERSHIP_PROWESS_5:"LEADERSHIP_PROWESS_5",WEIGHT_MINUS_3:"WEIGHT_MINUS_3",AGILE_RIDER:"AGILE_RIDER",OFFICERS_DUTY:"OFFICERS_DUTY",SONGSTRESS:"SONGSTRESS",CONFIDENCE:"CONFIDENCE",PERSECUTION_COMPLEX:"PERSECUTION_COMPLEX",BORN_FIGHTER:"BORN_FIGHTER",CATNAP:"CATNAP",HUNTERS_BOON:"HUNTERS_BOON",LIVE_TO_SERVE:"LIVE_TO_SERVE",STAUNCH_SHIELD:"STAUNCH_SHIELD",LONE_WOLF:"LONE_WOLF",PERSEVERANCE:"PERSEVERANCE",PHILANDER:"PHILANDER",LADY_KNIGHT:"LADY_KNIGHT",DISTINGUISHED_HOUSE:"DISTINGUISHED_HOUSE",ADVOCATE:"ADVOCATE",GOODY_BASKET:"GOODY_BASKET",WATCHFUL_EYE:"WATCHFUL_EYE",ANIMAL_FRIEND:"ANIMAL_FRIEND",RIVALRY:"RIVALRY",INFIRMARY_MASTER:"INFIRMARY_MASTER",CREST_SCHOLAR:"CREST_SCHOLAR",FIGHTING_SPIRIT:"FIGHTING_SPIRIT",COMPASSION:"COMPASSION",GUARDIAN:"GUARDIAN",LILYS_POISE:"LILYS_POISE",VETERAN_KNIGHT:"VETERAN_KNIGHT",SURVIVAL_INSTINCT:"SURVIVAL_INSTINCT"},_s={MYRMIDON_MASTER:{label:"Myrmidon Master",description:"+1 AC",acBonus:1},SOLDIER_MASTER:{label:"Soldier Master",description:"+1 protection",protectionBonus:1},FIGHTER_MASTER:{label:"Fighter Master",description:"+1 crit range if the weapon does not have an innate crit chance"},RANGER_MASTER:{label:"Ranger Master",description:"+1 to attack when shooting from cover",queries:[{prompt:"ranged attack from cover?",compatibleWeapons:V4,options:[{label:"No"},{label:"Yes",attackBonus:[1],description:"+1 attack"}]}]},MONK_MASTER:{label:"Monk Master",description:"+1 resilience",resilienceBonus:1},MERCENARY_THIEF_SKILL:{label:"Swift",description:"+1 AC",acBonus:1},VANTAGE:{label:"Vantage",description:"If foe initiates combat, and if HP is  50%, unit still attacks first"},ANIMAL_WHISPERER:{label:"Animal Whisperer",description:"You and adjacent allies may roll saves from being dismounted with advantage"},BULLSEYE:{label:"Bullseye",description:"+4 to hit",attackBonus:{ANY:[4]}},DEATH_BLOW:{label:"Death Blow",description:"+2 damage when initiating an attack on already damaged targets",queries:[{prompt:"is target damaged?",compatibleWeapons:[te.SWORD,te.AXE,te.LANCE,te.FISTS,te.BOW],options:[{label:"No"},{label:"Yes",damageBonus:[2],description:"+2 damage"}]}]},ARMORED_COMBAT:{label:"Armored Combat",description:"+1 protection when initiating combat",queries:[{prompt:"are you initiating combat?",compatibleWeapons:[te.SWORD,te.AXE,te.LANCE,te.FISTS,te.BOW],options:[{label:"No"},{label:"Yes",protectionBonus:1,description:"+1 protection"}]}]},GRAPPLER:{label:"Grappler",description:"Gain the Reposition, Pull back, and Shove combat arts. These do not take up combat art slots"},FIENDISH_BLOW:{label:"Fiendish Blow",description:"+2 damage when attacking an undamaged unit",queries:[{prompt:"is target at full hp?",compatibleWeapons:[te.REASON,te.FAITH],options:[{label:"No"},{label:"Yes",damageBonus:[2],description:"+2 damage"}]}]},HEAL_PLUS:{label:"Heal Plus",description:"Doubles number of usages of Heal and increases the HP healed by 1d2. Does not stack with Priest class",bonusCharges:{[Pe.HEAL]:8},attackBonus:{[Pe.HEAL]:[Et.d2]}},[Te.SWORD_PROWESS_1]:{label:"Sword Prowess 1",description:"+1 attack, +1 AC when wielding a sword",attackBonus:{[te.SWORD]:[1]},acBonus:1,acBonusCompatibility:[te.SWORD]},[Te.SWORD_PROWESS_2]:{label:"Sword Prowess 2",description:"+1 attack, +2 AC when wielding a sword",attackBonus:{[te.SWORD]:[1]},acBonus:2,acBonusCompatibility:[te.SWORD]},[Te.SWORD_PROWESS_3]:{label:"Sword Prowess 3",description:"+2 attack, +2 AC when wielding a sword",attackBonus:{[te.SWORD]:[2]},acBonus:2,acBonusCompatibility:[te.SWORD]},[Te.SWORD_PROWESS_4]:{label:"Sword Prowess 4",description:"+2 attack, +3 AC when wielding a sword",attackBonus:{[te.SWORD]:[2]},acBonus:3,acBonusCompatibility:[te.SWORD]},[Te.SWORD_PROWESS_5]:{label:"Sword Prowess 5",description:"+2 attack, +4 AC when wielding a sword",attackBonus:{[te.SWORD]:[2]},acBonus:4,acBonusCompatibility:[te.SWORD]},[Te.AXE_PROWESS_1]:{label:"Axe Prowess 1",description:"+1 attack, +1 AC when wielding an axe",attackBonus:{[te.AXE]:[1]},acBonus:1,acBonusCompatibility:[te.AXE]},[Te.AXE_PROWESS_2]:{label:"Axe Prowess 2",description:"+1 attack, +2 AC when wielding an axe",attackBonus:{[te.AXE]:[1]},acBonus:2,acBonusCompatibility:[te.AXE]},[Te.AXE_PROWESS_3]:{label:"Axe Prowess 3",description:"+2 attack, +2 AC when wielding an axe",attackBonus:{[te.AXE]:[2]},acBonus:2,acBonusCompatibility:[te.AXE]},[Te.AXE_PROWESS_4]:{label:"Axe Prowess 4",description:"+2 attack, +3 AC when wielding an axe",attackBonus:{[te.AXE]:[2]},acBonus:3,acBonusCompatibility:[te.AXE]},[Te.AXE_PROWESS_5]:{label:"Axe Prowess 5",description:"+2 attack, +4 AC when wielding an axe",attackBonus:{[te.AXE]:[2]},acBonus:4,acBonusCompatibility:[te.AXE]},[Te.LANCE_PROWESS_1]:{label:"Lance Prowess 1",description:"+1 attack, +1 AC when wielding a lance",attackBonus:{[te.LANCE]:[1]},acBonus:1,acBonusCompatibility:[te.LANCE]},[Te.LANCE_PROWESS_2]:{label:"Lance Prowess 2",description:"+1 attack, +2 AC when wielding a lance",attackBonus:{[te.LANCE]:[1]},acBonus:2,acBonusCompatibility:[te.LANCE]},[Te.LANCE_PROWESS_3]:{label:"Lance Prowess 3",description:"+2 attack, +2 AC when wielding a lance",attackBonus:{[te.LANCE]:[2]},acBonus:2,acBonusCompatibility:[te.LANCE]},[Te.LANCE_PROWESS_4]:{label:"Lance Prowess 4",description:"+2 attack, +3 AC when wielding a lance",attackBonus:{[te.LANCE]:[2]},acBonus:3,acBonusCompatibility:[te.LANCE]},[Te.LANCE_PROWESS_5]:{label:"Lance Prowess 5",description:"+2 attack, +4 AC when wielding a lance",attackBonus:{[te.LANCE]:[2]},acBonus:4,acBonusCompatibility:[te.LANCE]},[Te.BOW_PROWESS_1]:{label:"Bow Prowess 1",description:"+1 attack, +1 AC when wielding a bow",attackBonus:{[te.BOW]:[1]},acBonus:1,acBonusCompatibility:[te.BOW]},[Te.CLOSE_COUNTER]:{label:"Close Counter",description:"Enables unit to retaliate against adjacent attackers"},[Te.BOW_PROWESS_2]:{label:"Bow Prowess 2",description:"+1 attack, +2 AC when wielding a bow",attackBonus:{[te.BOW]:[1]},acBonus:2,acBonusCompatibility:[te.BOW]},[Te.BOW_PROWESS_3]:{label:"Bow Prowess 3",description:"+2 attack, +2 AC when wielding a bow",attackBonus:{[te.BOW]:[2]},acBonus:2,acBonusCompatibility:[te.BOW]},[Te.BOW_PROWESS_4]:{label:"Bow Prowess 4",description:"+2 attack, +3 AC when wielding a bow",attackBonus:{[te.BOW]:[2]},acBonus:3,acBonusCompatibility:[te.BOW]},[Te.BOW_PROWESS_5]:{label:"Bow Prowess 5",description:"+2 attack, +4 AC when wielding a bow",attackBonus:{[te.BOW]:[2]},acBonus:4,acBonusCompatibility:[te.BOW]},[Te.FISTS_PROWESS_1]:{label:"Fists Prowess 1",description:"+1 attack, +1 AC when wielding fist weapons",attackBonus:{[te.FISTS]:[1]},acBonus:1,acBonusCompatibility:[te.FISTS]},[Te.FISTS_PROWESS_2]:{label:"Fists Prowess 2",description:"+1 attack, +2 AC when wielding fist weapons",attackBonus:{[te.FISTS]:[1]},acBonus:2,acBonusCompatibility:[te.FISTS]},[Te.FISTS_PROWESS_3]:{label:"Fists Prowess 3",description:"+2 attack, +2 AC when wielding fist weapons",attackBonus:{[te.FISTS]:[2]},acBonus:2,acBonusCompatibility:[te.FISTS]},[Te.FISTS_PROWESS_4]:{label:"Fists Prowess 4",description:"+2 attack, +3 AC when wielding fist weapons",attackBonus:{[te.FISTS]:[2]},acBonus:3,acBonusCompatibility:[te.FISTS]},[Te.FISTS_PROWESS_5]:{label:"Fists Prowess 5",description:"+2 attack, +4 AC when wielding fist weapons",attackBonus:{[te.FISTS]:[2]},acBonus:4,acBonusCompatibility:[te.FISTS]},[Te.REASON_PROWESS_1]:{label:"Reason Prowess 1",description:"+1 attack, +1 AC when attacking with reason magic",attackBonus:{[te.REASON]:[1]},acBonus:1,acBonusCompatibility:[te.REASON]},[Te.REASON_PROWESS_2]:{label:"Reason Prowess 2",description:"+1 attack, +2 AC when attacking with reason magic",attackBonus:{[te.REASON]:[1]},acBonus:2,acBonusCompatibility:[te.REASON]},[Te.REASON_PROWESS_3]:{label:"Reason Prowess 3",description:"+2 attack, +2 AC when attacking with reason magic",attackBonus:{[te.REASON]:[2]},acBonus:2,acBonusCompatibility:[te.REASON]},[Te.REASON_PROWESS_4]:{label:"Reason Prowess 4",description:"+2 attack, +3 AC when attacking with reason magic",attackBonus:{[te.REASON]:[2]},acBonus:3,acBonusCompatibility:[te.REASON]},[Te.REASON_PROWESS_5]:{label:"Reason Prowess 5",description:"+2 attack, +4 AC when attacking with reason magic",attackBonus:{[te.REASON]:[2]},acBonus:4,acBonusCompatibility:[te.REASON]},[Te.FAITH_PROWESS_1]:{label:"Faith Prowess 1",description:"+1 attack, +1 AC when attacking with faith magic",attackBonus:{[te.FAITH]:[1]},acBonus:1,acBonusCompatibility:[te.REASON]},[Te.FAITH_PROWESS_2]:{label:"Faith Prowess 2",description:"+1 attack, +2 AC when attacking with faith magic",attackBonus:{[te.FAITH]:[1]},acBonus:2,acBonusCompatibility:[te.REASON]},[Te.FAITH_PROWESS_3]:{label:"Faith Prowess 3",description:"+2 attack, +2 AC when attacking with faith magic",attackBonus:{[te.FAITH]:[2]},acBonus:2,acBonusCompatibility:[te.REASON]},[Te.FAITH_PROWESS_4]:{label:"Faith Prowess 4",description:"+2 attack, +3 AC when attacking with faith magic",attackBonus:{[te.FAITH]:[2]},acBonus:3,acBonusCompatibility:[te.REASON]},[Te.FAITH_PROWESS_5]:{label:"Faith Prowess 5",description:"+2 attack, +4 AC when attacking with faith magic",attackBonus:{[te.FAITH]:[2]},acBonus:4,acBonusCompatibility:[te.REASON]},[Te.LEADERSHIP_PROWESS_1]:{label:"Leadership Prowess 1",description:"+1 damage on gambits",damageBonus:{[te.LEADERSHIP]:[1]}},[Te.LEADERSHIP_PROWESS_2]:{label:"Leadership Prowess 2",description:"+1 attack, +1 damage on gambits",attackBonus:{[te.LEADERSHIP]:[1]},damageBonus:{[te.LEADERSHIP]:[1]}},[Te.LEADERSHIP_PROWESS_3]:{label:"Leadership Prowess 3",description:"+2 attack, +1 damage on gambits",attackBonus:{[te.LEADERSHIP]:[2]},damageBonus:{[te.LEADERSHIP]:[1]}},[Te.LEADERSHIP_PROWESS_4]:{label:"Leadership Prowess 4",description:"+2 attack, +2 damage on gambits",attackBonus:{[te.LEADERSHIP]:[2]},damageBonus:{[te.LEADERSHIP]:[2]}},[Te.LEADERSHIP_PROWESS_5]:{label:"Leadership Prowess 5",description:"+3 attack, +2 damage on gambits",attackBonus:{[te.LEADERSHIP]:[3]},damageBonus:{[te.LEADERSHIP]:[2]}},[Te.WEIGHT_MINUS_3]:{label:"Heavy Lifter",description:"+2 attack speed",followUpBonus:2},[Te.AGILE_RIDER]:{label:"Agile Rider",description:"+1 to attack, +1 AC while mounted",acBonus:1,attackBonus:{ANY:[1]}},[Te.OFFICERS_DUTY]:{label:"Officer's Duty",description:"+1d2 damage on Gambits"},[Te.SONGSTRESS]:{label:"Songstress",description:"Adjacent allies recover up to 10% of max HP at the start of each turn."},[Te.CONFIDENCE]:{label:"Confidence",description:"Grants +3 to Hit and +3 AC when unit is at full HP."},[Te.PERSECUTION_COMPLEX]:{label:"Persecution Complex",description:"Grants +1d2 damage when unit is not at full HP."},[Te.BORN_FIGHTER]:{label:"Born Fighter",description:"Adjacent foes suffer -2 AC during combat."},[Te.CATNAP]:{label:"Catnap",description:"If unit takes no action except Wait, recovers up to 10% of max HP."},[Te.HUNTERS_BOON]:{label:"Hunter's Boon",description:"Grants Crit +4 when foe's HP is  50%."},[Te.LIVE_TO_SERVE]:{label:"Live to Serve",description:"When healing an ally with white magic, unit recovers the same amount of HP."},[Te.STAUNCH_SHIELD]:{label:"Staunch Shield",description:"If unit takes no action except Wait, grants Protection +1 until your next turn."},[Te.LONE_WOLF]:{label:"Lone Wolf",description:"Unit deals 1d2 extra damage when no battalion is assigned or when battalion endurance is 0."},[Te.PERSEVERANCE]:{label:"Perseverance",description:"Use Rally to grant +1 damage to an ally until your next turn."},[Te.PHILANDER]:{label:"Philander",description:"If a female ally is adjacent, unit deals 1 extra damage"},[Te.LADY_KNIGHT]:{label:"Lady Knight",description:"Grants +1 damage and Hit +5 with gambits."},[Te.DISTINGUISHED_HOUSE]:{label:"Distinguished House",description:"Unit deals 1 extra damage while in formation with a battalion."},[Te.ADVOCATE]:{label:"Advocate",description:"Adjacent male allies deal 1 extra damage during combat."},[Te.GOODY_BASKET]:{label:"Goody Basket",description:"Chance to recover up to 10% of max HP at the start of each turn. DC 18"},[Te.WATCHFUL_EYE]:{label:"Watchful Eye",description:"Grants Hit +20."},[Te.ANIMAL_FRIEND]:{label:"Animal Friend",description:"	Unit recovers up to 20% of max HP at the start of each turn when adjacent to a cavalry or flying ally."},[Te.RIVALRY]:{label:"Rivalry",description:"If a male ally is adjacent, unit deals 1 extra damage"},[Te.INFIRMARY_MASTER]:{label:"Infirmary Master",description:"Adjacent allies gain Crit Avo +10 during combat."},[Te.CREST_SCHOLAR]:{label:"Crest Scholar",description:"Use Rally to grant 1d2 damage to an ally until your next turn (only applies to magic attacks)"},[Te.FIGHTING_SPIRIT]:{label:"Fighting Spirit",description:"Unit gains +1 Protection when no battalion is assigned or when battalion endurance is 0."},[Te.COMPASSION]:{label:"Compassion",description:"Use Rally to grant +1 Crit Range to an ally."},[Te.GUARDIAN]:{label:"Guardian",description:"Adjacent female allies deal 1d2 extra damage during combat"},[Te.LILYS_POISE]:{label:"Lily's Poise",description:"Adjacent allies gain +1 Protection during combat."},[Te.VETERAN_KNIGHT]:{label:"Veteran Knight",description:"Unit gains +1 Protection while in formation with a battalion."},[Te.SURVIVAL_INSTINCT]:{label:"Survival Instinct",description:"If unit initiates combat and defeats foe, grants +1 damage, +1 AC, +1 AS, +5 to hit"}};var Nn=(n=>(n.Weapon="Weapon",n.CombatSkill="Combat Skill",n.CombatArt="Combat Art",n.PlayerStat="Player Stat",n))(Nn||{}),ns=(n=>(n.LEFT_END="LEFT_END",n.CENTER="CENTER",n.RIGHT_START="RIGHT_START",n.BOTTOM_CENTER="BOTTOM_CENTER",n))(ns||{});const kn={MYRMIDON:"MYRMIDON",SOLDIER:"SOLDIER",FIGHTER:"FIGHTER",RANGER:"RANGER",MONK:"MONK",MERCENARY:"MERCENARY",THIEF:"THIEF",CAVALIER:"CAVALIER",ARCHER:"ARCHER",BRIGAND:"BRIGAND",ARMORED_KNIGHT:"ARMORED_KNIGHT",BRAWLER:"BRAWLER",MAGE:"MAGE",PRIEST:"PRIEST"},td=new Set([kn.MYRMIDON,kn.SOLDIER,kn.FIGHTER,kn.RANGER,kn.MONK]),To=new Set([kn.MERCENARY,kn.THIEF,kn.CAVALIER,kn.ARCHER,kn.BRIGAND,kn.ARMORED_KNIGHT,kn.BRAWLER,kn.MAGE,kn.PRIEST]),Xt={[kn.MYRMIDON]:{label:"Myrmidon",unlocks:{playerStats:{[Ye.DEX]:12},combatArts:{[vt.SWAP]:1},weapons:{[Pe.IRON_SWORD]:1}},whenEquipped:{xpMods:{[te.SWORD]:1.3}},whenMastered:{combatSkills:{[Te.MYRMIDON_MASTER]:1}}},[kn.SOLDIER]:{label:"Soldier",unlocks:{pickOne:[{type:Nn.PlayerStat,options:[{stat:Ye.DEX,value:12},{stat:Ye.STR,value:12}]}],combatArts:{[vt.REPOSITION]:1},weapons:{[Pe.IRON_LANCE]:1}},whenEquipped:{xpMods:{[te.LANCE]:1.3}},whenMastered:{combatSkills:{[Te.SOLDIER_MASTER]:1}}},[kn.FIGHTER]:{label:"Fighter",unlocks:{pickOne:[{type:Nn.PlayerStat,options:[{stat:Ye.DEX,value:12},{stat:Ye.STR,value:12}]}],combatArts:{[vt.SHOVE]:1},weapons:{[Pe.IRON_AXE]:1,[Pe.IRON_GAUNTLETS]:1}},whenEquipped:{xpMods:{[te.FISTS]:1.3,[te.AXE]:1.3}},whenMastered:{combatSkills:{[Te.FIGHTER_MASTER]:1}}},[kn.RANGER]:{label:"Ranger",unlocks:{playerStats:{[Ye.DEX]:12},combatArts:{[vt.PULL_BACK]:1},weapons:{[Pe.IRON_BOW]:1}},whenEquipped:{xpMods:{[te.BOW]:1.3}},whenMastered:{combatSkills:{[Te.RANGER_MASTER]:1}}},[kn.MONK]:{label:"Monk",canUseMagic:!0,unlocks:{playerStats:{[Ye.INT]:12},combatArts:{[vt.PULL_BACK]:1}},whenEquipped:{xpMods:{[te.REASON]:1.3,[te.FAITH]:1.3}},whenMastered:{combatSkills:{[Te.MONK_MASTER]:1}}},[kn.MERCENARY]:{label:"Mercenary",unlocks:{playerStats:{[Ye.DEX]:14},combatSkills:{[Te.MERCENARY_THIEF_SKILL]:1},weapons:{[Pe.STEEL_SWORD]:1,[Pe.IRON_AXE]:1}},whenEquipped:{xpMods:{[te.SWORD]:1.6,[te.AXE]:1.3},msBonus:1},whenMastered:{combatSkills:{[Te.VANTAGE]:1}}},[kn.THIEF]:{label:"Thief",unlocks:{playerStats:{[Ye.DEX]:14},combatSkills:{[Te.MERCENARY_THIEF_SKILL]:1},weapons:{[Pe.STEEL_SWORD]:1,[Pe.IRON_BOW]:1}},whenEquipped:{xpMods:{[te.SWORD]:1.6,[te.BOW]:1.3},playerSkills:{[sn.LOCKPICKING]:jn.PROFICIENT},msBonus:1},whenMastered:{playerSkills:{[sn.LOCKPICKING]:jn.PROFICIENT,[sn.SLEIGHT_OF_HAND]:jn.PROFICIENT}}},[kn.CAVALIER]:{label:"Cavalier",unlocks:{playerStats:{[Ye.DEX]:12,[Ye.WIS]:12},playerSkills:{[sn.ANIMAL_HANDLING]:jn.PROFICIENT},weapons:{[Pe.STEEL_LANCE]:1,[Pe.PIKE]:1},pickOne:[{type:Nn.Weapon,options:[Pe.IRON_SWORD,Pe.IRON_AXE,Pe.IRON_BOW]}]},whenEquipped:{xpMods:{[te.LANCE]:1.6},xpMooch:{[te.RIDING]:1},playerSkills:{[sn.LOCKPICKING]:jn.PROFICIENT},msBonus:3},whenMastered:{playerSkills:{[sn.LOCKPICKING]:jn.PROFICIENT},combatSkills:{[Te.ANIMAL_WHISPERER]:1}}},[kn.ARCHER]:{label:"Archer",unlocks:{playerStats:{[Ye.DEX]:14},weapons:{[Pe.STEEL_BOW]:1,[Pe.SHORT_BOW]:1,[Pe.IRON_LANCE]:1}},whenEquipped:{bonusRange:{[te.BOW]:1},msBonus:1,xpMods:{[te.BOW]:1.6,[te.SWORD]:1.3}},whenMastered:{combatSkills:{[Te.BULLSEYE]:1}}},[kn.BRIGAND]:{label:"Brigand",unlocks:{hpBonus:1,playerStats:{[Ye.STR]:14},combatSkills:{[Te.MERCENARY_THIEF_SKILL]:1},weapons:{[Pe.STEEL_AXE]:1,[Pe.HAND_AXE]:1,[Pe.STEEL_GAUNTLETS]:1}},whenEquipped:{msBonus:1,xpMods:{[te.AXE]:1.6,[te.FISTS]:1.3}},whenMastered:{combatSkills:{[Te.DEATH_BLOW]:1}}},[kn.ARMORED_KNIGHT]:{label:"Armored Knight",unlocks:{hpBonus:1,playerStats:{[Ye.STR]:12,[Ye.CON]:14},weapons:{[Pe.STEEL_AXE]:1,[Pe.STEEL_LANCE]:1,[Pe.HAMMER]:1,[Pe.IRON_LANCE]:1,[Pe.IRON_AXE]:1}},whenEquipped:{followUpBonus:-2,protectionBonus:2,xpMods:{[te.AXE]:1.6,[te.LANCE]:1.6},xpMooch:{[te.HEAVY_ARMOR]:1}},whenMastered:{combatSkills:{[Te.ARMORED_COMBAT]:1}}},[kn.BRAWLER]:{label:"Brawler",unlocks:{pickOne:[{type:Nn.PlayerStat,description:"Pick different stats per dropdown (e.g. if you pick 14 DEX in this dropdown, pick 12 STR in the other)",disableRandom:!0,options:[{stat:Ye.DEX,value:14},{stat:Ye.STR,value:14}]},{type:Nn.PlayerStat,options:[{stat:Ye.DEX,value:12},{stat:Ye.STR,value:12}]}],hpBonus:1,combatSkills:{[Te.MERCENARY_THIEF_SKILL]:1},weapons:{[Pe.STEEL_GAUNTLETS]:1,[Pe.CLOTH_GAUNTLETS]:1}},whenEquipped:{msBonus:1,xpMods:{[te.FISTS]:1.6,[te.AXE]:1.3}},whenMastered:{combatSkills:{[Te.GRAPPLER]:1}}},[kn.MAGE]:{label:"Mage",canUseMagic:!0,unlocks:{playerStats:{[Ye.INT]:14},pickOne:[{type:Nn.Weapon,options:["DOUBLE_BASE_USES",Pe.FIRE,Pe.WIND,Pe.THUNDER,Pe.BLIZZARD]}]},whenEquipped:{xpMods:{[te.REASON]:1.6,[te.FAITH]:1.3}},whenMastered:{combatSkills:{[Te.FIENDISH_BLOW]:1}}},[kn.PRIEST]:{label:"Priest",canUseMagic:!0,unlocks:{playerStats:{[Ye.INT]:14},playerSkills:{[sn.RELIGION]:jn.PROFICIENT}},whenEquipped:{xpMods:{[te.FAITH]:1.6,[te.REASON]:1.3}},whenMastered:{combatSkills:{[Te.HEAL_PLUS]:1}}}},Vo=Object.keys(Xt).reduce((n,e)=>(n[e]=Xt[e].label,n),{}),ey={2:new Set(Object.values(kn)),4:new Set(td),6:new Set(To)},B8=n=>Object.keys(ey).reduce((e,t)=>n.some(i=>ey[t].has(i))?Math.max(parseInt(t),e):e,2),L8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAWRSURBVHja7FtdiFVVFD5TglpRIIgyYcZ0LjqV2BRh2K8h6rlohMiED4KO+YPjHRsaCiKyghDyobyawpiDSg85Ug8q90bQy2Q+GOmMlQn3+JNlIEbRUCYWTWvXt2GxWGffmYtzzsycs+Bj333PPuvs/Z31t/edqRsYGPDSLDd5KZeMgIyAjICMgFTLOPthbUtznM+dRphH2I/+B4QthG/jmkBnV3eiFrCAsJj1HyesTpMLTCVMYf3JaYsBs0FCaoPgFNG/kpQVjEuIgHrRv0i4O00W4BMqrN9LeCCJ+SRBQIC2zL47SbgNJIx5Any0obAALy0EaBZwgWWHMU3AeBAQiu9/IfxEuHcsEHALoRWtlHloK8q104T5hOlD1DkiLWAboUeZ8CrF/zkBRjYoi++BzlFhAVcJ7YSHCH0s6Jm2WfF/K2fQviTu6YOudugeEQQEbJKabMcifbQltugwgoC9hOvMRUporY7tVTJLECcBRUyu4NDRhsX6grBixPg/QYLMFiF0aTIRc6g49A6bBYR46OeERmVM1MRdb/IFJT60RcSMFYSvMYcwbgswD3yacJwwF5Xc+4RJYpwx3TWsf63KM69FuBKXWYRTOEy5h/AZ4akIkoY1CP5AmEPYg/y+Grl8hRjXxRY2gbDcoXO5qBSlBb1JOAESjHQjdV5KMgs8T9jECp1nxPV/YCFW3op4bh2ueY5aYQHbwb5OeG4kpEHzlt7G5y8JrynPaGImPl0slBPDt8Q5ZcxS+L2RVwmbCXcmRUAripdtyNXLEA++U8ZNgC8b0+1HsdPAxjRgXD8WblNoQegyLvYIYQfhd1jBjwiE/nATYI6wOgiHka/fIZwl3I9Y8BHhbyVbFEU0t9awno2zn5uE75t7t4qK8iqIMW9+HcYXWO1QGAoZLgJMRH8Si+4F+1sRed/DxmWJpx9l+5h8SUll57DQBnFPE67JANgBq1qpVJydsJg8MkbAahRbGzgJqbM/j69taTY3v8F2ZLeKsX0oUz8dRI1QEikzV6OblUR+XyWKJU0KIM+PSN/Gejs6u7r/S6/8TNAEsCNoZxBmigAzG4XKzRGlLI/e4SDMMGB6AkWnL4gzOo869JmqsEUp0/thwfbQ5TLhG3uRE/Az8iyXuwj3QSmHreeLSgFi3zg3v6LI6SWxKSoAeZFdfFYQRZXDc7HwFqRSq9fCxKmBWoPgRShpw6JyrJTlgSeISI95FqQCYdZlUTFy1wlwTwgdbQ5XO4oizNQaG0GCjQmha/EyBtSyHygomxbNlK1bVJgF5RTXsTu/HD7nFX3yuXtQbR4byuRvxG+DZUywEXnZxxt5QnGJstiyvqjo2yK22mVl8c8KC8qhEj1W6yJuRCUoA97uKuPN5uWQ8n3XIDJM60g7EWpAjl7EyFhT5bDiZYe+TVUOXVYqmWNWUgTMR8q0k2yHO/QohyfcWr5y6Dwjsoo85LgEt8szy/sCZXisBGwE+7cTdnr//7D5rlIKF8Tb91E6R0m9eOuBsh+w8cek51dQJn+IOcVGgPHFT/DGW1FDeI59AJddDr0fRxy/aWn2OgLnTAThRXES0Ih9QOg4pCyyt8XT42MRVlCPTRXPMGVGgu8IwqZCXZxUFog6NPVRjORZGzIStMMOjxU/ZXavX+uhZxIEPEpYyDYlXDaj1X4CexDtIaWiLEKnPxoI6EVw3KFcO8jig+Y2Rg5EpMcZtR58xk3AH4Amf7GqUAuaZoHHHb4+KlxgMCW0J0jwxbXYJAkCTrFCyhMuUUkDAaeVQJhLkwVcwfmiFgDDNBBgraBRWECYxESSIuBXwsOsP5m5RioIMAeTd4jvvk8TAUZ+E/0LabOAy+LtJ2IBSf2tsPk98Tzr7/P0Y7Jhl7rsHydTLhkBGQEZARkBqZZ/BRgA5NNf3keNKAUAAAAASUVORK5CYII=",V8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAZkSURBVHja7FtraFxFFN6tiRQtFCLi+0WzKK2SaEF/+IDUYLsrVmmsRatgfL+ytdJisb5Q7D9fuY3aSLVgoDWxpVLZFTGtgu0Pob6wVNz4o4KtgkTFttTGsn6nPUOPx7n37tzdu9ewO3CYu3fmzpzzzZnzmEnS5XI51chlSqrBSxOAJgBNAJoANHRp0S/S6XTdJr+3d+HJqFrffHvk93rNqd1+S8IL8AboT9BDjboFFoPuaNqABgdgGtuCyQsABGgHZR2/OZdsLv/MOH7bR3P+LwAgZlCVQP2On3aL5wtcwOa5Sq6g1xQATD4F9IIQ3BWA+8VzV6UfwWWOofL4ZwE8PANK1xUAEh7VEOgJflUEY56j+l8uXs1xmR9z5QUIz4LWRgUhqgZ8ALqVn7eCbnL8vkf9nhVhTy8RIPQSLnUBAIySqpu9R+qYxYocdhym1/Iu66gFZQZhLb+6G7w9EisAmOBKVH3VCI8xOlFdYmnKuzLPINB3Xxg75KpJrhqwWjLMBilVxepvIfvBz+1RrDp4OMgglNmtvhgLAMxcJ//cgImLEY2nXOnHxD5OCe1yBWE7qg/553wXLXDRAMMcIf1UROO5SDx7pEEMpAEzC+Yvizi2F2U7uQBgorVvteqD6TOJKlj958Srfh+GV1WgSWcTKS0oRjGoLgAYtdplaStUEAgtEmN4EkQV3MyFcDeEjPUyaMTyvqh4rQ0Aak8dtHTpYAoqZvV/BS2ztL8K2s/PLwXwcgKqeaCLLc1p0S9daw0I1RA/48Oxg2l73OY68e4HPiAxY/kZRDLE0+qaDao932npMua399h7yNhhKGCe5WIsP59+J9dfWdou4np/HDbAMNYBxqb77L082lqF8GdpY1dB4CT7F+VceG7xAwBtp6M637RxkFRTAIyQtAevV23vC+NzDzN0Ir83qzhWYexAwdb3Yrz1ou1BVn8S7j313UIVYKXiAoDKAqW6o6jW8M8BCE+MDoBmu/pmXrmnpUvDeAW2CUY71qHfpz65xN8UqNUcAF49sw0WgKFLVRdKS8fZEg8YTRDpskvkOCy0wAhnhP8StNTipbIiSv0xrlygX7iblQqgnxmEf7kjS5QWRQtkWYr2PwLsxso4k6EBoQU9luTlQp/vNqHvbMe8w0+NZ6m+3WL117ms/tGV0jclYTdDzFxBeIaZIjp7WHkN6cYOga4Cgzsdxvcb63WhIXtB5HkmQOdg/F+CxtfyOgdCvJc9YaW3gX5TwlOom+H8YZjfTQV9BgHnBQh/uxKe5snwWJ7yBt8xGbe7Ikz4ijTgvrtuoWzsGnIlHJ35MVuyxNwHyB1pg4e+t/HJDYFwBPQo+qxWfZ7kcDnNK563jEPa8Q7oFDVv4OrjuzP4DHLX4FvDY2EA0DHTK+xOaLJNIAPEDNB1vOe08DT5TDAx7sPEeahGeQwTFHkiVDbR4m4+adoTkJeULE37eFtsF+/mCn6p5ABAMQyANhYmysWpx1b6SAAIH8usUJ010Op0BwhPwdVm1/NDEYhlQm0Ar+BppKagnQFBUZ73OG2XrUKQjZyx2ezHHhUQ9alToGyI8AV1IEvzT+dMcl9ACJ9nO+LuBTi2bxdC7LYw18b5+RwRGvcEaEK/5fjL4/P+IOGvFYFVzqdvqwq/J4K8QEsFVn+C92VQn3FMTPnBR6CrQTdyPJ4LCKj6AoIZXTYL4ckm3VwNv1XFASE+fCozmBVbhbzCgRAvYl1R9DkV1Q5lM5ZUmunFEgeEaMIhFsQTMfyoz/V3yZJqa+E/EcLTPs5XI3zcJ0ISiLwwdlf4gDDmk2lK4U2UmXO5e0wcAAaBGJ4vQBgJSK9LQviTUsfuHo3wD0S5g0gcAAZhi9CEo3m9Jb0uqiO3banjN8eDaFsTJ481NYIBxlH677yfOiv3+Dmoi6++alb+I289ALBY/ZxPnG805DALv6PWfMTqBULKihCfL9+tikP4utsAZQ82onrXpNHy3F/dG3ydquB6bFLZACEo3R/+JF5lLDFBB8D6Ji4ektwCpAV7VTKUV7+9OIVPdAuIMigyN4rpF/MzZaHL6s1M3QHACv+VOv7XZXRS08bPyyP8rdGk1AAq61X+Tqs/lAQjiQDAWiCvvIaSWP0kNYDKa6ljf2tAqfLziXFBbkFSPQvc4gxQV5Lyppv/OdrgpQlAE4AmAI1d/hFgAC84sVsG8gvjAAAAAElFTkSuQmCC",U8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAATqSURBVHja7FtZSFRRGL6mRfsKZhJRNCItZuZDCO0LMUEQRUWLSRZBD05Ji0HZkxARUWm99BAU2QatRBYttr5E0WKl4bRQKWQSZYtlqf2H+S/9HM6999x1bO788DHnXs6dc853/vNvdyahvb1d8bN0UnwucQLiBMQJ8LckiW6uzl/oFtlDAP0AqYBBgF6A/oCuiGpAJX46LgcOnpQjwCXZB1gj2XcXYEOsHYHtgIcGfb4BigGlsWgD3gHGASp0+hQCSgBvY9kIhnR2/9D/7gU6A7YAagCTNPqEEbw8AvzWeIZZ5WbAJkBCRyUgC3AFVfgy4JZO36uCe3r24QLgGWAHjtG7oxGQhe5rMhqwdQb9Twnu6dmGH6hRDwDTAS8AOR2FAHXxfQB7AWsBRinmc8G9WoNnVBKuAVIAp50gwS4BI7nFF0o+Vw9oFNgGRYKEeRwJqdEk4BwuPoxqb6a48Mbk4lVpAuQBniAJ5wFdokEAO+sBA9emJx9J22zoWwcoQsKzMcr0lIAgoIAYrwqbBLy38PwlQDm2VwLGe0lAqURgYyTfHTDAmwFtuI79XhGQS1T/isnzy59lu1KHNkDBozDHbQISuCztsY3Jf3UoBqEB1Ba3CZgIGEOuPzhEQJNDZDA7kOYmAUu5a6YNoy1O9hdpt1r8DhYDzObuLXaLANZ3LndvIKAKcJF4BSsaYOY4DEdVf4Leg7f+S9wigKl+so5bLEW/zFLaGZJRnSq/JV1vLRpdlnBlaGSG6Wa00kxJLJe7/gI4gaocwLPHPpcjDgM2Aho0vu8PaTfrjBtAcoN4zUh+imMzGYHhcTfyzEzs4ygB1PjdxUEbBJMtRrIYCZl4JqsNNOCHxpijAGeJ2y3DnOOlICe5T0hgBOx2+ghQtT6gsbNhjNPn465mop8OCPq2aLQpmeriWzANDgkWr2aXq7jj4qgNCHLBx1GD/meIxwgo4iJnK1cO08o1WnD86wZjHge84gh0hYCj3PnVI6GcPM/vyjcdDaD9iyQWr2BIfNysFsgSQNk8ZuLYlJC2npvkNYD2PWJivBNuENCLnP/7inFtn0oN2b0gxg2iZIgehyFk8jcEhRM9YbHBTWznyKxPhgBmyDpj20rZ+jVpT9Nwg5SMKaRdaWE8dY59ce62CcgjwYoVAq6R9jCNPjQQmqpRNTJDwGdsj7VLQDIh4JDFDI5qwHQukBJpwFCbBLSRjcqzS8BWov7lFhOWRu58i4RGgoNJu97imGqJbLKRO+xkYPlVa3wPDZIVCWMEpyctAo8TslFsYc9VCKpXpgigpS6ru0+/K0SKKnphcRj7ltkcs4x4nwKzBNDd/2nSF+tNKE3CCKY5sHgFNSDMRZXSBNAgYhvgk+KcePnDxD0a7tUwG2QqP0GJvKff6cFEkyTDa7PCkrZsQZRoSADb8UUuL7onaffg3KJTwo5WvlPpsNPSn7T7RWsS0SSAvtRM8SMBVAPS/UgAdYkD/EhAwO8aQH/dke03AgKcBrC8vbefCAgK4pFMPxMglbvHCgHM/U0V3F/ARYcxS8AykmUyNCn/Xo8v83oySVEgoFTx8NfgHY2AFUqkzM4kAz/ValAVfrKk6FgsEjALcFCyL3vvfzvWCGA1/vVKpNLcHZCoRKrMiRgDtKItYC8/73g1qYT4P0d9LnEC4gTECfC3/BVgAJ2IChDHaGv1AAAAAElFTkSuQmCC",W8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAT4SURBVHja7FtbbIxBFP63qmhd2tKympDyb0LcNjQeiHgQDyseCCkS94fyQBOJ4EVEJB6El60QJEREXOKaiCXhScKLUEWCLnEPmrqre2smzqTHZG7/7r/bWf+e5GRm/7n8c745c+bMmX9DHR0dTpCpwAk45QHIAxBwKjStWLe81s/39iX8kXtWTLjNrxfs3X/cag04TXgSJ/wrSAOxBEYDMxpLuA+kgQCgkvAz9LsHpBOCAICr0YxA7gJ3/gcAhhDublAvInjWSvi9h3dF/Bp7gY9q/YTw2TSWwAtDI7id8APCK2xcAjGDrSwied4K/kFfTfvpNi6BpAdDxjSgWeAImbQfbrsRHJKiBjAvcJTGgyyB/EPbAGACVGnqhQl/4bSG0msDDQijfMhWDeilKBsJM/hcUPbGwE+oQPn+NgEQMvTjR0B6TVB22wCAYkk+ZxyhKWkCYK0GhAV+vQqAG4KyJsLtMCZXYQQZldkEQE+U/yWp05twFIxlo6D8M3oeM3jnAJsAKEX535I6UQjANCpA8gJAL1sBkNESTkgR3dQA8NVWDdCtR7pLzIf8OUW9S5xbzdMPW41ghaY8CjaAd4GpkKcIF8HvR6hstaCfbyg/1iYASjTly5Chwx7gecKzCU9DM5xUaMA7W+MBFYo+QwgA2fofhvLNCi3AMYPuftgBvwDoh/KfuLJVSP1vStrjmU0o7ADf91BbAIgqBl0vEY7SB0FfPACuou+0Q2iFPghfJACgGTjCCcDHAL5w2sNiC0nULoHaxTwa36wAEOU8QebPu5rACVP9wQJBEmj9uwrX2AoNWMgN/AIENWo5B0l07dUuWQrtkqXBlkcc0slgZDu6CoDeaKbo7M5AZZsIn4BBOhrPrkXjWM0Q2I84aMYs5+9VW5cYwQUSY0eJ3vXNRTNfjHYD3rNTAVAvEL4BLacN6USHCtKc/a0C9eRBOIR+j5P01SYB4CUIKyIG+ETQgqwDsB8ckTaJ28roruQ8L3NwKA2C9KSiXwr4GchvyzYA80C9Ke121BHaBLc7iOin5HmzZhzrUL/xbAEwhvARWHd0dtdq6icNjtElgm1U15YB1IDcZjfTAJQh4SltMWzHBIlIDlGlKWoAb3zjXmXyCsAup/Pi4grhY2nuIgMhLU+zn3rkKa7MFADjUVCDCj/HQ1tXM6OVaQKAt8UdjofrMy+O0A000JYUhOeph9MZ25fFEyIGdgCfQagm3HM8XJt59QRbUpidiIFBrBTYDBeESniwM/VddRw2AYBGi6+i51hNyyXGz8304LIBAIsG3+IOPTiY0UfiO8Qc/fcCVgMQRu7vQUUUqUrhPM3MZQCWEu4G6n9QEc6qkgRFKK3JZQCWI3eZP/MPFjhEmDZDWuOY3RRZBwA7r9Ooz3pBebVmqzxK+DEXAMkZAFx0QlwviQaVavwFen+4UdCf9QC4yIjRdXxYUq/aoK+jyBbEM7Et+g0AXa+X0UC3O/JP4PlA6FRBHaoFi53OG2d6ECuyFQAqPL3qYl+JXSS8x4d+r0Hwhb3jup8g+AVAEQjPZvUp4UWaNve5302a0951FI/wDQS/APgBxq4FZr7G4NyA3eK3GgDorTD9vGaf8/dbolPOv1flKVOhj0vgALAp7URnd2oov2vqUxDqcvEsICMaTjuX6X0+mxqQCtWCG5zsqgGE8n+dDTjlAcgDEHD6I8AAvLPstVX1hNMAAAAASUVORK5CYII=",F8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAV9SURBVHja7FtriFVVFN73GlpholJkM1JZo2WIo1JE9aNIKo5ilJY46Y8wDMLGH6bQUNhjpAii4E5aRBhET6PSUq+PH4n4R+mlCaEzhgiJ0WhlakxN3dZivk2r3d77nHPnnDnneu+Cj7PvnP1a31lr77X2OVOoVCqqnqWo6lwaBDQIqHM5L0qlhxfPT2Psiwg7CX2EOwhnkh7g9XXrkyEgJZlEmIHyRMI356oLFPM8v7QHGEbYRChZ7n0pyranX0LbYuZrwCDkakKAchmwSQuhR/zmNu0oTyAcrlULOCSUDoSygWEVZSjcYtQtp6n8UC2CywjdULDdYwElR9uaXwTZtFdV0a7DcIuasIClILVsTP4FwuUo7yV8RfgZKBDGALwtTkW9ly1Wsgxu9UoeCRhFeJFwvtjbNQl/EJZ42p7E9QuPi3SL3zsIB/PmAqcIK4yFrSWhvuXusZHwfV7XgDWElYQKlF+TQJ9b0Rf3+RjhXsKfeV4E2Q3mYcJ3EtoG0deDhLvQFyv+Esq53wU+gZ+yzHTUuYHQSXiK0OqoMw3XV2H6NRUHvAYLcCm/mzBcbHk3EvYZ9cbhur0W44BfcG2y3HtGKM8ygrDaUq8Z1zO1SIAS22G1idS0cyESbLFsh7akaLvF/0ei/F0tErCf0O+I6bsMEjjtXWvZAVh+IvxQi8nQCSh2j8jupMwh8FnbX4SPcJVW86ggJ/cuMBow5Q1PtscKv0dYbyivjLrrHG6VKQGs7K2YHJ/s9CJIMWWzMPV2hyWYEhjnAbsdaTIHRFuQND0ikq1UXeBm+G8rVmkprSHnAQoTDhDe2oRd4oMI5wGBhSyFcdrUf4/bErWA+5GyDkOmJxezGQ7T5HqzhZlvhunPJVyjBk6HZ2MX0MqfJcxynAcEYpweo87EuKF3XAt4H5OWistUNcA9U/jJ3034FOQtAGzCyt+n3OeH0j1miTloa3grzTVgDwYtG0/YPPdTDhKuAoku4fxhskf5kerfYzVzDl2Y2/4sdoEeQYDvNdJRmKjtiGwtMr+jnvYr87oNFg03mR5Sv9P43YessBKyO6zKKwG3i3IBq/ADEa1GR429IcpvcawFmRMwHX6r/bwCEt4OsQR5xvdtyBglSx4RJBEQJUHAaqE8b2eLhCXMTaB/+cKky1iES1kTMAVPooKjMJZ3CV+jPNzT9rDDGkyZhCufHD8hiNBWMCUrAvgJf4gr772fi3v6eHuMp/0xUT7pqXdAEPubcANtBR9jDkNKgFb+Wjz95cZ9fWw91tPHaVH+PcKYBywhto7+qiahWgKeVgMnvywzQ57gYC3At4toEjjlfnaoCCiJ/bjLMH2z3+OefqTSv4ZYm3I8YR7/HZSfBFIjgOs+Z4SirmytKUJ/vTEt4ErH3xeLNYcDrOfjuEMxRj1musOSiNik2WLmPgJOe+odCSGA3zveIkh4HNFoIUkCHhLZW5jyLNdHIOBsTGu9zXPPJIHzkSVJEnAQ+zb7/pyQuhy0jEf5R0+9UxHJ0E/y0pDIj0m4CYshJ1SHkiRgFwbvVP8/v1OeGN0X4FRE8tPvqVeOEf/3I6m6Qg18gzhkyZCNgB4V/QuPvhjpdi6zQS2XiUl2x2gXFgjJE6emPBPQ4TBd19hRtyv5ZnhFXgm4gLDQke/bZHSMvuWHlG0YK3cETDVi/zALGBGTAO0m49TgPrpIfRGMorxpAWEHG30qpY+pkyRgr/DVz2IScGGE+ttw5dT7zaQmneTLUf0dzwLEDWEySpQviVB/A6xgY14tQJPAb32ivM5uFuXrItTfp1L4TijLf5kZH5MAlfc1oJpdQ8uEeiRArvwXZzWJLP9naCvihr9VSt8ARpFC419n61waBDQIqHP5R4ABABvFKYOY4K8BAAAAAElFTkSuQmCC",j8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAY3SURBVHja7FtviBVVFJ+3WCkRSB+CiMJoX70NK1eiTHSJymgfZlQYlMniZiXSTn3pUxRBn6J/NA+M3HL7a8FK1IL7DBGMLSUtlLBQ3pRBhtWXIon+mL1+R8+ts5c7796ZN/PmseOFw5mZd+fOOb97zrnn3LtbajabXpFbj1fwdhqAogMwy9ahVCpl9vH716zsAzs+OjYeZvUNW4yblRfyUJ6Q3QT6GVTtWgvIsFVAi4ocAy4T1jBYRACk0vOKCMCCiOuZDwBMframdH/RLICUP1MCAFDOKhIAVxlWoxsKAQBm+hKwBw0/jeC33k7LU7JlSmlkglDsQrC7mWwBbzPoGWSH+zuRCSYGAEpdALYX9DiEfTWiD83oE6x43KRrioAAbcX4/0SMPwS2HL+vTApAOy5wjPkrECTQFednDdBqoXwd5INqhvEeIDBBqi5YCpoAHTIlSng2CfYaaG5uLgAh1oKN8i0JTkqXyZ9FN/W8LosevEvgKJ8/hN8qWmYYiN/lOKH222K8u7vjLqDNRFQq60O4WsR7gQBqHP3uMvQxASFbDe/57cSANFYBk4I0S+Uo5bk1xPWPpg54n6ymzG5jakE3LIMN7Z4souJQ43+pARbZGEhaST7WnofdAEBZXFOQWwHBTji89524PmDrjDGPgJbyN+Qqk/t+gPL/EALG2dj4M8IabM1nEHr52s/NAjADl4tAlrSm/xXA/eDamc3eF9nj3DxdYERE46T+eCTuCxQcwd7n29W5AADkzxYfD2K+exHYer7tw/0WUNyS+GnhEp1PhCDwYrBPOMGpOihNA60APRlRD5Ag74FexHhTjkB+DraQl9wwSR7QThC8skUeoAta4YxxCT+iQudD0NcgsoY+pjtBt6M/pbiPQKljlqHfUQDYltIsACCBqUjZbVH+ai5sZnPfp9iH9X7kjreCngUNgwYoE7TElh3MEy+H7QDQ4KXvlxbKny+U38Cp8YmIwEZgfkAk0uu6lmfo7YDXZutx9LXeiHTXZnYvi5mfpjzNLoiWsdv4hEiCUeWxqap8ocVqcDxKDtckqcdR+QZ4Uw6Kj29rBQD6LmKT/kMqz6XyJKfMAS9nX+HZlAaEiu4PWZSpS5diYJuGFD2VZbCszcDDLfrew/xd9PuMhZsPth10C+h19nWV2VGAnFDKslJ1dtOhFlbgR2SmTlaQ5dGYEuQ58Wyjd+oQZBiCj8mKUpTHxKuitqBxbuTNEpcmrTTcuKlNC2gjw/tvs0PM/nWgnZryciZDLaVWpj0/q1lydYEwYb4fcqCidinzj1r5szRdAf45CXQL0wRgL/MlMQT4W7v/gvm5Fquh5fB7BmKOtv8YJ06lGgQPMq8IoWztW08cevJshl7E/j8/Iwvbh76/8+P+OLOJMS4WrldPEwBVec2J4QaHKchqO7oqYtfVc14WR4TAMqqviaMM2jJD/GgfAMwIme8+rQS2tTE9bvDSVuNZmhTrtdr4pHxhlzD/YX51m+M314ncINUYQO0x5tdDuGsc+o+DvtFNnqP9MrYqii2fgrZ4p7a3ZWG1luWbcqkO2aL6uap8PpNyWOToJPQABPvLItQqsLc8h+1rw7vq3KDf5ZhMyPYG+g+5lsNxM0Gf9/KupbrdwXXeZpOPdfDJMUG5xH7H/oMcLB/NbEeI/WqAQViHD7/k8I5KdePsGg2y1dRsmyysvBqbAPsp0y0xfGAPbVqooMOmZ2vLQffF+My9Npdhi9oqlK+a9hmy3BLr9f7fnj55XmebsTQaf9cXq9HJ9DnpllgaZ4PSBEOO/qMQ6HCKSp8BtorpJvEtK+iZA6AB4YtMbA/vA9L5/tGEis/jMUnx8+Io3nEAWGAqr2/mWSK6QmRlvmtywmYeiCSKCir6yxFaVXZE/cFE7gAYFKHd4PXe9AMUW3ALNP+mlWZznNOjrgEgImAazxEMQdVPEtW7EgBDtjbNEjTlY2eN7QDQ6T+Tu4MVHeGgqVqQhfKZ5gEpuUOZaZJ3j8ppK9htFqDS6UCsDoFhH2DmWoCh2vM8xwPWGWEBom0Q19vzEiJPACaY04nRm3kJkZsLsBtQinwU5r8wq2907X+NCSs4mKcAeQNABc1veQpQOv3P0wVvhQfgXwEGAIsGzKGtEheoAAAAAElFTkSuQmCC",H8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAZ7SURBVHja7FtrbBRVFL7bpZSHyiuN1OKLrkajJaAx6g8RE0ndGgNqTOOjoYJGCOkqhMT4Q2I0/jBqRIqiiUKM+sdIolG6BFGj8UFM0FIURZYUokUEwa5o7VK29Rz73fT0emc7s7udnWk9zZeZznPPd88595wzM5H+/n41lmVcrp0rlt6usipKf9li3a8MYDk9Ukpt3LTF0w/yS/heEwhRQgUQbAvIUyIEJ7+ajP36vmnCX6OFAG1N5YSMZX8fYSq51ASxbQa511Fa/hp2Alj5SVifhJG1kXAm4Vxj21xCO2F32C1gIpQvh5LfOpBwIZbTsDxJWAi87rc1FIsANu+/ofgUgNeTBgkHCU1CeVNmEt4gtIXRAv4ksD9fRrgA22oJ6zDKLCfI53+g5RJx3nQs93NMIDxBWEVI+TU1FVN+JnxKOB+YT3gavq/lRcK9hNdgEVouAmoIK/2cm91KFFPYcHIIo6hJaCRsN0jYCyIaCAlsiwnUYRkYAlj58QhwyiUJ92HJMsdCgpYkRj4ptmkSAkFAGc3d/YTxhInZfxPjochBwq2ETzA7XEP4OsfI1hM+BsmMi4NAQJmYv88iVP9X/exwgZEVaxEjm8xBArtLtzFdlpSAiFCel9UIUl4lYfi6EwmdhFewPjsIBPQJC6gGGnLM47mkBdYwHAkfBskCuKhJk5lXEGYRquj/SsLaPO+nA14KyvPcHzeO2StS6tIHQfj4L8jSqkSEfi/Pe6agtI76rYRmsT/uZyrsdho8gvR0pthWh9GqyZOEekHCehARE7EicJlgEqgx5us9hGfzvH+9UDgOl4gJUgKXCm/GD+4WtT9XgasJXajm5mPW8BIcl1mC74ag1gI7MHJvGtu5ArwHic/vhF2EV12mtJtwnu+SbzF0FAXNQpSvtuteQVgKs3ZjzluN8ze6rD1KWg3uQPY2D0SkHY5rNvzbJjcL82c8QLg/LOVwG4g4W6S+ZhRn5b9wyPE5AF6P9YcIL2D9ZWOKDHw/IIOZIiHq++cIx7C/ErFhkUFMqwiILThfTpHxsBBgm+9XI4FqAhFnwF0WwRqS4tiEUT+kBAmxMBKgJYsOUB0qRCbhHcI+oVjcQt6QAipH6R14ArR8Q0o0WHoJyxwyv7g4NoYuUmgJ4Abp88Z0x7INeYAtMJoBcIXhJoEnYBbhQaTL7Uaer0f8JsLVlhlDB8ZTyAm0PGbUJAVJIW1x/hFPIbKXG00UlkvQP5DCD0seFoHvRyj7FuFyNdA+j6mh/cGVyCi1BUwDCctLTQD/kLuVchWZviM8TnhbNFnYs3nOf59wHuFJWIiM+AndIaJj19BiAeFSJEnvGkT57gLfozvUleOYnThmDka5z5L+JkW22CpmA50TaOlGsqWKWS0WGgO2qMEHGZ+BjN8wz7NfX+uguGymtliaIUmHYLdLDW2wNgchCJ7A9HQd3KISI/WVhz5DytIscRKZICWCQIAncWilHxfre1wcnxRWMDtUBFiEm59zHchwEun/N4adAC6W5PtC+1zWGKOCAJ7SlohK0i0BajQQEEGGVwGf/gjbD7o4t8rIRxaEkYAm0QSR0dwNAbXG/41hI2AefF+J7pF+YnTSxfl3WgiYHiYC2O+5i5w2av79Ls3/Lsv2xrAQEEeFyPKokQEO+zSIsoI78K6C7if0FhIM/SYgKubwlEhrm40EJ9fvdUp/a1QebTO/CWg0Kj09+nGXBFxpKLnBsBzPr9WM83n0n9GKkvkmkequtxRFTnKLkQyxK52G4geC7gIc9WfAdx9RA43R7RhRLqhWubjGDXR2L7AOVSaTehjXqPY6qH5ZgCxdX8KyTQ0+aV6jlKuPEmrF6OuHJ52i8uT1ycr5CVXJCDDLVvkqLI/kZpcdKK38AaOnwC32q2AJ0aC5gNm4kL28DzD6XmWb8X8nlOflqUC5APn7cnSKphqj9iVhsUvTV4gZKVzrsLGPs0d+L/GY8vgpzkgTwN2h29TA+wJa+I3T3Uhcuj1e7yfCHxhpKRko3+OBUF8IYOU74L/aCo7kqbwmwKlc1h9pBMYCKlHvd6jBzjGvry1A+c/h452W/Rll/0CjZAScw9GafJ4DLX8HsJPiQWuB1+yAiZvBuzffC44kAVMQmNgkuU1+vAjXPIQYYo50v3L+Uq1kBLRj2VXEa6bRQeqxEBA4C+gagWv2QNlMsS4YGevfDpepMS7/EzDWCfhHgAEAox6bP0M8yXUAAAAASUVORK5CYII=",q8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAZESURBVHja7FtpiBxFFJ4xGlciiOKFIKLuqAjGqDHqiv6JRmdEWeOBMYaYBDcmYVYMkSiLAf2hMboqO4o6IZvEBEWDRNRsu4oHgkc8ULOCx673j3hh4m7YxCMZv6dfQdFUd1XvdG/P0lvwqJruV13vffXq1XvVPflarZbLctkvl/GyvytjPp+PffCb5l0zCdXe1Ws37Yn72a6WnbYFdILuyfISmA66fEwsgYRK87gTzCoAcIDNpnaWLGCi1p6QRQCO0NqHZxGASQHtcQvICgD62IdlEYDTtPbBWY8DjsoUANj3D0R1vXbp6LQAyLtmTZINMmD5GtlbzRLgFMDjBdw/iEnQIt8t4W9Hv4E6gJUJPUGe4ayXK2Pb/GuLqHpA74FagkCAEF2oyqIQeEo+YORe0TJUFdSBvr9pfeV57QTIC1FeZDsbVKp2P+vFnQypcPVc0DsYMAgEjwAUCUYXhS87jtMGmoW+Haj7QDO1vv0OykdKsqIugR5tBteB5ptA4Ix1GR4j5v0qqFeWEpfTbvYpUvBZoPMMfWX2KwHKiyxz1ASI5bnqFTUdvgq0GXQJ6EbQMGiJgW+TD4CBMPOVou5BoUdRzQatBB2jsbwf0LWiKf8K6OrEdgHOVitnUMpiCHyHgXW2LiD6FcKU942xD7QBzWO1caQsMMz+XSKDpvwV6Duc2C6gDdyE6nlaQo0Dv8R7M+gsJcNbhuuddXr1x6UJ2gs6H8/bynvXoXpKRNOU/1P1jX0X8B+KmkAAfUZzF+WfhEBzLQpORTUIvq9CeCRtfhs0lSCcCTo1TPkoAIw4EOJJbiu9vgjyIuhbKj9gU55FrGaLZZy/UC0E/cFnfwp6mmN6JuUTXwKGWerx7e9Gj+3rI5bzMn+WbD4C/PNQdevbrR5n+MuoHotTEE/7bVP+OFTrtUtdDsdi62kFVuVTyQV0EGgRYTO/1ZcAifIeY4EgZ/gQ6JA4lU8iGbqTtUSBKw2KrKLZi/IfMuytsi0gbGEQ5S/3MZrMaXVDAjA3ZOYvkG2RO4Y4tWmYyYVC0uY1tRz8lnCi7l/iFDiWFyMQeAJNVGZPPPISKLbGx7aMnruKe1Xf8hFQqnjOWcwFyrpPYQT6HOhKuQc+6dPeEBZA5V+n0IOgGQblpZyk9A1zJawLBoAEhAd4qRzmZ0YNAAhxDtfvhTTtVgj7VgC7OgT9PuSRO4OyOQEBdJu2BMTP9IOmpAIAlRdlp1D56RDwjZAufaxPD+EpaMlT0G5T0UAQoN6tB4R6LEBCX/V2Z6lF+Ryjt5yWuZnKpcoRWrZcHYQmRqSjDsCXKuiSuN+BX2L3NwUAzNjSgDOEMsPoikPcofN8kcYu8IGKkiHM7w4C74KSC5jidqK9SPP0RW3dzxyBLJ+PugVAIRn0B+00x6XPN1TWo8Jq1pu57uXcoM/RB6kxfwZtSysOkK3oZk0pFxBE0ZJ4cG3WxewLEcdWAGwLO6VOOg7woh5CGvrmXMELAGBDmoFQr7YnRwWhRWtPjrgFN2ugb04NAB5EVHwz4qLAkT6lJ/OFSdTZl8xwV9rJkBcVAGZ3B2i/D+W1qABU6hU+rhMh5dAKtldb4L0V1YMBt9vQf7WD+ffbHOdofyipFLrYIvwpqFaFsDwGnmmWsS5j/UgjnQdsBA2JGTM7DCo/gY7P/X/m/7F2XVJdOfWV/OITy1hy0LKHkWVjnAfAFIeguIAg0Z28mXkmgG+nyvjAL7nBGcqT495HDs7zBsb+3eD/tdFOhJbTClZYrMBUXGP5Ds7+7Q13JCZWQE8uLy0WO3TRQ959DrMvb4fEhzwc1+zHbQFSOhnTuxxzb9fa/1iUl9Pgu+lD7o1T4FgB4Nuidpec3geALZgR5eUzmhUYY7BhASAIHoMj9YFEUBlysQCavoD6mi1GaAgACEKJS6HMV1omHnnVvps/d4SkvE/w0GVOErIm+ZWYClfXBIFgmfky0+3/ngXAto8pAFTer4HQYmDboU6LDMqr5bMc93uTkjPR7wTpD9SXHScHsP0d8gj5uuT+JGVM/ENJKLCWy2FdAMuwoY9keReBbklavliywZEWmPqPqCZC4dg/lR0rf5trYmibWkkbADH/X9IUIO2/zX0HeiHLABQtu0DiJT/+7/GMl38FGADqf3loyC6VxAAAAABJRU5ErkJggg==",z8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAXVSURBVHja7FtriFVVFN5jD6Gw+RFlltljJiwUnYSBgaQs7DFqDJlMMan5SiyaCVPLMCvogUVU3onCR0OaPTQmEO3esKTUYigkJ3vjZSgsJwijiF7i3NtanO8wa/acM+e57zmXOws+zt1nztlnr2+vvfZea++pKhaLqpJlhKpwGSZgmIAKl1O9Hli6qNnUt6tx/cPUBzZ27IhOQIxyHmEGYSphMqGO0E2oJxRSawERZRzhbig+CfcKUHw5YUuSypskoJHQiqsteUKGsNWk2SdNwFWENZriOUI7ruXnBH3KmYT1hIViZuEeb/NQnP3Bx+U+DXKv7ycsFvVxj1/moTzPAu8STi9nArjH9xKmoPwf4Wr0vJdMJJyF2aAsCXic0EEYifJnhLMJB3y+XycsqOwIYOUfFmVW/jrCXwHqGBOAgAYgFQTcF4Py0gLGeTzXROgCOgmjkpwFeHp7QZvbZ4VQnmU8rlM8nmsRv2djyN1MKCZhARmtzM7u15DfrvXRDiZ8jnZvJmEXoarUBGS0RuciLG5axe9TCEtcvpdFG3m5/ChhhyChpZRDoFZrtPI51Uk5F/6jWSOSZQNI+Bw+Qa4kvyLcRvgG5R7CasJThDeiDgW/BDyglZ/F+A/S4xmPZ+oBKd0IpHrFvYcIE+AHGuAcjQ4BdjqLtHuHA3wjqynPvX074QTKfYRVCJL6xHPcszdoytsyP2AHRCLgSoxTKU8T5vl4/4gw53Y4rmWE7YQfcP91WNSdhAtBhMKz81zq/R3W0lUKAg4RNmm9MwYN/Ylwh0s9WTHW2xx8xoe4finu9YKIFWKoXTsECSWxAF7fLyXUoEG/aURsI3yvOS6ZC3gSva/LesQR7zj87TnCTljBI2lZCv+IsTqWcBfhI22WyMLkpcPjcfqYS33fEqbDqzvJbLw/jXBFmmKBfwibYZoN2lqgVnN4bPYnQ7atIHp/ZlrD4U8xTTnF/vkYskDsLI+lmQCpLBMxGUkO9hsrY6i3gABoWtpTYnJ9MCvmOo+I4ZVPqwWYFKPJ1HIgwE6u5iuVAOWyjkgtAdWI+spCTFnA84RrKpkAXsLGme4+rZwIsPf9amKqbzFC5y0OiZTUWkBOC46itG+tyAHwmuAVwjlpJyCP3opKwq2Ei7R7nJw5GhcRpgjIiOsZEdom9x+WICJlGSmI4ITK1DRawHewgnUuz1yqrCSom6/g/Qf7UMVy9PglysoG5wURXD6A8PoJZe1NpmIhxD1UVO4JUc4Oc7ptmcPfWlV/Fvp9JE8U6ntTWZsqLdrq8HJlnU3Yp6zdqupSEDDCYYza0oWsjq1QVvPiExxmixo1MInKCt6oBqe+C4KIewh/an+vR2RqnACe6z8YgoSd4ncjvPhrysrr28fPOPPL54g4NfaFcJw55BmKHuHyyw4WdgJ1GQ+HC+jVZ5S1eaG07NAah3fmamU+XfKSKHOy80HCxgDtuFgrb1A+zyFFJYDj/x705s+E+4XyOTV4K42FU98THepixbdhGd0ToA1j1eBtsozfl+OwgLWYithTX6CsMz9tamBKXI/m2FreEuUX0et/h2jDOjVwo7Q9SOgcR0aI9+eaYAXNYmyzzHBJaHRq5bDK36T1/mEVcM8yrmlwoRq8S/P2ENkczhT/i99HQyo/CmsDu/f7MCMkshBiBaYjYLFls8c7x3A9FFJ5XmidL+7x5s0nQSuKMynKJCzAkOAV216P5w9iNdgbQvlOTXneq+wI02gTR2X3+HzuIPxFEAsYjXXE9Zryq9MWC/gR20K+9vl8I2YYW3nee7g3ivKmLCDIGuK4sk6A+Iku5QkVXuuvUDEcs03SAk5iGTzUNneT6t9wtWUTHG4sZ4yTtACFcNipU/j4y0otzs8pA/sDSRMgpRqzyALVn1AtwFfweYH3THw0aQL4RNgtyjoVUicWNd1YXnNs8IvJBiRNwG4ERqzwqwhht5tWOk0ETILpJ/YvNFXD/ztc4TJMQKUT8L8AAwD3fjcM6Pez0QAAAABJRU5ErkJggg==",G8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAYDSURBVHja7FtriBxFEJ41EsW3JuILo8Y9fJzJqWAiGhX0fmQ2voOHRtlIIh6S3BgEUSOiiGhEDcmuFzAHJ4qeQUV/GG+DRkV/JD+Mj6g/lF1OIopeYiBqvFw0yVoNX2PRds90994+4k7Bx8zO9ExXfV1dXV1zl6lWq0E7yyFBm0tKQEpASkBKQEpASkAby6G6i3cv6mlE37cSegl7CP2Ed+vd4drB1+0IaJDxr7HfcwnXNYKEVpkCvcrvDGFJO8WA/Zpre9uJAJ2rv9EyQbABsopQJswjHEbYSBhqZQKOIewjjNXQ15GEP3Eu9uDrAVWOIkwi/FZDX6cQziRsnogpMBku2+mpzHGEFwi7Ce8TsjFtLyVsJewiPEA43rPPCwkvT1QMWEnogmKuEhI+E6kFfnfD9QuMiMkwfICwiTAd11cQtuAdrlLC+/tqJeAIQh5s/uWohOh8mBmk3itjKozDVe/CcshFPPuOjSEaKRIiEOxNgEhOjia85Nh5ARAyAne+BcdAkwMELDY8SOjBcQTxoOBBgvSC62sJggsJ2wmfOo58H1NCZH2/s/tvMeW4VODuFXZtEOSHIKGCZ21kA2EHYRHhTV8PEB1/4GD8DDbywgVzivHS0A7c5+7aoRgfwIAcayvefaKlLlXErdB3CsgHv3cgYCUb+SihbQT3z1i2lV7zjIM+Xym2eBHwocPod2MUc3XIWSK8+w4HL9g6EQTYJiRLcXzaou10y2vq1HkeQXGhpU7f1UKADFI/WHZ2M+HXhARkFZIcXVBah+dXxzw/gIz0GkudflFssSaAP7DdoqMzCFMR4U35wrfwEpEVXqy5PwsG9sXUBcbQptuSgFGDTYkEdHjO07cN19dDgWsNuYCUh7BBCmNI2Oigz3iSTSYCpjnO/0lw3w2GvEAYtcZwX5fADCGQztPcF172iQcJp7oQcJrjyIuMbXZM9A4sljouDxMOEJ403M+3YkFkRHOtE65fcnzXNsI3hJmEszT3f/LQb1q9CdAtYxewJcxVvsbxfIOHzrJ8z+E+HjDKihM2cqdhs3ICjrs8CJBL2LGG5XC2xTumsvOffTxABLcpFh3lAfV9f9TgUTNw3G1I0kJHApw84At2frnFO7ow2l3KPbmL7NHs9ZOIn4nzzw0Zqs1SfR47/9KFANFYlq4vS+iki7l6XpOKCpwDEmzldsLJhPcIPxqStGxCeU3IHBz3uhIwxh6Yn9DJMnY+V3O/H8cnLBSWhj3CEihVbjL0rbNtPtsVjrvGgFeZQqb5djZhAft9LuF0TWmqxJbDOBI6lbZF5b6oTl/Fft8DT9HJbUjRuS1OBAyxvN5UjlqtqSr1xGxlpWF9GsOFklvQpmJInEJFZ3H+bAwB0v1f8SFgNPj3Y4Uu6i5XUtV9MQTIKpAc3QIqNqIwugdJzwKs2SVNaSxQBuKAEi+WamKI1E0Yv9M3E3yMnRfY+Y2Y0zx/v4/t6kxuLvL7q9nymGWJiiyk5AzGh2xFWqa0KSoDxPVeUUsqvI3NwyxGbA02JBmmeIR2FQ1ZqnyE2LFZIbAjIWUusP6KGi8ZRpsyG4BiUhZqkwpH7CVZBB5pfFW5H7HRiitji2LnDcwTkkpo/ENKpBCvTpFszH3vvYDpRfcro8YjdyEhW9uBKlDSRomX2Yua/iJHnb0IEB0Napa35wwdlxS3jCuA5BNGvsBKZvdq2hQ1y+WA7Q7UZTe4BCRI14pjOMcUkJ/BdN6wE4UUXcArs5Ffh1WiGjPacioOBA5/beJCgMikFgf//agRRwIPoMPAlITNi2wn5/JTCcZzTxC6iQ+xfzejIGIaGb6shdjczNG0vRL5QKgsi8stjG+JilBc/BBV4BdZZUYshZcoLv8x4SRkbr3YyZXqrVyj/kZILHfiI+Xj+C3S503Y9srpIUf9CsJallnWVRr9N0KPYpR70Xe/UquLArcv0QcdAXI1uQgp82KmQ7ERLt+sKcBlPzYr6gAUmqBL0/5OUE1To8CvcnzQEsA3KhXLvOJ/EwPUPKHcTAUy6f8NtrmkBKQEpASkBKQEtLP8I8AAIFxVerjXDEMAAAAASUVORK5CYII=",K8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAWWSURBVHja7Ft9qBRVFJ/Np6kvi0iEsi9pNhNKK1NTMCwt3ScYaoTiK1BTkNxVqESU/soSg6jeyyIpizAC8atCV+llWH6BmpbGq3YptVTwozTrqc90O6f3u3i8zOzMzs7uHZl34MfenZm9O+d3zzn3nDO7iUKhYMVZrrJiLu0ExJ2AGq8Lpk95spLf35NwqFKTL1m6PNIW0ED4nfB2XF3gcbzOIDwQ9xjQO+4EJOJIwCkxPhdHAs7GnQBpAcfiSMAfYvxzwDk6EaYR+keZgBT2fFs7/meZ87LyazjfIWwNqktNFQhQyjMRSXH8F7z+TTgRYN7XMCfLbpMWMF3ciJPk8Gpr1ykC9gb4ztmEmRi3Ep4lXDRFwAuEdYCTrBHjWwi3ER4k3Idjg/HZOp/5AJP4unj/KGGXSQvIab6uyzdi/C5hP2EbYZ6m1FoEw7RDvJDXSaIzhK9N7wJ8E3mM08I0lcwrYS4bJOagaMrhnJJGwPg2mAcJSt4gjAJ+JNRr1jATZn87Ijnfw52E0VAor612DsRmhWVkte+sXD/Ap6gb4hXqQPiM0BHnODh9QphPOFDEjdSq8+cnEF4i9HJY+T2IF5FLhKRJKuU5OI2BFRzwOc8FwsfYMj/Xzv0myuhIZoI5Md4FN1gbcK4LIO9FcezGKKfC0lSV8sdDmHeBIIFddk4UCODPzQUGwuSX4dx5+PDxEO9zAeKMhaTHDmvioEGQTXOheN+KiM6yWETyMCUjXCwT1i4Qlgt0EkQs9pnNqS1uCwoaL//OiyCbNu0CvM19iIyuVRxf6rH614q0OQVTHoKStpkwwkdhZYVJQlACeG+fjJt/XiPGTXh/b4LivJ1xN3gY9nRe2esIX3gUVkzuDxg/ZiIG2OJGlCS1hMhNniEMgPLcBj+qfS6HFW7Q5tSFE6rhhC+rSUDaodDJFyHFSabi9RVNeZlIZUTZ7Ebmp4C0rB7YiU4S/grbBdIuVZ6tbUdZD/O/H+NVHim15eEGLH1xT/sI/xIOI9PkPmMLegwzwrIALlEXER5Gbn6D1dbFPQW2D+PGGzzmSQgyvFwsV+SauwjfFTnfhXA38oV3wiBgA1COcFr7LXx/POEtl+uSPtzJ1tyQ2+vdgKsJnVGFTqlWNXiP8NuMdXm/X8p7IIDT2pWEIw5bnA2lirnTSDHuAxcwmgil4NfTPHyXCdiJgLUHfYHhIilKiyyvmIzyGXSrRsAHYhXGeLjBI8gFeiDqN2mdnzqP1WcLuUOMW9ESG2mSgGOiEKpHp8dNTlttTcxxaJI0QeFG+H/WRz2Q0ALrUPH9xjpCc6B8DTo5T3lcvxooNQlTblLQdpZm08WQbgVPVKAabBDKD8F2NxgxoT4KDZGXxZgLpXtDmjcB5VWc4CdC25GLbMcWfTAKBMhytZawOSQS3hSmn9daZJFqiemiSJhQRottnVb22sjyIklA2qFGr0W0/4rwUAmKq4cjKZcA2tl0S8wpGZJBapYgJYm6fxNMeBWKle9xTQuuUdnkMAQ4ljNW23NAriA/wvZ5M+aoiwoBylSVzBKxoBEkZET16LerewaEbML7p5H69hGEZ0y7QFcteXF6XqeSHNX58fvL0GVCeZZ/QIJ8DmmbJICV32j5f16nzvMj8n6EV0VkrwNJCay8yieu1+bYqcWFpEkCVhAGYcxBbqLPzxXg/1vx/iLIUSu7XtT1k1y22+4gbb8pAtJiJTgLHGtd/qsvP+K2nW0U414u15wAac2mgqA0vSDKs9zqcvx9KP4rxhWVoARkrEud3HLrctsh+j9nVUnK2QazZX73NcINuT9w1DIgJn8o2VGMbzJ1EyYJqBXjbnEnIJYW0OLiDlc2AR3+732WJNzY/OmKJ4AVL1F59ftCfma4wxQBifa/zsZc2gloJyDm8p8AAwBaPUILlIWqsQAAAABJRU5ErkJggg==",Q8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAWwSURBVHja7FttiFRVGL7TbqWhIZX0x4psJoq1TDLNH4mIYVNYEaVIXyhikO6q5FZIRBHYZlvWbBkZRWSaFYTo6rS7laIR/tJcJAIn8+NHpWuuWy6mq9v74nPo7XDO/b4zU3deeDiXveece9/nvOf9OHc2Mzg46KRZLnBSLjUCagTUCEi31NtuzJ87sxzPv5PQlfRDVn/wWVVawJOEDsLtadwCQwgvEzKENWkk4FHCpbjOEhrTRMBEQqv2twKI+N8T0EDoFKsvpVgJEuIiIE/Yh9YmrNwGKM8FyCbCa2jV/T2wEJtMIGwlTEo8DAaULYKIoqWPWmFWfiphm7g3g7CecAnhU8JNhD8Mc0wnTCFsJIy29Cm7BeQ1JU3SKMxbV96BFSzD9TWEBy3zlNBeQZhdLVsg64OAvLi/zdLnTcJeXD9k6dMhrsdUCwE5bXVMMh5tr8dch9EetNz/ndCP6wv/S1HgK7TTsM+9ttNeH3PuqRYC9hm2gi7voR1JWO7hSPsI6yx9RgoCq4aAksUhSuHQ9QmuFxGaDYmQGsvO8LhlnjvQ9leKAA5XIwzhreRBgCp+VL8VhC8JKwn7RSq8mbDKZY55aD8XvkA643ySBMxA/G0x3CuIcHedZTw7wNsIh0RMX0y4Vig/E3mCLdqwggOEZw33m7CNpidFQAPahw1W0CZW93mXOZiEWwUJjqZ8v8tYRfJawq8GcpQVjU6KAD5V+IswDCTYPPhjhBcJdZZ5ejQSfvapvJrftvryPRMhgPfq27hebHGGU4UV/AiTLBj2Zo9YsQWa8mo1C8BB0bfFsPqOuM9EHEuyFniJcK94yTYLEVkB9YIlvKDKFtsJ92nZY8HjbOBbF+VLlveJNQr0ir0oze4ywoeEr7V8oCR8QxYWwSHxBsI5OFWZT3gdjLSL5+vm31SuPKBNrHIe24FN+nEccamVzmlQq8PV3D0uxVIb+meAm2H6h0RfVXqrcUWXOsRVMrZvgx6nwrcQdqk5NHKeQzZnkmmoC1ZpfS4mjIMv6LaMHY4scoF4Jr/8WcKNbrVIlFPhyRZv/j3hC035u7HyfR41QYuhD0eXnS7KO6j9ecUfEbkCP/8ti/J1ICb0FpiM0nWXS0iTyocywRCyDiS4SR3I/gFOO7QFqD24ViOBt8ADwvmUS3lJwvu4Xqg5XqX8FFFchSJgu/PP6e0sLQVeDnKKHqGHDzmeDuObnPNH560ufZYi5nMof0X8/VWh/EqXAxhfeUCzeNhSeN/DIrHxCj0LBckrAhDASjxF+A3PtYVkdrjvwMwnoV2C+9+4jA0UBpmEJ1CEvCvq9qLHKZCDis/BCn1EuMrH8VonlGf52KP/erwXL+R3SJPZKuY45787nosrE1yN1e8UY/xkXRzvd8NnsEnPRrLEZnkUuBpxn5W/SyxKl+HcwGQFraI+GIDiu5NIhbci25uH2LvT57hxIsWtR7nqVrKehFk3+5x/uyCgK4jyYTLBy8Vx1PEA41Rm2OSybdga3iCMDaC8o0WgUkB9AhOQi3AeVxJprr59WPFRcGA/hZi76ONcMhYCro8pjjdpK/8M4XQM8+aSJIBj80W4juNllQ/pjmG+XLksQMnYGAjoQXsihrlCf1WOQsCwmLbDqYjj8+VyglyBHcD1UJz9RZG+mCwgH2VwUAuQ3n+JVg4HlYGYLGiOuO5KmoDN2r6Lwn6/1oaRRm0rdidNQLuh2gv7lfZ0REvIOv8+H/zTCfGLs6AE/KIlMfwSYypkAbr1rUEanXgUeF17+f0RCQibA2wRDpSPy14oVxjkSNCAg46GCF78jCh+wginzPyFiT+93084EmaSsD+SOoBDizjkTISxTML8cobBOGV4RAuIRSpJwBC0Z9NKwAinCqSSBFyZdgJOpZ2AHWh7K0lAfQWfzR9I+TSoo5IEZGr/OZpyqRFQI6BGQLrlbwEGAEXKTqK6WAQRAAAAAElFTkSuQmCC",X8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAVLSURBVHja7FtdaBRXFJ71JyBVFIVqwUSKu/60IvjTRsRiLVSc9RcFFaWoEaO27BKtL77YB4UWTLXdVdCIsRX1IaKixqxVFCu2qG2RovEnmbZJpS1YCz7oi0rXc/C79HCZmR23bmbc64WPm7m7M3PPN+d899wzm1g+n7dMbt0sw1sPvw9ra+Z3xQMYSuggPCrljRoamyLpAcMIbYQRpoaAMnywqQSMQh83nYCEqQS8aroHVKLvbyoBcS0UjCJAuv0rhEGmZ4KjTCNgnHY80jQC3kfvhLkUhk3A7zCcSbBNIuAtQhVhJ45zEMW4KQR8gL5JEMAtbQIB/JRTMNoRBDgYf73cCcigz3qMbykHAnhNbyScImwjDMH4LIhdTri9JQhhL5hDWIQx9oZzhE5cb+KLQAC78VXCMhjwEYoeLHgHtaettzXotxJqCBcJkwkPcb3vCMujToASsiSWuAZCBaEW/XHCSY9zmwkHsEvcjT6L6yTxnU0vQgg4wsXX4Amq9gsh5nPuHQ9CpWhGmgC1pmfQb8WTV62OcNSFhNcwXucijvJ6Z6NOQEYsae1w/V8JYwmf4TszoQsq8XmbcAQiaeF7Y3Geuo7qP36ek+1RIvdPYMLcX0bCw2FwhXCe0ALj2aBLhDHwkocQuX1ig7SQ8AbhOuEw4X6UCKiEF3W6fJb1CZGECJVqjLPx74AwS4ztDVhXcMIIgfUQtX1irQ/qJe3a2BUgaOMCynZCK+HDMDTgPcR3d8Ji6+nbnUyADY1yfZUQJdFXw83tAOfzff6C4RVYaeyuJGAlsrzuWlanhMot0emNFaEdRmSF8Ukcx6EPbkQqw5UgWtq9W4ohodsz6gVnY8cIO2D855h8UsS1IiKPfgKErQ1LnIPvp13W+6S2gqR8DE+Ie2cFCc9ERMzv9Xhtzfy+1M0ljMYWdoD4mI1f5+OibpM4Dbd1Ari47SGgaY/zU5rnqWTse8KZhsamv4vxgH5w3eGa8ZaH8lsFFLlPQIF0a49dssRCWhHHPXsWGwKdIlZjGvsZQGV04xAa0lX53KkQqfsIh5yPi9pCIB3cj8//Gp8vERoT15KvjCAwjXnxvHcR/iw2BPx2fOqGqqy1QhCaFRmhTHU3it1cWssV5DXTLnnEIGSIS7RcIy4ITXvlH16/DyiWAPW0WsTxv2C7vkCM2+IJ5jDhlHjqdpEakXSpMRQk4P/kATkUKfLY57NQrgqQkclM0BaqrVJoJ4BGsLHjCScwtt/P+FKmwptQwmotoi6Y8BgPmtL+RJhBmOQX46Um4DeP8QqUtvgXILcIh6DibqHjCMVWAnhSC5m4z/7iQtR2gxUoZY0RY62o880jbNDUOqfpQrNImL7AEiyTJV5J/olyPaAexqsUl1PmNwk/C+N/wFY3J3ThXcK3yDCzGBuu7ReYoM1RrwfYQqgsGPVACjIKpY+18/4ACV9pS11SkNRuPedXaKWqCcq1ebVHVueXfeoVJl0LIl8SkxuTehyrfcNylMDcGm+JZxPuEb4UCVKLEM5Po04Ax+80FDinoOQ1EZunBYjx/R7nfoJ+LYRwJK4zEP0ky/udQmQ0gNs3gN44HVsKd05py5otiiR7MHYTy2nJWhjvBtNaL/cC6ul3WQuDAMdlE6P+zuKplzUBFoqZ3GaJEhu3vV09kbAI4PT4NmE6oReBt538c5kfTSHAwk6uEi5fZf33axFjCFDvBarQXzONgBva8R1TPcDruOwJcAoclz0B0mgnrAmETcC1MN0/CgRcN90D7r70AMM9wAkzB4gCAR3W0xccV8OaQOzlf48b3p4IMAAoV1q9G/s2xwAAAABJRU5ErkJggg==",Y8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAYWSURBVHja7Ft7iFRVGD+7RtFmD3pQFOWWO7BQrUrlWmlEETSTZRZZka5WqL12ov4oo1iid9mDZrOoVEqjyDKpzClLyoI2LUvN7DG3h0RPJLQUEWmn72N/B7493Dv3zJ37mNnbBz/O3bn3zp3vd77zvc7dpnK5rNIszSrlknoC9rK9cNZVU8J+9mg8/7O4lX5m4ZK6sICxhFfSvAQmE1oJR6eVgHaMh6aRgMMw+yyHpJGAy8TxBQ0RBWqUkYSLYPZnENrEuW78XSQ4hE8JW4cCAQcSriBMJZzqct7ByMpnAZZ+wgbCYmBroxHAij8A5ffHZ9sIrxGWEZa73MMkZEDCeMIY4FHCh4RHCG8SyvVOAJtzwZjlOVB6d4X7HKAolsxswjVYMoxvOB8jfFSPTpBnsOSiPM/qUg/lW0UkMOV7wi2wgrmYefYfq41n1AUBWSivHVkvPi/53HcJUEk0EbPwdxOsrGQ40sQIYAe3ArOdA/IYsz4/chxgI/OxBEyLyyZJwLmE57C+28X6VTjeRXihwpLpAGrxVytqJaG5hjXPir9NuJDwr3H+AIydWL8mtAm3oSawWWbamnphZUVBQuDlEDQKLIfZT3Q5x8qvJOwLK/hAJDnaL2RE7GcnyfVpD+E7D7K148sJxXuFBRTxnbEQcAN+VLvHTC0V13Ei87dH2CuKqvAurHEm4kHCFzjH4W+BIM0xvicnrKlbOOBIl8CdhGtdfszJhLcIrxKOJMzzUN4UTo5OhAKcLn+OxKkPYe9nwgkuz9OSx1gIshSqJeA+wg+EZ13OzQQxXVCgWmHCzidsRzY5Dk4265NEFYU15aMmgJW8zeMcK/90jVHpHcIpIEFbx26L+/IiEz0oKgJmYvZXeZzvDyk5KwkSFsH8/UT6lOlREXA74daYqlQm4XJElGWWsV47wJ6oCDgTIS0u0Wl1G8Jd2cfJaQs4GA45dAJ+SqBh02scOxaksUyr95aYrci1XbC0Gl2j7D0UCFDC6R5rce1msQwuHioEbMTYUeV9c5CODxkCHiKc43ENt9lvJjwsPmPCPiEcF2dLLEppRvX5NcLkLsxwK5R1m8wOFFibCC8TvkIh199IBOw0SDiesE8Vef8wwijCr4Qd+Lu/ES1gD+Em1AyyVGbzPw/VIo/7ifP/EC41mjUNtwRGY3zeUF6HSQeVIwvvP3wslD9J+fQmG8EJjhIEVCP3Kv/GbEMQMAbjBotr5Vb762HnAVMSUP5wwgwcz7C4XofJTWpwFzkUAvjL22Mm4H54bZbHCBMsCbB+86QaAt5Fjh2XcHfoSjXQcV6ACLC+wvVcAY5A1bjE9iHVRIG1mJE7YlCew9sbOJ4gvHwl6cK40tb8g5TDjKtjUF72+Pos7+nG8dyoGiIs3L6+2+Pc+BCUz0B5neVlhQ+oJHlRDq+KkgBuU//oQcIxhC/VQOco6JrvM1LcLJad7exH3hVm4f0+7g92Gp+/RHiR8L6qbs+OFXgccfsvwj1waK1wupOFgm5SqKJjFEoqPB9+YB5Szz34vIzZWo8fpXeNmRRud/8OlNHcOJtwFmGSUOBG41lbCGuQ0WVcZrgAop0gsx+UAFb4epgrkzBbDX51pagGvzPQoyp3assoYrwKFgfkmC9TZYVlBN4hDpoKrwEJvFfwpBp4ccGtSGG5Tg288jISlVoLkBczX/R5XkEoqq1LK58LYvphVINPEY6CPxgBhfQPOQ2zdbqozkxZh3GhxbMcJDdmOp6zIC8yAhSSoj8wKyXM5mbE4h0VlNdKrUPk8BPeJ5xo3JuvVfmw+gHa+xYMb80EDMfoJn8quw2MLlhbi/Ax+VrMPopyWDs+OSPD4f2PCPB9w5AXvIc+QAuiy/Ra13yU/QD9olQncgHtC34TeUGbTz7A13Bn9xfUAhwqv4UVcF9gUdh5dxQtsbWI72OxJKaqwa/COi6dmoxBDvsVfjt0sWUjpK4IkERMA7LCAtwsQW+BMfjV2I0qgtdi4ybA9BFFI653i3O5pPptSfUE5UbnEypBSYoAx+gzpI4AJZbEljQTwJawM0kCktwZWo1kKVFp+v+fp1MuqSfgPwEGAN7OaG+tHYBMAAAAAElFTkSuQmCC",J8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAWCSURBVHja7FtviBVVFJ9n6bZlbZQQKVngvKCUVlqhoojND+JuFn0psNLNsL7YvrCCwKLoSxCC5ntYUKSyRUl+qA+6zyhw7UO2VNQKEbTPT0VBkf+IJM3dfqf9XTtc7puZ994M897OXDjcmTfn3rnnd88595wzu4Xp6Wkvy22Ol/GWeQAujspYKBRif/kTGx7sQ7f87d373ol77qimnbYGrALdn2UTuKoRLZyNAFwKujzXgAwD0AOan3UNmJ91H9CVa0AnBEIJtStBl2VSAxAFzjXC4/rqrOcCC7IIwHJ1vTiLAOgI8IaOBQD2OyDUxNBr1fUtTby3BzTcDhrgg0abWIwGoLdB4e9G93uj4xIBALl8BV0NVMbChKIGNoNaAzDukojCC9CfgSZAz7aLDzAmIIv7CIv0AwToBj2Dy3usnOBj/H5ziPBlARokR+hagH+q1YUXolZOwipC9AOjvBWNKGGBVfVcwt4h7tqSgKlGQC9g7M9qrE/BDdCDem5XiyxXXAAo9Sxban4YtJ3CG/M45gChRn8i7RzoAwECJKZRVc8qEL4UtpZUACAIo2qnpP2tBJfrLaA3ReW9mZKYEX4paBPoNaq4AWKumqsK4QejrCPNmuB9oEPq3ggvu7gMAmwDncH1fkuws6DtjApf5+9a+FpU4VMNhLDI8+ieAx23VRzPatbp4SlwzO+n0X3vmLqUwGYlFglOOH4bdpwOVQKjneUV6F5xjJ/sJAB6mesb+zatbPFV9O6zifALef2L46jtCABWsz8pdg/aAPpVhMAOr1J8n4JeVLt/DVV9CvQUPX81SQCSKojcyX4v1Fs8/x4IJ8faqyyCGHv/B91pa+wuxhBnCEqFwicCQOzHIBd9goKuhyDvtphs+cr+i9qRtusx6OldjrkVO8UHnGDfF7PQk50CwEQzaW5IouVFVf92AGCEfT9seE0L9n8dM0xzZLbXMYgFXg+6ow4AY8arg6fYpPD7AmII4VkKWpbKKcDcfLied8bzm9B97c18/Tkr2gCeIw14fp0BPoKx71s8XYwzTLZY0mtI7BRgDXBSCe/0zljMD+jWUfh5ohEYN9SE8C/bwtfxE5PN1Agja8CTjz90EbqtoM1WDl8KKk7QRMYIgoBxF/i/qsMrH0i+VMKXrKTJ5r8N3XuK3+QXpbd2fViLWwOetoSXwkQxrDJDte9XmvBGAPtWJcxgkPCce1zWwPC5prShlIQT/MORyQWp8jzQ7QqEB8Q0QSvoH2x+yQIf4+2QAZYm54eszV7Lb0kAMMI4/YJXrrcwER7dF6AjuN5BEKrqKHPVBOVLkXjaw+Ad4TzrvZk6YzUEhLLSnHHQttgBwKJk9zYqtH0ubGEd4fu44wfVHGJGPwaF8KCX1P0h612+9a5uqwQnZrAS7/krkThAQGBZqqIWNo5FrFRsO1UIvMnhI6QqfMwx/XeSNYL/c/W+n7z/vx/41LpuCt9L56qFH2hE+FbjgIdpEl2WHQ4oJxnqjGRXw0Jc8GxWai1h9lHQozQZY54C9p+NxgEtpcP8S8+91jH0HxhRCpgYfwDdjfTkYbx7vJnSum0yclocTCUdxou/4eIrdQKasCY8fhgvni/gzk8pwaXOsMglfCoFEcfXG2MWO6kRU44x57kJzi89eH4rz/R1arMEiOfB/0kcBZEkPozci24taY5yUGUCUXNUei5EfDSrXgrdr6Yeox/YzxPJa0sAFBCLCcJGh4+oKRPQ957Fe5xxgHxM+baR96cOgMM8TGGz6ADEs3Z6gjZ+FIKfa+adbQVAACBlVeyohuUVswYAgtDDfF7aGgh/IM75O+UfJlJvOQA5AOk1nbRM5RqQA5BOS+0Y5FEoicySKNlg6nFAbgI5ADkAs7L9K8AAT+NFTGBSaUgAAAAASUVORK5CYII=",Z8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAd9SURBVHja7FtpbFRVFJ6RylIXcEMoRAmpBIuE0hA1aKXiQl9RgyCigKYFCv6gpZBo1ETFJegPgzKNf1haohEFJVGinRIB2TQguxib2MGoiBiJWzQoSFu/A98lp5c37Zvhzbwp5SYnt3Pf3c73zj3bfQ23tLSEOnO5INTJy3kAOjsAWV47hsNh3xcvL5uYK/WS2vdifs/tVbeFPXf0EQAyHgE5bIqCKv0EImMBAPMVZN6tVIOeARB/nnMAgPF+qN4GjWJTjG8+REnI5d+HQQ8AhM/PGQDA/GxUr1HnCINPChhgskn1KUe1AHSlkQY8r+zwAICxJahmgE6AloMe04xbfQeiqgJVKCm5A/1/6HAAUNFFKdo7QXPByFaPYx3qCRn7Oyg/URACBcBifimZ/zsJ6amjfhAQJmOOer8B8N0RIvONZF60+sxkmGcZC3oB1AtUh7mH+r1fXyUAG7yRmj6Xdr3aJ1AnoXoH9DVonBd/Ie0SgE32pLj7yjw9xZWoHgYNUaYz42IBYX4ozVe136JKEOQ45ALsSEYdAWptUVgxbPS6VAYvSjGWYK1ophyBiPLoUl0qrTWDlQDl27fy3NAuDsz6NiRGdIWRlkZKTzRO/9vwbLPLmnF1TVr8AGxEXNsGw4zRzmgXffALfj+t+oq0lYKeUn6/XWJ0mRdj7Ak1dhGqI2h7SbU18s8haD8e1BG4i8xEFPO3oJoG+lhttguqDaBlyrvbRD9BmPsU9CufvSHPCJgpYlrn08yaspr9ZwVpBYzPXmPpgz0A5DPF/HpGgX8wLuiL50VyZEBVoNFoywFNB/0DGgnaYkDA8y9kToITstZ0ggRAFt+PDe4js+NQFYBqVZ9HFfOiF5aBjrmYueMgYapQgTBNdRHpGYE1BrH/N6h2BAYAFVmI4mtKmRw/83bQJxvVQj6bh03v9mDvd2lNjzkuVAA0WaBssPaSVgm4nrUOUPJAe8HEUf4eQz9eNHxtAk7PUirEHqC72fafzA2aoLpuYn1nEADcDGq2TJcoJf2WC87CZpsx96q2nZYFaVTApx0ASXH9aEWBJqVlSl/WyfjvZkyOajus16LlEX1xVRAA9NcAtCPSCWd7ExhzJCgALgH9pX4bMHqqtqN8YxcloWQH8M/vVPMVLl1/Bl0aBACXEQTzxv5Vzox9RvOTmH+ANYfRMb5epJwNACdckP/SsstRZR4TLc+56A/HRZ9kUw+kFgAmPHQ5BBqM9u6Wy3raLvNNiV0vpYvsdS2JGYpAG5WL7cRRqIMoeWZsD9A1qZCAWuOFsUgQlGWJ/HbLRZbyEB2YxcpStMV8MZMrMqbcdrt19Mf5uoIOqn6T6DSl5Ahoh2M/64lKD3zFAMexpOA+AvUh2q9tR/F9xJ/3WG/f4dy2K673ImVKqnTAOtBM9XsF6wexwbCLAxNR9nqtAiHqBgKZ36yYr7fmjLncFBXrvTB4uhX0fSoA+BY0DIvkK9RP6gEBwbLfJYZZ1b6WSc0tDHjscjvjisGaeabAclV8oMXfofk1EjAZJDppq1emEkqIYFGx+yuxwRncxGyKZT1zdC1qgwuY/BBAnERNF8b35rzDmW+YEyc3+CKePcu2XXS/8xbXrGpIhQ74RKIxRnkmJv+JojjF8uQkG/Qy316jZHI9KsHeoHmcdzjFv8olEjXn/3W23UTmt2HthlRJgGSARJRrlBRMRfUWN9xfS4GVvwup8HkH6RDD536k8TzDXWgFnsB8C11E31y7nc4Jqrd/P9o+SFlOkPk+ickLVdYnSimopwJramPTXsoeMr/OmifMVNtJhwjPS9j+CKo3GYmOkJeQypzgK6ADoVNX3UbcHZ71YiY1zwhseF8giuxYG3PLHeLj6FtgM89imI8ZpQjmL+YRaQbNsSXQdwCozGRx+4bGbKyCCsptrIjrQHqHdhEnKg99XnXRC7nMAjsuSnURRX+51+t3X9LiZL7COoda1ONqf/TLoVntpt68MH8wTurNANpqTqVfRPRH6VvodN0LmGvw09dULl+Azcez513GSoqs1FgT9JluPb8alUjDVBMDmDNvAdNM5lu9/XTdCxg3uE67vtxoCd+Y5PPfdRm7Wv39vsvzNWQ+RoBL4kjF3GRE3xcAsPBe5aHVUSTNsygVX6GVOTZFu6sHXLS9KNvxMofOO3INw7xcx53VHaFft8MRFQF6+ugRY/qo/GGv9r4NdPu4UkuFXdJ6O8wgpVpZg0YtDXFKdgJucYSZIUe9+RI/9u73JzLGIQkprR3h24pZfS9XiYwzJEAFO+JS91H5v1nou6a9vQT2lRg3XmklRczRECnZDgZ+Qz+J/jZoAJh1GsmxjpX4lMBqhdtNcEYB4AKEY7nA4ibvI5WpoErC7GGMAzRoqxJhPGMAiBO9OR7igbjHpsMCYJm3IfTdRYmZm6PdPA41iYSyHQ4AC4wbVCYnzy/GAzGDSRb9NdnooDYRJABjrXxg5wEA4t/NSqFN6IwS0D2UASUQAPiN0DbL3gdSsgIEvwi0MXTqX2Qqg9pEYGZQ5fO6imvs99y++wHnajn/v8OdHYD/BRgACUm/qct2//kAAAAASUVORK5CYII=",x8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAV9SURBVHja7FtrbBVFFN5SpUFIxJBgmqgQuYA8tK2gISIvA4Rb4A8/CJCIAWklMbdW+0MSEuKDKIQfyAWCvN8BIYEQwr0iP0BSUcFoTVuI9pZHBaNi6yMFLVDLOeFMcjKZ3Tu7M71r2HuSL7t3Z3bnzDdnzpw5u7egq6vLibL0cCIueQLyBERcHnArqFw4OxftF5AOt7u7oU3bDvgjIEeynqxwcRSnAI7+IsBCwINRJCBOHUe8EkUC5rLzmVEj4AnAHImAcVEhADt/RHLA6A82hUFCrggoBIwELANcAZQq6jwFOA3YARgeehzQDbIHUKJRDx3iUMCLgM77xQKwI6MAGF01e9TLAGblqvO5IGAMmb4g4SBgBOC4ou5xKjvMOj+8u6eDTQJigCTgMmA5YCrgS8B2qV4HxQBt7Np1WhVuSXW3AhoBjwG2AS5RG7H/EwGoTArQBEgABpCnH0/lvyvuwSzMLvb7E8Cfinri3gWAgYQEtZWyQYQJAX0AK0iZuFTWQiSIc5XslAhQibh3ksKS4tT2h4DeuSbgOcC3gLddyndrPON7mgZo/rUa9U+6XF9CuozOFQHlgLOAwR6e/Adm0o+71MNpUEdz3E1EG38BrtKIq2QI4BxgRncTUAU45lJ2E3CGTYcmZqpucsGDAIwOn6HzBjouy6Lf0SztGREwAbBKMdoVNCUeBoylayhpab76JQA7/6jkI/YTMYMJVaw9ISk/JOgS8AjgM0BP1vHpFLFtAXwDuKMgRyiXcHkuzv/fXMpeZpbU6PLstYBhgDel8qRtAt5lnf8CUEZM/5flvnXMAlRLFvqKH12W1ho6X0P+wk2Q+I9o+T0vxSRWCIizEUTWpwHaNYn7mFlB0mUlqFdcT7L2tmq21UK6cquL2yAgIZHR7sNvdNA8FffGNQmPM6f7r4/2WqQ2EqYElLIHrlU4HB1JM4eY9EF4WnKkupKRSH/ahIA3gjgWhbzP5uazWcJqQfg7Bu1tAPxE5xUmBJSw0cgYKISbop/pfHKWIMuhLfNZg/bQMe7TiEM8CejLMjdpx1wu0tHLJIvpeMlCew3MqgIRUEpBhy0CmjXq2CSgXppavgnowzx5xoJC/en4q0cdsf0ts9DeL+z8ySAE9HbsipiL5zzqfMcIMH1bxBMuvYIQcMOH6eokTXSmgjD9QgtWcEtyir4J+IOOgyxbwlSPspfo2MmswUauoy0IAWKuFgEeMlQmQ5splPcA8xRb30oqc2iDZfrKvFiRWfJFQEbHifiQeRScoHnvBZyga5W05m8kIlpZ4GQiA+j4N+Ba0EAorRG86EordbiTPXMvdXw0yxLN9VLYh4jXbI0mkaBNAlBqs2R1NpNl2BCRlT5oQoBIRE636AQ/cAms8NprFtsRYfVhEwIaNLI6QUROZfEdnM2YA0m9bJoPSDKlTXaDmLoe49JhTgguu4ccs++GEmwLb5wQEXmAmOMz48oEM8lDaFeYZKMjkptpNnKYKp9i4AtiLDOUtkEAH/0kLWN+5SvyIzdpdL6m8JQnTvHZKVr/XzCIQJfSsdJvtKST1UF2FwVU7HNyTBiiPg84xWL0FDPbCY46T6gj+Nz5zr2PLE7aJIBbwfqAViBImMhIwGwuf7dYbtB5/NgDs9CYaK0JEi/rhLPljAST7FA1M9MY8zUmeYdXnXvpthqv2N+EADEVqqmxaQbK7pJ2aKbLIFrVasBbuqYflACHzAw/a3vdQOEb5O0dCxmnfoCVZJ2+E7dBX49/6ph/3MgJaLIQ9Z0K6jjCkjqXnWeQTZaVpEGu5SI7vx6WEmESwM2+PooEZNjod4SlRNh/mEDvXxSmAmETgF98/BNlAjAl1hmmAgX5f45GXPIE5AnIExBtuSvAAE3qNdCP7ekxAAAAAElFTkSuQmCC",un={BLAIDDYD:"BLAIDDYD",CETHLEANN:"CETHLEANN",CICHOL:"CICHOL",CHARON:"CHARON",DAPHNEL:"DAPHNEL",DOMINIC:"DOMINIC",FLAMES:"FLAMES",FRALDARIUS:"FRALDARIUS",GAUTIER:"GAUTIER",GLOUCESTER:"GLOUCESTER",GONERIL:"GONERIL",INDECH:"INDECH",LAMINE:"LAMINE",MACUIL:"MACUIL",RIEGAN:"RIEGAN",SEIROS:"SEIROS",THE_BEAST:"THE_BEAST"},Kg={[un.BLAIDDYD]:"Blaiddyd",[un.CETHLEANN]:"Cethleann",[un.CICHOL]:"Cichol",[un.CHARON]:"Charon",[un.DAPHNEL]:"Daphnel",[un.DOMINIC]:"Dominic",[un.FLAMES]:"Mystery Crest A",[un.FRALDARIUS]:"Fraldarius",[un.GAUTIER]:"Gautier",[un.GLOUCESTER]:"Gloucester",[un.GONERIL]:"Goneril",[un.INDECH]:"Indech",[un.LAMINE]:"Lamine",[un.MACUIL]:"Macuil",[un.RIEGAN]:"Riegan",[un.SEIROS]:"Seiros",[un.THE_BEAST]:"Mystery Crest B"};var hl=(n=>(n.MAJOR="MAJOR",n.MINOR="MINOR",n))(hl||{});const qi={omega:{MAJOR:17,MINOR:19},gamma:{MAJOR:13,MINOR:17},beta:{MAJOR:11,MINOR:15},alpha:{MAJOR:7,MINOR:13}};var ma=(n=>(n[n.MAGIC_ATTACK=0]="MAGIC_ATTACK",n[n.COMBAT_ART=1]="COMBAT_ART",n[n.ATTACK=2]="ATTACK",n[n.HEAL=3]="HEAL",n))(ma||{});const Ds={[un.BLAIDDYD]:{label:"Blaiddyd",description:"When using a combat art, conserves superiority die and adds another instance of combat art damage (if the combat art adds damage)",image:L8,activationDC:qi.omega,triggersOn:[1],conservesResource:!0,combatArtDamageMultiplier:2},[un.CETHLEANN]:{label:"Cethleann",description:"When using recovery magic, heal the target for +2 HP .",image:V8,activationDC:qi.beta,triggersOn:[3],damageBonus:[2]},[un.CICHOL]:{label:"Cichol",description:"When using a combat art, prevent counterattack",image:U8,activationDC:qi.beta,triggersOn:[1]},[un.CHARON]:{label:"Charon",description:"When using a combat art, doubles any extra damage done by the combat art ",image:W8,activationDC:qi.alpha,triggersOn:[1],combatArtDamageMultiplier:2},[un.DAPHNEL]:{label:"Daphnel",description:"When using a combat art, adds +2 damage if the combat art does damage ",image:F8,activationDC:qi.alpha,triggersOn:[1],damageBonus:[2]},[un.DOMINIC]:{label:"Dominic",description:"When attacking with a spell, conserves spell slot ",image:j8,activationDC:qi.omega,triggersOn:[0],conservesResource:!0},[un.FLAMES]:{label:"Mystery Crest A",description:"Restores HP equal to 30% of damage dealt when using weapons, combat arts or attack magic. Also has a roughly 1 in 4 chance to raise Might by 5 and prevent counterattacks.",image:H8,activationDC:qi.omega,triggersOn:[2,1,0],hpRecoveryPercent:.3},[un.FRALDARIUS]:{label:"Fraldarius",description:"When attacking with a weapon, adds +2 damage to the attack ",image:q8,activationDC:qi.gamma,triggersOn:[2],damageBonus:[2]},[un.GAUTIER]:{label:"Gautier",description:"When using a combat art, adds +2 damage if the combat art deals damage ",image:z8,activationDC:qi.alpha,triggersOn:[1],damageBonus:[2]},[un.GLOUCESTER]:{label:"Gloucester",description:"When attacking with a spell, adds +2 damage to the attack ",image:G8,activationDC:qi.omega,triggersOn:[0],damageBonus:[2]},[un.GONERIL]:{label:"Goneril",description:"When using a combat art, prevents counterattack",image:K8,activationDC:qi.beta,triggersOn:[1]},[un.INDECH]:{label:"Indech",description:"When attacking with a weapon, you may attack the target again . (this follow up attack can also trigger the effect)",image:Q8,activationDC:qi.omega,triggersOn:[2]},[un.LAMINE]:{label:"Lamine",description:"When using recovery magic, conserve the spell slot ",image:X8,activationDC:qi.omega,triggersOn:[3],conservesResource:!0},[un.MACUIL]:{label:"Macuil",description:"When attacking with a spell, add +2 damage to the attack .",image:J8,activationDC:qi.omega,triggersOn:[0],damageBonus:[2]},[un.RIEGAN]:{label:"Riegan",description:"When using a combat art, heal for 30% of the damage dealt if the combat art deals damage ",image:Y8,activationDC:qi.beta,triggersOn:[1],hpRecoveryPercent:.3},[un.SEIROS]:{label:"Seiros",description:"When using a combat art, heal for 30% of the damage dealt if the combat art deals damage ",image:Z8,activationDC:qi.alpha,triggersOn:[1],hpRecoveryPercent:.3},[un.THE_BEAST]:{label:"Mystery Crest B",description:"When attacking with a weapon, add +2 damage",activationDC:qi.gamma,image:x8,triggersOn:[1],damageBonus:[2]}},Be={E:"E",E_PLUS:"E_PLUS",D:"D",D_PLUS:"D_PLUS",C:"C",C_PLUS:"C_PLUS",B:"B",B_PLUS:"B_PLUS",A:"A",A_PLUS:"A_PLUS",S:"S"},Qg={[Be.E]:40,[Be.E_PLUS]:100,[Be.D]:180,[Be.D_PLUS]:300,[Be.C]:460,[Be.C_PLUS]:580,[Be.B]:860,[Be.B_PLUS]:1220,[Be.A]:1660,[Be.A_PLUS]:2420,[Be.S]:3500},rl=[Be.E,Be.E_PLUS,Be.D,Be.D_PLUS,Be.C,Be.C_PLUS,Be.B,Be.B_PLUS,Be.A,Be.A_PLUS,Be.S],bh={[Be.E]:"E",[Be.E_PLUS]:"E+",[Be.D]:"D",[Be.D_PLUS]:"D+",[Be.C]:"C",[Be.C_PLUS]:"C+",[Be.B]:"B",[Be.B_PLUS]:"B+",[Be.A]:"A",[Be.A_PLUS]:"A+",[Be.S]:"S"},zl={[te.SWORD]:{[Be.E]:{unlocks:{}},[Be.E_PLUS]:{unlocks:{combatSkills:{[Te.SWORD_PROWESS_1]:1}}},[Be.D]:{unlocks:{combatArts:{[vt.WRATH_STRIKE]:1}}},[Be.D_PLUS]:{unlocks:{combatSkills:{[Te.SWORD_PROWESS_2]:1}},removes:{combatSkills:{[Te.SWORD_PROWESS_1]:1}}},[Be.C]:{unlocks:{combatArts:{[vt.GROUNDER]:1}}},[Be.C_PLUS]:{unlocks:{combatSkills:{[Te.SWORD_PROWESS_3]:1},pickOne:[{type:Nn.CombatArt,options:[vt.SUNDER,vt.HAZE_SLICE]}]},removes:{combatSkills:{[Te.SWORD_PROWESS_2]:1}}},[Be.B]:{unlocks:{}},[Be.B_PLUS]:{unlocks:{combatSkills:{[Te.SWORD_PROWESS_4]:1}},removes:{combatSkills:{[Te.SWORD_PROWESS_3]:1}}},[Be.A]:{unlocks:{}},[Be.A_PLUS]:{unlocks:{combatSkills:{[Te.SWORD_PROWESS_5]:1}},removes:{combatSkills:{[Te.SWORD_PROWESS_4]:1}}},[Be.S]:{unlocks:{}}},[te.LANCE]:{[Be.E]:{unlocks:{}},[Be.E_PLUS]:{unlocks:{combatSkills:{[Te.LANCE_PROWESS_1]:1}}},[Be.D]:{unlocks:{combatArts:{[vt.TEMPEST_LANCE]:1}}},[Be.D_PLUS]:{unlocks:{combatSkills:{[Te.LANCE_PROWESS_2]:1}},removes:{combatSkills:{[Te.LANCE_PROWESS_1]:1}}},[Be.C]:{unlocks:{combatArts:{[vt.KNIGHT_KNEELER]:1}}},[Be.C_PLUS]:{unlocks:{combatSkills:{[Te.LANCE_PROWESS_3]:1},pickOne:[{type:Nn.CombatArt,options:[vt.SHATTER_SLASH,vt.HIT_AND_RUN]}]},removes:{combatSkills:{[Te.LANCE_PROWESS_2]:1}}},[Be.B]:{unlocks:{}},[Be.B_PLUS]:{unlocks:{combatSkills:{[Te.LANCE_PROWESS_4]:1}},removes:{combatSkills:{[Te.LANCE_PROWESS_3]:1}}},[Be.A]:{unlocks:{}},[Be.A_PLUS]:{unlocks:{combatSkills:{[Te.LANCE_PROWESS_5]:1}},removes:{combatSkills:{[Te.LANCE_PROWESS_4]:1}}},[Be.S]:{unlocks:{}}},[te.AXE]:{[Be.E]:{unlocks:{}},[Be.E_PLUS]:{unlocks:{combatSkills:{[Te.AXE_PROWESS_1]:1}}},[Be.D]:{unlocks:{combatArts:{[vt.SMASH]:1}}},[Be.D_PLUS]:{unlocks:{combatSkills:{[Te.AXE_PROWESS_2]:1}},removes:{combatSkills:{[Te.AXE_PROWESS_1]:1}}},[Be.C]:{unlocks:{combatArts:{[vt.HELM_SPLITTER]:1}}},[Be.C_PLUS]:{unlocks:{combatSkills:{[Te.AXE_PROWESS_3]:1},pickOne:[{type:Nn.CombatArt,options:[vt.FOCUSED_STRIKE,vt.SPIKE,vt.WILD_ABANDON,vt.DIAMOND_AXE]}]},removes:{combatSkills:{[Te.AXE_PROWESS_2]:1}}},[Be.B]:{unlocks:{}},[Be.B_PLUS]:{unlocks:{combatSkills:{[Te.AXE_PROWESS_4]:1}},removes:{combatSkills:{[Te.AXE_PROWESS_3]:1}}},[Be.A]:{unlocks:{}},[Be.A_PLUS]:{unlocks:{combatSkills:{[Te.AXE_PROWESS_5]:1}},removes:{combatSkills:{[Te.AXE_PROWESS_4]:1}}},[Be.S]:{unlocks:{}}},[te.BOW]:{[Be.E]:{unlocks:{}},[Be.E_PLUS]:{unlocks:{combatSkills:{[Te.BOW_PROWESS_1]:1}}},[Be.D]:{unlocks:{combatArts:{[vt.CURVED_SHOT]:1}}},[Be.D_PLUS]:{unlocks:{combatSkills:{[Te.BOW_PROWESS_2]:1}},removes:{combatSkills:{[Te.BOW_PROWESS_1]:1}}},[Be.C]:{unlocks:{combatSkills:{[Te.CLOSE_COUNTER]:1}}},[Be.C_PLUS]:{unlocks:{combatSkills:{[Te.BOW_PROWESS_3]:1},pickOne:[{type:Nn.CombatArt,options:[vt.DEADEYE,vt.HEAVY_DRAW,vt.WANING_SHOT,vt.BREAK_SHOT]}]},removes:{combatSkills:{[Te.BOW_PROWESS_2]:1}}},[Be.B]:{unlocks:{}},[Be.B_PLUS]:{unlocks:{combatSkills:{[Te.BOW_PROWESS_4]:1}},removes:{combatSkills:{[Te.BOW_PROWESS_3]:1}}},[Be.A]:{unlocks:{}},[Be.A_PLUS]:{unlocks:{combatSkills:{[Te.BOW_PROWESS_5]:1}},removes:{combatSkills:{[Te.BOW_PROWESS_4]:1}}},[Be.S]:{unlocks:{}}},[te.FISTS]:{[Be.E]:{unlocks:{}},[Be.E_PLUS]:{unlocks:{combatSkills:{[Te.FISTS_PROWESS_1]:1}}},[Be.D]:{unlocks:{combatArts:{[vt.FADING_BLOW]:1}}},[Be.D_PLUS]:{unlocks:{combatSkills:{[Te.FISTS_PROWESS_2]:1}},removes:{combatSkills:{[Te.FISTS_PROWESS_1]:1}}},[Be.C]:{unlocks:{combatArts:{[vt.RUSHING_BLOW]:1}}},[Be.C_PLUS]:{unlocks:{combatSkills:{[Te.FISTS_PROWESS_3]:1},pickOne:[{type:Nn.CombatArt,options:[vt.DRAINING_BLOW,vt.NIMBLE_COMBO,vt.BOMBARD,vt.ONE_TWO_PUNCH]}]},removes:{combatSkills:{[Te.FISTS_PROWESS_2]:1}}},[Be.B]:{unlocks:{}},[Be.B_PLUS]:{unlocks:{combatSkills:{[Te.FISTS_PROWESS_4]:1}},removes:{combatSkills:{[Te.FISTS_PROWESS_3]:1}}},[Be.A]:{unlocks:{}},[Be.A_PLUS]:{unlocks:{combatSkills:{[Te.FISTS_PROWESS_5]:1}},removes:{combatSkills:{[Te.FISTS_PROWESS_4]:1}}},[Be.S]:{unlocks:{}}},[te.HEAVY_ARMOR]:{[Be.E]:{unlocks:{}},[Be.E_PLUS]:{unlocks:{}},[Be.D]:{unlocks:{}},[Be.D_PLUS]:{unlocks:{},removes:{}},[Be.C]:{unlocks:{combatSkills:{[Te.WEIGHT_MINUS_3]:1}}},[Be.C_PLUS]:{unlocks:{},removes:{}},[Be.B]:{unlocks:{}},[Be.B_PLUS]:{unlocks:{},removes:{}},[Be.A]:{unlocks:{}},[Be.A_PLUS]:{unlocks:{},removes:{}},[Be.S]:{unlocks:{}}},[te.RIDING]:{[Be.E]:{unlocks:{}},[Be.E_PLUS]:{unlocks:{}},[Be.D]:{unlocks:{}},[Be.D_PLUS]:{unlocks:{combatSkills:{}},removes:{combatSkills:{}}},[Be.C]:{unlocks:{combatSkills:{[Te.AGILE_RIDER]:1}}},[Be.C_PLUS]:{unlocks:{combatSkills:{}},removes:{combatSkills:{}}},[Be.B]:{unlocks:{}},[Be.B_PLUS]:{unlocks:{combatSkills:{}},removes:{combatSkills:{}}},[Be.A]:{unlocks:{}},[Be.A_PLUS]:{unlocks:{combatSkills:{}},removes:{combatSkills:{}}},[Be.S]:{unlocks:{}}},[te.REASON]:{[Be.E]:{unlocks:{}},[Be.E_PLUS]:{unlocks:{combatSkills:{[Te.REASON_PROWESS_1]:1}}},[Be.D]:{unlocks:{pickOne:[{type:Nn.Weapon,options:[Pe.FIRE,Pe.WIND,Pe.THUNDER,Pe.BLIZZARD]}]}},[Be.D_PLUS]:{unlocks:{combatSkills:{[Te.REASON_PROWESS_2]:1}},removes:{combatSkills:{[Te.REASON_PROWESS_1]:1}}},[Be.C]:{unlocks:{pickOne:[{type:Nn.Weapon,options:[Pe.BOLGANONE,Pe.CUTTING_GALE,Pe.THORON,Pe.SAGITTAE,Pe.HAILSTORM]}]}},[Be.C_PLUS]:{unlocks:{combatSkills:{[Te.REASON_PROWESS_3]:1}},removes:{combatSkills:{[Te.REASON_PROWESS_2]:1}}},[Be.B]:{unlocks:{}},[Be.B_PLUS]:{unlocks:{combatSkills:{[Te.REASON_PROWESS_4]:1}},removes:{combatSkills:{[Te.REASON_PROWESS_3]:1}}},[Be.A]:{unlocks:{}},[Be.A_PLUS]:{unlocks:{combatSkills:{[Te.REASON_PROWESS_5]:1}},removes:{combatSkills:{[Te.REASON_PROWESS_4]:1}}},[Be.S]:{unlocks:{}}},[te.FAITH]:{[Be.E]:{unlocks:{}},[Be.E_PLUS]:{unlocks:{combatSkills:{[Te.FAITH_PROWESS_1]:1}}},[Be.D]:{unlocks:{weapons:{[Pe.HEAL]:1}}},[Be.D_PLUS]:{unlocks:{combatSkills:{[Te.FAITH_PROWESS_2]:1},weapons:{[Pe.NOSFERATU]:1}},removes:{combatSkills:{[Te.FAITH_PROWESS_1]:1}}},[Be.C]:{unlocks:{pickOne:[{type:Nn.Weapon,options:[Pe.PHYSIC,Pe.RECOVER,Pe.RESTORE,Pe.WARD]}]}},[Be.C_PLUS]:{unlocks:{combatSkills:{[Te.FAITH_PROWESS_3]:1}},removes:{combatSkills:{[Te.FAITH_PROWESS_2]:1}}},[Be.B]:{unlocks:{}},[Be.B_PLUS]:{unlocks:{combatSkills:{[Te.FAITH_PROWESS_4]:1}},removes:{combatSkills:{[Te.FAITH_PROWESS_3]:1}}},[Be.A]:{unlocks:{}},[Be.A_PLUS]:{unlocks:{combatSkills:{[Te.FAITH_PROWESS_5]:1}},removes:{combatSkills:{[Te.FAITH_PROWESS_4]:1}}},[Be.S]:{unlocks:{}}},[te.LEADERSHIP]:{[Be.E]:{unlocks:{}},[Be.E_PLUS]:{unlocks:{combatSkills:{[Te.LEADERSHIP_PROWESS_1]:1}}},[Be.D]:{unlocks:{}},[Be.D_PLUS]:{unlocks:{combatSkills:{[Te.LEADERSHIP_PROWESS_2]:1}},removes:{combatSkills:{[Te.LEADERSHIP_PROWESS_1]:1}}},[Be.C]:{unlocks:{}},[Be.C_PLUS]:{unlocks:{combatSkills:{[Te.LEADERSHIP_PROWESS_3]:1}},removes:{combatSkills:{[Te.LEADERSHIP_PROWESS_2]:1}}},[Be.B]:{unlocks:{}},[Be.B_PLUS]:{unlocks:{combatSkills:{[Te.LEADERSHIP_PROWESS_4]:1}},removes:{combatSkills:{[Te.LEADERSHIP_PROWESS_3]:1}}},[Be.A]:{unlocks:{}},[Be.A_PLUS]:{unlocks:{combatSkills:{[Te.LEADERSHIP_PROWESS_5]:1}},removes:{combatSkills:{[Te.LEADERSHIP_PROWESS_4]:1}}},[Be.S]:{unlocks:{}}}},dl=3,ml=5,Uo=3,j4=2,$8=2,e7=1,t7=1,n7=1,i7=5,s7=7,Ev={[Ye.STR]:10,[Ye.DEX]:10,[Ye.CON]:10,[Ye.INT]:10,[Ye.WIS]:10,[Ye.CHA]:10},H4={},q4={},Xg=5,Yg=4,Jg=8,Zg=0,xg=0,hs={MODAL:"simple-modal",DB:"db"},Fc={assetPath:"/assets/dice-box/",id:"dice-canvas",theme:"default",themeColor:"#FF0000",friction:.9,scale:10,gravity:5,mass:8,linearDamping:.6,angularDamping:.6,spinForce:1,throwForce:15,shadowTransparency:.6,startingHeight:5};function r7(n){let e,t;return{c(){e=E("div"),t=L("Attack"),this.h()},l(i){e=A(i,"DIV",{class:!0});var s=w(e);t=V(s,"Attack"),s.forEach(g),this.h()},h(){_(e,"class","attack svelte-kcenq0")},m(i,s){B(i,e,s),m(e,t)},d(i){i&&g(e)}}}function l7(n){let e,t;return{c(){e=E("div"),t=L("Crit"),this.h()},l(i){e=A(i,"DIV",{class:!0});var s=w(e);t=V(s,"Crit"),s.forEach(g),this.h()},h(){_(e,"class","Crit svelte-kcenq0")},m(i,s){B(i,e,s),m(e,t)},d(i){i&&g(e)}}}function o7(n){let e,t,i=(n[9]||"")+"",s;return{c(){e=E("div"),t=L("Crest of "),s=L(i),this.h()},l(r){e=A(r,"DIV",{class:!0});var l=w(e);t=V(l,"Crest of "),s=V(l,i),l.forEach(g),this.h()},h(){_(e,"class","Crest svelte-kcenq0")},m(r,l){B(r,e,l),m(e,t),m(e,s)},p:Ke,d(r){r&&g(e)}}}function a7(n){let e,t=n[10]?"HP Restored":"Damage",i;return{c(){e=E("div"),i=L(t),this.h()},l(s){e=A(s,"DIV",{class:!0});var r=w(e);i=V(r,t),r.forEach(g),this.h()},h(){_(e,"class","Damage svelte-kcenq0")},m(s,r){B(s,e,r),m(e,i)},p:Ke,d(s){s&&g(e)}}}function c7(n){let e,t;return{c(){e=E("div"),t=L(n[5]),this.h()},l(i){e=A(i,"DIV",{class:!0});var s=w(e);t=V(s,n[5]),s.forEach(g),this.h()},h(){_(e,"class","attack svelte-kcenq0")},m(i,s){B(i,e,s),m(e,t)},p:Ke,d(i){i&&g(e)}}}function ty(n){let e,t,i,s,r,l,o,a=n[6]&&u7(),c=n[7]&&f7(),u=n[8]!==void 0&&h7();return{c(){a&&a.c(),e=P(),c&&c.c(),t=P(),u&&u.c(),i=P(),s=E("div"),r=L("Click to reveal"),this.h()},l(f){a&&a.l(f),e=M(f),c&&c.l(f),t=M(f),u&&u.l(f),i=M(f),s=A(f,"DIV",{class:!0});var h=w(s);r=V(h,"Click to reveal"),h.forEach(g),this.h()},h(){_(s,"class","spoiler svelte-kcenq0"),rt(s,"left",n[3])},m(f,h){a&&a.m(f,h),B(f,e,h),c&&c.m(f,h),B(f,t,h),u&&u.m(f,h),B(f,i,h),B(f,s,h),m(s,r),l||(o=se(s,"click",n[15]),l=!0)},p(f,h){h&8&&rt(s,"left",f[3])},d(f){a&&a.d(f),f&&g(e),c&&c.d(f),f&&g(t),u&&u.d(f),f&&g(i),f&&g(s),l=!1,o()}}}function u7(n){let e;return{c(){e=E("div"),this.h()},l(t){e=A(t,"DIV",{class:!0}),w(e).forEach(g),this.h()},h(){_(e,"class","svelte-kcenq0")},m(t,i){B(t,e,i)},d(t){t&&g(e)}}}function f7(n){let e;return{c(){e=E("div"),this.h()},l(t){e=A(t,"DIV",{class:!0}),w(e).forEach(g),this.h()},h(){_(e,"class","svelte-kcenq0")},m(t,i){B(t,e,i)},d(t){t&&g(e)}}}function h7(n){let e;return{c(){e=E("div"),this.h()},l(t){e=A(t,"DIV",{class:!0}),w(e).forEach(g),this.h()},h(){_(e,"class","svelte-kcenq0")},m(t,i){B(t,e,i)},d(t){t&&g(e)}}}function ny(n){let e,t,i,s=n[6]&&d7(n),r=n[7]&&m7(n),l=n[8]!==void 0&&p7(n);return{c(){s&&s.c(),e=P(),r&&r.c(),t=P(),l&&l.c(),i=et()},l(o){s&&s.l(o),e=M(o),r&&r.l(o),t=M(o),l&&l.l(o),i=et()},m(o,a){s&&s.m(o,a),B(o,e,a),r&&r.m(o,a),B(o,t,a),l&&l.m(o,a),B(o,i,a)},p(o,a){o[6]&&s.p(o,a),o[7]&&r.p(o,a),o[8]!==void 0&&l.p(o,a)},d(o){s&&s.d(o),o&&g(e),r&&r.d(o),o&&g(t),l&&l.d(o),o&&g(i)}}}function d7(n){let e,t;return{c(){e=E("div"),t=L(n[6]),this.h()},l(i){e=A(i,"DIV",{class:!0});var s=w(e);t=V(s,n[6]),s.forEach(g),this.h()},h(){_(e,"class","Crit svelte-kcenq0")},m(i,s){B(i,e,s),m(e,t)},p:Ke,d(i){i&&g(e)}}}function m7(n){let e,t;return{c(){e=E("div"),t=L(n[7]),this.h()},l(i){e=A(i,"DIV",{class:!0});var s=w(e);t=V(s,n[7]),s.forEach(g),this.h()},h(){_(e,"class","Crest svelte-kcenq0")},m(i,s){B(i,e,s),m(e,t)},p:Ke,d(i){i&&g(e)}}}function p7(n){let e,t;return{c(){e=E("div"),t=L(n[8]),this.h()},l(i){e=A(i,"DIV",{class:!0});var s=w(e);t=V(s,n[8]),s.forEach(g),this.h()},h(){_(e,"class","Damage svelte-kcenq0")},m(i,s){B(i,e,s),m(e,t)},p:Ke,d(i){i&&g(e)}}}function g7(n){let e,t,i,s,r,l,o,a,c,u,f,h,d,p,v=n[5]!==void 0&&r7(),y=n[6]&&l7(),b=n[7]&&o7(n),S=n[8]!==void 0&&a7(n),I=n[5]!==void 0&&c7(n),T=n[2]&&ty(n),C=!n[2]&&ny(n);return{c(){e=E("div"),t=E("b"),i=L(n[4]),s=L(" - "),r=L(n[11]),l=P(),o=E("div"),v&&v.c(),a=P(),y&&y.c(),c=P(),b&&b.c(),u=P(),S&&S.c(),f=P(),h=E("div"),I&&I.c(),d=P(),T&&T.c(),p=P(),C&&C.c(),this.h()},l(k){e=A(k,"DIV",{class:!0});var R=w(e);t=A(R,"B",{class:!0});var O=w(t);i=V(O,n[4]),s=V(O," - "),r=V(O,n[11]),O.forEach(g),l=M(R),o=A(R,"DIV",{class:!0});var N=w(o);v&&v.l(N),a=M(N),y&&y.l(N),c=M(N),b&&b.l(N),u=M(N),S&&S.l(N),N.forEach(g),f=M(R),h=A(R,"DIV",{class:!0});var F=w(h);I&&I.l(F),d=M(F),T&&T.l(F),p=M(F),C&&C.l(F),F.forEach(g),R.forEach(g),this.h()},h(){_(t,"class","player svelte-kcenq0"),_(o,"class","rolls svelte-kcenq0"),_(h,"class","result svelte-kcenq0"),_(e,"class","container svelte-kcenq0")},m(k,R){B(k,e,R),m(e,t),m(t,i),m(t,s),m(t,r),m(e,l),m(e,o),v&&v.m(o,null),m(o,a),y&&y.m(o,null),m(o,c),b&&b.m(o,null),m(o,u),S&&S.m(o,null),m(e,f),m(e,h),I&&I.m(h,null),m(h,d),T&&T.m(h,null),m(h,p),C&&C.m(h,null)},p(k,[R]){k[7]&&b.p(k,R),k[8]!==void 0&&S.p(k,R),k[5]!==void 0&&I.p(k,R),k[2]?T?T.p(k,R):(T=ty(k),T.c(),T.m(h,p)):T&&(T.d(1),T=null),k[2]?C&&(C.d(1),C=null):C?C.p(k,R):(C=ny(k),C.c(),C.m(h,null))},i:Ke,o:Ke,d(k){k&&g(e),v&&v.d(),y&&y.d(),b&&b.d(),S&&S.d(),I&&I.d(),T&&T.d(),C&&C.d()}}}function v7(n,e,t){let i,s,{entry:r}=e,{spoilersOn:l}=e,{setAlreadyRevealed:o}=e,{index:a}=e;const{playerName:c="No Name",attackRoll:u,critRoll:f,crestRoll:h,damageRoll:d,crestName:p,isHealWeapon:v,attackName:y}=r;let b;Mi(()=>{t(2,b=l)});const S=()=>{t(2,b=!1),o(a)};return n.$$set=I=>{"entry"in I&&t(12,r=I.entry),"spoilersOn"in I&&t(13,l=I.spoilersOn),"setAlreadyRevealed"in I&&t(0,o=I.setAlreadyRevealed),"index"in I&&t(1,a=I.index)},n.$$.update=()=>{n.$$.dirty&24576&&t(3,s=l?i():0)},t(14,i=()=>{const I=u===void 0,T=(f?1:0)+(h?1:0)+(d!==void 0?1:0);return I?"0":T===1?"50%":T===2?"33%":"25%"}),[o,a,b,s,c,u,f,h,d,p,v,y,r,l,i,S]}class b7 extends nt{constructor(e){super(),it(this,e,v7,g7,Ct,{entry:12,spoilersOn:13,setAlreadyRevealed:0,index:1})}}const _7=n=>({}),iy=n=>({}),y7=n=>({}),sy=n=>({});function ry(n){let e,t,i,s,r,l;const o=n[16].t,a=os(o,n,n[15],sy),c=a||S7();return{c(){e=E("div"),t=E("div"),i=E("div"),c&&c.c(),this.h()},l(u){e=A(u,"DIV",{class:!0});var f=w(e);t=A(f,"DIV",{class:!0,style:!0});var h=w(t);i=A(h,"DIV",{class:!0});var d=w(i);c&&c.l(d),d.forEach(g),h.forEach(g),f.forEach(g),this.h()},h(){_(i,"class",s=Ze(`${n[1]} ${n[5]} TOOLTIP_tooltip_container ${n[0]}`)+" svelte-16reexv"),_(t,"class",r=Ze(`TOOLTIP_tooltip-positioner ${n[0]}`)+" svelte-16reexv"),_(t,"style",n[3]),_(e,"class","hidden svelte-16reexv")},m(u,f){B(u,e,f),m(e,t),m(t,i),c&&c.m(i,null),n[17](e),l=!0},p(u,f){a&&a.p&&(!l||f&32768)&&as(a,o,u,u[15],l?us(o,u[15],f,y7):cs(u[15]),sy),(!l||f&35&&s!==(s=Ze(`${u[1]} ${u[5]} TOOLTIP_tooltip_container ${u[0]}`)+" svelte-16reexv"))&&_(i,"class",s),(!l||f&1&&r!==(r=Ze(`TOOLTIP_tooltip-positioner ${u[0]}`)+" svelte-16reexv"))&&_(t,"class",r),(!l||f&8)&&_(t,"style",u[3])},i(u){l||(D(c,u),l=!0)},o(u){U(c,u),l=!1},d(u){u&&g(e),c&&c.d(u),n[17](null)}}}function S7(n){let e;return{c(){e=L("tooltip")},l(t){e=V(t,"tooltip")},m(t,i){B(t,e,i)},d(t){t&&g(e)}}}function ly(n){let e,t,i,s,r,l;const o=n[16].t,a=os(o,n,n[15],iy),c=a||E7();return{c(){e=E("div"),t=E("div"),i=E("div"),c&&c.c(),this.h()},l(u){e=A(u,"DIV",{class:!0});var f=w(e);t=A(f,"DIV",{class:!0,style:!0});var h=w(t);i=A(h,"DIV",{class:!0});var d=w(i);c&&c.l(d),d.forEach(g),h.forEach(g),f.forEach(g),this.h()},h(){_(i,"class",s=Ze(`${n[1]} ${n[5]} TOOLTIP_tooltip_container ${n[0]}`)+" svelte-16reexv"),_(t,"class",r=Ze(`TOOLTIP_tooltip-positioner ${n[0]}`)+" svelte-16reexv"),_(t,"style",n[3]),_(e,"class","hidden svelte-16reexv")},m(u,f){B(u,e,f),m(e,t),m(t,i),c&&c.m(i,null),n[18](e),l=!0},p(u,f){a&&a.p&&(!l||f&32768)&&as(a,o,u,u[15],l?us(o,u[15],f,_7):cs(u[15]),iy),(!l||f&35&&s!==(s=Ze(`${u[1]} ${u[5]} TOOLTIP_tooltip_container ${u[0]}`)+" svelte-16reexv"))&&_(i,"class",s),(!l||f&1&&r!==(r=Ze(`TOOLTIP_tooltip-positioner ${u[0]}`)+" svelte-16reexv"))&&_(t,"class",r),(!l||f&8)&&_(t,"style",u[3])},i(u){l||(D(c,u),l=!0)},o(u){U(c,u),l=!1},d(u){u&&g(e),c&&c.d(u),n[18](null)}}}function E7(n){let e;return{c(){e=L("tooltip")},l(t){e=V(t,"tooltip")},m(t,i){B(t,e,i)},d(t){t&&g(e)}}}function A7(n){let e,t,i,s,r=n[2]&&ry(n);const l=n[16].default,o=os(l,n,n[15],null);let a=!n[2]&&ly(n);return{c(){r&&r.c(),e=P(),o&&o.c(),t=P(),a&&a.c(),i=et()},l(c){r&&r.l(c),e=M(c),o&&o.l(c),t=M(c),a&&a.l(c),i=et()},m(c,u){r&&r.m(c,u),B(c,e,u),o&&o.m(c,u),B(c,t,u),a&&a.m(c,u),B(c,i,u),s=!0},p(c,[u]){c[2]?r?(r.p(c,u),u&4&&D(r,1)):(r=ry(c),r.c(),D(r,1),r.m(e.parentNode,e)):r&&(Le(),U(r,1,1,()=>{r=null}),Ve()),o&&o.p&&(!s||u&32768)&&as(o,l,c,c[15],s?us(l,c[15],u,null):cs(c[15]),null),c[2]?a&&(Le(),U(a,1,1,()=>{a=null}),Ve()):a?(a.p(c,u),u&4&&D(a,1)):(a=ly(c),a.c(),D(a,1),a.m(i.parentNode,i))},i(c){s||(D(r),D(o,c),D(a),s=!0)},o(c){U(r),U(o,c),U(a),s=!1},d(c){r&&r.d(c),c&&g(e),o&&o.d(c),c&&g(t),a&&a.d(c),c&&g(i)}}}function w7(n,e,t){let i,s,r,{$$slots:l={},$$scope:o}=e,{timeout:a=500}=e,{tooltipStyle:c=ns.RIGHT_START}=e,{tooltipClass:u=""}=e,{showing:f=!1}=e,{disabled:h=!1}=e,{hiddenFirst:d=!1}=e,{tooltipPositionerStyle:p=""}=e;const v={current:h};let y=!1;const b={current:null};let S;const I={current:null,mouseEnterListener:null,mouseLeaveListener:null};br(()=>{if(I.current){const k=I.current;k.removeEventListener("mouseover",I.mouseEnterListener),k.removeEventListener("mouseleave",I.mouseLeaveListener)}});function T(k){Vt[k?"unshift":"push"](()=>{S=k,t(4,S)})}function C(k){Vt[k?"unshift":"push"](()=>{S=k,t(4,S)})}return n.$$set=k=>{"timeout"in k&&t(6,a=k.timeout),"tooltipStyle"in k&&t(0,c=k.tooltipStyle),"tooltipClass"in k&&t(1,u=k.tooltipClass),"showing"in k&&t(7,f=k.showing),"disabled"in k&&t(8,h=k.disabled),"hiddenFirst"in k&&t(2,d=k.hiddenFirst),"tooltipPositionerStyle"in k&&t(3,p=k.tooltipPositionerStyle),"$$scope"in k&&t(15,o=k.$$scope)},n.$$.update=()=>{var k;if(n.$$.dirty&20&&t(14,i=d?S==null?void 0:S.nextElementSibling:S==null?void 0:S.previousElementSibling),n.$$.dirty&16&&t(13,r=S==null?void 0:S.childNodes[0]),n.$$.dirty&31552){if(i&&(I.current!==i||v.current!==h)){const R=()=>{t(11,b.current=setTimeout(()=>{t(10,y=!0),i!=null&&i.style&&t(14,i.style.zIndex=1,i),t(11,b.current=null,b)},a),b)},O=()=>{b.current&&clearTimeout(b.current),t(10,y=!1),i!=null&&i.style&&t(14,i.style.zIndex=0,i)},N=I.current;N&&(N.removeEventListener("mouseenter",I.mouseEnterListener),N.removeEventListener("mouseleave",I.mouseLeaveListener)),h?t(14,i.id="",i):(t(14,i.id+="TOOLTIP_container",i),t(12,I.current=i,I),t(12,I.mouseEnterListener=R,I),t(12,I.mouseLeaveListener=O,I),i==null||i.addEventListener("mouseenter",R),i==null||i.addEventListener("mouseleave",O))}t(9,v.current=h,v)}if(n.$$.dirty&16384&&t(5,s=(k=i==null?void 0:i.className.split(" "))==null?void 0:k.find(R=>R.indexOf("s-")===0)),n.$$.dirty&25760&&i)if(f||y)i==null||i.appendChild(r);else try{i==null||i.removeChild(r)}catch{}},[c,u,d,p,S,s,a,f,h,v,y,b,I,r,i,o,l,T,C]}class ai extends nt{constructor(e){super(),it(this,e,w7,A7,Ct,{timeout:6,tooltipStyle:0,tooltipClass:1,showing:7,disabled:8,hiddenFirst:2,tooltipPositionerStyle:3})}}function C7(n){let e,t;return{c(){e=E("span"),t=L(n[3])},l(i){e=A(i,"SPAN",{});var s=w(e);t=V(s,n[3]),s.forEach(g)},m(i,s){B(i,e,s),m(e,t)},p(i,s){s&8&&Ce(t,i[3])},d(i){i&&g(e)}}}function k7(n){let e,t;return{c(){e=E("div"),t=L(n[4]),this.h()},l(i){e=A(i,"DIV",{slot:!0});var s=w(e);t=V(s,n[4]),s.forEach(g),this.h()},h(){_(e,"slot","t")},m(i,s){B(i,e,s),m(e,t)},p(i,s){s&16&&Ce(t,i[4])},d(i){i&&g(e)}}}function T7(n){let e,t,i,s,r,l,o=ws(n[2])+"",a,c,u,f,h,d,p,v,y,b,S,I;return S=new ai({props:{tooltipStyle:ns.CENTER,$$slots:{t:[k7],default:[C7]},$$scope:{ctx:n}}}),{c(){e=E("div"),t=E("b"),i=L(n[0]),s=L(" - "),r=L(n[1]),l=L(" ("),a=L(o),c=L(")"),u=P(),f=E("div"),h=E("div"),d=L("Result"),v=P(),y=E("div"),b=E("div"),ce(S.$$.fragment),this.h()},l(T){e=A(T,"DIV",{class:!0});var C=w(e);t=A(C,"B",{class:!0});var k=w(t);i=V(k,n[0]),s=V(k," - "),r=V(k,n[1]),l=V(k," ("),a=V(k,o),c=V(k,")"),k.forEach(g),u=M(C),f=A(C,"DIV",{class:!0,id:!0});var R=w(f);h=A(R,"DIV",{class:!0});var O=w(h);d=V(O,"Result"),O.forEach(g),R.forEach(g),v=M(C),y=A(C,"DIV",{class:!0});var N=w(y);b=A(N,"DIV",{class:!0});var F=w(b);ge(S.$$.fragment,F),F.forEach(g),N.forEach(g),C.forEach(g),this.h()},h(){_(t,"class","player svelte-128nkkc"),_(h,"class","attack svelte-128nkkc"),_(f,"class","rolls svelte-128nkkc"),_(f,"id",p=`chat-entry-${n[5]}`),_(b,"class","attack svelte-128nkkc"),_(y,"class","result svelte-128nkkc"),_(e,"class","container svelte-128nkkc")},m(T,C){B(T,e,C),m(e,t),m(t,i),m(t,s),m(t,r),m(t,l),m(t,a),m(t,c),m(e,u),m(e,f),m(f,h),m(h,d),m(e,v),m(e,y),m(y,b),ue(S,b,null),I=!0},p(T,[C]){(!I||C&1)&&Ce(i,T[0]),(!I||C&2)&&Ce(r,T[1]),(!I||C&4)&&o!==(o=ws(T[2])+"")&&Ce(a,o),(!I||C&32&&p!==(p=`chat-entry-${T[5]}`))&&_(f,"id",p);const k={};C&88&&(k.$$scope={dirty:C,ctx:T}),S.$set(k)},i(T){I||(D(S.$$.fragment,T),I=!0)},o(T){U(S.$$.fragment,T),I=!1},d(T){T&&g(e),fe(S)}}}function I7(n,e,t){let{playerName:i="No Name"}=e,{rollName:s="Basic Roll"}=e,{rollBonus:r=0}=e,{roll:l="-"}=e,{rollTooltip:o="n/a"}=e,{date:a}=e;return n.$$set=c=>{"playerName"in c&&t(0,i=c.playerName),"rollName"in c&&t(1,s=c.rollName),"rollBonus"in c&&t(2,r=c.rollBonus),"roll"in c&&t(3,l=c.roll),"rollTooltip"in c&&t(4,o=c.rollTooltip),"date"in c&&t(5,a=c.date)},[i,s,r,l,o,a]}class O7 extends nt{constructor(e){super(),it(this,e,I7,T7,Ct,{playerName:0,rollName:1,rollBonus:2,roll:3,rollTooltip:4,date:5})}}function oy(n,e,t){var r;const i=n.slice();i[11]=e[t],i[14]=t;const s=((r=i[11])==null?void 0:r.type)||"BASIC_ROLL";return i[12]=s,i}function ay(n){let e,t;return{c(){e=E("div"),t=L("Loading")},l(i){e=A(i,"DIV",{});var s=w(e);t=V(s,"Loading"),s.forEach(g)},m(i,s){B(i,e,s),m(e,t)},d(i){i&&g(e)}}}function cy(n){let e,t,i=n[0],s=[];for(let l=0;l<i.length;l+=1)s[l]=hy(oy(n,i,l));const r=l=>U(s[l],1,1,()=>{s[l]=null});return{c(){for(let l=0;l<s.length;l+=1)s[l].c();e=et()},l(l){for(let o=0;o<s.length;o+=1)s[o].l(l);e=et()},m(l,o){for(let a=0;a<s.length;a+=1)s[a].m(l,o);B(l,e,o),t=!0},p(l,o){if(o&27){i=l[0];let a;for(a=0;a<i.length;a+=1){const c=oy(l,i,a);s[a]?(s[a].p(c,o),D(s[a],1)):(s[a]=hy(c),s[a].c(),D(s[a],1),s[a].m(e.parentNode,e))}for(Le(),a=i.length;a<s.length;a+=1)r(a);Ve()}},i(l){if(!t){for(let o=0;o<i.length;o+=1)D(s[o]);t=!0}},o(l){s=s.filter(Boolean);for(let o=0;o<s.length;o+=1)U(s[o]);t=!1},d(l){Ft(s,l),l&&g(e)}}}function uy(n){let e,t;const i=[n[11]];let s={};for(let r=0;r<i.length;r+=1)s=Qr(s,i[r]);return e=new O7({props:s}),{c(){ce(e.$$.fragment)},l(r){ge(e.$$.fragment,r)},m(r,l){ue(e,r,l),t=!0},p(r,l){const o=l&1?Xr(i,[Jo(r[11])]):{};e.$set(o)},i(r){t||(D(e.$$.fragment,r),t=!0)},o(r){U(e.$$.fragment,r),t=!1},d(r){fe(e,r)}}}function fy(n){let e,t;return e=new b7({props:{entry:n[11],spoilersOn:n[1]!==1/0&&n[14]>=n[1]&&n[3][n[14]]!==!0,index:n[14],setAlreadyRevealed:n[4]}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s&1&&(r.entry=i[11]),s&10&&(r.spoilersOn=i[1]!==1/0&&i[14]>=i[1]&&i[3][i[14]]!==!0),s&16&&(r.setAlreadyRevealed=i[4]),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function hy(n){let e,t,i,s=n[12]==="BASIC_ROLL"&&uy(n),r=n[12]!=="BASIC_ROLL"&&fy(n);return{c(){s&&s.c(),e=P(),r&&r.c(),t=et()},l(l){s&&s.l(l),e=M(l),r&&r.l(l),t=et()},m(l,o){s&&s.m(l,o),B(l,e,o),r&&r.m(l,o),B(l,t,o),i=!0},p(l,o){l[12]==="BASIC_ROLL"?s?(s.p(l,o),o&1&&D(s,1)):(s=uy(l),s.c(),D(s,1),s.m(e.parentNode,e)):s&&(Le(),U(s,1,1,()=>{s=null}),Ve()),l[12]!=="BASIC_ROLL"?r?(r.p(l,o),o&1&&D(r,1)):(r=fy(l),r.c(),D(r,1),r.m(t.parentNode,t)):r&&(Le(),U(r,1,1,()=>{r=null}),Ve())},i(l){i||(D(s),D(r),i=!0)},o(l){U(s),U(r),i=!1},d(l){s&&s.d(l),l&&g(e),r&&r.d(l),l&&g(t)}}}function R7(n){var R;let e,t,i,s,r=(((R=n[0])==null?void 0:R.length)||"-")+"",l,o,a,c,u,f,h,d,p,v,y,b,S,I,T,C=!n[0]&&ay(),k=n[0]&&cy(n);return{c(){e=E("div"),t=E("div"),i=E("h3"),s=L("Roll Chat (total entries: "),l=L(r),o=L(")"),a=P(),c=E("div"),u=E("span"),f=L("Hide Damage Initially?"),h=P(),d=E("input"),v=P(),y=E("div"),C&&C.c(),b=P(),k&&k.c(),this.h()},l(O){e=A(O,"DIV",{class:!0});var N=w(e);t=A(N,"DIV",{});var F=w(t);i=A(F,"H3",{});var W=w(i);s=V(W,"Roll Chat (total entries: "),l=V(W,r),o=V(W,")"),W.forEach(g),F.forEach(g),a=M(N),c=A(N,"DIV",{});var z=w(c);u=A(z,"SPAN",{});var Y=w(u);f=V(Y,"Hide Damage Initially?"),Y.forEach(g),h=M(z),d=A(z,"INPUT",{type:!0}),z.forEach(g),v=M(N),y=A(N,"DIV",{class:!0,id:!0});var H=w(y);C&&C.l(H),b=M(H),k&&k.l(H),H.forEach(g),N.forEach(g),this.h()},h(){rt(t,"width","100%"),_(d,"type","checkbox"),d.checked=p=n[1]!==1/0,_(y,"class","scroll-container svelte-ph62s6"),_(y,"id","test"),_(e,"class","container svelte-ph62s6")},m(O,N){B(O,e,N),m(e,t),m(t,i),m(i,s),m(i,l),m(i,o),m(e,a),m(e,c),m(c,u),m(u,f),m(c,h),m(c,d),m(e,v),m(e,y),C&&C.m(y,null),m(y,b),k&&k.m(y,null),n[9](y),S=!0,I||(T=se(d,"click",function(){Mn(n[2])&&n[2].apply(this,arguments)}),I=!0)},p(O,[N]){var F;n=O,(!S||N&1)&&r!==(r=(((F=n[0])==null?void 0:F.length)||"-")+"")&&Ce(l,r),(!S||N&2&&p!==(p=n[1]!==1/0))&&(d.checked=p),n[0]?C&&(C.d(1),C=null):C||(C=ay(),C.c(),C.m(y,b)),n[0]?k?(k.p(n,N),N&1&&D(k,1)):(k=cy(n),k.c(),D(k,1),k.m(y,null)):k&&(Le(),U(k,1,1,()=>{k=null}),Ve())},i(O){S||(D(k),S=!0)},o(O){U(k),S=!1},d(O){O&&g(e),C&&C.d(),k&&k.d(),n[9](null),I=!1,T()}}}function D7(n,e,t){let{chatEntries:i}=e,{spoilersOn:s}=e,{toggleSpoilersOn:r}=e,{alreadyRevealed:l}=e,{setAlreadyRevealed:o}=e,a,c=-1,u=!1,f,h=new Audio("beep.ogg");Mi(()=>{t(7,u=!0),t(8,f=i.length)});function d(p){Vt[p?"unshift":"push"](()=>{a=p,t(5,a),t(0,i),t(6,c)})}return n.$$set=p=>{"chatEntries"in p&&t(0,i=p.chatEntries),"spoilersOn"in p&&t(1,s=p.spoilersOn),"toggleSpoilersOn"in p&&t(2,r=p.toggleSpoilersOn),"alreadyRevealed"in p&&t(3,l=p.alreadyRevealed),"setAlreadyRevealed"in p&&t(4,o=p.setAlreadyRevealed)},n.$$.update=()=>{n.$$.dirty&97&&a&&c!==(i==null?void 0:i.length)&&(Math.abs((a==null?void 0:a.scrollHeight)-(a==null?void 0:a.scrollTop)-(a==null?void 0:a.clientHeight))<1||c===-1?window.requestAnimationFrame(()=>{t(5,a.scrollTop=a.scrollHeight,a),t(6,c=i.length)}):t(6,c=i.length)),n.$$.dirty&385&&u&&f!==i.length&&h.play()},[i,s,r,l,o,a,c,u,f,d]}class z4 extends nt{constructor(e){super(),it(this,e,D7,R7,Ct,{chatEntries:0,spoilersOn:1,toggleSpoilersOn:2,alreadyRevealed:3,setAlreadyRevealed:4})}}function dy(n,e,t){const i=n.slice();return i[20]=e[t],i}function my(n,e,t){const i=n.slice();return i[23]=e[t],i}function py(n){var o;let e,t=((o=n[3][n[23]])==null?void 0:o.label)+"",i,s,r,l;return{c(){e=E("option"),i=L(t),s=P(),this.h()},l(a){e=A(a,"OPTION",{});var c=w(e);i=V(c,t),s=M(c),c.forEach(g),this.h()},h(){e.__value=r=n[23],e.value=e.__value,e.selected=l=n[1]===n[23]},m(a,c){B(a,e,c),m(e,i),m(e,s)},p(a,c){var u;c&1032&&t!==(t=((u=a[3][a[23]])==null?void 0:u.label)+"")&&Ce(i,t),c&1024&&r!==(r=a[23])&&(e.__value=r,e.value=e.__value),c&1026&&l!==(l=a[1]===a[23])&&(e.selected=l)},d(a){a&&g(e)}}}function gy(n){let e,t,i,s,r,l=n[10],o=[];for(let a=0;a<l.length;a+=1)o[a]=py(my(n,l,a));return{c(){e=E("select"),t=E("option"),i=L("- ");for(let a=0;a<o.length;a+=1)o[a].c();this.h()},l(a){e=A(a,"SELECT",{class:!0});var c=w(e);t=A(c,"OPTION",{});var u=w(t);i=V(u,"- "),u.forEach(g);for(let f=0;f<o.length;f+=1)o[f].l(c);c.forEach(g),this.h()},h(){t.__value="",t.value=t.__value,_(e,"class","svelte-xlcqi6")},m(a,c){B(a,e,c),m(e,t),m(t,i);for(let u=0;u<o.length;u+=1)o[u].m(e,null);s||(r=se(e,"change",n[17]),s=!0)},p(a,c){if(c&1034){l=a[10];let u;for(u=0;u<l.length;u+=1){const f=my(a,l,u);o[u]?o[u].p(f,c):(o[u]=py(f),o[u].c(),o[u].m(e,null))}for(;u<o.length;u+=1)o[u].d(1);o.length=l.length}},d(a){a&&g(e),Ft(o,a),s=!1,r()}}}function vy(n){let e,t,i="Combat Art: ",s,r,l=n[8],o=_y(n);return{c(){e=E("div"),t=E("span"),s=L(i),r=P(),o.c(),this.h()},l(a){e=A(a,"DIV",{class:!0});var c=w(e);t=A(c,"SPAN",{class:!0});var u=w(t);s=V(u,i),u.forEach(g),r=M(c),o.l(c),c.forEach(g),this.h()},h(){_(t,"class","label"),_(e,"class","selection svelte-xlcqi6")},m(a,c){B(a,e,c),m(e,t),m(t,s),m(e,r),o.m(e,null)},p(a,c){c&256&&Ct(l,l=a[8])?(o.d(1),o=_y(a),o.c(),o.m(e,null)):o.p(a,c)},d(a){a&&g(e),o.d(a)}}}function by(n){let e,t=n[9][n[20]].label+"",i,s,r,l;return{c(){e=E("option"),i=L(t),s=P(),this.h()},l(o){e=A(o,"OPTION",{});var a=w(e);i=V(a,t),s=M(a),a.forEach(g),this.h()},h(){e.__value=r=n[20],e.value=e.__value,e.selected=l=n[6]===n[20]},m(o,a){B(o,e,a),m(e,i),m(e,s)},p(o,a){a&768&&t!==(t=o[9][o[20]].label+"")&&Ce(i,t),a&256&&r!==(r=o[20])&&(e.__value=r,e.value=e.__value),a&320&&l!==(l=o[6]===o[20])&&(e.selected=l)},d(o){o&&g(e)}}}function _y(n){let e,t,i,s,r,l=n[8],o=[];for(let a=0;a<l.length;a+=1)o[a]=by(dy(n,l,a));return{c(){e=E("select"),t=E("option"),i=L("- ");for(let a=0;a<o.length;a+=1)o[a].c();this.h()},l(a){e=A(a,"SELECT",{class:!0});var c=w(e);t=A(c,"OPTION",{});var u=w(t);i=V(u,"- "),u.forEach(g);for(let f=0;f<o.length;f+=1)o[f].l(c);c.forEach(g),this.h()},h(){t.__value="",t.value=t.__value,_(e,"class","svelte-xlcqi6")},m(a,c){B(a,e,c),m(e,t),m(t,i);for(let u=0;u<o.length;u+=1)o[u].m(e,null);s||(r=se(e,"change",n[18]),s=!0)},p(a,c){if(c&832){l=a[8];let u;for(u=0;u<l.length;u+=1){const f=dy(a,l,u);o[u]?o[u].p(f,c):(o[u]=by(f),o[u].c(),o[u].m(e,null))}for(;u<o.length;u+=1)o[u].d(1);o.length=l.length}},d(a){a&&g(e),Ft(o,a),s=!1,r()}}}function N7(n){let e,t,i,s,r="Weapon: ",l,o,a=n[10],c,u,f,h,d,p,v,y,b,S,I=gy(n),T=n[8].length>0&&vy(n);return{c(){e=E("div"),t=E("div"),i=E("div"),s=E("span"),l=L(r),o=P(),I.c(),c=P(),u=E("div"),T&&T.c(),f=P(),h=E("div"),d=E("span"),p=L("Range"),v=P(),y=E("input"),this.h()},l(C){e=A(C,"DIV",{class:!0});var k=w(e);t=A(k,"DIV",{class:!0});var R=w(t);i=A(R,"DIV",{class:!0});var O=w(i);s=A(O,"SPAN",{class:!0});var N=w(s);l=V(N,r),N.forEach(g),o=M(O),I.l(O),O.forEach(g),R.forEach(g),c=M(k),u=A(k,"DIV",{class:!0});var F=w(u);T&&T.l(F),F.forEach(g),f=M(k),h=A(k,"DIV",{class:!0});var W=w(h);d=A(W,"SPAN",{});var z=w(d);p=V(z,"Range"),z.forEach(g),v=M(W),y=A(W,"INPUT",{type:!0,min:!0,class:!0}),W.forEach(g),k.forEach(g),this.h()},h(){_(s,"class","label"),_(i,"class","selection svelte-xlcqi6"),_(t,"class","entry svelte-xlcqi6"),_(u,"class","entry svelte-xlcqi6"),_(y,"type","number"),y.value=n[4],_(y,"min","0"),_(y,"class","svelte-xlcqi6"),_(h,"class","range-finder svelte-xlcqi6"),_(e,"class","container svelte-xlcqi6")},m(C,k){B(C,e,k),m(e,t),m(t,i),m(i,s),m(s,l),m(i,o),I.m(i,null),m(e,c),m(e,u),T&&T.m(u,null),m(e,f),m(e,h),m(h,d),m(d,p),m(h,v),m(h,y),b||(S=se(y,"change",n[19]),b=!0)},p(C,[k]){k&1024&&Ct(a,a=C[10])?(I.d(1),I=gy(C),I.c(),I.m(i,null)):I.p(C,k),C[8].length>0?T?T.p(C,k):(T=vy(C),T.c(),T.m(u,null)):T&&(T.d(1),T=null),k&16&&y.value!==C[4]&&(y.value=C[4])},i:Ke,o:Ke,d(C){C&&g(e),I.d(C),T&&T.d(),b=!1,S()}}}function P7(n,e,t){let i,s,r,l,{equippedClass:o}=e,{allWeapons:a}=e,{equippedWeapons:c}=e,{selectedWeapon:u}=e,{setSelectedWeapon:f}=e,{damageTypeSelection:h}=e,{weaponsToFeatures:d}=e,{distanceToTarget:p}=e,{setDistanceToTarget:v}=e,{selectedCombatArt:y}=e,{setSelectedCombatArt:b}=e,{equippedCombatArts:S}=e,{allCombatArts:I}=e;const T=R=>{f(R.currentTarget.value),t(0,h="")},C=R=>{b(R.currentTarget.value)},k=R=>v(parseInt(R.currentTarget.value));return n.$$set=R=>{"equippedClass"in R&&t(11,o=R.equippedClass),"allWeapons"in R&&t(12,a=R.allWeapons),"equippedWeapons"in R&&t(13,c=R.equippedWeapons),"selectedWeapon"in R&&t(1,u=R.selectedWeapon),"setSelectedWeapon"in R&&t(2,f=R.setSelectedWeapon),"damageTypeSelection"in R&&t(0,h=R.damageTypeSelection),"weaponsToFeatures"in R&&t(3,d=R.weaponsToFeatures),"distanceToTarget"in R&&t(4,p=R.distanceToTarget),"setDistanceToTarget"in R&&t(5,v=R.setDistanceToTarget),"selectedCombatArt"in R&&t(6,y=R.selectedCombatArt),"setSelectedCombatArt"in R&&t(7,b=R.setSelectedCombatArt),"equippedCombatArts"in R&&t(14,S=R.equippedCombatArts),"allCombatArts"in R&&t(15,I=R.allCombatArts)},n.$$.update=()=>{var R;n.$$.dirty&10&&t(16,i=(R=d[u])==null?void 0:R.type),n.$$.dirty&14344&&t(10,s=[...c,...!o||Xt[o].canUseMagic===!0?a.fullArray.filter(O=>Cm.includes(d[O].type)):[]]),n.$$.dirty&1030&&u&&!s.includes(u)&&f(""),n.$$.dirty&32768&&t(9,r=I.fullFeatures),n.$$.dirty&82432&&t(8,l=S.filter(O=>(r[O].compatibleWeapons||[]).indexOf(i)!==-1)),n.$$.dirty&448&&y&&!l.includes(y)&&b("")},[h,u,f,d,p,v,y,b,l,r,s,o,a,c,S,I,i,T,C,k]}class M7 extends nt{constructor(e){super(),it(this,e,P7,N7,Ct,{equippedClass:11,allWeapons:12,equippedWeapons:13,selectedWeapon:1,setSelectedWeapon:2,damageTypeSelection:0,weaponsToFeatures:3,distanceToTarget:4,setDistanceToTarget:5,selectedCombatArt:6,setSelectedCombatArt:7,equippedCombatArts:14,allCombatArts:15})}}function yy(n){let e,t,i,s,r,l,o,a,c=n[11]&&Sy(n);return{c(){e=E("div"),t=E("h3"),i=L("Attack"),s=P(),r=E("div"),l=L(n[25]),o=P(),c&&c.c(),this.h()},l(u){e=A(u,"DIV",{class:!0});var f=w(e);t=A(f,"H3",{class:!0});var h=w(t);i=V(h,"Attack"),h.forEach(g),s=M(f),r=A(f,"DIV",{class:!0});var d=w(r);l=V(d,n[25]),d.forEach(g),o=M(f),c&&c.l(f),f.forEach(g),this.h()},h(){_(t,"class","svelte-inr05g"),_(r,"class","content svelte-inr05g"),_(e,"class","attack svelte-inr05g")},m(u,f){B(u,e,f),m(e,t),m(t,i),m(e,s),m(e,r),m(r,l),m(e,o),c&&c.m(e,null),a=!0},p(u,f){(!a||f[0]&33554432)&&Ce(l,u[25]),u[11]?c?(c.p(u,f),f[0]&2048&&D(c,1)):(c=Sy(u),c.c(),D(c,1),c.m(e,null)):c&&(Le(),U(c,1,1,()=>{c=null}),Ve())},i(u){a||(D(c),a=!0)},o(u){U(c),a=!1},d(u){u&&g(e),c&&c.d()}}}function Sy(n){let e,t;return e=new ai({props:{$$slots:{t:[L7],default:[B7]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s[0]&262144|s[2]&2&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function B7(n){let e,t,i,s;return{c(){e=E("button"),t=L("Re-roll"),this.h()},l(r){e=A(r,"BUTTON",{class:!0});var l=w(e);t=V(l,"Re-roll"),l.forEach(g),this.h()},h(){_(e,"class","re-roller svelte-inr05g")},m(r,l){B(r,e,l),m(e,t),i||(s=se(e,"click",function(){Mn(n[18])&&n[18].apply(this,arguments)}),i=!0)},p(r,l){n=r},d(r){r&&g(e),i=!1,s()}}}function L7(n){let e,t;return{c(){e=E("div"),t=L(`Only meant to be used for advantage/disadvantage. Will not automatically decrement
									your superiority die or weapon uses`),this.h()},l(i){e=A(i,"DIV",{slot:!0,class:!0});var s=w(e);t=V(s,`Only meant to be used for advantage/disadvantage. Will not automatically decrement
									your superiority die or weapon uses`),s.forEach(g),this.h()},h(){_(e,"slot","t"),_(e,"class","svelte-inr05g")},m(i,s){B(i,e,s),m(e,t)},p:Ke,d(i){i&&g(e)}}}function Ey(n){let e,t,i,s,r,l,o;return{c(){e=E("div"),t=E("h3"),i=L("Crit Range"),s=P(),r=E("div"),l=E("span"),o=L(n[21]),this.h()},l(a){e=A(a,"DIV",{class:!0});var c=w(e);t=A(c,"H3",{class:!0});var u=w(t);i=V(u,"Crit Range"),u.forEach(g),s=M(c),r=A(c,"DIV",{class:!0});var f=w(r);l=A(f,"SPAN",{});var h=w(l);o=V(h,n[21]),h.forEach(g),f.forEach(g),c.forEach(g),this.h()},h(){_(t,"class","svelte-inr05g"),_(r,"class","content svelte-inr05g"),_(e,"class","crit svelte-inr05g")},m(a,c){B(a,e,c),m(e,t),m(t,i),m(e,s),m(e,r),m(r,l),m(l,o)},p(a,c){c[0]&2097152&&Ce(o,a[21])},d(a){a&&g(e)}}}function Ay(n){let e,t;return e=new ai({props:{tooltipStyle:ns.CENTER,$$slots:{t:[U7],default:[V7]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s[0]&48|s[2]&2&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function wy(n){let e,t,i;return{c(){e=E("span"),t=L("DC "),i=L(n[5])},l(s){e=A(s,"SPAN",{});var r=w(e);t=V(r,"DC "),i=V(r,n[5]),r.forEach(g)},m(s,r){B(s,e,r),m(e,t),m(e,i)},p(s,r){r[0]&32&&Ce(i,s[5])},d(s){s&&g(e)}}}function V7(n){let e,t,i,s=Kg[n[4]]+"",r,l,o,a=n[5]&&n[5]<=20&&wy(n);return{c(){e=E("div"),t=E("h3"),i=L("Crest of "),r=L(s),l=P(),o=E("div"),a&&a.c(),this.h()},l(c){e=A(c,"DIV",{class:!0});var u=w(e);t=A(u,"H3",{class:!0});var f=w(t);i=V(f,"Crest of "),r=V(f,s),f.forEach(g),l=M(u),o=A(u,"DIV",{class:!0});var h=w(o);a&&a.l(h),h.forEach(g),u.forEach(g),this.h()},h(){_(t,"class","svelte-inr05g"),_(o,"class","content svelte-inr05g"),_(e,"class","crest svelte-inr05g")},m(c,u){B(c,e,u),m(e,t),m(t,i),m(t,r),m(e,l),m(e,o),a&&a.m(o,null)},p(c,u){u[0]&16&&s!==(s=Kg[c[4]]+"")&&Ce(r,s),c[5]&&c[5]<=20?a?a.p(c,u):(a=wy(c),a.c(),a.m(o,null)):a&&(a.d(1),a=null)},d(c){c&&g(e),a&&a.d()}}}function U7(n){let e,t=Ds[n[4]].description+"",i;return{c(){e=E("div"),i=L(t),this.h()},l(s){e=A(s,"DIV",{slot:!0,class:!0});var r=w(e);i=V(r,t),r.forEach(g),this.h()},h(){_(e,"slot","t"),_(e,"class","svelte-inr05g")},m(s,r){B(s,e,r),m(e,i)},p(s,r){r[0]&16&&t!==(t=Ds[s[4]].description+"")&&Ce(i,t)},d(s){s&&g(e)}}}function Cy(n){var f;let e,t,i=n[11]!==""&&n[12]!==""?`${n[11]} + ${n[12]} = ${n[11]+n[12]}`:"...",s,r,l,o,a=n[11]!==""&&((f=n[1].fullFeatures[n[8]])==null?void 0:f.description)&&ky(n),c=n[16]>1&&Ty(n),u=n[16]<1&&Iy();return{c(){e=E("div"),t=E("div"),s=L(i),r=P(),a&&a.c(),l=P(),c&&c.c(),o=P(),u&&u.c(),this.h()},l(h){e=A(h,"DIV",{class:!0});var d=w(e);t=A(d,"DIV",{});var p=w(t);s=V(p,i),p.forEach(g),r=M(d),a&&a.l(d),l=M(d),c&&c.l(d),o=M(d),u&&u.l(d),d.forEach(g),this.h()},h(){_(e,"class","attack svelte-inr05g")},m(h,d){B(h,e,d),m(e,t),m(t,s),m(e,r),a&&a.m(e,null),m(e,l),c&&c.m(e,null),m(e,o),u&&u.m(e,null)},p(h,d){var p;d[0]&6144&&i!==(i=h[11]!==""&&h[12]!==""?`${h[11]} + ${h[12]} = ${h[11]+h[12]}`:"...")&&Ce(s,i),h[11]!==""&&((p=h[1].fullFeatures[h[8]])!=null&&p.description)?a?a.p(h,d):(a=ky(h),a.c(),a.m(e,l)):a&&(a.d(1),a=null),h[16]>1?c?c.p(h,d):(c=Ty(h),c.c(),c.m(e,o)):c&&(c.d(1),c=null),h[16]<1?u||(u=Iy(),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},d(h){h&&g(e),a&&a.d(),c&&c.d(),u&&u.d()}}}function ky(n){var s;let e,t=((s=n[1].fullFeatures[n[8]])==null?void 0:s.description)+"",i;return{c(){e=E("div"),i=L(t),this.h()},l(r){e=A(r,"DIV",{class:!0});var l=w(e);i=V(l,t),l.forEach(g),this.h()},h(){_(e,"class","combat-art-note svelte-inr05g")},m(r,l){B(r,e,l),m(e,i)},p(r,l){var o;l[0]&258&&t!==(t=((o=r[1].fullFeatures[r[8]])==null?void 0:o.description)+"")&&Ce(i,t)},d(r){r&&g(e)}}}function Ty(n){let e,t,i=n[16]-1+"",s,r;return{c(){e=E("div"),t=L("Cost "),s=L(i),r=L(" extra superiority die"),this.h()},l(l){e=A(l,"DIV",{class:!0});var o=w(e);t=V(o,"Cost "),s=V(o,i),r=V(o," extra superiority die"),o.forEach(g),this.h()},h(){_(e,"class","cf svelte-inr05g")},m(l,o){B(l,e,o),m(e,t),m(e,s),m(e,r)},p(l,o){o[0]&65536&&i!==(i=l[16]-1+"")&&Ce(s,i)},d(l){l&&g(e)}}}function Iy(n){let e,t;return{c(){e=E("div"),t=L("Cost 0 superiority die"),this.h()},l(i){e=A(i,"DIV",{class:!0});var s=w(e);t=V(s,"Cost 0 superiority die"),s.forEach(g),this.h()},h(){_(e,"class","cs svelte-inr05g")},m(i,s){B(i,e,s),m(e,t)},d(i){i&&g(e)}}}function Oy(n){let e,t,i=n[14]!==""&&Ry(n),s=n[14]===""&&Ny();return{c(){e=E("div"),i&&i.c(),t=P(),s&&s.c(),this.h()},l(r){e=A(r,"DIV",{class:!0});var l=w(e);i&&i.l(l),t=M(l),s&&s.l(l),l.forEach(g),this.h()},h(){_(e,"class","crit svelte-inr05g")},m(r,l){B(r,e,l),i&&i.m(e,null),m(e,t),s&&s.m(e,null)},p(r,l){r[14]!==""?i?i.p(r,l):(i=Ry(r),i.c(),i.m(e,t)):i&&(i.d(1),i=null),r[14]===""?s||(s=Ny(),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},d(r){r&&g(e),i&&i.d(),s&&s.d()}}}function Ry(n){let e,t,i=n[14]>=20-n[3]?"CRIT":"Normal",s,r,l,o,a,c,u,f,h,d,p=n[14]>=20-n[3]&&Dy(n);return{c(){e=E("div"),t=E("span"),s=L(i),l=P(),o=E("span"),a=L("("),c=L(n[14]),u=L(")"),h=P(),p&&p.c(),d=et(),this.h()},l(v){e=A(v,"DIV",{class:!0});var y=w(e);t=A(y,"SPAN",{class:!0});var b=w(t);s=V(b,i),b.forEach(g),l=M(y),o=A(y,"SPAN",{class:!0});var S=w(o);a=V(S,"("),c=V(S,n[14]),u=V(S,")"),S.forEach(g),y.forEach(g),h=M(v),p&&p.l(v),d=et(),this.h()},h(){_(t,"class",r=Ze(n[14]>=20-n[3]?"cs":"")+" svelte-inr05g"),_(o,"class",f=Ze(n[14]===20?"cs":"")+" svelte-inr05g"),_(e,"class","")},m(v,y){B(v,e,y),m(e,t),m(t,s),m(e,l),m(e,o),m(o,a),m(o,c),m(o,u),B(v,h,y),p&&p.m(v,y),B(v,d,y)},p(v,y){y[0]&16392&&i!==(i=v[14]>=20-v[3]?"CRIT":"Normal")&&Ce(s,i),y[0]&16392&&r!==(r=Ze(v[14]>=20-v[3]?"cs":"")+" svelte-inr05g")&&_(t,"class",r),y[0]&16384&&Ce(c,v[14]),y[0]&16384&&f!==(f=Ze(v[14]===20?"cs":"")+" svelte-inr05g")&&_(o,"class",f),v[14]>=20-v[3]?p?p.p(v,y):(p=Dy(v),p.c(),p.m(d.parentNode,d)):p&&(p.d(1),p=null)},d(v){v&&g(e),v&&g(h),p&&p.d(v),v&&g(d)}}}function Dy(n){let e,t=n[14]===20?"3":"2",i,s;return{c(){e=E("div"),i=L(t),s=L("x Damage")},l(r){e=A(r,"DIV",{});var l=w(e);i=V(l,t),s=V(l,"x Damage"),l.forEach(g)},m(r,l){B(r,e,l),m(e,i),m(e,s)},p(r,l){l[0]&16384&&t!==(t=r[14]===20?"3":"2")&&Ce(i,t)},d(r){r&&g(e)}}}function Ny(n){let e;return{c(){e=L("...")},l(t){e=V(t,"...")},m(t,i){B(t,e,i)},d(t){t&&g(e)}}}function Py(n){let e,t,i=n[15]!==""&&My(n),s=n[15]===""&&Uy();return{c(){e=E("div"),i&&i.c(),t=P(),s&&s.c(),this.h()},l(r){e=A(r,"DIV",{class:!0});var l=w(e);i&&i.l(l),t=M(l),s&&s.l(l),l.forEach(g),this.h()},h(){_(e,"class","crest svelte-inr05g")},m(r,l){B(r,e,l),i&&i.m(e,null),m(e,t),s&&s.m(e,null)},p(r,l){r[15]!==""?i?i.p(r,l):(i=My(r),i.c(),i.m(e,t)):i&&(i.d(1),i=null),r[15]===""?s||(s=Uy(),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},d(r){r&&g(e),i&&i.d(),s&&s.d()}}}function My(n){let e,t,i=n[20]&&By(n),s=!n[20]&&Vy(n);return{c(){i&&i.c(),e=P(),s&&s.c(),t=et()},l(r){i&&i.l(r),e=M(r),s&&s.l(r),t=et()},m(r,l){i&&i.m(r,l),B(r,e,l),s&&s.m(r,l),B(r,t,l)},p(r,l){r[20]?i?i.p(r,l):(i=By(r),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),r[20]?s&&(s.d(1),s=null):s?s.p(r,l):(s=Vy(r),s.c(),s.m(t.parentNode,t))},d(r){i&&i.d(r),r&&g(e),s&&s.d(r),r&&g(t)}}}function By(n){let e,t,i,s,r,l,o,a,c,u=n[4]&&Ly(n);return{c(){e=E("div"),t=E("span"),i=L("ACTIVATED"),s=E("span"),r=L("("),l=L(n[15]),o=L(")"),a=P(),u&&u.c(),c=et(),this.h()},l(f){e=A(f,"DIV",{});var h=w(e);t=A(h,"SPAN",{class:!0});var d=w(t);i=V(d,"ACTIVATED"),d.forEach(g),s=A(h,"SPAN",{});var p=w(s);r=V(p,"("),l=V(p,n[15]),o=V(p,")"),p.forEach(g),h.forEach(g),a=M(f),u&&u.l(f),c=et(),this.h()},h(){_(t,"class","cs svelte-inr05g")},m(f,h){B(f,e,h),m(e,t),m(t,i),m(e,s),m(s,r),m(s,l),m(s,o),B(f,a,h),u&&u.m(f,h),B(f,c,h)},p(f,h){h[0]&32768&&Ce(l,f[15]),f[4]?u?u.p(f,h):(u=Ly(f),u.c(),u.m(c.parentNode,c)):u&&(u.d(1),u=null)},d(f){f&&g(e),f&&g(a),u&&u.d(f),f&&g(c)}}}function Ly(n){var s;let e,t=((s=Ds[n[4]])==null?void 0:s.description)+"",i;return{c(){e=E("div"),i=L(t),this.h()},l(r){e=A(r,"DIV",{class:!0});var l=w(e);i=V(l,t),l.forEach(g),this.h()},h(){_(e,"class","description svelte-inr05g")},m(r,l){B(r,e,l),m(e,i)},p(r,l){var o;l[0]&16&&t!==(t=((o=Ds[r[4]])==null?void 0:o.description)+"")&&Ce(i,t)},d(r){r&&g(e)}}}function Vy(n){let e,t,i,s,r,l;return{c(){e=E("span"),t=L("Normal"),i=E("span"),s=L("("),r=L(n[15]),l=L(")")},l(o){e=A(o,"SPAN",{});var a=w(e);t=V(a,"Normal"),a.forEach(g),i=A(o,"SPAN",{});var c=w(i);s=V(c,"("),r=V(c,n[15]),l=V(c,")"),c.forEach(g)},m(o,a){B(o,e,a),m(e,t),B(o,i,a),m(i,s),m(i,r),m(i,l)},p(o,a){a[0]&32768&&Ce(r,o[15])},d(o){o&&g(e),o&&g(i)}}}function Uy(n){let e;return{c(){e=L("...")},l(t){e=V(t,"...")},m(t,i){B(t,e,i)},d(t){t&&g(e)}}}function Wy(n){let e,t,i,s,r,l=parseInt(n[23])!==n[13],o=l&&Fy(n);return{c(){e=E("div"),t=E("span"),i=L(n[23]),r=P(),o&&o.c(),this.h()},l(a){e=A(a,"DIV",{class:!0});var c=w(e);t=A(c,"SPAN",{class:!0});var u=w(t);i=V(u,n[23]),u.forEach(g),r=M(c),o&&o.l(c),c.forEach(g),this.h()},h(){_(t,"class",s=Ze(Zi({mini:parseInt(n[23])!==n[13]}))+" svelte-inr05g"),_(e,"class","damage-text svelte-inr05g")},m(a,c){B(a,e,c),m(e,t),m(t,i),m(e,r),o&&o.m(e,null)},p(a,c){c[0]&8388608&&Ce(i,a[23]),c[0]&8396800&&s!==(s=Ze(Zi({mini:parseInt(a[23])!==a[13]}))+" svelte-inr05g")&&_(t,"class",s),c[0]&8396800&&(l=parseInt(a[23])!==a[13]),l?o?o.p(a,c):(o=Fy(a),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},d(a){a&&g(e),o&&o.d()}}}function Fy(n){let e,t,i;return{c(){e=E("span"),t=L("= "),i=L(n[24]),this.h()},l(s){e=A(s,"SPAN",{class:!0});var r=w(e);t=V(r,"= "),i=V(r,n[24]),r.forEach(g),this.h()},h(){_(e,"class","final-damage svelte-inr05g")},m(s,r){B(s,e,r),m(e,t),m(e,i)},p(s,r){r[0]&16777216&&Ce(i,s[24])},d(s){s&&g(e)}}}function jy(n){let e;return{c(){e=L("...")},l(t){e=V(t,"...")},m(t,i){B(t,e,i)},d(t){t&&g(e)}}}function W7(n){let e,t,i,s,r,l,o,a,c,u,f,h,d,p,v,y,b,S,I,T,C,k,R,O,N,F,W,z,Y=n[17]?"HP Restored":"Damage",H,K,j,J=xn(n[2])+"",Z,q,X,ne,Q,re,be,le,he,Ie,G,ve,je=n[30]?n[26]<=0?"Out of weapon uses":"Out of Superiority Dies":n[7]?"Roll Attack":"Select a weapon",$,Oe,ie,_e,Ee,He,We,Qe,we,Me,de,Ae,Re=!n[17]&&yy(n),Ne=!n[17]&&n[3]>=0&&Ey(n),Ge=n[4]&&Ay(n),pe=!n[17]&&Cy(n),Fe=!n[17]&&n[3]>=0&&Oy(n),ae=n[4]&&Py(n),ke=n[13]&&Wy(n),oe=!n[13]&&jy();return{c(){e=E("div"),t=E("div"),i=E("button"),s=L("Copy Results"),l=P(),o=E("button"),a=L("Copy Attack Result Only"),u=P(),f=E("button"),h=L("Copy Damage Result Only"),p=P(),v=E("button"),y=L("Copy Attack Command"),b=P(),S=E("button"),I=L("Back to Breakdown"),T=P(),C=E("div"),k=E("div"),R=E("div"),Re&&Re.c(),O=P(),Ne&&Ne.c(),N=P(),Ge&&Ge.c(),F=P(),W=E("div"),z=E("h3"),H=L(Y),K=P(),j=E("div"),Z=L(J),q=P(),X=P(),ne=E("div"),pe&&pe.c(),Q=P(),Fe&&Fe.c(),re=P(),ae&&ae.c(),be=P(),le=E("div"),ke&&ke.c(),he=P(),oe&&oe.c(),Ie=P(),G=E("div"),ve=E("button"),$=L(je),_e=P(),Ee=E("span"),He=E("span"),We=L("Roll visual dice?"),Qe=P(),we=E("input"),this.h()},l(at){e=A(at,"DIV",{class:!0});var qe=w(e);t=A(qe,"DIV",{class:!0});var me=w(t);i=A(me,"BUTTON",{class:!0});var ot=w(i);s=V(ot,"Copy Results"),ot.forEach(g),l=M(me),o=A(me,"BUTTON",{class:!0});var Se=w(o);a=V(Se,"Copy Attack Result Only"),Se.forEach(g),u=M(me),f=A(me,"BUTTON",{class:!0});var ze=w(f);h=V(ze,"Copy Damage Result Only"),ze.forEach(g),p=M(me),v=A(me,"BUTTON",{class:!0});var ye=w(v);y=V(ye,"Copy Attack Command"),ye.forEach(g),b=M(me),S=A(me,"BUTTON",{class:!0});var ut=w(S);I=V(ut,"Back to Breakdown"),ut.forEach(g),me.forEach(g),T=M(qe),C=A(qe,"DIV",{class:!0});var Bt=w(C);k=A(Bt,"DIV",{class:!0});var gt=w(k);R=A(gt,"DIV",{class:!0});var Ot=w(R);Re&&Re.l(Ot),O=M(Ot),Ne&&Ne.l(Ot),N=M(Ot),Ge&&Ge.l(Ot),F=M(Ot),W=A(Ot,"DIV",{class:!0});var en=w(W);z=A(en,"H3",{class:!0});var gn=w(z);H=V(gn,Y),gn.forEach(g),K=M(en),j=A(en,"DIV",{class:!0});var Jt=w(j);Z=V(Jt,J),q=M(Jt),Jt.forEach(g),en.forEach(g),Ot.forEach(g),X=M(gt),ne=A(gt,"DIV",{class:!0});var ft=w(ne);pe&&pe.l(ft),Q=M(ft),Fe&&Fe.l(ft),re=M(ft),ae&&ae.l(ft),be=M(ft),le=A(ft,"DIV",{class:!0});var cn=w(le);ke&&ke.l(cn),he=M(cn),oe&&oe.l(cn),cn.forEach(g),ft.forEach(g),gt.forEach(g),Ie=M(Bt),G=A(Bt,"DIV",{class:!0});var tn=w(G);ve=A(tn,"BUTTON",{class:!0});var wn=w(ve);$=V(wn,je),wn.forEach(g),_e=M(tn),Ee=A(tn,"SPAN",{});var vn=w(Ee);He=A(vn,"SPAN",{});var Ln=w(He);We=V(Ln,"Roll visual dice?"),Ln.forEach(g),Qe=M(vn),we=A(vn,"INPUT",{type:!0}),vn.forEach(g),tn.forEach(g),Bt.forEach(g),qe.forEach(g),this.h()},h(){i.disabled=r=n[11]==="",_(i,"class","svelte-inr05g"),o.disabled=c=n[11]==="",_(o,"class","svelte-inr05g"),f.disabled=d=n[11]==="",_(f,"class","svelte-inr05g"),_(v,"class","svelte-inr05g"),_(S,"class","svelte-inr05g"),rt(S,"flex","1"),_(t,"class","actions svelte-inr05g"),_(z,"class","svelte-inr05g"),_(j,"class","content svelte-inr05g"),_(W,"class","damage svelte-inr05g"),_(R,"class","rolls svelte-inr05g"),_(le,"class","damage svelte-inr05g"),rt(le,"flex-direction","column"),_(ne,"class","result svelte-inr05g"),_(k,"class","rolls-container svelte-inr05g"),ve.disabled=Oe=n[30]||!n[7],_(ve,"class",ie=Ze(Zi("attack-button",{disabled:n[30]||!n[7]}))+" svelte-inr05g"),_(we,"type","checkbox"),we.checked=n[9],_(G,"class","attack-button-container svelte-inr05g"),_(C,"class","content svelte-inr05g"),_(e,"class","container svelte-inr05g")},m(at,qe){B(at,e,qe),m(e,t),m(t,i),m(i,s),m(t,l),m(t,o),m(o,a),m(t,u),m(t,f),m(f,h),m(t,p),m(t,v),m(v,y),m(t,b),m(t,S),m(S,I),m(e,T),m(e,C),m(C,k),m(k,R),Re&&Re.m(R,null),m(R,O),Ne&&Ne.m(R,null),m(R,N),Ge&&Ge.m(R,null),m(R,F),m(R,W),m(W,z),m(z,H),m(W,K),m(W,j),m(j,Z),m(j,q),m(k,X),m(k,ne),pe&&pe.m(ne,null),m(ne,Q),Fe&&Fe.m(ne,null),m(ne,re),ae&&ae.m(ne,null),m(ne,be),m(ne,le),ke&&ke.m(le,null),m(le,he),oe&&oe.m(le,null),m(C,Ie),m(C,G),m(G,ve),m(ve,$),m(G,_e),m(G,Ee),m(Ee,He),m(He,We),m(Ee,Qe),m(Ee,we),Me=!0,de||(Ae=[se(i,"click",n[54]),se(o,"click",n[55]),se(f,"click",n[56]),se(v,"click",n[57]),se(S,"click",function(){Mn(n[0])&&n[0].apply(this,arguments)}),se(ve,"click",n[58]),se(we,"click",n[59])],de=!0)},p(at,qe){n=at,(!Me||qe[0]&2048&&r!==(r=n[11]===""))&&(i.disabled=r),(!Me||qe[0]&2048&&c!==(c=n[11]===""))&&(o.disabled=c),(!Me||qe[0]&2048&&d!==(d=n[11]===""))&&(f.disabled=d),n[17]?Re&&(Le(),U(Re,1,1,()=>{Re=null}),Ve()):Re?(Re.p(n,qe),qe[0]&131072&&D(Re,1)):(Re=yy(n),Re.c(),D(Re,1),Re.m(R,O)),!n[17]&&n[3]>=0?Ne?Ne.p(n,qe):(Ne=Ey(n),Ne.c(),Ne.m(R,N)):Ne&&(Ne.d(1),Ne=null),n[4]?Ge?(Ge.p(n,qe),qe[0]&16&&D(Ge,1)):(Ge=Ay(n),Ge.c(),D(Ge,1),Ge.m(R,F)):Ge&&(Le(),U(Ge,1,1,()=>{Ge=null}),Ve()),(!Me||qe[0]&131072)&&Y!==(Y=n[17]?"HP Restored":"Damage")&&Ce(H,Y),(!Me||qe[0]&4)&&J!==(J=xn(n[2])+"")&&Ce(Z,J),n[17]?pe&&(pe.d(1),pe=null):pe?pe.p(n,qe):(pe=Cy(n),pe.c(),pe.m(ne,Q)),!n[17]&&n[3]>=0?Fe?Fe.p(n,qe):(Fe=Oy(n),Fe.c(),Fe.m(ne,re)):Fe&&(Fe.d(1),Fe=null),n[4]?ae?ae.p(n,qe):(ae=Py(n),ae.c(),ae.m(ne,be)):ae&&(ae.d(1),ae=null),n[13]?ke?ke.p(n,qe):(ke=Wy(n),ke.c(),ke.m(le,he)):ke&&(ke.d(1),ke=null),n[13]?oe&&(oe.d(1),oe=null):oe||(oe=jy(),oe.c(),oe.m(le,null)),(!Me||qe[0]&1140850816)&&je!==(je=n[30]?n[26]<=0?"Out of weapon uses":"Out of Superiority Dies":n[7]?"Roll Attack":"Select a weapon")&&Ce($,je),(!Me||qe[0]&1073741952&&Oe!==(Oe=n[30]||!n[7]))&&(ve.disabled=Oe),(!Me||qe[0]&1073741952&&ie!==(ie=Ze(Zi("attack-button",{disabled:n[30]||!n[7]}))+" svelte-inr05g"))&&_(ve,"class",ie),(!Me||qe[0]&512)&&(we.checked=n[9])},i(at){Me||(D(Re),D(Ge),Me=!0)},o(at){U(Re),U(Ge),Me=!1},d(at){at&&g(e),Re&&Re.d(),Ne&&Ne.d(),Ge&&Ge.d(),pe&&pe.d(),Fe&&Fe.d(),ae&&ae.d(),ke&&ke.d(),oe&&oe.d(),de=!1,on(Ae)}}}function F7(n,e,t){let i,s,r,l,o,a,c,u,f,h,d,p,v,y,b,S,I,T,C,k,R,O;const N=Bn(hs.DB);let{playerName:F}=e,{onCloseModal:W}=e,{allWeapons:z}=e,{allCombatArts:Y}=e,{weaponUses:H}=e,{onUpdateWeaponUses:K}=e,{crestConservesResource:j}=e,{attackCalc:J}=e,{damageCalc:Z}=e,{critModifier:q}=e,{combatArtDamageBonus:X}=e,{crestType:ne}=e,{crestDC:Q}=e,{crestDamage:re}=e,{crestCombatArtDamageModifier:be}=e,{selectedWeapon:le}=e,{selectedCombatArt:he}=e,{curSuperiorityDies:Ie}=e,{setCurSuperiorityDie:G}=e,{shouldDoVisualRolls:ve}=e,{toggleVisualRolls:je}=e,$="",Oe="",ie="",_e="",Ee="",He="",We=1,Qe="",we=1,Me=1,de=1;const Ae=async()=>{if(t(13,ie=""),t(41,_e=""),y8(Z)){const oe=Z.filter(qe=>!zg(qe)),at=Z.filter(zg);if(ve){const qe=await nl(at,{modifier:oe});t(13,ie=qe.value),t(41,_e=qe.resultText)}else{const{value:qe,resultText:me}=Xs(Z,{returnAsString:!0});t(13,ie=qe),t(41,_e=me)}}else t(13,ie=Xs(Z)),t(41,_e=ie+"")},Re=async()=>{t(14,He=""),ve?t(14,He=await nl([Et.d20],{clearTimeout:250,disableResultBox:!0}).then(oe=>oe.value)):t(14,He=Wc(20)),t(43,We=He>=20-q?He===20?3:2:1)},Ne=()=>{Ic(R())},Ge=()=>Ic(C(!0)),pe=()=>Ic(k(!0)),Fe=()=>Ic(T()),ae=()=>O().then(()=>Ic(R())),ke=()=>je();return n.$$set=oe=>{"playerName"in oe&&t(31,F=oe.playerName),"onCloseModal"in oe&&t(0,W=oe.onCloseModal),"allWeapons"in oe&&t(32,z=oe.allWeapons),"allCombatArts"in oe&&t(1,Y=oe.allCombatArts),"weaponUses"in oe&&t(33,H=oe.weaponUses),"onUpdateWeaponUses"in oe&&t(34,K=oe.onUpdateWeaponUses),"crestConservesResource"in oe&&t(35,j=oe.crestConservesResource),"attackCalc"in oe&&t(36,J=oe.attackCalc),"damageCalc"in oe&&t(2,Z=oe.damageCalc),"critModifier"in oe&&t(3,q=oe.critModifier),"combatArtDamageBonus"in oe&&t(37,X=oe.combatArtDamageBonus),"crestType"in oe&&t(4,ne=oe.crestType),"crestDC"in oe&&t(5,Q=oe.crestDC),"crestDamage"in oe&&t(6,re=oe.crestDamage),"crestCombatArtDamageModifier"in oe&&t(38,be=oe.crestCombatArtDamageModifier),"selectedWeapon"in oe&&t(7,le=oe.selectedWeapon),"selectedCombatArt"in oe&&t(8,he=oe.selectedCombatArt),"curSuperiorityDies"in oe&&t(39,Ie=oe.curSuperiorityDies),"setCurSuperiorityDie"in oe&&t(40,G=oe.setCurSuperiorityDie),"shouldDoVisualRolls"in oe&&t(9,ve=oe.shouldDoVisualRolls),"toggleVisualRolls"in oe&&t(10,je=oe.toggleVisualRolls)},n.$$.update=()=>{var oe,at;n.$$.dirty[0]&128&&(t(11,$=""),t(12,Oe=""),t(13,ie=""),t(41,_e=""),t(42,Ee=""),t(42,Ee=""),t(14,He=""),t(43,We=1),t(15,Qe="")),n.$$.dirty[0]&128&&t(17,i=vh.has(le)),n.$$.dirty[0]&256&&t(48,s=()=>{var Se;const qe=(Se=Wr[he])==null?void 0:Se.dieCost;if(!he||!qe)return 1;const me=Xs([qe.roll])>=qe.target,ot=(qe==null?void 0:qe.mod)||0;return me?Math.max(1+ot,0):1}),n.$$.dirty[0]&128|n.$$.dirty[1]&4&&t(26,r=H[le]===void 0?1/0:H[le]),n.$$.dirty[0]&33376|n.$$.dirty[1]&2240&&t(47,u=async()=>(t(15,Qe=""),ve?t(15,Qe=await nl([Et.d20],{clearTimeout:250,disableResultBox:!0}).then(qe=>qe.value)):t(15,Qe=Wc(20)),Qe>=Q?re.length?t(42,Ee=Xs(re)):be>1&&t(42,Ee=Math.round(Xs(X)*be)):t(42,Ee=""),Ee)),n.$$.dirty[0]&512|n.$$.dirty[1]&32&&t(18,a=async()=>{t(11,$=""),ve?t(11,$=await nl([Et.d20],{clearTimeout:250,disableResultBox:!0}).then(qe=>qe.value)):t(11,$=Wc(20)),t(12,Oe=Xs(J))}),n.$$.dirty[0]&128|n.$$.dirty[1]&2&&t(50,h=(oe=z.fullFeatures[le])==null?void 0:oe.label),n.$$.dirty[0]&258&&t(53,f=he?` (${(at=Y.fullFeatures[he])==null?void 0:at.label})`:""),n.$$.dirty[1]&4718592&&t(46,d=`${h}`+f),n.$$.dirty[0]&522680|n.$$.dirty[1]&260891&&t(27,O=async()=>{var me;t(16,we=1),t(45,de=1),t(44,Me=1),t(11,$=""),t(13,ie=""),t(41,_e=""),t(14,He=""),t(15,Qe="");try{i||await a();const{roll:ot=0,target:Se=1,mult:ze=1}=((me=z.fullFeatures[le])==null?void 0:me.dieCost)||{};t(16,we=s()*(Xs([ot])>=Se?ze:1)),!i&&q>=0&&await Re(),ne&&(await u(),Qe>=Q&&j&&(he?t(44,Me=0):F4.includes(le)&&t(45,de=0))),await Ae()}catch(ot){console.error(ot),alert("wait until all rolls have finished")}const qe={playerName:F,type:"ATTACK_ROLL",attackName:d};$!==""&&(qe.attackRoll=$+Oe),He!==""&&(qe.critRoll=He>=20-q?`CRIT${He===20?"(20)":""}`:"--"),Qe!==""&&(qe.crestName=Kg[ne]||"",qe.crestRoll=Qe>=Q?"ACTIVATED":"--"),ie!==""&&(qe.damageRoll=(parseInt(ie)+parseInt(Ee||0))*We,i&&(qe.isHealWeapon=!0)),Sv(N,qe),de!==0&&K(le,-1*de),he&&G(Ie-we*Me)}),n.$$.dirty[0]&32800&&t(20,l=Qe>=Q),n.$$.dirty[1]&32&&t(25,o=xn(J,!0)),n.$$.dirty[0]&64|n.$$.dirty[1]&192&&t(51,c=()=>re.length?xn(re):be>1?`${be}*${xn(X)}`:"0"),n.$$.dirty[0]&16392&&t(49,p=He>=20-q),n.$$.dirty[0]&8192|n.$$.dirty[1]&2048&&t(52,v=parseInt(ie)+parseInt(Ee||0)),n.$$.dirty[1]&269312&&t(23,y=`${p?"(":""}${_e}${Ee?` + ${Ee}(crest)`:""}${p?`) * ${We} (crit)`:""}`),n.$$.dirty[1]&2101248&&t(24,b=We*v),n.$$.dirty[0]&8&&t(21,S=q===0?20:`${20-q} - 20`),n.$$.dirty[0]&67109120|n.$$.dirty[1]&256&&t(30,I=he&&Ie<=0||r<=0),n.$$.dirty[0]&33554734|n.$$.dirty[1]&1572865&&t(29,T=()=>{var Bt;const me=Wc(20),ot=20>20-q,Se=20>20-q,ze=`${xn(Z)}${Se&&me>=Q?`+${c()}`:""}`,ye=`/roll ${ze}${ot?"+"+(ze+"+"+ze):""}${Se?` [Crest Activated [${me}]]`:""}${ot?` [CRIT[${20}]]`:""} [ID${Math.floor(Math.random()*1e6)}]`;return`&{template:atk} {{rname=[${h}](\`${ye})}} {{mod=${he?(Bt=Y.fullFeatures[he])==null?void 0:Bt.label:"+0"}}} {{r1=[[1d20${o}]]}} {{normal=1}} {{charname=${F}}}`}),n.$$.dirty[0]&6402|n.$$.dirty[1]&524289&&t(22,C=(qe=!1)=>{var ot;const me=`&{template:simple} {{rname=Attack Roll}} {{normal=1}} {{r1=${$+Oe}}} {{charname=${$} + ${Oe}}}`;return qe?[`&{template:desc} {{desc=${h}${he?` (${(ot=Y.fullFeatures[he])==null?void 0:ot.label})`:""} attack roll from ${F}}}`,me].join(`
`):me}),n.$$.dirty[0]&25166082|n.$$.dirty[1]&524289&&t(19,k=(qe=!1)=>{var ot;const me=`&{template:simple} {{rname=Damage}} {{normal=1}} {{r1=${b}}} {{charname=${y}}}`;return qe?[`&{template:desc} {{desc=${h}${he?` (${(ot=Y.fullFeatures[he])==null?void 0:ot.label})`:""} damage roll from ${F}}}`,me].join(`
`):me}),n.$$.dirty[0]&7913778|n.$$.dirty[1]&790529&&t(28,R=()=>{var ye;const qe=`&{template:desc} {{desc=${h}${he?` (${(ye=Y.fullFeatures[he])==null?void 0:ye.label})`:""} attack from ${F}}}`,me=C(),ot=He!==""?`&{template:simple} {{rname=Crit Roll}} {{mod=${S}}} {{r1=${p?"CRIT":"normal"} (${He})}} {{normal=1}} ${p?`{{charname=${We}x damage}}`:""}`:"",Se=ne&&Qe!==""?`&{template:simple} {{rname=Crest Roll}} {{mod=DC ${Q}}} {{r1=${l?"ACTIVATED":"normal"} (${Qe})}}$ {{normal=1}} ${l?`{{charname=${Ds[ne].description}}}`:""}`:"",ze=k();return[qe,me,ot,Se,ze].join(`
`)})},[W,Y,Z,q,ne,Q,re,le,he,ve,je,$,Oe,ie,He,Qe,we,i,a,k,l,S,C,y,b,o,r,O,R,T,I,F,z,H,K,j,J,X,be,Ie,G,_e,Ee,We,Me,de,d,u,s,p,h,c,v,f,Ne,Ge,pe,Fe,ae,ke]}class j7 extends nt{constructor(e){super(),it(this,e,F7,W7,Ct,{playerName:31,onCloseModal:0,allWeapons:32,allCombatArts:1,weaponUses:33,onUpdateWeaponUses:34,crestConservesResource:35,attackCalc:36,damageCalc:2,critModifier:3,combatArtDamageBonus:37,crestType:4,crestDC:5,crestDamage:6,crestCombatArtDamageModifier:38,selectedWeapon:7,selectedCombatArt:8,curSuperiorityDies:39,setCurSuperiorityDie:40,shouldDoVisualRolls:9,toggleVisualRolls:10},null,[-1,-1,-1])}}function Hy(n,e,t){var r;const i=n.slice();i[4]=e[t];const s=(r=i[1])==null?void 0:r[i[4].key||""];return i[5]=s,i}function qy(n,e,t){const i=n.slice();return i[8]=e[t],i[10]=t,i}function zy(n){let e,t=n[8].label+"",i,s;return{c(){e=E("option"),i=L(t),this.h()},l(r){e=A(r,"OPTION",{});var l=w(e);i=V(l,t),l.forEach(g),this.h()},h(){e.__value=n[10],e.value=e.__value,e.selected=s=n[5]===n[8]},m(r,l){B(r,e,l),m(e,i)},p(r,l){l&1&&t!==(t=r[8].label+"")&&Ce(i,t),l&3&&s!==(s=r[5]===r[8])&&(e.selected=s)},d(r){r&&g(e)}}}function Gy(n){var T;let e,t,i=n[4].prompt+"",s,r,l,o,a,c,u,f,h=(((T=n[5])==null?void 0:T.description)||"")+"",d,p,v,y,b=n[4].options,S=[];for(let C=0;C<b.length;C+=1)S[C]=zy(qy(n,b,C));function I(...C){return n[3](n[4],...C)}return{c(){e=E("div"),t=E("div"),s=L(i),r=P(),l=E("div"),o=E("select");for(let C=0;C<S.length;C+=1)S[C].c();u=P(),f=E("div"),d=L(h),p=P(),this.h()},l(C){e=A(C,"DIV",{class:!0});var k=w(e);t=A(k,"DIV",{class:!0});var R=w(t);s=V(R,i),R.forEach(g),r=M(k),l=A(k,"DIV",{class:!0});var O=w(l);o=A(O,"SELECT",{class:!0,name:!0});var N=w(o);for(let W=0;W<S.length;W+=1)S[W].l(N);N.forEach(g),u=M(O),f=A(O,"DIV",{class:!0});var F=w(f);d=V(F,h),F.forEach(g),O.forEach(g),p=M(k),k.forEach(g),this.h()},h(){_(t,"class","prompt svelte-1sp4qn5"),_(o,"class",a=Ze(n[1]&&n[5]!==n[4].options[0]?"selected":"")+" svelte-1sp4qn5"),_(o,"name",c=n[4].prompt),_(f,"class","description"),_(l,"class","selection svelte-1sp4qn5"),_(e,"class","query svelte-1sp4qn5")},m(C,k){B(C,e,k),m(e,t),m(t,s),m(e,r),m(e,l),m(l,o);for(let R=0;R<S.length;R+=1)S[R].m(o,null);m(l,u),m(l,f),m(f,d),m(e,p),v||(y=se(o,"change",I),v=!0)},p(C,k){var R;if(n=C,k&1&&i!==(i=n[4].prompt+"")&&Ce(s,i),k&3){b=n[4].options;let O;for(O=0;O<b.length;O+=1){const N=qy(n,b,O);S[O]?S[O].p(N,k):(S[O]=zy(N),S[O].c(),S[O].m(o,null))}for(;O<S.length;O+=1)S[O].d(1);S.length=b.length}k&3&&a!==(a=Ze(n[1]&&n[5]!==n[4].options[0]?"selected":"")+" svelte-1sp4qn5")&&_(o,"class",a),k&1&&c!==(c=n[4].prompt)&&_(o,"name",c),k&3&&h!==(h=(((R=n[5])==null?void 0:R.description)||"")+"")&&Ce(d,h)},d(C){C&&g(e),Ft(S,C),v=!1,y()}}}function H7(n){let e,t=n[0],i=[];for(let s=0;s<t.length;s+=1)i[s]=Gy(Hy(n,t,s));return{c(){e=E("div");for(let s=0;s<i.length;s+=1)i[s].c();this.h()},l(s){e=A(s,"DIV",{class:!0});var r=w(e);for(let l=0;l<i.length;l+=1)i[l].l(r);r.forEach(g),this.h()},h(){_(e,"class","container svelte-1sp4qn5")},m(s,r){B(s,e,r);for(let l=0;l<i.length;l+=1)i[l].m(e,null)},p(s,[r]){if(r&7){t=s[0];let l;for(l=0;l<t.length;l+=1){const o=Hy(s,t,l);i[l]?i[l].p(o,r):(i[l]=Gy(o),i[l].c(),i[l].m(e,null))}for(;l<i.length;l+=1)i[l].d(1);i.length=t.length}},i:Ke,o:Ke,d(s){s&&g(e),Ft(i,s)}}}function q7(n,e,t){let{queries:i}=e,{selections:s}=e,{onUpdateQuerySelection:r}=e;const l=(o,a)=>{var c;r(o.key,o.options[parseInt((c=a==null?void 0:a.currentTarget)==null?void 0:c.value)])};return n.$$set=o=>{"queries"in o&&t(0,i=o.queries),"selections"in o&&t(1,s=o.selections),"onUpdateQuerySelection"in o&&t(2,r=o.onUpdateQuerySelection)},[i,s,r,l]}class z7 extends nt{constructor(e){super(),it(this,e,q7,H7,Ct,{queries:0,selections:1,onUpdateQuerySelection:2})}}function Ky(n,e,t){const i=n.slice();return i[80]=e[t],i}function Qy(n){let e,t,i,s,r,l,o,a,c,u,f,h,d,p,v,y,b,S=xn(n[48])+"",I,T,C,k,R=n[41]?"HP Restored":"Damage",O,N,F,W,z,Y,H=xn(n[46])+"",K,j,J,Z,q,X=n[23]+n[22]+"",ne,Q,re,be=(n[22]>0?"+"+n[22]:n[22])+"",le,he,Ie,G,ve,je,$,Oe,ie,_e,Ee,He,We,Qe,we,Me,de=n[31]&&Xy(n),Ae=n[33]&&Yy(n),Re=n[34].length&&Jy(n),Ne=n[32]&&Zy(n),Ge=n[35].length&&xy(n),pe=n[30].length>0&&$y(n),Fe=n[8]&&e2(n),ae=n[21]&&a2(n),ke=n[20].length&&c2(n),oe=n[19].length&&u2(n),at=n[45]>=0&&f2(n),qe=n[45]<0&&h2(),me=n[8]&&d2(n),ot=n[37]&&p2(n);return{c(){e=E("div"),t=E("div"),i=E("h2"),s=E("span"),r=L("Attack: 1d20"),l=P(),o=E("span"),de&&de.c(),a=P(),Ae&&Ae.c(),c=P(),Re&&Re.c(),u=P(),Ne&&Ne.c(),f=P(),Ge&&Ge.c(),h=P(),pe&&pe.c(),d=P(),p=E("h2"),v=L("= 1d20 "),y=E("span"),b=L("+ "),I=L(S),T=P(),C=E("div"),k=E("h2"),O=L(R),N=L(": "),Fe&&Fe.c(),F=P(),W=E("h2"),z=L("= "),Y=E("span"),K=L(H),j=P(),J=E("div"),Z=E("h2"),q=L("Crit Modifier: "),ne=L(X),Q=E("span"),re=L("(Dex"),le=L(be),he=L(")"),Ie=P(),G=E("span"),ae&&ae.c(),ve=P(),ke&&ke.c(),je=P(),oe&&oe.c(),$=P(),Oe=E("h2"),at&&at.c(),ie=P(),qe&&qe.c(),_e=P(),Ee=E("div"),He=E("h2"),We=L("Range: "),me&&me.c(),Qe=P(),we=E("div"),Me=P(),ot&&ot.c(),this.h()},l(Se){e=A(Se,"DIV",{class:!0});var ze=w(e);t=A(ze,"DIV",{class:!0});var ye=w(t);i=A(ye,"H2",{class:!0});var ut=w(i);s=A(ut,"SPAN",{class:!0});var Bt=w(s);r=V(Bt,"Attack: 1d20"),Bt.forEach(g),l=M(ut),o=A(ut,"SPAN",{class:!0});var gt=w(o);de&&de.l(gt),a=M(gt),Ae&&Ae.l(gt),c=M(gt),Re&&Re.l(gt),u=M(gt),Ne&&Ne.l(gt),f=M(gt),Ge&&Ge.l(gt),h=M(gt),pe&&pe.l(gt),gt.forEach(g),ut.forEach(g),ye.forEach(g),d=M(ze),p=A(ze,"H2",{class:!0});var Ot=w(p);v=V(Ot,"= 1d20 "),y=A(Ot,"SPAN",{class:!0});var en=w(y);b=V(en,"+ "),I=V(en,S),en.forEach(g),Ot.forEach(g),T=M(ze),C=A(ze,"DIV",{class:!0});var gn=w(C);k=A(gn,"H2",{class:!0});var Jt=w(k);O=V(Jt,R),N=V(Jt,": "),Fe&&Fe.l(Jt),Jt.forEach(g),gn.forEach(g),F=M(ze),W=A(ze,"H2",{class:!0});var ft=w(W);z=V(ft,"= "),Y=A(ft,"SPAN",{});var cn=w(Y);K=V(cn,H),cn.forEach(g),ft.forEach(g),j=M(ze),J=A(ze,"DIV",{class:!0});var tn=w(J);Z=A(tn,"H2",{class:!0});var wn=w(Z);q=V(wn,"Crit Modifier: "),ne=V(wn,X),Q=A(wn,"SPAN",{class:!0});var vn=w(Q);re=V(vn,"(Dex"),le=V(vn,be),he=V(vn,")"),vn.forEach(g),Ie=M(wn),G=A(wn,"SPAN",{class:!0});var Ln=w(G);ae&&ae.l(Ln),ve=M(Ln),ke&&ke.l(Ln),je=M(Ln),oe&&oe.l(Ln),Ln.forEach(g),wn.forEach(g),tn.forEach(g),$=M(ze),Oe=A(ze,"H2",{class:!0});var Cn=w(Oe);at&&at.l(Cn),ie=M(Cn),qe&&qe.l(Cn),Cn.forEach(g),_e=M(ze),Ee=A(ze,"DIV",{class:!0});var Un=w(Ee);He=A(Un,"H2",{class:!0});var di=w(He);We=V(di,"Range: "),me&&me.l(di),di.forEach(g),Un.forEach(g),Qe=M(ze),we=A(ze,"DIV",{class:!0}),w(we).forEach(g),Me=M(ze),ot&&ot.l(ze),ze.forEach(g),this.h()},h(){_(s,"class","calc-label"),_(o,"class","modifiers svelte-bl52el"),_(i,"class","content svelte-bl52el"),_(t,"class","calc attack-container svelte-bl52el"),_(y,"class","modifiers svelte-bl52el"),_(p,"class","result attack-condensed svelte-bl52el"),_(k,"class","content svelte-bl52el"),_(C,"class","calc damage-container svelte-bl52el"),_(W,"class","result damage-condensed svelte-bl52el"),_(Q,"class","source svelte-bl52el"),_(G,"class","modifiers svelte-bl52el"),_(Z,"class","content svelte-bl52el"),_(J,"class","calc crit-container svelte-bl52el"),_(Oe,"class","result crit-condensed svelte-bl52el"),_(He,"class","content svelte-bl52el"),_(Ee,"class","calc range-container svelte-bl52el"),_(we,"class","empty range-condensed"),_(e,"class","calcs svelte-bl52el")},m(Se,ze){B(Se,e,ze),m(e,t),m(t,i),m(i,s),m(s,r),m(i,l),m(i,o),de&&de.m(o,null),m(o,a),Ae&&Ae.m(o,null),m(o,c),Re&&Re.m(o,null),m(o,u),Ne&&Ne.m(o,null),m(o,f),Ge&&Ge.m(o,null),m(o,h),pe&&pe.m(o,null),m(e,d),m(e,p),m(p,v),m(p,y),m(y,b),m(y,I),m(e,T),m(e,C),m(C,k),m(k,O),m(k,N),Fe&&Fe.m(k,null),m(e,F),m(e,W),m(W,z),m(W,Y),m(Y,K),m(e,j),m(e,J),m(J,Z),m(Z,q),m(Z,ne),m(Z,Q),m(Q,re),m(Q,le),m(Q,he),m(Z,Ie),m(Z,G),ae&&ae.m(G,null),m(G,ve),ke&&ke.m(G,null),m(G,je),oe&&oe.m(G,null),m(e,$),m(e,Oe),at&&at.m(Oe,null),m(Oe,ie),qe&&qe.m(Oe,null),m(e,_e),m(e,Ee),m(Ee,He),m(He,We),me&&me.m(He,null),m(e,Qe),m(e,we),m(e,Me),ot&&ot.m(e,null)},p(Se,ze){Se[31]?de?de.p(Se,ze):(de=Xy(Se),de.c(),de.m(o,a)):de&&(de.d(1),de=null),Se[33]?Ae?Ae.p(Se,ze):(Ae=Yy(Se),Ae.c(),Ae.m(o,c)):Ae&&(Ae.d(1),Ae=null),Se[34].length?Re?Re.p(Se,ze):(Re=Jy(Se),Re.c(),Re.m(o,u)):Re&&(Re.d(1),Re=null),Se[32]?Ne?Ne.p(Se,ze):(Ne=Zy(Se),Ne.c(),Ne.m(o,f)):Ne&&(Ne.d(1),Ne=null),Se[35].length?Ge?Ge.p(Se,ze):(Ge=xy(Se),Ge.c(),Ge.m(o,h)):Ge&&(Ge.d(1),Ge=null),Se[30].length>0?pe?pe.p(Se,ze):(pe=$y(Se),pe.c(),pe.m(o,null)):pe&&(pe.d(1),pe=null),ze[1]&131072&&S!==(S=xn(Se[48])+"")&&Ce(I,S),ze[1]&1024&&R!==(R=Se[41]?"HP Restored":"Damage")&&Ce(O,R),Se[8]?Fe?Fe.p(Se,ze):(Fe=e2(Se),Fe.c(),Fe.m(k,null)):Fe&&(Fe.d(1),Fe=null),ze[1]&32768&&H!==(H=xn(Se[46])+"")&&Ce(K,H),ze[0]&12582912&&X!==(X=Se[23]+Se[22]+"")&&Ce(ne,X),ze[0]&4194304&&be!==(be=(Se[22]>0?"+"+Se[22]:Se[22])+"")&&Ce(le,be),Se[21]?ae?ae.p(Se,ze):(ae=a2(Se),ae.c(),ae.m(G,ve)):ae&&(ae.d(1),ae=null),Se[20].length?ke?ke.p(Se,ze):(ke=c2(Se),ke.c(),ke.m(G,je)):ke&&(ke.d(1),ke=null),Se[19].length?oe?oe.p(Se,ze):(oe=u2(Se),oe.c(),oe.m(G,null)):oe&&(oe.d(1),oe=null),Se[45]>=0?at?at.p(Se,ze):(at=f2(Se),at.c(),at.m(Oe,ie)):at&&(at.d(1),at=null),Se[45]<0?qe||(qe=h2(),qe.c(),qe.m(Oe,null)):qe&&(qe.d(1),qe=null),Se[8]?me?me.p(Se,ze):(me=d2(Se),me.c(),me.m(He,null)):me&&(me.d(1),me=null),Se[37]?ot?ot.p(Se,ze):(ot=p2(Se),ot.c(),ot.m(e,null)):ot&&(ot.d(1),ot=null)},d(Se){Se&&g(e),de&&de.d(),Ae&&Ae.d(),Re&&Re.d(),Ne&&Ne.d(),Ge&&Ge.d(),pe&&pe.d(),Fe&&Fe.d(),ae&&ae.d(),ke&&ke.d(),oe&&oe.d(),at&&at.d(),qe&&qe.d(),me&&me.d(),ot&&ot.d()}}}function Xy(n){let e,t,i,s,r;return{c(){e=E("span"),t=L("+ "),i=L(n[31]),s=E("span"),r=L("(dex)"),this.h()},l(l){e=A(l,"SPAN",{});var o=w(e);t=V(o,"+ "),i=V(o,n[31]),s=A(o,"SPAN",{class:!0});var a=w(s);r=V(a,"(dex)"),a.forEach(g),o.forEach(g),this.h()},h(){_(s,"class","source svelte-bl52el")},m(l,o){B(l,e,o),m(e,t),m(e,i),m(e,s),m(s,r)},p(l,o){o[1]&1&&Ce(i,l[31])},d(l){l&&g(e)}}}function Yy(n){let e,t=ws(n[33],!0)+"",i,s,r;return{c(){e=E("span"),i=L(t),s=E("span"),r=L("(weapon)"),this.h()},l(l){e=A(l,"SPAN",{});var o=w(e);i=V(o,t),s=A(o,"SPAN",{class:!0});var a=w(s);r=V(a,"(weapon)"),a.forEach(g),o.forEach(g),this.h()},h(){_(s,"class","source svelte-bl52el")},m(l,o){B(l,e,o),m(e,i),m(e,s),m(s,r)},p(l,o){o[1]&4&&t!==(t=ws(l[33],!0)+"")&&Ce(i,t)},d(l){l&&g(e)}}}function Jy(n){let e,t,i=xn(n[34])+"",s,r,l;return{c(){e=E("span"),t=L("+ "),s=L(i),r=E("span"),l=L("(combat art)"),this.h()},l(o){e=A(o,"SPAN",{});var a=w(e);t=V(a,"+ "),s=V(a,i),r=A(a,"SPAN",{class:!0});var c=w(r);l=V(c,"(combat art)"),c.forEach(g),a.forEach(g),this.h()},h(){_(r,"class","source svelte-bl52el")},m(o,a){B(o,e,a),m(e,t),m(e,s),m(e,r),m(r,l)},p(o,a){a[1]&8&&i!==(i=xn(o[34])+"")&&Ce(s,i)},d(o){o&&g(e)}}}function Zy(n){let e,t=ws(n[32],!0)+"",i,s,r;return{c(){e=E("span"),i=L(t),s=E("span"),r=L("(distance)"),this.h()},l(l){e=A(l,"SPAN",{});var o=w(e);i=V(o,t),s=A(o,"SPAN",{class:!0});var a=w(s);r=V(a,"(distance)"),a.forEach(g),o.forEach(g),this.h()},h(){_(s,"class","source svelte-bl52el")},m(l,o){B(l,e,o),m(e,i),m(e,s),m(s,r)},p(l,o){o[1]&2&&t!==(t=ws(l[32],!0)+"")&&Ce(i,t)},d(l){l&&g(e)}}}function xy(n){let e,t,i=xn(n[35])+"",s,r,l;return{c(){e=E("span"),t=L("+ "),s=L(i),r=E("span"),l=L("(combat skills)"),this.h()},l(o){e=A(o,"SPAN",{});var a=w(e);t=V(a,"+ "),s=V(a,i),r=A(a,"SPAN",{class:!0});var c=w(r);l=V(c,"(combat skills)"),c.forEach(g),a.forEach(g),this.h()},h(){_(r,"class","source svelte-bl52el")},m(o,a){B(o,e,a),m(e,t),m(e,s),m(e,r),m(r,l)},p(o,a){a[1]&16&&i!==(i=xn(o[35])+"")&&Ce(s,i)},d(o){o&&g(e)}}}function $y(n){let e,t,i=xn(qa(n[30]))+"",s,r,l;return{c(){e=E("span"),t=L("+ "),s=L(i),r=E("span"),l=L("(optionals)"),this.h()},l(o){e=A(o,"SPAN",{});var a=w(e);t=V(a,"+ "),s=V(a,i),r=A(a,"SPAN",{class:!0});var c=w(r);l=V(c,"(optionals)"),c.forEach(g),a.forEach(g),this.h()},h(){_(r,"class","source svelte-bl52el")},m(o,a){B(o,e,a),m(e,t),m(e,s),m(e,r),m(r,l)},p(o,a){a[0]&1073741824&&i!==(i=xn(qa(o[30]))+"")&&Ce(s,i)},d(o){o&&g(e)}}}function e2(n){let e,t,i,s,r,l,o,a=n[16]&&(n[29]||[]).length<=1&&t2(n),c=n[29]&&n[29].length>1&&n2(n),u=n[27].length&&s2(n),f=n[25]&&r2(n),h=n[26].length&&l2(n),d=n[24].length&&o2(n);return{c(){e=L(n[28]),a&&a.c(),t=et(),c&&c.c(),i=P(),s=E("span"),u&&u.c(),r=P(),f&&f.c(),l=P(),h&&h.c(),o=P(),d&&d.c(),this.h()},l(p){e=V(p,n[28]),a&&a.l(p),t=et(),c&&c.l(p),i=M(p),s=A(p,"SPAN",{class:!0});var v=w(s);u&&u.l(v),r=M(v),f&&f.l(v),l=M(v),h&&h.l(v),o=M(v),d&&d.l(v),v.forEach(g),this.h()},h(){_(s,"class","modifiers svelte-bl52el")},m(p,v){B(p,e,v),a&&a.m(p,v),B(p,t,v),c&&c.m(p,v),B(p,i,v),B(p,s,v),u&&u.m(s,null),m(s,r),f&&f.m(s,null),m(s,l),h&&h.m(s,null),m(s,o),d&&d.m(s,null)},p(p,v){v[0]&268435456&&Ce(e,p[28]),p[16]&&(p[29]||[]).length<=1?a?a.p(p,v):(a=t2(p),a.c(),a.m(t.parentNode,t)):a&&(a.d(1),a=null),p[29]&&p[29].length>1?c?c.p(p,v):(c=n2(p),c.c(),c.m(i.parentNode,i)):c&&(c.d(1),c=null),p[27].length?u?u.p(p,v):(u=s2(p),u.c(),u.m(s,r)):u&&(u.d(1),u=null),p[25]?f?f.p(p,v):(f=r2(p),f.c(),f.m(s,l)):f&&(f.d(1),f=null),p[26].length?h?h.p(p,v):(h=l2(p),h.c(),h.m(s,o)):h&&(h.d(1),h=null),p[24].length?d?d.p(p,v):(d=o2(p),d.c(),d.m(s,null)):d&&(d.d(1),d=null)},d(p){p&&g(e),a&&a.d(p),p&&g(t),c&&c.d(p),p&&g(i),p&&g(s),u&&u.d(),f&&f.d(),h&&h.d(),d&&d.d()}}}function t2(n){let e,t,i,s,r;return{c(){e=E("span"),t=L("("),i=L(n[47]),s=L(")"),r=P()},l(l){e=A(l,"SPAN",{});var o=w(e);t=V(o,"("),i=V(o,n[47]),s=V(o,")"),o.forEach(g),r=M(l)},m(l,o){B(l,e,o),m(e,t),m(e,i),m(e,s),B(l,r,o)},p(l,o){o[1]&65536&&Ce(i,l[47])},d(l){l&&g(e),l&&g(r)}}}function n2(n){let e,t,i,s,r,l=n[29],o=[];for(let a=0;a<l.length;a+=1)o[a]=i2(Ky(n,l,a));return{c(){e=E("select"),t=E("option"),i=L("-");for(let a=0;a<o.length;a+=1)o[a].c();this.h()},l(a){e=A(a,"SELECT",{});var c=w(e);t=A(c,"OPTION",{});var u=w(t);i=V(u,"-"),u.forEach(g);for(let f=0;f<o.length;f+=1)o[f].l(c);c.forEach(g),this.h()},h(){t.__value="",t.value=t.__value},m(a,c){B(a,e,c),m(e,t),m(t,i);for(let u=0;u<o.length;u+=1)o[u].m(e,null);s||(r=se(e,"change",n[75]),s=!0)},p(a,c){if(c[0]&536936448){l=a[29];let u;for(u=0;u<l.length;u+=1){const f=Ky(a,l,u);o[u]?o[u].p(f,c):(o[u]=i2(f),o[u].c(),o[u].m(e,null))}for(;u<o.length;u+=1)o[u].d(1);o.length=l.length}},d(a){a&&g(e),Ft(o,a),s=!1,r()}}}function i2(n){let e,t=zs[n[80]]+"",i,s,r;return{c(){e=E("option"),i=L(t),this.h()},l(l){e=A(l,"OPTION",{});var o=w(e);i=V(o,t),o.forEach(g),this.h()},h(){e.__value=s=n[80],e.value=e.__value,e.selected=r=n[80]===n[16]},m(l,o){B(l,e,o),m(e,i)},p(l,o){o[0]&536870912&&t!==(t=zs[l[80]]+"")&&Ce(i,t),o[0]&536870912&&s!==(s=l[80])&&(e.__value=s,e.value=e.__value),o[0]&536936448&&r!==(r=l[80]===l[16])&&(e.selected=r)},d(l){l&&g(e)}}}function s2(n){let e,t,i=xn(n[27])+"",s,r,l;return{c(){e=E("span"),t=L("+ "),s=L(i),r=E("span"),l=L("(weapon)"),this.h()},l(o){e=A(o,"SPAN",{});var a=w(e);t=V(a,"+ "),s=V(a,i),r=A(a,"SPAN",{class:!0});var c=w(r);l=V(c,"(weapon)"),c.forEach(g),a.forEach(g),this.h()},h(){_(r,"class","source svelte-bl52el")},m(o,a){B(o,e,a),m(e,t),m(e,s),m(e,r),m(r,l)},p(o,a){a[0]&134217728&&i!==(i=xn(o[27])+"")&&Ce(s,i)},d(o){o&&g(e)}}}function r2(n){let e,t,i,s,r;return{c(){e=E("span"),t=L("+ "),i=L(n[25]),s=E("span"),r=L("(Heal Plus)"),this.h()},l(l){e=A(l,"SPAN",{});var o=w(e);t=V(o,"+ "),i=V(o,n[25]),s=A(o,"SPAN",{class:!0});var a=w(s);r=V(a,"(Heal Plus)"),a.forEach(g),o.forEach(g),this.h()},h(){_(s,"class","source svelte-bl52el")},m(l,o){B(l,e,o),m(e,t),m(e,i),m(e,s),m(s,r)},p(l,o){o[0]&33554432&&Ce(i,l[25])},d(l){l&&g(e)}}}function l2(n){let e,t,i,s,r;return{c(){e=E("span"),t=L("+ "),i=L(n[26]),s=E("span"),r=L("(combat art)"),this.h()},l(l){e=A(l,"SPAN",{});var o=w(e);t=V(o,"+ "),i=V(o,n[26]),s=A(o,"SPAN",{class:!0});var a=w(s);r=V(a,"(combat art)"),a.forEach(g),o.forEach(g),this.h()},h(){_(s,"class","source svelte-bl52el")},m(l,o){B(l,e,o),m(e,t),m(e,i),m(e,s),m(s,r)},p(l,o){o[0]&67108864&&Ce(i,l[26])},d(l){l&&g(e)}}}function o2(n){let e,t,i=xn(qa(n[24]))+"",s,r,l;return{c(){e=E("span"),t=L("+ "),s=L(i),r=E("span"),l=L("(options)"),this.h()},l(o){e=A(o,"SPAN",{});var a=w(e);t=V(a,"+ "),s=V(a,i),r=A(a,"SPAN",{class:!0});var c=w(r);l=V(c,"(options)"),c.forEach(g),a.forEach(g),this.h()},h(){_(r,"class","source svelte-bl52el")},m(o,a){B(o,e,a),m(e,t),m(e,s),m(e,r),m(r,l)},p(o,a){a[0]&16777216&&i!==(i=xn(qa(o[24]))+"")&&Ce(s,i)},d(o){o&&g(e)}}}function a2(n){let e,t=(n[21]>0?"+ "+n[21]:n[21])+"",i,s,r;return{c(){e=E("span"),i=L(t),s=E("span"),r=L("(weapon)"),this.h()},l(l){e=A(l,"SPAN",{});var o=w(e);i=V(o,t),s=A(o,"SPAN",{class:!0});var a=w(s);r=V(a,"(weapon)"),a.forEach(g),o.forEach(g),this.h()},h(){_(s,"class","source svelte-bl52el")},m(l,o){B(l,e,o),m(e,i),m(e,s),m(s,r)},p(l,o){o[0]&2097152&&t!==(t=(l[21]>0?"+ "+l[21]:l[21])+"")&&Ce(i,t)},d(l){l&&g(e)}}}function c2(n){let e,t,i=xn(n[20])+"",s,r,l;return{c(){e=E("span"),t=L("+ "),s=L(i),r=E("span"),l=L("(combat art)"),this.h()},l(o){e=A(o,"SPAN",{});var a=w(e);t=V(a,"+ "),s=V(a,i),r=A(a,"SPAN",{class:!0});var c=w(r);l=V(c,"(combat art)"),c.forEach(g),a.forEach(g),this.h()},h(){_(r,"class","source svelte-bl52el")},m(o,a){B(o,e,a),m(e,t),m(e,s),m(e,r),m(r,l)},p(o,a){a[0]&1048576&&i!==(i=xn(o[20])+"")&&Ce(s,i)},d(o){o&&g(e)}}}function u2(n){let e,t,i,s,r;return{c(){e=E("span"),t=L("+ "),i=L(n[19]),s=E("span"),r=L("(options)"),this.h()},l(l){e=A(l,"SPAN",{});var o=w(e);t=V(o,"+ "),i=V(o,n[19]),s=A(o,"SPAN",{class:!0});var a=w(s);r=V(a,"(options)"),a.forEach(g),o.forEach(g),this.h()},h(){_(s,"class","source svelte-bl52el")},m(l,o){B(l,e,o),m(e,t),m(e,i),m(e,s),m(s,r)},p(l,o){o[0]&524288&&Ce(i,l[19])},d(l){l&&g(e)}}}function f2(n){let e,t=Qb(n[45])+"",i;return{c(){e=L("= "),i=L(t)},l(s){e=V(s,"= "),i=V(s,t)},m(s,r){B(s,e,r),B(s,i,r)},p(s,r){r[1]&16384&&t!==(t=Qb(s[45])+"")&&Ce(i,t)},d(s){s&&g(e),s&&g(i)}}}function h2(n){let e;return{c(){e=L("= Can't Crit")},l(t){e=V(t,"= Can't Crit")},m(t,i){B(t,e,i)},d(t){t&&g(e)}}}function d2(n){let e,t,i,s=n[43]!==n[44]&&m2(n);return{c(){e=L(n[44]),t=P(),s&&s.c(),i=et()},l(r){e=V(r,n[44]),t=M(r),s&&s.l(r),i=et()},m(r,l){B(r,e,l),B(r,t,l),s&&s.m(r,l),B(r,i,l)},p(r,l){l[1]&8192&&Ce(e,r[44]),r[43]!==r[44]?s?s.p(r,l):(s=m2(r),s.c(),s.m(i.parentNode,i)):s&&(s.d(1),s=null)},d(r){r&&g(e),r&&g(t),s&&s.d(r),r&&g(i)}}}function m2(n){let e,t;return{c(){e=L("to "),t=L(n[43])},l(i){e=V(i,"to "),t=V(i,n[43])},m(i,s){B(i,e,s),B(i,t,s)},p(i,s){s[1]&4096&&Ce(t,i[43])},d(i){i&&g(e),i&&g(t)}}}function p2(n){let e,t,i,s,r,l,o,a,c;return{c(){e=E("div"),t=E("h2"),i=L("Crest of "),s=L(n[53]),r=L(" (DC "),l=L(n[49]),o=L(`):
							`),a=E("span"),c=L("Hover your crest to see its effect"),this.h()},l(u){e=A(u,"DIV",{class:!0});var f=w(e);t=A(f,"H2",{class:!0});var h=w(t);i=V(h,"Crest of "),s=V(h,n[53]),r=V(h," (DC "),l=V(h,n[49]),o=V(h,`):
							`),a=A(h,"SPAN",{class:!0});var d=w(a);c=V(d,"Hover your crest to see its effect"),d.forEach(g),h.forEach(g),f.forEach(g),this.h()},h(){_(a,"class","crest-description svelte-bl52el"),_(t,"class","content svelte-bl52el"),_(e,"class","crest-container svelte-bl52el")},m(u,f){B(u,e,f),m(e,t),m(t,i),m(t,s),m(t,r),m(t,l),m(t,o),m(t,a),m(a,c)},p(u,f){f[1]&4194304&&Ce(s,u[53]),f[1]&262144&&Ce(l,u[49])},d(u){u&&g(e)}}}function g2(n){let e,t,i;return t=new j7({props:{playerName:n[0],critModifier:n[45],crestCombatArtDamageModifier:n[51],selectedWeapon:n[8],weaponUses:n[6],onUpdateWeaponUses:n[7],crestConservesResource:n[50],selectedCombatArt:n[10],allWeapons:n[4],allCombatArts:n[5],curSuperiorityDies:n[12],setCurSuperiorityDie:n[13],onCloseModal:n[76],attackCalc:n[48],damageCalc:n[46],crestDC:n[37]?n[49]:1/0,crestDamage:n[52],crestType:n[37]?n[36]:"",combatArtDamageBonus:n[26],shouldDoVisualRolls:n[17],toggleVisualRolls:n[40]}}),{c(){e=E("div"),ce(t.$$.fragment),this.h()},l(s){e=A(s,"DIV",{class:!0});var r=w(e);ge(t.$$.fragment,r),r.forEach(g),this.h()},h(){_(e,"class","attack-roll-container")},m(s,r){B(s,e,r),ue(t,e,null),i=!0},p(s,r){const l={};r[0]&1&&(l.playerName=s[0]),r[1]&16384&&(l.critModifier=s[45]),r[1]&1048576&&(l.crestCombatArtDamageModifier=s[51]),r[0]&256&&(l.selectedWeapon=s[8]),r[0]&64&&(l.weaponUses=s[6]),r[0]&128&&(l.onUpdateWeaponUses=s[7]),r[1]&524288&&(l.crestConservesResource=s[50]),r[0]&1024&&(l.selectedCombatArt=s[10]),r[0]&16&&(l.allWeapons=s[4]),r[0]&32&&(l.allCombatArts=s[5]),r[0]&4096&&(l.curSuperiorityDies=s[12]),r[0]&8192&&(l.setCurSuperiorityDie=s[13]),r[1]&256&&(l.onCloseModal=s[76]),r[1]&131072&&(l.attackCalc=s[48]),r[1]&32768&&(l.damageCalc=s[46]),r[1]&262208&&(l.crestDC=s[37]?s[49]:1/0),r[1]&2097152&&(l.crestDamage=s[52]),r[1]&96&&(l.crestType=s[37]?s[36]:""),r[0]&67108864&&(l.combatArtDamageBonus=s[26]),r[0]&131072&&(l.shouldDoVisualRolls=s[17]),r[1]&512&&(l.toggleVisualRolls=s[40]),t.$set(l)},i(s){i||(D(t.$$.fragment,s),i=!0)},o(s){U(t.$$.fragment,s),i=!1},d(s){s&&g(e),fe(t)}}}function v2(n){let e,t,i,s,r,l;return{c(){e=E("div"),t=E("button"),i=L("ATTACK"),this.h()},l(o){e=A(o,"DIV",{class:!0});var a=w(e);t=A(a,"BUTTON",{class:!0});var c=w(t);i=V(c,"ATTACK"),c.forEach(g),a.forEach(g),this.h()},h(){t.disabled=s=!n[8],_(t,"class","svelte-bl52el"),rt(t,"height","100%"),_(e,"class","rolls svelte-bl52el")},m(o,a){B(o,e,a),m(e,t),m(t,i),r||(l=se(t,"click",function(){Mn(n[42])&&n[42].apply(this,arguments)}),r=!0)},p(o,a){n=o,a[0]&256&&s!==(s=!n[8])&&(t.disabled=s)},d(o){o&&g(e),r=!1,l()}}}function b2(n){let e,t,i,s,r,l,o,a;return t=new z7({props:{queries:n[38],selections:n[15],onUpdateQuerySelection:n[54]}}),{c(){e=E("div"),ce(t.$$.fragment),i=P(),s=E("button"),r=L("Reset Queries"),this.h()},l(c){e=A(c,"DIV",{class:!0});var u=w(e);ge(t.$$.fragment,u),i=M(u),s=A(u,"BUTTON",{class:!0});var f=w(s);r=V(f,"Reset Queries"),f.forEach(g),u.forEach(g),this.h()},h(){_(s,"class","reset svelte-bl52el"),_(e,"class","options svelte-bl52el")},m(c,u){B(c,e,u),ue(t,e,null),m(e,i),m(e,s),m(s,r),l=!0,o||(a=se(s,"click",n[77]),o=!0)},p(c,u){const f={};u[1]&128&&(f.queries=c[38]),u[0]&32768&&(f.selections=c[15]),u[1]&8388608&&(f.onUpdateQuerySelection=c[54]),t.$set(f)},i(c){l||(D(t.$$.fragment,c),l=!0)},o(c){U(t.$$.fragment,c),l=!1},d(c){c&&g(e),fe(t),o=!1,a()}}}function G7(n){let e,t,i,s,r,l,o,a;i=new M7({props:{damageTypeSelection:n[16],weaponsToFeatures:n[18],allCombatArts:n[5],allWeapons:n[4],equippedCombatArts:n[2],equippedWeapons:n[3],selectedWeapon:n[8],setSelectedWeapon:n[9],selectedCombatArt:n[10],setSelectedCombatArt:n[11],distanceToTarget:n[14],setDistanceToTarget:n[55],equippedClass:n[1]}});let c=!n[39]&&Qy(n),u=n[39]&&g2(n),f=!n[39]&&v2(n),h=n[38].length>0&&b2(n);return{c(){e=E("div"),t=E("div"),ce(i.$$.fragment),s=P(),c&&c.c(),r=P(),u&&u.c(),l=P(),f&&f.c(),o=P(),h&&h.c(),this.h()},l(d){e=A(d,"DIV",{class:!0});var p=w(e);t=A(p,"DIV",{class:!0});var v=w(t);ge(i.$$.fragment,v),s=M(v),c&&c.l(v),r=M(v),u&&u.l(v),l=M(v),f&&f.l(v),o=M(v),h&&h.l(v),v.forEach(g),p.forEach(g),this.h()},h(){_(t,"class",Ze(Zi("container"))+" svelte-bl52el"),_(e,"class","outer svelte-bl52el")},m(d,p){B(d,e,p),m(e,t),ue(i,t,null),m(t,s),c&&c.m(t,null),m(t,r),u&&u.m(t,null),m(t,l),f&&f.m(t,null),m(t,o),h&&h.m(t,null),a=!0},p(d,p){const v={};p[0]&65536&&(v.damageTypeSelection=d[16]),p[0]&262144&&(v.weaponsToFeatures=d[18]),p[0]&32&&(v.allCombatArts=d[5]),p[0]&16&&(v.allWeapons=d[4]),p[0]&4&&(v.equippedCombatArts=d[2]),p[0]&8&&(v.equippedWeapons=d[3]),p[0]&256&&(v.selectedWeapon=d[8]),p[0]&512&&(v.setSelectedWeapon=d[9]),p[0]&1024&&(v.selectedCombatArt=d[10]),p[0]&2048&&(v.setSelectedCombatArt=d[11]),p[0]&16384&&(v.distanceToTarget=d[14]),p[0]&2&&(v.equippedClass=d[1]),i.$set(v),d[39]?c&&(c.d(1),c=null):c?c.p(d,p):(c=Qy(d),c.c(),c.m(t,r)),d[39]?u?(u.p(d,p),p[1]&256&&D(u,1)):(u=g2(d),u.c(),D(u,1),u.m(t,l)):u&&(Le(),U(u,1,1,()=>{u=null}),Ve()),d[39]?f&&(f.d(1),f=null):f?f.p(d,p):(f=v2(d),f.c(),f.m(t,o)),d[38].length>0?h?(h.p(d,p),p[1]&128&&D(h,1)):(h=b2(d),h.c(),D(h,1),h.m(t,null)):h&&(Le(),U(h,1,1,()=>{h=null}),Ve())},i(d){a||(D(i.$$.fragment,d),D(u),D(h),a=!0)},o(d){U(i.$$.fragment,d),U(u),U(h),a=!1},d(d){d&&g(e),fe(i),c&&c.d(),u&&u.d(),f&&f.d(),h&&h.d()}}}function K7(n,e,t){let i,s,r,l,o,a,c,u,f,h,d,p,v,y,b,S,I,T,C,k,R,O,N,F,W,z,Y,H,K,j,J,Z,q,X,ne,Q,re,be,le,he,Ie,G,ve,je,$,Oe,ie,_e,Ee,He;Bn(hs.MODAL);let{playerName:We}=e,{equippedClass:Qe}=e,{equippedCombatArts:we}=e,{equippedCombatSkills:Me}=e,{equippedWeapons:de}=e,{playerCrest:Ae}=e,{playerStats:Re}=e,{allWeapons:Ne}=e,{allCombatArts:Ge}=e,{weaponUses:pe}=e,{onUpdateWeaponUses:Fe}=e,{selectedWeapon:ae}=e,{setSelectedWeapon:ke}=e,{selectedCombatArt:oe}=e,{setSelectedCombatArt:at}=e,{curSuperiorityDies:qe}=e,{setCurSuperiorityDie:me}=e,ot=1;const Se=ft=>t(14,ot=ft);let ze,ye={current:null},ut,Bt={current:Y},gt="",Ot=!0;const en=ft=>{t(16,gt=ft.currentTarget.value)},gn=()=>t(39,ze=!1),Jt=()=>{t(15,ut=void 0)};return n.$$set=ft=>{"playerName"in ft&&t(0,We=ft.playerName),"equippedClass"in ft&&t(1,Qe=ft.equippedClass),"equippedCombatArts"in ft&&t(2,we=ft.equippedCombatArts),"equippedCombatSkills"in ft&&t(56,Me=ft.equippedCombatSkills),"equippedWeapons"in ft&&t(3,de=ft.equippedWeapons),"playerCrest"in ft&&t(57,Ae=ft.playerCrest),"playerStats"in ft&&t(58,Re=ft.playerStats),"allWeapons"in ft&&t(4,Ne=ft.allWeapons),"allCombatArts"in ft&&t(5,Ge=ft.allCombatArts),"weaponUses"in ft&&t(6,pe=ft.weaponUses),"onUpdateWeaponUses"in ft&&t(7,Fe=ft.onUpdateWeaponUses),"selectedWeapon"in ft&&t(8,ae=ft.selectedWeapon),"setSelectedWeapon"in ft&&t(9,ke=ft.setSelectedWeapon),"selectedCombatArt"in ft&&t(10,oe=ft.selectedCombatArt),"setSelectedCombatArt"in ft&&t(11,at=ft.setSelectedCombatArt),"curSuperiorityDies"in ft&&t(12,qe=ft.curSuperiorityDies),"setCurSuperiorityDie"in ft&&t(13,me=ft.setCurSuperiorityDie)},n.$$.update=()=>{var ft,cn,tn,wn,vn,Ln,Cn,Un,di,Ue,yt,qt,hn,dn,Qt,tt,Dt,mi;n.$$.dirty[0]&16&&t(18,i=Ne.fullFeatures),n.$$.dirty[1]&134217728&&t(23,s=$s(Re[Ye.DEX])),n.$$.dirty[0]&2|n.$$.dirty[1]&33554432&&t(67,r=M4(Qe,Me)),n.$$.dirty[0]&256&&t(69,l=P8[ae]),n.$$.dirty[0]&262400|n.$$.dirty[1]&33554432&&t(74,o=()=>Me.reduce((nn,jt)=>((_s[jt].queries||[]).forEach((gs,Sn)=>{var pt;if(gs.compatibleWeapons.includes((pt=i[ae])==null?void 0:pt.type)){const ee=jt+"__"+Sn;nn[ee]={...gs,key:jt+"__"+Sn}}}),nn),{})),n.$$.dirty[2]&4096&&t(73,a=o()),n.$$.dirty[2]&2048&&t(38,c=Object.values(a)),n.$$.dirty[1]&128&&t(72,u=c.map(Pt=>Pt.key)),n.$$.dirty[0]&32768|n.$$.dirty[1]&268435584|n.$$.dirty[2]&1024&&(ut?S8(new Set(ye.current),new Set(u))||(t(59,ye.current=u,ye),t(15,ut=c.reduce((Pt,nn)=>(Pt[nn.key||""]=nn.options[0],Pt),{}))):t(15,ut=c.reduce((Pt,nn)=>(Pt[nn.key||""]=nn.options[0],Pt),{}))),n.$$.dirty[0]&32768&&t(54,f=(Pt,nn)=>{t(15,ut={...ut,[Pt]:nn})}),n.$$.dirty[1]&67108864&&t(71,h=new Set((ft=Ds[Ae.type])==null?void 0:ft.triggersOn)),n.$$.dirty[0]&263424|n.$$.dirty[2]&640&&t(70,d=()=>{var Pt,nn;return oe?h.has(ma.COMBAT_ART)||h.has(ma.ATTACK):l===te.REASON||l===te.FAITH?h.has(ma.MAGIC_ATTACK)&&((nn=(Pt=i[ae])==null?void 0:Pt.damage)==null?void 0:nn[0])!==0&&!vh.has(ae)||h.has(ma.HEAL)&&vh.has(ae):h.has(ma.ATTACK)}),n.$$.dirty[1]&67108864&&t(36,p=Ae.type),n.$$.dirty[1]&32&&t(53,v=(cn=Ds[p])==null?void 0:cn.label),n.$$.dirty[1]&32&&((tn=Ds[p])==null||tn.description),n.$$.dirty[1]&32&&t(52,y=((wn=Ds[p])==null?void 0:wn.damageBonus)||[]),n.$$.dirty[1]&32&&t(51,b=((vn=Ds[p])==null?void 0:vn.combatArtDamageMultiplier)||1),n.$$.dirty[1]&32&&t(50,S=((Ln=Ds[p])==null?void 0:Ln.conservesResource)||!1),n.$$.dirty[2]&256&&t(37,I=d()),n.$$.dirty[1]&67108960&&t(49,T=I?Ds[p].activationDC[Ae.isMajor?hl.MAJOR:hl.MINOR]:1/0),n.$$.dirty[0]&8388608&&t(31,C=s),n.$$.dirty[0]&262400&&t(33,k=((Cn=i[ae])==null?void 0:Cn.attackBonus)||0),n.$$.dirty[0]&1024&&t(34,R=((Un=Wr[oe])==null?void 0:Un.attackBonus)||[]),n.$$.dirty[1]&33554432|n.$$.dirty[2]&128&&t(35,O=Me.reduce((Pt,nn)=>{var jt,Ui;return[...Pt,...((jt=_s[nn].attackBonus)==null?void 0:jt[l])||((Ui=_s[nn].attackBonus)==null?void 0:Ui.ANY)||[]]},[])),n.$$.dirty[0]&32768&&t(30,N=Object.keys(ut||{}).reduce((Pt,nn)=>(ut!=null&&ut[nn].attackBonus&&(Pt=[...Pt,...ut[nn].attackBonus||[]]),Pt),[])),n.$$.dirty[0]&16640&&t(32,F=W4.includes(ae)?Math.max(ot-2,0)*-2:0),n.$$.dirty[0]&1073741824|n.$$.dirty[1]&31&&t(68,W=[...O,...R,k,F,C,...N].filter(Pt=>Pt!==0)),n.$$.dirty[2]&64&&t(48,z=qa(W)),n.$$.dirty[0]&262400&&t(29,Y=(di=i[ae])==null?void 0:di.damageType),n.$$.dirty[0]&536936448|n.$$.dirty[1]&536870912&&(!gt||Bt.current!==Y)&&(t(60,Bt.current=Y,Bt),Y?t(16,gt=Y[0]):t(16,gt=Ye.STR)),n.$$.dirty[0]&65536|n.$$.dirty[1]&134217728&&t(28,H=$s(Re[gt]||10)),n.$$.dirty[0]&65536&&t(47,K=zs[gt]),n.$$.dirty[0]&262400&&t(27,j=[...((Ue=i[ae])==null?void 0:Ue.damage)||[]]),n.$$.dirty[0]&256|n.$$.dirty[2]&32&&t(25,J=ae===Pe.HEAL&&r?2:0),n.$$.dirty[0]&1024&&t(26,Z=((yt=Wr[oe])==null?void 0:yt.damageBonus)||[]),n.$$.dirty[0]&32768&&t(24,q=Object.keys(ut||{}).reduce((Pt,nn)=>(ut!=null&&ut[nn].damageBonus&&(Pt=[...Pt,...ut[nn].damageBonus||[]]),Pt),[])),n.$$.dirty[0]&520093696&&t(66,X=[H,...j,...Z,J,...q].filter(Pt=>Pt!==0)),n.$$.dirty[2]&16&&t(46,ne=qa(X)),n.$$.dirty[0]&262400&&t(21,re=((qt=i[ae])==null?void 0:qt.critBonus)||0),n.$$.dirty[0]&1024&&t(20,be=((hn=Wr[oe])==null?void 0:hn.critBonus)||[]),n.$$.dirty[0]&16252928&&t(45,he=Xs([s,Q,re,...be,...le])),n.$$.dirty[0]&262402&&t(64,Ie=((Dt=(Qt=(dn=Xt[Qe])==null?void 0:dn.whenEquipped)==null?void 0:Qt.bonusRange)==null?void 0:Dt[(tt=i[ae])==null?void 0:tt.type])||0),n.$$.dirty[0]&1056&&t(65,G=(mi=Ge.fullFeatures[oe])==null?void 0:mi.range),n.$$.dirty[0]&262400|n.$$.dirty[1]&33554432&&t(63,ve=Me.reduce((Pt,nn)=>{var jt,Ui,gs;return Pt+(((gs=(jt=_s[nn])==null?void 0:jt.bonusRange)==null?void 0:gs[(Ui=i[ae])==null?void 0:Ui.type])||0)},0)),n.$$.dirty[0]&262400|n.$$.dirty[1]&134217728|n.$$.dirty[2]&15&&t(61,$=()=>{var nn;let Pt=G?[...G]:[...((nn=i[ae])==null?void 0:nn.range)||[1]];return ae===Pe.RESTORE?Pt=[1,2+$s(Re[Ye.INT])]:ae===Pe.PHYSIC&&(Pt=[1,2+2*$s(Re[Ye.INT])]),Pt[1]===void 0&&(Pt[1]=Pt[0]),Pt[1]=parseInt(Pt[1]+"")+Ie+ve+je,Pt}),n.$$.dirty[1]&1073741824&&t(44,[Oe,ie]=$(),Oe,(t(43,ie),t(61,$),t(65,G),t(18,i),t(8,ae),t(58,Re),t(64,Ie),t(63,ve),t(62,je),t(5,Ge),t(10,oe),t(4,Ne),t(1,Qe),t(56,Me))),n.$$.dirty[0]&256&&t(41,Ee=vh.has(ae)),n.$$.dirty[0]&131072&&t(40,He=()=>{t(17,Ot=!Ot)})},t(22,Q=-1),t(19,le=[]),t(62,je=0),t(42,_e=()=>t(39,ze=!0)),[We,Qe,we,de,Ne,Ge,pe,Fe,ae,ke,oe,at,qe,me,ot,ut,gt,Ot,i,le,be,re,Q,s,q,J,Z,j,H,Y,N,C,F,k,R,O,p,I,c,ze,He,Ee,_e,ie,Oe,he,ne,K,z,T,S,b,y,v,f,Se,Me,Ae,Re,ye,Bt,$,je,ve,Ie,G,X,r,W,l,d,h,u,a,o,en,gn,Jt]}class Q7 extends nt{constructor(e){super(),it(this,e,K7,G7,Ct,{playerName:0,equippedClass:1,equippedCombatArts:2,equippedCombatSkills:56,equippedWeapons:3,playerCrest:57,playerStats:58,allWeapons:4,allCombatArts:5,weaponUses:6,onUpdateWeaponUses:7,selectedWeapon:8,setSelectedWeapon:9,selectedCombatArt:10,setSelectedCombatArt:11,curSuperiorityDies:12,setCurSuperiorityDie:13},null,[-1,-1,-1])}}const X7=n=>({}),_2=n=>({});function Y7(n){let e,t,i,s,r,l,o,a,c;const u=n[2].content,f=os(u,n,n[1],_2);return{c(){e=E("div"),t=E("div"),i=L(n[0]),s=P(),f&&f.c(),r=P(),l=E("div"),o=P(),a=E("div"),this.h()},l(h){e=A(h,"DIV",{class:!0});var d=w(e);t=A(d,"DIV",{class:!0});var p=w(t);i=V(p,n[0]),s=M(p),f&&f.l(p),p.forEach(g),r=M(d),l=A(d,"DIV",{class:!0}),w(l).forEach(g),o=M(d),a=A(d,"DIV",{class:!0}),w(a).forEach(g),d.forEach(g),this.h()},h(){_(t,"class","label svelte-nu0fyj"),_(l,"class","divider svelte-nu0fyj"),_(a,"class","divider svelte-nu0fyj"),_(e,"class","container svelte-nu0fyj")},m(h,d){B(h,e,d),m(e,t),m(t,i),m(t,s),f&&f.m(t,null),m(e,r),m(e,l),m(e,o),m(e,a),c=!0},p(h,[d]){(!c||d&1)&&Ce(i,h[0]),f&&f.p&&(!c||d&2)&&as(f,u,h,h[1],c?us(u,h[1],d,X7):cs(h[1]),_2)},i(h){c||(D(f,h),c=!0)},o(h){U(f,h),c=!1},d(h){h&&g(e),f&&f.d(h)}}}function J7(n,e,t){let{$$slots:i={},$$scope:s}=e,{label:r=""}=e;return n.$$set=l=>{"label"in l&&t(0,r=l.label),"$$scope"in l&&t(1,s=l.$$scope)},[r,s,i]}class gc extends nt{constructor(e){super(),it(this,e,J7,Y7,Ct,{label:0})}}function y2(n,e,t){const i=n.slice();return i[21]=e[t],i[23]=t,i}function S2(n,e,t){const i=n.slice();return i[24]=e[t],i}function E2(n){let e,t,i;const s=[n[1]];var r=n[0];function l(o){let a={};for(let c=0;c<s.length;c+=1)a=Qr(a,s[c]);return{props:a}}return r&&(e=An(r,l())),{c(){e&&ce(e.$$.fragment),t=et()},l(o){e&&ge(e.$$.fragment,o),t=et()},m(o,a){e&&ue(e,o,a),B(o,t,a),i=!0},p(o,a){const c=a&2?Xr(s,[Jo(o[1])]):{};if(r!==(r=o[0])){if(e){Le();const u=e;U(u.$$.fragment,1,0,()=>{fe(u,1)}),Ve()}r?(e=An(r,l()),ce(e.$$.fragment),D(e.$$.fragment,1),ue(e,t.parentNode,t)):e=null}else r&&e.$set(c)},i(o){i||(e&&D(e.$$.fragment,o),i=!0)},o(o){e&&U(e.$$.fragment,o),i=!1},d(o){o&&g(t),e&&fe(e,o)}}}function A2(n){let e,t,i,s;return{c(){e=E("button"),t=L("Randomize Choices"),this.h()},l(r){e=A(r,"BUTTON",{});var l=w(e);t=V(l,"Randomize Choices"),l.forEach(g),this.h()},h(){rt(e,"align-self","center")},m(r,l){B(r,e,l),m(e,t),i||(s=se(e,"click",n[18]),i=!0)},p:Ke,d(r){r&&g(e),i=!1,s()}}}function w2(n){let e,t=n[21].description+"",i;return{c(){e=E("span"),i=L(t),this.h()},l(s){e=A(s,"SPAN",{class:!0});var r=w(e);i=V(r,t),r.forEach(g),this.h()},h(){_(e,"class","description svelte-2mzsr9")},m(s,r){B(s,e,r),m(e,i)},p(s,r){r&4&&t!==(t=s[21].description+"")&&Ce(i,t)},d(s){s&&g(e)}}}function C2(n){let e,t=n[7](n[21].type,n[24])+"",i,s,r;return{c(){e=E("option"),i=L(t),this.h()},l(l){e=A(l,"OPTION",{});var o=w(e);i=V(o,t),o.forEach(g),this.h()},h(){e.__value=s=JSON.stringify(n[24]),e.value=e.__value,e.selected=r=n[4][n[23]]===n[24]},m(l,o){B(l,e,o),m(e,i)},p(l,o){o&4&&t!==(t=l[7](l[21].type,l[24])+"")&&Ce(i,t),o&4&&s!==(s=JSON.stringify(l[24]))&&(e.__value=s,e.value=e.__value),o&20&&r!==(r=l[4][l[23]]===l[24])&&(e.selected=r)},d(l){l&&g(e)}}}function k2(n){let e,t,i=n[21].type+"",s,r,l,o,a,c,u,f,h,d,p=n[21].description&&w2(n),v=n[21].options,y=[];for(let S=0;S<v.length;S+=1)y[S]=C2(S2(n,v,S));function b(...S){return n[19](n[23],...S)}return{c(){e=E("h2"),t=L("Pick a "),s=L(i),r=P(),p&&p.c(),l=P(),o=E("select"),a=E("option"),c=L("-");for(let S=0;S<y.length;S+=1)y[S].c();f=P(),this.h()},l(S){e=A(S,"H2",{class:!0});var I=w(e);t=V(I,"Pick a "),s=V(I,i),I.forEach(g),r=M(S),p&&p.l(S),l=M(S),o=A(S,"SELECT",{name:!0});var T=w(o);a=A(T,"OPTION",{});var C=w(a);c=V(C,"-"),C.forEach(g);for(let k=0;k<y.length;k+=1)y[k].l(T);T.forEach(g),f=M(S),this.h()},h(){_(e,"class","svelte-2mzsr9"),a.__value=null,a.value=a.__value,_(o,"name",u=n[21].type+n[23])},m(S,I){B(S,e,I),m(e,t),m(e,s),B(S,r,I),p&&p.m(S,I),B(S,l,I),B(S,o,I),m(o,a),m(a,c);for(let T=0;T<y.length;T+=1)y[T].m(o,null);B(S,f,I),h||(d=se(o,"change",b),h=!0)},p(S,I){if(n=S,I&4&&i!==(i=n[21].type+"")&&Ce(s,i),n[21].description?p?p.p(n,I):(p=w2(n),p.c(),p.m(l.parentNode,l)):p&&(p.d(1),p=null),I&148){v=n[21].options;let T;for(T=0;T<v.length;T+=1){const C=S2(n,v,T);y[T]?y[T].p(C,I):(y[T]=C2(C),y[T].c(),y[T].m(o,null))}for(;T<y.length;T+=1)y[T].d(1);y.length=v.length}I&4&&u!==(u=n[21].type+n[23])&&_(o,"name",u)},d(S){S&&g(e),S&&g(r),p&&p.d(S),S&&g(l),S&&g(o),Ft(y,S),S&&g(f),h=!1,d()}}}function Z7(n){let e,t,i,s,r,l,o,a,c,u,f,h,d,p,v,y,b=n[0]&&E2(n),S=!n[5]&&A2(n),I=n[2],T=[];for(let C=0;C<I.length;C+=1)T[C]=k2(y2(n,I,C));return{c(){e=E("div"),t=E("h1"),i=L("Making choice(s) because: "),s=E("span"),r=L(n[3]),l=P(),b&&b.c(),o=P(),a=E("div"),S&&S.c(),c=P();for(let C=0;C<T.length;C+=1)T[C].c();u=P(),f=E("button"),h=L("Submit Choices"),this.h()},l(C){e=A(C,"DIV",{class:!0});var k=w(e);t=A(k,"H1",{});var R=w(t);i=V(R,"Making choice(s) because: "),s=A(R,"SPAN",{class:!0});var O=w(s);r=V(O,n[3]),O.forEach(g),R.forEach(g),l=M(k),b&&b.l(k),o=M(k),a=A(k,"DIV",{class:!0});var N=w(a);S&&S.l(N),c=M(N);for(let W=0;W<T.length;W+=1)T[W].l(N);N.forEach(g),u=M(k),f=A(k,"BUTTON",{class:!0});var F=w(f);h=V(F,"Submit Choices"),F.forEach(g),k.forEach(g),this.h()},h(){_(s,"class","reason svelte-2mzsr9"),_(a,"class","content svelte-2mzsr9"),_(f,"class","submit"),f.disabled=d=!n[4].every(T2),_(e,"class","container svelte-2mzsr9")},m(C,k){B(C,e,k),m(e,t),m(t,i),m(t,s),m(s,r),m(e,l),b&&b.m(e,null),m(e,o),m(e,a),S&&S.m(a,null),m(a,c);for(let R=0;R<T.length;R+=1)T[R].m(a,null);m(e,u),m(e,f),m(f,h),p=!0,v||(y=se(f,"click",function(){Mn(n[6])&&n[6].apply(this,arguments)}),v=!0)},p(C,[k]){if(n=C,(!p||k&8)&&Ce(r,n[3]),n[0]?b?(b.p(n,k),k&1&&D(b,1)):(b=E2(n),b.c(),D(b,1),b.m(e,o)):b&&(Le(),U(b,1,1,()=>{b=null}),Ve()),n[5]?S&&(S.d(1),S=null):S?S.p(n,k):(S=A2(n),S.c(),S.m(a,c)),k&148){I=n[2];let R;for(R=0;R<I.length;R+=1){const O=y2(n,I,R);T[R]?T[R].p(O,k):(T[R]=k2(O),T[R].c(),T[R].m(a,null))}for(;R<T.length;R+=1)T[R].d(1);T.length=I.length}(!p||k&16&&d!==(d=!n[4].every(T2)))&&(f.disabled=d)},i(C){p||(D(b),p=!0)},o(C){U(b),p=!1},d(C){C&&g(e),b&&b.d(),S&&S.d(),Ft(T,C),v=!1,y()}}}const T2=n=>n!==null;function x7(n,e,t){let i,s,r;const{close:l}=Bn(hs.MODAL);let{descriptionElement:o}=e,{descriptionElementProps:a}=e,{pickOne:c=[]}=e,{onSubmit:u=()=>{}}=e,{reason:f}=e,{customCombatArts:h={}}=e,{customCombatSkills:d={}}=e,{customWeapons:p={}}=e,{playerStats:v={}}=e,{onUpdatePlayerStats:y=()=>{}}=e,{onUpdateCustomCombatArts:b=()=>{}}=e,{onUpdateCustomCombatSkills:S=()=>{}}=e,{onUpdateCustomWeapons:I=()=>{}}=e,T=c.map(()=>null);const C=(O,N)=>{switch(O){case Nn.Weapon:return N.toString()==="DOUBLE_BASE_USES"?"Double the uses of the spell you chose at Reason Level D":tr[N.toString()].label+": "+Au(tr[N.toString()]);case Nn.CombatArt:return Wr[N.toString()].label+": "+U4(Wr[N.toString()]);case Nn.CombatSkill:return _s[N.toString()].label+": "+_s[N.toString()].description;case Nn.PlayerStat:const F=typeof N=="string"?N:N.stat,W=typeof N=="string"?N:N.value;return`Increase ${zs[F]} to at least ${W}`}},k=()=>{t(4,T=c.map(O=>{const N=Math.floor(Math.random()*O.options.length);return O.options[N]}))},R=(O,N)=>{t(4,T=[...T]),t(4,T[O]=JSON.parse(N.currentTarget.value),T)};return n.$$set=O=>{"descriptionElement"in O&&t(0,o=O.descriptionElement),"descriptionElementProps"in O&&t(1,a=O.descriptionElementProps),"pickOne"in O&&t(2,c=O.pickOne),"onSubmit"in O&&t(8,u=O.onSubmit),"reason"in O&&t(3,f=O.reason),"customCombatArts"in O&&t(9,h=O.customCombatArts),"customCombatSkills"in O&&t(10,d=O.customCombatSkills),"customWeapons"in O&&t(11,p=O.customWeapons),"playerStats"in O&&t(12,v=O.playerStats),"onUpdatePlayerStats"in O&&t(13,y=O.onUpdatePlayerStats),"onUpdateCustomCombatArts"in O&&t(14,b=O.onUpdateCustomCombatArts),"onUpdateCustomCombatSkills"in O&&t(15,S=O.onUpdateCustomCombatSkills),"onUpdateCustomWeapons"in O&&t(16,I=O.onUpdateCustomWeapons)},n.$$.update=()=>{n.$$.dirty&130568&&t(17,i=(O,N)=>{switch(O){case Nn.Weapon:const F=N.reduce((H,K)=>{var j,J;if(K==="DOUBLE_BASE_USES"){const Z=Object.keys(p).find(q=>{var X;return((X=p[q])==null?void 0:X.reason)==="Unlocked Reason level D"});if(Z){const q=((j=H[Z])==null?void 0:j.uses)||((J=tr[Z])==null?void 0:J.uses);H[Z]={...H[Z],uses:q*2}}}else H[K]={...H[K],reason:f};return H},{...p});I(F);return;case Nn.CombatArt:const W=N.reduce((H,K)=>(H[K]={...H[K],reason:f},H),{...h});b(W);return;case Nn.CombatSkill:const z=N.reduce((H,K)=>(H[K]={...H[K],reason:f},H),{...d});S(z);return;case Nn.PlayerStat:const Y=N.reduce((H,K)=>{const{stat:j,value:J}=K;return Math.max(J,H[j])===J&&(H[j]=J),H},{...v});y(Y);return}}),n.$$.dirty&131348&&t(6,s=()=>{const O=T.reduce((N,F,W)=>{const z=c[W].type,Y=N[z]||new Set;return Y.add(F),N[z]=Y,N},{});Object.keys(O).forEach(N=>i(N,Array.from(O[N]))),u(),l()}),n.$$.dirty&4&&t(5,r=c.some(O=>O.disableRandom))},[o,a,c,f,T,r,s,C,u,h,d,p,v,y,b,S,I,i,k,R]}class wu extends nt{constructor(e){super(),it(this,e,x7,Z7,Ct,{descriptionElement:0,descriptionElementProps:1,pickOne:2,onSubmit:8,reason:3,customCombatArts:9,customCombatSkills:10,customWeapons:11,playerStats:12,onUpdatePlayerStats:13,onUpdateCustomCombatArts:14,onUpdateCustomCombatSkills:15,onUpdateCustomWeapons:16})}}function $7(n){let e,t,i,s,r,l,o;return{c(){e=E("button"),t=E("img"),this.h()},l(a){e=A(a,"BUTTON",{class:!0});var c=w(e);t=A(c,"IMG",{src:!0,width:!0,height:!0,class:!0,alt:!0}),c.forEach(g),this.h()},h(){No(t.src,i="equipped.png")||_(t,"src",i),_(t,"width",n[0]),_(t,"height",n[0]),_(t,"class",s=Ze(Zi("img",{"not-equipped":!n[1]}))+" svelte-1ifhtbn"),_(t,"alt","equipped"),_(e,"class","container svelte-1ifhtbn"),e.disabled=r=n[4]||!n[3],rt(e,"opacity",n[3]?"1":"0"),rt(e,"width",n[0]),rt(e,"height",n[0])},m(a,c){B(a,e,c),m(e,t),l||(o=se(t,"click",function(){Mn(n[2])&&n[2].apply(this,arguments)}),l=!0)},p(a,[c]){n=a,c&1&&_(t,"width",n[0]),c&1&&_(t,"height",n[0]),c&2&&s!==(s=Ze(Zi("img",{"not-equipped":!n[1]}))+" svelte-1ifhtbn")&&_(t,"class",s),c&24&&r!==(r=n[4]||!n[3])&&(e.disabled=r),c&8&&rt(e,"opacity",n[3]?"1":"0"),c&1&&rt(e,"width",n[0]),c&1&&rt(e,"height",n[0])},i:Ke,o:Ke,d(a){a&&g(e),l=!1,o()}}}function eV(n,e,t){let{size:i="20px"}=e,{isEquipped:s}=e,{onClick:r}=e,{isVisible:l=!0}=e,{disabled:o=!1}=e;return n.$$set=a=>{"size"in a&&t(0,i=a.size),"isEquipped"in a&&t(1,s=a.isEquipped),"onClick"in a&&t(2,r=a.onClick),"isVisible"in a&&t(3,l=a.isVisible),"disabled"in a&&t(4,o=a.disabled)},[i,s,r,l,o]}class km extends nt{constructor(e){super(),it(this,e,eV,$7,Ct,{size:0,isEquipped:1,onClick:2,isVisible:3,disabled:4})}}function tV(n){let e,t,i,s,r,l,o;return{c(){e=E("button"),t=E("img"),this.h()},l(a){e=A(a,"BUTTON",{class:!0});var c=w(e);t=A(c,"IMG",{src:!0,width:!0,height:!0,class:!0,alt:!0}),c.forEach(g),this.h()},h(){No(t.src,i=n[2]?"mastered.png":"unequipped.png")||_(t,"src",i),_(t,"width",n[0]),_(t,"height",n[0]),_(t,"class",s=Ze(`${!n[2]&&n[1]?"equipped":""} `)+" svelte-1wznjqo"),_(t,"alt","unlocked"),rt(t,"filter",!n[2]&&n[1]?n[5]:""),_(e,"class",r=Ze(`container ${n[3]?"custom":""}`)+" svelte-1wznjqo"),rt(e,"width",n[0]),rt(e,"height",n[0]),rt(e,"border",n[6])},m(a,c){B(a,e,c),m(e,t),l||(o=se(t,"click",function(){Mn(n[4])&&n[4].apply(this,arguments)}),l=!0)},p(a,[c]){n=a,c&4&&!No(t.src,i=n[2]?"mastered.png":"unequipped.png")&&_(t,"src",i),c&1&&_(t,"width",n[0]),c&1&&_(t,"height",n[0]),c&6&&s!==(s=Ze(`${!n[2]&&n[1]?"equipped":""} `)+" svelte-1wznjqo")&&_(t,"class",s),c&38&&rt(t,"filter",!n[2]&&n[1]?n[5]:""),c&8&&r!==(r=Ze(`container ${n[3]?"custom":""}`)+" svelte-1wznjqo")&&_(e,"class",r),c&1&&rt(e,"width",n[0]),c&1&&rt(e,"height",n[0]),c&64&&rt(e,"border",n[6])},i:Ke,o:Ke,d(a){a&&g(e),l=!1,o()}}}function nV(n,e,t){let{size:i="16px"}=e,{isUnlocked:s=!1}=e,{isMastered:r=!1}=e,{isCustom:l=!1}=e,{onClick:o}=e,{unlockedFilter:a="sepia(100%) saturate(1000%) brightness(45%) hue-rotate(174deg)"}=e,{buttonBorder:c=""}=e;return n.$$set=u=>{"size"in u&&t(0,i=u.size),"isUnlocked"in u&&t(1,s=u.isUnlocked),"isMastered"in u&&t(2,r=u.isMastered),"isCustom"in u&&t(3,l=u.isCustom),"onClick"in u&&t(4,o=u.onClick),"unlockedFilter"in u&&t(5,a=u.unlockedFilter),"buttonBorder"in u&&t(6,c=u.buttonBorder)},[i,s,r,l,o,a,c]}class G4 extends nt{constructor(e){super(),it(this,e,nV,tV,Ct,{size:0,isUnlocked:1,isMastered:2,isCustom:3,onClick:4,unlockedFilter:5,buttonBorder:6})}}const $g=(n,e={})=>{const{prefix:t="Extra XP from Combat:"}=e;return t+" ("+Object.keys(n).map(i=>(il[i]||i)+": +"+Math.round(n[i]*100)+"% of combat XP").join(", ")+")"},Wo=(n={},{disablePickOne:e}={})=>{const{playerStats:t,combatSkills:i,playerSkills:s,combatArts:r,weapons:l,hpBonus:o,xpMods:a,xpMooch:c,protectionBonus:u,msBonus:f,bonusRange:h,followUpBonus:d,pickOne:p,resilienceBonus:v}=n,y=[];return t&&y.push("Min Stats ("+Object.entries(t).map(([b,S])=>`${zs[b]} ${S}`).join(", ")+")"),s&&y.push("Skills ("+Object.keys(s).map(b=>$h[b]).join(", ")+")"),i&&y.push("Combat Skills ("+Object.keys(i).map(b=>_s[b].label).join(", ")+")"),r&&y.push("Combat Arts ("+Object.keys(r).map(b=>Wr[b].label).join(", ")+")"),l&&y.push("Weapons ("+Object.keys(l).map(b=>tr[b].label).join(", ")+")"),o&&y.push("HP Bonus ("+o+")"),h&&y.push("Bonus Range by Weapon Type: ("+Object.keys(h).map(b=>(il[b]||b)+": "+h[b]).join(", ")+")"),d&&y.push("AS Modifier ("+d+")"),u&&y.push("Prt Bonus ("+u+")"),v&&y.push("Re Bonus ("+v+")"),f&&y.push("MS Bonus ("+f+")"),a&&y.push("XP from Combat: ("+Object.keys(a).map(b=>(il[b]||b)+": x"+a[b]).join(", ")+")"),c&&y.push($g(c)),!e&&p&&y.push("Choose one per category: "+p.map(({type:b,options:S})=>{const I=b,T=S.map(C=>b===Nn.PlayerStat?"Min "+zs[C.stat]+" "+C.value:b===Nn.CombatArt?Wr[C].label:b===Nn.Weapon?tr[C].label:b===Nn.CombatSkill?_s[C].label:"unmapped").join(", ");return"(["+I+"]: "+T+")"}).join(", ")+")"),y.join(", ")},nd=(n={},e=!1)=>{const{unlocks:t}=n;return Wo(t,{disablePickOne:e})};function iV(n){let e,t;return{c(){e=E("div"),t=L("Mastered"),this.h()},l(i){e=A(i,"DIV",{slot:!0,class:!0});var s=w(e);t=V(s,"Mastered"),s.forEach(g),this.h()},h(){_(e,"slot","t"),_(e,"class","svelte-5jm01p")},m(i,s){B(i,e,s),m(e,t)},p:Ke,d(i){i&&g(e)}}}function I2(n){var u,f,h;let e,t=Object.keys((u=n[7])==null?void 0:u.unlocks).length,i,s=Object.keys((f=n[7])==null?void 0:f.whenEquipped).length,r,l=n[0]&&Object.keys((h=n[7])==null?void 0:h.whenMastered).length,o=t&&O2(n),a=s&&R2(n),c=l&&D2(n);return{c(){e=E("div"),o&&o.c(),i=P(),a&&a.c(),r=P(),c&&c.c(),this.h()},l(d){e=A(d,"DIV",{class:!0});var p=w(e);o&&o.l(p),i=M(p),a&&a.l(p),r=M(p),c&&c.l(p),p.forEach(g),this.h()},h(){_(e,"class","description svelte-5jm01p")},m(d,p){B(d,e,p),o&&o.m(e,null),m(e,i),a&&a.m(e,null),m(e,r),c&&c.m(e,null)},p(d,p){var v,y,b;p&128&&(t=Object.keys((v=d[7])==null?void 0:v.unlocks).length),t?o?o.p(d,p):(o=O2(d),o.c(),o.m(e,i)):o&&(o.d(1),o=null),p&128&&(s=Object.keys((y=d[7])==null?void 0:y.whenEquipped).length),s?a?a.p(d,p):(a=R2(d),a.c(),a.m(e,r)):a&&(a.d(1),a=null),p&129&&(l=d[0]&&Object.keys((b=d[7])==null?void 0:b.whenMastered).length),l?c?c.p(d,p):(c=D2(d),c.c(),c.m(e,null)):c&&(c.d(1),c=null)},d(d){d&&g(e),o&&o.d(),a&&a.d(),c&&c.d()}}}function O2(n){let e,t,i,s,r,l=Wo(n[7].unlocks)+"",o;return{c(){e=E("div"),t=E("div"),i=E("u"),s=L("Unlocks"),r=P(),o=L(l)},l(a){e=A(a,"DIV",{});var c=w(e);t=A(c,"DIV",{});var u=w(t);i=A(u,"U",{});var f=w(i);s=V(f,"Unlocks"),f.forEach(g),u.forEach(g),r=M(c),o=V(c,l),c.forEach(g)},m(a,c){B(a,e,c),m(e,t),m(t,i),m(i,s),m(e,r),m(e,o)},p(a,c){c&128&&l!==(l=Wo(a[7].unlocks)+"")&&Ce(o,l)},d(a){a&&g(e)}}}function R2(n){let e,t,i,s,r,l=Wo(n[7].whenEquipped)+"",o;return{c(){e=E("div"),t=E("div"),i=E("u"),s=L("When Equipped"),r=P(),o=L(l)},l(a){e=A(a,"DIV",{});var c=w(e);t=A(c,"DIV",{});var u=w(t);i=A(u,"U",{});var f=w(i);s=V(f,"When Equipped"),f.forEach(g),u.forEach(g),r=M(c),o=V(c,l),c.forEach(g)},m(a,c){B(a,e,c),m(e,t),m(t,i),m(i,s),m(e,r),m(e,o)},p(a,c){c&128&&l!==(l=Wo(a[7].whenEquipped)+"")&&Ce(o,l)},d(a){a&&g(e)}}}function D2(n){let e,t,i,s,r,l=Wo(n[7].whenMastered)+"",o;return{c(){e=E("div"),t=E("div"),i=E("u"),s=L("When Mastered"),r=P(),o=L(l)},l(a){e=A(a,"DIV",{});var c=w(e);t=A(c,"DIV",{});var u=w(t);i=A(u,"U",{});var f=w(i);s=V(f,"When Mastered"),f.forEach(g),u.forEach(g),r=M(c),o=V(c,l),c.forEach(g)},m(a,c){B(a,e,c),m(e,t),m(t,i),m(i,s),m(e,r),m(e,o)},p(a,c){c&128&&l!==(l=Wo(a[7].whenMastered)+"")&&Ce(o,l)},d(a){a&&g(e)}}}function sV(n){let e,t,i,s,r,l,o,a=Vo[n[4]]+"",c,u,f,h,d,p,v,y,b,S,I;i=new ai({props:{disabled:!n[0],$$slots:{t:[iV]},$$scope:{ctx:n}}}),r=new G4({props:{isUnlocked:n[1],isMastered:n[0],onClick:n[8]}}),v=new km({props:{isEquipped:n[5]===n[4],onClick:n[11],isVisible:n[1]}});let T=n[6]&&I2(n);return{c(){e=E("div"),t=E("div"),ce(i.$$.fragment),s=P(),ce(r.$$.fragment),l=P(),o=E("div"),c=L(a),u=P(),f=E("div"),h=L("v"),p=P(),ce(v.$$.fragment),y=P(),T&&T.c(),this.h()},l(C){e=A(C,"DIV",{class:!0});var k=w(e);t=A(k,"DIV",{class:!0});var R=w(t);ge(i.$$.fragment,R),s=M(R),ge(r.$$.fragment,R),l=M(R),o=A(R,"DIV",{class:!0});var O=w(o);c=V(O,a),O.forEach(g),u=M(R),f=A(R,"DIV",{class:!0});var N=w(f);h=V(N,"v"),N.forEach(g),p=M(R),ge(v.$$.fragment,R),R.forEach(g),y=M(k),T&&T.l(k),k.forEach(g),this.h()},h(){_(o,"class",Ze("class-label")+" svelte-5jm01p"),_(f,"class",d=Ze(`caret ${n[6]?"":"flip"}`)+" svelte-5jm01p"),_(t,"class","content svelte-5jm01p"),_(e,"class","container svelte-5jm01p")},m(C,k){B(C,e,k),m(e,t),ue(i,t,null),m(t,s),ue(r,t,null),m(t,l),m(t,o),m(o,c),m(t,u),m(t,f),m(f,h),m(t,p),ue(v,t,null),m(e,y),T&&T.m(e,null),b=!0,S||(I=[se(o,"click",n[9]),se(f,"click",n[10])],S=!0)},p(C,[k]){const R={};k&1&&(R.disabled=!C[0]),k&4096&&(R.$$scope={dirty:k,ctx:C}),i.$set(R);const O={};k&2&&(O.isUnlocked=C[1]),k&1&&(O.isMastered=C[0]),k&20&&(O.onClick=C[8]),r.$set(O),(!b||k&16)&&a!==(a=Vo[C[4]]+"")&&Ce(c,a),(!b||k&64&&d!==(d=Ze(`caret ${C[6]?"":"flip"}`)+" svelte-5jm01p"))&&_(f,"class",d);const N={};k&48&&(N.isEquipped=C[5]===C[4]),k&24&&(N.onClick=C[11]),k&2&&(N.isVisible=C[1]),v.$set(N),C[6]?T?T.p(C,k):(T=I2(C),T.c(),T.m(e,null)):T&&(T.d(1),T=null)},i(C){b||(D(i.$$.fragment,C),D(r.$$.fragment,C),D(v.$$.fragment,C),b=!0)},o(C){U(i.$$.fragment,C),U(r.$$.fragment,C),U(v.$$.fragment,C),b=!1},d(C){C&&g(e),fe(i),fe(r),fe(v),T&&T.d(),S=!1,on(I)}}}function rV(n,e,t){let i,{isMastered:s}=e,{isUnlocked:r}=e,{onToggleClassActive:l}=e,{onToggleEquipClass:o}=e,{targetClass:a}=e,{equippedClass:c}=e,u=!1;const f=()=>l(a),h=()=>t(6,u=!u),d=()=>t(6,u=!u),p=()=>o(a);return n.$$set=v=>{"isMastered"in v&&t(0,s=v.isMastered),"isUnlocked"in v&&t(1,r=v.isUnlocked),"onToggleClassActive"in v&&t(2,l=v.onToggleClassActive),"onToggleEquipClass"in v&&t(3,o=v.onToggleEquipClass),"targetClass"in v&&t(4,a=v.targetClass),"equippedClass"in v&&t(5,c=v.equippedClass)},n.$$.update=()=>{n.$$.dirty&16&&t(7,i=Xt[a])},[s,r,l,o,a,c,u,i,f,h,d,p]}class K4 extends nt{constructor(e){super(),it(this,e,rV,sV,Ct,{isMastered:0,isUnlocked:1,onToggleClassActive:2,onToggleEquipClass:3,targetClass:4,equippedClass:5})}}function N2(n,e,t){var l;const i=n.slice();i[19]=e[t];const s=i[0].includes(i[19]);i[20]=s;const r=(l=i[2])==null?void 0:l.has(i[19]);return i[21]=r,i}function P2(n,e,t){var l;const i=n.slice();i[19]=e[t];const s=i[0].includes(i[19]);i[20]=s;const r=(l=i[2])==null?void 0:l.has(i[19]);return i[21]=r,i}function M2(n){let e,t;return e=new K4({props:{isMastered:n[20],isUnlocked:n[21],onToggleClassActive:n[4],onToggleEquipClass:n[3],targetClass:n[19],equippedClass:n[1]}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s&1&&(r.isMastered=i[20]),s&4&&(r.isUnlocked=i[21]),s&2&&(r.equippedClass=i[1]),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function B2(n){let e,t;return e=new K4({props:{isMastered:n[20],isUnlocked:n[21],onToggleClassActive:n[4],onToggleEquipClass:n[3],targetClass:n[19],equippedClass:n[1]}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s&1&&(r.isMastered=i[20]),s&4&&(r.isUnlocked=i[21]),s&2&&(r.equippedClass=i[1]),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function lV(n){let e,t,i,s,r,l,o,a,c,u,f,h,d,p,v;t=new gc({props:{label:"Classes"}});let y=Array.from(td),b=[];for(let k=0;k<y.length;k+=1)b[k]=M2(P2(n,y,k));const S=k=>U(b[k],1,1,()=>{b[k]=null});let I=Array.from(To),T=[];for(let k=0;k<I.length;k+=1)T[k]=B2(N2(n,I,k));const C=k=>U(T[k],1,1,()=>{T[k]=null});return{c(){e=E("div"),ce(t.$$.fragment),i=P(),s=E("div"),r=E("div"),l=L("Beginner"),o=P(),a=E("div");for(let k=0;k<b.length;k+=1)b[k].c();c=P(),u=E("div"),f=E("div"),h=L("Intermediate"),d=P(),p=E("div");for(let k=0;k<T.length;k+=1)T[k].c();this.h()},l(k){e=A(k,"DIV",{class:!0});var R=w(e);ge(t.$$.fragment,R),i=M(R),s=A(R,"DIV",{class:!0});var O=w(s);r=A(O,"DIV",{class:!0});var N=w(r);l=V(N,"Beginner"),N.forEach(g),o=M(O),a=A(O,"DIV",{class:!0});var F=w(a);for(let H=0;H<b.length;H+=1)b[H].l(F);F.forEach(g),O.forEach(g),c=M(R),u=A(R,"DIV",{class:!0});var W=w(u);f=A(W,"DIV",{class:!0});var z=w(f);h=V(z,"Intermediate"),z.forEach(g),d=M(W),p=A(W,"DIV",{class:!0});var Y=w(p);for(let H=0;H<T.length;H+=1)T[H].l(Y);Y.forEach(g),W.forEach(g),R.forEach(g),this.h()},h(){_(r,"class","label"),_(a,"class","classes-container svelte-1viguxz"),_(s,"class","category"),_(f,"class","label"),_(p,"class","classes-container svelte-1viguxz"),_(u,"class","category"),_(e,"class","container svelte-1viguxz")},m(k,R){B(k,e,R),ue(t,e,null),m(e,i),m(e,s),m(s,r),m(r,l),m(s,o),m(s,a);for(let O=0;O<b.length;O+=1)b[O].m(a,null);m(e,c),m(e,u),m(u,f),m(f,h),m(u,d),m(u,p);for(let O=0;O<T.length;O+=1)T[O].m(p,null);v=!0},p(k,[R]){if(R&31){y=Array.from(td);let O;for(O=0;O<y.length;O+=1){const N=P2(k,y,O);b[O]?(b[O].p(N,R),D(b[O],1)):(b[O]=M2(N),b[O].c(),D(b[O],1),b[O].m(a,null))}for(Le(),O=y.length;O<b.length;O+=1)S(O);Ve()}if(R&31){I=Array.from(To);let O;for(O=0;O<I.length;O+=1){const N=N2(k,I,O);T[O]?(T[O].p(N,R),D(T[O],1)):(T[O]=B2(N),T[O].c(),D(T[O],1),T[O].m(p,null))}for(Le(),O=I.length;O<T.length;O+=1)C(O);Ve()}},i(k){if(!v){D(t.$$.fragment,k);for(let R=0;R<y.length;R+=1)D(b[R]);for(let R=0;R<I.length;R+=1)D(T[R]);v=!0}},o(k){U(t.$$.fragment,k),b=b.filter(Boolean);for(let R=0;R<b.length;R+=1)U(b[R]);T=T.filter(Boolean);for(let R=0;R<T.length;R+=1)U(T[R]);v=!1},d(k){k&&g(e),fe(t),Ft(b,k),Ft(T,k)}}}function oV(n,e,t){let i;const{open:s}=Bn(hs.MODAL);let{masteredClasses:r}=e,{equippedClass:l}=e,{setEquippedClass:o}=e,{unlockedClasses:a}=e,{onUpdateUnlockedClasses:c}=e,{customCombatSkills:u}=e,{onUpdateCustomCombatSkills:f}=e,{customCombatArts:h}=e,{onUpdateCustomCombatArts:d}=e,{customWeapons:p}=e,{onUpdateCustomWeapons:v}=e,{playerStats:y}=e,{onUpdatePlayerStats:b}=e,S=new Audio("class-change.webm");const I=k=>{l===k?o(""):i.has(k)&&o(k)},T=(k,R)=>{s(wu,{pickOne:Xt[k].unlocks.pickOne,reason:`Unlocked by obtaining ${Vo[k]} class`,customWeapons:p,customCombatArts:h,customCombatSkills:u,onUpdateCustomCombatArts:d,onUpdateCustomCombatSkills:f,onUpdateCustomWeapons:v,playerStats:y,onUpdatePlayerStats:b,onSubmit:R})},C=k=>{if(i.has(k))l===k&&o(""),c(Array.from(i).filter(R=>R!==k));else{S.currentTime=0,S.play();const R=()=>{var N,F;const O=(F=(N=Xt[k])==null?void 0:N.unlocks)==null?void 0:F.playerStats;if(O){const W=Object.keys(O).reduce((z,Y)=>(O!=null&&O[Y]&&z[Y]<((O==null?void 0:O[Y])||0)&&(z[Y]=O[Y]),z),{...y});b(W)}c([...Array.from(i),k])};Xt[k].unlocks.pickOne?T(k,R):R()}};return n.$$set=k=>{"masteredClasses"in k&&t(0,r=k.masteredClasses),"equippedClass"in k&&t(1,l=k.equippedClass),"setEquippedClass"in k&&t(5,o=k.setEquippedClass),"unlockedClasses"in k&&t(6,a=k.unlockedClasses),"onUpdateUnlockedClasses"in k&&t(7,c=k.onUpdateUnlockedClasses),"customCombatSkills"in k&&t(8,u=k.customCombatSkills),"onUpdateCustomCombatSkills"in k&&t(9,f=k.onUpdateCustomCombatSkills),"customCombatArts"in k&&t(10,h=k.customCombatArts),"onUpdateCustomCombatArts"in k&&t(11,d=k.onUpdateCustomCombatArts),"customWeapons"in k&&t(12,p=k.customWeapons),"onUpdateCustomWeapons"in k&&t(13,v=k.onUpdateCustomWeapons),"playerStats"in k&&t(14,y=k.playerStats),"onUpdatePlayerStats"in k&&t(15,b=k.onUpdatePlayerStats)},n.$$.update=()=>{n.$$.dirty&64&&t(2,i=new Set(a))},S.volume=.05,[r,l,i,I,C,o,a,c,u,f,h,d,p,v,y,b]}class aV extends nt{constructor(e){super(),it(this,e,oV,lV,Ct,{masteredClasses:0,equippedClass:1,setEquippedClass:5,unlockedClasses:6,onUpdateUnlockedClasses:7,customCombatSkills:8,onUpdateCustomCombatSkills:9,customCombatArts:10,onUpdateCustomCombatArts:11,customWeapons:12,onUpdateCustomWeapons:13,playerStats:14,onUpdatePlayerStats:15})}}function Is(n,e=!!uV("debug")){if(e){const t=fV(n);return function(...s){console.log(`%c${n}`,`color:${t}`,...s)}}else return cV}function cV(){}function uV(n){try{if(typeof window<"u"&&typeof window.localStorage<"u")return window.localStorage[n]}catch{}}function fV(n){let e=0;for(let t=0;t<n.length;t++)e=(e<<5)-e+n.charCodeAt(t),e|=0;return L2[Math.abs(e)%L2.length]}const L2=["#0000CC","#0099FF","#009400","#8dd200","#CCCC00","#CC9933","#ae04e7","#ff35d7","#FF3333","#FF6600","#FF9933","#FFCC33"];function Q4(n,{delay:e=0,duration:t=400,easing:i=N5}={}){const s=+getComputedStyle(n).opacity;return{delay:e,duration:t,easing:i,css:r=>`opacity: ${r*s}`}}const{window:hV}=Yu;function V2(n){let e,t,i,s,r,l,o,a,c,u,f,h,d,p,v,y,b,S,I=n[1].closeButton&&U2(n);var T=n[2];function C(k){return{}}return T&&(l=An(T,C())),{c(){e=E("div"),t=E("div"),i=E("div"),I&&I.c(),s=P(),r=E("div"),l&&ce(l.$$.fragment),this.h()},l(k){e=A(k,"DIV",{id:!0,class:!0,style:!0});var R=w(e);t=A(R,"DIV",{class:!0,style:!0});var O=w(t);i=A(O,"DIV",{class:!0,role:!0,"aria-modal":!0,"aria-label":!0,"aria-labelledby":!0,style:!0});var N=w(i);I&&I.l(N),s=M(N),r=A(N,"DIV",{class:!0,style:!0});var F=w(r);l&&ge(l.$$.fragment,F),F.forEach(g),N.forEach(g),O.forEach(g),R.forEach(g),this.h()},h(){_(r,"class",o=Ze(n[1].classContent)+" svelte-n7cvum"),_(r,"style",n[9]),xe(r,"content",!n[0]),_(i,"class",a=Ze(n[1].classWindow)+" svelte-n7cvum"),_(i,"role","dialog"),_(i,"aria-modal","true"),_(i,"aria-label",c=n[1].ariaLabelledBy?null:n[1].ariaLabel||null),_(i,"aria-labelledby",u=n[1].ariaLabelledBy||null),_(i,"style",n[8]),xe(i,"window",!n[0]),_(t,"class",h=Ze(n[1].classWindowWrap)+" svelte-n7cvum"),_(t,"style",n[7]),xe(t,"wrap",!n[0]),_(e,"id",d=n[1].id),_(e,"class",p=Ze(n[1].classBg)+" svelte-n7cvum"),_(e,"style",n[6]),xe(e,"bg",!n[0])},m(k,R){B(k,e,R),m(e,t),m(t,i),I&&I.m(i,null),m(i,s),m(i,r),l&&ue(l,r,null),n[50](i),n[51](t),n[52](e),y=!0,b||(S=[se(i,"introstart",function(){Mn(n[13])&&n[13].apply(this,arguments)}),se(i,"outrostart",function(){Mn(n[14])&&n[14].apply(this,arguments)}),se(i,"introend",function(){Mn(n[15])&&n[15].apply(this,arguments)}),se(i,"outroend",function(){Mn(n[16])&&n[16].apply(this,arguments)}),se(e,"mousedown",n[20]),se(e,"mouseup",n[21])],b=!0)},p(k,R){if(n=k,n[1].closeButton?I?(I.p(n,R),R[0]&2&&D(I,1)):(I=U2(n),I.c(),D(I,1),I.m(i,s)):I&&(Le(),U(I,1,1,()=>{I=null}),Ve()),T!==(T=n[2])){if(l){Le();const O=l;U(O.$$.fragment,1,0,()=>{fe(O,1)}),Ve()}T?(l=An(T,C()),ce(l.$$.fragment),D(l.$$.fragment,1),ue(l,r,null)):l=null}(!y||R[0]&2&&o!==(o=Ze(n[1].classContent)+" svelte-n7cvum"))&&_(r,"class",o),(!y||R[0]&512)&&_(r,"style",n[9]),(!y||R[0]&3)&&xe(r,"content",!n[0]),(!y||R[0]&2&&a!==(a=Ze(n[1].classWindow)+" svelte-n7cvum"))&&_(i,"class",a),(!y||R[0]&2&&c!==(c=n[1].ariaLabelledBy?null:n[1].ariaLabel||null))&&_(i,"aria-label",c),(!y||R[0]&2&&u!==(u=n[1].ariaLabelledBy||null))&&_(i,"aria-labelledby",u),(!y||R[0]&256)&&_(i,"style",n[8]),(!y||R[0]&3)&&xe(i,"window",!n[0]),(!y||R[0]&2&&h!==(h=Ze(n[1].classWindowWrap)+" svelte-n7cvum"))&&_(t,"class",h),(!y||R[0]&128)&&_(t,"style",n[7]),(!y||R[0]&3)&&xe(t,"wrap",!n[0]),(!y||R[0]&2&&d!==(d=n[1].id))&&_(e,"id",d),(!y||R[0]&2&&p!==(p=Ze(n[1].classBg)+" svelte-n7cvum"))&&_(e,"class",p),(!y||R[0]&64)&&_(e,"style",n[6]),(!y||R[0]&3)&&xe(e,"bg",!n[0])},i(k){y||(D(I),l&&D(l.$$.fragment,k),cu(()=>{f||(f=Il(i,n[12],n[1].transitionWindowProps,!0)),f.run(1)}),cu(()=>{v||(v=Il(e,n[11],n[1].transitionBgProps,!0)),v.run(1)}),y=!0)},o(k){U(I),l&&U(l.$$.fragment,k),f||(f=Il(i,n[12],n[1].transitionWindowProps,!1)),f.run(0),v||(v=Il(e,n[11],n[1].transitionBgProps,!1)),v.run(0),y=!1},d(k){k&&g(e),I&&I.d(),l&&fe(l),n[50](null),k&&f&&f.end(),n[51](null),n[52](null),k&&v&&v.end(),b=!1,on(S)}}}function U2(n){let e,t,i,s,r;const l=[mV,dV],o=[];function a(c,u){return u[0]&2&&(e=null),e==null&&(e=!!c[17](c[1].closeButton)),e?0:1}return t=a(n,[-1,-1,-1]),i=o[t]=l[t](n),{c(){i.c(),s=et()},l(c){i.l(c),s=et()},m(c,u){o[t].m(c,u),B(c,s,u),r=!0},p(c,u){let f=t;t=a(c,u),t===f?o[t].p(c,u):(Le(),U(o[f],1,1,()=>{o[f]=null}),Ve(),i=o[t],i?i.p(c,u):(i=o[t]=l[t](c),i.c()),D(i,1),i.m(s.parentNode,s))},i(c){r||(D(i),r=!0)},o(c){U(i),r=!1},d(c){o[t].d(c),c&&g(s)}}}function dV(n){let e,t,i,s;return{c(){e=E("button"),this.h()},l(r){e=A(r,"BUTTON",{class:!0,"aria-label":!0,style:!0,type:!0}),w(e).forEach(g),this.h()},h(){_(e,"class",t=Ze(n[1].classCloseButton)+" svelte-n7cvum"),_(e,"aria-label","Close modal"),_(e,"style",n[10]),_(e,"type","button"),xe(e,"close",!n[0])},m(r,l){B(r,e,l),i||(s=se(e,"click",n[18]),i=!0)},p(r,l){l[0]&2&&t!==(t=Ze(r[1].classCloseButton)+" svelte-n7cvum")&&_(e,"class",t),l[0]&1024&&_(e,"style",r[10]),l[0]&3&&xe(e,"close",!r[0])},i:Ke,o:Ke,d(r){r&&g(e),i=!1,s()}}}function mV(n){let e,t,i;var s=n[1].closeButton;function r(l){return{props:{onClose:l[18]}}}return s&&(e=An(s,r(n))),{c(){e&&ce(e.$$.fragment),t=et()},l(l){e&&ge(e.$$.fragment,l),t=et()},m(l,o){e&&ue(e,l,o),B(l,t,o),i=!0},p(l,o){if(s!==(s=l[1].closeButton)){if(e){Le();const a=e;U(a.$$.fragment,1,0,()=>{fe(a,1)}),Ve()}s?(e=An(s,r(l)),ce(e.$$.fragment),D(e.$$.fragment,1),ue(e,t.parentNode,t)):e=null}},i(l){i||(e&&D(e.$$.fragment,l),i=!0)},o(l){e&&U(e.$$.fragment,l),i=!1},d(l){l&&g(t),e&&fe(e,l)}}}function pV(n){let e,t,i,s,r=n[2]&&V2(n);const l=n[49].default,o=os(l,n,n[48],null);return{c(){r&&r.c(),e=P(),o&&o.c()},l(a){r&&r.l(a),e=M(a),o&&o.l(a)},m(a,c){r&&r.m(a,c),B(a,e,c),o&&o.m(a,c),t=!0,i||(s=se(hV,"keydown",n[19]),i=!0)},p(a,c){a[2]?r?(r.p(a,c),c[0]&4&&D(r,1)):(r=V2(a),r.c(),D(r,1),r.m(e.parentNode,e)):r&&(Le(),U(r,1,1,()=>{r=null}),Ve()),o&&o.p&&(!t||c[1]&131072)&&as(o,l,a,a[48],t?us(l,a[48],c,null):cs(a[48]),null)},i(a){t||(D(r),D(o,a),t=!0)},o(a){U(r),U(o,a),t=!1},d(a){r&&r.d(a),a&&g(e),o&&o.d(a),i=!1,s()}}}function gV(n,e={}){return function(i){return new n({...i,props:{...e,...i.props}})}}function vV(n,e,t){let{$$slots:i={},$$scope:s}=e;const r=Xu(),l=Jd,o=ye=>ye.tabIndex>=0&&!ye.hidden&&!ye.disabled&&ye.style.display!=="none"&&ye.type!=="hidden"&&Boolean(ye.offsetWidth||ye.offsetHeight||ye.getClientRects().length);let{isTabbable:a=o}=e,{show:c=null}=e,{id:u=null}=e,{key:f="simple-modal"}=e,{ariaLabel:h=null}=e,{ariaLabelledBy:d=null}=e,{closeButton:p=!0}=e,{closeOnEsc:v=!0}=e,{closeOnOuterClick:y=!0}=e,{styleBg:b={}}=e,{styleWindowWrap:S={}}=e,{styleWindow:I={}}=e,{styleContent:T={}}=e,{styleCloseButton:C={}}=e,{classBg:k=null}=e,{classWindowWrap:R=null}=e,{classWindow:O=null}=e,{classContent:N=null}=e,{classCloseButton:F=null}=e,{unstyled:W=!1}=e,{setContext:z=l}=e,{transitionBg:Y=Q4}=e,{transitionBgProps:H={duration:250}}=e,{transitionWindow:K=Y}=e,{transitionWindowProps:j=H}=e,{disableFocusTrap:J=!1}=e;const Z={id:u,ariaLabel:h,ariaLabelledBy:d,closeButton:p,closeOnEsc:v,closeOnOuterClick:y,styleBg:b,styleWindowWrap:S,styleWindow:I,styleContent:T,styleCloseButton:C,classBg:k,classWindowWrap:R,classWindow:O,classContent:N,classCloseButton:F,transitionBg:Y,transitionBgProps:H,transitionWindow:K,transitionWindowProps:j,disableFocusTrap:J,isTabbable:a,unstyled:W};let q={...Z},X=null,ne,Q,re,be,le,he,Ie,G,ve,je,$,Oe,ie,_e,Ee;const He=ye=>ye.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase(),We=ye=>ye?Object.keys(ye).reduce((ut,Bt)=>`${ut}; ${He(Bt)}: ${ye[Bt]}`,""):"",Qe=ye=>!!(ye&&ye.constructor&&ye.call&&ye.apply),we=()=>{t(6,le=We(Object.assign({},{width:window.innerWidth,height:window.innerHeight},q.styleBg))),t(7,he=We(q.styleWindowWrap)),t(8,Ie=We(q.styleWindow)),t(9,G=We(q.styleContent)),t(10,ve=We(q.styleCloseButton)),t(11,je=q.transitionBg),t(12,$=q.transitionWindow)},Me=()=>{};let de=Me,Ae=Me,Re=Me,Ne=Me;const Ge=(ye,ut={},Bt={},gt={})=>{t(2,X=gV(ye,ut)),t(1,q={...Z,...Bt}),we(),oe(),t(13,de=Ot=>{gt.onOpen&&gt.onOpen(Ot),r("open"),r("opening")}),t(14,Ae=Ot=>{gt.onClose&&gt.onClose(Ot),r("close"),r("closing")}),t(15,Re=Ot=>{gt.onOpened&&gt.onOpened(Ot),r("opened")}),t(16,Ne=Ot=>{gt.onClosed&&gt.onClosed(Ot),r("closed")})},pe=(ye={})=>{X&&(t(14,Ae=ye.onClose||Ae),t(16,Ne=ye.onClosed||Ne),t(2,X=null),at())},Fe=ye=>{if(q.closeOnEsc&&X&&ye.key==="Escape"&&(ye.preventDefault(),pe()),X&&ye.key==="Tab"&&!q.disableFocusTrap){const ut=re.querySelectorAll("*"),Bt=Array.from(ut).filter(q.isTabbable).sort((Ot,en)=>Ot.tabIndex-en.tabIndex);let gt=Bt.indexOf(document.activeElement);gt===-1&&ye.shiftKey&&(gt=0),gt+=Bt.length+(ye.shiftKey?-1:1),gt%=Bt.length,Bt[gt].focus(),ye.preventDefault()}},ae=ye=>{q.closeOnOuterClick&&(ye.target===ne||ye.target===Q)&&(Ee=ye.target)},ke=ye=>{q.closeOnOuterClick&&ye.target===Ee&&(ye.preventDefault(),pe())},oe=()=>{be=window.scrollY,Oe=document.body.style.position,ie=document.body.style.overflow,_e=document.body.style.width,document.body.style.position="fixed",document.body.style.top=`-${be}px`,document.body.style.overflow="hidden",document.body.style.width="100%"},at=()=>{document.body.style.position=Oe||"",document.body.style.top="",document.body.style.overflow=ie||"",document.body.style.width=_e||"",window.scrollTo({top:be,left:0,behavior:"instant"})};z(f,{open:Ge,close:pe});let me=!1;br(()=>{me&&pe()}),Mi(()=>{t(47,me=!0)});function ot(ye){Vt[ye?"unshift":"push"](()=>{re=ye,t(5,re)})}function Se(ye){Vt[ye?"unshift":"push"](()=>{Q=ye,t(4,Q)})}function ze(ye){Vt[ye?"unshift":"push"](()=>{ne=ye,t(3,ne)})}return n.$$set=ye=>{"isTabbable"in ye&&t(22,a=ye.isTabbable),"show"in ye&&t(23,c=ye.show),"id"in ye&&t(24,u=ye.id),"key"in ye&&t(25,f=ye.key),"ariaLabel"in ye&&t(26,h=ye.ariaLabel),"ariaLabelledBy"in ye&&t(27,d=ye.ariaLabelledBy),"closeButton"in ye&&t(28,p=ye.closeButton),"closeOnEsc"in ye&&t(29,v=ye.closeOnEsc),"closeOnOuterClick"in ye&&t(30,y=ye.closeOnOuterClick),"styleBg"in ye&&t(31,b=ye.styleBg),"styleWindowWrap"in ye&&t(32,S=ye.styleWindowWrap),"styleWindow"in ye&&t(33,I=ye.styleWindow),"styleContent"in ye&&t(34,T=ye.styleContent),"styleCloseButton"in ye&&t(35,C=ye.styleCloseButton),"classBg"in ye&&t(36,k=ye.classBg),"classWindowWrap"in ye&&t(37,R=ye.classWindowWrap),"classWindow"in ye&&t(38,O=ye.classWindow),"classContent"in ye&&t(39,N=ye.classContent),"classCloseButton"in ye&&t(40,F=ye.classCloseButton),"unstyled"in ye&&t(0,W=ye.unstyled),"setContext"in ye&&t(41,z=ye.setContext),"transitionBg"in ye&&t(42,Y=ye.transitionBg),"transitionBgProps"in ye&&t(43,H=ye.transitionBgProps),"transitionWindow"in ye&&t(44,K=ye.transitionWindow),"transitionWindowProps"in ye&&t(45,j=ye.transitionWindowProps),"disableFocusTrap"in ye&&t(46,J=ye.disableFocusTrap),"$$scope"in ye&&t(48,s=ye.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&8388608|n.$$.dirty[1]&65536&&me&&(Qe(c)?Ge(c):pe())},[W,q,X,ne,Q,re,le,he,Ie,G,ve,je,$,de,Ae,Re,Ne,Qe,pe,Fe,ae,ke,a,c,u,f,h,d,p,v,y,b,S,I,T,C,k,R,O,N,F,z,Y,H,K,j,J,me,s,i,ot,Se,ze]}let bV=class extends nt{constructor(e){super(),it(this,e,vV,pV,Ct,{isTabbable:22,show:23,id:24,key:25,ariaLabel:26,ariaLabelledBy:27,closeButton:28,closeOnEsc:29,closeOnOuterClick:30,styleBg:31,styleWindowWrap:32,styleWindow:33,styleContent:34,styleCloseButton:35,classBg:36,classWindowWrap:37,classWindow:38,classContent:39,classCloseButton:40,unstyled:0,setContext:41,transitionBg:42,transitionBgProps:43,transitionWindow:44,transitionWindowProps:45,disableFocusTrap:46},null,[-1,-1,-1])}};const _V=300,X4=300,W2=300,yV=300,F2=50,SV=200,EV=400,AV=1200,e1=1e3,Cu=100,j2=2e4,Fo=[{start:0,end:Cu}],wV=100*1024*1024,CV=1024*1024,t1=10*1024*1024,H2=10*1024,id={closeButton:!1,classBg:"jse-modal-bg",classWindow:"jse-modal-window",classWindowWrap:"jse-modal-window-wrap",classContent:"jse-modal-content"},kV={...id,classWindow:"jse-modal-window jse-modal-window-sort"},TV={...id,classWindow:"jse-modal-window jse-modal-window-transform"},Av="Insert or paste contents, enter [ insert a new array, enter { to insert a new object, or start typing to insert a new value",Y4="Open context menu (Click here, right click on the selection, or use the context menu button or Ctrl+Q)",pl="hover-insert-inside",ku="hover-insert-after",n1="hover-collection",Ep="valid",q2="repairable",IV="invalid",jc=(40+2)*8,Hc=260,Io={NO:"NO",SELF:"SELF",NEXT_INSIDE:"NEXT_INSIDE"};let z2=0;function tu(){return z2++,z2}function Gl(n){return Gl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gl(n)}function hi(n){return Array.isArray(n)}function Li(n){return n!==null&&Gl(n)==="object"&&n.constructor===Object}function J4(n){return n&&Gl(n)==="object"?n.op==="add":!1}function Z4(n){return n&&Gl(n)==="object"?n.op==="remove":!1}function x4(n){return n&&Gl(n)==="object"?n.op==="replace":!1}function i1(n){return n&&Gl(n)==="object"?n.op==="copy":!1}function za(n){return n&&Gl(n)==="object"?n.op==="move":!1}function s1(n){return s1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s1(n)}function OV(n,e){return JSON.stringify(n)===JSON.stringify(e)}function RV(n,e){return n===e}function $4(n){return n.slice(0,n.length-1)}function DV(n){return n[n.length-1]}function NV(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:RV;if(n.length<e.length)return!1;for(var i=0;i<e.length;i++)if(!t(n[i],e[i]))return!1;return!0}function eO(n){return s1(n)==="object"&&n!==null}function Tu(n){return Tu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tu(n)}function G2(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,i)}return t}function PV(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?G2(Object(t),!0).forEach(function(i){MV(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):G2(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function MV(n,e,t){return e=BV(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function BV(n){var e=LV(n,"string");return Tu(e)==="symbol"?e:String(e)}function LV(n,e){if(Tu(n)!=="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(Tu(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function wv(n){if(hi(n)){var e=n.slice();return Object.getOwnPropertySymbols(n).forEach(function(i){e[i]=n[i]}),e}else if(Li(n)){var t=PV({},n);return Object.getOwnPropertySymbols(n).forEach(function(i){t[i]=n[i]}),t}else return n}function Cv(n,e,t){if(n[e]===t)return n;var i=wv(n);return i[e]=t,i}function At(n,e){for(var t=n,i=0;i<e.length;)Li(t)?t=t[e[i]]:hi(t)?t=t[parseInt(e[i])]:t=void 0,i++;return t}function hr(n,e,t){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e.length===0)return t;var s=e[0],r=hr(n?n[s]:void 0,e.slice(1),t,i);if(Li(n)||hi(n))return Cv(n,s,r);if(i){var l=VV.test(s)?[]:{};return l[s]=r,l}else throw new Error("Path does not exist")}var VV=/^\d+$/;function tO(n,e,t){if(e.length===0)return t(n);if(!eO(n))throw new Error("Path doesn't exist");var i=e[0],s=tO(n[i],e.slice(1),t);return Cv(n,i,s)}function kv(n,e){if(e.length===0)return n;if(!eO(n))throw new Error("Path does not exist");if(e.length===1){var t=e[0];if(t in n){var i=wv(n);return hi(i)&&i.splice(parseInt(t),1),Li(i)&&delete i[t],i}else return n}var s=e[0],r=kv(n[s],e.slice(1));return Cv(n,s,r)}function Tv(n,e,t){var i=e.slice(0,e.length-1),s=e[e.length-1];return tO(n,i,function(r){if(!Array.isArray(r))throw new TypeError("Array expected at path "+JSON.stringify(i));var l=wv(r);return l.splice(parseInt(s),0,t),l})}function Kl(n,e){return n===void 0?!1:e.length===0?!0:n===null?!1:Kl(n[e[0]],e.slice(1))}function Ql(n){var e=n.split("/");return e.shift(),e.map(function(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")})}function ht(n){return n.map(nO).join("")}function nO(n){return"/"+String(n).replace(/~/g,"~0").replace(/\//g,"~1")}function r1(n,e){return n+nO(e)}function Ga(n,e){return n.startsWith(e)&&(n.length===e.length||n[e.length]==="/")}function Oo(n,e,t){for(var i=n,s=0;s<e.length;s++){GV(e[s]);var r=e[s];if(t&&t.before){var l=t.before(i,r);if(l!==void 0){if(l.document!==void 0&&(i=l.document),l.json!==void 0)throw new Error('Deprecation warning: returned object property ".json" has been renamed to ".document"');l.operation!==void 0&&(r=l.operation)}}var o=i,a=Fr(i,r.path);if(r.op==="add")i=FV(i,a,r.value);else if(r.op==="remove")i=WV(i,a);else if(r.op==="replace")i=UV(i,a,r.value);else if(r.op==="copy")i=jV(i,a,l1(r.from));else if(r.op==="move")i=HV(i,a,l1(r.from));else if(r.op==="test")qV(i,a,r.value);else throw new Error("Unknown JSONPatch operation "+JSON.stringify(r));if(t&&t.after){var c=t.after(i,r,o);c!==void 0&&(i=c)}}return i}function UV(n,e,t){return hr(n,e,t)}function WV(n,e){return kv(n,e)}function FV(n,e,t){return mf(n,e)?Tv(n,e,t):hr(n,e,t)}function jV(n,e,t){var i=At(n,t);if(mf(n,e))return Tv(n,e,i);var s=At(n,t);return hr(n,e,s)}function HV(n,e,t){var i=At(n,t),s=kv(n,t);return mf(s,e)?Tv(s,e,i):hr(s,e,i)}function qV(n,e,t){if(t===void 0)throw new Error('Test failed: no value provided (path: "'.concat(ht(e),'")'));if(!Kl(n,e))throw new Error('Test failed: path not found (path: "'.concat(ht(e),'")'));var i=At(n,e);if(!OV(i,t))throw new Error('Test failed, value differs (path: "'.concat(ht(e),'")'))}function mf(n,e){if(e.length===0)return!1;var t=At(n,$4(e));return Array.isArray(t)}function zV(n,e){if(DV(e)!=="-")return e;var t=$4(e),i=At(n,t);return t.concat(i.length)}function GV(n){var e=["add","remove","replace","copy","move","test"];if(!e.includes(n.op))throw new Error("Unknown JSONPatch op "+JSON.stringify(n.op));if(typeof n.path!="string")throw new Error('Required property "path" missing or not a string in operation '+JSON.stringify(n));if((n.op==="copy"||n.op==="move")&&typeof n.from!="string")throw new Error('Required property "from" missing or not a string in operation '+JSON.stringify(n))}function Fr(n,e){return zV(n,Ql(e))}function l1(n){return Ql(n)}function KV(n){return JV(n)||YV(n)||XV(n)||QV()}function QV(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XV(n,e){if(n){if(typeof n=="string")return o1(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return o1(n,e)}}function YV(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function JV(n){if(Array.isArray(n))return o1(n)}function o1(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function iO(n,e,t){var i=[];return Oo(n,e,{before:function(r,l){var o,a=Fr(r,l.path);if(l.op==="add")o=lO(r,a);else if(l.op==="remove")o=rO(r,a);else if(l.op==="replace")o=sO(r,a);else if(l.op==="copy")o=ZV(r,a);else if(l.op==="move")o=xV(r,a,l1(l.from));else if(l.op==="test")o=[];else throw new Error("Unknown JSONPatch operation "+JSON.stringify(l));var c;if(t&&t.before){var u=t.before(r,l,o);if(u&&u.revertOperations&&(o=u.revertOperations),u&&u.document&&(c=u.document),u&&u.json)throw new Error('Deprecation warning: returned object property ".json" has been renamed to ".document"')}if(i=o.concat(i),c!==void 0)return{document:c}}}),i}function sO(n,e){return[{op:"replace",path:ht(e),value:At(n,e)}]}function rO(n,e){return[{op:"add",path:ht(e),value:At(n,e)}]}function lO(n,e){return mf(n,e)||!Kl(n,e)?[{op:"remove",path:ht(e)}]:sO(n,e)}function ZV(n,e){return lO(n,e)}function xV(n,e,t){if(e.length<t.length&&NV(t,e))return[{op:"replace",path:ht(e),value:n}];var i={op:"move",from:ht(e),path:ht(t)};return!mf(n,e)&&Kl(n,e)?[i].concat(KV(rO(n,e))):[i]}var Tm={},K2={b:"\b",f:"\f",n:`
`,r:"\r",t:"	",'"':'"',"/":"/","\\":"\\"},$V="a".charCodeAt();Tm.parse=function(n,e,t){var i={},s=0,r=0,l=0,o=t&&t.bigint&&typeof BigInt<"u";return{data:a("",!0),pointers:i};function a(N,F){c();var W;I(N,"value");var z=v();switch(z){case"t":p("rue"),W=!0;break;case"f":p("alse"),W=!1;break;case"n":p("ull"),W=null;break;case'"':W=u();break;case"[":W=h(N);break;case"{":W=d(N);break;default:y(),"-0123456789".indexOf(z)>=0?W=f():k()}return I(N,"valueEnd"),c(),F&&l<n.length&&k(),W}function c(){e:for(;l<n.length;){switch(n[l]){case" ":r++;break;case"	":r+=4;break;case"\r":r=0;break;case`
`:r=0,s++;break;default:break e}l++}}function u(){for(var N="",F;F=v(),F!='"';)F=="\\"?(F=v(),F in K2?N+=K2[F]:F=="u"?N+=b():R()):N+=F;return N}function f(){var N="",F=!0;n[l]=="-"&&(N+=v()),N+=n[l]=="0"?v():S(),n[l]=="."&&(N+=v()+S(),F=!1),(n[l]=="e"||n[l]=="E")&&(N+=v(),(n[l]=="+"||n[l]=="-")&&(N+=v()),N+=S(),F=!1);var W=+N;return o&&F&&(W>Number.MAX_SAFE_INTEGER||W<Number.MIN_SAFE_INTEGER)?BigInt(N):W}function h(N){c();var F=[],W=0;if(v()=="]")return F;for(y();;){var z=N+"/"+W;F.push(a(z)),c();var Y=v();if(Y=="]")break;Y!=","&&R(),c(),W++}return F}function d(N){c();var F={};if(v()=="}")return F;for(y();;){var W=C();v()!='"'&&R();var z=u(),Y=N+"/"+a1(z);T(Y,"key",W),I(Y,"keyEnd"),c(),v()!=":"&&R(),c(),F[z]=a(Y),c();var H=v();if(H=="}")break;H!=","&&R(),c()}return F}function p(N){for(var F=0;F<N.length;F++)v()!==N[F]&&R()}function v(){O();var N=n[l];return l++,r++,N}function y(){l--,r--}function b(){for(var N=4,F=0;N--;){F<<=4;var W=v().toLowerCase();W>="a"&&W<="f"?F+=W.charCodeAt()-$V+10:W>="0"&&W<="9"?F+=+W:R()}return String.fromCharCode(F)}function S(){for(var N="";n[l]>="0"&&n[l]<="9";)N+=v();if(N.length)return N;O(),k()}function I(N,F){T(N,F,C())}function T(N,F,W){i[N]=i[N]||{},i[N][F]=W}function C(){return{line:s,column:r,pos:l}}function k(){throw new SyntaxError("Unexpected token "+n[l]+" in JSON at position "+l)}function R(){y(),k()}function O(){if(l>=n.length)throw new SyntaxError("Unexpected end of JSON input")}};Tm.stringify=function(n,e,t){if(!Lf(n))return;var i=0,s,r,l=typeof t=="object"?t.space:t;switch(typeof l){case"number":var o=l>10?10:l<0?0:Math.floor(l);l=o&&T(o," "),s=o,r=o;break;case"string":l=l.slice(0,10),s=0,r=0;for(var a=0;a<l.length;a++){var c=l[a];switch(c){case" ":r++;break;case"	":r+=4;break;case"\r":r=0;break;case`
`:r=0,i++;break;default:throw new Error("whitespace characters not allowed in JSON")}s++}break;default:l=void 0}var u="",f={},h=0,d=0,p=0,v=t&&t.es6&&typeof Map=="function";return y(n,0,""),{json:u,pointers:f};function y(C,k,R){switch(I(R,"value"),typeof C){case"number":case"bigint":case"boolean":b(""+C);break;case"string":b(Vf(C));break;case"object":C===null?b("null"):typeof C.toJSON=="function"?b(Vf(C.toJSON())):Array.isArray(C)?O():v?C.constructor.BYTES_PER_ELEMENT?O():C instanceof Map?F():C instanceof Set?F(!0):N():N()}I(R,"valueEnd");function O(){if(C.length){b("[");for(var W=k+1,z=0;z<C.length;z++){z&&b(","),S(W);var Y=Lf(C[z])?C[z]:null,H=R+"/"+z;y(Y,W,H)}S(k),b("]")}else b("[]")}function N(){var W=Object.keys(C);if(W.length){b("{");for(var z=k+1,Y=0;Y<W.length;Y++){var H=W[Y],K=C[H];if(Lf(K)){Y&&b(",");var j=R+"/"+a1(H);S(z),I(j,"key"),b(Vf(H)),I(j,"keyEnd"),b(":"),l&&b(" "),y(K,z,j)}}S(k),b("}")}else b("{}")}function F(W){if(C.size){b("{");for(var z=k+1,Y=!0,H=C.entries(),K=H.next();!K.done;){var j=K.value,J=j[0],Z=W?!0:j[1];if(Lf(Z)){Y||b(","),Y=!1;var q=R+"/"+a1(J);S(z),I(q,"key"),b(Vf(J)),I(q,"keyEnd"),b(":"),l&&b(" "),y(Z,z,q)}K=H.next()}S(k),b("}")}else b("{}")}}function b(C){d+=C.length,p+=C.length,u+=C}function S(C){if(l){for(u+=`
`+T(C,l),h++,d=0;C--;)i?(h+=i,d=r):d+=r,p+=s;p+=1}}function I(C,k){f[C]=f[C]||{},f[C][k]={line:h,column:d,pos:p}}function T(C,k){return Array(C+1).join(k)}};var eU=["number","bigint","boolean","string","object"];function Lf(n){return eU.indexOf(typeof n)>=0}var tU=/"|\\/g,nU=/[\b]/g,iU=/\f/g,sU=/\n/g,rU=/\r/g,lU=/\t/g;function Vf(n){return n=n.replace(tU,"\\$&").replace(iU,"\\f").replace(nU,"\\b").replace(sU,"\\n").replace(rU,"\\r").replace(lU,"\\t"),'"'+n+'"'}var oU=/~/g,aU=/\//g;function a1(n){return n.replace(oU,"~0").replace(aU,"~1")}function Cs(n,e){if(!(this instanceof Cs))throw new SyntaxError("Constructor must be called with the new operator");this.message=n+" (char "+e+")",this.char=e,this.stack=new Error().stack}Cs.prototype=new Error;Cs.prototype.constructor=Error;var Iv={"'":!0,"":!0,"":!0,"`":!0,"":!0},Ov={'"':!0,"":!0,"":!0};function Q2(n){return cU.test(n)}var cU=/^[a-zA-Z_]$/;function uU(n){return fU.test(n)}var fU=/^[0-9a-fA-F]$/;function wl(n){return hU.test(n)}var hU=/^[0-9]$/;function sd(n){return n===" "||n==="	"||n===`
`||n==="\r"}function c1(n){return n===""||n>=""&&n<=""||n===""||n===""||n===""}function dU(n){for(var e="",t=0;t<n.length;t++){var i=n[t];e+=c1(i)?" ":i}return e}function mU(n){return Iv[n]===!0||Ov[n]===!0}function X2(n){return Iv[n]===!0}function pU(n){return Ov[n]===!0}function Y2(n){return Iv[n]===!0?"'":Ov[n]===!0?'"':n}function rd(n,e){var t=n.lastIndexOf(e);return t!==-1?n.substring(0,t)+n.substring(t+1):n}function ka(n,e){var t=n.length;if(!sd(n[t-1]))return n+e;for(;sd(n[t-1]);)t--;return n.substring(0,t)+e+n.substring(t)}function gU(n,e,t){return n.substring(0,t)+e+n.substring(t)}var Ki=0,vc=1,jo=2,Ka=3,oO=4,u1=5,Qa=6,vU={"":!0,"{":!0,"}":!0,"[":!0,"]":!0,":":!0,",":!0,"(":!0,")":!0,";":!0,"+":!0},bU={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},J2={"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},_U={null:"null",true:"true",false:"false"},Z2={None:"null",True:"true",False:"false"},Ol="",bn="",Ei=0,bt="",mt="",Ut=Qa;function Ul(n){Ol=n,bn="",Ei=0,bt=Ol.charAt(0),mt="",Ut=Qa,Jn();var e=Ut;if(Iu(),x2(),mt==="")return bn;if(e===Ut&&ld()){for(var t="";e===Ut&&ld();)bn=ka(bn,","),t+=bn,bn="",Iu(),x2();return`[
`.concat(t).concat(bn,`
]`)}throw new Cs("Unexpected characters",Ei-mt.length)}function yi(){Ei++,bt=Ol.charAt(Ei)}function yU(){yi(),bt==="\\"&&yi()}function ld(){return Ut===Ki&&(mt==="["||mt==="{")||Ut===jo||Ut===vc||Ut===Ka}function SU(){return Ut===jo||Ut===vc||Ut===Ka}function Jn(){bn+=mt,Ut=Qa,mt="",EU(),Ut===oO&&(mt=dU(mt),Jn()),Ut===u1&&(Ut=Qa,mt="",Jn())}function x2(){mt===","&&(mt="",Ut=Qa,Jn())}function EU(){if(vU[bt]){Ut=Ki,mt=bt,yi();return}AU()}function AU(){if(wl(bt)||bt==="-"){if(Ut=vc,bt==="-"){if(mt+=bt,yi(),!wl(bt))throw new Cs("Invalid number, digit expected",Ei)}else bt==="0"&&(mt+=bt,yi());for(;wl(bt);)mt+=bt,yi();if(bt==="."){if(mt+=bt,yi(),!wl(bt))throw new Cs("Invalid number, digit expected",Ei);for(;wl(bt);)mt+=bt,yi()}if(bt==="e"||bt==="E"){if(mt+=bt,yi(),(bt==="+"||bt==="-")&&(mt+=bt,yi()),!wl(bt))throw new Cs("Invalid number, digit expected",Ei);for(;wl(bt);)mt+=bt,yi()}return}wU()}function wU(){bt==="\\"&&Ol.charAt(Ei+1)==='"'?(yi(),$2(yU)):$2(yi)}function $2(n){if(mU(bt)){var e=Y2(bt),t=X2(bt)?X2:pU;for(mt+='"',Ut=jo,n();bt!==""&&!t(bt);)if(bt==="\\"){n();var i=bU[bt];if(i!==void 0)mt+="\\"+bt,n();else if(bt==="u"){mt+="\\u",n();for(var s=0;s<4;s++){if(!uU(bt))throw new Cs("Invalid unicode character",Ei-mt.length);mt+=bt,n()}}else if(bt==="'")mt+="'",n();else throw new Cs('Invalid escape character "\\'+bt+'"',Ei)}else J2[bt]?(mt+=J2[bt],n()):bt==='"'?(mt+='\\"',n()):(mt+=bt,n());if(Y2(bt)!==e)throw new Cs("End of string expected",Ei-mt.length);mt+='"',n();return}CU()}function CU(){if(Q2(bt)){for(Ut=Ka;Q2(bt)||wl(bt)||bt==="$";)mt+=bt,yi();return}kU()}function kU(){if(sd(bt)||c1(bt)){for(Ut=oO;sd(bt)||c1(bt);)mt+=bt,yi();return}TU()}function TU(){if(bt==="/"&&Ol[Ei+1]==="*"){for(Ut=u1;bt!==""&&(bt!=="*"||bt==="*"&&Ol[Ei+1]!=="/");)mt+=bt,yi();bt==="*"&&Ol[Ei+1]==="/"&&(mt+=bt,yi(),mt+=bt,yi());return}if(bt==="/"&&Ol[Ei+1]==="/"){for(Ut=u1;bt!==""&&bt!==`
`;)mt+=bt,yi();return}IU()}function IU(){for(Ut=Qa;bt!=="";)mt+=bt,yi();throw new Cs('Syntax error in part "'+mt+'"',Ei-mt.length)}function Iu(){if(Ut===Ki&&mt==="{"){if(Jn(),Ut===Ki&&mt==="}"){Jn();return}for(;;){if((Ut===Ka||Ut===vc)&&(Ut=jo,mt='"'.concat(mt,'"')),Ut!==jo)throw new Cs("Object key expected",Ei-mt.length);if(Jn(),Ut===Ki&&mt===":")Jn();else if(ld())bn=ka(bn,":");else throw new Cs("Colon expected",Ei-mt.length);if(Iu(),Ut===Ki&&mt===","){if(Jn(),Ut===Ki&&mt==="}"){bn=rd(bn,",");break}if(mt===""){bn=rd(bn,",");break}}else if(SU())bn=ka(bn,",");else break}Ut===Ki&&mt==="}"?Jn():bn=ka(bn,"}");return}OU()}function OU(){if(Ut===Ki&&mt==="["){if(Jn(),Ut===Ki&&mt==="]"){Jn();return}for(;;)if(Iu(),Ut===Ki&&mt===","){if(Jn(),Ut===Ki&&mt==="]"){bn=rd(bn,",");break}if(mt===""){bn=rd(bn,",");break}}else if(ld())bn=ka(bn,",");else break;Ut===Ki&&mt==="]"?Jn():bn=ka(bn,"]");return}RU()}function RU(){if(Ut===jo){for(Jn();Ut===Ki&&mt==="+";)if(mt="",Jn(),Ut===jo){var n=bn.lastIndexOf('"');bn=bn.substring(0,n)+mt.substring(1),mt="",Jn()}return}DU()}function DU(){if(Ut===vc){Jn();return}NU()}function NU(){if(Ut===Ka){if(_U[mt]){Jn();return}if(Z2[mt]){mt=Z2[mt],Jn();return}var n=mt,e=bn.length;if(mt="",Jn(),Ut===Ki&&mt==="("){mt="",Jn(),Iu(),Ut===Ki&&mt===")"&&(mt="",Jn(),Ut===Ki&&mt===";"&&(mt="",Jn()));return}for(bn=gU(bn,'"'.concat(n),e);Ut===Ka||Ut===vc;)Jn();bn+='"';return}PU()}function PU(){throw mt===""?new Cs("Unexpected end of json string",Ei-mt.length):new Cs("Value expected",Ei-mt.length)}function Ai(n){return parseInt(n,10)}function MU(n){return BU.test(n)}const BU=/^[0-9]$/;function LU(n){return VU.test(n)}const VU=/^-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?$/;function ji(n){return typeof n=="object"&&n!==null&&n.constructor===Object}function Ri(n){return typeof n=="object"&&n!==null&&(n.constructor===Object||n.constructor===Array)}function UU(n){return n===!0||n===!1}function f1(n){if(typeof n=="number")return n>9466848e5&&isFinite(n)&&Math.floor(n)===n&&!isNaN(new Date(n).valueOf());if(typeof n=="bigint")return f1(Number(n));try{const t=n.valueOf();if(t!==n)return f1(t)}catch{return!1}}function aO(n){const e=window.document.createElement("div");return e.style.color=n,e.style.color.split(/\s+/).join("").toLowerCase()||null}function WU(n){return typeof n=="string"&&!!aO(n)}function cO(n,e){if(typeof n=="number"||typeof n=="string"||typeof n=="boolean"||typeof n>"u")return typeof n;if(typeof n=="bigint")return"number";if(n===null)return"null";if(Array.isArray(n))return"array";if(ji(n))return"object";const t=e.stringify(n);return t&&MU(t[0])?"number":t==="true"||t==="false"?"boolean":t==="null"?"null":"unknown"}const FU=/^https?:\/\/\S+$/;function Rv(n){return typeof n=="string"&&FU.test(n)}function pf(n,e){if(n==="")return"";const t=n.trim();return t==="null"?null:t==="true"?!0:t==="false"?!1:LU(t)?e.parse(t):n}function jU(n,e){return typeof n=="string"&&typeof pf(n,e)!="string"}function HU(n){return qU.test(n)}const qU=/^-?[0-9]+$/;var zU=typeof global=="object"&&global&&global.Object===Object&&global;const uO=zU;var GU=typeof self=="object"&&self&&self.Object===Object&&self,KU=uO||GU||Function("return this")();const Sr=KU;var QU=Sr.Symbol;const sr=QU;var fO=Object.prototype,XU=fO.hasOwnProperty,YU=fO.toString,Oc=sr?sr.toStringTag:void 0;function JU(n){var e=XU.call(n,Oc),t=n[Oc];try{n[Oc]=void 0;var i=!0}catch{}var s=YU.call(n);return i&&(e?n[Oc]=t:delete n[Oc]),s}var ZU=Object.prototype,xU=ZU.toString;function $U(n){return xU.call(n)}var eW="[object Null]",tW="[object Undefined]",eS=sr?sr.toStringTag:void 0;function bc(n){return n==null?n===void 0?tW:eW:eS&&eS in Object(n)?JU(n):$U(n)}function Xl(n){return n!=null&&typeof n=="object"}var nW="[object Symbol]";function Ho(n){return typeof n=="symbol"||Xl(n)&&bc(n)==nW}function nu(n,e){for(var t=-1,i=n==null?0:n.length,s=Array(i);++t<i;)s[t]=e(n[t],t,n);return s}var iW=Array.isArray;const ds=iW;var sW=1/0,tS=sr?sr.prototype:void 0,nS=tS?tS.toString:void 0;function hO(n){if(typeof n=="string")return n;if(ds(n))return nu(n,hO)+"";if(Ho(n))return nS?nS.call(n):"";var e=n+"";return e=="0"&&1/n==-sW?"-0":e}var rW=/\s/;function lW(n){for(var e=n.length;e--&&rW.test(n.charAt(e)););return e}var oW=/^\s+/;function aW(n){return n&&n.slice(0,lW(n)+1).replace(oW,"")}function yr(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var iS=0/0,cW=/^[-+]0x[0-9a-f]+$/i,uW=/^0b[01]+$/i,fW=/^0o[0-7]+$/i,hW=parseInt;function h1(n){if(typeof n=="number")return n;if(Ho(n))return iS;if(yr(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=yr(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=aW(n);var t=uW.test(n);return t||fW.test(n)?hW(n.slice(2),t?2:8):cW.test(n)?iS:+n}var sS=1/0,dW=17976931348623157e292;function _h(n){if(!n)return n===0?n:0;if(n=h1(n),n===sS||n===-sS){var e=n<0?-1:1;return e*dW}return n===n?n:0}function mW(n){var e=_h(n),t=e%1;return e===e?t?e-t:e:0}function gf(n){return n}var pW="[object AsyncFunction]",gW="[object Function]",vW="[object GeneratorFunction]",bW="[object Proxy]";function dO(n){if(!yr(n))return!1;var e=bc(n);return e==gW||e==vW||e==pW||e==bW}var _W=Sr["__core-js_shared__"];const Ap=_W;var rS=function(){var n=/[^.]+$/.exec(Ap&&Ap.keys&&Ap.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function yW(n){return!!rS&&rS in n}var SW=Function.prototype,EW=SW.toString;function ea(n){if(n!=null){try{return EW.call(n)}catch{}try{return n+""}catch{}}return""}var AW=/[\\^$.*+?()[\]{}|]/g,wW=/^\[object .+?Constructor\]$/,CW=Function.prototype,kW=Object.prototype,TW=CW.toString,IW=kW.hasOwnProperty,OW=RegExp("^"+TW.call(IW).replace(AW,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function RW(n){if(!yr(n)||yW(n))return!1;var e=dO(n)?OW:wW;return e.test(ea(n))}function DW(n,e){return n==null?void 0:n[e]}function ta(n,e){var t=DW(n,e);return RW(t)?t:void 0}var NW=ta(Sr,"WeakMap");const d1=NW;var lS=Object.create,PW=function(){function n(){}return function(e){if(!yr(e))return{};if(lS)return lS(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();const MW=PW;function BW(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}function Hn(){}function LW(n,e){var t=-1,i=n.length;for(e||(e=Array(i));++t<i;)e[t]=n[t];return e}var VW=800,UW=16,WW=Date.now;function FW(n){var e=0,t=0;return function(){var i=WW(),s=UW-(i-t);if(t=i,s>0){if(++e>=VW)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}function jW(n){return function(){return n}}var HW=function(){try{var n=ta(Object,"defineProperty");return n({},"",{}),n}catch{}}();const od=HW;var qW=od?function(n,e){return od(n,"toString",{configurable:!0,enumerable:!1,value:jW(e),writable:!0})}:gf;const zW=qW;var GW=FW(zW);const KW=GW;function QW(n,e){for(var t=-1,i=n==null?0:n.length;++t<i&&e(n[t],t,n)!==!1;);return n}var XW=9007199254740991,YW=/^(?:0|[1-9]\d*)$/;function Dv(n,e){var t=typeof n;return e=e??XW,!!e&&(t=="number"||t!="symbol"&&YW.test(n))&&n>-1&&n%1==0&&n<e}function Nv(n,e,t){e=="__proto__"&&od?od(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}function Im(n,e){return n===e||n!==n&&e!==e}var JW=Object.prototype,ZW=JW.hasOwnProperty;function mO(n,e,t){var i=n[e];(!(ZW.call(n,e)&&Im(i,t))||t===void 0&&!(e in n))&&Nv(n,e,t)}function Om(n,e,t,i){var s=!t;t||(t={});for(var r=-1,l=e.length;++r<l;){var o=e[r],a=i?i(t[o],n[o],o,t,n):void 0;a===void 0&&(a=n[o]),s?Nv(t,o,a):mO(t,o,a)}return t}var oS=Math.max;function xW(n,e,t){return e=oS(e===void 0?n.length-1:e,0),function(){for(var i=arguments,s=-1,r=oS(i.length-e,0),l=Array(r);++s<r;)l[s]=i[e+s];s=-1;for(var o=Array(e+1);++s<e;)o[s]=i[s];return o[e]=t(l),BW(n,this,o)}}function $W(n,e){return KW(xW(n,e,gf),n+"")}var e9=9007199254740991;function Pv(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e9}function _c(n){return n!=null&&Pv(n.length)&&!dO(n)}function m1(n,e,t){if(!yr(t))return!1;var i=typeof e;return(i=="number"?_c(t)&&Dv(e,t.length):i=="string"&&e in t)?Im(t[e],n):!1}var t9=Object.prototype;function Rm(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||t9;return n===t}function pO(n,e){for(var t=-1,i=Array(n);++t<n;)i[t]=e(t);return i}var n9="[object Arguments]";function aS(n){return Xl(n)&&bc(n)==n9}var gO=Object.prototype,i9=gO.hasOwnProperty,s9=gO.propertyIsEnumerable,r9=aS(function(){return arguments}())?aS:function(n){return Xl(n)&&i9.call(n,"callee")&&!s9.call(n,"callee")};const Dm=r9;function l9(){return!1}var vO=typeof exports=="object"&&exports&&!exports.nodeType&&exports,cS=vO&&typeof module=="object"&&module&&!module.nodeType&&module,o9=cS&&cS.exports===vO,uS=o9?Sr.Buffer:void 0,a9=uS?uS.isBuffer:void 0,c9=a9||l9;const Ou=c9;var u9="[object Arguments]",f9="[object Array]",h9="[object Boolean]",d9="[object Date]",m9="[object Error]",p9="[object Function]",g9="[object Map]",v9="[object Number]",b9="[object Object]",_9="[object RegExp]",y9="[object Set]",S9="[object String]",E9="[object WeakMap]",A9="[object ArrayBuffer]",w9="[object DataView]",C9="[object Float32Array]",k9="[object Float64Array]",T9="[object Int8Array]",I9="[object Int16Array]",O9="[object Int32Array]",R9="[object Uint8Array]",D9="[object Uint8ClampedArray]",N9="[object Uint16Array]",P9="[object Uint32Array]",Qn={};Qn[C9]=Qn[k9]=Qn[T9]=Qn[I9]=Qn[O9]=Qn[R9]=Qn[D9]=Qn[N9]=Qn[P9]=!0;Qn[u9]=Qn[f9]=Qn[A9]=Qn[h9]=Qn[w9]=Qn[d9]=Qn[m9]=Qn[p9]=Qn[g9]=Qn[v9]=Qn[b9]=Qn[_9]=Qn[y9]=Qn[S9]=Qn[E9]=!1;function M9(n){return Xl(n)&&Pv(n.length)&&!!Qn[bc(n)]}function Nm(n){return function(e){return n(e)}}var bO=typeof exports=="object"&&exports&&!exports.nodeType&&exports,iu=bO&&typeof module=="object"&&module&&!module.nodeType&&module,B9=iu&&iu.exports===bO,wp=B9&&uO.process,L9=function(){try{var n=iu&&iu.require&&iu.require("util").types;return n||wp&&wp.binding&&wp.binding("util")}catch{}}();const Xa=L9;var fS=Xa&&Xa.isTypedArray,V9=fS?Nm(fS):M9;const Mv=V9;var U9=Object.prototype,W9=U9.hasOwnProperty;function _O(n,e){var t=ds(n),i=!t&&Dm(n),s=!t&&!i&&Ou(n),r=!t&&!i&&!s&&Mv(n),l=t||i||s||r,o=l?pO(n.length,String):[],a=o.length;for(var c in n)(e||W9.call(n,c))&&!(l&&(c=="length"||s&&(c=="offset"||c=="parent")||r&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Dv(c,a)))&&o.push(c);return o}function yO(n,e){return function(t){return n(e(t))}}var F9=yO(Object.keys,Object);const j9=F9;var H9=Object.prototype,q9=H9.hasOwnProperty;function SO(n){if(!Rm(n))return j9(n);var e=[];for(var t in Object(n))q9.call(n,t)&&t!="constructor"&&e.push(t);return e}function yc(n){return _c(n)?_O(n):SO(n)}function z9(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var G9=Object.prototype,K9=G9.hasOwnProperty;function Q9(n){if(!yr(n))return z9(n);var e=Rm(n),t=[];for(var i in n)i=="constructor"&&(e||!K9.call(n,i))||t.push(i);return t}function Bv(n){return _c(n)?_O(n,!0):Q9(n)}var X9=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Y9=/^\w*$/;function Lv(n,e){if(ds(n))return!1;var t=typeof n;return t=="number"||t=="symbol"||t=="boolean"||n==null||Ho(n)?!0:Y9.test(n)||!X9.test(n)||e!=null&&n in Object(e)}var J9=ta(Object,"create");const Ru=J9;function Z9(){this.__data__=Ru?Ru(null):{},this.size=0}function x9(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var $9="__lodash_hash_undefined__",eF=Object.prototype,tF=eF.hasOwnProperty;function nF(n){var e=this.__data__;if(Ru){var t=e[n];return t===$9?void 0:t}return tF.call(e,n)?e[n]:void 0}var iF=Object.prototype,sF=iF.hasOwnProperty;function rF(n){var e=this.__data__;return Ru?e[n]!==void 0:sF.call(e,n)}var lF="__lodash_hash_undefined__";function oF(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=Ru&&e===void 0?lF:e,this}function qo(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}qo.prototype.clear=Z9;qo.prototype.delete=x9;qo.prototype.get=nF;qo.prototype.has=rF;qo.prototype.set=oF;function aF(){this.__data__=[],this.size=0}function Pm(n,e){for(var t=n.length;t--;)if(Im(n[t][0],e))return t;return-1}var cF=Array.prototype,uF=cF.splice;function fF(n){var e=this.__data__,t=Pm(e,n);if(t<0)return!1;var i=e.length-1;return t==i?e.pop():uF.call(e,t,1),--this.size,!0}function hF(n){var e=this.__data__,t=Pm(e,n);return t<0?void 0:e[t][1]}function dF(n){return Pm(this.__data__,n)>-1}function mF(n,e){var t=this.__data__,i=Pm(t,n);return i<0?(++this.size,t.push([n,e])):t[i][1]=e,this}function bl(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}bl.prototype.clear=aF;bl.prototype.delete=fF;bl.prototype.get=hF;bl.prototype.has=dF;bl.prototype.set=mF;var pF=ta(Sr,"Map");const Du=pF;function gF(){this.size=0,this.__data__={hash:new qo,map:new(Du||bl),string:new qo}}function vF(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}function Mm(n,e){var t=n.__data__;return vF(e)?t[typeof e=="string"?"string":"hash"]:t.map}function bF(n){var e=Mm(this,n).delete(n);return this.size-=e?1:0,e}function _F(n){return Mm(this,n).get(n)}function yF(n){return Mm(this,n).has(n)}function SF(n,e){var t=Mm(this,n),i=t.size;return t.set(n,e),this.size+=t.size==i?0:1,this}function _l(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}_l.prototype.clear=gF;_l.prototype.delete=bF;_l.prototype.get=_F;_l.prototype.has=yF;_l.prototype.set=SF;var EF="Expected a function";function Bm(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError(EF);var t=function(){var i=arguments,s=e?e.apply(this,i):i[0],r=t.cache;if(r.has(s))return r.get(s);var l=n.apply(this,i);return t.cache=r.set(s,l)||r,l};return t.cache=new(Bm.Cache||_l),t}Bm.Cache=_l;var AF=500;function wF(n){var e=Bm(n,function(i){return t.size===AF&&t.clear(),i}),t=e.cache;return e}var CF=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,kF=/\\(\\)?/g,TF=wF(function(n){var e=[];return n.charCodeAt(0)===46&&e.push(""),n.replace(CF,function(t,i,s,r){e.push(s?r.replace(kF,"$1"):i||t)}),e});const IF=TF;function EO(n){return n==null?"":hO(n)}function AO(n,e){return ds(n)?n:Lv(n,e)?[n]:IF(EO(n))}var OF=1/0;function Lm(n){if(typeof n=="string"||Ho(n))return n;var e=n+"";return e=="0"&&1/n==-OF?"-0":e}function Vv(n,e){e=AO(e,n);for(var t=0,i=e.length;n!=null&&t<i;)n=n[Lm(e[t++])];return t&&t==i?n:void 0}function RF(n,e,t){var i=n==null?void 0:Vv(n,e);return i===void 0?t:i}function Uv(n,e){for(var t=-1,i=e.length,s=n.length;++t<i;)n[s+t]=e[t];return n}var hS=sr?sr.isConcatSpreadable:void 0;function DF(n){return ds(n)||Dm(n)||!!(hS&&n&&n[hS])}function wO(n,e,t,i,s){var r=-1,l=n.length;for(t||(t=DF),s||(s=[]);++r<l;){var o=n[r];e>0&&t(o)?e>1?wO(o,e-1,t,i,s):Uv(s,o):i||(s[s.length]=o)}return s}var NF=yO(Object.getPrototypeOf,Object);const CO=NF;function PF(n,e,t){var i=-1,s=n.length;e<0&&(e=-e>s?0:s+e),t=t>s?s:t,t<0&&(t+=s),s=e>t?0:t-e>>>0,e>>>=0;for(var r=Array(s);++i<s;)r[i]=n[i+e];return r}function MF(){this.__data__=new bl,this.size=0}function BF(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}function LF(n){return this.__data__.get(n)}function VF(n){return this.__data__.has(n)}var UF=200;function WF(n,e){var t=this.__data__;if(t instanceof bl){var i=t.__data__;if(!Du||i.length<UF-1)return i.push([n,e]),this.size=++t.size,this;t=this.__data__=new _l(i)}return t.set(n,e),this.size=t.size,this}function jr(n){var e=this.__data__=new bl(n);this.size=e.size}jr.prototype.clear=MF;jr.prototype.delete=BF;jr.prototype.get=LF;jr.prototype.has=VF;jr.prototype.set=WF;function FF(n,e){return n&&Om(e,yc(e),n)}function jF(n,e){return n&&Om(e,Bv(e),n)}var kO=typeof exports=="object"&&exports&&!exports.nodeType&&exports,dS=kO&&typeof module=="object"&&module&&!module.nodeType&&module,HF=dS&&dS.exports===kO,mS=HF?Sr.Buffer:void 0,pS=mS?mS.allocUnsafe:void 0;function qF(n,e){if(e)return n.slice();var t=n.length,i=pS?pS(t):new n.constructor(t);return n.copy(i),i}function zF(n,e){for(var t=-1,i=n==null?0:n.length,s=0,r=[];++t<i;){var l=n[t];e(l,t,n)&&(r[s++]=l)}return r}function TO(){return[]}var GF=Object.prototype,KF=GF.propertyIsEnumerable,gS=Object.getOwnPropertySymbols,QF=gS?function(n){return n==null?[]:(n=Object(n),zF(gS(n),function(e){return KF.call(n,e)}))}:TO;const Wv=QF;function XF(n,e){return Om(n,Wv(n),e)}var YF=Object.getOwnPropertySymbols,JF=YF?function(n){for(var e=[];n;)Uv(e,Wv(n)),n=CO(n);return e}:TO;const IO=JF;function ZF(n,e){return Om(n,IO(n),e)}function OO(n,e,t){var i=e(n);return ds(n)?i:Uv(i,t(n))}function p1(n){return OO(n,yc,Wv)}function xF(n){return OO(n,Bv,IO)}var $F=ta(Sr,"DataView");const g1=$F;var ej=ta(Sr,"Promise");const v1=ej;var tj=ta(Sr,"Set");const b1=tj;var vS="[object Map]",nj="[object Object]",bS="[object Promise]",_S="[object Set]",yS="[object WeakMap]",SS="[object DataView]",ij=ea(g1),sj=ea(Du),rj=ea(v1),lj=ea(b1),oj=ea(d1),ho=bc;(g1&&ho(new g1(new ArrayBuffer(1)))!=SS||Du&&ho(new Du)!=vS||v1&&ho(v1.resolve())!=bS||b1&&ho(new b1)!=_S||d1&&ho(new d1)!=yS)&&(ho=function(n){var e=bc(n),t=e==nj?n.constructor:void 0,i=t?ea(t):"";if(i)switch(i){case ij:return SS;case sj:return vS;case rj:return bS;case lj:return _S;case oj:return yS}return e});const Ya=ho;var aj=Object.prototype,cj=aj.hasOwnProperty;function uj(n){var e=n.length,t=new n.constructor(e);return e&&typeof n[0]=="string"&&cj.call(n,"index")&&(t.index=n.index,t.input=n.input),t}var fj=Sr.Uint8Array;const ad=fj;function Fv(n){var e=new n.constructor(n.byteLength);return new ad(e).set(new ad(n)),e}function hj(n,e){var t=e?Fv(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.byteLength)}var dj=/\w*$/;function mj(n){var e=new n.constructor(n.source,dj.exec(n));return e.lastIndex=n.lastIndex,e}var ES=sr?sr.prototype:void 0,AS=ES?ES.valueOf:void 0;function pj(n){return AS?Object(AS.call(n)):{}}function gj(n,e){var t=e?Fv(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}var vj="[object Boolean]",bj="[object Date]",_j="[object Map]",yj="[object Number]",Sj="[object RegExp]",Ej="[object Set]",Aj="[object String]",wj="[object Symbol]",Cj="[object ArrayBuffer]",kj="[object DataView]",Tj="[object Float32Array]",Ij="[object Float64Array]",Oj="[object Int8Array]",Rj="[object Int16Array]",Dj="[object Int32Array]",Nj="[object Uint8Array]",Pj="[object Uint8ClampedArray]",Mj="[object Uint16Array]",Bj="[object Uint32Array]";function Lj(n,e,t){var i=n.constructor;switch(e){case Cj:return Fv(n);case vj:case bj:return new i(+n);case kj:return hj(n,t);case Tj:case Ij:case Oj:case Rj:case Dj:case Nj:case Pj:case Mj:case Bj:return gj(n,t);case _j:return new i;case yj:case Aj:return new i(n);case Sj:return mj(n);case Ej:return new i;case wj:return pj(n)}}function Vj(n){return typeof n.constructor=="function"&&!Rm(n)?MW(CO(n)):{}}var Uj="[object Map]";function Wj(n){return Xl(n)&&Ya(n)==Uj}var wS=Xa&&Xa.isMap,Fj=wS?Nm(wS):Wj;const jj=Fj;var Hj="[object Set]";function qj(n){return Xl(n)&&Ya(n)==Hj}var CS=Xa&&Xa.isSet,zj=CS?Nm(CS):qj;const Gj=zj;var Kj=1,Qj=2,Xj=4,RO="[object Arguments]",Yj="[object Array]",Jj="[object Boolean]",Zj="[object Date]",xj="[object Error]",DO="[object Function]",$j="[object GeneratorFunction]",eH="[object Map]",tH="[object Number]",NO="[object Object]",nH="[object RegExp]",iH="[object Set]",sH="[object String]",rH="[object Symbol]",lH="[object WeakMap]",oH="[object ArrayBuffer]",aH="[object DataView]",cH="[object Float32Array]",uH="[object Float64Array]",fH="[object Int8Array]",hH="[object Int16Array]",dH="[object Int32Array]",mH="[object Uint8Array]",pH="[object Uint8ClampedArray]",gH="[object Uint16Array]",vH="[object Uint32Array]",Wn={};Wn[RO]=Wn[Yj]=Wn[oH]=Wn[aH]=Wn[Jj]=Wn[Zj]=Wn[cH]=Wn[uH]=Wn[fH]=Wn[hH]=Wn[dH]=Wn[eH]=Wn[tH]=Wn[NO]=Wn[nH]=Wn[iH]=Wn[sH]=Wn[rH]=Wn[mH]=Wn[pH]=Wn[gH]=Wn[vH]=!0;Wn[xj]=Wn[DO]=Wn[lH]=!1;function yh(n,e,t,i,s,r){var l,o=e&Kj,a=e&Qj,c=e&Xj;if(t&&(l=s?t(n,i,s,r):t(n)),l!==void 0)return l;if(!yr(n))return n;var u=ds(n);if(u){if(l=uj(n),!o)return LW(n,l)}else{var f=Ya(n),h=f==DO||f==$j;if(Ou(n))return qF(n,o);if(f==NO||f==RO||h&&!s){if(l=a||h?{}:Vj(n),!o)return a?ZF(n,jF(l,n)):XF(n,FF(l,n))}else{if(!Wn[f])return s?n:{};l=Lj(n,f,o)}}r||(r=new jr);var d=r.get(n);if(d)return d;r.set(n,l),Gj(n)?n.forEach(function(y){l.add(yh(y,e,t,y,n,r))}):jj(n)&&n.forEach(function(y,b){l.set(b,yh(y,e,t,b,n,r))});var p=c?a?xF:p1:a?Bv:yc,v=u?void 0:p(n);return QW(v||n,function(y,b){v&&(b=y,y=n[b]),mO(l,b,yh(y,e,t,b,n,r))}),l}var bH=1,_H=4;function yH(n,e){return e=typeof e=="function"?e:void 0,yh(n,bH|_H,e)}var SH="__lodash_hash_undefined__";function EH(n){return this.__data__.set(n,SH),this}function AH(n){return this.__data__.has(n)}function cd(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new _l;++e<t;)this.add(n[e])}cd.prototype.add=cd.prototype.push=EH;cd.prototype.has=AH;function wH(n,e){for(var t=-1,i=n==null?0:n.length;++t<i;)if(e(n[t],t,n))return!0;return!1}function CH(n,e){return n.has(e)}var kH=1,TH=2;function PO(n,e,t,i,s,r){var l=t&kH,o=n.length,a=e.length;if(o!=a&&!(l&&a>o))return!1;var c=r.get(n),u=r.get(e);if(c&&u)return c==e&&u==n;var f=-1,h=!0,d=t&TH?new cd:void 0;for(r.set(n,e),r.set(e,n);++f<o;){var p=n[f],v=e[f];if(i)var y=l?i(v,p,f,e,n,r):i(p,v,f,n,e,r);if(y!==void 0){if(y)continue;h=!1;break}if(d){if(!wH(e,function(b,S){if(!CH(d,S)&&(p===b||s(p,b,t,i,r)))return d.push(S)})){h=!1;break}}else if(!(p===v||s(p,v,t,i,r))){h=!1;break}}return r.delete(n),r.delete(e),h}function IH(n){var e=-1,t=Array(n.size);return n.forEach(function(i,s){t[++e]=[s,i]}),t}function OH(n){var e=-1,t=Array(n.size);return n.forEach(function(i){t[++e]=i}),t}var RH=1,DH=2,NH="[object Boolean]",PH="[object Date]",MH="[object Error]",BH="[object Map]",LH="[object Number]",VH="[object RegExp]",UH="[object Set]",WH="[object String]",FH="[object Symbol]",jH="[object ArrayBuffer]",HH="[object DataView]",kS=sr?sr.prototype:void 0,Cp=kS?kS.valueOf:void 0;function qH(n,e,t,i,s,r,l){switch(t){case HH:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case jH:return!(n.byteLength!=e.byteLength||!r(new ad(n),new ad(e)));case NH:case PH:case LH:return Im(+n,+e);case MH:return n.name==e.name&&n.message==e.message;case VH:case WH:return n==e+"";case BH:var o=IH;case UH:var a=i&RH;if(o||(o=OH),n.size!=e.size&&!a)return!1;var c=l.get(n);if(c)return c==e;i|=DH,l.set(n,e);var u=PO(o(n),o(e),i,s,r,l);return l.delete(n),u;case FH:if(Cp)return Cp.call(n)==Cp.call(e)}return!1}var zH=1,GH=Object.prototype,KH=GH.hasOwnProperty;function QH(n,e,t,i,s,r){var l=t&zH,o=p1(n),a=o.length,c=p1(e),u=c.length;if(a!=u&&!l)return!1;for(var f=a;f--;){var h=o[f];if(!(l?h in e:KH.call(e,h)))return!1}var d=r.get(n),p=r.get(e);if(d&&p)return d==e&&p==n;var v=!0;r.set(n,e),r.set(e,n);for(var y=l;++f<a;){h=o[f];var b=n[h],S=e[h];if(i)var I=l?i(S,b,h,e,n,r):i(b,S,h,n,e,r);if(!(I===void 0?b===S||s(b,S,t,i,r):I)){v=!1;break}y||(y=h=="constructor")}if(v&&!y){var T=n.constructor,C=e.constructor;T!=C&&"constructor"in n&&"constructor"in e&&!(typeof T=="function"&&T instanceof T&&typeof C=="function"&&C instanceof C)&&(v=!1)}return r.delete(n),r.delete(e),v}var XH=1,TS="[object Arguments]",IS="[object Array]",Uf="[object Object]",YH=Object.prototype,OS=YH.hasOwnProperty;function JH(n,e,t,i,s,r){var l=ds(n),o=ds(e),a=l?IS:Ya(n),c=o?IS:Ya(e);a=a==TS?Uf:a,c=c==TS?Uf:c;var u=a==Uf,f=c==Uf,h=a==c;if(h&&Ou(n)){if(!Ou(e))return!1;l=!0,u=!1}if(h&&!u)return r||(r=new jr),l||Mv(n)?PO(n,e,t,i,s,r):qH(n,e,a,t,i,s,r);if(!(t&XH)){var d=u&&OS.call(n,"__wrapped__"),p=f&&OS.call(e,"__wrapped__");if(d||p){var v=d?n.value():n,y=p?e.value():e;return r||(r=new jr),s(v,y,t,i,r)}}return h?(r||(r=new jr),QH(n,e,t,i,s,r)):!1}function Vm(n,e,t,i,s){return n===e?!0:n==null||e==null||!Xl(n)&&!Xl(e)?n!==n&&e!==e:JH(n,e,t,i,Vm,s)}var ZH=1,xH=2;function $H(n,e,t,i){var s=t.length,r=s,l=!i;if(n==null)return!r;for(n=Object(n);s--;){var o=t[s];if(l&&o[2]?o[1]!==n[o[0]]:!(o[0]in n))return!1}for(;++s<r;){o=t[s];var a=o[0],c=n[a],u=o[1];if(l&&o[2]){if(c===void 0&&!(a in n))return!1}else{var f=new jr;if(i)var h=i(c,u,a,n,e,f);if(!(h===void 0?Vm(u,c,ZH|xH,i,f):h))return!1}}return!0}function MO(n){return n===n&&!yr(n)}function eq(n){for(var e=yc(n),t=e.length;t--;){var i=e[t],s=n[i];e[t]=[i,s,MO(s)]}return e}function BO(n,e){return function(t){return t==null?!1:t[n]===e&&(e!==void 0||n in Object(t))}}function tq(n){var e=eq(n);return e.length==1&&e[0][2]?BO(e[0][0],e[0][1]):function(t){return t===n||$H(t,n,e)}}function nq(n,e){return n!=null&&e in Object(n)}function iq(n,e,t){e=AO(e,n);for(var i=-1,s=e.length,r=!1;++i<s;){var l=Lm(e[i]);if(!(r=n!=null&&t(n,l)))break;n=n[l]}return r||++i!=s?r:(s=n==null?0:n.length,!!s&&Pv(s)&&Dv(l,s)&&(ds(n)||Dm(n)))}function sq(n,e){return n!=null&&iq(n,e,nq)}var rq=1,lq=2;function oq(n,e){return Lv(n)&&MO(e)?BO(Lm(n),e):function(t){var i=RF(t,n);return i===void 0&&i===e?sq(t,n):Vm(e,i,rq|lq)}}function aq(n){return function(e){return e==null?void 0:e[n]}}function cq(n){return function(e){return Vv(e,n)}}function uq(n){return Lv(n)?aq(Lm(n)):cq(n)}function Um(n){return typeof n=="function"?n:n==null?gf:typeof n=="object"?ds(n)?oq(n[0],n[1]):tq(n):uq(n)}function fq(n,e,t,i){for(var s=-1,r=n==null?0:n.length;++s<r;){var l=n[s];e(i,l,t(l),n)}return i}function LO(n){return function(e,t,i){for(var s=-1,r=Object(e),l=i(e),o=l.length;o--;){var a=l[n?o:++s];if(t(r[a],a,r)===!1)break}return e}}var hq=LO();const dq=hq;function mq(n,e){return n&&dq(n,e,yc)}function VO(n,e){return function(t,i){if(t==null)return t;if(!_c(t))return n(t,i);for(var s=t.length,r=e?s:-1,l=Object(t);(e?r--:++r<s)&&i(l[r],r,l)!==!1;);return t}}var pq=VO(mq);const UO=pq;function gq(n,e,t,i){return UO(n,function(s,r,l){e(i,s,t(s),l)}),i}function vq(n,e){return function(t,i){var s=ds(t)?fq:gq,r=e?e():{};return s(t,n,Um(i),r)}}var bq=function(){return Sr.Date.now()};const kp=bq;var _q="Expected a function",yq=Math.max,Sq=Math.min;function Wm(n,e,t){var i,s,r,l,o,a,c=0,u=!1,f=!1,h=!0;if(typeof n!="function")throw new TypeError(_q);e=h1(e)||0,yr(t)&&(u=!!t.leading,f="maxWait"in t,r=f?yq(h1(t.maxWait)||0,e):r,h="trailing"in t?!!t.trailing:h);function d(k){var R=i,O=s;return i=s=void 0,c=k,l=n.apply(O,R),l}function p(k){return c=k,o=setTimeout(b,e),u?d(k):l}function v(k){var R=k-a,O=k-c,N=e-R;return f?Sq(N,r-O):N}function y(k){var R=k-a,O=k-c;return a===void 0||R>=e||R<0||f&&O>=r}function b(){var k=kp();if(y(k))return S(k);o=setTimeout(b,v(k))}function S(k){return o=void 0,h&&i?d(k):(i=s=void 0,l)}function I(){o!==void 0&&clearTimeout(o),c=0,i=a=s=o=void 0}function T(){return o===void 0?l:S(kp())}function C(){var k=kp(),R=y(k);if(i=arguments,s=this,a=k,R){if(o===void 0)return p(a);if(f)return clearTimeout(o),o=setTimeout(b,e),d(a)}return o===void 0&&(o=setTimeout(b,e)),l}return C.cancel=I,C.flush=T,C}function Kt(n){var e=n==null?0:n.length;return e?n[e-1]:void 0}function WO(n){return typeof n=="function"?n:gf}function Eq(n,e){for(var t=n==null?0:n.length;t--&&e(n[t],t,n)!==!1;);return n}var Aq=LO(!0);const wq=Aq;function Cq(n,e){return n&&wq(n,e,yc)}var kq=VO(Cq,!0);const Tq=kq;function Iq(n,e){var t=ds(n)?Eq:Tq;return t(n,WO(e))}function ks(n){return n&&n.length?n[0]:void 0}function FO(n,e){var t=-1,i=_c(n)?Array(n.length):[];return UO(n,function(s,r,l){i[++t]=e(s,r,l)}),i}function Oq(n,e){var t=ds(n)?nu:FO;return t(n,Um(e))}var Rq=Object.prototype,Dq=Rq.hasOwnProperty,Nq=vq(function(n,e,t){Dq.call(n,t)?n[t].push(e):Nv(n,t,[e])});const jv=Nq;function pn(n){var e=n==null?0:n.length;return e?PF(n,0,-1):[]}var Pq="[object Map]",Mq="[object Set]",Bq=Object.prototype,Lq=Bq.hasOwnProperty;function ii(n){if(n==null)return!0;if(_c(n)&&(ds(n)||typeof n=="string"||typeof n.splice=="function"||Ou(n)||Mv(n)||Dm(n)))return!n.length;var e=Ya(n);if(e==Pq||e==Mq)return!n.size;if(Rm(n))return!SO(n).length;for(var t in n)if(Lq.call(n,t))return!1;return!0}function En(n,e){return Vm(n,e)}function Vq(n,e){return n<e}function Uq(n,e,t){for(var i=-1,s=n.length;++i<s;){var r=n[i],l=e(r);if(l!=null&&(o===void 0?l===l&&!Ho(l):t(l,o)))var o=l,a=r}return a}function Wf(n,e){return n&&n.length?Uq(n,Um(e),Vq):void 0}function Wq(n,e){var t=n.length;for(n.sort(e);t--;)n[t]=n[t].value;return n}function Fq(n,e){if(n!==e){var t=n!==void 0,i=n===null,s=n===n,r=Ho(n),l=e!==void 0,o=e===null,a=e===e,c=Ho(e);if(!o&&!c&&!r&&n>e||r&&l&&a&&!o&&!c||i&&l&&a||!t&&a||!s)return 1;if(!i&&!r&&!c&&n<e||c&&t&&s&&!i&&!r||o&&t&&s||!l&&s||!a)return-1}return 0}function jq(n,e,t){for(var i=-1,s=n.criteria,r=e.criteria,l=s.length,o=t.length;++i<l;){var a=Fq(s[i],r[i]);if(a){if(i>=o)return a;var c=t[i];return a*(c=="desc"?-1:1)}}return n.index-e.index}function Hq(n,e,t){e.length?e=nu(e,function(r){return ds(r)?function(l){return Vv(l,r.length===1?r[0]:r)}:r}):e=[gf];var i=-1;e=nu(e,Nm(Um));var s=FO(n,function(r,l,o){var a=nu(e,function(c){return c(r)});return{criteria:a,index:++i,value:r}});return Wq(s,function(r,l){return jq(r,l,t)})}var qq=Math.ceil,zq=Math.max;function Gq(n,e,t,i){for(var s=-1,r=zq(qq((e-n)/(t||1)),0),l=Array(r);r--;)l[i?r:++s]=n,n+=t;return l}function Kq(n){return function(e,t,i){return i&&typeof i!="number"&&m1(e,t,i)&&(t=i=void 0),e=_h(e),t===void 0?(t=e,e=0):t=_h(t),i=i===void 0?e<t?1:-1:_h(i),Gq(e,t,i,n)}}var Qq=Kq();const Xq=Qq;var Yq=$W(function(n,e){if(n==null)return[];var t=e.length;return t>1&&m1(n,e[0],e[1])?e=[]:t>2&&m1(e[0],e[1],e[2])&&(e=[e[0]]),Hq(n,wO(e,1),[])});const Jq=Yq;var Zq="Expected a function";function xq(n,e,t){var i=!0,s=!0;if(typeof n!="function")throw new TypeError(Zq);return yr(t)&&(i="leading"in t?!!t.leading:i,s="trailing"in t?!!t.trailing:s),Wm(n,e,{leading:i,maxWait:e,trailing:s})}var $q=9007199254740991,Tp=4294967295,ez=Math.min;function RS(n,e){if(n=mW(n),n<1||n>$q)return[];var t=Tp,i=ez(n,Tp);e=WO(e),n-=Tp;for(var s=pO(i,e);++t<n;)e(t);return s}var tz=0;function ud(n){var e=++tz;return EO(n)+e}const nz=1e4,iz=[];function _1(n,e=!1){const t={};if(!Array.isArray(n))throw new TypeError("Array expected");function i(l,o){(!Array.isArray(l)&&!ji(l)||e&&o.length>0)&&(t[ht(o)]=!0),ji(l)&&Object.keys(l).forEach(c=>{i(l[c],o.concat(c))})}const s=Math.min(n.length,nz);for(let l=0;l<s;l++){const o=n[l];i(o,iz)}return Object.keys(t).sort().map(Ql)}function jO(n,e,t){if(!(e<=n))for(let i=n;i<e;i++)t(i)}function DS(n,e){return n.length>e?n.slice(0,e):n}function NS(n){return{...n}}function PS(n){return Object.values(n)}function MS(n,e,t,i){const s=n.slice(0),r=s.splice(e,t);return s.splice.apply(s,[e+i,0,...r]),s}function Hv(n,e){try{return e.parse(n)}catch{return e.parse(Ul(n))}}function HO(n,e){try{return Hv(n,e)}catch{return}}function qv(n,e){n=n.replace(qO,"");try{return e(n)}catch{}try{return e("["+n+"]")}catch{}try{return e("{"+n+"}")}catch{}throw new Error("Failed to parse partial JSON")}function sz(n){n=n.replace(qO,"");try{return Ul(n)}catch{}try{const e=Ul("["+n+"]");return e.substring(1,e.length-1)}catch{}try{const e=Ul("{"+n+"}");return e.substring(1,e.length-1)}catch{}throw new Error("Failed to repair partial JSON")}const qO=/,\s*$/;function zv(n,e){const t=VS.exec(e);if(t){const i=Ai(t[2]),s=lz(n,`
`,0,i),r=n.lastIndexOf(`
`,i),l=i-r-1;return{position:i,line:s,column:l,message:e.replace(VS,()=>`line ${s+1} column ${l+1}`)}}else{const i=uz.exec(e),s=i?Ai(i[1]):null,r=s!==null?s-1:null,l=fz.exec(e),o=l?Ai(l[1]):null,a=o!==null?o-1:null;return{position:r!==null&&a!==null?rz(n,r,a):null,line:r,column:a,message:e.replace(/^JSON.parse: /,"").replace(/ of the JSON data$/,"")}}}function rz(n,e,t){let i=n.indexOf(`
`),s=1;for(;s<e&&i!==-1;)i=n.indexOf(`
`,i+1),s++;return i!==-1?i+t+1:null}function lz(n,e,t=0,i=n.length){let s=0;for(let r=t;r<i;r++)n.charAt(r)===e&&s++;return s}function oz(n,e){try{const t=Tm.parse(n),i=ht(e),s=t.pointers[i];if(s)return{path:e,line:s.key?s.key.line:s.value?s.value.line:0,column:s.key?s.key.column:s.value?s.value.column:0,from:s.key?s.key.pos:s.value?s.value.pos:0,to:s.keyEnd?s.keyEnd.pos:s.valueEnd?s.valueEnd.pos:0}}catch(t){console.error(t)}return null}function az(n,e,t){if(e==="array"){if(Array.isArray(n))return n;if(ji(n))return PS(n);if(typeof n=="string")try{const i=t.parse(n);if(Array.isArray(i))return i;if(ji(i))return PS(i)}catch{return[n]}return[n]}if(e==="object"){if(Array.isArray(n))return NS(n);if(ji(n))return n;if(typeof n=="string")try{const i=t.parse(n);if(ji(i))return i;if(Array.isArray(i))return NS(i)}catch{return{value:n}}return{value:n}}if(e==="value")return Ri(n)?t.stringify(n):n;throw new Error(`Cannot convert ${cO(n,t)} to ${e}`)}function Ip(n){return ji(n)?n.json!==void 0?n.text!==void 0?'Content must contain either a property "json" or a property "text" but not both':null:n.text===void 0?'Content must contain either a property "json" or a property "text"':typeof n.text!="string"?'Content "text" property must be a string containing a JSON document. Did you mean to use the "json" property instead?':null:"Content must be an object"}function Gv(n){return typeof n.text=="string"}function BS(n,e,t){return Gv(n)?n.text:t.stringify(n.json,null,e)}function LS(n,e){return cz(n,e)>e}function cz(n,e=1/0){if(Gv(n))return n.text.length;const t=n.json;let i=0;function s(r){if(Array.isArray(r)){if(i+=2+(r.length-1),i>e)return i;for(let l=0;l<r.length;l++){const o=r[l];if(s(o),i>e)return i}}else if(ji(r)){const l=Object.keys(r);i+=2+l.length+(l.length-1);for(let o=0;o<l.length;o++){const a=l[o],c=r[a];i+=a.length+2,s(c)}}else typeof r=="string"?i+=r.length+2:i+=String(r).length}return s(t),i}const VS=/(position|char) (\d+)/,uz=/line (\d+)/,fz=/column (\d+)/;function hz(n,e){return n.parse===e.parse&&n.stringify===e.stringify}var Qs;(function(n){n.text="text",n.tree="tree"})(Qs||(Qs={}));var Pn;(function(n){n.after="after",n.inside="inside",n.key="key",n.value="value",n.multi="multi"})(Pn||(Pn={}));var dr;(function(n){n.after="after",n.key="key",n.value="value",n.inside="inside"})(dr||(dr={}));var Ja;(function(n){n.info="info",n.warning="warning",n.error="error"})(Ja||(Ja={}));var vr;(function(n){n.key="key",n.value="value"})(vr||(vr={}));function zO({escapeControlCharacters:n,escapeUnicodeCharacters:e}){return n?e?dz:mz:e?pz:gz}const dz={escapeValue:n=>GO(XO(String(n))),unescapeValue:n=>YO(KO(n))},mz={escapeValue:n=>XO(String(n)),unescapeValue:n=>YO(n)},pz={escapeValue:n=>GO(String(n)),unescapeValue:n=>KO(n)},gz={escapeValue:n=>String(n),unescapeValue:n=>n};function GO(n){return n.replace(/[^\x20-\x7F]/g,e=>e==="\b"||e==="\f"||e===`
`||e==="\r"||e==="	"?e:"\\u"+("000"+e.codePointAt(0).toString(16)).slice(-4))}function KO(n){return n.replace(/\\u[a-fA-F0-9]{4}/g,e=>{try{const t=JSON.parse('"'+e+'"');return QO[t]||t}catch{return e}})}const QO={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},vz={'\\"':'"',"\\\\":"\\","\\/":"/","\\b":"\b","\\f":"\f","\\n":`
`,"\\r":"\r","\\t":"	"};function XO(n){return n.replace(/["\b\f\n\r\t\\]/g,e=>QO[e]||e)}function YO(n){return n.replace(/\\["bfnrt\\]/g,e=>vz[e]||e)}function zo(n){return typeof n!="string"?String(n):n.endsWith(`
`)?n+`
`:n}function bz(n){return n.replace(/\n$/,"")}function JO(n,e){return vf(n,t=>t.nodeName.toUpperCase()===e.toUpperCase())}function yo(n,e,t){return vf(n,i=>yz(i,e,t))}function _z(n){return n.nodeName==="DIV"&&n.contentEditable==="true"}function yz(n,e,t){return typeof n.getAttribute=="function"&&n.getAttribute(e)===t}function vf(n,e){return!!Kv(n,e)}function Kv(n,e){let t=n;for(;t&&!e(t);)t=t.parentNode;return t||void 0}function ZO(n){if(n.firstChild==null){n.focus();return}const e=document.createRange(),t=window.getSelection();e.setStart(n,1),e.collapse(!0),t.removeAllRanges(),t.addRange(e)}function Nu(n){return n&&n.ownerDocument&&n.ownerDocument.defaultView}function y1(n){const e=Nu(n);return vf(e.document.activeElement,t=>t===n)}function Sz(n,e){return Kv(n,t=>t.nodeName===e)}function Op(n){return yo(n,"data-type","selectable-key")?Pn.key:yo(n,"data-type","selectable-value")?Pn.value:yo(n,"data-type","insert-selection-area-inside")?Pn.inside:yo(n,"data-type","insert-selection-area-after")?Pn.after:Pn.multi}function S1(n){return encodeURIComponent(ht(n))}function Ez(n){return Ql(decodeURIComponent(n))}function Az(n){const e=Kv(n,t=>t.hasAttribute("data-path"));return e?Ez(e.getAttribute("data-path")):null}function wz({allElements:n,currentElement:e,direction:t,hasPrio:i=()=>!0,margin:s=10}){const r=Oq(n.filter(o),a),l=a(e);function o(b){const S=b.getBoundingClientRect();return S.width>0&&S.height>0}function a(b){const S=b.getBoundingClientRect();return{x:S.left+S.width/2,y:S.top+S.height/2,rect:S,element:b}}const c=(b,S)=>Math.abs(b.y-S.y)<s,u=(b,S)=>b.rect.left+s<S.rect.left,f=(b,S)=>b.rect.right>S.rect.right+s,h=(b,S)=>b.y+s<S.y,d=(b,S)=>b.y>S.y+s;function p(b,S,I=1){const T=b.x-S.x,C=(b.y-S.y)*I;return Math.sqrt(T*T+C*C)}const v=b=>p(b,l),y=b=>p(b,l,10);if(t==="Left"||t==="Right"){const b=t==="Left"?r.filter(T=>u(T,l)):r.filter(T=>f(T,l)),S=b.filter(T=>c(T,l)),I=Wf(S,v)||Wf(b,y);return I==null?void 0:I.element}if(t==="Up"||t==="Down"){const b=t==="Up"?r.filter(T=>h(T,l)):r.filter(T=>d(T,l)),S=b.filter(T=>i(T.element)),I=Wf(S,v)||Wf(b,v);return I==null?void 0:I.element}}const xO=typeof navigator<"u"?navigator.platform.toUpperCase().indexOf("MAC")>=0:!1;function Cz(n){return Tz[n]||""}function na(n){const e=[];n.ctrlKey&&e.push("Ctrl"),n.metaKey&&e.push("Command"),n.altKey&&e.push(xO?"Option":"Alt"),n.shiftKey&&e.push("Shift");const t=Cz(n.which);return kz[t]||e.push(t),e.join("+")}const kz={Ctrl:!0,Command:!0,Alt:!0,Option:!0,Shift:!0},Tz={8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause_Break",20:"Caps_Lock",27:"Escape",33:"Page_Up",34:"Page_Down",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Left_Window_Key",92:"Right_Window_Key",93:"Select_Key",96:"Numpad_0",97:"Numpad_1",98:"Numpad_2",99:"Numpad_3",100:"Numpad_4",101:"Numpad_5",102:"Numpad_6",103:"Numpad_7",104:"Numpad_8",105:"Numpad_9",106:"Numpad_*",107:"Numpad_+",109:"Numpad_-",110:"Numpad_.",111:"Numpad_/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Num_Lock",145:"Scroll_Lock",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"};const{window:Rp}=Yu;function US(n){let e,t,i,s,r,l;const o=[n[0].props];var a=n[0].component;function c(u){let f={};for(let h=0;h<o.length;h+=1)f=Qr(f,o[h]);return{props:f}}return a&&(s=An(a,c())),{c(){e=E("div"),t=E("input"),i=P(),s&&ce(s.$$.fragment),this.h()},l(u){e=A(u,"DIV",{class:!0,style:!0});var f=w(e);t=A(f,"INPUT",{type:!0,tabindex:!0,class:!0}),i=M(f),s&&ge(s.$$.fragment,f),f.forEach(g),this.h()},h(){_(t,"type","text"),t.readOnly="readonly",_(t,"tabindex","-1"),_(t,"class","jse-hidden-input svelte-15awhio"),_(e,"class","jse-absolute-popup-content svelte-15awhio"),_(e,"style",r=WS(n[1],n[0].options))},m(u,f){B(u,e,f),m(e,t),n[7](t),m(e,i),s&&ue(s,e,null),l=!0},p(u,f){const h=f&1?Xr(o,[Jo(u[0].props)]):{};if(a!==(a=u[0].component)){if(s){Le();const d=s;U(d.$$.fragment,1,0,()=>{fe(d,1)}),Ve()}a?(s=An(a,c()),ce(s.$$.fragment),D(s.$$.fragment,1),ue(s,e,null)):s=null}else a&&s.$set(h);(!l||f&3&&r!==(r=WS(u[1],u[0].options)))&&_(e,"style",r)},i(u){l||(s&&D(s.$$.fragment,u),l=!0)},o(u){s&&U(s.$$.fragment,u),l=!1},d(u){u&&g(e),n[7](null),s&&fe(s)}}}function Iz(n){let e,t,i,s,r=n[1]&&US(n);return{c(){e=E("div"),r&&r.c(),this.h()},l(l){e=A(l,"DIV",{class:!0});var o=w(e);r&&r.l(o),o.forEach(g),this.h()},h(){_(e,"class","jse-absolute-popup svelte-15awhio")},m(l,o){B(l,e,o),r&&r.m(e,null),n[8](e),t=!0,i||(s=[se(Rp,"mousedown",n[3],!0),se(Rp,"keydown",n[4],!0),se(Rp,"wheel",n[5],!0),se(e,"mousedown",Oz),se(e,"keydown",n[4])],i=!0)},p(l,[o]){l[1]?r?(r.p(l,o),o&2&&D(r,1)):(r=US(l),r.c(),D(r,1),r.m(e,null)):r&&(Le(),U(r,1,1,()=>{r=null}),Ve())},i(l){t||(D(r),t=!0)},o(l){U(r),t=!1},d(l){l&&g(e),r&&r.d(),n[8](null),i=!1,on(s)}}}function Oz(n){n.stopPropagation()}function WS(n,e){function t(){if(e.anchor){const{anchor:u,width:f=0,height:h=0,offsetTop:d=0,offsetLeft:p=0,position:v}=e,{left:y,top:b,bottom:S,right:I}=u.getBoundingClientRect(),T=v==="top"||b+h>window.innerHeight&&b>h,C=v==="left"||y+f>window.innerWidth&&y>f;return{left:C?I-p:y+p,top:T?b-d:S+d,positionAbove:T,positionLeft:C}}else if(typeof e.left=="number"&&typeof e.top=="number"){const{left:u,top:f,width:h=0,height:d=0}=e,p=f+d>window.innerHeight&&f>d,v=u+h>window.innerWidth&&u>h;return{left:u,top:f,positionAbove:p,positionLeft:v}}else throw new Error('Invalid config: pass either "left" and "top", or pass "anchor"')}const i=n.getBoundingClientRect(),{left:s,top:r,positionAbove:l,positionLeft:o}=t(),a=l?`bottom: ${i.top-r}px;`:`top: ${r-i.top}px;`,c=o?`right: ${i.left-s}px;`:`left: ${s-i.left}px;`;return a+c}function Rz(n,e,t){let{popup:i}=e,{closeAbsolutePopup:s}=e,r,l;Mi(f);function o(p){i.options&&i.options.closeOnOuterClick&&!vf(p.target,v=>v===r)&&s(i.id)}function a(p){o(p)}function c(p){na(p)==="Escape"&&s(i.id)}function u(p){o(p)}function f(){l&&l.focus()}function h(p){Vt[p?"unshift":"push"](()=>{l=p,t(2,l)})}function d(p){Vt[p?"unshift":"push"](()=>{r=p,t(1,r)})}return n.$$set=p=>{"popup"in p&&t(0,i=p.popup),"closeAbsolutePopup"in p&&t(6,s=p.closeAbsolutePopup)},[i,r,l,a,c,u,s,h,d]}class Dz extends nt{constructor(e){super(),it(this,e,Rz,Iz,Ct,{popup:0,closeAbsolutePopup:6})}}const Nz=Dz;function FS(n,e,t){const i=n.slice();return i[6]=e[t],i}function jS(n){let e,t;return e=new Nz({props:{popup:n[6],closeAbsolutePopup:n[1]}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s&1&&(r.popup=i[6]),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function Pz(n){let e,t,i=n[0],s=[];for(let a=0;a<i.length;a+=1)s[a]=jS(FS(n,i,a));const r=a=>U(s[a],1,1,()=>{s[a]=null}),l=n[3].default,o=os(l,n,n[2],null);return{c(){for(let a=0;a<s.length;a+=1)s[a].c();e=P(),o&&o.c()},l(a){for(let c=0;c<s.length;c+=1)s[c].l(a);e=M(a),o&&o.l(a)},m(a,c){for(let u=0;u<s.length;u+=1)s[u].m(a,c);B(a,e,c),o&&o.m(a,c),t=!0},p(a,[c]){if(c&3){i=a[0];let u;for(u=0;u<i.length;u+=1){const f=FS(a,i,u);s[u]?(s[u].p(f,c),D(s[u],1)):(s[u]=jS(f),s[u].c(),D(s[u],1),s[u].m(e.parentNode,e))}for(Le(),u=i.length;u<s.length;u+=1)r(u);Ve()}o&&o.p&&(!t||c&4)&&as(o,l,a,a[2],t?us(l,a[2],c,null):cs(a[2]),null)},i(a){if(!t){for(let c=0;c<i.length;c+=1)D(s[c]);D(o,a),t=!0}},o(a){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)U(s[c]);U(o,a),t=!1},d(a){Ft(s,a),a&&g(e),o&&o.d(a)}}}function Mz(n,e,t){let{$$slots:i={},$$scope:s}=e;const r=Is("jsoneditor:AbsolutePopup");let l=[];function o(c,u,f){r("open...",u,f);const h={id:tu(),component:c,props:u||{},options:f||{}};return t(0,l=[...l,h]),h.id}function a(c){const u=l.findIndex(f=>f.id===c);if(u!==-1){const f=l[u];f.options.onClose&&f.options.onClose(),t(0,l=l.filter(h=>h.id!==c))}}return Jd("absolute-popup",{openAbsolutePopup:o,closeAbsolutePopup:a}),n.$$set=c=>{"$$scope"in c&&t(2,s=c.$$scope)},n.$$.update=()=>{n.$$.dirty&1&&r("popups",l)},[l,a,s,i]}class Bz extends nt{constructor(e){super(),it(this,e,Mz,Pz,an,{})}}const $O=Bz;var Rl={prefix:"fas",iconName:"caret-right",icon:[256,512,[],"f0da","M246.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-9.2-9.2-22.9-11.9-34.9-6.9s-19.8 16.6-19.8 29.6l0 256c0 12.9 7.8 24.6 19.8 29.6s25.7 2.2 34.9-6.9l128-128z"]},Lz={prefix:"fas",iconName:"paste",icon:[512,512,["file-clipboard"],"f0ea","M160 0c-23.7 0-44.4 12.9-55.4 32H48C21.5 32 0 53.5 0 80V400c0 26.5 21.5 48 48 48H192V176c0-44.2 35.8-80 80-80h48V80c0-26.5-21.5-48-48-48H215.4C204.4 12.9 183.7 0 160 0zM272 128c-26.5 0-48 21.5-48 48V448v16c0 26.5 21.5 48 48 48H464c26.5 0 48-21.5 48-48V256H416c-17.7 0-32-14.3-32-32V128H320 272zM160 40a24 24 0 1 1 0 48 24 24 0 1 1 0-48zm256 88v96h96l-96-96z"]},Vz={prefix:"fas",iconName:"circle-notch",icon:[512,512,[],"f1ce","M222.7 32.1c5 16.9-4.6 34.8-21.5 39.8C121.8 95.6 64 169.1 64 256c0 106 86 192 192 192s192-86 192-192c0-86.9-57.8-160.4-137.1-184.1c-16.9-5-26.6-22.9-21.5-39.8s22.9-26.6 39.8-21.5C434.9 42.1 512 140 512 256c0 141.4-114.6 256-256 256S0 397.4 0 256C0 140 77.1 42.1 182.9 10.6c16.9-5 34.8 4.6 39.8 21.5z"]},Uz={prefix:"fas",iconName:"scissors",icon:[512,512,[9984,9986,9988,"cut"],"f0c4","M256 192l-39.5-39.5c4.9-12.6 7.5-26.2 7.5-40.5C224 50.1 173.9 0 112 0S0 50.1 0 112s50.1 112 112 112c14.3 0 27.9-2.7 40.5-7.5L192 256l-39.5 39.5c-12.6-4.9-26.2-7.5-40.5-7.5C50.1 288 0 338.1 0 400s50.1 112 112 112s112-50.1 112-112c0-14.3-2.7-27.9-7.5-40.5L499.2 76.8c7.1-7.1 7.1-18.5 0-25.6c-28.3-28.3-74.1-28.3-102.4 0L256 192zm22.6 150.6L396.8 460.8c28.3 28.3 74.1 28.3 102.4 0c7.1-7.1 7.1-18.5 0-25.6L342.6 278.6l-64 64zM64 112a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zm48 240a48 48 0 1 1 0 96 48 48 0 1 1 0-96z"]},E1=Uz,Wz={prefix:"fas",iconName:"square-caret-down",icon:[448,512,["caret-square-down"],"f150","M384 480c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l320 0zM224 352c-6.7 0-13-2.8-17.6-7.7l-104-112c-6.5-7-8.2-17.2-4.4-25.9s12.5-14.4 22-14.4l208 0c9.5 0 18.2 5.7 22 14.4s2.1 18.9-4.4 25.9l-104 112c-4.5 4.9-10.9 7.7-17.6 7.7z"]},Fz=Wz,jz={prefix:"fas",iconName:"pen-to-square",icon:[512,512,["edit"],"f044","M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.8 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160V416c0 53 43 96 96 96H352c53 0 96-43 96-96V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96z"]},HS=jz,Hz={prefix:"fas",iconName:"chevron-up",icon:[448,512,[],"f077","M201.4 105.4c12.5-12.5 32.8-12.5 45.3 0l192 192c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L224 173.3 54.6 342.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l192-192z"]},eR={prefix:"fas",iconName:"angle-right",icon:[256,512,[8250],"f105","M246.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L178.7 256 41.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"]},qz={prefix:"fas",iconName:"square-caret-up",icon:[448,512,["caret-square-up"],"f151","M64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zM224 160c6.7 0 13 2.8 17.6 7.7l104 112c6.5 7 8.2 17.2 4.4 25.9s-12.5 14.4-22 14.4H120c-9.5 0-18.2-5.7-22-14.4s-2.1-18.9 4.4-25.9l104-112c4.5-4.9 10.9-7.7 17.6-7.7z"]},zz=qz,Qv={prefix:"fas",iconName:"filter",icon:[512,512,[],"f0b0","M3.9 54.9C10.5 40.9 24.5 32 40 32H472c15.5 0 29.5 8.9 36.1 22.9s4.6 30.5-5.2 42.5L320 320.9V448c0 12.1-6.8 23.2-17.7 28.6s-23.8 4.3-33.5-3l-64-48c-8.1-6-12.8-15.5-12.8-25.6V320.9L9 97.3C-.7 85.4-2.8 68.8 3.9 54.9z"]},fd={prefix:"fas",iconName:"code",icon:[640,512,[],"f121","M392.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6zm80.6 120.1c-12.5 12.5-12.5 32.8 0 45.3L562.7 256l-89.4 89.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l112-112c12.5-12.5 12.5-32.8 0-45.3l-112-112c-12.5-12.5-32.8-12.5-45.3 0zm-306.7 0c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3l112 112c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l89.4-89.4c12.5-12.5 12.5-32.8 0-45.3z"]},Xv={prefix:"fas",iconName:"wrench",icon:[512,512,[128295],"f0ad","M352 320c88.4 0 160-71.6 160-160c0-15.3-2.2-30.1-6.2-44.2c-3.1-10.8-16.4-13.2-24.3-5.3l-76.8 76.8c-3 3-7.1 4.7-11.3 4.7H336c-8.8 0-16-7.2-16-16V118.6c0-4.2 1.7-8.3 4.7-11.3l76.8-76.8c7.9-7.9 5.4-21.2-5.3-24.3C382.1 2.2 367.3 0 352 0C263.6 0 192 71.6 192 160c0 19.1 3.4 37.5 9.5 54.5L19.9 396.1C7.2 408.8 0 426.1 0 444.1C0 481.6 30.4 512 67.9 512c18 0 35.3-7.2 48-19.9L297.5 310.5c17 6.2 35.4 9.5 54.5 9.5zM80 408a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"]},Yv={prefix:"fas",iconName:"pen",icon:[512,512,[128394],"f304","M362.7 19.3L314.3 67.7 444.3 197.7l48.4-48.4c25-25 25-65.5 0-90.5L453.3 19.3c-25-25-65.5-25-90.5 0zm-71 71L58.6 323.5c-10.4 10.4-18 23.3-22.2 37.4L1 481.2C-1.5 489.7 .8 498.8 7 505s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L421.7 220.3 291.7 90.3z"]},Gz={prefix:"fas",iconName:"arrow-rotate-right",icon:[512,512,[8635,"arrow-right-rotate","arrow-rotate-forward","redo"],"f01e","M370.3 160H320c-17.7 0-32 14.3-32 32s14.3 32 32 32H448c17.7 0 32-14.3 32-32V64c0-17.7-14.3-32-32-32s-32 14.3-32 32v51.2L398.4 97.6c-87.5-87.5-229.3-87.5-316.8 0s-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3s163.8-62.5 226.3 0L370.3 160z"]},tR=Gz,Kz={prefix:"fas",iconName:"arrow-rotate-left",icon:[512,512,[8634,"arrow-left-rotate","arrow-rotate-back","arrow-rotate-backward","undo"],"f0e2","M109.7 160H160c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32V64C0 46.3 14.3 32 32 32s32 14.3 32 32v51.2L81.6 97.6c87.5-87.5 229.3-87.5 316.8 0s87.5 229.3 0 316.8s-229.3 87.5-316.8 0c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0c62.5 62.5 163.8 62.5 226.3 0s62.5-163.8 0-226.3s-163.8-62.5-226.3 0L109.7 160z"]},nR=Kz,Qz={prefix:"fas",iconName:"crop-simple",icon:[512,512,["crop-alt"],"f565","M128 32c0-17.7-14.3-32-32-32S64 14.3 64 32V64H32C14.3 64 0 78.3 0 96s14.3 32 32 32H64V384c0 35.3 28.7 64 64 64H352V384H128V32zM384 480c0 17.7 14.3 32 32 32s32-14.3 32-32V448h32c17.7 0 32-14.3 32-32s-14.3-32-32-32H448l0-256c0-35.3-28.7-64-64-64L160 64v64l224 0 0 352z"]},Xz=Qz,Yz={prefix:"fas",iconName:"gear",icon:[512,512,[9881,"cog"],"f013","M481.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-30.9 28.1c-7.7 7.1-11.4 17.5-10.9 27.9c.1 2.9 .2 5.8 .2 8.8s-.1 5.9-.2 8.8c-.5 10.5 3.1 20.9 10.9 27.9l30.9 28.1c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-39.7-12.6c-10-3.2-20.8-1.1-29.7 4.6c-4.9 3.1-9.9 6.1-15.1 8.7c-9.3 4.8-16.5 13.2-18.8 23.4l-8.9 40.7c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-8.9-40.7c-2.2-10.2-9.5-18.6-18.8-23.4c-5.2-2.7-10.2-5.6-15.1-8.7c-8.8-5.7-19.7-7.8-29.7-4.6L69.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l30.9-28.1c7.7-7.1 11.4-17.5 10.9-27.9c-.1-2.9-.2-5.8-.2-8.8s.1-5.9 .2-8.8c.5-10.5-3.1-20.9-10.9-27.9L8.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l39.7 12.6c10 3.2 20.8 1.1 29.7-4.6c4.9-3.1 9.9-6.1 15.1-8.7c9.3-4.8 16.5-13.2 18.8-23.4l8.9-40.7c2-9.1 9-16.3 18.2-17.8C213.3 1.2 227.5 0 242 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l8.9 40.7c2.2 10.2 9.4 18.6 18.8 23.4c5.2 2.7 10.2 5.6 15.1 8.7c8.8 5.7 19.7 7.7 29.7 4.6l39.7-12.6c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM242 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z"]},Jz=Yz,Mr={prefix:"fas",iconName:"caret-down",icon:[320,512,[],"f0d7","M137.4 374.6c12.5 12.5 32.8 12.5 45.3 0l128-128c9.2-9.2 11.9-22.9 6.9-34.9s-16.6-19.8-29.6-19.8L32 192c-12.9 0-24.6 7.8-29.6 19.8s-2.2 25.7 6.9 34.9l128 128z"]},Zz={prefix:"fas",iconName:"ellipsis-vertical",icon:[128,512,["ellipsis-v"],"f142","M56 472a56 56 0 1 1 0-112 56 56 0 1 1 0 112zm0-160a56 56 0 1 1 0-112 56 56 0 1 1 0 112zM0 96a56 56 0 1 1 112 0A56 56 0 1 1 0 96z"]},xz=Zz,$z={prefix:"fas",iconName:"arrow-down-short-wide",icon:[576,512,["sort-amount-desc","sort-amount-down-alt"],"f884","M151.6 469.6C145.5 476.2 137 480 128 480s-17.5-3.8-23.6-10.4l-88-96c-11.9-13-11.1-33.3 2-45.2s33.3-11.1 45.2 2L96 365.7V64c0-17.7 14.3-32 32-32s32 14.3 32 32V365.7l32.4-35.4c11.9-13 32.2-13.9 45.2-2s13.9 32.2 2 45.2l-88 96zM320 32h32c17.7 0 32 14.3 32 32s-14.3 32-32 32H320c-17.7 0-32-14.3-32-32s14.3-32 32-32zm0 128h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H320c-17.7 0-32-14.3-32-32s14.3-32 32-32zm0 128H480c17.7 0 32 14.3 32 32s-14.3 32-32 32H320c-17.7 0-32-14.3-32-32s14.3-32 32-32zm0 128H544c17.7 0 32 14.3 32 32s-14.3 32-32 32H320c-17.7 0-32-14.3-32-32s14.3-32 32-32z"]},Jv=$z,eG={prefix:"fas",iconName:"angle-down",icon:[384,512,[8964],"f107","M169.4 342.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 274.7 54.6 137.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"]},tG={prefix:"fas",iconName:"arrow-down",icon:[384,512,[8595],"f063","M169.4 470.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 370.8 224 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 306.7L54.6 265.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"]},nG={prefix:"fas",iconName:"magnifying-glass",icon:[512,512,[128269,"search"],"f002","M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"]},Zv=nG,iG={prefix:"fas",iconName:"chevron-down",icon:[448,512,[],"f078","M201.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 338.7 54.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z"]},Pu={prefix:"fas",iconName:"copy",icon:[512,512,[],"f0c5","M224 0c-35.3 0-64 28.7-64 64V288c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64H224zM64 160c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H288c35.3 0 64-28.7 64-64V384H288v64H64V224h64V160H64z"]},iR={prefix:"fas",iconName:"xmark",icon:[320,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M310.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L160 210.7 54.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L114.7 256 9.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 301.3 265.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L205.3 256 310.6 150.6z"]},qS=iR,bf=iR,sG={prefix:"fas",iconName:"clone",icon:[512,512,[],"f24d","M0 448c0 35.3 28.7 64 64 64H288c35.3 0 64-28.7 64-64V384H224c-53 0-96-43-96-96V160H64c-35.3 0-64 28.7-64 64V448zm224-96H448c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64H224c-35.3 0-64 28.7-64 64V288c0 35.3 28.7 64 64 64z"]},A1={prefix:"fas",iconName:"check",icon:[512,512,[10003,10004],"f00c","M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"]},rG={prefix:"fas",iconName:"triangle-exclamation",icon:[512,512,[9888,"exclamation-triangle","warning"],"f071","M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"]},ia=rG;function Ff(n,e=1e3){if(n<.9*e)return n.toFixed()+" B";const t=n/e;if(t<.9*e)return t.toFixed(1)+" KB";const i=t/e;if(i<.9*e)return i.toFixed(1)+" MB";const s=i/e;return s<.9*e?s.toFixed(1)+" GB":(s/e).toFixed(1)+" TB"}const jf=Is("jsoneditor:FocusTracker");function sR({onMount:n,onDestroy:e,getWindow:t,hasFocus:i,onFocus:s,onBlur:r}){let l,o=!1;function a(){const u=i();u&&(clearTimeout(l),o||(jf("focus"),s(),o=u))}function c(){o&&(clearTimeout(l),l=setTimeout(()=>{jf("blur"),o=!1,r()}))}n(()=>{jf("mount FocusTracker");const u=t();u&&(u.addEventListener("focusin",a,!0),u.addEventListener("focusout",c,!0))}),e(()=>{jf("destroy FocusTracker");const u=t();u&&(u.removeEventListener("focusin",a,!0),u.removeEventListener("focusout",c,!0))})}function lG(n){let e,t=[n[0]],i={};for(let s=0;s<t.length;s+=1)i=Qr(i,t[s]);return{c(){e=nr("path"),this.h()},l(s){e=ir(s,"path",{}),w(e).forEach(g),this.h()},h(){Nh(e,i)},m(s,r){B(s,e,r)},p(s,[r]){Nh(e,i=Xr(t,[r&1&&s[0]]))},i:Ke,o:Ke,d(s){s&&g(e)}}}function oG(n,e,t){let{data:i={}}=e;return n.$$set=s=>{"data"in s&&t(0,i=s.data)},[i]}class aG extends nt{constructor(e){super(),it(this,e,oG,lG,Ct,{data:0})}}function cG(n){let e,t=[n[0]],i={};for(let s=0;s<t.length;s+=1)i=Qr(i,t[s]);return{c(){e=nr("polygon"),this.h()},l(s){e=ir(s,"polygon",{}),w(e).forEach(g),this.h()},h(){Nh(e,i)},m(s,r){B(s,e,r)},p(s,[r]){Nh(e,i=Xr(t,[r&1&&s[0]]))},i:Ke,o:Ke,d(s){s&&g(e)}}}function uG(n,e,t){let{data:i={}}=e;return n.$$set=s=>{"data"in s&&t(0,i=s.data)},[i]}class fG extends nt{constructor(e){super(),it(this,e,uG,cG,Ct,{data:0})}}function hG(n){let e;return{c(){e=nr("g")},l(t){e=ir(t,"g",{});var i=w(e);i.forEach(g)},m(t,i){B(t,e,i),e.innerHTML=n[0]},p(t,[i]){i&1&&(e.innerHTML=t[0])},i:Ke,o:Ke,d(t){t&&g(e)}}}function dG(n,e,t){let i=870711;function s(){return i+=1,`fa-${i.toString(16)}`}let r,{data:l}=e;function o(a){if(!a||!a.raw)return null;let c=a.raw;const u={};return c=c.replace(/\s(?:xml:)?id=["']?([^"')\s]+)/g,(f,h)=>{const d=s();return u[h]=d,` id="${d}"`}),c=c.replace(/#(?:([^'")\s]+)|xpointer\(id\((['"]?)([^')]+)\2\)\))/g,(f,h,d,p)=>{const v=h||p;return!v||!u[v]?f:`#${u[v]}`}),c}return n.$$set=a=>{"data"in a&&t(1,l=a.data)},n.$$.update=()=>{n.$$.dirty&2&&t(0,r=o(l))},[r,l]}class mG extends nt{constructor(e){super(),it(this,e,dG,hG,Ct,{data:1})}}function pG(n){let e,t,i,s;const r=n[13].default,l=os(r,n,n[12],null);return{c(){e=nr("svg"),l&&l.c(),this.h()},l(o){e=ir(o,"svg",{version:!0,class:!0,x:!0,y:!0,width:!0,height:!0,"aria-label":!0,role:!0,viewBox:!0,style:!0});var a=w(e);l&&l.l(a),a.forEach(g),this.h()},h(){_(e,"version","1.1"),_(e,"class",t="fa-icon "+n[0]+" svelte-1dof0an"),_(e,"x",n[8]),_(e,"y",n[9]),_(e,"width",n[1]),_(e,"height",n[2]),_(e,"aria-label",n[11]),_(e,"role",i=n[11]?"img":"presentation"),_(e,"viewBox",n[3]),_(e,"style",n[10]),xe(e,"fa-spin",n[4]),xe(e,"fa-pulse",n[6]),xe(e,"fa-inverse",n[5]),xe(e,"fa-flip-horizontal",n[7]==="horizontal"),xe(e,"fa-flip-vertical",n[7]==="vertical")},m(o,a){B(o,e,a),l&&l.m(e,null),s=!0},p(o,[a]){l&&l.p&&(!s||a&4096)&&as(l,r,o,o[12],s?us(r,o[12],a,null):cs(o[12]),null),(!s||a&1&&t!==(t="fa-icon "+o[0]+" svelte-1dof0an"))&&_(e,"class",t),(!s||a&256)&&_(e,"x",o[8]),(!s||a&512)&&_(e,"y",o[9]),(!s||a&2)&&_(e,"width",o[1]),(!s||a&4)&&_(e,"height",o[2]),(!s||a&2048)&&_(e,"aria-label",o[11]),(!s||a&2048&&i!==(i=o[11]?"img":"presentation"))&&_(e,"role",i),(!s||a&8)&&_(e,"viewBox",o[3]),(!s||a&1024)&&_(e,"style",o[10]),(!s||a&17)&&xe(e,"fa-spin",o[4]),(!s||a&65)&&xe(e,"fa-pulse",o[6]),(!s||a&33)&&xe(e,"fa-inverse",o[5]),(!s||a&129)&&xe(e,"fa-flip-horizontal",o[7]==="horizontal"),(!s||a&129)&&xe(e,"fa-flip-vertical",o[7]==="vertical")},i(o){s||(D(l,o),s=!0)},o(o){U(l,o),s=!1},d(o){o&&g(e),l&&l.d(o)}}}function gG(n,e,t){let{$$slots:i={},$$scope:s}=e,{class:r}=e,{width:l}=e,{height:o}=e,{box:a}=e,{spin:c=!1}=e,{inverse:u=!1}=e,{pulse:f=!1}=e,{flip:h=null}=e,{x:d=void 0}=e,{y:p=void 0}=e,{style:v=void 0}=e,{label:y=void 0}=e;return n.$$set=b=>{"class"in b&&t(0,r=b.class),"width"in b&&t(1,l=b.width),"height"in b&&t(2,o=b.height),"box"in b&&t(3,a=b.box),"spin"in b&&t(4,c=b.spin),"inverse"in b&&t(5,u=b.inverse),"pulse"in b&&t(6,f=b.pulse),"flip"in b&&t(7,h=b.flip),"x"in b&&t(8,d=b.x),"y"in b&&t(9,p=b.y),"style"in b&&t(10,v=b.style),"label"in b&&t(11,y=b.label),"$$scope"in b&&t(12,s=b.$$scope)},[r,l,o,a,c,u,f,h,d,p,v,y,s,i]}class vG extends nt{constructor(e){super(),it(this,e,gG,pG,Ct,{class:0,width:1,height:2,box:3,spin:4,inverse:5,pulse:6,flip:7,x:8,y:9,style:10,label:11})}}function zS(n,e,t){const i=n.slice();return i[24]=e[t],i}function GS(n,e,t){const i=n.slice();return i[27]=e[t],i}function KS(n){let e,t,i,s,r=n[6].paths&&QS(n),l=n[6].polygons&&YS(n),o=n[6].raw&&ZS(n);return{c(){r&&r.c(),e=P(),l&&l.c(),t=P(),o&&o.c(),i=et()},l(a){r&&r.l(a),e=M(a),l&&l.l(a),t=M(a),o&&o.l(a),i=et()},m(a,c){r&&r.m(a,c),B(a,e,c),l&&l.m(a,c),B(a,t,c),o&&o.m(a,c),B(a,i,c),s=!0},p(a,c){a[6].paths?r?(r.p(a,c),c&64&&D(r,1)):(r=QS(a),r.c(),D(r,1),r.m(e.parentNode,e)):r&&(Le(),U(r,1,1,()=>{r=null}),Ve()),a[6].polygons?l?(l.p(a,c),c&64&&D(l,1)):(l=YS(a),l.c(),D(l,1),l.m(t.parentNode,t)):l&&(Le(),U(l,1,1,()=>{l=null}),Ve()),a[6].raw?o?(o.p(a,c),c&64&&D(o,1)):(o=ZS(a),o.c(),D(o,1),o.m(i.parentNode,i)):o&&(Le(),U(o,1,1,()=>{o=null}),Ve())},i(a){s||(D(r),D(l),D(o),s=!0)},o(a){U(r),U(l),U(o),s=!1},d(a){r&&r.d(a),a&&g(e),l&&l.d(a),a&&g(t),o&&o.d(a),a&&g(i)}}}function QS(n){let e,t,i=n[6].paths,s=[];for(let l=0;l<i.length;l+=1)s[l]=XS(GS(n,i,l));const r=l=>U(s[l],1,1,()=>{s[l]=null});return{c(){for(let l=0;l<s.length;l+=1)s[l].c();e=et()},l(l){for(let o=0;o<s.length;o+=1)s[o].l(l);e=et()},m(l,o){for(let a=0;a<s.length;a+=1)s[a].m(l,o);B(l,e,o),t=!0},p(l,o){if(o&64){i=l[6].paths;let a;for(a=0;a<i.length;a+=1){const c=GS(l,i,a);s[a]?(s[a].p(c,o),D(s[a],1)):(s[a]=XS(c),s[a].c(),D(s[a],1),s[a].m(e.parentNode,e))}for(Le(),a=i.length;a<s.length;a+=1)r(a);Ve()}},i(l){if(!t){for(let o=0;o<i.length;o+=1)D(s[o]);t=!0}},o(l){s=s.filter(Boolean);for(let o=0;o<s.length;o+=1)U(s[o]);t=!1},d(l){Ft(s,l),l&&g(e)}}}function XS(n){let e,t;return e=new aG({props:{data:n[27]}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s&64&&(r.data=i[27]),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function YS(n){let e,t,i=n[6].polygons,s=[];for(let l=0;l<i.length;l+=1)s[l]=JS(zS(n,i,l));const r=l=>U(s[l],1,1,()=>{s[l]=null});return{c(){for(let l=0;l<s.length;l+=1)s[l].c();e=et()},l(l){for(let o=0;o<s.length;o+=1)s[o].l(l);e=et()},m(l,o){for(let a=0;a<s.length;a+=1)s[a].m(l,o);B(l,e,o),t=!0},p(l,o){if(o&64){i=l[6].polygons;let a;for(a=0;a<i.length;a+=1){const c=zS(l,i,a);s[a]?(s[a].p(c,o),D(s[a],1)):(s[a]=JS(c),s[a].c(),D(s[a],1),s[a].m(e.parentNode,e))}for(Le(),a=i.length;a<s.length;a+=1)r(a);Ve()}},i(l){if(!t){for(let o=0;o<i.length;o+=1)D(s[o]);t=!0}},o(l){s=s.filter(Boolean);for(let o=0;o<s.length;o+=1)U(s[o]);t=!1},d(l){Ft(s,l),l&&g(e)}}}function JS(n){let e,t;return e=new fG({props:{data:n[24]}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s&64&&(r.data=i[24]),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function ZS(n){let e,t,i;function s(l){n[15](l)}let r={};return n[6]!==void 0&&(r.data=n[6]),e=new mG({props:r}),Vt.push(()=>Us(e,"data",s)),{c(){ce(e.$$.fragment)},l(l){ge(e.$$.fragment,l)},m(l,o){ue(e,l,o),i=!0},p(l,o){const a={};!t&&o&64&&(t=!0,a.data=l[6],Js(()=>t=!1)),e.$set(a)},i(l){i||(D(e.$$.fragment,l),i=!0)},o(l){U(e.$$.fragment,l),i=!1},d(l){fe(e,l)}}}function bG(n){let e,t,i=n[6]&&KS(n);return{c(){i&&i.c(),e=et()},l(s){i&&i.l(s),e=et()},m(s,r){i&&i.m(s,r),B(s,e,r),t=!0},p(s,r){s[6]?i?(i.p(s,r),r&64&&D(i,1)):(i=KS(s),i.c(),D(i,1),i.m(e.parentNode,e)):i&&(Le(),U(i,1,1,()=>{i=null}),Ve())},i(s){t||(D(i),t=!0)},o(s){U(i),t=!1},d(s){i&&i.d(s),s&&g(e)}}}function _G(n){let e;const t=n[14].default,i=os(t,n,n[16],null),s=i||bG(n);return{c(){s&&s.c()},l(r){s&&s.l(r)},m(r,l){s&&s.m(r,l),e=!0},p(r,l){i?i.p&&(!e||l&65536)&&as(i,t,r,r[16],e?us(t,r[16],l,null):cs(r[16]),null):s&&s.p&&(!e||l&64)&&s.p(r,e?l:-1)},i(r){e||(D(s,r),e=!0)},o(r){U(s,r),e=!1},d(r){s&&s.d(r)}}}function yG(n){let e,t;return e=new vG({props:{label:n[5],width:n[7],height:n[8],box:n[10],style:n[9],spin:n[1],flip:n[4],inverse:n[2],pulse:n[3],class:n[0],$$slots:{default:[_G]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,[s]){const r={};s&32&&(r.label=i[5]),s&128&&(r.width=i[7]),s&256&&(r.height=i[8]),s&1024&&(r.box=i[10]),s&512&&(r.style=i[9]),s&2&&(r.spin=i[1]),s&16&&(r.flip=i[4]),s&4&&(r.inverse=i[2]),s&8&&(r.pulse=i[3]),s&1&&(r.class=i[0]),s&65600&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}let xS=1;function SG(n){if("iconName"in n&&"icon"in n){let e={},t=n.icon,i=n.iconName,s=t[0],r=t[1],l=t[4],o={width:s,height:r,paths:[{d:l}]};return e[i]=o,e}return n}function EG(n,e,t){let{$$slots:i={},$$scope:s}=e,{class:r=""}=e,{data:l}=e,{scale:o=1}=e,{spin:a=!1}=e,{inverse:c=!1}=e,{pulse:u=!1}=e,{flip:f=null}=e,{label:h=null}=e,d=null,{style:p=null}=e,v,y,b,S;function I(){if(typeof l>"u")return;const W=SG(l),[z]=Object.keys(W),Y=W[z];Y.paths||(Y.paths=[]),Y.d&&Y.paths.push({d:Y.d}),Y.polygons||(Y.polygons=[]),Y.points&&Y.polygons.push({points:Y.points}),t(6,d=Y)}function T(){let W=1;return typeof o<"u"&&(W=Number(o)),isNaN(W)||W<=0?(console.warn('Invalid prop: prop "scale" should be a number over 0.'),xS):W*xS}function C(){return d?`0 0 ${d.width} ${d.height}`:`0 0 ${v} ${y}`}function k(){return d?Math.max(d.width,d.height)/16:1}function R(){return d?d.width/k()*T():0}function O(){return d?d.height/k()*T():0}function N(){let W="";p!==null&&(W+=p);let z=T();return z===1?W.length===0?void 0:W:(W!==""&&!W.endsWith(";")&&(W+="; "),`${W}font-size: ${z}em`)}function F(W){d=W,t(6,d)}return n.$$set=W=>{"class"in W&&t(0,r=W.class),"data"in W&&t(11,l=W.data),"scale"in W&&t(12,o=W.scale),"spin"in W&&t(1,a=W.spin),"inverse"in W&&t(2,c=W.inverse),"pulse"in W&&t(3,u=W.pulse),"flip"in W&&t(4,f=W.flip),"label"in W&&t(5,h=W.label),"style"in W&&t(13,p=W.style),"$$scope"in W&&t(16,s=W.$$scope)},n.$$.update=()=>{n.$$.dirty&14336&&(I(),t(7,v=R()),t(8,y=O()),t(9,b=N()),t(10,S=C()))},[r,a,c,u,f,h,d,v,y,b,S,l,o,p,i,F,s]}class Wt extends nt{constructor(e){super(),it(this,e,EG,yG,Ct,{class:0,data:11,scale:12,spin:1,inverse:2,pulse:3,flip:4,label:5,style:13})}}function $S(n,e,t){const i=n.slice();return i[8]=e[t],i}function eE(n){let e,t;return e=new Wt({props:{data:n[1]}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s&2&&(r.data=i[1]),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function tE(n){let e,t;return e=new Wt({props:{data:n[8].icon}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s&8&&(r.data=i[8].icon),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function nE(n){let e,t,i=n[8].text+"",s,r,l,o,a,c,u,f=n[8].icon&&tE(n);function h(){return n[6](n[8])}function d(){return n[7](n[8])}return{c(){e=E("button"),f&&f.c(),t=P(),s=L(i),r=P(),this.h()},l(p){e=A(p,"BUTTON",{type:!0,class:!0,title:!0});var v=w(e);f&&f.l(v),t=M(v),s=V(v,i),r=M(v),v.forEach(g),this.h()},h(){_(e,"type","button"),_(e,"class","jse-button jse-action jse-primary svelte-c24vac"),_(e,"title",l=n[8].title),e.disabled=o=n[8].disabled},m(p,v){B(p,e,v),f&&f.m(e,null),m(e,t),m(e,s),m(e,r),a=!0,c||(u=[se(e,"click",h),se(e,"mousedown",d)],c=!0)},p(p,v){n=p,n[8].icon?f?(f.p(n,v),v&8&&D(f,1)):(f=tE(n),f.c(),D(f,1),f.m(e,t)):f&&(Le(),U(f,1,1,()=>{f=null}),Ve()),(!a||v&8)&&i!==(i=n[8].text+"")&&Ce(s,i),(!a||v&8&&l!==(l=n[8].title))&&_(e,"title",l),(!a||v&8&&o!==(o=n[8].disabled))&&(e.disabled=o)},i(p){a||(D(f),a=!0)},o(p){U(f),a=!1},d(p){p&&g(e),f&&f.d(),c=!1,on(u)}}}function AG(n){let e,t,i,s,r,l,o,a,c,u,f=n[1]&&eE(n),h=n[3],d=[];for(let v=0;v<h.length;v+=1)d[v]=nE($S(n,h,v));const p=v=>U(d[v],1,1,()=>{d[v]=null});return{c(){e=E("div"),t=E("div"),f&&f.c(),i=P(),s=L(n[2]),r=P(),l=E("div");for(let v=0;v<d.length;v+=1)d[v].c();this.h()},l(v){e=A(v,"DIV",{class:!0});var y=w(e);t=A(y,"DIV",{class:!0});var b=w(t);f&&f.l(b),i=M(b),s=V(b,n[2]),b.forEach(g),r=M(y),l=A(y,"DIV",{class:!0});var S=w(l);for(let I=0;I<d.length;I+=1)d[I].l(S);S.forEach(g),y.forEach(g),this.h()},h(){_(t,"class","jse-text svelte-c24vac"),xe(t,"jse-clickable",n[4]!==null),_(l,"class","jse-actions svelte-c24vac"),_(e,"class",o="jse-message jse-"+n[0]+" svelte-c24vac")},m(v,y){B(v,e,y),m(e,t),f&&f.m(t,null),m(t,i),m(t,s),m(e,r),m(e,l);for(let b=0;b<d.length;b+=1)d[b].m(l,null);a=!0,c||(u=se(t,"click",n[5]),c=!0)},p(v,[y]){if(v[1]?f?(f.p(v,y),y&2&&D(f,1)):(f=eE(v),f.c(),D(f,1),f.m(t,i)):f&&(Le(),U(f,1,1,()=>{f=null}),Ve()),(!a||y&4)&&Ce(s,v[2]),(!a||y&16)&&xe(t,"jse-clickable",v[4]!==null),y&8){h=v[3];let b;for(b=0;b<h.length;b+=1){const S=$S(v,h,b);d[b]?(d[b].p(S,y),D(d[b],1)):(d[b]=nE(S),d[b].c(),D(d[b],1),d[b].m(l,null))}for(Le(),b=h.length;b<d.length;b+=1)p(b);Ve()}(!a||y&1&&o!==(o="jse-message jse-"+v[0]+" svelte-c24vac"))&&_(e,"class",o)},i(v){if(!a){D(f);for(let y=0;y<h.length;y+=1)D(d[y]);a=!0}},o(v){U(f),d=d.filter(Boolean);for(let y=0;y<d.length;y+=1)U(d[y]);a=!1},d(v){v&&g(e),f&&f.d(),Ft(d,v),c=!1,u()}}}function wG(n,e,t){let{type:i="success"}=e,{icon:s=void 0}=e,{message:r=void 0}=e,{actions:l=[]}=e,{onClick:o=void 0}=e;function a(){o&&o()}const c=f=>{f.onClick&&f.onClick()},u=f=>{f.onMouseDown&&f.onMouseDown()};return n.$$set=f=>{"type"in f&&t(0,i=f.type),"icon"in f&&t(1,s=f.icon),"message"in f&&t(2,r=f.message),"actions"in f&&t(3,l=f.actions),"onClick"in f&&t(4,o=f.onClick)},[i,s,r,l,o,a,c,u]}class CG extends nt{constructor(e){super(),it(this,e,wG,AG,an,{type:0,icon:1,message:2,actions:3,onClick:4})}}const sa=CG;function gl(n){return"$"+n.map(kG).join("")}function kG(n){if(lR.test(n))return"["+n+"]";if(rR.test(n))return"."+n;{const e=JSON.stringify(n);return"['"+e.substring(1,e.length-1).replace(/\\"/g,'"')+"']"}}function w1(n){return n.replace(/^\$/,"").replace(/^\./,"")}function TG(n){return n.startsWith("$")?n:!n.startsWith("[")&&!n.startsWith(".")?"$."+n:"$"+n}function IG(n){let e=TG(n.trim()).substring(1);const t=[];for(;e.length>0;){const i=e.match(NG);if(!i)throw new SyntaxError(`Cannot parse path: unexpected part "${e}" at position ${n.length-e.length}`);t.push(i[1]||i[2]||i[3]),e=e.substring(i[0].length)}return t}const OG="^\\.([A-zA-Z$_][a-zA-Z$_0-9]*)",RG="^\\[([0-9]+)]",DG="^\\['(.*)']",NG=new RegExp([OG,RG,DG].join("|"));function pa(n){return{value:n,label:ii(n)?"(whole item)":w1(gl(n))}}function ao(n){return n.map(e=>lR.test(e)?`?.[${e}]`:rR.test(e)?`?.${e}`:`?.[${JSON.stringify(e)}]`).join("")}const rR=/^[a-zA-Z$_][a-zA-Z$_\d]*$/,lR=/^\d+$/;function PG(){return Bm(n=>n,gl)}function iE(n,e,t){const i=n.slice();return i[6]=e[t],i[8]=t,i}function sE(n){let e,t,i,s;const r=[BG,MG],l=[];function o(a,c){return a[2]||a[0].length===1?0:1}return t=o(n),i=l[t]=r[t](n),{c(){e=E("div"),i.c(),this.h()},l(a){e=A(a,"DIV",{class:!0});var c=w(e);i.l(c),c.forEach(g),this.h()},h(){_(e,"class","jse-validation-errors-overview svelte-1hu2cx3")},m(a,c){B(a,e,c),l[t].m(e,null),s=!0},p(a,c){let u=t;t=o(a),t===u?l[t].p(a,c):(Le(),U(l[u],1,1,()=>{l[u]=null}),Ve(),i=l[t],i?i.p(a,c):(i=l[t]=r[t](a),i.c()),D(i,1),i.m(e,null))},i(a){s||(D(i),s=!0)},o(a){U(i),s=!1},d(a){a&&g(e),l[t].d()}}}function MG(n){let e,t,i,s,r,l,o,a=n[0].length+"",c,u,f,h,d,p,v;return r=new Wt({props:{data:ia}}),h=new Wt({props:{data:eR}}),{c(){e=E("table"),t=E("tbody"),i=E("tr"),s=E("td"),ce(r.$$.fragment),l=P(),o=E("td"),c=L(a),u=L(` validation errors
              `),f=E("div"),ce(h.$$.fragment),this.h()},l(y){e=A(y,"TABLE",{class:!0});var b=w(e);t=A(b,"TBODY",{});var S=w(t);i=A(S,"TR",{class:!0});var I=w(i);s=A(I,"TD",{class:!0});var T=w(s);ge(r.$$.fragment,T),T.forEach(g),l=M(I),o=A(I,"TD",{class:!0});var C=w(o);c=V(C,a),u=V(C,` validation errors
              `),f=A(C,"DIV",{class:!0});var k=w(f);ge(h.$$.fragment,k),k.forEach(g),C.forEach(g),I.forEach(g),S.forEach(g),b.forEach(g),this.h()},h(){_(s,"class","jse-validation-error-icon svelte-1hu2cx3"),_(f,"class","jse-validation-errors-expand svelte-1hu2cx3"),_(o,"class","svelte-1hu2cx3"),_(i,"class","jse-validation-error svelte-1hu2cx3"),_(e,"class","svelte-1hu2cx3")},m(y,b){B(y,e,b),m(e,t),m(t,i),m(i,s),ue(r,s,null),m(i,l),m(i,o),m(o,c),m(o,u),m(o,f),ue(h,f,null),d=!0,p||(v=se(i,"click",n[4]),p=!0)},p(y,b){(!d||b&1)&&a!==(a=y[0].length+"")&&Ce(c,a)},i(y){d||(D(r.$$.fragment,y),D(h.$$.fragment,y),d=!0)},o(y){U(r.$$.fragment,y),U(h.$$.fragment,y),d=!1},d(y){y&&g(e),fe(r),fe(h),p=!1,v()}}}function BG(n){let e,t,i,s=n[0],r=[];for(let o=0;o<s.length;o+=1)r[o]=lE(iE(n,s,o));const l=o=>U(r[o],1,1,()=>{r[o]=null});return{c(){e=E("table"),t=E("tbody");for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){e=A(o,"TABLE",{class:!0});var a=w(e);t=A(a,"TBODY",{});var c=w(t);for(let u=0;u<r.length;u+=1)r[u].l(c);c.forEach(g),a.forEach(g),this.h()},h(){_(e,"class","svelte-1hu2cx3")},m(o,a){B(o,e,a),m(e,t);for(let c=0;c<r.length;c+=1)r[c].m(t,null);i=!0},p(o,a){if(a&11){s=o[0];let c;for(c=0;c<s.length;c+=1){const u=iE(o,s,c);r[c]?(r[c].p(u,a),D(r[c],1)):(r[c]=lE(u),r[c].c(),D(r[c],1),r[c].m(t,null))}for(Le(),c=s.length;c<r.length;c+=1)l(c);Ve()}},i(o){if(!i){for(let a=0;a<s.length;a+=1)D(r[a]);i=!0}},o(o){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)U(r[a]);i=!1},d(o){o&&g(e),Ft(r,o)}}}function rE(n){let e,t,i,s,r;return t=new Wt({props:{data:eG}}),{c(){e=E("button"),ce(t.$$.fragment),this.h()},l(l){e=A(l,"BUTTON",{type:!0,class:!0,title:!0});var o=w(e);ge(t.$$.fragment,o),o.forEach(g),this.h()},h(){_(e,"type","button"),_(e,"class","jse-validation-errors-collapse svelte-1hu2cx3"),_(e,"title","Collapse validation errors")},m(l,o){B(l,e,o),ue(t,e,null),i=!0,s||(r=se(e,"click",k0(n[3])),s=!0)},p:Ke,i(l){i||(D(t.$$.fragment,l),i=!0)},o(l){U(t.$$.fragment,l),i=!1},d(l){l&&g(e),fe(t),s=!1,r()}}}function lE(n){let e,t,i,s,r,l=w1(gl(n[6].path))+"",o,a,c,u=n[6].message+"",f,h,d,p,v,y,b;i=new Wt({props:{data:ia}});let S=n[8]===0&&n[0].length>1&&rE(n);function I(){return n[5](n[6])}return{c(){e=E("tr"),t=E("td"),ce(i.$$.fragment),s=P(),r=E("td"),o=L(l),a=P(),c=E("td"),f=L(u),h=P(),d=E("td"),S&&S.c(),p=P(),this.h()},l(T){e=A(T,"TR",{class:!0});var C=w(e);t=A(C,"TD",{class:!0});var k=w(t);ge(i.$$.fragment,k),k.forEach(g),s=M(C),r=A(C,"TD",{class:!0});var R=w(r);o=V(R,l),R.forEach(g),a=M(C),c=A(C,"TD",{class:!0});var O=w(c);f=V(O,u),O.forEach(g),h=M(C),d=A(C,"TD",{class:!0});var N=w(d);S&&S.l(N),N.forEach(g),p=M(C),C.forEach(g),this.h()},h(){_(t,"class","jse-validation-error-icon svelte-1hu2cx3"),_(r,"class","svelte-1hu2cx3"),_(c,"class","svelte-1hu2cx3"),_(d,"class","jse-validation-error-action svelte-1hu2cx3"),_(e,"class","jse-validation-error svelte-1hu2cx3")},m(T,C){B(T,e,C),m(e,t),ue(i,t,null),m(e,s),m(e,r),m(r,o),m(e,a),m(e,c),m(c,f),m(e,h),m(e,d),S&&S.m(d,null),m(e,p),v=!0,y||(b=se(e,"click",I),y=!0)},p(T,C){n=T,(!v||C&1)&&l!==(l=w1(gl(n[6].path))+"")&&Ce(o,l),(!v||C&1)&&u!==(u=n[6].message+"")&&Ce(f,u),n[8]===0&&n[0].length>1?S?(S.p(n,C),C&1&&D(S,1)):(S=rE(n),S.c(),D(S,1),S.m(d,null)):S&&(Le(),U(S,1,1,()=>{S=null}),Ve())},i(T){v||(D(i.$$.fragment,T),D(S),v=!0)},o(T){U(i.$$.fragment,T),U(S),v=!1},d(T){T&&g(e),fe(i),S&&S.d(),y=!1,b()}}}function LG(n){let e=!ii(n[0]),t,i,s=e&&sE(n);return{c(){s&&s.c(),t=et()},l(r){s&&s.l(r),t=et()},m(r,l){s&&s.m(r,l),B(r,t,l),i=!0},p(r,[l]){l&1&&(e=!ii(r[0])),e?s?(s.p(r,l),l&1&&D(s,1)):(s=sE(r),s.c(),D(s,1),s.m(t.parentNode,t)):s&&(Le(),U(s,1,1,()=>{s=null}),Ve())},i(r){i||(D(s),i=!0)},o(r){U(s),i=!1},d(r){s&&s.d(r),r&&g(t)}}}function VG(n,e,t){let{validationErrors:i}=e,{selectError:s}=e,r=!0;function l(){t(2,r=!1)}function o(){t(2,r=!0)}const a=c=>{setTimeout(()=>s(c))};return n.$$set=c=>{"validationErrors"in c&&t(0,i=c.validationErrors),"selectError"in c&&t(1,s=c.selectError)},[i,s,r,l,o,a]}class UG extends nt{constructor(e){super(),it(this,e,VG,LG,an,{validationErrors:0,selectError:1})}}const oR=UG,WG={prefix:"fas",iconName:"jsoneditor-expand",icon:[512,512,[],null,"M 0,448 V 512 h 512 v -64 z M 0,0 V 64 H 512 V 0 Z M 256,96 128,224 h 256 z M 256,416 384,288 H 128 Z"]},FG={prefix:"fas",iconName:"jsoneditor-collapse",icon:[512,512,[],null,"m 0,224 v 64 h 512 v -64 z M 256,192 384,64 H 128 Z M 256,320 128,448 h 256 z"]},jG={prefix:"fas",iconName:"jsoneditor-format",icon:[512,512,[],null,"M 0,32 v 64 h 416 v -64 z M 160,160 v 64 h 352 v -64 z M 160,288 v 64 h 288 v -64 z M 0,416 v 64 h 320 v -64 z"]},HG={prefix:"fas",iconName:"jsoneditor-compact",icon:[512,512,[],null,"M 0,32 v 64 h 512 v -64 z M 0,160 v 64 h 512 v -64 z M 0,288 v 64 h 352 v -64 z"]};const qG=n=>({}),oE=n=>({});function aE(n,e,t){const i=n.slice();return i[3]=e[t],i}const zG=n=>({}),cE=n=>({});function GG(n){let e,t,i,s,r,l,o,a,c=n[3].icon&&uE(n),u=n[3].text&&fE(n);return{c(){e=E("button"),c&&c.c(),t=P(),u&&u.c(),this.h()},l(f){e=A(f,"BUTTON",{type:!0,class:!0,title:!0});var h=w(e);c&&c.l(h),t=M(h),u&&u.l(h),h.forEach(g),this.h()},h(){_(e,"type","button"),_(e,"class",i="jse-button "+n[3].className+" svelte-31blda"),_(e,"title",s=n[3].title),e.disabled=r=n[3].disabled||!1},m(f,h){B(f,e,h),c&&c.m(e,null),m(e,t),u&&u.m(e,null),l=!0,o||(a=se(e,"click",function(){Mn(n[3].onClick)&&n[3].onClick.apply(this,arguments)}),o=!0)},p(f,h){n=f,n[3].icon?c?(c.p(n,h),h&1&&D(c,1)):(c=uE(n),c.c(),D(c,1),c.m(e,t)):c&&(Le(),U(c,1,1,()=>{c=null}),Ve()),n[3].text?u?u.p(n,h):(u=fE(n),u.c(),u.m(e,null)):u&&(u.d(1),u=null),(!l||h&1&&i!==(i="jse-button "+n[3].className+" svelte-31blda"))&&_(e,"class",i),(!l||h&1&&s!==(s=n[3].title))&&_(e,"title",s),(!l||h&1&&r!==(r=n[3].disabled||!1))&&(e.disabled=r)},i(f){l||(D(c),l=!0)},o(f){U(c),l=!1},d(f){f&&g(e),c&&c.d(),u&&u.d(),o=!1,a()}}}function KG(n){let e;return{c(){e=E("div"),this.h()},l(t){e=A(t,"DIV",{class:!0}),w(e).forEach(g),this.h()},h(){_(e,"class","jse-space svelte-31blda")},m(t,i){B(t,e,i)},p:Ke,i:Ke,o:Ke,d(t){t&&g(e)}}}function QG(n){let e;return{c(){e=E("div"),this.h()},l(t){e=A(t,"DIV",{class:!0}),w(e).forEach(g),this.h()},h(){_(e,"class","jse-separator svelte-31blda")},m(t,i){B(t,e,i)},p:Ke,i:Ke,o:Ke,d(t){t&&g(e)}}}function uE(n){let e,t;return e=new Wt({props:{data:n[3].icon}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s&1&&(r.data=i[3].icon),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function fE(n){let e=n[3].text+"",t;return{c(){t=L(e)},l(i){t=V(i,e)},m(i,s){B(i,t,s)},p(i,s){s&1&&e!==(e=i[3].text+"")&&Ce(t,e)},d(i){i&&g(t)}}}function hE(n){let e,t,i,s;const r=[QG,KG,GG],l=[];function o(a,c){return a[3].separator===!0?0:a[3].space===!0?1:2}return e=o(n),t=l[e]=r[e](n),{c(){t.c(),i=et()},l(a){t.l(a),i=et()},m(a,c){l[e].m(a,c),B(a,i,c),s=!0},p(a,c){let u=e;e=o(a),e===u?l[e].p(a,c):(Le(),U(l[u],1,1,()=>{l[u]=null}),Ve(),t=l[e],t?t.p(a,c):(t=l[e]=r[e](a),t.c()),D(t,1),t.m(i.parentNode,i))},i(a){s||(D(t),s=!0)},o(a){U(t),s=!1},d(a){l[e].d(a),a&&g(i)}}}function XG(n){let e,t,i,s;const r=n[2].left,l=os(r,n,n[1],cE);let o=n[0],a=[];for(let h=0;h<o.length;h+=1)a[h]=hE(aE(n,o,h));const c=h=>U(a[h],1,1,()=>{a[h]=null}),u=n[2].right,f=os(u,n,n[1],oE);return{c(){e=E("div"),l&&l.c(),t=P();for(let h=0;h<a.length;h+=1)a[h].c();i=P(),f&&f.c(),this.h()},l(h){e=A(h,"DIV",{class:!0});var d=w(e);l&&l.l(d),t=M(d);for(let p=0;p<a.length;p+=1)a[p].l(d);i=M(d),f&&f.l(d),d.forEach(g),this.h()},h(){_(e,"class","jse-menu svelte-31blda")},m(h,d){B(h,e,d),l&&l.m(e,null),m(e,t);for(let p=0;p<a.length;p+=1)a[p].m(e,null);m(e,i),f&&f.m(e,null),s=!0},p(h,[d]){if(l&&l.p&&(!s||d&2)&&as(l,r,h,h[1],s?us(r,h[1],d,zG):cs(h[1]),cE),d&1){o=h[0];let p;for(p=0;p<o.length;p+=1){const v=aE(h,o,p);a[p]?(a[p].p(v,d),D(a[p],1)):(a[p]=hE(v),a[p].c(),D(a[p],1),a[p].m(e,i))}for(Le(),p=o.length;p<a.length;p+=1)c(p);Ve()}f&&f.p&&(!s||d&2)&&as(f,u,h,h[1],s?us(u,h[1],d,qG):cs(h[1]),oE)},i(h){if(!s){D(l,h);for(let d=0;d<o.length;d+=1)D(a[d]);D(f,h),s=!0}},o(h){U(l,h),a=a.filter(Boolean);for(let d=0;d<a.length;d+=1)U(a[d]);U(f,h),s=!1},d(h){h&&g(e),l&&l.d(h),Ft(a,h),f&&f.d(h)}}}function YG(n,e,t){let{$$slots:i={},$$scope:s}=e,{items:r=[]}=e;return n.$$set=l=>{"items"in l&&t(0,r=l.items),"$$scope"in l&&t(1,s=l.$$scope)},[r,s,i]}class JG extends nt{constructor(e){super(),it(this,e,YG,XG,an,{items:0})}}const xv=JG;function ZG(n){let e,t;return e=new xv({props:{items:n[0]}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,[s]){const r={};s&1&&(r.items=i[0]),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function xG(n,e,t){let i,s,{readOnly:r=!1}=e,{onFormat:l}=e,{onCompact:o}=e,{onSort:a}=e,{onTransform:c}=e,{onToggleSearch:u}=e,{onUndo:f}=e,{onRedo:h}=e,{canUndo:d}=e,{canRedo:p}=e,{canFormat:v}=e,{canCompact:y}=e,{canSort:b}=e,{canTransform:S}=e,{onRenderMenu:I=Hn}=e;return n.$$set=T=>{"readOnly"in T&&t(1,r=T.readOnly),"onFormat"in T&&t(2,l=T.onFormat),"onCompact"in T&&t(3,o=T.onCompact),"onSort"in T&&t(4,a=T.onSort),"onTransform"in T&&t(5,c=T.onTransform),"onToggleSearch"in T&&t(6,u=T.onToggleSearch),"onUndo"in T&&t(7,f=T.onUndo),"onRedo"in T&&t(8,h=T.onRedo),"canUndo"in T&&t(9,d=T.canUndo),"canRedo"in T&&t(10,p=T.canRedo),"canFormat"in T&&t(11,v=T.canFormat),"canCompact"in T&&t(12,y=T.canCompact),"canSort"in T&&t(13,b=T.canSort),"canTransform"in T&&t(14,S=T.canTransform),"onRenderMenu"in T&&t(15,I=T.onRenderMenu)},n.$$.update=()=>{n.$$.dirty&32766&&t(16,i=r?[{space:!0}]:[{icon:jG,title:"Format JSON: add proper indentation and new lines (Ctrl+I)",className:"jse-format",onClick:l,disabled:r||!v},{icon:HG,title:"Compact JSON: remove all white spacing and new lines (Ctrl+Shift+I)",className:"jse-compact",onClick:o,disabled:r||!y},{separator:!0},{icon:Jv,title:"Sort",className:"jse-sort",onClick:a,disabled:r||!b},{icon:Qv,title:"Transform contents (filter, sort, project)",className:"jse-transform",onClick:c,disabled:r||!S},{icon:Zv,title:"Search (Ctrl+F)",className:"jse-search",onClick:u},{separator:!0},{icon:nR,title:"Undo (Ctrl+Z)",className:"jse-undo",onClick:f,disabled:!d},{icon:tR,title:"Redo (Ctrl+Shift+Z)",className:"jse-redo",onClick:h,disabled:!p},{space:!0}]),n.$$.dirty&98304&&t(0,s=I("text",i)||i)},[s,r,l,o,a,c,u,f,h,d,p,v,y,b,S,I,i]}class $G extends nt{constructor(e){super(),it(this,e,xG,ZG,an,{readOnly:1,onFormat:2,onCompact:3,onSort:4,onTransform:5,onToggleSearch:6,onUndo:7,onRedo:8,canUndo:9,canRedo:10,canFormat:11,canCompact:12,canSort:13,canTransform:14,onRenderMenu:15})}}const eK=$G;class Tn{constructor(){}lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,i){let s=[];return this.decompose(0,e,s,2),i.length&&i.decompose(0,i.length,s,3),this.decompose(t,this.length,s,1),Pr.from(s,this.length-(t-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){let i=[];return this.decompose(e,t,i,0),Pr.from(i,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),s=new su(this),r=new su(e);for(let l=t,o=t;;){if(s.next(l),r.next(l),l=0,s.lineBreak!=r.lineBreak||s.done!=r.done||s.value!=r.value)return!1;if(o+=s.value.length,s.done||o>=i)return!0}}iter(e=1){return new su(this,e)}iterRange(e,t=this.length){return new aR(this,e,t)}iterLines(e,t){let i;if(e==null)i=this.iter();else{t==null&&(t=this.lines+1);let s=this.line(e).from;i=this.iterRange(s,Math.max(s,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new cR(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Tn.empty:e.length<=32?new oi(e):Pr.from(oi.split(e,[]))}}class oi extends Tn{constructor(e,t=tK(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,s){for(let r=0;;r++){let l=this.text[r],o=s+l.length;if((t?i:o)>=e)return new nK(s,o,i,l);s=o+1,i++}}decompose(e,t,i,s){let r=e<=0&&t>=this.length?this:new oi(dE(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(s&1){let l=i.pop(),o=Sh(r.text,l.text.slice(),0,r.length);if(o.length<=32)i.push(new oi(o,l.length+r.length));else{let a=o.length>>1;i.push(new oi(o.slice(0,a)),new oi(o.slice(a)))}}else i.push(r)}replace(e,t,i){if(!(i instanceof oi))return super.replace(e,t,i);let s=Sh(this.text,Sh(i.text,dE(this.text,0,e)),t),r=this.length+i.length-(t-e);return s.length<=32?new oi(s,r):Pr.from(oi.split(s,[]),r)}sliceString(e,t=this.length,i=`
`){let s="";for(let r=0,l=0;r<=t&&l<this.text.length;l++){let o=this.text[l],a=r+o.length;r>e&&l&&(s+=i),e<a&&t>r&&(s+=o.slice(Math.max(0,e-r),t-r)),r=a+1}return s}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let i=[],s=-1;for(let r of e)i.push(r),s+=r.length+1,i.length==32&&(t.push(new oi(i,s)),i=[],s=-1);return s>-1&&t.push(new oi(i,s)),t}}class Pr extends Tn{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,t,i,s){for(let r=0;;r++){let l=this.children[r],o=s+l.length,a=i+l.lines-1;if((t?a:o)>=e)return l.lineInner(e,t,i,s);s=o+1,i=a+1}}decompose(e,t,i,s){for(let r=0,l=0;l<=t&&r<this.children.length;r++){let o=this.children[r],a=l+o.length;if(e<=a&&t>=l){let c=s&((l<=e?1:0)|(a>=t?2:0));l>=e&&a<=t&&!c?i.push(o):o.decompose(e-l,t-l,i,c)}l=a+1}}replace(e,t,i){if(i.lines<this.lines)for(let s=0,r=0;s<this.children.length;s++){let l=this.children[s],o=r+l.length;if(e>=r&&t<=o){let a=l.replace(e-r,t-r,i),c=this.lines-l.lines+a.lines;if(a.lines<c>>5-1&&a.lines>c>>5+1){let u=this.children.slice();return u[s]=a,new Pr(u,this.length-(t-e)+i.length)}return super.replace(r,o,a)}r=o+1}return super.replace(e,t,i)}sliceString(e,t=this.length,i=`
`){let s="";for(let r=0,l=0;r<this.children.length&&l<=t;r++){let o=this.children[r],a=l+o.length;l>e&&r&&(s+=i),e<a&&t>l&&(s+=o.sliceString(e-l,t-l,i)),l=a+1}return s}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof Pr))return 0;let i=0,[s,r,l,o]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;s+=t,r+=t){if(s==l||r==o)return i;let a=this.children[s],c=e.children[r];if(a!=c)return i+a.scanIdentical(c,t);i+=a.length+1}}static from(e,t=e.reduce((i,s)=>i+s.length+1,-1)){let i=0;for(let d of e)i+=d.lines;if(i<32){let d=[];for(let p of e)p.flatten(d);return new oi(d,t)}let s=Math.max(32,i>>5),r=s<<1,l=s>>1,o=[],a=0,c=-1,u=[];function f(d){let p;if(d.lines>r&&d instanceof Pr)for(let v of d.children)f(v);else d.lines>l&&(a>l||!a)?(h(),o.push(d)):d instanceof oi&&a&&(p=u[u.length-1])instanceof oi&&d.lines+p.lines<=32?(a+=d.lines,c+=d.length+1,u[u.length-1]=new oi(p.text.concat(d.text),p.length+1+d.length)):(a+d.lines>s&&h(),a+=d.lines,c+=d.length+1,u.push(d))}function h(){a!=0&&(o.push(u.length==1?u[0]:Pr.from(u,c)),c=-1,a=u.length=0)}for(let d of e)f(d);return h(),o.length==1?o[0]:new Pr(o,t)}}Tn.empty=new oi([""],0);function tK(n){let e=-1;for(let t of n)e+=t.length+1;return e}function Sh(n,e,t=0,i=1e9){for(let s=0,r=0,l=!0;r<n.length&&s<=i;r++){let o=n[r],a=s+o.length;a>=t&&(a>i&&(o=o.slice(0,i-s)),s<t&&(o=o.slice(t-s)),l?(e[e.length-1]+=o,l=!1):e.push(o)),s=a+1}return e}function dE(n,e,t){return Sh(n,[""],e,t)}class su{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof oi?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,s=this.nodes[i],r=this.offsets[i],l=r>>1,o=s instanceof oi?s.text.length:s.children.length;if(l==(t>0?o:0)){if(i==0)return this.done=!0,this.value="",this;t>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((r&1)==(t>0?0:1)){if(this.offsets[i]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(s instanceof oi){let a=s.text[l+(t<0?-1:0)];if(this.offsets[i]+=t,a.length>Math.max(0,e))return this.value=e==0?a:t>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=s.children[l+(t<0?-1:0)];e>a.length?(e-=a.length,this.offsets[i]+=t):(t<0&&this.offsets[i]--,this.nodes.push(a),this.offsets.push(t>0?1:(a instanceof oi?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class aR{constructor(e,t,i){this.value="",this.done=!1,this.cursor=new su(e,t>i?-1:1),this.pos=t>i?e.length:0,this.from=Math.min(t,i),this.to=Math.max(t,i)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let i=t<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:s}=this.cursor.next(e);return this.pos+=(s.length+e)*t,this.value=s.length<=i?s:t<0?s.slice(s.length-i):s.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class cR{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:i,value:s}=this.inner.next(e);return t?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=s,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Tn.prototype[Symbol.iterator]=function(){return this.iter()},su.prototype[Symbol.iterator]=aR.prototype[Symbol.iterator]=cR.prototype[Symbol.iterator]=function(){return this});class nK{constructor(e,t,i,s){this.from=e,this.to=t,this.number=i,this.text=s}get length(){return this.to-this.from}}let Ta="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(n=>n?parseInt(n,36):1);for(let n=1;n<Ta.length;n++)Ta[n]+=Ta[n-1];function iK(n){for(let e=1;e<Ta.length;e+=2)if(Ta[e]>n)return Ta[e-1]<=n;return!1}function mE(n){return n>=127462&&n<=127487}const pE=8205;function Es(n,e,t=!0,i=!0){return(t?uR:sK)(n,e,i)}function uR(n,e,t){if(e==n.length)return e;e&&fR(n.charCodeAt(e))&&hR(n.charCodeAt(e-1))&&e--;let i=Qi(n,e);for(e+=xs(i);e<n.length;){let s=Qi(n,e);if(i==pE||s==pE||t&&iK(s))e+=xs(s),i=s;else if(mE(s)){let r=0,l=e-2;for(;l>=0&&mE(Qi(n,l));)r++,l-=2;if(r%2==0)break;e+=2}else break}return e}function sK(n,e,t){for(;e>0;){let i=uR(n,e-2,t);if(i<e)return i;e--}return 0}function fR(n){return n>=56320&&n<57344}function hR(n){return n>=55296&&n<56320}function Qi(n,e){let t=n.charCodeAt(e);if(!hR(t)||e+1==n.length)return t;let i=n.charCodeAt(e+1);return fR(i)?(t-55296<<10)+(i-56320)+65536:t}function $v(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode((n>>10)+55296,(n&1023)+56320))}function xs(n){return n<65536?1:2}const C1=/\r\n?|\n/;var ys=function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n}(ys||(ys={}));class Hr{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,s=0;t<this.sections.length;){let r=this.sections[t++],l=this.sections[t++];l<0?(e(i,s,r),s+=r):s+=l,i+=r}}iterChangedRanges(e,t=!1){k1(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],s=this.sections[t++];s<0?e.push(i,s):e.push(s,i)}return new Hr(e)}composeDesc(e){return this.empty?e:e.empty?this:dR(this,e)}mapDesc(e,t=!1){return e.empty?this:T1(this,e,t)}mapPos(e,t=-1,i=ys.Simple){let s=0,r=0;for(let l=0;l<this.sections.length;){let o=this.sections[l++],a=this.sections[l++],c=s+o;if(a<0){if(c>e)return r+(e-s);r+=o}else{if(i!=ys.Simple&&c>=e&&(i==ys.TrackDel&&s<e&&c>e||i==ys.TrackBefore&&s<e||i==ys.TrackAfter&&c>e))return null;if(c>e||c==e&&t<0&&!o)return e==s||t<0?r:r+a;r+=a}s=c}if(e>s)throw new RangeError(`Position ${e} is out of range for changeset of length ${s}`);return r}touchesRange(e,t=e){for(let i=0,s=0;i<this.sections.length&&s<=t;){let r=this.sections[i++],l=this.sections[i++],o=s+r;if(l>=0&&s<=t&&o>=e)return s<e&&o>t?"cover":!0;s=o}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],s=this.sections[t++];e+=(e?" ":"")+i+(s>=0?":"+s:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Hr(e)}static create(e){return new Hr(e)}}class Oi extends Hr{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return k1(this,(t,i,s,r,l)=>e=e.replace(s,s+(i-t),l),!1),e}mapDesc(e,t=!1){return T1(this,e,t,!0)}invert(e){let t=this.sections.slice(),i=[];for(let s=0,r=0;s<t.length;s+=2){let l=t[s],o=t[s+1];if(o>=0){t[s]=o,t[s+1]=l;let a=s>>1;for(;i.length<a;)i.push(Tn.empty);i.push(l?e.slice(r,r+l):Tn.empty)}r+=l}return new Oi(t,i)}compose(e){return this.empty?e:e.empty?this:dR(this,e,!0)}map(e,t=!1){return e.empty?this:T1(this,e,t,!0)}iterChanges(e,t=!1){k1(this,e,t)}get desc(){return Hr.create(this.sections)}filter(e){let t=[],i=[],s=[],r=new Mu(this);e:for(let l=0,o=0;;){let a=l==e.length?1e9:e[l++];for(;o<a||o==a&&r.len==0;){if(r.done)break e;let u=Math.min(r.len,a-o);es(s,u,-1);let f=r.ins==-1?-1:r.off==0?r.ins:0;es(t,u,f),f>0&&Dl(i,t,r.text),r.forward(u),o+=u}let c=e[l++];for(;o<c;){if(r.done)break e;let u=Math.min(r.len,c-o);es(t,u,-1),es(s,u,r.ins==-1?-1:r.off==0?r.ins:0),r.forward(u),o+=u}}return{changes:new Oi(t,i),filtered:Hr.create(s)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],s=this.sections[t+1];s<0?e.push(i):s==0?e.push([i]):e.push([i].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,i){let s=[],r=[],l=0,o=null;function a(u=!1){if(!u&&!s.length)return;l<t&&es(s,t-l,-1);let f=new Oi(s,r);o=o?o.compose(f.map(o)):f,s=[],r=[],l=0}function c(u){if(Array.isArray(u))for(let f of u)c(f);else if(u instanceof Oi){if(u.length!=t)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${t})`);a(),o=o?o.compose(u.map(o)):u}else{let{from:f,to:h=f,insert:d}=u;if(f>h||f<0||h>t)throw new RangeError(`Invalid change range ${f} to ${h} (in doc of length ${t})`);let p=d?typeof d=="string"?Tn.of(d.split(i||C1)):d:Tn.empty,v=p.length;if(f==h&&v==0)return;f<l&&a(),f>l&&es(s,f-l,-1),es(s,h-f,v),Dl(r,s,p),l=h}}return c(e),a(!o),o}static empty(e){return new Oi(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],i=[];for(let s=0;s<e.length;s++){let r=e[s];if(typeof r=="number")t.push(r,-1);else{if(!Array.isArray(r)||typeof r[0]!="number"||r.some((l,o)=>o&&typeof l!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(r.length==1)t.push(r[0],0);else{for(;i.length<s;)i.push(Tn.empty);i[s]=Tn.of(r.slice(1)),t.push(r[0],i[s].length)}}}return new Oi(t,i)}static createSet(e,t){return new Oi(e,t)}}function es(n,e,t,i=!1){if(e==0&&t<=0)return;let s=n.length-2;s>=0&&t<=0&&t==n[s+1]?n[s]+=e:e==0&&n[s]==0?n[s+1]+=t:i?(n[s]+=e,n[s+1]+=t):n.push(e,t)}function Dl(n,e,t){if(t.length==0)return;let i=e.length-2>>1;if(i<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<i;)n.push(Tn.empty);n.push(t)}}function k1(n,e,t){let i=n.inserted;for(let s=0,r=0,l=0;l<n.sections.length;){let o=n.sections[l++],a=n.sections[l++];if(a<0)s+=o,r+=o;else{let c=s,u=r,f=Tn.empty;for(;c+=o,u+=a,a&&i&&(f=f.append(i[l-2>>1])),!(t||l==n.sections.length||n.sections[l+1]<0);)o=n.sections[l++],a=n.sections[l++];e(s,c,r,u,f),s=c,r=u}}}function T1(n,e,t,i=!1){let s=[],r=i?[]:null,l=new Mu(n),o=new Mu(e);for(let a=-1;;)if(l.ins==-1&&o.ins==-1){let c=Math.min(l.len,o.len);es(s,c,-1),l.forward(c),o.forward(c)}else if(o.ins>=0&&(l.ins<0||a==l.i||l.off==0&&(o.len<l.len||o.len==l.len&&!t))){let c=o.len;for(es(s,o.ins,-1);c;){let u=Math.min(l.len,c);l.ins>=0&&a<l.i&&l.len<=u&&(es(s,0,l.ins),r&&Dl(r,s,l.text),a=l.i),l.forward(u),c-=u}o.next()}else if(l.ins>=0){let c=0,u=l.len;for(;u;)if(o.ins==-1){let f=Math.min(u,o.len);c+=f,u-=f,o.forward(f)}else if(o.ins==0&&o.len<u)u-=o.len,o.next();else break;es(s,c,a<l.i?l.ins:0),r&&a<l.i&&Dl(r,s,l.text),a=l.i,l.forward(l.len-u)}else{if(l.done&&o.done)return r?Oi.createSet(s,r):Hr.create(s);throw new Error("Mismatched change set lengths")}}function dR(n,e,t=!1){let i=[],s=t?[]:null,r=new Mu(n),l=new Mu(e);for(let o=!1;;){if(r.done&&l.done)return s?Oi.createSet(i,s):Hr.create(i);if(r.ins==0)es(i,r.len,0,o),r.next();else if(l.len==0&&!l.done)es(i,0,l.ins,o),s&&Dl(s,i,l.text),l.next();else{if(r.done||l.done)throw new Error("Mismatched change set lengths");{let a=Math.min(r.len2,l.len),c=i.length;if(r.ins==-1){let u=l.ins==-1?-1:l.off?0:l.ins;es(i,a,u,o),s&&u&&Dl(s,i,l.text)}else l.ins==-1?(es(i,r.off?0:r.len,a,o),s&&Dl(s,i,r.textBit(a))):(es(i,r.off?0:r.len,l.off?0:l.ins,o),s&&!l.off&&Dl(s,i,l.text));o=(r.ins>a||l.ins>=0&&l.len>a)&&(o||i.length>c),r.forward2(a),l.forward(a)}}}}class Mu{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?Tn.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?Tn.empty:t[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class So{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let e=this.flags&3;return e==3?null:e}get goalColumn(){let e=this.flags>>5;return e==33554431?void 0:e}map(e,t=-1){let i,s;return this.empty?i=s=e.mapPos(this.from,t):(i=e.mapPos(this.from,1),s=e.mapPos(this.to,-1)),i==this.from&&s==this.to?this:new So(i,s,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return Je.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return Je.range(this.anchor,i)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return Je.range(e.anchor,e.head)}static create(e,t,i){return new So(e,t,i)}}class Je{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:Je.create(this.ranges.map(i=>i.map(e,t)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let t=0;t<this.ranges.length;t++)if(!this.ranges[t].eq(e.ranges[t]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new Je([this.main],0)}addRange(e,t=!0){return Je.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let i=this.ranges.slice();return i[t]=e,Je.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new Je(e.ranges.map(t=>So.fromJSON(t)),e.main)}static single(e,t=e){return new Je([Je.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,s=0;s<e.length;s++){let r=e[s];if(r.empty?r.from<=i:r.from<i)return Je.normalized(e.slice(),t);i=r.to}return new Je(e,t)}static cursor(e,t=0,i,s){return So.create(e,e,(t==0?0:t<0?4:8)|(i==null?3:Math.min(2,i))|(s??33554431)<<5)}static range(e,t,i,s){let r=(i??33554431)<<5|(s==null?3:Math.min(2,s));return t<e?So.create(t,e,24|r):So.create(e,t,(t>e?4:0)|r)}static normalized(e,t=0){let i=e[t];e.sort((s,r)=>s.from-r.from),t=e.indexOf(i);for(let s=1;s<e.length;s++){let r=e[s],l=e[s-1];if(r.empty?r.from<=l.to:r.from<l.to){let o=l.from,a=Math.max(r.to,l.to);s<=t&&t--,e.splice(--s,2,r.anchor>r.head?Je.range(a,o):Je.range(o,a))}}return new Je(e,t)}}function mR(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let eb=0;class kt{constructor(e,t,i,s,r){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=s,this.id=eb++,this.default=e([]),this.extensions=typeof r=="function"?r(this):r}static define(e={}){return new kt(e.combine||(t=>t),e.compareInput||((t,i)=>t===i),e.compare||(e.combine?(t,i)=>t===i:tb),!!e.static,e.enables)}of(e){return new Eh([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Eh(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Eh(e,this,2,t)}from(e,t){return t||(t=i=>i),this.compute([e],i=>t(i.field(e)))}}function tb(n,e){return n==e||n.length==e.length&&n.every((t,i)=>t===e[i])}class Eh{constructor(e,t,i,s){this.dependencies=e,this.facet=t,this.type=i,this.value=s,this.id=eb++}dynamicSlot(e){var t;let i=this.value,s=this.facet.compareInput,r=this.id,l=e[r]>>1,o=this.type==2,a=!1,c=!1,u=[];for(let f of this.dependencies)f=="doc"?a=!0:f=="selection"?c=!0:((t=e[f.id])!==null&&t!==void 0?t:1)&1||u.push(e[f.id]);return{create(f){return f.values[l]=i(f),1},update(f,h){if(a&&h.docChanged||c&&(h.docChanged||h.selection)||I1(f,u)){let d=i(f);if(o?!gE(d,f.values[l],s):!s(d,f.values[l]))return f.values[l]=d,1}return 0},reconfigure:(f,h)=>{let d,p=h.config.address[r];if(p!=null){let v=dd(h,p);if(this.dependencies.every(y=>y instanceof kt?h.facet(y)===f.facet(y):y instanceof Vi?h.field(y,!1)==f.field(y,!1):!0)||(o?gE(d=i(f),v,s):s(d=i(f),v)))return f.values[l]=v,0}else d=i(f);return f.values[l]=d,1}}}}function gE(n,e,t){if(n.length!=e.length)return!1;for(let i=0;i<n.length;i++)if(!t(n[i],e[i]))return!1;return!0}function I1(n,e){let t=!1;for(let i of e)ru(n,i)&1&&(t=!0);return t}function rK(n,e,t){let i=t.map(a=>n[a.id]),s=t.map(a=>a.type),r=i.filter(a=>!(a&1)),l=n[e.id]>>1;function o(a){let c=[];for(let u=0;u<i.length;u++){let f=dd(a,i[u]);if(s[u]==2)for(let h of f)c.push(h);else c.push(f)}return e.combine(c)}return{create(a){for(let c of i)ru(a,c);return a.values[l]=o(a),1},update(a,c){if(!I1(a,r))return 0;let u=o(a);return e.compare(u,a.values[l])?0:(a.values[l]=u,1)},reconfigure(a,c){let u=I1(a,i),f=c.config.facets[e.id],h=c.facet(e);if(f&&!u&&tb(t,f))return a.values[l]=h,0;let d=o(a);return e.compare(d,h)?(a.values[l]=h,0):(a.values[l]=d,1)}}}const vE=kt.define({static:!0});class Vi{constructor(e,t,i,s,r){this.id=e,this.createF=t,this.updateF=i,this.compareF=s,this.spec=r,this.provides=void 0}static define(e){let t=new Vi(eb++,e.create,e.update,e.compare||((i,s)=>i===s),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(vE).find(i=>i.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:i=>(i.values[t]=this.create(i),1),update:(i,s)=>{let r=i.values[t],l=this.updateF(r,s);return this.compareF(r,l)?0:(i.values[t]=l,1)},reconfigure:(i,s)=>s.config.address[this.id]!=null?(i.values[t]=s.field(this),0):(i.values[t]=this.create(i),1)}}init(e){return[this,vE.of({field:this,create:e})]}get extension(){return this}}const mo={lowest:4,low:3,default:2,high:1,highest:0};function Rc(n){return e=>new pR(e,n)}const Sc={highest:Rc(mo.highest),high:Rc(mo.high),default:Rc(mo.default),low:Rc(mo.low),lowest:Rc(mo.lowest)};class pR{constructor(e,t){this.inner=e,this.prec=t}}class $r{of(e){return new O1(this,e)}reconfigure(e){return $r.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class O1{constructor(e,t){this.compartment=e,this.inner=t}}class hd{constructor(e,t,i,s,r,l){for(this.base=e,this.compartments=t,this.dynamicSlots=i,this.address=s,this.staticValues=r,this.facets=l,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,i){let s=[],r=Object.create(null),l=new Map;for(let h of lK(e,t,l))h instanceof Vi?s.push(h):(r[h.facet.id]||(r[h.facet.id]=[])).push(h);let o=Object.create(null),a=[],c=[];for(let h of s)o[h.id]=c.length<<1,c.push(d=>h.slot(d));let u=i==null?void 0:i.config.facets;for(let h in r){let d=r[h],p=d[0].facet,v=u&&u[h]||[];if(d.every(y=>y.type==0))if(o[p.id]=a.length<<1|1,tb(v,d))a.push(i.facet(p));else{let y=p.combine(d.map(b=>b.value));a.push(i&&p.compare(y,i.facet(p))?i.facet(p):y)}else{for(let y of d)y.type==0?(o[y.id]=a.length<<1|1,a.push(y.value)):(o[y.id]=c.length<<1,c.push(b=>y.dynamicSlot(b)));o[p.id]=c.length<<1,c.push(y=>rK(y,p,d))}}let f=c.map(h=>h(o));return new hd(e,l,f,o,a,r)}}function lK(n,e,t){let i=[[],[],[],[],[]],s=new Map;function r(l,o){let a=s.get(l);if(a!=null){if(a<=o)return;let c=i[a].indexOf(l);c>-1&&i[a].splice(c,1),l instanceof O1&&t.delete(l.compartment)}if(s.set(l,o),Array.isArray(l))for(let c of l)r(c,o);else if(l instanceof O1){if(t.has(l.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=e.get(l.compartment)||l.inner;t.set(l.compartment,c),r(c,o)}else if(l instanceof pR)r(l.inner,l.prec);else if(l instanceof Vi)i[o].push(l),l.provides&&r(l.provides,o);else if(l instanceof Eh)i[o].push(l),l.facet.extensions&&r(l.facet.extensions,mo.default);else{let c=l.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${l}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);r(c,o)}}return r(n,mo.default),i.reduce((l,o)=>l.concat(o))}function ru(n,e){if(e&1)return 2;let t=e>>1,i=n.status[t];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;n.status[t]=4;let s=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|s}function dd(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const gR=kt.define(),vR=kt.define({combine:n=>n.some(e=>e),static:!0}),bR=kt.define({combine:n=>n.length?n[0]:void 0,static:!0}),_R=kt.define(),yR=kt.define(),SR=kt.define(),ER=kt.define({combine:n=>n.length?n[0]:!1});class yl{constructor(e,t){this.type=e,this.value=t}static define(){return new oK}}class oK{of(e){return new yl(this,e)}}class aK{constructor(e){this.map=e}of(e){return new $t(this,e)}}class $t{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new $t(this.type,t)}is(e){return this.type==e}static define(e={}){return new aK(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let i=[];for(let s of e){let r=s.map(t);r&&i.push(r)}return i}}$t.reconfigure=$t.define();$t.appendConfig=$t.define();class Di{constructor(e,t,i,s,r,l){this.startState=e,this.changes=t,this.selection=i,this.effects=s,this.annotations=r,this.scrollIntoView=l,this._doc=null,this._state=null,i&&mR(i,t.newLength),r.some(o=>o.type==Di.time)||(this.annotations=r.concat(Di.time.of(Date.now())))}static create(e,t,i,s,r,l){return new Di(e,t,i,s,r,l)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Di.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}Di.time=yl.define();Di.userEvent=yl.define();Di.addToHistory=yl.define();Di.remote=yl.define();function cK(n,e){let t=[];for(let i=0,s=0;;){let r,l;if(i<n.length&&(s==e.length||e[s]>=n[i]))r=n[i++],l=n[i++];else if(s<e.length)r=e[s++],l=e[s++];else return t;!t.length||t[t.length-1]<r?t.push(r,l):t[t.length-1]<l&&(t[t.length-1]=l)}}function AR(n,e,t){var i;let s,r,l;return t?(s=e.changes,r=Oi.empty(e.changes.length),l=n.changes.compose(e.changes)):(s=e.changes.map(n.changes),r=n.changes.mapDesc(e.changes,!0),l=n.changes.compose(s)),{changes:l,selection:e.selection?e.selection.map(r):(i=n.selection)===null||i===void 0?void 0:i.map(s),effects:$t.mapEffects(n.effects,s).concat($t.mapEffects(e.effects,r)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function R1(n,e,t){let i=e.selection,s=Ia(e.annotations);return e.userEvent&&(s=s.concat(Di.userEvent.of(e.userEvent))),{changes:e.changes instanceof Oi?e.changes:Oi.of(e.changes||[],t,n.facet(bR)),selection:i&&(i instanceof Je?i:Je.single(i.anchor,i.head)),effects:Ia(e.effects),annotations:s,scrollIntoView:!!e.scrollIntoView}}function wR(n,e,t){let i=R1(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let r=1;r<e.length;r++){e[r].filter===!1&&(t=!1);let l=!!e[r].sequential;i=AR(i,R1(n,e[r],l?i.changes.newLength:n.doc.length),l)}let s=Di.create(n,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return fK(t?uK(s):s)}function uK(n){let e=n.startState,t=!0;for(let s of e.facet(_R)){let r=s(n);if(r===!1){t=!1;break}Array.isArray(r)&&(t=t===!0?r:cK(t,r))}if(t!==!0){let s,r;if(t===!1)r=n.changes.invertedDesc,s=Oi.empty(e.doc.length);else{let l=n.changes.filter(t);s=l.changes,r=l.filtered.mapDesc(l.changes).invertedDesc}n=Di.create(e,s,n.selection&&n.selection.map(r),$t.mapEffects(n.effects,r),n.annotations,n.scrollIntoView)}let i=e.facet(yR);for(let s=i.length-1;s>=0;s--){let r=i[s](n);r instanceof Di?n=r:Array.isArray(r)&&r.length==1&&r[0]instanceof Di?n=r[0]:n=wR(e,Ia(r),!1)}return n}function fK(n){let e=n.startState,t=e.facet(SR),i=n;for(let s=t.length-1;s>=0;s--){let r=t[s](n);r&&Object.keys(r).length&&(i=AR(i,R1(e,r,n.changes.newLength),!0))}return i==n?n:Di.create(e,n.changes,n.selection,i.effects,i.annotations,i.scrollIntoView)}const hK=[];function Ia(n){return n==null?hK:Array.isArray(n)?n:[n]}var ti=function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n}(ti||(ti={}));const dK=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let D1;try{D1=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function mK(n){if(D1)return D1.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||dK.test(t)))return!0}return!1}function pK(n){return e=>{if(!/\S/.test(e))return ti.Space;if(mK(e))return ti.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return ti.Word;return ti.Other}}class ln{constructor(e,t,i,s,r,l){this.config=e,this.doc=t,this.selection=i,this.values=s,this.status=e.statusTemplate.slice(),this.computeSlot=r,l&&(l._state=this);for(let o=0;o<this.config.dynamicSlots.length;o++)ru(this,o<<1);this.computeSlot=null}field(e,t=!0){let i=this.config.address[e.id];if(i==null){if(t)throw new RangeError("Field is not present in this state");return}return ru(this,i),dd(this,i)}update(...e){return wR(this,e,!0)}applyTransaction(e){let t=this.config,{base:i,compartments:s}=t;for(let l of e.effects)l.is($r.reconfigure)?(t&&(s=new Map,t.compartments.forEach((o,a)=>s.set(a,o)),t=null),s.set(l.value.compartment,l.value.extension)):l.is($t.reconfigure)?(t=null,i=l.value):l.is($t.appendConfig)&&(t=null,i=Ia(i).concat(l.value));let r;t?r=e.startState.values.slice():(t=hd.resolve(i,s,this),r=new ln(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(o,a)=>a.reconfigure(o,this),null).values),new ln(t,e.newDoc,e.newSelection,r,(l,o)=>o.update(l,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:Je.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,i=e(t.ranges[0]),s=this.changes(i.changes),r=[i.range],l=Ia(i.effects);for(let o=1;o<t.ranges.length;o++){let a=e(t.ranges[o]),c=this.changes(a.changes),u=c.map(s);for(let h=0;h<o;h++)r[h]=r[h].map(u);let f=s.mapDesc(c,!0);r.push(a.range.map(f)),s=s.compose(u),l=$t.mapEffects(l,u).concat($t.mapEffects(Ia(a.effects),f))}return{changes:s,selection:Je.create(r,t.mainIndex),effects:l}}changes(e=[]){return e instanceof Oi?e:Oi.of(e,this.doc.length,this.facet(ln.lineSeparator))}toText(e){return Tn.of(e.split(this.facet(ln.lineSeparator)||C1))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(ru(this,t),dd(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let s=e[i];s instanceof Vi&&this.config.address[s.id]!=null&&(t[i]=s.spec.toJSON(this.field(e[i]),this))}return t}static fromJSON(e,t={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let s=[];if(i){for(let r in i)if(Object.prototype.hasOwnProperty.call(e,r)){let l=i[r],o=e[r];s.push(l.init(a=>l.spec.fromJSON(o,a)))}}return ln.create({doc:e.doc,selection:Je.fromJSON(e.selection),extensions:t.extensions?s.concat([t.extensions]):s})}static create(e={}){let t=hd.resolve(e.extensions||[],new Map),i=e.doc instanceof Tn?e.doc:Tn.of((e.doc||"").split(t.staticFacet(ln.lineSeparator)||C1)),s=e.selection?e.selection instanceof Je?e.selection:Je.single(e.selection.anchor,e.selection.head):Je.single(0);return mR(s,i.length),t.staticFacet(vR)||(s=s.asSingle()),new ln(t,i,s,t.dynamicSlots.map(()=>null),(r,l)=>l.create(r),null)}get tabSize(){return this.facet(ln.tabSize)}get lineBreak(){return this.facet(ln.lineSeparator)||`
`}get readOnly(){return this.facet(ER)}phrase(e,...t){for(let i of this.facet(ln.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(i,s)=>{if(s=="$")return"$";let r=+(s||1);return!r||r>t.length?i:t[r-1]})),e}languageDataAt(e,t,i=-1){let s=[];for(let r of this.facet(gR))for(let l of r(this,t,i))Object.prototype.hasOwnProperty.call(l,e)&&s.push(l[e]);return s}charCategorizer(e){return pK(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:i,length:s}=this.doc.lineAt(e),r=this.charCategorizer(e),l=e-i,o=e-i;for(;l>0;){let a=Es(t,l,!1);if(r(t.slice(a,l))!=ti.Word)break;l=a}for(;o<s;){let a=Es(t,o);if(r(t.slice(o,a))!=ti.Word)break;o=a}return l==o?null:Je.range(l+i,o+i)}}ln.allowMultipleSelections=vR;ln.tabSize=kt.define({combine:n=>n.length?n[0]:4});ln.lineSeparator=bR;ln.readOnly=ER;ln.phrases=kt.define({compare(n,e){let t=Object.keys(n),i=Object.keys(e);return t.length==i.length&&t.every(s=>n[s]==e[s])}});ln.languageData=gR;ln.changeFilter=_R;ln.transactionFilter=yR;ln.transactionExtender=SR;$r.reconfigure=$t.define();function Er(n,e,t={}){let i={};for(let s of n)for(let r of Object.keys(s)){let l=s[r],o=i[r];if(o===void 0)i[r]=l;else if(!(o===l||l===void 0))if(Object.hasOwnProperty.call(t,r))i[r]=t[r](o,l);else throw new Error("Config merge conflict for field "+r)}for(let s in e)i[s]===void 0&&(i[s]=e[s]);return i}class Go{eq(e){return this==e}range(e,t=e){return N1.create(e,t,this)}}Go.prototype.startSide=Go.prototype.endSide=0;Go.prototype.point=!1;Go.prototype.mapMode=ys.TrackDel;let N1=class CR{constructor(e,t,i){this.from=e,this.to=t,this.value=i}static create(e,t,i){return new CR(e,t,i)}};function P1(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class nb{constructor(e,t,i,s){this.from=e,this.to=t,this.value=i,this.maxPoint=s}get length(){return this.to[this.to.length-1]}findIndex(e,t,i,s=0){let r=i?this.to:this.from;for(let l=s,o=r.length;;){if(l==o)return l;let a=l+o>>1,c=r[a]-e||(i?this.value[a].endSide:this.value[a].startSide)-t;if(a==l)return c>=0?l:o;c>=0?o=a:l=a+1}}between(e,t,i,s){for(let r=this.findIndex(t,-1e9,!0),l=this.findIndex(i,1e9,!1,r);r<l;r++)if(s(this.from[r]+e,this.to[r]+e,this.value[r])===!1)return!1}map(e,t){let i=[],s=[],r=[],l=-1,o=-1;for(let a=0;a<this.value.length;a++){let c=this.value[a],u=this.from[a]+e,f=this.to[a]+e,h,d;if(u==f){let p=t.mapPos(u,c.startSide,c.mapMode);if(p==null||(h=d=p,c.startSide!=c.endSide&&(d=t.mapPos(u,c.endSide),d<h)))continue}else if(h=t.mapPos(u,c.startSide),d=t.mapPos(f,c.endSide),h>d||h==d&&c.startSide>0&&c.endSide<=0)continue;(d-h||c.endSide-c.startSide)<0||(l<0&&(l=h),c.point&&(o=Math.max(o,d-h)),i.push(c),s.push(h-l),r.push(d-l))}return{mapped:i.length?new nb(s,r,i,o):null,pos:l}}}class In{constructor(e,t,i,s){this.chunkPos=e,this.chunk=t,this.nextLayer=i,this.maxPoint=s}static create(e,t,i,s){return new In(e,t,i,s)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:i=!1,filterFrom:s=0,filterTo:r=this.length}=e,l=e.filter;if(t.length==0&&!l)return this;if(i&&(t=t.slice().sort(P1)),this.isEmpty)return t.length?In.of(t):this;let o=new kR(this,null,-1).goto(0),a=0,c=[],u=new Yl;for(;o.value||a<t.length;)if(a<t.length&&(o.from-t[a].from||o.startSide-t[a].value.startSide)>=0){let f=t[a++];u.addInner(f.from,f.to,f.value)||c.push(f)}else o.rangeIndex==1&&o.chunkIndex<this.chunk.length&&(a==t.length||this.chunkEnd(o.chunkIndex)<t[a].from)&&(!l||s>this.chunkEnd(o.chunkIndex)||r<this.chunkPos[o.chunkIndex])&&u.addChunk(this.chunkPos[o.chunkIndex],this.chunk[o.chunkIndex])?o.nextChunk():((!l||s>o.to||r<o.from||l(o.from,o.to,o.value))&&(u.addInner(o.from,o.to,o.value)||c.push(N1.create(o.from,o.to,o.value))),o.next());return u.finishInner(this.nextLayer.isEmpty&&!c.length?In.empty:this.nextLayer.update({add:c,filter:l,filterFrom:s,filterTo:r}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],i=[],s=-1;for(let l=0;l<this.chunk.length;l++){let o=this.chunkPos[l],a=this.chunk[l],c=e.touchesRange(o,o+a.length);if(c===!1)s=Math.max(s,a.maxPoint),t.push(a),i.push(e.mapPos(o));else if(c===!0){let{mapped:u,pos:f}=a.map(o,e);u&&(s=Math.max(s,u.maxPoint),t.push(u),i.push(f))}}let r=this.nextLayer.map(e);return t.length==0?r:new In(i,t,r||In.empty,s)}between(e,t,i){if(!this.isEmpty){for(let s=0;s<this.chunk.length;s++){let r=this.chunkPos[s],l=this.chunk[s];if(t>=r&&e<=r+l.length&&l.between(r,e-r,t-r,i)===!1)return}this.nextLayer.between(e,t,i)}}iter(e=0){return Bu.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return Bu.from(e).goto(t)}static compare(e,t,i,s,r=-1){let l=e.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=r),o=t.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=r),a=bE(l,o,i),c=new Dc(l,a,r),u=new Dc(o,a,r);i.iterGaps((f,h,d)=>_E(c,f,u,h,d,s)),i.empty&&i.length==0&&_E(c,0,u,0,0,s)}static eq(e,t,i=0,s){s==null&&(s=1e9-1);let r=e.filter(u=>!u.isEmpty&&t.indexOf(u)<0),l=t.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(r.length!=l.length)return!1;if(!r.length)return!0;let o=bE(r,l),a=new Dc(r,o,0).goto(i),c=new Dc(l,o,0).goto(i);for(;;){if(a.to!=c.to||!M1(a.active,c.active)||a.point&&(!c.point||!a.point.eq(c.point)))return!1;if(a.to>s)return!0;a.next(),c.next()}}static spans(e,t,i,s,r=-1){let l=new Dc(e,null,r).goto(t),o=t,a=l.openStart;for(;;){let c=Math.min(l.to,i);if(l.point){let u=l.activeForPoint(l.to),f=l.pointFrom<t?u.length+1:Math.min(u.length,a);s.point(o,c,l.point,u,f,l.pointRank),a=Math.min(l.openEnd(c),u.length)}else c>o&&(s.span(o,c,l.active,a),a=l.openEnd(c));if(l.to>i)return a+(l.point&&l.to>i?1:0);o=l.to,l.next()}}static of(e,t=!1){let i=new Yl;for(let s of e instanceof N1?[e]:t?gK(e):e)i.add(s.from,s.to,s.value);return i.finish()}}In.empty=new In([],[],null,-1);function gK(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let i=n[t];if(P1(e,i)>0)return n.slice().sort(P1);e=i}return n}In.empty.nextLayer=In.empty;class Yl{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(e){this.chunks.push(new nb(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new Yl)).add(e,t,i)}addInner(e,t,i){let s=e-this.lastTo||i.startSide-this.last.endSide;if(s<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return s<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(In.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=In.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function bE(n,e,t){let i=new Map;for(let r of n)for(let l=0;l<r.chunk.length;l++)r.chunk[l].maxPoint<=0&&i.set(r.chunk[l],r.chunkPos[l]);let s=new Set;for(let r of e)for(let l=0;l<r.chunk.length;l++){let o=i.get(r.chunk[l]);o!=null&&(t?t.mapPos(o):o)==r.chunkPos[l]&&!(t!=null&&t.touchesRange(o,o+r.chunk[l].length))&&s.add(r.chunk[l])}return s}class kR{constructor(e,t,i,s=0){this.layer=e,this.skip=t,this.minPoint=i,this.rank=s}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let s=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(s)||this.layer.chunkEnd(this.chunkIndex)<e||s.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let s=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!i||this.rangeIndex<s)&&this.setRangeIndex(s)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],i=e+t.from[this.rangeIndex];if(this.from=i,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Bu{constructor(e){this.heap=e}static from(e,t=null,i=-1){let s=[];for(let r=0;r<e.length;r++)for(let l=e[r];!l.isEmpty;l=l.nextLayer)l.maxPoint>=i&&s.push(new kR(l,t,i,r));return s.length==1?s[0]:new Bu(s)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let i of this.heap)i.goto(e,t);for(let i=this.heap.length>>1;i>=0;i--)Dp(this.heap,i);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let i=this.heap.length>>1;i>=0;i--)Dp(this.heap,i);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Dp(this.heap,0)}}}function Dp(n,e){for(let t=n[e];;){let i=(e<<1)+1;if(i>=n.length)break;let s=n[i];if(i+1<n.length&&s.compare(n[i+1])>=0&&(s=n[i+1],i++),t.compare(s)<0)break;n[i]=t,n[e]=s,e=i}}class Dc{constructor(e,t,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Bu.from(e,t,i)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){Hf(this.active,e),Hf(this.activeTo,e),Hf(this.activeRank,e),this.minActive=yE(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:s,rank:r}=this.cursor;for(;t<this.activeRank.length&&this.activeRank[t]<=r;)t++;qf(this.active,t,i),qf(this.activeTo,t,s),qf(this.activeRank,t,r),e&&qf(e,t,this.cursor.from),this.minActive=yE(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let s=this.minActive;if(s>-1&&(this.activeTo[s]-this.cursor.from||this.active[s].endSide-this.cursor.startSide)<0){if(this.activeTo[s]>e){this.to=this.activeTo[s],this.endSide=this.active[s].endSide;break}this.removeActive(s),i&&Hf(i,s)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let r=this.cursor.value;if(!r.point)this.addActive(i),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=r,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=r.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let s=i.length-1;s>=0&&i[s]<e;s--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&t.push(this.active[i]);return t.reverse()}openEnd(e){let t=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)t++;return t}}function _E(n,e,t,i,s,r){n.goto(e),t.goto(i);let l=i+s,o=i,a=i-e;for(;;){let c=n.to+a-t.to||n.endSide-t.endSide,u=c<0?n.to+a:t.to,f=Math.min(u,l);if(n.point||t.point?n.point&&t.point&&(n.point==t.point||n.point.eq(t.point))&&M1(n.activeForPoint(n.to+a),t.activeForPoint(t.to))||r.comparePoint(o,f,n.point,t.point):f>o&&!M1(n.active,t.active)&&r.compareRange(o,f,n.active,t.active),u>l)break;o=u,c<=0&&n.next(),c>=0&&t.next()}}function M1(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!n[t].eq(e[t]))return!1;return!0}function Hf(n,e){for(let t=e,i=n.length-1;t<i;t++)n[t]=n[t+1];n.pop()}function qf(n,e,t){for(let i=n.length-1;i>=e;i--)n[i+1]=n[i];n[e]=t}function yE(n,e){let t=-1,i=1e9;for(let s=0;s<e.length;s++)(e[s]-i||n[s].endSide-n[t].endSide)<0&&(t=s,i=e[s]);return t}function _f(n,e,t=n.length){let i=0;for(let s=0;s<t;)n.charCodeAt(s)==9?(i+=e-i%e,s++):(i++,s=Es(n,s));return i}function B1(n,e,t,i){for(let s=0,r=0;;){if(r>=e)return s;if(s==n.length)break;r+=n.charCodeAt(s)==9?t-r%t:1,s=Es(n,s)}return i===!0?-1:n.length}const L1="",SE=typeof Symbol>"u"?"__"+L1:Symbol.for(L1),V1=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),EE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Jl{constructor(e,t){this.rules=[];let{finish:i}=t||{};function s(l){return/^@/.test(l)?[l]:l.split(/,\s*/)}function r(l,o,a,c){let u=[],f=/^@(\w+)\b/.exec(l[0]),h=f&&f[1]=="keyframes";if(f&&o==null)return a.push(l[0]+";");for(let d in o){let p=o[d];if(/&/.test(d))r(d.split(/,\s*/).map(v=>l.map(y=>v.replace(/&/,y))).reduce((v,y)=>v.concat(y)),p,a);else if(p&&typeof p=="object"){if(!f)throw new RangeError("The value of a property ("+d+") should be a primitive value.");r(s(d),p,u,h)}else p!=null&&u.push(d.replace(/_.*/,"").replace(/[A-Z]/g,v=>"-"+v.toLowerCase())+": "+p+";")}(u.length||h)&&a.push((i&&!f&&!c?l.map(i):l).join(", ")+" {"+u.join(" ")+"}")}for(let l in e)r(s(l),e[l],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=EE[SE]||1;return EE[SE]=e+1,L1+e.toString(36)}static mount(e,t){(e[V1]||new vK(e)).mount(Array.isArray(t)?t:[t])}}let zf=null;class vK{constructor(e){if(!e.head&&e.adoptedStyleSheets&&typeof CSSStyleSheet<"u"){if(zf)return e.adoptedStyleSheets=[zf.sheet].concat(e.adoptedStyleSheets),e[V1]=zf;this.sheet=new CSSStyleSheet,e.adoptedStyleSheets=[this.sheet].concat(e.adoptedStyleSheets),zf=this}else{this.styleTag=(e.ownerDocument||e).createElement("style");let t=e.head||e;t.insertBefore(this.styleTag,t.firstChild)}this.modules=[],e[V1]=this}mount(e){let t=this.sheet,i=0,s=0;for(let r=0;r<e.length;r++){let l=e[r],o=this.modules.indexOf(l);if(o<s&&o>-1&&(this.modules.splice(o,1),s--,o=-1),o==-1){if(this.modules.splice(s++,0,l),t)for(let a=0;a<l.rules.length;a++)t.insertRule(l.rules[a],i++)}else{for(;s<o;)i+=this.modules[s++].rules.length;i+=l.rules.length,s++}}if(!t){let r="";for(let l=0;l<this.modules.length;l++)r+=this.modules[l].getRules()+`
`;this.styleTag.textContent=r}}}var Zl={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Lu={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},AE=typeof navigator<"u"&&/Chrome\/(\d+)/.exec(navigator.userAgent),bK=typeof navigator<"u"&&/Mac/.test(navigator.platform),_K=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),yK=bK||AE&&+AE[1]<57;for(var Xi=0;Xi<10;Xi++)Zl[48+Xi]=Zl[96+Xi]=String(Xi);for(var Xi=1;Xi<=24;Xi++)Zl[Xi+111]="F"+Xi;for(var Xi=65;Xi<=90;Xi++)Zl[Xi]=String.fromCharCode(Xi+32),Lu[Xi]=String.fromCharCode(Xi);for(var Np in Zl)Lu.hasOwnProperty(Np)||(Lu[Np]=Zl[Np]);function SK(n){var e=yK&&(n.ctrlKey||n.altKey||n.metaKey)||_K&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Lu:Zl)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function md(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function Za(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function EK(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Ah(n,e){if(!e.anchorNode)return!1;try{return Za(n,e.anchorNode)}catch{return!1}}function Vu(n){return n.nodeType==3?xa(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function pd(n,e,t,i){return t?wE(n,e,t,i,-1)||wE(n,e,t,i,1):!1}function gd(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function wE(n,e,t,i,s){for(;;){if(n==t&&e==i)return!0;if(e==(s<0?0:Uu(n))){if(n.nodeName=="DIV")return!1;let r=n.parentNode;if(!r||r.nodeType!=1)return!1;e=gd(n)+(s<0?0:1),n=r}else if(n.nodeType==1){if(n=n.childNodes[e+(s<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=s<0?Uu(n):0}else return!1}}function Uu(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}const TR={left:0,right:0,top:0,bottom:0};function ib(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function AK(n){return{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function wK(n,e,t,i,s,r,l,o){let a=n.ownerDocument,c=a.defaultView||window;for(let u=n;u;)if(u.nodeType==1){let f,h=u==a.body;if(h)f=AK(c);else{if(u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let v=u.getBoundingClientRect();f={left:v.left,right:v.left+u.clientWidth,top:v.top,bottom:v.top+u.clientHeight}}let d=0,p=0;if(s=="nearest")e.top<f.top?(p=-(f.top-e.top+l),t>0&&e.bottom>f.bottom+p&&(p=e.bottom-f.bottom+p+l)):e.bottom>f.bottom&&(p=e.bottom-f.bottom+l,t<0&&e.top-p<f.top&&(p=-(f.top+p-e.top+l)));else{let v=e.bottom-e.top,y=f.bottom-f.top;p=(s=="center"&&v<=y?e.top+v/2-y/2:s=="start"||s=="center"&&t<0?e.top-l:e.bottom-y+l)-f.top}if(i=="nearest"?e.left<f.left?(d=-(f.left-e.left+r),t>0&&e.right>f.right+d&&(d=e.right-f.right+d+r)):e.right>f.right&&(d=e.right-f.right+r,t<0&&e.left<f.left+d&&(d=-(f.left+d-e.left+r))):d=(i=="center"?e.left+(e.right-e.left)/2-(f.right-f.left)/2:i=="start"==o?e.left-r:e.right-(f.right-f.left)+r)-f.left,d||p)if(h)c.scrollBy(d,p);else{let v=0,y=0;if(p){let b=u.scrollTop;u.scrollTop+=p,y=u.scrollTop-b}if(d){let b=u.scrollLeft;u.scrollLeft+=d,v=u.scrollLeft-b}e={left:e.left-v,top:e.top-y,right:e.right-v,bottom:e.bottom-y},v&&Math.abs(v-d)<1&&(i="nearest"),y&&Math.abs(y-p)<1&&(s="nearest")}if(h)break;u=u.assignedSlot||u.parentNode}else if(u.nodeType==11)u=u.host;else break}function CK(n){let e=n.ownerDocument;for(let t=n.parentNode;t&&t!=e.body;)if(t.nodeType==1){if(t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth)return t;t=t.assignedSlot||t.parentNode}else if(t.nodeType==11)t=t.host;else break;return null}class kK{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){this.set(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)}set(e,t,i,s){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=s}}let ua=null;function IR(n){if(n.setActive)return n.setActive();if(ua)return n.focus(ua);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(ua==null?{get preventScroll(){return ua={preventScroll:!0},!0}}:void 0),!ua){ua=!1;for(let t=0;t<e.length;){let i=e[t++],s=e[t++],r=e[t++];i.scrollTop!=s&&(i.scrollTop=s),i.scrollLeft!=r&&(i.scrollLeft=r)}}}let CE;function xa(n,e,t=e){let i=CE||(CE=document.createRange());return i.setEnd(n,t),i.setStart(n,e),i}function Oa(n,e,t){let i={key:e,code:e,keyCode:t,which:t,cancelable:!0},s=new KeyboardEvent("keydown",i);s.synthetic=!0,n.dispatchEvent(s);let r=new KeyboardEvent("keyup",i);return r.synthetic=!0,n.dispatchEvent(r),s.defaultPrevented||r.defaultPrevented}function TK(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function OR(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}function IK(n,e){let t=e.focusNode,i=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=i)return!1;for(;;)if(i){if(t.nodeType!=1)return!1;let s=t.childNodes[i-1];s.contentEditable=="false"?i--:(t=s,i=Uu(t))}else{if(t==n)return!0;i=gd(t),t=t.parentNode}}class ss{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new ss(e.parentNode,gd(e),t)}static after(e,t){return new ss(e.parentNode,gd(e)+1,t)}}const sb=[];class $n{constructor(){this.parent=null,this.dom=null,this.dirty=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let i of this.children){if(i==e)return t;t+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}coordsAt(e,t){return null}sync(e,t){if(this.dirty&2){let i=this.dom,s=null,r;for(let l of this.children){if(l.dirty){if(!l.dom&&(r=s?s.nextSibling:i.firstChild)){let o=$n.get(r);(!o||!o.parent&&o.canReuseDOM(l))&&l.reuseDOM(r)}l.sync(e,t),l.dirty=0}if(r=s?s.nextSibling:i.firstChild,t&&!t.written&&t.node==i&&r!=l.dom&&(t.written=!0),l.dom.parentNode==i)for(;r&&r!=l.dom;)r=kE(r);else i.insertBefore(l.dom,r);s=l.dom}for(r=s?s.nextSibling:i.firstChild,r&&t&&t.node==i&&(t.written=!0);r;)r=kE(r)}else if(this.dirty&1)for(let i of this.children)i.dirty&&(i.sync(e,t),i.dirty=0)}reuseDOM(e){}localPosFromDOM(e,t){let i;if(e==this.dom)i=this.dom.childNodes[t];else{let s=Uu(e)==0?0:t==0?-1:1;for(;;){let r=e.parentNode;if(r==this.dom)break;s==0&&r.firstChild!=r.lastChild&&(e==r.firstChild?s=-1:s=1),e=r}s<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!$n.get(i);)i=i.nextSibling;if(!i)return this.length;for(let s=0,r=0;;s++){let l=this.children[s];if(l.dom==i)return r;r+=l.length+l.breakAfter}}domBoundsAround(e,t,i=0){let s=-1,r=-1,l=-1,o=-1;for(let a=0,c=i,u=i;a<this.children.length;a++){let f=this.children[a],h=c+f.length;if(c<e&&h>t)return f.domBoundsAround(e,t,c);if(h>=e&&s==-1&&(s=a,r=c),c>t&&f.dom.parentNode==this.dom){l=a,o=u;break}u=h,c=h+f.breakAfter}return{from:r,to:o<0?i+this.length:o,startDOM:(s?this.children[s-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:l<this.children.length&&l>=0?this.children[l].dom:null}}markDirty(e=!1){this.dirty|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.dirty|=2),t.dirty&1)return;t.dirty|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.dirty&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,i=sb){this.markDirty();for(let s=e;s<t;s++){let r=this.children[s];r.parent==this&&r.destroy()}this.children.splice(e,t-e,...i);for(let s=0;s<i.length;s++)i[s].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new RR(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}merge(e,t,i,s,r,l){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor}getSide(){return 0}destroy(){this.parent=null}}$n.prototype.breakAfter=0;function kE(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class RR{constructor(e,t,i){this.children=e,this.pos=t,this.i=i,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function DR(n,e,t,i,s,r,l,o,a){let{children:c}=n,u=c.length?c[e]:null,f=r.length?r[r.length-1]:null,h=f?f.breakAfter:l;if(!(e==i&&u&&!l&&!h&&r.length<2&&u.merge(t,s,r.length?f:null,t==0,o,a))){if(i<c.length){let d=c[i];d&&s<d.length?(e==i&&(d=d.split(s),s=0),!h&&f&&d.merge(0,s,f,!0,0,a)?r[r.length-1]=d:(s&&d.merge(0,s,null,!1,0,a),r.push(d))):d!=null&&d.breakAfter&&(f?f.breakAfter=1:l=1),i++}for(u&&(u.breakAfter=l,t>0&&(!l&&r.length&&u.merge(t,u.length,r[0],!1,o,0)?u.breakAfter=r.shift().breakAfter:(t<u.length||u.children.length&&u.children[u.children.length-1].length==0)&&u.merge(t,u.length,null,!1,o,0),e++));e<i&&r.length;)if(c[i-1].become(r[r.length-1]))i--,r.pop(),a=r.length?0:o;else if(c[e].become(r[0]))e++,r.shift(),o=r.length?0:a;else break;!r.length&&e&&i<c.length&&!c[e-1].breakAfter&&c[i].merge(0,0,c[e-1],!1,o,a)&&e--,(e<i||r.length)&&n.replaceChildren(e,i,r)}}function NR(n,e,t,i,s,r){let l=n.childCursor(),{i:o,off:a}=l.findPos(t,1),{i:c,off:u}=l.findPos(e,-1),f=e-t;for(let h of i)f+=h.length;n.length+=f,DR(n,c,u,o,a,i,0,s,r)}let Ws=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},U1=typeof document<"u"?document:{documentElement:{style:{}}};const W1=/Edge\/(\d+)/.exec(Ws.userAgent),PR=/MSIE \d/.test(Ws.userAgent),F1=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ws.userAgent),Fm=!!(PR||F1||W1),TE=!Fm&&/gecko\/(\d+)/i.test(Ws.userAgent),Pp=!Fm&&/Chrome\/(\d+)/.exec(Ws.userAgent),IE="webkitFontSmoothing"in U1.documentElement.style,MR=!Fm&&/Apple Computer/.test(Ws.vendor),OE=MR&&(/Mobile\/\w+/.test(Ws.userAgent)||Ws.maxTouchPoints>2);var Tt={mac:OE||/Mac/.test(Ws.platform),windows:/Win/.test(Ws.platform),linux:/Linux|X11/.test(Ws.platform),ie:Fm,ie_version:PR?U1.documentMode||6:F1?+F1[1]:W1?+W1[1]:0,gecko:TE,gecko_version:TE?+(/Firefox\/(\d+)/.exec(Ws.userAgent)||[0,0])[1]:0,chrome:!!Pp,chrome_version:Pp?+Pp[1]:0,ios:OE,android:/Android\b/.test(Ws.userAgent),webkit:IE,safari:MR,webkit_version:IE?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:U1.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const OK=256;class xl extends $n{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,i){return i&&(!(i instanceof xl)||this.length-(t-e)+i.length>OK)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new xl(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new ss(this.dom,e)}domBoundsAround(e,t,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return j1(this.dom,e,t)}}class Gr extends $n{constructor(e,t=[],i=0){super(),this.mark=e,this.children=t,this.length=i;for(let s of t)s.setParent(this)}setAttrs(e){if(OR(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.dirty|=6)}sync(e,t){this.dom?this.dirty&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,i,s,r,l){return i&&(!(i instanceof Gr&&i.mark.eq(this.mark))||e&&r<=0||t<this.length&&l<=0)?!1:(NR(this,e,t,i?i.children:[],r-1,l-1),this.markDirty(),!0)}split(e){let t=[],i=0,s=-1,r=0;for(let o of this.children){let a=i+o.length;a>e&&t.push(i<e?o.split(e-i):o),s<0&&i>=e&&(s=r),i=a,r++}let l=this.length-e;return this.length=e,s>-1&&(this.children.length=s,this.markDirty()),new Gr(this.mark,t,l)}domAtPos(e){return VR(this,e)}coordsAt(e,t){return WR(this,e,t)}}function j1(n,e,t){let i=n.nodeValue.length;e>i&&(e=i);let s=e,r=e,l=0;e==0&&t<0||e==i&&t>=0?Tt.chrome||Tt.gecko||(e?(s--,l=1):r<i&&(r++,l=-1)):t<0?s--:r<i&&r++;let o=xa(n,s,r).getClientRects();if(!o.length)return TR;let a=o[(l?l<0:t>=0)?0:o.length-1];return Tt.safari&&!l&&a.width==0&&(a=Array.prototype.find.call(o,c=>c.width)||a),l?ib(a,l<0):a||null}class Nl extends $n{constructor(e,t,i){super(),this.widget=e,this.length=t,this.side=i,this.prevWidget=null}static create(e,t,i){return new(e.customView||Nl)(e,t,i)}split(e){let t=Nl.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,t,i,s,r,l){return i&&(!(i instanceof Nl)||!this.widget.compare(i.widget)||e>0&&r<=0||t<this.length&&l<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}become(e){return e.length==this.length&&e instanceof Nl&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.eq(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Tn.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,i=t&&t.state.doc,s=this.posAtStart;return i?i.slice(s,s+this.length):Tn.empty}domAtPos(e){return e==0?ss.before(this.dom):ss.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let i=this.dom.getClientRects(),s=null;if(!i.length)return TR;for(let r=e>0?i.length-1:0;s=i[r],!(e>0?r==0:r==i.length-1||s.top<s.bottom);r+=e>0?-1:1);return this.length?s:ib(s,this.side>0)}get isEditable(){return!1}get isWidget(){return!0}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class BR extends Nl{domAtPos(e){let{topView:t,text:i}=this.widget;return t?H1(e,0,t,i,(s,r)=>s.domAtPos(r),s=>new ss(i,Math.min(s,i.nodeValue.length))):new ss(i,Math.min(e,i.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(e,t){let{topView:i,text:s}=this.widget;return i?LR(e,t,i,s):Math.min(t,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(e,t){let{topView:i,text:s}=this.widget;return i?H1(e,t,i,s,(r,l,o)=>r.coordsAt(l,o),(r,l)=>j1(s,r,l)):j1(s,e,t)}destroy(){var e;super.destroy(),(e=this.widget.topView)===null||e===void 0||e.destroy()}get isEditable(){return!0}canReuseDOM(){return!0}}function H1(n,e,t,i,s,r){if(t instanceof Gr){for(let l=t.dom.firstChild;l;l=l.nextSibling){let o=$n.get(l);if(!o)return r(n,e);let a=Za(l,i),c=o.length+(a?i.nodeValue.length:0);if(n<c||n==c&&o.getSide()<=0)return a?H1(n,e,o,i,s,r):s(o,n,e);n-=c}return s(t,t.length,-1)}else return t.dom==i?r(n,e):s(t,n,e)}function LR(n,e,t,i){if(t instanceof Gr)for(let s of t.children){let r=0,l=Za(s.dom,i);if(Za(s.dom,n))return r+(l?LR(n,e,s,i):s.localPosFromDOM(n,e));r+=l?i.nodeValue.length:s.length}else if(t.dom==i)return Math.min(e,i.nodeValue.length);return t.localPosFromDOM(n,e)}class $a extends $n{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof $a&&e.side==this.side}split(){return new $a(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return ss.before(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){let t=this.dom.getBoundingClientRect(),i=RK(this,this.side>0?-1:1);return i&&i.top<t.bottom&&i.bottom>t.top?{left:t.left,right:t.right,top:i.top,bottom:i.bottom}:t}get overrideDOMText(){return Tn.empty}}xl.prototype.children=Nl.prototype.children=$a.prototype.children=sb;function RK(n,e){let t=n.parent,i=t?t.children.indexOf(n):-1;for(;t&&i>=0;)if(e<0?i>0:i<t.children.length){let s=t.children[i+e];if(s instanceof xl){let r=s.coordsAt(e<0?s.length:0,e);if(r)return r}i+=e}else if(t instanceof Gr&&t.parent)i=t.parent.children.indexOf(t)+(e<0?0:1),t=t.parent;else{let s=t.dom.lastChild;if(s&&s.nodeName=="BR")return s.getClientRects()[0];break}}function VR(n,e){let t=n.dom,{children:i}=n,s=0;for(let r=0;s<i.length;s++){let l=i[s],o=r+l.length;if(!(o==r&&l.getSide()<=0)){if(e>r&&e<o&&l.dom.parentNode==t)return l.domAtPos(e-r);if(e<=r)break;r=o}}for(let r=s;r>0;r--){let l=i[r-1];if(l.dom.parentNode==t)return l.domAtPos(l.length)}for(let r=s;r<i.length;r++){let l=i[r];if(l.dom.parentNode==t)return l.domAtPos(0)}return new ss(t,0)}function UR(n,e,t){let i,{children:s}=n;t>0&&e instanceof Gr&&s.length&&(i=s[s.length-1])instanceof Gr&&i.mark.eq(e.mark)?UR(i,e.children[0],t-1):(s.push(e),e.setParent(n)),n.length+=e.length}function WR(n,e,t){let i=null,s=-1,r=null,l=-1;function o(c,u){for(let f=0,h=0;f<c.children.length&&h<=u;f++){let d=c.children[f],p=h+d.length;p>=u&&(d.children.length?o(d,u-h):!r&&(p>u||h==p&&d.getSide()>0)?(r=d,l=u-h):(h<u||h==p&&d.getSide()<0)&&(i=d,s=u-h)),h=p}}o(n,e);let a=(t<0?i:r)||i||r;return a?a.coordsAt(Math.max(0,a==i?s:l),t):DK(n)}function DK(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=Vu(e);return t[t.length-1]||null}function q1(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}function rb(n,e){if(n==e)return!0;if(!n||!e)return!1;let t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let s of t)if(i.indexOf(s)==-1||n[s]!==e[s])return!1;return!0}function z1(n,e,t){let i=null;if(e)for(let s in e)t&&s in t||n.removeAttribute(i=s);if(t)for(let s in t)e&&e[s]==t[s]||n.setAttribute(i=s,t[s]);return!!i}class no{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}ignoreEvent(e){return!0}get customView(){return null}destroy(e){}}var Vn=function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n}(Vn||(Vn={}));class Lt extends Go{constructor(e,t,i,s){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=s}get heightRelevant(){return!1}static mark(e){return new jm(e)}static widget(e){let t=e.side||0,i=!!e.block;return t+=i?t>0?3e8:-4e8:t>0?1e8:-1e8,new Ko(e,t,t,i,e.widget||null,!1)}static replace(e){let t=!!e.block,i,s;if(e.isBlockGap)i=-5e8,s=4e8;else{let{start:r,end:l}=FR(e,t);i=(r?t?-3e8:-1:5e8)-1,s=(l?t?2e8:1:-6e8)+1}return new Ko(e,i,s,t,e.widget||null,!0)}static line(e){return new yf(e)}static set(e,t=!1){return In.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Lt.none=In.empty;class jm extends Lt{constructor(e){let{start:t,end:i}=FR(e);super(t?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){return this==e||e instanceof jm&&this.tagName==e.tagName&&this.class==e.class&&rb(this.attrs,e.attrs)}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}jm.prototype.point=!1;class yf extends Lt{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof yf&&this.spec.class==e.spec.class&&rb(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}yf.prototype.mapMode=ys.TrackBefore;yf.prototype.point=!0;class Ko extends Lt{constructor(e,t,i,s,r,l){super(t,i,r,e),this.block=s,this.isReplace=l,this.mapMode=s?t<=0?ys.TrackBefore:ys.TrackAfter:ys.TrackDel}get type(){return this.startSide<this.endSide?Vn.WidgetRange:this.startSide<=0?Vn.WidgetBefore:Vn.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(e){return e instanceof Ko&&NK(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}Ko.prototype.point=!0;function FR(n,e=!1){let{inclusiveStart:t,inclusiveEnd:i}=n;return t==null&&(t=n.inclusive),i==null&&(i=n.inclusive),{start:t??e,end:i??e}}function NK(n,e){return n==e||!!(n&&e&&n.compare(e))}function G1(n,e,t,i=0){let s=t.length-1;s>=0&&t[s]+i>=n?t[s]=Math.max(t[s],e):t.push(n,e)}class As extends $n{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,i,s,r,l){if(i){if(!(i instanceof As))return!1;this.dom||i.transferDOM(this)}return s&&this.setDeco(i?i.attrs:null),NR(this,e,t,i?i.children:[],r,l),!0}split(e){let t=new As;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i,off:s}=this.childPos(e);s&&(t.append(this.children[i].split(s),0),this.children[i].merge(s,this.children[i].length,null,!1,0,0),i++);for(let r=i;r<this.children.length;r++)t.append(this.children[r],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){rb(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){UR(this,e,t)}addLineDeco(e){let t=e.spec.attributes,i=e.spec.class;t&&(this.attrs=q1(t,this.attrs||{})),i&&(this.attrs=q1({class:i},this.attrs||{}))}domAtPos(e){return VR(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.dirty|=6)}sync(e,t){var i;this.dom?this.dirty&4&&(OR(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(z1(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let s=this.dom.lastChild;for(;s&&$n.get(s)instanceof Gr;)s=s.lastChild;if(!s||!this.length||s.nodeName!="BR"&&((i=$n.get(s))===null||i===void 0?void 0:i.isEditable)==!1&&(!Tt.ios||!this.children.some(r=>r instanceof xl))){let r=document.createElement("BR");r.cmIgnore=!0,this.dom.appendChild(r)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0;for(let t of this.children){if(!(t instanceof xl)||/[^ -~]/.test(t.text))return null;let i=Vu(t.dom);if(i.length!=1)return null;e+=i[0].width}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length}:null}coordsAt(e,t){return WR(this,e,t)}become(e){return!1}get type(){return Vn.Text}static find(e,t){for(let i=0,s=0;i<e.children.length;i++){let r=e.children[i],l=s+r.length;if(l>=t){if(r instanceof As)return r;if(l>t)break}s=l+r.breakAfter}return null}}class Ro extends $n{constructor(e,t,i){super(),this.widget=e,this.length=t,this.type=i,this.breakAfter=0,this.prevWidget=null}merge(e,t,i,s,r,l){return i&&(!(i instanceof Ro)||!this.widget.compare(i.widget)||e>0&&r<=0||t<this.length&&l<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?ss.before(this.dom):ss.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let i=new Ro(this.widget,t,this.type);return i.breakAfter=this.breakAfter,i}get children(){return sb}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Tn.empty}domBoundsAround(){return null}become(e){return e instanceof Ro&&e.type==this.type&&e.widget.constructor==this.widget.constructor?(e.widget.eq(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class lb{constructor(e,t,i,s){this.doc=e,this.pos=t,this.end=i,this.disallowBlockEffectsFor=s,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!e.breakAfter&&!(e instanceof Ro&&e.type==Vn.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new As),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Gf(new $a(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||this.getLine()}buildText(e,t,i){for(;e>0;){if(this.textOff==this.text.length){let{value:r,lineBreak:l,done:o}=this.cursor.next(this.skip);if(this.skip=0,o)throw new Error("Ran out of text content when drawing inline views");if(l){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=r,this.textOff=0}let s=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-i)),this.getLine().append(Gf(new xl(this.text.slice(this.textOff,this.textOff+s)),t),i),this.atCursorPos=!0,this.textOff+=s,e-=s,i=0}}span(e,t,i,s){this.buildText(t-e,i,s),this.pos=t,this.openStart<0&&(this.openStart=s)}point(e,t,i,s,r,l){if(this.disallowBlockEffectsFor[l]&&i instanceof Ko){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let o=t-e;if(i instanceof Ko)if(i.block){let{type:a}=i;a==Vn.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Ro(i.widget||new RE("div"),o,a))}else{let a=Nl.create(i.widget||new RE("span"),o,o?0:i.startSide),c=this.atCursorPos&&!a.isEditable&&r<=s.length&&(e<t||i.startSide>0),u=!a.isEditable&&(e<t||r>s.length||i.startSide<=0),f=this.getLine();this.pendingBuffer==2&&!c&&(this.pendingBuffer=0),this.flushBuffer(s),c&&(f.append(Gf(new $a(1),s),r),r=s.length+Math.max(0,r-s.length)),f.append(Gf(a,s),r),this.atCursorPos=u,this.pendingBuffer=u?e<t||r>s.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=s.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);o&&(this.textOff+o<=this.text.length?this.textOff+=o:(this.skip+=o-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=r)}static build(e,t,i,s,r){let l=new lb(e,t,i,r);return l.openEnd=In.spans(s,t,i,l),l.openStart<0&&(l.openStart=l.openEnd),l.finish(l.openEnd),l}}function Gf(n,e){for(let t of e)n=new Gr(t,[n],n.length);return n}class RE extends no{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}}const jR=kt.define(),HR=kt.define(),qR=kt.define(),zR=kt.define(),K1=kt.define(),GR=kt.define(),KR=kt.define(),QR=kt.define({combine:n=>n.some(e=>e)}),XR=kt.define({combine:n=>n.some(e=>e)});class vd{constructor(e,t="nearest",i="nearest",s=5,r=5){this.range=e,this.y=t,this.x=i,this.yMargin=s,this.xMargin=r}map(e){return e.empty?this:new vd(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const DE=$t.define({map:(n,e)=>n.map(e)});function Hs(n,e,t){let i=n.facet(zR);i.length?i[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const Hm=kt.define({combine:n=>n.length?n[0]:!0});let PK=0;const qc=kt.define();class ki{constructor(e,t,i,s){this.id=e,this.create=t,this.domEventHandlers=i,this.extension=s(this)}static define(e,t){const{eventHandlers:i,provide:s,decorations:r}=t||{};return new ki(PK++,e,i,l=>{let o=[qc.of(l)];return r&&o.push(Wu.of(a=>{let c=a.plugin(l);return c?r(c):Lt.none})),s&&o.push(s(l)),o})}static fromClass(e,t){return ki.define(i=>new e(i),t)}}class Mp{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(i){if(Hs(t.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){Hs(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(i){Hs(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const YR=kt.define(),ob=kt.define(),Wu=kt.define(),JR=kt.define(),ZR=kt.define(),zc=kt.define();class qr{constructor(e,t,i,s){this.fromA=e,this.toA=t,this.fromB=i,this.toB=s}join(e){return new qr(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let s=e[t-1];if(!(s.fromA>i.toA)){if(s.toA<i.fromA)break;i=i.join(s),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(t.length==0)return e;let i=[];for(let s=0,r=0,l=0,o=0;;s++){let a=s==e.length?null:e[s],c=l-o,u=a?a.fromB:1e9;for(;r<t.length&&t[r]<u;){let f=t[r],h=t[r+1],d=Math.max(o,f),p=Math.min(u,h);if(d<=p&&new qr(d+c,p+c,d,p).addToSet(i),h>u)break;r+=2}if(!a)return i;new qr(a.fromA,a.toA,a.fromB,a.toB).addToSet(i),l=a.toA,o=a.toB}}}class bd{constructor(e,t,i){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=Oi.empty(this.startState.doc.length);for(let r of i)this.changes=this.changes.compose(r.changes);let s=[];this.changes.iterChangedRanges((r,l,o,a)=>s.push(new qr(r,l,o,a))),this.changedRanges=s}static create(e,t,i){return new bd(e,t,i)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var si=function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n}(si||(si={}));const Q1=si.LTR,MK=si.RTL;function xR(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const BK=xR("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),LK=xR("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),X1=Object.create(null),kr=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);X1[e]=t,X1[t]=-e}function VK(n){return n<=247?BK[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?LK[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8203?256:64336<=n&&n<=65023?4:n==8204?256:1}const UK=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Ra{constructor(e,t,i){this.from=e,this.to=t,this.level=i}get dir(){return this.level%2?MK:Q1}side(e,t){return this.dir==t==e?this.to:this.from}static find(e,t,i,s){let r=-1;for(let l=0;l<e.length;l++){let o=e[l];if(o.from<=t&&o.to>=t){if(o.level==i)return l;(r<0||(s!=0?s<0?o.from<t:o.to>t:e[r].level>o.level))&&(r=l)}}if(r<0)throw new RangeError("Index out of range");return r}}const ni=[];function WK(n,e){let t=n.length,i=e==Q1?1:2,s=e==Q1?2:1;if(!n||i==1&&!UK.test(n))return $R(t);for(let l=0,o=i,a=i;l<t;l++){let c=VK(n.charCodeAt(l));c==512?c=o:c==8&&a==4&&(c=16),ni[l]=c==4?2:c,c&7&&(a=c),o=c}for(let l=0,o=i,a=i;l<t;l++){let c=ni[l];if(c==128)l<t-1&&o==ni[l+1]&&o&24?c=ni[l]=o:ni[l]=256;else if(c==64){let u=l+1;for(;u<t&&ni[u]==64;)u++;let f=l&&o==8||u<t&&ni[u]==8?a==1?1:8:256;for(let h=l;h<u;h++)ni[h]=f;l=u-1}else c==8&&a==1&&(ni[l]=1);o=c,c&7&&(a=c)}for(let l=0,o=0,a=0,c,u,f;l<t;l++)if(u=X1[c=n.charCodeAt(l)])if(u<0){for(let h=o-3;h>=0;h-=3)if(kr[h+1]==-u){let d=kr[h+2],p=d&2?i:d&4?d&1?s:i:0;p&&(ni[l]=ni[kr[h]]=p),o=h;break}}else{if(kr.length==189)break;kr[o++]=l,kr[o++]=c,kr[o++]=a}else if((f=ni[l])==2||f==1){let h=f==i;a=h?0:1;for(let d=o-3;d>=0;d-=3){let p=kr[d+2];if(p&2)break;if(h)kr[d+2]|=2;else{if(p&4)break;kr[d+2]|=4}}}for(let l=0;l<t;l++)if(ni[l]==256){let o=l+1;for(;o<t&&ni[o]==256;)o++;let a=(l?ni[l-1]:i)==1,c=(o<t?ni[o]:i)==1,u=a==c?a?1:2:i;for(let f=l;f<o;f++)ni[f]=u;l=o-1}let r=[];if(i==1)for(let l=0;l<t;){let o=l,a=ni[l++]!=1;for(;l<t&&a==(ni[l]!=1);)l++;if(a)for(let c=l;c>o;){let u=c,f=ni[--c]!=2;for(;c>o&&f==(ni[c-1]!=2);)c--;r.push(new Ra(c,u,f?2:1))}else r.push(new Ra(o,l,0))}else for(let l=0;l<t;){let o=l,a=ni[l++]==2;for(;l<t&&a==(ni[l]==2);)l++;r.push(new Ra(o,l,a?1:2))}return r}function $R(n){return[new Ra(0,n,0)]}let eD="";function FK(n,e,t,i,s){var r;let l=i.head-n.from,o=-1;if(l==0){if(!s||!n.length)return null;e[0].level!=t&&(l=e[0].side(!1,t),o=0)}else if(l==n.length){if(s)return null;let h=e[e.length-1];h.level!=t&&(l=h.side(!0,t),o=e.length-1)}o<0&&(o=Ra.find(e,l,(r=i.bidiLevel)!==null&&r!==void 0?r:-1,i.assoc));let a=e[o];l==a.side(s,t)&&(a=e[o+=s?1:-1],l=a.side(!s,t));let c=s==(a.dir==t),u=Es(n.text,l,c);if(eD=n.text.slice(Math.min(l,u),Math.max(l,u)),u!=a.side(s,t))return Je.cursor(u+n.from,c?-1:1,a.level);let f=o==(s?e.length-1:0)?null:e[o+(s?1:-1)];return!f&&a.level!=t?Je.cursor(s?n.to:n.from,s?-1:1,t):f&&f.level<a.level?Je.cursor(f.side(!s,t)+n.from,s?1:-1,f.level):Je.cursor(u+n.from,s?-1:1,a.level)}const Pl="";class tD{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(ln.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Pl}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let s=e;;){this.findPointBefore(i,s),this.readNode(s);let r=s.nextSibling;if(r==t)break;let l=$n.get(s),o=$n.get(r);(l&&o?l.breakAfter:(l?l.breakAfter:NE(s))||NE(r)&&(s.nodeName!="BR"||s.cmIgnore))&&this.lineBreak(),s=r}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,s=this.lineSeparator?null:/\r\n?|\n/g;;){let r=-1,l=1,o;if(this.lineSeparator?(r=t.indexOf(this.lineSeparator,i),l=this.lineSeparator.length):(o=s.exec(t))&&(r=o.index,l=o[0].length),this.append(t.slice(i,r<0?t.length:r)),r<0)break;if(this.lineBreak(),l>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=l-1);i=r+l}}readNode(e){if(e.cmIgnore)return;let t=$n.get(e),i=t&&t.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let s=i.iter();!s.next().done;)s.lineBreak?this.lineBreak():this.append(s.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+Math.min(t,i.offset))}}function NE(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}class PE{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class ME extends $n{constructor(e){super(),this.view=e,this.compositionDeco=Lt.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new As],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new qr(0,0,0,e.state.doc.length)],0)}get length(){return this.view.state.doc.length}update(e){let t=e.changedRanges;this.minWidth>0&&t.length&&(t.every(({fromA:l,toA:o})=>o<this.minWidthFrom||l>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=Lt.none:(e.transactions.length||this.dirty)&&(this.compositionDeco=HK(this.view,e.changes)),(Tt.ie||Tt.chrome)&&!this.compositionDeco.size&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let i=this.decorations,s=this.updateDeco(),r=KK(i,s,e.changes);return t=qr.extendWithRanges(t,r),this.dirty==0&&t.length==0?!1:(this.updateInner(t,e.startState.doc.length),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let r=Tt.chrome||Tt.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,r),this.dirty=0,r&&(r.written||i.selectionRange.focusNode!=r.node)&&(this.forceSelection=!0),this.dom.style.height=""});let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let r of this.children)r instanceof Ro&&r.widget instanceof BE&&s.push(r.dom);i.updateGaps(s)}updateChildren(e,t){let i=this.childCursor(t);for(let s=e.length-1;;s--){let r=s>=0?e[s]:null;if(!r)break;let{fromA:l,toA:o,fromB:a,toB:c}=r,{content:u,breakAtStart:f,openStart:h,openEnd:d}=lb.build(this.view.state.doc,a,c,this.decorations,this.dynamicDecorationMap),{i:p,off:v}=i.findPos(o,1),{i:y,off:b}=i.findPos(l,-1);DR(this,y,b,p,v,u,f,h,d)}}updateSelection(e=!1,t=!1){if((e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange(),!(t||this.mayControlSelection()))return;let i=this.forceSelection;this.forceSelection=!1;let s=this.view.state.selection.main,r=this.domAtPos(s.anchor),l=s.empty?r:this.domAtPos(s.head);if(Tt.gecko&&s.empty&&jK(r)){let a=document.createTextNode("");this.view.observer.ignore(()=>r.node.insertBefore(a,r.node.childNodes[r.offset]||null)),r=l=new ss(a,0),i=!0}let o=this.view.observer.selectionRange;(i||!o.focusNode||!pd(r.node,r.offset,o.anchorNode,o.anchorOffset)||!pd(l.node,l.offset,o.focusNode,o.focusOffset))&&(this.view.observer.ignore(()=>{Tt.android&&Tt.chrome&&this.dom.contains(o.focusNode)&&QK(o.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let a=md(this.view.root);if(a)if(s.empty){if(Tt.gecko){let c=zK(r.node,r.offset);if(c&&c!=3){let u=iD(r.node,r.offset,c==1?1:-1);u&&(r=new ss(u,c==1?0:u.nodeValue.length))}}a.collapse(r.node,r.offset),s.bidiLevel!=null&&o.cursorBidiLevel!=null&&(o.cursorBidiLevel=s.bidiLevel)}else if(a.extend){a.collapse(r.node,r.offset);try{a.extend(l.node,l.offset)}catch{}}else{let c=document.createRange();s.anchor>s.head&&([r,l]=[l,r]),c.setEnd(l.node,l.offset),c.setStart(r.node,r.offset),a.removeAllRanges(),a.addRange(c)}}),this.view.observer.setSelectionRange(r,l)),this.impreciseAnchor=r.precise?null:new ss(o.anchorNode,o.anchorOffset),this.impreciseHead=l.precise?null:new ss(o.focusNode,o.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let{view:e}=this,t=e.state.selection.main,i=md(e.root),{anchorNode:s,anchorOffset:r}=e.observer.selectionRange;if(!i||!t.empty||!t.assoc||!i.modify)return;let l=As.find(this,t.head);if(!l)return;let o=l.posAtStart;if(t.head==o||t.head==o+l.length)return;let a=this.coordsAt(t.head,-1),c=this.coordsAt(t.head,1);if(!a||!c||a.bottom>c.top)return;let u=this.domAtPos(t.head+t.assoc);i.collapse(u.node,u.offset),i.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let f=e.observer.selectionRange;e.docView.posFromDOM(f.anchorNode,f.anchorOffset)!=t.from&&i.collapse(s,r)}mayControlSelection(){let e=this.view.root.activeElement;return e==this.dom||Ah(this.dom,this.view.observer.selectionRange)&&!(e&&this.dom.contains(e))}nearest(e){for(let t=e;t;){let i=$n.get(t);if(i&&i.rootView==this)return i;t=t.parentNode}return null}posFromDOM(e,t){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,t)+i.posAtStart}domAtPos(e){let{i:t,off:i}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let s=this.children[t];if(i<s.length||s instanceof As)break;t++,i=0}return this.children[t].domAtPos(i)}coordsAt(e,t){for(let i=this.length,s=this.children.length-1;;s--){let r=this.children[s],l=i-r.breakAfter-r.length;if(e>l||e==l&&r.type!=Vn.WidgetBefore&&r.type!=Vn.WidgetAfter&&(!s||t==2||this.children[s-1].breakAfter||this.children[s-1].type==Vn.WidgetBefore&&t>-2))return r.coordsAt(e-l,t);i=l}}measureVisibleLineHeights(e){let t=[],{from:i,to:s}=e,r=this.view.contentDOM.clientWidth,l=r>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,o=-1,a=this.view.textDirection==si.LTR;for(let c=0,u=0;u<this.children.length;u++){let f=this.children[u],h=c+f.length;if(h>s)break;if(c>=i){let d=f.dom.getBoundingClientRect();if(t.push(d.height),l){let p=f.dom.lastChild,v=p?Vu(p):[];if(v.length){let y=v[v.length-1],b=a?y.right-d.left:d.right-y.left;b>o&&(o=b,this.minWidth=r,this.minWidthFrom=c,this.minWidthTo=h)}}}c=h+f.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?si.RTL:si.LTR}measureTextSize(){for(let s of this.children)if(s instanceof As){let r=s.measureTextSize();if(r)return r}let e=document.createElement("div"),t,i;return e.className="cm-line",e.style.width="99999px",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=Vu(e.firstChild)[0];t=e.getBoundingClientRect().height,i=s?s.width/27:7,e.remove()}),{lineHeight:t,charWidth:i}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new RR(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,s=0;;s++){let r=s==t.viewports.length?null:t.viewports[s],l=r?r.from-1:this.length;if(l>i){let o=t.lineBlockAt(l).bottom-t.lineBlockAt(i).top;e.push(Lt.replace({widget:new BE(o),block:!0,inclusive:!0,isBlockGap:!0}).range(i,l))}if(!r)break;i=r.to+1}return Lt.set(e)}updateDeco(){let e=this.view.state.facet(Wu).map((t,i)=>(this.dynamicDecorationMap[i]=typeof t=="function")?t(this.view):t);for(let t=e.length;t<e.length+3;t++)this.dynamicDecorationMap[t]=!1;return this.decorations=[...e,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let{range:t}=e,i=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),s;if(!i)return;!t.empty&&(s=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(i={left:Math.min(i.left,s.left),top:Math.min(i.top,s.top),right:Math.max(i.right,s.right),bottom:Math.max(i.bottom,s.bottom)});let r=0,l=0,o=0,a=0;for(let u of this.view.state.facet(ZR).map(f=>f(this.view)))if(u){let{left:f,right:h,top:d,bottom:p}=u;f!=null&&(r=Math.max(r,f)),h!=null&&(l=Math.max(l,h)),d!=null&&(o=Math.max(o,d)),p!=null&&(a=Math.max(a,p))}let c={left:i.left-r,top:i.top-o,right:i.right+l,bottom:i.bottom+a};wK(this.view.scrollDOM,c,t.head<t.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==si.LTR)}}function jK(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}class BE extends no{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function nD(n){let e=n.observer.selectionRange,t=e.focusNode&&iD(e.focusNode,e.focusOffset,0);if(!t)return null;let i=n.docView.nearest(t);if(!i)return null;if(i instanceof As){let s=t;for(;s.parentNode!=i.dom;)s=s.parentNode;let r=s.previousSibling;for(;r&&!$n.get(r);)r=r.previousSibling;let l=r?$n.get(r).posAtEnd:i.posAtStart;return{from:l,to:l,node:s,text:t}}else{for(;;){let{parent:r}=i;if(!r)return null;if(r instanceof As)break;i=r}let s=i.posAtStart;return{from:s,to:s+i.length,node:i.dom,text:t}}}function HK(n,e){let t=nD(n);if(!t)return Lt.none;let{from:i,to:s,node:r,text:l}=t,o=e.mapPos(i,1),a=Math.max(o,e.mapPos(s,-1)),{state:c}=n,u=r.nodeType==3?r.nodeValue:new tD([],c).readRange(r.firstChild,null).text;if(a-o<u.length)if(c.doc.sliceString(o,Math.min(c.doc.length,o+u.length),Pl)==u)a=o+u.length;else if(c.doc.sliceString(Math.max(0,a-u.length),a,Pl)==u)o=a-u.length;else return Lt.none;else if(c.doc.sliceString(o,a,Pl)!=u)return Lt.none;let f=$n.get(r);return f instanceof BR?f=f.widget.topView:f&&(f.parent=null),Lt.set(Lt.replace({widget:new qK(r,l,f),inclusive:!0}).range(o,a))}class qK extends no{constructor(e,t,i){super(),this.top=e,this.text=t,this.topView=i}eq(e){return this.top==e.top&&this.text==e.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return BR}}function iD(n,e,t){for(;;){if(n.nodeType==3)return n;if(n.nodeType==1&&e>0&&t<=0)n=n.childNodes[e-1],e=Uu(n);else if(n.nodeType==1&&e<n.childNodes.length&&t>=0)n=n.childNodes[e],e=0;else return null}}function zK(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}class GK{constructor(){this.changes=[]}compareRange(e,t){G1(e,t,this.changes)}comparePoint(e,t){G1(e,t,this.changes)}}function KK(n,e,t){let i=new GK;return In.compare(n,e,t,i),i.changes}function QK(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function XK(n,e,t=1){let i=n.charCategorizer(e),s=n.doc.lineAt(e),r=e-s.from;if(s.length==0)return Je.cursor(e);r==0?t=1:r==s.length&&(t=-1);let l=r,o=r;t<0?l=Es(s.text,r,!1):o=Es(s.text,r);let a=i(s.text.slice(l,o));for(;l>0;){let c=Es(s.text,l,!1);if(i(s.text.slice(c,l))!=a)break;l=c}for(;o<s.length;){let c=Es(s.text,o);if(i(s.text.slice(o,c))!=a)break;o=c}return Je.range(l+s.from,o+s.from)}function YK(n,e){return e.left>n?e.left-n:Math.max(0,n-e.right)}function JK(n,e){return e.top>n?e.top-n:Math.max(0,n-e.bottom)}function Bp(n,e){return n.top<e.bottom-1&&n.bottom>e.top+1}function LE(n,e){return e<n.top?{top:e,left:n.left,right:n.right,bottom:n.bottom}:n}function VE(n,e){return e>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:e}:n}function Y1(n,e,t){let i,s,r,l,o=!1,a,c,u,f;for(let p=n.firstChild;p;p=p.nextSibling){let v=Vu(p);for(let y=0;y<v.length;y++){let b=v[y];s&&Bp(s,b)&&(b=LE(VE(b,s.bottom),s.top));let S=YK(e,b),I=JK(t,b);if(S==0&&I==0)return p.nodeType==3?UE(p,e,t):Y1(p,e,t);if(!i||l>I||l==I&&r>S){i=p,s=b,r=S,l=I;let T=I?t<b.top?-1:1:S?e<b.left?-1:1:0;o=!T||(T>0?y<v.length-1:y>0)}S==0?t>b.bottom&&(!u||u.bottom<b.bottom)?(a=p,u=b):t<b.top&&(!f||f.top>b.top)&&(c=p,f=b):u&&Bp(u,b)?u=VE(u,b.bottom):f&&Bp(f,b)&&(f=LE(f,b.top))}}if(u&&u.bottom>=t?(i=a,s=u):f&&f.top<=t&&(i=c,s=f),!i)return{node:n,offset:0};let h=Math.max(s.left,Math.min(s.right,e));if(i.nodeType==3)return UE(i,h,t);if(o&&i.contentEditable!="false")return Y1(i,h,t);let d=Array.prototype.indexOf.call(n.childNodes,i)+(e>=(s.left+s.right)/2?1:0);return{node:n,offset:d}}function UE(n,e,t){let i=n.nodeValue.length,s=-1,r=1e9,l=0;for(let o=0;o<i;o++){let a=xa(n,o,o+1).getClientRects();for(let c=0;c<a.length;c++){let u=a[c];if(u.top==u.bottom)continue;l||(l=e-u.left);let f=(u.top>t?u.top-t:t-u.bottom)-1;if(u.left-1<=e&&u.right+1>=e&&f<r){let h=e>=(u.left+u.right)/2,d=h;if((Tt.chrome||Tt.gecko)&&xa(n,o).getBoundingClientRect().left==u.right&&(d=!h),f<=0)return{node:n,offset:o+(d?1:0)};s=o+(d?1:0),r=f}}}return{node:n,offset:s>-1?s:l>0?n.nodeValue.length:0}}function sD(n,e,t,i=-1){var s;let r=n.contentDOM.getBoundingClientRect(),l=r.top+n.viewState.paddingTop,o,{docHeight:a}=n.viewState,{x:c,y:u}=e,f=u-l;if(f<0)return 0;if(f>a)return n.state.doc.length;for(let I=n.defaultLineHeight/2,T=!1;o=n.elementAtHeight(f),o.type!=Vn.Text;)for(;f=i>0?o.bottom+I:o.top-I,!(f>=0&&f<=a);){if(T)return t?null:0;T=!0,i=-i}u=l+f;let h=o.from;if(h<n.viewport.from)return n.viewport.from==0?0:t?null:WE(n,r,o,c,u);if(h>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:t?null:WE(n,r,o,c,u);let d=n.dom.ownerDocument,p=n.root.elementFromPoint?n.root:d,v=p.elementFromPoint(c,u);v&&!n.contentDOM.contains(v)&&(v=null),v||(c=Math.max(r.left+1,Math.min(r.right-1,c)),v=p.elementFromPoint(c,u),v&&!n.contentDOM.contains(v)&&(v=null));let y,b=-1;if(v&&((s=n.docView.nearest(v))===null||s===void 0?void 0:s.isEditable)!=!1){if(d.caretPositionFromPoint){let I=d.caretPositionFromPoint(c,u);I&&({offsetNode:y,offset:b}=I)}else if(d.caretRangeFromPoint){let I=d.caretRangeFromPoint(c,u);I&&({startContainer:y,startOffset:b}=I,(!n.contentDOM.contains(y)||Tt.safari&&ZK(y,b,c)||Tt.chrome&&xK(y,b,c))&&(y=void 0))}}if(!y||!n.docView.dom.contains(y)){let I=As.find(n.docView,h);if(!I)return f>o.top+o.height/2?o.to:o.from;({node:y,offset:b}=Y1(I.dom,c,u))}let S=n.docView.nearest(y);if(!S)return null;if(S.isWidget){let I=S.dom.getBoundingClientRect();return e.y<I.top||e.y<=I.bottom&&e.x<=(I.left+I.right)/2?S.posAtStart:S.posAtEnd}else return S.localPosFromDOM(y,b)+S.posAtStart}function WE(n,e,t,i,s){let r=Math.round((i-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&t.height>n.defaultLineHeight*1.5){let o=Math.floor((s-t.top)/n.defaultLineHeight);r+=o*n.viewState.heightOracle.lineLength}let l=n.state.sliceDoc(t.from,t.to);return t.from+B1(l,r,n.state.tabSize)}function ZK(n,e,t){let i;if(n.nodeType!=3||e!=(i=n.nodeValue.length))return!1;for(let s=n.nextSibling;s;s=s.nextSibling)if(s.nodeType!=1||s.nodeName!="BR")return!1;return xa(n,i-1,i).getBoundingClientRect().left>t}function xK(n,e,t){if(e!=0)return!1;for(let s=n;;){let r=s.parentNode;if(!r||r.nodeType!=1||r.firstChild!=s)return!1;if(r.classList.contains("cm-line"))break;s=r}let i=n.nodeType==1?n.getBoundingClientRect():xa(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect();return t-i.left>5}function $K(n,e,t,i){let s=n.state.doc.lineAt(e.head),r=!i||!n.lineWrapping?null:n.coordsAtPos(e.assoc<0&&e.head>s.from?e.head-1:e.head);if(r){let a=n.dom.getBoundingClientRect(),c=n.textDirectionAt(s.from),u=n.posAtCoords({x:t==(c==si.LTR)?a.right-1:a.left+1,y:(r.top+r.bottom)/2});if(u!=null)return Je.cursor(u,t?-1:1)}let l=As.find(n.docView,e.head),o=l?t?l.posAtEnd:l.posAtStart:t?s.to:s.from;return Je.cursor(o,t?-1:1)}function FE(n,e,t,i){let s=n.state.doc.lineAt(e.head),r=n.bidiSpans(s),l=n.textDirectionAt(s.from);for(let o=e,a=null;;){let c=FK(s,r,l,o,t),u=eD;if(!c){if(s.number==(t?n.state.doc.lines:1))return o;u=`
`,s=n.state.doc.line(s.number+(t?1:-1)),r=n.bidiSpans(s),c=Je.cursor(t?s.from:s.to)}if(a){if(!a(u))return o}else{if(!i)return c;a=i(u)}o=c}}function eQ(n,e,t){let i=n.state.charCategorizer(e),s=i(t);return r=>{let l=i(r);return s==ti.Space&&(s=l),s==l}}function tQ(n,e,t,i){let s=e.head,r=t?1:-1;if(s==(t?n.state.doc.length:0))return Je.cursor(s,e.assoc);let l=e.goalColumn,o,a=n.contentDOM.getBoundingClientRect(),c=n.coordsAtPos(s),u=n.documentTop;if(c)l==null&&(l=c.left-a.left),o=r<0?c.top:c.bottom;else{let d=n.viewState.lineBlockAt(s);l==null&&(l=Math.min(a.right-a.left,n.defaultCharacterWidth*(s-d.from))),o=(r<0?d.top:d.bottom)+u}let f=a.left+l,h=i??n.defaultLineHeight>>1;for(let d=0;;d+=10){let p=o+(h+d)*r,v=sD(n,{x:f,y:p},!1,r);if(p<a.top||p>a.bottom||(r<0?v<s:v>s))return Je.cursor(v,e.assoc,void 0,l)}}function Lp(n,e,t){let i=n.state.facet(JR).map(s=>s(n));for(;;){let s=!1;for(let r of i)r.between(t.from-1,t.from+1,(l,o,a)=>{t.from>l&&t.from<o&&(t=e.head>t.from?Je.cursor(l,1):Je.cursor(o,-1),s=!0)});if(!s)return t}}class nQ{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.mouseSelection=null;let t=(i,s)=>{this.ignoreDuringComposition(s)||s.type=="keydown"&&this.keydown(e,s)||(this.mustFlushObserver(s)&&e.observer.forceFlush(),this.runCustomHandlers(s.type,e,s)?s.preventDefault():i(e,s))};for(let i in Pi){let s=Pi[i];e.contentDOM.addEventListener(i,r=>{jE(e,r)&&t(s,r)},J1[i]),this.registeredEvents.push(i)}e.scrollDOM.addEventListener("mousedown",i=>{i.target==e.scrollDOM&&i.clientY>e.contentDOM.getBoundingClientRect().bottom&&t(Pi.mousedown,i)}),Tt.chrome&&Tt.chrome_version==102&&e.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=e.hasFocus,Tt.safari&&e.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e,t){var i;let s;this.customHandlers=[];for(let r of t)if(s=(i=r.update(e).spec)===null||i===void 0?void 0:i.domEventHandlers){this.customHandlers.push({plugin:r.value,handlers:s});for(let l in s)this.registeredEvents.indexOf(l)<0&&l!="scroll"&&(this.registeredEvents.push(l),e.contentDOM.addEventListener(l,o=>{jE(e,o)&&this.runCustomHandlers(l,e,o)&&o.preventDefault()}))}}runCustomHandlers(e,t,i){for(let s of this.customHandlers){let r=s.handlers[e];if(r)try{if(r.call(s.plugin,i,t)||i.defaultPrevented)return!0}catch(l){Hs(t.state,l)}}return!1}runScrollHandlers(e,t){this.lastScrollTop=e.scrollDOM.scrollTop,this.lastScrollLeft=e.scrollDOM.scrollLeft;for(let i of this.customHandlers){let s=i.handlers.scroll;if(s)try{s.call(i.plugin,t,e)}catch(r){Hs(e.state,r)}}}keydown(e,t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),t.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(Tt.android&&Tt.chrome&&!t.synthetic&&(t.keyCode==13||t.keyCode==8))return e.observer.delayAndroidKey(t.key,t.keyCode),!0;let i;return Tt.ios&&!t.synthetic&&!t.altKey&&!t.metaKey&&((i=rD.find(s=>s.keyCode==t.keyCode))&&!t.ctrlKey||iQ.indexOf(t.key)>-1&&t.ctrlKey&&!t.shiftKey)?(this.pendingIOSKey=i||t,setTimeout(()=>this.flushIOSKey(e),250),!0):!1}flushIOSKey(e){let t=this.pendingIOSKey;return t?(this.pendingIOSKey=void 0,Oa(e.contentDOM,t.key,t.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:Tt.safari&&!Tt.ios&&Date.now()-this.compositionEndedAt<100?(this.compositionEndedAt=0,!0):!1:!1}mustFlushObserver(e){return e.type=="keydown"&&e.keyCode!=229}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const rD=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],iQ="dthko",lD=[16,17,18,20,91,92,224,225];function Kf(n){return n*.7+8}class sQ{constructor(e,t,i,s){this.view=e,this.style=i,this.mustSelect=s,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParent=CK(e.contentDOM);let r=e.contentDOM.ownerDocument;r.addEventListener("mousemove",this.move=this.move.bind(this)),r.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(ln.allowMultipleSelections)&&rQ(e,t),this.dragMove=lQ(e,t),this.dragging=oQ(e,t)&&uD(t)==1?null:!1}start(e){this.dragging===!1&&(e.preventDefault(),this.select(e))}move(e){var t;if(e.buttons==0)return this.destroy();if(this.dragging!==!1)return;this.select(this.lastEvent=e);let i=0,s=0,r=((t=this.scrollParent)===null||t===void 0?void 0:t.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight};e.clientX<=r.left?i=-Kf(r.left-e.clientX):e.clientX>=r.right&&(i=Kf(e.clientX-r.right)),e.clientY<=r.top?s=-Kf(r.top-e.clientY):e.clientY>=r.bottom&&(s=Kf(e.clientY-r.bottom)),this.setScrollSpeed(i,s)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}select(e){let t=this.style.get(e,this.extend,this.multiple);(this.mustSelect||!t.eq(this.view.state.selection)||t.main.assoc!=this.view.state.selection.main.assoc)&&this.view.dispatch({selection:t,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function rQ(n,e){let t=n.state.facet(jR);return t.length?t[0](e):Tt.mac?e.metaKey:e.ctrlKey}function lQ(n,e){let t=n.state.facet(HR);return t.length?t[0](e):Tt.mac?!e.altKey:!e.ctrlKey}function oQ(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let i=md(n.root);if(!i||i.rangeCount==0)return!0;let s=i.getRangeAt(0).getClientRects();for(let r=0;r<s.length;r++){let l=s[r];if(l.left<=e.clientX&&l.right>=e.clientX&&l.top<=e.clientY&&l.bottom>=e.clientY)return!0}return!1}function jE(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,i;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(i=$n.get(t))&&i.ignoreEvent(e))return!1;return!0}const Pi=Object.create(null),J1=Object.create(null),oD=Tt.ie&&Tt.ie_version<15||Tt.ios&&Tt.webkit_version<604;function aQ(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),aD(n,t.value)},50)}function aD(n,e){let{state:t}=n,i,s=1,r=t.toText(e),l=r.lines==t.selection.ranges.length;if(Z1!=null&&t.selection.ranges.every(a=>a.empty)&&Z1==r.toString()){let a=-1;i=t.changeByRange(c=>{let u=t.doc.lineAt(c.from);if(u.from==a)return{range:c};a=u.from;let f=t.toText((l?r.line(s++).text:e)+t.lineBreak);return{changes:{from:u.from,insert:f},range:Je.cursor(c.from+f.length)}})}else l?i=t.changeByRange(a=>{let c=r.line(s++);return{changes:{from:a.from,to:a.to,insert:c.text},range:Je.cursor(a.from+c.length)}}):i=t.replaceSelection(r);n.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}Pi.keydown=(n,e)=>{n.inputState.setSelectionOrigin("select"),e.keyCode==27?n.inputState.lastEscPress=Date.now():lD.indexOf(e.keyCode)<0&&(n.inputState.lastEscPress=0)};Pi.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};Pi.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};J1.touchstart=J1.touchmove={passive:!0};Pi.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return;let t=null;for(let i of n.state.facet(qR))if(t=i(n,e),t)break;if(!t&&e.button==0&&(t=fQ(n,e)),t){let i=n.root.activeElement!=n.contentDOM;n.inputState.startMouseSelection(new sQ(n,e,t,i)),i&&n.observer.ignore(()=>IR(n.contentDOM)),n.inputState.mouseSelection&&n.inputState.mouseSelection.start(e)}};function HE(n,e,t,i){if(i==1)return Je.cursor(e,t);if(i==2)return XK(n.state,e,t);{let s=As.find(n.docView,e),r=n.state.doc.lineAt(s?s.posAtEnd:e),l=s?s.posAtStart:r.from,o=s?s.posAtEnd:r.to;return o<n.state.doc.length&&o==r.to&&o++,Je.range(l,o)}}let cD=(n,e)=>n>=e.top&&n<=e.bottom,qE=(n,e,t)=>cD(e,t)&&n>=t.left&&n<=t.right;function cQ(n,e,t,i){let s=As.find(n.docView,e);if(!s)return 1;let r=e-s.posAtStart;if(r==0)return 1;if(r==s.length)return-1;let l=s.coordsAt(r,-1);if(l&&qE(t,i,l))return-1;let o=s.coordsAt(r,1);return o&&qE(t,i,o)?1:l&&cD(i,l)?-1:1}function zE(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:cQ(n,t,e.clientX,e.clientY)}}const uQ=Tt.ie&&Tt.ie_version<=11;let GE=null,KE=0,QE=0;function uD(n){if(!uQ)return n.detail;let e=GE,t=QE;return GE=n,QE=Date.now(),KE=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(KE+1)%3:1}function fQ(n,e){let t=zE(n,e),i=uD(e),s=n.state.selection;return{update(r){r.docChanged&&(t.pos=r.changes.mapPos(t.pos),s=s.map(r.changes))},get(r,l,o){let a=zE(n,r),c=HE(n,a.pos,a.bias,i);if(t.pos!=a.pos&&!l){let u=HE(n,t.pos,t.bias,i),f=Math.min(u.from,c.from),h=Math.max(u.to,c.to);c=f<c.from?Je.range(f,h):Je.range(h,f)}return l?s.replaceRange(s.main.extend(c.from,c.to)):o&&s.ranges.length>1&&s.ranges.some(u=>u.eq(c))?hQ(s,c):o?s.addRange(c):Je.create([c])}}}function hQ(n,e){for(let t=0;;t++)if(n.ranges[t].eq(e))return Je.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}Pi.dragstart=(n,e)=>{let{selection:{main:t}}=n.state,{mouseSelection:i}=n.inputState;i&&(i.dragging=t),e.dataTransfer&&(e.dataTransfer.setData("Text",n.state.sliceDoc(t.from,t.to)),e.dataTransfer.effectAllowed="copyMove")};function XE(n,e,t,i){if(!t)return;let s=n.posAtCoords({x:e.clientX,y:e.clientY},!1);e.preventDefault();let{mouseSelection:r}=n.inputState,l=i&&r&&r.dragging&&r.dragMove?{from:r.dragging.from,to:r.dragging.to}:null,o={from:s,insert:t},a=n.state.changes(l?[l,o]:o);n.focus(),n.dispatch({changes:a,selection:{anchor:a.mapPos(s,-1),head:a.mapPos(s,1)},userEvent:l?"move.drop":"input.drop"})}Pi.drop=(n,e)=>{if(!e.dataTransfer)return;if(n.state.readOnly)return e.preventDefault();let t=e.dataTransfer.files;if(t&&t.length){e.preventDefault();let i=Array(t.length),s=0,r=()=>{++s==t.length&&XE(n,e,i.filter(l=>l!=null).join(n.state.lineBreak),!1)};for(let l=0;l<t.length;l++){let o=new FileReader;o.onerror=r,o.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(o.result)||(i[l]=o.result),r()},o.readAsText(t[l])}}else XE(n,e,e.dataTransfer.getData("Text"),!0)};Pi.paste=(n,e)=>{if(n.state.readOnly)return e.preventDefault();n.observer.flush();let t=oD?null:e.clipboardData;t?(aD(n,t.getData("text/plain")),e.preventDefault()):aQ(n)};function dQ(n,e){let t=n.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),n.focus()},50)}function mQ(n){let e=[],t=[],i=!1;for(let s of n.selection.ranges)s.empty||(e.push(n.sliceDoc(s.from,s.to)),t.push(s));if(!e.length){let s=-1;for(let{from:r}of n.selection.ranges){let l=n.doc.lineAt(r);l.number>s&&(e.push(l.text),t.push({from:l.from,to:Math.min(n.doc.length,l.to+1)})),s=l.number}i=!0}return{text:e.join(n.lineBreak),ranges:t,linewise:i}}let Z1=null;Pi.copy=Pi.cut=(n,e)=>{let{text:t,ranges:i,linewise:s}=mQ(n.state);if(!t&&!s)return;Z1=s?t:null;let r=oD?null:e.clipboardData;r?(e.preventDefault(),r.clearData(),r.setData("text/plain",t)):dQ(n,t),e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"})};const fD=yl.define();function hD(n,e){let t=[];for(let i of n.facet(KR)){let s=i(n,e);s&&t.push(s)}return t?n.update({effects:t,annotations:fD.of(!0)}):null}function dD(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let t=hD(n.state,e);t?n.dispatch(t):n.update([])}},10)}Pi.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),dD(n)};Pi.blur=n=>{n.observer.clearSelectionRange(),dD(n)};Pi.compositionstart=Pi.compositionupdate=n=>{n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0)};Pi.compositionend=n=>{n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionFirstChange=null,Tt.chrome&&Tt.android&&n.observer.flushSoon(),setTimeout(()=>{n.inputState.composing<0&&n.docView.compositionDeco.size&&n.update([])},50)};Pi.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};Pi.beforeinput=(n,e)=>{var t;let i;if(Tt.chrome&&Tt.android&&(i=rD.find(s=>s.inputType==e.inputType))&&(n.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let s=((t=window.visualViewport)===null||t===void 0?void 0:t.height)||0;setTimeout(()=>{var r;(((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0)>s+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}};const YE=["pre-wrap","normal","pre-line","break-spaces"];class pQ{constructor(e){this.lineWrapping=e,this.doc=Tn.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return YE.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let s=e[i];s<0?i++:this.heightSamples[Math.floor(s*10)]||(t=!0,this.heightSamples[Math.floor(s*10)]=!0)}return t}refresh(e,t,i,s,r){let l=YE.indexOf(e)>-1,o=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=l;if(this.lineWrapping=l,this.lineHeight=t,this.charWidth=i,this.lineLength=s,o){this.heightSamples={};for(let a=0;a<r.length;a++){let c=r[a];c<0?a++:this.heightSamples[Math.floor(c*10)]=!0}}return o}}class gQ{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class el{constructor(e,t,i,s,r){this.from=e,this.length=t,this.top=i,this.height=s,this.type=r}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(e){let t=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(e.type)?e.type:[e]);return new el(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var Xn=function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n}(Xn||(Xn={}));const wh=.001;class Ts{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>wh&&(e.heightChanged=!0),this.height=t)}replace(e,t,i){return Ts.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,s){let r=this,l=i.doc;for(let o=s.length-1;o>=0;o--){let{fromA:a,toA:c,fromB:u,toB:f}=s[o],h=r.lineAt(a,Xn.ByPosNoHeight,i.setDoc(t),0,0),d=h.to>=c?h:r.lineAt(c,Xn.ByPosNoHeight,i,0,0);for(f+=d.to-c,c=d.to;o>0&&h.from<=s[o-1].toA;)a=s[o-1].fromA,u=s[o-1].fromB,o--,a<h.from&&(h=r.lineAt(a,Xn.ByPosNoHeight,i,0,0));u+=h.from-a,a=h.from;let p=ab.build(i.setDoc(l),e,u,f);r=r.replace(a,c,p)}return r.updateHeight(i,0)}static empty(){return new Vs(0,0)}static of(e){if(e.length==1)return e[0];let t=0,i=e.length,s=0,r=0;for(;;)if(t==i)if(s>r*2){let o=e[t-1];o.break?e.splice(--t,1,o.left,null,o.right):e.splice(--t,1,o.left,o.right),i+=1+o.break,s-=o.size}else if(r>s*2){let o=e[i];o.break?e.splice(i,1,o.left,null,o.right):e.splice(i,1,o.left,o.right),i+=2+o.break,r-=o.size}else break;else if(s<r){let o=e[t++];o&&(s+=o.size)}else{let o=e[--i];o&&(r+=o.size)}let l=0;return e[t-1]==null?(l=1,t--):e[t]==null&&(l=1,i++),new vQ(Ts.of(e.slice(0,t)),l,Ts.of(e.slice(i)))}}Ts.prototype.size=1;class mD extends Ts{constructor(e,t,i){super(e,t),this.type=i}blockAt(e,t,i,s){return new el(s,this.length,i,this.height,this.type)}lineAt(e,t,i,s,r){return this.blockAt(0,i,s,r)}forEachLine(e,t,i,s,r,l){e<=r+this.length&&t>=r&&l(this.blockAt(0,i,s,r))}updateHeight(e,t=0,i=!1,s){return s&&s.from<=t&&s.more&&this.setHeight(e,s.heights[s.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Vs extends mD{constructor(e,t){super(e,t,Vn.Text),this.collapsed=0,this.widgetHeight=0}replace(e,t,i){let s=i[0];return i.length==1&&(s instanceof Vs||s instanceof zi&&s.flags&4)&&Math.abs(this.length-s.length)<10?(s instanceof zi?s=new Vs(s.length,this.height):s.height=this.height,this.outdated||(s.outdated=!1),s):Ts.of(i)}updateHeight(e,t=0,i=!1,s){return s&&s.from<=t&&s.more?this.setHeight(e,s.heights[s.index++]):(i||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class zi extends Ts{constructor(e){super(e,0)}heightMetrics(e,t){let i=e.doc.lineAt(t).number,s=e.doc.lineAt(t+this.length).number,r=s-i+1,l,o=0;if(e.lineWrapping){let a=Math.min(this.height,e.lineHeight*r);l=a/r,o=(this.height-a)/(this.length-r-1)}else l=this.height/r;return{firstLine:i,lastLine:s,perLine:l,perChar:o}}blockAt(e,t,i,s){let{firstLine:r,lastLine:l,perLine:o,perChar:a}=this.heightMetrics(t,s);if(t.lineWrapping){let c=s+Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length),u=t.doc.lineAt(c),f=o+u.length*a,h=Math.max(i,e-f/2);return new el(u.from,u.length,h,f,Vn.Text)}else{let c=Math.max(0,Math.min(l-r,Math.floor((e-i)/o))),{from:u,length:f}=t.doc.line(r+c);return new el(u,f,i+o*c,o,Vn.Text)}}lineAt(e,t,i,s,r){if(t==Xn.ByHeight)return this.blockAt(e,i,s,r);if(t==Xn.ByPosNoHeight){let{from:d,to:p}=i.doc.lineAt(e);return new el(d,p-d,0,0,Vn.Text)}let{firstLine:l,perLine:o,perChar:a}=this.heightMetrics(i,r),c=i.doc.lineAt(e),u=o+c.length*a,f=c.number-l,h=s+o*f+a*(c.from-r-f);return new el(c.from,c.length,Math.max(s,Math.min(h,s+this.height-u)),u,Vn.Text)}forEachLine(e,t,i,s,r,l){e=Math.max(e,r),t=Math.min(t,r+this.length);let{firstLine:o,perLine:a,perChar:c}=this.heightMetrics(i,r);for(let u=e,f=s;u<=t;){let h=i.doc.lineAt(u);if(u==e){let p=h.number-o;f+=a*p+c*(e-r-p)}let d=a+c*h.length;l(new el(h.from,h.length,f,d,Vn.Text)),f+=d,u=h.to+1}}replace(e,t,i){let s=this.length-t;if(s>0){let r=i[i.length-1];r instanceof zi?i[i.length-1]=new zi(r.length+s):i.push(null,new zi(s-1))}if(e>0){let r=i[0];r instanceof zi?i[0]=new zi(e+r.length):i.unshift(new zi(e-1),null)}return Ts.of(i)}decomposeLeft(e,t){t.push(new zi(e-1),null)}decomposeRight(e,t){t.push(null,new zi(this.length-e-1))}updateHeight(e,t=0,i=!1,s){let r=t+this.length;if(s&&s.from<=t+this.length&&s.more){let l=[],o=Math.max(t,s.from),a=-1;for(s.from>t&&l.push(new zi(s.from-t-1).updateHeight(e,t));o<=r&&s.more;){let u=e.doc.lineAt(o).length;l.length&&l.push(null);let f=s.heights[s.index++];a==-1?a=f:Math.abs(f-a)>=wh&&(a=-2);let h=new Vs(u,f);h.outdated=!1,l.push(h),o+=u+1}o<=r&&l.push(null,new zi(r-o).updateHeight(e,o));let c=Ts.of(l);return(a<0||Math.abs(c.height-this.height)>=wh||Math.abs(a-this.heightMetrics(e,t).perLine)>=wh)&&(e.heightChanged=!0),c}else(i||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class vQ extends Ts{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,t,i,s){let r=i+this.left.height;return e<r?this.left.blockAt(e,t,i,s):this.right.blockAt(e,t,r,s+this.left.length+this.break)}lineAt(e,t,i,s,r){let l=s+this.left.height,o=r+this.left.length+this.break,a=t==Xn.ByHeight?e<l:e<o,c=a?this.left.lineAt(e,t,i,s,r):this.right.lineAt(e,t,i,l,o);if(this.break||(a?c.to<o:c.from>o))return c;let u=t==Xn.ByPosNoHeight?Xn.ByPosNoHeight:Xn.ByPos;return a?c.join(this.right.lineAt(o,u,i,l,o)):this.left.lineAt(o,u,i,s,r).join(c)}forEachLine(e,t,i,s,r,l){let o=s+this.left.height,a=r+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,t,i,s,r,l),t>=a&&this.right.forEachLine(e,t,i,o,a,l);else{let c=this.lineAt(a,Xn.ByPos,i,s,r);e<c.from&&this.left.forEachLine(e,c.from-1,i,s,r,l),c.to>=e&&c.from<=t&&l(c),t>c.to&&this.right.forEachLine(c.to+1,t,i,o,a,l)}}replace(e,t,i){let s=this.left.length+this.break;if(t<s)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-s,t-s,i));let r=[];e>0&&this.decomposeLeft(e,r);let l=r.length;for(let o of i)r.push(o);if(e>0&&JE(r,l-1),t<this.length){let o=r.length;this.decomposeRight(t,r),JE(r,o)}return Ts.of(r)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,s=i+this.break;if(e>=s)return this.right.decomposeRight(e-s,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<s&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Ts.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,s){let{left:r,right:l}=this,o=t+r.length+this.break,a=null;return s&&s.from<=t+r.length&&s.more?a=r=r.updateHeight(e,t,i,s):r.updateHeight(e,t,i),s&&s.from<=o+l.length&&s.more?a=l=l.updateHeight(e,o,i,s):l.updateHeight(e,o,i),a?this.balanced(r,l):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function JE(n,e){let t,i;n[e]==null&&(t=n[e-1])instanceof zi&&(i=n[e+1])instanceof zi&&n.splice(e-1,3,new zi(t.length+1+i.length))}const bQ=5;class ab{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let i=Math.min(t,this.lineEnd),s=this.nodes[this.nodes.length-1];s instanceof Vs?s.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new Vs(i-this.pos,-1)),this.writtenTo=i,t>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let s=i.widget?i.widget.estimatedHeight:0;s<0&&(s=this.oracle.lineHeight);let r=t-e;i.block?this.addBlock(new mD(r,s,i.type)):(r||s>=bQ)&&this.addLineDeco(s,r)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Vs(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let i=new zi(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Vs)return e;let t=new Vs(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine(),e.type==Vn.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,e.type!=Vn.WidgetBefore&&(this.covering=e)}addLineDeco(e,t){let i=this.ensureLine();i.length+=t,i.collapsed+=t,i.widgetHeight=Math.max(i.widgetHeight,e),this.writtenTo=this.pos=this.pos+t}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof Vs)&&!this.isCovered?this.nodes.push(new Vs(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let s of this.nodes)s instanceof Vs&&s.updateHeight(this.oracle,i),i+=s?s.length:1;return this.nodes}static build(e,t,i,s){let r=new ab(i,e);return In.spans(t,i,s,r,0),r.finish(i)}}function _Q(n,e,t){let i=new yQ;return In.compare(n,e,t,i,0),i.changes}class yQ{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,s){(e<t||i&&i.heightRelevant||s&&s.heightRelevant)&&G1(e,t,this.changes,5)}}function SQ(n,e){let t=n.getBoundingClientRect(),i=n.ownerDocument,s=i.defaultView||window,r=Math.max(0,t.left),l=Math.min(s.innerWidth,t.right),o=Math.max(0,t.top),a=Math.min(s.innerHeight,t.bottom);for(let c=n.parentNode;c&&c!=i.body;)if(c.nodeType==1){let u=c,f=window.getComputedStyle(u);if((u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth)&&f.overflow!="visible"){let h=u.getBoundingClientRect();r=Math.max(r,h.left),l=Math.min(l,h.right),o=Math.max(o,h.top),a=c==n.parentNode?h.bottom:Math.min(a,h.bottom)}c=f.position=="absolute"||f.position=="fixed"?u.offsetParent:u.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:r-t.left,right:Math.max(r,l)-t.left,top:o-(t.top+e),bottom:Math.max(o,a)-(t.top+e)}}function EQ(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class Vp{constructor(e,t,i){this.from=e,this.to=t,this.size=i}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let s=e[i],r=t[i];if(s.from!=r.from||s.to!=r.to||s.size!=r.size)return!1}return!0}draw(e){return Lt.replace({widget:new AQ(this.size,e)}).range(this.from,this.to)}}class AQ extends no{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class ZE{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scaler=xE,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=si.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(ob).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new pQ(t),this.stateDeco=e.facet(Wu).filter(i=>typeof i!="function"),this.heightMap=Ts.empty().applyChanges(this.stateDeco,Tn.empty,this.heightOracle.setDoc(e.doc),[new qr(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Lt.set(this.lineGaps.map(i=>i.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let s=i?t.head:t.anchor;if(!e.some(({from:r,to:l})=>s>=r&&s<=l)){let{from:r,to:l}=this.lineBlockAt(s);e.push(new Qf(r,l))}}this.viewports=e.sort((i,s)=>i.from-s.from),this.scaler=this.heightMap.height<=7e6?xE:new kQ(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:Gc(e,this.scaler))})}update(e,t=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(Wu).filter(c=>typeof c!="function");let s=e.changedRanges,r=qr.extendWithRanges(s,_Q(i,this.stateDeco,e?e.changes:Oi.empty(this.state.doc.length))),l=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),r),this.heightMap.height!=l&&(e.flags|=2);let o=r.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<o.from||t.range.head>o.to)||!this.viewportIsAppropriate(o))&&(o=this.getViewport(0,t));let a=!e.changes.empty||e.flags&2||o.from!=this.viewport.from||o.to!=this.viewport.to;this.viewport=o,this.updateForViewport(),a&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>2e3<<1)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(XR)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,i=window.getComputedStyle(t),s=this.heightOracle,r=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?si.RTL:si.LTR;let l=this.heightOracle.mustRefreshForWrapping(r),o=t.getBoundingClientRect(),a=l||this.mustMeasureContent||this.contentDOMHeight!=o.height;this.contentDOMHeight=o.height,this.mustMeasureContent=!1;let c=0,u=0,f=parseInt(i.paddingTop)||0,h=parseInt(i.paddingBottom)||0;(this.paddingTop!=f||this.paddingBottom!=h)&&(this.paddingTop=f,this.paddingBottom=h,c|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(s.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,c|=8);let d=(this.printing?EQ:SQ)(t,this.paddingTop),p=d.top-this.pixelViewport.top,v=d.bottom-this.pixelViewport.bottom;this.pixelViewport=d;let y=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(y!=this.inView&&(this.inView=y,y&&(a=!0)),!this.inView&&!this.scrollTarget)return 0;let b=o.width;if((this.contentDOMWidth!=b||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=o.width,this.editorHeight=e.scrollDOM.clientHeight,c|=8),a){let I=e.docView.measureVisibleLineHeights(this.viewport);if(s.mustRefreshForHeights(I)&&(l=!0),l||s.lineWrapping&&Math.abs(b-this.contentDOMWidth)>s.charWidth){let{lineHeight:T,charWidth:C}=e.docView.measureTextSize();l=T>0&&s.refresh(r,T,C,b/C,I),l&&(e.docView.minWidth=0,c|=8)}p>0&&v>0?u=Math.max(p,v):p<0&&v<0&&(u=Math.min(p,v)),s.heightChanged=!1;for(let T of this.viewports){let C=T.from==this.viewport.from?I:e.docView.measureVisibleLineHeights(T);this.heightMap=(l?Ts.empty().applyChanges(this.stateDeco,Tn.empty,this.heightOracle,[new qr(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(s,0,l,new gQ(T.from,C))}s.heightChanged&&(c|=2)}let S=!this.viewportIsAppropriate(this.viewport,u)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return S&&(this.viewport=this.getViewport(u,this.scrollTarget)),this.updateForViewport(),(c&2||S)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>2e3<<1)&&this.updateLineGaps(this.ensureLineGaps(l?[]:this.lineGaps,e)),c|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),c}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),s=this.heightMap,r=this.heightOracle,{visibleTop:l,visibleBottom:o}=this,a=new Qf(s.lineAt(l-i*1e3,Xn.ByHeight,r,0,0).from,s.lineAt(o+(1-i)*1e3,Xn.ByHeight,r,0,0).to);if(t){let{head:c}=t.range;if(c<a.from||c>a.to){let u=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),f=s.lineAt(c,Xn.ByPos,r,0,0),h;t.y=="center"?h=(f.top+f.bottom)/2-u/2:t.y=="start"||t.y=="nearest"&&c<a.from?h=f.top:h=f.bottom-u,a=new Qf(s.lineAt(h-1e3/2,Xn.ByHeight,r,0,0).from,s.lineAt(h+u+1e3/2,Xn.ByHeight,r,0,0).to)}}return a}mapViewport(e,t){let i=t.mapPos(e.from,-1),s=t.mapPos(e.to,1);return new Qf(this.heightMap.lineAt(i,Xn.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(s,Xn.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){if(!this.inView)return!0;let{top:s}=this.heightMap.lineAt(e,Xn.ByPos,this.heightOracle,0,0),{bottom:r}=this.heightMap.lineAt(t,Xn.ByPos,this.heightOracle,0,0),{visibleTop:l,visibleBottom:o}=this;return(e==0||s<=l-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||r>=o+Math.max(10,Math.min(i,250)))&&s>l-2*1e3&&r<o+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let s of e)t.touchesRange(s.from,s.to)||i.push(new Vp(t.mapPos(s.from),t.mapPos(s.to),s.size));return i}ensureLineGaps(e,t){let i=this.heightOracle.lineWrapping,s=i?1e4:2e3,r=s>>1,l=s<<1;if(this.defaultTextDirection!=si.LTR&&!i)return[];let o=[],a=(c,u,f,h)=>{if(u-c<r)return;let d=this.state.selection.main,p=[d.from];d.empty||p.push(d.to);for(let y of p)if(y>c&&y<u){a(c,y-10,f,h),a(y+10,u,f,h);return}let v=CQ(e,y=>y.from>=f.from&&y.to<=f.to&&Math.abs(y.from-c)<r&&Math.abs(y.to-u)<r&&!p.some(b=>y.from<b&&y.to>b));if(!v){if(u<f.to&&t&&i&&t.visibleRanges.some(y=>y.from<=u&&y.to>=u)){let y=t.moveToLineBoundary(Je.cursor(u),!1,!0).head;y>c&&(u=y)}v=new Vp(c,u,this.gapSize(f,c,u,h))}o.push(v)};for(let c of this.viewportLines){if(c.length<l)continue;let u=wQ(c.from,c.to,this.stateDeco);if(u.total<l)continue;let f=this.scrollTarget?this.scrollTarget.range.head:null,h,d;if(i){let p=s/this.heightOracle.lineLength*this.heightOracle.lineHeight,v,y;if(f!=null){let b=Yf(u,f),S=((this.visibleBottom-this.visibleTop)/2+p)/c.height;v=b-S,y=b+S}else v=(this.visibleTop-c.top-p)/c.height,y=(this.visibleBottom-c.top+p)/c.height;h=Xf(u,v),d=Xf(u,y)}else{let p=u.total*this.heightOracle.charWidth,v=s*this.heightOracle.charWidth,y,b;if(f!=null){let S=Yf(u,f),I=((this.pixelViewport.right-this.pixelViewport.left)/2+v)/p;y=S-I,b=S+I}else y=(this.pixelViewport.left-v)/p,b=(this.pixelViewport.right+v)/p;h=Xf(u,y),d=Xf(u,b)}h>c.from&&a(c.from,h,c,u),d<c.to&&a(d,c.to,c,u)}return o}gapSize(e,t,i,s){let r=Yf(s,i)-Yf(s,t);return this.heightOracle.lineWrapping?e.height*r:s.total*this.heightOracle.charWidth*r}updateLineGaps(e){Vp.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Lt.set(e.map(t=>t.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];In.spans(e,this.viewport.from,this.viewport.to,{span(s,r){t.push({from:s,to:r})},point(){}},20);let i=t.length!=this.visibleRanges.length||this.visibleRanges.some((s,r)=>s.from!=t[r].from||s.to!=t[r].to);return this.visibleRanges=t,i?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||Gc(this.heightMap.lineAt(e,Xn.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return Gc(this.heightMap.lineAt(this.scaler.fromDOM(e),Xn.ByHeight,this.heightOracle,0,0),this.scaler)}elementAtHeight(e){return Gc(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Qf{constructor(e,t){this.from=e,this.to=t}}function wQ(n,e,t){let i=[],s=n,r=0;return In.spans(t,n,e,{span(){},point(l,o){l>s&&(i.push({from:s,to:l}),r+=l-s),s=o}},20),s<e&&(i.push({from:s,to:e}),r+=e-s),{total:r,ranges:i}}function Xf({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let i=Math.floor(n*t);for(let s=0;;s++){let{from:r,to:l}=e[s],o=l-r;if(i<=o)return r+i;i-=o}}function Yf(n,e){let t=0;for(let{from:i,to:s}of n.ranges){if(e<=s){t+=e-i;break}t+=s-i}return t/n.total}function CQ(n,e){for(let t of n)if(e(t))return t}const xE={toDOM(n){return n},fromDOM(n){return n},scale:1};class kQ{constructor(e,t,i){let s=0,r=0,l=0;this.viewports=i.map(({from:o,to:a})=>{let c=t.lineAt(o,Xn.ByPos,e,0,0).top,u=t.lineAt(a,Xn.ByPos,e,0,0).bottom;return s+=u-c,{from:o,to:a,top:c,bottom:u,domTop:0,domBottom:0}}),this.scale=(7e6-s)/(t.height-s);for(let o of this.viewports)o.domTop=l+(o.top-r)*this.scale,l=o.domBottom=o.domTop+(o.bottom-o.top),r=o.bottom}toDOM(e){for(let t=0,i=0,s=0;;t++){let r=t<this.viewports.length?this.viewports[t]:null;if(!r||e<r.top)return s+(e-i)*this.scale;if(e<=r.bottom)return r.domTop+(e-r.top);i=r.bottom,s=r.domBottom}}fromDOM(e){for(let t=0,i=0,s=0;;t++){let r=t<this.viewports.length?this.viewports[t]:null;if(!r||e<r.domTop)return i+(e-s)/this.scale;if(e<=r.domBottom)return r.top+(e-r.domTop);i=r.bottom,s=r.domBottom}}}function Gc(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),i=e.toDOM(n.bottom);return new el(n.from,n.length,t,i-t,Array.isArray(n.type)?n.type.map(s=>Gc(s,e)):n.type)}const Jf=kt.define({combine:n=>n.join(" ")}),x1=kt.define({combine:n=>n.indexOf(!0)>-1}),$1=Jl.newName(),pD=Jl.newName(),gD=Jl.newName(),vD={"&light":"."+pD,"&dark":"."+gD};function e0(n,e,t){return new Jl(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,s=>{if(s=="&")return n;if(!t||!t[s])throw new RangeError(`Unsupported selector: ${s}`);return t[s]}):n+" "+i}})}const TQ=e0("."+$1,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},vD);class IQ{constructor(e,t,i,s){this.typeOver=s,this.bounds=null,this.text="";let{impreciseHead:r,impreciseAnchor:l}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,i,0))){let o=r||l?[]:RQ(e),a=new tD(o,e.state);a.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=a.text,this.newSel=DQ(o,this.bounds.from)}else{let o=e.observer.selectionRange,a=r&&r.node==o.focusNode&&r.offset==o.focusOffset||!Za(e.contentDOM,o.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(o.focusNode,o.focusOffset),c=l&&l.node==o.anchorNode&&l.offset==o.anchorOffset||!Za(e.contentDOM,o.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(o.anchorNode,o.anchorOffset);this.newSel=Je.single(c,a)}}}function bD(n,e){let t,{newSel:i}=e,s=n.state.selection.main;if(e.bounds){let{from:r,to:l}=e.bounds,o=s.from,a=null;(n.inputState.lastKeyCode===8&&n.inputState.lastKeyTime>Date.now()-100||Tt.android&&e.text.length<l-r)&&(o=s.to,a="end");let c=OQ(n.state.doc.sliceString(r,l,Pl),e.text,o-r,a);c&&(Tt.chrome&&n.inputState.lastKeyCode==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==Pl+Pl&&c.toB--,t={from:r+c.from,to:r+c.toA,insert:Tn.of(e.text.slice(c.from,c.toB).split(Pl))})}else i&&(!n.hasFocus&&n.state.facet(Hm)||i.main.eq(s))&&(i=null);if(!t&&!i)return!1;if(!t&&e.typeOver&&!s.empty&&i&&i.main.empty?t={from:s.from,to:s.to,insert:n.state.doc.slice(s.from,s.to)}:t&&t.from>=s.from&&t.to<=s.to&&(t.from!=s.from||t.to!=s.to)&&s.to-s.from-(t.to-t.from)<=4?t={from:s.from,to:s.to,insert:n.state.doc.slice(s.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,s.to))}:(Tt.mac||Tt.android)&&t&&t.from==t.to&&t.from==s.head-1&&/^\. ?$/.test(t.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(i&&t.insert.length==2&&(i=Je.single(i.main.anchor-1,i.main.head-1)),t={from:s.from,to:s.to,insert:Tn.of([" "])}):Tt.chrome&&t&&t.from==t.to&&t.from==s.head&&t.insert.toString()==`
 `&&n.lineWrapping&&(i&&(i=Je.single(i.main.anchor-1,i.main.head-1)),t={from:s.from,to:s.to,insert:Tn.of([" "])}),t){let r=n.state;if(Tt.ios&&n.inputState.flushIOSKey(n)||Tt.android&&(t.from==s.from&&t.to==s.to&&t.insert.length==1&&t.insert.lines==2&&Oa(n.contentDOM,"Enter",13)||t.from==s.from-1&&t.to==s.to&&t.insert.length==0&&Oa(n.contentDOM,"Backspace",8)||t.from==s.from&&t.to==s.to+1&&t.insert.length==0&&Oa(n.contentDOM,"Delete",46)))return!0;let l=t.insert.toString();if(n.state.facet(GR).some(c=>c(n,t.from,t.to,l)))return!0;n.inputState.composing>=0&&n.inputState.composing++;let o;if(t.from>=s.from&&t.to<=s.to&&t.to-t.from>=(s.to-s.from)/3&&(!i||i.main.empty&&i.main.from==t.from+t.insert.length)&&n.inputState.composing<0){let c=s.from<t.from?r.sliceDoc(s.from,t.from):"",u=s.to>t.to?r.sliceDoc(t.to,s.to):"";o=r.replaceSelection(n.state.toText(c+t.insert.sliceString(0,void 0,n.state.lineBreak)+u))}else{let c=r.changes(t),u=i&&!r.selection.main.eq(i.main)&&i.main.to<=c.newLength?i.main:void 0;if(r.selection.ranges.length>1&&n.inputState.composing>=0&&t.to<=s.to&&t.to>=s.to-10){let f=n.state.sliceDoc(t.from,t.to),h=nD(n)||n.state.doc.lineAt(s.head),d=s.to-t.to,p=s.to-s.from;o=r.changeByRange(v=>{if(v.from==s.from&&v.to==s.to)return{changes:c,range:u||v.map(c)};let y=v.to-d,b=y-f.length;if(v.to-v.from!=p||n.state.sliceDoc(b,y)!=f||h&&v.to>=h.from&&v.from<=h.to)return{range:v};let S=r.changes({from:b,to:y,insert:t.insert}),I=v.to-s.to;return{changes:S,range:u?Je.range(Math.max(0,u.anchor+I),Math.max(0,u.head+I)):v.map(S)}})}else o={changes:c,selection:u&&r.selection.replaceRange(u)}}let a="input.type";return n.composing&&(a+=".compose",n.inputState.compositionFirstChange&&(a+=".start",n.inputState.compositionFirstChange=!1)),n.dispatch(o,{scrollIntoView:!0,userEvent:a}),!0}else if(i&&!i.main.eq(s)){let r=!1,l="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(r=!0),l=n.inputState.lastSelectionOrigin),n.dispatch({selection:i,scrollIntoView:r,userEvent:l}),!0}else return!1}function OQ(n,e,t,i){let s=Math.min(n.length,e.length),r=0;for(;r<s&&n.charCodeAt(r)==e.charCodeAt(r);)r++;if(r==s&&n.length==e.length)return null;let l=n.length,o=e.length;for(;l>0&&o>0&&n.charCodeAt(l-1)==e.charCodeAt(o-1);)l--,o--;if(i=="end"){let a=Math.max(0,r-Math.min(l,o));t-=l+a-r}if(l<r&&n.length<e.length){let a=t<=r&&t>=l?r-t:0;r-=a,o=r+(o-l),l=r}else if(o<r){let a=t<=r&&t>=o?r-t:0;r-=a,l=r+(l-o),o=r}return{from:r,toA:l,toB:o}}function RQ(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:i,focusNode:s,focusOffset:r}=n.observer.selectionRange;return t&&(e.push(new PE(t,i)),(s!=t||r!=i)&&e.push(new PE(s,r))),e}function DQ(n,e){if(n.length==0)return null;let t=n[0].pos,i=n.length==2?n[1].pos:t;return t>-1&&i>-1?Je.single(t+e,i+e):null}const NQ={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Up=Tt.ie&&Tt.ie_version<=11;class PQ{constructor(e){this.view=e,this.active=!1,this.selectionRange=new kK,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.resizeContent=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let i of t)this.queue.push(i);(Tt.ie&&Tt.ie_version<=11||Tt.ios&&e.composing)&&t.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),Up&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM),this.resizeContent=new ResizeObserver(()=>this.view.requestMeasure()),this.resizeContent.observe(e.contentDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runScrollHandlers(this.view,e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,i)=>t!=e[i]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,s=this.selectionRange;if(i.state.facet(Hm)?i.root.activeElement!=this.dom:!Ah(i.dom,s))return;let r=s.anchorNode&&i.docView.nearest(s.anchorNode);if(r&&r.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(Tt.ie&&Tt.ie_version<=11||Tt.android&&Tt.chrome)&&!i.state.selection.main.empty&&s.focusNode&&pd(s.focusNode,s.focusOffset,s.anchorNode,s.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=Tt.safari&&e.root.nodeType==11&&EK(this.dom.ownerDocument)==this.dom&&MQ(this.view)||md(e.root);if(!t||this.selectionRange.eq(t))return!1;let i=Ah(this.dom,t);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&IK(this.dom,t)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(t),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(i.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=t)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,NQ),Up&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Up&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var i;if(!this.delayedAndroidKey){let s=()=>{let r=this.delayedAndroidKey;r&&(this.clearDelayedAndroidKey(),!this.flush()&&r.force&&Oa(this.dom,r.key,r.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(s)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}processRecords(){let e=this.queue;for(let r of this.observer.takeRecords())e.push(r);e.length&&(this.queue=[]);let t=-1,i=-1,s=!1;for(let r of e){let l=this.readMutation(r);l&&(l.typeOver&&(s=!0),t==-1?{from:t,to:i}=l:(t=Math.min(l.from,t),i=Math.max(l.to,i)))}return{from:t,to:i,typeOver:s}}readChange(){let{from:e,to:t,typeOver:i}=this.processRecords(),s=this.selectionChanged&&Ah(this.dom,this.selectionRange);return e<0&&!s?null:(e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1,new IQ(this.view,e,t,i))}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return!1;let i=this.view.state,s=bD(this.view,t);return this.view.state==i&&this.view.update([]),s}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.dirty|=4),e.type=="childList"){let i=$E(t,e.previousSibling||e.target.previousSibling,-1),s=$E(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:s?t.posBefore(s):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,t,i,s;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect(),(s=this.resizeContent)===null||s===void 0||s.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function $E(n,e,t){for(;e;){let i=$n.get(e);if(i&&i.parent==n)return i;let s=e.parentNode;e=s!=n.dom?s:t>0?e.nextSibling:e.previousSibling}return null}function MQ(n){let e=null;function t(a){a.preventDefault(),a.stopImmediatePropagation(),e=a.getTargetRanges()[0]}if(n.contentDOM.addEventListener("beforeinput",t,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",t,!0),!e)return null;let i=e.startContainer,s=e.startOffset,r=e.endContainer,l=e.endOffset,o=n.docView.domAtPos(n.state.selection.main.anchor);return pd(o.node,o.offset,r,l)&&([i,s,r,l]=[r,l,i,s]),{anchorNode:i,anchorOffset:s,focusNode:r,focusOffset:l}}class wt{constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: fixed; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(t=>this.update([t])),this.dispatch=this.dispatch.bind(this),this._root=e.root||TK(e.parent)||document,this.viewState=new ZE(e.state||ln.create(e)),this.plugins=this.state.facet(qc).map(t=>new Mp(t));for(let t of this.plugins)t.update(this);this.observer=new PQ(this),this.inputState=new nQ(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new ME(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(...e){this._dispatch(e.length==1&&e[0]instanceof Di?e[0]:this.state.update(...e))}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,i=!1,s,r=this.state;for(let h of e){if(h.startState!=r)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");r=h.state}if(this.destroyed){this.viewState.state=r;return}let l=this.hasFocus,o=0,a=null;e.some(h=>h.annotation(fD))?(this.inputState.notifiedFocused=l,o=1):l!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=l,a=hD(r,l),a||(o=1));let c=this.observer.delayedAndroidKey,u=null;if(c?(this.observer.clearDelayedAndroidKey(),u=this.observer.readChange(),(u&&!this.state.doc.eq(r.doc)||!this.state.selection.eq(r.selection))&&(u=null)):this.observer.clear(),r.facet(ln.phrases)!=this.state.facet(ln.phrases))return this.setState(r);s=bd.create(this,r,e),s.flags|=o;let f=this.viewState.scrollTarget;try{this.updateState=2;for(let h of e){if(f&&(f=f.map(h.changes)),h.scrollIntoView){let{main:d}=h.state.selection;f=new vd(d.empty?d:Je.cursor(d.head,d.head>d.anchor?-1:1))}for(let d of h.effects)d.is(DE)&&(f=d.value)}this.viewState.update(s,f),this.bidiCache=_d.update(this.bidiCache,s.changes),s.empty||(this.updatePlugins(s),this.inputState.update(s)),t=this.docView.update(s),this.state.facet(zc)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(h=>h.isUserEvent("select.pointer")))}finally{this.updateState=0}if(s.startState.facet(Jf)!=s.state.facet(Jf)&&(this.viewState.mustMeasureContent=!0),(t||i||f||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!s.empty)for(let h of this.state.facet(K1))h(s);(a||u)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),u&&!bD(this,u)&&c.force&&Oa(this.contentDOM,c.key,c.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new ZE(e),this.plugins=e.facet(qc).map(i=>new Mp(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView=new ME(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(qc),i=e.state.facet(qc);if(t!=i){let s=[];for(let r of i){let l=t.indexOf(r);if(l<0)s.push(new Mp(r));else{let o=this.plugins[l];o.mustUpdate=e,s.push(o)}}for(let r of this.plugins)r.mustUpdate!=e&&r.destroy(this);this.plugins=s,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let s of this.plugins)s.mustUpdate=e;for(let s=0;s<this.plugins.length;s++)this.plugins[s].update(this)}measure(e=!0){if(this.destroyed)return;this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,{scrollHeight:i,scrollTop:s,clientHeight:r}=this.scrollDOM,l=s>i-r-4?i:s;try{for(let o=0;;o++){this.updateState=1;let a=this.viewport,c=this.viewState.lineBlockAtHeight(l),u=this.viewState.measure(this);if(!u&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(o>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let f=[];u&4||([this.measureRequests,f]=[f,this.measureRequests]);let h=f.map(y=>{try{return y.read(this)}catch(b){return Hs(this.state,b),eA}}),d=bd.create(this,this.state,[]),p=!1,v=!1;d.flags|=u,t?t.flags|=u:t=d,this.updateState=2,d.empty||(this.updatePlugins(d),this.inputState.update(d),this.updateAttrs(),p=this.docView.update(d));for(let y=0;y<f.length;y++)if(h[y]!=eA)try{let b=f[y];b.write&&b.write(h[y],this)}catch(b){Hs(this.state,b)}if(this.viewState.editorHeight)if(this.viewState.scrollTarget)this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,v=!0;else{let y=this.viewState.lineBlockAt(c.from).top-c.top;(y>1||y<-1)&&(this.scrollDOM.scrollTop+=y,v=!0)}if(p&&this.docView.updateSelection(!0),this.viewport.from==a.from&&this.viewport.to==a.to&&!v&&this.measureRequests.length==0)break}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let o of this.state.facet(K1))o(t)}get themeClasses(){return $1+" "+(this.state.facet(x1)?gD:pD)+" "+this.state.facet(Jf)}updateAttrs(){let e=tA(this,YR,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(Hm)?"true":"false",class:"cm-content",style:`${Tt.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),tA(this,ob,t);let i=this.observer.ignore(()=>{let s=z1(this.contentDOM,this.contentAttrs,t),r=z1(this.dom,this.editorAttrs,e);return s||r});return this.editorAttrs=e,this.contentAttrs=t,i}showAnnouncements(e){let t=!0;for(let i of e)for(let s of i.effects)if(s.is(wt.announce)){t&&(this.announceDOM.textContent=""),t=!1;let r=this.announceDOM.appendChild(document.createElement("div"));r.textContent=s.value}}mountStyles(){this.styleModules=this.state.facet(zc),Jl.mount(this.root,this.styleModules.concat(TQ).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(i=>i.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return Lp(this,e,FE(this,e,t,i))}moveByGroup(e,t){return Lp(this,e,FE(this,e,t,i=>eQ(this,e.head,i)))}moveToLineBoundary(e,t,i=!0){return $K(this,e,t,i)}moveVertically(e,t,i){return Lp(this,e,tQ(this,e,t,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),sD(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let s=this.state.doc.lineAt(e),r=this.bidiSpans(s),l=r[Ra.find(r,e-s.from,-1,t)];return ib(i,l.dir==si.LTR==t>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(QR)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>BQ)return $R(e.length);let t=this.textDirectionAt(e.from);for(let s of this.bidiCache)if(s.from==e.from&&s.dir==t)return s.order;let i=WK(e.text,t);return this.bidiCache.push(new _d(e.from,e.to,t,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Tt.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{IR(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return DE.of(new vd(typeof e=="number"?Je.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}static domEventHandlers(e){return ki.define(()=>({}),{eventHandlers:e})}static theme(e,t){let i=Jl.newName(),s=[Jf.of(i),zc.of(e0(`.${i}`,e))];return t&&t.dark&&s.push(x1.of(!0)),s}static baseTheme(e){return Sc.lowest(zc.of(e0("."+$1,e,vD)))}static findFromDOM(e){var t;let i=e.querySelector(".cm-content"),s=i&&$n.get(i)||$n.get(e);return((t=s==null?void 0:s.rootView)===null||t===void 0?void 0:t.view)||null}}wt.styleModule=zc;wt.inputHandler=GR;wt.focusChangeEffect=KR;wt.perLineTextDirection=QR;wt.exceptionSink=zR;wt.updateListener=K1;wt.editable=Hm;wt.mouseSelectionStyle=qR;wt.dragMovesSelection=HR;wt.clickAddsSelectionRange=jR;wt.decorations=Wu;wt.atomicRanges=JR;wt.scrollMargins=ZR;wt.darkTheme=x1;wt.contentAttributes=ob;wt.editorAttributes=YR;wt.lineWrapping=wt.contentAttributes.of({class:"cm-lineWrapping"});wt.announce=$t.define();const BQ=4096,eA={};class _d{constructor(e,t,i,s){this.from=e,this.to=t,this.dir=i,this.order=s}static update(e,t){if(t.empty)return e;let i=[],s=e.length?e[e.length-1].dir:si.LTR;for(let r=Math.max(0,e.length-10);r<e.length;r++){let l=e[r];l.dir==s&&!t.touchesRange(l.from,l.to)&&i.push(new _d(t.mapPos(l.from,1),t.mapPos(l.to,-1),l.dir,l.order))}return i}}function tA(n,e,t){for(let i=n.state.facet(e),s=i.length-1;s>=0;s--){let r=i[s],l=typeof r=="function"?r(n):r;l&&q1(l,t)}return t}const LQ=Tt.mac?"mac":Tt.windows?"win":Tt.linux?"linux":"key";function VQ(n,e){const t=n.split(/-(?!$)/);let i=t[t.length-1];i=="Space"&&(i=" ");let s,r,l,o;for(let a=0;a<t.length-1;++a){const c=t[a];if(/^(cmd|meta|m)$/i.test(c))o=!0;else if(/^a(lt)?$/i.test(c))s=!0;else if(/^(c|ctrl|control)$/i.test(c))r=!0;else if(/^s(hift)?$/i.test(c))l=!0;else if(/^mod$/i.test(c))e=="mac"?o=!0:r=!0;else throw new Error("Unrecognized modifier name: "+c)}return s&&(i="Alt-"+i),r&&(i="Ctrl-"+i),o&&(i="Meta-"+i),l&&(i="Shift-"+i),i}function Zf(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}const UQ=Sc.default(wt.domEventHandlers({keydown(n,e){return yD(_D(e.state),n,e,"editor")}})),qm=kt.define({enables:UQ}),nA=new WeakMap;function _D(n){let e=n.facet(qm),t=nA.get(e);return t||nA.set(e,t=jQ(e.reduce((i,s)=>i.concat(s),[]))),t}function WQ(n,e,t){return yD(_D(n.state),e,n,t)}let Tl=null;const FQ=4e3;function jQ(n,e=LQ){let t=Object.create(null),i=Object.create(null),s=(l,o)=>{let a=i[l];if(a==null)i[l]=o;else if(a!=o)throw new Error("Key binding "+l+" is used both as a regular binding and as a multi-stroke prefix")},r=(l,o,a,c)=>{var u,f;let h=t[l]||(t[l]=Object.create(null)),d=o.split(/ (?!$)/).map(y=>VQ(y,e));for(let y=1;y<d.length;y++){let b=d.slice(0,y).join(" ");s(b,!0),h[b]||(h[b]={preventDefault:!0,run:[S=>{let I=Tl={view:S,prefix:b,scope:l};return setTimeout(()=>{Tl==I&&(Tl=null)},FQ),!0}]})}let p=d.join(" ");s(p,!1);let v=h[p]||(h[p]={preventDefault:!1,run:((f=(u=h._any)===null||u===void 0?void 0:u.run)===null||f===void 0?void 0:f.slice())||[]});a&&v.run.push(a),c&&(v.preventDefault=!0)};for(let l of n){let o=l.scope?l.scope.split(" "):["editor"];if(l.any)for(let c of o){let u=t[c]||(t[c]=Object.create(null));u._any||(u._any={preventDefault:!1,run:[]});for(let f in u)u[f].run.push(l.any)}let a=l[e]||l.key;if(a)for(let c of o)r(c,a,l.run,l.preventDefault),l.shift&&r(c,"Shift-"+a,l.shift,l.preventDefault)}return t}function yD(n,e,t,i){let s=SK(e),r=Qi(s,0),l=xs(r)==s.length&&s!=" ",o="",a=!1;Tl&&Tl.view==t&&Tl.scope==i&&(o=Tl.prefix+" ",(a=lD.indexOf(e.keyCode)<0)&&(Tl=null));let c=new Set,u=p=>{if(p){for(let v of p.run)if(!c.has(v)&&(c.add(v),v(t,e)))return!0;p.preventDefault&&(a=!0)}return!1},f=n[i],h,d;if(f){if(u(f[o+Zf(s,e,!l)]))return!0;if(l&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Tt.windows&&e.ctrlKey&&e.altKey)&&(h=Zl[e.keyCode])&&h!=s){if(u(f[o+Zf(h,e,!0)]))return!0;if(e.shiftKey&&(d=Lu[e.keyCode])!=s&&d!=h&&u(f[o+Zf(d,e,!1)]))return!0}else if(l&&e.shiftKey&&u(f[o+Zf(s,e,!0)]))return!0;if(u(f._any))return!0}return a}class Sf{constructor(e,t,i,s,r){this.className=e,this.left=t,this.top=i,this.width=s,this.height=r}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,i){if(i.empty){let s=e.coordsAtPos(i.head,i.assoc||1);if(!s)return[];let r=SD(e);return[new Sf(t,s.left-r.left,s.top-r.top,null,s.bottom-s.top)]}else return HQ(e,t,i)}}function SD(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==si.LTR?e.left:e.right-n.scrollDOM.clientWidth)-n.scrollDOM.scrollLeft,top:e.top-n.scrollDOM.scrollTop}}function iA(n,e,t){let i=Je.cursor(e);return{from:Math.max(t.from,n.moveToLineBoundary(i,!1,!0).from),to:Math.min(t.to,n.moveToLineBoundary(i,!0,!0).from),type:Vn.Text}}function sA(n,e){let t=n.lineBlockAt(e);if(Array.isArray(t.type)){for(let i of t.type)if(i.to>e||i.to==e&&(i.to==t.to||i.type==Vn.Text))return i}return t}function HQ(n,e,t){if(t.to<=n.viewport.from||t.from>=n.viewport.to)return[];let i=Math.max(t.from,n.viewport.from),s=Math.min(t.to,n.viewport.to),r=n.textDirection==si.LTR,l=n.contentDOM,o=l.getBoundingClientRect(),a=SD(n),c=window.getComputedStyle(l.firstChild),u=o.left+parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)),f=o.right-parseInt(c.paddingRight),h=sA(n,i),d=sA(n,s),p=h.type==Vn.Text?h:null,v=d.type==Vn.Text?d:null;if(n.lineWrapping&&(p&&(p=iA(n,i,p)),v&&(v=iA(n,s,v))),p&&v&&p.from==v.from)return b(S(t.from,t.to,p));{let T=p?S(t.from,null,p):I(h,!1),C=v?S(null,t.to,v):I(d,!0),k=[];return(p||h).to<(v||d).from-1?k.push(y(u,T.bottom,f,C.top)):T.bottom<C.top&&n.elementAtHeight((T.bottom+C.top)/2).type==Vn.Text&&(T.bottom=C.top=(T.bottom+C.top)/2),b(T).concat(k).concat(b(C))}function y(T,C,k,R){return new Sf(e,T-a.left,C-a.top-.01,k-T,R-C+.01)}function b({top:T,bottom:C,horizontal:k}){let R=[];for(let O=0;O<k.length;O+=2)R.push(y(k[O],T,k[O+1],C));return R}function S(T,C,k){let R=1e9,O=-1e9,N=[];function F(Y,H,K,j,J){let Z=n.coordsAtPos(Y,Y==k.to?-2:2),q=n.coordsAtPos(K,K==k.from?2:-2);R=Math.min(Z.top,q.top,R),O=Math.max(Z.bottom,q.bottom,O),J==si.LTR?N.push(r&&H?u:Z.left,r&&j?f:q.right):N.push(!r&&j?u:q.left,!r&&H?f:Z.right)}let W=T??k.from,z=C??k.to;for(let Y of n.visibleRanges)if(Y.to>W&&Y.from<z)for(let H=Math.max(Y.from,W),K=Math.min(Y.to,z);;){let j=n.state.doc.lineAt(H);for(let J of n.bidiSpans(j)){let Z=J.from+j.from,q=J.to+j.from;if(Z>=K)break;q>H&&F(Math.max(Z,H),T==null&&Z<=W,Math.min(q,K),C==null&&q>=z,J.dir)}if(H=j.to+1,H>=K)break}return N.length==0&&F(W,T==null,z,C==null,n.textDirection),{top:R,bottom:O,horizontal:N}}function I(T,C){let k=o.top+(C?T.top:T.bottom);return{top:k,bottom:k,horizontal:[]}}}function qQ(n,e){return n.constructor==e.constructor&&n.eq(e)}class zQ{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(Ch)!=e.state.facet(Ch)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&e.view.requestMeasure(this.measureReq)}setOrder(e){let t=0,i=e.facet(Ch);for(;t<i.length&&i[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}draw(e){if(e.length!=this.drawn.length||e.some((t,i)=>!qQ(t,this.drawn[i]))){let t=this.dom.firstChild,i=0;for(let s of e)s.update&&t&&s.constructor&&this.drawn[i].constructor&&s.update(t,this.drawn[i])?(t=t.nextSibling,i++):this.dom.insertBefore(s.draw(),t);for(;t;){let s=t.nextSibling;t.remove(),t=s}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Ch=kt.define();function ED(n){return[ki.define(e=>new zQ(e,n)),Ch.of(n)]}const AD=!Tt.ios,Fu=kt.define({combine(n){return Er(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function GQ(n={}){return[Fu.of(n),KQ,QQ,XQ,XR.of(!0)]}function wD(n){return n.startState.facet(Fu)!=n.state.facet(Fu)}const KQ=ED({above:!0,markers(n){let{state:e}=n,t=e.facet(Fu),i=[];for(let s of e.selection.ranges){let r=s==e.selection.main;if(s.empty?!r||AD:t.drawRangeCursor){let l=r?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",o=s.empty?s:Je.cursor(s.head,s.head>s.anchor?-1:1);for(let a of Sf.forRange(n,l,o))i.push(a)}}return i},update(n,e){n.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=wD(n);return t&&rA(n.state,e),n.docChanged||n.selectionSet||t},mount(n,e){rA(e.state,n)},class:"cm-cursorLayer"});function rA(n,e){e.style.animationDuration=n.facet(Fu).cursorBlinkRate+"ms"}const QQ=ED({above:!1,markers(n){return n.state.selection.ranges.map(e=>e.empty?[]:Sf.forRange(n,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(n,e){return n.docChanged||n.selectionSet||n.viewportChanged||wD(n)},class:"cm-selectionLayer"}),CD={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};AD&&(CD[".cm-line"].caretColor="transparent !important");const XQ=Sc.highest(wt.theme(CD)),kD=$t.define({map(n,e){return n==null?null:e.mapPos(n)}}),Kc=Vi.define({create(){return null},update(n,e){return n!=null&&(n=e.changes.mapPos(n)),e.effects.reduce((t,i)=>i.is(kD)?i.value:t,n)}}),YQ=ki.fromClass(class{constructor(n){this.view=n,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(n){var e;let t=n.state.field(Kc);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(n.startState.field(Kc)!=t||n.docChanged||n.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let n=this.view.state.field(Kc),e=n!=null&&this.view.coordsAtPos(n);if(!e)return null;let t=this.view.scrollDOM.getBoundingClientRect();return{left:e.left-t.left+this.view.scrollDOM.scrollLeft,top:e.top-t.top+this.view.scrollDOM.scrollTop,height:e.bottom-e.top}}drawCursor(n){this.cursor&&(n?(this.cursor.style.left=n.left+"px",this.cursor.style.top=n.top+"px",this.cursor.style.height=n.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(n){this.view.state.field(Kc)!=n&&this.view.dispatch({effects:kD.of(n)})}},{eventHandlers:{dragover(n){this.setDropPos(this.view.posAtCoords({x:n.clientX,y:n.clientY}))},dragleave(n){(n.target==this.view.contentDOM||!this.view.contentDOM.contains(n.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function JQ(){return[Kc,YQ]}function lA(n,e,t,i,s){e.lastIndex=0;for(let r=n.iterRange(t,i),l=t,o;!r.next().done;l+=r.value.length)if(!r.lineBreak)for(;o=e.exec(r.value);)s(l+o.index,o)}function ZQ(n,e){let t=n.visibleRanges;if(t.length==1&&t[0].from==n.viewport.from&&t[0].to==n.viewport.to)return t;let i=[];for(let{from:s,to:r}of t)s=Math.max(n.state.doc.lineAt(s).from,s-e),r=Math.min(n.state.doc.lineAt(r).to,r+e),i.length&&i[i.length-1].to>=s?i[i.length-1].to=r:i.push({from:s,to:r});return i}class xQ{constructor(e){const{regexp:t,decoration:i,decorate:s,boundary:r,maxLength:l=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,s)this.addMatch=(o,a,c,u)=>s(u,c,c+o[0].length,o,a);else if(typeof i=="function")this.addMatch=(o,a,c,u)=>{let f=i(o,a,c);f&&u(c,c+o[0].length,f)};else if(i)this.addMatch=(o,a,c,u)=>u(c,c+o[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=r,this.maxLength=l}createDeco(e){let t=new Yl,i=t.add.bind(t);for(let{from:s,to:r}of ZQ(e,this.maxLength))lA(e.state.doc,this.regexp,s,r,(l,o)=>this.addMatch(o,e,l,i));return t.finish()}updateDeco(e,t){let i=1e9,s=-1;return e.docChanged&&e.changes.iterChanges((r,l,o,a)=>{a>e.view.viewport.from&&o<e.view.viewport.to&&(i=Math.min(o,i),s=Math.max(a,s))}),e.viewportChanged||s-i>1e3?this.createDeco(e.view):s>-1?this.updateRange(e.view,t.map(e.changes),i,s):t}updateRange(e,t,i,s){for(let r of e.visibleRanges){let l=Math.max(r.from,i),o=Math.min(r.to,s);if(o>l){let a=e.state.doc.lineAt(l),c=a.to<o?e.state.doc.lineAt(o):a,u=Math.max(r.from,a.from),f=Math.min(r.to,c.to);if(this.boundary){for(;l>a.from;l--)if(this.boundary.test(a.text[l-1-a.from])){u=l;break}for(;o<c.to;o++)if(this.boundary.test(c.text[o-c.from])){f=o;break}}let h=[],d,p=(v,y,b)=>h.push(b.range(v,y));if(a==c)for(this.regexp.lastIndex=u-a.from;(d=this.regexp.exec(a.text))&&d.index<f-a.from;)this.addMatch(d,e,d.index+a.from,p);else lA(e.state.doc,this.regexp,u,f,(v,y)=>this.addMatch(y,e,v,p));t=t.update({filterFrom:u,filterTo:f,filter:(v,y)=>v<u||y>f,add:h})}}return t}}const t0=/x/.unicode!=null?"gu":"g",$Q=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,t0),eX={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Wp=null;function tX(){var n;if(Wp==null&&typeof document<"u"&&document.body){let e=document.body.style;Wp=((n=e.tabSize)!==null&&n!==void 0?n:e.MozTabSize)!=null}return Wp||!1}const kh=kt.define({combine(n){let e=Er(n,{render:null,specialChars:$Q,addSpecialChars:null});return(e.replaceTabs=!tX())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,t0)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,t0)),e}});function nX(n={}){return[kh.of(n),iX()]}let oA=null;function iX(){return oA||(oA=ki.fromClass(class{constructor(n){this.view=n,this.decorations=Lt.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(n.state.facet(kh)),this.decorations=this.decorator.createDeco(n)}makeDecorator(n){return new xQ({regexp:n.specialChars,decoration:(e,t,i)=>{let{doc:s}=t.state,r=Qi(e[0],0);if(r==9){let l=s.lineAt(i),o=t.state.tabSize,a=_f(l.text,o,i-l.from);return Lt.replace({widget:new oX((o-a%o)*this.view.defaultCharacterWidth)})}return this.decorationCache[r]||(this.decorationCache[r]=Lt.replace({widget:new lX(n,r)}))},boundary:n.replaceTabs?void 0:/[^]/})}update(n){let e=n.state.facet(kh);n.startState.facet(kh)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(n.view)):this.decorations=this.decorator.updateDeco(n,this.decorations)}},{decorations:n=>n.decorations}))}const sX="";function rX(n){return n>=32?sX:n==10?"":String.fromCharCode(9216+n)}class lX extends no{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=rX(this.code),i=e.state.phrase("Control character")+" "+(eX[this.code]||"0x"+this.code.toString(16)),s=this.options.render&&this.options.render(this.code,i,t);if(s)return s;let r=document.createElement("span");return r.textContent=t,r.title=i,r.setAttribute("aria-label",i),r.className="cm-specialChar",r}ignoreEvent(){return!1}}class oX extends no{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function aX(){return uX}const cX=Lt.line({class:"cm-activeLine"}),uX=ki.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=-1,t=[];for(let i of n.state.selection.ranges){let s=n.lineBlockAt(i.head);s.from>e&&(t.push(cX.range(s.from)),e=s.from)}return Lt.set(t)}},{decorations:n=>n.decorations}),n0=2e3;function fX(n,e,t){let i=Math.min(e.line,t.line),s=Math.max(e.line,t.line),r=[];if(e.off>n0||t.off>n0||e.col<0||t.col<0){let l=Math.min(e.off,t.off),o=Math.max(e.off,t.off);for(let a=i;a<=s;a++){let c=n.doc.line(a);c.length<=o&&r.push(Je.range(c.from+l,c.to+o))}}else{let l=Math.min(e.col,t.col),o=Math.max(e.col,t.col);for(let a=i;a<=s;a++){let c=n.doc.line(a),u=B1(c.text,l,n.tabSize,!0);if(u<0)r.push(Je.cursor(c.to));else{let f=B1(c.text,o,n.tabSize);r.push(Je.range(c.from+u,c.from+f))}}}return r}function hX(n,e){let t=n.coordsAtPos(n.viewport.from);return t?Math.round(Math.abs((t.left-e)/n.defaultCharacterWidth)):-1}function aA(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1),i=n.state.doc.lineAt(t),s=t-i.from,r=s>n0?-1:s==i.length?hX(n,e.clientX):_f(i.text,n.state.tabSize,t-i.from);return{line:i.number,col:r,off:s}}function dX(n,e){let t=aA(n,e),i=n.state.selection;return t?{update(s){if(s.docChanged){let r=s.changes.mapPos(s.startState.doc.line(t.line).from),l=s.state.doc.lineAt(r);t={line:l.number,col:t.col,off:Math.min(t.off,l.length)},i=i.map(s.changes)}},get(s,r,l){let o=aA(n,s);if(!o)return i;let a=fX(n.state,t,o);return a.length?l?Je.create(a.concat(i.ranges)):Je.create(a):i}}:null}function mX(n){let e=(n==null?void 0:n.eventFilter)||(t=>t.altKey&&t.button==0);return wt.mouseSelectionStyle.of((t,i)=>e(i)?dX(t,i):null)}const pX={Alt:[18,n=>n.altKey],Control:[17,n=>n.ctrlKey],Shift:[16,n=>n.shiftKey],Meta:[91,n=>n.metaKey]},gX={style:"cursor: crosshair"};function vX(n={}){let[e,t]=pX[n.key||"Alt"],i=ki.fromClass(class{constructor(s){this.view=s,this.isDown=!1}set(s){this.isDown!=s&&(this.isDown=s,this.view.update([]))}},{eventHandlers:{keydown(s){this.set(s.keyCode==e||t(s))},keyup(s){(s.keyCode==e||!t(s))&&this.set(!1)},mousemove(s){this.set(t(s))}}});return[i,wt.contentAttributes.of(s=>{var r;return!((r=s.plugin(i))===null||r===void 0)&&r.isDown?gX:null})]}const xf="-10000px";class TD{constructor(e,t,i){this.facet=t,this.createTooltipView=i,this.input=e.state.facet(t),this.tooltips=this.input.filter(s=>s),this.tooltipViews=this.tooltips.map(i)}update(e){var t;let i=e.state.facet(this.facet),s=i.filter(l=>l);if(i===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let r=[];for(let l=0;l<s.length;l++){let o=s[l],a=-1;if(o){for(let c=0;c<this.tooltips.length;c++){let u=this.tooltips[c];u&&u.create==o.create&&(a=c)}if(a<0)r[l]=this.createTooltipView(o);else{let c=r[l]=this.tooltipViews[a];c.update&&c.update(e)}}}for(let l of this.tooltipViews)r.indexOf(l)<0&&(l.dom.remove(),(t=l.destroy)===null||t===void 0||t.call(l));return this.input=i,this.tooltips=s,this.tooltipViews=r,!0}}function bX(n){let{win:e}=n;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const Fp=kt.define({combine:n=>{var e,t,i;return{position:Tt.ios?"absolute":((e=n.find(s=>s.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=n.find(s=>s.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((i=n.find(s=>s.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||bX}}}),cA=new WeakMap,ID=ki.fromClass(class{constructor(n){this.view=n,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let e=n.state.facet(Fp);this.position=e.position,this.parent=e.parent,this.classes=n.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new TD(n,zm,t=>this.createTooltip(t)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),n.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let n of this.manager.tooltipViews)this.intersectionObserver.observe(n.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(n){n.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(n);e&&this.observeIntersection();let t=e||n.geometryChanged,i=n.state.facet(Fp);if(i.position!=this.position){this.position=i.position;for(let s of this.manager.tooltipViews)s.dom.style.position=this.position;t=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let s of this.manager.tooltipViews)this.container.appendChild(s.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(n){let e=n.create(this.view);if(e.dom.classList.add("cm-tooltip"),n.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let t=document.createElement("div");t.className="cm-tooltip-arrow",e.dom.appendChild(t)}return e.dom.style.position=this.position,e.dom.style.top=xf,this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var n,e;this.view.win.removeEventListener("resize",this.measureSoon);for(let t of this.manager.tooltipViews)t.dom.remove(),(n=t.destroy)===null||n===void 0||n.call(t);(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let n=this.view.dom.getBoundingClientRect();return{editor:n,parent:this.parent?this.container.getBoundingClientRect():n,pos:this.manager.tooltips.map((e,t)=>{let i=this.manager.tooltipViews[t];return i.getCoords?i.getCoords(e.pos):this.view.coordsAtPos(e.pos)}),size:this.manager.tooltipViews.map(({dom:e})=>e.getBoundingClientRect()),space:this.view.state.facet(Fp).tooltipSpace(this.view)}}writeMeasure(n){var e;let{editor:t,space:i}=n,s=[];for(let r=0;r<this.manager.tooltips.length;r++){let l=this.manager.tooltips[r],o=this.manager.tooltipViews[r],{dom:a}=o,c=n.pos[r],u=n.size[r];if(!c||c.bottom<=Math.max(t.top,i.top)||c.top>=Math.min(t.bottom,i.bottom)||c.right<Math.max(t.left,i.left)-.1||c.left>Math.min(t.right,i.right)+.1){a.style.top=xf;continue}let f=l.arrow?o.dom.querySelector(".cm-tooltip-arrow"):null,h=f?7:0,d=u.right-u.left,p=(e=cA.get(o))!==null&&e!==void 0?e:u.bottom-u.top,v=o.offset||yX,y=this.view.textDirection==si.LTR,b=u.width>i.right-i.left?y?i.left:i.right-u.width:y?Math.min(c.left-(f?14:0)+v.x,i.right-d):Math.max(i.left,c.left-d+(f?14:0)-v.x),S=!!l.above;!l.strictSide&&(S?c.top-(u.bottom-u.top)-v.y<i.top:c.bottom+(u.bottom-u.top)+v.y>i.bottom)&&S==i.bottom-c.bottom>c.top-i.top&&(S=!S);let I=(S?c.top-i.top:i.bottom-c.bottom)-h;if(I<p&&o.resize!==!1){if(I<this.view.defaultLineHeight){a.style.top=xf;continue}cA.set(o,p),a.style.height=(p=I)+"px"}else a.style.height&&(a.style.height="");let T=S?c.top-p-h-v.y:c.bottom+h+v.y,C=b+d;if(o.overlap!==!0)for(let k of s)k.left<C&&k.right>b&&k.top<T+p&&k.bottom>T&&(T=S?k.top-p-2-h:k.bottom+h+2);this.position=="absolute"?(a.style.top=T-n.parent.top+"px",a.style.left=b-n.parent.left+"px"):(a.style.top=T+"px",a.style.left=b+"px"),f&&(f.style.left=`${c.left+(y?v.x:-v.x)-(b+14-7)}px`),o.overlap!==!0&&s.push({left:b,top:T,right:C,bottom:T+p}),a.classList.toggle("cm-tooltip-above",S),a.classList.toggle("cm-tooltip-below",!S),o.positioned&&o.positioned(n.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let n of this.manager.tooltipViews)n.dom.style.top=xf}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),_X=wt.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:`${7}px`,width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:`${7}px solid transparent`,borderRight:`${7}px solid transparent`},".cm-tooltip-above &":{bottom:`-${7}px`,"&:before":{borderTop:`${7}px solid #bbb`},"&:after":{borderTop:`${7}px solid #f5f5f5`,bottom:"1px"}},".cm-tooltip-below &":{top:`-${7}px`,"&:before":{borderBottom:`${7}px solid #bbb`},"&:after":{borderBottom:`${7}px solid #f5f5f5`,top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),yX={x:0,y:0},zm=kt.define({enables:[ID,_X]}),yd=kt.define();class cb{constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new TD(e,yd,t=>this.createHostedView(t))}static create(e){return new cb(e)}createHostedView(e){let t=e.create(this.view);return t.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(t.dom),this.mounted&&t.mount&&t.mount(this.view),t}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}}const SX=zm.compute([yd],n=>{let e=n.facet(yd).filter(t=>t);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.filter(t=>t.end!=null).map(t=>t.end)),create:cb.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class EX{constructor(e,t,i,s,r){this.view=e,this.source=t,this.field=i,this.setHover=s,this.hoverTime=r,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:e}=this,t=this.view.contentDOM.contains(e.target)?this.view.posAtCoords(e):null;if(t==null)return;let i=this.view.coordsAtPos(t);if(i==null||e.y<i.top||e.y>i.bottom||e.x<i.left-this.view.defaultCharacterWidth||e.x>i.right+this.view.defaultCharacterWidth)return;let s=this.view.bidiSpans(this.view.state.doc.lineAt(t)).find(o=>o.from<=t&&o.to>=t),r=s&&s.dir==si.RTL?-1:1,l=this.source(this.view,t,e.x<i.left?-r:r);if(l!=null&&l.then){let o=this.pending={pos:t};l.then(a=>{this.pending==o&&(this.pending=null,a&&this.view.dispatch({effects:this.setHover.of(a)}))},a=>Hs(this.view.state,a,"hover tooltip"))}else l&&this.view.dispatch({effects:this.setHover.of(l)})}mousemove(e){var t;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let i=this.active;if(i&&!uA(this.lastMove.target)||this.pending){let{pos:s}=i||this.pending,r=(t=i==null?void 0:i.end)!==null&&t!==void 0?t:s;(s==r?this.view.posAtCoords(this.lastMove)!=s:!AX(this.view,s,r,e.clientX,e.clientY,6))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&!uA(e.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function uA(n){for(let e=n;e;e=e.parentNode)if(e.nodeType==1&&e.classList.contains("cm-tooltip"))return!0;return!1}function AX(n,e,t,i,s,r){let l=document.createRange(),o=n.domAtPos(e),a=n.domAtPos(t);l.setEnd(a.node,a.offset),l.setStart(o.node,o.offset);let c=l.getClientRects();l.detach();for(let u=0;u<c.length;u++){let f=c[u];if(Math.max(f.top-s,s-f.bottom,f.left-i,i-f.right)<=r)return!0}return!1}function wX(n,e={}){let t=$t.define(),i=Vi.define({create(){return null},update(s,r){if(s&&(e.hideOnChange&&(r.docChanged||r.selection)||e.hideOn&&e.hideOn(r,s)))return null;if(s&&r.docChanged){let l=r.changes.mapPos(s.pos,-1,ys.TrackDel);if(l==null)return null;let o=Object.assign(Object.create(null),s);o.pos=l,s.end!=null&&(o.end=r.changes.mapPos(s.end)),s=o}for(let l of r.effects)l.is(t)&&(s=l.value),l.is(kX)&&(s=null);return s},provide:s=>yd.from(s)});return[i,ki.define(s=>new EX(s,n,i,t,e.hoverTime||300)),SX]}function CX(n,e){let t=n.plugin(ID);if(!t)return null;let i=t.manager.tooltips.indexOf(e);return i<0?null:t.manager.tooltipViews[i]}const kX=$t.define(),fA=kt.define({combine(n){let e,t;for(let i of n)e=e||i.topContainer,t=t||i.bottomContainer;return{topContainer:e,bottomContainer:t}}});function ju(n,e){let t=n.plugin(OD),i=t?t.specs.indexOf(e):-1;return i>-1?t.panels[i]:null}const OD=ki.fromClass(class{constructor(n){this.input=n.state.facet(Hu),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(n));let e=n.state.facet(fA);this.top=new $f(n,!0,e.topContainer),this.bottom=new $f(n,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(n){let e=n.state.facet(fA);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new $f(n.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new $f(n.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=n.state.facet(Hu);if(t!=this.input){let i=t.filter(a=>a),s=[],r=[],l=[],o=[];for(let a of i){let c=this.specs.indexOf(a),u;c<0?(u=a(n.view),o.push(u)):(u=this.panels[c],u.update&&u.update(n)),s.push(u),(u.top?r:l).push(u)}this.specs=i,this.panels=s,this.top.sync(r),this.bottom.sync(l);for(let a of o)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}else for(let i of this.panels)i.update&&i.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>wt.scrollMargins.of(e=>{let t=e.plugin(n);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class $f{constructor(e,t,i){this.view=e,this.top=t,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=hA(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=hA(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function hA(n){let e=n.nextSibling;return n.remove(),e}const Hu=kt.define({enables:OD});class Kr extends Go{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Kr.prototype.elementClass="";Kr.prototype.toDOM=void 0;Kr.prototype.mapMode=ys.TrackBefore;Kr.prototype.startSide=Kr.prototype.endSide=-1;Kr.prototype.point=!0;const Th=kt.define(),TX={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>In.empty,lineMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},lu=kt.define();function RD(n){return[DD(),lu.of(Object.assign(Object.assign({},TX),n))]}const i0=kt.define({combine:n=>n.some(e=>e)});function DD(n){let e=[IX];return n&&n.fixed===!1&&e.push(i0.of(!0)),e}const IX=ki.fromClass(class{constructor(n){this.view=n,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=n.state.facet(lu).map(e=>new mA(n,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!n.state.facet(i0),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}update(n){if(this.updateGutters(n)){let e=this.prevViewport,t=n.view.viewport,i=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(i<(t.to-t.from)*.8)}n.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(i0)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&this.dom.remove();let t=In.iter(this.view.state.facet(Th),this.view.viewport.from),i=[],s=this.gutters.map(r=>new OX(r,this.view.viewport,-this.view.documentPadding.top));for(let r of this.view.viewportLineBlocks){let l;if(Array.isArray(r.type)){for(let o of r.type)if(o.type==Vn.Text){l=o;break}}else l=r.type==Vn.Text?r:void 0;if(l){i.length&&(i=[]),ND(t,i,r.from);for(let o of s)o.line(this.view,l,i)}}for(let r of s)r.finish();n&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(n){let e=n.startState.facet(lu),t=n.state.facet(lu),i=n.docChanged||n.heightChanged||n.viewportChanged||!In.eq(n.startState.facet(Th),n.state.facet(Th),n.view.viewport.from,n.view.viewport.to);if(e==t)for(let s of this.gutters)s.update(n)&&(i=!0);else{i=!0;let s=[];for(let r of t){let l=e.indexOf(r);l<0?s.push(new mA(this.view,r)):(this.gutters[l].update(n),s.push(this.gutters[l]))}for(let r of this.gutters)r.dom.remove(),s.indexOf(r)<0&&r.destroy();for(let r of s)this.dom.appendChild(r.dom);this.gutters=s}return i}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove()}},{provide:n=>wt.scrollMargins.of(e=>{let t=e.plugin(n);return!t||t.gutters.length==0||!t.fixed?null:e.textDirection==si.LTR?{left:t.dom.offsetWidth}:{right:t.dom.offsetWidth}})});function dA(n){return Array.isArray(n)?n:[n]}function ND(n,e,t){for(;n.value&&n.from<=t;)n.from==t&&e.push(n.value),n.next()}class OX{constructor(e,t,i){this.gutter=e,this.height=i,this.i=0,this.cursor=In.iter(e.markers,t.from)}line(e,t,i){let s=[];ND(this.cursor,s,t.from),i.length&&(s=s.concat(i));let r=this.gutter.config.lineMarker(e,t,s);r&&s.unshift(r);let l=this.gutter;if(s.length==0&&!l.config.renderEmptyElements)return;let o=t.top-this.height;if(this.i==l.elements.length){let a=new PD(e,t.height,o,s);l.elements.push(a),l.dom.appendChild(a.dom)}else l.elements[this.i].update(e,t.height,o,s);this.height=t.bottom,this.i++}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class mA{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in t.domEventHandlers)this.dom.addEventListener(i,s=>{let r=s.target,l;if(r!=this.dom&&this.dom.contains(r)){for(;r.parentNode!=this.dom;)r=r.parentNode;let a=r.getBoundingClientRect();l=(a.top+a.bottom)/2}else l=s.clientY;let o=e.lineBlockAtHeight(l-e.documentTop);t.domEventHandlers[i](e,o,s)&&s.preventDefault()});this.markers=dA(t.markers(e)),t.initialSpacer&&(this.spacer=new PD(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=dA(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let s=this.config.updateSpacer(this.spacer.markers[0],e);s!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[s])}let i=e.view.viewport;return!In.eq(this.markers,t,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class PD{constructor(e,t,i,s){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,i,s)}update(e,t,i,s){this.height!=t&&(this.dom.style.height=(this.height=t)+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),RX(this.markers,s)||this.setMarkers(e,s)}setMarkers(e,t){let i="cm-gutterElement",s=this.dom.firstChild;for(let r=0,l=0;;){let o=l,a=r<t.length?t[r++]:null,c=!1;if(a){let u=a.elementClass;u&&(i+=" "+u);for(let f=l;f<this.markers.length;f++)if(this.markers[f].compare(a)){o=f,c=!0;break}}else o=this.markers.length;for(;l<o;){let u=this.markers[l++];if(u.toDOM){u.destroy(s);let f=s.nextSibling;s.remove(),s=f}}if(!a)break;a.toDOM&&(c?s=s.nextSibling:this.dom.insertBefore(a.toDOM(e),s)),c&&l++}this.dom.className=i,this.markers=t}destroy(){this.setMarkers(null,[])}}function RX(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].compare(e[t]))return!1;return!0}const DX=kt.define(),ya=kt.define({combine(n){return Er(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let i=Object.assign({},e);for(let s in t){let r=i[s],l=t[s];i[s]=r?(o,a,c)=>r(o,a,c)||l(o,a,c):l}return i}})}});class jp extends Kr{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Hp(n,e){return n.state.facet(ya).formatNumber(e,n.state)}const NX=lu.compute([ya],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(DX)},lineMarker(e,t,i){return i.some(s=>s.toDOM)?null:new jp(Hp(e,e.state.doc.lineAt(t.from).number))},lineMarkerChange:e=>e.startState.facet(ya)!=e.state.facet(ya),initialSpacer(e){return new jp(Hp(e,pA(e.state.doc.lines)))},updateSpacer(e,t){let i=Hp(t.view,pA(t.view.state.doc.lines));return i==e.number?e:new jp(i)},domEventHandlers:n.facet(ya).domEventHandlers}));function PX(n={}){return[ya.of(n),DD(),NX]}function pA(n){let e=9;for(;e<n;)e=e*10+9;return e}const MX=new class extends Kr{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},BX=Th.compute(["selection"],n=>{let e=[],t=-1;for(let i of n.selection.ranges){let s=n.doc.lineAt(i.head).from;s>t&&(t=s,e.push(MX.range(s)))}return In.of(e)});function LX(){return BX}const MD=1024;let VX=0;class qp{constructor(e,t){this.from=e,this.to=t}}class rn{constructor(e={}){this.id=VX++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Bs.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}}rn.closedBy=new rn({deserialize:n=>n.split(" ")});rn.openedBy=new rn({deserialize:n=>n.split(" ")});rn.group=new rn({deserialize:n=>n.split(" ")});rn.contextHash=new rn({perNode:!0});rn.lookAhead=new rn({perNode:!0});rn.mounted=new rn({perNode:!0});const UX=Object.create(null);class Bs{constructor(e,t,i,s=0){this.name=e,this.props=t,this.id=i,this.flags=s}static define(e){let t=e.props&&e.props.length?Object.create(null):UX,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),s=new Bs(e.name||"",t,e.id,i);if(e.props){for(let r of e.props)if(Array.isArray(r)||(r=r(s)),r){if(r[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[r[0].id]=r[1]}}return s}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(rn.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let s of i.split(" "))t[s]=e[i];return i=>{for(let s=i.prop(rn.group),r=-1;r<(s?s.length:0);r++){let l=t[r<0?i.name:s[r]];if(l)return l}}}}Bs.none=new Bs("",Object.create(null),0,8);class ub{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let s=null;for(let r of e){let l=r(i);l&&(s||(s=Object.assign({},i.props)),s[l[0].id]=l[1])}t.push(s?new Bs(i.name,s,i.id,i.flags):i)}return new ub(t)}}const eh=new WeakMap,gA=new WeakMap;var Yi;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(Yi||(Yi={}));class wi{constructor(e,t,i,s,r){if(this.type=e,this.children=t,this.positions=i,this.length=s,this.props=null,r&&r.length){this.props=Object.create(null);for(let[l,o]of r)this.props[typeof l=="number"?l:l.id]=o}}toString(){let e=this.prop(rn.mounted);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let s=i.toString();s&&(t&&(t+=","),t+=s)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new Ad(this.topNode,e)}cursorAt(e,t=0,i=0){let s=eh.get(this)||this.topNode,r=new Ad(s);return r.moveTo(e,t),eh.set(this,r._tree),r}get topNode(){return new ol(this,0,0,null)}resolve(e,t=0){let i=ec(eh.get(this)||this.topNode,e,t,!1);return eh.set(this,i),i}resolveInner(e,t=0){let i=ec(gA.get(this)||this.topNode,e,t,!0);return gA.set(this,i),i}iterate(e){let{enter:t,leave:i,from:s=0,to:r=this.length}=e;for(let l=this.cursor((e.mode||0)|Yi.IncludeAnonymous);;){let o=!1;if(l.from<=r&&l.to>=s&&(l.type.isAnonymous||t(l)!==!1)){if(l.firstChild())continue;o=!0}for(;o&&i&&!l.type.isAnonymous&&i(l),!l.nextSibling();){if(!l.parent())return;o=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:db(Bs.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,s)=>new wi(this.type,t,i,s,this.propValues),e.makeTree||((t,i,s)=>new wi(Bs.none,t,i,s)))}static build(e){return FX(e)}}wi.empty=new wi(Bs.none,[],[],0);class fb{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new fb(this.buffer,this.index)}}class ra{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return Bs.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],s=this.set.types[t],r=s.name;if(/\W/.test(r)&&!s.isError&&(r=JSON.stringify(r)),e+=4,i==e)return r;let l=[];for(;e<i;)l.push(this.childString(e)),e=this.buffer[e+3];return r+"("+l.join(",")+")"}findChild(e,t,i,s,r){let{buffer:l}=this,o=-1;for(let a=e;a!=t&&!(BD(r,s,l[a+1],l[a+2])&&(o=a,i>0));a=l[a+3]);return o}slice(e,t,i){let s=this.buffer,r=new Uint16Array(t-e),l=0;for(let o=e,a=0;o<t;){r[a++]=s[o++],r[a++]=s[o++]-i;let c=r[a++]=s[o++]-i;r[a++]=s[o++]-e,l=Math.max(l,c)}return new ra(r,l,this.set)}}function BD(n,e,t,i){switch(n){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function LD(n,e){let t=n.childBefore(e);for(;t;){let i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(n=t,t=i.prevSibling):t=i}return n}function ec(n,e,t,i){for(var s;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let l=!i&&n instanceof ol&&n.index<0?null:n.parent;if(!l)return n;n=l}let r=i?0:Yi.IgnoreOverlays;if(i)for(let l=n,o=l.parent;o;l=o,o=l.parent)l instanceof ol&&l.index<0&&((s=o.enter(e,t,r))===null||s===void 0?void 0:s.from)!=l.from&&(n=o);for(;;){let l=n.enter(e,t,r);if(!l)return n;n=l}}class ol{constructor(e,t,i,s){this._tree=e,this.from=t,this.index=i,this._parent=s}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,s,r=0){for(let l=this;;){for(let{children:o,positions:a}=l._tree,c=t>0?o.length:-1;e!=c;e+=t){let u=o[e],f=a[e]+l.from;if(BD(s,i,f,f+u.length)){if(u instanceof ra){if(r&Yi.ExcludeBuffers)continue;let h=u.findChild(0,u.buffer.length,t,i-f,s);if(h>-1)return new Ml(new WX(l,u,e,f),null,h)}else if(r&Yi.IncludeAnonymous||!u.type.isAnonymous||hb(u)){let h;if(!(r&Yi.IgnoreMounts)&&u.props&&(h=u.prop(rn.mounted))&&!h.overlay)return new ol(h.tree,f,e,l);let d=new ol(u,f,e,l);return r&Yi.IncludeAnonymous||!d.type.isAnonymous?d:d.nextChild(t<0?u.children.length-1:0,t,i,s)}}}if(r&Yi.IncludeAnonymous||!l.type.isAnonymous||(l.index>=0?e=l.index+t:e=t<0?-1:l._parent._tree.children.length,l=l._parent,!l))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let s;if(!(i&Yi.IgnoreOverlays)&&(s=this._tree.prop(rn.mounted))&&s.overlay){let r=e-this.from;for(let{from:l,to:o}of s.overlay)if((t>0?l<=r:l<r)&&(t<0?o>=r:o>r))return new ol(s.tree,s.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new Ad(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,t=0){return ec(this,e,t,!1)}resolveInner(e,t=0){return ec(this,e,t,!0)}enterUnfinishedNodesBefore(e){return LD(this,e)}getChild(e,t=null,i=null){let s=Sd(this,e,t,i);return s.length?s[0]:null}getChildren(e,t=null,i=null){return Sd(this,e,t,i)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return Ed(this,e)}}function Sd(n,e,t,i){let s=n.cursor(),r=[];if(!s.firstChild())return r;if(t!=null){for(;!s.type.is(t);)if(!s.nextSibling())return r}for(;;){if(i!=null&&s.type.is(i))return r;if(s.type.is(e)&&r.push(s.node),!s.nextSibling())return i==null?r:[]}}function Ed(n,e,t=e.length-1){for(let i=n.parent;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}class WX{constructor(e,t,i,s){this.parent=e,this.buffer=t,this.index=i,this.start=s}}class Ml{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,i){this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,t,i){let{buffer:s}=this.context,r=s.findChild(this.index+4,s.buffer[this.index+3],e,t-this.context.start,i);return r<0?null:new Ml(this.context,this,r)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&Yi.ExcludeBuffers)return null;let{buffer:s}=this.context,r=s.findChild(this.index+4,s.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return r<0?null:new Ml(this.context,this,r)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Ml(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Ml(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}cursor(e=0){return new Ad(this,e)}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,s=this.index+4,r=i.buffer[this.index+3];if(r>s){let l=i.buffer[this.index+1];e.push(i.slice(s,r,l)),t.push(0)}return new wi(this.type,e,t,this.to-this.from)}resolve(e,t=0){return ec(this,e,t,!1)}resolveInner(e,t=0){return ec(this,e,t,!0)}enterUnfinishedNodesBefore(e){return LD(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,i=null){let s=Sd(this,e,t,i);return s.length?s[0]:null}getChildren(e,t=null,i=null){return Sd(this,e,t,i)}get node(){return this}matchContext(e){return Ed(this,e)}}class Ad{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof ol)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:s}=this.buffer;return this.type=t||s.set.types[s.buffer[e]],this.from=i+s.buffer[e+1],this.to=i+s.buffer[e+2],!0}yield(e){return e?e instanceof ol?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:s}=this.buffer,r=s.findChild(this.index+4,s.buffer[this.index+3],e,t-this.buffer.start,i);return r<0?!1:(this.stack.push(this.index),this.yieldBuf(r))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?i&Yi.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Yi.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Yi.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let s=i<0?0:this.stack[i]+4;if(this.index!=s)return this.yieldBuf(t.findChild(s,this.index,-1,0,4))}else{let s=t.buffer[this.index+3];if(s<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(s)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:s}=this;if(s){if(e>0){if(this.index<s.buffer.buffer.length)return!1}else for(let r=0;r<this.index;r++)if(s.buffer.buffer[r+3]<this.index)return!1;({index:t,parent:i}=s)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let r=t+e,l=e<0?-1:i._tree.children.length;r!=l;r+=e){let o=i._tree.children[r];if(this.mode&Yi.IncludeAnonymous||o instanceof ra||!o.type.isAnonymous||hb(o))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer){e:for(let s=this.index,r=this.stack.length;r>=0;){for(let l=e;l;l=l._parent)if(l.index==s){if(s==this.index)return l;t=l,i=r+1;break e}s=this.stack[--r]}}for(let s=i;s<this.stack.length;s++)t=new Ml(this.buffer,t,this.stack[s]);return this.bufferNode=new Ml(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let s=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(s=!0)}for(;s&&t&&t(this),s=this.type.isAnonymous,!this.nextSibling();){if(!i)return;this.parent(),i--,s=!0}}}matchContext(e){if(!this.buffer)return Ed(this.node,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let s=e.length-1,r=this.stack.length-1;s>=0;r--){if(r<0)return Ed(this.node,e,s);let l=i[t.buffer[this.stack[r]]];if(!l.isAnonymous){if(e[s]&&e[s]!=l.name)return!1;s--}}return!0}}function hb(n){return n.children.some(e=>e instanceof ra||!e.type.isAnonymous||hb(e))}function FX(n){var e;let{buffer:t,nodeSet:i,maxBufferLength:s=MD,reused:r=[],minRepeatType:l=i.types.length}=n,o=Array.isArray(t)?new fb(t,t.length):t,a=i.types,c=0,u=0;function f(T,C,k,R,O){let{id:N,start:F,end:W,size:z}=o,Y=u;for(;z<0;)if(o.next(),z==-1){let Z=r[N];k.push(Z),R.push(F-T);return}else if(z==-3){c=N;return}else if(z==-4){u=N;return}else throw new RangeError(`Unrecognized record size: ${z}`);let H=a[N],K,j,J=F-T;if(W-F<=s&&(j=v(o.pos-C,O))){let Z=new Uint16Array(j.size-j.skip),q=o.pos-j.size,X=Z.length;for(;o.pos>q;)X=y(j.start,Z,X);K=new ra(Z,W-j.start,i),J=j.start-T}else{let Z=o.pos-z;o.next();let q=[],X=[],ne=N>=l?N:-1,Q=0,re=W;for(;o.pos>Z;)ne>=0&&o.id==ne&&o.size>=0?(o.end<=re-s&&(d(q,X,F,Q,o.end,re,ne,Y),Q=q.length,re=o.end),o.next()):f(F,Z,q,X,ne);if(ne>=0&&Q>0&&Q<q.length&&d(q,X,F,Q,F,re,ne,Y),q.reverse(),X.reverse(),ne>-1&&Q>0){let be=h(H);K=db(H,q,X,0,q.length,0,W-F,be,be)}else K=p(H,q,X,W-F,Y-W)}k.push(K),R.push(J)}function h(T){return(C,k,R)=>{let O=0,N=C.length-1,F,W;if(N>=0&&(F=C[N])instanceof wi){if(!N&&F.type==T&&F.length==R)return F;(W=F.prop(rn.lookAhead))&&(O=k[N]+F.length+W)}return p(T,C,k,R,O)}}function d(T,C,k,R,O,N,F,W){let z=[],Y=[];for(;T.length>R;)z.push(T.pop()),Y.push(C.pop()+k-O);T.push(p(i.types[F],z,Y,N-O,W-N)),C.push(O-k)}function p(T,C,k,R,O=0,N){if(c){let F=[rn.contextHash,c];N=N?[F].concat(N):[F]}if(O>25){let F=[rn.lookAhead,O];N=N?[F].concat(N):[F]}return new wi(T,C,k,R,N)}function v(T,C){let k=o.fork(),R=0,O=0,N=0,F=k.end-s,W={size:0,start:0,skip:0};e:for(let z=k.pos-T;k.pos>z;){let Y=k.size;if(k.id==C&&Y>=0){W.size=R,W.start=O,W.skip=N,N+=4,R+=4,k.next();continue}let H=k.pos-Y;if(Y<0||H<z||k.start<F)break;let K=k.id>=l?4:0,j=k.start;for(k.next();k.pos>H;){if(k.size<0)if(k.size==-3)K+=4;else break e;else k.id>=l&&(K+=4);k.next()}O=j,R+=Y,N+=K}return(C<0||R==T)&&(W.size=R,W.start=O,W.skip=N),W.size>4?W:void 0}function y(T,C,k){let{id:R,start:O,end:N,size:F}=o;if(o.next(),F>=0&&R<l){let W=k;if(F>4){let z=o.pos-(F-4);for(;o.pos>z;)k=y(T,C,k)}C[--k]=W,C[--k]=N-T,C[--k]=O-T,C[--k]=R}else F==-3?c=R:F==-4&&(u=R);return k}let b=[],S=[];for(;o.pos>0;)f(n.start||0,n.bufferStart||0,b,S,-1);let I=(e=n.length)!==null&&e!==void 0?e:b.length?S[0]+b[0].length:0;return new wi(a[n.topID],b.reverse(),S.reverse(),I)}const vA=new WeakMap;function Ih(n,e){if(!n.isAnonymous||e instanceof ra||e.type!=n)return 1;let t=vA.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=n||!(i instanceof wi)){t=1;break}t+=Ih(n,i)}vA.set(e,t)}return t}function db(n,e,t,i,s,r,l,o,a){let c=0;for(let p=i;p<s;p++)c+=Ih(n,e[p]);let u=Math.ceil(c*1.5/8),f=[],h=[];function d(p,v,y,b,S){for(let I=y;I<b;){let T=I,C=v[I],k=Ih(n,p[I]);for(I++;I<b;I++){let R=Ih(n,p[I]);if(k+R>=u)break;k+=R}if(I==T+1){if(k>u){let R=p[T];d(R.children,R.positions,0,R.children.length,v[T]+S);continue}f.push(p[T])}else{let R=v[I-1]+p[I-1].length-C;f.push(db(n,p,v,T,I,C,R,null,a))}h.push(C+S-r)}}return d(e,t,i,s,0),(o||a)(f,h,l)}class Do{constructor(e,t,i,s,r=!1,l=!1){this.from=e,this.to=t,this.tree=i,this.offset=s,this.open=(r?1:0)|(l?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],i=!1){let s=[new Do(0,e.length,e,0,!1,i)];for(let r of t)r.to>e.length&&s.push(r);return s}static applyChanges(e,t,i=128){if(!t.length)return e;let s=[],r=1,l=e.length?e[0]:null;for(let o=0,a=0,c=0;;o++){let u=o<t.length?t[o]:null,f=u?u.fromA:1e9;if(f-a>=i)for(;l&&l.from<f;){let h=l;if(a>=h.from||f<=h.to||c){let d=Math.max(h.from,a)-c,p=Math.min(h.to,f)-c;h=d>=p?null:new Do(d,p,h.tree,h.offset+c,o>0,!!u)}if(h&&s.push(h),l.to>f)break;l=r<e.length?e[r++]:null}if(!u)break;a=u.toA,c=u.toA-u.toB}return s}}class VD{startParse(e,t,i){return typeof e=="string"&&(e=new jX(e)),i=i?i.length?i.map(s=>new qp(s.from,s.to)):[new qp(0,0)]:[new qp(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let s=this.startParse(e,t,i);for(;;){let r=s.advance();if(r)return r}}}class jX{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new rn({perNode:!0});let HX=0;class Dr{constructor(e,t,i){this.set=e,this.base=t,this.modified=i,this.id=HX++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let t=new Dr([],null,[]);if(t.set.push(t),e)for(let i of e.set)t.set.push(i);return t}static defineModifier(){let e=new wd;return t=>t.modified.indexOf(e)>-1?t:wd.get(t.base||t,t.modified.concat(e).sort((i,s)=>i.id-s.id))}}let qX=0;class wd{constructor(){this.instances=[],this.id=qX++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find(o=>o.base==e&&zX(t,o.modified));if(i)return i;let s=[],r=new Dr(s,e,t);for(let o of t)o.instances.push(r);let l=GX(t);for(let o of e.set)if(!o.modified.length)for(let a of l)s.push(wd.get(o,a));return r}}function zX(n,e){return n.length==e.length&&n.every((t,i)=>t==e[i])}function GX(n){let e=[[]];for(let t=0;t<n.length;t++)for(let i=0,s=e.length;i<s;i++)e.push(e[i].concat(n[t]));return e.sort((t,i)=>i.length-t.length)}function UD(n){let e=Object.create(null);for(let t in n){let i=n[t];Array.isArray(i)||(i=[i]);for(let s of t.split(" "))if(s){let r=[],l=2,o=s;for(let f=0;;){if(o=="..."&&f>0&&f+3==s.length){l=1;break}let h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(o);if(!h)throw new RangeError("Invalid path: "+s);if(r.push(h[0]=="*"?"":h[0][0]=='"'?JSON.parse(h[0]):h[0]),f+=h[0].length,f==s.length)break;let d=s[f++];if(f==s.length&&d=="!"){l=0;break}if(d!="/")throw new RangeError("Invalid path: "+s);o=s.slice(f)}let a=r.length-1,c=r[a];if(!c)throw new RangeError("Invalid path: "+s);let u=new Cd(i,l,a>0?r.slice(0,a):null);e[c]=u.sort(e[c])}}return WD.add(e)}const WD=new rn;class Cd{constructor(e,t,i,s){this.tags=e,this.mode=t,this.context=i,this.next=s}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Cd.empty=new Cd([],2,null);function FD(n,e){let t=Object.create(null);for(let r of n)if(!Array.isArray(r.tag))t[r.tag.id]=r.class;else for(let l of r.tag)t[l.id]=r.class;let{scope:i,all:s=null}=e||{};return{style:r=>{let l=s;for(let o of r)for(let a of o.set){let c=t[a.id];if(c){l=l?l+" "+c:c;break}}return l},scope:i}}function KX(n,e){let t=null;for(let i of n){let s=i.style(e);s&&(t=t?t+" "+s:s)}return t}function QX(n,e,t,i=0,s=n.length){let r=new XX(i,Array.isArray(e)?e:[e],t);r.highlightRange(n.cursor(),i,s,"",r.highlighters),r.flush(s)}class XX{constructor(e,t,i){this.at=e,this.highlighters=t,this.span=i,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,i,s,r){let{type:l,from:o,to:a}=e;if(o>=i||a<=t)return;l.isTop&&(r=this.highlighters.filter(d=>!d.scope||d.scope(l)));let c=s,u=YX(e)||Cd.empty,f=KX(r,u.tags);if(f&&(c&&(c+=" "),c+=f,u.mode==1&&(s+=(s?" ":"")+f)),this.startSpan(e.from,c),u.opaque)return;let h=e.tree&&e.tree.prop(rn.mounted);if(h&&h.overlay){let d=e.node.enter(h.overlay[0].from+o,1),p=this.highlighters.filter(y=>!y.scope||y.scope(h.tree.type)),v=e.firstChild();for(let y=0,b=o;;y++){let S=y<h.overlay.length?h.overlay[y]:null,I=S?S.from+o:a,T=Math.max(t,b),C=Math.min(i,I);if(T<C&&v)for(;e.from<C&&(this.highlightRange(e,T,C,s,r),this.startSpan(Math.min(C,e.to),c),!(e.to>=I||!e.nextSibling())););if(!S||I>i)break;b=S.to+o,b>t&&(this.highlightRange(d.cursor(),Math.max(t,S.from+o),Math.min(i,b),s,p),this.startSpan(b,c))}v&&e.parent()}else if(e.firstChild()){do if(!(e.to<=t)){if(e.from>=i)break;this.highlightRange(e,t,i,s,r),this.startSpan(Math.min(i,e.to),c)}while(e.nextSibling());e.parent()}}}function YX(n){let e=n.type.prop(WD);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}const dt=Dr.define,th=dt(),Cl=dt(),bA=dt(Cl),_A=dt(Cl),kl=dt(),nh=dt(kl),zp=dt(kl),Rr=dt(),co=dt(Rr),Tr=dt(),Ir=dt(),s0=dt(),Nc=dt(s0),ih=dt(),ct={comment:th,lineComment:dt(th),blockComment:dt(th),docComment:dt(th),name:Cl,variableName:dt(Cl),typeName:bA,tagName:dt(bA),propertyName:_A,attributeName:dt(_A),className:dt(Cl),labelName:dt(Cl),namespace:dt(Cl),macroName:dt(Cl),literal:kl,string:nh,docString:dt(nh),character:dt(nh),attributeValue:dt(nh),number:zp,integer:dt(zp),float:dt(zp),bool:dt(kl),regexp:dt(kl),escape:dt(kl),color:dt(kl),url:dt(kl),keyword:Tr,self:dt(Tr),null:dt(Tr),atom:dt(Tr),unit:dt(Tr),modifier:dt(Tr),operatorKeyword:dt(Tr),controlKeyword:dt(Tr),definitionKeyword:dt(Tr),moduleKeyword:dt(Tr),operator:Ir,derefOperator:dt(Ir),arithmeticOperator:dt(Ir),logicOperator:dt(Ir),bitwiseOperator:dt(Ir),compareOperator:dt(Ir),updateOperator:dt(Ir),definitionOperator:dt(Ir),typeOperator:dt(Ir),controlOperator:dt(Ir),punctuation:s0,separator:dt(s0),bracket:Nc,angleBracket:dt(Nc),squareBracket:dt(Nc),paren:dt(Nc),brace:dt(Nc),content:Rr,heading:co,heading1:dt(co),heading2:dt(co),heading3:dt(co),heading4:dt(co),heading5:dt(co),heading6:dt(co),contentSeparator:dt(Rr),list:dt(Rr),quote:dt(Rr),emphasis:dt(Rr),strong:dt(Rr),link:dt(Rr),monospace:dt(Rr),strikethrough:dt(Rr),inserted:dt(),deleted:dt(),changed:dt(),invalid:dt(),meta:ih,documentMeta:dt(ih),annotation:dt(ih),processingInstruction:dt(ih),definition:Dr.defineModifier(),constant:Dr.defineModifier(),function:Dr.defineModifier(),standard:Dr.defineModifier(),local:Dr.defineModifier(),special:Dr.defineModifier()};FD([{tag:ct.link,class:"tok-link"},{tag:ct.heading,class:"tok-heading"},{tag:ct.emphasis,class:"tok-emphasis"},{tag:ct.strong,class:"tok-strong"},{tag:ct.keyword,class:"tok-keyword"},{tag:ct.atom,class:"tok-atom"},{tag:ct.bool,class:"tok-bool"},{tag:ct.url,class:"tok-url"},{tag:ct.labelName,class:"tok-labelName"},{tag:ct.inserted,class:"tok-inserted"},{tag:ct.deleted,class:"tok-deleted"},{tag:ct.literal,class:"tok-literal"},{tag:ct.string,class:"tok-string"},{tag:ct.number,class:"tok-number"},{tag:[ct.regexp,ct.escape,ct.special(ct.string)],class:"tok-string2"},{tag:ct.variableName,class:"tok-variableName"},{tag:ct.local(ct.variableName),class:"tok-variableName tok-local"},{tag:ct.definition(ct.variableName),class:"tok-variableName tok-definition"},{tag:ct.special(ct.variableName),class:"tok-variableName2"},{tag:ct.definition(ct.propertyName),class:"tok-propertyName tok-definition"},{tag:ct.typeName,class:"tok-typeName"},{tag:ct.namespace,class:"tok-namespace"},{tag:ct.className,class:"tok-className"},{tag:ct.macroName,class:"tok-macroName"},{tag:ct.propertyName,class:"tok-propertyName"},{tag:ct.operator,class:"tok-operator"},{tag:ct.comment,class:"tok-comment"},{tag:ct.meta,class:"tok-meta"},{tag:ct.invalid,class:"tok-invalid"},{tag:ct.punctuation,class:"tok-punctuation"}]);var Gp;const Sa=new rn;function JX(n){return kt.define({combine:n?e=>e.concat(n):void 0})}const ZX=new rn;class pr{constructor(e,t,i=[],s=""){this.data=e,this.name=s,ln.prototype.hasOwnProperty("tree")||Object.defineProperty(ln.prototype,"tree",{get(){return ms(this)}}),this.parser=t,this.extension=[$l.of(this),ln.languageData.of((r,l,o)=>{let a=yA(r,l,o),c=a.type.prop(Sa);if(!c)return[];let u=r.facet(c),f=a.type.prop(ZX);if(f){let h=a.resolve(l-a.from,o);for(let d of f)if(d.test(h,r)){let p=r.facet(d.facet);return d.type=="replace"?p:p.concat(u)}}return u})].concat(i)}isActiveAt(e,t,i=-1){return yA(e,t,i).type.prop(Sa)==this.data}findRegions(e){let t=e.facet($l);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[],s=(r,l)=>{if(r.prop(Sa)==this.data){i.push({from:l,to:l+r.length});return}let o=r.prop(rn.mounted);if(o){if(o.tree.prop(Sa)==this.data){if(o.overlay)for(let a of o.overlay)i.push({from:a.from+l,to:a.to+l});else i.push({from:l,to:l+r.length});return}else if(o.overlay){let a=i.length;if(s(o.tree,o.overlay[0].from+l),i.length>a)return}}for(let a=0;a<r.children.length;a++){let c=r.children[a];c instanceof wi&&s(c,r.positions[a]+l)}};return s(ms(e),0),i}get allowsNesting(){return!0}}pr.setState=$t.define();function yA(n,e,t){let i=n.facet($l),s=ms(n).topNode;if(!i||i.allowsNesting)for(let r=s;r;r=r.enter(e,t,Yi.ExcludeBuffers))r.type.isTop&&(s=r);return s}class kd extends pr{constructor(e,t,i){super(e,t,[],i),this.parser=t}static define(e){let t=JX(e.languageData);return new kd(t,e.parser.configure({props:[Sa.add(i=>i.isTop?t:void 0)]}),e.name)}configure(e,t){return new kd(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function ms(n){let e=n.field(pr.state,!1);return e?e.tree:wi.empty}class xX{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}}let Pc=null;class Td{constructor(e,t,i=[],s,r,l,o,a){this.parser=e,this.state=t,this.fragments=i,this.tree=s,this.treeLen=r,this.viewport=l,this.skipped=o,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,i){return new Td(e,t,[],wi.empty,0,i,[],null)}startParse(){return this.parser.startParse(new xX(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=wi.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let s=Date.now()+e;e=()=>Date.now()>s}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let s=this.parse.advance();if(s)if(this.fragments=this.withoutTempSkipped(Do.addTree(s,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=s,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Do.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=Pc;Pc=this;try{return e()}finally{Pc=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=SA(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:s,treeLen:r,viewport:l,skipped:o}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((c,u,f,h)=>a.push({fromA:c,toA:u,fromB:f,toB:h})),i=Do.applyChanges(i,a),s=wi.empty,r=0,l={from:e.mapPos(l.from,-1),to:e.mapPos(l.to,1)},this.skipped.length){o=[];for(let c of this.skipped){let u=e.mapPos(c.from,1),f=e.mapPos(c.to,-1);u<f&&o.push({from:u,to:f})}}}return new Td(this.parser,t,i,s,r,l,o,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:s,to:r}=this.skipped[i];s<e.to&&r>e.from&&(this.fragments=SA(this.fragments,s,r),this.skipped.splice(i--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends VD{createParse(t,i,s){let r=s[0].from,l=s[s.length-1].to;return{parsedPos:r,advance(){let a=Pc;if(a){for(let c of s)a.tempSkipped.push(c);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=l,new wi(Bs.none,[],[],l-r)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return Pc}}function SA(n,e,t){return Do.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class tc{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,i)||t.takeTree(),new tc(t)}static init(e){let t=Math.min(3e3,e.doc.length),i=Td.create(e.facet($l).parser,e,{from:0,to:t});return i.work(20,t)||i.takeTree(),new tc(i)}}pr.state=Vi.define({create:tc.init,update(n,e){for(let t of e.effects)if(t.is(pr.setState))return t.value;return e.startState.facet($l)!=e.state.facet($l)?tc.init(e.state):n.apply(e)}});let jD=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(jD=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:500-100})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const Kp=typeof navigator<"u"&&(!((Gp=navigator.scheduling)===null||Gp===void 0)&&Gp.isInputPending)?()=>navigator.scheduling.isInputPending():null,$X=ki.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(pr.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(pr.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=jD(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:s}}=this.view,r=i.field(pr.state);if(r.tree==r.context.tree&&r.context.isDone(s+1e5))return;let l=Date.now()+Math.min(this.chunkBudget,100,e&&!Kp?Math.max(25,e.timeRemaining()-5):1e9),o=r.context.treeLen<s&&i.doc.length>s+1e3,a=r.context.work(()=>Kp&&Kp()||Date.now()>l,s+(o?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(r.context.takeTree(),this.view.dispatch({effects:pr.setState.of(new tc(r.context))})),this.chunkBudget>0&&!(a&&!o)&&this.scheduleWork(),this.checkAsyncSchedule(r.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>Hs(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),$l=kt.define({combine(n){return n.length?n[0]:null},enables:n=>[pr.state,$X,wt.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]});class eY{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const tY=kt.define(),Gm=kt.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function Id(n){let e=n.facet(Gm);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function qu(n,e){let t="",i=n.tabSize,s=n.facet(Gm)[0];if(s=="	"){for(;e>=i;)t+="	",e-=i;s=" "}for(let r=0;r<e;r++)t+=s;return t}function mb(n,e){n instanceof ln&&(n=new Km(n));for(let i of n.state.facet(tY)){let s=i(n,e);if(s!==void 0)return s}let t=ms(n.state);return t?nY(n,t,e):null}class Km{constructor(e,t={}){this.state=e,this.options=t,this.unit=Id(e)}lineAt(e,t=1){let i=this.state.doc.lineAt(e),{simulateBreak:s,simulateDoubleBreak:r}=this.options;return s!=null&&s>=i.from&&s<=i.to?r&&s==e?{text:"",from:e}:(t<0?s<e:s<=e)?{text:i.text.slice(s-i.from),from:s}:{text:i.text.slice(0,s-i.from),from:i.from}:i}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:s}=this.lineAt(e,t);return i.slice(e-s,Math.min(i.length,e+100-s))}column(e,t=1){let{text:i,from:s}=this.lineAt(e,t),r=this.countColumn(i,e-s),l=this.options.overrideIndentation?this.options.overrideIndentation(s):-1;return l>-1&&(r+=l-this.countColumn(i,i.search(/\S|$/))),r}countColumn(e,t=e.length){return _f(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:i,from:s}=this.lineAt(e,t),r=this.options.overrideIndentation;if(r){let l=r(s);if(l>-1)return l}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const HD=new rn;function nY(n,e,t){return qD(e.resolveInner(t).enterUnfinishedNodesBefore(t),t,n)}function iY(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function sY(n){let e=n.type.prop(HD);if(e)return e;let t=n.firstChild,i;if(t&&(i=t.type.prop(rn.closedBy))){let s=n.lastChild,r=s&&i.indexOf(s.name)>-1;return l=>aY(l,!0,1,void 0,r&&!iY(l)?s.from:void 0)}return n.parent==null?rY:null}function qD(n,e,t){for(;n;n=n.parent){let i=sY(n);if(i)return i(pb.create(t,e,n))}return null}function rY(){return 0}class pb extends Km{constructor(e,t,i){super(e.state,e.options),this.base=e,this.pos=t,this.node=i}static create(e,t,i){return new pb(e,t,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let e=this.state.doc.lineAt(this.node.from);for(;;){let t=this.node.resolve(e.from);for(;t.parent&&t.parent.from==t.from;)t=t.parent;if(lY(t,this.node))break;e=this.state.doc.lineAt(t.from)}return this.lineIndent(e.from)}continue(){let e=this.node.parent;return e?qD(e,this.pos,this.base):0}}function lY(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function oY(n){let e=n.node,t=e.childAfter(e.from),i=e.lastChild;if(!t)return null;let s=n.options.simulateBreak,r=n.state.doc.lineAt(t.from),l=s==null||s<=r.from?r.to:Math.min(r.to,s);for(let o=t.to;;){let a=e.childAfter(o);if(!a||a==i)return null;if(!a.type.isSkipped)return a.from<l?t:null;o=a.to}}function aY(n,e,t,i,s){let r=n.textAfter,l=r.match(/^\s*/)[0].length,o=i&&r.slice(l,l+i.length)==i||s==n.pos+l,a=e?oY(n):null;return a?o?n.column(a.from):n.column(a.to):n.baseIndent+(o?0:n.unit*t)}function EA({except:n,units:e=1}={}){return t=>{let i=n&&n.test(t.textAfter);return t.baseIndent+(i?0:e*t.unit)}}const cY=200;function uY(){return ln.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let e=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!e.length)return n;let t=n.newDoc,{head:i}=n.newSelection.main,s=t.lineAt(i);if(i>s.from+cY)return n;let r=t.sliceString(s.from,i);if(!e.some(c=>c.test(r)))return n;let{state:l}=n,o=-1,a=[];for(let{head:c}of l.selection.ranges){let u=l.doc.lineAt(c);if(u.from==o)continue;o=u.from;let f=mb(l,u.from);if(f==null)continue;let h=/^\s*/.exec(u.text)[0],d=qu(l,f);h!=d&&a.push({from:u.from,to:u.from+h.length,insert:d})}return a.length?[n,{changes:a,sequential:!0}]:n})}const fY=kt.define(),zD=new rn;function hY(n){let e=n.firstChild,t=n.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?n.to:t.from}:null}function dY(n,e,t){let i=ms(n);if(i.length<t)return null;let s=i.resolveInner(t,1),r=null;for(let l=s;l;l=l.parent){if(l.to<=t||l.from>t)continue;if(r&&l.from<e)break;let o=l.type.prop(zD);if(o&&(l.to<i.length-50||i.length==n.doc.length||!mY(l))){let a=o(l,n);a&&a.from<=t&&a.from>=e&&a.to>t&&(r=a)}}return r}function mY(n){let e=n.lastChild;return e&&e.to==n.to&&e.type.isError}function Od(n,e,t){for(let i of n.facet(fY)){let s=i(n,e,t);if(s)return s}return dY(n,e,t)}function GD(n,e){let t=e.mapPos(n.from,1),i=e.mapPos(n.to,-1);return t>=i?void 0:{from:t,to:i}}const Qm=$t.define({map:GD}),Ef=$t.define({map:GD});function KD(n){let e=[];for(let{head:t}of n.state.selection.ranges)e.some(i=>i.from<=t&&i.to>=t)||e.push(n.lineBlockAt(t));return e}const Qo=Vi.define({create(){return Lt.none},update(n,e){n=n.map(e.changes);for(let t of e.effects)t.is(Qm)&&!pY(n,t.value.from,t.value.to)?n=n.update({add:[AA.range(t.value.from,t.value.to)]}):t.is(Ef)&&(n=n.update({filter:(i,s)=>t.value.from!=i||t.value.to!=s,filterFrom:t.value.from,filterTo:t.value.to}));if(e.selection){let t=!1,{head:i}=e.selection.main;n.between(i,i,(s,r)=>{s<i&&r>i&&(t=!0)}),t&&(n=n.update({filterFrom:i,filterTo:i,filter:(s,r)=>r<=i||s>=i}))}return n},provide:n=>wt.decorations.from(n),toJSON(n,e){let t=[];return n.between(0,e.doc.length,(i,s)=>{t.push(i,s)}),t},fromJSON(n){if(!Array.isArray(n)||n.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<n.length;){let i=n[t++],s=n[t++];if(typeof i!="number"||typeof s!="number")throw new RangeError("Invalid JSON for fold state");e.push(AA.range(i,s))}return Lt.set(e,!0)}});function Rd(n,e,t){var i;let s=null;return(i=n.field(Qo,!1))===null||i===void 0||i.between(e,t,(r,l)=>{(!s||s.from>r)&&(s={from:r,to:l})}),s}function pY(n,e,t){let i=!1;return n.between(e,e,(s,r)=>{s==e&&r==t&&(i=!0)}),i}function QD(n,e){return n.field(Qo,!1)?e:e.concat($t.appendConfig.of(JD()))}const gY=n=>{for(let e of KD(n)){let t=Od(n.state,e.from,e.to);if(t)return n.dispatch({effects:QD(n.state,[Qm.of(t),XD(n,t)])}),!0}return!1},vY=n=>{if(!n.state.field(Qo,!1))return!1;let e=[];for(let t of KD(n)){let i=Rd(n.state,t.from,t.to);i&&e.push(Ef.of(i),XD(n,i,!1))}return e.length&&n.dispatch({effects:e}),e.length>0};function XD(n,e,t=!0){let i=n.state.doc.lineAt(e.from).number,s=n.state.doc.lineAt(e.to).number;return wt.announce.of(`${n.state.phrase(t?"Folded lines":"Unfolded lines")} ${i} ${n.state.phrase("to")} ${s}.`)}const bY=n=>{let{state:e}=n,t=[];for(let i=0;i<e.doc.length;){let s=n.lineBlockAt(i),r=Od(e,s.from,s.to);r&&t.push(Qm.of(r)),i=(r?n.lineBlockAt(r.to):s).to+1}return t.length&&n.dispatch({effects:QD(n.state,t)}),!!t.length},_Y=n=>{let e=n.state.field(Qo,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,n.state.doc.length,(i,s)=>{t.push(Ef.of({from:i,to:s}))}),n.dispatch({effects:t}),!0},yY=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:gY},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:vY},{key:"Ctrl-Alt-[",run:bY},{key:"Ctrl-Alt-]",run:_Y}],SY={placeholderDOM:null,placeholderText:""},YD=kt.define({combine(n){return Er(n,SY)}});function JD(n){let e=[Qo,wY];return n&&e.push(YD.of(n)),e}const AA=Lt.replace({widget:new class extends no{toDOM(n){let{state:e}=n,t=e.facet(YD),i=r=>{let l=n.lineBlockAt(n.posAtDOM(r.target)),o=Rd(n.state,l.from,l.to);o&&n.dispatch({effects:Ef.of(o)}),r.preventDefault()};if(t.placeholderDOM)return t.placeholderDOM(n,i);let s=document.createElement("span");return s.textContent=t.placeholderText,s.setAttribute("aria-label",e.phrase("folded code")),s.title=e.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=i,s}}}),EY={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class Qp extends Kr{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function AY(n={}){let e=Object.assign(Object.assign({},EY),n),t=new Qp(e,!0),i=new Qp(e,!1),s=ki.fromClass(class{constructor(l){this.from=l.viewport.from,this.markers=this.buildMarkers(l)}update(l){(l.docChanged||l.viewportChanged||l.startState.facet($l)!=l.state.facet($l)||l.startState.field(Qo,!1)!=l.state.field(Qo,!1)||ms(l.startState)!=ms(l.state)||e.foldingChanged(l))&&(this.markers=this.buildMarkers(l.view))}buildMarkers(l){let o=new Yl;for(let a of l.viewportLineBlocks){let c=Rd(l.state,a.from,a.to)?i:Od(l.state,a.from,a.to)?t:null;c&&o.add(a.from,a.from,c)}return o.finish()}}),{domEventHandlers:r}=e;return[s,RD({class:"cm-foldGutter",markers(l){var o;return((o=l.plugin(s))===null||o===void 0?void 0:o.markers)||In.empty},initialSpacer(){return new Qp(e,!1)},domEventHandlers:Object.assign(Object.assign({},r),{click:(l,o,a)=>{if(r.click&&r.click(l,o,a))return!0;let c=Rd(l.state,o.from,o.to);if(c)return l.dispatch({effects:Ef.of(c)}),!0;let u=Od(l.state,o.from,o.to);return u?(l.dispatch({effects:Qm.of(u)}),!0):!1}})}),JD()]}const wY=wt.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Af{constructor(e,t){this.specs=e;let i;function s(o){let a=Jl.newName();return(i||(i=Object.create(null)))["."+a]=o,a}const r=typeof t.all=="string"?t.all:t.all?s(t.all):void 0,l=t.scope;this.scope=l instanceof pr?o=>o.prop(Sa)==l.data:l?o=>o==l:void 0,this.style=FD(e.map(o=>({tag:o.tag,class:o.class||s(Object.assign({},o,{tag:null}))})),{all:r}).style,this.module=i?new Jl(i):null,this.themeType=t.themeType}static define(e,t){return new Af(e,t||{})}}const r0=kt.define(),ZD=kt.define({combine(n){return n.length?[n[0]]:null}});function Xp(n){let e=n.facet(r0);return e.length?e:n.facet(ZD)}function xD(n,e){let t=[kY],i;return n instanceof Af&&(n.module&&t.push(wt.styleModule.of(n.module)),i=n.themeType),e!=null&&e.fallback?t.push(ZD.of(n)):i?t.push(r0.computeN([wt.darkTheme],s=>s.facet(wt.darkTheme)==(i=="dark")?[n]:[])):t.push(r0.of(n)),t}class CY{constructor(e){this.markCache=Object.create(null),this.tree=ms(e.state),this.decorations=this.buildDeco(e,Xp(e.state))}update(e){let t=ms(e.state),i=Xp(e.state),s=i!=Xp(e.startState);t.length<e.view.viewport.to&&!s&&t.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(t!=this.tree||e.viewportChanged||s)&&(this.tree=t,this.decorations=this.buildDeco(e.view,i))}buildDeco(e,t){if(!t||!this.tree.length)return Lt.none;let i=new Yl;for(let{from:s,to:r}of e.visibleRanges)QX(this.tree,t,(l,o,a)=>{i.add(l,o,this.markCache[a]||(this.markCache[a]=Lt.mark({class:a})))},s,r);return i.finish()}}const kY=Sc.high(ki.fromClass(CY,{decorations:n=>n.decorations})),TY=Af.define([{tag:ct.meta,color:"#404740"},{tag:ct.link,textDecoration:"underline"},{tag:ct.heading,textDecoration:"underline",fontWeight:"bold"},{tag:ct.emphasis,fontStyle:"italic"},{tag:ct.strong,fontWeight:"bold"},{tag:ct.strikethrough,textDecoration:"line-through"},{tag:ct.keyword,color:"#708"},{tag:[ct.atom,ct.bool,ct.url,ct.contentSeparator,ct.labelName],color:"#219"},{tag:[ct.literal,ct.inserted],color:"#164"},{tag:[ct.string,ct.deleted],color:"#a11"},{tag:[ct.regexp,ct.escape,ct.special(ct.string)],color:"#e40"},{tag:ct.definition(ct.variableName),color:"#00f"},{tag:ct.local(ct.variableName),color:"#30a"},{tag:[ct.typeName,ct.namespace],color:"#085"},{tag:ct.className,color:"#167"},{tag:[ct.special(ct.variableName),ct.macroName],color:"#256"},{tag:ct.definition(ct.propertyName),color:"#00c"},{tag:ct.comment,color:"#940"},{tag:ct.invalid,color:"#f00"}]),IY=wt.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),$D=1e4,eN="()[]{}",tN=kt.define({combine(n){return Er(n,{afterCursor:!0,brackets:eN,maxScanDistance:$D,renderMatch:DY})}}),OY=Lt.mark({class:"cm-matchingBracket"}),RY=Lt.mark({class:"cm-nonmatchingBracket"});function DY(n){let e=[],t=n.matched?OY:RY;return e.push(t.range(n.start.from,n.start.to)),n.end&&e.push(t.range(n.end.from,n.end.to)),e}const NY=Vi.define({create(){return Lt.none},update(n,e){if(!e.docChanged&&!e.selection)return n;let t=[],i=e.state.facet(tN);for(let s of e.state.selection.ranges){if(!s.empty)continue;let r=Br(e.state,s.head,-1,i)||s.head>0&&Br(e.state,s.head-1,1,i)||i.afterCursor&&(Br(e.state,s.head,1,i)||s.head<e.state.doc.length&&Br(e.state,s.head+1,-1,i));r&&(t=t.concat(i.renderMatch(r,e.state)))}return Lt.set(t,!0)},provide:n=>wt.decorations.from(n)}),PY=[NY,IY];function MY(n={}){return[tN.of(n),PY]}const BY=new rn;function l0(n,e,t){let i=n.prop(e<0?rn.openedBy:rn.closedBy);if(i)return i;if(n.name.length==1){let s=t.indexOf(n.name);if(s>-1&&s%2==(e<0?1:0))return[t[s+e]]}return null}function o0(n){let e=n.type.prop(BY);return e?e(n.node):n}function Br(n,e,t,i={}){let s=i.maxScanDistance||$D,r=i.brackets||eN,l=ms(n),o=l.resolveInner(e,t);for(let a=o;a;a=a.parent){let c=l0(a.type,t,r);if(c&&a.from<a.to){let u=o0(a);if(u&&(t>0?e>=u.from&&e<u.to:e>u.from&&e<=u.to))return LY(n,e,t,a,u,c,r)}}return VY(n,e,t,l,o.type,s,r)}function LY(n,e,t,i,s,r,l){let o=i.parent,a={from:s.from,to:s.to},c=0,u=o==null?void 0:o.cursor();if(u&&(t<0?u.childBefore(i.from):u.childAfter(i.to)))do if(t<0?u.to<=i.from:u.from>=i.to){if(c==0&&r.indexOf(u.type.name)>-1&&u.from<u.to){let f=o0(u);return{start:a,end:f?{from:f.from,to:f.to}:void 0,matched:!0}}else if(l0(u.type,t,l))c++;else if(l0(u.type,-t,l)){if(c==0){let f=o0(u);return{start:a,end:f&&f.from<f.to?{from:f.from,to:f.to}:void 0,matched:!1}}c--}}while(t<0?u.prevSibling():u.nextSibling());return{start:a,matched:!1}}function VY(n,e,t,i,s,r,l){let o=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),a=l.indexOf(o);if(a<0||a%2==0!=t>0)return null;let c={from:t<0?e-1:e,to:t>0?e+1:e},u=n.doc.iterRange(e,t>0?n.doc.length:0),f=0;for(let h=0;!u.next().done&&h<=r;){let d=u.value;t<0&&(h+=d.length);let p=e+h*t;for(let v=t>0?0:d.length-1,y=t>0?d.length:-1;v!=y;v+=t){let b=l.indexOf(d[v]);if(!(b<0||i.resolveInner(p+v,1).type!=s))if(b%2==0==t>0)f++;else{if(f==1)return{start:c,end:{from:p+v,to:p+v+1},matched:b>>1==a>>1};f--}}t>0&&(h+=d.length)}return u.done?{start:c,matched:!1}:null}const UY=Object.create(null),wA=[Bs.none],CA=[],WY=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])WY[n]=FY(UY,e);function Yp(n,e){CA.indexOf(n)>-1||(CA.push(n),console.warn(e))}function FY(n,e){let t=null;for(let r of e.split(".")){let l=n[r]||ct[r];l?typeof l=="function"?t?t=l(t):Yp(r,`Modifier ${r} used at start of tag`):t?Yp(r,`Tag ${r} used as modifier`):t=l:Yp(r,`Unknown highlighting tag ${r}`)}if(!t)return 0;let i=e.replace(/ /g,"_"),s=Bs.define({id:wA.length,name:i,props:[UD({[i]:t})]});return wA.push(s),s.id}const jY=n=>{let{state:e}=n,t=e.doc.lineAt(e.selection.main.head),i=vb(n.state,t.from);return i.line?HY(n):i.block?zY(n):!1};function gb(n,e){return({state:t,dispatch:i})=>{if(t.readOnly)return!1;let s=n(e,t);return s?(i(t.update(s)),!0):!1}}const HY=gb(QY,0),qY=gb(nN,0),zY=gb((n,e)=>nN(n,e,KY(e)),0);function vb(n,e){let t=n.languageDataAt("commentTokens",e);return t.length?t[0]:{}}const Mc=50;function GY(n,{open:e,close:t},i,s){let r=n.sliceDoc(i-Mc,i),l=n.sliceDoc(s,s+Mc),o=/\s*$/.exec(r)[0].length,a=/^\s*/.exec(l)[0].length,c=r.length-o;if(r.slice(c-e.length,c)==e&&l.slice(a,a+t.length)==t)return{open:{pos:i-o,margin:o&&1},close:{pos:s+a,margin:a&&1}};let u,f;s-i<=2*Mc?u=f=n.sliceDoc(i,s):(u=n.sliceDoc(i,i+Mc),f=n.sliceDoc(s-Mc,s));let h=/^\s*/.exec(u)[0].length,d=/\s*$/.exec(f)[0].length,p=f.length-d-t.length;return u.slice(h,h+e.length)==e&&f.slice(p,p+t.length)==t?{open:{pos:i+h+e.length,margin:/\s/.test(u.charAt(h+e.length))?1:0},close:{pos:s-d-t.length,margin:/\s/.test(f.charAt(p-1))?1:0}}:null}function KY(n){let e=[];for(let t of n.selection.ranges){let i=n.doc.lineAt(t.from),s=t.to<=i.to?i:n.doc.lineAt(t.to),r=e.length-1;r>=0&&e[r].to>i.from?e[r].to=s.to:e.push({from:i.from,to:s.to})}return e}function nN(n,e,t=e.selection.ranges){let i=t.map(r=>vb(e,r.from).block);if(!i.every(r=>r))return null;let s=t.map((r,l)=>GY(e,i[l],r.from,r.to));if(n!=2&&!s.every(r=>r))return{changes:e.changes(t.map((r,l)=>s[l]?[]:[{from:r.from,insert:i[l].open+" "},{from:r.to,insert:" "+i[l].close}]))};if(n!=1&&s.some(r=>r)){let r=[];for(let l=0,o;l<s.length;l++)if(o=s[l]){let a=i[l],{open:c,close:u}=o;r.push({from:c.pos-a.open.length,to:c.pos+c.margin},{from:u.pos-u.margin,to:u.pos+a.close.length})}return{changes:r}}return null}function QY(n,e,t=e.selection.ranges){let i=[],s=-1;for(let{from:r,to:l}of t){let o=i.length,a=1e9;for(let c=r;c<=l;){let u=e.doc.lineAt(c);if(u.from>s&&(r==l||l>u.from)){s=u.from;let f=vb(e,u.from).line;if(!f)continue;let h=/^\s*/.exec(u.text)[0].length,d=h==u.length,p=u.text.slice(h,h+f.length)==f?h:-1;h<u.text.length&&h<a&&(a=h),i.push({line:u,comment:p,token:f,indent:h,empty:d,single:!1})}c=u.to+1}if(a<1e9)for(let c=o;c<i.length;c++)i[c].indent<i[c].line.text.length&&(i[c].indent=a);i.length==o+1&&(i[o].single=!0)}if(n!=2&&i.some(r=>r.comment<0&&(!r.empty||r.single))){let r=[];for(let{line:o,token:a,indent:c,empty:u,single:f}of i)(f||!u)&&r.push({from:o.from+c,insert:a+" "});let l=e.changes(r);return{changes:l,selection:e.selection.map(l,1)}}else if(n!=1&&i.some(r=>r.comment>=0)){let r=[];for(let{line:l,comment:o,token:a}of i)if(o>=0){let c=l.from+o,u=c+a.length;l.text[u-l.from]==" "&&u++,r.push({from:c,to:u})}return{changes:r}}return null}const a0=yl.define(),XY=yl.define(),YY=kt.define(),iN=kt.define({combine(n){return Er(n,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(i,s)=>e(i,s)||t(i,s)})}});function JY(n){let e=0;return n.iterChangedRanges((t,i)=>e=i),e}const bb=Vi.define({create(){return Lr.empty},update(n,e){let t=e.state.facet(iN),i=e.annotation(a0);if(i){let a=e.docChanged?Je.single(JY(e.changes)):void 0,c=Ps.fromTransaction(e,a),u=i.side,f=u==0?n.undone:n.done;return c?f=Nd(f,f.length,t.minDepth,c):f=lN(f,e.startState.selection),new Lr(u==0?i.rest:f,u==0?f:i.rest)}let s=e.annotation(XY);if((s=="full"||s=="before")&&(n=n.isolate()),e.annotation(Di.addToHistory)===!1)return e.changes.empty?n:n.addMapping(e.changes.desc);let r=Ps.fromTransaction(e),l=e.annotation(Di.time),o=e.annotation(Di.userEvent);return r?n=n.addChanges(r,l,o,t,e):e.selection&&(n=n.addSelection(e.startState.selection,l,o,t.newGroupDelay)),(s=="full"||s=="after")&&(n=n.isolate()),n},toJSON(n){return{done:n.done.map(e=>e.toJSON()),undone:n.undone.map(e=>e.toJSON())}},fromJSON(n){return new Lr(n.done.map(Ps.fromJSON),n.undone.map(Ps.fromJSON))}});function ZY(n={}){return[bb,iN.of(n),wt.domEventHandlers({beforeinput(e,t){let i=e.inputType=="historyUndo"?_b:e.inputType=="historyRedo"?Dd:null;return i?(e.preventDefault(),i(t)):!1}})]}function Xm(n,e){return function({state:t,dispatch:i}){if(!e&&t.readOnly)return!1;let s=t.field(bb,!1);if(!s)return!1;let r=s.pop(n,t,e);return r?(i(r),!0):!1}}const _b=Xm(0,!1),Dd=Xm(1,!1),xY=Xm(0,!0),$Y=Xm(1,!0);function sN(n){return function(e){let t=e.field(bb,!1);if(!t)return 0;let i=n==0?t.done:t.undone;return i.length-(i.length&&!i[0].changes?1:0)}}const eJ=sN(0),tJ=sN(1);class Ps{constructor(e,t,i,s,r){this.changes=e,this.effects=t,this.mapped=i,this.startSelection=s,this.selectionsAfter=r}setSelAfter(e){return new Ps(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(s=>s.toJSON())}}static fromJSON(e){return new Ps(e.changes&&Oi.fromJSON(e.changes),[],e.mapped&&Hr.fromJSON(e.mapped),e.startSelection&&Je.fromJSON(e.startSelection),e.selectionsAfter.map(Je.fromJSON))}static fromTransaction(e,t){let i=er;for(let s of e.startState.facet(YY)){let r=s(e);r.length&&(i=i.concat(r))}return!i.length&&e.changes.empty?null:new Ps(e.changes.invert(e.startState.doc),i,void 0,t||e.startState.selection,er)}static selection(e){return new Ps(void 0,er,void 0,void 0,e)}}function Nd(n,e,t,i){let s=e+1>t+20?e-t-1:0,r=n.slice(s,e);return r.push(i),r}function nJ(n,e){let t=[],i=!1;return n.iterChangedRanges((s,r)=>t.push(s,r)),e.iterChangedRanges((s,r,l,o)=>{for(let a=0;a<t.length;){let c=t[a++],u=t[a++];o>=c&&l<=u&&(i=!0)}}),i}function iJ(n,e){return n.ranges.length==e.ranges.length&&n.ranges.filter((t,i)=>t.empty!=e.ranges[i].empty).length===0}function rN(n,e){return n.length?e.length?n.concat(e):n:e}const er=[],sJ=200;function lN(n,e){if(n.length){let t=n[n.length-1],i=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-sJ));return i.length&&i[i.length-1].eq(e)?n:(i.push(e),Nd(n,n.length-1,1e9,t.setSelAfter(i)))}else return[Ps.selection([e])]}function rJ(n){let e=n[n.length-1],t=n.slice();return t[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function Jp(n,e){if(!n.length)return n;let t=n.length,i=er;for(;t;){let s=lJ(n[t-1],e,i);if(s.changes&&!s.changes.empty||s.effects.length){let r=n.slice(0,t);return r[t-1]=s,r}else e=s.mapped,t--,i=s.selectionsAfter}return i.length?[Ps.selection(i)]:er}function lJ(n,e,t){let i=rN(n.selectionsAfter.length?n.selectionsAfter.map(o=>o.map(e)):er,t);if(!n.changes)return Ps.selection(i);let s=n.changes.map(e),r=e.mapDesc(n.changes,!0),l=n.mapped?n.mapped.composeDesc(r):r;return new Ps(s,$t.mapEffects(n.effects,e),l,n.startSelection.map(r),i)}const oJ=/^(input\.type|delete)($|\.)/;class Lr{constructor(e,t,i=0,s=void 0){this.done=e,this.undone=t,this.prevTime=i,this.prevUserEvent=s}isolate(){return this.prevTime?new Lr(this.done,this.undone):this}addChanges(e,t,i,s,r){let l=this.done,o=l[l.length-1];return o&&o.changes&&!o.changes.empty&&e.changes&&(!i||oJ.test(i))&&(!o.selectionsAfter.length&&t-this.prevTime<s.newGroupDelay&&s.joinToEvent(r,nJ(o.changes,e.changes))||i=="input.type.compose")?l=Nd(l,l.length-1,s.minDepth,new Ps(e.changes.compose(o.changes),rN(e.effects,o.effects),o.mapped,o.startSelection,er)):l=Nd(l,l.length,s.minDepth,e),new Lr(l,er,t,i)}addSelection(e,t,i,s){let r=this.done.length?this.done[this.done.length-1].selectionsAfter:er;return r.length>0&&t-this.prevTime<s&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&iJ(r[r.length-1],e)?this:new Lr(lN(this.done,e),this.undone,t,i)}addMapping(e){return new Lr(Jp(this.done,e),Jp(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,i){let s=e==0?this.done:this.undone;if(s.length==0)return null;let r=s[s.length-1];if(i&&r.selectionsAfter.length)return t.update({selection:r.selectionsAfter[r.selectionsAfter.length-1],annotations:a0.of({side:e,rest:rJ(s)}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(r.changes){let l=s.length==1?er:s.slice(0,s.length-1);return r.mapped&&(l=Jp(l,r.mapped)),t.update({changes:r.changes,selection:r.startSelection,effects:r.effects,annotations:a0.of({side:e,rest:l}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Lr.empty=new Lr(er,er);const aJ=[{key:"Mod-z",run:_b,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Dd,preventDefault:!0},{linux:"Ctrl-Shift-z",run:Dd,preventDefault:!0},{key:"Mod-u",run:xY,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:$Y,preventDefault:!0}];function Ec(n,e){return Je.create(n.ranges.map(e),n.mainIndex)}function Yr(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Ar({state:n,dispatch:e},t){let i=Ec(n.selection,t);return i.eq(n.selection)?!1:(e(Yr(n,i)),!0)}function Ym(n,e){return Je.cursor(e?n.to:n.from)}function oN(n,e){return Ar(n,t=>t.empty?n.moveByChar(t,e):Ym(t,e))}function ps(n){return n.textDirectionAt(n.state.selection.main.head)==si.LTR}const aN=n=>oN(n,!ps(n)),cN=n=>oN(n,ps(n));function uN(n,e){return Ar(n,t=>t.empty?n.moveByGroup(t,e):Ym(t,e))}const cJ=n=>uN(n,!ps(n)),uJ=n=>uN(n,ps(n));function fJ(n,e,t){if(e.type.prop(t))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function Jm(n,e,t){let i=ms(n).resolveInner(e.head),s=t?rn.closedBy:rn.openedBy;for(let a=e.head;;){let c=t?i.childAfter(a):i.childBefore(a);if(!c)break;fJ(n,c,s)?i=c:a=t?c.to:c.from}let r=i.type.prop(s),l,o;return r&&(l=t?Br(n,i.from,1):Br(n,i.to,-1))&&l.matched?o=t?l.end.to:l.end.from:o=t?i.to:i.from,Je.cursor(o,t?-1:1)}const hJ=n=>Ar(n,e=>Jm(n.state,e,!ps(n))),dJ=n=>Ar(n,e=>Jm(n.state,e,ps(n)));function fN(n,e){return Ar(n,t=>{if(!t.empty)return Ym(t,e);let i=n.moveVertically(t,e);return i.head!=t.head?i:n.moveToLineBoundary(t,e)})}const hN=n=>fN(n,!1),dN=n=>fN(n,!0);function mN(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,t=0,i=0,s;if(e){for(let r of n.state.facet(wt.scrollMargins)){let l=r(n);l!=null&&l.top&&(t=Math.max(l==null?void 0:l.top,t)),l!=null&&l.bottom&&(i=Math.max(l==null?void 0:l.bottom,i))}s=n.scrollDOM.clientHeight-t-i}else s=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:i,selfScroll:e,height:Math.max(n.defaultLineHeight,s-5)}}function pN(n,e){let t=mN(n),{state:i}=n,s=Ec(i.selection,l=>l.empty?n.moveVertically(l,e,t.height):Ym(l,e));if(s.eq(i.selection))return!1;let r;if(t.selfScroll){let l=n.coordsAtPos(i.selection.main.head),o=n.scrollDOM.getBoundingClientRect(),a=o.top+t.marginTop,c=o.bottom-t.marginBottom;l&&l.top>a&&l.bottom<c&&(r=wt.scrollIntoView(s.main.head,{y:"start",yMargin:l.top-a}))}return n.dispatch(Yr(i,s),{effects:r}),!0}const kA=n=>pN(n,!1),c0=n=>pN(n,!0);function io(n,e,t){let i=n.lineBlockAt(e.head),s=n.moveToLineBoundary(e,t);if(s.head==e.head&&s.head!=(t?i.to:i.from)&&(s=n.moveToLineBoundary(e,t,!1)),!t&&s.head==i.from&&i.length){let r=/^\s*/.exec(n.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;r&&e.head!=i.from+r&&(s=Je.cursor(i.from+r))}return s}const mJ=n=>Ar(n,e=>io(n,e,!0)),pJ=n=>Ar(n,e=>io(n,e,!1)),gJ=n=>Ar(n,e=>io(n,e,!ps(n))),vJ=n=>Ar(n,e=>io(n,e,ps(n))),bJ=n=>Ar(n,e=>Je.cursor(n.lineBlockAt(e.head).from,1)),_J=n=>Ar(n,e=>Je.cursor(n.lineBlockAt(e.head).to,-1));function yJ(n,e,t){let i=!1,s=Ec(n.selection,r=>{let l=Br(n,r.head,-1)||Br(n,r.head,1)||r.head>0&&Br(n,r.head-1,1)||r.head<n.doc.length&&Br(n,r.head+1,-1);if(!l||!l.end)return r;i=!0;let o=l.start.from==r.head?l.end.to:l.end.from;return t?Je.range(r.anchor,o):Je.cursor(o)});return i?(e(Yr(n,s)),!0):!1}const SJ=({state:n,dispatch:e})=>yJ(n,e,!1);function lr(n,e){let t=Ec(n.state.selection,i=>{let s=e(i);return Je.range(i.anchor,s.head,s.goalColumn,s.bidiLevel||void 0)});return t.eq(n.state.selection)?!1:(n.dispatch(Yr(n.state,t)),!0)}function gN(n,e){return lr(n,t=>n.moveByChar(t,e))}const vN=n=>gN(n,!ps(n)),bN=n=>gN(n,ps(n));function _N(n,e){return lr(n,t=>n.moveByGroup(t,e))}const EJ=n=>_N(n,!ps(n)),AJ=n=>_N(n,ps(n)),wJ=n=>lr(n,e=>Jm(n.state,e,!ps(n))),CJ=n=>lr(n,e=>Jm(n.state,e,ps(n)));function yN(n,e){return lr(n,t=>n.moveVertically(t,e))}const SN=n=>yN(n,!1),EN=n=>yN(n,!0);function AN(n,e){return lr(n,t=>n.moveVertically(t,e,mN(n).height))}const TA=n=>AN(n,!1),IA=n=>AN(n,!0),kJ=n=>lr(n,e=>io(n,e,!0)),TJ=n=>lr(n,e=>io(n,e,!1)),IJ=n=>lr(n,e=>io(n,e,!ps(n))),OJ=n=>lr(n,e=>io(n,e,ps(n))),RJ=n=>lr(n,e=>Je.cursor(n.lineBlockAt(e.head).from)),DJ=n=>lr(n,e=>Je.cursor(n.lineBlockAt(e.head).to)),OA=({state:n,dispatch:e})=>(e(Yr(n,{anchor:0})),!0),RA=({state:n,dispatch:e})=>(e(Yr(n,{anchor:n.doc.length})),!0),DA=({state:n,dispatch:e})=>(e(Yr(n,{anchor:n.selection.main.anchor,head:0})),!0),NA=({state:n,dispatch:e})=>(e(Yr(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),NJ=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),PJ=({state:n,dispatch:e})=>{let t=xm(n).map(({from:i,to:s})=>Je.range(i,Math.min(s+1,n.doc.length)));return e(n.update({selection:Je.create(t),userEvent:"select"})),!0},MJ=({state:n,dispatch:e})=>{let t=Ec(n.selection,i=>{var s;let r=ms(n).resolveInner(i.head,1);for(;!(r.from<i.from&&r.to>=i.to||r.to>i.to&&r.from<=i.from||!(!((s=r.parent)===null||s===void 0)&&s.parent));)r=r.parent;return Je.range(r.to,r.from)});return e(Yr(n,t)),!0},BJ=({state:n,dispatch:e})=>{let t=n.selection,i=null;return t.ranges.length>1?i=Je.create([t.main]):t.main.empty||(i=Je.create([Je.cursor(t.main.head)])),i?(e(Yr(n,i)),!0):!1};function Zm(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:i}=n,s=i.changeByRange(r=>{let{from:l,to:o}=r;if(l==o){let a=e(l);a<l?(t="delete.backward",a=sh(n,a,!1)):a>l&&(t="delete.forward",a=sh(n,a,!0)),l=Math.min(l,a),o=Math.max(o,a)}else l=sh(n,l,!1),o=sh(n,o,!0);return l==o?{range:r}:{changes:{from:l,to:o},range:Je.cursor(l)}});return s.changes.empty?!1:(n.dispatch(i.update(s,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?wt.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function sh(n,e,t){if(n instanceof wt)for(let i of n.state.facet(wt.atomicRanges).map(s=>s(n)))i.between(e,e,(s,r)=>{s<e&&r>e&&(e=t?r:s)});return e}const wN=(n,e)=>Zm(n,t=>{let{state:i}=n,s=i.doc.lineAt(t),r,l;if(!e&&t>s.from&&t<s.from+200&&!/[^ \t]/.test(r=s.text.slice(0,t-s.from))){if(r[r.length-1]=="	")return t-1;let o=_f(r,i.tabSize),a=o%Id(i)||Id(i);for(let c=0;c<a&&r[r.length-1-c]==" ";c++)t--;l=t}else l=Es(s.text,t-s.from,e,e)+s.from,l==t&&s.number!=(e?i.doc.lines:1)&&(l+=e?1:-1);return l}),u0=n=>wN(n,!1),CN=n=>wN(n,!0),kN=(n,e)=>Zm(n,t=>{let i=t,{state:s}=n,r=s.doc.lineAt(i),l=s.charCategorizer(i);for(let o=null;;){if(i==(e?r.to:r.from)){i==t&&r.number!=(e?s.doc.lines:1)&&(i+=e?1:-1);break}let a=Es(r.text,i-r.from,e)+r.from,c=r.text.slice(Math.min(i,a)-r.from,Math.max(i,a)-r.from),u=l(c);if(o!=null&&u!=o)break;(c!=" "||i!=t)&&(o=u),i=a}return i}),TN=n=>kN(n,!1),LJ=n=>kN(n,!0),IN=n=>Zm(n,e=>{let t=n.lineBlockAt(e).to;return e<t?t:Math.min(n.state.doc.length,e+1)}),VJ=n=>Zm(n,e=>{let t=n.lineBlockAt(e).from;return e>t?t:Math.max(0,e-1)}),UJ=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:Tn.of(["",""])},range:Je.cursor(i.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},WJ=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(i=>{if(!i.empty||i.from==0||i.from==n.doc.length)return{range:i};let s=i.from,r=n.doc.lineAt(s),l=s==r.from?s-1:Es(r.text,s-r.from,!1)+r.from,o=s==r.to?s+1:Es(r.text,s-r.from,!0)+r.from;return{changes:{from:l,to:o,insert:n.doc.slice(s,o).append(n.doc.slice(l,s))},range:Je.cursor(o)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function xm(n){let e=[],t=-1;for(let i of n.selection.ranges){let s=n.doc.lineAt(i.from),r=n.doc.lineAt(i.to);if(!i.empty&&i.to==r.from&&(r=n.doc.lineAt(i.to-1)),t>=s.number){let l=e[e.length-1];l.to=r.to,l.ranges.push(i)}else e.push({from:s.from,to:r.to,ranges:[i]});t=r.number+1}return e}function ON(n,e,t){if(n.readOnly)return!1;let i=[],s=[];for(let r of xm(n)){if(t?r.to==n.doc.length:r.from==0)continue;let l=n.doc.lineAt(t?r.to+1:r.from-1),o=l.length+1;if(t){i.push({from:r.to,to:l.to},{from:r.from,insert:l.text+n.lineBreak});for(let a of r.ranges)s.push(Je.range(Math.min(n.doc.length,a.anchor+o),Math.min(n.doc.length,a.head+o)))}else{i.push({from:l.from,to:r.from},{from:r.to,insert:n.lineBreak+l.text});for(let a of r.ranges)s.push(Je.range(a.anchor-o,a.head-o))}}return i.length?(e(n.update({changes:i,scrollIntoView:!0,selection:Je.create(s,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const FJ=({state:n,dispatch:e})=>ON(n,e,!1),jJ=({state:n,dispatch:e})=>ON(n,e,!0);function RN(n,e,t){if(n.readOnly)return!1;let i=[];for(let s of xm(n))t?i.push({from:s.from,insert:n.doc.slice(s.from,s.to)+n.lineBreak}):i.push({from:s.to,insert:n.lineBreak+n.doc.slice(s.from,s.to)});return e(n.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const HJ=({state:n,dispatch:e})=>RN(n,e,!1),qJ=({state:n,dispatch:e})=>RN(n,e,!0),zJ=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(xm(e).map(({from:s,to:r})=>(s>0?s--:r<e.doc.length&&r++,{from:s,to:r}))),i=Ec(e.selection,s=>n.moveVertically(s,!0)).map(t);return n.dispatch({changes:t,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function GJ(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=ms(n).resolveInner(e),i=t.childBefore(e),s=t.childAfter(e),r;return i&&s&&i.to<=e&&s.from>=e&&(r=i.type.prop(rn.closedBy))&&r.indexOf(s.name)>-1&&n.doc.lineAt(i.to).from==n.doc.lineAt(s.from).from?{from:i.to,to:s.from}:null}const KJ=DN(!1),QJ=DN(!0);function DN(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange(s=>{let{from:r,to:l}=s,o=e.doc.lineAt(r),a=!n&&r==l&&GJ(e,r);n&&(r=l=(l<=o.to?o:e.doc.lineAt(l)).to);let c=new Km(e,{simulateBreak:r,simulateDoubleBreak:!!a}),u=mb(c,r);for(u==null&&(u=/^\s*/.exec(e.doc.lineAt(r).text)[0].length);l<o.to&&/\s/.test(o.text[l-o.from]);)l++;a?{from:r,to:l}=a:r>o.from&&r<o.from+100&&!/\S/.test(o.text.slice(0,r))&&(r=o.from);let f=["",qu(e,u)];return a&&f.push(qu(e,c.lineIndent(o.from,-1))),{changes:{from:r,to:l,insert:Tn.of(f)},range:Je.cursor(r+1+f[1].length)}});return t(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function yb(n,e){let t=-1;return n.changeByRange(i=>{let s=[];for(let l=i.from;l<=i.to;){let o=n.doc.lineAt(l);o.number>t&&(i.empty||i.to>o.from)&&(e(o,s,i),t=o.number),l=o.to+1}let r=n.changes(s);return{changes:s,range:Je.range(r.mapPos(i.anchor,1),r.mapPos(i.head,1))}})}const XJ=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),i=new Km(n,{overrideIndentation:r=>{let l=t[r];return l??-1}}),s=yb(n,(r,l,o)=>{let a=mb(i,r.from);if(a==null)return;/\S/.test(r.text)||(a=0);let c=/^\s*/.exec(r.text)[0],u=qu(n,a);(c!=u||o.from<r.from+c.length)&&(t[r.from]=a,l.push({from:r.from,to:r.from+c.length,insert:u}))});return s.changes.empty||e(n.update(s,{userEvent:"indent"})),!0},NN=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(yb(n,(t,i)=>{i.push({from:t.from,insert:n.facet(Gm)})}),{userEvent:"input.indent"})),!0),PN=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(yb(n,(t,i)=>{let s=/^\s*/.exec(t.text)[0];if(!s)return;let r=_f(s,n.tabSize),l=0,o=qu(n,Math.max(0,r-Id(n)));for(;l<s.length&&l<o.length&&s.charCodeAt(l)==o.charCodeAt(l);)l++;i.push({from:t.from+l,to:t.from+s.length,insert:o.slice(l)})}),{userEvent:"delete.dedent"})),!0),YJ=[{key:"Ctrl-b",run:aN,shift:vN,preventDefault:!0},{key:"Ctrl-f",run:cN,shift:bN},{key:"Ctrl-p",run:hN,shift:SN},{key:"Ctrl-n",run:dN,shift:EN},{key:"Ctrl-a",run:bJ,shift:RJ},{key:"Ctrl-e",run:_J,shift:DJ},{key:"Ctrl-d",run:CN},{key:"Ctrl-h",run:u0},{key:"Ctrl-k",run:IN},{key:"Ctrl-Alt-h",run:TN},{key:"Ctrl-o",run:UJ},{key:"Ctrl-t",run:WJ},{key:"Ctrl-v",run:c0}],JJ=[{key:"ArrowLeft",run:aN,shift:vN,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:cJ,shift:EJ,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:gJ,shift:IJ,preventDefault:!0},{key:"ArrowRight",run:cN,shift:bN,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:uJ,shift:AJ,preventDefault:!0},{mac:"Cmd-ArrowRight",run:vJ,shift:OJ,preventDefault:!0},{key:"ArrowUp",run:hN,shift:SN,preventDefault:!0},{mac:"Cmd-ArrowUp",run:OA,shift:DA},{mac:"Ctrl-ArrowUp",run:kA,shift:TA},{key:"ArrowDown",run:dN,shift:EN,preventDefault:!0},{mac:"Cmd-ArrowDown",run:RA,shift:NA},{mac:"Ctrl-ArrowDown",run:c0,shift:IA},{key:"PageUp",run:kA,shift:TA},{key:"PageDown",run:c0,shift:IA},{key:"Home",run:pJ,shift:TJ,preventDefault:!0},{key:"Mod-Home",run:OA,shift:DA},{key:"End",run:mJ,shift:kJ,preventDefault:!0},{key:"Mod-End",run:RA,shift:NA},{key:"Enter",run:KJ},{key:"Mod-a",run:NJ},{key:"Backspace",run:u0,shift:u0},{key:"Delete",run:CN},{key:"Mod-Backspace",mac:"Alt-Backspace",run:TN},{key:"Mod-Delete",mac:"Alt-Delete",run:LJ},{mac:"Mod-Backspace",run:VJ},{mac:"Mod-Delete",run:IN}].concat(YJ.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),ZJ=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:hJ,shift:wJ},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:dJ,shift:CJ},{key:"Alt-ArrowUp",run:FJ},{key:"Shift-Alt-ArrowUp",run:HJ},{key:"Alt-ArrowDown",run:jJ},{key:"Shift-Alt-ArrowDown",run:qJ},{key:"Escape",run:BJ},{key:"Mod-Enter",run:QJ},{key:"Alt-l",mac:"Ctrl-l",run:PJ},{key:"Mod-i",run:MJ,preventDefault:!0},{key:"Mod-[",run:PN},{key:"Mod-]",run:NN},{key:"Mod-Alt-\\",run:XJ},{key:"Shift-Mod-k",run:zJ},{key:"Shift-Mod-\\",run:SJ},{key:"Mod-/",run:jY},{key:"Alt-A",run:qY}].concat(JJ),xJ={key:"Tab",run:NN,shift:PN};function Fn(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var s=t[i];typeof s=="string"?n.setAttribute(i,s):s!=null&&(n[i]=s)}e++}for(;e<arguments.length;e++)MN(n,arguments[e]);return n}function MN(n,e){if(typeof e=="string")n.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)n.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)MN(n,e[t]);else throw new RangeError("Unsupported child node: "+e)}const PA=typeof String.prototype.normalize=="function"?n=>n.normalize("NFKD"):n=>n;class nc{constructor(e,t,i=0,s=e.length,r,l){this.test=l,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,s),this.bufferStart=i,this.normalize=r?o=>r(PA(o)):PA,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Qi(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=$v(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=xs(e);let s=this.normalize(t);for(let r=0,l=i;;r++){let o=s.charCodeAt(r),a=this.match(o,l);if(a)return this.value=a,this;if(r==s.length-1)break;l==i&&r<t.length&&t.charCodeAt(r)==o&&l++}}}match(e,t){let i=null;for(let s=0;s<this.matches.length;s+=2){let r=this.matches[s],l=!1;this.query.charCodeAt(r)==e&&(r==this.query.length-1?i={from:this.matches[s+1],to:t+1}:(this.matches[s]++,l=!0)),l||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:t,to:t+1}:this.matches.push(1,t)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferPos)&&(i=null),i}}typeof Symbol<"u"&&(nc.prototype[Symbol.iterator]=function(){return this});const BN={from:-1,to:-1,match:/.*/.exec("")},Sb="gm"+(/x/.unicode==null?"":"u");class LN{constructor(e,t,i,s=0,r=e.length){if(this.text=e,this.to=r,this.curLine="",this.done=!1,this.value=BN,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new VN(e,t,i,s,r);this.re=new RegExp(t,Sb+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.iter=e.iter();let l=e.lineAt(s);this.curLineStart=l.from,this.matchPos=Pd(e,s),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let i=this.curLineStart+t.index,s=i+t[0].length;if(this.matchPos=Pd(this.text,s+(i==s?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<s||i>this.value.to)&&(!this.test||this.test(i,s,t)))return this.value={from:i,to:s,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const Zp=new WeakMap;class Da{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,i){let s=Zp.get(e);if(!s||s.from>=i||s.to<=t){let o=new Da(t,e.sliceString(t,i));return Zp.set(e,o),o}if(s.from==t&&s.to==i)return s;let{text:r,from:l}=s;return l>t&&(r=e.sliceString(t,l)+r,l=t),s.to<i&&(r+=e.sliceString(s.to,i)),Zp.set(e,new Da(l,r)),new Da(t,r.slice(t-l,i-l))}}class VN{constructor(e,t,i,s,r){this.text=e,this.to=r,this.done=!1,this.value=BN,this.matchPos=Pd(e,s),this.re=new RegExp(t,Sb+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.flat=Da.get(e,s,this.chunkEnd(s+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let i=this.flat.from+t.index,s=i+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,s,t)))return this.value={from:i,to:s,match:t},this.matchPos=Pd(this.text,s+(i==s?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Da.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(LN.prototype[Symbol.iterator]=VN.prototype[Symbol.iterator]=function(){return this});function $J(n){try{return new RegExp(n,Sb),!0}catch{return!1}}function Pd(n,e){if(e>=n.length)return e;let t=n.lineAt(e),i;for(;e<t.to&&(i=t.text.charCodeAt(e-t.from))>=56320&&i<57344;)e++;return e}function f0(n){let e=Fn("input",{class:"cm-textfield",name:"line"}),t=Fn("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),n.dispatch({effects:Md.of(!1)}),n.focus()):s.keyCode==13&&(s.preventDefault(),i())},onsubmit:s=>{s.preventDefault(),i()}},Fn("label",n.state.phrase("Go to line"),": ",e)," ",Fn("button",{class:"cm-button",type:"submit"},n.state.phrase("go")));function i(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);if(!s)return;let{state:r}=n,l=r.doc.lineAt(r.selection.main.head),[,o,a,c,u]=s,f=c?+c.slice(1):0,h=a?+a:l.number;if(a&&u){let p=h/100;o&&(p=p*(o=="-"?-1:1)+l.number/r.doc.lines),h=Math.round(r.doc.lines*p)}else a&&o&&(h=h*(o=="-"?-1:1)+l.number);let d=r.doc.line(Math.max(1,Math.min(r.doc.lines,h)));n.dispatch({effects:Md.of(!1),selection:Je.cursor(d.from+Math.max(0,Math.min(f,d.length))),scrollIntoView:!0}),n.focus()}return{dom:t}}const Md=$t.define(),MA=Vi.define({create(){return!0},update(n,e){for(let t of e.effects)t.is(Md)&&(n=t.value);return n},provide:n=>Hu.from(n,e=>e?f0:null)}),eZ=n=>{let e=ju(n,f0);if(!e){let t=[Md.of(!0)];n.state.field(MA,!1)==null&&t.push($t.appendConfig.of([MA,tZ])),n.dispatch({effects:t}),e=ju(n,f0)}return e&&e.dom.querySelector("input").focus(),!0},tZ=wt.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),nZ={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},UN=kt.define({combine(n){return Er(n,nZ,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function iZ(n){let e=[aZ,oZ];return n&&e.push(UN.of(n)),e}const sZ=Lt.mark({class:"cm-selectionMatch"}),rZ=Lt.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function BA(n,e,t,i){return(t==0||n(e.sliceDoc(t-1,t))!=ti.Word)&&(i==e.doc.length||n(e.sliceDoc(i,i+1))!=ti.Word)}function lZ(n,e,t,i){return n(e.sliceDoc(t,t+1))==ti.Word&&n(e.sliceDoc(i-1,i))==ti.Word}const oZ=ki.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.selectionSet||n.docChanged||n.viewportChanged)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=n.state.facet(UN),{state:t}=n,i=t.selection;if(i.ranges.length>1)return Lt.none;let s=i.main,r,l=null;if(s.empty){if(!e.highlightWordAroundCursor)return Lt.none;let a=t.wordAt(s.head);if(!a)return Lt.none;l=t.charCategorizer(s.head),r=t.sliceDoc(a.from,a.to)}else{let a=s.to-s.from;if(a<e.minSelectionLength||a>200)return Lt.none;if(e.wholeWords){if(r=t.sliceDoc(s.from,s.to),l=t.charCategorizer(s.head),!(BA(l,t,s.from,s.to)&&lZ(l,t,s.from,s.to)))return Lt.none}else if(r=t.sliceDoc(s.from,s.to).trim(),!r)return Lt.none}let o=[];for(let a of n.visibleRanges){let c=new nc(t.doc,r,a.from,a.to);for(;!c.next().done;){let{from:u,to:f}=c.value;if((!l||BA(l,t,u,f))&&(s.empty&&u<=s.from&&f>=s.to?o.push(rZ.range(u,f)):(u>=s.to||f<=s.from)&&o.push(sZ.range(u,f)),o.length>e.maxMatches))return Lt.none}}return Lt.set(o)}},{decorations:n=>n.decorations}),aZ=wt.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),cZ=({state:n,dispatch:e})=>{let{selection:t}=n,i=Je.create(t.ranges.map(s=>n.wordAt(s.head)||Je.cursor(s.head)),t.mainIndex);return i.eq(t)?!1:(e(n.update({selection:i})),!0)};function uZ(n,e){let{main:t,ranges:i}=n.selection,s=n.wordAt(t.head),r=s&&s.from==t.from&&s.to==t.to;for(let l=!1,o=new nc(n.doc,e,i[i.length-1].to);;)if(o.next(),o.done){if(l)return null;o=new nc(n.doc,e,0,Math.max(0,i[i.length-1].from-1)),l=!0}else{if(l&&i.some(a=>a.from==o.value.from))continue;if(r){let a=n.wordAt(o.value.from);if(!a||a.from!=o.value.from||a.to!=o.value.to)continue}return o.value}}const fZ=({state:n,dispatch:e})=>{let{ranges:t}=n.selection;if(t.some(r=>r.from===r.to))return cZ({state:n,dispatch:e});let i=n.sliceDoc(t[0].from,t[0].to);if(n.selection.ranges.some(r=>n.sliceDoc(r.from,r.to)!=i))return!1;let s=uZ(n,i);return s?(e(n.update({selection:n.selection.addRange(Je.range(s.from,s.to),!1),effects:wt.scrollIntoView(s.to)})),!0):!1},$m=kt.define({combine(n){return Er(n,{top:!1,caseSensitive:!1,literal:!1,wholeWord:!1,createPanel:e=>new wZ(e)})}});function hZ(n){return n?[$m.of(n),d0]:d0}class WN{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||$J(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new gZ(this):new mZ(this)}getCursor(e,t=0,i){let s=e.doc?e:ln.create({doc:e});return i==null&&(i=s.doc.length),this.regexp?va(this,s,t,i):ga(this,s,t,i)}}class FN{constructor(e){this.spec=e}}function ga(n,e,t,i){return new nc(e.doc,n.unquoted,t,i,n.caseSensitive?void 0:s=>s.toLowerCase(),n.wholeWord?dZ(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function dZ(n,e){return(t,i,s,r)=>((r>t||r+s.length<i)&&(r=Math.max(0,t-2),s=n.sliceString(r,Math.min(n.length,i+2))),(e(Bd(s,t-r))!=ti.Word||e(Ld(s,t-r))!=ti.Word)&&(e(Ld(s,i-r))!=ti.Word||e(Bd(s,i-r))!=ti.Word))}class mZ extends FN{constructor(e){super(e)}nextMatch(e,t,i){let s=ga(this.spec,e,i,e.doc.length).nextOverlapping();return s.done&&(s=ga(this.spec,e,0,t).nextOverlapping()),s.done?null:s.value}prevMatchInRange(e,t,i){for(let s=i;;){let r=Math.max(t,s-1e4-this.spec.unquoted.length),l=ga(this.spec,e,r,s),o=null;for(;!l.nextOverlapping().done;)o=l.value;if(o)return o;if(r==t)return null;s-=1e4}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let i=ga(this.spec,e,0,e.doc.length),s=[];for(;!i.next().done;){if(s.length>=t)return null;s.push(i.value)}return s}highlight(e,t,i,s){let r=ga(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!r.next().done;)s(r.value.from,r.value.to)}}function va(n,e,t,i){return new LN(e.doc,n.search,{ignoreCase:!n.caseSensitive,test:n.wholeWord?pZ(e.charCategorizer(e.selection.main.head)):void 0},t,i)}function Bd(n,e){return n.slice(Es(n,e,!1),e)}function Ld(n,e){return n.slice(e,Es(n,e))}function pZ(n){return(e,t,i)=>!i[0].length||(n(Bd(i.input,i.index))!=ti.Word||n(Ld(i.input,i.index))!=ti.Word)&&(n(Ld(i.input,i.index+i[0].length))!=ti.Word||n(Bd(i.input,i.index+i[0].length))!=ti.Word)}class gZ extends FN{nextMatch(e,t,i){let s=va(this.spec,e,i,e.doc.length).next();return s.done&&(s=va(this.spec,e,0,t).next()),s.done?null:s.value}prevMatchInRange(e,t,i){for(let s=1;;s++){let r=Math.max(t,i-s*1e4),l=va(this.spec,e,r,i),o=null;for(;!l.next().done;)o=l.value;if(o&&(r==t||o.from>r+10))return o;if(r==t)return null}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g,(t,i)=>i=="$"?"$":i=="&"?e.match[0]:i!="0"&&+i<e.match.length?e.match[i]:t))}matchAll(e,t){let i=va(this.spec,e,0,e.doc.length),s=[];for(;!i.next().done;){if(s.length>=t)return null;s.push(i.value)}return s}highlight(e,t,i,s){let r=va(this.spec,e,Math.max(0,t-250),Math.min(i+250,e.doc.length));for(;!r.next().done;)s(r.value.from,r.value.to)}}const zu=$t.define(),Eb=$t.define(),Wl=Vi.define({create(n){return new xp(h0(n).create(),null)},update(n,e){for(let t of e.effects)t.is(zu)?n=new xp(t.value.create(),n.panel):t.is(Eb)&&(n=new xp(n.query,t.value?Ab:null));return n},provide:n=>Hu.from(n,e=>e.panel)});class xp{constructor(e,t){this.query=e,this.panel=t}}const vZ=Lt.mark({class:"cm-searchMatch"}),bZ=Lt.mark({class:"cm-searchMatch cm-searchMatch-selected"}),_Z=ki.fromClass(class{constructor(n){this.view=n,this.decorations=this.highlight(n.state.field(Wl))}update(n){let e=n.state.field(Wl);(e!=n.startState.field(Wl)||n.docChanged||n.selectionSet||n.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:n,panel:e}){if(!e||!n.spec.valid)return Lt.none;let{view:t}=this,i=new Yl;for(let s=0,r=t.visibleRanges,l=r.length;s<l;s++){let{from:o,to:a}=r[s];for(;s<l-1&&a>r[s+1].from-2*250;)a=r[++s].to;n.highlight(t.state,o,a,(c,u)=>{let f=t.state.selection.ranges.some(h=>h.from==c&&h.to==u);i.add(c,u,f?bZ:vZ)})}return i.finish()}},{decorations:n=>n.decorations});function wf(n){return e=>{let t=e.state.field(Wl,!1);return t&&t.query.spec.valid?n(e,t):wb(e)}}const Vd=wf((n,{query:e})=>{let{to:t}=n.state.selection.main,i=e.nextMatch(n.state,t,t);return i?(n.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:kb(n,i),userEvent:"select.search"}),!0):!1}),Ud=wf((n,{query:e})=>{let{state:t}=n,{from:i}=t.selection.main,s=e.prevMatch(t,i,i);return s?(n.dispatch({selection:{anchor:s.from,head:s.to},scrollIntoView:!0,effects:kb(n,s),userEvent:"select.search"}),!0):!1}),yZ=wf((n,{query:e})=>{let t=e.matchAll(n.state,1e3);return!t||!t.length?!1:(n.dispatch({selection:Je.create(t.map(i=>Je.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),SZ=({state:n,dispatch:e})=>{let t=n.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:i,to:s}=t.main,r=[],l=0;for(let o=new nc(n.doc,n.sliceDoc(i,s));!o.next().done;){if(r.length>1e3)return!1;o.value.from==i&&(l=r.length),r.push(Je.range(o.value.from,o.value.to))}return e(n.update({selection:Je.create(r,l),userEvent:"select.search.matches"})),!0},LA=wf((n,{query:e})=>{let{state:t}=n,{from:i,to:s}=t.selection.main;if(t.readOnly)return!1;let r=e.nextMatch(t,i,i);if(!r)return!1;let l=[],o,a,c=[];if(r.from==i&&r.to==s&&(a=t.toText(e.getReplacement(r)),l.push({from:r.from,to:r.to,insert:a}),r=e.nextMatch(t,r.from,r.to),c.push(wt.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(i).number)+"."))),r){let u=l.length==0||l[0].from>=r.to?0:r.to-r.from-a.length;o={anchor:r.from-u,head:r.to-u},c.push(kb(n,r))}return n.dispatch({changes:l,selection:o,scrollIntoView:!!o,effects:c,userEvent:"input.replace"}),!0}),EZ=wf((n,{query:e})=>{if(n.state.readOnly)return!1;let t=e.matchAll(n.state,1e9).map(s=>{let{from:r,to:l}=s;return{from:r,to:l,insert:e.getReplacement(s)}});if(!t.length)return!1;let i=n.state.phrase("replaced $ matches",t.length)+".";return n.dispatch({changes:t,effects:wt.announce.of(i),userEvent:"input.replace.all"}),!0});function Ab(n){return n.state.facet($m).createPanel(n)}function h0(n,e){var t,i,s,r;let l=n.selection.main,o=l.empty||l.to>l.from+100?"":n.sliceDoc(l.from,l.to);if(e&&!o)return e;let a=n.facet($m);return new WN({search:((t=e==null?void 0:e.literal)!==null&&t!==void 0?t:a.literal)?o:o.replace(/\n/g,"\\n"),caseSensitive:(i=e==null?void 0:e.caseSensitive)!==null&&i!==void 0?i:a.caseSensitive,literal:(s=e==null?void 0:e.literal)!==null&&s!==void 0?s:a.literal,wholeWord:(r=e==null?void 0:e.wholeWord)!==null&&r!==void 0?r:a.wholeWord})}const wb=n=>{let e=n.state.field(Wl,!1);if(e&&e.panel){let t=ju(n,Ab);if(!t)return!1;let i=t.dom.querySelector("[main-field]");if(i&&i!=n.root.activeElement){let s=h0(n.state,e.query.spec);s.valid&&n.dispatch({effects:zu.of(s)}),i.focus(),i.select()}}else n.dispatch({effects:[Eb.of(!0),e?zu.of(h0(n.state,e.query.spec)):$t.appendConfig.of(d0)]});return!0},Cb=n=>{let e=n.state.field(Wl,!1);if(!e||!e.panel)return!1;let t=ju(n,Ab);return t&&t.dom.contains(n.root.activeElement)&&n.focus(),n.dispatch({effects:Eb.of(!1)}),!0},AZ=[{key:"Mod-f",run:wb,scope:"editor search-panel"},{key:"F3",run:Vd,shift:Ud,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Vd,shift:Ud,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Cb,scope:"editor search-panel"},{key:"Mod-Shift-l",run:SZ},{key:"Alt-g",run:eZ},{key:"Mod-d",run:fZ,preventDefault:!0}];class wZ{constructor(e){this.view=e;let t=this.query=e.state.field(Wl).query.spec;this.commit=this.commit.bind(this),this.searchField=Fn("input",{value:t.search,placeholder:Ls(e,"Find"),"aria-label":Ls(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Fn("input",{value:t.replace,placeholder:Ls(e,"Replace"),"aria-label":Ls(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Fn("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=Fn("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=Fn("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function i(s,r,l){return Fn("button",{class:"cm-button",name:s,onclick:r,type:"button"},l)}this.dom=Fn("div",{onkeydown:s=>this.keydown(s),class:"cm-search"},[this.searchField,i("next",()=>Vd(e),[Ls(e,"next")]),i("prev",()=>Ud(e),[Ls(e,"previous")]),i("select",()=>yZ(e),[Ls(e,"all")]),Fn("label",null,[this.caseField,Ls(e,"match case")]),Fn("label",null,[this.reField,Ls(e,"regexp")]),Fn("label",null,[this.wordField,Ls(e,"by word")]),...e.state.readOnly?[]:[Fn("br"),this.replaceField,i("replace",()=>LA(e),[Ls(e,"replace")]),i("replaceAll",()=>EZ(e),[Ls(e,"replace all")])],Fn("button",{name:"close",onclick:()=>Cb(e),"aria-label":Ls(e,"close"),type:"button"},[""])])}commit(){let e=new WN({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:zu.of(e)}))}keydown(e){WQ(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Ud:Vd)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),LA(this.view))}update(e){for(let t of e.transactions)for(let i of t.effects)i.is(zu)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet($m).top}}function Ls(n,e){return n.state.phrase(e)}const rh=30,lh=/[\s\.,:;?!]/;function kb(n,{from:e,to:t}){let i=n.state.doc.lineAt(e),s=n.state.doc.lineAt(t).to,r=Math.max(i.from,e-rh),l=Math.min(s,t+rh),o=n.state.sliceDoc(r,l);if(r!=i.from){for(let a=0;a<rh;a++)if(!lh.test(o[a+1])&&lh.test(o[a])){o=o.slice(a);break}}if(l!=s){for(let a=o.length-1;a>o.length-rh;a--)if(!lh.test(o[a-1])&&lh.test(o[a])){o=o.slice(0,a);break}}return wt.announce.of(`${n.state.phrase("current match")}. ${o} ${n.state.phrase("on line")} ${i.number}.`)}const CZ=wt.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),d0=[Wl,Sc.lowest(_Z),CZ];class jN{constructor(e,t,i){this.state=e,this.pos=t,this.explicit=i,this.abortListeners=[]}tokenBefore(e){let t=ms(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),i=Math.max(t.from,this.pos-250),s=t.text.slice(i-t.from,this.pos-t.from),r=s.search(HN(e,!1));return r<0?null:{from:i+r,to:this.pos,text:s.slice(r)}}get aborted(){return this.abortListeners==null}addEventListener(e,t){e=="abort"&&this.abortListeners&&this.abortListeners.push(t)}}function VA(n){let e=Object.keys(n).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function kZ(n){let e=Object.create(null),t=Object.create(null);for(let{label:s}of n){e[s[0]]=!0;for(let r=1;r<s.length;r++)t[s[r]]=!0}let i=VA(e)+VA(t)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function TZ(n){let e=n.map(s=>typeof s=="string"?{label:s}:s),[t,i]=e.every(s=>/^\w+$/.test(s.label))?[/\w*$/,/\w+$/]:kZ(e);return s=>{let r=s.matchBefore(i);return r||s.explicit?{from:r?r.from:s.pos,options:e,validFor:t}:null}}class UA{constructor(e,t,i){this.completion=e,this.source=t,this.match=i}}function Fl(n){return n.selection.main.head}function HN(n,e){var t;let{source:i}=n,s=e&&i[0]!="^",r=i[i.length-1]!="$";return!s&&!r?n:new RegExp(`${s?"^":""}(?:${i})${r?"$":""}`,(t=n.flags)!==null&&t!==void 0?t:n.ignoreCase?"i":"")}const IZ=yl.define();function OZ(n,e,t,i){return Object.assign(Object.assign({},n.changeByRange(s=>{if(s==n.selection.main)return{changes:{from:t,to:i,insert:e},range:Je.cursor(t+e.length)};let r=i-t;return!s.empty||r&&n.sliceDoc(s.from-r,s.from)!=n.sliceDoc(t,i)?{range:s}:{changes:{from:s.from-r,to:s.from,insert:e},range:Je.cursor(s.from-r+e.length)}})),{userEvent:"input.complete"})}function qN(n,e){const t=e.completion.apply||e.completion.label;let i=e.source;typeof t=="string"?n.dispatch(Object.assign(Object.assign({},OZ(n.state,t,i.from,i.to)),{annotations:IZ.of(e.completion)})):t(n,e.completion,i.from,i.to)}const WA=new WeakMap;function RZ(n){if(!Array.isArray(n))return n;let e=WA.get(n);return e||WA.set(n,e=TZ(n)),e}class DZ{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let t=0;t<e.length;){let i=Qi(e,t),s=xs(i);this.chars.push(i);let r=e.slice(t,t+s),l=r.toUpperCase();this.folded.push(Qi(l==r?r.toLowerCase():l,0)),t+=s}this.astral=e.length!=this.chars.length}match(e){if(this.pattern.length==0)return[0];if(e.length<this.pattern.length)return null;let{chars:t,folded:i,any:s,precise:r,byWord:l}=this;if(t.length==1){let S=Qi(e,0),I=xs(S),T=I==e.length?0:-100;if(S!=t[0])if(S==i[0])T+=-200;else return null;return[T,0,I]}let o=e.indexOf(this.pattern);if(o==0)return[e.length==this.pattern.length?0:-100,0,this.pattern.length];let a=t.length,c=0;if(o<0){for(let S=0,I=Math.min(e.length,200);S<I&&c<a;){let T=Qi(e,S);(T==t[c]||T==i[c])&&(s[c++]=S),S+=xs(T)}if(c<a)return null}let u=0,f=0,h=!1,d=0,p=-1,v=-1,y=/[a-z]/.test(e),b=!0;for(let S=0,I=Math.min(e.length,200),T=0;S<I&&f<a;){let C=Qi(e,S);o<0&&(u<a&&C==t[u]&&(r[u++]=S),d<a&&(C==t[d]||C==i[d]?(d==0&&(p=S),v=S+1,d++):d=0));let k,R=C<255?C>=48&&C<=57||C>=97&&C<=122?2:C>=65&&C<=90?1:0:(k=$v(C))!=k.toLowerCase()?1:k!=k.toUpperCase()?2:0;(!S||R==1&&y||T==0&&R!=0)&&(t[f]==C||i[f]==C&&(h=!0)?l[f++]=S:l.length&&(b=!1)),T=R,S+=xs(C)}return f==a&&l[0]==0&&b?this.result(-100+(h?-200:0),l,e):d==a&&p==0?[-200-e.length+(v==e.length?0:-100),0,v]:o>-1?[-700-e.length,o,o+this.pattern.length]:d==a?[-200+-700-e.length,p,v]:f==a?this.result(-100+(h?-200:0)+-700+(b?0:-1100),l,e):t.length==2?null:this.result((s[0]?-700:0)+-200+-1100,s,e)}result(e,t,i){let s=[e-i.length],r=1;for(let l of t){let o=l+(this.astral?xs(Qi(i,l)):1);r>1&&s[r-1]==l?s[r-1]=o:(s[r++]=l,s[r++]=o)}return s}}const rr=kt.define({combine(n){return Er(n,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>i=>FA(e(i),t(i)),optionClass:(e,t)=>i=>FA(e(i),t(i)),addToOptions:(e,t)=>e.concat(t)})}});function FA(n,e){return n?e?n+" "+e:n:e}function NZ(n){let e=n.addToOptions.slice();return n.icons&&e.push({render(t){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),t.type&&i.classList.add(...t.type.split(/\s+/g).map(s=>"cm-completionIcon-"+s)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(t,i,s){let r=document.createElement("span");r.className="cm-completionLabel";let{label:l}=t,o=0;for(let a=1;a<s.length;){let c=s[a++],u=s[a++];c>o&&r.appendChild(document.createTextNode(l.slice(o,c)));let f=r.appendChild(document.createElement("span"));f.appendChild(document.createTextNode(l.slice(c,u))),f.className="cm-completionMatchedText",o=u}return o<l.length&&r.appendChild(document.createTextNode(l.slice(o))),r},position:50},{render(t){if(!t.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=t.detail,i},position:80}),e.sort((t,i)=>t.position-i.position).map(t=>t.render)}function jA(n,e,t){if(n<=t)return{from:0,to:n};if(e<0&&(e=0),e<=n>>1){let s=Math.floor(e/t);return{from:s*t,to:(s+1)*t}}let i=Math.floor((n-e)/t);return{from:n-(i+1)*t,to:n-i*t}}class PZ{constructor(e,t){this.view=e,this.stateField=t,this.info=null,this.placeInfo={read:()=>this.measureInfo(),write:o=>this.positionInfo(o),key:this},this.space=null,this.currentClass="";let i=e.state.field(t),{options:s,selected:r}=i.open,l=e.state.facet(rr);this.optionContent=NZ(l),this.optionClass=l.optionClass,this.tooltipClass=l.tooltipClass,this.range=jA(s.length,r,l.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",o=>{for(let a=o.target,c;a&&a!=this.dom;a=a.parentNode)if(a.nodeName=="LI"&&(c=/-(\d+)$/.exec(a.id))&&+c[1]<s.length){qN(e,s[+c[1]]),o.preventDefault();return}}),this.list=this.dom.appendChild(this.createListBox(s,i.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})}mount(){this.updateSel()}update(e){var t,i,s;let r=e.state.field(this.stateField),l=e.startState.field(this.stateField);this.updateTooltipClass(e.state),r!=l&&(this.updateSel(),((t=r.open)===null||t===void 0?void 0:t.disabled)!=((i=l.open)===null||i===void 0?void 0:i.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!(!((s=r.open)===null||s===void 0)&&s.disabled)))}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of t.split(" "))i&&this.dom.classList.add(i);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfo)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=jA(t.options.length,t.selected,this.view.state.facet(rr).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(t.options,e.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})),this.updateSelectedOption(t.selected)){this.info&&(this.info.remove(),this.info=null);let{completion:i}=t.options[t.selected],{info:s}=i;if(!s)return;let r=typeof s=="string"?document.createTextNode(s):s(i);if(!r)return;"then"in r?r.then(l=>{l&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(l)}).catch(l=>Hs(this.view.state,l,"completion info")):this.addInfoPane(r)}}addInfoPane(e){let t=this.info=document.createElement("div");t.className="cm-tooltip cm-completionInfo",t.appendChild(e),this.dom.appendChild(t),this.view.requestMeasure(this.placeInfo)}updateSelectedOption(e){let t=null;for(let i=this.list.firstChild,s=this.range.from;i;i=i.nextSibling,s++)s==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),t=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return t&&BZ(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),s=e.getBoundingClientRect(),r=this.space;if(!r){let p=this.dom.ownerDocument.defaultView||window;r={left:0,top:0,right:p.innerWidth,bottom:p.innerHeight}}if(s.top>Math.min(r.bottom,t.bottom)-10||s.bottom<Math.max(r.top,t.top)+10)return null;let l=this.view.textDirection==si.RTL,o=l,a=!1,c,u="",f="",h=t.left-r.left,d=r.right-t.right;if(o&&h<Math.min(i.width,d)?o=!1:!o&&d<Math.min(i.width,h)&&(o=!0),i.width<=(o?h:d))u=Math.max(r.top,Math.min(s.top,r.bottom-i.height))-t.top+"px",c=Math.min(400,o?h:d)+"px";else{a=!0,c=Math.min(400,(l?t.right:r.right-t.left)-30)+"px";let p=r.bottom-t.bottom;p>=i.height||p>t.top?u=s.bottom-t.top+"px":f=t.bottom-s.top+"px"}return{top:u,bottom:f,maxWidth:c,class:a?l?"left-narrow":"right-narrow":o?"left":"right"}}positionInfo(e){this.info&&(e?(this.info.style.top=e.top,this.info.style.bottom=e.bottom,this.info.style.maxWidth=e.maxWidth,this.info.className="cm-tooltip cm-completionInfo cm-completionInfo-"+e.class):this.info.style.top="-1e6px")}createListBox(e,t,i){const s=document.createElement("ul");s.id=t,s.setAttribute("role","listbox"),s.setAttribute("aria-expanded","true"),s.setAttribute("aria-label",this.view.state.phrase("Completions"));for(let r=i.from;r<i.to;r++){let{completion:l,match:o}=e[r];const a=s.appendChild(document.createElement("li"));a.id=t+"-"+r,a.setAttribute("role","option");let c=this.optionClass(l);c&&(a.className=c);for(let u of this.optionContent){let f=u(l,this.view.state,o);f&&a.appendChild(f)}}return i.from&&s.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&s.classList.add("cm-completionListIncompleteBottom"),s}}function MZ(n){return e=>new PZ(e,n)}function BZ(n,e){let t=n.getBoundingClientRect(),i=e.getBoundingClientRect();i.top<t.top?n.scrollTop-=t.top-i.top:i.bottom>t.bottom&&(n.scrollTop+=i.bottom-t.bottom)}function HA(n){return(n.boost||0)*100+(n.apply?10:0)+(n.info?5:0)+(n.type?1:0)}function LZ(n,e){let t=[],i=0;for(let o of n)if(o.hasResult())if(o.result.filter===!1){let a=o.result.getMatch;for(let c of o.result.options){let u=[1e9-i++];if(a)for(let f of a(c))u.push(f);t.push(new UA(c,o,u))}}else{let a=new DZ(e.sliceDoc(o.from,o.to)),c;for(let u of o.result.options)(c=a.match(u.label))&&(u.boost!=null&&(c[0]+=u.boost),t.push(new UA(u,o,c)))}let s=[],r=null,l=e.facet(rr).compareCompletions;for(let o of t.sort((a,c)=>c.match[0]-a.match[0]||l(a.completion,c.completion)))!r||r.label!=o.completion.label||r.detail!=o.completion.detail||r.type!=null&&o.completion.type!=null&&r.type!=o.completion.type||r.apply!=o.completion.apply?s.push(o):HA(o.completion)>HA(r)&&(s[s.length-1]=o),r=o.completion;return s}class Ea{constructor(e,t,i,s,r,l){this.options=e,this.attrs=t,this.tooltip=i,this.timestamp=s,this.selected=r,this.disabled=l}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new Ea(this.options,qA(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,i,s,r){let l=LZ(e,t);if(!l.length)return s&&e.some(a=>a.state==1)?new Ea(s.options,s.attrs,s.tooltip,s.timestamp,s.selected,!0):null;let o=t.facet(rr).selectOnOpen?0:-1;if(s&&s.selected!=o&&s.selected!=-1){let a=s.options[s.selected].completion;for(let c=0;c<l.length;c++)if(l[c].completion==a){o=c;break}}return new Ea(l,qA(i,o),{pos:e.reduce((a,c)=>c.hasResult()?Math.min(a,c.from):a,1e8),create:MZ(Ys),above:r.aboveCursor},s?s.timestamp:Date.now(),o,!1)}map(e){return new Ea(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class Wd{constructor(e,t,i){this.active=e,this.id=t,this.open=i}static start(){return new Wd(WZ,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,i=t.facet(rr),r=(i.override||t.languageDataAt("autocomplete",Fl(t)).map(RZ)).map(o=>(this.active.find(c=>c.source==o)||new Ns(o,this.active.some(c=>c.state!=0)?1:0)).update(e,i));r.length==this.active.length&&r.every((o,a)=>o==this.active[a])&&(r=this.active);let l=this.open;l&&e.docChanged&&(l=l.map(e.changes)),e.selection||r.some(o=>o.hasResult()&&e.changes.touchesRange(o.from,o.to))||!VZ(r,this.active)?l=Ea.build(r,t,this.id,l,i):l&&l.disabled&&!r.some(o=>o.state==1)&&(l=null),!l&&r.every(o=>o.state!=1)&&r.some(o=>o.hasResult())&&(r=r.map(o=>o.hasResult()?new Ns(o.source,0):o));for(let o of e.effects)o.is(GN)&&(l=l&&l.setSelected(o.value,this.id));return r==this.active&&l==this.open?this:new Wd(r,this.id,l)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:UZ}}function VZ(n,e){if(n==e)return!0;for(let t=0,i=0;;){for(;t<n.length&&!n[t].hasResult;)t++;for(;i<e.length&&!e[i].hasResult;)i++;let s=t==n.length,r=i==e.length;if(s||r)return s==r;if(n[t++].result!=e[i++].result)return!1}}const UZ={"aria-autocomplete":"list"};function qA(n,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":n};return e>-1&&(t["aria-activedescendant"]=n+"-"+e),t}const WZ=[];function m0(n){return n.isUserEvent("input.type")?"input":n.isUserEvent("delete.backward")?"delete":null}class Ns{constructor(e,t,i=-1){this.source=e,this.state=t,this.explicitPos=i}hasResult(){return!1}update(e,t){let i=m0(e),s=this;i?s=s.handleUserEvent(e,i,t):e.docChanged?s=s.handleChange(e):e.selection&&s.state!=0&&(s=new Ns(s.source,0));for(let r of e.effects)if(r.is(Tb))s=new Ns(s.source,1,r.value?Fl(e.state):-1);else if(r.is(Fd))s=new Ns(s.source,0);else if(r.is(zN))for(let l of r.value)l.source==s.source&&(s=l);return s}handleUserEvent(e,t,i){return t=="delete"||!i.activateOnTyping?this.map(e.changes):new Ns(this.source,1)}handleChange(e){return e.changes.touchesRange(Fl(e.startState))?new Ns(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new Ns(this.source,this.state,e.mapPos(this.explicitPos))}}class ou extends Ns{constructor(e,t,i,s,r){super(e,2,t),this.result=i,this.from=s,this.to=r}hasResult(){return!0}handleUserEvent(e,t,i){var s;let r=e.changes.mapPos(this.from),l=e.changes.mapPos(this.to,1),o=Fl(e.state);if((this.explicitPos<0?o<=r:o<this.from)||o>l||t=="delete"&&Fl(e.startState)==this.from)return new Ns(this.source,t=="input"&&i.activateOnTyping?1:0);let a=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos),c;return FZ(this.result.validFor,e.state,r,l)?new ou(this.source,a,this.result,r,l):this.result.update&&(c=this.result.update(this.result,r,l,new jN(e.state,o,a>=0)))?new ou(this.source,a,c,c.from,(s=c.to)!==null&&s!==void 0?s:Fl(e.state)):new Ns(this.source,1,a)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new Ns(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new ou(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}function FZ(n,e,t,i){if(!n)return!1;let s=e.sliceDoc(t,i);return typeof n=="function"?n(s,t,i,e):HN(n,!0).test(s)}const Tb=$t.define(),Fd=$t.define(),zN=$t.define({map(n,e){return n.map(t=>t.map(e))}}),GN=$t.define(),Ys=Vi.define({create(){return Wd.start()},update(n,e){return n.update(e)},provide:n=>[zm.from(n,e=>e.tooltip),wt.contentAttributes.from(n,e=>e.attrs)]});function oh(n,e="option"){return t=>{let i=t.state.field(Ys,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<t.state.facet(rr).interactionDelay)return!1;let s=1,r;e=="page"&&(r=CX(t,i.open.tooltip))&&(s=Math.max(2,Math.floor(r.dom.offsetHeight/r.dom.querySelector("li").offsetHeight)-1));let{length:l}=i.open.options,o=i.open.selected>-1?i.open.selected+s*(n?1:-1):n?0:l-1;return o<0?o=e=="page"?0:l-1:o>=l&&(o=e=="page"?l-1:0),t.dispatch({effects:GN.of(o)}),!0}}const jZ=n=>{let e=n.state.field(Ys,!1);return n.state.readOnly||!e||!e.open||e.open.selected<0||Date.now()-e.open.timestamp<n.state.facet(rr).interactionDelay?!1:(e.open.disabled||qN(n,e.open.options[e.open.selected]),!0)},HZ=n=>n.state.field(Ys,!1)?(n.dispatch({effects:Tb.of(!0)}),!0):!1,qZ=n=>{let e=n.state.field(Ys,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(n.dispatch({effects:Fd.of(null)}),!0)};class zZ{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const zA=50,GZ=50,KZ=1e3,QZ=ki.fromClass(class{constructor(n){this.view=n,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let e of n.state.field(Ys).active)e.state==1&&this.startQuery(e)}update(n){let e=n.state.field(Ys);if(!n.selectionSet&&!n.docChanged&&n.startState.field(Ys)==e)return;let t=n.transactions.some(i=>(i.selection||i.docChanged)&&!m0(i));for(let i=0;i<this.running.length;i++){let s=this.running[i];if(t||s.updates.length+n.transactions.length>GZ&&Date.now()-s.time>KZ){for(let r of s.context.abortListeners)try{r()}catch(l){Hs(this.view.state,l)}s.context.abortListeners=null,this.running.splice(i--,1)}else s.updates.push(...n.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=e.active.some(i=>i.state==1&&!this.running.some(s=>s.active.source==i.source))?setTimeout(()=>this.startUpdate(),zA):-1,this.composing!=0)for(let i of n.transactions)m0(i)=="input"?this.composing=2:this.composing==2&&i.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:n}=this.view,e=n.field(Ys);for(let t of e.active)t.state==1&&!this.running.some(i=>i.active.source==t.source)&&this.startQuery(t)}startQuery(n){let{state:e}=this.view,t=Fl(e),i=new jN(e,t,n.explicitPos==t),s=new zZ(n,i);this.running.push(s),Promise.resolve(n.source(i)).then(r=>{s.context.aborted||(s.done=r||null,this.scheduleAccept())},r=>{this.view.dispatch({effects:Fd.of(null)}),Hs(this.view.state,r)})}scheduleAccept(){this.running.every(n=>n.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),zA))}accept(){var n;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(rr);for(let i=0;i<this.running.length;i++){let s=this.running[i];if(s.done===void 0)continue;if(this.running.splice(i--,1),s.done){let l=new ou(s.active.source,s.active.explicitPos,s.done,s.done.from,(n=s.done.to)!==null&&n!==void 0?n:Fl(s.updates.length?s.updates[0].startState:this.view.state));for(let o of s.updates)l=l.update(o,t);if(l.hasResult()){e.push(l);continue}}let r=this.view.state.field(Ys).active.find(l=>l.source==s.active.source);if(r&&r.state==1)if(s.done==null){let l=new Ns(s.active.source,0);for(let o of s.updates)l=l.update(o,t);l.state!=1&&e.push(l)}else this.startQuery(r)}e.length&&this.view.dispatch({effects:zN.of(e)})}},{eventHandlers:{blur(){let n=this.view.state.field(Ys,!1);n&&n.tooltip&&this.view.state.facet(rr).closeOnBlur&&this.view.dispatch({effects:Fd.of(null)})},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Tb.of(!1)}),20),this.composing=0}}}),XZ=wt.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:`${400}px`,boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:`${30}px`},".cm-completionInfo.cm-completionInfo-right-narrow":{left:`${30}px`},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),Gu={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Eo=$t.define({map(n,e){let t=e.mapPos(n,-1,ys.TrackAfter);return t??void 0}}),Ib=$t.define({map(n,e){return e.mapPos(n)}}),Ob=new class extends Go{};Ob.startSide=1;Ob.endSide=-1;const KN=Vi.define({create(){return In.empty},update(n,e){if(e.selection){let t=e.state.doc.lineAt(e.selection.main.head).from,i=e.startState.doc.lineAt(e.startState.selection.main.head).from;t!=e.changes.mapPos(i,-1)&&(n=In.empty)}n=n.map(e.changes);for(let t of e.effects)t.is(Eo)?n=n.update({add:[Ob.range(t.value,t.value+1)]}):t.is(Ib)&&(n=n.update({filter:i=>i!=t.value}));return n}});function YZ(){return[ZZ,KN]}const $p="()[]{}<>";function QN(n){for(let e=0;e<$p.length;e+=2)if($p.charCodeAt(e)==n)return $p.charAt(e+1);return $v(n<128?n:n+1)}function XN(n,e){return n.languageDataAt("closeBrackets",e)[0]||Gu}const JZ=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),ZZ=wt.inputHandler.of((n,e,t,i)=>{if((JZ?n.composing:n.compositionStarted)||n.state.readOnly)return!1;let s=n.state.selection.main;if(i.length>2||i.length==2&&xs(Qi(i,0))==1||e!=s.from||t!=s.to)return!1;let r=ex(n.state,i);return r?(n.dispatch(r),!0):!1}),xZ=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let i=XN(n,n.selection.main.head).brackets||Gu.brackets,s=null,r=n.changeByRange(l=>{if(l.empty){let o=tx(n.doc,l.head);for(let a of i)if(a==o&&ep(n.doc,l.head)==QN(Qi(a,0)))return{changes:{from:l.head-a.length,to:l.head+a.length},range:Je.cursor(l.head-a.length)}}return{range:s=l}});return s||e(n.update(r,{scrollIntoView:!0,userEvent:"delete.backward"})),!s},$Z=[{key:"Backspace",run:xZ}];function ex(n,e){let t=XN(n,n.selection.main.head),i=t.brackets||Gu.brackets;for(let s of i){let r=QN(Qi(s,0));if(e==s)return r==s?sx(n,s,i.indexOf(s+s+s)>-1,t):nx(n,s,r,t.before||Gu.before);if(e==r&&YN(n,n.selection.main.from))return ix(n,s,r)}return null}function YN(n,e){let t=!1;return n.field(KN).between(0,n.doc.length,i=>{i==e&&(t=!0)}),t}function ep(n,e){let t=n.sliceString(e,e+2);return t.slice(0,xs(Qi(t,0)))}function tx(n,e){let t=n.sliceString(e-2,e);return xs(Qi(t,0))==t.length?t:t.slice(1)}function nx(n,e,t,i){let s=null,r=n.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:t,from:l.to}],effects:Eo.of(l.to+e.length),range:Je.range(l.anchor+e.length,l.head+e.length)};let o=ep(n.doc,l.head);return!o||/\s/.test(o)||i.indexOf(o)>-1?{changes:{insert:e+t,from:l.head},effects:Eo.of(l.head+e.length),range:Je.cursor(l.head+e.length)}:{range:s=l}});return s?null:n.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function ix(n,e,t){let i=null,s=n.selection.ranges.map(r=>r.empty&&ep(n.doc,r.head)==t?Je.cursor(r.head+t.length):i=r);return i?null:n.update({selection:Je.create(s,n.selection.mainIndex),scrollIntoView:!0,effects:n.selection.ranges.map(({from:r})=>Ib.of(r))})}function sx(n,e,t,i){let s=i.stringPrefixes||Gu.stringPrefixes,r=null,l=n.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:e,from:o.to}],effects:Eo.of(o.to+e.length),range:Je.range(o.anchor+e.length,o.head+e.length)};let a=o.head,c=ep(n.doc,a),u;if(c==e){if(GA(n,a))return{changes:{insert:e+e,from:a},effects:Eo.of(a+e.length),range:Je.cursor(a+e.length)};if(YN(n,a)){let f=t&&n.sliceDoc(a,a+e.length*3)==e+e+e;return{range:Je.cursor(a+e.length*(f?3:1)),effects:Ib.of(a)}}}else{if(t&&n.sliceDoc(a-2*e.length,a)==e+e&&(u=KA(n,a-2*e.length,s))>-1&&GA(n,u))return{changes:{insert:e+e+e+e,from:a},effects:Eo.of(a+e.length),range:Je.cursor(a+e.length)};if(n.charCategorizer(a)(c)!=ti.Word&&KA(n,a,s)>-1&&!rx(n,a,e,s))return{changes:{insert:e+e,from:a},effects:Eo.of(a+e.length),range:Je.cursor(a+e.length)}}return{range:r=o}});return r?null:n.update(l,{scrollIntoView:!0,userEvent:"input.type"})}function GA(n,e){let t=ms(n).resolveInner(e+1);return t.parent&&t.from==e}function rx(n,e,t,i){let s=ms(n).resolveInner(e,-1),r=i.reduce((l,o)=>Math.max(l,o.length),0);for(let l=0;l<5;l++){let o=n.sliceDoc(s.from,Math.min(s.to,s.from+t.length+r)),a=o.indexOf(t);if(!a||a>-1&&i.indexOf(o.slice(0,a))>-1){let u=s.firstChild;for(;u&&u.from==s.from&&u.to-u.from>t.length+a;){if(n.sliceDoc(u.to-t.length,u.to)==t)return!1;u=u.firstChild}return!0}let c=s.to==e&&s.parent;if(!c)break;s=c}return!1}function KA(n,e,t){let i=n.charCategorizer(e);if(i(n.sliceDoc(e-1,e))!=ti.Word)return e;for(let s of t){let r=e-s.length;if(n.sliceDoc(r,e)==s&&i(n.sliceDoc(r-1,r))!=ti.Word)return r}return-1}function lx(n={}){return[Ys,rr.of(n),QZ,ox,XZ]}const JN=[{key:"Ctrl-Space",run:HZ},{key:"Escape",run:qZ},{key:"ArrowDown",run:oh(!0)},{key:"ArrowUp",run:oh(!1)},{key:"PageDown",run:oh(!0,"page")},{key:"PageUp",run:oh(!1,"page")},{key:"Enter",run:jZ}],ox=Sc.highest(qm.computeN([rr],n=>n.facet(rr).defaultKeymap?[JN]:[]));class ax{constructor(e,t,i){this.from=e,this.to=t,this.diagnostic=i}}class po{constructor(e,t,i){this.diagnostics=e,this.panel=t,this.selected=i}static init(e,t,i){let s=e,r=i.facet(Ao).markerFilter;r&&(s=r(s));let l=Lt.set(s.map(o=>o.from==o.to||o.from==o.to-1&&i.doc.lineAt(o.from).to==o.from?Lt.widget({widget:new vx(o),diagnostic:o}).range(o.from):Lt.mark({attributes:{class:"cm-lintRange cm-lintRange-"+o.severity},diagnostic:o}).range(o.from,o.to)),!0);return new po(l,t,ic(l))}}function ic(n,e=null,t=0){let i=null;return n.between(t,1e9,(s,r,{spec:l})=>{if(!(e&&l.diagnostic!=e))return i=new ax(s,r,l.diagnostic),!1}),i}function ZN(n,e){return!!(n.effects.some(t=>t.is(tp))||n.changes.touchesRange(e.pos))}function xN(n,e){return n.field(Fs,!1)?e:e.concat($t.appendConfig.of([Fs,wt.decorations.compute([Fs],t=>{let{selected:i,panel:s}=t.field(Fs);return!i||!s||i.from==i.to?Lt.none:Lt.set([ux.range(i.from,i.to)])}),wX(fx,{hideOn:ZN}),bx]))}function cx(n,e){return{effects:xN(n,[tp.of(e)])}}const tp=$t.define(),Rb=$t.define(),$N=$t.define(),Fs=Vi.define({create(){return new po(Lt.none,null,null)},update(n,e){if(e.docChanged){let t=n.diagnostics.map(e.changes),i=null;if(n.selected){let s=e.changes.mapPos(n.selected.from,1);i=ic(t,n.selected.diagnostic,s)||ic(t,null,s)}n=new po(t,n.panel,i)}for(let t of e.effects)t.is(tp)?n=po.init(t.value,n.panel,e.state):t.is(Rb)?n=new po(n.diagnostics,t.value?np.open:null,n.selected):t.is($N)&&(n=new po(n.diagnostics,n.panel,t.value));return n},provide:n=>[Hu.from(n,e=>e.panel),wt.decorations.from(n,e=>e.diagnostics)]}),ux=Lt.mark({class:"cm-lintRange cm-lintRange-active"});function fx(n,e,t){let{diagnostics:i}=n.state.field(Fs),s=[],r=2e8,l=0;i.between(e-(t<0?1:0),e+(t>0?1:0),(a,c,{spec:u})=>{e>=a&&e<=c&&(a==c||(e>a||t>0)&&(e<c||t<0))&&(s.push(u.diagnostic),r=Math.min(a,r),l=Math.max(c,l))});let o=n.state.facet(Ao).tooltipFilter;return o&&(s=o(s)),s.length?{pos:r,end:l,above:n.state.doc.lineAt(r).to<l,create(){return{dom:e5(n,s)}}}:null}function e5(n,e){return Fn("ul",{class:"cm-tooltip-lint"},e.map(t=>n5(n,t,!1)))}const hx=n=>{let e=n.state.field(Fs,!1);(!e||!e.panel)&&n.dispatch({effects:xN(n.state,[Rb.of(!0)])});let t=ju(n,np.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},QA=n=>{let e=n.state.field(Fs,!1);return!e||!e.panel?!1:(n.dispatch({effects:Rb.of(!1)}),!0)},dx=n=>{let e=n.state.field(Fs,!1);if(!e)return!1;let t=n.state.selection.main,i=e.diagnostics.iter(t.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==t.from&&i.to==t.to)?!1:(n.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},mx=[{key:"Mod-Shift-m",run:hx,preventDefault:!0},{key:"F8",run:dx}],px=ki.fromClass(class{constructor(n){this.view=n,this.timeout=-1,this.set=!0;let{delay:e}=n.state.facet(Ao);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){let n=Date.now();if(n<this.lintTime-10)setTimeout(this.run,this.lintTime-n);else{this.set=!1;let{state:e}=this.view,{sources:t}=e.facet(Ao);Promise.all(t.map(i=>Promise.resolve(i(this.view)))).then(i=>{let s=i.reduce((r,l)=>r.concat(l));this.view.state.doc==e.doc&&this.view.dispatch(cx(this.view.state,s))},i=>{Hs(this.view.state,i)})}}update(n){let e=n.state.facet(Ao);(n.docChanged||e!=n.startState.facet(Ao))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),Ao=kt.define({combine(n){return Object.assign({sources:n.map(e=>e.source)},Er(n.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null}))},enables:px});function gx(n,e={}){return Ao.of({source:n,config:e})}function t5(n){let e=[];if(n)e:for(let{name:t}of n){for(let i=0;i<t.length;i++){let s=t[i];if(/[a-zA-Z]/.test(s)&&!e.some(r=>r.toLowerCase()==s.toLowerCase())){e.push(s);continue e}}e.push("")}return e}function n5(n,e,t){var i;let s=t?t5(e.actions):[];return Fn("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},Fn("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(i=e.actions)===null||i===void 0?void 0:i.map((r,l)=>{let o=!1,a=h=>{if(h.preventDefault(),o)return;o=!0;let d=ic(n.state.field(Fs).diagnostics,e);d&&r.apply(n,d.from,d.to)},{name:c}=r,u=s[l]?c.indexOf(s[l]):-1,f=u<0?c:[c.slice(0,u),Fn("u",c.slice(u,u+1)),c.slice(u+1)];return Fn("button",{type:"button",class:"cm-diagnosticAction",onclick:a,onmousedown:a,"aria-label":` Action: ${c}${u<0?"":` (access key "${s[l]})"`}.`},f)}),e.source&&Fn("div",{class:"cm-diagnosticSource"},e.source))}class vx extends no{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return Fn("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class XA{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=n5(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class np{constructor(e){this.view=e,this.items=[];let t=s=>{if(s.keyCode==27)QA(this.view),this.view.focus();else if(s.keyCode==38||s.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(s.keyCode==40||s.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(s.keyCode==36)this.moveSelection(0);else if(s.keyCode==35)this.moveSelection(this.items.length-1);else if(s.keyCode==13)this.view.focus();else if(s.keyCode>=65&&s.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:r}=this.items[this.selectedIndex],l=t5(r.actions);for(let o=0;o<l.length;o++)if(l[o].toUpperCase().charCodeAt(0)==s.keyCode){let a=ic(this.view.state.field(Fs).diagnostics,r);a&&r.actions[o].apply(e,a.from,a.to)}}else return;s.preventDefault()},i=s=>{for(let r=0;r<this.items.length;r++)this.items[r].dom.contains(s.target)&&this.moveSelection(r)};this.list=Fn("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:i}),this.dom=Fn("div",{class:"cm-panel-lint"},this.list,Fn("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>QA(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(Fs).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(Fs),i=0,s=!1,r=null;for(e.between(0,this.view.state.doc.length,(l,o,{spec:a})=>{let c=-1,u;for(let f=i;f<this.items.length;f++)if(this.items[f].diagnostic==a.diagnostic){c=f;break}c<0?(u=new XA(this.view,a.diagnostic),this.items.splice(i,0,u),s=!0):(u=this.items[c],c>i&&(this.items.splice(i,c-i),s=!0)),t&&u.diagnostic==t.diagnostic?u.dom.hasAttribute("aria-selected")||(u.dom.setAttribute("aria-selected","true"),r=u):u.dom.hasAttribute("aria-selected")&&u.dom.removeAttribute("aria-selected"),i++});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)s=!0,this.items.pop();this.items.length==0&&(this.items.push(new XA(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),s=!0),r?(this.list.setAttribute("aria-activedescendant",r.id),this.view.requestMeasure({key:this,read:()=>({sel:r.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:l,panel:o})=>{l.top<o.top?this.list.scrollTop-=o.top-l.top:l.bottom>o.bottom&&(this.list.scrollTop+=l.bottom-o.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),s&&this.sync()}sync(){let e=this.list.firstChild;function t(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)t();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(Fs),i=ic(t.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:$N.of(i)})}static open(e){return new np(e)}}function Oh(n,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(n)}</svg>')`}function eg(n){return Oh(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${n}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const bx=wt.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:eg("#d11")},".cm-lintRange-warning":{backgroundImage:eg("orange")},".cm-lintRange-info":{backgroundImage:eg("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});class _x extends Kr{constructor(e){super(),this.diagnostics=e,this.severity=e.reduce((t,i)=>{let s=i.severity;return s=="error"||s=="warning"&&t=="info"?s:t},"info")}toDOM(e){let t=document.createElement("div");t.className="cm-lint-marker cm-lint-marker-"+this.severity;let i=this.diagnostics,s=e.state.facet(ip).tooltipFilter;return s&&(i=s(i)),i.length&&(t.onmouseover=()=>Sx(e,t,i)),t}}function yx(n,e){let t=i=>{let s=e.getBoundingClientRect();if(!(i.clientX>s.left-10&&i.clientX<s.right+10&&i.clientY>s.top-10&&i.clientY<s.bottom+10)){for(let r=i.target;r;r=r.parentNode)if(r.nodeType==1&&r.classList.contains("cm-tooltip-lint"))return;window.removeEventListener("mousemove",t),n.state.field(s5)&&n.dispatch({effects:Db.of(null)})}};window.addEventListener("mousemove",t)}function Sx(n,e,t){function i(){let l=n.elementAtHeight(e.getBoundingClientRect().top+5-n.documentTop);n.coordsAtPos(l.from)&&n.dispatch({effects:Db.of({pos:l.from,above:!1,create(){return{dom:e5(n,t),getCoords:()=>e.getBoundingClientRect()}}})}),e.onmouseout=e.onmousemove=null,yx(n,e)}let{hoverTime:s}=n.state.facet(ip),r=setTimeout(i,s);e.onmouseout=()=>{clearTimeout(r),e.onmouseout=e.onmousemove=null},e.onmousemove=()=>{clearTimeout(r),r=setTimeout(i,s)}}function Ex(n,e){let t=Object.create(null);for(let s of e){let r=n.lineAt(s.from);(t[r.from]||(t[r.from]=[])).push(s)}let i=[];for(let s in t)i.push(new _x(t[s]).range(+s));return In.of(i,!0)}const Ax=RD({class:"cm-gutter-lint",markers:n=>n.state.field(i5)}),i5=Vi.define({create(){return In.empty},update(n,e){n=n.map(e.changes);let t=e.state.facet(ip).markerFilter;for(let i of e.effects)if(i.is(tp)){let s=i.value;t&&(s=t(s||[])),n=Ex(e.state.doc,s.slice(0))}return n}}),Db=$t.define(),s5=Vi.define({create(){return null},update(n,e){return n&&e.docChanged&&(n=ZN(e,n)?null:Object.assign(Object.assign({},n),{pos:e.changes.mapPos(n.pos)})),e.effects.reduce((t,i)=>i.is(Db)?i.value:t,n)},provide:n=>zm.from(n)}),wx=wt.baseTheme({".cm-gutter-lint":{width:"1.4em","& .cm-gutterElement":{padding:".2em"}},".cm-lint-marker":{width:"1em",height:"1em"},".cm-lint-marker-info":{content:Oh('<path fill="#aaf" stroke="#77e" stroke-width="6" stroke-linejoin="round" d="M5 5L35 5L35 35L5 35Z"/>')},".cm-lint-marker-warning":{content:Oh('<path fill="#fe8" stroke="#fd7" stroke-width="6" stroke-linejoin="round" d="M20 6L37 35L3 35Z"/>')},".cm-lint-marker-error":{content:Oh('<circle cx="20" cy="20" r="15" fill="#f87" stroke="#f43" stroke-width="6"/>')}}),ip=kt.define({combine(n){return Er(n,{hoverTime:300,markerFilter:null,tooltipFilter:null})}});function Cx(n={}){return[ip.of(n),i5,Ax,wx,s5]}const kx=(()=>[PX(),LX(),nX(),ZY(),AY(),GQ(),JQ(),ln.allowMultipleSelections.of(!0),uY(),xD(TY,{fallback:!0}),MY(),YZ(),lx(),mX(),vX(),aX(),iZ(),qm.of([...$Z,...ZJ,...AZ,...aJ,...yY,...JN,...mx])])();class jd{constructor(e,t,i,s,r,l,o,a,c,u=0,f){this.p=e,this.stack=t,this.state=i,this.reducePos=s,this.pos=r,this.score=l,this.buffer=o,this.bufferBase=a,this.curContext=c,this.lookAhead=u,this.parent=f}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,i=0){let s=e.parser.context;return new jd(e,[],t,i,i,0,[],0,s?new YA(s,s.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let i=e>>19,s=e&65535,{parser:r}=this.p,l=r.dynamicPrecedence(s);if(l&&(this.score+=l),i==0){this.pushState(r.getGoto(this.state,s,!0),this.reducePos),s<r.minRepeatTerm&&this.storeNode(s,this.reducePos,this.reducePos,4,!0),this.reduceContext(s,this.reducePos);return}let o=this.stack.length-(i-1)*3-(e&262144?6:0),a=o?this.stack[o-2]:this.p.ranges[0].from,c=this.reducePos-a;c>=2e3&&!(!((t=this.p.parser.nodeSet.types[s])===null||t===void 0)&&t.isAnonymous)&&(a==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=c):this.p.lastBigReductionSize<c&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=a,this.p.lastBigReductionSize=c));let u=o?this.stack[o-1]:0,f=this.bufferBase+this.buffer.length-u;if(s<r.minRepeatTerm||e&131072){let h=r.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(s,a,h,f+4,!0)}if(e&262144)this.state=this.stack[o];else{let h=this.stack[o-3];this.state=r.getGoto(h,s,!0)}for(;this.stack.length>o;)this.stack.pop();this.reduceContext(s,a)}storeNode(e,t,i,s=4,r=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let l=this,o=this.buffer.length;if(o==0&&l.parent&&(o=l.bufferBase-l.parent.bufferBase,l=l.parent),o>0&&l.buffer[o-4]==0&&l.buffer[o-1]>-1){if(t==i)return;if(l.buffer[o-2]>=t){l.buffer[o-2]=i;return}}}if(!r||this.pos==i)this.buffer.push(e,t,i,s);else{let l=this.buffer.length;if(l>0&&this.buffer[l-4]!=0)for(;l>0&&this.buffer[l-2]>i;)this.buffer[l]=this.buffer[l-4],this.buffer[l+1]=this.buffer[l-3],this.buffer[l+2]=this.buffer[l-2],this.buffer[l+3]=this.buffer[l-1],l-=4,s>4&&(s-=4);this.buffer[l]=e,this.buffer[l+1]=t,this.buffer[l+2]=i,this.buffer[l+3]=s}}shift(e,t,i){let s=this.pos;if(e&131072)this.pushState(e&65535,this.pos);else if(e&262144)this.pos=i,this.shiftContext(t,s),t<=this.p.parser.maxNode&&this.buffer.push(t,s,i,4);else{let r=e,{parser:l}=this.p;(i>this.pos||t<=l.maxNode)&&(this.pos=i,l.stateFlag(r,1)||(this.reducePos=i)),this.pushState(r,s),this.shiftContext(t,s),t<=l.maxNode&&this.buffer.push(t,s,i,4)}}apply(e,t,i){e&65536?this.reduce(e):this.shift(e,t,i)}useNode(e,t){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let s=this.pos;this.reducePos=this.pos=s+e.length,this.pushState(t,s),this.buffer.push(i,s,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let i=e.buffer.slice(t),s=e.bufferBase+t;for(;e&&s==e.bufferBase;)e=e.parent;return new jd(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,s,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,i?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new Tx(this);;){let i=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(i==0)return!1;if(!(i&65536))return!0;t.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>4<<1||this.stack.length>=120){let s=[];for(let r=0,l;r<t.length;r+=2)(l=t[r+1])!=this.state&&this.p.parser.hasAction(l,e)&&s.push(t[r],l);if(this.stack.length<120)for(let r=0;s.length<4<<1&&r<t.length;r+=2){let l=t[r+1];s.some((o,a)=>a&1&&o==l)||s.push(t[r],l)}t=s}let i=[];for(let s=0;s<t.length&&i.length<4;s+=2){let r=t[s+1];if(r==this.state)continue;let l=this.split();l.pushState(r,this.pos),l.storeNode(0,l.pos,l.pos,4,!0),l.shiftContext(t[s],this.pos),l.score-=200,i.push(l)}return i}forceReduce(){let e=this.p.parser.stateSlot(this.state,5);if(!(e&65536))return!1;let{parser:t}=this.p;if(!t.validAction(this.state,e)){let i=e>>19,s=e&65535,r=this.stack.length-i*3;if(r<0||t.getGoto(this.stack[r],s,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(e),!0}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new YA(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class YA{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}var JA;(function(n){n[n.Insert=200]="Insert",n[n.Delete=190]="Delete",n[n.Reduce=100]="Reduce",n[n.MaxNext=4]="MaxNext",n[n.MaxInsertStackDepth=300]="MaxInsertStackDepth",n[n.DampenInsertStackDepth=120]="DampenInsertStackDepth",n[n.MinBigReduction=2e3]="MinBigReduction"})(JA||(JA={}));class Tx{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,i=e>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let s=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=s}}class Hd{constructor(e,t,i){this.stack=e,this.pos=t,this.index=i,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new Hd(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new Hd(this.stack,this.pos,this.index)}}function ah(n,e=Uint16Array){if(typeof n!="string")return n;let t=null;for(let i=0,s=0;i<n.length;){let r=0;for(;;){let l=n.charCodeAt(i++),o=!1;if(l==126){r=65535;break}l>=92&&l--,l>=34&&l--;let a=l-32;if(a>=46&&(a-=46,o=!0),r+=a,o)break;r*=46}t?t[s++]=r:t=new e(r)}return t}class Rh{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const ZA=new Rh;class Ix{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=ZA,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let i=this.range,s=this.rangeIndex,r=this.pos+e;for(;r<i.from;){if(!s)return null;let l=this.ranges[--s];r-=i.from-l.to,i=l}for(;t<0?r>i.to:r>=i.to;){if(s==this.ranges.length-1)return null;let l=this.ranges[++s];r+=l.from-i.to,i=l}return r}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,i,s;if(t>=0&&t<this.chunk.length)i=this.pos+e,s=this.chunk.charCodeAt(t);else{let r=this.resolveOffset(e,1);if(r==null)return-1;if(i=r,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)s=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let l=this.rangeIndex,o=this.range;for(;o.to<=i;)o=this.ranges[++l];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>o.to&&(this.chunk2=this.chunk2.slice(0,o.to-i)),s=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),s}acceptToken(e,t=0){let i=t?this.resolveOffset(t,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=ZA,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let i="";for(let s of this.ranges){if(s.from>=t)break;s.to>e&&(i+=this.input.read(Math.max(s.from,e),Math.min(s.to,t)))}return i}}class Na{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:i}=t.p;Ox(this.data,e,t,this.id,i.data,i.tokenPrecTable)}}Na.prototype.contextual=Na.prototype.fallback=Na.prototype.extend=!1;Na.prototype.fallback=Na.prototype.extend=!1;function Ox(n,e,t,i,s,r){let l=0,o=1<<i,{dialect:a}=t.p.parser;e:for(;o&n[l];){let c=n[l+1];for(let d=l+3;d<c;d+=2)if((n[d+1]&o)>0){let p=n[d];if(a.allows(p)&&(e.token.value==-1||e.token.value==p||Rx(p,e.token.value,s,r))){e.acceptToken(p);break}}let u=e.next,f=0,h=n[l+2];if(e.next<0&&h>f&&n[c+h*3-3]==65535&&n[c+h*3-3]==65535){l=n[c+h*3-1];continue e}for(;f<h;){let d=f+h>>1,p=c+d+(d<<1),v=n[p],y=n[p+1]||65536;if(u<v)h=d;else if(u>=y)f=d+1;else{l=n[p+2],e.advance();continue e}}break}}function xA(n,e,t){for(let i=e,s;(s=n[i])!=65535;i++)if(s==t)return i-e;return-1}function Rx(n,e,t,i){let s=xA(t,i,e);return s<0||xA(t,i,n)<s}const ur=typeof process<"u"&&process.env&&/\bparse\b/.test({}.LOG);let tg=null;var $A;(function(n){n[n.Margin=25]="Margin"})($A||($A={}));function ew(n,e,t){let i=n.cursor(Yi.IncludeAnonymous);for(i.moveTo(e);;)if(!(t<0?i.childBefore(e):i.childAfter(e)))for(;;){if((t<0?i.to<e:i.from>e)&&!i.type.isError)return t<0?Math.max(0,Math.min(i.to-1,e-25)):Math.min(n.length,Math.max(i.from+1,e+25));if(t<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return t<0?0:n.length}}class Dx{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?ew(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?ew(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let i=this.trees[t],s=this.index[t];if(s==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let r=i.children[s],l=this.start[t]+i.positions[s];if(l>e)return this.nextStart=l,null;if(r instanceof wi){if(l==e){if(l<this.safeFrom)return null;let o=l+r.length;if(o<=this.safeTo){let a=r.prop(rn.lookAhead);if(!a||o+a<this.fragment.to)return r}}this.index[t]++,l+r.length>=Math.max(this.safeFrom,e)&&(this.trees.push(r),this.start.push(l),this.index.push(0))}else this.index[t]++,this.nextStart=l+r.length}}}class Nx{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(i=>new Rh)}getActions(e){let t=0,i=null,{parser:s}=e.p,{tokenizers:r}=s,l=s.stateSlot(e.state,3),o=e.curContext?e.curContext.hash:0,a=0;for(let c=0;c<r.length;c++){if(!(1<<c&l))continue;let u=r[c],f=this.tokens[c];if(!(i&&!u.fallback)&&((u.contextual||f.start!=e.pos||f.mask!=l||f.context!=o)&&(this.updateCachedToken(f,u,e),f.mask=l,f.context=o),f.lookAhead>f.end+25&&(a=Math.max(f.lookAhead,a)),f.value!=0)){let h=t;if(f.extended>-1&&(t=this.addActions(e,f.extended,f.end,t)),t=this.addActions(e,f.value,f.end,t),!u.extend&&(i=f,t>h))break}}for(;this.actions.length>t;)this.actions.pop();return a&&e.setLookAhead(a),!i&&e.pos==this.stream.end&&(i=new Rh,i.value=e.p.parser.eofTerm,i.start=i.end=e.pos,t=this.addActions(e,i.value,i.end,t)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new Rh,{pos:i,p:s}=e;return t.start=i,t.end=Math.min(i+1,s.stream.end),t.value=i==s.stream.end?s.parser.eofTerm:0,t}updateCachedToken(e,t,i){let s=this.stream.clipPos(i.pos);if(t.token(this.stream.reset(s,e),i),e.value>-1){let{parser:r}=i.p;for(let l=0;l<r.specialized.length;l++)if(r.specialized[l]==e.value){let o=r.specializers[l](this.stream.read(e.start,e.end),i);if(o>=0&&i.p.parser.dialect.allows(o>>1)){o&1?e.extended=o>>1:e.value=o>>1;break}}}else e.value=0,e.end=this.stream.clipPos(s+1)}putAction(e,t,i,s){for(let r=0;r<s;r+=3)if(this.actions[r]==e)return s;return this.actions[s++]=e,this.actions[s++]=t,this.actions[s++]=i,s}addActions(e,t,i,s){let{state:r}=e,{parser:l}=e.p,{data:o}=l;for(let a=0;a<2;a++)for(let c=l.stateSlot(r,a?2:1);;c+=3){if(o[c]==65535)if(o[c+1]==1)c=xr(o,c+2);else{s==0&&o[c+1]==2&&(s=this.putAction(xr(o,c+2),t,i,s));break}o[c]==t&&(s=this.putAction(xr(o,c+1),t,i,s))}return s}}var tw;(function(n){n[n.Distance=5]="Distance",n[n.MaxRemainingPerStep=3]="MaxRemainingPerStep",n[n.MinBufferLengthPrune=500]="MinBufferLengthPrune",n[n.ForceReduceLimit=10]="ForceReduceLimit",n[n.CutDepth=15e3]="CutDepth",n[n.CutTo=9e3]="CutTo",n[n.MaxLeftAssociativeReductionCount=300]="MaxLeftAssociativeReductionCount",n[n.MaxStackCount=12]="MaxStackCount"})(tw||(tw={}));class Px{constructor(e,t,i,s){this.parser=e,this.input=t,this.ranges=s,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new Ix(t,s),this.tokens=new Nx(e,this.stream),this.topTerm=e.top[1];let{from:r}=s[0];this.stacks=[jd.start(this,e.top[0],r)],this.fragments=i.length&&this.stream.end-r>e.bufferLength*4?new Dx(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,i=this.stacks=[],s,r;if(this.bigReductionCount>300&&e.length==1){let[l]=e;for(;l.forceReduce()&&l.stack.length&&l.stack[l.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let l=0;l<e.length;l++){let o=e[l];for(;;){if(this.tokens.mainToken=null,o.pos>t)i.push(o);else{if(this.advanceStack(o,i,e))continue;{s||(s=[],r=[]),s.push(o);let a=this.tokens.getMainToken(o);r.push(a.value,a.end)}}break}}if(!i.length){let l=s&&Bx(s);if(l)return this.stackToTree(l);if(this.parser.strict)throw ur&&s&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&s){let l=this.stoppedAt!=null&&s[0].pos>this.stoppedAt?s[0]:this.runRecovery(s,r,i);if(l)return this.stackToTree(l.forceAll())}if(this.recovering){let l=this.recovering==1?1:this.recovering*3;if(i.length>l)for(i.sort((o,a)=>a.score-o.score);i.length>l;)i.pop();i.some(o=>o.reducePos>t)&&this.recovering--}else if(i.length>1){e:for(let l=0;l<i.length-1;l++){let o=i[l];for(let a=l+1;a<i.length;a++){let c=i[a];if(o.sameState(c)||o.buffer.length>500&&c.buffer.length>500)if((o.score-c.score||o.buffer.length-c.buffer.length)>0)i.splice(a--,1);else{i.splice(l--,1);continue e}}}i.length>12&&i.splice(12,i.length-12)}this.minStackPos=i[0].pos;for(let l=1;l<i.length;l++)i[l].pos<this.minStackPos&&(this.minStackPos=i[l].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,i){let s=e.pos,{parser:r}=this,l=ur?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&s>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let c=e.curContext&&e.curContext.tracker.strict,u=c?e.curContext.hash:0;for(let f=this.fragments.nodeAt(s);f;){let h=this.parser.nodeSet.types[f.type.id]==f.type?r.getGoto(e.state,f.type.id):-1;if(h>-1&&f.length&&(!c||(f.prop(rn.contextHash)||0)==u))return e.useNode(f,h),ur&&console.log(l+this.stackID(e)+` (via reuse of ${r.getName(f.type.id)})`),!0;if(!(f instanceof wi)||f.children.length==0||f.positions[0]>0)break;let d=f.children[0];if(d instanceof wi&&f.positions[0]==0)f=d;else break}}let o=r.stateSlot(e.state,4);if(o>0)return e.reduce(o),ur&&console.log(l+this.stackID(e)+` (via always-reduce ${r.getName(o&65535)})`),!0;if(e.stack.length>=15e3)for(;e.stack.length>9e3&&e.forceReduce(););let a=this.tokens.getActions(e);for(let c=0;c<a.length;){let u=a[c++],f=a[c++],h=a[c++],d=c==a.length||!i,p=d?e:e.split();if(p.apply(u,f,h),ur&&console.log(l+this.stackID(p)+` (via ${u&65536?`reduce of ${r.getName(u&65535)}`:"shift"} for ${r.getName(f)} @ ${s}${p==e?"":", split"})`),d)return!0;p.pos>s?t.push(p):i.push(p)}return!1}advanceFully(e,t){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return nw(e,t),!0}}runRecovery(e,t,i){let s=null,r=!1;for(let l=0;l<e.length;l++){let o=e[l],a=t[l<<1],c=t[(l<<1)+1],u=ur?this.stackID(o)+" -> ":"";if(o.deadEnd&&(r||(r=!0,o.restart(),ur&&console.log(u+this.stackID(o)+" (restarted)"),this.advanceFully(o,i))))continue;let f=o.split(),h=u;for(let d=0;f.forceReduce()&&d<10&&(ur&&console.log(h+this.stackID(f)+" (via force-reduce)"),!this.advanceFully(f,i));d++)ur&&(h=this.stackID(f)+" -> ");for(let d of o.recoverByInsert(a))ur&&console.log(u+this.stackID(d)+" (via recover-insert)"),this.advanceFully(d,i);this.stream.end>o.pos?(c==o.pos&&(c++,a=0),o.recoverByDelete(a,c),ur&&console.log(u+this.stackID(o)+` (via recover-delete ${this.parser.getName(a)})`),nw(o,i)):(!s||s.score<o.score)&&(s=o)}return s}stackToTree(e){return e.close(),wi.build({buffer:Hd.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(tg||(tg=new WeakMap)).get(e);return t||tg.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function nw(n,e){for(let t=0;t<e.length;t++){let i=e[t];if(i.pos==n.pos&&i.sameState(n)){e[t].score<n.score&&(e[t]=n);return}}e.push(n)}class Mx{constructor(e,t,i){this.source=e,this.flags=t,this.disabled=i}allows(e){return!this.disabled||this.disabled[e]==0}}class qd extends VD{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (${14})`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let o=0;o<e.repeatNodeCount;o++)t.push("");let i=Object.keys(e.topRules).map(o=>e.topRules[o][1]),s=[];for(let o=0;o<t.length;o++)s.push([]);function r(o,a,c){s[o].push([a,a.deserialize(String(c))])}if(e.nodeProps)for(let o of e.nodeProps){let a=o[0];typeof a=="string"&&(a=rn[a]);for(let c=1;c<o.length;){let u=o[c++];if(u>=0)r(u,a,o[c++]);else{let f=o[c+-u];for(let h=-u;h>0;h--)r(o[c++],a,f);c++}}}this.nodeSet=new ub(t.map((o,a)=>Bs.define({name:a>=this.minRepeatTerm?void 0:o,id:a,props:s[a],top:i.indexOf(a)>-1,error:a==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(a)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=MD;let l=ah(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let o=0;o<this.specializerSpecs.length;o++)this.specialized[o]=this.specializerSpecs[o].term;this.specializers=this.specializerSpecs.map(iw),this.states=ah(e.states,Uint32Array),this.data=ah(e.stateData),this.goto=ah(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(o=>typeof o=="number"?new Na(l,o):o),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,i){let s=new Px(this,e,t,i);for(let r of this.wrappers)s=r(s,e,t,i);return s}getGoto(e,t,i=!1){let s=this.goto;if(t>=s[0])return-1;for(let r=s[t+1];;){let l=s[r++],o=l&1,a=s[r++];if(o&&i)return a;for(let c=r+(l>>1);r<c;r++)if(s[r]==e)return a;if(o)return-1}}hasAction(e,t){let i=this.data;for(let s=0;s<2;s++)for(let r=this.stateSlot(e,s?2:1),l;;r+=3){if((l=i[r])==65535)if(i[r+1]==1)l=i[r=xr(i,r+2)];else{if(i[r+1]==2)return xr(i,r+2);break}if(l==t||l==0)return xr(i,r+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){if(t==this.stateSlot(e,4))return!0;for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=xr(this.data,i+2);else return!1;if(t==xr(this.data,i+1))return!0}}nextStates(e){let t=[];for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=xr(this.data,i+2);else break;if(!(this.data[i+2]&1)){let s=this.data[i+1];t.some((r,l)=>l&1&&r==s)||t.push(this.data[i],s)}}return t}configure(e){let t=Object.assign(Object.create(qd.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=i}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(i=>{let s=e.tokenizers.find(r=>r.from==i);return s?s.to:i})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((i,s)=>{let r=e.specializers.find(o=>o.from==i.external);if(!r)return i;let l=Object.assign(Object.assign({},i),{external:r.to});return t.specializers[s]=iw(l),l})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),i=t.map(()=>!1);if(e)for(let r of e.split(" ")){let l=t.indexOf(r);l>=0&&(i[l]=!0)}let s=null;for(let r=0;r<t.length;r++)if(!i[r])for(let l=this.dialects[t[r]],o;(o=this.data[l++])!=65535;)(s||(s=new Uint8Array(this.maxTerm+1)))[o]=1;return new Mx(e,i,s)}static deserialize(e){return new qd(e)}}function xr(n,e){return n[e]|n[e+1]<<16}function Bx(n){let e=null;for(let t of n){let i=t.p.stoppedAt;(t.pos==t.p.stream.end||i!=null&&t.pos>i)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function iw(n){if(n.external){let e=n.extend?1:0;return(t,i)=>n.external(t,i)<<1|e}return n.get}const Lx=UD({String:ct.string,Number:ct.number,"True False":ct.bool,PropertyName:ct.propertyName,Null:ct.null,",":ct.separator,"[ ]":ct.squareBracket,"{ }":ct.brace}),Vx=qd.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#CjOOQO'#Cp'#CpQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CrOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59U,59UO!iQPO,59UOVQPO,59QOqQPO'#CkO!nQPO,59^OOQO1G.k1G.kOVQPO'#ClO!vQPO,59aOOQO1G.p1G.pOOQO1G.l1G.lOOQO,59V,59VOOQO-E6i-E6iOOQO,59W,59WOOQO-E6j-E6j",stateData:"#O~OcOS~OQSORSOSSOTSOWQO]ROePO~OVXOeUO~O[[O~PVOg^O~Oh_OVfX~OVaO~OhbO[iX~O[dO~Oh_OVfa~OhbO[ia~O",goto:"!kjPPPPPPkPPkqwPPk{!RPPP!XP!ePP!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:" JsonText True False Null Number String } { Object Property PropertyName ] [ Array",maxTerm:25,nodeProps:[["openedBy",7,"{",12,"["],["closedBy",8,"}",13,"]"]],propSources:[Lx],skippedNodes:[0],repeatNodeCount:2,tokenData:"(p~RaXY!WYZ!W]^!Wpq!Wrs!]|}$i}!O$n!Q!R$w!R![&V![!]&h!}#O&m#P#Q&r#Y#Z&w#b#c'f#h#i'}#o#p(f#q#r(k~!]Oc~~!`Upq!]qr!]rs!rs#O!]#O#P!w#P~!]~!wOe~~!zXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#g~#jR!Q![#s!c!i#s#T#Z#s~#vR!Q![$P!c!i$P#T#Z$P~$SR!Q![$]!c!i$]#T#Z$]~$`R!Q![!]!c!i!]#T#Z!]~$nOh~~$qQ!Q!R$w!R![&V~$|RT~!O!P%V!g!h%k#X#Y%k~%YP!Q![%]~%bRT~!Q![%]!g!h%k#X#Y%k~%nR{|%w}!O%w!Q![%}~%zP!Q![%}~&SPT~!Q![%}~&[ST~!O!P%V!Q![&V!g!h%k#X#Y%k~&mOg~~&rO]~~&wO[~~&zP#T#U&}~'QP#`#a'T~'WP#g#h'Z~'^P#X#Y'a~'fOR~~'iP#i#j'l~'oP#`#a'r~'uP#`#a'x~'}OS~~(QP#f#g(T~(WP#i#j(Z~(^P#X#Y(a~(fOQ~~(kOW~~(pOV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0}),Ux=kd.define({name:"json",parser:Vx.configure({props:[HD.add({Object:EA({except:/^\s*\}/}),Array:EA({except:/^\s*\]/})}),zD.add({"Object Array":hY})]}),languageData:{closeBrackets:{brackets:["[","{",'"']},indentOnInput:/^\s*[\}\]]$/}});function Wx(){return new eY(Ux)}function sw(n){let e,t,i;return{c(){e=E("div"),t=L("Line: "),i=L(n[0]),this.h()},l(s){e=A(s,"DIV",{class:!0});var r=w(e);t=V(r,"Line: "),i=V(r,n[0]),r.forEach(g),this.h()},h(){_(e,"class","jse-status-bar-info svelte-outk3w")},m(s,r){B(s,e,r),m(e,t),m(e,i)},p(s,r){r&1&&Ce(i,s[0])},d(s){s&&g(e)}}}function rw(n){let e,t,i;return{c(){e=E("div"),t=L("Column: "),i=L(n[1]),this.h()},l(s){e=A(s,"DIV",{class:!0});var r=w(e);t=V(r,"Column: "),i=V(r,n[1]),r.forEach(g),this.h()},h(){_(e,"class","jse-status-bar-info svelte-outk3w")},m(s,r){B(s,e,r),m(e,t),m(e,i)},p(s,r){r&2&&Ce(i,s[1])},d(s){s&&g(e)}}}function lw(n){let e,t,i,s;return{c(){e=E("div"),t=L("Selection: "),i=L(n[2]),s=L(" characters"),this.h()},l(r){e=A(r,"DIV",{class:!0});var l=w(e);t=V(l,"Selection: "),i=V(l,n[2]),s=V(l," characters"),l.forEach(g),this.h()},h(){_(e,"class","jse-status-bar-info svelte-outk3w")},m(r,l){B(r,e,l),m(e,t),m(e,i),m(e,s)},p(r,l){l&4&&Ce(i,r[2])},d(r){r&&g(e)}}}function Fx(n){let e,t,i,s=n[0]!==void 0&&sw(n),r=n[1]!==void 0&&rw(n),l=n[2]!==void 0&&n[2]>0&&lw(n);return{c(){e=E("div"),s&&s.c(),t=P(),r&&r.c(),i=P(),l&&l.c(),this.h()},l(o){e=A(o,"DIV",{class:!0});var a=w(e);s&&s.l(a),t=M(a),r&&r.l(a),i=M(a),l&&l.l(a),a.forEach(g),this.h()},h(){_(e,"class","jse-status-bar svelte-outk3w")},m(o,a){B(o,e,a),s&&s.m(e,null),m(e,t),r&&r.m(e,null),m(e,i),l&&l.m(e,null)},p(o,[a]){o[0]!==void 0?s?s.p(o,a):(s=sw(o),s.c(),s.m(e,t)):s&&(s.d(1),s=null),o[1]!==void 0?r?r.p(o,a):(r=rw(o),r.c(),r.m(e,i)):r&&(r.d(1),r=null),o[2]!==void 0&&o[2]>0?l?l.p(o,a):(l=lw(o),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},i:Ke,o:Ke,d(o){o&&g(e),s&&s.d(),r&&r.d(),l&&l.d()}}}function jx(n,e,t){let{editorState:i}=e,s,r,l,o,a;return n.$$set=c=>{"editorState"in c&&t(3,i=c.editorState)},n.$$.update=()=>{var c,u,f,h,d;n.$$.dirty&8&&t(4,s=(u=(c=i==null?void 0:i.selection)==null?void 0:c.main)==null?void 0:u.head),n.$$.dirty&24&&t(5,r=(f=i==null?void 0:i.doc)==null?void 0:f.lineAt(s)),n.$$.dirty&32&&t(0,l=r?r.number:void 0),n.$$.dirty&48&&t(1,o=r?s-r.from+1:void 0),n.$$.dirty&8&&t(2,a=(d=(h=i==null?void 0:i.selection)==null?void 0:h.ranges)==null?void 0:d.reduce((p,v)=>p+v.to-v.from,0))},[l,o,a,i,s,r]}class Hx extends nt{constructor(e){super(),it(this,e,jx,Fx,Ct,{editorState:3})}}const qx=Hx,Nb=Af.define([{tag:ct.propertyName,color:"var(--jse-key-color)"},{tag:ct.number,color:"var(--jse-value-color-number)"},{tag:ct.bool,color:"var(--jse-value-color-boolean)"},{tag:ct.string,color:"var(--jse-value-color-string)"},{tag:ct.keyword,color:"var(--jse-value-color-null)"}]),zx=xD(Nb),Gx=Nb.style;Nb.style=n=>Gx(n||[]);function Kx(n){return n&&n.space===!0&&Object.keys(n).length===1}function ow(n){return typeof n.parseError=="object"&&n.parseError!==null}function Qx(n){return Array.isArray(n.validationErrors)}var aw=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function Xx(n,e){return!!(n===e||aw(n)&&aw(e))}function Yx(n,e){if(n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(!Xx(n[t],e[t]))return!1;return!0}function Pb(n,e){e===void 0&&(e=Yx);var t=null;function i(){for(var s=[],r=0;r<arguments.length;r++)s[r]=arguments[r];if(t&&t.lastThis===this&&e(s,t.lastArgs))return t.lastResult;var l=n.apply(this,s);return t={lastResult:l,lastArgs:s,lastThis:this},l}return i.clear=function(){t=null},i}function Qc(n,e){const t=Date.now(),i=n(),s=Date.now();return e(s-t),i}const ba=Is("validation");function Jx(n){const e={};return n.forEach(t=>{e[ht(t.path)]=t}),n.forEach(t=>{let i=t.path;for(;i.length>0;){i=pn(i);const s=ht(i);s in e||(e[s]={isChildError:!0,path:i,message:"Contains invalid data"})}}),e}function Zx(n,e,t,i){if(ba("validateJSON"),!e)return[];if(t!==i){const s=i.parse(t.stringify(n));return e(s)}else return e(n)}function xx(n,e,t,i){if(ba("validateText"),n.length>wV)return{validationErrors:[{path:[],message:"Validation turned off: the document is too large",severity:Ja.info}]};if(n.length===0)return{validationErrors:[]};try{const s=Qc(()=>t.parse(n),o=>ba(`validate: parsed json in ${o} ms`));if(!e)return{validationErrors:[]};const r=t===i?s:Qc(()=>i.parse(n),o=>ba(`validate: parsed json with the validationParser in ${o} ms`));return{validationErrors:Qc(()=>e(r),o=>ba(`validate: validated json in ${o} ms`))}}catch(s){const r=Qc(()=>$x(n,t),o=>ba(`validate: checked whether repairable in ${o} ms`));return{parseError:zv(n,s.message||s.toString()),isRepairable:r}}}function $x(n,e){if(n.length>CV)return!1;try{return e.parse(Ul(n)),!0}catch{return!1}}function cw(n){let e,t;return e=new eK({props:{readOnly:n[0],onFormat:n[17],onCompact:n[18],onSort:n[19],onTransform:n[20],onToggleSearch:n[21],onUndo:n[22],onRedo:n[23],canFormat:!n[15],canCompact:!n[15],canSort:!n[15],canTransform:!n[15],canUndo:n[11],canRedo:n[12],onRenderMenu:n[4]}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s[0]&1&&(r.readOnly=i[0]),s[0]&32768&&(r.canFormat=!i[15]),s[0]&32768&&(r.canCompact=!i[15]),s[0]&32768&&(r.canSort=!i[15]),s[0]&32768&&(r.canTransform=!i[15]),s[0]&2048&&(r.canUndo=i[11]),s[0]&4096&&(r.canRedo=i[12]),s[0]&16&&(r.onRenderMenu=i[4]),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function e$(n){let e,t,i,s,r;return{c(){e=E("div"),t=E("div"),i=P(),s=E("div"),r=L("loading..."),this.h()},l(l){e=A(l,"DIV",{class:!0});var o=w(e);t=A(o,"DIV",{class:!0}),w(t).forEach(g),i=M(o),s=A(o,"DIV",{class:!0});var a=w(s);r=V(a,"loading..."),a.forEach(g),o.forEach(g),this.h()},h(){_(t,"class","jse-loading-space svelte-1pffwih"),_(s,"class","jse-loading svelte-1pffwih"),_(e,"class","jse-contents svelte-1pffwih")},m(l,o){B(l,e,o),m(e,t),m(e,i),m(e,s),m(s,r)},p:Ke,i:Ke,o:Ke,d(l){l&&g(e)}}}function t$(n){let e,t,i,s,r,l,o=n[10]&&uw(n),a=n[2]&&fw(n),c=!n[10]&&hw(n);return{c(){o&&o.c(),e=P(),t=E("div"),i=P(),a&&a.c(),s=P(),c&&c.c(),r=et(),this.h()},l(u){o&&o.l(u),e=M(u),t=A(u,"DIV",{class:!0}),w(t).forEach(g),i=M(u),a&&a.l(u),s=M(u),c&&c.l(u),r=et(),this.h()},h(){_(t,"class","jse-contents svelte-1pffwih"),xe(t,"jse-hidden",n[10])},m(u,f){o&&o.m(u,f),B(u,e,f),B(u,t,f),n[48](t),B(u,i,f),a&&a.m(u,f),B(u,s,f),c&&c.m(u,f),B(u,r,f),l=!0},p(u,f){u[10]?o?(o.p(u,f),f[0]&1024&&D(o,1)):(o=uw(u),o.c(),D(o,1),o.m(e.parentNode,e)):o&&(Le(),U(o,1,1,()=>{o=null}),Ve()),(!l||f[0]&1024)&&xe(t,"jse-hidden",u[10]),u[2]?a?(a.p(u,f),f[0]&4&&D(a,1)):(a=fw(u),a.c(),D(a,1),a.m(s.parentNode,s)):a&&(Le(),U(a,1,1,()=>{a=null}),Ve()),u[10]?c&&(Le(),U(c,1,1,()=>{c=null}),Ve()):c?(c.p(u,f),f[0]&1024&&D(c,1)):(c=hw(u),c.c(),D(c,1),c.m(r.parentNode,r))},i(u){l||(D(o),D(a),D(c),l=!0)},o(u){U(o),U(a),U(c),l=!1},d(u){o&&o.d(u),u&&g(e),u&&g(t),n[48](null),u&&g(i),a&&a.d(u),u&&g(s),c&&c.d(u),u&&g(r)}}}function uw(n){let e,t;return e=new sa({props:{icon:ia,type:"error",message:`The JSON document is larger than ${Ff(t1,1024)}, and may crash your browser when loading it in text mode. Actual size: ${Ff(n[5].length,1024)}.`,actions:[{text:"Open anyway",title:"Open the document in text mode. This may freeze or crash your browser.",onClick:n[24]},{text:"Open in tree mode",title:"Open the document in tree mode. Tree mode can handle large documents.",onClick:n[3]},{text:"Cancel",title:"Cancel opening this large document.",onClick:n[25]}]}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s[0]&32&&(r.message=`The JSON document is larger than ${Ff(t1,1024)}, and may crash your browser when loading it in text mode. Actual size: ${Ff(i[5].length,1024)}.`),s[0]&8&&(r.actions=[{text:"Open anyway",title:"Open the document in text mode. This may freeze or crash your browser.",onClick:i[24]},{text:"Open in tree mode",title:"Open the document in tree mode. Tree mode can handle large documents.",onClick:i[3]},{text:"Cancel",title:"Cancel opening this large document.",onClick:i[25]}]),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function fw(n){let e,t;return e=new qx({props:{editorState:n[8]}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s[0]&256&&(r.editorState=i[8]),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function hw(n){let e,t,i,s=n[13]&&dw(n);return t=new oR({props:{validationErrors:n[9],selectError:n[26]}}),{c(){s&&s.c(),e=P(),ce(t.$$.fragment)},l(r){s&&s.l(r),e=M(r),ge(t.$$.fragment,r)},m(r,l){s&&s.m(r,l),B(r,e,l),ue(t,r,l),i=!0},p(r,l){r[13]?s?(s.p(r,l),l[0]&8192&&D(s,1)):(s=dw(r),s.c(),D(s,1),s.m(e.parentNode,e)):s&&(Le(),U(s,1,1,()=>{s=null}),Ve());const o={};l[0]&512&&(o.validationErrors=r[9]),t.$set(o)},i(r){i||(D(s),D(t.$$.fragment,r),i=!0)},o(r){U(s),U(t.$$.fragment,r),i=!1},d(r){s&&s.d(r),r&&g(e),fe(t,r)}}}function dw(n){let e,t;return e=new sa({props:{type:"error",icon:ia,message:n[13].message,actions:n[14],onClick:n[49]}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s[0]&8192&&(r.message=i[13].message),s[0]&16384&&(r.actions=i[14]),s[0]&8192&&(r.onClick=i[49]),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function n$(n){let e,t,i,s,r,l=n[1]&&cw(n);const o=[t$,e$],a=[];function c(u,f){return u[16]?1:0}return i=c(n),s=a[i]=o[i](n),{c(){e=E("div"),l&&l.c(),t=P(),s.c(),this.h()},l(u){e=A(u,"DIV",{class:!0});var f=w(e);l&&l.l(f),t=M(f),s.l(f),f.forEach(g),this.h()},h(){_(e,"class","jse-text-mode svelte-1pffwih"),xe(e,"no-main-menu",!n[1])},m(u,f){B(u,e,f),l&&l.m(e,null),m(e,t),a[i].m(e,null),n[50](e),r=!0},p(u,f){u[1]?l?(l.p(u,f),f[0]&2&&D(l,1)):(l=cw(u),l.c(),D(l,1),l.m(e,t)):l&&(Le(),U(l,1,1,()=>{l=null}),Ve()),s.p(u,f),(!r||f[0]&2)&&xe(e,"no-main-menu",!u[1])},i(u){r||(D(l),D(s),r=!0)},o(u){U(l),U(s),r=!1},d(u){u&&g(e),l&&l.d(),a[i].d(),n[50](null)}}}function mw(n){return{from:n.from,to:n.to,message:n.message,actions:n.actions,severity:n.severity,source:void 0}}function i$(n,e,t){let i,s,r,{readOnly:l}=e,{mainMenuBar:o}=e,{statusBar:a}=e,{externalContent:c}=e,{indentation:u}=e,{tabSize:f}=e,{escapeUnicodeCharacters:h}=e,{parser:d}=e,{validator:p}=e,{validationParser:v}=e,{onChange:y}=e,{onSwitchToTreeMode:b}=e,{onError:S}=e,{onFocus:I}=e,{onBlur:T}=e,{onRenderMenu:C}=e,{onSortModal:k}=e,{onTransformModal:R}=e;const O=Is("jsoneditor:TextMode"),N={key:"Mod-i",run:ie,shift:_e,preventDefault:!0},F=typeof window>"u";O("isSSR:",F);let W,z,Y,H,K=!1,j=[];const J=new $r,Z=new $r,q=new $r,X=new $r,ne=new $r;let Q=c,re=BS(Q,u,d),be=ft(re,K),le=h;Mi(async()=>{if(!F)try{z=ke({target:W,initialText:be?"":s.escapeValue(re),readOnly:l,indentation:u}),je()}catch(Ue){console.error(Ue)}}),br(()=>{z&&(O("Destroy CodeMirror editor"),z.destroy())});let he=!1,Ie=!1;const G=ud(),ve=ud();function je(){z&&(O("focus"),z.focus())}let $=!1;sR({onMount:Mi,onDestroy:br,getWindow:()=>Nu(Y),hasFocus:()=>$&&document.hasFocus()||y1(Y),onFocus:I,onBlur:T});function Oe(Ue){O("patch",Ue);const yt=d.parse(re),qt=Oo(yt,Ue),hn=iO(yt,Ue);return me({text:d.stringify(qt,null,u)}),{json:qt,previousJson:yt,undo:hn,redo:Ue}}function ie(){if(O("format"),!l)try{const Ue=d.parse(re);me({text:d.stringify(Ue,null,u)})}catch(Ue){S(Ue)}}function _e(){if(O("compact"),!l)try{const Ue=d.parse(re);me({text:d.stringify(Ue)})}catch(Ue){S(Ue)}}function Ee(){if(O("repair"),!l)try{me({text:Ul(re)}),t(47,cn=Ep),t(13,tn=void 0)}catch(Ue){S(Ue)}}function He(){if(!l)try{const Ue=d.parse(re);$=!0,k({id:G,json:Ue,selectedPath:[],onSort:async yt=>{O("onSort",yt),Oe(yt)},onClose:()=>{$=!1,je()}})}catch(Ue){S(Ue)}}function We({id:Ue,selectedPath:yt,onTransform:qt,onClose:hn}){try{const dn=d.parse(re);$=!0,R({id:Ue||ve,json:dn,selectedPath:yt,onTransform:qt?Qt=>{qt({operations:Qt,json:dn,transformedJson:Oo(dn,Qt)})}:Qt=>{O("onTransform",Qt),Oe(Qt)},onClose:()=>{$=!1,je(),hn&&hn()}})}catch(dn){S(dn)}}function Qe(){l||We({selectedPath:[]})}function we(){z&&(W&&W.querySelector(".cm-search")?Cb(z):wb(z))}function Me(){l||z&&(_b(z),je())}function de(){l||z&&(Dd(z),je())}function Ae(){K=!0,me(c,!0)}function Re(){ze()}function Ne(Ue){O("select validation error",Ue);const yt=at(Ue);pe(yt.from,yt.to),je()}function Ge(Ue){O("select parse error",Ue);const yt=qe(Ue,!1);pe(yt.from,yt.to),je()}function pe(Ue,yt){O("setSelection",{anchor:Ue,head:yt}),z&&z.dispatch(z.state.update({selection:{anchor:Ue,head:yt},scrollIntoView:!0}))}function Fe(Ue,yt){if(yt.state.selection.ranges.length===1){const qt=yt.state.selection.ranges[0],hn=re.slice(qt.from,qt.to);if(hn==="{"||hn==="["){const dn=Tm.parse(re),Qt=Object.keys(dn.pointers).find(Dt=>{var Pt;return((Pt=dn.pointers[Dt].value)==null?void 0:Pt.pos)===qt.from}),tt=dn.pointers[Qt];if(Qt&&tt&&tt.value&&tt.valueEnd){O("pointer found, selecting inner contents of path:",Qt,tt);const Dt=tt.value.pos+1,mi=tt.valueEnd.pos-1;pe(Dt,mi)}}}}function ae(){return gx(wn,{delay:W2})}function ke({target:Ue,initialText:yt,readOnly:qt,indentation:hn}){O("Create CodeMirror editor",{readOnly:qt,indentation:hn});const dn=ln.create({doc:yt,extensions:[qm.of([xJ,N]),J.of(ae()),Cx(),kx,zx,wt.domEventHandlers({dblclick:Fe}),wt.updateListener.of(Qt=>{t(8,H=Qt.state),Qt.docChanged&&gn()}),Wx(),hZ({top:!0}),q.of(ln.readOnly.of(qt)),Z.of(wt.editable.of(!qt)),ne.of(ln.tabSize.of(f)),X.of(Ot(hn)),wt.lineWrapping]});return z=new wt({state:dn,parent:Ue}),z}function oe(){return z?s.unescapeValue(z.state.doc.toString()):""}function at(Ue){const{path:yt,message:qt}=Ue,{line:hn,column:dn,from:Qt,to:tt}=oz(s.escapeValue(re),yt);return{path:yt,line:hn,column:dn,from:Qt,to:tt,message:qt,severity:Ja.warning,actions:[]}}function qe(Ue,yt){const{line:qt,column:hn,position:dn,message:Qt}=Ue;return{path:null,line:qt,column:hn,from:dn||0,to:dn||0,severity:Ja.error,message:Qt,actions:yt&&!l?[{name:"Auto repair",apply:()=>Ee()}]:null}}function me(Ue,yt=!1){const qt=BS(Ue,u,d);if(t(10,be=ft(qt,K)),be){O("externalContent not applying text: editor is disabled");return}const hn=!En(Ue,Q);if(O("setCodeMirrorContent",{isChanged:hn,forceUpdate:yt}),!z||!hn&&!yt)return;const dn=Q;Q=Ue,t(5,re=qt),z.dispatch({changes:{from:0,to:z.state.doc.length,insert:s.escapeValue(re)}}),en(),hn&&Jt(Q,dn)}function ot(){O("refresh");const Ue=z.state.doc.length;z.dispatch({changes:{from:Ue,to:Ue,insert:" "}}),z.dispatch({changes:{from:Ue,to:Ue+1,insert:""}})}function Se(){O("forceUpdateText",{escapeUnicodeCharacters:h}),z&&z.dispatch({changes:{from:0,to:z.state.doc.length,insert:s.escapeValue(re)}})}function ze(){if(!z)return;const Ue=oe(),yt=Ue!==re;if(O("onChangeCodeMirrorValue",{isChanged:yt}),!yt)return;const qt=Q;t(5,re=Ue),Q={text:re},en(),Jt(Q,qt)}function ye(Ue){O("updateLinter",Ue),z&&z.dispatch({effects:J.reconfigure(ae())})}function ut(Ue){z&&(O("updateIndentation",Ue),z.dispatch({effects:X.reconfigure(Ot(Ue))}))}function Bt(Ue){z&&(O("updateTabSize",Ue),z.dispatch({effects:ne.reconfigure(ln.tabSize.of(Ue))}))}function gt(Ue){z&&(O("updateReadOnly",Ue),z.dispatch({effects:[q.reconfigure(ln.readOnly.of(Ue)),Z.reconfigure(wt.editable.of(!Ue))]}))}function Ot(Ue){return Gm.of(typeof Ue=="number"?" ".repeat(Ue):Ue)}function en(){t(11,he=eJ(z.state)>0),t(12,Ie=tJ(z.state)>0),O({canUndo:he,canRedo:Ie})}const gn=Wm(ze,W2);function Jt(Ue,yt){y&&y(Ue,yt,{contentErrors:vn(),patchResult:null})}function ft(Ue,yt){return Ue&&Ue.length>t1&&!yt}let cn=Ep,tn=null;function wn(){if(be)return[];const Ue=vn();if(ow(Ue)){const{parseError:yt,isRepairable:qt}=Ue;return[mw(qe(yt,qt))]}return Qx(Ue)?Ue.validationErrors.map(at).map(mw):[]}function vn(){O("validate:start"),gn.flush();const Ue=Ln(s.escapeValue(re),p,d,v);return ow(Ue)?(t(47,cn=Ue.isRepairable?q2:IV),t(13,tn=Ue.parseError),t(9,j=[])):(t(47,cn=Ep),t(13,tn=null),t(9,j=Ue.validationErrors)),O("validate:end"),Ue}const Ln=Pb(xx);function Cn(Ue){Vt[Ue?"unshift":"push"](()=>{W=Ue,t(6,W)})}const Un=()=>Ge(tn);function di(Ue){Vt[Ue?"unshift":"push"](()=>{Y=Ue,t(7,Y)})}return n.$$set=Ue=>{"readOnly"in Ue&&t(0,l=Ue.readOnly),"mainMenuBar"in Ue&&t(1,o=Ue.mainMenuBar),"statusBar"in Ue&&t(2,a=Ue.statusBar),"externalContent"in Ue&&t(28,c=Ue.externalContent),"indentation"in Ue&&t(29,u=Ue.indentation),"tabSize"in Ue&&t(30,f=Ue.tabSize),"escapeUnicodeCharacters"in Ue&&t(31,h=Ue.escapeUnicodeCharacters),"parser"in Ue&&t(32,d=Ue.parser),"validator"in Ue&&t(33,p=Ue.validator),"validationParser"in Ue&&t(34,v=Ue.validationParser),"onChange"in Ue&&t(35,y=Ue.onChange),"onSwitchToTreeMode"in Ue&&t(3,b=Ue.onSwitchToTreeMode),"onError"in Ue&&t(36,S=Ue.onError),"onFocus"in Ue&&t(37,I=Ue.onFocus),"onBlur"in Ue&&t(38,T=Ue.onBlur),"onRenderMenu"in Ue&&t(4,C=Ue.onRenderMenu),"onSortModal"in Ue&&t(39,k=Ue.onSortModal),"onTransformModal"in Ue&&t(40,R=Ue.onTransformModal)},n.$$.update=()=>{n.$$.dirty[0]&32&&t(15,i=re.length===0),n.$$.dirty[1]&1&&(s=zO({escapeControlCharacters:!1,escapeUnicodeCharacters:h})),n.$$.dirty[0]&268435456&&me(c),n.$$.dirty[1]&4&&ye(p),n.$$.dirty[0]&536870912&&ut(u),n.$$.dirty[0]&1073741824&&Bt(f),n.$$.dirty[0]&1&&gt(l),n.$$.dirty[1]&32769&&le!==h&&(t(46,le=h),Se()),n.$$.dirty[0]&1|n.$$.dirty[1]&65536&&t(14,r=cn===q2&&!l?[{icon:Xv,text:"Auto repair",title:"Automatically repair JSON",onClick:Ee}]:[])},[l,o,a,b,C,re,W,Y,H,j,be,he,Ie,tn,r,i,F,ie,_e,He,Qe,we,Me,de,Ae,Re,Ne,Ge,c,u,f,h,d,p,v,y,S,I,T,k,R,je,Oe,We,ot,vn,le,cn,Cn,Un,di]}class s$ extends nt{constructor(e){super(),it(this,e,i$,n$,an,{readOnly:0,mainMenuBar:1,statusBar:2,externalContent:28,indentation:29,tabSize:30,escapeUnicodeCharacters:31,parser:32,validator:33,validationParser:34,onChange:35,onSwitchToTreeMode:3,onError:36,onFocus:37,onBlur:38,onRenderMenu:4,onSortModal:39,onTransformModal:40,focus:41,patch:42,openTransformModal:43,refresh:44,validate:45},null,[-1,-1,-1])}get focus(){return this.$$.ctx[41]}get patch(){return this.$$.ctx[42]}get openTransformModal(){return this.$$.ctx[43]}get refresh(){return this.$$.ctx[44]}get validate(){return this.$$.ctx[45]}}const r$=s$,ng=Is("jsoneditor:AutoScrollHandler");function l$(n){ng("createAutoScrollHandler",n);let e,t;function i(c){return c<20?SV:c<50?EV:AV}function s(){if(n){const c=e*(F2/1e3);n.scrollTop+=c}}function r(c){(!t||c!==e)&&(l(),ng("startAutoScroll",c),e=c,t=setInterval(s,F2))}function l(){t&&(ng("stopAutoScroll"),clearInterval(t),t=void 0,e=void 0)}function o(c){if(n){const u=c.clientY,{top:f,bottom:h}=n.getBoundingClientRect();if(u<f){const d=i(f-u);r(-d)}else if(u>h){const d=i(u-h);r(d)}else l()}}function a(){l()}return{onDrag:o,onDragEnd:a}}const o$=(n,e,t,i)=>(n/=i/2,n<1?t/2*n*n+e:(n--,-t/2*(n*(n-2)-1)+e)),a$=()=>{let n,e,t,i,s,r,l,o,a,c,u,f,h,d;function p(){return n.scrollY||n.pageYOffset||n.scrollTop}function v(T){const C=T.getBoundingClientRect().top,k=n.getBoundingClientRect?n.getBoundingClientRect().top:0;return C-k+t}function y(T){n.scrollTo?n.scrollTo(0,T):n.scrollTop=T}function b(T){c||(c=T),u=T-c,f=r(u,t,o,a),y(f),d=!0,u<a?requestAnimationFrame(b):S()}function S(){y(t+o),e&&l&&(e.setAttribute("tabindex","-1"),e.focus()),typeof h=="function"&&h(),c=!1,d=!1}function I(T,C={}){switch(a=C.duration||1e3,s=C.offset||0,h=C.callback,r=C.easing||o$,l=C.a11y||!1,typeof C.container){case"object":n=C.container;break;case"string":n=document.querySelector(C.container);break;default:n=window}switch(t=p(),typeof T){case"number":e=void 0,l=!1,i=t+T;break;case"object":e=T,i=v(e);break;case"string":e=document.querySelector(T),i=v(e);break}switch(o=i-t+s,typeof C.duration){case"number":a=C.duration;break;case"function":a=C.duration(o);break}d?c=!1:requestAnimationFrame(b)}return I};function c$(n,e){const t={start:n,end:Math.min(p0(n),e)},i=Math.max(zd((n+e)/2),n),s={start:i,end:Math.min(p0(i),e)},r=zd(e),l=r===e?r-Cu:r,o={start:Math.max(l,n),end:e},a=[t],c=s.start>=t.end&&s.end<=o.start;return c&&a.push(s),o.start>=(c?s.end:t.end)&&a.push(o),a}function r5(n){const e=Jq(n,i=>i.start),t=[e[0]];for(let i=0;i<e.length;i++){const s=t.length-1,r=t[s],l=e[i];l.start<=r.end?t[s]={start:Math.min(r.start,l.start),end:Math.max(r.end,l.end)}:t.push(l)}return t}function u$(n,e){return n.some(t=>e>=t.start&&e<t.end)}function p0(n){return zd(n)+Cu}function zd(n){return Math.floor(n/Cu)*Cu}function pw(n){let e={expandedMap:{},enforceStringMap:{},visibleSectionsMap:{},selection:void 0};return n!=null&&n.select&&(e={...e,selection:n.select(n.json,e)}),n!=null&&n.expand&&(e=Zr(n.json,e,[],n.expand)),e}function sp(n,e){return n.visibleSectionsMap[e]||Fo}function Mb(n,e,t){e.forEach(({start:i,end:s})=>{jO(i,Math.min(n.length,s),t)})}function ig(n,e,t){const i={...e.expandedMap},s={...e.visibleSectionsMap};for(let r=0;r<=t.length;r++){const l=t.slice(0,r),o=ht(l),a=At(n,l);if(Ri(a)&&(i[o]=!0),Array.isArray(a)&&r<t.length){const c=s[o]||Fo,u=Ai(t[r]);if(!u$(c,u)){const f=zd(u),h=p0(f),d={start:f,end:h};s[o]=r5(c.concat(d))}}}return{...e,expandedMap:i,visibleSectionsMap:s}}function Zr(n,e,t,i){const s={...e.expandedMap};function r(o){const a=l.length;if(Array.isArray(o)){if(i(l)){const c=ht(l);if(s[c]=!0,o.length>0){const u=sp(e,c);Mb(o,u,f=>{l[a]=String(f),r(o[f])}),l.pop()}}}else if(ji(o)&&i(l)){s[ht(l)]=!0;const c=Object.keys(o);if(c.length>0){for(const u of c)l[a]=u,r(o[u]);l.pop()}}}const l=t.slice();return r(At(n,t)),{...e,expandedMap:s}}function f$(n,e){return{...n,expandedMap:{...n.expandedMap,[ht(e)]:!0}}}function l5(n,e){const t=Pa(n.expandedMap,e),i=Pa(n.enforceStringMap,e),s=Pa(n.visibleSectionsMap,e);return{...n,expandedMap:t,enforceStringMap:i,visibleSectionsMap:s}}function h$(n,e,t){if(t){const i={...n.enforceStringMap};return i[e]=t,{...n,enforceStringMap:i}}else if(typeof n.enforceStringMap[e]=="boolean"){const i={...n.enforceStringMap};return delete i[e],{...n,enforceStringMap:i}}else return n}function d$(n,e,t,i){return{...e,visibleSectionsMap:{...e.visibleSectionsMap,[t]:r5(sp(e,t).concat(i))}}}function m$(n,e,t){const i=Oo(n,t),s=t.reduce((r,l)=>J4(l)?o5(i,r,l):Z4(l)?a5(i,r,l):x4(l)?p$(i,r,l):i1(l)||za(l)?g$(i,r,l):r,e);return{json:i,documentState:s}}function o5(n,e,t){const i=Fr(n,t.path),s=pn(i),r=ht(s),l=At(n,s);if(hi(l)){const o=Ai(Kt(i)),a=Ma(e.expandedMap,s,o,1),c=Ma(e.enforceStringMap,s,o,1);let u=Ma(e.visibleSectionsMap,s,o,1);return u=c5(u,r,f=>u5(f,o,1)),{...e,expandedMap:a,enforceStringMap:c,visibleSectionsMap:u}}return e}function a5(n,e,t){const i=Fr(n,t.path),s=pn(i),r=ht(s),l=At(n,s);let{expandedMap:o,enforceStringMap:a,visibleSectionsMap:c}=e;if(o=Pa(o,i),a=Pa(a,i),c=Pa(c,i),hi(l)){const u=Ai(Kt(i));o=Ma(o,s,u,-1),a=Ma(a,s,u,-1),c=Ma(c,s,u,-1),c=c5(c,r,f=>u5(f,u,-1))}return{...e,expandedMap:o,enforceStringMap:a,visibleSectionsMap:c}}function p$(n,e,t){const i=t.path,s=og(n,e.expandedMap),r=og(n,e.enforceStringMap),l=og(n,e.visibleSectionsMap);return!Li(t.value)&&!hi(t.value)&&delete s[i],hi(t.value)||delete l[i],(Li(t.value)||hi(t.value))&&delete r[i],{...e,expandedMap:s,enforceStringMap:r,visibleSectionsMap:l}}function g$(n,e,t){if(za(t)&&t.from===t.path)return e;const i=f=>t.path+f.substring(t.from.length),s=lg(sg(e.expandedMap,t.from),i),r=lg(sg(e.enforceStringMap,t.from),i),l=lg(sg(e.visibleSectionsMap,t.from),i);let o=e;za(t)&&(o=a5(n,o,{op:"remove",path:t.from})),o=o5(n,o,{op:"add",path:t.path,value:null});const a=rg(o.expandedMap,s),c=rg(o.enforceStringMap,r),u=rg(o.visibleSectionsMap,l);return{...e,expandedMap:a,enforceStringMap:c,visibleSectionsMap:u}}function Pa(n,e){const t={},i=ht(e);return Object.keys(n).forEach(s=>{Ga(s,i)||(t[s]=n[s])}),t}function sg(n,e){const t={};return Object.keys(n).forEach(i=>{Ga(i,e)&&(t[i]=n[i])}),t}function rg(n,e){return{...n,...e}}function lg(n,e){const t={};return Object.keys(n).forEach(i=>{const s=e(i);t[s]=n[i]}),t}function Ma(n,e,t,i){const s=e.length,r=ht(e),l=[];for(const a of Object.keys(n))if(Ga(a,r)){const c=Ql(a),u=Ai(c[s]);u>=t&&(c[s]=String(u+i),l.push({oldPointer:a,newPointer:ht(c),value:n[a]}))}if(l.length===0)return n;const o={...n};return l.forEach(a=>{delete o[a.oldPointer]}),l.forEach(a=>{o[a.newPointer]=a.value}),o}function og(n,e){const t={};return Object.keys(e).filter(i=>Kl(n,Fr(n,i))).forEach(i=>{t[i]=e[i]}),t}function c5(n,e,t){const i=n[e];if(e in n){const s=t(i);if(!En(i,s)){const r={...n};return s===void 0?delete r[e]:r[e]=s,r}}return n}function u5(n,e,t){return n.map(i=>({start:i.start>e?i.start+t:i.start,end:i.end>=e?i.end+t:i.end}))}function Cf(n,e,t,i){const s=e?e[t]:void 0;return typeof s=="boolean"?s:jU(n,i)}function kf(n,e,t=!1){const i=n.indexOf(e);return i!==-1?t?n.slice(i):n.slice(i+1):[]}function Bb(n,e){const t=[];function i(s,r){t.push(r);const l=ht(r);if(s&&e.expandedMap[l]===!0){if(hi(s)){const o=sp(e,l);Mb(s,o,a=>{i(s[a],r.concat(String(a)))})}Li(s)&&Object.keys(s).forEach(o=>{i(s[o],r.concat(o))})}}return i(n,[]),t}function f5(n,e,t=!0){const i=[];function s(r,l){i.push({path:l,type:dr.value});const o=ht(l);if(r&&e.expandedMap[o]===!0){if(t&&i.push({path:l,type:dr.inside}),hi(r)){const a=sp(e,o);Mb(r,a,c=>{const u=l.concat(String(c));s(r[c],u),t&&i.push({path:u,type:dr.after})})}Li(r)&&Object.keys(r).forEach(c=>{const u=l.concat(c);i.push({path:u,type:dr.key}),s(r[c],u),t&&i.push({path:u,type:dr.after})})}}return s(n,[]),i}function v$(n,e,t){const i=Bb(n,e),s=i.map(ht),r=ht(t),l=s.indexOf(r);return l!==-1&&l>0?i[l-1]:null}function g0(n,e,t){const i=Bb(n,e),r=i.map(ht).indexOf(ht(t));return r!==-1&&r<i.length-1?i[r+1]:null}const b$=1e3,ch=Is("jsoneditor:History");function _$(n={}){const e=n.maxItems||b$;let t=[],i=0;function s(){return i<t.length}function r(){return i>0}function l(){return{canUndo:s(),canRedo:r(),length:t.length}}function o(){n.onChange&&n.onChange(l())}function a(h){ch("add",h),t=[h].concat(t.slice(i)).slice(0,e),i=0,o()}function c(){ch("clear"),t=[],i=0,o()}function u(){if(s()){const h=t[i];return i+=1,ch("undo",h),o(),h}}function f(){if(r())return i-=1,ch("redo",t[i]),o(),t[i]}return{add:a,clear:c,getState:l,undo:u,redo:f}}function Tf(n,e){const t=new Set(e),i=n.replace(/ \(copy( \d+)?\)$/,"");let s=n,r=1;for(;t.has(s);){const l="copy"+(r>1?" "+r:"");s=`${i} (${l})`,r++}return s}function Gd(n,e){const t="...",i=e-t.length;return n.length>e?n.substring(0,i)+t:n}function y$(n){if(n==="")return"";const e=n.toLowerCase();if(e==="null")return null;if(e==="true")return!0;if(e==="false")return!1;if(e==="undefined")return;const t=Number(n),i=parseFloat(n);return!isNaN(t)&&!isNaN(i)?t:n}function gr(n){return n&&n.type===Pn.after}function Ci(n){return n&&n.type===Pn.inside}function ci(n){return n&&n.type===Pn.key}function _n(n){return n&&n.type===Pn.value}function yn(n){return n&&n.type===Pn.multi}function S$(n,e,t){if(En(e,t))return[e];{const i=I$(e,t);if(e.length===i.length||t.length===i.length)return[i];const s=e[i.length],r=t[i.length],l=At(n,i);if(Li(l)){const o=Object.keys(l),a=o.indexOf(s),c=o.indexOf(r);if(a!==-1&&c!==-1){const u=Math.min(a,c),f=Math.max(a,c),h=[];for(let d=u;d<=f;d++)h.push(i.concat(o[d]));return h}}if(hi(l)){const o=Math.min(Ai(s),Ai(r)),a=Math.max(Ai(s),Ai(r)),c=[];for(let u=o;u<=a;u++)c.push(i.concat(String(u)));return c}}throw new Error("Failed to create selection")}function h5(n){return Ci(n)?n.focusPath:pn(n.focusPath)}function sc(n){return yn(n)?ks(n.paths):n.focusPath}function rp(n){return yn(n)?Kt(n.paths):n.focusPath}function E$(n,e){return Ku(n.focusPath,e)&&(n.focusPath.length>e.length||Ci(n))}function A$(n,e,t){if(!n)return!1;const i=e.slice(0);if(yn(n))for(;i.length>0;){if(n.pointersMap[ht(i)]===!0)return!0;i.pop()}return ci(n)?t===Pn.key&&En(n.focusPath,e):!!(_n(n)&&(t===Pn.value&&En(n.focusPath,e)||Ku(e,n.focusPath)&&e.length>n.focusPath.length&&(t===Pn.key||t===Pn.value||t===Pn.multi)))}function gw(n,e,t=!1,i=!1){const s=e.selection,r=!i&&yn(s)?ks(s.paths):s.focusPath,l=v$(n,e,r);if(l===null)return null;const o=l,a=l;if(t)return gr(s)||Ci(s)?ui(n,s.anchorPath,s.anchorPath):ui(n,s.anchorPath,a);if(ci(s)){const c=pn(l),u=At(n,c);return Array.isArray(u)||ii(l)?Yn(l,!1):qs(l,!1)}return _n(s)?Yn(l,!1):gr(s)||Ci(s)?ui(n,r,r):ui(n,o,a)}function w$(n,e,t=!1,i=!1){const s=e.selection,r=!i&&yn(s)?Kt(s.paths):s.focusPath,l=g0(n,e,r),o=l,a=l;if(l===null)return null;if(t){const c=Ri(At(n,r))?l5(e,r):e,u=g0(n,c,r);return u===null?null:gr(s)?ui(n,u,u):Ci(s)?ui(n,o,a):ui(n,s.anchorPath,u)}if(ci(s)){const c=pn(l),u=At(n,c);return Array.isArray(u)?Yn(a,!1):qs(a,!1)}return _n(s)?Yn(a,!1):Ci(s)?ui(n,o,a):ui(n,l,l)}function C$(n,e,t){const i=pn(t),s=[Kt(t)],r=g0(At(n,i),e,s);return r?Yn(i.concat(r),!1):vl(t)}function d5(n,e,t){const i=e.selection,s=f5(n,e,t),r=s.findIndex(l=>En(l.path,i.focusPath)&&String(l.type)===String(i.type));return{caret:r!==-1?s[r]:null,previous:r!==-1&&r>0?s[r-1]:null,next:r!==-1&&r<s.length-1?s[r+1]:null}}function k$(n,e,t=!1,i=!0){const s=e.selection,{caret:r,previous:l}=d5(n,e,i);if(t)return yn(s)?null:ui(n,s.anchorPath,s.focusPath);if(r&&l)return Lb(l);const o=pn(s.focusPath),a=At(n,o);return _n(s)&&Array.isArray(a)?ui(n,s.focusPath,s.focusPath):yn(s)&&!Array.isArray(a)?qs(s.focusPath,!1):null}function T$(n,e,t=!1,i=!0){const s=e.selection,{caret:r,next:l}=d5(n,e,i);return t?yn(s)?null:ui(n,s.anchorPath,s.focusPath):r&&l?Lb(l):yn(s)?Yn(s.focusPath,!1):null}function uh(n,e){const t=Bb(n,e);let i=0;for(;i<t.length-1&&t[i+1].length>t[i].length;)i++;const s=t[i];return s.length===0||Array.isArray(At(n,pn(s)))?Yn(s,!1):qs(s,!1)}function rc(n,e){if(e.length===1){const i=ks(e);if(i.op==="replace"||i.op==="move"){const s=Fr(n,i.path);return Yn(s,!1)}}if(!ii(e)&&e.every(i=>i.op==="move")){const i=ks(e),s=e.slice(1);if((i1(i)||za(i))&&i.from!==i.path&&s.every(r=>(i1(r)||za(r))&&r.from===r.path)){const r=Fr(n,i.path);return qs(r,!1)}}const t=e.filter(i=>i.op!=="test"&&i.op!=="remove"&&(i.op!=="move"||i.from!==i.path)&&typeof i.path=="string").map(i=>Fr(n,i.path));return ii(t)?null:{type:Pn.multi,paths:t,anchorPath:ks(t),focusPath:Kt(t),pointersMap:m5(t)}}function m5(n){const e={};return n.forEach(t=>{e[ht(t)]=!0}),e}function lp(n){return{[ht(n)]:!0}}function I$(n,e){let t=0;for(;t<n.length&&t<e.length&&n[t]===e[t];)t++;return n.slice(0,t)}function v0(n){return n&&(ci(n)||_n(n)||yn(n)&&n.paths.length===1)}function vw(n,e){return v0(e)&&Ri(At(n,e.focusPath))?e.focusPath:pn(e.focusPath)}function Ku(n,e){if(n.length<e.length)return!1;for(let t=0;t<e.length;t++)if(n[t]!==e[t])return!1;return!0}function El(n){const e=n.selection;return(ci(e)||_n(e))&&e.edit?{...n,selection:{...e,edit:!1}}:n}function qs(n,e){return{type:Pn.key,anchorPath:n,focusPath:n,pointersMap:lp(n),edit:e}}function Yn(n,e){return{type:Pn.value,anchorPath:n,focusPath:n,pointersMap:lp(n),edit:e}}function Vr(n){return{type:Pn.inside,anchorPath:n,focusPath:n,pointersMap:lp(n)}}function vl(n){return{type:Pn.after,anchorPath:n,focusPath:n,pointersMap:lp(n)}}function ui(n,e,t){const i=S$(n,e,t),s=Ku(t,Kt(i))||Ku(e,ks(i));return{type:Pn.multi,anchorPath:s?ks(i):Kt(i),focusPath:s?Kt(i):ks(i),paths:i,pointersMap:m5(i)}}function bw(n,e,t,i){if(ci(e))return String(Kt(e.focusPath));if(_n(e)){const s=At(n,e.focusPath);return typeof s=="string"?s:i.stringify(s,null,t)}if(yn(e)){if(ii(e.focusPath))return i.stringify(n,null,t);const s=h5(e),r=At(n,s);if(Array.isArray(r))if(e.paths.length===1){const l=At(n,ks(e.paths));return i.stringify(l,null,t)}else return e.paths.map(l=>{const o=At(n,l);return`${i.stringify(o,null,t)},`}).join(`
`);else return e.paths.map(l=>{const o=Kt(l),a=At(n,l);return`${i.stringify(o)}: ${i.stringify(a,null,t)},`}).join(`
`)}return null}function p5(n){return yn(n)?n.paths:[n.focusPath]}function au(n){return(ci(n)||_n(n))&&n.edit}function O$(n,e,t=!0){return e===void 0&&!t?n:{...n,selection:e}}function R$(){return Yn([],!1)}function Dh(n){if(!n)return!1;if(ci(n)||_n(n)||yn(n)&&n.paths.length===1)return!0}function Lb(n){switch(n.type){case dr.key:return qs(n.path,!1);case dr.value:return Yn(n.path,!1);case dr.after:return vl(n.path);case dr.inside:return Vr(n.path)}}function _w(n,e,t){switch(e){case Pn.key:return qs(t,!1);case Pn.value:return Yn(t,!1);case Pn.after:return vl(t);case Pn.inside:return Vr(t);case Pn.multi:return ui(n,t,t)}}function yw(n,e){if(n)return Object.keys(n.pointersMap).some(t=>Ga(t,e)||Ga(e,t))?n:void 0}function fh(n,e,t){const i=pn(e),s=At(n,i);if(hi(s)){const r=Ai(Kt(e));return t.map((l,o)=>({op:"add",path:ht(i.concat(String(r+o))),value:l.value}))}else if(Li(s)){const r=Kt(e),l=Object.keys(s),o=kf(l,r,!0);return[...t.map(a=>{const c=Tf(a.key,l);return{op:"add",path:ht(i.concat(c)),value:a.value}}),...o.map(a=>Xo(i,a))]}else throw new Error("Cannot create insert operations: parent must be an Object or Array")}function Sw(n,e,t){const i=At(n,e);if(Array.isArray(i)){const s=i.length;return t.map((r,l)=>({op:"add",path:ht(e.concat(String(s+l))),value:r.value}))}else return t.map(s=>{const r=Tf(s.key,Object.keys(i));return{op:"add",path:ht(e.concat(r)),value:s.value}})}function If(n,e,t,i){const s=e.filter(o=>o!==t),r=Tf(i,s),l=kf(e,t,!1);return[{op:"move",from:ht(n.concat(t)),path:ht(n.concat(r))},...l.map(o=>Xo(n,o))]}function D$(n,e,t){const i=ks(e),s=pn(i),r=At(n,s);if(hi(r)){const l=ks(e),o=l?Ai(Kt(l)):0;return[...b0(e),...t.map((a,c)=>({op:"add",path:ht(s.concat(String(c+o))),value:a.value}))]}else if(Li(r)){const l=Kt(e),o=pn(l),a=Kt(l),c=Object.keys(r),u=kf(c,a,!1),f=new Set(e.map(d=>Kt(d))),h=c.filter(d=>!f.has(d));return[...b0(e),...t.map(d=>{const p=Tf(d.key,h);return{op:"add",path:ht(o.concat(p)),value:d.value}}),...u.map(d=>Xo(o,d))]}else throw new Error("Cannot create replace operations: parent must be an Object or Array")}function N$(n,e){const t=Kt(e);if(ii(t))throw new Error("Cannot duplicate root object");const i=pn(t),s=Kt(t),r=At(n,i);if(hi(r)){const l=Kt(e),o=l?Ai(Kt(l))+1:0;return[...e.map((a,c)=>({op:"copy",from:ht(a),path:ht(i.concat(String(c+o)))}))]}else if(Li(r)){const l=Object.keys(r),o=kf(l,s,!1);return[...e.map(a=>{const c=Kt(a),u=Tf(c,l);return{op:"copy",from:ht(a),path:ht(i.concat(u))}}),...o.map(a=>Xo(i,a))]}else throw new Error("Cannot create duplicate operations: parent must be an Object or Array")}function P$(n,e){if(_n(e))return[{op:"move",from:ht(e.focusPath),path:""}];if(yn(e)){const t=pn(e.focusPath),i=At(n,t);if(hi(i))return[{op:"replace",path:"",value:e.paths.map(r=>{const l=Ai(Kt(r));return i[l]})}];if(Li(i)){const s={};return e.paths.forEach(r=>{const l=String(Kt(r));s[l]=i[l]}),[{op:"replace",path:"",value:s}]}}else throw new Error("Cannot create extract operations: parent must be an Object or Array");throw new Error("Cannot extract: unsupported type of selection "+JSON.stringify(e))}function Ew(n,e,t,i){if(ci(e)){const s=HO(t,i),r=pn(e.focusPath),l=At(n,r),o=Object.keys(l),a=Kt(e.focusPath);return If(r,o,a,typeof s=="string"?s:t)}if(_n(e)||yn(e)&&ii(e.focusPath))try{return[{op:"replace",path:ht(e.focusPath),value:qv(t,s=>Hv(s,i))}]}catch{return[{op:"replace",path:ht(e.focusPath),value:t}]}if(yn(e)){const s=ag(t,i);return D$(n,e.paths,s)}if(gr(e)){const s=ag(t,i),r=e.focusPath,l=pn(r),o=At(n,l);if(hi(o)){const a=Ai(Kt(r)),c=l.concat(String(a+1));return fh(n,c,s)}else if(Li(o)){const a=String(Kt(r)),c=Object.keys(o);if(ii(c)||Kt(c)===a)return Sw(n,l,s);{const u=c.indexOf(a),f=c[u+1],h=l.concat(f);return fh(n,h,s)}}else throw new Error("Cannot create insert operations: parent must be an Object or Array")}if(Ci(e)){const s=ag(t,i),r=e.focusPath,l=At(n,r);if(hi(l)){const o=r.concat("0");return fh(n,o,s)}else if(Li(l)){const o=Object.keys(l);if(ii(o))return Sw(n,r,s);{const a=ks(o),c=r.concat(a);return fh(n,c,s)}}else throw new Error("Cannot create insert operations: parent must be an Object or Array")}throw new Error("Cannot insert: unsupported type of selection "+JSON.stringify(e))}function M$(n,e,t){const i=t.beforePath,s=t.append,r=pn(e.focusPath),l=At(n,r);if(!s&&!(i&&Ku(i,r)&&i.length>r.length))return[];const o=sc(e),a=rp(e),c=Kt(o),u=Kt(a),f=i?i[r.length]:void 0;if(Li(l)){const h=Object.keys(l),d=h.indexOf(c),p=h.indexOf(u),v=s?h.length:h.indexOf(f);if(d!==-1&&p!==-1&&v!==-1)return v>d?[...h.slice(d,p+1),...h.slice(v,h.length)].map(y=>Xo(r,y)):[...h.slice(v,d),...h.slice(p+1,h.length)].map(y=>Xo(r,y))}else if(hi(l)){const h=Ai(c),d=Ai(u),p=f!==void 0?Ai(f):l.length,v=d-h+1;return p<h?RS(v,y=>({op:"move",from:ht(r.concat(String(h+y))),path:ht(r.concat(String(p+y)))})):RS(v,()=>({op:"move",from:ht(r.concat(String(h))),path:ht(r.concat(String(p)))}))}else throw new Error("Cannot create move operations: parent must be an Object or Array")}function B$(n,e,t){if(t==="object")return{};if(t==="array")return[];if(t==="structure"){const i=h5(e),s=At(n,i);if(Array.isArray(s)&&!ii(s)){const r=ks(s);return Ri(r)?yH(r,l=>Array.isArray(l)?[]:ji(l)?void 0:""):""}}return""}function b0(n){return n.map(e=>({op:"remove",path:ht(e)})).reverse()}function Xo(n,e){return{op:"move",from:ht(n.concat(e)),path:ht(n.concat(e))}}function ag(n,e){const t=/^\s*{/.test(n),i=/^\s*\[/.test(n),s=HO(n,e),r=s!==void 0?s:qv(n,l=>Hv(l,e));return t&&ji(r)||i&&Array.isArray(r)?[{key:"New item",value:r}]:Array.isArray(r)?r.map((l,o)=>({key:"New item "+o,value:l})):ji(r)?Object.keys(r).map(l=>({key:l,value:r[l]})):[{key:"New item",value:r}]}function Aw(n,e){if(ci(e)){const t=pn(e.focusPath),i=At(n,t),s=Object.keys(i),r=Kt(e.focusPath),o=If(t,s,r,""),a=rc(n,o);return{operations:o,newSelection:a}}if(_n(e))return{operations:[{op:"replace",path:ht(e.focusPath),value:""}],newSelection:e};if(yn(e)){const t=b0(e.paths),i=Kt(e.paths);if(ii(i)){const l=[{op:"replace",path:"",value:""}],o=Yn([],!1);return{operations:l,newSelection:o}}const s=pn(i),r=At(n,s);if(hi(r)){const l=ks(e.paths),o=Ai(Kt(l)),a=o===0?Vr(s):vl(s.concat(String(o-1)));return{operations:t,newSelection:a}}else if(Li(r)){const l=Object.keys(r),o=ks(e.paths),a=Kt(o),c=l.indexOf(a),u=l[c-1],f=c===0?Vr(s):vl(s.concat(u));return{operations:t,newSelection:f}}else throw new Error("Cannot create remove operations: parent must be an Object or Array")}throw new Error("Cannot remove: unsupported type of selection "+JSON.stringify(e))}function L$(n,e){return iO(n,e,{before:(t,i,s)=>{if(Z4(i)){const r=Ql(i.path);return{revertOperations:[...s,...ww(t,r)]}}if(za(i)){const r=Ql(i.from);return{revertOperations:[...s,...ww(t,r)]}}return{revertOperations:s}}})}function ww(n,e){const t=pn(e),i=Kt(e),s=At(n,t);if(Li(s)){const r=Object.keys(s);return kf(r,i,!1).map(o=>Xo(t,o))}return[]}function V$(n,e,t){const i=t!=null&&t.activeItem?Tw(t.activeItem):void 0,s=e.findIndex(a=>En(i,Tw(a))),r=s!==-1?s:(t==null?void 0:t.activeIndex)<e.length?t==null?void 0:t.activeIndex:e.length>0?0:-1,l=e.map((a,c)=>({...a,active:c===r})),o=l[r];return{items:l,itemsMap:jv(l,a=>ht(a.path)),activeItem:o,activeIndex:r}}function U$(n){const e=n.activeIndex<n.items.length-1?n.activeIndex+1:n.items.length>0?0:-1,t=n.items[e],i=n.items.map((s,r)=>({...s,active:r===e}));return{...n,items:i,itemsMap:jv(i,s=>ht(s.path)),activeItem:t,activeIndex:e}}function W$(n){const e=n.activeIndex>0?n.activeIndex-1:n.items.length-1,t=n.items[e],i=n.items.map((s,r)=>({...s,active:r===e}));return{...n,items:i,itemsMap:jv(i,s=>ht(s.path)),activeItem:t,activeIndex:e}}function g5(n,e,t,i=1/0){const s=[],r=[];function l(a){s.length<i&&s.push(a)}function o(a,c){if(hi(c)){const u=r.length;r.push("0");for(let f=0;f<c.length;f++)if(r[u]=String(f),o(a,c[f]),s.length>=i)return;r.pop()}else if(Li(c)){const u=Object.keys(c),f=r.length;r.push("");for(const h of u)if(r[f]=h,Cw(h,a,r,vr.key,l),o(a,c[h]),s.length>=i)return;r.pop()}else Cw(String(c),a,r,vr.value,l)}if(typeof n=="string"&&n!==""){const a=n.toLowerCase();o(a,e)}return s}function Cw(n,e,t,i,s){const r=n.toLowerCase();let l=0,o=-1,a=-1;do a=r.indexOf(e,o),a!==-1&&(o=a+e.length,s({path:t.slice(0),field:i,fieldIndex:l,start:a,end:o}),l++);while(a!==-1)}function _0(n,e,t,i){return n.substring(0,t)+e+n.substring(i)}function kw(n,e,t){let i=n;return Iq(t,s=>{i=_0(i,e,s.start,s.end)}),i}function F$(n,e,t,i,s){const{field:r,path:l,start:o,end:a}=i;if(r===vr.key){const c=pn(l),u=At(n,c),f=Kt(l),h=Object.keys(u),d=_0(f,t,o,a),p=If(c,h,f,d);return{newSelection:rc(n,p),operations:p}}else if(r===vr.value){const c=At(n,l);if(c===void 0)throw new Error(`Cannot replace: path not found ${ht(l)}`);const u=typeof c=="string"?c:String(c),f=ht(l),h=Cf(c,e.enforceStringMap,f,s),d=_0(u,t,o,a),p=[{op:"replace",path:ht(l),value:h?d:pf(d,s)}];return{newSelection:rc(n,p),operations:p}}else throw new Error(`Cannot replace: unknown type of search result field ${r}`)}function j$(n,e,t,i,s){const r=g5(t,n,e,1/0),l=[];for(let c=0;c<r.length;c++){const u=r[c-1],f=r[c];c===0||f.field!==u.field||!En(f.path,u.path)?l.push({path:f.path,field:f.field,items:[f]}):Kt(l).items.push(f)}l.sort((c,u)=>c.field!==u.field?c.field===vr.key?1:-1:u.path.length-c.path.length);let o=[],a;return l.forEach(c=>{const{field:u,path:f,items:h}=c;if(u===vr.key){const d=pn(f),p=At(n,d),v=Kt(f),y=Object.keys(p),b=kw(v,i,h),S=If(d,y,v,b);o=o.concat(S),a=rc(n,S)}else if(u===vr.value){const d=At(n,f);if(d===void 0)throw new Error(`Cannot replace: path not found ${ht(f)}`);const p=typeof d=="string"?d:String(d),v=ht(f),y=Cf(d,e.enforceStringMap,v,s),b=kw(p,i,h),S=[{op:"replace",path:ht(f),value:y?b:pf(b,s)}];o=o.concat(S),a=rc(n,S)}else throw new Error(`Cannot replace: unknown type of search result field ${u}`)}),{operations:o,newSelection:a}}function H$(n,e){const t=[];let i=0;for(const r of e){const l=n.slice(i,r.start);l!==""&&t.push({type:"normal",text:l,active:!1});const o=n.slice(r.start,r.end);t.push({type:"highlight",text:o,active:r.active}),i=r.end}const s=Kt(e);return s.end<n.length&&t.push({type:"normal",text:n.slice(s.end),active:!1}),t}function Tw(n){return n.path.concat(n.field,String(n.fieldIndex))}function q$(n,e){var i;const t=(i=n==null?void 0:n[e])==null?void 0:i.filter(s=>s.field===vr.key);if(!(!t||t.length===0))return t}function Iw(n,e){var i;const t=(i=n==null?void 0:n[e])==null?void 0:i.filter(s=>s.field===vr.value);if(!(!t||t.length===0))return t}function y0(n){var e;if(navigator.clipboard)return navigator.clipboard.writeText(n);if((e=document.queryCommandSupported)!=null&&e.call(document,"copy")){const t=document.createElement("textarea");t.value=n,t.style.position="fixed",t.style.opacity="0",document.body.appendChild(t),t.select();try{document.execCommand("copy")}catch(i){console.error(i)}finally{document.body.removeChild(t)}}else console.error("Copy failed.")}function z$(n){let e,t,i,s,r,l,o,a,c;return l=new Wt({props:{data:bf}}),{c(){e=E("div"),t=E("div"),i=L(n[0]),s=P(),r=E("button"),ce(l.$$.fragment),this.h()},l(u){e=A(u,"DIV",{class:!0});var f=w(e);t=A(f,"DIV",{class:!0});var h=w(t);i=V(h,n[0]),h.forEach(g),s=M(f),r=A(f,"BUTTON",{type:!0,class:!0});var d=w(r);ge(l.$$.fragment,d),d.forEach(g),f.forEach(g),this.h()},h(){_(t,"class","jse-title svelte-1djqugc"),_(r,"type","button"),_(r,"class","jse-close svelte-1djqugc"),_(e,"class","jse-header svelte-1djqugc")},m(u,f){B(u,e,f),m(e,t),m(t,i),m(e,s),m(e,r),ue(l,r,null),o=!0,a||(c=se(r,"click",n[1]),a=!0)},p(u,[f]){(!o||f&1)&&Ce(i,u[0])},i(u){o||(D(l.$$.fragment,u),o=!0)},o(u){U(l.$$.fragment,u),o=!1},d(u){u&&g(e),fe(l),a=!1,c()}}}function G$(n,e,t){let{title:i="Modal"}=e;const{close:s}=Bn("simple-modal");return n.$$set=r=>{"title"in r&&t(0,i=r.title)},[i,s]}let K$=class extends nt{constructor(e){super(),it(this,e,G$,z$,an,{title:0})}};const v5=K$;function Q$(n){let e,t,i,s,r,l,o,a,c,u,f,h,d,p,v,y,b,S,I,T,C,k,R,O,N,F,W,z,Y,H,K,j;return t=new v5({props:{title:"Copying and pasting"}}),{c(){e=E("div"),ce(t.$$.fragment),i=P(),s=E("div"),r=E("div"),l=L("These actions are unavailable via the menu. Please use:"),o=P(),a=E("div"),c=E("div"),u=E("div"),f=L(n[1]),h=L("+C"),d=L(`
        for copy`),p=P(),v=E("div"),y=E("div"),b=L(n[1]),S=L("+X"),I=L(`
        for cut`),T=P(),C=E("div"),k=E("div"),R=L(n[1]),O=L("+V"),N=L(`
        for paste`),F=P(),W=E("div"),z=E("button"),Y=L("Close"),this.h()},l(J){e=A(J,"DIV",{class:!0});var Z=w(e);ge(t.$$.fragment,Z),i=M(Z),s=A(Z,"DIV",{class:!0});var q=w(s);r=A(q,"DIV",{});var X=w(r);l=V(X,"These actions are unavailable via the menu. Please use:"),X.forEach(g),o=M(q),a=A(q,"DIV",{class:!0});var ne=w(a);c=A(ne,"DIV",{class:!0});var Q=w(c);u=A(Q,"DIV",{class:!0});var re=w(u);f=V(re,n[1]),h=V(re,"+C"),re.forEach(g),d=V(Q,`
        for copy`),Q.forEach(g),p=M(ne),v=A(ne,"DIV",{class:!0});var be=w(v);y=A(be,"DIV",{class:!0});var le=w(y);b=V(le,n[1]),S=V(le,"+X"),le.forEach(g),I=V(be,`
        for cut`),be.forEach(g),T=M(ne),C=A(ne,"DIV",{class:!0});var he=w(C);k=A(he,"DIV",{class:!0});var Ie=w(k);R=V(Ie,n[1]),O=V(Ie,"+V"),Ie.forEach(g),N=V(he,`
        for paste`),he.forEach(g),ne.forEach(g),F=M(q),W=A(q,"DIV",{class:!0});var G=w(W);z=A(G,"BUTTON",{type:!0,class:!0});var ve=w(z);Y=V(ve,"Close"),ve.forEach(g),G.forEach(g),q.forEach(g),Z.forEach(g),this.h()},h(){_(u,"class","jse-key svelte-wp98us"),_(c,"class","jse-shortcut"),_(y,"class","jse-key svelte-wp98us"),_(v,"class","jse-shortcut"),_(k,"class","jse-key svelte-wp98us"),_(C,"class","jse-shortcut"),_(a,"class","jse-shortcuts svelte-wp98us"),_(z,"type","button"),_(z,"class","jse-primary svelte-wp98us"),_(W,"class","jse-actions svelte-wp98us"),_(s,"class","jse-contents svelte-wp98us"),_(e,"class","jse-modal jse-copy-paste svelte-wp98us")},m(J,Z){B(J,e,Z),ue(t,e,null),m(e,i),m(e,s),m(s,r),m(r,l),m(s,o),m(s,a),m(a,c),m(c,u),m(u,f),m(u,h),m(c,d),m(a,p),m(a,v),m(v,y),m(y,b),m(y,S),m(v,I),m(a,T),m(a,C),m(C,k),m(k,R),m(k,O),m(C,N),m(s,F),m(s,W),m(W,z),m(z,Y),H=!0,K||(j=se(z,"click",n[0]),K=!0)},p:Ke,i(J){H||(D(t.$$.fragment,J),H=!0)},o(J){U(t.$$.fragment,J),H=!1},d(J){J&&g(e),fe(t),K=!1,j()}}}function X$(n){const{close:e}=Bn("simple-modal");return[e,xO?"":"Ctrl"]}class Y$ extends nt{constructor(e){super(),it(this,e,X$,Q$,an,{})}}const J$=Y$;function Z$(n){let e,t;return{c(){e=E("div"),t=L("Repair invalid JSON, then click apply"),this.h()},l(i){e=A(i,"DIV",{slot:!0,class:!0});var s=w(e);t=V(s,"Repair invalid JSON, then click apply"),s.forEach(g),this.h()},h(){_(e,"slot","left"),_(e,"class","jse-info svelte-1puchbn")},m(i,s){B(i,e,s),m(e,t)},p:Ke,d(i){i&&g(e)}}}function x$(n){let e,t;return e=new sa({props:{type:"success",message:"JSON is valid now and can be parsed.",actions:n[5]}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s&32&&(r.actions=i[5]),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function $$(n){let e,t;return e=new sa({props:{type:"error",icon:ia,message:`Cannot parse JSON: ${n[2].message}`,actions:n[6]}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s&4&&(r.message=`Cannot parse JSON: ${i[2].message}`),s&64&&(r.actions=i[6]),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function eee(n){let e,t,i,s,r,l,o,a,c,u;t=new xv({props:{items:n[7],$$slots:{left:[Z$]},$$scope:{ctx:n}}});const f=[$$,x$],h=[];function d(p,v){return p[2]?0:1}return s=d(n),r=h[s]=f[s](n),{c(){e=E("div"),ce(t.$$.fragment),i=P(),r.c(),l=P(),o=E("textarea"),this.h()},l(p){e=A(p,"DIV",{class:!0});var v=w(e);ge(t.$$.fragment,v),i=M(v),r.l(v),l=M(v),o=A(v,"TEXTAREA",{class:!0,autocomplete:!0,autocapitalize:!0,spellcheck:!0}),w(o).forEach(g),v.forEach(g),this.h()},h(){o.value=n[0],o.readOnly=n[1],_(o,"class","jse-json-text svelte-1puchbn"),_(o,"autocomplete","off"),_(o,"autocapitalize","off"),_(o,"spellcheck","false"),_(e,"class","jse-json-repair-component svelte-1puchbn")},m(p,v){B(p,e,v),ue(t,e,null),m(e,i),h[s].m(e,null),m(e,l),m(e,o),n[19](o),n[20](e),a=!0,c||(u=se(o,"input",n[8]),c=!0)},p(p,[v]){const y={};v&128&&(y.items=p[7]),v&134217728&&(y.$$scope={dirty:v,ctx:p}),t.$set(y);let b=s;s=d(p),s===b?h[s].p(p,v):(Le(),U(h[b],1,1,()=>{h[b]=null}),Ve(),r=h[s],r?r.p(p,v):(r=h[s]=f[s](p),r.c()),D(r,1),r.m(e,l)),(!a||v&1)&&(o.value=p[0]),(!a||v&2)&&(o.readOnly=p[1])},i(p){a||(D(t.$$.fragment,p),D(r),a=!0)},o(p){U(t.$$.fragment,p),U(r),a=!1},d(p){p&&g(e),fe(t),h[s].d(),n[19](null),n[20](null),c=!1,u()}}}function tee(n,e,t){let i,s,r,l,o,a,c,u,{text:f=""}=e,{readOnly:h=!1}=e,{onParse:d}=e,{onRepair:p}=e,{onChange:v=null}=e,{onApply:y}=e,{onCancel:b}=e,{onRenderMenu:S=Hn}=e;const I=Is("jsoneditor:JSONRepair");let T,C;function k(H){try{return d(H),null}catch(K){return zv(H,K.message)}}function R(H){try{return p(H),!0}catch{return!1}}function O(){C&&i&&i.position!=null&&(C.setSelectionRange(i.position,i.position),setTimeout(()=>{C.focus()}))}function N(H){I("handleChange");const K=H.target.value;f!==K&&(t(0,f=K),v&&v(f))}function F(){y(f)}function W(){try{t(0,f=p(f)),v&&v(f)}catch{}}function z(H){Vt[H?"unshift":"push"](()=>{C=H,t(4,C)})}function Y(H){Vt[H?"unshift":"push"](()=>{T=H,t(3,T)})}return n.$$set=H=>{"text"in H&&t(0,f=H.text),"readOnly"in H&&t(1,h=H.readOnly),"onParse"in H&&t(9,d=H.onParse),"onRepair"in H&&t(10,p=H.onRepair),"onChange"in H&&t(11,v=H.onChange),"onApply"in H&&t(12,y=H.onApply),"onCancel"in H&&t(13,b=H.onCancel),"onRenderMenu"in H&&t(14,S=H.onRenderMenu)},n.$$.update=()=>{n.$$.dirty&1&&t(2,i=k(f)),n.$$.dirty&1&&t(17,s=R(f)),n.$$.dirty&4&&I("error",i),n.$$.dirty&8192&&t(18,r=[{space:!0},{icon:bf,title:"Cancel repair",className:"jse-cancel",onClick:b}]),n.$$.dirty&278528&&t(7,l=S("repair",r)||r),n.$$.dirty&229376&&t(6,c=s?[o,a]:[o]),n.$$.dirty&2&&t(5,u=[{icon:A1,text:"Apply",title:"Apply fixed JSON",disabled:h,onClick:F}])},t(15,o={icon:tG,text:"Show me",title:"Scroll to the error location",onClick:O}),t(16,a={icon:Xv,text:"Auto repair",title:"Automatically repair JSON",onClick:W}),[f,h,i,T,C,u,c,l,N,d,p,v,y,b,S,o,a,s,r,z,Y]}class nee extends nt{constructor(e){super(),it(this,e,tee,eee,an,{text:0,readOnly:1,onParse:9,onRepair:10,onChange:11,onApply:12,onCancel:13,onRenderMenu:14})}}const iee=nee;function see(n){let e,t,i,s;function r(o){n[7](o)}let l={onParse:n[1],onRepair:n[2],onApply:n[4],onCancel:n[5],onRenderMenu:n[3]};return n[0]!==void 0&&(l.text=n[0]),t=new iee({props:l}),Vt.push(()=>Us(t,"text",r)),{c(){e=E("div"),ce(t.$$.fragment),this.h()},l(o){e=A(o,"DIV",{class:!0});var a=w(e);ge(t.$$.fragment,a),a.forEach(g),this.h()},h(){_(e,"class","jse-modal jse-repair svelte-1ffm3pm")},m(o,a){B(o,e,a),ue(t,e,null),s=!0},p(o,[a]){const c={};a&2&&(c.onParse=o[1]),a&4&&(c.onRepair=o[2]),a&8&&(c.onRenderMenu=o[3]),!i&&a&1&&(i=!0,c.text=o[0],Js(()=>i=!1)),t.$set(c)},i(o){s||(D(t.$$.fragment,o),s=!0)},o(o){U(t.$$.fragment,o),s=!1},d(o){o&&g(e),fe(t)}}}function ree(n,e,t){let{text:i}=e,{onParse:s}=e,{onRepair:r}=e,{onApply:l}=e,{onRenderMenu:o}=e;const{close:a}=Bn("simple-modal");function c(h){a(),l(h)}function u(){a()}function f(h){i=h,t(0,i)}return n.$$set=h=>{"text"in h&&t(0,i=h.text),"onParse"in h&&t(1,s=h.onParse),"onRepair"in h&&t(2,r=h.onRepair),"onApply"in h&&t(6,l=h.onApply),"onRenderMenu"in h&&t(3,o=h.onRenderMenu)},[i,s,r,o,c,u,l,f]}class lee extends nt{constructor(e){super(),it(this,e,ree,see,an,{text:0,onParse:1,onRepair:2,onApply:6,onRenderMenu:3})}}const oee=lee;function Ow(n,e,t){const i=n.slice();return i[11]=e[t],i}const aee=n=>({}),Rw=n=>({});function Dw(n){let e,t;return e=new Wt({props:{data:n[11].icon}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s&1&&(r.data=i[11].icon),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function Nw(n){let e,t,i,s=n[11].text+"",r,l,o,a,c,u,f,h=n[11].icon&&Dw(n);function d(){return n[9](n[11])}return{c(){e=E("li"),t=E("button"),h&&h.c(),i=P(),r=L(s),a=P(),this.h()},l(p){e=A(p,"LI",{class:!0});var v=w(e);t=A(v,"BUTTON",{type:!0,title:!0,class:!0});var y=w(t);h&&h.l(y),i=M(y),r=V(y,s),y.forEach(g),a=M(v),v.forEach(g),this.h()},h(){_(t,"type","button"),_(t,"title",l=n[11].title),t.disabled=o=n[11].disabled,_(t,"class","svelte-kae4bx"),_(e,"class","svelte-kae4bx")},m(p,v){B(p,e,v),m(e,t),h&&h.m(t,null),m(t,i),m(t,r),m(e,a),c=!0,u||(f=se(t,"click",d),u=!0)},p(p,v){n=p,n[11].icon?h?(h.p(n,v),v&1&&D(h,1)):(h=Dw(n),h.c(),D(h,1),h.m(t,i)):h&&(Le(),U(h,1,1,()=>{h=null}),Ve()),(!c||v&1)&&s!==(s=n[11].text+"")&&Ce(r,s),(!c||v&1&&l!==(l=n[11].title))&&_(t,"title",l),(!c||v&1&&o!==(o=n[11].disabled))&&(t.disabled=o)},i(p){c||(D(h),c=!0)},o(p){U(h),c=!1},d(p){p&&g(e),h&&h.d(),u=!1,f()}}}function cee(n){let e,t,i,s,r,l,o,a,c,u;const f=n[8].defaultItem,h=os(f,n,n[7],Rw);s=new Wt({props:{data:Mr}});let d=n[0],p=[];for(let y=0;y<d.length;y+=1)p[y]=Nw(Ow(n,d,y));const v=y=>U(p[y],1,1,()=>{p[y]=null});return{c(){e=E("div"),h&&h.c(),t=P(),i=E("button"),ce(s.$$.fragment),r=P(),l=E("div"),o=E("ul");for(let y=0;y<p.length;y+=1)p[y].c();this.h()},l(y){e=A(y,"DIV",{class:!0,title:!0});var b=w(e);h&&h.l(b),t=M(b),i=A(b,"BUTTON",{type:!0,class:!0,"data-type":!0});var S=w(i);ge(s.$$.fragment,S),S.forEach(g),r=M(b),l=A(b,"DIV",{class:!0,style:!0});var I=w(l);o=A(I,"UL",{class:!0});var T=w(o);for(let C=0;C<p.length;C+=1)p[C].l(T);T.forEach(g),I.forEach(g),b.forEach(g),this.h()},h(){_(i,"type","button"),_(i,"class","jse-open-dropdown svelte-kae4bx"),_(i,"data-type","jse-open-dropdown"),i.disabled=n[4],xe(i,"jse-visible",n[3]),_(o,"class","svelte-kae4bx"),_(l,"class","jse-dropdown-items svelte-kae4bx"),rt(l,"width",n[2]),xe(l,"jse-visible",n[3]),_(e,"class","jse-dropdown-button svelte-kae4bx"),_(e,"title",n[1])},m(y,b){B(y,e,b),h&&h.m(e,null),m(e,t),m(e,i),ue(s,i,null),m(e,r),m(e,l),m(l,o);for(let S=0;S<p.length;S+=1)p[S].m(o,null);a=!0,c||(u=[se(i,"click",n[5]),se(e,"click",n[6])],c=!0)},p(y,[b]){if(h&&h.p&&(!a||b&128)&&as(h,f,y,y[7],a?us(f,y[7],b,aee):cs(y[7]),Rw),(!a||b&16)&&(i.disabled=y[4]),(!a||b&8)&&xe(i,"jse-visible",y[3]),b&1){d=y[0];let S;for(S=0;S<d.length;S+=1){const I=Ow(y,d,S);p[S]?(p[S].p(I,b),D(p[S],1)):(p[S]=Nw(I),p[S].c(),D(p[S],1),p[S].m(o,null))}for(Le(),S=d.length;S<p.length;S+=1)v(S);Ve()}(!a||b&4)&&rt(l,"width",y[2]),(!a||b&8)&&xe(l,"jse-visible",y[3]),(!a||b&2)&&_(e,"title",y[1])},i(y){if(!a){D(h,y),D(s.$$.fragment,y);for(let b=0;b<d.length;b+=1)D(p[b]);a=!0}},o(y){U(h,y),U(s.$$.fragment,y),p=p.filter(Boolean);for(let b=0;b<p.length;b+=1)U(p[b]);a=!1},d(y){y&&g(e),h&&h.d(y),fe(s),Ft(p,y),c=!1,on(u)}}}function uee(n,e,t){let i,{$$slots:s={},$$scope:r}=e,{items:l=[]}=e,{title:o=void 0}=e,{width:a="120px"}=e,c=!1;function u(){const p=c;setTimeout(()=>t(3,c=!p))}function f(){t(3,c=!1)}function h(p){na(p)==="Escape"&&(p.preventDefault(),t(3,c=!1))}Mi(()=>{document.addEventListener("click",f),document.addEventListener("keydown",h)}),br(()=>{document.removeEventListener("click",f),document.removeEventListener("keydown",h)});const d=p=>p.onClick();return n.$$set=p=>{"items"in p&&t(0,l=p.items),"title"in p&&t(1,o=p.title),"width"in p&&t(2,a=p.width),"$$scope"in p&&t(7,r=p.$$scope)},n.$$.update=()=>{n.$$.dirty&1&&t(4,i=l.every(p=>p.disabled===!0))},[l,o,a,c,i,u,f,r,s,d]}class fee extends nt{constructor(e){super(),it(this,e,uee,cee,an,{items:0,title:1,width:2})}}const cg=fee;var hee={prefix:"far",iconName:"lightbulb",icon:[384,512,[128161],"f0eb","M281.2 248.9C295.6 228.3 304 203.2 304 176c0-70.7-57.3-128-128-128S48 105.3 48 176c0 27.2 8.4 52.3 22.8 72.9c3.7 5.3 8.1 11.3 12.8 17.7l0 0c12.9 17.7 28.3 38.9 39.8 59.8c10.4 19 15.7 38.8 18.3 57.5H93c-2.2-12-5.9-23.7-11.8-34.5c-9.9-18-22.2-34.9-34.5-51.8l0 0 0 0c-5.2-7.1-10.4-14.2-15.4-21.4C11.6 247.9 0 213.3 0 176C0 78.8 78.8 0 176 0s176 78.8 176 176c0 37.3-11.6 71.9-31.4 100.3c-5 7.2-10.2 14.3-15.4 21.4l0 0 0 0c-12.3 16.8-24.6 33.7-34.5 51.8c-5.9 10.8-9.6 22.5-11.8 34.5H210.4c2.6-18.7 7.9-38.6 18.3-57.5c11.5-20.9 26.9-42.1 39.8-59.8l0 0 0 0 0 0c4.7-6.4 9-12.4 12.7-17.7zM176 128c-26.5 0-48 21.5-48 48c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-44.2 35.8-80 80-80c8.8 0 16 7.2 16 16s-7.2 16-16 16zm0 384c-44.2 0-80-35.8-80-80V416H256v16c0 44.2-35.8 80-80 80z"]},dee={prefix:"far",iconName:"square-check",icon:[448,512,[9745,9989,61510,"check-square"],"f14a","M211.8 339.8C200.9 350.7 183.1 350.7 172.2 339.8L108.2 275.8C97.27 264.9 97.27 247.1 108.2 236.2C119.1 225.3 136.9 225.3 147.8 236.2L192 280.4L300.2 172.2C311.1 161.3 328.9 161.3 339.8 172.2C350.7 183.1 350.7 200.9 339.8 211.8L211.8 339.8zM0 96C0 60.65 28.65 32 64 32H384C419.3 32 448 60.65 448 96V416C448 451.3 419.3 480 384 480H64C28.65 480 0 451.3 0 416V96zM48 96V416C48 424.8 55.16 432 64 432H384C392.8 432 400 424.8 400 416V96C400 87.16 392.8 80 384 80H64C55.16 80 48 87.16 48 96z"]},Kd=dee,Qd={prefix:"far",iconName:"square",icon:[448,512,[9632,9723,9724,61590],"f0c8","M384 32C419.3 32 448 60.65 448 96V416C448 451.3 419.3 480 384 480H64C28.65 480 0 451.3 0 416V96C0 60.65 28.65 32 64 32H384zM384 80H64C55.16 80 48 87.16 48 96V416C48 424.8 55.16 432 64 432H384C392.8 432 400 424.8 400 416V96C400 87.16 392.8 80 384 80z"]},mee={prefix:"far",iconName:"clock",icon:[512,512,[128339,"clock-four"],"f017","M464 256A208 208 0 1 1 48 256a208 208 0 1 1 416 0zM0 256a256 256 0 1 0 512 0A256 256 0 1 0 0 256zM232 120V256c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2V120c0-13.3-10.7-24-24-24s-24 10.7-24 24z"]};function pee(n){let e,t,i,s,r,l,o;return t=new Wt({props:{data:Yv}}),{c(){e=E("button"),ce(t.$$.fragment),i=L(" Edit value"),this.h()},l(a){e=A(a,"BUTTON",{type:!0,slot:!0,title:!0,class:!0});var c=w(e);ge(t.$$.fragment,c),i=V(c," Edit value"),c.forEach(g),this.h()},h(){_(e,"type","button"),_(e,"slot","defaultItem"),_(e,"title","Edit the value (Double-click on the value)"),e.disabled=s=!n[2],_(e,"class","svelte-1jwirqu")},m(a,c){B(a,e,c),ue(t,e,null),m(e,i),r=!0,l||(o=se(e,"click",n[18]),l=!0)},p(a,c){(!r||c[0]&4&&s!==(s=!a[2]))&&(e.disabled=s)},i(a){r||(D(t.$$.fragment,a),r=!0)},o(a){U(t.$$.fragment,a),r=!1},d(a){a&&g(e),fe(t),l=!1,o()}}}function gee(n){let e,t,i,s,r,l,o;return t=new Wt({props:{data:E1}}),{c(){e=E("button"),ce(t.$$.fragment),i=L(" Cut"),this.h()},l(a){e=A(a,"BUTTON",{type:!0,slot:!0,title:!0,class:!0});var c=w(e);ge(t.$$.fragment,c),i=V(c," Cut"),c.forEach(g),this.h()},h(){_(e,"type","button"),_(e,"slot","defaultItem"),_(e,"title","Cut selected contents, formatted with indentation (Ctrl+X)"),e.disabled=s=!n[1],_(e,"class","svelte-1jwirqu")},m(a,c){B(a,e,c),ue(t,e,null),m(e,i),r=!0,l||(o=se(e,"click",n[19]),l=!0)},p(a,c){(!r||c[0]&2&&s!==(s=!a[1]))&&(e.disabled=s)},i(a){r||(D(t.$$.fragment,a),r=!0)},o(a){U(t.$$.fragment,a),r=!1},d(a){a&&g(e),fe(t),l=!1,o()}}}function vee(n){let e,t,i,s,r,l,o;return t=new Wt({props:{data:Pu}}),{c(){e=E("button"),ce(t.$$.fragment),i=L(" Copy"),this.h()},l(a){e=A(a,"BUTTON",{type:!0,slot:!0,title:!0,class:!0});var c=w(e);ge(t.$$.fragment,c),i=V(c," Copy"),c.forEach(g),this.h()},h(){_(e,"type","button"),_(e,"slot","defaultItem"),_(e,"title","Copy selected contents, formatted with indentation (Ctrl+C)"),e.disabled=s=!n[1],_(e,"class","svelte-1jwirqu")},m(a,c){B(a,e,c),ue(t,e,null),m(e,i),r=!0,l||(o=se(e,"click",n[20]),l=!0)},p(a,c){(!r||c[0]&2&&s!==(s=!a[1]))&&(e.disabled=s)},i(a){r||(D(t.$$.fragment,a),r=!0)},o(a){U(t.$$.fragment,a),r=!1},d(a){a&&g(e),fe(t),l=!1,o()}}}function Pw(n){let e,t,i,s,r,l,o,a;return s=new Wt({props:{data:hee}}),{c(){e=E("div"),t=E("div"),i=E("div"),ce(s.$$.fragment),r=P(),l=E("div"),o=L("Tip: you can open this context menu via right-click or with Ctrl+Q"),this.h()},l(c){e=A(c,"DIV",{class:!0});var u=w(e);t=A(u,"DIV",{class:!0});var f=w(t);i=A(f,"DIV",{class:!0});var h=w(i);ge(s.$$.fragment,h),h.forEach(g),r=M(f),l=A(f,"DIV",{class:!0});var d=w(l);o=V(d,"Tip: you can open this context menu via right-click or with Ctrl+Q"),d.forEach(g),f.forEach(g),u.forEach(g),this.h()},h(){_(i,"class","svelte-1jwirqu"),_(l,"class","svelte-1jwirqu"),_(t,"class","jse-tip svelte-1jwirqu"),_(e,"class","jse-row svelte-1jwirqu")},m(c,u){B(c,e,u),m(e,t),m(t,i),ue(s,i,null),m(t,r),m(t,l),m(l,o),a=!0},p:Ke,i(c){a||(D(s.$$.fragment,c),a=!0)},o(c){U(s.$$.fragment,c),a=!1},d(c){c&&g(e),fe(s)}}}function bee(n){let e,t,i,s,r,l,o,a,c,u,f,h,d,p,v,y,b,S,I,T,C,k,R,O,N,F,W,z,Y,H,K,j,J,Z,q,X,ne,Q,re,be,le,he,Ie,G,ve,je,$,Oe,ie,_e,Ee,He,We,Qe,we,Me,de,Ae,Re="+",Ne,Ge,pe,Fe,ae,ke,oe,at="{}",qe,me,ot,Se,ze,ye,ut,Bt,gt,Ot,en,gn,Jt,ft,cn,tn,wn,vn,Ln,Cn,Un,di,Ue,yt,qt,hn,dn,Qt,tt,Dt,mi,Pt,nn,jt,Ui,gs;s=new Wt({props:{data:Yv}}),a=new cg({props:{width:"11em",items:n[8],$$slots:{defaultItem:[pee]},$$scope:{ctx:n}}}),d=new cg({props:{width:"10em",items:n[7],$$slots:{defaultItem:[gee]},$$scope:{ctx:n}}}),v=new cg({props:{width:"12em",items:n[6],$$slots:{defaultItem:[vee]},$$scope:{ctx:n}}}),S=new Wt({props:{data:Lz}}),W=new Wt({props:{data:bf}}),j=new Wt({props:{data:sG}}),ne=new Wt({props:{data:Xz}}),he=new Wt({props:{data:Jv}}),$=new Wt({props:{data:Qv}}),qt=new Wt({props:{data:zz}}),Dt=new Wt({props:{data:Fz}});let Sn=n[0]&&Pw();return{c(){e=E("div"),t=E("div"),i=E("button"),ce(s.$$.fragment),r=L(" Edit key"),o=P(),ce(a.$$.fragment),c=P(),u=E("div"),f=P(),h=E("div"),ce(d.$$.fragment),p=P(),ce(v.$$.fragment),y=P(),b=E("button"),ce(S.$$.fragment),I=L(" Paste"),C=P(),k=E("div"),R=P(),O=E("div"),N=E("div"),F=E("button"),ce(W.$$.fragment),z=L(" Remove"),H=P(),K=E("button"),ce(j.$$.fragment),J=L(" Duplicate"),q=P(),X=E("button"),ce(ne.$$.fragment),Q=L(" Extract"),be=P(),le=E("button"),ce(he.$$.fragment),Ie=L(" Sort"),ve=P(),je=E("button"),ce($.$$.fragment),Oe=L(" Transform"),_e=P(),Ee=E("div"),He=E("div"),We=L(n[13]),Qe=L(":"),we=P(),Me=E("button"),de=E("span"),Ae=E("span"),Ne=L(Re),Ge=L(" Structure"),ae=P(),ke=E("button"),oe=E("span"),qe=L(at),me=L(" Object"),ze=P(),ye=E("button"),ut=E("span"),Bt=L("[]"),gt=L(" Array"),gn=P(),Jt=E("button"),ft=E("span"),cn=E("span"),tn=L('"'),wn=L(" Value"),Cn=P(),Un=E("div"),di=P(),Ue=E("div"),yt=E("button"),ce(qt.$$.fragment),hn=L(" Insert before"),Qt=P(),tt=E("button"),ce(Dt.$$.fragment),mi=L(" Insert after"),nn=P(),Sn&&Sn.c(),this.h()},l(pt){e=A(pt,"DIV",{class:!0});var ee=w(e);t=A(ee,"DIV",{class:!0});var _t=w(t);i=A(_t,"BUTTON",{type:!0,title:!0,class:!0});var xt=w(i);ge(s.$$.fragment,xt),r=V(xt," Edit key"),xt.forEach(g),o=M(_t),ge(a.$$.fragment,_t),_t.forEach(g),c=M(ee),u=A(ee,"DIV",{class:!0}),w(u).forEach(g),f=M(ee),h=A(ee,"DIV",{class:!0});var On=w(h);ge(d.$$.fragment,On),p=M(On),ge(v.$$.fragment,On),y=M(On),b=A(On,"BUTTON",{type:!0,title:!0,class:!0});var pi=w(b);ge(S.$$.fragment,pi),I=V(pi," Paste"),pi.forEach(g),On.forEach(g),C=M(ee),k=A(ee,"DIV",{class:!0}),w(k).forEach(g),R=M(ee),O=A(ee,"DIV",{class:!0});var Ti=w(O);N=A(Ti,"DIV",{class:!0});var gi=w(N);F=A(gi,"BUTTON",{type:!0,title:!0,class:!0});var vs=w(F);ge(W.$$.fragment,vs),z=V(vs," Remove"),vs.forEach(g),H=M(gi),K=A(gi,"BUTTON",{type:!0,title:!0,class:!0});var or=w(K);ge(j.$$.fragment,or),J=V(or," Duplicate"),or.forEach(g),q=M(gi),X=A(gi,"BUTTON",{type:!0,title:!0,class:!0});var Os=w(X);ge(ne.$$.fragment,Os),Q=V(Os," Extract"),Os.forEach(g),be=M(gi),le=A(gi,"BUTTON",{type:!0,title:!0,class:!0});var zn=w(le);ge(he.$$.fragment,zn),Ie=V(zn," Sort"),zn.forEach(g),ve=M(gi),je=A(gi,"BUTTON",{type:!0,title:!0,class:!0});var Jr=w(je);ge($.$$.fragment,Jr),Oe=V(Jr," Transform"),Jr.forEach(g),gi.forEach(g),_e=M(Ti),Ee=A(Ti,"DIV",{class:!0});var bs=w(Ee);He=A(bs,"DIV",{class:!0});var Ii=w(He);We=V(Ii,n[13]),Qe=V(Ii,":"),Ii.forEach(g),we=M(bs),Me=A(bs,"BUTTON",{type:!0,title:!0,class:!0});var ar=w(Me);de=A(ar,"SPAN",{class:!0});var so=w(de);Ae=A(so,"SPAN",{class:!0});var cr=w(Ae);Ne=V(cr,Re),cr.forEach(g),so.forEach(g),Ge=V(ar," Structure"),ar.forEach(g),ae=M(bs),ke=A(bs,"BUTTON",{type:!0,title:!0,class:!0});var wr=w(ke);oe=A(wr,"SPAN",{class:!0});var ro=w(oe);qe=V(ro,at),ro.forEach(g),me=V(wr," Object"),wr.forEach(g),ze=M(bs),ye=A(bs,"BUTTON",{type:!0,title:!0,class:!0});var Ac=w(ye);ut=A(Ac,"SPAN",{class:!0});var Of=w(ut);Bt=V(Of,"[]"),Of.forEach(g),gt=V(Ac," Array"),Ac.forEach(g),gn=M(bs),Jt=A(bs,"BUTTON",{type:!0,title:!0,class:!0});var wc=w(Jt);ft=A(wc,"SPAN",{class:!0});var Sl=w(ft);cn=A(Sl,"SPAN",{class:!0});var lo=w(cn);tn=V(lo,'"'),lo.forEach(g),Sl.forEach(g),wn=V(wc," Value"),wc.forEach(g),bs.forEach(g),Ti.forEach(g),Cn=M(ee),Un=A(ee,"DIV",{class:!0}),w(Un).forEach(g),di=M(ee),Ue=A(ee,"DIV",{class:!0});var aa=w(Ue);yt=A(aa,"BUTTON",{type:!0,title:!0,class:!0});var Cc=w(yt);ge(qt.$$.fragment,Cc),hn=V(Cc," Insert before"),Cc.forEach(g),Qt=M(aa),tt=A(aa,"BUTTON",{type:!0,title:!0,class:!0});var kc=w(tt);ge(Dt.$$.fragment,kc),mi=V(kc," Insert after"),kc.forEach(g),aa.forEach(g),nn=M(ee),Sn&&Sn.l(ee),ee.forEach(g),this.h()},h(){_(i,"type","button"),_(i,"title","Edit the key (Double-click on the key)"),i.disabled=l=!n[14],_(i,"class","svelte-1jwirqu"),_(t,"class","jse-row svelte-1jwirqu"),_(u,"class","jse-separator svelte-1jwirqu"),_(b,"type","button"),_(b,"title","Paste clipboard contents (Ctrl+V)"),b.disabled=T=!n[3],_(b,"class","svelte-1jwirqu"),_(h,"class","jse-row svelte-1jwirqu"),_(k,"class","jse-separator svelte-1jwirqu"),_(F,"type","button"),_(F,"title","Remove selected contents (Delete)"),F.disabled=Y=!n[1],_(F,"class","svelte-1jwirqu"),_(K,"type","button"),_(K,"title","Duplicate selected contents (Ctrl+D)"),K.disabled=Z=!n[16],_(K,"class","svelte-1jwirqu"),_(X,"type","button"),_(X,"title","Extract selected contents"),X.disabled=re=!n[15],_(X,"class","svelte-1jwirqu"),_(le,"type","button"),_(le,"title","Sort array or object contents"),le.disabled=G=!n[1],_(le,"class","svelte-1jwirqu"),_(je,"type","button"),_(je,"title","Transform array or object contents (filter, sort, project)"),je.disabled=ie=!n[1],_(je,"class","svelte-1jwirqu"),_(N,"class","jse-column svelte-1jwirqu"),_(He,"class","jse-label svelte-1jwirqu"),_(Ae,"class","jse-plus svelte-1jwirqu"),_(de,"class","jse-insert svelte-1jwirqu"),_(Me,"type","button"),_(Me,"title",pe=n[13]+" structure"),Me.disabled=Fe=!n[12],_(Me,"class","svelte-1jwirqu"),_(oe,"class","jse-insert svelte-1jwirqu"),_(ke,"type","button"),_(ke,"title",ot=n[13]+" object"),ke.disabled=Se=!n[11],_(ke,"class","svelte-1jwirqu"),_(ut,"class","jse-insert svelte-1jwirqu"),_(ye,"type","button"),_(ye,"title",Ot=n[13]+" array"),ye.disabled=en=!n[10],_(ye,"class","svelte-1jwirqu"),_(cn,"class","jse-quote svelte-1jwirqu"),_(ft,"class","jse-insert svelte-1jwirqu"),_(Jt,"type","button"),_(Jt,"title",vn=n[13]+" value"),Jt.disabled=Ln=!n[9],_(Jt,"class","svelte-1jwirqu"),_(Ee,"class","jse-column svelte-1jwirqu"),_(O,"class","jse-row svelte-1jwirqu"),_(Un,"class","jse-separator svelte-1jwirqu"),_(yt,"type","button"),_(yt,"title","Select area before current entry to insert or paste contents"),yt.disabled=dn=!n[1]||n[4],_(yt,"class","svelte-1jwirqu"),_(tt,"type","button"),_(tt,"title","Select area after current entry to insert or paste contents"),tt.disabled=Pt=!n[1]||n[4],_(tt,"class","svelte-1jwirqu"),_(Ue,"class","jse-row svelte-1jwirqu"),_(e,"class","jse-contextmenu svelte-1jwirqu")},m(pt,ee){B(pt,e,ee),m(e,t),m(t,i),ue(s,i,null),m(i,r),m(t,o),ue(a,t,null),m(e,c),m(e,u),m(e,f),m(e,h),ue(d,h,null),m(h,p),ue(v,h,null),m(h,y),m(h,b),ue(S,b,null),m(b,I),m(e,C),m(e,k),m(e,R),m(e,O),m(O,N),m(N,F),ue(W,F,null),m(F,z),m(N,H),m(N,K),ue(j,K,null),m(K,J),m(N,q),m(N,X),ue(ne,X,null),m(X,Q),m(N,be),m(N,le),ue(he,le,null),m(le,Ie),m(N,ve),m(N,je),ue($,je,null),m(je,Oe),m(O,_e),m(O,Ee),m(Ee,He),m(He,We),m(He,Qe),m(Ee,we),m(Ee,Me),m(Me,de),m(de,Ae),m(Ae,Ne),m(Me,Ge),m(Ee,ae),m(Ee,ke),m(ke,oe),m(oe,qe),m(ke,me),m(Ee,ze),m(Ee,ye),m(ye,ut),m(ut,Bt),m(ye,gt),m(Ee,gn),m(Ee,Jt),m(Jt,ft),m(ft,cn),m(cn,tn),m(Jt,wn),m(e,Cn),m(e,Un),m(e,di),m(e,Ue),m(Ue,yt),ue(qt,yt,null),m(yt,hn),m(Ue,Qt),m(Ue,tt),ue(Dt,tt,null),m(tt,mi),m(e,nn),Sn&&Sn.m(e,null),n[59](e),jt=!0,Ui||(gs=[se(i,"click",n[17]),se(b,"click",n[21]),se(F,"click",n[22]),se(K,"click",n[23]),se(X,"click",n[24]),se(le,"click",n[26]),se(je,"click",n[27]),se(Me,"click",n[55]),se(ke,"click",n[56]),se(ye,"click",n[57]),se(Jt,"click",n[58]),se(yt,"click",n[28]),se(tt,"click",n[29]),se(e,"keydown",n[30])],Ui=!0)},p(pt,ee){(!jt||ee[0]&16384&&l!==(l=!pt[14]))&&(i.disabled=l);const _t={};ee[0]&256&&(_t.items=pt[8]),ee[0]&4|ee[2]&2&&(_t.$$scope={dirty:ee,ctx:pt}),a.$set(_t);const xt={};ee[0]&128&&(xt.items=pt[7]),ee[0]&2|ee[2]&2&&(xt.$$scope={dirty:ee,ctx:pt}),d.$set(xt);const On={};ee[0]&64&&(On.items=pt[6]),ee[0]&2|ee[2]&2&&(On.$$scope={dirty:ee,ctx:pt}),v.$set(On),(!jt||ee[0]&8&&T!==(T=!pt[3]))&&(b.disabled=T),(!jt||ee[0]&2&&Y!==(Y=!pt[1]))&&(F.disabled=Y),(!jt||ee[0]&65536&&Z!==(Z=!pt[16]))&&(K.disabled=Z),(!jt||ee[0]&32768&&re!==(re=!pt[15]))&&(X.disabled=re),(!jt||ee[0]&2&&G!==(G=!pt[1]))&&(le.disabled=G),(!jt||ee[0]&2&&ie!==(ie=!pt[1]))&&(je.disabled=ie),(!jt||ee[0]&8192)&&Ce(We,pt[13]),(!jt||ee[0]&8192&&pe!==(pe=pt[13]+" structure"))&&_(Me,"title",pe),(!jt||ee[0]&4096&&Fe!==(Fe=!pt[12]))&&(Me.disabled=Fe),(!jt||ee[0]&8192&&ot!==(ot=pt[13]+" object"))&&_(ke,"title",ot),(!jt||ee[0]&2048&&Se!==(Se=!pt[11]))&&(ke.disabled=Se),(!jt||ee[0]&8192&&Ot!==(Ot=pt[13]+" array"))&&_(ye,"title",Ot),(!jt||ee[0]&1024&&en!==(en=!pt[10]))&&(ye.disabled=en),(!jt||ee[0]&8192&&vn!==(vn=pt[13]+" value"))&&_(Jt,"title",vn),(!jt||ee[0]&512&&Ln!==(Ln=!pt[9]))&&(Jt.disabled=Ln),(!jt||ee[0]&18&&dn!==(dn=!pt[1]||pt[4]))&&(yt.disabled=dn),(!jt||ee[0]&18&&Pt!==(Pt=!pt[1]||pt[4]))&&(tt.disabled=Pt),pt[0]?Sn?(Sn.p(pt,ee),ee[0]&1&&D(Sn,1)):(Sn=Pw(),Sn.c(),D(Sn,1),Sn.m(e,null)):Sn&&(Le(),U(Sn,1,1,()=>{Sn=null}),Ve())},i(pt){jt||(D(s.$$.fragment,pt),D(a.$$.fragment,pt),D(d.$$.fragment,pt),D(v.$$.fragment,pt),D(S.$$.fragment,pt),D(W.$$.fragment,pt),D(j.$$.fragment,pt),D(ne.$$.fragment,pt),D(he.$$.fragment,pt),D($.$$.fragment,pt),D(qt.$$.fragment,pt),D(Dt.$$.fragment,pt),D(Sn),jt=!0)},o(pt){U(s.$$.fragment,pt),U(a.$$.fragment,pt),U(d.$$.fragment,pt),U(v.$$.fragment,pt),U(S.$$.fragment,pt),U(W.$$.fragment,pt),U(j.$$.fragment,pt),U(ne.$$.fragment,pt),U(he.$$.fragment,pt),U($.$$.fragment,pt),U(qt.$$.fragment,pt),U(Dt.$$.fragment,pt),U(Sn),jt=!1},d(pt){pt&&g(e),fe(s),fe(a),fe(d),fe(v),fe(S),fe(W),fe(j),fe(ne),fe(he),fe($),fe(qt),fe(Dt),Sn&&Sn.d(),n[59](null),Ui=!1,on(gs)}}}function _ee(n,e,t){let i,s,r,l,o,a,c,u,f,h,d,p,v,y,b,S,I,T,C,k,{json:R}=e,{documentState:O}=e,{parser:N}=e,{showTip:F}=e,{onCloseContextMenu:W}=e,{onEditKey:z}=e,{onEditValue:Y}=e,{onToggleEnforceString:H}=e,{onCut:K}=e,{onCopy:j}=e,{onPaste:J}=e,{onRemove:Z}=e,{onDuplicate:q}=e,{onExtract:X}=e,{onInsertBefore:ne}=e,{onInsert:Q}=e,{onConvert:re}=e,{onInsertAfter:be}=e,{onSort:le}=e,{onTransform:he}=e,Ie;Mi(()=>{setTimeout(()=>{const oe=[...Ie.querySelectorAll("button")].find(at=>!at.disabled);oe&&oe.focus()})});function G(){W(),z()}function ve(){W(),Y()}function je(){W(),H()}function $(){W(),K(!0)}function Oe(){W(),K(!1)}function ie(){W(),j(!0)}function _e(){W(),j(!1)}function Ee(){W(),J()}function He(){W(),Z()}function We(){W(),q()}function Qe(){W(),X()}function we(oe){W(),a?re(oe):Q(oe)}function Me(){W(),le()}function de(){W(),he()}function Ae(){W(),ne()}function Re(){W(),be()}function Ne(oe){const at=na(oe).replace(/^Command\+/,"Ctrl+");if(at==="Up"||at==="Down"||at==="Left"||at==="Right"){oe.preventDefault();const qe=Array.from(Ie.querySelectorAll("button:not([disabled])")),me=wz({allElements:qe,currentElement:oe.target,direction:at,hasPrio:ot=>ot.getAttribute("data-type")!=="jse-open-dropdown"});me&&me.focus()}}const Ge=()=>we("structure"),pe=()=>we("object"),Fe=()=>we("array"),ae=()=>we("value");function ke(oe){Vt[oe?"unshift":"push"](()=>{Ie=oe,t(5,Ie)})}return n.$$set=oe=>{"json"in oe&&t(31,R=oe.json),"documentState"in oe&&t(32,O=oe.documentState),"parser"in oe&&t(33,N=oe.parser),"showTip"in oe&&t(0,F=oe.showTip),"onCloseContextMenu"in oe&&t(34,W=oe.onCloseContextMenu),"onEditKey"in oe&&t(35,z=oe.onEditKey),"onEditValue"in oe&&t(36,Y=oe.onEditValue),"onToggleEnforceString"in oe&&t(37,H=oe.onToggleEnforceString),"onCut"in oe&&t(38,K=oe.onCut),"onCopy"in oe&&t(39,j=oe.onCopy),"onPaste"in oe&&t(40,J=oe.onPaste),"onRemove"in oe&&t(41,Z=oe.onRemove),"onDuplicate"in oe&&t(42,q=oe.onDuplicate),"onExtract"in oe&&t(43,X=oe.onExtract),"onInsertBefore"in oe&&t(44,ne=oe.onInsertBefore),"onInsert"in oe&&t(45,Q=oe.onInsert),"onConvert"in oe&&t(46,re=oe.onConvert),"onInsertAfter"in oe&&t(47,be=oe.onInsertAfter),"onSort"in oe&&t(48,le=oe.onSort),"onTransform"in oe&&t(49,he=oe.onTransform)},n.$$.update=()=>{n.$$.dirty[1]&2&&t(51,i=O.selection),n.$$.dirty[1]&1&&t(54,s=R!==void 0),n.$$.dirty[1]&1048576&&t(3,r=i!=null),n.$$.dirty[0]&8|n.$$.dirty[1]&1048576&&t(4,l=r&&ii(i.focusPath)),n.$$.dirty[0]&8|n.$$.dirty[1]&1048577&&t(52,o=r?At(R,i.focusPath):void 0),n.$$.dirty[1]&9437184&&t(1,a=s&&(yn(i)||ci(i)||_n(i))),n.$$.dirty[0]&18|n.$$.dirty[1]&8388608&&t(16,c=s&&a&&!l),n.$$.dirty[0]&16|n.$$.dirty[1]&9437184&&t(15,u=s&&i!=null&&(yn(i)||_n(i))&&!l),n.$$.dirty[0]&16|n.$$.dirty[1]&9437185&&t(14,f=s&&i!=null&&v0(i)&&!l&&!Array.isArray(At(R,pn(i.focusPath)))),n.$$.dirty[1]&11534336&&t(2,h=s&&i!=null&&v0(i)&&!Ri(o)),n.$$.dirty[0]&2&&t(53,d=a),n.$$.dirty[1]&4194304&&t(13,p=d?"Convert to":"Insert"),n.$$.dirty[0]&8|n.$$.dirty[1]&4194304&&t(12,v=d?!1:r),n.$$.dirty[0]&8|n.$$.dirty[1]&7340032&&t(11,y=d?Dh(i)&&!ji(o):r),n.$$.dirty[0]&8|n.$$.dirty[1]&7340032&&t(10,b=d?Dh(i)&&!Array.isArray(o):r),n.$$.dirty[0]&8|n.$$.dirty[1]&7340032&&t(9,S=d?Dh(i)&&Ri(o):r),n.$$.dirty[1]&3145734&&t(50,I=i!=null?Cf(o,O.enforceStringMap,ht(i.focusPath),N):!1),n.$$.dirty[0]&4|n.$$.dirty[1]&524288&&t(8,T=[{icon:Yv,text:"Edit value",title:"Edit the value (Double-click on the value)",onClick:ve,disabled:!h},{icon:I?Kd:Qd,text:"Enforce string",title:"Enforce keeping the value as string when it contains a numeric value",onClick:je,disabled:!h}]),n.$$.dirty[0]&2&&t(7,C=[{icon:E1,text:"Cut formatted",title:"Cut selected contents, formatted with indentation (Ctrl+X)",onClick:$,disabled:!a},{icon:E1,text:"Cut compacted",title:"Cut selected contents, without indentation (Ctrl+Shift+X)",onClick:Oe,disabled:!a}]),n.$$.dirty[0]&2&&t(6,k=[{icon:Pu,text:"Copy formatted",title:"Copy selected contents, formatted with indentation (Ctrl+C)",onClick:ie,disabled:!a},{icon:Pu,text:"Copy compacted",title:"Copy selected contents, without indentation (Ctrl+Shift+C)",onClick:_e,disabled:!a}])},[F,a,h,r,l,Ie,k,C,T,S,b,y,v,p,f,u,c,G,ve,$,ie,Ee,He,We,Qe,we,Me,de,Ae,Re,Ne,R,O,N,W,z,Y,H,K,j,J,Z,q,X,ne,Q,re,be,le,he,I,i,o,d,s,Ge,pe,Fe,ae,ke]}class yee extends nt{constructor(e){super(),it(this,e,_ee,bee,an,{json:31,documentState:32,parser:33,showTip:0,onCloseContextMenu:34,onEditKey:35,onEditValue:36,onToggleEnforceString:37,onCut:38,onCopy:39,onPaste:40,onRemove:41,onDuplicate:42,onExtract:43,onInsertBefore:44,onInsert:45,onConvert:46,onInsertAfter:47,onSort:48,onTransform:49},null,[-1,-1,-1])}}const See=yee;var S0={},Eee={get exports(){return S0},set exports(n){S0=n}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(n){(function(){var e={}.hasOwnProperty;function t(){for(var i=[],s=0;s<arguments.length;s++){var r=arguments[s];if(r){var l=typeof r;if(l==="string"||l==="number")i.push(r);else if(Array.isArray(r)){if(r.length){var o=t.apply(null,r);o&&i.push(o)}}else if(l==="object"){if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]")){i.push(r.toString());continue}for(var a in r)e.call(r,a)&&r[a]&&i.push(a)}}}return i.join(" ")}n.exports?(t.default=t,n.exports=t):window.classNames=t})()})(Eee);const lc=S0;function Mw(n,e,t){const i=n.slice();return i[13]=e[t],i}function Bw(n){let e,t,i=n[13].start+"",s,r,l=n[13].end+"",o,a,c,u;function f(){return n[12](n[13])}return{c(){e=E("button"),t=L("show "),s=L(i),r=L("-"),o=L(l),a=P(),this.h()},l(h){e=A(h,"BUTTON",{type:!0,class:!0});var d=w(e);t=V(d,"show "),s=V(d,i),r=V(d,"-"),o=V(d,l),a=M(d),d.forEach(g),this.h()},h(){_(e,"type","button"),_(e,"class","jse-expand-items svelte-a94vy2")},m(h,d){B(h,e,d),m(e,t),m(e,s),m(e,r),m(e,o),m(e,a),c||(u=se(e,"click",f),c=!0)},p(h,d){n=h,d&16&&i!==(i=n[13].start+"")&&Ce(s,i),d&16&&l!==(l=n[13].end+"")&&Ce(o,l)},d(h){h&&g(e),c=!1,u()}}}function Aee(n){let e,t,i,s,r,l,o,a,c,u,f,h=n[4],d=[];for(let p=0;p<h.length;p+=1)d[p]=Bw(Mw(n,h,p));return{c(){e=E("div"),t=E("div"),i=E("div"),s=L("Items "),r=L(n[3]),l=L("-"),o=L(n[2]),a=P();for(let p=0;p<d.length;p+=1)d[p].c();this.h()},l(p){e=A(p,"DIV",{class:!0,style:!0});var v=w(e);t=A(v,"DIV",{});var y=w(t);i=A(y,"DIV",{class:!0});var b=w(i);s=V(b,"Items "),r=V(b,n[3]),l=V(b,"-"),o=V(b,n[2]),b.forEach(g),a=M(y);for(let S=0;S<d.length;S+=1)d[S].l(y);y.forEach(g),v.forEach(g),this.h()},h(){_(i,"class","jse-text svelte-a94vy2"),_(e,"class","jse-collapsed-items svelte-a94vy2"),_(e,"style",c=Lw(n[0].length+2)),xe(e,"jse-selected",n[5])},m(p,v){B(p,e,v),m(e,t),m(t,i),m(i,s),m(i,r),m(i,l),m(i,o),m(t,a);for(let y=0;y<d.length;y+=1)d[y].m(t,null);u||(f=se(e,"mousemove",wee),u=!0)},p(p,[v]){if(v&8&&Ce(r,p[3]),v&4&&Ce(o,p[2]),v&19){h=p[4];let y;for(y=0;y<h.length;y+=1){const b=Mw(p,h,y);d[y]?d[y].p(b,v):(d[y]=Bw(b),d[y].c(),d[y].m(t,null))}for(;y<d.length;y+=1)d[y].d(1);d.length=h.length}v&1&&c!==(c=Lw(p[0].length+2))&&_(e,"style",c),v&32&&xe(e,"jse-selected",p[5])},i:Ke,o:Ke,d(p){p&&g(e),Ft(d,p),u=!1,f()}}}function Lw(n){return`margin-left: calc(${n} * var(--jse-indent-size))`}function wee(n){n.stopPropagation()}function Cee(n,e,t){let i,s,r,l,o,{visibleSections:a}=e,{sectionIndex:c}=e,{total:u}=e,{path:f}=e,{pointer:h}=e,{selection:d}=e,{onExpandSection:p}=e;const v=y=>p(f,y);return n.$$set=y=>{"visibleSections"in y&&t(6,a=y.visibleSections),"sectionIndex"in y&&t(7,c=y.sectionIndex),"total"in y&&t(8,u=y.total),"path"in y&&t(0,f=y.path),"pointer"in y&&t(9,h=y.pointer),"selection"in y&&t(10,d=y.selection),"onExpandSection"in y&&t(1,p=y.onExpandSection)},n.$$.update=()=>{n.$$.dirty&192&&t(11,i=a[c]),n.$$.dirty&2048&&t(3,s=i.end),n.$$.dirty&448&&t(2,r=a[c+1]?a[c+1].start:u),n.$$.dirty&1544&&t(5,l=yn(d)?d.pointersMap[r1(h,s)]===!0:!1),n.$$.dirty&12&&t(4,o=c$(s,r))},[f,p,r,s,o,l,a,c,u,h,d,i,v]}class kee extends nt{constructor(e){super(),it(this,e,Cee,Aee,an,{visibleSections:6,sectionIndex:7,total:8,path:0,pointer:9,selection:10,onExpandSection:1})}}const Tee=kee;function Iee(n){let e,t,i,s,r;return t=new Wt({props:{data:Mr}}),{c(){e=E("button"),ce(t.$$.fragment),this.h()},l(l){e=A(l,"BUTTON",{type:!0,class:!0,title:!0});var o=w(e);ge(t.$$.fragment,o),o.forEach(g),this.h()},h(){_(e,"type","button"),_(e,"class","jse-context-menu-button svelte-1lm9yxm"),_(e,"title",Y4),xe(e,"jse-selected",n[0])},m(l,o){B(l,e,o),ue(t,e,null),i=!0,s||(r=se(e,"click",n[1]),s=!0)},p(l,[o]){(!i||o&1)&&xe(e,"jse-selected",l[0])},i(l){i||(D(t.$$.fragment,l),i=!0)},o(l){U(t.$$.fragment,l),i=!1},d(l){l&&g(e),fe(t),s=!1,r()}}}function Oee(n,e,t){let{selected:i}=e,{onContextMenu:s}=e;function r(l){let o=l.target;for(;o&&o.nodeName!=="BUTTON";)o=o.parentNode;o&&s({anchor:o,left:0,top:0,width:Hc,height:jc,offsetTop:2,offsetLeft:0,showTip:!0})}return n.$$set=l=>{"selected"in l&&t(0,i=l.selected),"onContextMenu"in l&&t(2,s=l.onContextMenu)},[i,r,s]}class Ree extends nt{constructor(e){super(),it(this,e,Oee,Iee,an,{selected:0,onContextMenu:2})}}const la=Ree;function Vw(n,e,t){const i=n.slice();return i[3]=e[t],i}function Dee(n){let e,t=zo(n[3].text)+"",i;return{c(){e=E("span"),i=L(t),this.h()},l(s){e=A(s,"SPAN",{class:!0});var r=w(e);i=V(r,t),r.forEach(g),this.h()},h(){_(e,"class","jse-highlight svelte-mtessu"),xe(e,"jse-active",n[3].active)},m(s,r){B(s,e,r),m(e,i)},p(s,r){r&1&&t!==(t=zo(s[3].text)+"")&&Ce(i,t),r&1&&xe(e,"jse-active",s[3].active)},d(s){s&&g(e)}}}function Nee(n){let e=n[3].text+"",t;return{c(){t=L(e)},l(i){t=V(i,e)},m(i,s){B(i,t,s)},p(i,s){s&1&&e!==(e=i[3].text+"")&&Ce(t,e)},d(i){i&&g(t)}}}function Uw(n){let e;function t(r,l){return r[3].type==="normal"?Nee:Dee}let i=t(n),s=i(n);return{c(){s.c(),e=et()},l(r){s.l(r),e=et()},m(r,l){s.m(r,l),B(r,e,l)},p(r,l){i===(i=t(r))&&s?s.p(r,l):(s.d(1),s=i(r),s&&(s.c(),s.m(e.parentNode,e)))},d(r){s.d(r),r&&g(e)}}}function Pee(n){let e,t=n[0],i=[];for(let s=0;s<t.length;s+=1)i[s]=Uw(Vw(n,t,s));return{c(){for(let s=0;s<i.length;s+=1)i[s].c();e=et()},l(s){for(let r=0;r<i.length;r+=1)i[r].l(s);e=et()},m(s,r){for(let l=0;l<i.length;l+=1)i[l].m(s,r);B(s,e,r)},p(s,[r]){if(r&1){t=s[0];let l;for(l=0;l<t.length;l+=1){const o=Vw(s,t,l);i[l]?i[l].p(o,r):(i[l]=Uw(o),i[l].c(),i[l].m(e.parentNode,e))}for(;l<i.length;l+=1)i[l].d(1);i.length=t.length}},i:Ke,o:Ke,d(s){Ft(i,s),s&&g(e)}}}function Mee(n,e,t){let i,{text:s}=e,{searchResultItems:r}=e;return n.$$set=l=>{"text"in l&&t(1,s=l.text),"searchResultItems"in l&&t(2,r=l.searchResultItems)},n.$$.update=()=>{n.$$.dirty&6&&t(0,i=H$(String(s),r))},[i,s,r]}class Bee extends nt{constructor(e){super(),it(this,e,Mee,Pee,Ct,{text:1,searchResultItems:2})}}const b5=Bee;function Lee(n){let e,t,i,s;return{c(){e=E("div"),this.h()},l(r){e=A(r,"DIV",{class:!0,contenteditable:!0,spellcheck:!0}),w(e).forEach(g),this.h()},h(){_(e,"class",t=Ze(lc("jse-editable-div",n[2],{"jse-short-text":n[0]}))+" svelte-1rwbo30"),_(e,"contenteditable","true"),_(e,"spellcheck","false")},m(r,l){B(r,e,l),n[13](e),i||(s=[se(e,"input",n[3]),se(e,"keydown",n[4]),se(e,"paste",n[5]),se(e,"blur",n[6])],i=!0)},p(r,[l]){l&5&&t!==(t=Ze(lc("jse-editable-div",r[2],{"jse-short-text":r[0]}))+" svelte-1rwbo30")&&_(e,"class",t)},i:Ke,o:Ke,d(r){r&&g(e),n[13](null),i=!1,on(s)}}}function Vee(n,e,t){const i=Is("jsoneditor:EditableDiv");let{value:s}=e,{shortText:r=!1}=e,{onChange:l}=e,{onCancel:o}=e,{onFind:a}=e,{onPaste:c=Hn}=e,{onValueClass:u=()=>""}=e,f,h=u(s),d=!1;Mi(()=>{i("onMount",{value:s}),v(s),setTimeout(()=>ZO(f))}),br(()=>{const C=p();i("onDestroy",{closed:d,value:s,newValue:C}),!d&&C!==s&&l(C,Io.NO)});function p(){return bz(f.innerText)}function v(C){t(1,f.innerText=zo(C),f)}function y(){const C=p();C===""&&v(""),t(2,h=u(C))}function b(C){C.stopPropagation();const k=na(C).replace(/^Command\+/,"Ctrl+");if(k==="Escape"&&(d=!0,o()),k==="Enter"||k==="Tab"){d=!0;const R=p();l(R,Io.NEXT_INSIDE)}k==="Ctrl+F"&&(C.preventDefault(),a(!1)),k==="Ctrl+H"&&(C.preventDefault(),a(!0))}function S(C){if(!c)return;const k=C.clipboardData.getData("text/plain");c(k)}function I(){const C=document.hasFocus(),k=p();i("handleBlur",{hasFocus:C,closed:d,value:s,newValue:k}),document.hasFocus()&&!d&&(d=!0,k!==s?l(k,Io.SELF):o())}function T(C){Vt[C?"unshift":"push"](()=>{f=C,t(1,f)})}return n.$$set=C=>{"value"in C&&t(7,s=C.value),"shortText"in C&&t(0,r=C.shortText),"onChange"in C&&t(8,l=C.onChange),"onCancel"in C&&t(9,o=C.onCancel),"onFind"in C&&t(10,a=C.onFind),"onPaste"in C&&t(11,c=C.onPaste),"onValueClass"in C&&t(12,u=C.onValueClass)},[r,f,h,y,b,S,I,s,l,o,a,c,u,T]}class Uee extends nt{constructor(e){super(),it(this,e,Vee,Lee,an,{value:7,shortText:0,onChange:8,onCancel:9,onFind:10,onPaste:11,onValueClass:12})}}const _5=Uee;function Wee(n){let e,t,i,s,r,l,o;const a=[Hee,jee],c=[];function u(f,h){return f[1]?0:1}return t=u(n),i=c[t]=a[t](n),{c(){e=E("div"),i.c(),this.h()},l(f){e=A(f,"DIV",{"data-type":!0,class:!0});var h=w(e);i.l(h),h.forEach(g),this.h()},h(){_(e,"data-type","selectable-key"),_(e,"class",s=Ze(n[6](n[0]))+" svelte-1cm0o9n")},m(f,h){B(f,e,h),c[t].m(e,null),r=!0,l||(o=se(e,"dblclick",n[5]),l=!0)},p(f,h){let d=t;t=u(f),t===d?c[t].p(f,h):(Le(),U(c[d],1,1,()=>{c[d]=null}),Ve(),i=c[t],i?i.p(f,h):(i=c[t]=a[t](f),i.c()),D(i,1),i.m(e,null)),(!r||h&1&&s!==(s=Ze(f[6](f[0]))+" svelte-1cm0o9n"))&&_(e,"class",s)},i(f){r||(D(i),r=!0)},o(f){U(i),r=!1},d(f){f&&g(e),c[t].d(),l=!1,o()}}}function Fee(n){let e,t;return e=new _5({props:{value:n[2].normalization.escapeValue(n[0]),shortText:!0,onChange:n[7],onCancel:n[8],onFind:n[2].onFind}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s&5&&(r.value=i[2].normalization.escapeValue(i[0])),s&4&&(r.onFind=i[2].onFind),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function jee(n){let e=zo(n[2].normalization.escapeValue(n[0]))+"",t;return{c(){t=L(e)},l(i){t=V(i,e)},m(i,s){B(i,t,s)},p(i,s){s&5&&e!==(e=zo(i[2].normalization.escapeValue(i[0]))+"")&&Ce(t,e)},i:Ke,o:Ke,d(i){i&&g(t)}}}function Hee(n){let e,t;return e=new b5({props:{text:n[2].normalization.escapeValue(n[0]),searchResultItems:n[1]}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s&5&&(r.text=i[2].normalization.escapeValue(i[0])),s&2&&(r.searchResultItems=i[1]),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function Ww(n){let e,t;return e=new la({props:{selected:!0,onContextMenu:n[2].onContextMenu}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s&4&&(r.onContextMenu=i[2].onContextMenu),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function qee(n){let e,t,i,s,r;const l=[Fee,Wee],o=[];function a(u,f){return u[4]?0:1}e=a(n),t=o[e]=l[e](n);let c=!n[2].readOnly&&n[3]&&!n[4]&&Ww(n);return{c(){t.c(),i=P(),c&&c.c(),s=et()},l(u){t.l(u),i=M(u),c&&c.l(u),s=et()},m(u,f){o[e].m(u,f),B(u,i,f),c&&c.m(u,f),B(u,s,f),r=!0},p(u,[f]){let h=e;e=a(u),e===h?o[e].p(u,f):(Le(),U(o[h],1,1,()=>{o[h]=null}),Ve(),t=o[e],t?t.p(u,f):(t=o[e]=l[e](u),t.c()),D(t,1),t.m(i.parentNode,i)),!u[2].readOnly&&u[3]&&!u[4]?c?(c.p(u,f),f&28&&D(c,1)):(c=Ww(u),c.c(),D(c,1),c.m(s.parentNode,s)):c&&(Le(),U(c,1,1,()=>{c=null}),Ve())},i(u){r||(D(t),D(c),r=!0)},o(u){U(t),U(c),r=!1},d(u){o[e].d(u),u&&g(i),c&&c.d(u),u&&g(s)}}}function zee(n,e,t){let i,s,{path:r}=e,{pointer:l}=e,{key:o}=e,{selection:a}=e,{searchResultItems:c}=e,{onUpdateKey:u}=e,{context:f}=e;function h(y){!s&&!f.readOnly&&(y.preventDefault(),f.onSelect(qs(r,!0)))}function d(y){return lc("jse-key",{"jse-empty":y===""})}function p(y,b){const S=u(o,f.normalization.unescapeValue(y)),I=pn(r).concat(S);f.onSelect(b===Io.NEXT_INSIDE?Yn(I,!1):qs(I,!1)),b!==Io.SELF&&f.focus()}function v(){f.onSelect(qs(r,!1)),f.focus()}return n.$$set=y=>{"path"in y&&t(9,r=y.path),"pointer"in y&&t(10,l=y.pointer),"key"in y&&t(0,o=y.key),"selection"in y&&t(11,a=y.selection),"searchResultItems"in y&&t(1,c=y.searchResultItems),"onUpdateKey"in y&&t(12,u=y.onUpdateKey),"context"in y&&t(2,f=y.context)},n.$$.update=()=>{n.$$.dirty&3072&&t(3,i=a?a.pointersMap[l]===!0&&ci(a):void 0),n.$$.dirty&2056&&t(4,s=i&&au(a))},[o,c,f,i,s,h,d,p,v,r,l,a,u]}class Gee extends nt{constructor(e){super(),it(this,e,zee,qee,an,{path:9,pointer:10,key:0,selection:11,searchResultItems:1,onUpdateKey:12,context:2})}}const Kee=Gee;function Fw(n,e,t){const i=n.slice();return i[9]=e[t],i}function jw(n){let e,t,i;const s=[n[9].props];var r=n[9].component;function l(o){let a={};for(let c=0;c<s.length;c+=1)a=Qr(a,s[c]);return{props:a}}return r&&(e=An(r,l())),{c(){e&&ce(e.$$.fragment),t=et()},l(o){e&&ge(e.$$.fragment,o),t=et()},m(o,a){e&&ue(e,o,a),B(o,t,a),i=!0},p(o,a){const c=a&1?Xr(s,[Jo(o[9].props)]):{};if(r!==(r=o[9].component)){if(e){Le();const u=e;U(u.$$.fragment,1,0,()=>{fe(u,1)}),Ve()}r?(e=An(r,l()),ce(e.$$.fragment),D(e.$$.fragment,1),ue(e,t.parentNode,t)):e=null}else r&&e.$set(c)},i(o){i||(e&&D(e.$$.fragment,o),i=!0)},o(o){e&&U(e.$$.fragment,o),i=!1},d(o){o&&g(t),e&&fe(e,o)}}}function Qee(n){let e,t,i=n[0],s=[];for(let l=0;l<i.length;l+=1)s[l]=jw(Fw(n,i,l));const r=l=>U(s[l],1,1,()=>{s[l]=null});return{c(){for(let l=0;l<s.length;l+=1)s[l].c();e=et()},l(l){for(let o=0;o<s.length;o+=1)s[o].l(l);e=et()},m(l,o){for(let a=0;a<s.length;a+=1)s[a].m(l,o);B(l,e,o),t=!0},p(l,[o]){if(o&1){i=l[0];let a;for(a=0;a<i.length;a+=1){const c=Fw(l,i,a);s[a]?(s[a].p(c,o),D(s[a],1)):(s[a]=jw(c),s[a].c(),D(s[a],1),s[a].m(e.parentNode,e))}for(Le(),a=i.length;a<s.length;a+=1)r(a);Ve()}},i(l){if(!t){for(let o=0;o<i.length;o+=1)D(s[o]);t=!0}},o(l){s=s.filter(Boolean);for(let o=0;o<s.length;o+=1)U(s[o]);t=!1},d(l){Ft(s,l),l&&g(e)}}}function Xee(n,e,t){let i,s,{path:r}=e,{value:l}=e,{context:o}=e,{isSelected:a}=e,{enforceString:c}=e,{selection:u}=e,{searchResultItems:f}=e;return n.$$set=h=>{"path"in h&&t(1,r=h.path),"value"in h&&t(2,l=h.value),"context"in h&&t(3,o=h.context),"isSelected"in h&&t(4,a=h.isSelected),"enforceString"in h&&t(5,c=h.enforceString),"selection"in h&&t(6,u=h.selection),"searchResultItems"in h&&t(7,f=h.searchResultItems)},n.$$.update=()=>{n.$$.dirty&72&&t(8,i=!o.readOnly&&_n(u)&&au(u)),n.$$.dirty&510&&t(0,s=o.onRenderValue({path:r,value:l,readOnly:o.readOnly,enforceString:c,isSelected:a,isEditing:i,parser:o.parser,normalization:o.normalization,selection:u,searchResultItems:f,onPatch:o.onPatch,onPasteJson:o.onPasteJson,onSelect:o.onSelect,onFind:o.onFind,focus:o.focus}))},[s,r,l,o,a,c,u,f,i]}class Yee extends nt{constructor(e){super(),it(this,e,Xee,Qee,an,{path:1,value:2,context:3,isSelected:4,enforceString:5,selection:6,searchResultItems:7})}}const Jee=Yee,Wi={selecting:!1,selectionAnchor:null,selectionAnchorType:null,selectionFocus:null,dragging:!1};function ug({json:n,documentState:e,deltaY:t,items:i}){const s=e.selection,r=t<0?Zee({json:n,selection:s,deltaY:t,items:i}):xee({json:n,selection:s,deltaY:t,items:i});if(!r||r.offset===0)return{operations:void 0,updatedSelection:void 0,offset:0};const l=M$(n,e.selection,r),o=pn(sc(s)),a=At(n,o);if(Array.isArray(a)){const c=$ee({items:i,json:n,selection:s,offset:r.offset});return{operations:l,updatedSelection:c,offset:r.offset}}else return{operations:l,updatedSelection:void 0,offset:r.offset}}function Zee({items:n,selection:e,deltaY:t}){const i=sc(e),s=n.findIndex(u=>En(u.path,i)),r=()=>{var u;return(u=n[l-1])==null?void 0:u.height};let l=s,o=0;for(;r()!==void 0&&Math.abs(t)>o+r()/2;)o+=r(),l-=1;const a=n[l].path,c=l-s;return l!==s&&n[l]!==void 0?{beforePath:a,offset:c}:void 0}function xee({json:n,items:e,selection:t,deltaY:i}){var v;const s=rp(t),r=e.findIndex(y=>En(y.path,s));let l=0,o=r;const a=()=>{var y;return(y=e[o+1])==null?void 0:y.height};for(;a()!==void 0&&Math.abs(i)>l+a()/2;)l+=a(),o+=1;const c=pn(s),u=At(n,c),h=Array.isArray(u)?o:o+1,d=(v=e[h])==null?void 0:v.path,p=o-r;return d?{beforePath:d,offset:p}:{append:!0,offset:p}}function $ee({items:n,json:e,selection:t,offset:i}){var u,f;const s=sc(t),r=rp(t),l=n.findIndex(h=>En(h.path,s)),o=n.findIndex(h=>En(h.path,r)),a=(u=n[l+i])==null?void 0:u.path,c=(f=n[o+i])==null?void 0:f.path;return ui(e,a,c)}function ete(n,e){if(!n)return;const t={};for(const i of Object.keys(n))e(i,n[i])&&(t[i]=n[i]);return Object.keys(t).length>0?t:void 0}function Or(n,e){return ete(n,t=>Ga(t,e))}function tte(n){let e,t;return{c(){e=E("div"),t=L(n[0]),this.h()},l(i){e=A(i,"DIV",{class:!0});var s=w(e);t=V(s,n[0]),s.forEach(g),this.h()},h(){_(e,"class","jse-tooltip svelte-r4omvg")},m(i,s){B(i,e,s),m(e,t)},p(i,[s]){s&1&&Ce(t,i[0])},i:Ke,o:Ke,d(i){i&&g(e)}}}function nte(n,e,t){let{text:i}=e;return n.$$set=s=>{"text"in s&&t(0,i=s.text)},[i]}class ite extends nt{constructor(e){super(),it(this,e,nte,tte,Ct,{text:0})}}const ste=ite;function Vb(n,{text:e,openAbsolutePopup:t,closeAbsolutePopup:i}){let s;function r(){s=t(ste,{text:e},{position:"top",width:10*e.length,offsetTop:3,anchor:n,closeOnOuterClick:!0})}function l(){i(s)}return n.addEventListener("mouseenter",r),n.addEventListener("mouseleave",l),{destroy(){n.removeEventListener("mouseenter",r),n.removeEventListener("mouseleave",l)}}}function rte(n){let e,t,i,s,r,l;return t=new Wt({props:{data:ia}}),{c(){e=E("button"),ce(t.$$.fragment),this.h()},l(o){e=A(o,"BUTTON",{type:!0,class:!0});var a=w(e);ge(t.$$.fragment,a),a.forEach(g),this.h()},h(){_(e,"type","button"),_(e,"class","jse-validation-error svelte-1q62mys")},m(o,a){B(o,e,a),ue(t,e,null),s=!0,r||(l=[se(e,"click",function(){Mn(n[0])&&n[0].apply(this,arguments)}),oc(i=Vb.call(null,e,{text:n[1],...n[2]}))],r=!0)},p(o,[a]){n=o,i&&Mn(i.update)&&a&2&&i.update.call(null,{text:n[1],...n[2]})},i(o){s||(D(t.$$.fragment,o),s=!0)},o(o){U(t.$$.fragment,o),s=!1},d(o){o&&g(e),fe(t),r=!1,on(l)}}}function lte(n,e,t){let i;const s=Bn("absolute-popup");let{validationError:r}=e,{onExpand:l}=e;return n.$$set=o=>{"validationError"in o&&t(3,r=o.validationError),"onExpand"in o&&t(0,l=o.onExpand)},n.$$.update=()=>{n.$$.dirty&8&&t(1,i=r.isChildError?"Contains invalid data":r.message)},[l,i,s,r]}class ote extends nt{constructor(e){super(),it(this,e,lte,rte,Ct,{validationError:3,onExpand:0})}}const Ub=ote;const ate=n=>({}),Hw=n=>({});function qw(n,e,t){const i=n.slice();return i[53]=e[t],i}const cte=n=>({}),zw=n=>({});function Gw(n,e,t){const i=n.slice();return i[47]=e[t],i[49]=t,i}function Kw(n,e,t){const i=n.slice();return i[50]=e[t],i}const ute=n=>({}),Qw=n=>({});function fte(n){let e,t,i,s,r,l,o=!n[8].readOnly&&n[16]&&n[7]&&(_n(n[7])||yn(n[7]))&&!n[7].edit&&En(n[7].focusPath,n[1]),a,c,u;const f=n[34].identifier,h=os(f,n,n[35],Hw);let d=!n[17]&&Xw();r=new Jee({props:{path:n[1],value:n[0],enforceString:n[13],isSelected:n[16],selection:n[16]?n[7]:void 0,searchResultItems:Iw(n[6],n[9]),context:n[8]}});let p=o&&Yw(n),v=n[15]&&Jw(n),y=!n[17]&&Zw(n);return{c(){e=E("div"),t=E("div"),h&&h.c(),i=P(),d&&d.c(),s=P(),ce(r.$$.fragment),l=P(),p&&p.c(),a=P(),v&&v.c(),c=P(),y&&y.c(),this.h()},l(b){e=A(b,"DIV",{class:!0,style:!0});var S=w(e);t=A(S,"DIV",{class:!0});var I=w(t);h&&h.l(I),i=M(I),d&&d.l(I),s=M(I),ge(r.$$.fragment,I),l=M(I),p&&p.l(I),I.forEach(g),a=M(S),v&&v.l(S),c=M(S),y&&y.l(S),S.forEach(g),this.h()},h(){_(t,"class","jse-contents svelte-1dkd71f"),_(e,"class","jse-contents-outer svelte-1dkd71f"),_(e,"style",n[18])},m(b,S){B(b,e,S),m(e,t),h&&h.m(t,null),m(t,i),d&&d.m(t,null),m(t,s),ue(r,t,null),m(t,l),p&&p.m(t,null),m(e,a),v&&v.m(e,null),m(e,c),y&&y.m(e,null),u=!0},p(b,S){h&&h.p&&(!u||S[1]&16)&&as(h,f,b,b[35],u?us(f,b[35],S,ate):cs(b[35]),Hw),b[17]?d&&(d.d(1),d=null):d||(d=Xw(),d.c(),d.m(t,s));const I={};S[0]&2&&(I.path=b[1]),S[0]&1&&(I.value=b[0]),S[0]&8192&&(I.enforceString=b[13]),S[0]&65536&&(I.isSelected=b[16]),S[0]&65664&&(I.selection=b[16]?b[7]:void 0),S[0]&576&&(I.searchResultItems=Iw(b[6],b[9])),S[0]&256&&(I.context=b[8]),r.$set(I),S[0]&65922&&(o=!b[8].readOnly&&b[16]&&b[7]&&(_n(b[7])||yn(b[7]))&&!b[7].edit&&En(b[7].focusPath,b[1])),o?p?(p.p(b,S),S[0]&65922&&D(p,1)):(p=Yw(b),p.c(),D(p,1),p.m(t,null)):p&&(Le(),U(p,1,1,()=>{p=null}),Ve()),b[15]?v?(v.p(b,S),S[0]&32768&&D(v,1)):(v=Jw(b),v.c(),D(v,1),v.m(e,c)):v&&(Le(),U(v,1,1,()=>{v=null}),Ve()),b[17]?y&&(y.d(1),y=null):y?y.p(b,S):(y=Zw(b),y.c(),y.m(e,null)),(!u||S[0]&262144)&&_(e,"style",b[18])},i(b){u||(D(h,b),D(r.$$.fragment,b),D(p),D(v),u=!0)},o(b){U(h,b),U(r.$$.fragment,b),U(p),U(v),u=!1},d(b){b&&g(e),h&&h.d(b),d&&d.d(),fe(r),p&&p.d(),v&&v.d(),y&&y.d()}}}function hte(n){let e,t,i,s,r,l,o,a,c,u,f,h=!n[8].readOnly&&n[16]&&n[7]&&(_n(n[7])||yn(n[7]))&&!n[7].edit&&En(n[7].focusPath,n[1]),d,p,v,y,b,S,I;const T=[pte,mte],C=[];function k(q,X){return q[12]?0:1}s=k(n),r=C[s]=T[s](n);const R=n[34].identifier,O=os(R,n,n[35],zw);let N=!n[17]&&xw();function F(q,X){return q[12]?vte:gte}let W=F(n),z=W(n),Y=h&&$w(n),H=n[15]&&(!n[12]||!n[15].isChildError)&&eC(n);function K(q,X){if(q[12])return _te;if(!q[17])return bte}let j=K(n),J=j&&j(n),Z=n[12]&&tC(n);return{c(){e=E("div"),t=E("div"),i=E("button"),r.c(),l=P(),O&&O.c(),o=P(),N&&N.c(),a=P(),c=E("div"),u=E("div"),z.c(),f=P(),Y&&Y.c(),d=P(),H&&H.c(),p=P(),J&&J.c(),v=P(),Z&&Z.c(),y=et(),this.h()},l(q){e=A(q,"DIV",{class:!0,style:!0});var X=w(e);t=A(X,"DIV",{class:!0});var ne=w(t);i=A(ne,"BUTTON",{type:!0,class:!0,title:!0});var Q=w(i);r.l(Q),Q.forEach(g),l=M(ne),O&&O.l(ne),o=M(ne),N&&N.l(ne),a=M(ne),c=A(ne,"DIV",{class:!0,"data-type":!0});var re=w(c);u=A(re,"DIV",{class:!0});var be=w(u);z.l(be),be.forEach(g),re.forEach(g),f=M(ne),Y&&Y.l(ne),ne.forEach(g),d=M(X),H&&H.l(X),p=M(X),J&&J.l(X),X.forEach(g),v=M(q),Z&&Z.l(q),y=et(),this.h()},h(){_(i,"type","button"),_(i,"class","jse-expand svelte-1dkd71f"),_(i,"title","Expand or collapse this object (Ctrl+Click to expand/collapse recursively)"),_(u,"class","jse-meta-inner svelte-1dkd71f"),_(c,"class","jse-meta svelte-1dkd71f"),_(c,"data-type","selectable-value"),_(t,"class","jse-header svelte-1dkd71f"),_(e,"class","jse-header-outer svelte-1dkd71f"),_(e,"style",n[18])},m(q,X){B(q,e,X),m(e,t),m(t,i),C[s].m(i,null),m(t,l),O&&O.m(t,null),m(t,o),N&&N.m(t,null),m(t,a),m(t,c),m(c,u),z.m(u,null),m(t,f),Y&&Y.m(t,null),m(e,d),H&&H.m(e,null),m(e,p),J&&J.m(e,null),B(q,v,X),Z&&Z.m(q,X),B(q,y,X),b=!0,S||(I=se(i,"click",n[21]),S=!0)},p(q,X){let ne=s;s=k(q),s===ne?C[s].p(q,X):(Le(),U(C[ne],1,1,()=>{C[ne]=null}),Ve(),r=C[s],r?r.p(q,X):(r=C[s]=T[s](q),r.c()),D(r,1),r.m(i,null)),O&&O.p&&(!b||X[1]&16)&&as(O,R,q,q[35],b?us(R,q[35],X,cte):cs(q[35]),zw),q[17]?N&&(N.d(1),N=null):N||(N=xw(),N.c(),N.m(t,a)),W===(W=F(q))&&z?z.p(q,X):(z.d(1),z=W(q),z&&(z.c(),z.m(u,null))),X[0]&65922&&(h=!q[8].readOnly&&q[16]&&q[7]&&(_n(q[7])||yn(q[7]))&&!q[7].edit&&En(q[7].focusPath,q[1])),h?Y?(Y.p(q,X),X[0]&65922&&D(Y,1)):(Y=$w(q),Y.c(),D(Y,1),Y.m(t,null)):Y&&(Le(),U(Y,1,1,()=>{Y=null}),Ve()),q[15]&&(!q[12]||!q[15].isChildError)?H?(H.p(q,X),X[0]&36864&&D(H,1)):(H=eC(q),H.c(),D(H,1),H.m(e,p)):H&&(Le(),U(H,1,1,()=>{H=null}),Ve()),j===(j=K(q))&&J?J.p(q,X):(J&&J.d(1),J=j&&j(q),J&&(J.c(),J.m(e,null))),(!b||X[0]&262144)&&_(e,"style",q[18]),q[12]?Z?(Z.p(q,X),X[0]&4096&&D(Z,1)):(Z=tC(q),Z.c(),D(Z,1),Z.m(y.parentNode,y)):Z&&(Le(),U(Z,1,1,()=>{Z=null}),Ve())},i(q){b||(D(r),D(O,q),D(Y),D(H),D(Z),b=!0)},o(q){U(r),U(O,q),U(Y),U(H),U(Z),b=!1},d(q){q&&g(e),C[s].d(),O&&O.d(q),N&&N.d(),z.d(),Y&&Y.d(),H&&H.d(),J&&J.d(),q&&g(v),Z&&Z.d(q),q&&g(y),S=!1,I()}}}function dte(n){let e,t,i,s,r,l,o,a,c,u,f,h=!n[8].readOnly&&n[16]&&n[7]&&(_n(n[7])||yn(n[7]))&&!n[7].edit&&En(n[7].focusPath,n[1]),d,p,v,y,b,S,I;const T=[Ete,Ste],C=[];function k(q,X){return q[12]?0:1}s=k(n),r=C[s]=T[s](n);const R=n[34].identifier,O=os(R,n,n[35],Qw);let N=!n[17]&&rC();function F(q,X){return q[12]?wte:Ate}let W=F(n),z=W(n),Y=h&&lC(n),H=n[15]&&(!n[12]||!n[15].isChildError)&&oC(n);function K(q,X){return q[12]?kte:Cte}let j=K(n),J=j(n),Z=n[12]&&aC(n);return{c(){e=E("div"),t=E("div"),i=E("button"),r.c(),l=P(),O&&O.c(),o=P(),N&&N.c(),a=P(),c=E("div"),u=E("div"),z.c(),f=P(),Y&&Y.c(),d=P(),H&&H.c(),p=P(),J.c(),v=P(),Z&&Z.c(),y=et(),this.h()},l(q){e=A(q,"DIV",{class:!0,style:!0});var X=w(e);t=A(X,"DIV",{class:!0});var ne=w(t);i=A(ne,"BUTTON",{type:!0,class:!0,title:!0});var Q=w(i);r.l(Q),Q.forEach(g),l=M(ne),O&&O.l(ne),o=M(ne),N&&N.l(ne),a=M(ne),c=A(ne,"DIV",{class:!0});var re=w(c);u=A(re,"DIV",{class:!0,"data-type":!0});var be=w(u);z.l(be),be.forEach(g),re.forEach(g),f=M(ne),Y&&Y.l(ne),ne.forEach(g),d=M(X),H&&H.l(X),p=M(X),J.l(X),X.forEach(g),v=M(q),Z&&Z.l(q),y=et(),this.h()},h(){_(i,"type","button"),_(i,"class","jse-expand svelte-1dkd71f"),_(i,"title","Expand or collapse this array (Ctrl+Click to expand/collapse recursively)"),_(u,"class","jse-meta-inner svelte-1dkd71f"),_(u,"data-type","selectable-value"),_(c,"class","jse-meta svelte-1dkd71f"),_(t,"class","jse-header svelte-1dkd71f"),_(e,"class","jse-header-outer svelte-1dkd71f"),_(e,"style",n[18])},m(q,X){B(q,e,X),m(e,t),m(t,i),C[s].m(i,null),m(t,l),O&&O.m(t,null),m(t,o),N&&N.m(t,null),m(t,a),m(t,c),m(c,u),z.m(u,null),m(t,f),Y&&Y.m(t,null),m(e,d),H&&H.m(e,null),m(e,p),J.m(e,null),B(q,v,X),Z&&Z.m(q,X),B(q,y,X),b=!0,S||(I=se(i,"click",n[21]),S=!0)},p(q,X){let ne=s;s=k(q),s===ne?C[s].p(q,X):(Le(),U(C[ne],1,1,()=>{C[ne]=null}),Ve(),r=C[s],r?r.p(q,X):(r=C[s]=T[s](q),r.c()),D(r,1),r.m(i,null)),O&&O.p&&(!b||X[1]&16)&&as(O,R,q,q[35],b?us(R,q[35],X,ute):cs(q[35]),Qw),q[17]?N&&(N.d(1),N=null):N||(N=rC(),N.c(),N.m(t,a)),W===(W=F(q))&&z?z.p(q,X):(z.d(1),z=W(q),z&&(z.c(),z.m(u,null))),X[0]&65922&&(h=!q[8].readOnly&&q[16]&&q[7]&&(_n(q[7])||yn(q[7]))&&!q[7].edit&&En(q[7].focusPath,q[1])),h?Y?(Y.p(q,X),X[0]&65922&&D(Y,1)):(Y=lC(q),Y.c(),D(Y,1),Y.m(t,null)):Y&&(Le(),U(Y,1,1,()=>{Y=null}),Ve()),q[15]&&(!q[12]||!q[15].isChildError)?H?(H.p(q,X),X[0]&36864&&D(H,1)):(H=oC(q),H.c(),D(H,1),H.m(e,p)):H&&(Le(),U(H,1,1,()=>{H=null}),Ve()),j===(j=K(q))&&J?J.p(q,X):(J.d(1),J=j(q),J&&(J.c(),J.m(e,null))),(!b||X[0]&262144)&&_(e,"style",q[18]),q[12]?Z?(Z.p(q,X),X[0]&4096&&D(Z,1)):(Z=aC(q),Z.c(),D(Z,1),Z.m(y.parentNode,y)):Z&&(Le(),U(Z,1,1,()=>{Z=null}),Ve())},i(q){b||(D(r),D(O,q),D(Y),D(H),D(Z),b=!0)},o(q){U(r),U(O,q),U(Y),U(H),U(Z),b=!1},d(q){q&&g(e),C[s].d(),O&&O.d(q),N&&N.d(),z.d(),Y&&Y.d(),H&&H.d(),J.d(),q&&g(v),Z&&Z.d(q),q&&g(y),S=!1,I()}}}function Xw(n){let e,t;return{c(){e=E("div"),t=L(":"),this.h()},l(i){e=A(i,"DIV",{class:!0});var s=w(e);t=V(s,":"),s.forEach(g),this.h()},h(){_(e,"class","jse-separator svelte-1dkd71f")},m(i,s){B(i,e,s),m(e,t)},d(i){i&&g(e)}}}function Yw(n){let e,t,i;return t=new la({props:{selected:!0,onContextMenu:n[8].onContextMenu}}),{c(){e=E("div"),ce(t.$$.fragment),this.h()},l(s){e=A(s,"DIV",{class:!0});var r=w(e);ge(t.$$.fragment,r),r.forEach(g),this.h()},h(){_(e,"class","jse-context-menu-button-anchor svelte-1dkd71f")},m(s,r){B(s,e,r),ue(t,e,null),i=!0},p(s,r){const l={};r[0]&256&&(l.onContextMenu=s[8].onContextMenu),t.$set(l)},i(s){i||(D(t.$$.fragment,s),i=!0)},o(s){U(t.$$.fragment,s),i=!1},d(s){s&&g(e),fe(t)}}}function Jw(n){let e,t;return e=new Ub({props:{validationError:n[15],onExpand:n[22]}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s[0]&32768&&(r.validationError=i[15]),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function Zw(n){let e,t,i;return{c(){e=E("div"),this.h()},l(s){e=A(s,"DIV",{class:!0,"data-type":!0}),w(e).forEach(g),this.h()},h(){_(e,"class","jse-insert-selection-area jse-after svelte-1dkd71f"),_(e,"data-type","insert-selection-area-after")},m(s,r){B(s,e,r),t||(i=se(e,"click",n[30]),t=!0)},p:Ke,d(s){s&&g(e),t=!1,i()}}}function mte(n){let e,t;return e=new Wt({props:{data:Rl}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p:Ke,i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function pte(n){let e,t;return e=new Wt({props:{data:Mr}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p:Ke,i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function xw(n){let e,t;return{c(){e=E("div"),t=L(":"),this.h()},l(i){e=A(i,"DIV",{class:!0});var s=w(e);t=V(s,":"),s.forEach(g),this.h()},h(){_(e,"class","jse-separator svelte-1dkd71f")},m(i,s){B(i,e,s),m(e,t)},d(i){i&&g(e)}}}function gte(n){let e,t,i,s,r=Object.keys(n[0]).length+"",l,o,a=Object.keys(n[0]).length===1?"prop":"props",c,u,f,h,d,p;return{c(){e=E("div"),t=L("{"),i=P(),s=E("button"),l=L(r),o=P(),c=L(a),u=P(),f=E("div"),h=L("}"),this.h()},l(v){e=A(v,"DIV",{class:!0});var y=w(e);t=V(y,"{"),y.forEach(g),i=M(v),s=A(v,"BUTTON",{type:!0,class:!0});var b=w(s);l=V(b,r),o=M(b),c=V(b,a),b.forEach(g),u=M(v),f=A(v,"DIV",{class:!0});var S=w(f);h=V(S,"}"),S.forEach(g),this.h()},h(){_(e,"class","jse-bracket svelte-1dkd71f"),_(s,"type","button"),_(s,"class","jse-tag svelte-1dkd71f"),_(f,"class","jse-bracket svelte-1dkd71f")},m(v,y){B(v,e,y),m(e,t),B(v,i,y),B(v,s,y),m(s,l),m(s,o),m(s,c),B(v,u,y),B(v,f,y),m(f,h),d||(p=se(s,"click",n[22]),d=!0)},p(v,y){y[0]&1&&r!==(r=Object.keys(v[0]).length+"")&&Ce(l,r),y[0]&1&&a!==(a=Object.keys(v[0]).length===1?"prop":"props")&&Ce(c,a)},d(v){v&&g(e),v&&g(i),v&&g(s),v&&g(u),v&&g(f),d=!1,p()}}}function vte(n){let e,t;return{c(){e=E("div"),t=L("{"),this.h()},l(i){e=A(i,"DIV",{class:!0});var s=w(e);t=V(s,"{"),s.forEach(g),this.h()},h(){_(e,"class","jse-bracket jse-expanded svelte-1dkd71f")},m(i,s){B(i,e,s),m(e,t)},p:Ke,d(i){i&&g(e)}}}function $w(n){let e,t,i;return t=new la({props:{selected:!0,onContextMenu:n[8].onContextMenu}}),{c(){e=E("div"),ce(t.$$.fragment),this.h()},l(s){e=A(s,"DIV",{class:!0});var r=w(e);ge(t.$$.fragment,r),r.forEach(g),this.h()},h(){_(e,"class","jse-context-menu-button-anchor svelte-1dkd71f")},m(s,r){B(s,e,r),ue(t,e,null),i=!0},p(s,r){const l={};r[0]&256&&(l.onContextMenu=s[8].onContextMenu),t.$set(l)},i(s){i||(D(t.$$.fragment,s),i=!0)},o(s){U(t.$$.fragment,s),i=!1},d(s){s&&g(e),fe(t)}}}function eC(n){let e,t;return e=new Ub({props:{validationError:n[15],onExpand:n[22]}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s[0]&32768&&(r.validationError=i[15]),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function bte(n){let e,t,i;return{c(){e=E("div"),this.h()},l(s){e=A(s,"DIV",{class:!0,"data-type":!0}),w(e).forEach(g),this.h()},h(){_(e,"class","jse-insert-selection-area jse-after svelte-1dkd71f"),_(e,"data-type","insert-selection-area-after")},m(s,r){B(s,e,r),t||(i=se(e,"click",n[30]),t=!0)},p:Ke,d(s){s&&g(e),t=!1,i()}}}function _te(n){let e,t,i;return{c(){e=E("div"),this.h()},l(s){e=A(s,"DIV",{class:!0,"data-type":!0}),w(e).forEach(g),this.h()},h(){_(e,"class","jse-insert-selection-area jse-inside svelte-1dkd71f"),_(e,"data-type","insert-selection-area-inside")},m(s,r){B(s,e,r),t||(i=se(e,"click",n[29]),t=!0)},p:Ke,d(s){s&&g(e),t=!1,i()}}}function tC(n){let e,t=!n[8].readOnly&&(n[10]===pl||n[16]&&Ci(n[7])),i,s,r,l,o,a,c,u,f=t&&nC(n),h=n[19](n[1],n[0],n[2],n[3],n[4],n[5],n[6],n[7],n[11]),d=[];for(let y=0;y<h.length;y+=1)d[y]=iC(qw(n,h,y));const p=y=>U(d[y],1,1,()=>{d[y]=null});let v=!n[17]&&sC(n);return{c(){e=E("div"),f&&f.c(),i=P();for(let y=0;y<d.length;y+=1)d[y].c();s=P(),r=E("div"),l=E("div"),o=E("div"),a=L("}"),c=P(),v&&v.c(),this.h()},l(y){e=A(y,"DIV",{class:!0});var b=w(e);f&&f.l(b),i=M(b);for(let C=0;C<d.length;C+=1)d[C].l(b);b.forEach(g),s=M(y),r=A(y,"DIV",{class:!0,style:!0});var S=w(r);l=A(S,"DIV",{"data-type":!0,class:!0});var I=w(l);o=A(I,"DIV",{class:!0});var T=w(o);a=V(T,"}"),T.forEach(g),I.forEach(g),c=M(S),v&&v.l(S),S.forEach(g),this.h()},h(){_(e,"class","jse-props svelte-1dkd71f"),_(o,"class","jse-bracket svelte-1dkd71f"),_(l,"data-type","selectable-value"),_(l,"class","jse-footer svelte-1dkd71f"),_(r,"class","jse-footer-outer svelte-1dkd71f"),_(r,"style",n[18])},m(y,b){B(y,e,b),f&&f.m(e,null),m(e,i);for(let S=0;S<d.length;S+=1)d[S].m(e,null);B(y,s,b),B(y,r,b),m(r,l),m(l,o),m(o,a),m(r,c),v&&v.m(r,null),u=!0},p(y,b){if(b[0]&66944&&(t=!y[8].readOnly&&(y[10]===pl||y[16]&&Ci(y[7]))),t?f?(f.p(y,b),b[0]&66944&&D(f,1)):(f=nC(y),f.c(),D(f,1),f.m(e,i)):f&&(Le(),U(f,1,1,()=>{f=null}),Ve()),b[0]&76024319){h=y[19](y[1],y[0],y[2],y[3],y[4],y[5],y[6],y[7],y[11]);let S;for(S=0;S<h.length;S+=1){const I=qw(y,h,S);d[S]?(d[S].p(I,b),D(d[S],1)):(d[S]=iC(I),d[S].c(),D(d[S],1),d[S].m(e,null))}for(Le(),S=h.length;S<d.length;S+=1)p(S);Ve()}y[17]?v&&(v.d(1),v=null):v?v.p(y,b):(v=sC(y),v.c(),v.m(r,null)),(!u||b[0]&262144)&&_(r,"style",y[18])},i(y){if(!u){D(f);for(let b=0;b<h.length;b+=1)D(d[b]);u=!0}},o(y){U(f),d=d.filter(Boolean);for(let b=0;b<d.length;b+=1)U(d[b]);u=!1},d(y){y&&g(e),f&&f.d(),Ft(d,y),y&&g(s),y&&g(r),v&&v.d()}}}function nC(n){let e,t,i,s;return t=new la({props:{selected:n[16]&&Ci(n[7]),onContextMenu:n[31]}}),{c(){e=E("div"),ce(t.$$.fragment),this.h()},l(r){e=A(r,"DIV",{class:!0,"data-type":!0,style:!0,title:!0});var l=w(e);ge(t.$$.fragment,l),l.forEach(g),this.h()},h(){_(e,"class","jse-insert-area jse-inside svelte-1dkd71f"),_(e,"data-type","insert-selection-area-inside"),_(e,"style",i=Qu(n[1].length+1)),_(e,"title",Av),xe(e,"jse-hovered",n[10]===pl),xe(e,"jse-selected",n[16]&&Ci(n[7]))},m(r,l){B(r,e,l),ue(t,e,null),s=!0},p(r,l){const o={};l[0]&65664&&(o.selected=r[16]&&Ci(r[7])),t.$set(o),(!s||l[0]&2&&i!==(i=Qu(r[1].length+1)))&&_(e,"style",i),(!s||l[0]&1024)&&xe(e,"jse-hovered",r[10]===pl),(!s||l[0]&65664)&&xe(e,"jse-selected",r[16]&&Ci(r[7]))},i(r){s||(D(t.$$.fragment,r),s=!0)},o(r){U(t.$$.fragment,r),s=!1},d(r){r&&g(e),fe(t)}}}function yte(n){let e,t,i,s;return t=new Kee({props:{path:n[53].path,pointer:n[53].pointer,key:n[53].key,selection:n[53].selection,searchResultItems:n[53].keySearchResultItemsMap,context:n[8],onUpdateKey:n[23]}}),{c(){e=E("div"),ce(t.$$.fragment),i=P(),this.h()},l(r){e=A(r,"DIV",{slot:!0,class:!0});var l=w(e);ge(t.$$.fragment,l),i=M(l),l.forEach(g),this.h()},h(){_(e,"slot","identifier"),_(e,"class","jse-identifier svelte-1dkd71f")},m(r,l){B(r,e,l),ue(t,e,null),m(e,i),s=!0},p(r,l){const o={};l[0]&2303&&(o.path=r[53].path),l[0]&2303&&(o.pointer=r[53].pointer),l[0]&2303&&(o.key=r[53].key),l[0]&2303&&(o.selection=r[53].selection),l[0]&2303&&(o.searchResultItems=r[53].keySearchResultItemsMap),l[0]&256&&(o.context=r[8]),t.$set(o)},i(r){s||(D(t.$$.fragment,r),s=!0)},o(r){U(t.$$.fragment,r),s=!1},d(r){r&&g(e),fe(t)}}}function iC(n){let e,t;return e=new Wb({props:{value:n[53].value,path:n[53].path,expandedMap:n[53].expandedMap,enforceStringMap:n[53].enforceStringMap,visibleSectionsMap:n[53].visibleSectionsMap,validationErrorsMap:n[53].validationErrorsMap,searchResultItemsMap:n[53].valueSearchResultItemsMap,selection:n[53].selection,context:n[8],onDragSelectionStart:n[26],$$slots:{identifier:[yte]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s[0]&2303&&(r.value=i[53].value),s[0]&2303&&(r.path=i[53].path),s[0]&2303&&(r.expandedMap=i[53].expandedMap),s[0]&2303&&(r.enforceStringMap=i[53].enforceStringMap),s[0]&2303&&(r.visibleSectionsMap=i[53].visibleSectionsMap),s[0]&2303&&(r.validationErrorsMap=i[53].validationErrorsMap),s[0]&2303&&(r.searchResultItemsMap=i[53].valueSearchResultItemsMap),s[0]&2303&&(r.selection=i[53].selection),s[0]&256&&(r.context=i[8]),s[0]&2559|s[1]&16&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function sC(n){let e,t,i;return{c(){e=E("div"),this.h()},l(s){e=A(s,"DIV",{class:!0,"data-type":!0}),w(e).forEach(g),this.h()},h(){_(e,"class","jse-insert-selection-area jse-after svelte-1dkd71f"),_(e,"data-type","insert-selection-area-after")},m(s,r){B(s,e,r),t||(i=se(e,"click",n[30]),t=!0)},p:Ke,d(s){s&&g(e),t=!1,i()}}}function Ste(n){let e,t;return e=new Wt({props:{data:Rl}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p:Ke,i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function Ete(n){let e,t;return e=new Wt({props:{data:Mr}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p:Ke,i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function rC(n){let e,t;return{c(){e=E("div"),t=L(":"),this.h()},l(i){e=A(i,"DIV",{class:!0});var s=w(e);t=V(s,":"),s.forEach(g),this.h()},h(){_(e,"class","jse-separator svelte-1dkd71f")},m(i,s){B(i,e,s),m(e,t)},d(i){i&&g(e)}}}function Ate(n){let e,t,i,s,r=n[0].length+"",l,o,a=n[0].length===1?"item":"items",c,u,f,h,d,p;return{c(){e=E("div"),t=L("["),i=P(),s=E("button"),l=L(r),o=P(),c=L(a),u=P(),f=E("div"),h=L("]"),this.h()},l(v){e=A(v,"DIV",{class:!0});var y=w(e);t=V(y,"["),y.forEach(g),i=M(v),s=A(v,"BUTTON",{type:!0,class:!0});var b=w(s);l=V(b,r),o=M(b),c=V(b,a),b.forEach(g),u=M(v),f=A(v,"DIV",{class:!0});var S=w(f);h=V(S,"]"),S.forEach(g),this.h()},h(){_(e,"class","jse-bracket svelte-1dkd71f"),_(s,"type","button"),_(s,"class","jse-tag svelte-1dkd71f"),_(f,"class","jse-bracket svelte-1dkd71f")},m(v,y){B(v,e,y),m(e,t),B(v,i,y),B(v,s,y),m(s,l),m(s,o),m(s,c),B(v,u,y),B(v,f,y),m(f,h),d||(p=se(s,"click",n[22]),d=!0)},p(v,y){y[0]&1&&r!==(r=v[0].length+"")&&Ce(l,r),y[0]&1&&a!==(a=v[0].length===1?"item":"items")&&Ce(c,a)},d(v){v&&g(e),v&&g(i),v&&g(s),v&&g(u),v&&g(f),d=!1,p()}}}function wte(n){let e,t,i,s,r=n[0].length+"",l,o,a=n[0].length===1?"item":"items",c;return{c(){e=E("div"),t=L("["),i=P(),s=E("span"),l=L(r),o=P(),c=L(a),this.h()},l(u){e=A(u,"DIV",{class:!0});var f=w(e);t=V(f,"["),f.forEach(g),i=M(u),s=A(u,"SPAN",{class:!0});var h=w(s);l=V(h,r),o=M(h),c=V(h,a),h.forEach(g),this.h()},h(){_(e,"class","jse-bracket svelte-1dkd71f"),_(s,"class","jse-tag jse-expanded svelte-1dkd71f")},m(u,f){B(u,e,f),m(e,t),B(u,i,f),B(u,s,f),m(s,l),m(s,o),m(s,c)},p(u,f){f[0]&1&&r!==(r=u[0].length+"")&&Ce(l,r),f[0]&1&&a!==(a=u[0].length===1?"item":"items")&&Ce(c,a)},d(u){u&&g(e),u&&g(i),u&&g(s)}}}function lC(n){let e,t,i;return t=new la({props:{selected:!0,onContextMenu:n[8].onContextMenu}}),{c(){e=E("div"),ce(t.$$.fragment),this.h()},l(s){e=A(s,"DIV",{class:!0});var r=w(e);ge(t.$$.fragment,r),r.forEach(g),this.h()},h(){_(e,"class","jse-context-menu-button-anchor svelte-1dkd71f")},m(s,r){B(s,e,r),ue(t,e,null),i=!0},p(s,r){const l={};r[0]&256&&(l.onContextMenu=s[8].onContextMenu),t.$set(l)},i(s){i||(D(t.$$.fragment,s),i=!0)},o(s){U(t.$$.fragment,s),i=!1},d(s){s&&g(e),fe(t)}}}function oC(n){let e,t;return e=new Ub({props:{validationError:n[15],onExpand:n[22]}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s[0]&32768&&(r.validationError=i[15]),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function Cte(n){let e,t,i;return{c(){e=E("div"),this.h()},l(s){e=A(s,"DIV",{class:!0,"data-type":!0}),w(e).forEach(g),this.h()},h(){_(e,"class","jse-insert-selection-area jse-after svelte-1dkd71f"),_(e,"data-type","insert-selection-area-after")},m(s,r){B(s,e,r),t||(i=se(e,"click",n[30]),t=!0)},p:Ke,d(s){s&&g(e),t=!1,i()}}}function kte(n){let e,t,i;return{c(){e=E("div"),this.h()},l(s){e=A(s,"DIV",{class:!0,"data-type":!0}),w(e).forEach(g),this.h()},h(){_(e,"class","jse-insert-selection-area jse-inside svelte-1dkd71f"),_(e,"data-type","insert-selection-area-inside")},m(s,r){B(s,e,r),t||(i=se(e,"click",n[29]),t=!0)},p:Ke,d(s){s&&g(e),t=!1,i()}}}function aC(n){let e,t=!n[8].readOnly&&(n[10]===pl||n[16]&&Ci(n[7])),i,s=[],r=new Map,l,o,a,c,u,f,h,d=t&&cC(n),p=n[14]||Fo;const v=b=>b[49];for(let b=0;b<p.length;b+=1){let S=Gw(n,p,b),I=v(S);r.set(I,s[b]=hC(I,S))}let y=!n[17]&&dC(n);return{c(){e=E("div"),d&&d.c(),i=P();for(let b=0;b<s.length;b+=1)s[b].c();l=P(),o=E("div"),a=E("div"),c=E("span"),u=L("]"),f=P(),y&&y.c(),this.h()},l(b){e=A(b,"DIV",{class:!0});var S=w(e);d&&d.l(S),i=M(S);for(let k=0;k<s.length;k+=1)s[k].l(S);S.forEach(g),l=M(b),o=A(b,"DIV",{class:!0,style:!0});var I=w(o);a=A(I,"DIV",{"data-type":!0,class:!0});var T=w(a);c=A(T,"SPAN",{class:!0});var C=w(c);u=V(C,"]"),C.forEach(g),T.forEach(g),f=M(I),y&&y.l(I),I.forEach(g),this.h()},h(){_(e,"class","jse-items svelte-1dkd71f"),_(c,"class","jse-bracket svelte-1dkd71f"),_(a,"data-type","selectable-value"),_(a,"class","jse-footer svelte-1dkd71f"),_(o,"class","jse-footer-outer svelte-1dkd71f"),_(o,"style",n[18])},m(b,S){B(b,e,S),d&&d.m(e,null),m(e,i);for(let I=0;I<s.length;I+=1)s[I].m(e,null);B(b,l,S),B(b,o,S),m(o,a),m(a,c),m(c,u),m(o,f),y&&y.m(o,null),h=!0},p(b,S){S[0]&66944&&(t=!b[8].readOnly&&(b[10]===pl||b[16]&&Ci(b[7]))),t?d?(d.p(b,S),S[0]&66944&&D(d,1)):(d=cC(b),d.c(),D(d,1),d.m(e,i)):d&&(Le(),U(d,1,1,()=>{d=null}),Ve()),S[0]&68176895&&(p=b[14]||Fo,Le(),s=Ju(s,S,v,1,b,p,r,e,Zd,hC,null,Gw),Ve()),b[17]?y&&(y.d(1),y=null):y?y.p(b,S):(y=dC(b),y.c(),y.m(o,null)),(!h||S[0]&262144)&&_(o,"style",b[18])},i(b){if(!h){D(d);for(let S=0;S<p.length;S+=1)D(s[S]);h=!0}},o(b){U(d);for(let S=0;S<s.length;S+=1)U(s[S]);h=!1},d(b){b&&g(e),d&&d.d();for(let S=0;S<s.length;S+=1)s[S].d();b&&g(l),b&&g(o),y&&y.d()}}}function cC(n){let e,t,i,s;return t=new la({props:{selected:n[16]&&Ci(n[7]),onContextMenu:n[31]}}),{c(){e=E("div"),ce(t.$$.fragment),this.h()},l(r){e=A(r,"DIV",{class:!0,"data-type":!0,style:!0,title:!0});var l=w(e);ge(t.$$.fragment,l),l.forEach(g),this.h()},h(){_(e,"class","jse-insert-area jse-inside svelte-1dkd71f"),_(e,"data-type","insert-selection-area-inside"),_(e,"style",i=Qu(n[1].length+1)),_(e,"title",Av),xe(e,"jse-hovered",n[10]===pl),xe(e,"jse-selected",n[16]&&Ci(n[7]))},m(r,l){B(r,e,l),ue(t,e,null),s=!0},p(r,l){const o={};l[0]&65664&&(o.selected=r[16]&&Ci(r[7])),t.$set(o),(!s||l[0]&2&&i!==(i=Qu(r[1].length+1)))&&_(e,"style",i),(!s||l[0]&1024)&&xe(e,"jse-hovered",r[10]===pl),(!s||l[0]&65664)&&xe(e,"jse-selected",r[16]&&Ci(r[7]))},i(r){s||(D(t.$$.fragment,r),s=!0)},o(r){U(t.$$.fragment,r),s=!1},d(r){r&&g(e),fe(t)}}}function Tte(n){let e,t,i=n[50].index+"",s;return{c(){e=E("div"),t=E("div"),s=L(i),this.h()},l(r){e=A(r,"DIV",{slot:!0,class:!0});var l=w(e);t=A(l,"DIV",{class:!0});var o=w(t);s=V(o,i),o.forEach(g),l.forEach(g),this.h()},h(){_(t,"class","jse-index svelte-1dkd71f"),_(e,"slot","identifier"),_(e,"class","jse-identifier svelte-1dkd71f")},m(r,l){B(r,e,l),m(e,t),m(t,s)},p(r,l){l[0]&18687&&i!==(i=r[50].index+"")&&Ce(s,i)},d(r){r&&g(e)}}}function uC(n,e){let t,i,s;return i=new Wb({props:{value:e[50].value,path:e[50].path,expandedMap:e[50].expandedMap,enforceStringMap:e[50].enforceStringMap,visibleSectionsMap:e[50].visibleSectionsMap,validationErrorsMap:e[50].validationErrorsMap,searchResultItemsMap:e[50].searchResultItemsMap,selection:e[50].selection,context:e[8],onDragSelectionStart:e[26],$$slots:{identifier:[Tte]},$$scope:{ctx:e}}}),{key:n,first:null,c(){t=et(),ce(i.$$.fragment),this.h()},l(r){t=et(),ge(i.$$.fragment,r),this.h()},h(){this.first=t},m(r,l){B(r,t,l),ue(i,r,l),s=!0},p(r,l){e=r;const o={};l[0]&18687&&(o.value=e[50].value),l[0]&18687&&(o.path=e[50].path),l[0]&18687&&(o.expandedMap=e[50].expandedMap),l[0]&18687&&(o.enforceStringMap=e[50].enforceStringMap),l[0]&18687&&(o.visibleSectionsMap=e[50].visibleSectionsMap),l[0]&18687&&(o.validationErrorsMap=e[50].validationErrorsMap),l[0]&18687&&(o.searchResultItemsMap=e[50].searchResultItemsMap),l[0]&18687&&(o.selection=e[50].selection),l[0]&256&&(o.context=e[8]),l[0]&18687|l[1]&16&&(o.$$scope={dirty:l,ctx:e}),i.$set(o)},i(r){s||(D(i.$$.fragment,r),s=!0)},o(r){U(i.$$.fragment,r),s=!1},d(r){r&&g(t),fe(i,r)}}}function fC(n){let e,t;return e=new Tee({props:{visibleSections:n[14]||Fo,sectionIndex:n[49],total:n[0].length,path:n[1],pointer:n[9],onExpandSection:n[8].onExpandSection,selection:n[7]}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s[0]&16384&&(r.visibleSections=i[14]||Fo),s[0]&16384&&(r.sectionIndex=i[49]),s[0]&1&&(r.total=i[0].length),s[0]&2&&(r.path=i[1]),s[0]&512&&(r.pointer=i[9]),s[0]&256&&(r.onExpandSection=i[8].onExpandSection),s[0]&128&&(r.selection=i[7]),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function hC(n,e){let t,i=[],s=new Map,r,l,o,a=e[20](e[1],e[0],e[47],e[2],e[3],e[4],e[5],e[6],e[7],e[11]);const c=f=>f[50].index;for(let f=0;f<a.length;f+=1){let h=Kw(e,a,f),d=c(h);s.set(d,i[f]=uC(d,h))}let u=e[47].end<e[0].length&&fC(e);return{key:n,first:null,c(){t=et();for(let f=0;f<i.length;f+=1)i[f].c();r=P(),u&&u.c(),l=et(),this.h()},l(f){t=et();for(let h=0;h<i.length;h+=1)i[h].l(f);r=M(f),u&&u.l(f),l=et(),this.h()},h(){this.first=t},m(f,h){B(f,t,h);for(let d=0;d<i.length;d+=1)i[d].m(f,h);B(f,r,h),u&&u.m(f,h),B(f,l,h),o=!0},p(f,h){e=f,h[0]&68176383&&(a=e[20](e[1],e[0],e[47],e[2],e[3],e[4],e[5],e[6],e[7],e[11]),Le(),i=Ju(i,h,c,1,e,a,s,r.parentNode,Zd,uC,r,Kw),Ve()),e[47].end<e[0].length?u?(u.p(e,h),h[0]&16385&&D(u,1)):(u=fC(e),u.c(),D(u,1),u.m(l.parentNode,l)):u&&(Le(),U(u,1,1,()=>{u=null}),Ve())},i(f){if(!o){for(let h=0;h<a.length;h+=1)D(i[h]);D(u),o=!0}},o(f){for(let h=0;h<i.length;h+=1)U(i[h]);U(u),o=!1},d(f){f&&g(t);for(let h=0;h<i.length;h+=1)i[h].d(f);f&&g(r),u&&u.d(f),f&&g(l)}}}function dC(n){let e,t,i;return{c(){e=E("div"),this.h()},l(s){e=A(s,"DIV",{class:!0,"data-type":!0}),w(e).forEach(g),this.h()},h(){_(e,"class","jse-insert-selection-area jse-after svelte-1dkd71f"),_(e,"data-type","insert-selection-area-after")},m(s,r){B(s,e,r),t||(i=se(e,"click",n[30]),t=!0)},p:Ke,d(s){s&&g(e),t=!1,i()}}}function mC(n){let e,t,i;return t=new la({props:{selected:n[16]&&gr(n[7]),onContextMenu:n[32]}}),{c(){e=E("div"),ce(t.$$.fragment),this.h()},l(s){e=A(s,"DIV",{class:!0,"data-type":!0,style:!0,title:!0});var r=w(e);ge(t.$$.fragment,r),r.forEach(g),this.h()},h(){_(e,"class","jse-insert-area jse-after svelte-1dkd71f"),_(e,"data-type","insert-selection-area-after"),_(e,"style",n[18]),_(e,"title",Av),xe(e,"jse-hovered",n[10]===ku),xe(e,"jse-selected",n[16]&&gr(n[7]))},m(s,r){B(s,e,r),ue(t,e,null),i=!0},p(s,r){const l={};r[0]&65664&&(l.selected=s[16]&&gr(s[7])),t.$set(l),(!i||r[0]&262144)&&_(e,"style",s[18]),(!i||r[0]&1024)&&xe(e,"jse-hovered",s[10]===ku),(!i||r[0]&65664)&&xe(e,"jse-selected",s[16]&&gr(s[7]))},i(s){i||(D(t.$$.fragment,s),i=!0)},o(s){U(t.$$.fragment,s),i=!1},d(s){s&&g(e),fe(t)}}}function Ite(n){let e,t,i,s,r,l,o=!n[8].readOnly&&(n[10]===ku||n[16]&&gr(n[7])),a,c,u,f,h;const d=[dte,hte,fte],p=[];function v(b,S){return S[0]&1&&(t=null),S[0]&1&&(i=null),t==null&&(t=!!Array.isArray(b[0])),t?0:(i==null&&(i=!!ji(b[0])),i?1:2)}s=v(n,[-1,-1]),r=p[s]=d[s](n);let y=o&&mC(n);return{c(){e=E("div"),r.c(),l=P(),y&&y.c(),this.h()},l(b){e=A(b,"DIV",{class:!0,"data-path":!0});var S=w(e);r.l(S),l=M(S),y&&y.l(S),S.forEach(g),this.h()},h(){_(e,"class",a=Ze(lc("jse-json-node",{"jse-expanded":n[12]},n[8].onClassName(n[1],n[0])))+" svelte-1dkd71f"),_(e,"data-path",c=S1(n[1])),xe(e,"jse-root",n[17]),xe(e,"jse-selected",n[16]&&yn(n[7])),xe(e,"jse-selected-key",n[16]&&ci(n[7])),xe(e,"jse-selected-value",n[16]&&_n(n[7])),xe(e,"jse-hovered",n[10]===n1)},m(b,S){B(b,e,S),p[s].m(e,null),m(e,l),y&&y.m(e,null),u=!0,f||(h=[se(e,"mousedown",n[24]),se(e,"mousemove",n[25]),se(e,"mouseover",n[27]),se(e,"mouseout",n[28]),se(e,"focus",void 0),se(e,"blur",void 0)],f=!0)},p(b,S){let I=s;s=v(b,S),s===I?p[s].p(b,S):(Le(),U(p[I],1,1,()=>{p[I]=null}),Ve(),r=p[s],r?r.p(b,S):(r=p[s]=d[s](b),r.c()),D(r,1),r.m(e,l)),S[0]&66944&&(o=!b[8].readOnly&&(b[10]===ku||b[16]&&gr(b[7]))),o?y?(y.p(b,S),S[0]&66944&&D(y,1)):(y=mC(b),y.c(),D(y,1),y.m(e,null)):y&&(Le(),U(y,1,1,()=>{y=null}),Ve()),(!u||S[0]&4355&&a!==(a=Ze(lc("jse-json-node",{"jse-expanded":b[12]},b[8].onClassName(b[1],b[0])))+" svelte-1dkd71f"))&&_(e,"class",a),(!u||S[0]&2&&c!==(c=S1(b[1])))&&_(e,"data-path",c),(!u||S[0]&135427)&&xe(e,"jse-root",b[17]),(!u||S[0]&70019)&&xe(e,"jse-selected",b[16]&&yn(b[7])),(!u||S[0]&70019)&&xe(e,"jse-selected-key",b[16]&&ci(b[7])),(!u||S[0]&70019)&&xe(e,"jse-selected-value",b[16]&&_n(b[7])),(!u||S[0]&5379)&&xe(e,"jse-hovered",b[10]===n1)},i(b){u||(D(r),D(y),u=!0)},o(b){U(r),U(y),u=!1},d(b){b&&g(e),p[s].d(),y&&y.d(),f=!1,on(h)}}}function Qu(n){return`margin-left: calc(${n} * var(--jse-indent-size))`}function Ote(n,e,t){let i,s,{$$slots:r={},$$scope:l}=e,{value:o}=e,{path:a}=e,{expandedMap:c}=e,{enforceStringMap:u}=e,{visibleSectionsMap:f}=e,{validationErrorsMap:h}=e,{searchResultItemsMap:d}=e,{selection:p}=e,{context:v}=e,{onDragSelectionStart:y}=e;const b=Is("jsoneditor:JSONNode");let S,I,T;const C=PG();let k,R,O,N,F,W;function z(ie,_e,Ee,He,We,Qe,we,Me,de){let Ae=Object.keys(_e).map(Re=>{const Ne=r1(k,Re);return{key:Re,value:_e[Re],path:C(ie.concat(Re)),pointer:Ne,expandedMap:Or(Ee,Ne),enforceStringMap:Or(He,Ne),visibleSectionsMap:Or(We,Ne),validationErrorsMap:Or(Qe,Ne),keySearchResultItemsMap:q$(we,Ne),valueSearchResultItemsMap:Or(we,Ne),selection:yw(Me,Ne)}});return de&&de.offset!==0&&(Ae=MS(Ae,de.selectionStartIndex,de.selectionItemsCount,de.offset)),Ae}function Y(ie,_e,Ee,He,We,Qe,we,Me,de,Ae){const Re=Ee.start,Ne=Math.min(Ee.end,_e.length);let Ge=[];for(let pe=Re;pe<Ne;pe++){const Fe=r1(k,pe);Ge.push({index:pe,value:_e[pe],path:C(ie.concat(String(pe))),pointer:Fe,expandedMap:Or(He,Fe),enforceStringMap:Or(We,Fe),visibleSectionsMap:Or(Qe,Fe),validationErrorsMap:Or(we,Fe),searchResultItemsMap:Or(Me,Fe),selection:yw(de,Fe)})}if(Ae&&Ae.offset!==0){const pe=Ge.map(Fe=>Fe.index);Ge=MS(Ge,Ae.selectionStartIndex,Ae.selectionItemsCount,Ae.offset);for(let Fe=0;Fe<Ge.length;Fe++)Ge[Fe].index=pe[Fe]}return Ge}function H(ie){ie.stopPropagation();const _e=ie.ctrlKey;v.onExpand(a,!R,_e)}function K(ie){ie.stopPropagation(),v.onExpand(a,!0)}function j(ie,_e){const Ee=If(a,Object.keys(o),ie,_e);return v.onPatch(Ee),Kt(Ql(Ee[0].path))}function J(ie){if(_z(ie.target)||ie.which===1&&JO(ie.target,"BUTTON"))return;ie.stopPropagation(),ie.preventDefault(),document.addEventListener("mousemove",q,!0),document.addEventListener("mouseup",X);const _e=Op(ie.target),Ee=v.getJson(),He=v.getDocumentState();if(A$(p,a,_e)){ie.button===0&&y(ie);return}if(Wi.selecting=!0,Wi.selectionAnchor=a,Wi.selectionAnchorType=_e,Wi.selectionFocus=a,ie.shiftKey)p&&v.onSelect(ui(Ee,p.anchorPath,a));else if(_e===Pn.multi)if(i&&ie.target.hasAttribute("data-path")){const We=Kt(f5(o,He));v.onSelect(Lb(We))}else v.onSelect(ui(Ee,a,a));else v.onSelect(_w(Ee,_e,a));v.focus()}function Z(ie){if(Wi.selecting){ie.preventDefault(),ie.stopPropagation(),Wi.selectionFocus==null&&window.getSelection&&window.getSelection().empty();const _e=Op(ie.target);if(!En(a,Wi.selectionFocus)||_e!==Wi.selectionAnchorType){Wi.selectionFocus=a,Wi.selectionAnchorType=_e;const Ee=v.getJson();v.onSelect(ui(Ee,Wi.selectionAnchor,Wi.selectionFocus))}}}function q(ie){v.onDrag(ie)}function X(ie){Wi.selecting&&(Wi.selecting=!1,ie.stopPropagation()),v.onDragEnd(),document.removeEventListener("mousemove",q,!0),document.removeEventListener("mouseup",X)}function ne(){var ie,_e;return((_e=(ie=v.findElement([]))==null?void 0:ie.getBoundingClientRect())==null?void 0:_e.top)||0}function Q(ie,_e){const He=ne()-ie.initialContentTop;return _e.clientY-ie.initialClientY-He}function re(ie){if(v.readOnly)return;const _e=pn(p.focusPath);if(!En(a,_e)){y(ie);return}const Ee=he(p,N||Fo);if(b("dragSelectionStart",{selection:p,items:Ee}),!Ee){b("Cannot drag the current selection (probably spread over multiple sections)");return}const He=sc(p),We=Ee.findIndex(de=>En(de.path,He)),Qe=v.getJson(),we=v.getDocumentState(),{offset:Me}=ug({json:Qe,documentState:we,deltaY:0,items:Ee});t(11,T={initialTarget:ie.target,initialClientY:ie.clientY,initialContentTop:ne(),selectionStartIndex:We,selectionItemsCount:p5(p).length,items:Ee,offset:Me,didMoveItems:!1}),Wi.dragging=!0,document.addEventListener("mousemove",be,!0),document.addEventListener("mouseup",le)}function be(ie){if(T){const _e=v.getJson(),Ee=v.getDocumentState(),He=Q(T,ie),{offset:We}=ug({json:_e,documentState:Ee,deltaY:He,items:T.items});We!==T.offset&&(b("drag selection",We,He),t(11,T={...T,offset:We,didMoveItems:!0}))}}function le(ie){if(T){const _e=v.getJson(),Ee=v.getDocumentState(),He=Q(T,ie),{operations:We,updatedSelection:Qe}=ug({json:_e,documentState:Ee,deltaY:He,items:T.items});if(We)v.onPatch(We,(we,Me)=>({state:{...Me,selection:Qe||p}}));else if(ie.target===T.initialTarget&&!T.didMoveItems){const we=Op(ie.target),Me=Az(ie.target);Me&&v.onSelect(_w(_e,we,Me))}t(11,T=void 0),Wi.dragging=!1,document.removeEventListener("mousemove",be,!0),document.removeEventListener("mouseup",le)}}function he(ie,_e){const Ee=[];function He(We){const Qe=a.concat(We),we=v.findElement(Qe);we!=null&&Ee.push({path:Qe,height:we.clientHeight})}if(Array.isArray(o)){const We=sc(ie),Qe=rp(ie),we=Kt(We),Me=Kt(Qe),de=_e.find(Ne=>we>=Ne.start&&Me<=Ne.end);if(!de)return null;const{start:Ae,end:Re}=de;jO(Ae,Math.min(o.length,Re),Ne=>He(String(Ne)))}else Object.keys(o).forEach(He);return Ee}function Ie(ie){Wi.selecting||Wi.dragging||(ie.stopPropagation(),yo(ie.target,"data-type","selectable-value")?t(10,S=n1):yo(ie.target,"data-type","insert-selection-area-inside")?t(10,S=pl):yo(ie.target,"data-type","insert-selection-area-after")&&t(10,S=ku),clearTimeout(I))}function G(ie){ie.stopPropagation(),I=setTimeout(()=>t(10,S=void 0))}function ve(ie){ie.shiftKey||(ie.stopPropagation(),ie.preventDefault(),v.onSelect(Vr(a)))}function je(ie){ie.shiftKey||(ie.stopPropagation(),ie.preventDefault(),v.onSelect(vl(a)))}function $(ie){v.onSelect(Vr(a)),v.onContextMenu(ie)}function Oe(ie){v.onSelect(vl(a)),v.onContextMenu(ie)}return n.$$set=ie=>{"value"in ie&&t(0,o=ie.value),"path"in ie&&t(1,a=ie.path),"expandedMap"in ie&&t(2,c=ie.expandedMap),"enforceStringMap"in ie&&t(3,u=ie.enforceStringMap),"visibleSectionsMap"in ie&&t(4,f=ie.visibleSectionsMap),"validationErrorsMap"in ie&&t(5,h=ie.validationErrorsMap),"searchResultItemsMap"in ie&&t(6,d=ie.searchResultItemsMap),"selection"in ie&&t(7,p=ie.selection),"context"in ie&&t(8,v=ie.context),"onDragSelectionStart"in ie&&t(33,y=ie.onDragSelectionStart),"$$scope"in ie&&t(35,l=ie.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&2&&t(9,k=ht(a)),n.$$.dirty[0]&516&&t(12,R=c?c[k]===!0:!1),n.$$.dirty[0]&777&&t(13,O=Cf(o,u,k,v.parser)),n.$$.dirty[0]&528&&t(14,N=f?f[k]:void 0),n.$$.dirty[0]&544&&t(15,F=h?h[k]:void 0),n.$$.dirty[0]&640&&t(16,W=p?p.pointersMap[k]===!0:!1),n.$$.dirty[0]&2&&t(17,i=a.length===0),n.$$.dirty[0]&2&&t(18,s=Qu(a.length))},[o,a,c,u,f,h,d,p,v,k,S,T,R,O,N,F,W,i,s,z,Y,H,K,j,J,Z,re,Ie,G,ve,je,$,Oe,y,r,l]}class Wb extends nt{constructor(e){super(),it(this,e,Ote,Ite,an,{value:0,path:1,expandedMap:2,enforceStringMap:3,visibleSectionsMap:4,validationErrorsMap:5,searchResultItemsMap:6,selection:7,context:8,onDragSelectionStart:33},null,[-1,-1])}}const Rte=Wb;function Dte(n){let e,t;return e=new xv({props:{items:n[0]}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,[s]){const r={};s&1&&(r.items=i[0]),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function Nte(n,e,t){let i,s,r,l,o,a,c,{json:u}=e,{selection:f}=e,{readOnly:h}=e,{showSearch:d=!1}=e,{historyState:p}=e,{onExpandAll:v}=e,{onCollapseAll:y}=e,{onUndo:b}=e,{onRedo:S}=e,{onSort:I}=e,{onTransform:T}=e,{onContextMenu:C}=e,{onCopy:k}=e,{onRenderMenu:R=Hn}=e;function O(){t(1,d=!d)}return n.$$set=N=>{"json"in N&&t(2,u=N.json),"selection"in N&&t(3,f=N.selection),"readOnly"in N&&t(4,h=N.readOnly),"showSearch"in N&&t(1,d=N.showSearch),"historyState"in N&&t(5,p=N.historyState),"onExpandAll"in N&&t(6,v=N.onExpandAll),"onCollapseAll"in N&&t(7,y=N.onCollapseAll),"onUndo"in N&&t(8,b=N.onUndo),"onRedo"in N&&t(9,S=N.onRedo),"onSort"in N&&t(10,I=N.onSort),"onTransform"in N&&t(11,T=N.onTransform),"onContextMenu"in N&&t(12,C=N.onContextMenu),"onCopy"in N&&t(13,k=N.onCopy),"onRenderMenu"in N&&t(14,R=N.onRenderMenu)},n.$$.update=()=>{n.$$.dirty&4&&t(20,i=u!==void 0),n.$$.dirty&8,n.$$.dirty&1048584&&t(17,s=i&&(yn(f)||ci(f)||_n(f))),n.$$.dirty&68&&t(19,r={icon:WG,title:"Expand all",className:"jse-expand-all",onClick:v,disabled:!Ri(u)}),n.$$.dirty&132&&t(18,l={icon:FG,title:"Collapse all",className:"jse-collapse-all",onClick:y,disabled:!Ri(u)}),n.$$.dirty&4&&t(16,o={icon:Zv,title:"Search (Ctrl+F)",className:"jse-search",onClick:O,disabled:u===void 0}),n.$$.dirty&999220&&t(15,a=h?[r,l,{separator:!0},{icon:Pu,title:"Copy (Ctrl+C)",className:"jse-copy",onClick:k,disabled:!s},{separator:!0},o,{space:!0}]:[r,l,{separator:!0},{icon:Jv,title:"Sort",className:"jse-sort",onClick:I,disabled:h||u===void 0},{icon:Qv,title:"Transform contents (filter, sort, project)",className:"jse-transform",onClick:T,disabled:h||u===void 0},o,{icon:xz,title:Y4,className:"jse-contextmenu",onClick:C},{separator:!0},{icon:nR,title:"Undo (Ctrl+Z)",className:"jse-undo",onClick:b,disabled:!p.canUndo},{icon:tR,title:"Redo (Ctrl+Shift+Z)",className:"jse-redo",onClick:S,disabled:!p.canRedo},{space:!0}]),n.$$.dirty&49152&&t(0,c=R("tree",a)||a)},[c,d,u,f,h,p,v,y,b,S,I,T,C,k,R,a,o,s,l,r,i]}class Pte extends nt{constructor(e){super(),it(this,e,Nte,Dte,an,{json:2,selection:3,readOnly:4,showSearch:1,historyState:5,onExpandAll:6,onCollapseAll:7,onUndo:8,onRedo:9,onSort:10,onTransform:11,onContextMenu:12,onCopy:13,onRenderMenu:14})}}const Mte=Pte;function pC(n){let e,t,i,s,r,l,o,a,c,u,f,h,d,p,v,y,b,S;return{c(){e=E("ul"),t=E("li"),i=L("Click inside the editor"),s=P(),r=E("li"),l=L("Paste clipboard data using "),o=E("span"),a=L("Ctrl+V"),c=P(),u=E("li"),f=L("Create a new object by typing "),h=E("span"),d=L("{"),p=P(),v=E("li"),y=L("Create a new array by typing "),b=E("span"),S=L("["),this.h()},l(I){e=A(I,"UL",{class:!0});var T=w(e);t=A(T,"LI",{class:!0});var C=w(t);i=V(C,"Click inside the editor"),C.forEach(g),s=M(T),r=A(T,"LI",{class:!0});var k=w(r);l=V(k,"Paste clipboard data using "),o=A(k,"SPAN",{class:!0});var R=w(o);a=V(R,"Ctrl+V"),R.forEach(g),k.forEach(g),c=M(T),u=A(T,"LI",{class:!0});var O=w(u);f=V(O,"Create a new object by typing "),h=A(O,"SPAN",{class:!0});var N=w(h);d=V(N,"{"),N.forEach(g),O.forEach(g),p=M(T),v=A(T,"LI",{class:!0});var F=w(v);y=V(F,"Create a new array by typing "),b=A(F,"SPAN",{class:!0});var W=w(b);S=V(W,"["),W.forEach(g),F.forEach(g),T.forEach(g),this.h()},h(){_(t,"class","svelte-17jij2m"),_(o,"class","jse-bold svelte-17jij2m"),_(r,"class","svelte-17jij2m"),_(h,"class","jse-bold svelte-17jij2m"),_(u,"class","svelte-17jij2m"),_(b,"class","jse-bold svelte-17jij2m"),_(v,"class","svelte-17jij2m"),_(e,"class","svelte-17jij2m")},m(I,T){B(I,e,T),m(e,t),m(t,i),m(e,s),m(e,r),m(r,l),m(r,o),m(o,a),m(e,c),m(e,u),m(u,f),m(u,h),m(h,d),m(e,p),m(e,v),m(v,y),m(v,b),m(b,S)},d(I){I&&g(e)}}}function Bte(n){let e,t,i,s,r,l,o,a=!n[0]&&pC();return{c(){e=E("div"),t=E("div"),i=P(),s=E("div"),r=L(`Empty document
    `),a&&a.c(),l=P(),o=E("div"),this.h()},l(c){e=A(c,"DIV",{class:!0});var u=w(e);t=A(u,"DIV",{class:!0}),w(t).forEach(g),i=M(u),s=A(u,"DIV",{class:!0});var f=w(s);r=V(f,`Empty document
    `),a&&a.l(f),f.forEach(g),l=M(u),o=A(u,"DIV",{class:!0}),w(o).forEach(g),u.forEach(g),this.h()},h(){_(t,"class","jse-space jse-before svelte-17jij2m"),_(s,"class","jse-contents svelte-17jij2m"),_(o,"class","jse-space jse-after svelte-17jij2m"),_(e,"class","jse-welcome svelte-17jij2m")},m(c,u){B(c,e,u),m(e,t),m(e,i),m(e,s),m(s,r),a&&a.m(s,null),m(e,l),m(e,o)},p(c,[u]){c[0]?a&&(a.d(1),a=null):a||(a=pC(),a.c(),a.m(s,null))},i:Ke,o:Ke,d(c){c&&g(e),a&&a.d()}}}function Lte(n,e,t){let{readOnly:i}=e;return n.$$set=s=>{"readOnly"in s&&t(0,i=s.readOnly)},[i]}class Vte extends nt{constructor(e){super(),it(this,e,Lte,Bte,an,{readOnly:0})}}const Ute=Vte;var E0={},Wte={get exports(){return E0},set exports(n){E0=n}};/*
 * @version    1.4.0
 * @date       2015-10-26
 * @stability  3 - Stable
 * @author     Lauri Rooden (https://github.com/litejs/natural-compare-lite)
 * @license    MIT License
 */var gC=function(n,e){var t,i,s=1,r=0,l=0,o=String.alphabet;function a(c,u,f){if(f){for(t=u;f=a(c,t),f<76&&f>65;)++t;return+c.slice(u-1,t)}return f=o&&o.indexOf(c.charAt(u)),f>-1?f+76:(f=c.charCodeAt(u)||0,f<45||f>127?f:f<46?65:f<48?f-1:f<58?f+18:f<65?f-11:f<91?f+11:f<97?f-37:f<123?f+5:f-63)}if((n+="")!=(e+="")){for(;s;)if(i=a(n,r++),s=a(e,l++),i<76&&s<76&&i>66&&s>66&&(i=a(n,r,r),s=a(e,l,r=t),l=t),i!=s)return i<s?-1:1}return 0};try{Wte.exports=gC}catch{String.naturalCompare=gC}function Fb(n,e){const t=typeof n=="string"?n.toLowerCase():n,i=typeof e=="string"?e.toLowerCase():e;return E0(t,i)}function Fte(n,e=[],t=1){const i=At(n,e),r=Object.keys(i).slice();r.sort((o,a)=>t*Fb(o,a));const l=[];for(let o=0;o<r.length;o++){const a=r[o],c=ht(e.concat(a));l.push({op:"move",from:c,path:c})}return l}function jte(n,e=[],t=[],i=1){const s=Hte(t,i),r=At(n,e);return[{op:"replace",path:ht(e),value:r.slice(0).sort(s)}]}function Hte(n,e){return function(i,s){const r=At(i,n),l=At(s,n);return r===void 0?e:l===void 0?-e:typeof r!="string"&&typeof l!="string"?r>l?e:r<l?-e:0:e*Fb(r,l)}}function vC(n,e,t){const i=n.slice();return i[4]=e[t],i}function bC(n,e){let t,i=Gd(e[4],yC)+"",s,r,l,o;function a(){return e[3](e[4])}return{key:n,first:null,c(){t=E("button"),s=L(i),this.h()},l(c){t=A(c,"BUTTON",{type:!0,class:!0,title:!0});var u=w(t);s=V(u,i),u.forEach(g),this.h()},h(){_(t,"type","button"),_(t,"class","jse-navigation-bar-dropdown-item svelte-1rtf8mz"),_(t,"title",r=e[4]),xe(t,"jse-selected",e[4]===e[1]),this.first=t},m(c,u){B(c,t,u),m(t,s),l||(o=se(t,"click",k0(a)),l=!0)},p(c,u){e=c,u&1&&i!==(i=Gd(e[4],yC)+"")&&Ce(s,i),u&1&&r!==(r=e[4])&&_(t,"title",r),u&3&&xe(t,"jse-selected",e[4]===e[1])},d(c){c&&g(t),l=!1,o()}}}function _C(n){let e,t;return{c(){e=E("button"),t=L("..."),this.h()},l(i){e=A(i,"BUTTON",{type:!0,class:!0,title:!0});var s=w(e);t=V(s,"..."),s.forEach(g),this.h()},h(){_(e,"type","button"),_(e,"class","jse-navigation-bar-dropdown-item svelte-1rtf8mz"),_(e,"title","Limited to "+Xc+" items")},m(i,s){B(i,e,s),m(e,t)},p:Ke,d(i){i&&g(e)}}}function qte(n){let e,t=[],i=new Map,s,r=DS(n[0],Xc);const l=a=>a[4];for(let a=0;a<r.length;a+=1){let c=vC(n,r,a),u=l(c);i.set(u,t[a]=bC(u,c))}let o=n[0].length>Xc&&_C();return{c(){e=E("div");for(let a=0;a<t.length;a+=1)t[a].c();s=P(),o&&o.c(),this.h()},l(a){e=A(a,"DIV",{class:!0});var c=w(e);for(let u=0;u<t.length;u+=1)t[u].l(c);s=M(c),o&&o.l(c),c.forEach(g),this.h()},h(){_(e,"class","jse-navigation-bar-dropdown svelte-1rtf8mz")},m(a,c){B(a,e,c);for(let u=0;u<t.length;u+=1)t[u].m(e,null);m(e,s),o&&o.m(e,null)},p(a,[c]){c&7&&(r=DS(a[0],Xc),t=Ju(t,c,l,1,a,r,i,e,P5,bC,s,vC)),a[0].length>Xc?o?o.p(a,c):(o=_C(),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},i:Ke,o:Ke,d(a){a&&g(e);for(let c=0;c<t.length;c+=1)t[c].d();o&&o.d()}}}const Xc=100,yC=30;function zte(n,e,t){let{items:i}=e,{selectedItem:s}=e,{onSelect:r}=e;const l=o=>r(o);return n.$$set=o=>{"items"in o&&t(0,i=o.items),"selectedItem"in o&&t(1,s=o.selectedItem),"onSelect"in o&&t(2,r=o.onSelect)},[i,s,r,l]}class Gte extends nt{constructor(e){super(),it(this,e,zte,qte,an,{items:0,selectedItem:1,onSelect:2})}}const Kte=Gte;function SC(n){let e,t,i,s;return{c(){e=E("button"),t=L(n[2]),this.h()},l(r){e=A(r,"BUTTON",{type:!0,class:!0});var l=w(e);t=V(l,n[2]),l.forEach(g),this.h()},h(){_(e,"type","button"),_(e,"class","jse-navigation-bar-button svelte-4ttwnh")},m(r,l){B(r,e,l),m(e,t),i||(s=se(e,"click",n[9]),i=!0)},p(r,l){l&4&&Ce(t,r[2])},d(r){r&&g(e),i=!1,s()}}}function Qte(n){let e,t,i,s,r,l,o;i=new Wt({props:{data:eR}});let a=n[2]!==void 0&&SC(n);return{c(){e=E("div"),t=E("button"),ce(i.$$.fragment),s=P(),a&&a.c(),this.h()},l(c){e=A(c,"DIV",{class:!0});var u=w(e);t=A(u,"BUTTON",{type:!0,class:!0});var f=w(t);ge(i.$$.fragment,f),f.forEach(g),s=M(u),a&&a.l(u),u.forEach(g),this.h()},h(){_(t,"type","button"),_(t,"class","jse-navigation-bar-button jse-navigation-bar-arrow svelte-4ttwnh"),xe(t,"jse-open",n[1]),_(e,"class","jse-navigation-bar-item svelte-4ttwnh")},m(c,u){B(c,e,u),m(e,t),ue(i,t,null),m(e,s),a&&a.m(e,null),n[10](e),r=!0,l||(o=se(t,"click",n[4]),l=!0)},p(c,[u]){(!r||u&2)&&xe(t,"jse-open",c[1]),c[2]!==void 0?a?a.p(c,u):(a=SC(c),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},i(c){r||(D(i.$$.fragment,c),r=!0)},o(c){U(i.$$.fragment,c),r=!1},d(c){c&&g(e),fe(i),a&&a.d(),n[10](null),l=!1,o()}}}function Xte(n,e,t){let i,s;const{openAbsolutePopup:r,closeAbsolutePopup:l}=Bn("absolute-popup");let{path:o}=e,{index:a}=e,{onSelect:c}=e,{getItems:u}=e,f,h=!1,d;function p(S){l(d),c(i.concat(S))}function v(){if(f){t(1,h=!0);const S={items:u(i),selectedItem:s,onSelect:p};d=r(Kte,S,{anchor:f,closeOnOuterClick:!0,onClose:()=>{t(1,h=!1)}})}}const y=()=>p(s);function b(S){Vt[S?"unshift":"push"](()=>{f=S,t(0,f)})}return n.$$set=S=>{"path"in S&&t(5,o=S.path),"index"in S&&t(6,a=S.index),"onSelect"in S&&t(7,c=S.onSelect),"getItems"in S&&t(8,u=S.getItems)},n.$$.update=()=>{n.$$.dirty&96&&(i=o.slice(0,a)),n.$$.dirty&96&&t(2,s=o[a])},[f,h,s,p,v,o,a,c,u,y,b]}class Yte extends nt{constructor(e){super(),it(this,e,Xte,Qte,an,{path:5,index:6,onSelect:7,getItems:8})}}const y5=Yte;function EC(n){let e,t,i,s,r,l;return t=new Wt({props:{data:ia}}),{c(){e=E("button"),ce(t.$$.fragment),this.h()},l(o){e=A(o,"BUTTON",{type:!0,class:!0});var a=w(e);ge(t.$$.fragment,a),a.forEach(g),this.h()},h(){_(e,"type","button"),_(e,"class","jse-navigation-bar-validation-error svelte-1etw4zg")},m(o,a){B(o,e,a),ue(t,e,null),s=!0,r||(l=oc(i=Vb.call(null,e,{text:n[3],...n[4]})),r=!0)},p(o,a){i&&Mn(i.update)&&a&8&&i.update.call(null,{text:o[3],...o[4]})},i(o){s||(D(t.$$.fragment,o),s=!0)},o(o){U(t.$$.fragment,o),s=!1},d(o){o&&g(e),fe(t),r=!1,l()}}}function AC(n){let e,t;return{c(){e=E("div"),t=L("Copied!"),this.h()},l(i){e=A(i,"DIV",{class:!0});var s=w(e);t=V(s,"Copied!"),s.forEach(g),this.h()},h(){_(e,"class","jse-copied-text svelte-1etw4zg")},m(i,s){B(i,e,s),m(e,t)},d(i){i&&g(e)}}}function Jte(n){let e,t,i,s,r,l,o,a,c,u,f=n[3]&&EC(n),h=n[2]&&AC();return o=new Wt({props:{data:Pu}}),{c(){e=E("div"),t=E("input"),i=P(),f&&f.c(),s=P(),h&&h.c(),r=P(),l=E("button"),ce(o.$$.fragment),this.h()},l(d){e=A(d,"DIV",{class:!0});var p=w(e);t=A(p,"INPUT",{type:!0,class:!0}),i=M(p),f&&f.l(p),s=M(p),h&&h.l(p),r=M(p),l=A(p,"BUTTON",{type:!0,class:!0,title:!0});var v=w(l);ge(o.$$.fragment,v),v.forEach(g),p.forEach(g),this.h()},h(){_(t,"type","text"),_(t,"class","jse-navigation-bar-text svelte-1etw4zg"),t.value=n[0],_(l,"type","button"),_(l,"class","jse-navigation-bar-copy svelte-1etw4zg"),_(l,"title","Copy selected path to the clipboard"),xe(l,"copied",n[2]),_(e,"class","jse-navigation-bar-path-editor svelte-1etw4zg"),xe(e,"error",n[3])},m(d,p){B(d,e,p),m(e,t),n[15](t),m(e,i),f&&f.m(e,null),m(e,s),h&&h.m(e,null),m(e,r),m(e,l),ue(o,l,null),a=!0,c||(u=[se(t,"keydown",k0(n[6])),se(t,"input",n[5]),se(l,"click",n[7])],c=!0)},p(d,[p]){(!a||p&1&&t.value!==d[0])&&(t.value=d[0]),d[3]?f?(f.p(d,p),p&8&&D(f,1)):(f=EC(d),f.c(),D(f,1),f.m(e,s)):f&&(Le(),U(f,1,1,()=>{f=null}),Ve()),d[2]?h||(h=AC(),h.c(),h.m(e,r)):h&&(h.d(1),h=null),(!a||p&4)&&xe(l,"copied",d[2]),(!a||p&8)&&xe(e,"error",d[3])},i(d){a||(D(f),D(o.$$.fragment,d),a=!0)},o(d){U(f),U(o.$$.fragment,d),a=!1},d(d){d&&g(e),n[15](null),f&&f.d(),h&&h.d(),fe(o),c=!1,on(u)}}}const Zte=1e3;function xte(n,e,t){let i;const s=Bn("absolute-popup");let{path:r}=e,{pathParser:l}=e,{onChange:o}=e,{onClose:a}=e,{onError:c}=e,{pathExists:u}=e,f,h,d=!1,p,v=!1;Mi(()=>{y()}),br(()=>{clearTimeout(p)});function y(){f.focus()}function b(R){try{const O=l.parse(R);return S(O),{path:O,error:void 0}}catch(O){return{path:void 0,error:O}}}function S(R){if(!u(R))throw new Error("Path does not exist in current document")}function I(R){t(0,h=R.currentTarget.value)}function T(R){const O=na(R);if(O==="Escape"&&a(),O==="Enter"){t(14,d=!0);const N=b(h);N.path!==void 0?o(N.path):c(N.error)}}function C(){y0(h),t(2,v=!0),p=setTimeout(()=>t(2,v=!1),Zte),y()}function k(R){Vt[R?"unshift":"push"](()=>{f=R,t(1,f)})}return n.$$set=R=>{"path"in R&&t(8,r=R.path),"pathParser"in R&&t(9,l=R.pathParser),"onChange"in R&&t(10,o=R.onChange),"onClose"in R&&t(11,a=R.onClose),"onError"in R&&t(12,c=R.onError),"pathExists"in R&&t(13,u=R.pathExists)},n.$$.update=()=>{n.$$.dirty&768&&t(0,h=l.stringify(r)),n.$$.dirty&16385&&t(3,i=d?b(h).error:void 0)},[h,f,v,i,s,I,T,C,r,l,o,a,c,u,d,k]}class $te extends nt{constructor(e){super(),it(this,e,xte,Jte,Ct,{path:8,pathParser:9,onChange:10,onClose:11,onError:12,pathExists:13})}}const ene=$te;function wC(n,e,t){const i=n.slice();return i[20]=e[t],i[22]=t,i}function tne(n){let e,t;return e=new ene({props:{path:n[3],onClose:n[12],onChange:n[13],onError:n[1],pathExists:n[9],pathParser:n[2]}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s&8&&(r.path=i[3]),s&2&&(r.onError=i[1]),s&4&&(r.pathParser=i[2]),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function nne(n){let e=[],t=new Map,i,s,r,l=n[3];const o=c=>c[22];for(let c=0;c<l.length;c+=1){let u=wC(n,l,c),f=o(u);t.set(f,e[c]=CC(f,u))}let a=n[7]&&kC(n);return{c(){for(let c=0;c<e.length;c+=1)e[c].c();i=P(),a&&a.c(),s=et()},l(c){for(let u=0;u<e.length;u+=1)e[u].l(c);i=M(c),a&&a.l(c),s=et()},m(c,u){for(let f=0;f<e.length;f+=1)e[f].m(c,u);B(c,i,u),a&&a.m(c,u),B(c,s,u),r=!0},p(c,u){u&1288&&(l=c[3],Le(),e=Ju(e,u,o,1,c,l,t,i.parentNode,Zd,CC,i,wC),Ve()),c[7]?a?(a.p(c,u),u&128&&D(a,1)):(a=kC(c),a.c(),D(a,1),a.m(s.parentNode,s)):a&&(Le(),U(a,1,1,()=>{a=null}),Ve())},i(c){if(!r){for(let u=0;u<l.length;u+=1)D(e[u]);D(a),r=!0}},o(c){for(let u=0;u<e.length;u+=1)U(e[u]);U(a),r=!1},d(c){for(let u=0;u<e.length;u+=1)e[u].d(c);c&&g(i),a&&a.d(c),c&&g(s)}}}function CC(n,e){let t,i,s;return i=new y5({props:{getItems:e[8],path:e[3],index:e[22],onSelect:e[10]}}),{key:n,first:null,c(){t=et(),ce(i.$$.fragment),this.h()},l(r){t=et(),ge(i.$$.fragment,r),this.h()},h(){this.first=t},m(r,l){B(r,t,l),ue(i,r,l),s=!0},p(r,l){e=r;const o={};l&8&&(o.path=e[3]),l&8&&(o.index=e[22]),i.$set(o)},i(r){s||(D(i.$$.fragment,r),s=!0)},o(r){U(i.$$.fragment,r),s=!1},d(r){r&&g(t),fe(i,r)}}}function kC(n){let e,t;return e=new y5({props:{getItems:n[8],path:n[3],index:void 0,onSelect:n[10]}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s&8&&(r.path=i[3]),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function ine(n){let e,t,i,s,r,l,o=!Ri(n[0])&&!n[6]?"Navigation bar":"",a,c,u,f,h,d,p;const v=[nne,tne],y=[];function b(S,I){return S[6]?1:0}return t=b(n),i=y[t]=v[t](n),u=new Wt({props:{data:n[6]?qS:HS}}),{c(){e=E("div"),i.c(),s=P(),r=E("button"),l=E("span"),a=L(o),c=P(),ce(u.$$.fragment),this.h()},l(S){e=A(S,"DIV",{class:!0});var I=w(e);i.l(I),s=M(I),r=A(I,"BUTTON",{type:!0,class:!0,title:!0});var T=w(r);l=A(T,"SPAN",{class:!0});var C=w(l);a=V(C,o),C.forEach(g),c=M(T),ge(u.$$.fragment,T),T.forEach(g),I.forEach(g),this.h()},h(){_(l,"class","jse-navigation-bar-space svelte-12s2kay"),_(r,"type","button"),_(r,"class","jse-navigation-bar-edit svelte-12s2kay"),_(r,"title",f=n[6]?"Cancel editing the selected path":"Edit the selected path"),xe(r,"flex",!n[6]),xe(r,"editing",n[6]),_(e,"class","jse-navigation-bar svelte-12s2kay")},m(S,I){B(S,e,I),y[t].m(e,null),m(e,s),m(e,r),m(r,l),m(l,a),m(r,c),ue(u,r,null),n[16](r),n[17](e),h=!0,d||(p=se(r,"click",n[11]),d=!0)},p(S,[I]){let T=t;t=b(S),t===T?y[t].p(S,I):(Le(),U(y[T],1,1,()=>{y[T]=null}),Ve(),i=y[t],i?i.p(S,I):(i=y[t]=v[t](S),i.c()),D(i,1),i.m(e,s)),(!h||I&65)&&o!==(o=!Ri(S[0])&&!S[6]?"Navigation bar":"")&&Ce(a,o);const C={};I&64&&(C.data=S[6]?qS:HS),u.$set(C),(!h||I&64&&f!==(f=S[6]?"Cancel editing the selected path":"Edit the selected path"))&&_(r,"title",f),(!h||I&64)&&xe(r,"flex",!S[6]),(!h||I&64)&&xe(r,"editing",S[6])},i(S){h||(D(i),D(u.$$.fragment,S),h=!0)},o(S){U(i),U(u.$$.fragment,S),h=!1},d(S){S&&g(e),y[t].d(),fe(u),n[16](null),n[17](null),d=!1,p()}}}function sne(n,e,t){let i,s;const r=Is("jsoneditor:NavigationBar");let{json:l}=e,{documentState:o}=e,{onSelect:a}=e,{onError:c}=e,{pathParser:u}=e,f,h,d=!1;function p(){setTimeout(()=>{if(f&&f.scrollTo){const R=f.scrollWidth-f.clientWidth;R>0&&(r("scrollTo ",R),f.scrollTo({left:R,behavior:"smooth"}))}})}function v(R){r("get items for path",R);const O=At(l,R);if(Array.isArray(O))return Xq(0,O.length).map(String);if(ji(O)){const F=Object.keys(O).slice(0);return F.sort(Fb),F}else return[]}function y(R){return Kl(l,R)}function b(R){r("select path",JSON.stringify(R)),a(ui(l,R,R))}function S(){t(6,d=!d)}function I(){t(6,d=!1)}function T(R){I(),b(R)}function C(R){Vt[R?"unshift":"push"](()=>{h=R,t(5,h)})}function k(R){Vt[R?"unshift":"push"](()=>{f=R,t(4,f)})}return n.$$set=R=>{"json"in R&&t(0,l=R.json),"documentState"in R&&t(14,o=R.documentState),"onSelect"in R&&t(15,a=R.onSelect),"onError"in R&&t(1,c=R.onError),"pathParser"in R&&t(2,u=R.pathParser)},n.$$.update=()=>{n.$$.dirty&16384&&t(3,i=o.selection?o.selection.focusPath:[]),n.$$.dirty&9&&t(7,s=Ri(At(l,i))),n.$$.dirty&8&&p()},[l,c,u,i,f,h,d,s,v,y,b,S,I,T,o,a,C,k]}class rne extends nt{constructor(e){super(),it(this,e,sne,ine,an,{json:0,documentState:14,onSelect:15,onError:1,pathParser:2})}}const lne=rne;function TC(n){let e,t,i,s,r,l,o,a,c,u,f,h,d,p=n[3]!==-1?`${n[3]+1}/`:"",v,y,b,S,I,T,C,k,R,O,N,F,W,z,Y,H=!n[4]&&IC(n);const K=[ane,one],j=[];function J(q,X){return q[2]?0:1}o=J(n),a=j[o]=K[o](n),I=new Wt({props:{data:iG}}),k=new Wt({props:{data:Hz}}),N=new Wt({props:{data:bf}});let Z=n[0]&&!n[4]&&OC(n);return{c(){e=E("div"),t=E("form"),H&&H.c(),i=P(),s=E("div"),r=E("div"),l=E("div"),a.c(),c=P(),u=E("label"),f=E("input"),h=P(),d=E("div"),v=L(p),y=L(n[10]),b=P(),S=E("button"),ce(I.$$.fragment),T=P(),C=E("button"),ce(k.$$.fragment),R=P(),O=E("button"),ce(N.$$.fragment),F=P(),Z&&Z.c(),this.h()},l(q){e=A(q,"DIV",{class:!0});var X=w(e);t=A(X,"FORM",{class:!0});var ne=w(t);H&&H.l(ne),i=M(ne),s=A(ne,"DIV",{class:!0});var Q=w(s);r=A(Q,"DIV",{class:!0});var re=w(r);l=A(re,"DIV",{class:!0});var be=w(l);a.l(be),be.forEach(g),c=M(re),u=A(re,"LABEL",{class:!0,about:!0});var le=w(u);f=A(le,"INPUT",{class:!0,title:!0,type:!0,placeholder:!0}),le.forEach(g),h=M(re),d=A(re,"DIV",{class:!0});var he=w(d);v=V(he,p),y=V(he,n[10]),he.forEach(g),b=M(re),S=A(re,"BUTTON",{type:!0,class:!0,title:!0});var Ie=w(S);ge(I.$$.fragment,Ie),Ie.forEach(g),T=M(re),C=A(re,"BUTTON",{type:!0,class:!0,title:!0});var G=w(C);ge(k.$$.fragment,G),G.forEach(g),R=M(re),O=A(re,"BUTTON",{type:!0,class:!0,title:!0});var ve=w(O);ge(N.$$.fragment,ve),ve.forEach(g),re.forEach(g),F=M(Q),Z&&Z.l(Q),Q.forEach(g),ne.forEach(g),X.forEach(g),this.h()},h(){_(l,"class","jse-search-icon svelte-10nesp9"),_(f,"class","jse-search-input svelte-10nesp9"),_(f,"title","Enter text to search"),_(f,"type","text"),_(f,"placeholder","Find"),_(u,"class","jse-search-input-label svelte-10nesp9"),_(u,"about","jse-search input"),_(d,"class","jse-search-count svelte-10nesp9"),xe(d,"jse-visible",n[8]!==""),_(S,"type","button"),_(S,"class","jse-search-next svelte-10nesp9"),_(S,"title","Go to next search result (Enter)"),_(C,"type","button"),_(C,"class","jse-search-previous svelte-10nesp9"),_(C,"title","Go to previous search result (Shift+Enter)"),_(O,"type","button"),_(O,"class","jse-search-clear svelte-10nesp9"),_(O,"title","Close search box (Esc)"),_(r,"class","jse-search-section svelte-10nesp9"),_(s,"class","jse-search-contents svelte-10nesp9"),_(t,"class","jse-search-form svelte-10nesp9"),_(e,"class","jse-search-box svelte-10nesp9")},m(q,X){B(q,e,X),m(e,t),H&&H.m(t,null),m(t,i),m(t,s),m(s,r),m(r,l),j[o].m(l,null),m(r,c),m(r,u),m(u,f),Ms(f,n[8]),m(r,h),m(r,d),m(d,v),m(d,y),m(r,b),m(r,S),ue(I,S,null),m(r,T),m(r,C),ue(k,C,null),m(r,R),m(r,O),ue(N,O,null),m(s,F),Z&&Z.m(s,null),W=!0,z||(Y=[se(f,"input",n[21]),oc(une.call(null,f)),se(S,"click",n[22]),se(C,"click",n[23]),se(O,"click",n[24]),se(t,"submit",n[12]),se(t,"keydown",n[13])],z=!0)},p(q,X){q[4]?H&&(Le(),U(H,1,1,()=>{H=null}),Ve()):H?(H.p(q,X),X&16&&D(H,1)):(H=IC(q),H.c(),D(H,1),H.m(t,i));let ne=o;o=J(q),o===ne?j[o].p(q,X):(Le(),U(j[ne],1,1,()=>{j[ne]=null}),Ve(),a=j[o],a?a.p(q,X):(a=j[o]=K[o](q),a.c()),D(a,1),a.m(l,null)),X&256&&f.value!==q[8]&&Ms(f,q[8]),(!W||X&8)&&p!==(p=q[3]!==-1?`${q[3]+1}/`:"")&&Ce(v,p),(!W||X&1024)&&Ce(y,q[10]),(!W||X&256)&&xe(d,"jse-visible",q[8]!==""),q[0]&&!q[4]?Z?Z.p(q,X):(Z=OC(q),Z.c(),Z.m(s,null)):Z&&(Z.d(1),Z=null)},i(q){W||(D(H),D(a),D(I.$$.fragment,q),D(k.$$.fragment,q),D(N.$$.fragment,q),W=!0)},o(q){U(H),U(a),U(I.$$.fragment,q),U(k.$$.fragment,q),U(N.$$.fragment,q),W=!1},d(q){q&&g(e),H&&H.d(),j[o].d(),fe(I),fe(k),fe(N),Z&&Z.d(),z=!1,on(Y)}}}function IC(n){let e,t,i,s,r;return t=new Wt({props:{data:n[0]?Mr:Rl}}),{c(){e=E("button"),ce(t.$$.fragment),this.h()},l(l){e=A(l,"BUTTON",{type:!0,class:!0,title:!0});var o=w(e);ge(t.$$.fragment,o),o.forEach(g),this.h()},h(){_(e,"type","button"),_(e,"class","jse-replace-toggle svelte-10nesp9"),_(e,"title","Toggle visibility of replace options (Ctrl+H)")},m(l,o){B(l,e,o),ue(t,e,null),i=!0,s||(r=se(e,"click",n[11]),s=!0)},p(l,o){const a={};o&1&&(a.data=l[0]?Mr:Rl),t.$set(a)},i(l){i||(D(t.$$.fragment,l),i=!0)},o(l){U(t.$$.fragment,l),i=!1},d(l){l&&g(e),fe(t),s=!1,r()}}}function one(n){let e,t;return e=new Wt({props:{data:Zv}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p:Ke,i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function ane(n){let e,t;return e=new Wt({props:{data:Vz,spin:!0}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p:Ke,i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function OC(n){let e,t,i,s,r,l,o,a,c,u;return{c(){e=E("div"),t=E("input"),i=P(),s=E("button"),r=L("Replace"),l=P(),o=E("button"),a=L("All"),this.h()},l(f){e=A(f,"DIV",{class:!0});var h=w(e);t=A(h,"INPUT",{class:!0,title:!0,type:!0,placeholder:!0}),i=M(h),s=A(h,"BUTTON",{type:!0,title:!0,class:!0});var d=w(s);r=V(d,"Replace"),d.forEach(g),l=M(h),o=A(h,"BUTTON",{type:!0,title:!0,class:!0});var p=w(o);a=V(p,"All"),p.forEach(g),h.forEach(g),this.h()},h(){_(t,"class","jse-replace-input svelte-10nesp9"),_(t,"title","Enter replacement text"),_(t,"type","text"),_(t,"placeholder","Replace"),_(s,"type","button"),_(s,"title","Replace current occurrence (Ctrl+Enter)"),_(s,"class","svelte-10nesp9"),_(o,"type","button"),_(o,"title","Replace all occurrences"),_(o,"class","svelte-10nesp9"),_(e,"class","jse-replace-section svelte-10nesp9")},m(f,h){B(f,e,h),m(e,t),Ms(t,n[9]),m(e,i),m(e,s),m(s,r),m(e,l),m(e,o),m(o,a),c||(u=[se(t,"input",n[25]),se(s,"click",n[14]),se(o,"click",n[15])],c=!0)},p(f,h){h&512&&t.value!==f[9]&&Ms(t,f[9])},d(f){f&&g(e),c=!1,on(u)}}}function cne(n){let e,t,i=n[1]&&TC(n);return{c(){i&&i.c(),e=et()},l(s){i&&i.l(s),e=et()},m(s,r){i&&i.m(s,r),B(s,e,r),t=!0},p(s,[r]){s[1]?i?(i.p(s,r),r&2&&D(i,1)):(i=TC(s),i.c(),D(i,1),i.m(e.parentNode,e)):i&&(Le(),U(i,1,1,()=>{i=null}),Ve())},i(s){t||(D(i),t=!0)},o(s){U(i),t=!1},d(s){i&&i.d(s),s&&g(e)}}}function une(n){n.select()}function fne(n,e,t){let i,s,{show:r=!1}=e,{searching:l}=e,{resultCount:o=0}=e,{activeIndex:a=0}=e,{showReplace:c=!1}=e,{readOnly:u=!1}=e,{onChange:f=Hn}=e,{onPrevious:h=Hn}=e,{onNext:d=Hn}=e,{onReplace:p=Hn}=e,{onReplaceAll:v=Hn}=e,{onClose:y=Hn}=e,b="",S="",I="";function T(){b!==""&&f(b)}function C(){t(0,c=!c&&!u)}function k(K){K.preventDefault(),b!==S?(S=b,s.cancel(),f(b)):d()}function R(K){K.stopPropagation();const j=na(K);j==="Enter"&&(K.preventDefault(),d()),j==="Shift+Enter"&&(K.preventDefault(),h()),(j==="Ctrl+Enter"||j==="Command+Enter")&&(K.preventDefault(),c?O():d()),j==="Ctrl+H"&&(K.preventDefault(),C()),j==="Escape"&&(K.preventDefault(),y())}function O(){u||p(b,I)}function N(){u||v(b,I)}function F(){b=this.value,t(8,b)}const W=()=>d(),z=()=>h(),Y=()=>y();function H(){I=this.value,t(9,I)}return n.$$set=K=>{"show"in K&&t(1,r=K.show),"searching"in K&&t(2,l=K.searching),"resultCount"in K&&t(16,o=K.resultCount),"activeIndex"in K&&t(3,a=K.activeIndex),"showReplace"in K&&t(0,c=K.showReplace),"readOnly"in K&&t(4,u=K.readOnly),"onChange"in K&&t(17,f=K.onChange),"onPrevious"in K&&t(5,h=K.onPrevious),"onNext"in K&&t(6,d=K.onNext),"onReplace"in K&&t(18,p=K.onReplace),"onReplaceAll"in K&&t(19,v=K.onReplaceAll),"onClose"in K&&t(7,y=K.onClose)},n.$$.update=()=>{n.$$.dirty&65536&&t(10,i=o>=e1?`${e1-1}+`:String(o)),n.$$.dirty&131072&&t(20,s=Wm(f,X4)),n.$$.dirty&1048832&&s(b),n.$$.dirty&2&&r&&T()},[c,r,l,a,u,h,d,y,b,I,i,C,k,R,O,N,o,f,p,v,s,F,W,z,Y,H]}class hne extends nt{constructor(e){super(),it(this,e,fne,cne,an,{show:1,searching:2,resultCount:16,activeIndex:3,showReplace:0,readOnly:4,onChange:17,onPrevious:5,onNext:6,onReplace:18,onReplaceAll:19,onClose:7})}}const dne=hne;const{window:mne}=Yu;function RC(n){let e,t,i;function s(l){n[73](l)}let r={json:n[9],selection:n[15].selection,readOnly:n[0],historyState:n[21],onExpandAll:n[39],onCollapseAll:n[40],onUndo:n[35],onRedo:n[36],onSort:n[37],onTransform:n[38],onContextMenu:n[44],onCopy:n[33],onRenderMenu:n[6]};return n[18]!==void 0&&(r.showSearch=n[18]),e=new Mte({props:r}),Vt.push(()=>Us(e,"showSearch",s)),{c(){ce(e.$$.fragment)},l(l){ge(e.$$.fragment,l)},m(l,o){ue(e,l,o),i=!0},p(l,o){const a={};o[0]&512&&(a.json=l[9]),o[0]&32768&&(a.selection=l[15].selection),o[0]&1&&(a.readOnly=l[0]),o[0]&2097152&&(a.historyState=l[21]),o[0]&64&&(a.onRenderMenu=l[6]),!t&&o[0]&262144&&(t=!0,a.showSearch=l[18],Js(()=>t=!1)),e.$set(a)},i(l){i||(D(e.$$.fragment,l),i=!0)},o(l){U(e.$$.fragment,l),i=!1},d(l){fe(e,l)}}}function DC(n){let e,t;return e=new lne({props:{json:n[9],documentState:n[15],onSelect:n[47],onError:n[4],pathParser:n[3]}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s[0]&512&&(r.json=i[9]),s[0]&32768&&(r.documentState=i[15]),s[0]&16&&(r.onError=i[4]),s[0]&8&&(r.pathParser=i[3]),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function pne(n){let e,t,i,s,r;return{c(){e=E("div"),t=E("div"),i=P(),s=E("div"),r=L("loading..."),this.h()},l(l){e=A(l,"DIV",{class:!0});var o=w(e);t=A(o,"DIV",{class:!0}),w(t).forEach(g),i=M(o),s=A(o,"DIV",{class:!0});var a=w(s);r=V(a,"loading..."),a.forEach(g),o.forEach(g),this.h()},h(){_(t,"class","jse-loading-space svelte-15tyejh"),_(s,"class","jse-loading svelte-15tyejh"),_(e,"class","jse-contents svelte-15tyejh")},m(l,o){B(l,e,o),m(e,t),m(e,i),m(e,s),m(s,r)},p:Ke,i:Ke,o:Ke,d(l){l&&g(e)}}}function gne(n){let e,t,i,s,r,l,o,a,c;const u=[bne,vne],f=[];function h(d,p){return d[9]===void 0?0:1}return s=h(n),r=f[s]=u[s](n),{c(){e=E("label"),t=E("input"),i=P(),r.c(),l=et(),this.h()},l(d){e=A(d,"LABEL",{class:!0});var p=w(e);t=A(p,"INPUT",{type:!0,tabindex:!0,class:!0}),p.forEach(g),i=M(d),r.l(d),l=et(),this.h()},h(){_(t,"type","text"),t.readOnly="readonly",_(t,"tabindex","-1"),_(t,"class","jse-hidden-input svelte-15tyejh"),_(e,"class","jse-hidden-input-label svelte-15tyejh")},m(d,p){B(d,e,p),m(e,t),n[74](t),B(d,i,p),f[s].m(d,p),B(d,l,p),o=!0,a||(c=se(t,"paste",n[34]),a=!0)},p(d,p){let v=s;s=h(d),s===v?f[s].p(d,p):(Le(),U(f[v],1,1,()=>{f[v]=null}),Ve(),r=f[s],r?r.p(d,p):(r=f[s]=u[s](d),r.c()),D(r,1),r.m(l.parentNode,l))},i(d){o||(D(r),o=!0)},o(d){U(r),o=!1},d(d){d&&g(e),n[74](null),d&&g(i),f[s].d(d),d&&g(l),a=!1,c()}}}function vne(n){var d,p,v,y;let e,t,i,s,r,l,o,a,c,u;t=new dne({props:{show:n[18],resultCount:((p=(d=n[16])==null?void 0:d.items)==null?void 0:p.length)||0,activeIndex:((v=n[16])==null?void 0:v.activeIndex)||0,showReplace:n[19],searching:n[20],readOnly:n[0],onChange:n[26],onNext:n[27],onPrevious:n[28],onReplace:n[29],onReplaceAll:n[30],onClose:n[31]}}),r=new Rte({props:{value:n[9],path:n[25],expandedMap:n[15].expandedMap,enforceStringMap:n[15].enforceStringMap,visibleSectionsMap:n[15].visibleSectionsMap,validationErrorsMap:n[23],searchResultItemsMap:(y=n[16])==null?void 0:y.itemsMap,selection:n[15].selection,context:n[12],onDragSelectionStart:Hn}});let f=n[17]&&NC(n),h=n[22]&&PC(n);return c=new oR({props:{validationErrors:n[11],selectError:n[32]}}),{c(){e=E("div"),ce(t.$$.fragment),i=P(),s=E("div"),ce(r.$$.fragment),l=P(),f&&f.c(),o=P(),h&&h.c(),a=P(),ce(c.$$.fragment),this.h()},l(b){e=A(b,"DIV",{class:!0});var S=w(e);ge(t.$$.fragment,S),S.forEach(g),i=M(b),s=A(b,"DIV",{class:!0,"data-jsoneditor-scrollable-contents":!0});var I=w(s);ge(r.$$.fragment,I),I.forEach(g),l=M(b),f&&f.l(b),o=M(b),h&&h.l(b),a=M(b),ge(c.$$.fragment,b),this.h()},h(){_(e,"class","jse-search-box-container svelte-15tyejh"),_(s,"class","jse-contents svelte-15tyejh"),_(s,"data-jsoneditor-scrollable-contents",!0)},m(b,S){B(b,e,S),ue(t,e,null),B(b,i,S),B(b,s,S),ue(r,s,null),n[75](s),B(b,l,S),f&&f.m(b,S),B(b,o,S),h&&h.m(b,S),B(b,a,S),ue(c,b,S),u=!0},p(b,S){var k,R,O,N;const I={};S[0]&262144&&(I.show=b[18]),S[0]&65536&&(I.resultCount=((R=(k=b[16])==null?void 0:k.items)==null?void 0:R.length)||0),S[0]&65536&&(I.activeIndex=((O=b[16])==null?void 0:O.activeIndex)||0),S[0]&524288&&(I.showReplace=b[19]),S[0]&1048576&&(I.searching=b[20]),S[0]&1&&(I.readOnly=b[0]),t.$set(I);const T={};S[0]&512&&(T.value=b[9]),S[0]&32768&&(T.expandedMap=b[15].expandedMap),S[0]&32768&&(T.enforceStringMap=b[15].enforceStringMap),S[0]&32768&&(T.visibleSectionsMap=b[15].visibleSectionsMap),S[0]&8388608&&(T.validationErrorsMap=b[23]),S[0]&65536&&(T.searchResultItemsMap=(N=b[16])==null?void 0:N.itemsMap),S[0]&32768&&(T.selection=b[15].selection),S[0]&4096&&(T.context=b[12]),r.$set(T),b[17]?f?(f.p(b,S),S[0]&131072&&D(f,1)):(f=NC(b),f.c(),D(f,1),f.m(o.parentNode,o)):f&&(Le(),U(f,1,1,()=>{f=null}),Ve()),b[22]?h?(h.p(b,S),S[0]&4194304&&D(h,1)):(h=PC(b),h.c(),D(h,1),h.m(a.parentNode,a)):h&&(Le(),U(h,1,1,()=>{h=null}),Ve());const C={};S[0]&2048&&(C.validationErrors=b[11]),c.$set(C)},i(b){u||(D(t.$$.fragment,b),D(r.$$.fragment,b),D(f),D(h),D(c.$$.fragment,b),u=!0)},o(b){U(t.$$.fragment,b),U(r.$$.fragment,b),U(f),U(h),U(c.$$.fragment,b),u=!1},d(b){b&&g(e),fe(t),b&&g(i),b&&g(s),fe(r),n[75](null),b&&g(l),f&&f.d(b),b&&g(o),h&&h.d(b),b&&g(a),fe(c,b)}}}function bne(n){let e,t,i,s;const r=[yne,_ne],l=[];function o(a,c){return a[10]===""||a[10]===void 0?0:1}return e=o(n),t=l[e]=r[e](n),{c(){t.c(),i=et()},l(a){t.l(a),i=et()},m(a,c){l[e].m(a,c),B(a,i,c),s=!0},p(a,c){let u=e;e=o(a),e===u?l[e].p(a,c):(Le(),U(l[u],1,1,()=>{l[u]=null}),Ve(),t=l[e],t?t.p(a,c):(t=l[e]=r[e](a),t.c()),D(t,1),t.m(i.parentNode,i))},i(a){s||(D(t),s=!0)},o(a){U(t),s=!1},d(a){l[e].d(a),a&&g(i)}}}function NC(n){let e,t;return e=new sa({props:{type:"info",message:`You pasted a JSON ${Array.isArray(n[17].contents)?"array":"object"} as text`,actions:[{icon:Xv,text:"Paste as JSON instead",onMouseDown:n[45]},{text:"Leave as is",onClick:n[46]}]}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s[0]&131072&&(r.message=`You pasted a JSON ${Array.isArray(i[17].contents)?"array":"object"} as text`),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function PC(n){let e,t;return e=new sa({props:{type:"success",message:"The loaded JSON document was invalid but is successfully repaired.",actions:n[0]?[]:[{icon:A1,text:"Ok",onClick:n[7]},{icon:fd,text:"Repair manually instead",onClick:n[5]}]}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s[0]&33&&(r.actions=i[0]?[]:[{icon:A1,text:"Ok",onClick:i[7]},{icon:fd,text:"Repair manually instead",onClick:i[5]}]),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function _ne(n){let e,t,i,s=Gd(n[10],j2)+"",r,l;return e=new sa({props:{type:"error",message:"The loaded JSON document is invalid and could not be repaired automatically.",actions:n[0]?[]:[{icon:fd,text:"Repair manually",onClick:n[5]}]}}),{c(){ce(e.$$.fragment),t=P(),i=E("div"),r=L(s),this.h()},l(o){ge(e.$$.fragment,o),t=M(o),i=A(o,"DIV",{class:!0});var a=w(i);r=V(a,s),a.forEach(g),this.h()},h(){_(i,"class","jse-preview svelte-15tyejh")},m(o,a){ue(e,o,a),B(o,t,a),B(o,i,a),m(i,r),l=!0},p(o,a){const c={};a[0]&33&&(c.actions=o[0]?[]:[{icon:fd,text:"Repair manually",onClick:o[5]}]),e.$set(c),(!l||a[0]&1024)&&s!==(s=Gd(o[10],j2)+"")&&Ce(r,s)},i(o){l||(D(e.$$.fragment,o),l=!0)},o(o){U(e.$$.fragment,o),l=!1},d(o){fe(e,o),o&&g(t),o&&g(i)}}}function yne(n){let e,t;return e=new Ute({props:{readOnly:n[0]}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s[0]&1&&(r.readOnly=i[0]),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function Sne(n){let e,t,i,s,r,l,o,a,c=n[1]&&RC(n),u=n[2]&&DC(n);const f=[gne,pne],h=[];function d(p,v){return p[24]?1:0}return s=d(n),r=h[s]=f[s](n),{c(){e=E("div"),c&&c.c(),t=P(),u&&u.c(),i=P(),r.c(),this.h()},l(p){e=A(p,"DIV",{class:!0});var v=w(e);c&&c.l(v),t=M(v),u&&u.l(v),i=M(v),r.l(v),v.forEach(g),this.h()},h(){_(e,"class","jse-tree-mode svelte-15tyejh"),xe(e,"no-main-menu",!n[1])},m(p,v){B(p,e,v),c&&c.m(e,null),m(e,t),u&&u.m(e,null),m(e,i),h[s].m(e,null),n[76](e),l=!0,o||(a=[se(mne,"mousedown",n[48]),se(e,"keydown",n[41]),se(e,"mousedown",n[42]),se(e,"contextmenu",n[43])],o=!0)},p(p,v){p[1]?c?(c.p(p,v),v[0]&2&&D(c,1)):(c=RC(p),c.c(),D(c,1),c.m(e,t)):c&&(Le(),U(c,1,1,()=>{c=null}),Ve()),p[2]?u?(u.p(p,v),v[0]&4&&D(u,1)):(u=DC(p),u.c(),D(u,1),u.m(e,i)):u&&(Le(),U(u,1,1,()=>{u=null}),Ve()),r.p(p,v),(!l||v[0]&2)&&xe(e,"no-main-menu",!p[1])},i(p){l||(D(c),D(u),D(r),l=!0)},o(p){U(c),U(u),U(r),l=!1},d(p){p&&g(e),c&&c.d(),u&&u.d(),h[s].d(),n[76](null),o=!1,on(a)}}}function fa(n){return n.length===0?!0:n.length===1&&n[0]==="0"}function hh(){return!0}function Ene(n,e,t){let i;const s=Is("jsoneditor:TreeMode"),r=typeof window>"u";s("isSSR:",r);const{open:l}=Bn("simple-modal"),o=ud(),a=ud(),{openAbsolutePopup:c,closeAbsolutePopup:u}=Bn("absolute-popup");let f,h,d,p=!1;const v=a$();let{readOnly:y}=e,{externalContent:b}=e,{mainMenuBar:S}=e,{navigationBar:I}=e,{escapeControlCharacters:T}=e,{escapeUnicodeCharacters:C}=e,{parser:k}=e,{validator:R}=e,{validationParser:O}=e,{pathParser:N}=e,{indentation:F}=e,{onError:W}=e,{onChange:z}=e,{onRenderValue:Y}=e,{onRequestRepair:H}=e,{onRenderMenu:K}=e,{onClassName:j}=e,{onFocus:J}=e,{onBlur:Z}=e,{onSortModal:q}=e,{onTransformModal:X}=e,ne=!1;sR({onMount:Mi,onDestroy:br,getWindow:()=>Nu(d),hasFocus:()=>ne&&document.hasFocus()||y1(d),onFocus:()=>{p=!0,J&&J()},onBlur:()=>{p=!1,Z&&Z()}});let Q,re;const be=[];let le;function he(x){s("updateSelection",x);const De=typeof x=="function"?x(G.selection):x;En(De,G.selection)||t(15,G={...G,selection:De})}let Ie=!1,G=pw(),ve,je,$;function Oe(x){return LS({json:x},H2)?fa:hh}let ie=!1,_e=!1,Ee=!1,He="";async function We(x){s("search text updated",x),t(72,He=x),await li(),await Re()}async function Qe(){t(16,ve=ve?U$(ve):void 0),await Re()}async function we(){t(16,ve=ve?W$(ve):void 0),await Re()}async function Me(x,De){const Xe=ve==null?void 0:ve.activeItem;if(s("handleReplace",{replacementText:De,activeItem:Xe}),!Xe)return;const{operations:St,newSelection:st}=F$(Q,G,De,Xe,k);zn(St,(zt,Gn)=>({state:{...Gn,selection:st}})),await li(),await Re()}async function de(x,De){s("handleReplaceAll",{text:x,replacementText:De});const{operations:Xe,newSelection:St}=j$(Q,G,x,De,k);zn(Xe,(st,zt)=>({state:{...zt,selection:St}})),await li(),await Re()}function Ae(){t(18,ie=!1),t(19,_e=!1),We(""),Rs()}async function Re(){const x=ve==null?void 0:ve.activeItem;if(s("focusActiveSearchResult",ve),x){const De=x.path;t(15,G={...ig(Q,G,De),selection:void 0}),await li(),await gi(De)}}function Ne(){if(He===""){s("clearing search result"),ve!==void 0&&t(16,ve=void 0);return}t(20,Ee=!0),setTimeout(()=>{s("searching...",He);const x=g5(He,Q,G,e1);t(16,ve=V$(Q,x,ve)),t(20,Ee=!1)})}function Ge(x){s("select validation error",x),he(Yn(x.path,!1)),gi(x.path)}const pe=_$({onChange:x=>{t(21,Fe=x)}});let Fe=pe.getState();function ae(x=()=>!0){s("expand");const De={...G,expandedMap:{},visibleSectionsMap:{}};t(15,G=Zr(Q,De,be,x))}const ke=xq(Ne,yV);let oe=!1,at=[],qe;const me=Pb(Zx);function ot(x,De,Xe,St){Qc(()=>{let st;try{st=me(x,De,Xe,St)}catch(zt){st=[{path:[],message:"Failed to validate: "+zt.message,severity:Ja.warning}]}En(st,at)||(s("validationErrors changed:",st),t(11,at=st))},st=>s(`validationErrors updated in ${st} ms`))}function Se(){return s("validate"),le?{parseError:le,isRepairable:!1}:(ot(Q,R,k,O),{validationErrors:at})}function ze(){return Q}function ye(){return G}function ut(x){x.json!==void 0&&Bt(x.json),x.text!==void 0&&gt(x.text)}function Bt(x){if(x===void 0)return;const De=!En(Q,x);if(s("update external json",{isChanged:De,currentlyText:Q===void 0}),!De)return;const Xe={json:Q,text:re},St=G,st=Q,zt=re,Gn=oe;t(9,Q=x),Ot(Q),t(10,re=void 0),t(22,oe=!1),en(Q),gn({previousJson:st,previousState:St,previousText:zt,previousTextIsRepaired:Gn}),Os(Xe,null)}function gt(x){if(x===void 0||b.json!==void 0)return;const De=x===re;if(s("update external text",{isChanged:De}),De)return;const Xe={json:Q,text:re},St=Q,st=G,zt=re,Gn=oe;try{t(9,Q=k.parse(x)),Ot(Q),t(10,re=x),t(22,oe=!1),le=void 0,en(Q)}catch(Kn){try{t(9,Q=k.parse(Ul(x))),Ot(Q),t(10,re=x),t(22,oe=!0),le=void 0,en(Q)}catch{t(9,Q=void 0),t(10,re=b.text),t(22,oe=!1),le=zv(re,Kn.message||Kn.toString()),en(Q)}}gn({previousJson:St,previousState:st,previousText:zt,previousTextIsRepaired:Gn}),Os(Xe,null)}function Ot(x){Ie||(Ie=!0,t(15,G=Zr(x,G,be,Oe(x))))}function en(x){G.selection!==void 0&&(G.selection&&Kl(x,G.selection.anchorPath)&&Kl(x,G.selection.focusPath)||(s("clearing selection: path does not exist anymore",G.selection),t(15,G={...G,selection:void 0})))}function gn({previousJson:x,previousState:De,previousText:Xe,previousTextIsRepaired:St}){x===void 0&&Xe===void 0||(Q!==void 0?x!==void 0?pe.add({undo:{patch:[{op:"replace",path:"",value:x}],state:El(De),json:void 0,text:Xe,textIsRepaired:St},redo:{patch:[{op:"replace",path:"",value:Q}],state:El(G),json:void 0,text:re,textIsRepaired:oe}}):pe.add({undo:{patch:void 0,json:void 0,text:Xe,state:El(De),textIsRepaired:St},redo:{patch:void 0,json:Q,state:El(G),text:re,textIsRepaired:oe}}):x!==void 0&&pe.add({undo:{patch:void 0,json:x,state:El(De),text:Xe,textIsRepaired:St},redo:{patch:void 0,json:void 0,text:re,textIsRepaired:oe,state:El(G)}}))}function Jt(){s("createDefaultSelection"),t(15,G={...G,selection:ui(Q||{},[],[])})}function ft(x,De){if(s("patch",x,De),Q===void 0)throw new Error("Cannot apply patch: no JSON");const Xe={json:Q,text:re},St=Q,st=G,zt=re,Gn=oe,vi=L$(Q,x),Kn=m$(Q,G,x),oo=rc(Q,x),Hb=O$(Kn.documentState,oo,!1);s("patch updatedSelection",oo);const ca=typeof De=="function"?De(Kn.json,Hb):void 0;t(9,Q=ca&&ca.json!==void 0?ca.json:Kn.json);const qb=ca&&ca.state!==void 0?ca.state:Hb;t(15,G=qb),t(10,re=void 0),t(22,oe=!1),en(Q),pe.add({undo:{patch:vi,json:void 0,text:zt,state:El(st),textIsRepaired:Gn},redo:{patch:x,json:void 0,state:El(qb),text:re,textIsRepaired:oe}});const zb={json:Q,previousJson:St,undo:vi,redo:x};return Os(Xe,zb),zb}function cn(x){return yn(x)||ci(x)||_n(x)}function tn(){y||!G.selection||he(qs(G.selection.focusPath,!0))}function wn(){y||!G.selection||he(Yn(G.selection.focusPath,!0))}function vn(){if(y||!_n(G.selection))return;const x=G.selection.focusPath,De=ht(x),Xe=At(Q,x),St=!Cf(Xe,G.enforceStringMap,De,k),st=St?String(Xe):pf(String(Xe),k);s("handleToggleEnforceString",{enforceString:St,value:Xe,updatedValue:st}),zn([{op:"replace",path:ht(x),value:st}],(zt,Gn)=>({state:h$(Gn,De,St)}))}function Ln(){return oe&&Q!==void 0&&Jr(Q),{json:Q,text:re}}async function Cn(x=!0){if(y||!cn(G.selection))return;const De=x?F:null,Xe=bw(Q,G.selection,De,k);if(Xe==null)return;s("cut",{selection:G.selection,clipboard:Xe,indent:x}),await y0(Xe);const{operations:St,newSelection:st}=Aw(Q,G.selection);zn(St,(zt,Gn)=>({state:{...Gn,selection:st}}))}async function Un(x=!0){const De=x?F:null,Xe=bw(Q,G.selection,De,k);Xe!=null&&(s("copy",{clipboard:Xe,indent:x}),await y0(Xe))}function di(x){if(x.preventDefault(),y)return;const De=x.clipboardData.getData("text/plain");try{yt(De)}catch{qt(De,St=>{s("repaired pasted text: ",St),yt(St)})}}function Ue(){l(J$,{},{...id,styleWindow:{width:"450px"}},{onClose:()=>Rs()})}function yt(x){if(Q!==void 0){G.selection||Jt();const De=Ew(Q,G.selection,x,k);s("paste",{clipboardText:x,operations:De,selection:G.selection}),zn(De,(Xe,St)=>{let st=St;return De.filter(zt=>(J4(zt)||x4(zt))&&Ri(zt.value)).forEach(zt=>{const Gn=Fr(Q,zt.path);st=Ii(Xe,st,Gn)}),{state:st}})}else s("paste text",{clipboardText:x}),bs(x,(De,Xe)=>{if(De)return{state:Ii(De,Xe,[])}})}function qt(x,De){l(oee,{text:x,onParse:qv,onRepair:sz,onApply:De,onRenderMenu:K},{...id,styleWindow:{width:"600px",height:"500px"},styleContent:{padding:0,height:"100%"}},{onClose:()=>Rs()})}function hn(){if(y||!G.selection)return;const x=ci(G.selection)||_n(G.selection)?ui(Q,G.selection.anchorPath,G.selection.focusPath):G.selection;if(ii(G.selection.focusPath))s("remove root",{selection:G.selection}),z({text:"",json:void 0},{text:re,json:Q},{contentErrors:Se(),patchResult:null});else{const{operations:De,newSelection:Xe}=Aw(Q,x);s("remove",{operations:De,selection:G.selection,newSelection:Xe}),zn(De,(St,st)=>({state:{...st,selection:Xe}}))}}function dn(){if(y||!cn(G.selection)||ii(G.selection.focusPath))return;s("duplicate",{selection:G.selection});const x=N$(Q,p5(G.selection));zn(x)}function Qt(){if(y||!G.selection||!yn(G.selection)&&!_n(G.selection)||ii(G.selection.focusPath))return;s("extract",{selection:G.selection});const x=P$(Q,G.selection);zn(x,(De,Xe)=>{if(Ri(De))return{state:Ii(De,Xe,[])}})}function tt(x){if(y||!G.selection)return;const De=B$(Q,G.selection,x);if(Q!==void 0){const Xe=k.stringify(De),St=Ew(Q,G.selection,Xe,k);s("handleInsert",{type:x,operations:St,newValue:De,data:Xe});const st=Kt(St.filter(zt=>zt.op==="add"||zt.op==="replace"));zn(St,(zt,Gn)=>{if(st){const vi=Fr(zt,st.path);if(Ri(De))return{state:{...Zr(zt,Gn,vi,hh),selection:Vr(vi)}};if(De===""){const Kn=ii(vi)?null:At(zt,pn(vi));return s("test A",vi,Vr(vi)),{state:ig(zt,{...G,selection:ji(Kn)?qs(vi,!0):Yn(vi,!0)},vi)}}return}}),s("after patch"),st&&De===""&&li().then(()=>{setTimeout(()=>jt("",!0))})}else{s("handleInsert",{type:x,newValue:De});const Xe=[];Jr(De,(St,st)=>({state:{...Ii(St,st,Xe),selection:Vr(Xe)}}))}}function Dt(x){ci(G.selection)&&he(Yn(G.selection.focusPath,!1)),tt(x)}function mi(x){if(!(y||!G.selection)){if(!Dh(G.selection)){W(new Error(`Cannot convert current selection to ${x}`));return}try{const De=G.selection.anchorPath,Xe=At(Q,De),St=az(Xe,x,k);if(St===Xe)return;const st=[{op:"replace",path:ht(De),value:St}];s("handleConvert",{selection:G.selection,path:De,type:x,operations:st}),zn(st,(zt,Gn)=>({state:Ii(zt,Gn,G.selection.focusPath)}))}catch(De){W(De)}}}function Pt(){const x=gw(Q,G,!1),De=pn(G.selection.focusPath);!ii(x.focusPath)&&En(De,pn(x.focusPath))?he(vl(x.focusPath)):he(Vr(De)),s("insert before",{selection:G.selection,selectionBefore:x,parentPath:De}),li().then(lo)}function nn(){const x=yn(G.selection)?Kt(G.selection.paths):G.selection.focusPath;s("insert after",x),he(vl(x)),li().then(lo)}function jt(x,De){const Xe=Nu(d).document.activeElement;Xe.isContentEditable&&(Xe.textContent=De?x:Xe.textContent+x,ZO(Xe))}async function Ui(x){if(!(y||!G.selection)){if(ci(G.selection)){const De=!G.selection.edit;he({...G.selection,edit:!0}),await li(),setTimeout(()=>jt(x,De));return}if(x==="{")tt("object");else if(x==="[")tt("array");else if(_n(G.selection)){if(!Ri(At(Q,G.selection.focusPath))){const De=!G.selection.edit;he({...G.selection,edit:!0}),await li(),setTimeout(()=>jt(x,De))}}else await gs(x)}}async function gs(x){if(y||!G.selection)return;tt("value");const De=!au(G.selection),Xe=G.selection.focusPath,St=At(Q,pn(Xe));Array.isArray(St)||!St||_n(G.selection)?he(Yn(Xe,!0)):he(qs(Xe,!0)),await li(),setTimeout(()=>jt(x,De))}function Sn(){if(y||!pe.getState().canUndo)return;const x=pe.undo();if(!x)return;const De={json:Q,text:re};t(9,Q=x.undo.patch?Oo(Q,x.undo.patch):x.undo.json),t(15,G=x.undo.state),t(10,re=x.undo.text),t(22,oe=x.undo.textIsRepaired),s("undo",{item:x,json:Q,documentState:G});const Xe={json:Q,previousJson:De.json,redo:x.undo.patch,undo:x.redo.patch};Os(De,Xe),Rs(),G.selection&&gi(G.selection.focusPath,!1)}function pt(){if(y||!pe.getState().canRedo)return;const x=pe.redo();if(!x)return;const De={json:Q,text:re};t(9,Q=x.redo.patch?Oo(Q,x.redo.patch):x.redo.json),t(15,G=x.redo.state),t(10,re=x.redo.text),t(22,oe=x.redo.textIsRepaired),s("redo",{item:x,json:Q,documentState:G});const Xe={json:Q,previousJson:De.json,redo:x.redo.patch,undo:x.undo.patch};Os(De,Xe),Rs(),G.selection&&gi(G.selection.focusPath,!1)}function ee(x){y||(ne=!0,q({id:o,json:Q,selectedPath:x,onSort:async De=>{s("onSort",x,De),zn(De,(Xe,St)=>({state:{...Ii(Xe,St,x),selection:Yn(x,!1)}}))},onClose:()=>{ne=!1,Rs()}}))}function _t(){if(!G.selection)return;const x=vw(Q,G.selection);ee(x)}function xt(){ee([])}function On({id:x,selectedPath:De,onTransform:Xe,onClose:St}){ne=!0,X({id:x||a,json:Q,selectedPath:De,onTransform:Xe?st=>{Xe({operations:st,json:Q,transformedJson:Oo(Q,st)})}:st=>{s("onTransform",De,st),zn(st,(zt,Gn)=>({state:{...Ii(zt,Gn,De),selection:Yn(De,!1)}}))},onClose:()=>{ne=!1,Rs(),St&&St()}})}function pi(){if(!G.selection)return;const x=vw(Q,G.selection);On({selectedPath:x})}function Ti(){On({selectedPath:[]})}async function gi(x,De=!0){t(15,G=ig(Q,G,pn(x))),await li();const Xe=vs(x);if(Xe){s("scrollTo",{path:x,elem:Xe,refContents:f});const St=f.getBoundingClientRect(),st=Xe.getBoundingClientRect();if(!De&&st.bottom>St.top&&st.top<St.bottom)return;const zt=-(St.height/4);v(Xe,{container:f,offset:zt,duration:_V})}}function vs(x){return f?f.querySelector(`div[data-path="${S1(x)}"]`):null}function or(x){const De=vs(x);if(!De||!f)return;const Xe=f.getBoundingClientRect(),St=De.getBoundingClientRect(),st=20,zt=Ri(At(Q,x))?st:St.height;St.top<Xe.top+st?v(De,{container:f,offset:-st,duration:0}):St.top+zt>Xe.bottom-st&&v(De,{container:f,offset:-(Xe.height-zt-st),duration:0})}function Os(x,De){x.json===void 0&&(x==null?void 0:x.text)===void 0||(re!==void 0?z({text:re,json:void 0},x,{contentErrors:Se(),patchResult:De}):Q!==void 0&&z({text:void 0,json:Q},x,{contentErrors:Se(),patchResult:De}))}function zn(x,De){if(y)return;s("handlePatch",x,De);const Xe=ft(x,De);return t(17,$=void 0),Xe}function Jr(x,De){const Xe=G,St=Q,st=re,zt={json:Q,text:re},Gn=oe,vi=Zr(Q,G,be,fa),Kn=typeof De=="function"?De(x,vi):void 0;t(9,Q=Kn&&Kn.json!==void 0?Kn.json:x),t(15,G=Kn&&Kn.state!==void 0?Kn.state:vi),t(10,re=void 0),t(22,oe=!1),en(Q),gn({previousJson:St,previousState:Xe,previousText:st,previousTextIsRepaired:Gn}),Os(zt,null)}function bs(x,De){s("handleChangeText");const Xe=G,St=Q,st=re,zt={json:Q,text:re},Gn=oe;try{t(9,Q=k.parse(x)),t(15,G=Zr(Q,G,be,fa)),t(10,re=void 0),t(22,oe=!1)}catch{try{t(9,Q=k.parse(Ul(x))),t(15,G=Zr(Q,G,be,fa)),t(10,re=x),t(22,oe=!0)}catch{t(9,Q=void 0),t(15,G=pw({json:Q,expand:fa})),t(10,re=x),t(22,oe=!1)}}if(typeof De=="function"){const Kn=De(Q,G);t(9,Q=Kn&&Kn.json?Kn.json:Q),t(15,G=Kn&&Kn.state?Kn.state:G)}en(Q),gn({previousJson:St,previousState:Xe,previousText:st,previousTextIsRepaired:Gn}),Os(zt,null)}function Ii(x,De,Xe){const St=At(x,Xe),zt=!LS({json:St},H2)?hh:fa;return Zr(x,De,Xe,zt)}function ar(x,De,Xe=!1){s("expand",{path:x,expanded:De,recursive:Xe}),De?Xe?t(15,G=Zr(Q,G,x,hh)):t(15,G=f$(G,x)):t(15,G=l5(G,x)),G.selection&&!De&&E$(G.selection,x)&&he(void 0),setTimeout(()=>{y1(d)||Rs()})}function so(){ar([],!0,!0)}function cr(){ar([],!1,!0)}function wr(x){s("openFind",{findAndReplace:x}),t(18,ie=!1),t(19,_e=!1),li().then(()=>{t(18,ie=!0),t(19,_e=x)})}function ro(x,De){s("handleExpandSection",x,De);const Xe=ht(x);t(15,G=d$(Q,G,Xe,De))}function Ac(x){s("pasted json as text",x),t(17,$=x)}function Of(x){const De=na(x).replace(/^Command\+/,"Ctrl+"),Xe=x.shiftKey;if(s("keydown",{combo:De,key:x.key}),De==="Ctrl+X"&&(x.preventDefault(),Cn(!0)),De==="Ctrl+Shift+X"&&(x.preventDefault(),Cn(!1)),De==="Ctrl+C"&&(x.preventDefault(),Un(!0)),De==="Ctrl+Shift+C"&&(x.preventDefault(),Un(!1)),De==="Ctrl+D"&&(x.preventDefault(),dn()),(De==="Delete"||De==="Backspace")&&(x.preventDefault(),hn()),De==="Insert"&&(x.preventDefault(),tt("structure")),De==="Ctrl+A"&&(x.preventDefault(),he(R$())),De==="Ctrl+Q"&&lo(x),De==="Up"||De==="Shift+Up"){x.preventDefault();const st=G.selection?gw(Q,G,Xe,!0)||G.selection:uh(Q,G);he(st),or(st.focusPath)}if(De==="Down"||De==="Shift+Down"){x.preventDefault();const st=G.selection?w$(Q,G,Xe,!0)||G.selection:uh(Q,G);he(st),or(st.focusPath)}if(De==="Left"||De==="Shift+Left"){x.preventDefault();const st=G.selection?k$(Q,G,Xe,!y)||G.selection:uh(Q,G);he(st),or(st.focusPath)}if(De==="Right"||De==="Shift+Right"){x.preventDefault();const st=G.selection?T$(Q,G,Xe,!y)||G.selection:uh(Q,G);he(st),or(st.focusPath)}if(De==="Enter"&&G.selection){if(!y&&yn(G.selection)&&G.selection.paths.length===1){const st=G.selection.focusPath,zt=At(Q,pn(st));Array.isArray(zt)&&he(Yn(st,!1))}if(!y&&ci(G.selection)&&(x.preventDefault(),he({...G.selection,edit:!0})),_n(G.selection)){x.preventDefault();const st=At(Q,G.selection.focusPath);Ri(st)?ar(G.selection.focusPath,!0):y||he({...G.selection,edit:!0})}}if(De.replace(/^Shift\+/,"").replace(/^Numpad_/,"").length===1&&G.selection){x.preventDefault(),Ui(x.key);return}if(De==="Enter"&&(gr(G.selection)||Ci(G.selection))){x.preventDefault(),Ui("");return}if(De==="Ctrl+Enter"&&_n(G.selection)){const st=At(Q,G.selection.focusPath);Rv(st)&&window.open(String(st),"_blank")}if(De==="Escape"&&G.selection&&(x.preventDefault(),he(void 0)),De==="Ctrl+F"&&(x.preventDefault(),wr(!1)),De==="Ctrl+H"&&(x.preventDefault(),wr(!0)),De==="Ctrl+Z"){x.preventDefault();const st=document.activeElement;st&&st.blur&&st.focus?(st.blur(),setTimeout(()=>{Sn(),setTimeout(()=>st.select())})):Sn()}if(De==="Ctrl+Shift+Z"){x.preventDefault();const st=document.activeElement;st&&st.blur&&st.focus?(st.blur(),setTimeout(()=>{pt(),setTimeout(()=>st.select())})):pt()}}function wc(x){s("handleMouseDown",x),setTimeout(()=>{setTimeout(()=>{!p&&!JO(x.target,"BUTTON")&&(Rs(),!G.selection&&Q===void 0&&(re===""||re===void 0)&&Jt())})})}function Sl({anchor:x,left:De,top:Xe,width:St,height:st,offsetTop:zt,offsetLeft:Gn,showTip:vi}){const Kn={json:Q,documentState:G,parser:k,showTip:vi,onEditKey:tn,onEditValue:wn,onToggleEnforceString:vn,onCut:Cn,onCopy:Un,onPaste:Ue,onRemove:hn,onDuplicate:dn,onExtract:Qt,onInsertBefore:Pt,onInsert:Dt,onConvert:mi,onInsertAfter:nn,onSort:_t,onTransform:pi,onCloseContextMenu(){u(oo),Rs()}};ne=!0;const oo=c(See,Kn,{left:De,top:Xe,offsetTop:zt,offsetLeft:Gn,width:St,height:st,anchor:x,closeOnOuterClick:!0,onClose:()=>{ne=!1,Rs()}})}function lo(x){if(!(y||au(G.selection))){if(x&&(x.stopPropagation(),x.preventDefault()),x&&x.type==="contextmenu"&&x.target!==h)Sl({left:x.clientX,top:x.clientY,width:Hc,height:jc,showTip:!1});else{const De=f==null?void 0:f.querySelector(".jse-context-menu-button.jse-selected");if(De)Sl({anchor:De,offsetTop:2,width:Hc,height:jc,showTip:!1});else{const Xe=f==null?void 0:f.getBoundingClientRect();Xe&&Sl({top:Xe.top+2,left:Xe.left+2,width:Hc,height:jc,showTip:!1})}}return!1}}function aa(x){y||Sl({anchor:Sz(x.target,"BUTTON"),offsetTop:0,width:Hc,height:jc,showTip:!0})}async function Cc(){s("apply pasted json",$);const{path:x,contents:De}=$;he(Yn(x,!1)),await li();const Xe=[{op:"replace",path:ht(x),value:De}];zn(Xe,(St,st)=>({state:Ii(St,st,x)}))}function kc(){s("clear pasted json"),t(17,$=void 0)}function w5(x){he(x),Rs(),gi(x.focusPath)}function Rs(){s("focus"),h&&(h.focus(),h.select())}function C5(x){!vf(x.target,Xe=>Xe===d)&&au(G.selection)&&(s("click outside the editor, stop edit mode"),he(Xe=>ci(Xe)?{...Xe,edit:!1}:_n(Xe)?{...Xe,edit:!1}:Xe),p&&h&&(h.focus(),h.blur()),li().then(()=>{setTimeout(()=>{h&&h.blur()})}))}function k5(x){i&&i.onDrag(x)}function T5(){i&&i.onDragEnd()}let op;function I5(x){ie=x,t(18,ie)}function O5(x){Vt[x?"unshift":"push"](()=>{h=x,t(13,h)})}function R5(x){Vt[x?"unshift":"push"](()=>{f=x,t(8,f)})}function D5(x){Vt[x?"unshift":"push"](()=>{d=x,t(14,d)})}return n.$$set=x=>{"readOnly"in x&&t(0,y=x.readOnly),"externalContent"in x&&t(49,b=x.externalContent),"mainMenuBar"in x&&t(1,S=x.mainMenuBar),"navigationBar"in x&&t(2,I=x.navigationBar),"escapeControlCharacters"in x&&t(50,T=x.escapeControlCharacters),"escapeUnicodeCharacters"in x&&t(51,C=x.escapeUnicodeCharacters),"parser"in x&&t(52,k=x.parser),"validator"in x&&t(53,R=x.validator),"validationParser"in x&&t(54,O=x.validationParser),"pathParser"in x&&t(3,N=x.pathParser),"indentation"in x&&t(55,F=x.indentation),"onError"in x&&t(4,W=x.onError),"onChange"in x&&t(56,z=x.onChange),"onRenderValue"in x&&t(57,Y=x.onRenderValue),"onRequestRepair"in x&&t(5,H=x.onRequestRepair),"onRenderMenu"in x&&t(6,K=x.onRenderMenu),"onClassName"in x&&t(58,j=x.onClassName),"onFocus"in x&&t(59,J=x.onFocus),"onBlur"in x&&t(60,Z=x.onBlur),"onSortModal"in x&&t(61,q=x.onSortModal),"onTransformModal"in x&&t(62,X=x.onTransformModal)},n.$$.update=()=>{n.$$.dirty[1]&1572864&&t(71,je=zO({escapeControlCharacters:T,escapeUnicodeCharacters:C})),n.$$.dirty[1]&262144&&ut(b),n.$$.dirty[0]&512|n.$$.dirty[2]&1024&&ke(He,Q),n.$$.dirty[0]&1536,n.$$.dirty[0]&512|n.$$.dirty[1]&14680064&&ot(Q,R,k,O),n.$$.dirty[0]&2048&&t(23,qe=Jx(at)),n.$$.dirty[0]&256&&(i=f?l$(f):void 0),n.$$.dirty[0]&1|n.$$.dirty[1]&203423744|n.$$.dirty[2]&512&&t(12,op={readOnly:y,parser:k,normalization:je,getJson:ze,getDocumentState:ye,findElement:vs,focus:Rs,onPatch:zn,onInsert:tt,onExpand:ar,onSelect:he,onFind:wr,onExpandSection:ro,onPasteJson:Ac,onRenderValue:Y,onContextMenu:Sl,onClassName:j||(()=>{}),onDrag:k5,onDragEnd:T5}),n.$$.dirty[0]&4096&&s("context changed",op)},[y,S,I,N,W,H,K,Ln,f,Q,re,at,op,h,d,G,ve,$,ie,_e,Ee,Fe,oe,qe,r,be,We,Qe,we,Me,de,Ae,Ge,Un,di,Sn,pt,xt,Ti,so,cr,Of,wc,lo,aa,Cc,kc,w5,C5,b,T,C,k,R,O,F,z,Y,j,J,Z,q,X,ae,Se,ze,ft,On,gi,vs,Rs,je,He,I5,O5,R5,D5]}class Ane extends nt{constructor(e){super(),it(this,e,Ene,Sne,an,{readOnly:0,externalContent:49,mainMenuBar:1,navigationBar:2,escapeControlCharacters:50,escapeUnicodeCharacters:51,parser:52,validator:53,validationParser:54,pathParser:3,indentation:55,onError:4,onChange:56,onRenderValue:57,onRequestRepair:5,onRenderMenu:6,onClassName:58,onFocus:59,onBlur:60,onSortModal:61,onTransformModal:62,expand:63,validate:64,getJson:65,patch:66,acceptAutoRepair:7,openTransformModal:67,scrollTo:68,findElement:69,focus:70},null,[-1,-1,-1,-1,-1])}get expand(){return this.$$.ctx[63]}get validate(){return this.$$.ctx[64]}get getJson(){return this.$$.ctx[65]}get patch(){return this.$$.ctx[66]}get acceptAutoRepair(){return this.$$.ctx[7]}get openTransformModal(){return this.$$.ctx[67]}get scrollTo(){return this.$$.ctx[68]}get findElement(){return this.$$.ctx[69]}get focus(){return this.$$.ctx[70]}}const jb=Ane,wne=`
<p>
  Enter a JavaScript function to filter, sort, or transform the data.
</p>
`,Cne={id:"javascript",name:"JavaScript",description:wne,createQuery:kne,executeQuery:Tne};function kne(n,e){const{filter:t,sort:i,projection:s}=e,r=[];if(t&&t.path&&t.relation&&t.value){const l=`item => item${ao(t.path)}`,o=y$(t.value),a=typeof o=="string"?`'${t.value}'`:HU(t.value)&&!Number.isSafeInteger(o)?`${t.value}n`:t.value;r.push(`  data = data.filter(${l} ${t.relation} ${a})
`)}if(i&&i.path&&i.direction&&(i.direction==="desc"?r.push(`  data = data.slice().sort((a, b) => {
    // sort descending
    const valueA = a${ao(i.path)}
    const valueB = b${ao(i.path)}
    return valueA > valueB ? -1 : valueA < valueB ? 1 : 0
  })
`):r.push(`  data = data.slice().sort((a, b) => {
    // sort ascending
    const valueA = a${ao(i.path)}
    const valueB = b${ao(i.path)}
    return valueA > valueB ? 1 : valueA < valueB ? -1 : 0
  })
`)),s&&s.paths)if(s.paths.length>1){const l=s.paths.map(o=>{const a=o[o.length-1]||"item",c=`item${ao(o)}`;return`    ${JSON.stringify(a)}: ${c}`});r.push(`  data = data.map(item => ({
${l.join(`,
`)}})
  )
`)}else{const l=`item${ao(s.paths[0])}`;r.push(`  data = data.map(item => ${l})
`)}return r.push(`  return data
`),`function query (data) {
${r.join("")}}`}function Tne(n,e){const i=new Function(`"use strict";

`+e+`

if (typeof query !== "function") {
  throw new Error("Cannot execute query: expecting a function named 'query' but is undefined")
}

return query;
`)()(n);return i!==void 0?i:null}function Ine(n){let e,t,i,s,r,l;return t=new Wt({props:{data:n[0]===!0?Kd:Qd}}),{c(){e=E("div"),ce(t.$$.fragment),this.h()},l(o){e=A(o,"DIV",{class:!0,title:!0});var a=w(e);ge(t.$$.fragment,a),a.forEach(g),this.h()},h(){_(e,"class","jse-boolean-toggle svelte-zs5o25"),_(e,"title",i=n[1]?`Boolean value ${n[0]}`:"Click to toggle this boolean value")},m(o,a){B(o,e,a),ue(t,e,null),s=!0,r||(l=se(e,"mousedown",n[2]),r=!0)},p(o,[a]){const c={};a&1&&(c.data=o[0]===!0?Kd:Qd),t.$set(c),(!s||a&3&&i!==(i=o[1]?`Boolean value ${o[0]}`:"Click to toggle this boolean value"))&&_(e,"title",i)},i(o){s||(D(t.$$.fragment,o),s=!0)},o(o){U(t.$$.fragment,o),s=!1},d(o){o&&g(e),fe(t),r=!1,l()}}}function One(n,e,t){let{path:i}=e,{value:s}=e,{readOnly:r}=e,{onPatch:l}=e,{focus:o}=e;function a(c){c.stopPropagation(),!r&&(l([{op:"replace",path:ht(i),value:!s}]),setTimeout(o))}return n.$$set=c=>{"path"in c&&t(3,i=c.path),"value"in c&&t(0,s=c.value),"readOnly"in c&&t(1,r=c.readOnly),"onPatch"in c&&t(4,l=c.onPatch),"focus"in c&&t(5,o=c.focus)},[s,r,a,i,l,o]}class Rne extends nt{constructor(e){super(),it(this,e,One,Ine,an,{path:3,value:0,readOnly:1,onPatch:4,focus:5})}}const Dne=Rne;function Nne(n){let e;return{c(){e=E("div"),this.h()},l(t){e=A(t,"DIV",{class:!0}),w(e).forEach(g),this.h()},h(){_(e,"class","jse-color-picker-popup svelte-1las40j")},m(t,i){B(t,e,i),n[4](e)},p:Ke,i:Ke,o:Ke,d(t){t&&g(e),n[4](null)}}}function Pne(n,e,t){let{color:i}=e,{onChange:s}=e,{showOnTop:r}=e,l,o;Mi(async()=>{const c=(await C0(()=>import("../../chunks/vanilla-picker-edfc159c.js"),[],import.meta.url)).default;o=new c({parent:l,color:i,popup:r?"top":"bottom",onDone(u){const h=u.rgba[3]===1?u.hex.substring(0,7):u.hex;s(h)}}),o.show()}),br(()=>{o&&o.destroy()});function a(c){Vt[c?"unshift":"push"](()=>{l=c,t(0,l)})}return n.$$set=c=>{"color"in c&&t(1,i=c.color),"onChange"in c&&t(2,s=c.onChange),"showOnTop"in c&&t(3,r=c.showOnTop)},[l,i,s,r,a]}class Mne extends nt{constructor(e){super(),it(this,e,Pne,Nne,Ct,{color:1,onChange:2,showOnTop:3})}}const Bne=Mne;function Lne(n){let e,t,i,s;return{c(){e=E("button"),this.h()},l(r){e=A(r,"BUTTON",{type:!0,class:!0,style:!0,title:!0}),w(e).forEach(g),this.h()},h(){_(e,"type","button"),_(e,"class","jse-color-picker-button svelte-fk1u9y"),rt(e,"background",n[2]),_(e,"title",t=n[1]?`Color ${n[0]}`:"Click to open a color picker")},m(r,l){B(r,e,l),i||(s=se(e,"click",n[3]),i=!0)},p(r,[l]){l&4&&rt(e,"background",r[2]),l&3&&t!==(t=r[1]?`Color ${r[0]}`:"Click to open a color picker")&&_(e,"title",t)},i:Ke,o:Ke,d(r){r&&g(e),i=!1,s()}}}function Vne(n,e,t){let i;const{openAbsolutePopup:s}=Bn("absolute-popup");let{path:r}=e,{value:l}=e,{readOnly:o}=e,{onPatch:a}=e,{focus:c}=e;function u(d){a([{op:"replace",path:ht(r),value:d}]),f()}function f(){c()}function h(d){if(o)return;const p=300,v=d.target.getBoundingClientRect().top,b=Nu(d.target).innerHeight-v<p&&v>p;s(Bne,{color:l,onChange:u,showOnTop:b},{anchor:d.target,closeOnOuterClick:!0,onClose:f,offsetTop:18,offsetLeft:-8,height:p})}return n.$$set=d=>{"path"in d&&t(4,r=d.path),"value"in d&&t(0,l=d.value),"readOnly"in d&&t(1,o=d.readOnly),"onPatch"in d&&t(5,a=d.onPatch),"focus"in d&&t(6,c=d.focus)},n.$$.update=()=>{n.$$.dirty&1&&t(2,i=aO(l))},[l,o,i,h,r,a,c]}class Une extends nt{constructor(e){super(),it(this,e,Vne,Lne,an,{path:4,value:0,readOnly:1,onPatch:5,focus:6})}}const Wne=Une;function A0(n,e){const t=cO(n,e);return lc("jse-value","jse-"+t,{"jse-url":Rv(n),"jse-empty":typeof n=="string"&&n.length===0})}function Fne(n){let e,t;return e=new _5({props:{value:n[1].escapeValue(n[0]),onChange:n[3],onCancel:n[4],onPaste:n[5],onFind:n[2],onValueClass:n[6]}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,[s]){const r={};s&3&&(r.value=i[1].escapeValue(i[0])),s&4&&(r.onFind=i[2]),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function jne(n,e,t){let{path:i}=e,{value:s}=e,{parser:r}=e,{normalization:l}=e,{enforceString:o}=e,{onPatch:a}=e,{onPasteJson:c}=e,{onSelect:u}=e,{onFind:f}=e,{focus:h}=e;function d(S){return o?S:pf(S,r)}function p(S,I){a([{op:"replace",path:ht(i),value:d(l.unescapeValue(S))}],(T,C)=>{const k=I===Io.NEXT_INSIDE?C$(T,C,i)||C.selection:Yn(i,!1);return{state:{...C,selection:k}}}),I!==Io.SELF&&h()}function v(){u(Yn(i,!1)),h()}function y(S){try{const I=r.parse(S);Ri(I)&&c({path:i,contents:I})}catch{}}function b(S){return A0(d(l.unescapeValue(S)),r)}return n.$$set=S=>{"path"in S&&t(7,i=S.path),"value"in S&&t(0,s=S.value),"parser"in S&&t(8,r=S.parser),"normalization"in S&&t(1,l=S.normalization),"enforceString"in S&&t(9,o=S.enforceString),"onPatch"in S&&t(10,a=S.onPatch),"onPasteJson"in S&&t(11,c=S.onPasteJson),"onSelect"in S&&t(12,u=S.onSelect),"onFind"in S&&t(2,f=S.onFind),"focus"in S&&t(13,h=S.focus)},[s,l,f,p,v,y,b,i,r,o,a,c,u,h]}class Hne extends nt{constructor(e){super(),it(this,e,jne,Fne,an,{path:7,value:0,parser:8,normalization:1,enforceString:9,onPatch:10,onPasteJson:11,onSelect:12,onFind:2,focus:13})}}const qne=Hne;function zne(n){let e=zo(n[1].escapeValue(n[0]))+"",t;return{c(){t=L(e)},l(i){t=V(i,e)},m(i,s){B(i,t,s)},p(i,s){s&3&&e!==(e=zo(i[1].escapeValue(i[0]))+"")&&Ce(t,e)},i:Ke,o:Ke,d(i){i&&g(t)}}}function Gne(n){let e,t;return e=new b5({props:{text:n[1].escapeValue(n[0]),searchResultItems:n[3]}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s&3&&(r.text=i[1].escapeValue(i[0])),s&8&&(r.searchResultItems=i[3]),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function Kne(n){let e,t,i,s,r,l,o,a;const c=[Gne,zne],u=[];function f(h,d){return h[3]?0:1}return t=f(n),i=u[t]=c[t](n),{c(){e=E("div"),i.c(),this.h()},l(h){e=A(h,"DIV",{"data-type":!0,class:!0,title:!0});var d=w(e);i.l(d),d.forEach(g),this.h()},h(){_(e,"data-type","selectable-value"),_(e,"class",s=Ze(A0(n[0],n[2]))+" svelte-wuf5jd"),_(e,"title",r=n[4]?"Ctrl+Click or Ctrl+Enter to open url in new window":null)},m(h,d){B(h,e,d),u[t].m(e,null),l=!0,o||(a=[se(e,"click",n[5]),se(e,"dblclick",n[6])],o=!0)},p(h,[d]){let p=t;t=f(h),t===p?u[t].p(h,d):(Le(),U(u[p],1,1,()=>{u[p]=null}),Ve(),i=u[t],i?i.p(h,d):(i=u[t]=c[t](h),i.c()),D(i,1),i.m(e,null)),(!l||d&5&&s!==(s=Ze(A0(h[0],h[2]))+" svelte-wuf5jd"))&&_(e,"class",s),(!l||d&16&&r!==(r=h[4]?"Ctrl+Click or Ctrl+Enter to open url in new window":null))&&_(e,"title",r)},i(h){l||(D(i),l=!0)},o(h){U(i),l=!1},d(h){h&&g(e),u[t].d(),o=!1,on(a)}}}function Qne(n,e,t){let i,{path:s}=e,{value:r}=e,{readOnly:l}=e,{normalization:o}=e,{parser:a}=e,{onSelect:c}=e,{searchResultItems:u}=e;function f(d){typeof r=="string"&&i&&d.ctrlKey&&(d.preventDefault(),d.stopPropagation(),window.open(r,"_blank"))}function h(d){l||(d.preventDefault(),c(Yn(s,!0)))}return n.$$set=d=>{"path"in d&&t(7,s=d.path),"value"in d&&t(0,r=d.value),"readOnly"in d&&t(8,l=d.readOnly),"normalization"in d&&t(1,o=d.normalization),"parser"in d&&t(2,a=d.parser),"onSelect"in d&&t(9,c=d.onSelect),"searchResultItems"in d&&t(3,u=d.searchResultItems)},n.$$.update=()=>{n.$$.dirty&1&&t(4,i=Rv(r))},[r,o,a,u,i,f,h,s,l,c]}class Xne extends nt{constructor(e){super(),it(this,e,Qne,Kne,an,{path:7,value:0,readOnly:8,normalization:1,parser:2,onSelect:9,searchResultItems:3})}}const Yne=Xne;function Jne(n){let e,t,i,s,r,l;return t=new Wt({props:{data:mee}}),{c(){e=E("div"),ce(t.$$.fragment),this.h()},l(o){e=A(o,"DIV",{class:!0});var a=w(e);ge(t.$$.fragment,a),a.forEach(g),this.h()},h(){_(e,"class","jse-timestamp svelte-1u00zub")},m(o,a){B(o,e,a),ue(t,e,null),s=!0,r||(l=oc(i=Vb.call(null,e,{text:n[0],...n[1]})),r=!0)},p(o,[a]){i&&Mn(i.update)&&a&1&&i.update.call(null,{text:o[0],...o[1]})},i(o){s||(D(t.$$.fragment,o),s=!0)},o(o){U(t.$$.fragment,o),s=!1},d(o){o&&g(e),fe(t),r=!1,l()}}}function Zne(n,e,t){let i;const s=Bn("absolute-popup");let{value:r}=e;return n.$$set=l=>{"value"in l&&t(2,r=l.value)},n.$$.update=()=>{n.$$.dirty&4&&t(0,i=`Time: ${new Date(r).toString()}`)},[i,s,r]}class xne extends nt{constructor(e){super(),it(this,e,Zne,Jne,an,{value:2})}}const $ne=xne;function eie({path:n,value:e,readOnly:t,enforceString:i,searchResultItems:s,isEditing:r,parser:l,normalization:o,onPatch:a,onPasteJson:c,onSelect:u,onFind:f,focus:h}){const d=[];return!r&&UU(e)&&d.push({component:Dne,props:{path:n,value:e,readOnly:t,onPatch:a,focus:h}}),!r&&WU(e)&&d.push({component:Wne,props:{path:n,value:e,readOnly:t,onPatch:a,focus:h}}),r&&d.push({component:qne,props:{path:n,value:e,enforceString:i,parser:l,normalization:o,onPatch:a,onPasteJson:c,onSelect:u,onFind:f,focus:h}}),r||d.push({component:Yne,props:{path:n,value:e,readOnly:t,parser:l,normalization:o,searchResultItems:s,onSelect:u}}),!r&&f1(e)&&d.push({component:$ne,props:{value:e}}),d}const fr={};function tie(n,e){const t=n.getBoundingClientRect(),i=e.getBoundingClientRect(),s={};return s.top=t.top<0,s.left=t.left<0,s.bottom=t.bottom+i.height>(window.innerHeight||document.documentElement.clientHeight),s.right=t.right>(window.innerWidth||document.documentElement.clientWidth),s.any=s.top||s.left||s.bottom||s.right,s}function nie(n){let e,t=n[0](n[1],n[2])+"",i;return{c(){e=E("div"),this.h()},l(s){e=A(s,"DIV",{class:!0});var r=w(e);r.forEach(g),this.h()},h(){_(e,"class",i="item "+n[3]+" svelte-3e0qet")},m(s,r){B(s,e,r),e.innerHTML=t},p(s,[r]){r&7&&t!==(t=s[0](s[1],s[2])+"")&&(e.innerHTML=t),r&8&&i!==(i="item "+s[3]+" svelte-3e0qet")&&_(e,"class",i)},i:Ke,o:Ke,d(s){s&&g(e)}}}function iie(n,e,t){let{isActive:i=!1}=e,{isFirst:s=!1}=e,{isHover:r=!1}=e,{isSelectable:l=!1}=e,{getOptionLabel:o=void 0}=e,{item:a=void 0}=e,{filterText:c=""}=e,u="";return n.$$set=f=>{"isActive"in f&&t(4,i=f.isActive),"isFirst"in f&&t(5,s=f.isFirst),"isHover"in f&&t(6,r=f.isHover),"isSelectable"in f&&t(7,l=f.isSelectable),"getOptionLabel"in f&&t(0,o=f.getOptionLabel),"item"in f&&t(1,a=f.item),"filterText"in f&&t(2,c=f.filterText)},n.$$.update=()=>{if(n.$$.dirty&242){const f=[];i&&f.push("active"),s&&f.push("first"),r&&f.push("hover"),a.isGroupHeader&&f.push("groupHeader"),a.isGroupItem&&f.push("groupItem"),l||f.push("notSelectable"),t(3,u=f.join(" "))}},[o,a,c,u,i,s,r,l]}class S5 extends nt{constructor(e){super(),it(this,e,iie,nie,Ct,{isActive:4,isFirst:5,isHover:6,isSelectable:7,getOptionLabel:0,item:1,filterText:2})}}function MC(n,e,t){const i=n.slice();return i[41]=e[t],i[42]=t,i}function sie(n){let e,t,i=n[1],s=[];for(let o=0;o<i.length;o+=1)s[o]=VC(MC(n,i,o));const r=o=>U(s[o],1,1,()=>{s[o]=null});let l=null;return i.length||(l=BC(n)),{c(){for(let o=0;o<s.length;o+=1)s[o].c();e=et(),l&&l.c()},l(o){for(let a=0;a<s.length;a+=1)s[a].l(o);e=et(),l&&l.l(o)},m(o,a){for(let c=0;c<s.length;c+=1)s[c].m(o,a);B(o,e,a),l&&l.m(o,a),t=!0},p(o,a){if(a[0]&114390){i=o[1];let c;for(c=0;c<i.length;c+=1){const u=MC(o,i,c);s[c]?(s[c].p(u,a),D(s[c],1)):(s[c]=VC(u),s[c].c(),D(s[c],1),s[c].m(e.parentNode,e))}for(Le(),c=i.length;c<s.length;c+=1)r(c);Ve(),!i.length&&l?l.p(o,a):i.length?l&&(l.d(1),l=null):(l=BC(o),l.c(),l.m(e.parentNode,e))}},i(o){if(!t){for(let a=0;a<i.length;a+=1)D(s[a]);t=!0}},o(o){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)U(s[a]);t=!1},d(o){Ft(s,o),o&&g(e),l&&l.d(o)}}}function rie(n){let e,t,i;var s=n[3];function r(l){return{props:{items:l[1],itemHeight:l[8],$$slots:{default:[aie,({item:o,i:a})=>({41:o,42:a}),({item:o,i:a})=>[0,(o?1024:0)|(a?2048:0)]]},$$scope:{ctx:l}}}}return s&&(e=An(s,r(n))),{c(){e&&ce(e.$$.fragment),t=et()},l(l){e&&ge(e.$$.fragment,l),t=et()},m(l,o){e&&ue(e,l,o),B(l,t,o),i=!0},p(l,o){const a={};if(o[0]&2&&(a.items=l[1]),o[0]&256&&(a.itemHeight=l[8]),o[0]&9814|o[1]&11264&&(a.$$scope={dirty:o,ctx:l}),s!==(s=l[3])){if(e){Le();const c=e;U(c.$$.fragment,1,0,()=>{fe(c,1)}),Ve()}s?(e=An(s,r(l)),ce(e.$$.fragment),D(e.$$.fragment,1),ue(e,t.parentNode,t)):e=null}else s&&e.$set(a)},i(l){i||(e&&D(e.$$.fragment,l),i=!0)},o(l){e&&U(e.$$.fragment,l),i=!1},d(l){l&&g(t),e&&fe(e,l)}}}function BC(n){let e,t=!n[11]&&LC(n);return{c(){t&&t.c(),e=et()},l(i){t&&t.l(i),e=et()},m(i,s){t&&t.m(i,s),B(i,e,s)},p(i,s){i[11]?t&&(t.d(1),t=null):t?t.p(i,s):(t=LC(i),t.c(),t.m(e.parentNode,e))},d(i){t&&t.d(i),i&&g(e)}}}function LC(n){let e,t;return{c(){e=E("div"),t=L(n[12]),this.h()},l(i){e=A(i,"DIV",{class:!0});var s=w(e);t=V(s,n[12]),s.forEach(g),this.h()},h(){_(e,"class","empty svelte-1uyqfml")},m(i,s){B(i,e,s),m(e,t)},p(i,s){s[0]&4096&&Ce(t,i[12])},d(i){i&&g(e)}}}function lie(n){let e,t,i,s,r,l;var o=n[4];function a(h){return{props:{item:h[41],filterText:h[13],getOptionLabel:h[6],isFirst:w0(h[42]),isActive:Xd(h[41],h[9],h[10]),isHover:Yd(h[2],h[41],h[42],h[1]),isSelectable:Yo(h[41])}}}o&&(t=An(o,a(n)));function c(){return n[29](n[42])}function u(){return n[30](n[42])}function f(...h){return n[31](n[41],n[42],...h)}return{c(){e=E("div"),t&&ce(t.$$.fragment),i=P(),this.h()},l(h){e=A(h,"DIV",{class:!0,tabindex:!0});var d=w(e);t&&ge(t.$$.fragment,d),i=M(d),d.forEach(g),this.h()},h(){_(e,"class","listItem"),_(e,"tabindex","-1")},m(h,d){B(h,e,d),t&&ue(t,e,null),m(e,i),s=!0,r||(l=[se(e,"mouseover",c),se(e,"focus",u),se(e,"click",f)],r=!0)},p(h,d){n=h;const p={};if(d[0]&2&&(p.item=n[41]),d[0]&8192&&(p.filterText=n[13]),d[0]&64&&(p.getOptionLabel=n[6]),d[0]&1538&&(p.isActive=Xd(n[41],n[9],n[10])),d[0]&6&&(p.isHover=Yd(n[2],n[41],n[42],n[1])),d[0]&2&&(p.isSelectable=Yo(n[41])),o!==(o=n[4])){if(t){Le();const v=t;U(v.$$.fragment,1,0,()=>{fe(v,1)}),Ve()}o?(t=An(o,a(n)),ce(t.$$.fragment),D(t.$$.fragment,1),ue(t,e,i)):t=null}else o&&t.$set(p)},i(h){s||(t&&D(t.$$.fragment,h),s=!0)},o(h){t&&U(t.$$.fragment,h),s=!1},d(h){h&&g(e),t&&fe(t),r=!1,on(l)}}}function oie(n){let e,t=n[7](n[41])+"",i;return{c(){e=E("div"),i=L(t),this.h()},l(s){e=A(s,"DIV",{class:!0});var r=w(e);i=V(r,t),r.forEach(g),this.h()},h(){_(e,"class","listGroupTitle svelte-1uyqfml")},m(s,r){B(s,e,r),m(e,i)},p(s,r){r[0]&130&&t!==(t=s[7](s[41])+"")&&Ce(i,t)},i:Ke,o:Ke,d(s){s&&g(e)}}}function VC(n){let e,t,i,s;const r=[oie,lie],l=[];function o(a,c){return a[41].isGroupHeader&&!a[41].isSelectable?0:1}return e=o(n),t=l[e]=r[e](n),{c(){t.c(),i=et()},l(a){t.l(a),i=et()},m(a,c){l[e].m(a,c),B(a,i,c),s=!0},p(a,c){let u=e;e=o(a),e===u?l[e].p(a,c):(Le(),U(l[u],1,1,()=>{l[u]=null}),Ve(),t=l[e],t?t.p(a,c):(t=l[e]=r[e](a),t.c()),D(t,1),t.m(i.parentNode,i))},i(a){s||(D(t),s=!0)},o(a){U(t),s=!1},d(a){l[e].d(a),a&&g(i)}}}function aie(n){let e,t,i,s,r;var l=n[4];function o(f){return{props:{item:f[41],filterText:f[13],getOptionLabel:f[6],isFirst:w0(f[42]),isActive:Xd(f[41],f[9],f[10]),isHover:Yd(f[2],f[41],f[42],f[1]),isSelectable:Yo(f[41])}}}l&&(t=An(l,o(n)));function a(){return n[26](n[42])}function c(){return n[27](n[42])}function u(...f){return n[28](n[41],n[42],...f)}return{c(){e=E("div"),t&&ce(t.$$.fragment),this.h()},l(f){e=A(f,"DIV",{class:!0});var h=w(e);t&&ge(t.$$.fragment,h),h.forEach(g),this.h()},h(){_(e,"class","listItem")},m(f,h){B(f,e,h),t&&ue(t,e,null),i=!0,s||(r=[se(e,"mouseover",a),se(e,"focus",c),se(e,"click",u)],s=!0)},p(f,h){n=f;const d={};if(h[1]&1024&&(d.item=n[41]),h[0]&8192&&(d.filterText=n[13]),h[0]&64&&(d.getOptionLabel=n[6]),h[1]&2048&&(d.isFirst=w0(n[42])),h[0]&1536|h[1]&1024&&(d.isActive=Xd(n[41],n[9],n[10])),h[0]&6|h[1]&3072&&(d.isHover=Yd(n[2],n[41],n[42],n[1])),h[1]&1024&&(d.isSelectable=Yo(n[41])),l!==(l=n[4])){if(t){Le();const p=t;U(p.$$.fragment,1,0,()=>{fe(p,1)}),Ve()}l?(t=An(l,o(n)),ce(t.$$.fragment),D(t.$$.fragment,1),ue(t,e,null)):t=null}else l&&t.$set(d)},i(f){i||(t&&D(t.$$.fragment,f),i=!0)},o(f){t&&U(t.$$.fragment,f),i=!1},d(f){f&&g(e),t&&fe(t),s=!1,on(r)}}}function cie(n){let e,t,i,s,r,l;const o=[rie,sie],a=[];function c(u,f){return u[5]?0:1}return t=c(n),i=a[t]=o[t](n),{c(){e=E("div"),i.c(),this.h()},l(u){e=A(u,"DIV",{class:!0,style:!0});var f=w(e);i.l(f),f.forEach(g),this.h()},h(){_(e,"class","listContainer svelte-1uyqfml"),_(e,"style",n[14]),xe(e,"virtualList",n[5])},m(u,f){B(u,e,f),a[t].m(e,null),n[32](e),s=!0,r||(l=[se(window,"keydown",n[17]),se(window,"resize",n[18])],r=!0)},p(u,f){let h=t;t=c(u),t===h?a[t].p(u,f):(Le(),U(a[h],1,1,()=>{a[h]=null}),Ve(),i=a[t],i?i.p(u,f):(i=a[t]=o[t](u),i.c()),D(i,1),i.m(e,null)),(!s||f[0]&16384)&&_(e,"style",u[14]),(!s||f[0]&32)&&xe(e,"virtualList",u[5])},i(u){s||(D(i),s=!0)},o(u){U(i),s=!1},d(u){u&&g(e),a[t].d(),n[32](null),r=!1,on(l)}}}function Xd(n,e,t){return e&&e[t]===n[t]}function w0(n){return n===0}function Yd(n,e,t,i){return Yo(e)&&(n===t||i.length===1)}function Yo(n){return n.isGroupHeader&&n.isSelectable||n.selectable||!n.hasOwnProperty("selectable")}function uie(n,e,t){const i=Xu();let{container:s=void 0}=e,{VirtualList:r=null}=e,{Item:l=S5}=e,{isVirtualList:o=!1}=e,{items:a=[]}=e,{labelIdentifier:c="label"}=e,{getOptionLabel:u=(G,ve)=>{if(G)return G.isCreator?`Create "${ve}"`:G[c]}}=e,{getGroupHeaderLabel:f=null}=e,{itemHeight:h=40}=e,{hoverItemIndex:d=0}=e,{value:p=void 0}=e,{optionIdentifier:v="value"}=e,{hideEmptyState:y=!1}=e,{noOptionsMessage:b="No options"}=e,{isMulti:S=!1}=e,{activeItemIndex:I=0}=e,{filterText:T=""}=e,{parent:C=null}=e,{listPlacement:k=null}=e,{listAutoWidth:R=null}=e,{listOffset:O=5}=e,N=0,F=!1,W;Mi(()=>{if(a.length>0&&!S&&p){const G=a.findIndex(ve=>ve[v]===p[v]);G&&t(2,d=G)}Z("active"),s.addEventListener("scroll",()=>{clearTimeout(N),N=setTimeout(()=>{F=!1},100)},!1)}),nI(()=>{a||t(1,a=[]),a!==W&&a.length>0&&t(2,d=0),W=a});function z(G){G.isCreator||i("itemSelected",G)}function Y(G){F||t(2,d=G)}function H(G){const{item:ve,i:je,event:$}=G;if($.stopPropagation(),p&&!S&&p[v]===ve[v])return K();ve.isCreator?i("itemCreated",T):Yo(ve)&&(t(19,I=je),t(2,d=je),z(ve))}function K(){i("closeList")}async function j(G){if(o)return;let ve=!0;for(;ve;)G>0&&d===a.length-1?t(2,d=0):G<0&&d===0?t(2,d=a.length-1):t(2,d=d+G),ve=!Yo(a[d]);await li(),Z("hover")}function J(G){switch(G.key){case"Escape":G.preventDefault(),K();break;case"ArrowDown":G.preventDefault(),a.length&&j(1);break;case"ArrowUp":G.preventDefault(),a.length&&j(-1);break;case"Enter":if(G.preventDefault(),a.length===0)break;const ve=a[d];if(p&&!S&&p[v]===ve[v]){K();break}ve.isCreator?i("itemCreated",T):(t(19,I=d),z(a[d]));break;case"Tab":if(G.preventDefault(),a.length===0||p&&p[v]===a[d][v])return K();t(19,I=d),z(a[d]);break}}function Z(G){if(o||!s)return;let ve;const je=s.querySelector(`.listItem .${G}`);je&&(ve=s.getBoundingClientRect().bottom-je.getBoundingClientRect().bottom),t(0,s.scrollTop-=ve,s)}let q;function X(){const{height:G,width:ve}=C.getBoundingClientRect();t(14,q=""),t(14,q+=`min-width:${ve}px;width:${R?"auto":"100%"};`),k==="top"||k==="auto"&&tie(C,s).bottom?t(14,q+=`bottom:${G+O}px;`):t(14,q+=`top:${G+O}px;`)}const ne=G=>Y(G),Q=G=>Y(G),re=(G,ve,je)=>H({item:G,i:ve,event:je}),be=G=>Y(G),le=G=>Y(G),he=(G,ve,je)=>H({item:G,i:ve,event:je});function Ie(G){Vt[G?"unshift":"push"](()=>{s=G,t(0,s)})}return n.$$set=G=>{"container"in G&&t(0,s=G.container),"VirtualList"in G&&t(3,r=G.VirtualList),"Item"in G&&t(4,l=G.Item),"isVirtualList"in G&&t(5,o=G.isVirtualList),"items"in G&&t(1,a=G.items),"labelIdentifier"in G&&t(20,c=G.labelIdentifier),"getOptionLabel"in G&&t(6,u=G.getOptionLabel),"getGroupHeaderLabel"in G&&t(7,f=G.getGroupHeaderLabel),"itemHeight"in G&&t(8,h=G.itemHeight),"hoverItemIndex"in G&&t(2,d=G.hoverItemIndex),"value"in G&&t(9,p=G.value),"optionIdentifier"in G&&t(10,v=G.optionIdentifier),"hideEmptyState"in G&&t(11,y=G.hideEmptyState),"noOptionsMessage"in G&&t(12,b=G.noOptionsMessage),"isMulti"in G&&t(21,S=G.isMulti),"activeItemIndex"in G&&t(19,I=G.activeItemIndex),"filterText"in G&&t(13,T=G.filterText),"parent"in G&&t(22,C=G.parent),"listPlacement"in G&&t(23,k=G.listPlacement),"listAutoWidth"in G&&t(24,R=G.listAutoWidth),"listOffset"in G&&t(25,O=G.listOffset)},n.$$.update=()=>{n.$$.dirty[0]&4194305&&C&&s&&X()},[s,a,d,r,l,o,u,f,h,p,v,y,b,T,q,Y,H,J,X,I,c,S,C,k,R,O,ne,Q,re,be,le,he,Ie]}class fie extends nt{constructor(e){super(),it(this,e,uie,cie,Ct,{container:0,VirtualList:3,Item:4,isVirtualList:5,items:1,labelIdentifier:20,getOptionLabel:6,getGroupHeaderLabel:7,itemHeight:8,hoverItemIndex:2,value:9,optionIdentifier:10,hideEmptyState:11,noOptionsMessage:12,isMulti:21,activeItemIndex:19,filterText:13,parent:22,listPlacement:23,listAutoWidth:24,listOffset:25},null,[-1,-1])}}function hie(n){let e,t=n[0](n[1])+"";return{c(){e=E("div"),this.h()},l(i){e=A(i,"DIV",{class:!0});var s=w(e);s.forEach(g),this.h()},h(){_(e,"class","selection svelte-pu1q1n")},m(i,s){B(i,e,s),e.innerHTML=t},p(i,[s]){s&3&&t!==(t=i[0](i[1])+"")&&(e.innerHTML=t)},i:Ke,o:Ke,d(i){i&&g(e)}}}function die(n,e,t){let{getSelectionLabel:i=void 0}=e,{item:s=void 0}=e;return n.$$set=r=>{"getSelectionLabel"in r&&t(0,i=r.getSelectionLabel),"item"in r&&t(1,s=r.item)},[i,s]}class mie extends nt{constructor(e){super(),it(this,e,die,hie,Ct,{getSelectionLabel:0,item:1})}}function UC(n,e,t){const i=n.slice();return i[9]=e[t],i[11]=t,i}function WC(n){let e,t,i,s,r;function l(...o){return n[6](n[11],...o)}return{c(){e=E("div"),t=nr("svg"),i=nr("path"),this.h()},l(o){e=A(o,"DIV",{class:!0});var a=w(e);t=ir(a,"svg",{width:!0,height:!0,viewBox:!0,focusable:!0,"aria-hidden":!0,role:!0,class:!0});var c=w(t);i=ir(c,"path",{d:!0}),w(i).forEach(g),c.forEach(g),a.forEach(g),this.h()},h(){_(i,"d","M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124 l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z"),_(t,"width","100%"),_(t,"height","100%"),_(t,"viewBox","-2 -2 50 50"),_(t,"focusable","false"),_(t,"aria-hidden","true"),_(t,"role","presentation"),_(t,"class","svelte-liu9pa"),_(e,"class","multiSelectItem_clear svelte-liu9pa")},m(o,a){B(o,e,a),m(e,t),m(t,i),s||(r=se(e,"click",l),s=!0)},p(o,a){n=o},d(o){o&&g(e),s=!1,r()}}}function FC(n){let e,t,i=n[4](n[9])+"",s,r,l,o,a,c=!n[2]&&!n[3]&&WC(n);function u(...f){return n[7](n[11],...f)}return{c(){e=E("div"),t=E("div"),s=P(),c&&c.c(),r=P(),this.h()},l(f){e=A(f,"DIV",{class:!0});var h=w(e);t=A(h,"DIV",{class:!0});var d=w(t);d.forEach(g),s=M(h),c&&c.l(h),r=M(h),h.forEach(g),this.h()},h(){_(t,"class","multiSelectItem_label svelte-liu9pa"),_(e,"class",l="multiSelectItem "+(n[1]===n[11]?"active":"")+" "+(n[2]?"disabled":"")+" svelte-liu9pa")},m(f,h){B(f,e,h),m(e,t),t.innerHTML=i,m(e,s),c&&c.m(e,null),m(e,r),o||(a=se(e,"click",u),o=!0)},p(f,h){n=f,h&17&&i!==(i=n[4](n[9])+"")&&(t.innerHTML=i),!n[2]&&!n[3]?c?c.p(n,h):(c=WC(n),c.c(),c.m(e,r)):c&&(c.d(1),c=null),h&6&&l!==(l="multiSelectItem "+(n[1]===n[11]?"active":"")+" "+(n[2]?"disabled":"")+" svelte-liu9pa")&&_(e,"class",l)},d(f){f&&g(e),c&&c.d(),o=!1,a()}}}function pie(n){let e,t=n[0],i=[];for(let s=0;s<t.length;s+=1)i[s]=FC(UC(n,t,s));return{c(){for(let s=0;s<i.length;s+=1)i[s].c();e=et()},l(s){for(let r=0;r<i.length;r+=1)i[r].l(s);e=et()},m(s,r){for(let l=0;l<i.length;l+=1)i[l].m(s,r);B(s,e,r)},p(s,[r]){if(r&63){t=s[0];let l;for(l=0;l<t.length;l+=1){const o=UC(s,t,l);i[l]?i[l].p(o,r):(i[l]=FC(o),i[l].c(),i[l].m(e.parentNode,e))}for(;l<i.length;l+=1)i[l].d(1);i.length=t.length}},i:Ke,o:Ke,d(s){Ft(i,s),s&&g(e)}}}function gie(n,e,t){const i=Xu();let{value:s=[]}=e,{activeValue:r=void 0}=e,{isDisabled:l=!1}=e,{multiFullItemClearable:o=!1}=e,{getSelectionLabel:a=void 0}=e;function c(h,d){d.stopPropagation(),i("multiItemClear",{i:h})}const u=(h,d)=>c(h,d),f=(h,d)=>o?c(h,d):{};return n.$$set=h=>{"value"in h&&t(0,s=h.value),"activeValue"in h&&t(1,r=h.activeValue),"isDisabled"in h&&t(2,l=h.isDisabled),"multiFullItemClearable"in h&&t(3,o=h.multiFullItemClearable),"getSelectionLabel"in h&&t(4,a=h.getSelectionLabel)},[s,r,l,o,a,c,u,f]}class vie extends nt{constructor(e){super(),it(this,e,gie,pie,Ct,{value:0,activeValue:1,isDisabled:2,multiFullItemClearable:3,getSelectionLabel:4})}}function jC(n,e,t){const i=n.slice();return i[23]=e[t],i}const bie=n=>({item:n&32,i:n&32,hoverItemIndex:n&2}),HC=n=>({item:n[23].data,i:n[23].index,hoverItemIndex:n[1]});function _ie(n){let e;return{c(){e=L("Missing template")},l(t){e=V(t,"Missing template")},m(t,i){B(t,e,i)},d(t){t&&g(e)}}}function qC(n,e){let t,i,s;const r=e[15].default,l=os(r,e,e[14],HC),o=l||_ie();return{key:n,first:null,c(){t=E("svelte-virtual-list-row"),o&&o.c(),i=P(),this.h()},l(a){t=A(a,"SVELTE-VIRTUAL-LIST-ROW",{class:!0});var c=w(t);o&&o.l(c),i=M(c),c.forEach(g),this.h()},h(){hg(t,"class","svelte-g2cagw"),this.first=t},m(a,c){B(a,t,c),o&&o.m(t,null),m(t,i),s=!0},p(a,c){e=a,l&&l.p&&(!s||c&16418)&&as(l,r,e,e[14],s?us(r,e[14],c,bie):cs(e[14]),HC)},i(a){s||(D(o,a),s=!0)},o(a){U(o,a),s=!1},d(a){a&&g(t),o&&o.d(a)}}}function yie(n){let e,t,i=[],s=new Map,r,l,o,a,c=n[5];const u=f=>f[23].index;for(let f=0;f<c.length;f+=1){let h=jC(n,c,f),d=u(h);s.set(d,i[f]=qC(d,h))}return{c(){e=E("svelte-virtual-list-viewport"),t=E("svelte-virtual-list-contents");for(let f=0;f<i.length;f+=1)i[f].c();this.h()},l(f){e=A(f,"SVELTE-VIRTUAL-LIST-VIEWPORT",{style:!0,class:!0});var h=w(e);t=A(h,"SVELTE-VIRTUAL-LIST-CONTENTS",{style:!0,class:!0});var d=w(t);for(let p=0;p<i.length;p+=1)i[p].l(d);d.forEach(g),h.forEach(g),this.h()},h(){rt(t,"padding-top",n[6]+"px"),rt(t,"padding-bottom",n[7]+"px"),hg(t,"class","svelte-g2cagw"),rt(e,"height",n[0]),hg(e,"class","svelte-g2cagw"),cu(()=>n[18].call(e))},m(f,h){B(f,e,h),m(e,t);for(let d=0;d<i.length;d+=1)i[d].m(t,null);n[16](t),n[17](e),r=M5(e,n[18].bind(e)),l=!0,o||(a=se(e,"scroll",n[8]),o=!0)},p(f,[h]){h&16418&&(c=f[5],Le(),i=Ju(i,h,u,1,f,c,s,t,Zd,qC,null,jC),Ve()),(!l||h&64)&&rt(t,"padding-top",f[6]+"px"),(!l||h&128)&&rt(t,"padding-bottom",f[7]+"px"),(!l||h&1)&&rt(e,"height",f[0])},i(f){if(!l){for(let h=0;h<c.length;h+=1)D(i[h]);l=!0}},o(f){for(let h=0;h<i.length;h+=1)U(i[h]);l=!1},d(f){f&&g(e);for(let h=0;h<i.length;h+=1)i[h].d();n[16](null),n[17](null),r(),o=!1,a()}}}function Sie(n,e,t){let{$$slots:i={},$$scope:s}=e,{items:r=void 0}=e,{height:l="100%"}=e,{itemHeight:o=40}=e,{hoverItemIndex:a=0}=e,{start:c=0}=e,{end:u=0}=e,f=[],h,d,p,v=0,y,b,S=0,I=0,T;async function C(F,W,z){const{scrollTop:Y}=d;await li();let H=S-Y,K=c;for(;H<W&&K<F.length;){let J=h[K-c];J||(t(10,u=K+1),await li(),J=h[K-c]);const Z=f[K]=z||J.offsetHeight;H+=Z,K+=1}t(10,u=K);const j=F.length-u;T=(S+H)/u,t(7,I=j*T),f.length=F.length,d&&t(3,d.scrollTop=0,d)}async function k(){const{scrollTop:F}=d,W=c;for(let K=0;K<h.length;K+=1)f[c+K]=o||h[K].offsetHeight;let z=0,Y=0;for(;z<r.length;){const K=f[z]||T;if(Y+K>F){t(9,c=z),t(6,S=Y);break}Y+=K,z+=1}for(;z<r.length&&(Y+=f[z]||T,z+=1,!(Y>F+v)););t(10,u=z);const H=r.length-u;for(T=Y/u;z<r.length;)f[z++]=T;if(t(7,I=H*T),c<W){await li();let K=0,j=0;for(let Z=c;Z<W;Z+=1)h[Z-c]&&(K+=f[Z],j+=o||h[Z-c].offsetHeight);const J=j-K;d.scrollTo(0,F+J)}}Mi(()=>{h=p.getElementsByTagName("svelte-virtual-list-row"),t(13,b=!0)});function R(F){Vt[F?"unshift":"push"](()=>{p=F,t(4,p)})}function O(F){Vt[F?"unshift":"push"](()=>{d=F,t(3,d)})}function N(){v=this.offsetHeight,t(2,v)}return n.$$set=F=>{"items"in F&&t(11,r=F.items),"height"in F&&t(0,l=F.height),"itemHeight"in F&&t(12,o=F.itemHeight),"hoverItemIndex"in F&&t(1,a=F.hoverItemIndex),"start"in F&&t(9,c=F.start),"end"in F&&t(10,u=F.end),"$$scope"in F&&t(14,s=F.$$scope)},n.$$.update=()=>{n.$$.dirty&3584&&t(5,y=r.slice(c,u).map((F,W)=>({index:W+c,data:F}))),n.$$.dirty&14340&&b&&C(r,v,o)},[l,a,v,d,p,y,S,I,k,c,u,r,o,b,s,i,R,O,N]}class Eie extends nt{constructor(e){super(),it(this,e,Sie,yie,Ct,{items:11,height:0,itemHeight:12,hoverItemIndex:1,start:9,end:10})}}function Aie(n){let e,t;return{c(){e=nr("svg"),t=nr("path"),this.h()},l(i){e=ir(i,"svg",{width:!0,height:!0,viewBox:!0,focusable:!0,"aria-hidden":!0,role:!0});var s=w(e);t=ir(s,"path",{fill:!0,d:!0}),w(t).forEach(g),s.forEach(g),this.h()},h(){_(t,"fill","currentColor"),_(t,"d",`M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124
    l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z`),_(e,"width","100%"),_(e,"height","100%"),_(e,"viewBox","-2 -2 50 50"),_(e,"focusable","false"),_(e,"aria-hidden","true"),_(e,"role","presentation")},m(i,s){B(i,e,s),m(e,t)},p:Ke,i:Ke,o:Ke,d(i){i&&g(e)}}}class wie extends nt{constructor(e){super(),it(this,e,null,Aie,Ct,{})}}function Cie(n,e,t){let i;return function(){let r=this,l=arguments,o=function(){i=null,t||n.apply(r,l)},a=t&&!i;clearTimeout(i),i=setTimeout(o,e),a&&n.apply(r,l)}}function zC(n,e,t){const i=n.slice();return i[103]=e[t],i}function GC(n){let e,t,i,s,r;return{c(){e=E("span"),t=L(n[33]),i=P(),s=E("span"),r=L(n[32]),this.h()},l(l){e=A(l,"SPAN",{id:!0});var o=w(e);t=V(o,n[33]),o.forEach(g),i=M(l),s=A(l,"SPAN",{id:!0});var a=w(s);r=V(a,n[32]),a.forEach(g),this.h()},h(){_(e,"id","aria-selection"),_(s,"id","aria-context")},m(l,o){B(l,e,o),m(e,t),B(l,i,o),B(l,s,o),m(s,r)},p(l,o){o[1]&4&&Ce(t,l[33]),o[1]&2&&Ce(r,l[32])},d(l){l&&g(e),l&&g(i),l&&g(s)}}}function KC(n){let e,t,i;const s=[n[18]];var r=n[17];function l(o){let a={};for(let c=0;c<s.length;c+=1)a=Qr(a,s[c]);return{props:a}}return r&&(e=An(r,l())),{c(){e&&ce(e.$$.fragment),t=et()},l(o){e&&ge(e.$$.fragment,o),t=et()},m(o,a){e&&ue(e,o,a),B(o,t,a),i=!0},p(o,a){const c=a[0]&262144?Xr(s,[Jo(o[18])]):{};if(r!==(r=o[17])){if(e){Le();const u=e;U(u.$$.fragment,1,0,()=>{fe(u,1)}),Ve()}r?(e=An(r,l()),ce(e.$$.fragment),D(e.$$.fragment,1),ue(e,t.parentNode,t)):e=null}else r&&e.$set(c)},i(o){i||(e&&D(e.$$.fragment,o),i=!0)},o(o){e&&U(e.$$.fragment,o),i=!1},d(o){o&&g(t),e&&fe(e,o)}}}function QC(n){let e,t,i;var s=n[26];function r(l){return{props:{value:l[2],getSelectionLabel:l[12],activeValue:l[30],isDisabled:l[9],multiFullItemClearable:l[8]}}}return s&&(e=An(s,r(n)),e.$on("multiItemClear",n[38]),e.$on("focus",n[40])),{c(){e&&ce(e.$$.fragment),t=et()},l(l){e&&ge(e.$$.fragment,l),t=et()},m(l,o){e&&ue(e,l,o),B(l,t,o),i=!0},p(l,o){const a={};if(o[0]&4&&(a.value=l[2]),o[0]&4096&&(a.getSelectionLabel=l[12]),o[0]&1073741824&&(a.activeValue=l[30]),o[0]&512&&(a.isDisabled=l[9]),o[0]&256&&(a.multiFullItemClearable=l[8]),s!==(s=l[26])){if(e){Le();const c=e;U(c.$$.fragment,1,0,()=>{fe(c,1)}),Ve()}s?(e=An(s,r(l)),e.$on("multiItemClear",l[38]),e.$on("focus",l[40]),ce(e.$$.fragment),D(e.$$.fragment,1),ue(e,t.parentNode,t)):e=null}else s&&e.$set(a)},i(l){i||(e&&D(e.$$.fragment,l),i=!0)},o(l){e&&U(e.$$.fragment,l),i=!1},d(l){l&&g(t),e&&fe(e,l)}}}function XC(n){let e,t,i,s,r;var l=n[25];function o(a){return{props:{item:a[2],getSelectionLabel:a[12]}}}return l&&(t=An(l,o(n))),{c(){e=E("div"),t&&ce(t.$$.fragment),this.h()},l(a){e=A(a,"DIV",{class:!0});var c=w(e);t&&ge(t.$$.fragment,c),c.forEach(g),this.h()},h(){_(e,"class","selectedItem svelte-17l1npl")},m(a,c){B(a,e,c),t&&ue(t,e,null),i=!0,s||(r=se(e,"focus",n[40]),s=!0)},p(a,c){const u={};if(c[0]&4&&(u.item=a[2]),c[0]&4096&&(u.getSelectionLabel=a[12]),l!==(l=a[25])){if(t){Le();const f=t;U(f.$$.fragment,1,0,()=>{fe(f,1)}),Ve()}l?(t=An(l,o(a)),ce(t.$$.fragment),D(t.$$.fragment,1),ue(t,e,null)):t=null}else l&&t.$set(u)},i(a){i||(t&&D(t.$$.fragment,a),i=!0)},o(a){t&&U(t.$$.fragment,a),i=!1},d(a){a&&g(e),t&&fe(t),s=!1,r()}}}function YC(n){let e,t,i,s,r;var l=n[23];function o(a){return{}}return l&&(t=An(l,o())),{c(){e=E("div"),t&&ce(t.$$.fragment),this.h()},l(a){e=A(a,"DIV",{class:!0,"aria-hidden":!0});var c=w(e);t&&ge(t.$$.fragment,c),c.forEach(g),this.h()},h(){_(e,"class","clearSelect svelte-17l1npl"),_(e,"aria-hidden","true")},m(a,c){B(a,e,c),t&&ue(t,e,null),i=!0,s||(r=se(e,"click",B5(n[27])),s=!0)},p(a,c){if(l!==(l=a[23])){if(t){Le();const u=t;U(u.$$.fragment,1,0,()=>{fe(u,1)}),Ve()}l?(t=An(l,o()),ce(t.$$.fragment),D(t.$$.fragment,1),ue(t,e,null)):t=null}},i(a){i||(t&&D(t.$$.fragment,a),i=!0)},o(a){t&&U(t.$$.fragment,a),i=!1},d(a){a&&g(e),t&&fe(t),s=!1,r()}}}function JC(n){let e;function t(r,l){return r[22]?Tie:kie}let i=t(n),s=i(n);return{c(){e=E("div"),s.c(),this.h()},l(r){e=A(r,"DIV",{class:!0,"aria-hidden":!0});var l=w(e);s.l(l),l.forEach(g),this.h()},h(){_(e,"class","indicator svelte-17l1npl"),_(e,"aria-hidden","true")},m(r,l){B(r,e,l),s.m(e,null)},p(r,l){i===(i=t(r))&&s?s.p(r,l):(s.d(1),s=i(r),s&&(s.c(),s.m(e,null)))},d(r){r&&g(e),s.d()}}}function kie(n){let e,t;return{c(){e=nr("svg"),t=nr("path"),this.h()},l(i){e=ir(i,"svg",{width:!0,height:!0,viewBox:!0,focusable:!0,"aria-hidden":!0,class:!0});var s=w(e);t=ir(s,"path",{d:!0}),w(t).forEach(g),s.forEach(g),this.h()},h(){_(t,"d",`M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747
          3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0
          1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502
          0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0
          0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z`),_(e,"width","100%"),_(e,"height","100%"),_(e,"viewBox","0 0 20 20"),_(e,"focusable","false"),_(e,"aria-hidden","true"),_(e,"class","svelte-17l1npl")},m(i,s){B(i,e,s),m(e,t)},p:Ke,d(i){i&&g(e)}}}function Tie(n){let e,t;return{c(){e=new L5(!1),t=et(),this.h()},l(i){e=V5(i,!1),t=et(),this.h()},h(){e.a=t},m(i,s){e.m(n[22],i,s),B(i,t,s)},p(i,s){s[0]&4194304&&e.p(i[22])},d(i){i&&g(t),i&&e.d()}}}function ZC(n){let e,t,i;return{c(){e=E("div"),t=nr("svg"),i=nr("circle"),this.h()},l(s){e=A(s,"DIV",{class:!0});var r=w(e);t=ir(r,"svg",{class:!0,viewBox:!0});var l=w(t);i=ir(l,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-miterlimit":!0}),w(i).forEach(g),l.forEach(g),r.forEach(g),this.h()},h(){_(i,"class","spinner_path svelte-17l1npl"),_(i,"cx","50"),_(i,"cy","50"),_(i,"r","20"),_(i,"fill","none"),_(i,"stroke","currentColor"),_(i,"stroke-width","5"),_(i,"stroke-miterlimit","10"),_(t,"class","spinner_icon svelte-17l1npl"),_(t,"viewBox","25 25 50 50"),_(e,"class","spinner svelte-17l1npl")},m(s,r){B(s,e,r),m(e,t),m(t,i)},d(s){s&&g(e)}}}function xC(n){let e,t,i,s;const r=[n[34]];function l(c){n[84](c)}var o=n[24];function a(c){let u={};for(let f=0;f<r.length;f+=1)u=Qr(u,r[f]);return c[28]!==void 0&&(u.hoverItemIndex=c[28]),{props:u}}return o&&(e=An(o,a(n)),Vt.push(()=>Us(e,"hoverItemIndex",l)),e.$on("itemSelected",n[43]),e.$on("itemCreated",n[44]),e.$on("closeList",n[45])),{c(){e&&ce(e.$$.fragment),i=et()},l(c){e&&ge(e.$$.fragment,c),i=et()},m(c,u){e&&ue(e,c,u),B(c,i,u),s=!0},p(c,u){const f=u[1]&8?Xr(r,[Jo(c[34])]):{};if(!t&&u[0]&268435456&&(t=!0,f.hoverItemIndex=c[28],Js(()=>t=!1)),o!==(o=c[24])){if(e){Le();const h=e;U(h.$$.fragment,1,0,()=>{fe(h,1)}),Ve()}o?(e=An(o,a(c)),Vt.push(()=>Us(e,"hoverItemIndex",l)),e.$on("itemSelected",c[43]),e.$on("itemCreated",c[44]),e.$on("closeList",c[45]),ce(e.$$.fragment),D(e.$$.fragment,1),ue(e,i.parentNode,i)):e=null}else o&&e.$set(f)},i(c){s||(e&&D(e.$$.fragment,c),s=!0)},o(c){e&&U(e.$$.fragment,c),s=!1},d(c){c&&g(i),e&&fe(e,c)}}}function $C(n){let e,t,i;return{c(){e=E("input"),this.h()},l(s){e=A(s,"INPUT",{name:!0,type:!0,class:!0}),this.h()},h(){_(e,"name",t=n[16].name),_(e,"type","hidden"),e.value=i=n[2]?n[12](n[2]):null,_(e,"class","svelte-17l1npl")},m(s,r){B(s,e,r)},p(s,r){r[0]&65536&&t!==(t=s[16].name)&&_(e,"name",t),r[0]&4100&&i!==(i=s[2]?s[12](s[2]):null)&&(e.value=i)},d(s){s&&g(e)}}}function ek(n){let e,t=n[2],i=[];for(let s=0;s<t.length;s+=1)i[s]=tk(zC(n,t,s));return{c(){for(let s=0;s<i.length;s+=1)i[s].c();e=et()},l(s){for(let r=0;r<i.length;r+=1)i[r].l(s);e=et()},m(s,r){for(let l=0;l<i.length;l+=1)i[l].m(s,r);B(s,e,r)},p(s,r){if(r[0]&69636){t=s[2];let l;for(l=0;l<t.length;l+=1){const o=zC(s,t,l);i[l]?i[l].p(o,r):(i[l]=tk(o),i[l].c(),i[l].m(e.parentNode,e))}for(;l<i.length;l+=1)i[l].d(1);i.length=t.length}},d(s){Ft(i,s),s&&g(e)}}}function tk(n){let e,t,i;return{c(){e=E("input"),this.h()},l(s){e=A(s,"INPUT",{name:!0,type:!0,class:!0}),this.h()},h(){_(e,"name",t=n[16].name),_(e,"type","hidden"),e.value=i=n[103]?n[12](n[103]):null,_(e,"class","svelte-17l1npl")},m(s,r){B(s,e,r)},p(s,r){r[0]&65536&&t!==(t=s[16].name)&&_(e,"name",t),r[0]&4100&&i!==(i=s[103]?s[12](s[103]):null)&&(e.value=i)},d(s){s&&g(e)}}}function Iie(n){let e,t,i,s,r,l,o,a,c,u,f,h,d,p,v,y,b,S,I=n[1]&&GC(n),T=n[17]&&KC(n),C=n[35]&&QC(n),k=[{readOnly:o=!n[13]},n[31],{placeholder:n[36]},{style:n[14]},{disabled:n[9]}],R={};for(let K=0;K<k.length;K+=1)R=Qr(R,k[K]);let O=!n[7]&&n[29]&&XC(n),N=n[37]&&YC(n),F=!n[37]&&(n[20]||n[19]&&!n[2]||!n[13]&&!n[9]&&!n[4]&&(n[29]&&!n[15]||!n[29]))&&JC(n),W=n[4]&&ZC(),z=n[5]&&xC(n),Y=(!n[7]||n[7]&&!n[35])&&$C(n),H=n[7]&&n[35]&&ek(n);return{c(){e=E("div"),t=E("span"),I&&I.c(),i=P(),T&&T.c(),s=P(),C&&C.c(),r=P(),l=E("input"),a=P(),O&&O.c(),c=P(),N&&N.c(),u=P(),F&&F.c(),f=P(),W&&W.c(),h=P(),z&&z.c(),d=P(),Y&&Y.c(),p=P(),H&&H.c(),this.h()},l(K){e=A(K,"DIV",{class:!0,style:!0});var j=w(e);t=A(j,"SPAN",{"aria-live":!0,"aria-atomic":!0,"aria-relevant":!0,class:!0});var J=w(t);I&&I.l(J),J.forEach(g),i=M(j),T&&T.l(j),s=M(j),C&&C.l(j),r=M(j),l=A(j,"INPUT",{placeholder:!0,style:!0}),a=M(j),O&&O.l(j),c=M(j),N&&N.l(j),u=M(j),F&&F.l(j),f=M(j),W&&W.l(j),h=M(j),z&&z.l(j),d=M(j),Y&&Y.l(j),p=M(j),H&&H.l(j),j.forEach(g),this.h()},h(){_(t,"aria-live","polite"),_(t,"aria-atomic","false"),_(t,"aria-relevant","additions text"),_(t,"class","a11yText svelte-17l1npl"),Gb(l,R),xe(l,"svelte-17l1npl",!0),_(e,"class",v="selectContainer "+n[21]+" svelte-17l1npl"),_(e,"style",n[11]),xe(e,"hasError",n[10]),xe(e,"multiSelect",n[7]),xe(e,"disabled",n[9]),xe(e,"focused",n[1])},m(K,j){B(K,e,j),m(e,t),I&&I.m(t,null),m(e,i),T&&T.m(e,null),m(e,s),C&&C.m(e,null),m(e,r),m(e,l),l.autofocus&&l.focus(),n[82](l),Ms(l,n[3]),m(e,a),O&&O.m(e,null),m(e,c),N&&N.m(e,null),m(e,u),F&&F.m(e,null),m(e,f),W&&W.m(e,null),m(e,h),z&&z.m(e,null),m(e,d),Y&&Y.m(e,null),m(e,p),H&&H.m(e,null),n[85](e),y=!0,b||(S=[se(window,"click",n[41]),se(window,"focusin",n[41]),se(window,"keydown",n[39]),se(l,"focus",n[40]),se(l,"input",n[83]),se(e,"click",n[42])],b=!0)},p(K,j){K[1]?I?I.p(K,j):(I=GC(K),I.c(),I.m(t,null)):I&&(I.d(1),I=null),K[17]?T?(T.p(K,j),j[0]&131072&&D(T,1)):(T=KC(K),T.c(),D(T,1),T.m(e,s)):T&&(Le(),U(T,1,1,()=>{T=null}),Ve()),K[35]?C?(C.p(K,j),j[1]&16&&D(C,1)):(C=QC(K),C.c(),D(C,1),C.m(e,r)):C&&(Le(),U(C,1,1,()=>{C=null}),Ve()),Gb(l,R=Xr(k,[(!y||j[0]&8192&&o!==(o=!K[13]))&&{readOnly:o},j[1]&1&&K[31],(!y||j[1]&32)&&{placeholder:K[36]},(!y||j[0]&16384)&&{style:K[14]},(!y||j[0]&512)&&{disabled:K[9]}])),j[0]&8&&l.value!==K[3]&&Ms(l,K[3]),xe(l,"svelte-17l1npl",!0),!K[7]&&K[29]?O?(O.p(K,j),j[0]&536871040&&D(O,1)):(O=XC(K),O.c(),D(O,1),O.m(e,c)):O&&(Le(),U(O,1,1,()=>{O=null}),Ve()),K[37]?N?(N.p(K,j),j[1]&64&&D(N,1)):(N=YC(K),N.c(),D(N,1),N.m(e,u)):N&&(Le(),U(N,1,1,()=>{N=null}),Ve()),!K[37]&&(K[20]||K[19]&&!K[2]||!K[13]&&!K[9]&&!K[4]&&(K[29]&&!K[15]||!K[29]))?F?F.p(K,j):(F=JC(K),F.c(),F.m(e,f)):F&&(F.d(1),F=null),K[4]?W||(W=ZC(),W.c(),W.m(e,h)):W&&(W.d(1),W=null),K[5]?z?(z.p(K,j),j[0]&32&&D(z,1)):(z=xC(K),z.c(),D(z,1),z.m(e,d)):z&&(Le(),U(z,1,1,()=>{z=null}),Ve()),!K[7]||K[7]&&!K[35]?Y?Y.p(K,j):(Y=$C(K),Y.c(),Y.m(e,p)):Y&&(Y.d(1),Y=null),K[7]&&K[35]?H?H.p(K,j):(H=ek(K),H.c(),H.m(e,null)):H&&(H.d(1),H=null),(!y||j[0]&2097152&&v!==(v="selectContainer "+K[21]+" svelte-17l1npl"))&&_(e,"class",v),(!y||j[0]&2048)&&_(e,"style",K[11]),(!y||j[0]&2098176)&&xe(e,"hasError",K[10]),(!y||j[0]&2097280)&&xe(e,"multiSelect",K[7]),(!y||j[0]&2097664)&&xe(e,"disabled",K[9]),(!y||j[0]&2097154)&&xe(e,"focused",K[1])},i(K){y||(D(T),D(C),D(O),D(N),D(z),y=!0)},o(K){U(T),U(C),U(O),U(N),U(z),y=!1},d(K){K&&g(e),I&&I.d(),T&&T.d(),C&&C.d(),n[82](null),O&&O.d(),N&&N.d(),F&&F.d(),W&&W.d(),z&&z.d(),Y&&Y.d(),H&&H.d(),n[85](null),b=!1,on(S)}}}function nk(n){return n.map((e,t)=>({index:t,value:e,label:`${e}`}))}function Oie(n,e,t){let i,s,r,l,o,a,c,u;const f=Xu();let{id:h=null}=e,{container:d=void 0}=e,{input:p=void 0}=e,{isMulti:v=!1}=e,{multiFullItemClearable:y=!1}=e,{isDisabled:b=!1}=e,{isCreatable:S=!1}=e,{isFocused:I=!1}=e,{value:T=null}=e,{filterText:C=""}=e,{placeholder:k="Select..."}=e,{placeholderAlwaysShow:R=!1}=e,{items:O=null}=e,{itemFilter:N=(ee,_t,xt)=>`${ee}`.toLowerCase().includes(_t.toLowerCase())}=e,{groupBy:F=void 0}=e,{groupFilter:W=ee=>ee}=e,{isGroupHeaderSelectable:z=!1}=e,{getGroupHeaderLabel:Y=ee=>ee[H]||ee.id}=e,{labelIdentifier:H="label"}=e,{getOptionLabel:K=(ee,_t)=>ee.isCreator?`Create "${_t}"`:ee[H]}=e,{optionIdentifier:j="value"}=e,{loadOptions:J=void 0}=e,{hasError:Z=!1}=e,{containerStyles:q=""}=e,{getSelectionLabel:X=ee=>ee?ee[H]:null}=e,{createGroupHeaderItem:ne=ee=>({value:ee,label:ee})}=e,{createItem:Q=ee=>({value:ee,label:ee})}=e;const re=()=>i;let{isSearchable:be=!0}=e,{inputStyles:le=""}=e,{isClearable:he=!0}=e,{isWaiting:Ie=!1}=e,{listPlacement:G="auto"}=e,{listOpen:ve=!1}=e,{isVirtualList:je=!1}=e,{loadOptionsInterval:$=300}=e,{noOptionsMessage:Oe="No options"}=e,{hideEmptyState:ie=!1}=e,{inputAttributes:_e={}}=e,{listAutoWidth:Ee=!0}=e,{itemHeight:He=40}=e,{Icon:We=void 0}=e,{iconProps:Qe={}}=e,{showChevron:we=!1}=e,{showIndicator:Me=!1}=e,{containerClasses:de=""}=e,{indicatorSvg:Ae=void 0}=e,{listOffset:Re=5}=e,{ClearIcon:Ne=wie}=e,{Item:Ge=S5}=e,{List:pe=fie}=e,{Selection:Fe=mie}=e,{MultiSelection:ae=vie}=e,{VirtualList:ke=Eie}=e;function oe(ee){if(ee.loadOptions&&ee.filterText.length>0)return;if(!ee.items)return[];ee.items&&ee.items.length>0&&typeof ee.items[0]!="object"&&(ee.items=nk(ee.items));let _t=ee.items.filter(xt=>{let On=N(K(xt,ee.filterText),ee.filterText,xt);return On&&ee.isMulti&&ee.value&&Array.isArray(ee.value)&&(On=!ee.value.some(pi=>pi[ee.optionIdentifier]===xt[ee.optionIdentifier])),On});return ee.groupBy&&(_t=gn(_t)),ee.isCreatable&&(_t=at(_t,ee.filterText)),_t}function at(ee,_t){if(_t.length===0)return ee;const xt=Q(_t);return ee[0]&&_t===ee[0][H]?ee:(xt.isCreator=!0,[...ee,xt])}let{selectedValue:qe=null}=e,me,ot,Se,ze,ye,ut;const Bt=Cie(async()=>{t(4,Ie=!0);let ee=await J(C).catch(_t=>{console.warn("svelte-select loadOptions error :>> ",_t),f("error",{type:"loadOptions",details:_t})});ee&&!ee.cancelled&&(ee?(ee&&ee.length>0&&typeof ee[0]!="object"&&(ee=nk(ee)),t(81,i=[...ee]),f("loaded",{items:i})):t(81,i=[]),S&&t(81,i=at(i,C)),t(4,Ie=!1),t(1,I=!0),t(5,ve=!0))},$);function gt(){typeof T=="string"?t(2,T={[j]:T,label:T}):v&&Array.isArray(T)&&T.length>0&&t(2,T=T.map(ee=>typeof ee=="string"?{value:ee,label:ee}:ee))}let Ot;function en(){t(31,Ot=Object.assign({autocapitalize:"none",autocomplete:"off",autocorrect:"off",spellcheck:!1,tabindex:0,type:"text","aria-autocomplete":"list"},_e)),h&&t(31,Ot.id=h,Ot),be||t(31,Ot.readonly=!0,Ot)}function gn(ee){const _t=[],xt={};ee.forEach(pi=>{const Ti=F(pi);_t.includes(Ti)||(_t.push(Ti),xt[Ti]=[],Ti&&xt[Ti].push(Object.assign(ne(Ti,pi),{id:Ti,isGroupHeader:!0,isSelectable:z}))),xt[Ti].push(Object.assign({isGroupItem:!!Ti},pi))});const On=[];return W(_t).forEach(pi=>{On.push(...xt[pi])}),On}function Jt(){if(v){JSON.stringify(T)!==JSON.stringify(ot)&&vn()&&f("select",T);return}(!ot||JSON.stringify(T[j])!==JSON.stringify(ot[j]))&&f("select",T)}function ft(){I||ve?Ue():p&&p.blur()}function cn(){T&&(Array.isArray(T)?t(2,T=[...T]):t(2,T=[T]))}function tn(){T&&t(2,T=null)}function wn(){C.length!==0&&(t(1,I=!0),t(5,ve=!0),J?Bt():(t(5,ve=!0),v&&t(30,me=void 0)))}nI(async()=>{t(77,ot=T),t(78,Se=C),t(79,ze=I),t(80,ye=v)});function vn(){let ee=!0;if(T){const _t=[],xt=[];T.forEach(On=>{_t.includes(On[j])?ee=!1:(_t.push(On[j]),xt.push(On))}),ee||t(2,T=xt)}return ee}function Ln(ee){let _t=ee?ee[j]:T[j];return O.find(xt=>xt[j]===_t)}function Cn(ee){!ee||ee.length===0||ee.some(_t=>typeof _t!="object")||!T||(v?T.some(_t=>!_t||!_t[j]):!T[j])||(Array.isArray(T)?t(2,T=T.map(_t=>Ln(_t)||_t)):t(2,T=Ln()||T))}function Un(ee){const{detail:_t}=ee,xt=T[_t?_t.i:T.length-1];T.length===1?t(2,T=void 0):t(2,T=T.filter(On=>On!==xt)),f("clear",xt)}function di(ee){if(I)switch(ee.key){case"ArrowDown":ee.preventDefault(),t(5,ve=!0),t(30,me=void 0);break;case"ArrowUp":ee.preventDefault(),t(5,ve=!0),t(30,me=void 0);break;case"Tab":ve||t(1,I=!1);break;case"Backspace":if(!v||C.length>0)return;if(v&&T&&T.length>0){if(Un(me!==void 0?me:T.length-1),me===0||me===void 0)break;t(30,me=T.length>me?me-1:void 0)}break;case"ArrowLeft":if(!v||C.length>0)return;me===void 0?t(30,me=T.length-1):T.length>me&&me!==0&&t(30,me-=1);break;case"ArrowRight":if(!v||C.length>0||me===void 0)return;me===T.length-1?t(30,me=void 0):me<T.length-1&&t(30,me+=1);break}}function Ue(){t(1,I=!0),p&&p.focus()}function yt(ee){if(!d)return;const _t=ee.path&&ee.path.length>0?ee.path[0]:ee.target;d.contains(_t)||d.contains(ee.relatedTarget)||(t(1,I=!1),t(5,ve=!1),t(30,me=void 0),p&&p.blur())}function qt(){b||(t(1,I=!0),t(5,ve=!ve))}function hn(){t(2,T=void 0),t(5,ve=!1),f("clear",T),Ue()}Mi(()=>{I&&p&&p.focus()});function dn(ee){const{detail:_t}=ee;if(_t){t(3,C="");const xt=Object.assign({},_t);(!xt.isGroupHeader||xt.isSelectable)&&(v?t(2,T=T?T.concat([xt]):[xt]):t(2,T=xt),t(2,T),setTimeout(()=>{t(5,ve=!1),t(30,me=void 0)}))}}function Qt(ee){const{detail:_t}=ee;v?(t(2,T=T||[]),t(2,T=[...T,Q(_t)])):t(2,T=Q(_t)),f("itemCreated",_t),t(3,C=""),t(5,ve=!1),t(30,me=void 0)}function tt(){t(3,C=""),t(5,ve=!1)}let{ariaValues:Dt=ee=>`Option ${ee}, selected.`}=e,{ariaListOpen:mi=(ee,_t)=>`You are currently focused on option ${ee}. There are ${_t} results available.`}=e,{ariaFocused:Pt=()=>"Select is focused, type to refine list, press down to open the menu."}=e;function nn(){let ee;return v&&T.length>0?ee=T.map(_t=>X(_t)).join(", "):ee=X(T),Dt(ee)}function jt(){if(!I||!i||i.length===0)return"";let ee=i[ut];if(ve&&ee){let _t=X(ee),xt=i?i.length:0;return mi(_t,xt)}else return Pt()}function Ui(ee){Vt[ee?"unshift":"push"](()=>{p=ee,t(6,p)})}function gs(){C=this.value,t(3,C)}function Sn(ee){ut=ee,t(28,ut)}function pt(ee){Vt[ee?"unshift":"push"](()=>{d=ee,t(0,d)})}return n.$$set=ee=>{"id"in ee&&t(46,h=ee.id),"container"in ee&&t(0,d=ee.container),"input"in ee&&t(6,p=ee.input),"isMulti"in ee&&t(7,v=ee.isMulti),"multiFullItemClearable"in ee&&t(8,y=ee.multiFullItemClearable),"isDisabled"in ee&&t(9,b=ee.isDisabled),"isCreatable"in ee&&t(47,S=ee.isCreatable),"isFocused"in ee&&t(1,I=ee.isFocused),"value"in ee&&t(2,T=ee.value),"filterText"in ee&&t(3,C=ee.filterText),"placeholder"in ee&&t(48,k=ee.placeholder),"placeholderAlwaysShow"in ee&&t(49,R=ee.placeholderAlwaysShow),"items"in ee&&t(50,O=ee.items),"itemFilter"in ee&&t(51,N=ee.itemFilter),"groupBy"in ee&&t(52,F=ee.groupBy),"groupFilter"in ee&&t(53,W=ee.groupFilter),"isGroupHeaderSelectable"in ee&&t(54,z=ee.isGroupHeaderSelectable),"getGroupHeaderLabel"in ee&&t(55,Y=ee.getGroupHeaderLabel),"labelIdentifier"in ee&&t(56,H=ee.labelIdentifier),"getOptionLabel"in ee&&t(57,K=ee.getOptionLabel),"optionIdentifier"in ee&&t(58,j=ee.optionIdentifier),"loadOptions"in ee&&t(59,J=ee.loadOptions),"hasError"in ee&&t(10,Z=ee.hasError),"containerStyles"in ee&&t(11,q=ee.containerStyles),"getSelectionLabel"in ee&&t(12,X=ee.getSelectionLabel),"createGroupHeaderItem"in ee&&t(60,ne=ee.createGroupHeaderItem),"createItem"in ee&&t(61,Q=ee.createItem),"isSearchable"in ee&&t(13,be=ee.isSearchable),"inputStyles"in ee&&t(14,le=ee.inputStyles),"isClearable"in ee&&t(15,he=ee.isClearable),"isWaiting"in ee&&t(4,Ie=ee.isWaiting),"listPlacement"in ee&&t(63,G=ee.listPlacement),"listOpen"in ee&&t(5,ve=ee.listOpen),"isVirtualList"in ee&&t(64,je=ee.isVirtualList),"loadOptionsInterval"in ee&&t(65,$=ee.loadOptionsInterval),"noOptionsMessage"in ee&&t(66,Oe=ee.noOptionsMessage),"hideEmptyState"in ee&&t(67,ie=ee.hideEmptyState),"inputAttributes"in ee&&t(16,_e=ee.inputAttributes),"listAutoWidth"in ee&&t(68,Ee=ee.listAutoWidth),"itemHeight"in ee&&t(69,He=ee.itemHeight),"Icon"in ee&&t(17,We=ee.Icon),"iconProps"in ee&&t(18,Qe=ee.iconProps),"showChevron"in ee&&t(19,we=ee.showChevron),"showIndicator"in ee&&t(20,Me=ee.showIndicator),"containerClasses"in ee&&t(21,de=ee.containerClasses),"indicatorSvg"in ee&&t(22,Ae=ee.indicatorSvg),"listOffset"in ee&&t(70,Re=ee.listOffset),"ClearIcon"in ee&&t(23,Ne=ee.ClearIcon),"Item"in ee&&t(71,Ge=ee.Item),"List"in ee&&t(24,pe=ee.List),"Selection"in ee&&t(25,Fe=ee.Selection),"MultiSelection"in ee&&t(26,ae=ee.MultiSelection),"VirtualList"in ee&&t(72,ke=ee.VirtualList),"selectedValue"in ee&&t(73,qe=ee.selectedValue),"ariaValues"in ee&&t(74,Dt=ee.ariaValues),"ariaListOpen"in ee&&t(75,mi=ee.ariaListOpen),"ariaFocused"in ee&&t(76,Pt=ee.ariaFocused)},n.$$.update=()=>{n.$$.dirty[0]&140|n.$$.dirty[1]&405340160&&t(81,i=oe({loadOptions:J,filterText:C,items:O,value:T,isMulti:v,optionIdentifier:j,groupBy:F,isCreatable:S})),n.$$.dirty[2]&2048&&qe&&console.warn("selectedValue is no longer used. Please use value instead."),n.$$.dirty[1]&524288&&Cn(O),n.$$.dirty[0]&4&&T&&gt(),n.$$.dirty[0]&73728&&(_e||!be)&&en(),n.$$.dirty[0]&128|n.$$.dirty[2]&262144&&(v&&cn(),ye&&!v&&tn()),n.$$.dirty[0]&132&&v&&T&&T.length>1&&vn(),n.$$.dirty[0]&4&&T&&Jt(),n.$$.dirty[0]&132|n.$$.dirty[2]&32768&&!T&&v&&ot&&f("select",T),n.$$.dirty[0]&2|n.$$.dirty[2]&131072&&I!==ze&&ft(),n.$$.dirty[0]&8|n.$$.dirty[2]&65536&&C!==Se&&wn(),n.$$.dirty[0]&12&&t(29,s=T&&C.length===0),n.$$.dirty[0]&536904208&&t(37,r=s&&he&&!b&&!Ie),n.$$.dirty[0]&132|n.$$.dirty[1]&393216&&t(36,l=R&&v?k:T?"":k),n.$$.dirty[0]&132&&t(35,o=v&&T&&T.length>0),n.$$.dirty[0]&141|n.$$.dirty[1]&218103808|n.$$.dirty[2]&526326&&t(34,a={Item:Ge,filterText:C,optionIdentifier:j,noOptionsMessage:Oe,hideEmptyState:ie,isVirtualList:je,VirtualList:ke,value:T,isMulti:v,getGroupHeaderLabel:Y,items:i,itemHeight:He,getOptionLabel:K,listPlacement:G,parent:d,listAutoWidth:Ee,listOffset:Re}),n.$$.dirty[0]&132&&t(33,c=T?nn():""),n.$$.dirty[0]&268435490|n.$$.dirty[2]&524288&&t(32,u=jt())},[d,I,T,C,Ie,ve,p,v,y,b,Z,q,X,be,le,he,_e,We,Qe,we,Me,de,Ae,Ne,pe,Fe,ae,hn,ut,s,me,Ot,u,c,a,o,l,r,Un,di,Ue,yt,qt,dn,Qt,tt,h,S,k,R,O,N,F,W,z,Y,H,K,j,J,ne,Q,re,G,je,$,Oe,ie,Ee,He,Re,Ge,ke,qe,Dt,mi,Pt,ot,Se,ze,ye,i,Ui,gs,Sn,pt]}class go extends nt{constructor(e){super(),it(this,e,Oie,Iie,Ct,{id:46,container:0,input:6,isMulti:7,multiFullItemClearable:8,isDisabled:9,isCreatable:47,isFocused:1,value:2,filterText:3,placeholder:48,placeholderAlwaysShow:49,items:50,itemFilter:51,groupBy:52,groupFilter:53,isGroupHeaderSelectable:54,getGroupHeaderLabel:55,labelIdentifier:56,getOptionLabel:57,optionIdentifier:58,loadOptions:59,hasError:10,containerStyles:11,getSelectionLabel:12,createGroupHeaderItem:60,createItem:61,getFilteredItems:62,isSearchable:13,inputStyles:14,isClearable:15,isWaiting:4,listPlacement:63,listOpen:5,isVirtualList:64,loadOptionsInterval:65,noOptionsMessage:66,hideEmptyState:67,inputAttributes:16,listAutoWidth:68,itemHeight:69,Icon:17,iconProps:18,showChevron:19,showIndicator:20,containerClasses:21,indicatorSvg:22,listOffset:70,ClearIcon:23,Item:71,List:24,Selection:25,MultiSelection:26,VirtualList:72,selectedValue:73,handleClear:27,ariaValues:74,ariaListOpen:75,ariaFocused:76},null,[-1,-1,-1,-1])}get getFilteredItems(){return this.$$.ctx[62]}get handleClear(){return this.$$.ctx[27]}}function Rie(n){let e,t,i,s,r,l,o,a,c,u,f,h,d,p,v,y,b,S,I,T,C,k,R,O,N,F,W,z,Y,H,K,j,J,Z,q,X,ne,Q;function re(ie){n[16](ie)}let be={containerClasses:"jse-filter-path",showIndicator:!0,items:n[6]};n[0]!==void 0&&(be.value=n[0]),a=new go({props:be}),Vt.push(()=>Us(a,"value",re));function le(ie){n[17](ie)}let he={containerClasses:"jse-filter-relation",showIndicator:!0,items:n[8]};n[1]!==void 0&&(he.value=n[1]),f=new go({props:he}),Vt.push(()=>Us(f,"value",le));function Ie(ie){n[19](ie)}let G={containerClasses:"jse-sort-path",showIndicator:!0,items:n[6]};n[3]!==void 0&&(G.value=n[3]),k=new go({props:G}),Vt.push(()=>Us(k,"value",Ie));function ve(ie){n[20](ie)}let je={containerClasses:"jse-sort-direction",showIndicator:!0,items:n[9]};n[4]!==void 0&&(je.value=n[4]),N=new go({props:je}),Vt.push(()=>Us(N,"value",ve));function $(ie){n[21](ie)}let Oe={containerClasses:"jse-projection-paths",isMulti:!0,showIndicator:!0,items:n[7]};return n[5]!==void 0&&(Oe.value=n[5]),Z=new go({props:Oe}),Vt.push(()=>Us(Z,"value",$)),{c(){e=E("table"),t=E("tr"),i=E("th"),s=L("Filter"),r=P(),l=E("td"),o=E("div"),ce(a.$$.fragment),u=P(),ce(f.$$.fragment),d=P(),p=E("input"),v=P(),y=E("tr"),b=E("th"),S=L("Sort"),I=P(),T=E("td"),C=E("div"),ce(k.$$.fragment),O=P(),ce(N.$$.fragment),W=P(),z=E("tr"),Y=E("th"),H=L("Pick"),K=P(),j=E("td"),J=E("div"),ce(Z.$$.fragment),this.h()},l(ie){e=A(ie,"TABLE",{class:!0});var _e=w(e);t=A(_e,"TR",{});var Ee=w(t);i=A(Ee,"TH",{class:!0});var He=w(i);s=V(He,"Filter"),He.forEach(g),r=M(Ee),l=A(Ee,"TD",{});var We=w(l);o=A(We,"DIV",{class:!0});var Qe=w(o);ge(a.$$.fragment,Qe),u=M(Qe),ge(f.$$.fragment,Qe),d=M(Qe),p=A(Qe,"INPUT",{class:!0}),Qe.forEach(g),We.forEach(g),Ee.forEach(g),v=M(_e),y=A(_e,"TR",{});var we=w(y);b=A(we,"TH",{class:!0});var Me=w(b);S=V(Me,"Sort"),Me.forEach(g),I=M(we),T=A(we,"TD",{});var de=w(T);C=A(de,"DIV",{class:!0});var Ae=w(C);ge(k.$$.fragment,Ae),O=M(Ae),ge(N.$$.fragment,Ae),Ae.forEach(g),de.forEach(g),we.forEach(g),W=M(_e),z=A(_e,"TR",{});var Re=w(z);Y=A(Re,"TH",{class:!0});var Ne=w(Y);H=V(Ne,"Pick"),Ne.forEach(g),K=M(Re),j=A(Re,"TD",{});var Ge=w(j);J=A(Ge,"DIV",{class:!0});var pe=w(J);ge(Z.$$.fragment,pe),pe.forEach(g),Ge.forEach(g),Re.forEach(g),_e.forEach(g),this.h()},h(){_(i,"class","svelte-1pbg0mn"),_(p,"class","jse-filter-value svelte-1pbg0mn"),_(o,"class","jse-horizontal svelte-1pbg0mn"),_(b,"class","svelte-1pbg0mn"),_(C,"class","jse-horizontal svelte-1pbg0mn"),_(Y,"class","svelte-1pbg0mn"),_(J,"class","jse-horizontal svelte-1pbg0mn"),_(e,"class","jse-transform-wizard svelte-1pbg0mn")},m(ie,_e){B(ie,e,_e),m(e,t),m(t,i),m(i,s),m(t,r),m(t,l),m(l,o),ue(a,o,null),m(o,u),ue(f,o,null),m(o,d),m(o,p),Ms(p,n[2]),m(e,v),m(e,y),m(y,b),m(b,S),m(y,I),m(y,T),m(T,C),ue(k,C,null),m(C,O),ue(N,C,null),m(e,W),m(e,z),m(z,Y),m(Y,H),m(z,K),m(z,j),m(j,J),ue(Z,J,null),X=!0,ne||(Q=se(p,"input",n[18]),ne=!0)},p(ie,[_e]){const Ee={};_e&64&&(Ee.items=ie[6]),!c&&_e&1&&(c=!0,Ee.value=ie[0],Js(()=>c=!1)),a.$set(Ee);const He={};!h&&_e&2&&(h=!0,He.value=ie[1],Js(()=>h=!1)),f.$set(He),_e&4&&p.value!==ie[2]&&Ms(p,ie[2]);const We={};_e&64&&(We.items=ie[6]),!R&&_e&8&&(R=!0,We.value=ie[3],Js(()=>R=!1)),k.$set(We);const Qe={};!F&&_e&16&&(F=!0,Qe.value=ie[4],Js(()=>F=!1)),N.$set(Qe);const we={};_e&128&&(we.items=ie[7]),!q&&_e&32&&(q=!0,we.value=ie[5],Js(()=>q=!1)),Z.$set(we)},i(ie){X||(D(a.$$.fragment,ie),D(f.$$.fragment,ie),D(k.$$.fragment,ie),D(N.$$.fragment,ie),D(Z.$$.fragment,ie),X=!0)},o(ie){U(a.$$.fragment,ie),U(f.$$.fragment,ie),U(k.$$.fragment,ie),U(N.$$.fragment,ie),U(Z.$$.fragment,ie),X=!1},d(ie){ie&&g(e),fe(a),fe(f),fe(k),fe(N),fe(Z),ne=!1,Q()}}}function Die(n,e,t){var j,J,Z,q,X,ne;let i,s,r,l,o;const a=Is("jsoneditor:TransformWizard");let{json:c}=e,{queryOptions:u={}}=e,{onChange:f}=e;const h=["==","!=","<","<=",">",">="].map(Q=>({value:Q,label:Q})),d=[{value:"asc",label:"ascending"},{value:"desc",label:"descending"}];let p=(j=u==null?void 0:u.filter)!=null&&j.path?pa(u.filter.path):null,v=(J=u==null?void 0:u.filter)!=null&&J.relation?h.find(Q=>Q.value===u.filter.relation):null,y=((Z=u==null?void 0:u.filter)==null?void 0:Z.value)||"",b=(q=u==null?void 0:u.sort)!=null&&q.path?pa(u.sort.path):null,S=(X=u==null?void 0:u.sort)!=null&&X.direction?d.find(Q=>Q.value===u.sort.direction):null,I=(ne=u==null?void 0:u.projection)!=null&&ne.paths?u.projection.paths.map(pa):null;function T(Q){var re;En((re=u==null?void 0:u.filter)==null?void 0:re.path,Q)||(a("changeFilterPath",Q),t(10,u=hr(u,["filter","path"],Q,!0)),f(u))}function C(Q){var re;En((re=u==null?void 0:u.filter)==null?void 0:re.relation,Q)||(a("changeFilterRelation",Q),t(10,u=hr(u,["filter","relation"],Q,!0)),f(u))}function k(Q){var re;En((re=u==null?void 0:u.filter)==null?void 0:re.value,Q)||(a("changeFilterValue",Q),t(10,u=hr(u,["filter","value"],Q,!0)),f(u))}function R(Q){var re;En((re=u==null?void 0:u.sort)==null?void 0:re.path,Q)||(a("changeSortPath",Q),t(10,u=hr(u,["sort","path"],Q,!0)),f(u))}function O(Q){var re;En((re=u==null?void 0:u.sort)==null?void 0:re.direction,Q)||(a("changeSortDirection",Q),t(10,u=hr(u,["sort","direction"],Q,!0)),f(u))}function N(Q){var re;En((re=u==null?void 0:u.projection)==null?void 0:re.paths,Q)||(a("changeProjectionPaths",Q),t(10,u=hr(u,["projection","paths"],Q,!0)),f(u))}function F(Q){p=Q,t(0,p)}function W(Q){v=Q,t(1,v)}function z(){y=this.value,t(2,y)}function Y(Q){b=Q,t(3,b)}function H(Q){S=Q,t(4,S)}function K(Q){I=Q,t(5,I)}return n.$$set=Q=>{"json"in Q&&t(11,c=Q.json),"queryOptions"in Q&&t(10,u=Q.queryOptions),"onChange"in Q&&t(12,f=Q.onChange)},n.$$.update=()=>{var Q;n.$$.dirty&2048&&t(15,i=Array.isArray(c)),n.$$.dirty&34816&&t(14,s=i?_1(c):[]),n.$$.dirty&34816&&t(13,r=i?_1(c,!0):[]),n.$$.dirty&16384&&t(6,l=s.map(pa)),n.$$.dirty&8192&&t(7,o=r?r.map(pa):[]),n.$$.dirty&1088&&(Q=u==null?void 0:u.filter)!=null&&Q.path&&l.find(re=>{var be;return En(re.value,(be=u==null?void 0:u.filter)==null?void 0:be.path)}),n.$$.dirty&1&&T((p==null?void 0:p.value)||null),n.$$.dirty&2&&C((v==null?void 0:v.value)||null),n.$$.dirty&4&&k(y||null),n.$$.dirty&8&&R((b==null?void 0:b.value)||null),n.$$.dirty&16&&O((S==null?void 0:S.value)||null),n.$$.dirty&32&&N(I?I.map(re=>re.value):null)},[p,v,y,b,S,I,l,o,h,d,u,c,f,r,s,i,F,W,z,Y,H,K]}class Nie extends nt{constructor(e){super(),it(this,e,Die,Rie,an,{json:11,queryOptions:10,onChange:12})}}const Pie=Nie;function ik(n,e,t){const i=n.slice();return i[5]=e[t],i}function Mie(n){let e,t;return e=new Wt({props:{data:Qd}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p:Ke,i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function Bie(n){let e,t;return e=new Wt({props:{data:Kd}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p:Ke,i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function sk(n){let e,t,i,s,r=n[5].name+"",l,o,a,c,u,f;const h=[Bie,Mie],d=[];function p(y,b){return y[5].id===y[0]?0:1}t=p(n),i=d[t]=h[t](n);function v(){return n[4](n[5])}return{c(){e=E("button"),i.c(),s=P(),l=L(r),o=P(),this.h()},l(y){e=A(y,"BUTTON",{type:!0,class:!0,title:!0});var b=w(e);i.l(b),s=M(b),l=V(b,r),o=M(b),b.forEach(g),this.h()},h(){_(e,"type","button"),_(e,"class","jse-query-language svelte-ifjr8a"),_(e,"title",a=`Select ${n[5].name} as query language`),xe(e,"selected",n[5].id===n[0])},m(y,b){B(y,e,b),d[t].m(e,null),m(e,s),m(e,l),m(e,o),c=!0,u||(f=se(e,"click",v),u=!0)},p(y,b){n=y;let S=t;t=p(n),t===S?d[t].p(n,b):(Le(),U(d[S],1,1,()=>{d[S]=null}),Ve(),i=d[t],i?i.p(n,b):(i=d[t]=h[t](n),i.c()),D(i,1),i.m(e,s)),(!c||b&2)&&r!==(r=n[5].name+"")&&Ce(l,r),(!c||b&2&&a!==(a=`Select ${n[5].name} as query language`))&&_(e,"title",a),(!c||b&3)&&xe(e,"selected",n[5].id===n[0])},i(y){c||(D(i),c=!0)},o(y){U(i),c=!1},d(y){y&&g(e),d[t].d(),u=!1,f()}}}function Lie(n){let e,t,i,s=n[1],r=[];for(let o=0;o<s.length;o+=1)r[o]=sk(ik(n,s,o));const l=o=>U(r[o],1,1,()=>{r[o]=null});return{c(){e=E("div"),t=E("div");for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){e=A(o,"DIV",{class:!0});var a=w(e);t=A(a,"DIV",{class:!0});var c=w(t);for(let u=0;u<r.length;u+=1)r[u].l(c);c.forEach(g),a.forEach(g),this.h()},h(){_(t,"class","jse-select-query-language-container svelte-ifjr8a"),_(e,"class","jse-select-query-language svelte-ifjr8a")},m(o,a){B(o,e,a),m(e,t);for(let c=0;c<r.length;c+=1)r[c].m(t,null);i=!0},p(o,[a]){if(a&7){s=o[1];let c;for(c=0;c<s.length;c+=1){const u=ik(o,s,c);r[c]?(r[c].p(u,a),D(r[c],1)):(r[c]=sk(u),r[c].c(),D(r[c],1),r[c].m(t,null))}for(Le(),c=s.length;c<r.length;c+=1)l(c);Ve()}},i(o){if(!i){for(let a=0;a<s.length;a+=1)D(r[a]);i=!0}},o(o){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)U(r[a]);i=!1},d(o){o&&g(e),Ft(r,o)}}}function Vie(n,e,t){let{queryLanguages:i}=e,{queryLanguageId:s}=e,{onChangeQueryLanguage:r}=e;function l(a){t(0,s=a),r(a)}const o=a=>l(a.id);return n.$$set=a=>{"queryLanguages"in a&&t(1,i=a.queryLanguages),"queryLanguageId"in a&&t(0,s=a.queryLanguageId),"onChangeQueryLanguage"in a&&t(3,r=a.onChangeQueryLanguage)},[s,i,l,r,o]}class Uie extends nt{constructor(e){super(),it(this,e,Vie,Lie,Ct,{queryLanguages:1,queryLanguageId:0,onChangeQueryLanguage:3})}}const Wie=Uie;function rk(n){let e,t,i,s,r;return t=new Wt({props:{data:Jz}}),{c(){e=E("button"),ce(t.$$.fragment),this.h()},l(l){e=A(l,"BUTTON",{type:!0,class:!0,title:!0});var o=w(e);ge(t.$$.fragment,o),o.forEach(g),this.h()},h(){_(e,"type","button"),_(e,"class","jse-config svelte-1djqugc"),_(e,"title","Select a query language")},m(l,o){B(l,e,o),ue(t,e,null),n[6](e),i=!0,s||(r=se(e,"click",n[3]),s=!0)},p:Ke,i(l){i||(D(t.$$.fragment,l),i=!0)},o(l){U(t.$$.fragment,l),i=!1},d(l){l&&g(e),fe(t),n[6](null),s=!1,r()}}}function Fie(n){let e,t,i,s,r,l,o,a,c,u,f=n[0].length>1&&rk(n);return o=new Wt({props:{data:bf}}),{c(){e=E("div"),t=E("div"),i=L("Transform"),s=P(),f&&f.c(),r=P(),l=E("button"),ce(o.$$.fragment),this.h()},l(h){e=A(h,"DIV",{class:!0});var d=w(e);t=A(d,"DIV",{class:!0});var p=w(t);i=V(p,"Transform"),p.forEach(g),s=M(d),f&&f.l(d),r=M(d),l=A(d,"BUTTON",{type:!0,class:!0});var v=w(l);ge(o.$$.fragment,v),v.forEach(g),d.forEach(g),this.h()},h(){_(t,"class","jse-title svelte-1djqugc"),_(l,"type","button"),_(l,"class","jse-close svelte-1djqugc"),_(e,"class","jse-header svelte-1djqugc")},m(h,d){B(h,e,d),m(e,t),m(t,i),m(e,s),f&&f.m(e,null),m(e,r),m(e,l),ue(o,l,null),a=!0,c||(u=se(l,"click",n[2]),c=!0)},p(h,[d]){h[0].length>1?f?(f.p(h,d),d&1&&D(f,1)):(f=rk(h),f.c(),D(f,1),f.m(e,r)):f&&(Le(),U(f,1,1,()=>{f=null}),Ve())},i(h){a||(D(f),D(o.$$.fragment,h),a=!0)},o(h){U(f),U(o.$$.fragment,h),a=!1},d(h){h&&g(e),f&&f.d(),fe(o),c=!1,u()}}}function jie(n,e,t){let{queryLanguages:i}=e,{queryLanguageId:s}=e,{onChangeQueryLanguage:r}=e,l,o;const{close:a}=Bn("simple-modal"),{openAbsolutePopup:c,closeAbsolutePopup:u}=Bn("absolute-popup");function f(){o=c(Wie,{queryLanguages:i,queryLanguageId:s,onChangeQueryLanguage:p=>{u(o),r(p)}},{position:"bottom",offsetTop:-2,offsetLeft:0,anchor:l,closeOnOuterClick:!0})}function h(d){Vt[d?"unshift":"push"](()=>{l=d,t(1,l)})}return n.$$set=d=>{"queryLanguages"in d&&t(0,i=d.queryLanguages),"queryLanguageId"in d&&t(4,s=d.queryLanguageId),"onChangeQueryLanguage"in d&&t(5,r=d.onChangeQueryLanguage)},[i,l,a,f,s,r,h]}class Hie extends nt{constructor(e){super(),it(this,e,jie,Fie,an,{queryLanguages:0,queryLanguageId:4,onChangeQueryLanguage:5})}}const qie=Hie;function lk(n){let e,t,i,s,r;const l=[Gie,zie],o=[];function a(c,u){return u[0]&1024&&(e=null),e==null&&(e=!!Array.isArray(c[10])),e?0:1}return t=a(n,[-1,-1]),i=o[t]=l[t](n),{c(){i.c(),s=et()},l(c){i.l(c),s=et()},m(c,u){o[t].m(c,u),B(c,s,u),r=!0},p(c,u){let f=t;t=a(c,u),t===f?o[t].p(c,u):(Le(),U(o[f],1,1,()=>{o[f]=null}),Ve(),i=o[t],i?i.p(c,u):(i=o[t]=l[t](c),i.c()),D(i,1),i.m(s.parentNode,s))},i(c){r||(D(i),r=!0)},o(c){U(i),r=!1},d(c){o[t].d(c),c&&g(s)}}}function zie(n){let e;return{c(){e=L("(Only available for arrays, not for objects)")},l(t){e=V(t,"(Only available for arrays, not for objects)")},m(t,i){B(t,e,i)},p:Ke,i:Ke,o:Ke,d(t){t&&g(e)}}}function Gie(n){let e,t;return e=new Pie({props:{queryOptions:n[8],json:n[10],onChange:n[17]}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s[0]&256&&(r.queryOptions=i[8]),s[0]&1024&&(r.json=i[10]),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function ok(n){let e,t;return e=new jb({props:{externalContent:n[15],readOnly:!0,mainMenuBar:!1,navigationBar:!1,escapeControlCharacters:n[2],escapeUnicodeCharacters:n[3],parser:n[4],onRenderValue:n[6],onError:console.error,onChange:Hn,onFocus:Hn,onBlur:Hn,onSortModal:Hn,onTransformModal:Hn,onClassName:n[7]}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s[0]&32768&&(r.externalContent=i[15]),s[0]&4&&(r.escapeControlCharacters=i[2]),s[0]&8&&(r.escapeUnicodeCharacters=i[3]),s[0]&16&&(r.parser=i[4]),s[0]&64&&(r.onRenderValue=i[6]),s[0]&128&&(r.onClassName=i[7]),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function Kie(n){let e,t=n[13].toString()+"",i;return{c(){e=E("div"),i=L(t),this.h()},l(s){e=A(s,"DIV",{class:!0});var r=w(e);i=V(r,t),r.forEach(g),this.h()},h(){_(e,"class","jse-preview jse-error svelte-mr4kda")},m(s,r){B(s,e,r),m(e,i)},p(s,r){r[0]&8192&&t!==(t=s[13].toString()+"")&&Ce(i,t)},i:Ke,o:Ke,d(s){s&&g(e)}}}function Qie(n){let e,t;return e=new jb({props:{externalContent:n[14],readOnly:!0,mainMenuBar:!1,navigationBar:!1,escapeControlCharacters:n[2],escapeUnicodeCharacters:n[3],parser:n[4],onRenderValue:n[6],onError:console.error,onChange:Hn,onFocus:Hn,onBlur:Hn,onSortModal:Hn,onTransformModal:Hn,onClassName:n[7]}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s[0]&16384&&(r.externalContent=i[14]),s[0]&4&&(r.escapeControlCharacters=i[2]),s[0]&8&&(r.escapeUnicodeCharacters=i[3]),s[0]&16&&(r.parser=i[4]),s[0]&64&&(r.onRenderValue=i[6]),s[0]&128&&(r.onClassName=i[7]),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function Xie(n){let e,t,i,s,r,l,o,a,c,u,f=n[16](n[0]).description+"",h,d,p,v,y,b,S,I,T,C,k,R,O,N,F,W,z,Y,H,K,j,J,Z,q,X,ne,Q,re,be,le,he,Ie,G,ve,je,$,Oe,ie,_e,Ee,He,We,Qe,we,Me;e=new qie({props:{queryLanguages:n[5],queryLanguageId:n[0],onChangeQueryLanguage:n[22]}}),R=new Wt({props:{data:n[11]?Mr:Rl}});let de=n[11]&&lk(n);Q=new Wt({props:{data:n[12]?Mr:Rl}});let Ae=n[12]&&ok(n);const Re=[Qie,Kie],Ne=[];function Ge(pe,Fe){return pe[13]?1:0}return $=Ge(n),Oe=Ne[$]=Re[$](n),{c(){ce(e.$$.fragment),t=P(),i=E("div"),s=E("div"),r=E("div"),l=E("div"),o=E("div"),a=L("Language"),c=P(),u=E("div"),h=P(),d=E("div"),p=E("div"),v=L("Path"),y=P(),b=E("input"),I=P(),T=E("div"),C=E("div"),k=E("button"),ce(R.$$.fragment),O=L(`
                Wizard`),N=P(),de&&de.c(),F=P(),W=E("div"),z=E("div"),Y=L("Query"),H=P(),K=E("textarea"),j=P(),J=E("div"),Z=E("div"),q=E("div"),X=E("div"),ne=E("button"),ce(Q.$$.fragment),re=L(`
                  Original`),be=P(),Ae&&Ae.c(),le=P(),he=E("div"),Ie=E("div"),G=E("div"),ve=L("Preview"),je=P(),Oe.c(),ie=P(),_e=E("div"),Ee=E("button"),He=L("Transform"),this.h()},l(pe){ge(e.$$.fragment,pe),t=M(pe),i=A(pe,"DIV",{class:!0});var Fe=w(i);s=A(Fe,"DIV",{class:!0});var ae=w(s);r=A(ae,"DIV",{class:!0});var ke=w(r);l=A(ke,"DIV",{class:!0});var oe=w(l);o=A(oe,"DIV",{class:!0});var at=w(o);a=V(at,"Language"),at.forEach(g),oe.forEach(g),c=M(ke),u=A(ke,"DIV",{class:!0});var qe=w(u);qe.forEach(g),h=M(ke),d=A(ke,"DIV",{class:!0});var me=w(d);p=A(me,"DIV",{class:!0});var ot=w(p);v=V(ot,"Path"),ot.forEach(g),me.forEach(g),y=M(ke),b=A(ke,"INPUT",{class:!0,type:!0,title:!0}),I=M(ke),T=A(ke,"DIV",{class:!0});var Se=w(T);C=A(Se,"DIV",{class:!0});var ze=w(C);k=A(ze,"BUTTON",{type:!0,class:!0});var ye=w(k);ge(R.$$.fragment,ye),O=V(ye,`
                Wizard`),ye.forEach(g),ze.forEach(g),Se.forEach(g),N=M(ke),de&&de.l(ke),F=M(ke),W=A(ke,"DIV",{class:!0});var ut=w(W);z=A(ut,"DIV",{class:!0});var Bt=w(z);Y=V(Bt,"Query"),Bt.forEach(g),ut.forEach(g),H=M(ke),K=A(ke,"TEXTAREA",{class:!0,spellcheck:!0}),w(K).forEach(g),ke.forEach(g),j=M(ae),J=A(ae,"DIV",{class:!0});var gt=w(J);Z=A(gt,"DIV",{class:!0});var Ot=w(Z);q=A(Ot,"DIV",{class:!0});var en=w(q);X=A(en,"DIV",{class:!0});var gn=w(X);ne=A(gn,"BUTTON",{type:!0,class:!0});var Jt=w(ne);ge(Q.$$.fragment,Jt),re=V(Jt,`
                  Original`),Jt.forEach(g),gn.forEach(g),en.forEach(g),be=M(Ot),Ae&&Ae.l(Ot),Ot.forEach(g),le=M(gt),he=A(gt,"DIV",{class:!0});var ft=w(he);Ie=A(ft,"DIV",{class:!0});var cn=w(Ie);G=A(cn,"DIV",{class:!0});var tn=w(G);ve=V(tn,"Preview"),tn.forEach(g),cn.forEach(g),je=M(ft),Oe.l(ft),ft.forEach(g),gt.forEach(g),ae.forEach(g),ie=M(Fe),_e=A(Fe,"DIV",{class:!0});var wn=w(_e);Ee=A(wn,"BUTTON",{type:!0,class:!0});var vn=w(Ee);He=V(vn,"Transform"),vn.forEach(g),wn.forEach(g),Fe.forEach(g),this.h()},h(){_(o,"class","jse-label-inner svelte-mr4kda"),_(l,"class","jse-label svelte-mr4kda"),_(u,"class","jse-description svelte-mr4kda"),_(p,"class","jse-label-inner svelte-mr4kda"),_(d,"class","jse-label svelte-mr4kda"),_(b,"class","jse-path svelte-mr4kda"),_(b,"type","text"),b.readOnly=!0,_(b,"title","Selected path"),b.value=S=ii(n[1])?"(whole document)":gl(n[1]),_(k,"type","button"),_(k,"class","svelte-mr4kda"),_(C,"class","jse-label-inner svelte-mr4kda"),_(T,"class","jse-label svelte-mr4kda"),_(z,"class","jse-label-inner svelte-mr4kda"),_(W,"class","jse-label svelte-mr4kda"),_(K,"class","jse-query svelte-mr4kda"),_(K,"spellcheck","false"),K.value=n[9],_(r,"class","jse-query-contents svelte-mr4kda"),_(ne,"type","button"),_(ne,"class","svelte-mr4kda"),_(X,"class","jse-label-inner svelte-mr4kda"),_(q,"class","jse-label svelte-mr4kda"),_(Z,"class","jse-original-data svelte-mr4kda"),xe(Z,"jse-hide",!n[12]),_(G,"class","jse-label-inner svelte-mr4kda"),_(Ie,"class","jse-label svelte-mr4kda"),_(he,"class","jse-preview-data svelte-mr4kda"),_(J,"class","jse-data-contents svelte-mr4kda"),xe(J,"jse-hide-original-data",!n[12]),_(s,"class","jse-main-contents svelte-mr4kda"),_(Ee,"type","button"),_(Ee,"class","jse-primary svelte-mr4kda"),Ee.disabled=We=!!n[13],_(_e,"class","jse-actions svelte-mr4kda"),_(i,"class","jse-contents svelte-mr4kda")},m(pe,Fe){ue(e,pe,Fe),B(pe,t,Fe),B(pe,i,Fe),m(i,s),m(s,r),m(r,l),m(l,o),m(o,a),m(r,c),m(r,u),u.innerHTML=f,m(r,h),m(r,d),m(d,p),m(p,v),m(r,y),m(r,b),m(r,I),m(r,T),m(T,C),m(C,k),ue(R,k,null),m(k,O),m(r,N),de&&de.m(r,null),m(r,F),m(r,W),m(W,z),m(z,Y),m(r,H),m(r,K),m(s,j),m(s,J),m(J,Z),m(Z,q),m(q,X),m(X,ne),ue(Q,ne,null),m(ne,re),m(Z,be),Ae&&Ae.m(Z,null),m(J,le),m(J,he),m(he,Ie),m(Ie,G),m(G,ve),m(he,je),Ne[$].m(he,null),m(i,ie),m(i,_e),m(_e,Ee),m(Ee,He),Qe=!0,we||(Me=[se(k,"click",n[20]),se(K,"input",n[18]),se(ne,"click",n[21]),se(Ee,"click",n[19]),oc(Jie.call(null,Ee))],we=!0)},p(pe,Fe){const ae={};Fe[0]&32&&(ae.queryLanguages=pe[5]),Fe[0]&1&&(ae.queryLanguageId=pe[0]),e.$set(ae),(!Qe||Fe[0]&1)&&f!==(f=pe[16](pe[0]).description+"")&&(u.innerHTML=f),(!Qe||Fe[0]&2&&S!==(S=ii(pe[1])?"(whole document)":gl(pe[1]))&&b.value!==S)&&(b.value=S);const ke={};Fe[0]&2048&&(ke.data=pe[11]?Mr:Rl),R.$set(ke),pe[11]?de?(de.p(pe,Fe),Fe[0]&2048&&D(de,1)):(de=lk(pe),de.c(),D(de,1),de.m(r,F)):de&&(Le(),U(de,1,1,()=>{de=null}),Ve()),(!Qe||Fe[0]&512)&&(K.value=pe[9]);const oe={};Fe[0]&4096&&(oe.data=pe[12]?Mr:Rl),Q.$set(oe),pe[12]?Ae?(Ae.p(pe,Fe),Fe[0]&4096&&D(Ae,1)):(Ae=ok(pe),Ae.c(),D(Ae,1),Ae.m(Z,null)):Ae&&(Le(),U(Ae,1,1,()=>{Ae=null}),Ve()),(!Qe||Fe[0]&4096)&&xe(Z,"jse-hide",!pe[12]);let at=$;$=Ge(pe),$===at?Ne[$].p(pe,Fe):(Le(),U(Ne[at],1,1,()=>{Ne[at]=null}),Ve(),Oe=Ne[$],Oe?Oe.p(pe,Fe):(Oe=Ne[$]=Re[$](pe),Oe.c()),D(Oe,1),Oe.m(he,null)),(!Qe||Fe[0]&4096)&&xe(J,"jse-hide-original-data",!pe[12]),(!Qe||Fe[0]&8192&&We!==(We=!!pe[13]))&&(Ee.disabled=We)},i(pe){Qe||(D(e.$$.fragment,pe),D(R.$$.fragment,pe),D(de),D(Q.$$.fragment,pe),D(Ae),D(Oe),Qe=!0)},o(pe){U(e.$$.fragment,pe),U(R.$$.fragment,pe),U(de),U(Q.$$.fragment,pe),U(Ae),U(Oe),Qe=!1},d(pe){fe(e,pe),pe&&g(t),pe&&g(i),fe(R),de&&de.d(),fe(Q),Ae&&Ae.d(),Ne[$].d(),we=!1,on(Me)}}}function Yie(n){let e,t,i;return t=new $O({props:{$$slots:{default:[Xie]},$$scope:{ctx:n}}}),{c(){e=E("div"),ce(t.$$.fragment),this.h()},l(s){e=A(s,"DIV",{class:!0});var r=w(e);ge(t.$$.fragment,r),r.forEach(g),this.h()},h(){_(e,"class","jse-modal jse-transform svelte-mr4kda")},m(s,r){B(s,e,r),ue(t,e,null),i=!0},p(s,r){const l={};r[0]&65535|r[1]&16&&(l.$$scope={dirty:r,ctx:s}),t.$set(l)},i(s){i||(D(t.$$.fragment,s),i=!0)},o(s){U(t.$$.fragment,s),i=!1},d(s){s&&g(e),fe(t)}}}function Jie(n){n.focus()}function Zie(n,e,t){let i,s;const r=Is("jsoneditor:TransformModal");let{id:l="transform-modal-"+tu()}=e,{json:o}=e,{selectedPath:a=[]}=e,{escapeControlCharacters:c}=e,{escapeUnicodeCharacters:u}=e,{parser:f}=e,{queryLanguages:h}=e,{queryLanguageId:d}=e,{onChangeQueryLanguage:p}=e,{onRenderValue:v}=e,{onClassName:y}=e,{onTransform:b}=e;const{close:S}=Bn("simple-modal"),I=`${l}:${ht(a)}`,T=fr[I]||{};let C=fr.showWizard!==!1,k=fr.showOriginal!==!1,R=T.queryOptions||{},O=d===T.queryLanguageId&&T.query?T.query:z(d).createQuery(o,T.queryOptions||{}),N=T.isManual||!1,F,W={text:""};function z(ne){return h.find(Q=>Q.id===ne)||h[0]}function Y(ne){t(8,R=ne),t(9,O=z(d).createQuery(o,ne)),t(28,N=!1),r("updateQueryByWizard",{queryOptions:R,query:O,isManual:N})}function H(ne){t(9,O=ne.target.value),t(28,N=!0),r("handleChangeQuery",{query:O,isManual:N})}function K(ne,Q){try{r("previewTransform",{query:Q});const re=z(d).executeQuery(ne,Q);t(14,W={json:re}),t(13,F=void 0)}catch(re){t(14,W={text:""}),t(13,F=re)}}const j=Wm(K,X4);function J(){try{r("handleTransform",{query:O});const ne=z(d).executeQuery(i,O);b([{op:"replace",path:ht(a),value:ne}]),S()}catch(ne){console.error(ne),t(14,W={text:""}),t(13,F=ne.toString())}}function Z(){t(11,C=!C),t(27,fr.showWizard=C,fr)}function q(){t(12,k=!k),t(27,fr.showOriginal=k,fr)}function X(ne){r("handleChangeQueryLanguage",ne),t(0,d=ne),p(ne);const Q=z(d);t(9,O=Q.createQuery(o,R)),t(28,N=!1)}return n.$$set=ne=>{"id"in ne&&t(23,l=ne.id),"json"in ne&&t(24,o=ne.json),"selectedPath"in ne&&t(1,a=ne.selectedPath),"escapeControlCharacters"in ne&&t(2,c=ne.escapeControlCharacters),"escapeUnicodeCharacters"in ne&&t(3,u=ne.escapeUnicodeCharacters),"parser"in ne&&t(4,f=ne.parser),"queryLanguages"in ne&&t(5,h=ne.queryLanguages),"queryLanguageId"in ne&&t(0,d=ne.queryLanguageId),"onChangeQueryLanguage"in ne&&t(25,p=ne.onChangeQueryLanguage),"onRenderValue"in ne&&t(6,v=ne.onRenderValue),"onClassName"in ne&&t(7,y=ne.onClassName),"onTransform"in ne&&t(26,b=ne.onTransform)},n.$$.update=()=>{n.$$.dirty[0]&16777218&&t(10,i=At(o,a)),n.$$.dirty[0]&1024&&t(15,s={json:i}),n.$$.dirty[0]&1536&&j(i,O),n.$$.dirty[0]&402653953&&(t(27,fr[I]={queryOptions:R,query:O,queryLanguageId:d,isManual:N},fr),r("store state in memory",I,fr[I]))},[d,a,c,u,f,h,v,y,R,O,i,C,k,F,W,s,z,Y,H,J,Z,q,X,l,o,p,b,fr,N]}class xie extends nt{constructor(e){super(),it(this,e,Zie,Yie,an,{id:23,json:24,selectedPath:1,escapeControlCharacters:2,escapeUnicodeCharacters:3,parser:4,queryLanguages:5,queryLanguageId:0,onChangeQueryLanguage:25,onRenderValue:6,onClassName:7,onTransform:26},null,[-1,-1])}}const $ie=xie,Al={};function ak(n){let e,t,i,s,r,l,o,a;function c(f){n[13](f)}let u={showIndicator:!0,items:n[4]};return n[1]!==void 0&&(u.value=n[1]),l=new go({props:u}),Vt.push(()=>Us(l,"value",c)),{c(){e=E("tr"),t=E("th"),i=L("Property"),s=P(),r=E("td"),ce(l.$$.fragment),this.h()},l(f){e=A(f,"TR",{});var h=w(e);t=A(h,"TH",{class:!0});var d=w(t);i=V(d,"Property"),d.forEach(g),s=M(h),r=A(h,"TD",{class:!0});var p=w(r);ge(l.$$.fragment,p),p.forEach(g),h.forEach(g),this.h()},h(){_(t,"class","svelte-j8vz8h"),_(r,"class","svelte-j8vz8h")},m(f,h){B(f,e,h),m(e,t),m(t,i),m(e,s),m(e,r),ue(l,r,null),a=!0},p(f,h){const d={};h&16&&(d.items=f[4]),!o&&h&2&&(o=!0,d.value=f[1],Js(()=>o=!1)),l.$set(d)},i(f){a||(D(l.$$.fragment,f),a=!0)},o(f){U(l.$$.fragment,f),a=!1},d(f){f&&g(e),fe(l)}}}function ck(n){let e,t;return{c(){e=E("div"),t=L(n[5]),this.h()},l(i){e=A(i,"DIV",{class:!0});var s=w(e);t=V(s,n[5]),s.forEach(g),this.h()},h(){_(e,"class","jse-error svelte-j8vz8h")},m(i,s){B(i,e,s),m(e,t)},p(i,s){s&32&&Ce(t,i[5])},d(i){i&&g(e)}}}function ese(n){let e,t,i,s,r,l,o,a,c,u,f,h,d,p,v,y,b,S,I,T,C,k,R,O,N,F,W,z,Y,H,K,j,J,Z,q,X,ne;t=new v5({props:{title:n[3]?"Sort array items":"Sort object keys"}});let Q=n[3]&&(n[4].length>1||n[1]===void 0)&&ak(n);function re(he){n[14](he)}let be={showIndicator:!0,items:n[6],isClearable:!1};n[2]!==void 0&&(be.value=n[2]),F=new go({props:be}),Vt.push(()=>Us(F,"value",re));let le=n[5]&&ck(n);return{c(){e=E("div"),ce(t.$$.fragment),i=P(),s=E("div"),r=E("table"),l=E("colgroup"),o=E("col"),a=P(),c=E("col"),u=P(),f=E("tbody"),h=E("tr"),d=E("th"),p=L("Path"),v=P(),y=E("td"),b=E("input"),I=P(),Q&&Q.c(),T=P(),C=E("tr"),k=E("th"),R=L("Direction"),O=P(),N=E("td"),ce(F.$$.fragment),z=P(),Y=E("div"),le&&le.c(),H=P(),K=E("div"),j=E("button"),J=L("Sort"),this.h()},l(he){e=A(he,"DIV",{class:!0});var Ie=w(e);ge(t.$$.fragment,Ie),i=M(Ie),s=A(Ie,"DIV",{class:!0});var G=w(s);r=A(G,"TABLE",{class:!0});var ve=w(r);l=A(ve,"COLGROUP",{});var je=w(l);o=A(je,"COL",{width:!0}),a=M(je),c=A(je,"COL",{width:!0}),je.forEach(g),u=M(ve),f=A(ve,"TBODY",{});var $=w(f);h=A($,"TR",{});var Oe=w(h);d=A(Oe,"TH",{class:!0});var ie=w(d);p=V(ie,"Path"),ie.forEach(g),v=M(Oe),y=A(Oe,"TD",{class:!0});var _e=w(y);b=A(_e,"INPUT",{class:!0,type:!0,title:!0}),_e.forEach(g),Oe.forEach(g),I=M($),Q&&Q.l($),T=M($),C=A($,"TR",{});var Ee=w(C);k=A(Ee,"TH",{class:!0});var He=w(k);R=V(He,"Direction"),He.forEach(g),O=M(Ee),N=A(Ee,"TD",{class:!0});var We=w(N);ge(F.$$.fragment,We),We.forEach(g),Ee.forEach(g),$.forEach(g),ve.forEach(g),z=M(G),Y=A(G,"DIV",{class:!0});var Qe=w(Y);le&&le.l(Qe),Qe.forEach(g),H=M(G),K=A(G,"DIV",{class:!0});var we=w(K);j=A(we,"BUTTON",{type:!0,class:!0});var Me=w(j);J=V(Me,"Sort"),Me.forEach(g),we.forEach(g),G.forEach(g),Ie.forEach(g),this.h()},h(){_(o,"width","25%"),_(c,"width","75%"),_(d,"class","svelte-j8vz8h"),_(b,"class","jse-path svelte-j8vz8h"),_(b,"type","text"),b.readOnly=!0,_(b,"title","Selected path"),b.value=S=ii(n[0])?"(whole document)":gl(n[0]),_(y,"class","svelte-j8vz8h"),_(k,"class","svelte-j8vz8h"),_(N,"class","svelte-j8vz8h"),_(r,"class","svelte-j8vz8h"),_(Y,"class","jse-space svelte-j8vz8h"),_(j,"type","button"),_(j,"class","jse-primary svelte-j8vz8h"),j.disabled=Z=n[3]?!n[1]:!1,_(K,"class","jse-actions svelte-j8vz8h"),_(s,"class","jse-contents svelte-j8vz8h"),_(e,"class","jse-modal jse-sort svelte-j8vz8h")},m(he,Ie){B(he,e,Ie),ue(t,e,null),m(e,i),m(e,s),m(s,r),m(r,l),m(l,o),m(l,a),m(l,c),m(r,u),m(r,f),m(f,h),m(h,d),m(d,p),m(h,v),m(h,y),m(y,b),m(f,I),Q&&Q.m(f,null),m(f,T),m(f,C),m(C,k),m(k,R),m(C,O),m(C,N),ue(F,N,null),m(s,z),m(s,Y),le&&le.m(Y,null),m(s,H),m(s,K),m(K,j),m(j,J),q=!0,X||(ne=[se(j,"click",n[7]),oc(tse.call(null,j))],X=!0)},p(he,[Ie]){const G={};Ie&8&&(G.title=he[3]?"Sort array items":"Sort object keys"),t.$set(G),(!q||Ie&1&&S!==(S=ii(he[0])?"(whole document)":gl(he[0]))&&b.value!==S)&&(b.value=S),he[3]&&(he[4].length>1||he[1]===void 0)?Q?(Q.p(he,Ie),Ie&26&&D(Q,1)):(Q=ak(he),Q.c(),D(Q,1),Q.m(f,T)):Q&&(Le(),U(Q,1,1,()=>{Q=null}),Ve());const ve={};!W&&Ie&4&&(W=!0,ve.value=he[2],Js(()=>W=!1)),F.$set(ve),he[5]?le?le.p(he,Ie):(le=ck(he),le.c(),le.m(Y,null)):le&&(le.d(1),le=null),(!q||Ie&10&&Z!==(Z=he[3]?!he[1]:!1))&&(j.disabled=Z)},i(he){q||(D(t.$$.fragment,he),D(Q),D(F.$$.fragment,he),q=!0)},o(he){U(t.$$.fragment,he),U(Q),U(F.$$.fragment,he),q=!1},d(he){he&&g(e),fe(t),Q&&Q.d(),fe(F),le&&le.d(),X=!1,on(ne)}}}function tse(n){n.focus()}function nse(n,e,t){let i,s,r;const l=Is("jsoneditor:SortModal");let{id:o}=e,{json:a}=e,{selectedPath:c}=e,{onSort:u}=e;const{close:f}=Bn("simple-modal"),h=`${o}:${ht(c)}`,d=At(a,c),p={value:1,label:"ascending"},y=[p,{value:-1,label:"descending"}];let b=Al[h]&&Al[h].selectedProperty||void 0,S=Al[h]&&Al[h].selectedDirection||p,I;function T(){try{if(t(5,I=void 0),i){if(!b)return;const R=b.value,O=S.value,N=jte(a,c,R,O);u(N)}else if(ji(d)){const R=S.value,O=Fte(a,c,R);u(O)}else console.error("Cannot sort: no array or object");f()}catch(R){t(5,I=R.toString())}}function C(R){b=R,t(1,b),t(4,r),t(12,s),t(3,i)}function k(R){S=R,t(2,S)}return n.$$set=R=>{"id"in R&&t(8,o=R.id),"json"in R&&t(9,a=R.json),"selectedPath"in R&&t(0,c=R.selectedPath),"onSort"in R&&t(10,u=R.onSort)},n.$$.update=()=>{n.$$.dirty&8&&t(12,s=i?_1(d):void 0),n.$$.dirty&4096&&t(4,r=s?s.map(pa):void 0),n.$$.dirty&18&&b===void 0&&r&&r.length===1&&t(1,b=r[0]),n.$$.dirty&2054&&(t(11,Al[h]={selectedProperty:b,selectedDirection:S},Al),l("store state in memory",h,Al[h]))},t(3,i=Array.isArray(d)),[c,b,S,i,r,I,y,T,o,a,u,Al,s,C,k]}class ise extends nt{constructor(e){super(),it(this,e,nse,ese,an,{id:8,json:9,selectedPath:0,onSort:10})}}const sse=ise;function rse(n,e,t){const i=Bn("simple-modal"),s=i.open,r=i.close;return[s,r]}class lse extends nt{constructor(e){super(),it(this,e,rse,null,an,{open:0,close:1})}get open(){return this.$$.ctx[0]}get close(){return this.$$.ctx[1]}}const ose=lse;function ase(n){let e,t,i={readOnly:n[2],indentation:n[3],externalContent:n[0],mainMenuBar:n[5],navigationBar:n[6],escapeControlCharacters:n[8],escapeUnicodeCharacters:n[9],parser:n[10],validator:n[11],validationParser:n[12],pathParser:n[13],onError:n[16],onChange:n[24],onRequestRepair:n[25],onRenderValue:n[14],onClassName:n[15],onFocus:n[27],onBlur:n[28],onRenderMenu:n[23],onSortModal:n[30],onTransformModal:n[29]};return e=new jb({props:i}),n[57](e),{c(){ce(e.$$.fragment)},l(s){ge(e.$$.fragment,s)},m(s,r){ue(e,s,r),t=!0},p(s,r){const l={};r[0]&4&&(l.readOnly=s[2]),r[0]&8&&(l.indentation=s[3]),r[0]&1&&(l.externalContent=s[0]),r[0]&32&&(l.mainMenuBar=s[5]),r[0]&64&&(l.navigationBar=s[6]),r[0]&256&&(l.escapeControlCharacters=s[8]),r[0]&512&&(l.escapeUnicodeCharacters=s[9]),r[0]&1024&&(l.parser=s[10]),r[0]&2048&&(l.validator=s[11]),r[0]&4096&&(l.validationParser=s[12]),r[0]&8192&&(l.pathParser=s[13]),r[0]&65536&&(l.onError=s[16]),r[0]&16384&&(l.onRenderValue=s[14]),r[0]&32768&&(l.onClassName=s[15]),r[0]&8388608&&(l.onRenderMenu=s[23]),e.$set(l)},i(s){t||(D(e.$$.fragment,s),t=!0)},o(s){U(e.$$.fragment,s),t=!1},d(s){n[57](null),fe(e,s)}}}function cse(n){let e,t,i={externalContent:n[0],readOnly:n[2],indentation:n[3],tabSize:n[4],mainMenuBar:n[5],statusBar:n[7],escapeUnicodeCharacters:n[9],parser:n[10],validator:n[11],validationParser:n[12],onChange:n[24],onSwitchToTreeMode:n[26],onError:n[16],onFocus:n[27],onBlur:n[28],onRenderMenu:n[23],onSortModal:n[30],onTransformModal:n[29]};return e=new r$({props:i}),n[56](e),{c(){ce(e.$$.fragment)},l(s){ge(e.$$.fragment,s)},m(s,r){ue(e,s,r),t=!0},p(s,r){const l={};r[0]&1&&(l.externalContent=s[0]),r[0]&4&&(l.readOnly=s[2]),r[0]&8&&(l.indentation=s[3]),r[0]&16&&(l.tabSize=s[4]),r[0]&32&&(l.mainMenuBar=s[5]),r[0]&128&&(l.statusBar=s[7]),r[0]&512&&(l.escapeUnicodeCharacters=s[9]),r[0]&1024&&(l.parser=s[10]),r[0]&2048&&(l.validator=s[11]),r[0]&4096&&(l.validationParser=s[12]),r[0]&65536&&(l.onError=s[16]),r[0]&8388608&&(l.onRenderMenu=s[23]),e.$set(l)},i(s){t||(D(e.$$.fragment,s),t=!0)},o(s){U(e.$$.fragment,s),t=!1},d(s){n[56](null),fe(e,s)}}}function uk(n){let e,t,i,s;const r=[cse,ase],l=[];function o(a,c){return a[1]===Qs.text||a[1]==="code"?0:1}return e=o(n),t=l[e]=r[e](n),{c(){t.c(),i=et()},l(a){t.l(a),i=et()},m(a,c){l[e].m(a,c),B(a,i,c),s=!0},p(a,c){let u=e;e=o(a),e===u?l[e].p(a,c):(Le(),U(l[u],1,1,()=>{l[u]=null}),Ve(),t=l[e],t?t.p(a,c):(t=l[e]=r[e](a),t.c()),D(t,1),t.m(i.parentNode,i))},i(a){s||(D(t),s=!0)},o(a){U(t),s=!1},d(a){l[e].d(a),a&&g(i)}}}function use(n){let e,t=n[17],i,s=uk(n);return{c(){e=E("div"),s.c(),this.h()},l(r){e=A(r,"DIV",{class:!0});var l=w(e);s.l(l),l.forEach(g),this.h()},h(){_(e,"class","jse-main svelte-qi4kho"),xe(e,"jse-focus",n[18])},m(r,l){B(r,e,l),s.m(e,null),n[58](e),i=!0},p(r,l){l[0]&131072&&an(t,t=r[17])?(Le(),U(s,1,1,Ke),Ve(),s=uk(r),s.c(),D(s,1),s.m(e,null)):s.p(r,l),(!i||l[0]&262144)&&xe(e,"jse-focus",r[18])},i(r){i||(D(s),i=!0)},o(r){U(s),i=!1},d(r){r&&g(e),s.d(r),n[58](null)}}}function fse(n){let e,t,i,s,r;function l(a){n[55](a)}let o={};return n[22]!==void 0&&(o.open=n[22]),e=new ose({props:o}),Vt.push(()=>Us(e,"open",l)),s=new $O({props:{$$slots:{default:[use]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment),i=P(),ce(s.$$.fragment)},l(a){ge(e.$$.fragment,a),i=M(a),ge(s.$$.fragment,a)},m(a,c){ue(e,a,c),B(a,i,c),ue(s,a,c),r=!0},p(a,c){const u={};!t&&c[0]&4194304&&(t=!0,u.open=a[22],Js(()=>t=!1)),e.$set(u);const f={};c[0]&12582911|c[2]&2&&(f.$$scope={dirty:c,ctx:a}),s.$set(f)},i(a){r||(D(e.$$.fragment,a),D(s.$$.fragment,a),r=!0)},o(a){U(e.$$.fragment,a),U(s.$$.fragment,a),r=!1},d(a){fe(e,a),a&&g(i),fe(s,a)}}}function hse(n){let e,t;return e=new bV({props:{$$slots:{default:[fse]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s[0]&16777215|s[2]&2&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function E5(n){this.$set(n)}function A5(){this.$destroy()}function dse(n,e,t){let i;const s=Is("jsoneditor:Main");let{content:r={text:""}}=e,{readOnly:l=!1}=e,{indentation:o=2}=e,{tabSize:a=4}=e,{mode:c=Qs.tree}=e,{mainMenuBar:u=!0}=e,{navigationBar:f=!0}=e,{statusBar:h=!0}=e,{escapeControlCharacters:d=!1}=e,{escapeUnicodeCharacters:p=!1}=e,{parser:v=JSON}=e,{validator:y=null}=e,{validationParser:b=JSON}=e,{pathParser:S={parse:IG,stringify:gl}}=e,{queryLanguages:I=[Cne]}=e,{queryLanguageId:T=I[0].id}=e,{onChangeQueryLanguage:C=Hn}=e,{onChange:k=null}=e,{onRenderValue:R=eie}=e,{onClassName:O=()=>{}}=e,{onRenderMenu:N=Hn}=e,{onChangeMode:F=Hn}=e,{onError:W=ae=>{console.error(ae),alert(ae.toString())}}=e,{onFocus:z=Hn}=e,{onBlur:Y=Hn}=e,H=tu(),K=!1,j,J,Z,q,X=v;function ne(){return r}function Q(ae){s("set");const ke=Ip(ae);if(ke)throw new Error(ke);t(17,H=tu()),t(0,r=ae)}function re(ae){s("update");const ke=Ip(ae);if(ke)throw new Error(ke);t(0,r=ae)}function be(ae){if(Gv(r))try{t(0,r={json:v.parse(r.text),text:void 0})}catch{throw new Error("Cannot apply patch: current document contains invalid JSON")}if(J)return J.patch(ae);if(Z)return Z.patch(ae)}function le(ae){if(J)return J.expand(ae);throw new Error(`Method expand is not available in mode "${c}"`)}function he(ae){if(Z)Z.openTransformModal(ae);else if(J)J.openTransformModal(ae);else throw new Error(`Method transform is not available in mode "${c}"`)}function Ie(){if(Z)return Z.validate();if(J)return J.validate();throw new Error(`Method validate is not available in mode "${c}"`)}function G(){return J?J.acceptAutoRepair():r}function ve(ae){if(J)return J.scrollTo(ae);throw new Error(`Method scrollTo is not available in mode "${c}"`)}function je(ae){if(J)return J.findElement(ae);throw new Error(`Method findElement is not available in mode "${c}"`)}function $(){Z?Z.focus():J&&J.focus()}function Oe(){Z&&Z.refresh()}function ie(ae,ke,oe){t(0,r=ae),k&&k(ae,ke,oe)}async function _e(){t(1,c=Qs.text),await li(),F(Qs.text)}async function Ee(){t(1,c=Qs.tree),await li(),F(Qs.tree)}function He(){t(18,K=!0),z&&z()}function We(){t(18,K=!1),Y&&Y()}async function Qe(ae){c!==ae&&(t(1,c=ae),await li(),$(),F(ae))}let we;const Me={separator:!0};function de(ae){s("handleChangeQueryLanguage",ae),t(31,T=ae),C(ae)}function Ae({id:ae,json:ke,selectedPath:oe,onTransform:at,onClose:qe}){l||q($ie,{id:ae,json:ke,selectedPath:oe,escapeControlCharacters:d,escapeUnicodeCharacters:p,parser:v,queryLanguages:I,queryLanguageId:T,onChangeQueryLanguage:de,onRenderValue:R,onClassName:O,onTransform:at},TV,{onClose:qe})}function Re({id:ae,json:ke,selectedPath:oe,onSort:at,onClose:qe}){l||q(sse,{id:ae,json:ke,selectedPath:oe,onSort:at},kV,{onClose:qe})}function Ne(ae){q=ae,t(22,q)}function Ge(ae){Vt[ae?"unshift":"push"](()=>{Z=ae,t(21,Z)})}function pe(ae){Vt[ae?"unshift":"push"](()=>{J=ae,t(20,J)})}function Fe(ae){Vt[ae?"unshift":"push"](()=>{j=ae,t(19,j)})}return n.$$set=ae=>{"content"in ae&&t(0,r=ae.content),"readOnly"in ae&&t(2,l=ae.readOnly),"indentation"in ae&&t(3,o=ae.indentation),"tabSize"in ae&&t(4,a=ae.tabSize),"mode"in ae&&t(1,c=ae.mode),"mainMenuBar"in ae&&t(5,u=ae.mainMenuBar),"navigationBar"in ae&&t(6,f=ae.navigationBar),"statusBar"in ae&&t(7,h=ae.statusBar),"escapeControlCharacters"in ae&&t(8,d=ae.escapeControlCharacters),"escapeUnicodeCharacters"in ae&&t(9,p=ae.escapeUnicodeCharacters),"parser"in ae&&t(10,v=ae.parser),"validator"in ae&&t(11,y=ae.validator),"validationParser"in ae&&t(12,b=ae.validationParser),"pathParser"in ae&&t(13,S=ae.pathParser),"queryLanguages"in ae&&t(32,I=ae.queryLanguages),"queryLanguageId"in ae&&t(31,T=ae.queryLanguageId),"onChangeQueryLanguage"in ae&&t(33,C=ae.onChangeQueryLanguage),"onChange"in ae&&t(34,k=ae.onChange),"onRenderValue"in ae&&t(14,R=ae.onRenderValue),"onClassName"in ae&&t(15,O=ae.onClassName),"onRenderMenu"in ae&&t(35,N=ae.onRenderMenu),"onChangeMode"in ae&&t(36,F=ae.onChangeMode),"onError"in ae&&t(16,W=ae.onError),"onFocus"in ae&&t(37,z=ae.onFocus),"onBlur"in ae&&t(38,Y=ae.onBlur)},n.$$.update=()=>{if(n.$$.dirty[0]&1){const ae=Ip(r);ae&&console.error("Error: "+ae)}n.$$.dirty[0]&1024|n.$$.dirty[1]&4194304&&(hz(v,X)||(s("parser changed, recreate editor"),t(53,X=v),t(17,H=tu()))),n.$$.dirty[0]&2&&t(54,we=[{text:"text",title:`Switch to text mode (current mode: ${c})`,className:"jse-group-button jse-first"+(c===Qs.text||c==="code"?" jse-selected":""),onClick:()=>Qe(Qs.text)},{text:"tree",title:`Switch to tree mode (current mode: ${c})`,className:"jse-group-button jse-last"+(c===Qs.tree?" jse-selected":""),onClick:()=>Qe(Qs.tree)}]),n.$$.dirty[1]&8388624&&t(23,i=(ae,ke)=>{const oe=Kx(ke[0])?we.concat(ke):we.concat(Me,ke);return N(ae,oe)||oe}),n.$$.dirty[0]&2&&(s("mode changed to",c),c==="code"&&console.warn('Deprecation warning: "code" mode is renamed to "text". Please use mode="text" instead.'))},[r,c,l,o,a,u,f,h,d,p,v,y,b,S,R,O,W,H,K,j,J,Z,q,i,ie,_e,Ee,He,We,Ae,Re,T,I,C,k,N,F,z,Y,ne,Q,re,be,le,he,Ie,G,ve,je,$,Oe,E5,A5,X,we,Ne,Ge,pe,Fe]}class mse extends nt{constructor(e){super(),it(this,e,dse,hse,an,{content:0,readOnly:2,indentation:3,tabSize:4,mode:1,mainMenuBar:5,navigationBar:6,statusBar:7,escapeControlCharacters:8,escapeUnicodeCharacters:9,parser:10,validator:11,validationParser:12,pathParser:13,queryLanguages:32,queryLanguageId:31,onChangeQueryLanguage:33,onChange:34,onRenderValue:14,onClassName:15,onRenderMenu:35,onChangeMode:36,onError:16,onFocus:37,onBlur:38,get:39,set:40,update:41,patch:42,expand:43,transform:44,validate:45,acceptAutoRepair:46,scrollTo:47,findElement:48,focus:49,refresh:50,updateProps:51,destroy:52},null,[-1,-1,-1])}get get(){return this.$$.ctx[39]}get set(){return this.$$.ctx[40]}get update(){return this.$$.ctx[41]}get patch(){return this.$$.ctx[42]}get expand(){return this.$$.ctx[43]}get transform(){return this.$$.ctx[44]}get validate(){return this.$$.ctx[45]}get acceptAutoRepair(){return this.$$.ctx[46]}get scrollTo(){return this.$$.ctx[47]}get findElement(){return this.$$.ctx[48]}get focus(){return this.$$.ctx[49]}get refresh(){return this.$$.ctx[50]}get updateProps(){return E5}get destroy(){return A5}}const pse=mse;function fk(n){let e,t;return e=new pse({props:{content:n[2],mode:"code",onChange:n[5]}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s&4&&(r.content=i[2]),s&4&&(r.onChange=i[5]),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function gse(n){let e,t,i,s,r,l,o,a,c=n[0],u,f,h,d=fk(n);return{c(){e=E("div"),t=E("div"),i=E("h1"),s=L("Edit your character sheet manually"),r=P(),l=E("button"),o=L("Commit Changes"),a=P(),d.c(),this.h()},l(p){e=A(p,"DIV",{class:!0});var v=w(e);t=A(v,"DIV",{class:!0});var y=w(t);i=A(y,"H1",{});var b=w(i);s=V(b,"Edit your character sheet manually"),b.forEach(g),r=M(y),l=A(y,"BUTTON",{});var S=w(l);o=V(S,"Commit Changes"),S.forEach(g),y.forEach(g),a=M(v),d.l(v),v.forEach(g),this.h()},h(){_(t,"class","content"),_(e,"class","container svelte-1sggtte")},m(p,v){B(p,e,v),m(e,t),m(t,i),m(i,s),m(t,r),m(t,l),m(l,o),m(e,a),d.m(e,null),u=!0,f||(h=se(l,"click",n[4]),f=!0)},p(p,[v]){v&1&&Ct(c,c=p[0])?(Le(),U(d,1,1,Ke),Ve(),d=fk(p),d.c(),D(d,1),d.m(e,null)):d.p(p,v)},i(p){u||(D(d),u=!0)},o(p){U(d),u=!1},d(p){p&&g(e),d.d(p),f=!1,h()}}}function vse(n,e,t){let{fullSheet:i}=e,{onChangeSheet:s}=e,r={current:null},l;const o=()=>{let c=l.json;if(l.text)try{c=JSON.parse(l.text)}catch{alert("failed to parse the editor text")}else l.json?c=l.json:alert("failed to parse the editor at all");if(c)if(confirm("Are you sure you want to update your sheet? Your sheet will be downloaded as a back up before the change is committed"))L4(i,"BACKUP-"),s(c);else return},a=c=>{t(2,l=c)};return n.$$set=c=>{"fullSheet"in c&&t(0,i=c.fullSheet),"onChangeSheet"in c&&t(1,s=c.onChangeSheet)},n.$$.update=()=>{n.$$.dirty&9&&r.current!==i&&(t(3,r.current=i,r),t(2,l={json:i}))},[i,s,l,r,o,a]}class bse extends nt{constructor(e){super(),it(this,e,vse,gse,Ct,{fullSheet:0,onChangeSheet:1})}}function hk(n,e,t){const i=n.slice();return i[12]=e[t],i}function dk(n){let e,t,i;return{c(){e=E("img"),this.h()},l(s){e=A(s,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){var s;_(e,"class",t=Ze(`icon ${(s=n[3])!=null&&s.has(n[12])?"equipped":"not-equipped"}`)+" svelte-tg3npo"),No(e.src,i=ed[n[12]])||_(e,"src",i),_(e,"alt","icon")},m(s,r){B(s,e,r)},p(s,r){var l;r&136&&t!==(t=Ze(`icon ${(l=s[3])!=null&&l.has(s[12])?"equipped":"not-equipped"}`)+" svelte-tg3npo")&&_(e,"class",t),r&128&&!No(e.src,i=ed[s[12]])&&_(e,"src",i)},d(s){s&&g(e)}}}function mk(n){let e,t=ed[n[12]]&&dk(n);return{c(){t&&t.c(),e=et()},l(i){t&&t.l(i),e=et()},m(i,s){t&&t.m(i,s),B(i,e,s)},p(i,s){ed[i[12]]?t?t.p(i,s):(t=dk(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(i){t&&t.d(i),i&&g(e)}}}function pk(n){var o,a;let e,t,i,s=((o=n[4][n[0]])==null?void 0:o.reason)&&gk(n),r=n[6]&&vk(n),l=((a=n[4][n[0]])==null?void 0:a.description)&&bk(n);return{c(){e=E("div"),s&&s.c(),t=P(),r&&r.c(),i=P(),l&&l.c(),this.h()},l(c){e=A(c,"DIV",{class:!0});var u=w(e);s&&s.l(u),t=M(u),r&&r.l(u),i=M(u),l&&l.l(u),u.forEach(g),this.h()},h(){_(e,"class","description svelte-tg3npo")},m(c,u){B(c,e,u),s&&s.m(e,null),m(e,t),r&&r.m(e,null),m(e,i),l&&l.m(e,null)},p(c,u){var f,h;(f=c[4][c[0]])!=null&&f.reason?s?s.p(c,u):(s=gk(c),s.c(),s.m(e,t)):s&&(s.d(1),s=null),c[6]?r?r.p(c,u):(r=vk(c),r.c(),r.m(e,i)):r&&(r.d(1),r=null),(h=c[4][c[0]])!=null&&h.description?l?l.p(c,u):(l=bk(c),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},d(c){c&&g(e),s&&s.d(),r&&r.d(),l&&l.d()}}}function gk(n){let e,t=n[4][n[0]].reason+"",i,s,r;return{c(){e=E("div"),i=L(t),s=P(),r=E("br"),this.h()},l(l){e=A(l,"DIV",{class:!0});var o=w(e);i=V(o,t),o.forEach(g),s=M(l),r=A(l,"BR",{}),this.h()},h(){_(e,"class","reason svelte-tg3npo")},m(l,o){B(l,e,o),m(e,i),B(l,s,o),B(l,r,o)},p(l,o){o&17&&t!==(t=l[4][l[0]].reason+"")&&Ce(i,t)},d(l){l&&g(e),l&&g(s),l&&g(r)}}}function vk(n){let e,t;return{c(){e=E("span"),t=L(n[6])},l(i){e=A(i,"SPAN",{});var s=w(e);t=V(s,n[6]),s.forEach(g)},m(i,s){B(i,e,s),m(e,t)},p(i,s){s&64&&Ce(t,i[6])},d(i){i&&g(e)}}}function bk(n){let e,t,i=n[4][n[0]].description+"",s,r=n[6]&&_k();return{c(){r&&r.c(),e=P(),t=E("div"),s=L(i),this.h()},l(l){r&&r.l(l),e=M(l),t=A(l,"DIV",{class:!0});var o=w(t);s=V(o,i),o.forEach(g),this.h()},h(){_(t,"class","description-extra svelte-tg3npo")},m(l,o){r&&r.m(l,o),B(l,e,o),B(l,t,o),m(t,s)},p(l,o){l[6]?r||(r=_k(),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),o&17&&i!==(i=l[4][l[0]].description+"")&&Ce(s,i)},d(l){r&&r.d(l),l&&g(e),l&&g(t)}}}function _k(n){let e;return{c(){e=E("br")},l(t){e=A(t,"BR",{})},m(t,i){B(t,e,i)},d(t){t&&g(e)}}}function _se(n){let e,t,i,s,r=n[4][n[0]].label+"",l,o,a,c,u,f,h,d,p,v,y,b,S=n[7],I=[];for(let C=0;C<S.length;C+=1)I[C]=mk(hk(n,S,C));d=new km({props:{isEquipped:n[1].includes(n[0]),onClick:n[11],isVisible:n[1].length<dl||n[1].includes(n[0])}});let T=n[5]&&pk(n);return{c(){e=E("div"),t=E("div"),i=E("div"),s=E("span"),l=L(r),o=P();for(let C=0;C<I.length;C+=1)I[C].c();a=P(),c=E("div"),u=L("v"),h=P(),ce(d.$$.fragment),p=P(),T&&T.c(),this.h()},l(C){e=A(C,"DIV",{class:!0});var k=w(e);t=A(k,"DIV",{class:!0});var R=w(t);i=A(R,"DIV",{class:!0});var O=w(i);s=A(O,"SPAN",{});var N=w(s);l=V(N,r),N.forEach(g),o=M(O);for(let W=0;W<I.length;W+=1)I[W].l(O);O.forEach(g),a=M(R),c=A(R,"DIV",{class:!0});var F=w(c);u=V(F,"v"),F.forEach(g),h=M(R),ge(d.$$.fragment,R),R.forEach(g),p=M(k),T&&T.l(k),k.forEach(g),this.h()},h(){_(i,"class","label svelte-tg3npo"),_(c,"class",f=Ze(`caret ${n[5]?"":"flip"}`)+" svelte-tg3npo"),_(t,"class","content svelte-tg3npo"),_(e,"class","container svelte-tg3npo")},m(C,k){B(C,e,k),m(e,t),m(t,i),m(i,s),m(s,l),m(i,o);for(let R=0;R<I.length;R+=1)I[R].m(i,null);m(t,a),m(t,c),m(c,u),m(t,h),ue(d,t,null),m(e,p),T&&T.m(e,null),v=!0,y||(b=[se(i,"click",n[9]),se(c,"click",n[10])],y=!0)},p(C,[k]){if((!v||k&17)&&r!==(r=C[4][C[0]].label+"")&&Ce(l,r),k&136){S=C[7];let O;for(O=0;O<S.length;O+=1){const N=hk(C,S,O);I[O]?I[O].p(N,k):(I[O]=mk(N),I[O].c(),I[O].m(i,null))}for(;O<I.length;O+=1)I[O].d(1);I.length=S.length}(!v||k&32&&f!==(f=Ze(`caret ${C[5]?"":"flip"}`)+" svelte-tg3npo"))&&_(c,"class",f);const R={};k&3&&(R.isEquipped=C[1].includes(C[0])),k&5&&(R.onClick=C[11]),k&3&&(R.isVisible=C[1].length<dl||C[1].includes(C[0])),d.$set(R),C[5]?T?T.p(C,k):(T=pk(C),T.c(),T.m(e,null)):T&&(T.d(1),T=null)},i(C){v||(D(d.$$.fragment,C),v=!0)},o(C){U(d.$$.fragment,C),v=!1},d(C){C&&g(e),Ft(I,C),fe(d),T&&T.d(),y=!1,on(b)}}}function yse(n,e,t){let i,s,r,{art:l}=e,{equippedCombatArts:o}=e,{onToggleCombatArts:a}=e,{allCombatArts:c}=e,{equippedWeaponTypes:u}=e,f=!1;const h=()=>t(5,f=!f),d=()=>t(5,f=!f),p=()=>a(l);return n.$$set=v=>{"art"in v&&t(0,l=v.art),"equippedCombatArts"in v&&t(1,o=v.equippedCombatArts),"onToggleCombatArts"in v&&t(2,a=v.onToggleCombatArts),"allCombatArts"in v&&t(8,c=v.allCombatArts),"equippedWeaponTypes"in v&&t(3,u=v.equippedWeaponTypes)},n.$$.update=()=>{var v;n.$$.dirty&256&&t(4,i=c.fullFeatures),n.$$.dirty&17&&t(7,s=((v=i[l])==null?void 0:v.compatibleWeapons)||[]),n.$$.dirty&17&&t(6,r=U4(i[l],{disableDescription:!0}))},[l,o,a,u,i,f,r,s,c,h,d,p]}class Sse extends nt{constructor(e){super(),it(this,e,yse,_se,Ct,{art:0,equippedCombatArts:1,onToggleCombatArts:2,allCombatArts:8,equippedWeaponTypes:3})}}function yk(n,e,t){const i=n.slice();return i[11]=e[t],i}function Ese(n){let e,t,i=n[1].length+"",s,r,l,o,a,c;return{c(){e=E("span"),t=L("("),s=L(i),r=L("/"),l=L(dl),o=L(")")},l(u){e=A(u,"SPAN",{});var f=w(e);t=V(f,"("),s=V(f,i),r=V(f,"/"),l=V(f,dl),o=V(f,")"),f.forEach(g)},m(u,f){B(u,e,f),m(e,t),m(e,s),m(e,r),m(e,l),m(e,o),a||(c=se(e,"click",n[9]),a=!0)},p(u,f){f&2&&i!==(i=u[1].length+"")&&Ce(s,i)},d(u){u&&g(e),a=!1,c()}}}function Ase(n){let e,t;return{c(){e=E("div"),t=L("Click to Clear All"),this.h()},l(i){e=A(i,"DIV",{slot:!0});var s=w(e);t=V(s,"Click to Clear All"),s.forEach(g),this.h()},h(){_(e,"slot","t")},m(i,s){B(i,e,s),m(e,t)},p:Ke,d(i){i&&g(e)}}}function wse(n){let e,t,i,s,r,l,o,a,c,u,f,h;return l=new ai({props:{tooltipStyle:ns.BOTTOM_CENTER,$$slots:{t:[Ase],default:[Ese]},$$scope:{ctx:n}}}),{c(){e=E("div"),t=E("div"),i=E("span"),s=L("Combat Arts"),r=P(),ce(l.$$.fragment),o=P(),a=E("button"),c=L("+"),this.h()},l(d){e=A(d,"DIV",{slot:!0,class:!0});var p=w(e);t=A(p,"DIV",{});var v=w(t);i=A(v,"SPAN",{});var y=w(i);s=V(y,"Combat Arts"),y.forEach(g),r=M(v),ge(l.$$.fragment,v),v.forEach(g),o=M(p),a=A(p,"BUTTON",{class:!0});var b=w(a);c=V(b,"+"),b.forEach(g),p.forEach(g),this.h()},h(){_(a,"class","svelte-pbyt6h"),_(e,"slot","content"),_(e,"class","header svelte-pbyt6h")},m(d,p){B(d,e,p),m(e,t),m(t,i),m(i,s),m(t,r),ue(l,t,null),m(e,o),m(e,a),m(a,c),u=!0,f||(h=se(a,"click",function(){Mn(n[3])&&n[3].apply(this,arguments)}),f=!0)},p(d,p){n=d;const v={};p&16390&&(v.$$scope={dirty:p,ctx:n}),l.$set(v)},i(d){u||(D(l.$$.fragment,d),u=!0)},o(d){U(l.$$.fragment,d),u=!1},d(d){d&&g(e),fe(l),f=!1,h()}}}function Sk(n){let e,t;return e=new Sse({props:{art:n[11],allCombatArts:n[0],equippedCombatArts:n[1],onToggleCombatArts:n[2],equippedWeaponTypes:n[4]}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s&1&&(r.art=i[11]),s&1&&(r.allCombatArts=i[0]),s&2&&(r.equippedCombatArts=i[1]),s&4&&(r.onToggleCombatArts=i[2]),s&16&&(r.equippedWeaponTypes=i[4]),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function Cse(n){let e,t,i,s,r,l,o;t=new gc({props:{$$slots:{content:[wse]},$$scope:{ctx:n}}});let a=n[0].fullArray,c=[];for(let f=0;f<a.length;f+=1)c[f]=Sk(yk(n,a,f));const u=f=>U(c[f],1,1,()=>{c[f]=null});return{c(){e=E("div"),ce(t.$$.fragment),i=P(),s=E("div"),r=P(),l=E("div");for(let f=0;f<c.length;f+=1)c[f].c();this.h()},l(f){e=A(f,"DIV",{class:!0});var h=w(e);ge(t.$$.fragment,h),i=M(h),s=A(h,"DIV",{}),w(s).forEach(g),r=M(h),l=A(h,"DIV",{class:!0});var d=w(l);for(let p=0;p<c.length;p+=1)c[p].l(d);d.forEach(g),h.forEach(g),this.h()},h(){rt(s,"height","11px"),_(l,"class","content svelte-pbyt6h"),_(e,"class","container svelte-pbyt6h")},m(f,h){B(f,e,h),ue(t,e,null),m(e,i),m(e,s),m(e,r),m(e,l);for(let d=0;d<c.length;d+=1)c[d].m(l,null);o=!0},p(f,[h]){const d={};if(h&16398&&(d.$$scope={dirty:h,ctx:f}),t.$set(d),h&23){a=f[0].fullArray;let p;for(p=0;p<a.length;p+=1){const v=yk(f,a,p);c[p]?(c[p].p(v,h),D(c[p],1)):(c[p]=Sk(v),c[p].c(),D(c[p],1),c[p].m(l,null))}for(Le(),p=a.length;p<c.length;p+=1)u(p);Ve()}},i(f){if(!o){D(t.$$.fragment,f);for(let h=0;h<a.length;h+=1)D(c[h]);o=!0}},o(f){U(t.$$.fragment,f),c=c.filter(Boolean);for(let h=0;h<c.length;h+=1)U(c[h]);o=!1},d(f){f&&g(e),fe(t),Ft(c,f)}}}function kse(n,e,t){let i,s,r;const{open:l}=Bn(hs.MODAL);let{allCombatArts:o}=e,{customCombatArts:a}=e,{onUpdateCustomCombatArts:c}=e,{equippedCombatArts:u}=e,{onToggleCombatArts:f}=e,{equippedWeapons:h}=e;const d=()=>u.forEach(p=>{f(p)});return n.$$set=p=>{"allCombatArts"in p&&t(0,o=p.allCombatArts),"customCombatArts"in p&&t(5,a=p.customCombatArts),"onUpdateCustomCombatArts"in p&&t(6,c=p.onUpdateCustomCombatArts),"equippedCombatArts"in p&&t(1,u=p.equippedCombatArts),"onToggleCombatArts"in p&&t(2,f=p.onToggleCombatArts),"equippedWeapons"in p&&t(7,h=p.equippedWeapons)},n.$$.update=()=>{n.$$.dirty&128&&t(4,i=new Set(h.map(p=>{var v;return(v=tr[p])==null?void 0:v.type}))),n.$$.dirty&1&&t(8,s=Object.values(vt).filter(p=>!o.fullSet.has(p))),n.$$.dirty&352&&t(3,r=()=>{l(wu,{pickOne:[{type:Nn.CombatArt,options:s}],reason:"Manually adding in combat arts section",customCombatArts:a,onUpdateCustomCombatArts:p=>c({...a,...p})})})},[o,u,f,r,i,a,c,h,s,d]}class Tse extends nt{constructor(e){super(),it(this,e,kse,Cse,Ct,{allCombatArts:0,customCombatArts:5,onUpdateCustomCombatArts:6,equippedCombatArts:1,onToggleCombatArts:2,equippedWeapons:7})}}function Ek(n){var c,u;let e,t,i,s=((c=n[1])==null?void 0:c.description)+"",r,l,o,a=((u=n[1])==null?void 0:u.reason)&&Ak(n);return{c(){e=E("div"),a&&a.c(),t=P(),i=E("div"),r=L(s),this.h()},l(f){e=A(f,"DIV",{class:!0});var h=w(e);a&&a.l(h),t=M(h),i=A(h,"DIV",{});var d=w(i);r=V(d,s),d.forEach(g),h.forEach(g),this.h()},h(){_(e,"class","description svelte-1fase9x")},m(f,h){B(f,e,h),a&&a.m(e,null),m(e,t),m(e,i),m(i,r),l||(o=se(e,"click",n[9]),l=!0)},p(f,h){var d,p;(d=f[1])!=null&&d.reason?a?a.p(f,h):(a=Ak(f),a.c(),a.m(e,t)):a&&(a.d(1),a=null),h&2&&s!==(s=((p=f[1])==null?void 0:p.description)+"")&&Ce(r,s)},d(f){f&&g(e),a&&a.d(),l=!1,o()}}}function Ak(n){let e,t=n[1].reason+"",i,s,r;return{c(){e=E("div"),i=L(t),s=P(),r=E("br"),this.h()},l(l){e=A(l,"DIV",{class:!0});var o=w(e);i=V(o,t),o.forEach(g),s=M(l),r=A(l,"BR",{}),this.h()},h(){_(e,"class","reason svelte-1fase9x")},m(l,o){B(l,e,o),m(e,i),B(l,s,o),B(l,r,o)},p(l,o){o&2&&t!==(t=l[1].reason+"")&&Ce(i,t)},d(l){l&&g(e),l&&g(s),l&&g(r)}}}function Ise(n){var b;let e,t,i,s=((b=n[1])==null?void 0:b.label)+"",r,l,o,a,c,u,f,h,d,p,v;f=new km({props:{isEquipped:n[2],onClick:n[8],isVisible:n[4]<ml||n[2]}});let y=!n[5]&&Ek(n);return{c(){e=E("div"),t=E("div"),i=E("div"),r=L(s),l=P(),o=E("div"),a=L("v"),u=P(),ce(f.$$.fragment),h=P(),y&&y.c(),this.h()},l(S){e=A(S,"DIV",{class:!0});var I=w(e);t=A(I,"DIV",{class:!0});var T=w(t);i=A(T,"DIV",{class:!0});var C=w(i);r=V(C,s),C.forEach(g),l=M(T),o=A(T,"DIV",{class:!0});var k=w(o);a=V(k,"v"),k.forEach(g),u=M(T),ge(f.$$.fragment,T),T.forEach(g),h=M(I),y&&y.l(I),I.forEach(g),this.h()},h(){_(i,"class","label svelte-1fase9x"),_(o,"class",c=Ze(`caret ${n[5]?"flip":""}`)+" svelte-1fase9x"),_(t,"class","skill-container svelte-1fase9x"),_(e,"class","container svelte-1fase9x")},m(S,I){B(S,e,I),m(e,t),m(t,i),m(i,r),m(t,l),m(t,o),m(o,a),m(t,u),ue(f,t,null),m(e,h),y&&y.m(e,null),d=!0,p||(v=[se(i,"click",n[6]),se(o,"click",n[7])],p=!0)},p(S,[I]){var C;(!d||I&2)&&s!==(s=((C=S[1])==null?void 0:C.label)+"")&&Ce(r,s),(!d||I&32&&c!==(c=Ze(`caret ${S[5]?"flip":""}`)+" svelte-1fase9x"))&&_(o,"class",c);const T={};I&4&&(T.isEquipped=S[2]),I&9&&(T.onClick=S[8]),I&20&&(T.isVisible=S[4]<ml||S[2]),f.$set(T),S[5]?y&&(y.d(1),y=null):y?y.p(S,I):(y=Ek(S),y.c(),y.m(e,null))},i(S){d||(D(f.$$.fragment,S),d=!0)},o(S){U(f.$$.fragment,S),d=!1},d(S){S&&g(e),fe(f),y&&y.d(),p=!1,on(v)}}}function Ose(n,e,t){let{skill:i}=e,{feature:s}=e,{isEquipped:r}=e,{onToggleCombatSkill:l}=e,{numEquipped:o}=e,a=!0;const c=()=>t(5,a=!a),u=()=>t(5,a=!a),f=()=>l(i),h=()=>t(5,a=!0);return n.$$set=d=>{"skill"in d&&t(0,i=d.skill),"feature"in d&&t(1,s=d.feature),"isEquipped"in d&&t(2,r=d.isEquipped),"onToggleCombatSkill"in d&&t(3,l=d.onToggleCombatSkill),"numEquipped"in d&&t(4,o=d.numEquipped)},[i,s,r,l,o,a,c,u,f,h]}class Rse extends nt{constructor(e){super(),it(this,e,Ose,Ise,Ct,{skill:0,feature:1,isEquipped:2,onToggleCombatSkill:3,numEquipped:4})}}function wk(n,e,t){const i=n.slice();return i[11]=e[t],i}function Dse(n){let e,t,i=n[0].length+"",s,r,l,o,a,c;return{c(){e=E("span"),t=L("("),s=L(i),r=L("/"),l=L(ml),o=L(")")},l(u){e=A(u,"SPAN",{});var f=w(e);t=V(f,"("),s=V(f,i),r=V(f,"/"),l=V(f,ml),o=V(f,")"),f.forEach(g)},m(u,f){B(u,e,f),m(e,t),m(e,s),m(e,r),m(e,l),m(e,o),a||(c=se(e,"click",n[9]),a=!0)},p(u,f){f&1&&i!==(i=u[0].length+"")&&Ce(s,i)},d(u){u&&g(e),a=!1,c()}}}function Nse(n){let e,t;return{c(){e=E("div"),t=L("Click to Clear All"),this.h()},l(i){e=A(i,"DIV",{slot:!0});var s=w(e);t=V(s,"Click to Clear All"),s.forEach(g),this.h()},h(){_(e,"slot","t")},m(i,s){B(i,e,s),m(e,t)},p:Ke,d(i){i&&g(e)}}}function Pse(n){let e,t,i,s,r,l,o,a,c,u,f,h;return l=new ai({props:{tooltipStyle:ns.BOTTOM_CENTER,$$slots:{t:[Nse],default:[Dse]},$$scope:{ctx:n}}}),{c(){e=E("div"),t=E("div"),i=E("span"),s=L("Combat Skills"),r=P(),ce(l.$$.fragment),o=P(),a=E("button"),c=L("+"),this.h()},l(d){e=A(d,"DIV",{slot:!0,class:!0});var p=w(e);t=A(p,"DIV",{});var v=w(t);i=A(v,"SPAN",{});var y=w(i);s=V(y,"Combat Skills"),y.forEach(g),r=M(v),ge(l.$$.fragment,v),v.forEach(g),o=M(p),a=A(p,"BUTTON",{class:!0});var b=w(a);c=V(b,"+"),b.forEach(g),p.forEach(g),this.h()},h(){_(a,"class","svelte-1sd84cd"),_(e,"slot","content"),_(e,"class","header svelte-1sd84cd")},m(d,p){B(d,e,p),m(e,t),m(t,i),m(i,s),m(t,r),ue(l,t,null),m(e,o),m(e,a),m(a,c),u=!0,f||(h=se(a,"click",function(){Mn(n[2])&&n[2].apply(this,arguments)}),f=!0)},p(d,p){n=d;const v={};p&16387&&(v.$$scope={dirty:p,ctx:n}),l.$set(v)},i(d){u||(D(l.$$.fragment,d),u=!0)},o(d){U(l.$$.fragment,d),u=!1},d(d){d&&g(e),fe(l),f=!1,h()}}}function Ck(n){let e,t;return e=new Rse({props:{skill:n[11],feature:n[3][n[11]],isEquipped:n[0].indexOf(n[11])!==-1,onToggleCombatSkill:n[1],numEquipped:n[0].length}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s&16&&(r.skill=i[11]),s&24&&(r.feature=i[3][i[11]]),s&17&&(r.isEquipped=i[0].indexOf(i[11])!==-1),s&2&&(r.onToggleCombatSkill=i[1]),s&1&&(r.numEquipped=i[0].length),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function Mse(n){let e,t,i,s,r,l,o;t=new gc({props:{$$slots:{content:[Pse]},$$scope:{ctx:n}}});let a=n[4],c=[];for(let f=0;f<a.length;f+=1)c[f]=Ck(wk(n,a,f));const u=f=>U(c[f],1,1,()=>{c[f]=null});return{c(){e=E("div"),ce(t.$$.fragment),i=P(),s=E("div"),r=P(),l=E("div");for(let f=0;f<c.length;f+=1)c[f].c();this.h()},l(f){e=A(f,"DIV",{class:!0});var h=w(e);ge(t.$$.fragment,h),i=M(h),s=A(h,"DIV",{}),w(s).forEach(g),r=M(h),l=A(h,"DIV",{class:!0});var d=w(l);for(let p=0;p<c.length;p+=1)c[p].l(d);d.forEach(g),h.forEach(g),this.h()},h(){rt(s,"height","11px"),_(l,"class","content svelte-1sd84cd"),_(e,"class","container svelte-1sd84cd")},m(f,h){B(f,e,h),ue(t,e,null),m(e,i),m(e,s),m(e,r),m(e,l);for(let d=0;d<c.length;d+=1)c[d].m(l,null);o=!0},p(f,[h]){const d={};if(h&16391&&(d.$$scope={dirty:h,ctx:f}),t.$set(d),h&27){a=f[4];let p;for(p=0;p<a.length;p+=1){const v=wk(f,a,p);c[p]?(c[p].p(v,h),D(c[p],1)):(c[p]=Ck(v),c[p].c(),D(c[p],1),c[p].m(l,null))}for(Le(),p=a.length;p<c.length;p+=1)u(p);Ve()}},i(f){if(!o){D(t.$$.fragment,f);for(let h=0;h<a.length;h+=1)D(c[h]);o=!0}},o(f){U(t.$$.fragment,f),c=c.filter(Boolean);for(let h=0;h<c.length;h+=1)U(c[h]);o=!1},d(f){f&&g(e),fe(t),Ft(c,f)}}}function Bse(n,e,t){let i,s,r,l;const{open:o}=Bn(hs.MODAL);let{allCombatSkills:a}=e,{equippedCombatSkills:c}=e,{onToggleCombatSkill:u}=e,{customCombatSkills:f}=e,{onUpdateCustomCombatSkills:h}=e;const d=()=>c.forEach(p=>{u(p)});return n.$$set=p=>{"allCombatSkills"in p&&t(5,a=p.allCombatSkills),"equippedCombatSkills"in p&&t(0,c=p.equippedCombatSkills),"onToggleCombatSkill"in p&&t(1,u=p.onToggleCombatSkill),"customCombatSkills"in p&&t(6,f=p.customCombatSkills),"onUpdateCustomCombatSkills"in p&&t(7,h=p.onUpdateCustomCombatSkills)},n.$$.update=()=>{n.$$.dirty&32&&t(4,i=a.fullArray),n.$$.dirty&32&&t(3,s=a.fullFeatures),n.$$.dirty&32&&t(8,r=Object.values(Te).filter(p=>!a.fullSet.has(p))),n.$$.dirty&448&&t(2,l=()=>{o(wu,{pickOne:[{type:Nn.CombatSkill,options:r}],reason:"Manually adding in combat skills section",customCombatSkills:f,onUpdateCustomCombatSkills:p=>h({...f,...p})})})},[c,u,l,s,i,a,f,h,r,d]}class Lse extends nt{constructor(e){super(),it(this,e,Bse,Mse,Ct,{allCombatSkills:5,equippedCombatSkills:0,onToggleCombatSkill:1,customCombatSkills:6,onUpdateCustomCombatSkills:7})}}function kk(n){let e,t;return e=new ai({props:{tooltipStyle:ns.CENTER,hiddenFirst:!0,$$slots:{t:[Use],default:[Vse]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s[0]&15|s[1]&1024&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function Vse(n){let e,t,i;return{c(){e=E("div"),t=E("span"),i=L("!"),this.h()},l(s){e=A(s,"DIV",{class:!0});var r=w(e);t=A(r,"SPAN",{class:!0});var l=w(t);i=V(l,"!"),l.forEach(g),r.forEach(g),this.h()},h(){_(t,"class","warning svelte-1yghy27"),_(e,"class","warning-container svelte-1yghy27")},m(s,r){B(s,e,r),m(e,t),m(t,i)},p:Ke,d(s){s&&g(e)}}}function Tk(n){let e,t;return{c(){e=E("u"),t=L("No Equipped Class")},l(i){e=A(i,"U",{});var s=w(e);t=V(s,"No Equipped Class"),s.forEach(g)},m(i,s){B(i,e,s),m(e,t)},d(i){i&&g(e)}}}function Ik(n){let e,t;return{c(){e=E("u"),t=L("Max Weapons not Equipped")},l(i){e=A(i,"U",{});var s=w(e);t=V(s,"Max Weapons not Equipped"),s.forEach(g)},m(i,s){B(i,e,s),m(e,t)},d(i){i&&g(e)}}}function Ok(n){let e,t;return{c(){e=E("u"),t=L("Max Combat Skills not Equipped")},l(i){e=A(i,"U",{});var s=w(e);t=V(s,"Max Combat Skills not Equipped"),s.forEach(g)},m(i,s){B(i,e,s),m(e,t)},d(i){i&&g(e)}}}function Rk(n){let e,t;return{c(){e=E("u"),t=L("Max Combat Arts not Equipped")},l(i){e=A(i,"U",{});var s=w(e);t=V(s,"Max Combat Arts not Equipped"),s.forEach(g)},m(i,s){B(i,e,s),m(e,t)},d(i){i&&g(e)}}}function Use(n){var c,u,f;let e,t,i,s,r=!n[2]&&Tk(),l=((c=n[0])==null?void 0:c.length)!==Uo&&Ik(),o=((u=n[3])==null?void 0:u.length)!==ml&&Ok(),a=((f=n[1])==null?void 0:f.length)!==dl&&Rk();return{c(){e=E("div"),r&&r.c(),t=P(),l&&l.c(),i=P(),o&&o.c(),s=P(),a&&a.c(),this.h()},l(h){e=A(h,"DIV",{slot:!0,class:!0});var d=w(e);r&&r.l(d),t=M(d),l&&l.l(d),i=M(d),o&&o.l(d),s=M(d),a&&a.l(d),d.forEach(g),this.h()},h(){_(e,"slot","t"),_(e,"class","warning-tooltip svelte-1yghy27")},m(h,d){B(h,e,d),r&&r.m(e,null),m(e,t),l&&l.m(e,null),m(e,i),o&&o.m(e,null),m(e,s),a&&a.m(e,null)},p(h,d){var p,v,y;h[2]?r&&(r.d(1),r=null):r||(r=Tk(),r.c(),r.m(e,t)),((p=h[0])==null?void 0:p.length)!==Uo?l||(l=Ik(),l.c(),l.m(e,i)):l&&(l.d(1),l=null),((v=h[3])==null?void 0:v.length)!==ml?o||(o=Ok(),o.c(),o.m(e,s)):o&&(o.d(1),o=null),((y=h[1])==null?void 0:y.length)!==dl?a||(a=Rk(),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},d(h){h&&g(e),r&&r.d(),l&&l.d(),o&&o.d(),a&&a.d()}}}function Wse(n){let e,t,i,s,r,l,o,a,c,u,f,h;return{c(){e=E("div"),t=E("span"),i=L(n[32]),s=L(" +"),r=P(),l=E("div"),o=E("div"),a=L("Terrain"),c=P(),u=E("input"),this.h()},l(d){e=A(d,"DIV",{class:!0});var p=w(e);t=A(p,"SPAN",{class:!0});var v=w(t);i=V(v,n[32]),s=V(v," +"),v.forEach(g),r=M(p),l=A(p,"DIV",{class:!0});var y=w(l);o=A(y,"DIV",{});var b=w(o);a=V(b,"Terrain"),b.forEach(g),c=M(y),u=A(y,"INPUT",{type:!0,class:!0}),y.forEach(g),p.forEach(g),this.h()},h(){_(t,"class","big-text svelte-1yghy27"),_(u,"type","number"),u.value=n[4],_(u,"class","svelte-1yghy27"),_(l,"class","terrain-container svelte-1yghy27"),_(e,"class","ac-value svelte-1yghy27")},m(d,p){B(d,e,p),m(e,t),m(t,i),m(t,s),m(e,r),m(e,l),m(l,o),m(o,a),m(l,c),m(l,u),f||(h=se(u,"input",n[33]),f=!0)},p(d,p){p[1]&2&&Ce(i,d[32]),p[0]&16&&u.value!==d[4]&&(u.value=d[4])},d(d){d&&g(e),f=!1,h()}}}function Fse(n){let e,t=`AC = ${Xg} + ${n[8]} (dex modifier) + ${n[26]} (class bonus) + ${n[23]} (combat skill bonus) + ${n[24]} (selected weapon) + ${n[25]} (weapon bonus) + ${n[4]}(terrain mod)`,i;return{c(){e=E("div"),i=L(t),this.h()},l(s){e=A(s,"DIV",{slot:!0,class:!0});var r=w(e);i=V(r,t),r.forEach(g),this.h()},h(){_(e,"slot","t"),_(e,"class","tooltip svelte-1yghy27")},m(s,r){B(s,e,r),m(e,i)},p(s,r){r[0]&125829392&&t!==(t=`AC = ${Xg} + ${s[8]} (dex modifier) + ${s[26]} (class bonus) + ${s[23]} (combat skill bonus) + ${s[24]} (selected weapon) + ${s[25]} (weapon bonus) + ${s[4]}(terrain mod)`)&&Ce(i,t)},d(s){s&&g(e)}}}function jse(n){let e,t;return{c(){e=E("div"),t=L(n[31]),this.h()},l(i){e=A(i,"DIV",{class:!0});var s=w(e);t=V(s,n[31]),s.forEach(g),this.h()},h(){_(e,"class","big-text skinny svelte-1yghy27")},m(i,s){B(i,e,s),m(e,t)},p(i,s){s[1]&1&&Ce(t,i[31])},d(i){i&&g(e)}}}function Hse(n){let e,t=`Move Speed = ${Yg} + ${n[22]} (from class) + ${n[21]} (from combat skills)`,i;return{c(){e=E("div"),i=L(t),this.h()},l(s){e=A(s,"DIV",{slot:!0,class:!0});var r=w(e);i=V(r,t),r.forEach(g),this.h()},h(){_(e,"slot","t"),_(e,"class","skinny-tooltip svelte-1yghy27")},m(s,r){B(s,e,r),m(e,i)},p(s,r){r[0]&6291456&&t!==(t=`Move Speed = ${Yg} + ${s[22]} (from class) + ${s[21]} (from combat skills)`)&&Ce(i,t)},d(s){s&&g(e)}}}function qse(n){let e,t;return{c(){e=E("div"),t=L(n[30]),this.h()},l(i){e=A(i,"DIV",{class:!0});var s=w(e);t=V(s,n[30]),s.forEach(g),this.h()},h(){_(e,"class","big-text skinny svelte-1yghy27"),rt(e,"flex","0")},m(i,s){B(i,e,s),m(e,t)},p(i,s){s[0]&1073741824&&Ce(t,i[30])},d(i){i&&g(e)}}}function zse(n){let e,t=`HP Max = ${Jg} + ${n[20]} (from unlocked classes) + ${n[19]} (from unlocking an intermediate class) + ${n[18]} (from combat skills) + ${n[17]} (CON modifier * 2)`,i;return{c(){e=E("div"),i=L(t),this.h()},l(s){e=A(s,"DIV",{slot:!0,class:!0});var r=w(e);i=V(r,t),r.forEach(g),this.h()},h(){_(e,"slot","t"),_(e,"class","skinny-tooltip svelte-1yghy27")},m(s,r){B(s,e,r),m(e,i)},p(s,r){r[0]&1966080&&t!==(t=`HP Max = ${Jg} + ${s[20]} (from unlocked classes) + ${s[19]} (from unlocking an intermediate class) + ${s[18]} (from combat skills) + ${s[17]} (CON modifier * 2)`)&&Ce(i,t)},d(s){s&&g(e)}}}function Gse(n){let e,t;return{c(){e=E("div"),t=L(n[27]),this.h()},l(i){e=A(i,"DIV",{class:!0});var s=w(e);t=V(s,n[27]),s.forEach(g),this.h()},h(){_(e,"class","big-text svelte-1yghy27")},m(i,s){B(i,e,s),m(e,t)},p(i,s){s[0]&134217728&&Ce(t,i[27])},d(i){i&&g(e)}}}function Kse(n){let e,t=`Attack Speed = ${n[8]} (dex modifier) + ${n[7]} (selected weapon) + ${n[6]} (skills) + ${n[5]} (equipped class)`,i;return{c(){e=E("div"),i=L(t),this.h()},l(s){e=A(s,"DIV",{slot:!0,class:!0});var r=w(e);i=V(r,t),r.forEach(g),this.h()},h(){_(e,"slot","t"),_(e,"class","svelte-1yghy27")},m(s,r){B(s,e,r),m(e,i)},p(s,r){r[0]&480&&t!==(t=`Attack Speed = ${s[8]} (dex modifier) + ${s[7]} (selected weapon) + ${s[6]} (skills) + ${s[5]} (equipped class)`)&&Ce(i,t)},d(s){s&&g(e)}}}function Qse(n){let e,t;return{c(){e=E("div"),t=L(n[29]),this.h()},l(i){e=A(i,"DIV",{class:!0});var s=w(e);t=V(s,n[29]),s.forEach(g),this.h()},h(){_(e,"class","big-text svelte-1yghy27")},m(i,s){B(i,e,s),m(e,t)},p(i,s){s[0]&536870912&&Ce(t,i[29])},d(i){i&&g(e)}}}function Xse(n){let e,t=`Protection = ${Zg} + ${n[16]} (from unlocked classes) + ${n[15]} (from unlocking an intermediate martial class) + ${n[14]} (from equipped class) + ${n[13]} (from skills)`,i;return{c(){e=E("div"),i=L(t),this.h()},l(s){e=A(s,"DIV",{slot:!0,class:!0});var r=w(e);i=V(r,t),r.forEach(g),this.h()},h(){_(e,"slot","t"),_(e,"class","svelte-1yghy27")},m(s,r){B(s,e,r),m(e,i)},p(s,r){r[0]&122880&&t!==(t=`Protection = ${Zg} + ${s[16]} (from unlocked classes) + ${s[15]} (from unlocking an intermediate martial class) + ${s[14]} (from equipped class) + ${s[13]} (from skills)`)&&Ce(i,t)},d(s){s&&g(e)}}}function Yse(n){let e,t;return{c(){e=E("div"),t=L(n[28]),this.h()},l(i){e=A(i,"DIV",{class:!0});var s=w(e);t=V(s,n[28]),s.forEach(g),this.h()},h(){_(e,"class","big-text svelte-1yghy27")},m(i,s){B(i,e,s),m(e,t)},p(i,s){s[0]&268435456&&Ce(t,i[28])},d(i){i&&g(e)}}}function Jse(n){let e,t=`Resilience = ${xg} + ${n[12]} (from unlocked classes) + ${n[11]} (from unlocking an intermediate magic class) ${ws(n[10])} (from equipped class) + ${n[9]} (from skills)`,i;return{c(){e=E("div"),i=L(t),this.h()},l(s){e=A(s,"DIV",{slot:!0,class:!0});var r=w(e);i=V(r,t),r.forEach(g),this.h()},h(){_(e,"slot","t"),_(e,"class","svelte-1yghy27")},m(s,r){B(s,e,r),m(e,i)},p(s,r){r[0]&7680&&t!==(t=`Resilience = ${xg} + ${s[12]} (from unlocked classes) + ${s[11]} (from unlocking an intermediate magic class) ${ws(s[10])} (from equipped class) + ${s[9]} (from skills)`)&&Ce(i,t)},d(s){s&&g(e)}}}function Zse(n){var ne,Q,re;let e,t,i,s,r,l,o,a,c,u,f,h,d,p,v,y,b,S,I,T,C,k,R,O,N,F,W,z,Y,H,K,j,J,Z,q,X=(!n[2]||((ne=n[0])==null?void 0:ne.length)!==Uo||((Q=n[3])==null?void 0:Q.length)!==ml||((re=n[1])==null?void 0:re.length)!==dl)&&kk(n);return O=new ai({props:{tooltipStyle:ns.CENTER,$$slots:{t:[Fse],default:[Wse]},$$scope:{ctx:n}}}),F=new ai({props:{tooltipStyle:ns.CENTER,$$slots:{t:[Hse],default:[jse]},$$scope:{ctx:n}}}),z=new ai({props:{tooltipStyle:ns.LEFT_END,$$slots:{t:[zse],default:[qse]},$$scope:{ctx:n}}}),H=new ai({props:{tooltipStyle:ns.LEFT_END,$$slots:{t:[Kse],default:[Gse]},$$scope:{ctx:n}}}),j=new ai({props:{tooltipStyle:ns.LEFT_END,$$slots:{t:[Xse],default:[Qse]},$$scope:{ctx:n}}}),Z=new ai({props:{tooltipStyle:ns.LEFT_END,hiddenFirst:!0,$$slots:{t:[Jse],default:[Yse]},$$scope:{ctx:n}}}),{c(){e=E("div"),t=E("span"),i=P(),s=E("span"),r=L("AC"),l=P(),o=E("span"),a=L("MS"),c=P(),u=E("span"),f=L("HP Max"),h=P(),d=E("span"),p=L("AS"),v=P(),y=E("span"),b=L("Prt"),S=P(),I=E("span"),T=L("Res"),C=P(),k=E("div"),X&&X.c(),R=P(),ce(O.$$.fragment),N=P(),ce(F.$$.fragment),W=P(),ce(z.$$.fragment),Y=P(),ce(H.$$.fragment),K=P(),ce(j.$$.fragment),J=P(),ce(Z.$$.fragment),this.h()},l(be){e=A(be,"DIV",{class:!0});var le=w(e);t=A(le,"SPAN",{class:!0}),w(t).forEach(g),i=M(le),s=A(le,"SPAN",{class:!0});var he=w(s);r=V(he,"AC"),he.forEach(g),l=M(le),o=A(le,"SPAN",{class:!0});var Ie=w(o);a=V(Ie,"MS"),Ie.forEach(g),c=M(le),u=A(le,"SPAN",{class:!0});var G=w(u);f=V(G,"HP Max"),G.forEach(g),h=M(le),d=A(le,"SPAN",{class:!0});var ve=w(d);p=V(ve,"AS"),ve.forEach(g),v=M(le),y=A(le,"SPAN",{class:!0});var je=w(y);b=V(je,"Prt"),je.forEach(g),S=M(le),I=A(le,"SPAN",{class:!0});var $=w(I);T=V($,"Res"),$.forEach(g),C=M(le),k=A(le,"DIV",{class:!0});var Oe=w(k);X&&X.l(Oe),Oe.forEach(g),R=M(le),ge(O.$$.fragment,le),N=M(le),ge(F.$$.fragment,le),W=M(le),ge(z.$$.fragment,le),Y=M(le),ge(H.$$.fragment,le),K=M(le),ge(j.$$.fragment,le),J=M(le),ge(Z.$$.fragment,le),le.forEach(g),this.h()},h(){_(t,"class","label svelte-1yghy27"),rt(t,"border-left-width","0"),_(s,"class","label svelte-1yghy27"),_(o,"class","label svelte-1yghy27"),_(u,"class","label svelte-1yghy27"),_(d,"class","label svelte-1yghy27"),_(y,"class","label svelte-1yghy27"),_(I,"class","label svelte-1yghy27"),rt(I,"border-right-width","0"),_(k,"class","svelte-1yghy27"),rt(k,"border-left-width","0"),_(e,"class","container svelte-1yghy27")},m(be,le){B(be,e,le),m(e,t),m(e,i),m(e,s),m(s,r),m(e,l),m(e,o),m(o,a),m(e,c),m(e,u),m(u,f),m(e,h),m(e,d),m(d,p),m(e,v),m(e,y),m(y,b),m(e,S),m(e,I),m(I,T),m(e,C),m(e,k),X&&X.m(k,null),m(e,R),ue(O,e,null),m(e,N),ue(F,e,null),m(e,W),ue(z,e,null),m(e,Y),ue(H,e,null),m(e,K),ue(j,e,null),m(e,J),ue(Z,e,null),q=!0},p(be,le){var Oe,ie,_e;!be[2]||((Oe=be[0])==null?void 0:Oe.length)!==Uo||((ie=be[3])==null?void 0:ie.length)!==ml||((_e=be[1])==null?void 0:_e.length)!==dl?X?(X.p(be,le),le[0]&15&&D(X,1)):(X=kk(be),X.c(),D(X,1),X.m(k,null)):X&&(Le(),U(X,1,1,()=>{X=null}),Ve());const he={};le[0]&125829392|le[1]&1026&&(he.$$scope={dirty:le,ctx:be}),O.$set(he);const Ie={};le[0]&6291456|le[1]&1025&&(Ie.$$scope={dirty:le,ctx:be}),F.$set(Ie);const G={};le[0]&1075707904|le[1]&1024&&(G.$$scope={dirty:le,ctx:be}),z.$set(G);const ve={};le[0]&134218208|le[1]&1024&&(ve.$$scope={dirty:le,ctx:be}),H.$set(ve);const je={};le[0]&536993792|le[1]&1024&&(je.$$scope={dirty:le,ctx:be}),j.$set(je);const $={};le[0]&268443136|le[1]&1024&&($.$$scope={dirty:le,ctx:be}),Z.$set($)},i(be){q||(D(X),D(O.$$.fragment,be),D(F.$$.fragment,be),D(z.$$.fragment,be),D(H.$$.fragment,be),D(j.$$.fragment,be),D(Z.$$.fragment,be),q=!0)},o(be){U(X),U(O.$$.fragment,be),U(F.$$.fragment,be),U(z.$$.fragment,be),U(H.$$.fragment,be),U(j.$$.fragment,be),U(Z.$$.fragment,be),q=!1},d(be){be&&g(e),X&&X.d(),fe(O),fe(F),fe(z),fe(H),fe(j),fe(Z)}}}function xse(n,e,t){let i,s,r,l,o,a,c,u,f,h,d,p,v,y,b,S,I,T,C,k,R,O,N,F,W,z,Y,H,K,j,{stats:J}=e,{equippedWeapons:Z}=e,{equippedCombatArts:q}=e,{unlockedClasses:X}=e,{equippedClass:ne}=e,{equippedCombatSkills:Q}=e,{allWeapons:re}=e,{allCombatSkills:be}=e,{selectedWeapon:le}=e,he=0;const Ie=G=>{const ve=parseInt(G.currentTarget.value);isNaN(ve)?t(4,he=0):t(4,he=ve)};return n.$$set=G=>{"stats"in G&&t(34,J=G.stats),"equippedWeapons"in G&&t(0,Z=G.equippedWeapons),"equippedCombatArts"in G&&t(1,q=G.equippedCombatArts),"unlockedClasses"in G&&t(35,X=G.unlockedClasses),"equippedClass"in G&&t(2,ne=G.equippedClass),"equippedCombatSkills"in G&&t(3,Q=G.equippedCombatSkills),"allWeapons"in G&&t(36,re=G.allWeapons),"allCombatSkills"in G&&t(37,be=G.allCombatSkills),"selectedWeapon"in G&&t(38,le=G.selectedWeapon)},n.$$.update=()=>{var G,ve,je,$,Oe,ie,_e,Ee,He,We,Qe;n.$$.dirty[1]&8&&t(8,i=$s(J[Ye.DEX])),n.$$.dirty[1]&32&&t(40,l=re.fullFeatures),n.$$.dirty[1]&640&&t(39,o=(G=l[le])==null?void 0:G.type),n.$$.dirty[1]&640&&t(24,a=((ve=l[le])==null?void 0:ve.acBonus)||0),n.$$.dirty[0]&8|n.$$.dirty[1]&256&&t(23,c=Q.reduce((we,Me)=>{const de=_s[Me],{acBonusCompatibility:Ae,acBonus:Re}=de||{};return Re&&(!Ae||Ae.includes(o))?we+(_s[Me].acBonus||0):we},0)),n.$$.dirty[0]&125829392&&t(32,u=Xg+i+s+r+a+c+he),n.$$.dirty[0]&4&&t(22,f=(($=(je=Xt[ne])==null?void 0:je.whenEquipped)==null?void 0:$.msBonus)||0),n.$$.dirty[0]&6291456&&t(31,d=Yg+f+h),n.$$.dirty[1]&16&&t(20,p=X.reduce((we,Me)=>{var de,Ae;return we+(((Ae=(de=Xt==null?void 0:Xt[Me])==null?void 0:de.unlocks)==null?void 0:Ae.hpBonus)||0)},0)),n.$$.dirty[1]&16&&t(19,v=X.reduce((we,Me)=>{var de;return To.has(Me)?((de=Xt==null?void 0:Xt[Me])==null?void 0:de.canUseMagic)===!0?Math.max(we,e7):Math.max(we,$8):we},0)),n.$$.dirty[0]&8&&t(18,y=Q.reduce((we,Me)=>we+(_s[Me].hpBonus||0),0)),n.$$.dirty[1]&8&&t(17,b=$s(J[Ye.CON])*2),n.$$.dirty[0]&1966080&&t(30,S=Jg+p+v+y+b),n.$$.dirty[1]&16&&t(16,I=X.reduce((we,Me)=>{var de,Ae;return we+((Ae=(de=Xt==null?void 0:Xt[Me])==null?void 0:de.unlocks)==null?void 0:Ae.protectionBonus)||0},0)),n.$$.dirty[1]&16&&t(15,T=X.reduce((we,Me)=>{var de;return To.has(Me)?(de=Xt==null?void 0:Xt[Me])!=null&&de.canUseMagic?we:t7:we},0)),n.$$.dirty[0]&4&&t(14,C=((ie=(Oe=Xt[ne])==null?void 0:Oe.whenEquipped)==null?void 0:ie.protectionBonus)||0),n.$$.dirty[0]&8&&t(13,k=Q.reduce((we,Me)=>we+(_s[Me].protectionBonus||0),0)),n.$$.dirty[0]&122880&&t(29,R=Zg+I+T+C+k),n.$$.dirty[1]&16&&t(12,O=X.reduce((we,Me)=>{var de,Ae;return we+((Ae=(de=Xt==null?void 0:Xt[Me])==null?void 0:de.unlocks)==null?void 0:Ae.protectionBonus)||0},0)),n.$$.dirty[1]&16&&t(11,N=X.reduce((we,Me)=>{var de;return To.has(Me)&&(de=Xt==null?void 0:Xt[Me])!=null&&de.canUseMagic?n7:we},0)),n.$$.dirty[0]&4&&t(10,F=((Ee=(_e=Xt[ne])==null?void 0:_e.whenEquipped)==null?void 0:Ee.resilienceBonus)||0),n.$$.dirty[0]&8&&t(9,W=Q.reduce((we,Me)=>we+(_s[Me].resilienceBonus||0),0)),n.$$.dirty[0]&7680&&t(28,z=xg+O+N+F+W),n.$$.dirty[0]&4&&t(5,Y=((We=(He=Xt[ne])==null?void 0:He.whenEquipped)==null?void 0:We.followUpBonus)||0),n.$$.dirty[1]&160&&t(7,H=((Qe=re.fullFeatures[le])==null?void 0:Qe.followUpBonus)||0),n.$$.dirty[1]&64&&t(6,K=be.fullArray.reduce((we,Me)=>we+(be.fullFeatures[Me].followUpBonus||0),0)),n.$$.dirty[0]&480&&t(27,j=i+H+K+Y)},t(26,s=0),t(25,r=0),t(21,h=0),[Z,q,ne,Q,he,Y,K,H,i,W,F,N,O,k,C,T,I,b,y,v,p,h,f,c,a,r,s,j,z,R,S,d,u,Ie,J,X,re,be,le,o,l]}class $se extends nt{constructor(e){super(),it(this,e,xse,Zse,Ct,{stats:34,equippedWeapons:0,equippedCombatArts:1,unlockedClasses:35,equippedClass:2,equippedCombatSkills:3,allWeapons:36,allCombatSkills:37,selectedWeapon:38},null,[-1,-1])}}function Dk(n,e,t){const i=n.slice();return i[16]=e[t],i}function ere(n){let e,t;return e=new G4({props:{isUnlocked:n[0][n[3]]===jn.PROFICIENT||n[0][n[3]]===jn.AWFUL,isMastered:n[0][n[3]]===jn.EXPERT,onClick:n[13],unlockedFilter:n[0][n[3]]===jn.PROFICIENT?"sepia(100%) saturate(1000%) brightness(45%) hue-rotate(174deg)":"sepia(100%) saturate(1000%) brightness(45%) hue-rotate(287deg)"}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s&9&&(r.isUnlocked=i[0][i[3]]===jn.PROFICIENT||i[0][i[3]]===jn.AWFUL),s&9&&(r.isMastered=i[0][i[3]]===jn.EXPERT),s&12&&(r.onClick=i[13]),s&9&&(r.unlockedFilter=i[0][i[3]]===jn.PROFICIENT?"sepia(100%) saturate(1000%) brightness(45%) hue-rotate(174deg)":"sepia(100%) saturate(1000%) brightness(45%) hue-rotate(287deg)"),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function tre(n){let e,t;return{c(){e=E("div"),t=L("From Master/Current Class"),this.h()},l(i){e=A(i,"DIV",{slot:!0});var s=w(e);t=V(s,"From Master/Current Class"),s.forEach(g),this.h()},h(){_(e,"slot","t")},m(i,s){B(i,e,s),m(e,t)},p:Ke,d(i){i&&g(e)}}}function Nk(n){let e,t,i,s=n[6],r=[];for(let l=0;l<s.length;l+=1)r[l]=Pk(Dk(n,s,l));return{c(){e=E("select");for(let l=0;l<r.length;l+=1)r[l].c();this.h()},l(l){e=A(l,"SELECT",{name:!0});var o=w(e);for(let a=0;a<r.length;a+=1)r[a].l(o);o.forEach(g),this.h()},h(){_(e,"name","stat-type")},m(l,o){B(l,e,o);for(let a=0;a<r.length;a+=1)r[a].m(e,null);t||(i=se(e,"change",n[15]),t=!0)},p(l,o){if(o&96){s=l[6];let a;for(a=0;a<s.length;a+=1){const c=Dk(l,s,a);r[a]?r[a].p(c,o):(r[a]=Pk(c),r[a].c(),r[a].m(e,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=s.length}},d(l){l&&g(e),Ft(r,l),t=!1,i()}}}function Pk(n){let e,t=zs[n[16]]+"",i,s,r,l;return{c(){e=E("option"),i=L(t),s=P(),this.h()},l(o){e=A(o,"OPTION",{});var a=w(e);i=V(a,t),s=M(a),a.forEach(g),this.h()},h(){e.__value=r=n[16],e.value=e.__value,e.selected=l=n[5]===n[16]},m(o,a){B(o,e,a),m(e,i),m(e,s)},p(o,a){a&64&&t!==(t=zs[o[16]]+"")&&Ce(i,t),a&64&&r!==(r=o[16])&&(e.__value=r,e.value=e.__value),a&96&&l!==(l=o[5]===o[16])&&(e.selected=l)},d(o){o&&g(e)}}}function Mk(n){let e,t=`(${zs[n[5]]})`,i;return{c(){e=E("span"),i=L(t)},l(s){e=A(s,"SPAN",{});var r=w(e);i=V(r,t),r.forEach(g)},m(s,r){B(s,e,r),m(e,i)},p(s,r){r&32&&t!==(t=`(${zs[s[5]]})`)&&Ce(i,t)},d(s){s&&g(e)}}}function nre(n){let e,t,i,s,r,l,o=n[9]+n[8]+n[7]+"",a,c,u=`${$h[n[3]]} `,f,h,d=Array.isArray(n[6]),p,v=!Array.isArray(n[6]),y,b,S;t=new ai({props:{disabled:n[1][n[3]]===void 0,$$slots:{t:[tre],default:[ere]},$$scope:{ctx:n}}});let I=d&&Nk(n),T=v&&Mk(n);return{c(){e=E("div"),ce(t.$$.fragment),i=P(),s=E("div"),r=E("span"),l=E("span"),a=L(o),c=P(),f=L(u),h=P(),I&&I.c(),p=P(),T&&T.c(),this.h()},l(C){e=A(C,"DIV",{class:!0});var k=w(e);ge(t.$$.fragment,k),i=M(k),s=A(k,"DIV",{class:!0});var R=w(s);r=A(R,"SPAN",{class:!0});var O=w(r);l=A(O,"SPAN",{class:!0});var N=w(l);a=V(N,o),N.forEach(g),c=M(O),f=V(O,u),O.forEach(g),h=M(R),I&&I.l(R),p=M(R),T&&T.l(R),R.forEach(g),k.forEach(g),this.h()},h(){_(l,"class","total"),_(r,"class","label-text svelte-7dm9fu"),_(s,"class","label"),_(e,"class","container svelte-7dm9fu")},m(C,k){B(C,e,k),ue(t,e,null),m(e,i),m(e,s),m(s,r),m(r,l),m(l,a),m(r,c),m(r,f),m(s,h),I&&I.m(s,null),m(s,p),T&&T.m(s,null),y=!0,b||(S=se(r,"click",n[14]),b=!0)},p(C,[k]){const R={};k&10&&(R.disabled=C[1][C[3]]===void 0),k&524301&&(R.$$scope={dirty:k,ctx:C}),t.$set(R),(!y||k&896)&&o!==(o=C[9]+C[8]+C[7]+"")&&Ce(a,o),(!y||k&8)&&u!==(u=`${$h[C[3]]} `)&&Ce(f,u),k&64&&(d=Array.isArray(C[6])),d?I?I.p(C,k):(I=Nk(C),I.c(),I.m(s,p)):I&&(I.d(1),I=null),k&64&&(v=!Array.isArray(C[6])),v?T?T.p(C,k):(T=Mk(C),T.c(),T.m(s,null)):T&&(T.d(1),T=null)},i(C){y||(D(t.$$.fragment,C),y=!0)},o(C){U(t.$$.fragment,C),y=!1},d(C){C&&g(e),fe(t),I&&I.d(),T&&T.d(),b=!1,S()}}}function ire(n,e,t){let i,s,r,l,o,{stats:a}=e,{skillProficiency:c}=e,{classProficiencies:u}=e,{skillBonus:f}=e,{onToggleSkillProficiency:h}=e,{skill:d}=e,{playerName:p}=e,v=Array.isArray(l)?l[0]:l;const y=()=>h(d),b=()=>nl([Et.d20],{modifier:[s+r+o],chatEntryOnRes:{playerName:p,rollName:$h[d],rollBonus:Xs([s+r+o])},db:i}),S=I=>{t(5,v=I.currentTarget.value)};return n.$$set=I=>{"stats"in I&&t(11,a=I.stats),"skillProficiency"in I&&t(0,c=I.skillProficiency),"classProficiencies"in I&&t(1,u=I.classProficiencies),"skillBonus"in I&&t(12,f=I.skillBonus),"onToggleSkillProficiency"in I&&t(2,h=I.onToggleSkillProficiency),"skill"in I&&t(3,d=I.skill),"playerName"in I&&t(4,p=I.playerName)},n.$$.update=()=>{n.$$.dirty&4104&&t(9,s=f[d]||0),n.$$.dirty&9&&t(8,r=c[d]!==jn.NONE&&c[d]!==void 0?j4*(c[d]||1):0),n.$$.dirty&8&&t(6,l=E8[d]),n.$$.dirty&64&&t(5,v=Array.isArray(l)?l[0]:l),n.$$.dirty&2080&&t(7,o=$s(a[v]))},t(10,i=Bn(hs.DB)),[c,u,h,d,p,v,l,o,r,s,i,a,f,y,b,S]}class sre extends nt{constructor(e){super(),it(this,e,ire,nre,Ct,{stats:11,skillProficiency:0,classProficiencies:1,skillBonus:12,onToggleSkillProficiency:2,skill:3,playerName:4})}}function Bk(n,e,t){const i=n.slice();return i[9]=e[t],i}function Lk(n){let e,t;return e=new sre({props:{playerName:n[3],skill:n[9],stats:n[0],skillBonus:n[1],classProficiencies:n[4],skillProficiency:n[5],onToggleSkillProficiency:n[2]}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s&8&&(r.playerName=i[3]),s&1&&(r.stats=i[0]),s&2&&(r.skillBonus=i[1]),s&16&&(r.classProficiencies=i[4]),s&32&&(r.skillProficiency=i[5]),s&4&&(r.onToggleSkillProficiency=i[2]),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function rre(n){let e,t,i,s,r,l,o;t=new gc({props:{label:"Skills"}});let a=Object.values(sn),c=[];for(let f=0;f<a.length;f+=1)c[f]=Lk(Bk(n,a,f));const u=f=>U(c[f],1,1,()=>{c[f]=null});return{c(){e=E("div"),ce(t.$$.fragment),i=P(),s=E("div"),r=P(),l=E("div");for(let f=0;f<c.length;f+=1)c[f].c();this.h()},l(f){e=A(f,"DIV",{class:!0});var h=w(e);ge(t.$$.fragment,h),i=M(h),s=A(h,"DIV",{class:!0}),w(s).forEach(g),r=M(h),l=A(h,"DIV",{class:!0});var d=w(l);for(let p=0;p<c.length;p+=1)c[p].l(d);d.forEach(g),h.forEach(g),this.h()},h(){_(s,"class","divider svelte-1bsm0kx"),_(l,"class","skills svelte-1bsm0kx"),_(e,"class","container svelte-1bsm0kx")},m(f,h){B(f,e,h),ue(t,e,null),m(e,i),m(e,s),m(e,r),m(e,l);for(let d=0;d<c.length;d+=1)c[d].m(l,null);o=!0},p(f,[h]){if(h&63){a=Object.values(sn);let d;for(d=0;d<a.length;d+=1){const p=Bk(f,a,d);c[d]?(c[d].p(p,h),D(c[d],1)):(c[d]=Lk(p),c[d].c(),D(c[d],1),c[d].m(l,null))}for(Le(),d=a.length;d<c.length;d+=1)u(d);Ve()}},i(f){if(!o){D(t.$$.fragment,f);for(let h=0;h<a.length;h+=1)D(c[h]);o=!0}},o(f){U(t.$$.fragment,f),c=c.filter(Boolean);for(let h=0;h<c.length;h+=1)U(c[h]);o=!1},d(f){f&&g(e),fe(t),Ft(c,f)}}}function lre(n,e,t){let i,s,{stats:r=Ev}=e,{skillProficiency:l=H4}=e,{skillBonus:o=q4}=e,{onToggleSkillProficiency:a}=e,{equippedClass:c}=e,{masteredClasses:u}=e,{playerName:f}=e;return n.$$set=h=>{"stats"in h&&t(0,r=h.stats),"skillProficiency"in h&&t(6,l=h.skillProficiency),"skillBonus"in h&&t(1,o=h.skillBonus),"onToggleSkillProficiency"in h&&t(2,a=h.onToggleSkillProficiency),"equippedClass"in h&&t(7,c=h.equippedClass),"masteredClasses"in h&&t(8,u=h.masteredClasses),"playerName"in h&&t(3,f=h.playerName)},n.$$.update=()=>{n.$$.dirty&384&&t(4,i={...c?Xt[c].whenEquipped.playerSkills:{},...u.reduce((h,d)=>{var p;return h={...h,...(p=Xt[d].whenMastered)==null?void 0:p.playerSkills},h},{})}),n.$$.dirty&80&&t(5,s=Object.keys(i).reduce((h,d)=>(h[d]===void 0?h[d]=i[d]:h[d]=Math.max(h[d],i[d]),h),{...l}))},[r,o,a,f,i,s,l,c,u]}class ore extends nt{constructor(e){super(),it(this,e,lre,rre,Ct,{stats:0,skillProficiency:6,skillBonus:1,onToggleSkillProficiency:2,equippedClass:7,masteredClasses:8,playerName:3})}}function Vk(n,e,t){const i=n.slice();return i[17]=e[t],i}function Uk(n,e,t){const i=n.slice();return i[20]=e[t],i}function Wk(n){let e,t,i=dg[n[20]]+"",s,r,l,o=$s(n[0][n[20]])+"",a,c,u,f,h,d;function p(){return n[9](n[20])}function v(...y){return n[10](n[20],...y)}return{c(){e=E("div"),t=E("button"),s=L(i),r=P(),l=E("div"),a=L(o),c=P(),u=E("input"),this.h()},l(y){e=A(y,"DIV",{class:!0});var b=w(e);t=A(b,"BUTTON",{class:!0});var S=w(t);s=V(S,i),S.forEach(g),r=M(b),l=A(b,"DIV",{class:!0});var I=w(l);a=V(I,o),I.forEach(g),c=M(b),u=A(b,"INPUT",{class:!0,type:!0}),b.forEach(g),this.h()},h(){_(t,"class","label svelte-qeu3p9"),_(l,"class","mod svelte-qeu3p9"),_(u,"class","value svelte-qeu3p9"),u.value=f=typeof n[0][n[20]]=="number"?n[0][n[20]]:0,_(u,"type","number"),_(e,"class","stat-container svelte-qeu3p9")},m(y,b){B(y,e,b),m(e,t),m(t,s),m(e,r),m(e,l),m(l,a),m(e,c),m(e,u),h||(d=[se(t,"click",p),se(u,"input",v)],h=!0)},p(y,b){n=y,b&1&&i!==(i=dg[n[20]]+"")&&Ce(s,i),b&1&&o!==(o=$s(n[0][n[20]])+"")&&Ce(a,o),b&1&&f!==(f=typeof n[0][n[20]]=="number"?n[0][n[20]]:0)&&u.value!==f&&(u.value=f)},d(y){y&&g(e),h=!1,on(d)}}}function Fk(n){let e,t;return e=new ai({props:{$$slots:{t:[cre],default:[are]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s&8388626&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function are(n){let e,t,i,s;return{c(){e=E("div"),t=E("img"),this.h()},l(r){e=A(r,"DIV",{class:!0});var l=w(e);t=A(l,"IMG",{class:!0,src:!0,alt:!0}),l.forEach(g),this.h()},h(){var r;_(t,"class","crest-image svelte-qeu3p9"),No(t.src,i=n[4].image)||_(t,"src",i),_(t,"alt",s=(r=n[1])==null?void 0:r.type),rt(t,"border-color",n[1].isMajor?"slateblue":"lightskyblue"),_(e,"class","image-container")},m(r,l){B(r,e,l),m(e,t)},p(r,l){var o;l&16&&!No(t.src,i=r[4].image)&&_(t,"src",i),l&2&&s!==(s=(o=r[1])==null?void 0:o.type)&&_(t,"alt",s),l&2&&rt(t,"border-color",r[1].isMajor?"slateblue":"lightskyblue")},d(r){r&&g(e)}}}function cre(n){var b,S,I,T;let e,t,i,s,r=((b=n[4])==null?void 0:b.label)+"",l,o,a=Kb((S=n[1])==null?void 0:S.isMajor)+"",c,u,f=n[4].activationDC[x_((I=n[1])==null?void 0:I.isMajor)]+"",h,d,p,v=`${(T=n[4])==null?void 0:T.description}`,y;return{c(){e=E("div"),t=E("div"),i=E("u"),s=L("Crest of "),l=L(r),o=L(" ("),c=L(a),u=L(`,
							DC `),h=L(f),d=L(")"),p=P(),y=L(v),this.h()},l(C){e=A(C,"DIV",{slot:!0});var k=w(e);t=A(k,"DIV",{});var R=w(t);i=A(R,"U",{});var O=w(i);s=V(O,"Crest of "),l=V(O,r),o=V(O," ("),c=V(O,a),u=V(O,`,
							DC `),h=V(O,f),d=V(O,")"),O.forEach(g),R.forEach(g),p=M(k),y=V(k,v),k.forEach(g),this.h()},h(){_(e,"slot","t")},m(C,k){B(C,e,k),m(e,t),m(t,i),m(i,s),m(i,l),m(i,o),m(i,c),m(i,u),m(i,h),m(i,d),m(e,p),m(e,y)},p(C,k){var R,O,N,F;k&16&&r!==(r=((R=C[4])==null?void 0:R.label)+"")&&Ce(l,r),k&2&&a!==(a=Kb((O=C[1])==null?void 0:O.isMajor)+"")&&Ce(c,a),k&18&&f!==(f=C[4].activationDC[x_((N=C[1])==null?void 0:N.isMajor)]+"")&&Ce(h,f),k&16&&v!==(v=`${(F=C[4])==null?void 0:F.description}`)&&Ce(y,v)},d(C){C&&g(e)}}}function jk(n){var l;let e,t=((l=Ds[n[17]])==null?void 0:l.label)+"",i,s,r;return{c(){e=E("option"),i=L(t),s=P(),this.h()},l(o){e=A(o,"OPTION",{});var a=w(e);i=V(a,t),s=M(a),a.forEach(g),this.h()},h(){var o;e.__value=n[17],e.value=e.__value,e.selected=r=((o=n[1])==null?void 0:o.type)===n[17]},m(o,a){B(o,e,a),m(e,i),m(e,s)},p(o,a){var c;a&2&&r!==(r=((c=o[1])==null?void 0:c.type)===o[17])&&(e.selected=r)},d(o){o&&g(e)}}}function ure(n){var Y;let e,t,i,s,r,l,o,a,c,u,f,h,d,p,v,y="Major",b,S,I="Minor",T,C,k,R;t=new gc({props:{label:"Stats"}});let O=Object.keys(n[0]),N=[];for(let H=0;H<O.length;H+=1)N[H]=Wk(Uk(n,O,H));let F=((Y=n[4])==null?void 0:Y.image)&&Fk(n),W=Object.keys(un),z=[];for(let H=0;H<W.length;H+=1)z[H]=jk(Vk(n,W,H));return{c(){e=E("div"),ce(t.$$.fragment),i=P();for(let H=0;H<N.length;H+=1)N[H].c();s=P(),r=E("div"),F&&F.c(),l=P(),o=E("select"),a=E("option"),c=L("Crest?");for(let H=0;H<z.length;H+=1)z[H].c();f=P(),h=E("select"),d=E("option"),p=L("Major/Minor?"),v=E("option"),b=L(y),S=E("option"),T=L(I),this.h()},l(H){e=A(H,"DIV",{class:!0});var K=w(e);ge(t.$$.fragment,K),i=M(K);for(let re=0;re<N.length;re+=1)N[re].l(K);s=M(K),r=A(K,"DIV",{class:!0});var j=w(r);F&&F.l(j),l=M(j),o=A(j,"SELECT",{name:!0});var J=w(o);a=A(J,"OPTION",{});var Z=w(a);c=V(Z,"Crest?"),Z.forEach(g);for(let re=0;re<z.length;re+=1)z[re].l(J);J.forEach(g),f=M(j),h=A(j,"SELECT",{name:!0});var q=w(h);d=A(q,"OPTION",{});var X=w(d);p=V(X,"Major/Minor?"),X.forEach(g),v=A(q,"OPTION",{});var ne=w(v);b=V(ne,y),ne.forEach(g),S=A(q,"OPTION",{});var Q=w(S);T=V(Q,I),Q.forEach(g),q.forEach(g),j.forEach(g),K.forEach(g),this.h()},h(){a.__value="",a.value=a.__value,a.selected=u=!n[1].type,_(o,"name","crest"),d.__value="none",d.value=d.__value,v.__value=hl.MAJOR,v.value=v.__value,S.__value=hl.MINOR,S.value=S.__value,_(h,"name","major-minor"),_(r,"class","crest svelte-qeu3p9"),_(e,"class","container svelte-qeu3p9")},m(H,K){B(H,e,K),ue(t,e,null),m(e,i);for(let j=0;j<N.length;j+=1)N[j].m(e,null);m(e,s),m(e,r),F&&F.m(r,null),m(r,l),m(r,o),m(o,a),m(a,c);for(let j=0;j<z.length;j+=1)z[j].m(o,null);m(r,f),m(r,h),m(h,d),m(d,p),m(h,v),m(v,b),m(h,S),m(S,T),n[12](h),C=!0,k||(R=[se(o,"change",n[11]),se(h,"change",n[13])],k=!0)},p(H,[K]){var j;if(K&97){O=Object.keys(H[0]);let J;for(J=0;J<O.length;J+=1){const Z=Uk(H,O,J);N[J]?N[J].p(Z,K):(N[J]=Wk(Z),N[J].c(),N[J].m(e,s))}for(;J<N.length;J+=1)N[J].d(1);N.length=O.length}if((j=H[4])!=null&&j.image?F?(F.p(H,K),K&16&&D(F,1)):(F=Fk(H),F.c(),D(F,1),F.m(r,l)):F&&(Le(),U(F,1,1,()=>{F=null}),Ve()),(!C||K&2&&u!==(u=!H[1].type))&&(a.selected=u),K&2){W=Object.keys(un);let J;for(J=0;J<W.length;J+=1){const Z=Vk(H,W,J);z[J]?z[J].p(Z,K):(z[J]=jk(Z),z[J].c(),z[J].m(o,null))}for(;J<z.length;J+=1)z[J].d(1);z.length=W.length}},i(H){C||(D(t.$$.fragment,H),D(F),C=!0)},o(H){U(t.$$.fragment,H),U(F),C=!1},d(H){H&&g(e),fe(t),Ft(N,H),F&&F.d(),Ft(z,H),n[12](null),k=!1,on(R)}}}function fre(n,e,t){let i,s;Bn(hs.MODAL);let{stats:r=Ev}=e,{onUpdatePlayerStats:l}=e,{playerName:o}=e,{playerCrest:a}=e,{onUpdateCrest:c}=e,u={};const f=S=>{const I=$s(r[S]);nl([Et.d20],{modifier:[I],chatEntryOnRes:{playerName:o,rollName:dg[S],rollBonus:I},db:i})},h=(S,I)=>{l({...r,[S]:isNaN(I)?0:I})},d=S=>f(S),p=(S,I)=>h(S,parseInt(I.currentTarget.value)),v=S=>{c({type:S.currentTarget.value,isMajor:!1})};function y(S){Vt[S?"unshift":"push"](()=>{u=S,t(3,u),t(1,a)})}const b=S=>c({...a,isMajor:S.currentTarget.value==="MAJOR"});return n.$$set=S=>{"stats"in S&&t(0,r=S.stats),"onUpdatePlayerStats"in S&&t(7,l=S.onUpdatePlayerStats),"playerName"in S&&t(8,o=S.playerName),"playerCrest"in S&&t(1,a=S.playerCrest),"onUpdateCrest"in S&&t(2,c=S.onUpdateCrest)},n.$$.update=()=>{n.$$.dirty&10&&u&&t(3,u.value=a.type?a!=null&&a.isMajor?hl.MAJOR:hl.MINOR:"none",u),n.$$.dirty&2&&t(4,s=Ds[a==null?void 0:a.type]||{})},i=Bn(hs.DB),[r,a,c,u,s,f,h,l,o,d,p,v,y,b]}class hre extends nt{constructor(e){super(),it(this,e,fre,ure,Ct,{stats:0,onUpdatePlayerStats:7,playerName:8,playerCrest:1,onUpdateCrest:2})}}function Hk(n,e,t){const i=n.slice();return i[14]=e[t],i}function qk(n){let e,t,i,s=n[0],r=[];for(let l=0;l<s.length;l+=1)r[l]=zk(Hk(n,s,l));return{c(){e=E("select");for(let l=0;l<r.length;l+=1)r[l].c()},l(l){e=A(l,"SELECT",{});var o=w(e);for(let a=0;a<r.length;a+=1)r[a].l(o);o.forEach(g)},m(l,o){B(l,e,o);for(let a=0;a<r.length;a+=1)r[a].m(e,null);t||(i=se(e,"change",n[10]),t=!0)},p(l,o){if(o&19){s=l[0];let a;for(a=0;a<s.length;a+=1){const c=Hk(l,s,a);r[a]?r[a].p(c,o):(r[a]=zk(c),r[a].c(),r[a].m(e,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=s.length}},d(l){l&&g(e),Ft(r,l),t=!1,i()}}}function zk(n){let e,t=n[1][n[14]].label+"",i,s,r=Au(n[1][n[14]])+"",l,o,a,c;return{c(){e=E("option"),i=L(t),s=L(": "),l=L(r),o=P(),this.h()},l(u){e=A(u,"OPTION",{});var f=w(e);i=V(f,t),s=V(f,": "),l=V(f,r),o=M(f),f.forEach(g),this.h()},h(){e.__value=a=n[14],e.value=e.__value,e.selected=c=n[14]===n[4]},m(u,f){B(u,e,f),m(e,i),m(e,s),m(e,l),m(e,o)},p(u,f){f&3&&t!==(t=u[1][u[14]].label+"")&&Ce(i,t),f&3&&r!==(r=Au(u[1][u[14]])+"")&&Ce(l,r),f&1&&a!==(a=u[14])&&(e.__value=a,e.value=e.__value),f&17&&c!==(c=u[14]===u[4])&&(e.selected=c)},d(u){u&&g(e)}}}function Gk(n){let e,t,i,s,r,l,o;return{c(){e=E("div"),t=E("div"),i=L("Reason:"),s=P(),r=E("textarea"),this.h()},l(a){e=A(a,"DIV",{class:!0});var c=w(e);t=A(c,"DIV",{});var u=w(t);i=V(u,"Reason:"),u.forEach(g),s=M(c),r=A(c,"TEXTAREA",{id:!0,type:!0,rows:!0,class:!0}),w(r).forEach(g),c.forEach(g),this.h()},h(){_(r,"id","custom-weapon-prompt-input"),_(r,"type","text"),_(r,"rows",3),_(r,"class","svelte-96eo25"),_(e,"class","content")},m(a,c){B(a,e,c),m(e,t),m(t,i),m(e,s),m(e,r),n[11](r),Ms(r,n[3]),l||(o=se(r,"input",n[12]),l=!0)},p(a,c){c&8&&Ms(r,a[3])},d(a){a&&g(e),n[11](null),l=!1,o()}}}function Kk(n){var o;let e,t,i,s,r=((o=n[2][n[0]])==null?void 0:o.reason)+"",l;return{c(){e=E("div"),t=E("b"),i=L("Current Reason:"),s=P(),l=L(r),this.h()},l(a){e=A(a,"DIV",{class:!0});var c=w(e);t=A(c,"B",{});var u=w(t);i=V(u,"Current Reason:"),u.forEach(g),s=M(c),l=V(c,r),c.forEach(g),this.h()},h(){_(e,"class","content")},m(a,c){B(a,e,c),m(e,t),m(t,i),m(e,s),m(e,l)},p(a,c){var u;c&5&&r!==(r=((u=a[2][a[0]])==null?void 0:u.reason)+"")&&Ce(l,r)},d(a){a&&g(e)}}}function dre(n){let e,t,i=n[5]?"Removing":"Adding",s,r,l,o=Array.isArray(n[0]),a,c,u,f,h,d=n[5]?"Remove":"Submit",p,v,y,b=o&&qk(n),S=!n[5]&&Gk(n),I=n[5]&&Kk(n);return{c(){e=E("div"),t=E("h1"),s=L(i),r=L(" custom weapon:"),l=P(),b&&b.c(),a=P(),S&&S.c(),c=P(),I&&I.c(),u=P(),f=E("button"),h=L("Click to "),p=L(d),this.h()},l(T){e=A(T,"DIV",{class:!0});var C=w(e);t=A(C,"H1",{});var k=w(t);s=V(k,i),r=V(k," custom weapon:"),k.forEach(g),l=M(C),b&&b.l(C),a=M(C),S&&S.l(C),c=M(C),I&&I.l(C),u=M(C),f=A(C,"BUTTON",{class:!0});var R=w(f);h=V(R,"Click to "),p=V(R,d),R.forEach(g),C.forEach(g),this.h()},h(){_(f,"class","action svelte-96eo25"),_(e,"class","container svelte-96eo25")},m(T,C){B(T,e,C),m(e,t),m(t,s),m(t,r),m(e,l),b&&b.m(e,null),m(e,a),S&&S.m(e,null),m(e,c),I&&I.m(e,null),m(e,u),m(e,f),m(f,h),m(f,p),v||(y=se(f,"click",function(){Mn(n[7])&&n[7].apply(this,arguments)}),v=!0)},p(T,[C]){n=T,C&32&&i!==(i=n[5]?"Removing":"Adding")&&Ce(s,i),C&1&&(o=Array.isArray(n[0])),o?b?b.p(n,C):(b=qk(n),b.c(),b.m(e,a)):b&&(b.d(1),b=null),n[5]?S&&(S.d(1),S=null):S?S.p(n,C):(S=Gk(n),S.c(),S.m(e,c)),n[5]?I?I.p(n,C):(I=Kk(n),I.c(),I.m(e,u)):I&&(I.d(1),I=null),C&32&&d!==(d=n[5]?"Remove":"Submit")&&Ce(p,d)},i:Ke,o:Ke,d(T){T&&g(e),b&&b.d(),S&&S.d(),I&&I.d(),v=!1,y()}}}function mre(n,e,t){let i,s;const{close:r}=Bn(hs.MODAL);let{defaultReason:l=""}=e,{weapon:o}=e,{weaponsToFeatures:a}=e,{customWeapons:c}=e,{onUpdateCustomWeapons:u}=e,f=l,h,d=Array.isArray(o)?o[0]:o;Mi(()=>{h==null||h.select()});const p=b=>t(4,d=b.currentTarget.value);function v(b){Vt[b?"unshift":"push"](()=>{h=b,t(6,h)})}function y(){f=this.value,t(3,f)}return n.$$set=b=>{"defaultReason"in b&&t(8,l=b.defaultReason),"weapon"in b&&t(0,o=b.weapon),"weaponsToFeatures"in b&&t(1,a=b.weaponsToFeatures),"customWeapons"in b&&t(2,c=b.customWeapons),"onUpdateCustomWeapons"in b&&t(9,u=b.onUpdateCustomWeapons)},n.$$.update=()=>{n.$$.dirty&5&&t(5,i=Array.isArray(o)?!1:c[o]),n.$$.dirty&572&&t(7,s=()=>{if(i){const{[d]:b,...S}=c;u(S)}else u({...c,[d]:{...c[d],reason:f}});r()})},[o,a,c,f,d,i,h,s,l,u,p,v,y]}class Qk extends nt{constructor(e){super(),it(this,e,mre,dre,Ct,{defaultReason:8,weapon:0,weaponsToFeatures:1,customWeapons:2,onUpdateCustomWeapons:9})}}function pre(n){let e,t=n[3].weaponsToLabel[n[0]]+"",i,s;return{c(){e=E("div"),i=L(t),this.h()},l(r){e=A(r,"DIV",{class:!0});var l=w(e);i=V(l,t),l.forEach(g),this.h()},h(){_(e,"class",s=Ze(Zi("label",{magic:n[4],custom:n[6]}))+" svelte-12aohl3")},m(r,l){B(r,e,l),m(e,i)},p(r,l){l&9&&t!==(t=r[3].weaponsToLabel[r[0]]+"")&&Ce(i,t),l&80&&s!==(s=Ze(Zi("label",{magic:r[4],custom:r[6]}))+" svelte-12aohl3")&&_(e,"class",s)},d(r){r&&g(e)}}}function gre(n){let e,t=Au(n[3].fullFeatures[n[0]])+"",i,s,r,l=n[5][n[0]].reason?`(${n[5][n[0]].reason})`:"",o;return{c(){e=E("div"),i=L(t),s=P(),r=E("span"),o=L(l),this.h()},l(a){e=A(a,"DIV",{slot:!0});var c=w(e);i=V(c,t),s=M(c),r=A(c,"SPAN",{});var u=w(r);o=V(u,l),u.forEach(g),c.forEach(g),this.h()},h(){rt(r,"color","#9c8e8e"),_(e,"slot","t")},m(a,c){B(a,e,c),m(e,i),m(e,s),m(e,r),m(r,o)},p(a,c){c&9&&t!==(t=Au(a[3].fullFeatures[a[0]])+"")&&Ce(i,t),c&33&&l!==(l=a[5][a[0]].reason?`(${a[5][a[0]].reason})`:"")&&Ce(o,l)},d(a){a&&g(e)}}}function Xk(n){let e,t,i;return t=new km({props:{isEquipped:n[1].includes(n[0]),onClick:n[21],isVisible:n[1].length<Uo||n[1].includes(n[0])}}),{c(){e=E("div"),ce(t.$$.fragment),this.h()},l(s){e=A(s,"DIV",{class:!0});var r=w(e);ge(t.$$.fragment,r),r.forEach(g),this.h()},h(){_(e,"class","equip-button svelte-12aohl3")},m(s,r){B(s,e,r),ue(t,e,null),i=!0},p(s,r){const l={};r&3&&(l.isEquipped=s[1].includes(s[0])),r&1029&&(l.onClick=s[21]),r&3&&(l.isVisible=s[1].length<Uo||s[1].includes(s[0])),t.$set(l)},i(s){i||(D(t.$$.fragment,s),i=!0)},o(s){U(t.$$.fragment,s),i=!1},d(s){s&&g(e),fe(t)}}}function Yk(n){let e,t=n[7],i,s,r,l=Jk(n);return{c(){e=E("div"),l.c(),i=L(`
			/`),s=E("span"),r=L(n[7]),this.h()},l(o){e=A(o,"DIV",{class:!0});var a=w(e);l.l(a),i=V(a,`
			/`),s=A(a,"SPAN",{});var c=w(s);r=V(c,n[7]),c.forEach(g),a.forEach(g),this.h()},h(){rt(s,"width","15px"),_(e,"class","equip-button svelte-12aohl3")},m(o,a){B(o,e,a),l.m(e,null),m(e,i),m(e,s),m(s,r)},p(o,a){a&128&&Ct(t,t=o[7])?(l.d(1),l=Jk(o),l.c(),l.m(e,i)):l.p(o,a),a&128&&Ce(r,o[7])},d(o){o&&g(e),l.d(o)}}}function Jk(n){let e,t,i,s;return{c(){e=E("input"),this.h()},l(r){e=A(r,"INPUT",{class:!0,type:!0,min:!0}),this.h()},h(){_(e,"class",t=Ze("count "+(n[9]===0?"bad":n[9]<=Math.ceil(n[7]/3)?"danger":""))+" svelte-12aohl3"),_(e,"type","number"),_(e,"min","0"),e.value=n[9]},m(r,l){B(r,e,l),i||(s=se(e,"change",n[22]),i=!0)},p(r,l){l&640&&t!==(t=Ze("count "+(r[9]===0?"bad":r[9]<=Math.ceil(r[7]/3)?"danger":""))+" svelte-12aohl3")&&_(e,"class",t),l&512&&e.value!==r[9]&&(e.value=r[9])},d(r){r&&g(e),i=!1,s()}}}function vre(n){let e,t,i,s,r;t=new ai({props:{tooltipStyle:ns.CENTER,timeout:300,$$slots:{t:[gre],default:[pre]},$$scope:{ctx:n}}});let l=!n[4]&&Xk(n),o=n[4]&&Yk(n);return{c(){e=E("div"),ce(t.$$.fragment),i=P(),l&&l.c(),s=P(),o&&o.c(),this.h()},l(a){e=A(a,"DIV",{class:!0});var c=w(e);ge(t.$$.fragment,c),i=M(c),l&&l.l(c),s=M(c),o&&o.l(c),c.forEach(g),this.h()},h(){_(e,"class","container svelte-12aohl3")},m(a,c){B(a,e,c),ue(t,e,null),m(e,i),l&&l.m(e,null),m(e,s),o&&o.m(e,null),r=!0},p(a,[c]){const u={};c&16777337&&(u.$$scope={dirty:c,ctx:a}),t.$set(u),a[4]?l&&(Le(),U(l,1,1,()=>{l=null}),Ve()):l?(l.p(a,c),c&16&&D(l,1)):(l=Xk(a),l.c(),D(l,1),l.m(e,s)),a[4]?o?o.p(a,c):(o=Yk(a),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},i(a){r||(D(t.$$.fragment,a),D(l),r=!0)},o(a){U(t.$$.fragment,a),U(l),r=!1},d(a){a&&g(e),fe(t),l&&l.d(),o&&o.d()}}}function bre(n,e,t){let i,s,r,l,o,a,c,u,f,{weapon:h}=e,{equippedClass:d}=e,{equippedWeapons:p}=e,{equippedCombatSkills:v}=e,{onToggleEquip:y}=e,{allWeapons:b}=e,{spellUseFlag:S}=e,{isMagic:I}=e,{weaponUses:T}=e,{onUpdateWeaponUses:C}=e,k={current:S},R={current:null};const O=()=>y(h,u),N=F=>{const W=parseInt(F.currentTarget.value);W>=0&&W<=s?(l(W),F.currentTarget.value=W+""):F.currentTarget.value=s+""};return n.$$set=F=>{"weapon"in F&&t(0,h=F.weapon),"equippedClass"in F&&t(11,d=F.equippedClass),"equippedWeapons"in F&&t(1,p=F.equippedWeapons),"equippedCombatSkills"in F&&t(12,v=F.equippedCombatSkills),"onToggleEquip"in F&&t(2,y=F.onToggleEquip),"allWeapons"in F&&t(3,b=F.allWeapons),"spellUseFlag"in F&&t(13,S=F.spellUseFlag),"isMagic"in F&&t(4,I=F.isMagic),"weaponUses"in F&&t(14,T=F.weaponUses),"onUpdateWeaponUses"in F&&t(15,C=F.onUpdateWeaponUses)},n.$$.update=()=>{var F;n.$$.dirty&6144&&t(20,i=M4(d,v)),n.$$.dirty&1048585&&t(7,s=(((F=b.fullFeatures[h])==null?void 0:F.uses)||1/0)*(i&&h===Pe.HEAL?2:1)),n.$$.dirty&16385&&t(9,r=T[h]),n.$$.dirty&640&&r===void 0&&s!==void 0&&t(9,r=s),n.$$.dirty&32897&&t(8,l=W=>{W<=s&&W>=0&&C(h,W)}),n.$$.dirty&205184&&(k.current!=S||s!==R.current)&&(l(s),t(17,R.current=s,R),t(16,k.current=S,k)),n.$$.dirty&9&&t(6,o=b==null?void 0:b.customSet.has(h)),n.$$.dirty&9&&t(19,a=(b==null?void 0:b.classUnlockSet.has(h))||(b==null?void 0:b.equippedClassSet.has(h))),n.$$.dirty&1&&t(18,c=h.indexOf("TRAINING")>=0),n.$$.dirty&786496&&t(10,u=o||a||c),n.$$.dirty&8&&t(5,f=b.fullFeatures),n.$$.dirty&33&&f[h].reason},[h,p,y,b,I,f,o,s,l,r,u,d,v,S,T,C,k,R,c,a,i,O,N]}class oa extends nt{constructor(e){super(),it(this,e,bre,vre,Ct,{weapon:0,equippedClass:11,equippedWeapons:1,equippedCombatSkills:12,onToggleEquip:2,allWeapons:3,spellUseFlag:13,isMagic:4,weaponUses:14,onUpdateWeaponUses:15})}}function Zk(n,e,t){const i=n.slice();return i[33]=e[t],i}function xk(n,e,t){const i=n.slice();return i[33]=e[t],i}function $k(n,e,t){const i=n.slice();return i[33]=e[t],i}function eT(n,e,t){const i=n.slice();return i[33]=e[t],i}function tT(n,e,t){const i=n.slice();return i[33]=e[t],i}function nT(n,e,t){const i=n.slice();return i[33]=e[t],i}function iT(n,e,t){const i=n.slice();return i[33]=e[t],i}function sT(n){let e,t,i,s,r,l,o=n[12],a=[];for(let u=0;u<o.length;u+=1)a[u]=rT(iT(n,o,u));const c=u=>U(a[u],1,1,()=>{a[u]=null});return{c(){e=E("div"),t=E("div"),i=L("Swords"),s=P(),r=E("div");for(let u=0;u<a.length;u+=1)a[u].c();this.h()},l(u){e=A(u,"DIV",{class:!0});var f=w(e);t=A(f,"DIV",{class:!0});var h=w(t);i=V(h,"Swords"),h.forEach(g),s=M(f),r=A(f,"DIV",{class:!0});var d=w(r);for(let p=0;p<a.length;p+=1)a[p].l(d);d.forEach(g),f.forEach(g),this.h()},h(){_(t,"class","label svelte-1x5cszy"),_(r,"class","category-container svelte-1x5cszy"),_(e,"class","category svelte-1x5cszy")},m(u,f){B(u,e,f),m(e,t),m(t,i),m(e,s),m(e,r);for(let h=0;h<a.length;h+=1)a[h].m(r,null);l=!0},p(u,f){if(f[0]&1052735){o=u[12];let h;for(h=0;h<o.length;h+=1){const d=iT(u,o,h);a[h]?(a[h].p(d,f),D(a[h],1)):(a[h]=rT(d),a[h].c(),D(a[h],1),a[h].m(r,null))}for(Le(),h=o.length;h<a.length;h+=1)c(h);Ve()}},i(u){if(!l){for(let f=0;f<o.length;f+=1)D(a[f]);l=!0}},o(u){a=a.filter(Boolean);for(let f=0;f<a.length;f+=1)U(a[f]);l=!1},d(u){u&&g(e),Ft(a,u)}}}function rT(n){let e,t;return e=new oa({props:{allWeapons:n[3],equippedWeapons:n[0],weapon:n[33],onToggleEquip:n[20],isMagic:!1,spellUseFlag:0,equippedCombatSkills:n[1],equippedClass:n[2],weaponUses:n[4],onUpdateWeaponUses:n[5]}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s[0]&8&&(r.allWeapons=i[3]),s[0]&1&&(r.equippedWeapons=i[0]),s[0]&4096&&(r.weapon=i[33]),s[0]&1048576&&(r.onToggleEquip=i[20]),s[0]&2&&(r.equippedCombatSkills=i[1]),s[0]&4&&(r.equippedClass=i[2]),s[0]&16&&(r.weaponUses=i[4]),s[0]&32&&(r.onUpdateWeaponUses=i[5]),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function lT(n){let e,t,i,s,r,l,o=n[9],a=[];for(let u=0;u<o.length;u+=1)a[u]=oT(nT(n,o,u));const c=u=>U(a[u],1,1,()=>{a[u]=null});return{c(){e=E("div"),t=E("div"),i=L("Lances"),s=P(),r=E("div");for(let u=0;u<a.length;u+=1)a[u].c();this.h()},l(u){e=A(u,"DIV",{class:!0});var f=w(e);t=A(f,"DIV",{class:!0});var h=w(t);i=V(h,"Lances"),h.forEach(g),s=M(f),r=A(f,"DIV",{class:!0});var d=w(r);for(let p=0;p<a.length;p+=1)a[p].l(d);d.forEach(g),f.forEach(g),this.h()},h(){_(t,"class","label svelte-1x5cszy"),_(r,"class","category-container svelte-1x5cszy"),_(e,"class","category svelte-1x5cszy")},m(u,f){B(u,e,f),m(e,t),m(t,i),m(e,s),m(e,r);for(let h=0;h<a.length;h+=1)a[h].m(r,null);l=!0},p(u,f){if(f[0]&1049151){o=u[9];let h;for(h=0;h<o.length;h+=1){const d=nT(u,o,h);a[h]?(a[h].p(d,f),D(a[h],1)):(a[h]=oT(d),a[h].c(),D(a[h],1),a[h].m(r,null))}for(Le(),h=o.length;h<a.length;h+=1)c(h);Ve()}},i(u){if(!l){for(let f=0;f<o.length;f+=1)D(a[f]);l=!0}},o(u){a=a.filter(Boolean);for(let f=0;f<a.length;f+=1)U(a[f]);l=!1},d(u){u&&g(e),Ft(a,u)}}}function oT(n){let e,t;return e=new oa({props:{equippedWeapons:n[0],weapon:n[33],onToggleEquip:n[20],allWeapons:n[3],isMagic:!1,spellUseFlag:0,equippedCombatSkills:n[1],equippedClass:n[2],weaponUses:n[4],onUpdateWeaponUses:n[5]}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s[0]&1&&(r.equippedWeapons=i[0]),s[0]&512&&(r.weapon=i[33]),s[0]&1048576&&(r.onToggleEquip=i[20]),s[0]&8&&(r.allWeapons=i[3]),s[0]&2&&(r.equippedCombatSkills=i[1]),s[0]&4&&(r.equippedClass=i[2]),s[0]&16&&(r.weaponUses=i[4]),s[0]&32&&(r.onUpdateWeaponUses=i[5]),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function aT(n){let e,t,i,s,r,l,o=n[13],a=[];for(let u=0;u<o.length;u+=1)a[u]=cT(tT(n,o,u));const c=u=>U(a[u],1,1,()=>{a[u]=null});return{c(){e=E("div"),t=E("div"),i=L("Axes"),s=P(),r=E("div");for(let u=0;u<a.length;u+=1)a[u].c();this.h()},l(u){e=A(u,"DIV",{class:!0});var f=w(e);t=A(f,"DIV",{class:!0});var h=w(t);i=V(h,"Axes"),h.forEach(g),s=M(f),r=A(f,"DIV",{class:!0});var d=w(r);for(let p=0;p<a.length;p+=1)a[p].l(d);d.forEach(g),f.forEach(g),this.h()},h(){_(t,"class","label svelte-1x5cszy"),_(r,"class","category-container svelte-1x5cszy"),_(e,"class","category svelte-1x5cszy")},m(u,f){B(u,e,f),m(e,t),m(t,i),m(e,s),m(e,r);for(let h=0;h<a.length;h+=1)a[h].m(r,null);l=!0},p(u,f){if(f[0]&1056831){o=u[13];let h;for(h=0;h<o.length;h+=1){const d=tT(u,o,h);a[h]?(a[h].p(d,f),D(a[h],1)):(a[h]=cT(d),a[h].c(),D(a[h],1),a[h].m(r,null))}for(Le(),h=o.length;h<a.length;h+=1)c(h);Ve()}},i(u){if(!l){for(let f=0;f<o.length;f+=1)D(a[f]);l=!0}},o(u){a=a.filter(Boolean);for(let f=0;f<a.length;f+=1)U(a[f]);l=!1},d(u){u&&g(e),Ft(a,u)}}}function cT(n){let e,t;return e=new oa({props:{equippedWeapons:n[0],weapon:n[33],onToggleEquip:n[20],allWeapons:n[3],isMagic:!1,spellUseFlag:0,equippedCombatSkills:n[1],equippedClass:n[2],weaponUses:n[4],onUpdateWeaponUses:n[5]}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s[0]&1&&(r.equippedWeapons=i[0]),s[0]&8192&&(r.weapon=i[33]),s[0]&1048576&&(r.onToggleEquip=i[20]),s[0]&8&&(r.allWeapons=i[3]),s[0]&2&&(r.equippedCombatSkills=i[1]),s[0]&4&&(r.equippedClass=i[2]),s[0]&16&&(r.weaponUses=i[4]),s[0]&32&&(r.onUpdateWeaponUses=i[5]),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function uT(n){let e,t,i,s,r,l,o=n[11],a=[];for(let u=0;u<o.length;u+=1)a[u]=fT(eT(n,o,u));const c=u=>U(a[u],1,1,()=>{a[u]=null});return{c(){e=E("div"),t=E("div"),i=L("Bows"),s=P(),r=E("div");for(let u=0;u<a.length;u+=1)a[u].c();this.h()},l(u){e=A(u,"DIV",{class:!0});var f=w(e);t=A(f,"DIV",{class:!0});var h=w(t);i=V(h,"Bows"),h.forEach(g),s=M(f),r=A(f,"DIV",{class:!0});var d=w(r);for(let p=0;p<a.length;p+=1)a[p].l(d);d.forEach(g),f.forEach(g),this.h()},h(){_(t,"class","label svelte-1x5cszy"),_(r,"class","category-container svelte-1x5cszy"),_(e,"class","category svelte-1x5cszy")},m(u,f){B(u,e,f),m(e,t),m(t,i),m(e,s),m(e,r);for(let h=0;h<a.length;h+=1)a[h].m(r,null);l=!0},p(u,f){if(f[0]&1050687){o=u[11];let h;for(h=0;h<o.length;h+=1){const d=eT(u,o,h);a[h]?(a[h].p(d,f),D(a[h],1)):(a[h]=fT(d),a[h].c(),D(a[h],1),a[h].m(r,null))}for(Le(),h=o.length;h<a.length;h+=1)c(h);Ve()}},i(u){if(!l){for(let f=0;f<o.length;f+=1)D(a[f]);l=!0}},o(u){a=a.filter(Boolean);for(let f=0;f<a.length;f+=1)U(a[f]);l=!1},d(u){u&&g(e),Ft(a,u)}}}function fT(n){let e,t;return e=new oa({props:{equippedWeapons:n[0],weapon:n[33],onToggleEquip:n[20],allWeapons:n[3],isMagic:!1,spellUseFlag:0,equippedCombatSkills:n[1],equippedClass:n[2],weaponUses:n[4],onUpdateWeaponUses:n[5]}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s[0]&1&&(r.equippedWeapons=i[0]),s[0]&2048&&(r.weapon=i[33]),s[0]&1048576&&(r.onToggleEquip=i[20]),s[0]&8&&(r.allWeapons=i[3]),s[0]&2&&(r.equippedCombatSkills=i[1]),s[0]&4&&(r.equippedClass=i[2]),s[0]&16&&(r.weaponUses=i[4]),s[0]&32&&(r.onUpdateWeaponUses=i[5]),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function hT(n){let e,t,i,s,r,l,o=n[10],a=[];for(let u=0;u<o.length;u+=1)a[u]=dT($k(n,o,u));const c=u=>U(a[u],1,1,()=>{a[u]=null});return{c(){e=E("div"),t=E("div"),i=L("Fists"),s=P(),r=E("div");for(let u=0;u<a.length;u+=1)a[u].c();this.h()},l(u){e=A(u,"DIV",{class:!0});var f=w(e);t=A(f,"DIV",{class:!0});var h=w(t);i=V(h,"Fists"),h.forEach(g),s=M(f),r=A(f,"DIV",{class:!0});var d=w(r);for(let p=0;p<a.length;p+=1)a[p].l(d);d.forEach(g),f.forEach(g),this.h()},h(){_(t,"class","label svelte-1x5cszy"),_(r,"class","category-container svelte-1x5cszy"),_(e,"class","category svelte-1x5cszy")},m(u,f){B(u,e,f),m(e,t),m(t,i),m(e,s),m(e,r);for(let h=0;h<a.length;h+=1)a[h].m(r,null);l=!0},p(u,f){if(f[0]&1049663){o=u[10];let h;for(h=0;h<o.length;h+=1){const d=$k(u,o,h);a[h]?(a[h].p(d,f),D(a[h],1)):(a[h]=dT(d),a[h].c(),D(a[h],1),a[h].m(r,null))}for(Le(),h=o.length;h<a.length;h+=1)c(h);Ve()}},i(u){if(!l){for(let f=0;f<o.length;f+=1)D(a[f]);l=!0}},o(u){a=a.filter(Boolean);for(let f=0;f<a.length;f+=1)U(a[f]);l=!1},d(u){u&&g(e),Ft(a,u)}}}function dT(n){let e,t;return e=new oa({props:{equippedWeapons:n[0],weapon:n[33],onToggleEquip:n[20],allWeapons:n[3],spellUseFlag:0,isMagic:!1,equippedCombatSkills:n[1],equippedClass:n[2],weaponUses:n[4],onUpdateWeaponUses:n[5]}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s[0]&1&&(r.equippedWeapons=i[0]),s[0]&1024&&(r.weapon=i[33]),s[0]&1048576&&(r.onToggleEquip=i[20]),s[0]&8&&(r.allWeapons=i[3]),s[0]&2&&(r.equippedCombatSkills=i[1]),s[0]&4&&(r.equippedClass=i[2]),s[0]&16&&(r.weaponUses=i[4]),s[0]&32&&(r.onUpdateWeaponUses=i[5]),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function mT(n){let e,t,i,s,r,l,o,a=Array.from(n[14]),c=[];for(let f=0;f<a.length;f+=1)c[f]=pT(xk(n,a,f));const u=f=>U(c[f],1,1,()=>{c[f]=null});return{c(){e=E("div"),t=E("div"),i=L("Training Weapons"),s=P(),r=E("div");for(let f=0;f<c.length;f+=1)c[f].c();this.h()},l(f){e=A(f,"DIV",{class:!0});var h=w(e);t=A(h,"DIV",{class:!0});var d=w(t);i=V(d,"Training Weapons"),d.forEach(g),s=M(h),r=A(h,"DIV",{class:!0});var p=w(r);for(let v=0;v<c.length;v+=1)c[v].l(p);p.forEach(g),h.forEach(g),this.h()},h(){_(t,"class","label svelte-1x5cszy"),_(r,"class","category-container svelte-1x5cszy"),_(e,"class",l=Ze(Zi("category",{"min-width":n[16]}))+" svelte-1x5cszy")},m(f,h){B(f,e,h),m(e,t),m(t,i),m(e,s),m(e,r);for(let d=0;d<c.length;d+=1)c[d].m(r,null);o=!0},p(f,h){if(h[0]&1065023){a=Array.from(f[14]);let d;for(d=0;d<a.length;d+=1){const p=xk(f,a,d);c[d]?(c[d].p(p,h),D(c[d],1)):(c[d]=pT(p),c[d].c(),D(c[d],1),c[d].m(r,null))}for(Le(),d=a.length;d<c.length;d+=1)u(d);Ve()}(!o||h[0]&65536&&l!==(l=Ze(Zi("category",{"min-width":f[16]}))+" svelte-1x5cszy"))&&_(e,"class",l)},i(f){if(!o){for(let h=0;h<a.length;h+=1)D(c[h]);o=!0}},o(f){c=c.filter(Boolean);for(let h=0;h<c.length;h+=1)U(c[h]);o=!1},d(f){f&&g(e),Ft(c,f)}}}function pT(n){let e,t;return e=new oa({props:{equippedWeapons:n[0],weapon:n[33],onToggleEquip:n[20],allWeapons:n[3],spellUseFlag:0,isMagic:!1,equippedCombatSkills:n[1],equippedClass:n[2],weaponUses:n[4],onUpdateWeaponUses:n[5]}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s[0]&1&&(r.equippedWeapons=i[0]),s[0]&16384&&(r.weapon=i[33]),s[0]&1048576&&(r.onToggleEquip=i[20]),s[0]&8&&(r.allWeapons=i[3]),s[0]&2&&(r.equippedCombatSkills=i[1]),s[0]&4&&(r.equippedClass=i[2]),s[0]&16&&(r.weaponUses=i[4]),s[0]&32&&(r.onUpdateWeaponUses=i[5]),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function gT(n){let e,t,i,s=[...n[22],...n[21]],r=[];for(let o=0;o<s.length;o+=1)r[o]=vT(Zk(n,s,o));const l=o=>U(r[o],1,1,()=>{r[o]=null});return{c(){e=E("div"),t=E("div");for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){e=A(o,"DIV",{class:!0});var a=w(e);t=A(a,"DIV",{class:!0});var c=w(t);for(let u=0;u<r.length;u+=1)r[u].l(c);c.forEach(g),a.forEach(g),this.h()},h(){_(t,"class","category svelte-1x5cszy"),_(e,"class","magic-category svelte-1x5cszy")},m(o,a){B(o,e,a),m(e,t);for(let c=0;c<r.length;c+=1)r[c].m(t,null);i=!0},p(o,a){if(a[0]&7372863){s=[...o[22],...o[21]];let c;for(c=0;c<s.length;c+=1){const u=Zk(o,s,c);r[c]?(r[c].p(u,a),D(r[c],1)):(r[c]=vT(u),r[c].c(),D(r[c],1),r[c].m(t,null))}for(Le(),c=s.length;c<r.length;c+=1)l(c);Ve()}},i(o){if(!i){for(let a=0;a<s.length;a+=1)D(r[a]);i=!0}},o(o){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)U(r[a]);i=!1},d(o){o&&g(e),Ft(r,o)}}}function vT(n){let e,t;return e=new oa({props:{equippedWeapons:n[0],weapon:n[33],onToggleEquip:n[20],allWeapons:n[3],isMagic:!0,spellUseFlag:n[15],equippedCombatSkills:n[1],equippedClass:n[2],weaponUses:n[4],onUpdateWeaponUses:n[5]}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s[0]&1&&(r.equippedWeapons=i[0]),s[0]&6291456&&(r.weapon=i[33]),s[0]&1048576&&(r.onToggleEquip=i[20]),s[0]&8&&(r.allWeapons=i[3]),s[0]&32768&&(r.spellUseFlag=i[15]),s[0]&2&&(r.equippedCombatSkills=i[1]),s[0]&4&&(r.equippedClass=i[2]),s[0]&16&&(r.weaponUses=i[4]),s[0]&32&&(r.onUpdateWeaponUses=i[5]),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function _re(n){let e,t,i,s,r,l,o,a,c,u,f,h,d,p,v,y,b,S,I,T,C,k,R,O,N,F,W,z,Y,H,K,j,J,Z,q,X,ne,Q,re,be,le,he,Ie,G,ve,je,$,Oe,ie,_e,Ee,He,We,Qe,we,Me;t=new gc({props:{label:"Weapons"}});let de=n[12].length&&sT(n),Ae=n[9].length&&lT(n),Re=n[13].length&&aT(n),Ne=n[11].length&&uT(n),Ge=n[10].length&&hT(n),pe=n[14].size>0&&mT(n),Fe=(n[22].length||n[21].length)&&gT(n);return{c(){e=E("div"),ce(t.$$.fragment),i=P(),s=E("div"),r=E("span"),l=L("Martial Weapons"),o=P(),a=E("div"),c=E("span"),u=L("Superiority Dies:"),f=P(),h=E("input"),p=P(),v=E("span"),y=L("/ "),b=L(n[7]),S=P(),I=E("button"),T=L("Reset Superiority Dice"),C=P(),k=E("button"),R=L("Reset Spell Uses"),O=P(),N=E("button"),F=L("Unequip all weapons"),W=P(),z=E("div"),Y=P(),H=E("div"),K=P(),j=E("div"),de&&de.c(),J=P(),Ae&&Ae.c(),Z=P(),Re&&Re.c(),q=P(),Ne&&Ne.c(),X=P(),Ge&&Ge.c(),ne=P(),pe&&pe.c(),Q=P(),re=E("div"),be=E("span"),le=L("Magic Weapons"),he=P(),Ie=E("button"),G=L("Add new martial weapon"),ve=P(),je=E("button"),$=L("Add new magic weapon"),Oe=P(),ie=E("div"),_e=P(),Ee=E("div"),He=P(),We=E("div"),Fe&&Fe.c(),this.h()},l(ae){e=A(ae,"DIV",{class:!0});var ke=w(e);ge(t.$$.fragment,ke),i=M(ke),s=A(ke,"DIV",{class:!0});var oe=w(s);r=A(oe,"SPAN",{});var at=w(r);l=V(at,"Martial Weapons"),at.forEach(g),o=M(oe),a=A(oe,"DIV",{class:!0});var qe=w(a);c=A(qe,"SPAN",{});var me=w(c);u=V(me,"Superiority Dies:"),me.forEach(g),f=M(qe),h=A(qe,"INPUT",{type:!0,class:!0,min:!0}),p=M(qe),v=A(qe,"SPAN",{});var ot=w(v);y=V(ot,"/ "),b=V(ot,n[7]),ot.forEach(g),qe.forEach(g),S=M(oe),I=A(oe,"BUTTON",{class:!0});var Se=w(I);T=V(Se,"Reset Superiority Dice"),Se.forEach(g),C=M(oe),k=A(oe,"BUTTON",{class:!0});var ze=w(k);R=V(ze,"Reset Spell Uses"),ze.forEach(g),O=M(oe),N=A(oe,"BUTTON",{class:!0});var ye=w(N);F=V(ye,"Unequip all weapons"),ye.forEach(g),oe.forEach(g),W=M(ke),z=A(ke,"DIV",{class:!0}),w(z).forEach(g),Y=M(ke),H=A(ke,"DIV",{class:!0}),w(H).forEach(g),K=M(ke),j=A(ke,"DIV",{class:!0});var ut=w(j);de&&de.l(ut),J=M(ut),Ae&&Ae.l(ut),Z=M(ut),Re&&Re.l(ut),q=M(ut),Ne&&Ne.l(ut),X=M(ut),Ge&&Ge.l(ut),ne=M(ut),pe&&pe.l(ut),ut.forEach(g),Q=M(ke),re=A(ke,"DIV",{class:!0});var Bt=w(re);be=A(Bt,"SPAN",{});var gt=w(be);le=V(gt,"Magic Weapons"),gt.forEach(g),he=M(Bt),Ie=A(Bt,"BUTTON",{class:!0});var Ot=w(Ie);G=V(Ot,"Add new martial weapon"),Ot.forEach(g),ve=M(Bt),je=A(Bt,"BUTTON",{class:!0});var en=w(je);$=V(en,"Add new magic weapon"),en.forEach(g),Bt.forEach(g),Oe=M(ke),ie=A(ke,"DIV",{class:!0}),w(ie).forEach(g),_e=M(ke),Ee=A(ke,"DIV",{class:!0}),w(Ee).forEach(g),He=M(ke),We=A(ke,"DIV",{class:!0});var gn=w(We);Fe&&Fe.l(gn),gn.forEach(g),ke.forEach(g),this.h()},h(){_(h,"type","number"),_(h,"class",d=Ze(`die-input ${n[6]<=0?"bad":n[6]<=Math.ceil(n[7]/3)?"danger":""}`)+" svelte-1x5cszy"),_(h,"min","0"),h.value=n[6],rt(h,"width","25px"),_(a,"class","superiority-die svelte-1x5cszy"),_(I,"class","svelte-1x5cszy"),_(k,"class","svelte-1x5cszy"),_(N,"class","svelte-1x5cszy"),_(s,"class","actions svelte-1x5cszy"),rt(s,"white-space","nowrap"),_(z,"class","divider svelte-1x5cszy"),rt(z,"height","2px"),_(H,"class","divider svelte-1x5cszy"),_(j,"class","martial-weapons svelte-1x5cszy"),rt(be,"flex","1"),_(Ie,"class","svelte-1x5cszy"),rt(Ie,"margin-right","5px"),_(je,"class","svelte-1x5cszy"),_(re,"class","actions svelte-1x5cszy"),rt(re,"white-space","nowrap"),_(ie,"class","divider svelte-1x5cszy"),rt(ie,"height","2px"),_(Ee,"class","divider svelte-1x5cszy"),_(We,"class","magic-weapons svelte-1x5cszy"),_(e,"class","container svelte-1x5cszy")},m(ae,ke){B(ae,e,ke),ue(t,e,null),m(e,i),m(e,s),m(s,r),m(r,l),m(s,o),m(s,a),m(a,c),m(c,u),m(a,f),m(a,h),m(a,p),m(a,v),m(v,y),m(v,b),m(s,S),m(s,I),m(I,T),m(s,C),m(s,k),m(k,R),m(s,O),m(s,N),m(N,F),m(e,W),m(e,z),m(e,Y),m(e,H),m(e,K),m(e,j),de&&de.m(j,null),m(j,J),Ae&&Ae.m(j,null),m(j,Z),Re&&Re.m(j,null),m(j,q),Ne&&Ne.m(j,null),m(j,X),Ge&&Ge.m(j,null),m(j,ne),pe&&pe.m(j,null),m(e,Q),m(e,re),m(re,be),m(be,le),m(re,he),m(re,Ie),m(Ie,G),m(re,ve),m(re,je),m(je,$),m(e,Oe),m(e,ie),m(e,_e),m(e,Ee),m(e,He),m(e,We),Fe&&Fe.m(We,null),Qe=!0,we||(Me=[se(h,"change",n[29]),se(I,"click",n[30]),se(k,"click",n[31]),se(N,"click",function(){Mn(n[19])&&n[19].apply(this,arguments)}),se(Ie,"click",function(){Mn(n[18])&&n[18].apply(this,arguments)}),se(je,"click",function(){Mn(n[17])&&n[17].apply(this,arguments)})],we=!0)},p(ae,ke){n=ae,(!Qe||ke[0]&192&&d!==(d=Ze(`die-input ${n[6]<=0?"bad":n[6]<=Math.ceil(n[7]/3)?"danger":""}`)+" svelte-1x5cszy"))&&_(h,"class",d),(!Qe||ke[0]&64&&h.value!==n[6])&&(h.value=n[6]),(!Qe||ke[0]&128)&&Ce(b,n[7]),n[12].length?de?(de.p(n,ke),ke[0]&4096&&D(de,1)):(de=sT(n),de.c(),D(de,1),de.m(j,J)):de&&(Le(),U(de,1,1,()=>{de=null}),Ve()),n[9].length?Ae?(Ae.p(n,ke),ke[0]&512&&D(Ae,1)):(Ae=lT(n),Ae.c(),D(Ae,1),Ae.m(j,Z)):Ae&&(Le(),U(Ae,1,1,()=>{Ae=null}),Ve()),n[13].length?Re?(Re.p(n,ke),ke[0]&8192&&D(Re,1)):(Re=aT(n),Re.c(),D(Re,1),Re.m(j,q)):Re&&(Le(),U(Re,1,1,()=>{Re=null}),Ve()),n[11].length?Ne?(Ne.p(n,ke),ke[0]&2048&&D(Ne,1)):(Ne=uT(n),Ne.c(),D(Ne,1),Ne.m(j,X)):Ne&&(Le(),U(Ne,1,1,()=>{Ne=null}),Ve()),n[10].length?Ge?(Ge.p(n,ke),ke[0]&1024&&D(Ge,1)):(Ge=hT(n),Ge.c(),D(Ge,1),Ge.m(j,ne)):Ge&&(Le(),U(Ge,1,1,()=>{Ge=null}),Ve()),n[14].size>0?pe?(pe.p(n,ke),ke[0]&16384&&D(pe,1)):(pe=mT(n),pe.c(),D(pe,1),pe.m(j,null)):pe&&(Le(),U(pe,1,1,()=>{pe=null}),Ve()),n[22].length||n[21].length?Fe?(Fe.p(n,ke),ke[0]&6291456&&D(Fe,1)):(Fe=gT(n),Fe.c(),D(Fe,1),Fe.m(We,null)):Fe&&(Le(),U(Fe,1,1,()=>{Fe=null}),Ve())},i(ae){Qe||(D(t.$$.fragment,ae),D(de),D(Ae),D(Re),D(Ne),D(Ge),D(pe),D(Fe),Qe=!0)},o(ae){U(t.$$.fragment,ae),U(de),U(Ae),U(Re),U(Ne),U(Ge),U(pe),U(Fe),Qe=!1},d(ae){ae&&g(e),fe(t),de&&de.d(),Ae&&Ae.d(),Re&&Re.d(),Ne&&Ne.d(),Ge&&Ge.d(),pe&&pe.d(),Fe&&Fe.d(),we=!1,on(Me)}}}function yre(n,e,t){let i,s,r,l,o,a,c,u,f,h,d,p,v,y,b,S;const{open:I}=Bn(hs.MODAL);let{equippedWeapons:T}=e,{onToggleEquippedWeapons:C}=e,{equippedCombatSkills:k}=e,{equippedClass:R}=e,{allWeapons:O}=e,{weaponUses:N}=e,{onUpdateWeaponUses:F}=e,{customWeapons:W}=e,{onUpdateCustomWeapons:z}=e,{curSuperiorityDies:Y}=e,{maxSuperiorityDie:H}=e,{setCurSuperiorityDie:K}=e,j=0;const J=X=>{const ne=parseInt(X.currentTarget.value);ne>=0&&ne<=H?(K(ne),X.currentTarget.value=ne+""):X.currentTarget.value=Y+""},Z=()=>K(H),q=()=>t(15,j+=1);return n.$$set=X=>{"equippedWeapons"in X&&t(0,T=X.equippedWeapons),"onToggleEquippedWeapons"in X&&t(23,C=X.onToggleEquippedWeapons),"equippedCombatSkills"in X&&t(1,k=X.equippedCombatSkills),"equippedClass"in X&&t(2,R=X.equippedClass),"allWeapons"in X&&t(3,O=X.allWeapons),"weaponUses"in X&&t(4,N=X.weaponUses),"onUpdateWeaponUses"in X&&t(5,F=X.onUpdateWeaponUses),"customWeapons"in X&&t(24,W=X.customWeapons),"onUpdateCustomWeapons"in X&&t(25,z=X.onUpdateCustomWeapons),"curSuperiorityDies"in X&&t(6,Y=X.curSuperiorityDies),"maxSuperiorityDie"in X&&t(7,H=X.maxSuperiorityDie),"setCurSuperiorityDie"in X&&t(8,K=X.setCurSuperiorityDie)},n.$$.update=()=>{n.$$.dirty[0]&8&&t(28,i=O.fullFeatures),n.$$.dirty[0]&268435464&&t(22,s=O.fullArray.filter(X=>i[X].type===te.REASON)),n.$$.dirty[0]&268435464&&t(21,r=O.fullArray.filter(X=>i[X].type===te.FAITH)),n.$$.dirty[0]&8388608&&t(20,l=X=>{C(X)}),n.$$.dirty[0]&8388609&&t(19,o=()=>T.forEach(X=>C(X))),n.$$.dirty[0]&318767112&&t(18,a=()=>{I(Qk,{weapon:M8.filter(X=>!O.fullSet.has(X)),weaponsToFeatures:i,defaultReason:"Manually added in weapons section",customWeapons:W,onUpdateCustomWeapons:z})}),n.$$.dirty[0]&318767112&&t(17,c=()=>{I(Qk,{weapon:F4.filter(X=>!O.fullSet.has(X)),weaponsToFeatures:i,defaultReason:"Manually added in weapons section",customWeapons:W,onUpdateCustomWeapons:z})}),n.$$.dirty[0]&8&&t(26,u=O.fullSet),n.$$.dirty[0]&268435464&&t(27,f=O.fullArray.reduce((X,ne)=>{const Q=i[ne].type;return!Gg.has(ne)&&!Cm.includes(Q)&&X.add(Q),X},new Set)),n.$$.dirty[0]&134217728&&t(14,h=new Set(f.size<4?Array.from(Gg):[])),n.$$.dirty[0]&67125248&&t(12,d=O8.filter(X=>u.has(X)&&!h.has(X))),n.$$.dirty[0]&67125248&&t(9,p=R8.filter(X=>u.has(X)&&!h.has(X))),n.$$.dirty[0]&67125248&&t(13,v=D8.filter(X=>u.has(X)&&!h.has(X))),n.$$.dirty[0]&67125248&&t(11,y=W4.filter(X=>u.has(X)&&!h.has(X))),n.$$.dirty[0]&67125248&&t(10,b=N8.filter(X=>u.has(X)&&!h.has(X))),n.$$.dirty[0]&15872&&t(16,S=!(v!=null&&v.length)&&!(d!=null&&d.length)&&!(y!=null&&y.length)&&!(b!=null&&b.length)&&!(p!=null&&p.length))},[T,k,R,O,N,F,Y,H,K,p,b,y,d,v,h,j,S,c,a,o,l,r,s,C,W,z,u,f,i,J,Z,q]}class Sre extends nt{constructor(e){super(),it(this,e,yre,_re,Ct,{equippedWeapons:0,onToggleEquippedWeapons:23,equippedCombatSkills:1,equippedClass:2,allWeapons:3,weaponUses:4,onUpdateWeaponUses:5,customWeapons:24,onUpdateCustomWeapons:25,curSuperiorityDies:6,maxSuperiorityDie:7,setCurSuperiorityDie:8},null,[-1,-1])}}function bT(n){let e,t,i,s,r,l;return t=new hre({props:{stats:n[14],playerName:n[0],onUpdatePlayerStats:n[15],playerCrest:n[8],onUpdateCrest:n[9]}}),r=new ore({props:{stats:n[14],playerName:n[0],skillProficiency:n[23],skillBonus:n[22],onToggleSkillProficiency:n[24],equippedClass:n[31],masteredClasses:n[5]}}),{c(){e=E("div"),ce(t.$$.fragment),i=P(),s=E("div"),ce(r.$$.fragment),this.h()},l(o){e=A(o,"DIV",{class:!0});var a=w(e);ge(t.$$.fragment,a),a.forEach(g),i=M(o),s=A(o,"DIV",{class:!0});var c=w(s);ge(r.$$.fragment,c),c.forEach(g),this.h()},h(){_(e,"class","stats svelte-1qqh4vl"),_(s,"class","skills svelte-1qqh4vl")},m(o,a){B(o,e,a),ue(t,e,null),B(o,i,a),B(o,s,a),ue(r,s,null),l=!0},p(o,a){const c={};a[0]&16384&&(c.stats=o[14]),a[0]&1&&(c.playerName=o[0]),a[0]&32768&&(c.onUpdatePlayerStats=o[15]),a[0]&256&&(c.playerCrest=o[8]),a[0]&512&&(c.onUpdateCrest=o[9]),t.$set(c);const u={};a[0]&16384&&(u.stats=o[14]),a[0]&1&&(u.playerName=o[0]),a[0]&8388608&&(u.skillProficiency=o[23]),a[0]&4194304&&(u.skillBonus=o[22]),a[0]&16777216&&(u.onToggleSkillProficiency=o[24]),a[1]&1&&(u.equippedClass=o[31]),a[0]&32&&(u.masteredClasses=o[5]),r.$set(u)},i(o){l||(D(t.$$.fragment,o),D(r.$$.fragment,o),l=!0)},o(o){U(t.$$.fragment,o),U(r.$$.fragment,o),l=!1},d(o){o&&g(e),fe(t),o&&g(i),o&&g(s),fe(r)}}}function _T(n){let e,t,i,s,r,l,o,a;return t=new aV({props:{equippedClass:n[31],setEquippedClass:n[32],unlockedClasses:n[33],onUpdateUnlockedClasses:n[34],masteredClasses:n[5],customCombatSkills:n[16],onUpdateCustomCombatSkills:n[17],customWeapons:n[20],onUpdateCustomWeapons:n[21],customCombatArts:n[18],onUpdateCustomCombatArts:n[19],playerStats:n[14],onUpdatePlayerStats:n[15]}}),r=new Tse({props:{allCombatArts:n[4],equippedCombatArts:n[27],onToggleCombatArts:n[28],equippedWeapons:n[25],customCombatArts:n[18],onUpdateCustomCombatArts:n[19]}}),o=new Lse({props:{allCombatSkills:n[3],equippedCombatSkills:n[29],onToggleCombatSkill:n[30],customCombatSkills:n[16],onUpdateCustomCombatSkills:n[17]}}),{c(){e=E("div"),ce(t.$$.fragment),i=P(),s=E("div"),ce(r.$$.fragment),l=P(),ce(o.$$.fragment),this.h()},l(c){e=A(c,"DIV",{class:!0});var u=w(e);ge(t.$$.fragment,u),u.forEach(g),i=M(c),s=A(c,"DIV",{class:!0});var f=w(s);ge(r.$$.fragment,f),l=M(f),ge(o.$$.fragment,f),f.forEach(g),this.h()},h(){_(e,"class","classes svelte-1qqh4vl"),_(s,"class","arts svelte-1qqh4vl")},m(c,u){B(c,e,u),ue(t,e,null),B(c,i,u),B(c,s,u),ue(r,s,null),m(s,l),ue(o,s,null),a=!0},p(c,u){const f={};u[1]&1&&(f.equippedClass=c[31]),u[1]&2&&(f.setEquippedClass=c[32]),u[1]&4&&(f.unlockedClasses=c[33]),u[1]&8&&(f.onUpdateUnlockedClasses=c[34]),u[0]&32&&(f.masteredClasses=c[5]),u[0]&65536&&(f.customCombatSkills=c[16]),u[0]&131072&&(f.onUpdateCustomCombatSkills=c[17]),u[0]&1048576&&(f.customWeapons=c[20]),u[0]&2097152&&(f.onUpdateCustomWeapons=c[21]),u[0]&262144&&(f.customCombatArts=c[18]),u[0]&524288&&(f.onUpdateCustomCombatArts=c[19]),u[0]&16384&&(f.playerStats=c[14]),u[0]&32768&&(f.onUpdatePlayerStats=c[15]),t.$set(f);const h={};u[0]&16&&(h.allCombatArts=c[4]),u[0]&134217728&&(h.equippedCombatArts=c[27]),u[0]&268435456&&(h.onToggleCombatArts=c[28]),u[0]&33554432&&(h.equippedWeapons=c[25]),u[0]&262144&&(h.customCombatArts=c[18]),u[0]&524288&&(h.onUpdateCustomCombatArts=c[19]),r.$set(h);const d={};u[0]&8&&(d.allCombatSkills=c[3]),u[0]&536870912&&(d.equippedCombatSkills=c[29]),u[0]&1073741824&&(d.onToggleCombatSkill=c[30]),u[0]&65536&&(d.customCombatSkills=c[16]),u[0]&131072&&(d.onUpdateCustomCombatSkills=c[17]),o.$set(d)},i(c){a||(D(t.$$.fragment,c),D(r.$$.fragment,c),D(o.$$.fragment,c),a=!0)},o(c){U(t.$$.fragment,c),U(r.$$.fragment,c),U(o.$$.fragment,c),a=!1},d(c){c&&g(e),fe(t),c&&g(i),c&&g(s),fe(r),fe(o)}}}function yT(n){let e,t,i,s,r,l,o,a,c;return i=new Sre({props:{allWeapons:n[2],equippedWeapons:n[25],onToggleEquippedWeapons:n[26],equippedCombatSkills:n[29],equippedClass:n[31],weaponUses:n[6],onUpdateWeaponUses:n[7],curSuperiorityDies:n[41],maxSuperiorityDie:n[40],setCurSuperiorityDie:n[42],customWeapons:n[20],onUpdateCustomWeapons:n[21]}}),l=new $se({props:{stats:n[14],allWeapons:n[2],equippedClass:n[31],unlockedClasses:n[33],equippedCombatSkills:n[29],selectedWeapon:n[12],equippedWeapons:n[25],equippedCombatArts:n[27],allCombatSkills:n[3]}}),a=new Q7({props:{playerName:n[0],equippedClass:n[31],equippedWeapons:n[25],equippedCombatArts:n[27],equippedCombatSkills:n[29],weaponUses:n[6],onUpdateWeaponUses:n[7],curSuperiorityDies:n[41],setCurSuperiorityDie:n[42],allWeapons:n[2],allCombatArts:n[4],playerCrest:n[8],playerStats:n[14],selectedWeapon:n[12],setSelectedWeapon:n[13],selectedCombatArt:n[10],setSelectedCombatArt:n[11]}}),{c(){e=E("div"),t=E("div"),ce(i.$$.fragment),s=P(),r=E("div"),ce(l.$$.fragment),o=P(),ce(a.$$.fragment),this.h()},l(u){e=A(u,"DIV",{class:!0});var f=w(e);t=A(f,"DIV",{class:!0});var h=w(t);ge(i.$$.fragment,h),h.forEach(g),s=M(f),r=A(f,"DIV",{class:!0});var d=w(r);ge(l.$$.fragment,d),o=M(d),ge(a.$$.fragment,d),d.forEach(g),f.forEach(g),this.h()},h(){_(t,"class","weapons svelte-1qqh4vl"),_(r,"class","other svelte-1qqh4vl"),_(e,"class","rest svelte-1qqh4vl")},m(u,f){B(u,e,f),m(e,t),ue(i,t,null),m(e,s),m(e,r),ue(l,r,null),m(r,o),ue(a,r,null),c=!0},p(u,f){const h={};f[0]&4&&(h.allWeapons=u[2]),f[0]&33554432&&(h.equippedWeapons=u[25]),f[0]&67108864&&(h.onToggleEquippedWeapons=u[26]),f[0]&536870912&&(h.equippedCombatSkills=u[29]),f[1]&1&&(h.equippedClass=u[31]),f[0]&64&&(h.weaponUses=u[6]),f[0]&128&&(h.onUpdateWeaponUses=u[7]),f[1]&1024&&(h.curSuperiorityDies=u[41]),f[1]&512&&(h.maxSuperiorityDie=u[40]),f[0]&1048576&&(h.customWeapons=u[20]),f[0]&2097152&&(h.onUpdateCustomWeapons=u[21]),i.$set(h);const d={};f[0]&16384&&(d.stats=u[14]),f[0]&4&&(d.allWeapons=u[2]),f[1]&1&&(d.equippedClass=u[31]),f[1]&4&&(d.unlockedClasses=u[33]),f[0]&536870912&&(d.equippedCombatSkills=u[29]),f[0]&4096&&(d.selectedWeapon=u[12]),f[0]&33554432&&(d.equippedWeapons=u[25]),f[0]&134217728&&(d.equippedCombatArts=u[27]),f[0]&8&&(d.allCombatSkills=u[3]),l.$set(d);const p={};f[0]&1&&(p.playerName=u[0]),f[1]&1&&(p.equippedClass=u[31]),f[0]&33554432&&(p.equippedWeapons=u[25]),f[0]&134217728&&(p.equippedCombatArts=u[27]),f[0]&536870912&&(p.equippedCombatSkills=u[29]),f[0]&64&&(p.weaponUses=u[6]),f[0]&128&&(p.onUpdateWeaponUses=u[7]),f[1]&1024&&(p.curSuperiorityDies=u[41]),f[0]&4&&(p.allWeapons=u[2]),f[0]&16&&(p.allCombatArts=u[4]),f[0]&256&&(p.playerCrest=u[8]),f[0]&16384&&(p.playerStats=u[14]),f[0]&4096&&(p.selectedWeapon=u[12]),f[0]&8192&&(p.setSelectedWeapon=u[13]),f[0]&1024&&(p.selectedCombatArt=u[10]),f[0]&2048&&(p.setSelectedCombatArt=u[11]),a.$set(p)},i(u){c||(D(i.$$.fragment,u),D(l.$$.fragment,u),D(a.$$.fragment,u),c=!0)},o(u){U(i.$$.fragment,u),U(l.$$.fragment,u),U(a.$$.fragment,u),c=!1},d(u){u&&g(e),fe(i),fe(l),fe(a)}}}function ST(n){let e,t,i;return t=new z4({props:{chatEntries:n[35],spoilersOn:n[36],toggleSpoilersOn:n[37],alreadyRevealed:n[38],setAlreadyRevealed:n[39]}}),{c(){e=E("div"),ce(t.$$.fragment),this.h()},l(s){e=A(s,"DIV",{});var r=w(e);ge(t.$$.fragment,r),r.forEach(g),this.h()},h(){rt(e,"grid-area",n[1]%3===1?"1 / classes/ 1 / rest":"1 / stats / 1 / arts")},m(s,r){B(s,e,r),ue(t,e,null),i=!0},p(s,r){const l={};r[1]&16&&(l.chatEntries=s[35]),r[1]&32&&(l.spoilersOn=s[36]),r[1]&64&&(l.toggleSpoilersOn=s[37]),r[1]&128&&(l.alreadyRevealed=s[38]),r[1]&256&&(l.setAlreadyRevealed=s[39]),t.$set(l),r[0]&2&&rt(e,"grid-area",s[1]%3===1?"1 / classes/ 1 / rest":"1 / stats / 1 / arts")},i(s){i||(D(t.$$.fragment,s),i=!0)},o(s){U(t.$$.fragment,s),i=!1},d(s){s&&g(e),fe(t)}}}function Ere(n){let e,t,i,s,r,l=n[1]%3!==2&&bT(n),o=n[1]%3===0&&_T(n),a=n[1]%3!==1&&yT(n),c=n[1]%3!==0&&ST(n);return{c(){e=E("div"),l&&l.c(),t=P(),o&&o.c(),i=P(),a&&a.c(),s=P(),c&&c.c(),this.h()},l(u){e=A(u,"DIV",{class:!0});var f=w(e);l&&l.l(f),t=M(f),o&&o.l(f),i=M(f),a&&a.l(f),s=M(f),c&&c.l(f),f.forEach(g),this.h()},h(){_(e,"class","container svelte-1qqh4vl")},m(u,f){B(u,e,f),l&&l.m(e,null),m(e,t),o&&o.m(e,null),m(e,i),a&&a.m(e,null),m(e,s),c&&c.m(e,null),r=!0},p(u,f){u[1]%3!==2?l?(l.p(u,f),f[0]&2&&D(l,1)):(l=bT(u),l.c(),D(l,1),l.m(e,t)):l&&(Le(),U(l,1,1,()=>{l=null}),Ve()),u[1]%3===0?o?(o.p(u,f),f[0]&2&&D(o,1)):(o=_T(u),o.c(),D(o,1),o.m(e,i)):o&&(Le(),U(o,1,1,()=>{o=null}),Ve()),u[1]%3!==1?a?(a.p(u,f),f[0]&2&&D(a,1)):(a=yT(u),a.c(),D(a,1),a.m(e,s)):a&&(Le(),U(a,1,1,()=>{a=null}),Ve()),u[1]%3!==0?c?(c.p(u,f),f[0]&2&&D(c,1)):(c=ST(u),c.c(),D(c,1),c.m(e,null)):c&&(Le(),U(c,1,1,()=>{c=null}),Ve())},i(u){r||(D(l),D(o),D(a),D(c),r=!0)},o(u){U(l),U(o),U(a),U(c),r=!1},d(u){u&&g(e),l&&l.d(),o&&o.d(),a&&a.d(),c&&c.d()}}}function Are(n,e,t){let i,{playerName:s}=e,{homeMode:r}=e,{allWeapons:l}=e,{allCombatSkills:o}=e,{allCombatArts:a}=e,{masteredClasses:c}=e,{weaponUses:u}=e,{onUpdateWeaponUses:f}=e,{playerCrest:h}=e,{onUpdateCrest:d}=e,{selectedCombatArt:p}=e,{setSelectedCombatArt:v}=e,{selectedWeapon:y}=e,{setSelectedWeapon:b}=e,{playerStats:S}=e,{onUpdatePlayerStats:I}=e,{customCombatSkills:T}=e,{onUpdateCustomCombatSkills:C}=e,{customCombatArts:k}=e,{onUpdateCustomCombatArts:R}=e,{customWeapons:O}=e,{onUpdateCustomWeapons:N}=e,{playerSkillBonus:F}=e,{playerSkillProficiency:W}=e,{onToggleSkillProficiency:z}=e,{equippedWeapons:Y}=e,{onToggleEquippedWeapons:H}=e,{equippedCombatArts:K}=e,{onToggleCombatArts:j}=e,{equippedCombatSkills:J}=e,{onToggleCombatSkill:Z}=e,{equippedClass:q}=e,{setEquippedClass:X}=e,{unlockedClasses:ne}=e,{onUpdateUnlockedClasses:Q}=e,{chatEntries:re}=e,{spoilersOn:be}=e,{toggleSpoilersOn:le}=e,{alreadyRevealed:he}=e,{setAlreadyRevealed:Ie}=e,G={current:0},ve=i;const je=$=>{t(41,ve=$)};return n.$$set=$=>{"playerName"in $&&t(0,s=$.playerName),"homeMode"in $&&t(1,r=$.homeMode),"allWeapons"in $&&t(2,l=$.allWeapons),"allCombatSkills"in $&&t(3,o=$.allCombatSkills),"allCombatArts"in $&&t(4,a=$.allCombatArts),"masteredClasses"in $&&t(5,c=$.masteredClasses),"weaponUses"in $&&t(6,u=$.weaponUses),"onUpdateWeaponUses"in $&&t(7,f=$.onUpdateWeaponUses),"playerCrest"in $&&t(8,h=$.playerCrest),"onUpdateCrest"in $&&t(9,d=$.onUpdateCrest),"selectedCombatArt"in $&&t(10,p=$.selectedCombatArt),"setSelectedCombatArt"in $&&t(11,v=$.setSelectedCombatArt),"selectedWeapon"in $&&t(12,y=$.selectedWeapon),"setSelectedWeapon"in $&&t(13,b=$.setSelectedWeapon),"playerStats"in $&&t(14,S=$.playerStats),"onUpdatePlayerStats"in $&&t(15,I=$.onUpdatePlayerStats),"customCombatSkills"in $&&t(16,T=$.customCombatSkills),"onUpdateCustomCombatSkills"in $&&t(17,C=$.onUpdateCustomCombatSkills),"customCombatArts"in $&&t(18,k=$.customCombatArts),"onUpdateCustomCombatArts"in $&&t(19,R=$.onUpdateCustomCombatArts),"customWeapons"in $&&t(20,O=$.customWeapons),"onUpdateCustomWeapons"in $&&t(21,N=$.onUpdateCustomWeapons),"playerSkillBonus"in $&&t(22,F=$.playerSkillBonus),"playerSkillProficiency"in $&&t(23,W=$.playerSkillProficiency),"onToggleSkillProficiency"in $&&t(24,z=$.onToggleSkillProficiency),"equippedWeapons"in $&&t(25,Y=$.equippedWeapons),"onToggleEquippedWeapons"in $&&t(26,H=$.onToggleEquippedWeapons),"equippedCombatArts"in $&&t(27,K=$.equippedCombatArts),"onToggleCombatArts"in $&&t(28,j=$.onToggleCombatArts),"equippedCombatSkills"in $&&t(29,J=$.equippedCombatSkills),"onToggleCombatSkill"in $&&t(30,Z=$.onToggleCombatSkill),"equippedClass"in $&&t(31,q=$.equippedClass),"setEquippedClass"in $&&t(32,X=$.setEquippedClass),"unlockedClasses"in $&&t(33,ne=$.unlockedClasses),"onUpdateUnlockedClasses"in $&&t(34,Q=$.onUpdateUnlockedClasses),"chatEntries"in $&&t(35,re=$.chatEntries),"spoilersOn"in $&&t(36,be=$.spoilersOn),"toggleSpoilersOn"in $&&t(37,le=$.toggleSpoilersOn),"alreadyRevealed"in $&&t(38,he=$.alreadyRevealed),"setAlreadyRevealed"in $&&t(39,Ie=$.setAlreadyRevealed)},n.$$.update=()=>{n.$$.dirty[1]&4&&t(40,i=B8(ne)),n.$$.dirty[1]&4608&&G.current!==i&&(t(41,ve=i),t(43,G.current=i,G))},[s,r,l,o,a,c,u,f,h,d,p,v,y,b,S,I,T,C,k,R,O,N,F,W,z,Y,H,K,j,J,Z,q,X,ne,Q,re,be,le,he,Ie,i,ve,je,G]}class wre extends nt{constructor(e){super(),it(this,e,Are,Ere,Ct,{playerName:0,homeMode:1,allWeapons:2,allCombatSkills:3,allCombatArts:4,masteredClasses:5,weaponUses:6,onUpdateWeaponUses:7,playerCrest:8,onUpdateCrest:9,selectedCombatArt:10,setSelectedCombatArt:11,selectedWeapon:12,setSelectedWeapon:13,playerStats:14,onUpdatePlayerStats:15,customCombatSkills:16,onUpdateCustomCombatSkills:17,customCombatArts:18,onUpdateCustomCombatArts:19,customWeapons:20,onUpdateCustomWeapons:21,playerSkillBonus:22,playerSkillProficiency:23,onToggleSkillProficiency:24,equippedWeapons:25,onToggleEquippedWeapons:26,equippedCombatArts:27,onToggleCombatArts:28,equippedCombatSkills:29,onToggleCombatSkill:30,equippedClass:31,setEquippedClass:32,unlockedClasses:33,onUpdateUnlockedClasses:34,chatEntries:35,spoilersOn:36,toggleSpoilersOn:37,alreadyRevealed:38,setAlreadyRevealed:39},null,[-1,-1])}}function ET(n,e,t){const i=n.slice();return i[21]=e[t],i}function AT(n){let e,t,i=n[5]%3===0?"All":n[5]%3===1?"RP":"COMBAT",s,r,l,o;return{c(){e=E("button"),t=L("MODE: "),s=L(i),this.h()},l(a){e=A(a,"BUTTON",{class:!0});var c=w(e);t=V(c,"MODE: "),s=V(c,i),c.forEach(g),this.h()},h(){_(e,"class",r=Ze(n[0]==="HOME"?"active":"")+" svelte-fxg17h")},m(a,c){B(a,e,c),m(e,t),m(e,s),l||(o=se(e,"click",n[13]),l=!0)},p(a,c){c&32&&i!==(i=a[5]%3===0?"All":a[5]%3===1?"RP":"COMBAT")&&Ce(s,i),c&1&&r!==(r=Ze(a[0]==="HOME"?"active":"")+" svelte-fxg17h")&&_(e,"class",r)},d(a){a&&g(e),l=!1,o()}}}function wT(n){let e,t=n[21]+"",i,s,r;return{c(){e=E("option"),i=L(t),this.h()},l(l){e=A(l,"OPTION",{});var o=w(e);i=V(o,t),o.forEach(g),this.h()},h(){e.__value=s=n[21],e.value=e.__value,e.selected=r=n[8]===n[21]},m(l,o){B(l,e,o),m(e,i)},p(l,o){o&512&&t!==(t=l[21]+"")&&Ce(i,t),o&512&&s!==(s=l[21])&&(e.__value=s,e.value=e.__value),o&768&&r!==(r=l[8]===l[21])&&(e.selected=r)},d(l){l&&g(e)}}}function Cre(n){let e,t,i,s,r,l,o,a,c,u,f,h,d,p,v,y,b,S,I,T,C,k,R,O,N,F,W,z,Y,H,K,j,J,Z,q,X,ne,Q=n[0]==="HOME"&&AT(n),re=n[9],be=[];for(let le=0;le<re.length;le+=1)be[le]=wT(ET(n,re,le));return{c(){e=E("div"),t=E("textarea"),i=P(),s=E("button"),r=L("Home"),o=P(),Q&&Q.c(),a=P(),c=E("button"),u=L("Chat"),h=P(),d=E("button"),p=L("Weapon XP"),y=P(),b=E("select"),S=E("option"),I=L("Main Sheet");for(let le=0;le<be.length;le+=1)be[le].c();C=P(),k=E("button"),R=L("Sheet Editor"),N=P(),F=E("button"),W=L("Dice Editor"),Y=P(),H=E("button"),K=L("Other Sheets"),J=P(),Z=E("button"),q=L("Export Sheet"),this.h()},l(le){e=A(le,"DIV",{class:!0});var he=w(e);t=A(he,"TEXTAREA",{type:!0,class:!0,rows:!0}),w(t).forEach(g),i=M(he),s=A(he,"BUTTON",{class:!0});var Ie=w(s);r=V(Ie,"Home"),Ie.forEach(g),o=M(he),Q&&Q.l(he),a=M(he),c=A(he,"BUTTON",{class:!0});var G=w(c);u=V(G,"Chat"),G.forEach(g),h=M(he),d=A(he,"BUTTON",{class:!0});var ve=w(d);p=V(ve,"Weapon XP"),ve.forEach(g),y=M(he),b=A(he,"SELECT",{});var je=w(b);S=A(je,"OPTION",{});var $=w(S);I=V($,"Main Sheet"),$.forEach(g);for(let He=0;He<be.length;He+=1)be[He].l(je);je.forEach(g),C=M(he),k=A(he,"BUTTON",{class:!0});var Oe=w(k);R=V(Oe,"Sheet Editor"),Oe.forEach(g),N=M(he),F=A(he,"BUTTON",{class:!0});var ie=w(F);W=V(ie,"Dice Editor"),ie.forEach(g),Y=M(he),H=A(he,"BUTTON",{class:!0});var _e=w(H);K=V(_e,"Other Sheets"),_e.forEach(g),J=M(he),Z=A(he,"BUTTON",{class:!0});var Ee=w(Z);q=V(Ee,"Export Sheet"),Ee.forEach(g),he.forEach(g),this.h()},h(){_(t,"type","text"),_(t,"class","name svelte-fxg17h"),t.value=n[2],_(t,"rows","3"),_(s,"class",l=Ze(n[0]==="HOME"?"active":"")+" svelte-fxg17h"),_(c,"class",f=Ze(n[0]==="ROLLS"?"active":"")+" svelte-fxg17h"),_(d,"class",v=Ze(n[0]==="XP"?"active":"")+" svelte-fxg17h"),S.__value="sheet",S.value=S.__value,S.selected=T=n[8]==="sheet",_(k,"class",O=Ze(n[0]==="EDITOR"?"active":"")+" svelte-fxg17h"),_(F,"class",z=Ze(n[0]==="DICE_EDITOR"?"active":"")+" svelte-fxg17h"),_(H,"class",j=Ze(n[0]==="OTHER_SHEETS"?"active":"")+" svelte-fxg17h"),_(Z,"class","svelte-fxg17h"),_(e,"class","container svelte-fxg17h")},m(le,he){B(le,e,he),m(e,t),m(e,i),m(e,s),m(s,r),m(e,o),Q&&Q.m(e,null),m(e,a),m(e,c),m(c,u),m(e,h),m(e,d),m(d,p),m(e,y),m(e,b),m(b,S),m(S,I);for(let Ie=0;Ie<be.length;Ie+=1)be[Ie].m(b,null);m(e,C),m(e,k),m(k,R),m(e,N),m(e,F),m(F,W),m(e,Y),m(e,H),m(H,K),m(e,J),m(e,Z),m(Z,q),X||(ne=[se(t,"input",n[11]),se(s,"click",n[12]),se(c,"click",n[14]),se(d,"click",n[15]),se(b,"change",n[16]),se(k,"click",n[17]),se(F,"click",n[18]),se(H,"click",n[19]),se(Z,"click",n[20])],X=!0)},p(le,[he]){if(he&4&&(t.value=le[2]),he&1&&l!==(l=Ze(le[0]==="HOME"?"active":"")+" svelte-fxg17h")&&_(s,"class",l),le[0]==="HOME"?Q?Q.p(le,he):(Q=AT(le),Q.c(),Q.m(e,a)):Q&&(Q.d(1),Q=null),he&1&&f!==(f=Ze(le[0]==="ROLLS"?"active":"")+" svelte-fxg17h")&&_(c,"class",f),he&1&&v!==(v=Ze(le[0]==="XP"?"active":"")+" svelte-fxg17h")&&_(d,"class",v),he&256&&T!==(T=le[8]==="sheet")&&(S.selected=T),he&768){re=le[9];let Ie;for(Ie=0;Ie<re.length;Ie+=1){const G=ET(le,re,Ie);be[Ie]?be[Ie].p(G,he):(be[Ie]=wT(G),be[Ie].c(),be[Ie].m(b,null))}for(;Ie<be.length;Ie+=1)be[Ie].d(1);be.length=re.length}he&1&&O!==(O=Ze(le[0]==="EDITOR"?"active":"")+" svelte-fxg17h")&&_(k,"class",O),he&1&&z!==(z=Ze(le[0]==="DICE_EDITOR"?"active":"")+" svelte-fxg17h")&&_(F,"class",z),he&1&&j!==(j=Ze(le[0]==="OTHER_SHEETS"?"active":"")+" svelte-fxg17h")&&_(H,"class",j)},i:Ke,o:Ke,d(le){le&&g(e),Q&&Q.d(),Ft(be,le),X=!1,on(ne)}}}function kre(n,e,t){let i,{currentPage:s}=e,{fullSheet:r}=e,{playerName:l}=e,{onUpdatePlayerName:o}=e,{onChangePage:a}=e,{homeMode:c}=e,{toggleHomeMode:u}=e,{onChangeCurSheet:f}=e,{curSheet:h}=e,{otherSheetNames:d}=e;const p=O=>o(O.currentTarget.value||""),v=()=>a("HOME"),y=()=>u(),b=()=>a("ROLLS"),S=()=>a("XP"),I=O=>f(O.currentTarget.value),T=()=>a("EDITOR"),C=()=>a("DICE_EDITOR"),k=()=>a("OTHER_SHEETS"),R=()=>L4(r);return n.$$set=O=>{"currentPage"in O&&t(0,s=O.currentPage),"fullSheet"in O&&t(1,r=O.fullSheet),"playerName"in O&&t(2,l=O.playerName),"onUpdatePlayerName"in O&&t(3,o=O.onUpdatePlayerName),"onChangePage"in O&&t(4,a=O.onChangePage),"homeMode"in O&&t(5,c=O.homeMode),"toggleHomeMode"in O&&t(6,u=O.toggleHomeMode),"onChangeCurSheet"in O&&t(7,f=O.onChangeCurSheet),"curSheet"in O&&t(8,h=O.curSheet),"otherSheetNames"in O&&t(10,d=O.otherSheetNames)},n.$$.update=()=>{n.$$.dirty&1024&&t(9,i=d.sort())},[s,r,l,o,a,c,u,f,h,i,d,p,v,y,b,S,I,T,C,k,R]}class Tre extends nt{constructor(e){super(),it(this,e,kre,Cre,Ct,{currentPage:0,fullSheet:1,playerName:2,onUpdatePlayerName:3,onChangePage:4,homeMode:5,toggleHomeMode:6,onChangeCurSheet:7,curSheet:8,otherSheetNames:10})}}const Ire=F5(null);const{window:Ore}=Yu;function CT(n){let e,t,i,s,r,l,o,a,c,u,f,h,d,p,v,y,b,S=n[1].closeButton&&kT(n);var I=n[2];function T(C){return{}}return I&&(l=An(I,T())),{c(){e=E("div"),t=E("div"),i=E("div"),S&&S.c(),s=P(),r=E("div"),l&&ce(l.$$.fragment),this.h()},l(C){e=A(C,"DIV",{class:!0,style:!0});var k=w(e);t=A(k,"DIV",{class:!0,style:!0});var R=w(t);i=A(R,"DIV",{class:!0,role:!0,"aria-modal":!0,"aria-label":!0,"aria-labelledby":!0,style:!0});var O=w(i);S&&S.l(O),s=M(O),r=A(O,"DIV",{id:!0,class:!0,style:!0});var N=w(r);l&&ge(l.$$.fragment,N),N.forEach(g),O.forEach(g),R.forEach(g),k.forEach(g),this.h()},h(){_(r,"id","SPECIAL_modal-content"),_(r,"class",o=Ze(n[1].classContent)+" svelte-1qgo808"),_(r,"style",n[9]),xe(r,"content",!n[0]),_(i,"class",a=Ze(n[1].classWindow)+" svelte-1qgo808"),_(i,"role","dialog"),_(i,"aria-modal","true"),_(i,"aria-label",c=n[1].ariaLabelledBy?null:n[1].ariaLabel||null),_(i,"aria-labelledby",u=n[1].ariaLabelledBy||null),_(i,"style",n[8]),xe(i,"window",!n[0]),_(t,"class",h=Ze(n[1].classWindowWrap)+" svelte-1qgo808"),_(t,"style",n[7]),xe(t,"wrap",!n[0]),_(e,"class",d=Ze(n[1].classBg)+" svelte-1qgo808"),_(e,"style",n[6]),xe(e,"bg",!n[0])},m(C,k){B(C,e,k),m(e,t),m(t,i),S&&S.m(i,null),m(i,s),m(i,r),l&&ue(l,r,null),n[48](i),n[49](t),n[50](e),v=!0,y||(b=[se(i,"introstart",function(){Mn(n[13])&&n[13].apply(this,arguments)}),se(i,"outrostart",function(){Mn(n[14])&&n[14].apply(this,arguments)}),se(i,"introend",function(){Mn(n[15])&&n[15].apply(this,arguments)}),se(i,"outroend",function(){Mn(n[16])&&n[16].apply(this,arguments)}),se(e,"mousedown",n[20]),se(e,"mouseup",n[21])],y=!0)},p(C,k){if(n=C,n[1].closeButton?S?(S.p(n,k),k[0]&2&&D(S,1)):(S=kT(n),S.c(),D(S,1),S.m(i,s)):S&&(Le(),U(S,1,1,()=>{S=null}),Ve()),I!==(I=n[2])){if(l){Le();const R=l;U(R.$$.fragment,1,0,()=>{fe(R,1)}),Ve()}I?(l=An(I,T()),ce(l.$$.fragment),D(l.$$.fragment,1),ue(l,r,null)):l=null}(!v||k[0]&2&&o!==(o=Ze(n[1].classContent)+" svelte-1qgo808"))&&_(r,"class",o),(!v||k[0]&512)&&_(r,"style",n[9]),(!v||k[0]&3)&&xe(r,"content",!n[0]),(!v||k[0]&2&&a!==(a=Ze(n[1].classWindow)+" svelte-1qgo808"))&&_(i,"class",a),(!v||k[0]&2&&c!==(c=n[1].ariaLabelledBy?null:n[1].ariaLabel||null))&&_(i,"aria-label",c),(!v||k[0]&2&&u!==(u=n[1].ariaLabelledBy||null))&&_(i,"aria-labelledby",u),(!v||k[0]&256)&&_(i,"style",n[8]),(!v||k[0]&3)&&xe(i,"window",!n[0]),(!v||k[0]&2&&h!==(h=Ze(n[1].classWindowWrap)+" svelte-1qgo808"))&&_(t,"class",h),(!v||k[0]&128)&&_(t,"style",n[7]),(!v||k[0]&3)&&xe(t,"wrap",!n[0]),(!v||k[0]&2&&d!==(d=Ze(n[1].classBg)+" svelte-1qgo808"))&&_(e,"class",d),(!v||k[0]&64)&&_(e,"style",n[6]),(!v||k[0]&3)&&xe(e,"bg",!n[0])},i(C){v||(D(S),l&&D(l.$$.fragment,C),cu(()=>{f||(f=Il(i,n[12],n[1].transitionWindowProps,!0)),f.run(1)}),cu(()=>{p||(p=Il(e,n[11],n[1].transitionBgProps,!0)),p.run(1)}),v=!0)},o(C){U(S),l&&U(l.$$.fragment,C),f||(f=Il(i,n[12],n[1].transitionWindowProps,!1)),f.run(0),p||(p=Il(e,n[11],n[1].transitionBgProps,!1)),p.run(0),v=!1},d(C){C&&g(e),S&&S.d(),l&&fe(l),n[48](null),C&&f&&f.end(),n[49](null),n[50](null),C&&p&&p.end(),y=!1,on(b)}}}function kT(n){let e,t,i,s,r;const l=[Dre,Rre],o=[];function a(c,u){return u[0]&2&&(e=null),e==null&&(e=!!c[17](c[1].closeButton)),e?0:1}return t=a(n,[-1,-1,-1]),i=o[t]=l[t](n),{c(){i.c(),s=et()},l(c){i.l(c),s=et()},m(c,u){o[t].m(c,u),B(c,s,u),r=!0},p(c,u){let f=t;t=a(c,u),t===f?o[t].p(c,u):(Le(),U(o[f],1,1,()=>{o[f]=null}),Ve(),i=o[t],i?i.p(c,u):(i=o[t]=l[t](c),i.c()),D(i,1),i.m(s.parentNode,s))},i(c){r||(D(i),r=!0)},o(c){U(i),r=!1},d(c){o[t].d(c),c&&g(s)}}}function Rre(n){let e,t,i,s;return{c(){e=E("button"),this.h()},l(r){e=A(r,"BUTTON",{class:!0,"aria-label":!0,style:!0}),w(e).forEach(g),this.h()},h(){_(e,"class",t=Ze(n[1].classCloseButton)+" svelte-1qgo808"),_(e,"aria-label","Close modal"),_(e,"style",n[10]),xe(e,"close",!n[0])},m(r,l){B(r,e,l),i||(s=se(e,"click",n[18]),i=!0)},p(r,l){l[0]&2&&t!==(t=Ze(r[1].classCloseButton)+" svelte-1qgo808")&&_(e,"class",t),l[0]&1024&&_(e,"style",r[10]),l[0]&3&&xe(e,"close",!r[0])},i:Ke,o:Ke,d(r){r&&g(e),i=!1,s()}}}function Dre(n){let e,t,i;var s=n[1].closeButton;function r(l){return{props:{onClose:l[18]}}}return s&&(e=An(s,r(n))),{c(){e&&ce(e.$$.fragment),t=et()},l(l){e&&ge(e.$$.fragment,l),t=et()},m(l,o){e&&ue(e,l,o),B(l,t,o),i=!0},p(l,o){if(s!==(s=l[1].closeButton)){if(e){Le();const a=e;U(a.$$.fragment,1,0,()=>{fe(a,1)}),Ve()}s?(e=An(s,r(l)),ce(e.$$.fragment),D(e.$$.fragment,1),ue(e,t.parentNode,t)):e=null}},i(l){i||(e&&D(e.$$.fragment,l),i=!0)},o(l){e&&U(e.$$.fragment,l),i=!1},d(l){l&&g(t),e&&fe(e,l)}}}function Nre(n){let e,t,i,s,r=n[2]&&CT(n);const l=n[47].default,o=os(l,n,n[46],null);return{c(){r&&r.c(),e=P(),o&&o.c()},l(a){r&&r.l(a),e=M(a),o&&o.l(a)},m(a,c){r&&r.m(a,c),B(a,e,c),o&&o.m(a,c),t=!0,i||(s=se(Ore,"keydown",n[19]),i=!0)},p(a,c){a[2]?r?(r.p(a,c),c[0]&4&&D(r,1)):(r=CT(a),r.c(),D(r,1),r.m(e.parentNode,e)):r&&(Le(),U(r,1,1,()=>{r=null}),Ve()),o&&o.p&&(!t||c[1]&32768)&&as(o,l,a,a[46],t?us(l,a[46],c,null):cs(a[46]),null)},i(a){t||(D(r),D(o,a),t=!0)},o(a){U(r),U(o,a),t=!1},d(a){r&&r.d(a),a&&g(e),o&&o.d(a),i=!1,s()}}}function Pre(n,e={}){return function(i){return new n({...i,props:{...e,...i.props}})}}function Mre(n,e,t){let{$$slots:i={},$$scope:s}=e;const r=Xu(),l=Jd;let{show:o=null}=e,{key:a=hs.MODAL}=e,{ariaLabel:c=null}=e,{ariaLabelledBy:u=null}=e,{closeButton:f=!0}=e,{closeOnEsc:h=!0}=e,{closeOnOuterClick:d=!0}=e,{styleBg:p={}}=e,{styleWindowWrap:v={}}=e,{styleWindow:y={}}=e,{styleContent:b={}}=e,{styleCloseButton:S={}}=e,{classBg:I=null}=e,{classWindowWrap:T=null}=e,{classWindow:C=null}=e,{classContent:k=null}=e,{classCloseButton:R=null}=e,{unstyled:O=!1}=e,{setContext:N=l}=e,{transitionBg:F=Q4}=e,{transitionBgProps:W={duration:250}}=e,{transitionWindow:z=F}=e,{transitionWindowProps:Y=W}=e,{disableFocusTrap:H=!1}=e;const K={ariaLabel:c,ariaLabelledBy:u,closeButton:f,closeOnEsc:h,closeOnOuterClick:d,styleBg:p,styleWindowWrap:v,styleWindow:y,styleContent:b,styleCloseButton:S,classBg:I,classWindowWrap:T,classWindow:C,classContent:k,classCloseButton:R,transitionBg:F,transitionBgProps:W,transitionWindow:z,transitionWindowProps:Y,disableFocusTrap:H,unstyled:O};let j={...K},J=null,Z,q,X,ne,Q,re,be,le,he,Ie,G,ve,je,$,Oe;const ie=me=>me.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase(),_e=me=>me?Object.keys(me).reduce((ot,Se)=>`${ot}; ${ie(Se)}: ${me[Se]}`,""):"",Ee=me=>!!(me&&me.constructor&&me.call&&me.apply),He=()=>{t(6,Q=_e(Object.assign({},{width:window.innerWidth,height:window.innerHeight},j.styleBg))),t(7,re=_e(j.styleWindowWrap)),t(8,be=_e(j.styleWindow)),t(9,le=_e(j.styleContent)),t(10,he=_e(j.styleCloseButton)),t(11,Ie=j.transitionBg),t(12,G=j.transitionWindow)},We=()=>{};let Qe=We,we=We,Me=We,de=We;const Ae=(me,ot={},Se={},ze={})=>{t(2,J=Pre(me,ot)),t(1,j={...K,...Se}),He();const ye=document.getElementById("SPECIAL_modal-content");if(ye)for(;ye.firstChild;)ye.removeChild(ye.firstChild);Fe(),t(13,Qe=ut=>{ze.onOpen&&ze.onOpen(ut),r("open"),r("opening")}),t(14,we=ut=>{ze.onClose&&ze.onClose(ut),ot.SPECIAL_callOnClose&&ot.SPECIAL_callOnClose(),r("close"),r("closing")}),t(15,Me=ut=>{ze.onOpened&&ze.onOpened(ut),r("opened")}),t(16,de=ut=>{ze.onClosed&&ze.onClosed(ut),r("closed")})},Re=(me={})=>{J&&(t(14,we=me.onClose||we),t(16,de=me.onClosed||de),t(2,J=null),ae())},Ne=me=>{if(j.closeOnEsc&&J&&me.key==="Escape"&&(me.preventDefault(),Re()),J&&me.key==="Tab"&&!j.disableFocusTrap){const ot=X.querySelectorAll("*"),Se=Array.from(ot).filter(ye=>ye.tabIndex>=0);let ze=Se.indexOf(document.activeElement);ze===-1&&me.shiftKey&&(ze=0),ze+=Se.length+(me.shiftKey?-1:1),ze%=Se.length,Se[ze].focus(),me.preventDefault()}},Ge=me=>{j.closeOnOuterClick&&(me.target===Z||me.target===q)&&(Oe=me.target)},pe=me=>{j.closeOnOuterClick&&me.target===Oe&&(me.preventDefault(),Re())},Fe=()=>{ne=window.scrollY,ve=document.body.style.position,je=document.body.style.overflow,$=document.body.style.width,document.body.style.position="fixed",document.body.style.top=`-${ne}px`,document.body.style.overflow="hidden",document.body.style.width="100%"},ae=()=>{document.body.style.position=ve||"",document.body.style.top="",document.body.style.overflow=je||"",document.body.style.width=$||"",window.scrollTo(0,ne)};N(a,{open:Ae,close:Re});let ke=!1;br(()=>{ke&&Re()}),Mi(()=>{t(45,ke=!0)});function oe(me){Vt[me?"unshift":"push"](()=>{X=me,t(5,X)})}function at(me){Vt[me?"unshift":"push"](()=>{q=me,t(4,q)})}function qe(me){Vt[me?"unshift":"push"](()=>{Z=me,t(3,Z)})}return n.$$set=me=>{"show"in me&&t(22,o=me.show),"key"in me&&t(23,a=me.key),"ariaLabel"in me&&t(24,c=me.ariaLabel),"ariaLabelledBy"in me&&t(25,u=me.ariaLabelledBy),"closeButton"in me&&t(26,f=me.closeButton),"closeOnEsc"in me&&t(27,h=me.closeOnEsc),"closeOnOuterClick"in me&&t(28,d=me.closeOnOuterClick),"styleBg"in me&&t(29,p=me.styleBg),"styleWindowWrap"in me&&t(30,v=me.styleWindowWrap),"styleWindow"in me&&t(31,y=me.styleWindow),"styleContent"in me&&t(32,b=me.styleContent),"styleCloseButton"in me&&t(33,S=me.styleCloseButton),"classBg"in me&&t(34,I=me.classBg),"classWindowWrap"in me&&t(35,T=me.classWindowWrap),"classWindow"in me&&t(36,C=me.classWindow),"classContent"in me&&t(37,k=me.classContent),"classCloseButton"in me&&t(38,R=me.classCloseButton),"unstyled"in me&&t(0,O=me.unstyled),"setContext"in me&&t(39,N=me.setContext),"transitionBg"in me&&t(40,F=me.transitionBg),"transitionBgProps"in me&&t(41,W=me.transitionBgProps),"transitionWindow"in me&&t(42,z=me.transitionWindow),"transitionWindowProps"in me&&t(43,Y=me.transitionWindowProps),"disableFocusTrap"in me&&t(44,H=me.disableFocusTrap),"$$scope"in me&&t(46,s=me.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&4194304|n.$$.dirty[1]&16384&&ke&&(Ee(o)?Ae(o):Re())},[O,j,J,Z,q,X,Q,re,be,le,he,Ie,G,Qe,we,Me,de,Ee,Re,Ne,Ge,pe,o,a,c,u,f,h,d,p,v,y,b,S,I,T,C,k,R,N,F,W,z,Y,H,ke,s,i,oe,at,qe]}class Bre extends nt{constructor(e){super(),it(this,e,Mre,Nre,Ct,{show:22,key:23,ariaLabel:24,ariaLabelledBy:25,closeButton:26,closeOnEsc:27,closeOnOuterClick:28,styleBg:29,styleWindowWrap:30,styleWindow:31,styleContent:32,styleCloseButton:33,classBg:34,classWindowWrap:35,classWindow:36,classContent:37,classCloseButton:38,unstyled:0,setContext:39,transitionBg:40,transitionBgProps:41,transitionWindow:42,transitionWindowProps:43,disableFocusTrap:44},null,[-1,-1,-1])}}function TT(n){let e,t;return{c(){e=E("div"),t=L(n[1])},l(i){e=A(i,"DIV",{});var s=w(e);t=V(s,n[1]),s.forEach(g)},m(i,s){B(i,e,s),m(e,t)},p(i,s){s&2&&Ce(t,i[1])},d(i){i&&g(e)}}}function IT(n){let e,t,i;const s=[n[3]];var r=n[2];function l(o){let a={};for(let c=0;c<s.length;c+=1)a=Qr(a,s[c]);return{props:a}}return r&&(e=An(r,l())),{c(){e&&ce(e.$$.fragment),t=et()},l(o){e&&ge(e.$$.fragment,o),t=et()},m(o,a){e&&ue(e,o,a),B(o,t,a),i=!0},p(o,a){const c=a&8?Xr(s,[Jo(o[3])]):{};if(r!==(r=o[2])){if(e){Le();const u=e;U(u.$$.fragment,1,0,()=>{fe(u,1)}),Ve()}r?(e=An(r,l()),ce(e.$$.fragment),D(e.$$.fragment,1),ue(e,t.parentNode,t)):e=null}else r&&e.$set(c)},i(o){i||(e&&D(e.$$.fragment,o),i=!0)},o(o){e&&U(e.$$.fragment,o),i=!1},d(o){o&&g(t),e&&fe(e,o)}}}function Lre(n){let e,t,i,s,r,l,o,a,c,u,f,h=n[1]&&TT(n),d=n[2]&&IT(n);return{c(){e=E("div"),t=E("h2"),i=L(n[0]),s=P(),h&&h.c(),r=P(),d&&d.c(),l=P(),o=E("button"),a=L("Close"),this.h()},l(p){e=A(p,"DIV",{class:!0});var v=w(e);t=A(v,"H2",{});var y=w(t);i=V(y,n[0]),y.forEach(g),s=M(v),h&&h.l(v),r=M(v),d&&d.l(v),l=M(v),o=A(v,"BUTTON",{});var b=w(o);a=V(b,"Close"),b.forEach(g),v.forEach(g),this.h()},h(){rt(o,"width","100%"),_(e,"class","container svelte-1wlyb3r")},m(p,v){B(p,e,v),m(e,t),m(t,i),m(e,s),h&&h.m(e,null),m(e,r),d&&d.m(e,null),m(e,l),m(e,o),m(o,a),c=!0,u||(f=se(o,"click",n[5]),u=!0)},p(p,[v]){(!c||v&1)&&Ce(i,p[0]),p[1]?h?h.p(p,v):(h=TT(p),h.c(),h.m(e,r)):h&&(h.d(1),h=null),p[2]?d?(d.p(p,v),v&4&&D(d,1)):(d=IT(p),d.c(),D(d,1),d.m(e,l)):d&&(Le(),U(d,1,1,()=>{d=null}),Ve())},i(p){c||(D(d),c=!0)},o(p){U(d),c=!1},d(p){p&&g(e),h&&h.d(),d&&d.d(),u=!1,f()}}}function Vre(n,e,t){const{close:i}=Bn(hs.MODAL);let{header:s}=e,{content:r}=e,{childElement:l}=e,{childElementProps:o}=e;const a=()=>i();return n.$$set=c=>{"header"in c&&t(0,s=c.header),"content"in c&&t(1,r=c.content),"childElement"in c&&t(2,l=c.childElement),"childElementProps"in c&&t(3,o=c.childElementProps)},[s,r,l,o,i,a]}class Ure extends nt{constructor(e){super(),it(this,e,Vre,Lre,Ct,{header:0,content:1,childElement:2,childElementProps:3})}}function OT(n,e,t){const i=n.slice();return i[14]=e[t],i}function Wre(n){let e,t;return{c(){e=E("label"),t=L("Battalion Equipped?"),this.h()},l(i){e=A(i,"LABEL",{for:!0});var s=w(e);t=V(s,"Battalion Equipped?"),s.forEach(g),this.h()},h(){_(e,"for","battalion-equipped")},m(i,s){B(i,e,s),m(e,t)},p:Ke,d(i){i&&g(e)}}}function Fre(n){let e,t;return{c(){e=E("div"),t=L("If you have a battalion equipped, you will gain 50% of Max XP to the leadership skill"),this.h()},l(i){e=A(i,"DIV",{slot:!0});var s=w(e);t=V(s,"If you have a battalion equipped, you will gain 50% of Max XP to the leadership skill"),s.forEach(g),this.h()},h(){_(e,"slot","t"),rt(e,"white-space","break-spaces")},m(i,s){B(i,e,s),m(e,t)},p:Ke,d(i){i&&g(e)}}}function RT(n){let e,t,i=Math.round(n[1]/Object.keys(n[3]).length*(n[6][n[14]]||1))+"",s;return{c(){e=E("div"),t=L("+"),s=L(i)},l(r){e=A(r,"DIV",{});var l=w(e);t=V(l,"+"),s=V(l,i),l.forEach(g)},m(r,l){B(r,e,l),m(e,t),m(e,s)},p(r,l){l&74&&i!==(i=Math.round(r[1]/Object.keys(r[3]).length*(r[6][r[14]]||1))+"")&&Ce(s,i)},d(r){r&&g(e)}}}function DT(n){let e,t,i,s,r,l,o=il[n[14]]+"",a,c,u,f,h;function d(){return n[12](n[14])}let p=n[3][n[14]]&&RT(n);return{c(){e=E("div"),t=E("div"),i=E("input"),r=P(),l=E("label"),a=L(o),c=P(),p&&p.c(),u=P(),this.h()},l(v){e=A(v,"DIV",{});var y=w(e);t=A(y,"DIV",{});var b=w(t);i=A(b,"INPUT",{type:!0,name:!0,id:!0}),r=M(b),l=A(b,"LABEL",{for:!0});var S=w(l);a=V(S,o),S.forEach(g),b.forEach(g),c=M(y),p&&p.l(y),u=M(y),y.forEach(g),this.h()},h(){_(i,"type","checkbox"),_(i,"name","weapon"),_(i,"id",n[14]),i.checked=s=n[3][n[14]],_(l,"for",n[14]),rt(t,"display","flex"),rt(e,"display","flex"),rt(e,"flex-direction","column"),rt(e,"align-items","center")},m(v,y){B(v,e,y),m(e,t),m(t,i),m(t,r),m(t,l),m(l,a),m(e,c),p&&p.m(e,null),m(e,u),f||(h=se(i,"click",d),f=!0)},p(v,y){n=v,y&8&&s!==(s=n[3][n[14]])&&(i.checked=s),n[3][n[14]]?p?p.p(n,y):(p=RT(n),p.c(),p.m(e,u)):p&&(p.d(1),p=null)},d(v){v&&g(e),p&&p.d(),f=!1,h()}}}function NT(n){let e,t=$g(n[4],{prefix:"Extra XP from equipped class:"})+"",i;return{c(){e=E("div"),i=L(t)},l(s){e=A(s,"DIV",{});var r=w(e);i=V(r,t),r.forEach(g)},m(s,r){B(s,e,r),m(e,i)},p(s,r){r&16&&t!==(t=$g(s[4],{prefix:"Extra XP from equipped class:"})+"")&&Ce(i,t)},d(s){s&&g(e)}}}function jre(n){let e,t,i,s,r,l,o,a,c,u,f,h=(Vo[n[0]]||"None")+"",d,p,v,y,b,S,I,T,C,k,R,O,N,F,W,z,Y,H,K,j,J,Z,q,X,ne,Q,re,be,le,he,Ie;k=new ai({props:{$$slots:{t:[Fre],default:[Wre]},$$scope:{ctx:n}}});let G=$_,ve=[];for(let $=0;$<G.length;$+=1)ve[$]=DT(OT(n,G,$));let je=n[5]&&NT(n);return{c(){e=E("div"),t=E("div"),i=E("span"),s=E("u"),r=L("Combat XP"),l=P(),o=E("span"),a=E("div"),c=L("Equipped Class:"),u=P(),f=E("b"),d=L(h),p=P(),v=E("span"),y=E("div"),b=L("Total XP for the Combat:"),S=P(),I=E("input"),T=P(),C=E("span"),ce(k.$$.fragment),R=P(),O=E("input"),N=P(),F=E("div"),W=E("fieldset"),z=E("legend"),Y=L("Select all weapons used in the combat"),H=P();for(let $=0;$<ve.length;$+=1)ve[$].c();K=P(),je&&je.c(),j=P(),J=E("div"),Z=E("button"),q=L("Add combat XP"),ne=P(),Q=E("button"),re=L("Click to clear all"),this.h()},l($){e=A($,"DIV",{class:!0});var Oe=w(e);t=A(Oe,"DIV",{});var ie=w(t);i=A(ie,"SPAN",{});var _e=w(i);s=A(_e,"U",{});var Ee=w(s);r=V(Ee,"Combat XP"),Ee.forEach(g),_e.forEach(g),l=M(ie),o=A(ie,"SPAN",{});var He=w(o);a=A(He,"DIV",{});var We=w(a);c=V(We,"Equipped Class:"),We.forEach(g),u=M(He),f=A(He,"B",{});var Qe=w(f);d=V(Qe,h),Qe.forEach(g),He.forEach(g),p=M(ie),v=A(ie,"SPAN",{});var we=w(v);y=A(we,"DIV",{});var Me=w(y);b=V(Me,"Total XP for the Combat:"),Me.forEach(g),S=M(we),I=A(we,"INPUT",{type:!0}),we.forEach(g),T=M(ie),C=A(ie,"SPAN",{});var de=w(C);ge(k.$$.fragment,de),R=M(de),O=A(de,"INPUT",{id:!0,type:!0}),de.forEach(g),ie.forEach(g),N=M(Oe),F=A(Oe,"DIV",{});var Ae=w(F);W=A(Ae,"FIELDSET",{class:!0});var Re=w(W);z=A(Re,"LEGEND",{});var Ne=w(z);Y=V(Ne,"Select all weapons used in the combat"),Ne.forEach(g),H=M(Re);for(let ae=0;ae<ve.length;ae+=1)ve[ae].l(Re);Re.forEach(g),K=M(Ae),je&&je.l(Ae),Ae.forEach(g),j=M(Oe),J=A(Oe,"DIV",{class:!0});var Ge=w(J);Z=A(Ge,"BUTTON",{});var pe=w(Z);q=V(pe,"Add combat XP"),pe.forEach(g),ne=M(Ge),Q=A(Ge,"BUTTON",{});var Fe=w(Q);re=V(Fe,"Click to clear all"),Fe.forEach(g),Ge.forEach(g),Oe.forEach(g),this.h()},h(){rt(o,"display","flex"),rt(o,"column-gap","5px"),_(I,"type","number"),rt(I,"width","30px"),rt(v,"display","flex"),rt(v,"column-gap","5px"),_(O,"id","battalion-equipped"),_(O,"type","checkbox"),rt(C,"display","flex"),rt(C,"column-gap","5px"),rt(t,"display","flex"),rt(t,"flex-direction","column"),_(W,"class","svelte-we8b5v"),rt(F,"flex","1"),rt(F,"display","flex"),rt(F,"flex-direction","column"),Z.disabled=X=!Object.keys(n[3]).length,Q.disabled=be=!Object.keys(n[3]).length,_(J,"class","button-container svelte-we8b5v"),_(e,"class","container svelte-we8b5v")},m($,Oe){B($,e,Oe),m(e,t),m(t,i),m(i,s),m(s,r),m(t,l),m(t,o),m(o,a),m(a,c),m(o,u),m(o,f),m(f,d),m(t,p),m(t,v),m(v,y),m(y,b),m(v,S),m(v,I),Ms(I,n[1]),m(t,T),m(t,C),ue(k,C,null),m(C,R),m(C,O),O.checked=n[2],m(e,N),m(e,F),m(F,W),m(W,z),m(z,Y),m(W,H);for(let ie=0;ie<ve.length;ie+=1)ve[ie].m(W,null);m(F,K),je&&je.m(F,null),m(e,j),m(e,J),m(J,Z),m(Z,q),m(J,ne),m(J,Q),m(Q,re),le=!0,he||(Ie=[se(I,"input",n[10]),se(O,"change",n[11]),se(Z,"click",function(){Mn(n[7])&&n[7].apply(this,arguments)}),se(Q,"click",n[13])],he=!0)},p($,[Oe]){n=$,(!le||Oe&1)&&h!==(h=(Vo[n[0]]||"None")+"")&&Ce(d,h),Oe&2&&iI(I.value)!==n[1]&&Ms(I,n[1]);const ie={};if(Oe&131072&&(ie.$$scope={dirty:Oe,ctx:n}),k.$set(ie),Oe&4&&(O.checked=n[2]),Oe&74){G=$_;let _e;for(_e=0;_e<G.length;_e+=1){const Ee=OT(n,G,_e);ve[_e]?ve[_e].p(Ee,Oe):(ve[_e]=DT(Ee),ve[_e].c(),ve[_e].m(W,null))}for(;_e<ve.length;_e+=1)ve[_e].d(1);ve.length=G.length}n[5]?je?je.p(n,Oe):(je=NT(n),je.c(),je.m(F,null)):je&&(je.d(1),je=null),(!le||Oe&8&&X!==(X=!Object.keys(n[3]).length))&&(Z.disabled=X),(!le||Oe&8&&be!==(be=!Object.keys(n[3]).length))&&(Q.disabled=be)},i($){le||(D(k.$$.fragment,$),le=!0)},o($){U(k.$$.fragment,$),le=!1},d($){$&&g(e),fe(k),Ft(ve,$),je&&je.d(),he=!1,on(Ie)}}}function Hre(n,e,t){let i,s,r,l,{equippedClass:o}=e,{weaponXP:a}=e,{onWeaponXpChange:c}=e,u=24,f=!1,h={};function d(){u=iI(this.value),t(1,u)}function p(){f=this.checked,t(2,f)}const v=b=>{if(h[b]){const{[b]:S,...I}=h;t(3,h=I)}else t(3,h={...h,[b]:!0})},y=()=>t(3,h={});return n.$$set=b=>{"equippedClass"in b&&t(0,o=b.equippedClass),"weaponXP"in b&&t(8,a=b.weaponXP),"onWeaponXpChange"in b&&t(9,c=b.onWeaponXpChange)},n.$$.update=()=>{var b,S,I,T;n.$$.dirty&1&&t(4,i=((S=(b=Xt[o])==null?void 0:b.whenEquipped)==null?void 0:S.xpMooch)||{}),n.$$.dirty&1&&t(6,s=((T=(I=Xt[o])==null?void 0:I.whenEquipped)==null?void 0:T.xpMods)||{}),n.$$.dirty&16&&t(5,r=!!Object.keys(i).length),n.$$.dirty&894&&t(7,l=async()=>{const C=Object.keys(h),k=C.reduce((O,N)=>(O[N]=Math.round(u/C.length*(s[N]||1)),O),{});r&&Object.keys(i).forEach(O=>k[O]=Math.round(u*i[O]));const R=Object.keys(k);for(const O of R){const N=a[O]||{level:Be.E,total:0,mastered:!1};await c(k[O],{type:O,curLevel:N.level,curXP:N.total,maxXP:Qg[N.level]})}if(f){const O=te.LEADERSHIP,N=a[O]||{level:Be.E,total:0,mastered:!1};c(Math.round(u/2),{type:O,curLevel:N.level,curXP:N.total,maxXP:Qg[N.level]})}})},[o,u,f,h,i,r,s,l,a,c,d,p,v,y]}class qre extends nt{constructor(e){super(),it(this,e,Hre,jre,Ct,{equippedClass:0,weaponXP:8,onWeaponXpChange:9})}}function PT(n){let e,t;return{c(){e=E("div"),t=L(n[1])},l(i){e=A(i,"DIV",{});var s=w(e);t=V(s,n[1]),s.forEach(g)},m(i,s){B(i,e,s),m(e,t)},p(i,s){s&2&&Ce(t,i[1])},d(i){i&&g(e)}}}function MT(n){let e,t;return{c(){e=E("div"),t=L("Nothing :)")},l(i){e=A(i,"DIV",{});var s=w(e);t=V(s,"Nothing :)"),s.forEach(g)},m(i,s){B(i,e,s),m(e,t)},d(i){i&&g(e)}}}function zre(n){let e,t,i,s=n[0]?"Always ":"",r,l,o,a,c=n[1]&&PT(n),u=!n[1]&&MT();return{c(){e=E("div"),t=E("div"),i=E("u"),r=L(s),l=L("Unlocks"),o=P(),c&&c.c(),a=P(),u&&u.c(),this.h()},l(f){e=A(f,"DIV",{class:!0});var h=w(e);t=A(h,"DIV",{});var d=w(t);i=A(d,"U",{});var p=w(i);r=V(p,s),l=V(p,"Unlocks"),p.forEach(g),d.forEach(g),o=M(h),c&&c.l(h),a=M(h),u&&u.l(h),h.forEach(g),this.h()},h(){_(e,"class","container")},m(f,h){B(f,e,h),m(e,t),m(t,i),m(i,r),m(i,l),m(e,o),c&&c.m(e,null),m(e,a),u&&u.m(e,null)},p(f,[h]){h&1&&s!==(s=f[0]?"Always ":"")&&Ce(r,s),f[1]?c?c.p(f,h):(c=PT(f),c.c(),c.m(e,a)):c&&(c.d(1),c=null),f[1]?u&&(u.d(1),u=null):u||(u=MT(),u.c(),u.m(e,null))},i:Ke,o:Ke,d(f){f&&g(e),c&&c.d(),u&&u.d()}}}function Gre(n,e,t){let i,{type:s}=e,{level:r}=e,{disablePickOne:l=!1}=e;return n.$$set=o=>{"type"in o&&t(2,s=o.type),"level"in o&&t(3,r=o.level),"disablePickOne"in o&&t(0,l=o.disablePickOne)},n.$$.update=()=>{var o;n.$$.dirty&13&&t(1,i=nd((o=zl[s])==null?void 0:o[r],l))},[l,i,s,r]}class fg extends nt{constructor(e){super(),it(this,e,Gre,zre,Ct,{type:2,level:3,disablePickOne:0})}}function BT(n,e,t){var o,a;const i=n.slice();i[44]=e[t],i[49]=t;const s=((o=i[2][i[44]])==null?void 0:o.total)||0;i[45]=s;const r=td.has(i[44])?i7:To.has(i[44])?s7:1e4;i[46]=r;const l=(a=i[2][i[44]])==null?void 0:a.mastered;return i[47]=l,i}function LT(n,e,t){var c,u,f;const i=n.slice();i[50]=e[t],i[49]=t;const s=((c=i[1][i[50]])==null?void 0:c.total)||0;i[45]=s;const r=((u=i[1][i[50]])==null?void 0:u.level)||Be.E;i[51]=r;const l=rl[rl.findIndex(function(...d){return n[37](i[50],...d)})+1];i[52]=l;const o=nd((f=zl[i[50]])==null?void 0:f[i[52]]);i[53]=o;const a=Qg[i[51]];return i[46]=a,i}function VT(n,e,t){const i=n.slice();return i[55]=e[t],i}function UT(n,e,t){const i=n.slice();return i[58]=e[t],i}function Kre(n){let e,t;return{c(){e=E("u"),t=L("Stat Modifier"),this.h()},l(i){e=A(i,"U",{class:!0});var s=w(e);t=V(s,"Stat Modifier"),s.forEach(g),this.h()},h(){_(e,"class","header svelte-3zpgt7"),rt(e,"text-align","center"),rt(e,"white-space","nowrap")},m(i,s){B(i,e,s),m(e,t)},p:Ke,d(i){i&&g(e)}}}function Qre(n){let e,t;return{c(){e=E("div"),t=L("The stat that will be added when doing XP rolls."),this.h()},l(i){e=A(i,"DIV",{slot:!0});var s=w(e);t=V(s,"The stat that will be added when doing XP rolls."),s.forEach(g),this.h()},h(){_(e,"slot","t")},m(i,s){B(i,e,s),m(e,t)},p:Ke,d(i){i&&g(e)}}}function WT(n){let e,t=bh[n[58]]+"",i,s;return{c(){e=E("option"),i=L(t),this.h()},l(r){e=A(r,"OPTION",{});var l=w(e);i=V(l,t),l.forEach(g),this.h()},h(){e.__value=Be[n[58]],e.value=e.__value,e.selected=s=n[51]===n[58]},m(r,l){B(r,e,l),m(e,i)},p(r,l){l[0]&2&&s!==(s=r[51]===r[58])&&(e.selected=s)},d(r){r&&g(e)}}}function Xre(n){let e,t,i,s,r=Object.keys(Be),l=[];for(let a=0;a<r.length;a+=1)l[a]=WT(UT(n,r,a));function o(...a){return n[34](n[50],n[51],...a)}return{c(){e=E("div"),t=E("select");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){e=A(a,"DIV",{class:!0});var c=w(e);t=A(c,"SELECT",{name:!0});var u=w(t);for(let f=0;f<l.length;f+=1)l[f].l(u);u.forEach(g),c.forEach(g),this.h()},h(){_(t,"name","weapon_level"),_(e,"class","content svelte-3zpgt7")},m(a,c){B(a,e,c),m(e,t);for(let u=0;u<l.length;u+=1)l[u].m(t,null);i||(s=[se(t,"change",o),se(t,"mouseover",n[15](n[49],!0)),se(t,"mouseleave",n[15](-1,!0)),se(t,"focus",n[15](n[49],!0))],i=!0)},p(a,c){if(n=a,c[0]&2){r=Object.keys(Be);let u;for(u=0;u<r.length;u+=1){const f=UT(n,r,u);l[u]?l[u].p(f,c):(l[u]=WT(f),l[u].c(),l[u].m(t,null))}for(;u<l.length;u+=1)l[u].d(1);l.length=r.length}},d(a){a&&g(e),Ft(l,a),i=!1,on(s)}}}function Yre(n){var b;let e,t,i,s,r,l,o=(nd((b=zl[n[50]])==null?void 0:b[n[51]])||"Nothing")+"",a,c,u,f,h,d,p,v=(n[53]||"Nothing")+"",y;return{c(){e=E("div"),t=E("div"),i=E("u"),s=L("Current Level:"),r=P(),l=E("div"),a=L(o),c=P(),u=E("div"),f=E("u"),h=L("On Level Up:"),d=P(),p=E("div"),y=L(v),this.h()},l(S){e=A(S,"DIV",{slot:!0});var I=w(e);t=A(I,"DIV",{});var T=w(t);i=A(T,"U",{});var C=w(i);s=V(C,"Current Level:"),C.forEach(g),T.forEach(g),r=M(I),l=A(I,"DIV",{});var k=w(l);a=V(k,o),k.forEach(g),c=M(I),u=A(I,"DIV",{});var R=w(u);f=A(R,"U",{});var O=w(f);h=V(O,"On Level Up:"),O.forEach(g),R.forEach(g),d=M(I),p=A(I,"DIV",{});var N=w(p);y=V(N,v),N.forEach(g),I.forEach(g),this.h()},h(){_(e,"slot","t")},m(S,I){B(S,e,I),m(e,t),m(t,i),m(i,s),m(e,r),m(e,l),m(l,a),m(e,c),m(e,u),m(u,f),m(f,h),m(e,d),m(e,p),m(p,y)},p(S,I){var T;I[0]&2&&o!==(o=(nd((T=zl[S[50]])==null?void 0:T[S[51]])||"Nothing")+"")&&Ce(a,o),I[0]&2&&v!==(v=(S[53]||"Nothing")+"")&&Ce(y,v)},d(S){S&&g(e)}}}function FT(n){let e,t;return e=new ai({props:{tooltipStyle:ns.BOTTOM_CENTER,$$slots:{t:[Yre],default:[Xre]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s[0]&8226|s[1]&1073741824&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function Jre(n){let e,t,i,s=sl[n[50]],r=[];for(let o=0;o<s.length;o+=1)r[o]=jT(VT(n,s,o));function l(...o){return n[35](n[50],...o)}return{c(){e=E("select");for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){e=A(o,"SELECT",{class:!0});var a=w(e);for(let c=0;c<r.length;c+=1)r[c].l(a);a.forEach(g),this.h()},h(){_(e,"class","content svelte-3zpgt7")},m(o,a){B(o,e,a);for(let c=0;c<r.length;c+=1)r[c].m(e,null);t||(i=[se(e,"change",l),se(e,"mouseover",n[15](n[49],!0)),se(e,"mouseleave",n[15](-1,!0)),se(e,"focus",n[15](n[49],!0))],t=!0)},p(o,a){if(n=o,a[0]&512){s=sl[n[50]];let c;for(c=0;c<s.length;c+=1){const u=VT(n,s,c);r[c]?r[c].p(u,a):(r[c]=jT(u),r[c].c(),r[c].m(e,null))}for(;c<r.length;c+=1)r[c].d(1);r.length=s.length}},d(o){o&&g(e),Ft(r,o),t=!1,on(i)}}}function jT(n){let e,t=zs[n[55]]+"",i,s;return{c(){e=E("option"),i=L(t),this.h()},l(r){e=A(r,"OPTION",{});var l=w(e);i=V(l,t),l.forEach(g),this.h()},h(){e.__value=n[55],e.value=e.__value,e.selected=s=n[9][n[50]]===n[55]},m(r,l){B(r,e,l),m(e,i)},p(r,l){l[0]&512&&s!==(s=r[9][r[50]]===r[55])&&(e.selected=s)},d(r){r&&g(e)}}}function Zre(n){let e,t=zs[sl[n[50]][0]]+"",i;return{c(){e=E("span"),i=L(t),this.h()},l(s){e=A(s,"SPAN",{class:!0});var r=w(e);i=V(r,t),r.forEach(g),this.h()},h(){_(e,"class","content svelte-3zpgt7"),rt(e,"text-align","center"),rt(e,"cursor","default")},m(s,r){B(s,e,r),m(e,i)},p:Ke,d(s){s&&g(e)}}}function xre(n){let e,t,i,s,r,l;function o(){return n[36](n[51],n[45],n[46],n[50])}return{c(){e=E("button"),t=L("Roll"),s=P(),this.h()},l(a){e=A(a,"BUTTON",{});var c=w(e);t=V(c,"Roll"),c.forEach(g),s=M(a),this.h()},h(){e.disabled=i=n[7]<=0},m(a,c){B(a,e,c),m(e,t),B(a,s,c),r||(l=[se(e,"click",o),se(e,"mouseover",n[15](n[49],!0)),se(e,"mouseleave",n[15](-1,!0)),se(e,"focus",n[15](n[49],!0))],r=!0)},p(a,c){n=a,c[0]&128&&i!==(i=n[7]<=0)&&(e.disabled=i)},d(a){a&&g(e),a&&g(s),r=!1,on(l)}}}function $re(n){let e,t,i,s,r,l,o="<= 1 Awful",a,c,u,f,h,d,p,v="2-5 Poor",y,b,S,I,T,C,k,R,O,N,F,W,z,Y,H=">= 16 Great",K,j,J,Z,q,X,ne,Q,re,be,le,he,Ie,G,ve,je,$,Oe,ie;return{c(){e=E("div"),t=E("div"),i=L("Roll for your lecture:"),s=P(),r=E("div"),l=E("span"),a=L(o),c=P(),u=E("span"),f=L("= 0 XP"),h=P(),d=E("div"),p=E("span"),y=L(v),b=P(),S=E("span"),I=L("= 6 XP"),T=P(),C=E("div"),k=E("span"),R=L("6-15 Good"),O=P(),N=E("span"),F=L("= 9 XP"),W=P(),z=E("div"),Y=E("span"),K=L(H),j=P(),J=E("span"),Z=L("= 12 XP and +1 Roll (1 per session)"),q=P(),X=E("div"),ne=E("span"),Q=L("Nat 1 Awful"),re=P(),be=E("span"),le=L("= 0 XP"),he=P(),Ie=E("div"),G=E("span"),ve=L("Nat 20 Perfect"),je=P(),$=E("span"),Oe=L("= 16 XP and +1 Roll"),ie=P(),this.h()},l(_e){e=A(_e,"DIV",{slot:!0});var Ee=w(e);t=A(Ee,"DIV",{});var He=w(t);i=V(He,"Roll for your lecture:"),He.forEach(g),s=M(Ee),r=A(Ee,"DIV",{class:!0});var We=w(r);l=A(We,"SPAN",{class:!0});var Qe=w(l);a=V(Qe,o),Qe.forEach(g),c=M(We),u=A(We,"SPAN",{class:!0});var we=w(u);f=V(we,"= 0 XP"),we.forEach(g),We.forEach(g),h=M(Ee),d=A(Ee,"DIV",{class:!0});var Me=w(d);p=A(Me,"SPAN",{class:!0});var de=w(p);y=V(de,v),de.forEach(g),b=M(Me),S=A(Me,"SPAN",{class:!0});var Ae=w(S);I=V(Ae,"= 6 XP"),Ae.forEach(g),Me.forEach(g),T=M(Ee),C=A(Ee,"DIV",{class:!0});var Re=w(C);k=A(Re,"SPAN",{class:!0});var Ne=w(k);R=V(Ne,"6-15 Good"),Ne.forEach(g),O=M(Re),N=A(Re,"SPAN",{class:!0});var Ge=w(N);F=V(Ge,"= 9 XP"),Ge.forEach(g),Re.forEach(g),W=M(Ee),z=A(Ee,"DIV",{class:!0});var pe=w(z);Y=A(pe,"SPAN",{class:!0});var Fe=w(Y);K=V(Fe,H),Fe.forEach(g),j=M(pe),J=A(pe,"SPAN",{class:!0});var ae=w(J);Z=V(ae,"= 12 XP and +1 Roll (1 per session)"),ae.forEach(g),pe.forEach(g),q=M(Ee),X=A(Ee,"DIV",{class:!0});var ke=w(X);ne=A(ke,"SPAN",{class:!0});var oe=w(ne);Q=V(oe,"Nat 1 Awful"),oe.forEach(g),re=M(ke),be=A(ke,"SPAN",{class:!0});var at=w(be);le=V(at,"= 0 XP"),at.forEach(g),ke.forEach(g),he=M(Ee),Ie=A(Ee,"DIV",{class:!0});var qe=w(Ie);G=A(qe,"SPAN",{class:!0});var me=w(G);ve=V(me,"Nat 20 Perfect"),me.forEach(g),je=M(qe),$=A(qe,"SPAN",{class:!0});var ot=w($);Oe=V(ot,"= 16 XP and +1 Roll"),ot.forEach(g),qe.forEach(g),ie=M(Ee),Ee.forEach(g),this.h()},h(){_(l,"class","svelte-3zpgt7"),_(u,"class","svelte-3zpgt7"),_(r,"class","test svelte-3zpgt7"),_(p,"class","svelte-3zpgt7"),_(S,"class","svelte-3zpgt7"),_(d,"class","test svelte-3zpgt7"),_(k,"class","svelte-3zpgt7"),_(N,"class","svelte-3zpgt7"),_(C,"class","test svelte-3zpgt7"),_(Y,"class","svelte-3zpgt7"),_(J,"class","svelte-3zpgt7"),_(z,"class","test svelte-3zpgt7"),_(ne,"class","svelte-3zpgt7"),_(be,"class","svelte-3zpgt7"),_(X,"class","test svelte-3zpgt7"),_(G,"class","svelte-3zpgt7"),_($,"class","svelte-3zpgt7"),_(Ie,"class","test svelte-3zpgt7"),_(e,"slot","t")},m(_e,Ee){B(_e,e,Ee),m(e,t),m(t,i),m(e,s),m(e,r),m(r,l),m(l,a),m(r,c),m(r,u),m(u,f),m(e,h),m(e,d),m(d,p),m(p,y),m(d,b),m(d,S),m(S,I),m(e,T),m(e,C),m(C,k),m(k,R),m(C,O),m(C,N),m(N,F),m(e,W),m(e,z),m(z,Y),m(Y,K),m(z,j),m(z,J),m(J,Z),m(e,q),m(e,X),m(X,ne),m(ne,Q),m(X,re),m(X,be),m(be,le),m(e,he),m(e,Ie),m(Ie,G),m(G,ve),m(Ie,je),m(Ie,$),m($,Oe),m(e,ie)},p:Ke,d(_e){_e&&g(e)}}}function HT(n){let e,t=il[n[50]]+"",i,s,r,l,o,a,c=`${n[45]} / ${n[46]}`,u,f,h,d,p,v,y,b,S=n[5],I,T,C,k,R,O,N;function F(...H){return n[33](n[51],n[45],n[46],n[50],...H)}let W=FT(n),z=sl[n[50]].length>1&&Jre(n),Y=sl[n[50]].length<=1&&Zre(n);return k=new ai({props:{tooltipStyle:ns.BOTTOM_CENTER,tooltipPositionerStyle:"z-index: 100",$$slots:{t:[$re],default:[xre]},$$scope:{ctx:n}}}),{c(){e=E("div"),i=L(t),r=P(),l=E("div"),o=E("div"),a=E("span"),u=L(c),f=P(),h=E("div"),d=E("div"),p=L("XP to Add"),v=P(),y=E("input"),b=P(),W.c(),I=P(),z&&z.c(),T=P(),Y&&Y.c(),C=P(),ce(k.$$.fragment),this.h()},l(H){e=A(H,"DIV",{class:!0});var K=w(e);i=V(K,t),K.forEach(g),r=M(H),l=A(H,"DIV",{class:!0});var j=w(l);o=A(j,"DIV",{class:!0});var J=w(o);a=A(J,"SPAN",{class:!0});var Z=w(a);u=V(Z,c),Z.forEach(g),J.forEach(g),j.forEach(g),f=M(H),h=A(H,"DIV",{class:!0});var q=w(h);d=A(q,"DIV",{class:!0});var X=w(d);p=V(X,"XP to Add"),X.forEach(g),v=M(q),y=A(q,"INPUT",{type:!0,class:!0}),q.forEach(g),b=M(H),W.l(H),I=M(H),z&&z.l(H),T=M(H),Y&&Y.l(H),C=M(H),ge(k.$$.fragment,H),this.h()},h(){_(e,"class",s=Ze(Zi("label content",{focused:n[11].i===n[49]&&n[11].weaponSide}))+" svelte-3zpgt7"),_(a,"class","svelte-3zpgt7"),_(o,"class","fill svelte-3zpgt7"),rt(o,"right",`${(n[46]-n[45])/n[46]*100}%`),_(l,"class","xp-bar content svelte-3zpgt7"),_(d,"class","prompt"),_(y,"type","number"),_(y,"class","svelte-3zpgt7"),_(h,"class","form content svelte-3zpgt7")},m(H,K){B(H,e,K),m(e,i),B(H,r,K),B(H,l,K),m(l,o),m(o,a),m(a,u),B(H,f,K),B(H,h,K),m(h,d),m(d,p),m(h,v),m(h,y),B(H,b,K),W.m(H,K),B(H,I,K),z&&z.m(H,K),B(H,T,K),Y&&Y.m(H,K),B(H,C,K),ue(k,H,K),R=!0,O||(N=[se(y,"mouseover",n[15](n[49],!0)),se(y,"mouseleave",n[15](-1,!0)),se(y,"focus",n[15](n[49],!0)),se(y,"change",F)],O=!0)},p(H,K){n=H,(!R||K[0]&2048&&s!==(s=Ze(Zi("label content",{focused:n[11].i===n[49]&&n[11].weaponSide}))+" svelte-3zpgt7"))&&_(e,"class",s),(!R||K[0]&2)&&c!==(c=`${n[45]} / ${n[46]}`)&&Ce(u,c),K[0]&2&&rt(o,"right",`${(n[46]-n[45])/n[46]*100}%`),K[0]&32&&Ct(S,S=n[5])?(Le(),U(W,1,1,Ke),Ve(),W=FT(n),W.c(),D(W,1),W.m(I.parentNode,I)):W.p(n,K),sl[n[50]].length>1&&z.p(n,K),sl[n[50]].length<=1&&Y.p(n,K);const j={};K[0]&4226|K[1]&1073741824&&(j.$$scope={dirty:K,ctx:n}),k.$set(j)},i(H){R||(D(W),D(k.$$.fragment,H),R=!0)},o(H){U(W),U(k.$$.fragment,H),R=!1},d(H){H&&g(e),H&&g(r),H&&g(l),H&&g(f),H&&g(h),H&&g(b),W.d(H),H&&g(I),z&&z.d(H),H&&g(T),Y&&Y.d(H),H&&g(C),fe(k,H),O=!1,on(N)}}}function ele(n){let e,t,i;return{c(){e=E("span"),t=L("# of rolls remaining:"),this.h()},l(s){e=A(s,"SPAN",{class:!0});var r=w(e);t=V(r,"# of rolls remaining:"),r.forEach(g),this.h()},h(){_(e,"class",i=Ze(Zi({"great-already":n[8]}))+" svelte-3zpgt7")},m(s,r){B(s,e,r),m(e,t)},p(s,r){r[0]&256&&i!==(i=Ze(Zi({"great-already":s[8]}))+" svelte-3zpgt7")&&_(e,"class",i)},d(s){s&&g(e)}}}function tle(n){let e,t,i,s,r,l,o,a;return{c(){e=E("div"),t=E("span"),i=L(`This text turns orange when you have rolled a 16+ for this training session already.
						Meaning any more 16+ will not add 1 to your available training sessions.`),s=P(),r=E("br"),l=P(),o=E("span"),a=L("Will be reset when you click the Reset Rolls button"),this.h()},l(c){e=A(c,"DIV",{slot:!0});var u=w(e);t=A(u,"SPAN",{});var f=w(t);i=V(f,`This text turns orange when you have rolled a 16+ for this training session already.
						Meaning any more 16+ will not add 1 to your available training sessions.`),f.forEach(g),s=M(u),r=A(u,"BR",{}),l=M(u),o=A(u,"SPAN",{});var h=w(o);a=V(h,"Will be reset when you click the Reset Rolls button"),h.forEach(g),u.forEach(g),this.h()},h(){_(e,"slot","t")},m(c,u){B(c,e,u),m(e,t),m(t,i),m(e,s),m(e,r),m(e,l),m(e,o),m(o,a)},p:Ke,d(c){c&&g(e)}}}function qT(n){let e,t=Vo[n[44]]+"",i,s,r,l,o,a,c=`${n[45]} / ${n[46]}`,u,f,h,d,p,v,y,b,S,I,T,C,k,R,O,N;function F(...W){return n[40](n[45],n[46],n[44],...W)}return{c(){e=E("div"),i=L(t),r=P(),l=E("div"),o=E("div"),a=E("span"),u=L(c),h=P(),d=E("div"),p=E("div"),v=L("XP to Add"),y=P(),b=E("input"),S=P(),I=E("span"),T=P(),C=E("span"),k=P(),R=E("span"),this.h()},l(W){e=A(W,"DIV",{class:!0});var z=w(e);i=V(z,t),z.forEach(g),r=M(W),l=A(W,"DIV",{class:!0});var Y=w(l);o=A(Y,"DIV",{class:!0});var H=w(o);a=A(H,"SPAN",{class:!0});var K=w(a);u=V(K,c),K.forEach(g),H.forEach(g),Y.forEach(g),h=M(W),d=A(W,"DIV",{class:!0});var j=w(d);p=A(j,"DIV",{class:!0});var J=w(p);v=V(J,"XP to Add"),J.forEach(g),y=M(j),b=A(j,"INPUT",{type:!0,class:!0}),j.forEach(g),S=M(W),I=A(W,"SPAN",{}),w(I).forEach(g),T=M(W),C=A(W,"SPAN",{}),w(C).forEach(g),k=M(W),R=A(W,"SPAN",{}),w(R).forEach(g),this.h()},h(){_(e,"class",s=Ze(Zi("label content",{focused:n[11].i===n[49]&&!n[11].weaponSide}))+" svelte-3zpgt7"),_(a,"class","svelte-3zpgt7"),_(o,"class",f=Ze(`fill ${n[47]?"mastered":""}`)+" svelte-3zpgt7"),rt(o,"right",`${(n[46]-n[45])/n[46]*100}%`),_(l,"class","xp-bar content svelte-3zpgt7"),_(p,"class","prompt"),_(b,"type","number"),_(b,"class","svelte-3zpgt7"),_(d,"class","form svelte-3zpgt7")},m(W,z){B(W,e,z),m(e,i),B(W,r,z),B(W,l,z),m(l,o),m(o,a),m(a,u),B(W,h,z),B(W,d,z),m(d,p),m(p,v),m(d,y),m(d,b),B(W,S,z),B(W,I,z),B(W,T,z),B(W,C,z),B(W,k,z),B(W,R,z),O||(N=[se(b,"mouseover",n[15](n[49],!1)),se(b,"mouseleave",n[15](-1,!1)),se(b,"focus",n[15](n[49],!1)),se(b,"change",F)],O=!0)},p(W,z){n=W,z[0]&1&&t!==(t=Vo[n[44]]+"")&&Ce(i,t),z[0]&2048&&s!==(s=Ze(Zi("label content",{focused:n[11].i===n[49]&&!n[11].weaponSide}))+" svelte-3zpgt7")&&_(e,"class",s),z[0]&5&&c!==(c=`${n[45]} / ${n[46]}`)&&Ce(u,c),z[0]&5&&f!==(f=Ze(`fill ${n[47]?"mastered":""}`)+" svelte-3zpgt7")&&_(o,"class",f),z[0]&5&&rt(o,"right",`${(n[46]-n[45])/n[46]*100}%`)},d(W){W&&g(e),W&&g(r),W&&g(l),W&&g(h),W&&g(d),W&&g(S),W&&g(I),W&&g(T),W&&g(C),W&&g(k),W&&g(R),O=!1,on(N)}}}function nle(n){let e,t,i,s,r,l,o,a,c,u,f,h,d,p,v,y,b,S,I,T,C,k,R,O,N,F,W,z,Y,H,K,j,J,Z,q,X,ne,Q,re,be,le,he,Ie,G,ve,je,$,Oe,ie,_e,Ee;v=new ai({props:{$$slots:{t:[Qre],default:[Kre]},$$scope:{ctx:n}}});let He=Object.keys(te),We=[];for(let de=0;de<He.length;de+=1)We[de]=HT(LT(n,He,de));const Qe=de=>U(We[de],1,1,()=>{We[de]=null});T=new qre({props:{equippedClass:n[4],weaponXP:n[1],onWeaponXpChange:n[10]}}),W=new ai({props:{$$slots:{t:[tle],default:[ele]},$$scope:{ctx:n}}});let we=n[0],Me=[];for(let de=0;de<we.length;de+=1)Me[de]=qT(BT(n,we,de));return{c(){e=E("div"),t=E("div"),i=E("div"),s=E("u"),r=L("Type"),l=P(),o=E("u"),a=L("XP (Current XP / XP Required to Level Up)"),c=P(),u=E("span"),f=P(),h=E("u"),d=L("Lvl"),p=P(),ce(v.$$.fragment),y=P(),b=E("span"),S=P();for(let de=0;de<We.length;de+=1)We[de].c();I=P(),ce(T.$$.fragment),C=P(),k=E("div"),R=E("span"),O=E("u"),N=L("Automatic Training"),F=P(),ce(W.$$.fragment),z=P(),Y=E("input"),H=P(),K=E("button"),j=L("Reset Rolls"),J=P(),Z=E("div"),q=E("u"),X=L("Class"),ne=P(),Q=E("u"),re=L("Class XP (Current Battles / Battles Required to Master)"),be=P(),le=E("span"),he=P(),Ie=E("span"),G=P(),ve=E("span"),je=P(),$=E("span"),Oe=P();for(let de=0;de<Me.length;de+=1)Me[de].c();this.h()},l(de){e=A(de,"DIV",{class:!0});var Ae=w(e);t=A(Ae,"DIV",{class:!0});var Re=w(t);i=A(Re,"DIV",{class:!0});var Ne=w(i);s=A(Ne,"U",{class:!0});var Ge=w(s);r=V(Ge,"Type"),Ge.forEach(g),l=M(Ne),o=A(Ne,"U",{class:!0});var pe=w(o);a=V(pe,"XP (Current XP / XP Required to Level Up)"),pe.forEach(g),c=M(Ne),u=A(Ne,"SPAN",{class:!0}),w(u).forEach(g),f=M(Ne),h=A(Ne,"U",{class:!0});var Fe=w(h);d=V(Fe,"Lvl"),Fe.forEach(g),p=M(Ne),ge(v.$$.fragment,Ne),y=M(Ne),b=A(Ne,"SPAN",{class:!0}),w(b).forEach(g),S=M(Ne);for(let Se=0;Se<We.length;Se+=1)We[Se].l(Ne);Ne.forEach(g),I=M(Re),ge(T.$$.fragment,Re),C=M(Re),k=A(Re,"DIV",{class:!0});var ae=w(k);R=A(ae,"SPAN",{});var ke=w(R);O=A(ke,"U",{});var oe=w(O);N=V(oe,"Automatic Training"),oe.forEach(g),ke.forEach(g),F=M(ae),ge(W.$$.fragment,ae),z=M(ae),Y=A(ae,"INPUT",{type:!0,class:!0}),H=M(ae),K=A(ae,"BUTTON",{});var at=w(K);j=V(at,"Reset Rolls"),at.forEach(g),ae.forEach(g),Re.forEach(g),J=M(Ae),Z=A(Ae,"DIV",{class:!0});var qe=w(Z);q=A(qe,"U",{class:!0});var me=w(q);X=V(me,"Class"),me.forEach(g),ne=M(qe),Q=A(qe,"U",{class:!0});var ot=w(Q);re=V(ot,"Class XP (Current Battles / Battles Required to Master)"),ot.forEach(g),be=M(qe),le=A(qe,"SPAN",{class:!0}),w(le).forEach(g),he=M(qe),Ie=A(qe,"SPAN",{class:!0}),w(Ie).forEach(g),G=M(qe),ve=A(qe,"SPAN",{class:!0}),w(ve).forEach(g),je=M(qe),$=A(qe,"SPAN",{class:!0}),w($).forEach(g),Oe=M(qe);for(let Se=0;Se<Me.length;Se+=1)Me[Se].l(qe);qe.forEach(g),Ae.forEach(g),this.h()},h(){_(s,"class","header svelte-3zpgt7"),rt(s,"justify-content","flex-start"),_(o,"class","header svelte-3zpgt7"),rt(o,"text-align","center"),rt(o,"white-space","nowrap"),_(u,"class","header svelte-3zpgt7"),_(h,"class","header svelte-3zpgt7"),rt(h,"text-align","center"),rt(h,"white-space","nowrap"),_(b,"class","header svelte-3zpgt7"),_(i,"class","category svelte-3zpgt7"),rt(R,"flex","1"),_(Y,"type","number"),Y.value=n[7],_(Y,"class","svelte-3zpgt7"),_(k,"class","auto-xp svelte-3zpgt7"),rt(k,"flex","1"),_(t,"class","weapon-xp-container svelte-3zpgt7"),_(q,"class","header svelte-3zpgt7"),rt(q,"justify-content","flex-start"),_(Q,"class","header svelte-3zpgt7"),rt(Q,"text-align","center"),rt(Q,"white-space","nowrap"),rt(Q,"justify-content","flex-start"),_(le,"class","header svelte-3zpgt7"),_(Ie,"class","header svelte-3zpgt7"),rt(Ie,"padding","0"),_(ve,"class","header svelte-3zpgt7"),rt(ve,"padding","0"),_($,"class","header svelte-3zpgt7"),rt($,"padding","0"),_(Z,"class","category class-xp-container svelte-3zpgt7"),_(e,"class","container svelte-3zpgt7")},m(de,Ae){B(de,e,Ae),m(e,t),m(t,i),m(i,s),m(s,r),m(i,l),m(i,o),m(o,a),m(i,c),m(i,u),m(i,f),m(i,h),m(h,d),m(i,p),ue(v,i,null),m(i,y),m(i,b),m(i,S);for(let Re=0;Re<We.length;Re+=1)We[Re].m(i,null);m(t,I),ue(T,t,null),m(t,C),m(t,k),m(k,R),m(R,O),m(O,N),m(k,F),ue(W,k,null),m(k,z),m(k,Y),m(k,H),m(k,K),m(K,j),m(e,J),m(e,Z),m(Z,q),m(q,X),m(Z,ne),m(Z,Q),m(Q,re),m(Z,be),m(Z,le),m(Z,he),m(Z,Ie),m(Z,G),m(Z,ve),m(Z,je),m(Z,$),m(Z,Oe);for(let Re=0;Re<Me.length;Re+=1)Me[Re].m(Z,null);ie=!0,_e||(Ee=[se(Y,"change",n[38]),se(K,"click",n[39])],_e=!0)},p(de,Ae){const Re={};if(Ae[1]&1073741824&&(Re.$$scope={dirty:Ae,ctx:de}),v.$set(Re),Ae[0]&64162){He=Object.keys(te);let pe;for(pe=0;pe<He.length;pe+=1){const Fe=LT(de,He,pe);We[pe]?(We[pe].p(Fe,Ae),D(We[pe],1)):(We[pe]=HT(Fe),We[pe].c(),D(We[pe],1),We[pe].m(i,null))}for(Le(),pe=He.length;pe<We.length;pe+=1)Qe(pe);Ve()}const Ne={};Ae[0]&16&&(Ne.equippedClass=de[4]),Ae[0]&2&&(Ne.weaponXP=de[1]),Ae[0]&1024&&(Ne.onWeaponXpChange=de[10]),T.$set(Ne);const Ge={};if(Ae[0]&256|Ae[1]&1073741824&&(Ge.$$scope={dirty:Ae,ctx:de}),W.$set(Ge),(!ie||Ae[0]&128&&Y.value!==de[7])&&(Y.value=de[7]),Ae[0]&34893){we=de[0];let pe;for(pe=0;pe<we.length;pe+=1){const Fe=BT(de,we,pe);Me[pe]?Me[pe].p(Fe,Ae):(Me[pe]=qT(Fe),Me[pe].c(),Me[pe].m(Z,null))}for(;pe<Me.length;pe+=1)Me[pe].d(1);Me.length=we.length}},i(de){if(!ie){D(v.$$.fragment,de);for(let Ae=0;Ae<He.length;Ae+=1)D(We[Ae]);D(T.$$.fragment,de),D(W.$$.fragment,de),ie=!0}},o(de){U(v.$$.fragment,de),We=We.filter(Boolean);for(let Ae=0;Ae<We.length;Ae+=1)U(We[Ae]);U(T.$$.fragment,de),U(W.$$.fragment,de),ie=!1},d(de){de&&g(e),fe(v),Ft(We,de),fe(T),fe(W),Ft(Me,de),_e=!1,on(Ee)}}}const zT=4;function ile(n,e,t){let i,s,r,l,o,a;const{open:c}=Bn(hs.MODAL);let{unlockedClasses:u}=e,{weaponXP:f}=e,{classXP:h}=e,{playerSkillProficiency:d}=e,{playerSkillBonus:p}=e,{onUpdateClassXP:v}=e,{onUpdateWeaponXP:y}=e,{customCombatArts:b}=e,{customCombatSkills:S}=e,{customWeapons:I}=e,{playerStats:T}=e,{onUpdatePlayerStats:C}=e,{onUpdateCustomCombatArts:k}=e,{onUpdateCustomCombatSkills:R}=e,{onUpdateCustomWeapons:O}=e,{equippedClass:N}=e,{playerName:F}=e,W=!0,z=new Audio("success-sound.webm"),Y=new Audio("failure.webm"),H=new Audio("bell.webm"),K=new Audio("item-received.webm"),j=new Audio("success-sound.webm");const J=()=>{Y.pause(),H.pause(),K.pause(),j.pause()};let Z=zT,q=!1,X=Object.keys(sl).reduce(($,Oe)=>($[Oe]=sl[Oe][0],$),{}),ne={i:-1,weaponSide:!0};const Q=($,Oe)=>()=>{t(11,ne={i:$,weaponSide:Oe})},re=($,Oe,ie,_e,Ee)=>l(Ee,{curLevel:$,curXP:Oe,maxXP:ie,type:_e}),be=($,Oe,ie)=>{t(5,W=!W),o(ie,{type:$,curLevel:Oe})},le=($,Oe)=>{t(9,X={...X,[$]:Oe.currentTarget.value})},he=($,Oe,ie,_e)=>a({curLevel:$,curXP:Oe,maxXP:ie,type:_e}),Ie=($,Oe)=>{var ie;return Oe===((ie=f[$])==null?void 0:ie.level)},G=$=>t(7,Z=parseInt($.currentTarget.value)),ve=()=>{t(7,Z=zT),t(8,q=!1)},je=($,Oe,ie,_e)=>{let Ee=parseInt(_e.currentTarget.value),He=$+Ee;He>=Oe&&(He=Oe,t(6,z.currentTime=0,z),z.play()),v(ie,He,He===Oe),_e.currentTarget.value=""};return n.$$set=$=>{"unlockedClasses"in $&&t(0,u=$.unlockedClasses),"weaponXP"in $&&t(1,f=$.weaponXP),"classXP"in $&&t(2,h=$.classXP),"playerSkillProficiency"in $&&t(16,d=$.playerSkillProficiency),"playerSkillBonus"in $&&t(17,p=$.playerSkillBonus),"onUpdateClassXP"in $&&t(3,v=$.onUpdateClassXP),"onUpdateWeaponXP"in $&&t(18,y=$.onUpdateWeaponXP),"customCombatArts"in $&&t(19,b=$.customCombatArts),"customCombatSkills"in $&&t(20,S=$.customCombatSkills),"customWeapons"in $&&t(21,I=$.customWeapons),"playerStats"in $&&t(22,T=$.playerStats),"onUpdatePlayerStats"in $&&t(23,C=$.onUpdatePlayerStats),"onUpdateCustomCombatArts"in $&&t(24,k=$.onUpdateCustomCombatArts),"onUpdateCustomCombatSkills"in $&&t(25,R=$.onUpdateCustomCombatSkills),"onUpdateCustomWeapons"in $&&t(26,O=$.onUpdateCustomWeapons),"equippedClass"in $&&t(4,N=$.equippedClass),"playerName"in $&&t(27,F=$.playerName)},n.$$.update=()=>{n.$$.dirty[0]&133693512&&t(32,s=($,Oe,ie=()=>{},_e=()=>{})=>{var He,We;J(),t(6,z.currentTime=0,z),z.play();const Ee=(We=(He=zl[$][Oe])==null?void 0:He.unlocks)==null?void 0:We.pickOne;Ee?(c(wu,{SPECIAL_callOnClose:()=>{_e()},pickOne:Ee,onSubmit:ie,reason:`Unlocked ${il[$]} level ${bh[Oe]}`,customCombatArts:b,customCombatSkills:S,customWeapons:I,playerStats:T,onUpdatePlayerStats:C,onUpdateClassXP:v,onUpdateCustomCombatArts:k,onUpdateCustomCombatSkills:R,onUpdateCustomWeapons:O,descriptionElement:fg,descriptionElementProps:{type:$,level:Oe,disablePickOne:!0}}),c(wu,{SPECIAL_callOnClose:()=>{_e()},pickOne:Ee,onSubmit:ie,reason:`Unlocked ${il[$]} level ${bh[Oe]}`,customCombatArts:b,customCombatSkills:S,customWeapons:I,playerStats:T,onUpdatePlayerStats:C,onUpdateClassXP:v,onUpdateCustomCombatArts:k,onUpdateCustomCombatSkills:R,onUpdateCustomWeapons:O,descriptionElement:fg,descriptionElementProps:{type:$,level:Oe,disablePickOne:!0}})):c(Ure,{header:`Unlocked ${il[$]} level ${bh[Oe]}`,childElement:fg,childElementProps:{type:$,level:Oe},SPECIAL_callOnClose:()=>{ie(),_e()}})}),n.$$.dirty[0]&262240|n.$$.dirty[1]&2&&t(10,r=($,{curLevel:Oe,curXP:ie,maxXP:_e,type:Ee,onSuccess:He})=>new Promise(We=>{let Qe=Oe,we=ie+$;const Me={current:!1},de=()=>{y(Ee,we,Qe),t(5,W=!W),He&&He(),We(!0),Me.current=!0},Ae=()=>{Me.current||(alert("Rolling back this Level Up b/c prompt was not completed"),We(!1))};we>=_e?(Qe=rl[rl.indexOf(Oe)+1]||Oe,we=we-_e,console.log("should play",z),s(Ee,Qe,de,Ae)):de()})),n.$$.dirty[0]&1024&&t(14,l=($,Oe)=>{const ie=$.currentTarget,_e=parseInt($.currentTarget.value);r(_e,{...Oe,onSuccess:()=>{ie.value=""}})}),n.$$.dirty[0]&262176|n.$$.dirty[1]&2&&t(13,o=($,{type:Oe,curLevel:ie})=>{const _e=$.currentTarget.value,Ee=()=>{y(Oe,0,_e)};!ie||rl.indexOf(ie)<rl.indexOf(_e)?s(Oe,_e,Ee):Ee()}),n.$$.dirty[0]&2017658752|n.$$.dirty[1]&1&&t(12,a=async $=>{const{type:Oe}=$,ie=X[Oe],_e=ie===sn.ANIMAL_HANDLING,Ee=(d[sn.ANIMAL_HANDLING]*j4||0)+(p[sn.ANIMAL_HANDLING]||0),He=_e?"Animal Handling":zs[ie],We=_e?$s(T[Ye.WIS])+Ee:$s(T[ie]),Qe=(Ae,Re)=>{let Ne="",Ge=Re+We;return Re===20?Ne="Perfect: 16 XP + 1 roll!":Re===1||Ge<=1?Ne="Awful: 0 XP":Ge<=5?Ne="Poor: 6 XP":Ge<=15?Ne="Good: 9 XP":Ne=`Great: 12 XP ${q?"":"+ 1 roll (once per session)"}`,`<div><span style=${Re===20?'"color: green"':Re===1?'"color: red"':""}>${Re}</span> ${ws(We,!0)}(${He}) = ${Ge}</div><div style='text-align:center'>${Ne}</div>`},{value:we}=await nl([Et.d20],{customResultBoxLabel:Qe}),Me=we+We;Sv(i,{playerName:F,rollName:"XP Roll ("+il[Oe]+")",rollBonus:We,roll:Me+"",rollTooltip:we+ws(We)});let de=Z-1;J(),we===20?(t(30,j.currentTime=0,j),j.play(),r(16,$),de+=1):we===1||Me<=1?(t(28,Y.currentTime=0,Y),Y.play()):Me<=5?(t(28,Y.currentTime=0,Y),Y.play(),r(6,$)):Me<=15?(t(29,K.currentTime=0,K),K.play(),r(9,$)):(t(30,j.currentTime=0,j),j.play(),q||(de+=1),r(12,$),t(8,q=!0)),t(7,Z=de)})},t(6,z.volume=.05,z),t(28,Y.volume=.05,Y),H.volume=.05,t(29,K.volume=.1,K),t(30,j.volume=.025,j),t(31,i=Bn(hs.DB)),[u,f,h,v,N,W,z,Z,q,X,r,ne,a,o,l,Q,d,p,y,b,S,I,T,C,k,R,O,F,Y,K,j,i,s,re,be,le,he,Ie,G,ve,je]}class sle extends nt{constructor(e){super(),it(this,e,ile,nle,Ct,{unlockedClasses:0,weaponXP:1,classXP:2,playerSkillProficiency:16,playerSkillBonus:17,onUpdateClassXP:3,onUpdateWeaponXP:18,customCombatArts:19,customCombatSkills:20,customWeapons:21,playerStats:22,onUpdatePlayerStats:23,onUpdateCustomCombatArts:24,onUpdateCustomCombatSkills:25,onUpdateCustomWeapons:26,equippedClass:4,playerName:27},null,[-1,-1])}}const rle=(n,e)=>lle(n.unlockedClasses,n.customWeapons,n.classXP,n.weaponXP,e),lle=Pb((n,e,t,i,s)=>{var v,y;const r=Array.from(Gg),l=new Set(Object.keys(e)),o=new Set(Object.keys(((y=(v=Xt[s])==null?void 0:v.whenEquipped)==null?void 0:y.weapons)||{})),a=new Set;n.forEach(b=>{var I,T,C,k,R;Object.keys(((T=(I=Xt[b])==null?void 0:I.unlocks)==null?void 0:T.weapons)||{}).forEach(O=>a.add(O));const S=(k=(C=Xt[b])==null?void 0:C.whenMastered)==null?void 0:k.weapons;S&&((R=t==null?void 0:t[b])!=null&&R.mastered)&&Object.keys(S).forEach(O=>a.add(O))}),l.delete("pickOne"),o.delete("pickOne"),a.delete("pickOne");const c=Object.keys(i).reduce((b,S)=>{const{level:I}=i[S]||{},T=zl[S],C=I||Be.E;if(!C)return b;let k=1/0;return rl.filter((O,N)=>(C===O&&(k=N),N<=k)).forEach(O=>{var F,W;const N=T[O];(F=N.removes)!=null&&F.weapons&&Object.keys(N.removes.weapons).forEach(z=>b.delete(z)),(W=N.unlocks)!=null&&W.weapons&&Object.keys(N.unlocks.weapons).forEach(z=>b.add(z))}),b},new Set),u=new Set([...r,...l,...o,...a,...c]),f=Object.keys(e).reduce((b,S)=>(b[S]={...tr[S],...b[S]},b),{...e}),h={...tr,...f},d=Object.keys(h).reduce((b,S)=>(b[S]=h[S].label,b),{}),p=Object.keys(h).reduce((b,S)=>(b[S]=h[S].type,b),{});return{customSet:l,equippedClassSet:o,classUnlockSet:a,fullSet:u,fullArray:Array.from(u),fullFeatures:h,weaponsToLabel:d,weaponsToType:p}}),ole=(n,e,t,i)=>ale(n.unlockedClasses,n.customCombatSkills,n.classXP,n.weaponXP,e,t,i),ale=(n,e,t,i,s,r,l)=>{var d,p;const o=new Set(Object.keys(e)),a=new Set(Object.keys(((p=(d=Xt[s])==null?void 0:d.whenEquipped)==null?void 0:p.combatSkills)||{})),c=new Set;n.forEach(v=>{var b,S,I,T,C;Object.keys(((S=(b=Xt[v])==null?void 0:b.unlocks)==null?void 0:S.combatSkills)||{}).forEach(k=>c.add(k));const y=(T=(I=Xt[v])==null?void 0:I.whenMastered)==null?void 0:T.combatSkills;y&&((C=t==null?void 0:t[v])!=null&&C.mastered)&&Object.keys(y).forEach(k=>c.add(k))});const u=Object.keys(i).reduce((v,y)=>{const{level:b}=i[y]||{},S=zl[y],I=b||Be.E;if(!I)return v;let T=1/0;return rl.filter((k,R)=>(I===k&&(T=R),R<=T)).forEach(k=>{var O,N;const R=S[k];(O=R.removes)!=null&&O.combatSkills&&Object.keys(R.removes.combatSkills).forEach(F=>v.delete(F)),(N=R.unlocks)!=null&&N.combatSkills&&Object.keys(R.unlocks.combatSkills).forEach(F=>v.add(F))}),v},new Set),f=new Set([...o,...a,...c,...u]);r.forEach(v=>{f.has(v)||l(v)});const h=Object.keys(e).reduce((v,y)=>(v[y]={..._s[y],...v[y]},v),{...e});return{customSet:o,equippedClassSet:a,classUnlockSet:c,weaponXPLevelSkillSet:u,fullSet:f,fullArray:Array.from(f).sort(),fullFeatures:{..._s,...h}}},cle=(n,e,t)=>ule(n.unlockedClasses,n.customCombatArts,n.classXP,n.weaponXP,e,t),ule=(n,e,t,i,s,r)=>{var y,b;const l=[],o=new Set(Object.keys(e)),a=new Set(Object.keys(((b=(y=Xt[s])==null?void 0:y.whenEquipped)==null?void 0:b.combatArts)||{})),c=new Set;n.forEach(S=>{var T,C,k,R,O;Object.keys(((C=(T=Xt[S])==null?void 0:T.unlocks)==null?void 0:C.combatArts)||{}).forEach(N=>c.add(N));const I=(R=(k=Xt[S])==null?void 0:k.whenMastered)==null?void 0:R.combatArts;I&&((O=t==null?void 0:t[S])!=null&&O.mastered)&&Object.keys(I).forEach(N=>c.add(N))});const u=Object.keys(i).reduce((S,I)=>{const{level:T}=i[I]||{},C=zl[I],k=T||Be.E;if(!k)return S;let R=1/0;return rl.filter((N,F)=>(k===N&&(R=F),F<=R)).forEach(N=>{var W;const F=C[N];(W=F.unlocks)!=null&&W.combatArts&&Object.keys(F.unlocks.combatArts).forEach(z=>S.add(z))}),S},new Set),f=new Set([...l,...o,...a,...c,...u,...r.has(Te.GRAPPLER)?[vt.REPOSITION,vt.SWAP,vt.PULL_BACK,vt.SHOVE]:[]]),h=Object.keys(e).reduce((S,I)=>(S[I]={...Wr[I],...S[I]},S),{...e}),d={...Wr,...h},p=Object.keys(vt),v=Array.from(f).sort((S,I)=>{const T=p.indexOf(S),C=p.indexOf(I);return T<=C?-1:1});return{customSet:o,equippedClassSet:a,classUnlockSet:c,fullSet:f,fullArray:v,fullFeatures:d}};function GT(n){let e,t;return{c(){e=E("span"),t=L("EXAMPLE"),this.h()},l(i){e=A(i,"SPAN",{});var s=w(e);t=V(s,"EXAMPLE"),s.forEach(g),this.h()},h(){rt(e,"background-color",n[2]("themeColor"))},m(i,s){B(i,e,s),m(e,t)},p(i,s){s&4&&rt(e,"background-color",i[2]("themeColor"))},d(i){i&&g(e)}}}function KT(n){let e,t,i,s,r,l,o,a,c,u,f,h,d,p,v,y,b,S,I,T,C,k,R,O,N,F=n[2]("themeColor").length===7,W,z,Y,H,K,j,J,Z,q,X=n[2]("gravity")+"",ne,Q,re,be,le,he,Ie,G,ve,je,$=n[2]("mass")+"",Oe,ie,_e,Ee,He,We,Qe,we,Me,de,Ae=n[2]("scale")+"",Re,Ne,Ge,pe,Fe,ae,ke,oe,at,qe,me=n[2]("friction")+"",ot,Se,ze,ye,ut,Bt,gt,Ot,en,gn,Jt=n[2]("throwForce")+"",ft,cn,tn,wn,vn,Ln,Cn,Un,di,Ue,yt=n[2]("startingHeight")+"",qt,hn,dn,Qt=F&&GT(n);return{c(){e=E("div"),t=E("div"),i=E("button"),s=L("Test Settings"),r=P(),l=E("button"),o=L("Save Changes"),a=P(),c=E("div"),u=E("button"),f=L("Reset to Current Settings"),h=P(),d=E("button"),p=L("Reset Form to Current Settings"),v=P(),y=E("button"),b=L("Reset Form to Default Settings"),S=P(),I=E("div"),T=E("span"),C=L("Die Color (must be full RGB hex (e.g. #FF0000 for red))"),k=P(),R=E("input"),N=P(),Qt&&Qt.c(),W=P(),z=E("div"),Y=E("span"),H=L("Gravity"),K=P(),j=E("input"),Z=P(),q=E("span"),ne=L(X),Q=P(),re=E("div"),be=E("span"),le=L("Mass"),he=P(),Ie=E("input"),ve=P(),je=E("span"),Oe=L($),ie=P(),_e=E("div"),Ee=E("span"),He=L("Scale"),We=P(),Qe=E("input"),Me=P(),de=E("span"),Re=L(Ae),Ne=P(),Ge=E("div"),pe=E("span"),Fe=L("Friction"),ae=P(),ke=E("input"),at=P(),qe=E("span"),ot=L(me),Se=P(),ze=E("div"),ye=E("span"),ut=L("Throw Force"),Bt=P(),gt=E("input"),en=P(),gn=E("span"),ft=L(Jt),cn=P(),tn=E("div"),wn=E("span"),vn=L("Starting Height"),Ln=P(),Cn=E("input"),di=P(),Ue=E("span"),qt=L(yt),this.h()},l(tt){e=A(tt,"DIV",{class:!0});var Dt=w(e);t=A(Dt,"DIV",{class:!0});var mi=w(t);i=A(mi,"BUTTON",{});var Pt=w(i);s=V(Pt,"Test Settings"),Pt.forEach(g),r=M(mi),l=A(mi,"BUTTON",{});var nn=w(l);o=V(nn,"Save Changes"),nn.forEach(g),mi.forEach(g),a=M(Dt),c=A(Dt,"DIV",{class:!0});var jt=w(c);u=A(jt,"BUTTON",{});var Ui=w(u);f=V(Ui,"Reset to Current Settings"),Ui.forEach(g),h=M(jt),d=A(jt,"BUTTON",{});var gs=w(d);p=V(gs,"Reset Form to Current Settings"),gs.forEach(g),v=M(jt),y=A(jt,"BUTTON",{});var Sn=w(y);b=V(Sn,"Reset Form to Default Settings"),Sn.forEach(g),jt.forEach(g),Dt.forEach(g),S=M(tt),I=A(tt,"DIV",{class:!0});var pt=w(I);T=A(pt,"SPAN",{});var ee=w(T);C=V(ee,"Die Color (must be full RGB hex (e.g. #FF0000 for red))"),ee.forEach(g),k=M(pt),R=A(pt,"INPUT",{}),N=M(pt),Qt&&Qt.l(pt),pt.forEach(g),W=M(tt),z=A(tt,"DIV",{class:!0});var _t=w(z);Y=A(_t,"SPAN",{});var xt=w(Y);H=V(xt,"Gravity"),xt.forEach(g),K=M(_t),j=A(_t,"INPUT",{type:!0,min:!0,max:!0,class:!0,id:!0}),Z=M(_t),q=A(_t,"SPAN",{});var On=w(q);ne=V(On,X),On.forEach(g),_t.forEach(g),Q=M(tt),re=A(tt,"DIV",{class:!0});var pi=w(re);be=A(pi,"SPAN",{});var Ti=w(be);le=V(Ti,"Mass"),Ti.forEach(g),he=M(pi),Ie=A(pi,"INPUT",{type:!0,min:!0,max:!0,class:!0,id:!0}),ve=M(pi),je=A(pi,"SPAN",{});var gi=w(je);Oe=V(gi,$),gi.forEach(g),pi.forEach(g),ie=M(tt),_e=A(tt,"DIV",{class:!0});var vs=w(_e);Ee=A(vs,"SPAN",{});var or=w(Ee);He=V(or,"Scale"),or.forEach(g),We=M(vs),Qe=A(vs,"INPUT",{type:!0,min:!0,max:!0,class:!0,id:!0}),Me=M(vs),de=A(vs,"SPAN",{});var Os=w(de);Re=V(Os,Ae),Os.forEach(g),vs.forEach(g),Ne=M(tt),Ge=A(tt,"DIV",{class:!0});var zn=w(Ge);pe=A(zn,"SPAN",{});var Jr=w(pe);Fe=V(Jr,"Friction"),Jr.forEach(g),ae=M(zn),ke=A(zn,"INPUT",{type:!0,min:!0,max:!0,class:!0,id:!0}),at=M(zn),qe=A(zn,"SPAN",{});var bs=w(qe);ot=V(bs,me),bs.forEach(g),zn.forEach(g),Se=M(tt),ze=A(tt,"DIV",{class:!0});var Ii=w(ze);ye=A(Ii,"SPAN",{});var ar=w(ye);ut=V(ar,"Throw Force"),ar.forEach(g),Bt=M(Ii),gt=A(Ii,"INPUT",{type:!0,min:!0,max:!0,class:!0,id:!0}),en=M(Ii),gn=A(Ii,"SPAN",{});var so=w(gn);ft=V(so,Jt),so.forEach(g),Ii.forEach(g),cn=M(tt),tn=A(tt,"DIV",{class:!0});var cr=w(tn);wn=A(cr,"SPAN",{});var wr=w(wn);vn=V(wr,"Starting Height"),wr.forEach(g),Ln=M(cr),Cn=A(cr,"INPUT",{type:!0,min:!0,max:!0,class:!0,id:!0}),di=M(cr),Ue=A(cr,"SPAN",{});var ro=w(Ue);qt=V(ro,yt),ro.forEach(g),cr.forEach(g),this.h()},h(){_(t,"class",""),_(c,"class",""),_(e,"class","button-container svelte-nnvf4p"),R.value=O=n[2]("themeColor","#FF0000"),_(I,"class","field"),_(j,"type","range"),_(j,"min","1"),_(j,"max","10"),_(j,"class","slider"),j.value=J=n[2]("gravity"),_(j,"id","myRange"),_(z,"class","field"),_(Ie,"type","range"),_(Ie,"min","1"),_(Ie,"max","20"),_(Ie,"class","slider"),Ie.value=G=n[2]("mass"),_(Ie,"id","myRange"),_(re,"class","field"),_(Qe,"type","range"),_(Qe,"min","1"),_(Qe,"max","10"),_(Qe,"class","slider"),Qe.value=we=n[2]("scale"),_(Qe,"id","myRange"),_(_e,"class","field"),_(ke,"type","range"),_(ke,"min","1"),_(ke,"max","10"),_(ke,"class","slider"),ke.value=oe=n[2]("friction")*10,_(ke,"id","myRange"),_(Ge,"class","field"),_(gt,"type","range"),_(gt,"min","0"),_(gt,"max","15"),_(gt,"class","slider"),gt.value=Ot=n[2]("throwForce"),_(gt,"id","myRange"),_(ze,"class","field"),_(Cn,"type","range"),_(Cn,"min","1"),_(Cn,"max","15"),_(Cn,"class","slider"),Cn.value=Un=n[2]("startingHeight"),_(Cn,"id","myRange"),_(tn,"class","field")},m(tt,Dt){B(tt,e,Dt),m(e,t),m(t,i),m(i,s),m(t,r),m(t,l),m(l,o),m(e,a),m(e,c),m(c,u),m(u,f),m(c,h),m(c,d),m(d,p),m(c,v),m(c,y),m(y,b),B(tt,S,Dt),B(tt,I,Dt),m(I,T),m(T,C),m(I,k),m(I,R),m(I,N),Qt&&Qt.m(I,null),B(tt,W,Dt),B(tt,z,Dt),m(z,Y),m(Y,H),m(z,K),m(z,j),m(z,Z),m(z,q),m(q,ne),B(tt,Q,Dt),B(tt,re,Dt),m(re,be),m(be,le),m(re,he),m(re,Ie),m(re,ve),m(re,je),m(je,Oe),B(tt,ie,Dt),B(tt,_e,Dt),m(_e,Ee),m(Ee,He),m(_e,We),m(_e,Qe),m(_e,Me),m(_e,de),m(de,Re),B(tt,Ne,Dt),B(tt,Ge,Dt),m(Ge,pe),m(pe,Fe),m(Ge,ae),m(Ge,ke),m(Ge,at),m(Ge,qe),m(qe,ot),B(tt,Se,Dt),B(tt,ze,Dt),m(ze,ye),m(ye,ut),m(ze,Bt),m(ze,gt),m(ze,en),m(ze,gn),m(gn,ft),B(tt,cn,Dt),B(tt,tn,Dt),m(tn,wn),m(wn,vn),m(tn,Ln),m(tn,Cn),m(tn,di),m(tn,Ue),m(Ue,qt),hn||(dn=[se(i,"click",n[6]),se(l,"click",n[7]),se(u,"click",n[8]),se(d,"click",n[9]),se(y,"click",n[10]),se(R,"input",n[11]),se(j,"input",n[12]),se(Ie,"input",n[13]),se(Qe,"input",n[14]),se(ke,"input",n[15]),se(gt,"input",n[16]),se(Cn,"input",n[17])],hn=!0)},p(tt,Dt){Dt&4&&O!==(O=tt[2]("themeColor","#FF0000"))&&R.value!==O&&(R.value=O),Dt&4&&(F=tt[2]("themeColor").length===7),F?Qt?Qt.p(tt,Dt):(Qt=GT(tt),Qt.c(),Qt.m(I,null)):Qt&&(Qt.d(1),Qt=null),Dt&4&&J!==(J=tt[2]("gravity"))&&(j.value=J),Dt&4&&X!==(X=tt[2]("gravity")+"")&&Ce(ne,X),Dt&4&&G!==(G=tt[2]("mass"))&&(Ie.value=G),Dt&4&&$!==($=tt[2]("mass")+"")&&Ce(Oe,$),Dt&4&&we!==(we=tt[2]("scale"))&&(Qe.value=we),Dt&4&&Ae!==(Ae=tt[2]("scale")+"")&&Ce(Re,Ae),Dt&4&&oe!==(oe=tt[2]("friction")*10)&&(ke.value=oe),Dt&4&&me!==(me=tt[2]("friction")+"")&&Ce(ot,me),Dt&4&&Ot!==(Ot=tt[2]("throwForce"))&&(gt.value=Ot),Dt&4&&Jt!==(Jt=tt[2]("throwForce")+"")&&Ce(ft,Jt),Dt&4&&Un!==(Un=tt[2]("startingHeight"))&&(Cn.value=Un),Dt&4&&yt!==(yt=tt[2]("startingHeight")+"")&&Ce(qt,yt)},d(tt){tt&&g(e),tt&&g(S),tt&&g(I),Qt&&Qt.d(),tt&&g(W),tt&&g(z),tt&&g(Q),tt&&g(re),tt&&g(ie),tt&&g(_e),tt&&g(Ne),tt&&g(Ge),tt&&g(Se),tt&&g(ze),tt&&g(cn),tt&&g(tn),hn=!1,on(dn)}}}function fle(n){let e,t,i,s,r=n[1],l=KT(n);return{c(){e=E("div"),t=E("h1"),i=L("Update how your dice rolls look"),s=P(),l.c(),this.h()},l(o){e=A(o,"DIV",{class:!0});var a=w(e);t=A(a,"H1",{});var c=w(t);i=V(c,"Update how your dice rolls look"),c.forEach(g),s=M(a),l.l(a),a.forEach(g),this.h()},h(){_(e,"class","container")},m(o,a){B(o,e,a),m(e,t),m(t,i),m(e,s),l.m(e,null)},p(o,[a]){a&2&&Ct(r,r=o[1])?(l.d(1),l=KT(o),l.c(),l.m(e,null)):l.p(o,a)},i:Ke,o:Ke,d(o){o&&g(e),l.d(o)}}}function hle(n,e,t){let i,s,r=null,l={},o={},a=0;Mi(()=>{C0(()=>import("../../chunks/dice-box.es-150bdd15.js"),["../../chunks/dice-box.es-150bdd15.js","../../chunks/preload-helper-41c905a7.js"],import.meta.url).then(k=>{t(4,r=k.default)}),c()});const c=()=>{try{t(5,o=JSON.parse(localStorage.getItem("diceBoxOptions")||"{}"))}catch(k){console.log(k)}return o},u=()=>{i().then(()=>{nl([Et.d20])})},f=()=>{i(!0)},h=()=>{i(!1,!0).then(()=>{nl([Et.d20])})},d=()=>{t(0,l={}),t(1,a+=1)},p=()=>{t(0,l={...Fc}),t(1,a+=1)},v=k=>{t(0,l.themeColor=k.currentTarget.value,l)},y=k=>t(0,l.gravity=parseInt(k.currentTarget.value),l),b=k=>t(0,l.mass=parseInt(k.currentTarget.value),l),S=k=>t(0,l.scale=parseInt(k.currentTarget.value),l),I=k=>t(0,l.friction=parseInt(k.currentTarget.value)/10,l),T=k=>t(0,l.throwForce=parseInt(k.currentTarget.value),l),C=k=>t(0,l.startingHeight=parseInt(k.currentTarget.value),l);return n.$$.update=()=>{n.$$.dirty&17&&t(3,i=(k=!1,R=!1)=>{const O=R?{}:l;let N;try{N=c()}catch(W){console.log(W)}if(k)try{localStorage.setItem("diceBoxOptions",JSON.stringify({...N,...O})),t(5,o={...N,...O})}catch(W){console.log(W)}const F=new r("#dice-box",{...Fc,...N,...O});return window.diceBoxContainer.removeChild(document.getElementById("dice-canvas")),F.init().then(()=>{window.diceBox=F})}),n.$$.dirty&33&&t(2,s=(k,R=1)=>{const O=l[k]!==void 0?l[k]:null;if(O!==null)return O;const N=o[k]!==void 0?o[k]:null;if(N!==null)return N;const F=Fc[k]!==void 0?Fc[k]:null;return F!==null?F:R})},[l,a,s,i,r,o,u,f,h,d,p,v,y,b,S,I,T,C]}class dle extends nt{constructor(e){super(),it(this,e,hle,fle,Ct,{})}}function QT(n,e,t){const i=n.slice();return i[15]=e[t],i}function XT(n){let e,t=n[15]+"",i,s,r;return{c(){e=E("option"),i=L(t),this.h()},l(l){e=A(l,"OPTION",{});var o=w(e);i=V(o,t),o.forEach(g),this.h()},h(){e.__value=s=n[15],e.value=e.__value,e.selected=r=n[0]===n[15]},m(l,o){B(l,e,o),m(e,i)},p(l,o){o&128&&t!==(t=l[15]+"")&&Ce(i,t),o&128&&s!==(s=l[15])&&(e.__value=s,e.value=e.__value),o&129&&r!==(r=l[0]===l[15])&&(e.selected=r)},d(l){l&&g(e)}}}function mle(n){let e,t,i,s,r,l,o,a,c,u,f,h,d,p,v,y,b,S,I,T,C,k,R,O,N,F,W,z,Y,H,K,j,J=n[7],Z=[];for(let q=0;q<J.length;q+=1)Z[q]=XT(QT(n,J,q));return{c(){e=E("div"),t=E("h1"),i=L("Manage other sheets"),s=P(),r=E("select"),l=E("option"),o=L("Main Sheet");for(let q=0;q<Z.length;q+=1)Z[q].c();c=P(),u=E("input"),f=P(),h=E("button"),d=L("Add New Sheet"),v=P(),y=E("br"),b=P(),S=E("div"),I=E("button"),T=L("Export all sheets"),C=P(),k=E("br"),R=P(),O=E("br"),N=P(),F=E("div"),W=E("button"),z=L("Import all sheets"),Y=P(),H=E("input"),this.h()},l(q){e=A(q,"DIV",{class:!0});var X=w(e);t=A(X,"H1",{});var ne=w(t);i=V(ne,"Manage other sheets"),ne.forEach(g),s=M(X),r=A(X,"SELECT",{});var Q=w(r);l=A(Q,"OPTION",{});var re=w(l);o=V(re,"Main Sheet"),re.forEach(g);for(let ve=0;ve<Z.length;ve+=1)Z[ve].l(Q);Q.forEach(g),c=M(X),u=A(X,"INPUT",{}),f=M(X),h=A(X,"BUTTON",{});var be=w(h);d=V(be,"Add New Sheet"),be.forEach(g),v=M(X),y=A(X,"BR",{}),b=M(X),S=A(X,"DIV",{});var le=w(S);I=A(le,"BUTTON",{});var he=w(I);T=V(he,"Export all sheets"),he.forEach(g),C=M(le),k=A(le,"BR",{}),R=M(le),O=A(le,"BR",{}),N=M(le),F=A(le,"DIV",{});var Ie=w(F);W=A(Ie,"BUTTON",{});var G=w(W);z=V(G,"Import all sheets"),G.forEach(g),Y=M(Ie),H=A(Ie,"INPUT",{type:!0}),Ie.forEach(g),le.forEach(g),X.forEach(g),this.h()},h(){l.__value="sheet",l.value=l.__value,l.selected=a=n[0]==="sheet",h.disabled=p=!n[5]||n[3].includes(n[5]),_(H,"type","file"),H.multiple=!0,_(e,"class","container")},m(q,X){B(q,e,X),m(e,t),m(t,i),m(e,s),m(e,r),m(r,l),m(l,o);for(let ne=0;ne<Z.length;ne+=1)Z[ne].m(r,null);m(e,c),m(e,u),Ms(u,n[5]),m(e,f),m(e,h),m(h,d),m(e,v),m(e,y),m(e,b),m(e,S),m(S,I),m(I,T),m(S,C),m(S,k),m(S,R),m(S,O),m(S,N),m(S,F),m(F,W),m(W,z),m(F,Y),m(F,H),n[13](H),K||(j=[se(r,"change",n[10]),se(u,"input",n[11]),se(h,"click",n[12]),se(I,"click",function(){Mn(n[9])&&n[9].apply(this,arguments)}),se(W,"click",function(){Mn(n[8])&&n[8].apply(this,arguments)}),se(H,"change",n[14])],K=!0)},p(q,[X]){if(n=q,X&1&&a!==(a=n[0]==="sheet")&&(l.selected=a),X&129){J=n[7];let ne;for(ne=0;ne<J.length;ne+=1){const Q=QT(n,J,ne);Z[ne]?Z[ne].p(Q,X):(Z[ne]=XT(Q),Z[ne].c(),Z[ne].m(r,null))}for(;ne<Z.length;ne+=1)Z[ne].d(1);Z.length=J.length}X&32&&u.value!==n[5]&&Ms(u,n[5]),X&40&&p!==(p=!n[5]||n[3].includes(n[5]))&&(h.disabled=p)},i:Ke,o:Ke,d(q){q&&g(e),Ft(Z,q),n[13](null),K=!1,on(j)}}}function ple(n,e,t){let i,s,r,{curSheet:l}=e,{onChangeCurSheet:o}=e,{onAddSheet:a}=e,{otherSheetNames:c}=e,u,f,h=null;const d=S=>o(S.currentTarget.value);function p(){u=this.value,t(5,u)}const v=()=>{a(u),t(5,u="")};function y(S){Vt[S?"unshift":"push"](()=>{f=S,t(6,f)})}const b=S=>{var I;t(4,h=((I=S==null?void 0:S.currentTarget)==null?void 0:I.files)||null)};return n.$$set=S=>{"curSheet"in S&&t(0,l=S.curSheet),"onChangeCurSheet"in S&&t(1,o=S.onChangeCurSheet),"onAddSheet"in S&&t(2,a=S.onAddSheet),"otherSheetNames"in S&&t(3,c=S.otherSheetNames)},n.$$.update=()=>{n.$$.dirty&8&&t(9,i=()=>{try{console.log(c),c.forEach(S=>{console.log("downloading",S),B4(localStorage.getItem(S),S,"text/plain")})}catch(S){console.error(S)}}),n.$$.dirty&24&&t(8,s=()=>{if(!h||!(h!=null&&h.length)){alert("no sheets provided");return}let S=new Set(c);try{Array.from(h).forEach(T=>{const C=T.name.split(".")[0];S.add(C);const k=new FileReader;k.onload=R=>{var O,N,F;console.log(C,(O=R.target)==null?void 0:O.result),localStorage.setItem(C,((F=(N=R.target)==null?void 0:N.result)==null?void 0:F.toString())||"")},k.readAsText(T,"UTF-8")}),console.log(S)}catch(I){console.log(I)}localStorage.setItem("otherSheetNames",JSON.stringify(Array.from(S))),alert("REMEMBER TO REFRESH")}),n.$$.dirty&8&&t(7,r=c.sort())},[l,o,a,c,h,u,f,r,s,i,d,p,v,y,b]}class gle extends nt{constructor(e){super(),it(this,e,ple,mle,Ct,{curSheet:0,onChangeCurSheet:1,onAddSheet:2,otherSheetNames:3})}}var vle="firebase",ble="9.17.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Aa(vle,ble,"app");const{document:uo}=Yu;function YT(n){let e,t;return e=new Bre({props:{show:n[53],$$slots:{default:[_le]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s[1]&4194304&&(r.show=i[53]),s[0]&2147352575|s[1]&4194303|s[2]&512&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function JT(n){let e,t;return e=new sle({props:{unlockedClasses:n[7],classXP:n[6],weaponXP:n[12],onUpdateClassXP:n[33],onUpdateWeaponXP:n[34],customCombatArts:n[47],customCombatSkills:n[48],customWeapons:n[49],playerSkillProficiency:n[15],playerSkillBonus:n[50],playerStats:n[51],playerName:n[16],onUpdatePlayerStats:n[44],onUpdateCustomCombatArts:n[29],onUpdateCustomCombatSkills:n[28],onUpdateCustomWeapons:n[30],equippedClass:n[9]}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s[0]&128&&(r.unlockedClasses=i[7]),s[0]&64&&(r.classXP=i[6]),s[0]&4096&&(r.weaponXP=i[12]),s[1]&4&&(r.onUpdateClassXP=i[33]),s[1]&8&&(r.onUpdateWeaponXP=i[34]),s[1]&65536&&(r.customCombatArts=i[47]),s[1]&131072&&(r.customCombatSkills=i[48]),s[1]&262144&&(r.customWeapons=i[49]),s[0]&32768&&(r.playerSkillProficiency=i[15]),s[1]&524288&&(r.playerSkillBonus=i[50]),s[1]&1048576&&(r.playerStats=i[51]),s[0]&65536&&(r.playerName=i[16]),s[1]&8192&&(r.onUpdatePlayerStats=i[44]),s[0]&536870912&&(r.onUpdateCustomCombatArts=i[29]),s[0]&268435456&&(r.onUpdateCustomCombatSkills=i[28]),s[0]&1073741824&&(r.onUpdateCustomWeapons=i[30]),s[0]&512&&(r.equippedClass=i[9]),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function ZT(n){let e,t;return e=new bse({props:{fullSheet:n[0],onChangeSheet:n[45]}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s[0]&1&&(r.fullSheet=i[0]),s[1]&16384&&(r.onChangeSheet=i[45]),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function xT(n){let e,t;return e=new dle({}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function $T(n){let e,t;return e=new gle({props:{onAddSheet:n[27],otherSheetNames:n[3],curSheet:n[2],onChangeCurSheet:n[54]}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s[0]&134217728&&(r.onAddSheet=i[27]),s[0]&8&&(r.otherSheetNames=i[3]),s[0]&4&&(r.curSheet=i[2]),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function eI(n){let e,t;return e=new z4({props:{chatEntries:n[4],spoilersOn:n[5],toggleSpoilersOn:n[23],alreadyRevealed:n[22],setAlreadyRevealed:n[55]}}),{c(){ce(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s[0]&16&&(r.chatEntries=i[4]),s[0]&32&&(r.spoilersOn=i[5]),s[0]&8388608&&(r.toggleSpoilersOn=i[23]),s[0]&4194304&&(r.alreadyRevealed=i[22]),e.$set(r)},i(i){t||(D(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function _le(n){let e,t,i,s,r,l,o,a,c,u,f,h,d,p,v,y,b,S,I,T,C,k,R,O,N,F;r=new Tre({props:{playerName:n[16],onUpdatePlayerName:n[43],fullSheet:n[0],onChangePage:n[35],currentPage:n[20],homeMode:n[21],toggleHomeMode:n[52],otherSheetNames:n[3],curSheet:n[2],onChangeCurSheet:n[54]}}),c=new wre({props:{playerName:n[16],homeMode:n[21],allWeapons:n[26],allCombatSkills:n[8],allCombatArts:n[25],playerStats:n[51],onUpdatePlayerStats:n[44],playerSkillBonus:n[50],playerSkillProficiency:n[15],onToggleSkillProficiency:n[42],equippedWeapons:n[13],onToggleEquippedWeapons:n[37],equippedCombatArts:n[14],onToggleCombatArts:n[38],equippedClass:n[9],setEquippedClass:n[41],equippedCombatSkills:n[11],onToggleCombatSkill:n[10],unlockedClasses:n[7],onUpdateUnlockedClasses:n[36],masteredClasses:n[24],playerCrest:n[46],onUpdateCrest:n[32],selectedCombatArt:n[18],setSelectedCombatArt:n[39],selectedWeapon:n[19],setSelectedWeapon:n[40],weaponUses:n[1],onUpdateWeaponUses:n[31],customCombatSkills:n[48],onUpdateCustomCombatSkills:n[28],customWeapons:n[49],onUpdateCustomWeapons:n[30],customCombatArts:n[47],onUpdateCustomCombatArts:n[29],chatEntries:n[4],spoilersOn:n[5],toggleSpoilersOn:n[23],alreadyRevealed:n[22],setAlreadyRevealed:n[55]}});let W=n[20]==="XP"&&JT(n),z=n[20]==="EDITOR"&&ZT(n),Y=n[20]==="DICE_EDITOR"&&xT(),H=n[20]==="OTHER_SHEETS"&&$T(n),K=n[20]==="ROLLS"&&eI(n);return{c(){e=E("div"),t=E("span"),i=P(),s=E("div"),ce(r.$$.fragment),l=P(),o=E("div"),a=E("div"),ce(c.$$.fragment),f=P(),h=E("div"),W&&W.c(),p=P(),v=E("div"),z&&z.c(),b=P(),S=E("div"),Y&&Y.c(),T=P(),C=E("div"),H&&H.c(),R=P(),O=E("div"),K&&K.c(),this.h()},l(j){e=A(j,"DIV",{id:!0,class:!0});var J=w(e);t=A(J,"SPAN",{id:!0,class:!0}),w(t).forEach(g),J.forEach(g),i=M(j),s=A(j,"DIV",{class:!0});var Z=w(s);ge(r.$$.fragment,Z),Z.forEach(g),l=M(j),o=A(j,"DIV",{class:!0});var q=w(o);a=A(q,"DIV",{class:!0});var X=w(a);ge(c.$$.fragment,X),X.forEach(g),f=M(q),h=A(q,"DIV",{class:!0});var ne=w(h);W&&W.l(ne),ne.forEach(g),p=M(q),v=A(q,"DIV",{class:!0});var Q=w(v);z&&z.l(Q),Q.forEach(g),b=M(q),S=A(q,"DIV",{class:!0});var re=w(S);Y&&Y.l(re),re.forEach(g),T=M(q),C=A(q,"DIV",{class:!0});var be=w(C);H&&H.l(be),be.forEach(g),R=M(q),O=A(q,"DIV",{class:!0});var le=w(O);K&&K.l(le),le.forEach(g),q.forEach(g),this.h()},h(){_(t,"id","dice-box-result"),_(t,"class","svelte-1l595ii"),_(e,"id","dice-box"),_(e,"class","svelte-1l595ii"),_(s,"class","header svelte-1l595ii"),_(a,"class",u=Ze(n[20]==="HOME"?"":"invisible")+" svelte-1l595ii"),_(h,"class",d=Ze(n[20]==="XP"?"":"invisible")+" svelte-1l595ii"),_(v,"class",y=Ze(n[20]==="EDITOR"?"":"invisible")+" svelte-1l595ii"),_(S,"class",I=Ze(n[20]==="DICE_EDITOR"?"":"invisible")+" svelte-1l595ii"),_(C,"class",k=Ze(n[20]==="OTHER_SHEETS"?"":"invisible")+" svelte-1l595ii"),_(O,"class",N=Ze(n[20]==="ROLLS"?"":"invisible")+" svelte-1l595ii"),_(o,"class","content svelte-1l595ii")},m(j,J){B(j,e,J),m(e,t),B(j,i,J),B(j,s,J),ue(r,s,null),B(j,l,J),B(j,o,J),m(o,a),ue(c,a,null),m(o,f),m(o,h),W&&W.m(h,null),m(o,p),m(o,v),z&&z.m(v,null),m(o,b),m(o,S),Y&&Y.m(S,null),m(o,T),m(o,C),H&&H.m(C,null),m(o,R),m(o,O),K&&K.m(O,null),F=!0},p(j,J){const Z={};J[0]&65536&&(Z.playerName=j[16]),J[1]&4096&&(Z.onUpdatePlayerName=j[43]),J[0]&1&&(Z.fullSheet=j[0]),J[1]&16&&(Z.onChangePage=j[35]),J[0]&1048576&&(Z.currentPage=j[20]),J[0]&2097152&&(Z.homeMode=j[21]),J[1]&2097152&&(Z.toggleHomeMode=j[52]),J[0]&8&&(Z.otherSheetNames=j[3]),J[0]&4&&(Z.curSheet=j[2]),r.$set(Z);const q={};J[0]&65536&&(q.playerName=j[16]),J[0]&2097152&&(q.homeMode=j[21]),J[0]&67108864&&(q.allWeapons=j[26]),J[0]&256&&(q.allCombatSkills=j[8]),J[0]&33554432&&(q.allCombatArts=j[25]),J[1]&1048576&&(q.playerStats=j[51]),J[1]&8192&&(q.onUpdatePlayerStats=j[44]),J[1]&524288&&(q.playerSkillBonus=j[50]),J[0]&32768&&(q.playerSkillProficiency=j[15]),J[1]&2048&&(q.onToggleSkillProficiency=j[42]),J[0]&8192&&(q.equippedWeapons=j[13]),J[1]&64&&(q.onToggleEquippedWeapons=j[37]),J[0]&16384&&(q.equippedCombatArts=j[14]),J[1]&128&&(q.onToggleCombatArts=j[38]),J[0]&512&&(q.equippedClass=j[9]),J[1]&1024&&(q.setEquippedClass=j[41]),J[0]&2048&&(q.equippedCombatSkills=j[11]),J[0]&1024&&(q.onToggleCombatSkill=j[10]),J[0]&128&&(q.unlockedClasses=j[7]),J[1]&32&&(q.onUpdateUnlockedClasses=j[36]),J[0]&16777216&&(q.masteredClasses=j[24]),J[1]&32768&&(q.playerCrest=j[46]),J[1]&2&&(q.onUpdateCrest=j[32]),J[0]&262144&&(q.selectedCombatArt=j[18]),J[1]&256&&(q.setSelectedCombatArt=j[39]),J[0]&524288&&(q.selectedWeapon=j[19]),J[1]&512&&(q.setSelectedWeapon=j[40]),J[0]&2&&(q.weaponUses=j[1]),J[1]&1&&(q.onUpdateWeaponUses=j[31]),J[1]&131072&&(q.customCombatSkills=j[48]),J[0]&268435456&&(q.onUpdateCustomCombatSkills=j[28]),J[1]&262144&&(q.customWeapons=j[49]),J[0]&1073741824&&(q.onUpdateCustomWeapons=j[30]),J[1]&65536&&(q.customCombatArts=j[47]),J[0]&536870912&&(q.onUpdateCustomCombatArts=j[29]),J[0]&16&&(q.chatEntries=j[4]),J[0]&32&&(q.spoilersOn=j[5]),J[0]&8388608&&(q.toggleSpoilersOn=j[23]),J[0]&4194304&&(q.alreadyRevealed=j[22]),c.$set(q),(!F||J[0]&1048576&&u!==(u=Ze(j[20]==="HOME"?"":"invisible")+" svelte-1l595ii"))&&_(a,"class",u),j[20]==="XP"?W?(W.p(j,J),J[0]&1048576&&D(W,1)):(W=JT(j),W.c(),D(W,1),W.m(h,null)):W&&(Le(),U(W,1,1,()=>{W=null}),Ve()),(!F||J[0]&1048576&&d!==(d=Ze(j[20]==="XP"?"":"invisible")+" svelte-1l595ii"))&&_(h,"class",d),j[20]==="EDITOR"?z?(z.p(j,J),J[0]&1048576&&D(z,1)):(z=ZT(j),z.c(),D(z,1),z.m(v,null)):z&&(Le(),U(z,1,1,()=>{z=null}),Ve()),(!F||J[0]&1048576&&y!==(y=Ze(j[20]==="EDITOR"?"":"invisible")+" svelte-1l595ii"))&&_(v,"class",y),j[20]==="DICE_EDITOR"?Y?J[0]&1048576&&D(Y,1):(Y=xT(),Y.c(),D(Y,1),Y.m(S,null)):Y&&(Le(),U(Y,1,1,()=>{Y=null}),Ve()),(!F||J[0]&1048576&&I!==(I=Ze(j[20]==="DICE_EDITOR"?"":"invisible")+" svelte-1l595ii"))&&_(S,"class",I),j[20]==="OTHER_SHEETS"?H?(H.p(j,J),J[0]&1048576&&D(H,1)):(H=$T(j),H.c(),D(H,1),H.m(C,null)):H&&(Le(),U(H,1,1,()=>{H=null}),Ve()),(!F||J[0]&1048576&&k!==(k=Ze(j[20]==="OTHER_SHEETS"?"":"invisible")+" svelte-1l595ii"))&&_(C,"class",k),j[20]==="ROLLS"?K?(K.p(j,J),J[0]&1048576&&D(K,1)):(K=eI(j),K.c(),D(K,1),K.m(O,null)):K&&(Le(),U(K,1,1,()=>{K=null}),Ve()),(!F||J[0]&1048576&&N!==(N=Ze(j[20]==="ROLLS"?"":"invisible")+" svelte-1l595ii"))&&_(O,"class",N)},i(j){F||(D(r.$$.fragment,j),D(c.$$.fragment,j),D(W),D(z),D(Y),D(H),D(K),F=!0)},o(j){U(r.$$.fragment,j),U(c.$$.fragment,j),U(W),U(z),U(Y),U(H),U(K),F=!1},d(j){j&&g(e),j&&g(i),j&&g(s),fe(r),j&&g(l),j&&g(o),fe(c),W&&W.d(),z&&z.d(),Y&&Y.d(),H&&H.d(),K&&K.d()}}}function tI(n){let e,t;return{c(){e=E("div"),t=L("Loading"),this.h()},l(i){e=A(i,"DIV",{class:!0});var s=w(e);t=V(s,"Loading"),s.forEach(g),this.h()},h(){_(e,"class","not-ready svelte-1l595ii")},m(i,s){B(i,e,s),m(e,t)},d(i){i&&g(e)}}}function yle(n){let e,t,i,s,r,l,o,a,c,u;uo.title=r=n[16];let f=n[17]&&YT(n),h=!n[17]&&tI();return{c(){e=E("link"),t=E("link"),i=E("link"),s=E("link"),l=P(),o=E("div"),f&&f.c(),a=P(),h&&h.c(),this.h()},l(d){const p=U5("svelte-18uo9c5",uo.head);e=A(p,"LINK",{rel:!0,href:!0}),t=A(p,"LINK",{rel:!0,href:!0}),i=A(p,"LINK",{href:!0,rel:!0}),s=A(p,"LINK",{rel:!0,type:!0,href:!0}),p.forEach(g),l=M(d),o=A(d,"DIV",{class:!0});var v=w(o);f&&f.l(v),a=M(v),h&&h.l(v),v.forEach(g),this.h()},h(){_(e,"rel","preconnect"),_(e,"href","https://fonts.googleapis.com"),_(t,"rel","preconnect"),_(t,"href","https://fonts.gstatic.com"),_(i,"href","https://fonts.googleapis.com/css2?family=EB+Garamond:wght@400;500;600;700&family=Ibarra+Real+Nova:wght@400;500;700&display=swap&family=Great+Vibes&display=swap"),_(i,"rel","stylesheet"),_(s,"rel","icon"),_(s,"type","image/x-icon"),_(s,"href","/favicon.jpg"),_(o,"class",c=Ze(`${n[17]?"":"no-clicks"} container`)+" svelte-1l595ii")},m(d,p){m(uo.head,e),m(uo.head,t),m(uo.head,i),m(uo.head,s),B(d,l,p),B(d,o,p),f&&f.m(o,null),m(o,a),h&&h.m(o,null),u=!0},p(d,p){(!u||p[0]&65536)&&r!==(r=d[16])&&(uo.title=r),d[17]?f?(f.p(d,p),p[0]&131072&&D(f,1)):(f=YT(d),f.c(),D(f,1),f.m(o,a)):f&&(Le(),U(f,1,1,()=>{f=null}),Ve()),d[17]?h&&(h.d(1),h=null):h||(h=tI(),h.c(),h.m(o,null)),(!u||p[0]&131072&&c!==(c=Ze(`${d[17]?"":"no-clicks"} container`)+" svelte-1l595ii"))&&_(o,"class",c)},i(d){u||(D(f),u=!0)},o(d){U(f),u=!1},d(d){g(e),g(t),g(i),g(s),d&&g(l),d&&g(o),f&&f.d(),h&&h.d()}}}function Sle(n,e,t){let i,s,r,l,o,a,c,u,f,h,d,p,v,y,b,S,I,T,C,k,R,O,N,F,W,z,Y,H,K,j,J,Z,q,X,ne,Q,re,be,le,he,Ie,G,ve,je;W5(n,Ire,Se=>t(53,je=Se));const Oe=fI({apiKey:"AIzaSyBds7SmknRyVNwc5XTC6TvFzQoR_ACsLTo",authDomain:"fe3h-sheet.firebaseapp.com",projectId:"fe3h-sheet",storageBucket:"fe3h-sheet.appspot.com",messagingSenderId:"149307616871",appId:"1:149307616871:web:1038f39d161deeb9372ec2"}),_e=1e3*60*60*24,Ee=new Date(Date.now()-_e),He=JL(Oe);Jd(hs.DB,He);const We={playerStats:Ev,playerName:"No Name",playerSkills:H4,skillBonuses:q4,unlockedClasses:[],customWeapons:{},customCombatSkills:{},customCombatArts:{},classXP:{},weaponXP:{},crest:{type:"",isMajor:!1},equippedClass:"",equippedWeapons:[],equippedCombatSkills:[],equippedCombatArts:[]};let Qe=!1,we=We,Me,de,Ae={},Re="HOME",Ne="sheet",Ge=[],pe=[],Fe=0;const ae=a8(b4(He,"lobby","taboola",P4()),c8("date",">",fi.fromDate(Ee))),ke=g8(ae,Se=>{const ze=[];Se.forEach(ye=>{ze.push(ye.data())}),t(4,pe=ze)});br(()=>{ke()});const oe=Se=>{try{t(3,Ge=JSON.parse(localStorage.getItem("otherSheetNames")||"[]"))}catch(ye){console.log(ye)}const ze=localStorage.getItem(Se);if(ze)try{t(0,we={...We,...JSON.parse(ze)})}catch(ye){console.error(ye)}else t(0,we={...We,playerName:Se})},at=Se=>{t(2,Ne=Se),I(),oe(Se),localStorage.setItem(Ne,JSON.stringify(we))};Mi(()=>{oe(Ne),t(17,Qe=!0),C0(()=>import("../../chunks/dice-box.es-150bdd15.js"),["../../chunks/dice-box.es-150bdd15.js","../../chunks/preload-helper-41c905a7.js"],import.meta.url).then(Se=>{let ze;try{ze=JSON.parse(localStorage.getItem("diceBoxOptions")||"{}")}catch(ut){console.log(ut)}const ye=new Se.default("#dice-box",{...Fc,...ze});window.diceBoxContainer=document.getElementById("dice-box"),ye.init().then(()=>{window.diceBox=ye})})});let qe=1/0,me={};const ot=Se=>{t(22,me[Se]=!0,me)};return n.$$.update=()=>{n.$$.dirty[0]&2097152&&t(52,i=()=>{t(21,Fe+=1)}),n.$$.dirty[0]&4|n.$$.dirty[1]&67108864&&t(45,T=Se=>{I(),t(0,we=Se),localStorage.setItem(Ne,JSON.stringify(Se))}),n.$$.dirty[0]&5&&t(56,C=(Se,ze)=>{t(0,we={...we,[Se]:ze}),localStorage.setItem(Ne,JSON.stringify(we))}),n.$$.dirty[0]&1&&t(51,s=we.playerStats),n.$$.dirty[0]&1&&t(15,r=we.playerSkills),n.$$.dirty[0]&1&&t(50,l=we.skillBonuses),n.$$.dirty[0]&1&&t(7,o=we.unlockedClasses),n.$$.dirty[0]&1&&t(16,a=we.playerName),n.$$.dirty[0]&1&&t(49,c=we.customWeapons),n.$$.dirty[0]&1&&t(48,u=we.customCombatSkills),n.$$.dirty[0]&1&&t(47,f=we.customCombatArts),n.$$.dirty[0]&1&&t(6,h=we.classXP),n.$$.dirty[0]&1&&t(12,d=we.weaponXP),n.$$.dirty[0]&1&&t(46,p=we.crest),n.$$.dirty[0]&1&&t(9,v=we.equippedClass),n.$$.dirty[0]&1&&t(13,y=we.equippedWeapons),n.$$.dirty[0]&1&&t(11,b=we.equippedCombatSkills),n.$$.dirty[0]&1&&t(14,S=we.equippedCombatArts),n.$$.dirty[1]&33554432&&t(44,k=Se=>{C("playerStats",Se)}),n.$$.dirty[1]&33554432&&t(43,R=Se=>{C("playerName",Se)}),n.$$.dirty[0]&32768|n.$$.dirty[1]&33554432&&t(42,O=Se=>{const ze=r[Se]||jn.NONE;let ye;ze===jn.NONE?ye=jn.PROFICIENT:ze===jn.PROFICIENT?ye=jn.EXPERT:ze===jn.EXPERT?ye=jn.AWFUL:ze===jn.AWFUL&&(ye=jn.NONE),C("playerSkills",{...r,[Se]:ye})}),n.$$.dirty[0]&512|n.$$.dirty[1]&33554432&&t(41,N=Se=>{t(9,v=Se),C("equippedClass",v)}),n.$$.dirty[0]&16384|n.$$.dirty[1]&33554432&&t(38,z=Se=>{S.indexOf(Se)!==-1?t(14,S=S.filter(ze=>ze!==Se)):S.length<dl&&t(14,S=[...S,Se]),C("equippedCombatArts",S)}),n.$$.dirty[0]&2048|n.$$.dirty[1]&33554432&&t(10,Y=Se=>{b.indexOf(Se)!==-1?t(11,b=b.filter(ze=>ze!==Se)):b.length<ml&&t(11,b=[...b,Se]),C("equippedCombatSkills",b)}),n.$$.dirty[0]&8192|n.$$.dirty[1]&33554432&&t(37,H=Se=>{y.includes(Se)?t(13,y=y.filter(ze=>ze!==Se)):y.length<Uo&&t(13,y=[...y,Se]),C("equippedWeapons",y)}),n.$$.dirty[1]&33554432&&t(36,K=Se=>{const ze=Object.values(kn),ye=[...Se].sort((ut,Bt)=>{const gt=ze.indexOf(ut),Ot=ze.indexOf(Bt);return gt>Ot?1:-1});C("unlockedClasses",ye)}),n.$$.dirty[0]&4096|n.$$.dirty[1]&33554432&&t(34,J=(Se,ze,ye,ut)=>{C("weaponXP",{...d,[Se]:{total:ze,level:ye,mastered:ut}})}),n.$$.dirty[0]&64|n.$$.dirty[1]&33554432&&t(33,Z=(Se,ze,ye)=>{C("classXP",{...h,[Se]:{total:ze,mastered:ye}})}),n.$$.dirty[1]&33554432&&t(32,q=Se=>{C("crest",Se)}),n.$$.dirty[0]&2&&t(31,X=(Se,ze)=>{let ye=ze;ze<0&&(ye=Ae[Se]+ze),ye=Math.max(ye,0),t(1,Ae={...Ae,[Se]:ye})}),n.$$.dirty[1]&33554432&&t(30,ne=Se=>{C("customWeapons",Se)}),n.$$.dirty[1]&33554432&&t(29,Q=Se=>{C("customCombatArts",Se)}),n.$$.dirty[1]&33554432&&t(28,re=Se=>{C("customCombatSkills",Se)}),n.$$.dirty[0]&8&&t(27,be=Se=>{t(3,Ge=[...Ge,Se]),localStorage.setItem("otherSheetNames",JSON.stringify(Ge)),at(Se)}),n.$$.dirty[0]&513&&t(26,le=rle(we,v)),n.$$.dirty[0]&3585&&t(8,he=ole(we,v,b,Y)),n.$$.dirty[0]&769&&t(25,Ie=cle(we,v,he.fullSet)),n.$$.dirty[0]&192&&t(24,G=o.filter(Se=>{var ze;return(ze=h[Se])==null?void 0:ze.mastered})),n.$$.dirty[0]&48&&t(23,ve=()=>{qe===1/0?t(5,qe=pe.length):t(5,qe=1/0)})},t(57,I=()=>{t(9,v=""),t(13,y=[]),t(11,b=[]),t(14,S=[]),t(18,Me=""),t(19,de=""),t(1,Ae={})}),t(40,F=Se=>{t(19,de=Se)}),t(39,W=Se=>{t(18,Me=Se)}),t(35,j=Se=>{t(20,Re=Se)}),[we,Ae,Ne,Ge,pe,qe,h,o,he,v,Y,b,d,y,S,r,a,Qe,Me,de,Re,Fe,me,ve,G,Ie,le,be,re,Q,ne,X,q,Z,J,j,K,H,z,W,F,N,O,R,k,T,p,f,u,c,l,s,i,je,at,ot,C,I]}class Ole extends nt{constructor(e){super(),it(this,e,Sle,yle,Ct,{},null,[-1,-1,-1])}}export{Ole as default};
